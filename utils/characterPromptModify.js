(function(_0xf9c055,_0x5605a7){function _0x5eb0c5(_0x279857,_0x19ac77,_0x11794a,_0x667ca3){return _0x18ce(_0x667ca3-0x18,_0x19ac77);}function _0x5c81f2(_0x5b914f,_0x2595c9,_0x2d3f59,_0x1863bc){return _0x18ce(_0x5b914f- -0x9e,_0x1863bc);}const _0x4bf4e1=_0xf9c055();while(!![]){try{const _0x4c4c5d=-parseInt(_0x5c81f2(0x20a,0x1c4,0x1df,0x19e))/(-0x65d*0x6+0x15*-0xac+0x344b)*(-parseInt(_0x5eb0c5(0x277,0x379,0x38d,0x2db))/(0x123f+0x133b+0x2*-0x12bc))+-parseInt(_0x5c81f2(0x192,0x255,0xb7,0xcd))/(0x5*0x22d+-0x23*0x10a+0x1980)+parseInt(_0x5eb0c5(0x2a4,0x2de,0x3be,0x33c))/(0x54*0x1a+0xb19+-0x139d*0x1)*(parseInt(_0x5eb0c5(0x1d1,0x29a,0x2c1,0x247))/(0xad*0x15+-0x1404+-0x176*-0x4))+parseInt(_0x5eb0c5(0x282,0x2d6,0x387,0x323))/(0x1*-0x557+0x192f+-0x9e9*0x2)*(parseInt(_0x5c81f2(0x25f,0x27e,0x280,0x307))/(-0x10ee+-0x1be*0x6+0x1b69))+-parseInt(_0x5eb0c5(0x2e0,0x3d7,0x3c9,0x322))/(-0x21fe+0x8*0x182+-0x2*-0xafb)+-parseInt(_0x5eb0c5(0x21b,0x23e,0x1f3,0x24b))/(-0x89b*-0x2+-0x53*0x68+-0x23*-0x79)+-parseInt(_0x5eb0c5(0x23c,0x2ed,0x1a7,0x236))/(0x1805+0x52*-0x61+0x717)*(-parseInt(_0x5c81f2(0x1c0,0x20f,0x131,0x170))/(-0x5fb*0x5+0x177c+0x676));if(_0x4c4c5d===_0x5605a7)break;else _0x4bf4e1['push'](_0x4bf4e1['shift']());}catch(_0x406e0d){_0x4bf4e1['push'](_0x4bf4e1['shift']());}}}(_0xde5c,0xb4031+-0x5677c+-0xa*-0xad45));const _0x2d2806=(function(){let _0x579df0=!![];return function(_0x29a20,_0x220bae){const _0x198459=_0x579df0?function(){function _0x5dbdbe(_0x292ee3,_0x1c82ec,_0x1f423e,_0x1aacb9){return _0x18ce(_0x1aacb9-0x9e,_0x292ee3);}if(_0x220bae){const _0xf81b96=_0x220bae[_0x5dbdbe(0x2ff,0x245,0x31d,0x2e0)](_0x29a20,arguments);return _0x220bae=null,_0xf81b96;}}:function(){};return _0x579df0=![],_0x198459;};}()),_0x127bcf=_0x2d2806(this,function(){function _0x3dd52d(_0x3705da,_0x2fb726,_0xbbb378,_0x4b2493){return _0x18ce(_0x4b2493-0xa2,_0x3705da);}const _0x260831={};_0x260831[_0x3dd52d(0x390,0x3c5,0x398,0x392)]='(((.+)+)+)'+'+$';function _0x13ee5d(_0x343a23,_0x248fd6,_0x544ca3,_0x1bab87){return _0x18ce(_0x544ca3- -0x38f,_0x1bab87);}const _0x41a5e4=_0x260831;return _0x127bcf['toString']()[_0x3dd52d(0x3c0,0x380,0x30d,0x34b)](_0x41a5e4['DDnIk'])[_0x13ee5d(-0x28b,-0x1dc,-0x20d,-0x1e0)]()['constructo'+'r'](_0x127bcf)['search'](_0x3dd52d(0x2d7,0x250,0x16a,0x242)+'+$');});_0x127bcf();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';function _0xde5c(){const _0x27b73b=['DhjPBq','r2Hruhq','AgXSzwi','5lIT5PAh5zcn56EWoIa','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','wurIAeK','qwLfuMy','s2j6B3K','5lIk5y2k6lQRtLngvW','t05trq','DwvZDc4UlG','qwjAyMW','zxHLyW','vMj1C3u','yxv0BW','zxjYB3i','vMLTD2C','rKHNwNG','mZq2ntaYsMjIqwHP','y2HHCMfJDgvYva','wgTesKC','wuvPCMS','qKXvwgu','BNzlzhy','DxbWzxjcB2r5qG','B3v0zML0uhjLCW','yxr4Auu','t0rjrLLFuKvtua','qu5MEhu','5lIl5y2k6lQRtLngv+IdJoMDOJO','5y+c6icd5zU+54Mh','zxjLzcK6','r0HmEuS','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','uMHNANO','zxiGChjVBxb0ia','5lIl5y2k6lQRu0zx6iom6z2I','CMfJDgvYl291Da','DuXNuLu','BgfxB3C','BNvJqMW','q3fPve0','6kEs6iMY54M55B6boIa','5lIl5y2k6lQRtLngvZOG','ruffCwe','Dgv4Da','AureAMy','5lIl5y2k6lQRtLngv+IdJoMDOG','CMvZDwX0','DxjLC0jHy2S','zNLDie5VignOyq','weHNtMC','zNLDioINO+AEKowiSoEAHoACJEIJHq','r25du2C','zM9YrwfJAa','vKLSAfC','5Qoa5Rwl5yIW6kEs6iMYici','CMvZzxrjza','AvPNuKS','B2jQzwn0','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','CuT2svy','t0rjrLLFuKvrvq','rerUswS','CMvTB3zLtgLZDa','wgvHsfu','z1nIs1e','re1XyMm','Bufes3q','tePzBLK','zNLDiev4zwn1Da','Bur0s0u','DgrWwLu','teXnioIVT+AXGUwKSEI0Pq','BxLgz1G','u0zxqMfJAW','mZyXndCWovLsAhrQta','tuvxCw4','DgLUzYbJAgfYia','CffYA0K','CunNEuS','5Rgc6lAf5PE2','y2HHCL8','AxnbCNjHEq','C1r1u00','vMXyEem','v1zxB1y','zxrZ','DMzqBNO','mtaYnte5nZzNzKzWsxy','mtHWrgPbq0S','reXwwKK','revHEvy','5lIk5y2k6lQRtLngv+IdJoMDOG','B3jIDu0','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','rwrzDM8','s0nKEfq','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','vgfIBva','t0Xwzge','z2v0rwXLBwvUDa','t1HxvhG','BLf4B2q','Aw5NignOyxiGBq','uvvlrwS','DNfrzvG','t0rjrLLFr0vuxW','ufjptvbux1jfuW','C29YDa','yuLnA3u','zNLDifn0yxj0Aq','wfjyzw8','zNLDienOyxjHyW','EvbfwwK','mZe2D01HAeHu','twzOvhe','DgvYihrYAwDNzq','r0rTrxi','swjmvKS','Bw9KAwz5ihbYBW','D2PYvMO','B3v0zML0','DhjPz2DLCG','5BEY5y+w5RAi5PU05PAW','BwvZC2fNzsbHDa','uurdBM8','y2HHCMfJDgvYua','DgLTzw91De1Z','qvrjANa','teXnioI/LowBNUE7K+AENos4UUEPUG','BwvZC2fNzq','AfPfwMK','BLnKzvm','6kEs6iMYl+ACJEIJHEApKoEKUUIVJEs/RUAuUq','Dg9mB3DLCKnHCW','Dg9tDhjPBMC','yK5Iuwq','BeXcu2W','B3vUzcbPBIbVDq','zxf1AxjLBwvUDa','BMC6','CIb0zxH0oG','BufWwgm','ue9ou0u','zgv0ywLS','zw5LCG','5PwW5O2UoG','sgftA2u','wNzMwwq','DxjLCW','zNLDifjLCxvLCW','uhbSqva','twrnt3i','rdOG','tg9Pzvi','zNLDiow3SUABToAwSoINKUIjSUMIHa','Bwf0y2HLze91Da','ywrK','C3rHCNrZv2L0Aa','shfOEMy','q0z2zxO','ufjptvbux1jfuq','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','AunyqNu','DMfSDwu','kcGOlISPkYKRkq','DKLuteK','qKL4EKm','BMfTzuvo','qNj3wfu','qu5ls3e','qLbftuG','zNLDifnHDMvKia','ue1Mshi','D2fYBMLUzW','E3VLVzpLIy3OP5lOIBj9Fq','uu1HAgm','Aw5JBhvKzxm','igLUzgv4','zw1PDa','y3rLCG','BMXeue8','yLDSA2W','tsbVDxrWDxqGzG','zNLDien1CNjLBG','5lIk5y2k6lQRtLngv+IdJoMDOJO','ufzcCgK','zgf0yq','DMfYAwfIBgvZ','zgf0ytPPBwfNzq','zNvSBejVzhLouW','CMvZzxrZ','5lIl5y2k6lQR','5Qoa5Rwl5yIW5PAW5PYn6kofici','y25csw8','vNrrq0O','ywnR','t1rnzK8','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','BgntBKq','AfPtu1C','lxrHyI1JAgfYyq','5lIk5y2k6lQRu0zx6iom6z2IoIa','DgvKigrHDge6','5PYQ5zYOieXmtsdOVPpLH7RKUk0','DwTmwfK','Bxj2vuO','wvbhtuG','qNHquKm','z21UDuC','Den1req','zNLDioACJEIJHsaI','B0feq1G','w2nOyxjHy3rLCG','zMLSDgvY','5lIl5y2k6lQRu0zxoIa','sfb2uKi','5A2x5Q61ici','DhLWzq','Cg9ZAxrPB24','y2HHCMfJDgvY','CxDdEue','Bw9KAwz5ihjLCq','y29UDgv4DdO','sKLfsLK','B2rPzNKGteXnia','EMvNALi','5B2s5BgE5lQ6','uK9bBuW','iIdMSQhMNiNLJ5JMM7q','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','C3rYAw5N','rNrfEhG','BNjxqK8','ExfWD3C','Bg9N','q29UDgv4Da','rgjzC3e','vu5HtLe','5lIl5y2k6lQRu0zx6iom6z2IoIa','CMvXDwvZDcaOsq','AfH6tgm','rKT4AeW','zMfJAwfSrMvHDa','yMfZzty0','A290tvu','y29UC3rYDwn0BW','BMfTzuno','uhLHu3m','5lQu5A6y5Asw6lkm','AKHKExy','rMjLtvC','D29YBgqGyM9VAW','sfDRtLy','l3bUzZTIyxnLnG','5lIk5y2k6lQRtLngvZOG','5lIl5y2k6lQRu0zx','q3D0DM8','iIZMMk/LKkBLVzxLHAu/','zvvUqNC','r0PbC00','zNLDief0DgfJAa','zKPfvee','wLP2uLG','C0XTr3K','uuDIEwu','5Qoa5Rwl5yIW5PYn6kofici','5lIk5y2k6lQR6iom6z2I','tgnNyNy','s0PMC1u','iIdMNiKG','zNLDiev4DhjHyW','BMCGy2HHCMfJDa','CufWsLK','EvzUr2K','vMDoB2O','qxrssve','5lIl5y2k6lQRtLngvW','wMvAueu','A29As3q','v1noDfi','uhjVBxb0tw9KAq','C3vIC3rYAw5N','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','uKX2zgC','ig1LC3nHz2uGAq','DxjS','BuftBfG','vgfUD2u','Dhb1Da','u0zx','mty4mdeZmengtvDLCG','AxHvquC','B3v0zML0CW','t0rQrxG','B2HUzgC','5lIk5y2k6lQR','CMfUzg9Tvvvjra','vgDpy08','wMfOs0G','uMnvzve','zxH0icH0CMLNzW','zNLDioINO+AEKowiSoEAHos6UUEjQq','rLDcywnR','DenorLu','sevouKS','t3fry0q','6iUX5PAh5zcn56EWoIa','mZmXndvbDK50CeG','mtC4nda0m2vMrhnRCq','yunqsxC','AM9PBG','nJq3mZyWmxvxtvHpwG','r2nAyxe','B3iGzgvIDwDNAq','uKT6zNy','zfrYwfi','wMnzC2W','5lIT5PAh5zcn56EW','y2HHDe1LDgfKyq','zNLDievYCM9YoG','DxbWzxjcB2r5uW','zNHQC0C','BMfTzq','Ae1ACMC','ChjVBxb0oG','Aw5WDxq','yxbWBhK','6iUX5PAh5zcn56EW','y29UDgvUDa','suPRAwe','6kkR5l2/55sO77YA','5lIl5y2k6lQR6iom6z2I','CwXjvNm','CMfPDhm','E3VNLkJMIlFPNidMSyj9Fq','pc/KURRNIAK+','B25rueC','ChjVBxb0','zxriDK0','B3DUzxi','EerTswe','AgzbsK8','DLvptu0','s3jMsue','DxbWzxjcB2r5','AujnwvO','DujSCLG','Dhb1DdO','wNzRBee','B014r1i','5lQu5A6y5Asw6lkm6iom6z2I','v0jHy2S','whLYueK','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','nZDqC0Dzte0','iIdLT7lLVzlLSz7LIldOP5lOIBiGiG','Aw5MBW','5lQu5A6y5Asw6lkm6iom6z2IoIa','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','BgvUz3rO','zNvSBejVzhK','zwnHCKu','zNvSBejVzhLtrG','BwjRtuu','y2HHCMfJDgvYCW','DMfYAwfIBgvZoG','Aw1Hz2vFDxjS','veD0rfi','zKrKvxq','ANLXsvG','sMLWu2y','uxrSyuG','sxjYC1G','Bxb0icHjrdOG','q3DLAuC','CMvWBgfJzufSBa','zNLDiow3SUwiM+w7UUACJEIJHEMIHa','v0TlBfa','C3bSAxq','wvrhEuG','thf0wLq','rvjHALu','zNLDifjHDYbmta','z2vUzxjHDgLVBG','teXnx0niqvjFtq','rNzcvxa','ChvZAa','5lIk5y2k6lQRu0zx6iom6z2I','zuTYy0q','CvPIDMm','BMrLEdO','D3v6BNm','C2zxs3q','6k6+ici','Aw5KzxG','zML0CW','wgzYEwW','BLjtALi','vuvtva','DxbWzxjcB2r5tG','BwfW','DffLzfm','DufPsNG','zefKwvK','AxHPv2y','CMfUzg9T','C2L6zq','DgvYigXPC3qGDa','CNPkq3i','zNLDioATO+wCQowKHoEqHUINKUIjSG','CMvWBgfJzq','zNvSBejVzhLcyq','C0DSCMK','zgf0ytO','DKjhs1K','tNbLAwm','zw50CMLLCW','yNbTwfK','pos6UUEjQt4k','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','EgTQvLG','6kEs6iMY54M55B6b','zML0ihrHz3mGzG','wwLnsLy','EhjQv1i','5lIk5y2k6lQRu0zx','tfvxzLu','r2X4wgS','mxzytLn0sq','C2vHCMnO','vurkA3q','B2HpvhG','5lIk5y2k6lQRu0zxoIa','vMfYAwfIBgvZ','sKvmDuK','Aw1Hz2vZihrVia','EhHyr0u'];_0xde5c=function(){return _0x27b73b;};return _0xde5c();}import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x5d82ab}from'./promptProcessor.js';function replacePlaceholder(_0x53a2e7,_0x4b9865,_0x5ac99e,_0x207bd9){const _0x7c852b={'GDmEr':function(_0xefa733,_0x470469){return _0xefa733!==_0x470469;},'YiMJV':function(_0x1c68bc,_0x4164f6){return _0x1c68bc(_0x4164f6);},'nrWBO':_0x41a68a(0x4d5,0x45b,0x415,0x471)+'时','IJkia':_0x41a68a(0x475,0x2f4,0x36a,0x3b4),'iCXBu':function(_0x18c6f5,_0x38b829){return _0x18c6f5===_0x38b829;},'fusqd':'vIicn','FbeMW':_0xa4abae(0x206,0x123,0x207,0x165),'Vimwg':_0xa4abae(0x13e,0x150,0x164,0x1aa),'dAdYY':function(_0x13ddc0,_0x4db031,_0x5d08a1,_0x4e318f,_0x187e81){return _0x13ddc0(_0x4db031,_0x5d08a1,_0x4e318f,_0x187e81);}};if(typeof _0x53a2e7===_0x7c852b[_0x41a68a(0x4e3,0x452,0x4ab,0x417)]){if(_0x7c852b['iCXBu'](_0x7c852b['fusqd'],_0x7c852b[_0x41a68a(0x322,0x304,0x3e6,0x3c8)]))_0x52f7cf[_0x41a68a(0x4ad,0x4db,0x4ea,0x450)](_0x3d8535);else{if(_0x5ac99e&&_0x53a2e7[_0xa4abae(0x2f,0xd4,-0x6b,0x6a)](_0x4b9865)){if(_0x7c852b[_0xa4abae(0x3d,0x54,0xcc,0x2e)](_0x41a68a(0x3b4,0x3e1,0x3cf,0x411),_0xa4abae(0x178,0x12e,0x77,0x142)))_0x207bd9&&_0x207bd9[_0x41a68a(0x439,0x401,0x384,0x36a)](_0x4b9865);else{const _0x53ae53={'ixUAG':function(_0x5ef7a6,_0x5be9d6){function _0x581b59(_0x257c2b,_0x51fcb2,_0x319a87,_0x399055){return _0x41a68a(_0x51fcb2,_0x51fcb2-0x53,_0x319a87-0xfc,_0x399055-0xd6);}return _0x7c852b[_0x581b59(0x3fb,0x4af,0x4c0,0x418)](_0x5ef7a6,_0x5be9d6);},'FKxhL':function(_0x37c7e5,_0xb37ea9){function _0x4140ab(_0x535a03,_0x4b505a,_0x5915a2,_0x40d99f){return _0xa4abae(_0x535a03-0x1c0,_0x4b505a-0x135,_0x4b505a,_0x535a03-0xa8);}return _0x7c852b[_0x4140ab(0x209,0x1d8,0x1c9,0x26d)](_0x37c7e5,_0xb37ea9);},'Hqhzf':_0x7c852b[_0xa4abae(0x6c,0x61,0xf,0xa2)],'KJfsU':function(_0x2cb99f){return _0x2cb99f();},'NPmtP':function(_0x2a1def,_0x164ad4,_0x183eb4){return _0x2a1def(_0x164ad4,_0x183eb4);}};return new _0x333fb2((_0x106daf,_0xda88a2)=>{const _0xc47fc={'FAHXt':function(_0x11bcb8,_0x28b83f){function _0x48ece1(_0x40e0a1,_0x5c97f1,_0x2bae62,_0x2dca2e){return _0x18ce(_0x2bae62-0x35d,_0x2dca2e);}return _0x53ae53[_0x48ece1(0x507,0x536,0x54a,0x58c)](_0x11bcb8,_0x28b83f);},'ixiWf':_0x53ae53[_0x454dba(-0x185,-0x1a0,-0x21c,-0xcd)]},_0xbcd90f=_0x53ae53[_0x40df8b(0x29a,0x273,0x25a,0x1a2)](_0x12b07b);_0x2c2b46[_0x40df8b(0x267,0x213,0x238,0x247)]('[character'+_0x40df8b(0x243,0x2fb,0x266,0x1d6)+_0x454dba(-0x18e,-0x25b,-0xc7,-0x1a0)+_0x40df8b(0x345,0x38c,0x351,0x3d4)+'modify\x20pro'+_0x454dba(-0xae,-0xb,-0xbe,-0xfe)+_0xbcd90f+')');const _0x576475=_0x48dfcf=>{function _0x502a91(_0x5d2cb7,_0x2cdaa8,_0x3eb039,_0x3b04fd){return _0x40df8b(_0x5d2cb7-0x30,_0x5d2cb7,_0x3b04fd- -0xcb,_0x3b04fd-0x9c);}function _0x338bb2(_0x2690ee,_0x158b68,_0x9ae9a1,_0x47cf58){return _0x40df8b(_0x2690ee-0x1da,_0x2690ee,_0x158b68-0x8e,_0x47cf58-0x1b2);}if(_0x53ae53[_0x502a91(0x215,0x113,0x132,0x1a6)](_0x48dfcf['id'],_0xbcd90f))return;_0x4c0d22[_0x338bb2(0x428,0x3d1,0x334,0x3be)+_0x502a91(0x61,0xbe,0x4f,0x113)](_0x32a51d[_0x502a91(0x265,0x1c9,0x16c,0x203)+_0x502a91(0x322,0x36d,0x24e,0x2a3)+_0x502a91(0x2a1,0x37a,0x32c,0x2a4)+_0x338bb2(0x2d1,0x26a,0x22b,0x311)],_0x576475),_0x106daf(_0x48dfcf['prompt']);};function _0x40df8b(_0x4fc805,_0x11c293,_0x41755c,_0x4c7397){return _0x41a68a(_0x11c293,_0x11c293-0x1e,_0x41755c-0x1c5,_0x41755c- -0x180);}_0x2647ee['on'](_0x12680f['LLM_CHAR_M'+_0x40df8b(0x362,0x37c,0x36e,0x357)+_0x454dba(-0x2,0xc9,-0x12,-0x5e)+_0x454dba(-0x195,-0x210,-0x147,-0xdc)],_0x576475);const _0x31515d={};_0x31515d['id']=_0xbcd90f;function _0x454dba(_0x175d55,_0x40b763,_0x113037,_0x4a1fa1){return _0xa4abae(_0x175d55-0xc1,_0x40b763-0xc0,_0x113037,_0x175d55- -0x1dd);}_0x4e8bc4['emit'](_0x2e40e3[_0x454dba(-0xa3,-0xba,-0x16a,-0xcb)+'ODIFY_GET_'+_0x40df8b(0x127,0x1bc,0x1ee,0x174)+_0x40df8b(0x239,0x280,0x2dc,0x2c6)],_0x31515d),_0x53ae53['NPmtP'](_0x59b5d8,()=>{function _0x234c5a(_0x226e7c,_0xf43af9,_0x318bbb,_0x307824){return _0x454dba(_0x318bbb-0x48c,_0xf43af9-0x15f,_0xf43af9,_0x307824-0x1c6);}_0x536d78[_0x234c5a(0x536,0x3a1,0x45e,0x4f2)+_0x4db09b(0x8b,0x5c,-0x3d,0x5)](_0x2fa691[_0x234c5a(0x478,0x46a,0x3e9,0x446)+_0x4db09b(0x133,0xcc,0x205,0x195)+'PROMPT_RES'+'PONSE'],_0x576475);function _0x4db09b(_0x3bf870,_0x430a31,_0x328843,_0x3bbe9b){return _0x40df8b(_0x3bf870-0x25,_0x3bf870,_0x3bbe9b- -0x1d9,_0x3bbe9b-0xbf);}_0xc47fc['FAHXt'](_0xda88a2,new _0x213c9a(_0xc47fc[_0x4db09b(0x63,0xa9,0xfa,0x109)]));},0xeb*-0x45+0x1*0x4657+-0xab*-0x30);});}}return _0x53a2e7[_0x41a68a(0x4e2,0x3e6,0x3e2,0x445)](_0x4b9865,_0x5ac99e);}}if(Array[_0x41a68a(0x4ae,0x512,0x43d,0x4d6)](_0x53a2e7))return _0x53a2e7['map'](_0x2de2af=>replacePlaceholder(_0x2de2af,_0x4b9865,_0x5ac99e,_0x207bd9));if(_0x53a2e7&&_0x7c852b[_0x41a68a(0x30d,0x444,0x397,0x370)](typeof _0x53a2e7,_0x7c852b[_0xa4abae(0x132,0x250,0xb3,0x17f)])){const _0x55281b={};for(const _0x19adb6 in _0x53a2e7){_0x55281b[_0x19adb6]=_0x7c852b[_0xa4abae(0x1a3,0xc7,0x1bc,0x14d)](replacePlaceholder,_0x53a2e7[_0x19adb6],_0x4b9865,_0x5ac99e,_0x207bd9);}return _0x55281b;}function _0xa4abae(_0x49c5d4,_0x1b60a6,_0x31a037,_0xe947db){return _0x18ce(_0xe947db- -0x142,_0x31a037);}function _0x41a68a(_0x165fc9,_0x212b74,_0x5645e3,_0x203f1d){return _0x18ce(_0x203f1d-0x1d2,_0x165fc9);}return _0x53a2e7;}function attachImagesToMessage(_0x3e9324,_0x4a0440,_0x1ab7f5,_0x546cdb=_0x1bef45(0x3d8,0x328,0x3ae,0x316)){const _0x2a6753={};_0x2a6753['dTrXR']=function(_0x5de8cb,_0x19b45e){return _0x5de8cb!==_0x19b45e;},_0x2a6753['BLUXe']=_0x7d5515(0x19f,0xcd,0x181,0x106),_0x2a6753[_0x125834(-0x1,-0x5,0x4,-0x67)]=function(_0x2d0757,_0x29f072){return _0x2d0757===_0x29f072;},_0x2a6753[_0x7d5515(0xb2,0x17,0x19,-0x82)]='object',_0x2a6753[_0x7d5515(-0x38,-0x38,0x45,0x9e)]=_0x125834(-0x5b,0x72,-0x40,0x16),_0x2a6753[_0x125834(0x1c,0x64,-0x22,0x5e)]=_0x7d5515(0x38,0x9a,0xe2,0xa2),_0x2a6753[_0x125834(-0xf7,-0xc2,-0xcb,-0xaf)]=_0x7d5515(0x152,0x14b,0x137,0x104),_0x2a6753[_0x7d5515(0x1c7,0x1e9,0x143,0x76)]=function(_0x2e0e53,_0x324948){return _0x2e0e53===_0x324948;},_0x2a6753[_0x7d5515(0x99,0x16b,0x16e,0x147)]=function(_0x32c69d,_0x5a1ef8){return _0x32c69d<_0x5a1ef8;},_0x2a6753[_0x7d5515(0x5a,0x93,0x74,0x53)]=function(_0x56263d,_0x2b637c){return _0x56263d>=_0x2b637c;},_0x2a6753[_0x7d5515(0x154,0x1e5,0x110,0x166)]=_0x125834(-0x196,-0x10f,-0xf7,-0x180),_0x2a6753[_0x7d5515(0x24,0xff,0x41,0xe9)]=_0x125834(0x73,-0x1,0x5,0x58),_0x2a6753[_0x125834(-0xd0,-0x62,-0x60,0x50)]=function(_0x1ec5e8,_0x2b603c){return _0x1ec5e8>_0x2b603c;};const _0x31d40d=_0x2a6753;if(!_0x1ab7f5||_0x31d40d[_0x7d5515(0x135,0x190,0x143,0x9c)](_0x1ab7f5[_0x7d5515(0x180,0x105,0xdb,0xc)],-0x1cf6+-0x63c+-0x70a*-0x5)||_0x31d40d[_0x7d5515(0xda,0xbc,0x16e,0x241)](_0x4a0440,0x1c4b*0x1+0xf8f+0xe9e*-0x3)||_0x31d40d['Cwtvo'](_0x4a0440,_0x3e9324[_0x7d5515(0x36,0x194,0xdb,0xe0)]))return _0x3e9324;const _0x3ff66=[..._0x3e9324],_0x4db348=_0x3ff66[_0x4a0440],_0xb0c72c=[];if(_0x31d40d[_0x7d5515(0xa6,0x142,0x143,0xf4)](typeof _0x4db348[_0x7d5515(0x166,0xfe,0xbc,0xa5)],_0x31d40d[_0x7d5515(0x14d,0x10f,0x110,0x17d)])){const _0x8fd878={};_0x8fd878[_0x125834(-0x44,-0x56,-0x104,-0x17d)]=_0x31d40d[_0x125834(-0xb4,-0x1b3,-0x110,-0x62)],_0x8fd878[_0x125834(-0x60,-0xd5,0x5,-0x3a)]=_0x4db348[_0x7d5515(-0x13,0x25,0xbc,0xc1)],_0xb0c72c['push'](_0x8fd878);}else Array[_0x125834(-0x45,-0x38,0x2b,-0xaa)](_0x4db348['content'])&&_0xb0c72c[_0x125834(-0xe4,0x34,-0x5b,-0x1b)](..._0x4db348[_0x125834(-0x77,-0x3d,-0x95,-0x50)]);function _0x7d5515(_0x1080b1,_0x113cf1,_0x64c5a5,_0x468f2d){return _0x1bef45(_0x468f2d,_0x113cf1-0x3,_0x64c5a5-0xce,_0x64c5a5- -0x1cf);}if(_0x31d40d['ERajU'](_0x1ab7f5[_0x7d5515(0xd9,0xd9,0xdb,0x1ad)],0xe9a+-0x11a9+0x30f)){const _0x54427c={};_0x54427c[_0x7d5515(0xa2,0x21,0x4d,0xdc)]=_0x31d40d[_0x7d5515(-0x46,-0x77,0x41,-0x8f)],_0x54427c[_0x125834(0x45,-0x9b,0x5,-0xb8)]=_0x125834(0x52,-0x1f,-0x7c,-0x96)+_0x1ab7f5[_0x125834(-0xa8,0x11,-0x76,-0xb5)]+'张'+_0x546cdb+']',_0xb0c72c['push'](_0x54427c);}_0x1ab7f5['forEach']((_0x4f452a,_0x51e294)=>{function _0x2d9949(_0x163bd7,_0x1616f5,_0x21f85a,_0x1dfe51){return _0x125834(_0x163bd7-0x73,_0x1616f5,_0x1dfe51-0x120,_0x1dfe51-0x14f);}function _0x45d8eb(_0xaa0d28,_0x2f965a,_0x53835b,_0x57019a){return _0x125834(_0xaa0d28-0x4c,_0xaa0d28,_0x2f965a-0x100,_0x57019a-0x150);}if(_0x31d40d[_0x45d8eb(0x48,0x5e,-0x1b,-0x17)](_0x31d40d[_0x2d9949(0x180,0xbc,0x1ea,0x10e)],'PwGLA')){const _0x38565f=_0x31d40d['EAEqa'](typeof _0x4f452a,'string')?_0x4f452a:_0x4f452a[_0x45d8eb(0xde,0x16,0x8e,-0x59)],_0x4649ef=_0x31d40d[_0x2d9949(0x16e,0x15e,0x69,0x124)](typeof _0x4f452a,_0x31d40d[_0x2d9949(0xa,-0x94,0x85,-0x18)])&&_0x4f452a[_0x45d8eb(-0x6b,0x65,-0x48,0x60)]?_0x4f452a[_0x45d8eb(0xcf,0x65,-0x68,0xae)]:''+_0x546cdb+(_0x51e294+(-0x3a*-0x6f+-0x33+-0x18f2)),_0x3e310e={};_0x3e310e[_0x45d8eb(-0xdc,-0x4,0xa3,-0xa8)]='text',_0x3e310e[_0x2d9949(0x87,0x1a9,0x65,0x125)]='['+_0x4649ef+']',_0xb0c72c[_0x45d8eb(0x47,0xa5,0xbe,0x107)](_0x3e310e);let _0x3f5824=_0x38565f;!_0x38565f[_0x2d9949(-0x5e,-0x44,0x3b,-0x20)](_0x31d40d['tCuDD'])&&(_0x3f5824=_0x2d9949(0x54,0x30,0x1d,-0x1)+_0x2d9949(0x117,0x43,0x8d,0x40)+'4,'+_0x38565f);const _0x5124a1={};_0x5124a1[_0x45d8eb(0x83,-0x4,-0x59,-0x4c)]=_0x31d40d[_0x45d8eb(0x64,0xde,0x111,0x102)],_0x5124a1[_0x2d9949(-0x27,0x2e,0x2c,0xb1)]={},_0x5124a1[_0x2d9949(-0x27,0x2e,0x2c,0xb1)][_0x2d9949(0xc1,0xd2,0x122,0x60)]=_0x3f5824,_0x5124a1[_0x2d9949(-0x27,0x2e,0x2c,0xb1)][_0x45d8eb(-0x5d,-0x4e,-0xf1,-0x5f)]=_0x31d40d['VgNoj'],_0xb0c72c[_0x2d9949(0x8b,0x194,0x175,0xc5)](_0x5124a1);}else _0x3cde30[_0x45d8eb(0x74,0xa5,0xae,0x13f)](..._0x7e1fd8[_0x45d8eb(0x5f,0x6b,0x130,-0x41)]);});function _0x125834(_0x184181,_0x32c37e,_0xa6e3a4,_0x5bbcad){return _0x1bef45(_0x32c37e,_0x32c37e-0x1a8,_0xa6e3a4-0x1e7,_0xa6e3a4- -0x320);}const _0x1052d8={..._0x4db348};return _0x1052d8[_0x7d5515(0x133,0xea,0xbc,-0x2)]=_0xb0c72c,_0x3ff66[_0x4a0440]=_0x1052d8,_0x3ff66;}function _0x18ce(_0xc4dd7,_0x462ad6){_0xc4dd7=_0xc4dd7-(-0x13cc+0x1ff3+-0xab7);const _0x481358=_0xde5c();let _0x240709=_0x481358[_0xc4dd7];if(_0x18ce['unVyQA']===undefined){var _0x4409e8=function(_0x423a9c){const _0x49ef0d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x416ccd='',_0x4527c4='',_0x55ca3f=_0x416ccd+_0x4409e8;for(let _0x3a0370=-0x1bb0+0x12bf*-0x1+-0x2e6f*-0x1,_0x1924e8,_0x6c4e5b,_0xd3f17d=0x1937+-0x1c32+0x6d*0x7;_0x6c4e5b=_0x423a9c['charAt'](_0xd3f17d++);~_0x6c4e5b&&(_0x1924e8=_0x3a0370%(-0xb*-0x2f6+0x48b+-0x2519*0x1)?_0x1924e8*(-0x1*0x4a9+-0x15e3+-0x1ea*-0xe)+_0x6c4e5b:_0x6c4e5b,_0x3a0370++%(0x1*0x20b5+0x2530+0x1*-0x45e1))?_0x416ccd+=_0x55ca3f['charCodeAt'](_0xd3f17d+(0x1484+0x79*-0x17+-0x99b))-(0x5ce*0x4+0x12c2*0x1+-0x29f0*0x1)!==0x118f+-0x3*0x66b+0x1b2?String['fromCharCode'](0x1dfb+0x2cd*-0x3+-0xb*0x1df&_0x1924e8>>(-(-0x5*0x3ae+0x29*0xa6+-0x82e)*_0x3a0370&0x1bbf+-0xf3+0xd63*-0x2)):_0x3a0370:-0x6*-0xb8+0x2683*0x1+-0x13*0x241){_0x6c4e5b=_0x49ef0d['indexOf'](_0x6c4e5b);}for(let _0x5bf455=0x145e+0x5d*0x2b+0xbff*-0x3,_0x593e8a=_0x416ccd['length'];_0x5bf455<_0x593e8a;_0x5bf455++){_0x4527c4+='%'+('00'+_0x416ccd['charCodeAt'](_0x5bf455)['toString'](0x2406+0x1*0x15c5+-0x39bb))['slice'](-(-0x3e6+0x12d*0xe+-0xc8e));}return decodeURIComponent(_0x4527c4);};_0x18ce['SUDPVS']=_0x4409e8,_0x18ce['RWNuUr']={},_0x18ce['unVyQA']=!![];}const _0x54c436=_0x481358[-0x6f6+-0x12bf+0x19b5],_0x33bb60=_0xc4dd7+_0x54c436,_0x2fd9d4=_0x18ce['RWNuUr'][_0x33bb60];if(!_0x2fd9d4){const _0x114ed8=function(_0x10b2ef){this['hFvldw']=_0x10b2ef,this['qtyGmk']=[0x20b1+-0x8*0x4a2+-0x7*-0xa0,-0x5*-0x1cb+-0x17ac+0xeb5,0xeee+-0x1574+0x343*0x2],this['CzyewO']=function(){return'newState';},this['VUjDkg']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['rbZYjS']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x114ed8['prototype']['fVJtMP']=function(){const _0x131a3d=new RegExp(this['VUjDkg']+this['rbZYjS']),_0x5a2fdc=_0x131a3d['test'](this['CzyewO']['toString']())?--this['qtyGmk'][-0x5d4+-0x5fb*0x1+0xbd0]:--this['qtyGmk'][0x1a0b+0xb16*-0x1+0x1*-0xef5];return this['XeAfdp'](_0x5a2fdc);},_0x114ed8['prototype']['XeAfdp']=function(_0x182eec){if(!Boolean(~_0x182eec))return _0x182eec;return this['xGFQET'](this['hFvldw']);},_0x114ed8['prototype']['xGFQET']=function(_0x24f39a){for(let _0x492f70=0x5*0x769+-0x17ae+0x1*-0xd5f,_0x100df9=this['qtyGmk']['length'];_0x492f70<_0x100df9;_0x492f70++){this['qtyGmk']['push'](Math['round'](Math['random']())),_0x100df9=this['qtyGmk']['length'];}return _0x24f39a(this['qtyGmk'][0x1*0x24f3+0x1*-0xd87+-0x176c*0x1]);},new _0x114ed8(_0x18ce)['fVJtMP'](),_0x240709=_0x18ce['SUDPVS'](_0x240709),_0x18ce['RWNuUr'][_0x33bb60]=_0x240709;}else _0x240709=_0x2fd9d4;return _0x240709;}function _0x1bef45(_0x444f35,_0x41e6e7,_0x1b3c1f,_0x28747f){return _0x18ce(_0x28747f-0x47,_0x444f35);}function findMessageIndexWithPlaceholder(_0x59276b,_0x492bd8){const _0x119f87={};function _0x270d13(_0x1059d,_0x4788fc,_0x38b21c,_0x36f103){return _0x1bef45(_0x4788fc,_0x4788fc-0x134,_0x38b21c-0xe0,_0x38b21c- -0x1e9);}_0x119f87[_0x2cd817(-0x73,-0x81,0x32,-0xbb)]=function(_0x522ec7,_0x5ab385){return _0x522ec7<_0x5ab385;},_0x119f87[_0x2cd817(-0xc5,-0xae,-0xa2,-0x40)]=function(_0x4b4aa1,_0x343ff7){return _0x4b4aa1===_0x343ff7;},_0x119f87[_0x270d13(0x102,0x22d,0x178,0x172)]='string',_0x119f87['rzJCr']=_0x270d13(-0x3,0x29,0x79,0x9a),_0x119f87[_0x2cd817(-0xf7,-0x2a,-0xe8,-0x32)]=_0x2cd817(-0xb4,-0xdc,0x6,-0xe9);const _0x34233e=_0x119f87;function _0x2cd817(_0xf2c344,_0x547d62,_0x21be4b,_0x1f3759){return _0x1bef45(_0x547d62,_0x547d62-0xc3,_0x21be4b-0x163,_0xf2c344- -0x3d9);}for(let _0x5404ea=-0x2*-0x74f+0x1814+0x1359*-0x2;_0x34233e[_0x2cd817(-0x73,0x18,0x5d,-0x2e)](_0x5404ea,_0x59276b[_0x2cd817(-0x12f,-0x1b4,-0x86,-0x10d)]);_0x5404ea++){const _0x5e88cc=_0x59276b[_0x5404ea];if(_0x34233e[_0x270d13(0x132,0x137,0x12b,0x7a)](typeof _0x5e88cc['content'],_0x34233e[_0x270d13(0x175,0x229,0x178,0x144)])&&_0x5e88cc[_0x2cd817(-0x14e,-0x12a,-0xcc,-0x1c7)]['includes'](_0x492bd8))return _0x5404ea;else{if(Array[_0x2cd817(-0x8e,-0xee,-0xa3,-0x2)](_0x5e88cc['content'])){if(_0x34233e[_0x270d13(0x11f,0x2f,0xf2,0xc5)]===_0x34233e[_0x2cd817(-0xfe,-0x90,-0x136,-0x42)])for(const _0x3faf38 of _0x5e88cc[_0x270d13(0x8a,0x100,0xa2,0x8f)]){if(_0x34233e[_0x2cd817(-0xc5,-0x112,-0xed,-0x1a0)](_0x3faf38['type'],_0x34233e[_0x270d13(0x151,0x1c9,0xf9,0x1c1)])&&_0x3faf38[_0x270d13(0x172,0x104,0x13c,0x14c)][_0x270d13(-0xad,-0x46,0xa,-0x75)](_0x492bd8))return _0x5404ea;}else _0x5cf924=_0xeb1abd,_0xeeb904[_0x2cd817(-0x114,-0x160,-0x84,-0x75)](_0x9ae06f);}}}return-(-0x61c+-0x21ab+0x27c8);}function generateRequestId(){const _0x275ded={};_0x275ded[_0x228ab0(-0x105,-0xcf,-0x1cf,-0x143)]=function(_0x4abd46,_0x37c51b){return _0x4abd46+_0x37c51b;};function _0x228ab0(_0x55893a,_0x4bd4f2,_0x551d12,_0x4f6cae){return _0x1bef45(_0x4f6cae,_0x4bd4f2-0xa5,_0x551d12-0xb1,_0x55893a- -0x2f4);}const _0x3b510a=_0x275ded;function _0x1f50f4(_0x47d5a3,_0x3917f5,_0x35fef4,_0x257f66){return _0x1bef45(_0x35fef4,_0x3917f5-0xba,_0x35fef4-0x1c5,_0x47d5a3- -0x30f);}if(crypto&&crypto[_0x1f50f4(-0xa4,-0x20,-0x16c,0x2e)])return crypto['randomUUID']();return _0x3b510a['PMfHr'](Date['now']()[_0x1f50f4(-0x146,-0xef,-0x1a6,-0x1d4)](-0x83a+-0x1c58*-0x1+-0x13fa*0x1),Math[_0x1f50f4(-0x37,-0xb1,-0xac,0x1a)]()['toString'](-0x6ce*-0x1+0x41*-0x96+0x1f6c)[_0x1f50f4(-0xb3,0x2,-0x56,-0x6f)](-0x11d*0x1+-0x9a+0x1b9));}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x54b2d9={'WVWoV':function(_0x3b40dc,_0x5aab92){return _0x3b40dc===_0x5aab92;},'gBJOa':_0x567b8c(0x4c4,0x4d5,0x4d2,0x3f2),'PplAP':function(_0x3a227c,_0x38c594){return _0x3a227c(_0x38c594);},'vBGKY':_0x567b8c(0x586,0x4e7,0x4c1,0x622)+'时','FHgZx':function(_0x46faba){return _0x46faba();},'WKKlP':function(_0x5a292e,_0x57ac1d,_0x1adbb6){return _0x5a292e(_0x57ac1d,_0x1adbb6);}};function _0x24f211(_0x2f1258,_0x423b96,_0x11564e,_0xebfa6e){return _0x1bef45(_0xebfa6e,_0x423b96-0x1ab,_0x11564e-0x161,_0x2f1258- -0x165);}function _0x567b8c(_0x108767,_0x163dd6,_0x17585a,_0x2281d7){return _0x1bef45(_0x17585a,_0x163dd6-0x1e7,_0x17585a-0xab,_0x108767-0x2a0);}return new Promise((_0x10e548,_0x28e518)=>{const _0x3046e5={'MdMOr':function(_0x3dfc4e,_0x53f151){function _0x269431(_0x2ae1e2,_0x24dfac,_0x6d5c64,_0x523a1a){return _0x18ce(_0x2ae1e2-0x347,_0x523a1a);}return _0x54b2d9[_0x269431(0x64e,0x633,0x62c,0x620)](_0x3dfc4e,_0x53f151);},'nucBl':_0x54b2d9['gBJOa'],'xkjVX':function(_0x17f9c2,_0x1215e6){function _0x353ea0(_0x3886bc,_0x53950f,_0x20727a,_0x2610fe){return _0x18ce(_0x3886bc-0x2c2,_0x2610fe);}return _0x54b2d9[_0x353ea0(0x454,0x446,0x3c8,0x49d)](_0x17f9c2,_0x1215e6);},'GhQPt':_0x54b2d9[_0x3d4c6f(0x493,0x56f,0x4f0,0x570)]},_0x39d807=_0x54b2d9[_0x3d4c6f(0x5f0,0x542,0x518,0x5ec)](generateRequestId);function _0x45473d(_0x353b13,_0x2d30f0,_0x3918e3,_0x270614){return _0x24f211(_0x2d30f0-0x360,_0x2d30f0-0x16a,_0x3918e3-0x1e7,_0x270614);}console[_0x45473d(0x3da,0x428,0x411,0x4d8)](_0x45473d(0x364,0x412,0x464,0x457)+'PromptModi'+_0x3d4c6f(0x401,0x31d,0x3e7,0x3e1)+_0x45473d(0x47e,0x541,0x4b9,0x5e5)+_0x3d4c6f(0x491,0x48f,0x3c8,0x319)+_0x3d4c6f(0x484,0x54b,0x4c7,0x4e0)+_0x39d807+')');function _0x3d4c6f(_0x4c9ecf,_0x5a0987,_0x2eeb0b,_0x40b78b){return _0x24f211(_0x2eeb0b-0x374,_0x5a0987-0x1e3,_0x2eeb0b-0x17,_0x4c9ecf);}const _0x1f2d0f=_0x17ff48=>{function _0x497bc8(_0x2232e3,_0x15a9d6,_0x25cd21,_0x46d83f){return _0x45473d(_0x2232e3-0x1db,_0x2232e3- -0x4ec,_0x25cd21-0x1b,_0x25cd21);}function _0x35b4e1(_0x2a6aca,_0x4bb0cf,_0x4b8aad,_0x35e808){return _0x45473d(_0x2a6aca-0x10c,_0x4b8aad-0x7f,_0x4b8aad-0x13d,_0x35e808);}if(_0x3046e5[_0x35b4e1(0x3ac,0x42a,0x454,0x387)](_0x3046e5[_0x497bc8(0x2f,-0x2d,0x4e,-0xa4)],_0x3046e5[_0x497bc8(0x2f,0x81,-0x31,-0x10)])){if(_0x17ff48['id']!==_0x39d807)return;eventSource['removeList'+_0x35b4e1(0x37a,0x4c2,0x44d,0x400)](eventNames[_0x497bc8(-0x2e,-0xaf,0x34,-0x35)+'ODIFY_GET_'+_0x497bc8(0x73,-0x2d,0x5a,0x4)+_0x497bc8(-0x120,-0x1be,-0xef,-0x1ee)],_0x1f2d0f),_0x3046e5[_0x497bc8(-0xa,0xc3,-0x1e,-0x6f)](_0x10e548,_0x17ff48['prompt']);}else _0xd787fe[_0x35b4e1(0x54a,0x614,0x53f,0x50e)](..._0x9489b5[_0x35b4e1(0x51a,0x518,0x458,0x3bf)+_0x497bc8(-0x23,-0x36,-0x1,0x4a)]);};eventSource['on'](eventNames[_0x45473d(0x54a,0x4be,0x595,0x445)+_0x45473d(0x522,0x55e,0x524,0x613)+_0x45473d(0x4a7,0x55f,0x61b,0x5aa)+'PONSE'],_0x1f2d0f);const _0x36367d={};_0x36367d['id']=_0x39d807,eventSource[_0x3d4c6f(0x43a,0x3af,0x404,0x47c)](eventNames['LLM_CHAR_M'+'ODIFY_GET_'+_0x45473d(0x328,0x3de,0x497,0x48d)+_0x3d4c6f(0x46b,0x53c,0x4e0,0x47b)],_0x36367d),_0x54b2d9[_0x3d4c6f(0x4e5,0x426,0x4cb,0x5a2)](setTimeout,()=>{function _0x5a7dd3(_0x5b8932,_0x21020d,_0xbb86ae,_0x5a36cf){return _0x3d4c6f(_0xbb86ae,_0x21020d-0x186,_0x5a36cf- -0x1f5,_0x5a36cf-0xac);}function _0x25e3d2(_0x53c34e,_0xa0f83d,_0x4f83f7,_0x2156c0){return _0x3d4c6f(_0x53c34e,_0xa0f83d-0x17d,_0x4f83f7- -0x2b1,_0x2156c0-0x115);}eventSource['removeList'+_0x5a7dd3(0x14b,0x280,0x149,0x1ed)](eventNames[_0x25e3d2(0x185,0x22d,0x221,0x18d)+'ODIFY_GET_'+'PROMPT_RES'+_0x25e3d2(0x57,0x1a6,0x12f,0xac)],_0x1f2d0f),_0x3046e5[_0x5a7dd3(0x2fc,0x3cb,0x341,0x301)](_0x28e518,new Error(_0x3046e5[_0x5a7dd3(0x398,0x312,0x3bb,0x313)]));},-0x164b+0x4c9f+-0xf44);});}export function LLM_CHAR_MODIFY(_0x456db2,_0x30ab56={}){function _0xdafd46(_0x806e98,_0x354203,_0x398364,_0x25ff92){return _0x1bef45(_0x398364,_0x354203-0x1aa,_0x398364-0xf7,_0x354203- -0x268);}function _0x3cd662(_0x5d611d,_0x1e3df4,_0x3ebed0,_0x354599){return _0x1bef45(_0x3ebed0,_0x1e3df4-0xbe,_0x3ebed0-0x1d5,_0x1e3df4-0x1f9);}const _0x3b0cfd={'Xfryl':function(_0x324273,_0x46d7f4){return _0x324273!==_0x46d7f4;},'XyrPI':_0xdafd46(0x65,0x46,-0x4f,-0x2f),'tCNFU':function(_0x39d5f3){return _0x39d5f3();},'nvKdv':function(_0xc3fd8d,_0x347b82){return _0xc3fd8d(_0x347b82);},'KrfIA':_0xdafd46(0x111,0xd9,0x19c,0x121),'OTMfO':function(_0x166b6d,_0x3a87b8,_0x1279cc,_0x3b9405,_0x2f50a6){return _0x166b6d(_0x3a87b8,_0x1279cc,_0x3b9405,_0x2f50a6);},'oMxGR':'pBzTi','gSbKQ':'角色修改\x20LLM\x20请'+_0x3cd662(0x610,0x542,0x538,0x4e8),'Rhgjz':_0xdafd46(-0x16,-0x7f,0x30,0x54),'kCbGH':function(_0x512b2f,_0x325129,_0x123bb7){return _0x512b2f(_0x325129,_0x123bb7);}};return new Promise((_0x1136e5,_0x17ca85)=>{function _0x574402(_0x14b52e,_0x289b4f,_0x489cca,_0x591391){return _0xdafd46(_0x14b52e-0x31,_0x591391-0x2fb,_0x489cca,_0x591391-0x4e);}const _0x1ee0d3={'orbuM':'(((.+)+)+)'+'+$','YPGMH':function(_0x2bb37b,_0x53ef4c,_0x41bbc1,_0x2c9edf,_0x5d8c8c){function _0x120be4(_0x5b2211,_0x1c9254,_0xe92777,_0x3518e3){return _0x18ce(_0x3518e3-0x1a2,_0x5b2211);}return _0x3b0cfd[_0x120be4(0x3f8,0x2bb,0x3e0,0x362)](_0x2bb37b,_0x53ef4c,_0x41bbc1,_0x2c9edf,_0x5d8c8c);},'uBlrX':_0x3b0cfd[_0x574402(0x395,0x262,0x3ff,0x333)],'TGtDR':function(_0x5385a5){function _0x52dd61(_0x359887,_0x329b0e,_0x44888c,_0x5ef7fe){return _0x574402(_0x359887-0xc9,_0x329b0e-0xe1,_0x5ef7fe,_0x359887- -0x10);}return _0x3b0cfd[_0x52dd61(0x2f5,0x299,0x333,0x31f)](_0x5385a5);},'nRSjR':function(_0x2c13bf,_0x228903){function _0x314d9e(_0x283288,_0x1745d6,_0x5d5bf6,_0x51d983){return _0x574402(_0x283288-0x65,_0x1745d6-0xc2,_0x283288,_0x5d5bf6-0x1e8);}return _0x3b0cfd[_0x314d9e(0x57a,0x4e7,0x58a,0x569)](_0x2c13bf,_0x228903);},'uAiJx':_0x3b0cfd[_0x574402(0x478,0x38d,0x345,0x3cd)]};function _0x5a0345(_0x247112,_0x42ec4e,_0x33cc6d,_0x43b1dc){return _0x3cd662(_0x247112-0x63,_0x33cc6d- -0x24c,_0x43b1dc,_0x43b1dc-0x1b9);}if(_0x3b0cfd[_0x574402(0x30a,0x313,0x3f3,0x362)](_0x3b0cfd[_0x574402(0x444,0x33b,0x43f,0x3ad)],_0x3b0cfd[_0x574402(0x3f8,0x32d,0x319,0x3ad)]))return _0xba90bf['toString']()[_0x5a0345(0x261,0x20b,0x29d,0x335)](BkXDih[_0x574402(0x46a,0x441,0x353,0x3e9)])['toString']()[_0x5a0345(0x1fb,0x298,0x1e5,0x25f)+'r'](_0x57a7b2)[_0x574402(0x2e2,0x2ab,0x32a,0x383)]('(((.+)+)+)'+'+$');else{const _0xf7ed4=_0x3b0cfd[_0x574402(0x394,0x252,0x268,0x305)](generateRequestId),_0x22090f=_0x30ab56[_0x574402(0x294,0x197,0x2ef,0x254)]||-0xeb*0x7b+0xce93+0x8cb6;let _0x14a4c7=null;console[_0x574402(0x30f,0x232,0x37e,0x2c0)](_0x574402(0x35c,0x2a9,0x2f2,0x2aa)+_0x574402(0x327,0x2b1,0x2aa,0x2ee)+_0x5a0345(0x2f0,0x282,0x2eb,0x304)+_0x5a0345(0x31f,0x36c,0x30d,0x297)+_0x574402(0x33e,0x235,0x250,0x2b6)+_0x5a0345(0x272,0x262,0x1df,0x2a4)+_0x5a0345(0xf1,0x12f,0x188,0x100)+_0xf7ed4+')');const _0x48912c=()=>{function _0x49b095(_0x12860d,_0x288617,_0x4bffad,_0x4c03b7){return _0x574402(_0x12860d-0x16e,_0x288617-0xc0,_0x4c03b7,_0x4bffad- -0x2e7);}function _0x5e2066(_0x4e34b8,_0x122261,_0x14f7eb,_0x8cbcbd){return _0x574402(_0x4e34b8-0x193,_0x122261-0x114,_0x14f7eb,_0x122261- -0x380);}if(_0x3b0cfd[_0x5e2066(-0x24,-0x1e,-0x40,0xb9)](_0x3b0cfd['XyrPI'],_0x3b0cfd[_0x49b095(0x53,-0x27,0x4f,0x30)]))return _0x48caa5[_0x49b095(-0x2d,0xea,0x7f,-0x33)](_0x2e5234=>_0x147f93(_0x2e5234,_0x435f5e,_0x5175b5,_0x2719a4));else eventSource[_0x49b095(0xf0,0xa0,0xe4,0xa3)+_0x5e2066(-0x153,-0x11a,-0x1dd,-0x1b9)](eventNames[_0x5e2066(0x5a,-0x2a,0x85,-0xcf)+_0x5e2066(0x30,0x26,-0xa1,0x6e)+'ONSE'],_0x5cbe20),_0x14a4c7&&(clearTimeout(_0x14a4c7),_0x14a4c7=null);},_0x5cbe20=_0x11511b=>{if(_0x3b0cfd['Xfryl'](_0x11511b['id'],_0xf7ed4))return;function _0xe0b93d(_0x3bbc38,_0x312082,_0x44b4a5,_0x3b3c6f){return _0x574402(_0x3bbc38-0x113,_0x312082-0x190,_0x312082,_0x3bbc38- -0x1bb);}function _0x3a1dd7(_0x4df838,_0x2a8480,_0x2c3f28,_0x2c690d){return _0x574402(_0x4df838-0x15,_0x2a8480-0x2a,_0x2c3f28,_0x2a8480- -0xa0);}_0x3b0cfd['tCNFU'](_0x48912c),_0x11511b['success']?_0x3b0cfd[_0x3a1dd7(0x344,0x302,0x263,0x35a)](_0x1136e5,_0x11511b[_0x3a1dd7(0x23f,0x31b,0x30a,0x33e)]):_0x3b0cfd[_0x3a1dd7(0x2a6,0x302,0x369,0x372)](_0x17ca85,new Error(_0x11511b[_0xe0b93d(0x200,0x234,0x2c7,0x1e1)]||_0x3b0cfd[_0xe0b93d(0x172,0x206,0x22b,0x15d)]));};eventSource['on'](eventNames['LLM_CHAR_M'+_0x5a0345(0x26e,0x37a,0x2c0,0x2e0)+_0x574402(0x2c3,0x3e1,0x2d1,0x394)],_0x5cbe20);const _0xcf45c2={};_0xcf45c2[_0x5a0345(0x29e,0x234,0x241,0x172)]=_0x456db2,_0xcf45c2['id']=_0xf7ed4,eventSource[_0x5a0345(0x1c6,0x227,0x1a2,0xe6)](eventNames[_0x5a0345(0x290,0x19a,0x270,0x2d0)+_0x574402(0x369,0x4a2,0x40e,0x3c9)+'EST'],_0xcf45c2),_0x14a4c7=_0x3b0cfd['kCbGH'](setTimeout,()=>{function _0xf94aa6(_0x48be39,_0x5c6c2b,_0x2b09da,_0xa88214){return _0x5a0345(_0x48be39-0x30,_0x5c6c2b-0x67,_0x48be39- -0xbb,_0xa88214);}function _0x4a48e8(_0xbceaf3,_0x2af531,_0x41eb0f,_0x429b8b){return _0x574402(_0xbceaf3-0x113,_0x2af531-0x17e,_0x429b8b,_0xbceaf3- -0x47);}_0x1ee0d3[_0x4a48e8(0x2e9,0x284,0x21c,0x333)]===_0x1ee0d3[_0xf94aa6(0x18f,0x1c4,0x12f,0x112)]?(_0x1ee0d3[_0xf94aa6(0x1a4,0x234,0x15b,0x1e5)](_0x48912c),_0x1ee0d3[_0xf94aa6(0x1c2,0x291,0xfb,0x295)](_0x17ca85,new Error(_0x1ee0d3[_0x4a48e8(0x321,0x2fd,0x371,0x371)]))):_0x5d82bc[_0x3a44cc]=_0x1ee0d3[_0x4a48e8(0x25d,0x336,0x2df,0x2fa)](_0x346fda,_0x5ce914[_0x12c956],_0x4f6db1,_0x3b5dc6,_0xd853e5);},_0x22090f);}});}function preprocessTagContent(_0x583319){const _0x34476d={};_0x34476d[_0x3c03cd(0x542,0x488,0x4df,0x53c)]=_0x21455d(0xa2,0x1dc,0x11b,0x1e2);const _0xcde343=_0x34476d;function _0x21455d(_0x122cc1,_0x1b7961,_0xef2793,_0x202013){return _0x1bef45(_0x1b7961,_0x1b7961-0xee,_0xef2793-0xee,_0xef2793- -0x1fa);}let _0x5b5c08=_0x583319['replace'](/:/g,':')[_0x21455d(0x42,0x1b7,0xe3,0x13)](/,/g,',');_0x5b5c08=_0x5b5c08['replace'](/下半身NSWebcam:/g,_0xcde343[_0x21455d(-0x2a,0x2a,0x74,-0x4b)]),_0x5b5c08=_0x5b5c08[_0x3c03cd(0x599,0x4f7,0x47d,0x4ca)](/下半身NSFW_背面:/g,'下半身NSFW背面:'),_0x5b5c08=_0x5b5c08[_0x3c03cd(0x45e,0x4f7,0x4ec,0x4b3)](/上半身NSFW_背面:/g,_0x21455d(0x21,0xb8,0x1,0x1b));function _0x3c03cd(_0xc6eb7d,_0x2b16f1,_0x29b9ba,_0x2bb231){return _0x1bef45(_0x29b9ba,_0x2b16f1-0x10c,_0x29b9ba-0x7b,_0x2b16f1-0x21a);}return _0x5b5c08;}function parseCharacterData(_0x31bbfb){const _0x3e8767={};_0x3e8767['jyqIX']='nameEN',_0x3e8767[_0x4631b7(0x2bb,0x336,0x35a,0x2a8)]=_0x4631b7(0x26e,0x2f1,0x326,0x353)+'raits',_0x3e8767[_0x4631b7(0x2c3,0x2e1,0x320,0x2bc)]=_0x4631b7(0x2b9,0x213,0x250,0x2bf)+_0x4631b7(0x1f0,0x182,0x1f2,0x1bd),_0x3e8767[_0x4631b7(0x450,0x401,0x383,0x340)]='facialFeat'+_0x1ae372(0xe5,-0x60,0x4f,0x4a),_0x3e8767[_0x1ae372(-0x2d,0x146,0x12c,0x74)]=_0x1ae372(-0x7,0x3e,-0xf7,-0x5c)+'FW',_0x3e8767['DMqbc']=_0x4631b7(0x27a,0x2fa,0x29e,0x2de)+_0x4631b7(0x24d,0x2d7,0x28c,0x1f2),_0x3e8767['vqQeX']='fullBodySF'+_0x4631b7(0x1f8,0x390,0x2bd,0x1fa),_0x3e8767[_0x1ae372(0x18,0x101,0xe1,0x79)]=_0x1ae372(-0x89,-0x1d,-0xca,-0xd)+'SFW',_0x3e8767[_0x1ae372(-0x60,0x22,0x97,0x24)]='upperBodyN'+_0x4631b7(0x417,0x28e,0x35e,0x416),_0x3e8767['fxjsG']=_0x4631b7(0x266,0x2be,0x21b,0x1e5)+'FW',_0x3e8767[_0x1ae372(-0xb6,-0x9,0x7d,-0x2a)]=_0x4631b7(0x1f2,0x27e,0x21b,0x1f9)+'FWBack',_0x3e8767[_0x1ae372(-0x151,-0x131,-0x106,-0xe3)]=function(_0x48a8ca,_0x5f1699){return _0x48a8ca===_0x5f1699;},_0x3e8767[_0x1ae372(-0x12d,0x6,-0xbc,-0xb3)]=function(_0x5f5356,_0x1ae2fd){return _0x5f5356+_0x1ae2fd;},_0x3e8767[_0x4631b7(0x252,0x23a,0x271,0x32b)]=function(_0x26166b,_0x2be975){return _0x26166b&&_0x2be975;},_0x3e8767[_0x4631b7(0x1f5,0x1e8,0x2b4,0x34a)]=function(_0x2ed297,_0x1623b6){return _0x2ed297!==_0x1623b6;},_0x3e8767[_0x4631b7(0x425,0x35e,0x37a,0x357)]=_0x1ae372(-0x14e,-0xbc,-0x180,-0xd0),_0x3e8767['mASlX']=_0x4631b7(0x2f3,0x1d6,0x232,0x24d)+'PromptModi'+_0x1ae372(-0x9f,-0x13a,-0xb6,-0x6f)+'数据:';const _0x2639ca=_0x3e8767,_0x172078=_0x31bbfb[_0x4631b7(0x25a,0x2cc,0x2d8,0x29d)]('\x0a')['map'](_0x2f88b5=>_0x2f88b5[_0x4631b7(0x37e,0x2f9,0x313,0x252)]())['filter'](_0x1797e5=>_0x1797e5),_0x558e61={};_0x558e61[_0x1ae372(-0x166,-0xb9,-0x149,-0xa6)]='',_0x558e61[_0x1ae372(-0xb6,-0xa4,-0x121,-0xf5)]='',_0x558e61[_0x4631b7(0x294,0x2e5,0x326,0x355)+_0x4631b7(0x2b6,0x32a,0x2ab,0x2f6)]='';function _0x4631b7(_0x43813b,_0x190c83,_0x1a436b,_0x4d2e16){return _0x1bef45(_0x4d2e16,_0x190c83-0x22,_0x1a436b-0x95,_0x1a436b-0x1b);}_0x558e61['facialFeat'+_0x4631b7(0x1e4,0x1de,0x1f2,0x2a9)]='',_0x558e61[_0x1ae372(-0x45,-0x27,-0x181,-0xaa)+_0x1ae372(0xb,-0x17,0xf9,0x4a)]='',_0x558e61[_0x1ae372(-0x1c,0x54,-0x7d,-0x5c)+'FW']='',_0x558e61[_0x4631b7(0x2ab,0x249,0x29e,0x1e3)+_0x4631b7(0x352,0x300,0x28c,0x2ff)]='',_0x558e61['fullBodySF'+'W']='',_0x558e61[_0x1ae372(-0xc8,-0x9c,0x8e,-0x32)+_0x4631b7(0x2c5,0x1e7,0x2bd,0x33d)]='',_0x558e61[_0x1ae372(-0x32,0x59,-0xa4,-0xd)+_0x1ae372(-0xfa,0x1,-0xc9,-0x7b)]='',_0x558e61[_0x1ae372(-0xe0,-0x37,-0x82,-0xd)+_0x4631b7(0x40f,0x3d0,0x35e,0x389)]='',_0x558e61[_0x4631b7(0x1e9,0x2a1,0x21b,0x1b7)+'FW']='';function _0x1ae372(_0x440c78,_0x19966d,_0x25e447,_0x1cd8e0){return _0x1bef45(_0x440c78,_0x19966d-0x2e,_0x25e447-0x4e,_0x1cd8e0- -0x2df);}_0x558e61[_0x1ae372(-0x9a,-0xb5,-0xc6,-0xdf)+_0x4631b7(0x2eb,0x270,0x28c,0x2a6)]='';const _0x10442a=_0x558e61,_0x18d4ce={};_0x18d4ce[_0x1ae372(-0x22,0x5,0x43,-0x5f)]=_0x4631b7(0x221,0x232,0x254,0x306),_0x18d4ce[_0x1ae372(0x29,-0x115,-0xe5,-0x55)]=_0x2639ca[_0x4631b7(0x247,0x325,0x2cf,0x35a)],_0x18d4ce[_0x1ae372(-0x55,0x6c,-0xbc,0x9)]=_0x2639ca[_0x4631b7(0x2f8,0x41c,0x35a,0x344)],_0x18d4ce[_0x4631b7(0x2ed,0x2d8,0x256,0x2be)]=_0x2639ca[_0x4631b7(0x268,0x2b6,0x320,0x396)],_0x18d4ce[_0x4631b7(0x362,0x299,0x2bc,0x2bd)]=_0x2639ca[_0x1ae372(0x148,0x12d,0x134,0x89)],_0x18d4ce[_0x4631b7(0x3c0,0x231,0x307,0x2f5)]=_0x2639ca['DLVZI'],_0x18d4ce['上半身SFW背面']=_0x2639ca[_0x4631b7(0x2ae,0x3d5,0x356,0x281)],_0x18d4ce['下半身SFW']=_0x1ae372(-0x7e,-0x10,0x97,-0x32)+'W',_0x18d4ce['下半身SFW背面']=_0x2639ca[_0x1ae372(0xd2,-0x46,0x128,0x83)],_0x18d4ce[_0x4631b7(0x2d0,0x317,0x31b,0x2be)]=_0x2639ca[_0x1ae372(0xf2,0x115,0xc2,0x79)],_0x18d4ce[_0x1ae372(-0x23,0x135,0xe7,0x76)]=_0x2639ca[_0x1ae372(0x7d,-0xb7,-0x7b,0x24)],_0x18d4ce[_0x4631b7(0x2ed,0x1d0,0x272,0x304)]=_0x2639ca[_0x1ae372(0x5f,-0x6d,0x7,-0x5b)],_0x18d4ce[_0x4631b7(0x3d2,0x2ae,0x342,0x41c)]=_0x2639ca[_0x4631b7(0x2ea,0x2bd,0x2d0,0x2bf)];const _0x2cb0da=_0x18d4ce;for(const _0xf9ac2f of _0x172078){const _0x33c3de=_0xf9ac2f['indexOf'](':');if(_0x2639ca[_0x4631b7(0x1a6,0x1c4,0x217,0x234)](_0x33c3de,-(-0xc87*0x3+0x21b0+-0x3e6*-0x1)))continue;const _0x17405d=_0xf9ac2f['substring'](-0x2f7+0x17cd+0x7*-0x2fa,_0x33c3de)['trim'](),_0x255fd0=_0xf9ac2f['substring'](_0x2639ca[_0x4631b7(0x254,0x17b,0x247,0x28f)](_0x33c3de,-0x15*-0xce+-0x25ed+0x1508))[_0x4631b7(0x29b,0x261,0x313,0x3cd)]();if(_0x2cb0da[_0x17405d])_0x10442a[_0x2cb0da[_0x17405d]]=_0x255fd0;else _0x2639ca[_0x4631b7(0x2a4,0x2d0,0x271,0x22c)](_0x17405d,_0x255fd0)&&console[_0x1ae372(-0x8d,-0x128,-0x31,-0xb2)](_0x1ae372(-0x6b,-0xbb,-0x7b,-0xc8)+'PromptModi'+_0x1ae372(-0x17,0x16,0x64,0x3a)+'字段\x20\x22'+_0x17405d+'\x22');}if(!_0x10442a[_0x4631b7(0x2c0,0x2ec,0x254,0x323)]){if(_0x2639ca[_0x1ae372(0x11,0x40,0x7e,-0x46)](_0x2639ca[_0x4631b7(0x32a,0x3a9,0x37a,0x3a8)],_0x2639ca[_0x1ae372(0x14e,0xe6,-0x3e,0x80)]))_0x36b453[_0x5a379a[_0x13117e]]=_0x40f111;else return null;}return console[_0x1ae372(-0x164,-0x73,-0xf9,-0xb2)](_0x2639ca[_0x4631b7(0x22b,0x1e4,0x27c,0x20e)],_0x10442a),_0x10442a;}function parseOutfitData(_0x2cadc3){const _0x584596={};_0x584596[_0x48d07d(-0x73,-0x1a,0x7d,-0x9d)]=_0x48d07d(-0x5a,0x2e,-0x62,-0x37),_0x584596['YPXho']='nameEN',_0x584596[_0x48d07d(-0x3d,0x5,-0x93,0xcf)]=_0x2d9e5d(0x424,0x3b2,0x3cd,0x390)+_0x2d9e5d(0x31d,0x237,0x2c3,0x289),_0x584596[_0x48d07d(0xf,-0x1e,-0x9a,0xab)]=function(_0x21e3b1,_0x2687b8){return _0x21e3b1===_0x2687b8;},_0x584596['CCleZ']=function(_0x5303a8,_0x174443){return _0x5303a8&&_0x174443;};function _0x2d9e5d(_0x1b4f28,_0x241a13,_0x7c161a,_0x2bdc89){return _0x1bef45(_0x1b4f28,_0x241a13-0x19e,_0x7c161a-0x1b,_0x7c161a-0xbd);}_0x584596[_0x48d07d(-0x4f,-0x93,-0x37,-0x5b)]=_0x48d07d(-0xf7,-0x51,0x67,-0x76)+_0x2d9e5d(0x3ab,0x300,0x318,0x395)+_0x48d07d(0xed,0xc4,0x19f,0x95)+_0x2d9e5d(0x1fe,0x217,0x291,0x298);const _0x1149c3=_0x584596,_0xed3b99=_0x2cadc3[_0x48d07d(0xf3,0x55,-0x74,-0x38)]('\x0a')[_0x2d9e5d(0x2e0,0x2c5,0x390,0x38f)](_0x4d489d=>_0x4d489d[_0x2d9e5d(0x33f,0x40d,0x3b5,0x3af)]())[_0x2d9e5d(0x289,0x247,0x2d5,0x375)](_0x175eb1=>_0x175eb1),_0xf8eb2={};_0xf8eb2[_0x2d9e5d(0x36b,0x235,0x2f6,0x2db)]='',_0xf8eb2['nameEN']='';function _0x48d07d(_0x3ff363,_0x46f8df,_0x3f7efa,_0x5aa851){return _0x1bef45(_0x3ff363,_0x46f8df-0x199,_0x3f7efa-0xe0,_0x46f8df- -0x268);}_0xf8eb2[_0x2d9e5d(0x2f3,0x294,0x353,0x354)]='',_0xf8eb2[_0x48d07d(0xfd,0x33,0xa,0xa7)]='',_0xf8eb2[_0x48d07d(0xaa,0xa8,0x93,0xad)+_0x2d9e5d(0x277,0x22e,0x2c3,0x265)]='',_0xf8eb2[_0x48d07d(0x12,0x43,0x84,0x79)]='',_0xf8eb2['fullBodyBa'+'ck']='';const _0x39a66d=_0xf8eb2,_0x274079={};_0x274079['归属人']=_0x1149c3[_0x48d07d(0x39,-0x1a,0x42,-0x7e)],_0x274079[_0x48d07d(-0x7a,0x18,0x1d,0xa1)]=_0x2d9e5d(0x368,0x394,0x2f6,0x310),_0x274079['英文名称']=_0x1149c3['YPXho'],_0x274079[_0x2d9e5d(0x37f,0x37b,0x327,0x321)]=_0x48d07d(-0x6e,0x33,0x8a,0x10),_0x274079[_0x2d9e5d(0x3a4,0x283,0x30a,0x34a)]=_0x1149c3[_0x2d9e5d(0x262,0x3cd,0x32a,0x38d)],_0x274079['下半身']='fullBody',_0x274079[_0x48d07d(0x9e,0x26,0x4a,-0x69)]=_0x48d07d(0x24,0x76,-0x36,-0x30)+'ck';const _0xd7d183=_0x274079;for(const _0x15c850 of _0xed3b99){const _0x2ffd4d=_0x15c850['indexOf'](':');if(_0x1149c3['sLmGy'](_0x2ffd4d,-(-0x1*-0xc0c+0x1859*-0x1+0x3f*0x32)))continue;const _0x2edad2=_0x15c850['substring'](-0x1cfe+0xe4+-0x6d*-0x42,_0x2ffd4d)[_0x2d9e5d(0x327,0x31c,0x3b5,0x3c4)](),_0x290ed6=_0x15c850['substring'](_0x2ffd4d+(0x4f*-0x46+0x2*-0x32f+-0x3*-0x953))[_0x48d07d(0x67,0x90,-0x47,0x99)]();if(_0xd7d183[_0x2edad2])_0x39a66d[_0xd7d183[_0x2edad2]]=_0x290ed6;else _0x1149c3['CCleZ'](_0x2edad2,_0x290ed6)&&console[_0x2d9e5d(0x21d,0x3ac,0x2ea,0x363)](_0x2d9e5d(0x212,0x39a,0x2d4,0x30a)+_0x48d07d(0xa1,-0xd,0x76,-0xd1)+_0x48d07d(0xd4,0xef,0x5f,0x1e)+_0x48d07d(-0x7c,-0x4d,-0x103,-0xe9)+_0x2edad2+'\x22');}if(!_0x39a66d[_0x2d9e5d(0x38a,0x220,0x2f6,0x275)])return null;return console[_0x48d07d(0x89,-0x3b,-0x6d,0x66)](_0x1149c3[_0x48d07d(-0x154,-0x93,-0x119,-0x17)],_0x39a66d),_0x39a66d;}function extractCharacterAndOutfitTags(_0x2be743){const _0xe73dd9={'IrrsX':_0x296747(0x1bc,0x270,0x270,0x2c6)+'内容','QMahc':function(_0x29fdcc,_0x201129){return _0x29fdcc===_0x201129;},'CFvez':function(_0x2883f3,_0x444f7f){return _0x2883f3!==_0x444f7f;},'nSdeS':function(_0x211fc5,_0x10ba9f){return _0x211fc5(_0x10ba9f);},'bWlkl':function(_0x44aead,_0x308fe3){return _0x44aead===_0x308fe3;},'GHLyK':_0x1672a2(0x2cb,0x313,0x1a0,0x268),'BxPRC':function(_0x11968e,_0x4ee4a4){return _0x11968e===_0x4ee4a4;},'GnCSg':_0x1672a2(0x1f4,0x395,0x1e9,0x2c2),'GOHIS':_0x1672a2(0x282,0x1b7,0x284,0x205),'MfhTq':'lzvSL','HWkNV':function(_0x169500,_0x678217){return _0x169500===_0x678217;},'lcSnD':function(_0x575c81,_0x31da4a){return _0x575c81!==_0x31da4a;},'qmkcv':'VNTol'},_0x489597=[];_0x2be743=_0x2be743['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x296747(0x254,0x2bf,0x32d,0x38c)]();const _0x473135=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x32d831;while(_0xe73dd9[_0x1672a2(0x19b,0x223,0x1c2,0x22c)](_0x32d831=_0x473135[_0x1672a2(0x283,0x3f8,0x36f,0x34e)](_0x2be743),null)){const _0x16726c=_0x32d831[-0x3*-0x7eb+0xf34+-0x26f4],_0xaabc7a=_0xe73dd9[_0x296747(0x1e9,0x18d,0xb7,0xf2)](preprocessTagContent,_0x32d831[0x2*-0x765+0xa16+0x4b6]),_0x3a4613=_0x32d831[_0x1672a2(0x322,0x254,0x2ef,0x317)];if(_0xe73dd9[_0x1672a2(0x270,0x285,0x20a,0x242)](_0x16726c,'人物')){const _0x58f46a=_0xe73dd9['nSdeS'](parseCharacterData,_0xaabc7a);if(_0x58f46a){const _0x500bbd={};_0x500bbd[_0x296747(0x1b5,0x1e3,0x126,0x20c)]=_0xe73dd9[_0x1672a2(0x3c5,0x414,0x2cc,0x362)],_0x500bbd[_0x296747(0x227,0x1c4,0x29d,0x127)]=_0x58f46a,_0x500bbd[_0x296747(0x1ef,0x1e4,0x19e,0x1a8)]=_0x3a4613,_0x500bbd[_0x296747(0x24e,0x1a5,0x1c3,0x1e0)+'fits']=[],_0x489597[_0x1672a2(0x36f,0x3e5,0x384,0x30f)](_0x500bbd);}}else{if(_0xe73dd9[_0x296747(0x154,0x1d9,0x25b,0x1c4)](_0x16726c,'服装')){const _0x174ea6=_0xe73dd9[_0x296747(0x218,0x18d,0x18d,0x190)](parseOutfitData,_0xaabc7a);if(_0x174ea6){if(_0xe73dd9[_0x1672a2(0x28d,0x191,0x1d2,0x25c)]('BURDf',_0xe73dd9[_0x296747(0x2ba,0x2f4,0x3c1,0x2dc)])){_0x57470b[_0x296747(0x2ea,0x26e,0x320,0x233)](_0xe73dd9[_0x1672a2(0x26e,0x2d5,0x3dc,0x301)]);return;}else{const _0x44d5c9={};_0x44d5c9[_0x296747(0x294,0x1e3,0x252,0x213)]=_0xe73dd9['GOHIS'],_0x44d5c9[_0x1672a2(0x241,0x242,0x2e2,0x247)]=_0x174ea6,_0x44d5c9[_0x296747(0x2bb,0x1e4,0x1fa,0x1b1)]=_0x3a4613,_0x489597[_0x1672a2(0x30f,0x34e,0x371,0x30f)](_0x44d5c9);}}}}}_0x489597[_0x296747(0x2e9,0x32c,0x2fb,0x33f)]((_0x3012d6,_0x4a4f59)=>_0x3012d6['position']-_0x4a4f59[_0x296747(0x10e,0x1e4,0x120,0x181)]);let _0x4529e8=null;const _0x5a73a4=[];function _0x296747(_0x32cb9f,_0x4324cc,_0x3764c7,_0x351f98){return _0x1bef45(_0x3764c7,_0x4324cc-0xd,_0x3764c7-0x1c2,_0x4324cc- -0x39);}function _0x1672a2(_0x468c3c,_0x422b93,_0x53c907,_0x4395d3){return _0x1bef45(_0x422b93,_0x422b93-0x2,_0x53c907-0x14,_0x4395d3-0x4a);}const _0x58d169=[];for(const _0x5d1f56 of _0x489597){if(_0xe73dd9[_0x1672a2(0x411,0x42f,0x374,0x3b6)]===_0xe73dd9[_0x1672a2(0x382,0x446,0x2e2,0x3b6)]){if(_0xe73dd9[_0x1672a2(0x216,0x336,0x266,0x289)](_0x5d1f56[_0x1672a2(0x2bb,0x275,0x1c3,0x266)],_0xe73dd9[_0x296747(0x292,0x2df,0x38c,0x39e)]))_0x4529e8=_0x5d1f56,_0x5a73a4[_0x296747(0x20e,0x28c,0x2bb,0x233)](_0x5d1f56);else{if(_0xe73dd9[_0x1672a2(0x27e,0x2d6,0x29e,0x289)](_0x5d1f56[_0x1672a2(0x1c3,0x2ca,0x2d6,0x266)],_0xe73dd9['GOHIS'])){if(_0x4529e8){if(_0xe73dd9[_0x296747(0x194,0x1d0,0x2a8,0x1f6)](_0x296747(0x22e,0x307,0x27b,0x2d8),_0xe73dd9['qmkcv']))_0x4529e8[_0x1672a2(0x2aa,0x20a,0x2c8,0x228)+_0x1672a2(0x286,0x340,0x32e,0x318)]['push'](_0x5d1f56['data']);else{if(_0xe73dd9[_0x296747(0x1a4,0x1b9,0x229,0x25a)](_0x4f2f92[_0x296747(0x272,0x1e3,0x18c,0x166)],_0x1672a2(0x3b9,0x3df,0x388,0x36f))&&_0x183cef[_0x296747(0x369,0x2ec,0x33b,0x22f)]['includes'](_0x3bf78f))return _0x3f0435;}}else _0x58d169[_0x296747(0x251,0x28c,0x31a,0x310)](_0x5d1f56[_0x296747(0x1f8,0x1c4,0x220,0x13c)]);}}}else _0x4f5c91&&_0x208122['add'](_0x488c37);}return{'characters':_0x5a73a4[_0x1672a2(0x329,0x28e,0x364,0x31d)](_0x26f603=>({..._0x26f603[_0x296747(0x203,0x1c4,0x19e,0x1fb)],'matchedOutfits':_0x26f603[_0x296747(0x270,0x1a5,0x27a,0x233)+'fits']})),'outfits':_0x58d169};}function getCurrentCharacterPreset(){const _0x2c7127=extension_settings[extensionName],_0x59c229=_0x2c7127[_0x550474(0x5f5,0x521,0x547,0x57d)+_0x3bcc50(0x40d,0x325,0x3e0,0x465)];if(!_0x59c229||!_0x2c7127[_0x550474(0x465,0x521,0x5b3,0x573)+'resets'][_0x59c229])return null;function _0x550474(_0x117c40,_0x19d36d,_0x27a632,_0x3cff1e){return _0x1bef45(_0x117c40,_0x19d36d-0x1b2,_0x27a632-0x48,_0x19d36d-0x361);}const _0x560bd0={};function _0x3bcc50(_0x288ef3,_0x2e0f4f,_0x4df90a,_0x27ede5){return _0x1bef45(_0x27ede5,_0x2e0f4f-0x145,_0x4df90a-0x17,_0x4df90a-0xaf);}return _0x560bd0['id']=_0x59c229,_0x560bd0[_0x550474(0x602,0x55e,0x488,0x5b9)]=_0x2c7127[_0x550474(0x5a0,0x521,0x49b,0x59f)+'resets'][_0x59c229],_0x560bd0;}function buildCharacterText(_0x25b831){function _0x45f210(_0x333d23,_0x390cb3,_0x14d114,_0xe7a4e1){return _0x1bef45(_0x390cb3,_0x390cb3-0x134,_0x14d114-0xb3,_0x333d23- -0x10e);}const _0x2fa729={};_0x2fa729[_0x3687e0(0x317,0x371,0x3a9,0x2d4)]=_0x45f210(0x1d7,0x1b5,0x10c,0x15f),_0x2fa729[_0x45f210(0xc2,0x190,0x6a,0xb8)]=_0x3687e0(0x45a,0x441,0x46d,0x519);const _0x45140c=_0x2fa729,_0x50381c=_0x25b831[_0x3687e0(0x43f,0x3ac,0x47c,0x360)];let _0x3906b4=_0x45140c[_0x45f210(0xb4,0x58,0x125,0x2e)];_0x3906b4+=_0x3687e0(0x568,0x4aa,0x425,0x4e1)+(_0x50381c[_0x45f210(0x12b,0x10e,0xde,0xae)]||'')+'\x0a',_0x3906b4+=_0x45f210(0x167,0x1c9,0x11c,0x14a)+(_0x50381c[_0x45f210(0xdc,0x9a,0x26,0x32)]||'')+'\x0a',_0x3906b4+=_0x45f210(0x214,0x272,0x2d2,0x1e2)+(_0x50381c[_0x3687e0(0x53b,0x4ba,0x47c,0x541)+'raits']||'')+'\x0a',_0x3906b4+='五官外貌:\x20'+(_0x50381c[_0x3687e0(0x436,0x3e4,0x422,0x459)+_0x45f210(0xc9,0x72,0x137,0xbf)]||'')+'\x0a',_0x3906b4+=_0x45f210(0x19a,0x1cb,0x14d,0xdd)+(_0x50381c[_0x3687e0(0x338,0x3e4,0x48f,0x3eb)+'uresBack']||'')+'\x0a',_0x3906b4+=_0x45f210(0x1e5,0x1ff,0x29d,0x173)+(_0x50381c['upperBodyS'+'FW']||'')+'\x0a',_0x3906b4+=_0x45f210(0xfe,0xa8,0x19d,0x64)+(_0x50381c[_0x3687e0(0x3ea,0x432,0x493,0x373)+_0x45f210(0x163,0x95,0xec,0x213)]||'')+'\x0a',_0x3906b4+=_0x3687e0(0x381,0x3c8,0x2ff,0x440)+(_0x50381c[_0x3687e0(0x483,0x45c,0x443,0x4dd)+'W']||'')+'\x0a';function _0x3687e0(_0x11d298,_0x424bd0,_0x5d3c36,_0x531a43){return _0x1bef45(_0x11d298,_0x424bd0-0xca,_0x5d3c36-0xdc,_0x424bd0-0x1af);}return _0x3906b4+=_0x45f210(0x123,0xd8,0x56,0x148)+(_0x50381c[_0x3687e0(0x509,0x45c,0x3e0,0x3cb)+'WBack']||'')+'\x0a',_0x3906b4+=_0x3687e0(0x462,0x3f0,0x3dd,0x37f)+(_0x50381c[_0x3687e0(0x529,0x481,0x493,0x3f5)+_0x3687e0(0x4a3,0x413,0x3e7,0x360)]||'')+'\x0a',_0x3906b4+=_0x45f210(0xed,0x62,0x30,0x177)+'\x20'+(_0x50381c[_0x3687e0(0x45d,0x481,0x497,0x425)+_0x45f210(0x235,0x273,0x1c9,0x15c)]||'')+'\x0a',_0x3906b4+=_0x45f210(0x215,0x15b,0x164,0x188)+(_0x50381c[_0x45f210(0xf2,0x179,0x1f,0x30)+'FW']||'')+'\x0a',_0x3906b4+=_0x3687e0(0x526,0x4c4,0x56e,0x413)+'\x20'+(_0x50381c['fullBodyNS'+'FWBack']||'')+'\x0a',_0x3906b4+=_0x45140c[_0x45f210(0xc2,0x67,0x70,0x186)],_0x3906b4;}export async function handleCharacterPromptModify(_0x5f04fc,_0x30b1b6=[]){function _0x3dcc8d(_0x573bb6,_0x37f1aa,_0x58f289,_0x3ca3e){return _0x1bef45(_0x573bb6,_0x37f1aa-0xb5,_0x58f289-0x73,_0x37f1aa-0x19d);}function _0x366f67(_0x3d4f57,_0x58dbe8,_0x1fcce6,_0x1e12f0){return _0x1bef45(_0x1fcce6,_0x58dbe8-0xb2,_0x1fcce6-0x134,_0x58dbe8- -0xe);}const _0x33d6c6={'LoieR':function(_0x2e5cea,_0x44cd17,_0x4ce7c6,_0x459067,_0x5bb191){return _0x2e5cea(_0x44cd17,_0x4ce7c6,_0x459067,_0x5bb191);},'BPEMH':_0x366f67(0x300,0x308,0x293,0x30e),'VlXxC':_0x3dcc8d(0x3be,0x3b4,0x43b,0x326)+_0x3dcc8d(0x362,0x3f8,0x44c,0x468)+_0x366f67(0x223,0x239,0x18f,0x2d9)+'ed','tnqBc':'images\x20to\x20'+_0x3dcc8d(0x322,0x35b,0x3dd,0x39a)+_0x366f67(0x276,0x1e6,0x2ae,0x237),'ohndg':'请先选择一个角色预设','pQrkI':'[character'+_0x366f67(0x2c3,0x24d,0x2a8,0x1fa)+_0x366f67(0x357,0x359,0x38c,0x432)+_0x3dcc8d(0x3a3,0x3ef,0x3f0,0x411)+_0x3dcc8d(0x420,0x4b8,0x480,0x55f)+_0x366f67(0x1e6,0x212,0x2dc,0x267)+_0x366f67(0x224,0x2f4,0x245,0x3a8),'IPVbF':_0x366f67(0x2da,0x209,0x2de,0x2cb)+_0x3dcc8d(0x36d,0x3f8,0x398,0x434)+_0x366f67(0x21c,0x2ce,0x2ea,0x2c6)+_0x3dcc8d(0x3f2,0x3c5,0x3bf,0x475),'FtExx':function(_0x31ccee){return _0x31ccee();},'eKrcD':function(_0x2030f2,_0x4cf998){return _0x2030f2!==_0x4cf998;},'iDDjf':_0x366f67(0x317,0x287,0x24b,0x1c0),'hfAJO':_0x366f67(0x273,0x209,0x259,0x1c4)+_0x366f67(0x187,0x24d,0x321,0x2cf)+_0x3dcc8d(0x2ef,0x38b,0x430,0x393)+_0x3dcc8d(0x39a,0x44d,0x45d,0x478),'ZeZPE':function(_0x1760a0,_0x3ec2a0){return _0x1760a0||_0x3ec2a0;},'kotMU':_0x366f67(0x1d4,0x209,0x222,0x16e)+_0x366f67(0x317,0x24d,0x1f6,0x1d7)+_0x366f67(0x39e,0x35b,0x3c0,0x30e)+_0x366f67(0x2a4,0x35f,0x38c,0x420)+_0x3dcc8d(0x419,0x36c,0x29b,0x31f),'iBMYZ':function(_0xa9b53a,_0x4da9e8,_0x45c6bc){return _0xa9b53a(_0x4da9e8,_0x45c6bc);},'ODjEx':'char_modif'+'y','hSqqU':function(_0xf2ab78,_0x4b136a){return _0xf2ab78(_0x4b136a);},'iZgRK':function(_0x5f53be){return _0x5f53be();},'eDtkr':function(_0x40dfe7){return _0x40dfe7();},'koZKt':_0x366f67(0x2e5,0x209,0x212,0x221)+_0x3dcc8d(0x424,0x3f8,0x3a6,0x326)+'fy]\x20Charac'+_0x366f67(0x225,0x2cc,0x317,0x206)+_0x366f67(0x201,0x261,0x308,0x2ab)+_0x366f67(0x346,0x309,0x24c,0x2bb),'GydGW':_0x366f67(0x216,0x209,0x191,0x2bf)+_0x3dcc8d(0x448,0x3f8,0x462,0x380)+_0x366f67(0x254,0x24f,0x2b4,0x1d0)+'后:','LqtZT':_0x3dcc8d(0x39e,0x42e,0x3e5,0x3ab),'bpmXY':function(_0x2240b6,_0xb90037){return _0x2240b6||_0xb90037;},'qApJY':_0x3dcc8d(0x3ba,0x3b4,0x32a,0x424)+'PromptModi'+'fy]\x20Final\x20'+_0x3dcc8d(0x3ff,0x424,0x3a3,0x4d2),'RNnbU':function(_0x569ddd,_0x3ac2fc){return _0x569ddd>_0x3ac2fc;},'lLBSl':function(_0x249a89,_0xb22938){return _0x249a89>=_0xb22938;},'hZEZi':function(_0x1b3021,_0x2f1799,_0x462521,_0x4ca0bf,_0x417da7){return _0x1b3021(_0x2f1799,_0x462521,_0x4ca0bf,_0x417da7);},'LUWfU':'[character'+_0x3dcc8d(0x3a6,0x3f8,0x38e,0x460)+'fy]\x20LLM\x20ou'+_0x366f67(0x2bf,0x290,0x302,0x31d),'ROAmL':function(_0x1a953a,_0x44bf2e){return _0x1a953a(_0x44bf2e);},'CqiTM':function(_0xbad842,_0x37f19f){return _0xbad842===_0x37f19f;},'YDbhI':_0x3dcc8d(0x32b,0x3ab,0x470,0x386)+_0x3dcc8d(0x5c1,0x4f7,0x546,0x5b2),'XeaHU':_0x3dcc8d(0x434,0x3b4,0x352,0x3ef)+_0x3dcc8d(0x393,0x3f8,0x459,0x37b)+_0x366f67(0x2e5,0x2b3,0x1ea,0x27f)+_0x3dcc8d(0x2d6,0x396,0x3b8,0x412)+_0x366f67(0x323,0x26e,0x2b4,0x290)+_0x3dcc8d(0x42a,0x36b,0x344,0x2ba),'jHdyv':'[character'+_0x366f67(0x1e9,0x24d,0x17a,0x1be)+_0x366f67(0x236,0x243,0x260,0x233)+_0x366f67(0x213,0x1ff,0x262,0x225),'yVnGi':function(_0x3838a2,_0x4428c5,_0x1b765d){return _0x3838a2(_0x4428c5,_0x1b765d);},'qCgyK':function(_0x5a09c5,_0x51d6f5){return _0x5a09c5>_0x51d6f5;},'RKzfv':_0x3dcc8d(0x4b3,0x456,0x3dc,0x3d0),'xDmIa':function(_0x176f3d,_0x48ecba){return _0x176f3d(_0x48ecba);},'UNaNQ':_0x3dcc8d(0x2b1,0x364,0x3ab,0x3ab)+'完成！','JELuI':'PBlyN','GcZaq':_0x366f67(0x268,0x209,0x173,0x136)+'PromptModi'+_0x366f67(0x19e,0x274,0x2e6,0x247)};console[_0x3dcc8d(0x4a5,0x3ca,0x3f0,0x462)](_0x33d6c6[_0x3dcc8d(0x54f,0x4e4,0x57c,0x52c)]),toastr[_0x366f67(0x309,0x299,0x35c,0x24e)](_0x33d6c6['IPVbF']);try{const _0x4c5073=getContext(),_0x1d9d6d=extension_settings[extensionName],_0x1ae00a=_0x33d6c6[_0x3dcc8d(0x3b4,0x3c7,0x302,0x3c7)](getCurrentCharacterPreset);if(!_0x1ae00a){if(_0x33d6c6[_0x366f67(0x325,0x2b9,0x2be,0x35b)](_0x33d6c6[_0x366f67(0x3ad,0x318,0x344,0x29c)],_0x33d6c6['iDDjf']))return null;else{toastr[_0x3dcc8d(0x3f7,0x4a4,0x50d,0x46e)](_0x33d6c6[_0x366f67(0x268,0x25b,0x1b1,0x322)]);return;}}console['log'](_0x3dcc8d(0x400,0x3b4,0x328,0x3b2)+_0x366f67(0x28d,0x24d,0x31e,0x190)+_0x3dcc8d(0x3e0,0x397,0x406,0x3f9)+'t\x20preset:',_0x1ae00a['id']);const _0x330cda=_0x1ae00a[_0x3dcc8d(0x41a,0x39a,0x2df,0x33e)][_0x3dcc8d(0x426,0x45f,0x386,0x4cb)+_0x366f67(0x2cc,0x220,0x2e9,0x2d5)]||'',_0x488ea3=_0x1ae00a[_0x3dcc8d(0x30e,0x39a,0x457,0x3a6)]['generation'+'WorldBook']||'',_0x20aee2=_0x1ae00a['data'][_0x366f67(0x2d6,0x2b4,0x1f5,0x34f)+_0x3dcc8d(0x400,0x491,0x440,0x43f)]||{};console['log']('[character'+_0x3dcc8d(0x345,0x3f8,0x4cb,0x321)+_0x3dcc8d(0x3c6,0x38b,0x345,0x42a)+_0x3dcc8d(0x2eb,0x3be,0x2f2,0x331),_0x330cda),console['log']('[character'+_0x366f67(0x255,0x24d,0x310,0x210)+_0x3dcc8d(0x462,0x38b,0x3c1,0x3a3)+_0x366f67(0x2e0,0x230,0x305,0x1d5)+':',_0x488ea3),console[_0x366f67(0x148,0x21f,0x17a,0x15d)](_0x33d6c6[_0x366f67(0x1e2,0x28a,0x1dd,0x1d1)],_0x20aee2);const _0x4b83da=_0x33d6c6[_0x3dcc8d(0x3c3,0x3f5,0x34e,0x4b3)](_0x5f04fc,''),_0x23c13f=[];_0x5f04fc&&_0x23c13f[_0x3dcc8d(0x4a3,0x462,0x423,0x511)](_0x5f04fc);_0x330cda&&_0x23c13f['push'](_0x330cda);_0x488ea3&&_0x23c13f[_0x366f67(0x256,0x2b7,0x1e4,0x2f5)](_0x488ea3);const _0x19b94c=_0x23c13f[_0x3dcc8d(0x449,0x416,0x433,0x4f1)]('\x0a');console['log'](_0x33d6c6[_0x3dcc8d(0x3d8,0x3d4,0x43d,0x355)],_0x19b94c);let _0x2f1c72=_0x33d6c6['iBMYZ'](buildPromptForRequestType,_0x33d6c6[_0x3dcc8d(0x36b,0x405,0x4bf,0x368)],_0x4b83da);const _0x56cdd2=_0x33d6c6['hSqqU'](generateCharacterListText,_0x19b94c),_0x20ffc0=_0x33d6c6[_0x366f67(0x2f0,0x324,0x3f3,0x2f1)](generateOutfitEnableListText),_0x33b474=_0x33d6c6['eDtkr'](generateCommonCharacterListText);console[_0x366f67(0x153,0x21f,0x1d0,0x191)](_0x33d6c6[_0x3dcc8d(0x3d6,0x3f6,0x44b,0x4ba)],_0x56cdd2);const _0x43feda=_0x4c5073[_0x366f67(0x206,0x273,0x245,0x2a6)+'ta']?.[_0x3dcc8d(0x30a,0x39b,0x41b,0x316)]||{},_0x2c4696=_0x33d6c6['hSqqU'](buildCharacterText,_0x1ae00a);_0x2f1c72=_0x33d6c6['hSqqU'](mergeAdjacentMessages,_0x2f1c72),console[_0x3dcc8d(0x387,0x3ca,0x45b,0x4a5)](_0x33d6c6['GydGW'],_0x2f1c72);const _0x272233=_0x33d6c6[_0x366f67(0x2ed,0x28e,0x1dc,0x322)](findMessageIndexWithPlaceholder,_0x2f1c72,_0x33d6c6[_0x366f67(0x346,0x2b1,0x1fd,0x1f0)]);console[_0x3dcc8d(0x377,0x3ca,0x360,0x473)](_0x366f67(0x28b,0x209,0x233,0x158)+_0x3dcc8d(0x4c4,0x3f8,0x33f,0x449)+'fy]\x20User\x20r'+_0x366f67(0xe5,0x1bf,0x14e,0x27c)+_0x366f67(0x284,0x251,0x1f4,0x182)+_0x366f67(0x270,0x2bb,0x2da,0x241),_0x272233);const _0x5b1846={..._0x20aee2,..._0x43feda},_0x1e5ace={'context':_0x330cda,'worldBookContent':_0x488ea3,'variables':_0x5b1846,'userDemand':_0x33d6c6[_0x366f67(0x229,0x2d6,0x39c,0x34e)](_0x5f04fc,''),'characterListText':_0x56cdd2,'outfitEnableListText':_0x20ffc0,'commonCharacterListText':_0x33b474},{messages:_0x476f56,replacedVariables:_0x5ef9ed}=_0x33d6c6[_0x3dcc8d(0x469,0x439,0x3b6,0x45b)](replaceAllPlaceholders,_0x2f1c72,_0x1e5ace);_0x2f1c72=_0x476f56,_0x2f1c72=_0x5d82ab(_0x2f1c72,_0x366f67(0x16c,0x1e3,0x199,0x2bc),_0x2c4696,_0x5ef9ed),console[_0x3dcc8d(0x3c4,0x3ca,0x320,0x440)](_0x33d6c6[_0x3dcc8d(0x455,0x3f0,0x380,0x3b2)],_0x2f1c72);let _0x2746cf='';_0x5ef9ed[_0x366f67(0x371,0x2cb,0x254,0x230)]>-0x29*-0x8b+-0x15d1+0x1*-0x72&&(_0x2746cf=_0x366f67(0x268,0x2ee,0x287,0x39b)+_0x366f67(0x266,0x27f,0x1de,0x328)+[..._0x5ef9ed][_0x366f67(0x295,0x26b,0x1a5,0x1b9)]('、')+'\x0a');_0x30b1b6&&_0x33d6c6['RNnbU'](_0x30b1b6['length'],-0x1*-0x26ef+0xad7+0x2e*-0x115)&&_0x33d6c6[_0x3dcc8d(0x383,0x368,0x42d,0x362)](_0x272233,-0x11e1+0x6*-0xe3+-0x1733*-0x1)&&(_0x2f1c72=_0x33d6c6[_0x3dcc8d(0x2ff,0x362,0x2ab,0x2ef)](attachImagesToMessage,_0x2f1c72,_0x272233,_0x30b1b6,_0x33d6c6[_0x3dcc8d(0x31b,0x38a,0x401,0x372)]),console[_0x3dcc8d(0x46b,0x3ca,0x3dd,0x3d3)](_0x3dcc8d(0x342,0x3b4,0x40a,0x47d)+'PromptModi'+_0x366f67(0x16c,0x239,0x183,0x2cf)+'ed',_0x30b1b6[_0x366f67(0x22e,0x29c,0x2a2,0x1ef)],_0x366f67(0x379,0x2e8,0x38b,0x221)+_0x366f67(0x171,0x1b0,0x148,0x115)+'\x20index',_0x272233));_0x33d6c6[_0x3dcc8d(0x453,0x439,0x3ad,0x4e4)](updateCombinedPrompt,_0x2f1c72,_0x2746cf);const _0x14703a={};_0x14703a[_0x3dcc8d(0x29e,0x35e,0x311,0x31a)]=0x493e0;const _0xb680b9=await _0x33d6c6[_0x3dcc8d(0x50f,0x439,0x3a7,0x4e6)](LLM_CHAR_MODIFY,_0x2f1c72,_0x14703a);console['log'](_0x33d6c6[_0x366f67(0x36e,0x2df,0x2f0,0x2c9)],_0xb680b9);if(!_0xb680b9){toastr['error'](_0x3dcc8d(0x36b,0x360,0x3ad,0x341));return;}const _0x3e9deb=_0x33d6c6[_0x3dcc8d(0x393,0x3c3,0x3bb,0x42f)](extractCharacterAndOutfitTags,_0xb680b9);if(_0x33d6c6[_0x366f67(0x350,0x313,0x3a8,0x340)](_0x3e9deb[_0x366f67(0x25f,0x2a1,0x30a,0x374)][_0x3dcc8d(0x3c2,0x447,0x43d,0x438)],0xbb*0xb+-0x1753+-0x67*-0x26)&&_0x33d6c6['CqiTM'](_0x3e9deb[_0x3dcc8d(0x48a,0x404,0x467,0x3ec)][_0x3dcc8d(0x4c5,0x447,0x37e,0x428)],-0x1252+0xa0f*-0x1+-0x1c61*-0x1)){toastr['warning'](_0x33d6c6[_0x3dcc8d(0x528,0x49a,0x49f,0x4c3)]),console[_0x3dcc8d(0x3a6,0x3ca,0x404,0x3b0)](_0x366f67(0x27a,0x209,0x2ae,0x248)+_0x3dcc8d(0x39c,0x3f8,0x3fe,0x3bc)+_0x366f67(0x2f0,0x31c,0x386,0x2b1)+'racter/out'+_0x3dcc8d(0x54e,0x486,0x411,0x3e8)+_0x3dcc8d(0x3a8,0x369,0x424,0x2d2)+'tput'),console['log'](_0x33d6c6[_0x366f67(0x3c0,0x32b,0x309,0x2db)],_0xb680b9);return;}console[_0x3dcc8d(0x462,0x3ca,0x428,0x437)](_0x33d6c6[_0x3dcc8d(0x498,0x3d9,0x3f3,0x31f)],_0x3e9deb);if(_0x3e9deb['characters']['length']>0xc4a+-0x4bb+-0x78f){const _0x3eb0a8=_0x3e9deb['characters'][0x161*-0x13+-0x1736+0x3169];await _0x33d6c6[_0x366f67(0x2f5,0x246,0x2c5,0x28e)](updateCharacterPresetFromLLM,_0x1ae00a['id'],_0x3eb0a8);}const _0x120e3a=[..._0x3e9deb[_0x3dcc8d(0x460,0x404,0x38c,0x42b)]];for(const _0x1c46df of _0x3e9deb[_0x366f67(0x2ec,0x2a1,0x224,0x255)]){_0x1c46df[_0x366f67(0x218,0x1d0,0x19f,0x27b)+_0x366f67(0x2a5,0x2c0,0x202,0x34d)]&&_0x1c46df[_0x366f67(0x14a,0x1d0,0x1bc,0x1e0)+_0x366f67(0x20d,0x2c0,0x2d0,0x26e)][_0x366f67(0x34e,0x29c,0x272,0x286)]>0x9bc*0x4+-0x3*0x721+-0x118d&&_0x120e3a[_0x3dcc8d(0x3f7,0x462,0x504,0x460)](..._0x1c46df[_0x3dcc8d(0x3c1,0x37b,0x373,0x3d6)+_0x366f67(0x300,0x2c0,0x377,0x370)]);}_0x33d6c6[_0x3dcc8d(0x482,0x4e5,0x599,0x40b)](_0x120e3a[_0x3dcc8d(0x3dc,0x447,0x497,0x465)],-0xc*-0x283+-0x1*0x411+0x5*-0x537)&&(_0x33d6c6['CqiTM'](_0x33d6c6[_0x3dcc8d(0x4c8,0x41a,0x3ae,0x49e)],_0x33d6c6[_0x366f67(0x2ae,0x26f,0x326,0x1dc)])?await _0x33d6c6[_0x3dcc8d(0x3b4,0x434,0x505,0x3bd)](updateOutfitPresetsFromLLM,_0x120e3a):(_0x354c76=_0x33d6c6[_0x366f67(0x2a0,0x1ce,0x10e,0x21c)](_0x331b51,_0x1067cc,_0x4b6982,_0x166caf,_0x33d6c6[_0x3dcc8d(0x2c0,0x38a,0x2b3,0x2e1)]),_0x35ec16['log'](_0x33d6c6[_0x3dcc8d(0x4e3,0x4ea,0x46d,0x467)],_0x3a2f58[_0x3dcc8d(0x374,0x447,0x36e,0x414)],_0x33d6c6['tnqBc'],_0x34cdac))),toastr['success'](_0x33d6c6[_0x3dcc8d(0x348,0x3cd,0x456,0x430)]);}catch(_0x316413){if(_0x33d6c6[_0x3dcc8d(0x430,0x464,0x3ab,0x4e1)](_0x3dcc8d(0x4cd,0x465,0x4a5,0x53e),_0x33d6c6[_0x3dcc8d(0x4ce,0x492,0x4fa,0x433)]))console[_0x366f67(0x36c,0x2f9,0x291,0x37a)](_0x33d6c6[_0x3dcc8d(0x38d,0x418,0x42a,0x4e9)],_0x316413),toastr[_0x366f67(0x340,0x2f9,0x2ff,0x343)](_0x3dcc8d(0x3da,0x381,0x400,0x335)+'\x20'+_0x316413[_0x366f67(0x201,0x1b6,0x25c,0x1ea)]);else{_0x575702[_0x366f67(0x30c,0x2f9,0x251,0x32f)](_0x33d6c6[_0x366f67(0x1a7,0x25b,0x31b,0x2bc)]);return;}}}async function updateCharacterPresetFromLLM(_0x3c37a1,_0x2bb5ac){const _0x52f0ef={'sTuSM':function(_0x2fd12a,_0x16158b,_0x47747a,_0xfdcc8c,_0x5c73b5){return _0x2fd12a(_0x16158b,_0x47747a,_0xfdcc8c,_0x5c73b5);},'DbYsq':function(_0x689cca,_0x19d2e4){return _0x689cca(_0x19d2e4);},'DEayV':_0x640da2(0x3d6,0x3b3,0x453,0x2f4),'qwCyA':_0x640da2(0x471,0x39d,0x2df,0x353),'HPvRB':_0x1e87ce(0x4ab,0x543,0x427,0x3ff),'dElwM':'英文名称','mADKt':'角色特征','BrwXU':'五官外貌','HENRK':'五官外貌背面','BzBxS':_0x1e87ce(0x517,0x4d1,0x560,0x454),'VrLdC':_0x640da2(0x51e,0x45b,0x465,0x391),'cnBIo':_0x640da2(0x45f,0x4b1,0x565,0x3fa),'wjrVj':_0x1e87ce(0x52b,0x49e,0x582,0x569),'FeMGh':_0x640da2(0x3ad,0x3ec,0x31a,0x324),'GMVbS':function(_0x1fd9f7,_0x17049a){return _0x1fd9f7!==_0x17049a;},'Kbzoy':_0x1e87ce(0x4d4,0x517,0x514,0x4c4)+'内容','MEWqn':function(_0xae0481,_0x542edb){return _0xae0481===_0x542edb;},'ohOTx':_0x1e87ce(0x474,0x3c3,0x4bc,0x418),'dvtOz':_0x1e87ce(0x3e8,0x39c,0x396,0x321),'nlDPO':function(_0x594c07,_0xd20a10){return _0x594c07!==_0xd20a10;},'VtQCJ':_0x640da2(0x4c6,0x45f,0x51c,0x4f7),'RLvdg':function(_0x61c7d0){return _0x61c7d0();},'shYht':_0x640da2(0x418,0x4ee,0x518,0x450)},_0x2b5227=extension_settings[extensionName],_0xa37e72=_0x2b5227[_0x640da2(0x3c6,0x355,0x425,0x375)+_0x640da2(0x44a,0x396,0x390,0x2fa)][_0x3c37a1];if(!_0xa37e72){toastr['error'](_0x52f0ef[_0x1e87ce(0x44a,0x509,0x3fe,0x457)]);return;}const _0xd0af4a={};_0xd0af4a[_0x640da2(0x381,0x3ce,0x44d,0x3fa)]=_0x52f0ef[_0x640da2(0x38b,0x3af,0x323,0x2d5)],_0xd0af4a[_0x640da2(0x356,0x37f,0x424,0x33d)]=_0x52f0ef['dElwM'],_0xd0af4a['characterT'+_0x640da2(0x41e,0x425,0x46a,0x420)]=_0x52f0ef[_0x640da2(0x524,0x4d1,0x50c,0x3f5)],_0xd0af4a[_0x640da2(0x427,0x3ca,0x3b7,0x347)+_0x1e87ce(0x402,0x3dc,0x455,0x400)]=_0x52f0ef[_0x640da2(0x455,0x380,0x45b,0x438)],_0xd0af4a[_0x1e87ce(0x460,0x4bb,0x4ad,0x3d8)+_0x640da2(0x444,0x4be,0x4e3,0x47c)]=_0x52f0ef[_0x1e87ce(0x49e,0x4cb,0x426,0x4d9)],_0xd0af4a[_0x1e87ce(0x4ae,0x563,0x515,0x41c)+'FW']=_0x52f0ef['BzBxS'],_0xd0af4a[_0x1e87ce(0x4ae,0x587,0x439,0x425)+_0x640da2(0x37e,0x406,0x3cc,0x48b)]=_0x52f0ef['VrLdC'],_0xd0af4a[_0x1e87ce(0x4d8,0x534,0x46f,0x5a3)+'W']=_0x640da2(0x497,0x3d7,0x42a,0x412);function _0x640da2(_0x5ed54e,_0x12a631,_0x500dc5,_0x3d18f7){return _0x1bef45(_0x500dc5,_0x12a631-0x70,_0x500dc5-0x1e4,_0x12a631-0x195);}_0xd0af4a[_0x640da2(0x3e3,0x442,0x51b,0x493)+_0x640da2(0x369,0x437,0x4d9,0x4d1)]=_0x52f0ef[_0x640da2(0x398,0x399,0x2fc,0x2ea)],_0xd0af4a[_0x640da2(0x396,0x467,0x525,0x48c)+_0x640da2(0x3cf,0x3f9,0x3a6,0x38d)]=_0x52f0ef[_0x640da2(0x386,0x34f,0x425,0x2ab)],_0xd0af4a['upperBodyN'+'SFWBack']=_0x1e87ce(0x580,0x541,0x4cc,0x517),_0xd0af4a[_0x1e87ce(0x42b,0x4f0,0x37d,0x466)+'FW']=_0x52f0ef['FeMGh'],_0xd0af4a[_0x640da2(0x35c,0x395,0x30c,0x351)+'FWBack']=_0x1e87ce(0x552,0x55f,0x4dc,0x561);const _0x4615ae=_0xd0af4a;let _0x3a200f=0x23bb*0x1+0x72b+-0x2ae6;for(const _0x153234 in _0x4615ae){_0x2bb5ac[_0x153234]&&_0x52f0ef['GMVbS'](_0x2bb5ac[_0x153234],_0xa37e72[_0x153234])&&_0x3a200f++;}if(_0x3a200f===0x262b+-0x1*0x2476+-0x1b5){toastr['info'](_0x52f0ef[_0x1e87ce(0x52a,0x5e2,0x547,0x4e0)]);return;}const _0x339e5b=_0x1e87ce(0x55b,0x4fa,0x606,0x631)+_0x3c37a1+'\x22\x20有\x20'+_0x3a200f+'\x20项更改,是否应用?',_0x41705c=await _0x52f0ef[_0x640da2(0x3d8,0x3c4,0x40b,0x3cb)](stylishConfirm,_0x339e5b);if(!_0x41705c){if(_0x52f0ef[_0x640da2(0x520,0x4da,0x589,0x53b)](_0x1e87ce(0x4d7,0x5ae,0x406,0x52a),_0x52f0ef[_0x1e87ce(0x51d,0x4b4,0x5b1,0x5ce)]))return _0x193b12&&_0x502332['includes'](_0x410911)&&(_0xeddcf6&&_0x59554e[_0x640da2(0x2e7,0x374,0x40e,0x32d)](_0x34f42d)),_0xfc9298['replaceAll'](_0x518d0e,_0x2e8798);else{toastr[_0x1e87ce(0x4d2,0x587,0x470,0x59d)](_0x52f0ef['dvtOz']);return;}}for(const _0x3f8d20 in _0x4615ae){if(_0x2bb5ac[_0x3f8d20]){if(_0x52f0ef[_0x1e87ce(0x422,0x3f1,0x4b4,0x3e7)](_0x52f0ef[_0x1e87ce(0x430,0x36d,0x4fe,0x459)],_0x1e87ce(0x56d,0x4ab,0x4ac,0x4e1)))_0xa37e72[_0x3f8d20]=_0x2bb5ac[_0x3f8d20];else{const _0x25ba20={};for(const _0x88b8f0 in _0x12cc59){_0x25ba20[_0x88b8f0]=_0x52f0ef[_0x640da2(0x4a2,0x4e1,0x475,0x57b)](_0x158186,_0x1d7274[_0x88b8f0],_0x15cead,_0x395327,_0x585f8a);}return _0x25ba20;}}}_0x52f0ef[_0x1e87ce(0x489,0x46a,0x42c,0x45e)](saveSettingsDebounced);function _0x1e87ce(_0x32e53c,_0x5a3f16,_0xecf8ab,_0x448a66){return _0x1bef45(_0x448a66,_0x5a3f16-0x4d,_0xecf8ab-0xeb,_0x32e53c-0x22b);}const _0x143825=$('#st-chatu8'+_0x640da2(0x3ef,0x3a0,0x33e,0x3ca)+_0x1e87ce(0x421,0x392,0x43a,0x4d5));if(_0x143825[_0x640da2(0x42e,0x43f,0x513,0x4d3)]){if(_0x52f0ef[_0x640da2(0x306,0x38c,0x39f,0x386)](_0x52f0ef['shYht'],_0x52f0ef['shYht'])){const _0x1914c1=_0x52f0ef[_0x640da2(0x3d0,0x3c4,0x465,0x416)](_0x142be8,_0x46d661);if(_0x1914c1){const _0x484399={};_0x484399[_0x1e87ce(0x447,0x3e7,0x46c,0x392)]=_0x52f0ef[_0x640da2(0x56a,0x4e9,0x58a,0x49d)],_0x484399[_0x640da2(0x303,0x392,0x366,0x337)]=_0x1914c1,_0x484399['position']=_0x41d0e2,_0x484399[_0x1e87ce(0x409,0x3f0,0x34b,0x38b)+_0x1e87ce(0x4f9,0x52a,0x512,0x475)]=[],_0x5425ea['push'](_0x484399);}}else _0x52f0ef[_0x1e87ce(0x45a,0x463,0x52c,0x430)](refreshCharacterSettings,_0x143825);}_0x52f0ef['DbYsq'](updateFormFields,_0x2bb5ac),console[_0x640da2(0x363,0x3c2,0x44c,0x3cd)](_0x640da2(0x3f5,0x3ac,0x2d3,0x40b)+_0x640da2(0x32c,0x3f0,0x33b,0x343)+_0x640da2(0x3a4,0x372,0x3ad,0x325)+_0x640da2(0x4bc,0x461,0x4c7,0x422)+_0x3c37a1+'\x22');}async function updateOutfitPresetsFromLLM(_0x5684de){const _0x423c0d={'XHgNg':_0x370686(-0xcc,-0x23,-0x18c,-0xdc)+_0x370686(0x3d,-0x30,0x6e,0x70),'ZcYsl':_0x370686(-0xc2,-0xf2,-0xed,-0xd3)+'PromptModi'+'fy]\x20No\x20cha'+_0x39fc6b(0x35f,0x202,0x2d0,0x2ab)+_0x39fc6b(0x33d,0x33e,0x1f5,0x277)+_0x370686(-0x178,-0x1d4,-0x72,-0x11e)+_0x370686(-0x11e,-0xc3,-0xe5,-0x87),'FvBUp':'[character'+_0x370686(0x4a,-0x29,-0x37,-0x8f)+_0x370686(0xaf,-0x6a,-0x2,-0x29)+_0x370686(-0xbc,-0x116,-0x2b,-0xf1)+_0x39fc6b(0x2ab,0x1b1,0x14b,0x20a)+_0x370686(-0x12f,-0xad,-0x7e,-0x11c),'fJETA':function(_0x3a0a93,_0x2baed0){return _0x3a0a93(_0x2baed0);},'YTGyH':_0x370686(-0x51,-0x127,-0xf2,-0x62),'WSNtR':_0x39fc6b(0x276,0x18b,0x227,0x20e),'YEirk':_0x39fc6b(0x238,0x145,0x19d,0x218),'QDCno':_0x39fc6b(0x250,0x199,0x1fd,0x1f8),'YHhrI':_0x39fc6b(0x283,0x234,0x1b4,0x1db),'laWow':_0x39fc6b(0x157,0xcd,0x231,0x190),'JIEJY':_0x39fc6b(0x169,0x239,0x2b4,0x21c),'OqQcD':function(_0x1144b1,_0x1c67cc){return _0x1144b1!==_0x1c67cc;},'qlIVs':_0x370686(-0x6e,-0x142,-0x19c,-0x120),'WVest':function(_0x4806b5,_0x2f71df){return _0x4806b5!==_0x2f71df;},'nLfaX':_0x370686(-0x158,-0xd0,-0x16b,-0x132),'fDdUt':function(_0x572f9b,_0x1e3edb){return _0x572f9b===_0x1e3edb;},'oADCX':function(_0x46e175,_0x1c13af){return _0x46e175(_0x1c13af);},'yPEYi':function(_0x1e9b5a,_0xaca4f1){return _0x1e9b5a!==_0xaca4f1;},'tQedS':_0x39fc6b(0x24b,0x20c,0x266,0x2c3),'PyaSs':function(_0x589f22,_0x9ca0b3){return _0x589f22(_0x9ca0b3);},'OLVda':_0x39fc6b(0x188,0xbf,0x267,0x198),'uLgRU':function(_0x4d8250,_0x3975cf){return _0x4d8250===_0x3975cf;},'TabmP':_0x370686(-0x5,0xb6,0x41,0x74),'QGbye':function(_0x455076,_0x4c1b21){return _0x455076===_0x4c1b21;},'hXzLc':function(_0x58eaf8,_0x529f3f){return _0x58eaf8(_0x529f3f);},'rpuDP':'#st-chatu8'+_0x39fc6b(0x1db,0x1a5,0xc7,0x199)+_0x370686(-0x19c,-0xde,-0xa5,-0xf4),'gmnuG':function(_0x15237e,_0x22d9f4){return _0x15237e!==_0x22d9f4;},'TgOcO':_0x39fc6b(0x1ae,0x235,0x311,0x244)},_0x3f36eb=extension_settings[extensionName];function _0x39fc6b(_0x49dd67,_0x1d0f78,_0x2bb250,_0x1bea10){return _0x1bef45(_0x49dd67,_0x1d0f78-0x135,_0x2bb250-0x44,_0x1bea10- -0x72);}const _0x50af70={};_0x50af70[_0x370686(-0xb9,-0x87,-0x6f,-0xb1)]=_0x423c0d[_0x370686(-0x57,-0xdd,-0xf5,-0x90)],_0x50af70['nameEN']=_0x423c0d[_0x370686(0xc4,-0x5e,-0x65,0x23)],_0x50af70[_0x370686(0xe,0x7d,-0x41,-0x54)]=_0x39fc6b(0x209,0x288,0x198,0x1b3),_0x50af70[_0x370686(0x44,-0xa,-0x9,-0x4f)]=_0x423c0d[_0x370686(-0x77,-0x58,-0xad,-0x12b)],_0x50af70[_0x39fc6b(0x1df,0x295,0x325,0x29e)+'ack']=_0x423c0d['YHhrI'],_0x50af70[_0x370686(0x63,-0x55,-0xa4,-0x3f)]=_0x423c0d[_0x370686(0x2c,-0x75,-0x98,0x35)],_0x50af70[_0x39fc6b(0x309,0x2e4,0x1bd,0x26c)+'ck']=_0x423c0d[_0x370686(-0x183,-0x14c,-0xb9,-0xc8)];const _0x4ab356=_0x50af70;for(const _0x340689 of _0x5684de){const _0x30256f=_0x340689[_0x39fc6b(0x10a,0x223,0x1a9,0x1c7)];if(!_0x30256f)continue;const _0x2d77f1=_0x3f36eb['outfitPres'+'ets']?.[_0x30256f];if(_0x2d77f1){let _0x143132=-0x1439+0x9d*-0x3+-0x161*-0x10;for(const _0x1636a2 in _0x4ab356){if(_0x423c0d[_0x370686(-0x6a,0x48,0x4e,-0x76)](_0x423c0d[_0x39fc6b(0x292,0x1c5,0x29f,0x21d)],_0x39fc6b(0x19b,0x13c,0x18a,0x1d3))){if(_0x340689[_0x1636a2]&&_0x423c0d['WVest'](_0x340689[_0x1636a2],_0x2d77f1[_0x1636a2])){if(_0x423c0d['WVest'](_0x423c0d['nLfaX'],_0x423c0d['nLfaX'])){_0x1f2a74[_0x370686(-0x1bf,-0x171,-0xac,-0xfa)](_0x423c0d[_0x39fc6b(0x1ea,0x268,0x23c,0x2b9)]),_0x587f3c[_0x370686(-0x8,-0x155,-0x86,-0xbd)](_0x423c0d[_0x370686(0x6f,-0xac,-0xf4,-0x6b)]),_0x34c042['log'](_0x423c0d[_0x39fc6b(0x22d,0x2c6,0x22e,0x252)],_0x4f1cd2);return;}else _0x143132++;}}else _0x1649b9[_0x22c853]=_0x2d80e1[_0x2ad576];}if(_0x423c0d['fDdUt'](_0x143132,-0x11f+0x1d22+-0x1c03)){console[_0x370686(-0x22,-0x11f,0x14,-0xbd)]('[character'+_0x39fc6b(0x231,0x27c,0x127,0x1e9)+_0x370686(-0x19d,-0xf1,-0x6f,-0xd5)+_0x30256f+_0x370686(-0x76,-0xd1,-0x138,-0xc3));continue;}const _0x567b43=_0x39fc6b(0x185,0x27b,0x142,0x1da)+_0x30256f+_0x370686(-0xec,-0x154,-0x13b,-0x9a)+_0x143132+_0x370686(0xb6,-0x64,0x3f,0x4a),_0x36255a=await _0x423c0d[_0x370686(-0xc6,-0xaf,-0x145,-0xd4)](stylishConfirm,_0x567b43);if(!_0x36255a)continue;for(const _0x560cea in _0x4ab356){_0x340689[_0x560cea]&&(_0x2d77f1[_0x560cea]=_0x340689[_0x560cea]);}console[_0x370686(-0x3,-0x12f,-0x132,-0xbd)](_0x39fc6b(0x1e5,0x18b,0x23b,0x1a5)+'PromptModi'+'fy]\x20已更新服装预'+_0x370686(-0xda,0x33,0x7c,-0x1e)+_0x30256f+'\x22');}else{if(_0x423c0d[_0x39fc6b(0x353,0x22a,0x27a,0x2f8)](_0x423c0d[_0x370686(-0x7d,-0xb6,-0x23,-0x16)],_0x39fc6b(0x394,0x261,0x2ea,0x2c3)))return null;else{const _0x459730=_0x370686(-0x139,-0x3d,-0x11b,-0xe7)+_0x30256f+_0x39fc6b(0x20e,0x11d,0x16d,0x1d2),_0x500557=await _0x423c0d[_0x39fc6b(0x223,0x20a,0xf1,0x1c8)](stylishConfirm,_0x459730);if(!_0x500557)continue;!_0x3f36eb[_0x39fc6b(0x318,0x325,0x2f0,0x29f)+_0x370686(0x135,0x25,0x13c,0x65)]&&(_0x3f36eb[_0x39fc6b(0x2b0,0x34a,0x2ce,0x29f)+_0x370686(-0x6b,0xaa,-0x23,0x65)]={});const _0x43a03d={};_0x43a03d[_0x39fc6b(0x1e1,0x1e5,0x235,0x1c7)]=_0x340689[_0x370686(-0x170,-0x21,-0x135,-0xb1)],_0x43a03d[_0x39fc6b(0xc2,0x160,0x1a6,0x178)]=_0x340689[_0x370686(-0x114,-0x180,-0xaf,-0x100)]||'',_0x43a03d[_0x39fc6b(0x153,0x28f,0x295,0x224)]=_0x340689[_0x370686(0x23,0x40,0x21,-0x54)]||'',_0x43a03d[_0x39fc6b(0x27d,0x256,0x19e,0x229)]=_0x340689[_0x370686(-0x49,0x7d,0x62,-0x4f)]||'',_0x43a03d['upperBodyB'+'ack']=_0x340689[_0x39fc6b(0x286,0x337,0x2bf,0x29e)+'ack']||'',_0x43a03d[_0x370686(0x5e,-0x90,-0x117,-0x3f)]=_0x340689[_0x370686(-0xd1,0x53,-0xf1,-0x3f)]||'',_0x43a03d[_0x370686(-0xbf,-0x72,-0x24,-0xc)+'ck']=_0x340689['fullBodyBa'+'ck']||'',_0x3f36eb[_0x39fc6b(0x2fc,0x213,0x248,0x29f)+'ets'][_0x30256f]=_0x43a03d,console[_0x39fc6b(0x18a,0x26b,0x171,0x1bb)](_0x370686(-0x96,-0xa5,-0x12f,-0xd3)+_0x370686(-0x89,-0x3f,-0x66,-0x8f)+_0x39fc6b(0x26a,0x17b,0x2a9,0x249)+'设\x20\x22'+_0x30256f+'\x22');if(_0x340689[_0x370686(-0x10c,-0xf1,0x65,-0x54)]&&_0x340689[_0x370686(0x28,-0xe2,0x5b,-0x54)][_0x370686(-0x72,-0x67,0x1,0xe)]()){if(_0x423c0d[_0x39fc6b(0x1da,0x249,0x176,0x241)](_0x423c0d[_0x39fc6b(0x383,0x32e,0x2f6,0x2ea)],_0x423c0d[_0x370686(0x106,0x38,0x109,0x72)])){const _0x4d0100=_0x340689[_0x39fc6b(0x153,0x2df,0x175,0x224)][_0x39fc6b(0x272,0x2ab,0x2cf,0x286)]()[_0x370686(-0x85,-0xed,-0x1b4,-0x122)+'e']()[_0x370686(-0x85,-0xcf,-0x17,-0xd)](/\s+/g,'');for(const [_0x268cf5,_0x38a71e]of Object[_0x370686(-0xd5,-0x9d,-0xba,-0x7)](_0x3f36eb[_0x39fc6b(0x1b7,0x1c7,0xf0,0x14e)+_0x39fc6b(0x203,0x249,0x12b,0x18f)]||{})){if(_0x423c0d[_0x370686(-0x36,-0x77,-0x95,0x34)](_0x423c0d[_0x39fc6b(0x3a1,0x235,0x255,0x2e9)],_0x423c0d[_0x370686(0x8d,-0x1f,0x48,0x71)])){if(_0x38a71e[_0x370686(-0x8d,-0x36,-0xc0,-0x100)]&&_0x423c0d[_0x39fc6b(0x24d,0x1de,0x283,0x1d9)](_0x38a71e[_0x370686(-0x9e,-0x17a,-0x88,-0x100)][_0x370686(-0x1b9,-0x161,-0x173,-0x122)+'e']()['replace'](/\s+/g,''),_0x4d0100)){!_0x38a71e[_0x370686(0xd,-0x60,-0xf7,-0x83)]&&(_0x38a71e['outfits']=[]);!_0x38a71e[_0x370686(-0x7,-0x104,-0x77,-0x83)]['includes'](_0x30256f)&&(_0x38a71e['outfits'][_0x370686(-0x42,0x22,-0x78,-0x25)](_0x30256f),console[_0x39fc6b(0x1e2,0x13c,0x1aa,0x1bb)](_0x370686(-0x164,-0xa0,-0x180,-0xd3)+_0x39fc6b(0x153,0x13d,0x221,0x1e9)+_0x39fc6b(0x242,0x23a,0x248,0x1a3)+_0x30256f+_0x370686(-0x1,-0x3c,-0x10,-0x44)+_0x268cf5+'\x22'));break;}}else _0xce7146[_0x22afd9]&&_0x524ede[_0x95c9b5]!==_0x1b7909[_0x1795c2]&&_0xedb028++;}}else _0x351298[_0x123b52[_0x29baaf]]=_0x8f6c52;}}}}function _0x370686(_0x44b750,_0xd9f06e,_0x46a895,_0x260510){return _0x1bef45(_0x46a895,_0xd9f06e-0x1dc,_0x46a895-0x23,_0x260510- -0x2ea);}saveSettingsDebounced();const _0x355701=_0x423c0d[_0x370686(-0xcd,-0x185,-0xa,-0xb7)]($,_0x423c0d['rpuDP']);if(_0x355701[_0x39fc6b(0x1d8,0x2e6,0x301,0x238)]){if(_0x423c0d[_0x370686(-0xa8,0x2,-0x173,-0xd7)](_0x423c0d[_0x39fc6b(0x181,0x20f,0x1f1,0x1fa)],_0x423c0d['TgOcO'])){const _0x147e07=_0x53755f[_0x39fc6b(0x3a7,0x26b,0x299,0x2eb)+'ById'](_0x39fc6b(0x20b,0x26c,0x33c,0x2d8)+_0x4c86a0);_0x147e07&&(_0x147e07['value']=_0x4b346a[_0x4b3455],_0x423c0d[_0x370686(-0xac,-0x21,-0xf9,-0xa2)](_0xe831e1,_0x147e07)[_0x370686(-0x1a3,-0x1c1,-0xe8,-0x12e)](_0x423c0d[_0x370686(0x8f,0x82,-0xd3,-0x2c)]));}else refreshCharacterSettings(_0x355701);}}function updateFormFields(_0x4ac606){function _0x1f35e4(_0x54ef05,_0xb2b36b,_0x5b7580,_0x4ec731){return _0x1bef45(_0x54ef05,_0xb2b36b-0x141,_0x5b7580-0x1c5,_0x5b7580-0x28e);}function _0x4ea88f(_0x5e3f64,_0x494e55,_0x1e4d89,_0x16e404){return _0x1bef45(_0x5e3f64,_0x494e55-0x6,_0x1e4d89-0x43,_0x494e55-0xf5);}const _0x4d01ee={'SlDyB':function(_0x55b324,_0x2c6a1b){return _0x55b324===_0x2c6a1b;},'ANKKq':_0x4ea88f(0x399,0x388,0x3a3,0x3bd),'UDJkt':function(_0x11af4d,_0x3250c7){return _0x11af4d(_0x3250c7);},'GJAsM':'nameCN','XkDJG':_0x1f35e4(0x47a,0x3f2,0x478,0x3e0),'hlleb':_0x1f35e4(0x429,0x431,0x4c3,0x4d3)+_0x4ea88f(0x445,0x41e,0x4cd,0x411),'xxXGE':_0x1f35e4(0x45d,0x483,0x511,0x551)+'FW','VIlhW':_0x4ea88f(0x2f5,0x3a2,0x35a,0x373)+'W','ZvklA':_0x1f35e4(0x480,0x4e8,0x53b,0x4dc)+_0x4ea88f(0x2f3,0x397,0x2e4,0x2df),'ZvfYd':_0x4ea88f(0x44f,0x3c7,0x469,0x3f0)+_0x1f35e4(0x517,0x563,0x4f2,0x4de),'xrjWR':_0x4ea88f(0x348,0x3c7,0x3b5,0x466)+'SFWBack','HqRAv':_0x1f35e4(0x420,0x4f9,0x48e,0x4d2)+'FW','jJisN':_0x4ea88f(0x3bf,0x2f5,0x236,0x396)+_0x1f35e4(0x59a,0x48d,0x4ff,0x59c)},_0x1ab04f=[_0x4d01ee[_0x1f35e4(0x58e,0x582,0x4d4,0x41e)],_0x4d01ee[_0x1f35e4(0x5d9,0x670,0x59a,0x621)],_0x4ea88f(0x336,0x400,0x3cd,0x36c)+_0x1f35e4(0x58d,0x5d8,0x51e,0x586),_0x1f35e4(0x51f,0x459,0x4c3,0x550)+_0x1f35e4(0x3f1,0x404,0x465,0x48e),_0x4d01ee[_0x4ea88f(0x422,0x3ef,0x414,0x390)],_0x4d01ee[_0x4ea88f(0x344,0x3ec,0x35c,0x3e3)],_0x1f35e4(0x44d,0x589,0x511,0x5e4)+'FWBack',_0x4d01ee[_0x1f35e4(0x5fb,0x53d,0x5bd,0x519)],_0x4d01ee[_0x4ea88f(0x38d,0x394,0x331,0x3dc)],_0x4d01ee[_0x4ea88f(0x314,0x2cb,0x279,0x2fe)],_0x4d01ee[_0x1f35e4(0x517,0x5be,0x579,0x4a5)],_0x4d01ee['HqRAv'],_0x4d01ee['jJisN']];_0x1ab04f[_0x1f35e4(0x628,0x5bf,0x5bc,0x553)](_0x50dedf=>{function _0x41e438(_0x29fc07,_0x6d798d,_0x514779,_0xb76613){return _0x4ea88f(_0x514779,_0x6d798d- -0x408,_0x514779-0x17,_0xb76613-0x103);}function _0x50ccaa(_0x5d6d0c,_0x31e1f5,_0x244c34,_0x2ed21a){return _0x4ea88f(_0x2ed21a,_0x5d6d0c- -0x1f1,_0x244c34-0xd5,_0x2ed21a-0x36);}if(_0x4ac606[_0x50dedf]){if(_0x4d01ee['SlDyB'](_0x41e438(0x4d,-0x80,-0xb6,0x59),_0x4d01ee[_0x41e438(-0x19b,-0x127,-0x6f,-0x1c8)])){const _0x2c98ba=document[_0x50ccaa(0x261,0x2ed,0x2e6,0x230)+'ById'](_0x41e438(-0x58,0x37,0x1d,0x7d)+_0x50dedf);_0x2c98ba&&(_0x2c98ba[_0x41e438(-0x135,-0x12d,-0xbe,-0x1ba)]=_0x4ac606[_0x50dedf],_0x4d01ee[_0x41e438(0x85,-0x22,0x95,-0xfd)]($,_0x2c98ba)[_0x50ccaa(0xc0,0x53,0x6c,0x81)](_0x50ccaa(0x18c,0xf9,0xde,0x132)));}else _0x2a9f25?_0x3cafb7[_0x50ccaa(0xe2,0xcd,0x44,0x1ae)+_0x50ccaa(0x1d2,0x18d,0x201,0x1ec)][_0x41e438(-0xc7,-0x4e,-0x8b,-0xef)](_0x141b51[_0x41e438(-0x53,-0x116,-0x135,-0xb7)]):_0x2105bc[_0x41e438(-0x12a,-0x4e,-0x11c,-0x91)](_0x310e60[_0x41e438(-0xfa,-0x116,-0x11a,-0x137)]);}});}