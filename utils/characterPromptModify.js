(function(_0x491006,_0x114d24){function _0x50ce97(_0x285690,_0x1f026c,_0x4c2dd3,_0x1e8971){return _0x2785(_0x285690- -0x2d2,_0x1e8971);}function _0x5ca4ca(_0x43b383,_0x18f803,_0x4a0ee2,_0x1cd217){return _0x2785(_0x18f803- -0x91,_0x43b383);}const _0x4e3cd9=_0x491006();while(!![]){try{const _0x273950=-parseInt(_0x5ca4ca(0x13d,0x1a3,0xbe,0x1af))/(-0xc19+-0x1*0x15c5+0x21df)*(parseInt(_0x50ce97(-0x128,-0x178,-0x6f,-0x156))/(0x2e9*-0x2+-0x181d+0x1df1))+-parseInt(_0x5ca4ca(0x1f9,0x207,0x21d,0x252))/(0x1079+0x13*-0xac+-0x2*0x1d9)*(-parseInt(_0x5ca4ca(0x266,0x1ce,0x145,0x291))/(0x14*0x13c+0x2167+0x3a13*-0x1))+-parseInt(_0x50ce97(-0x40,-0x61,-0xa,0x24))/(-0xa0*-0x13+-0x1f07+0x132c)*(-parseInt(_0x5ca4ca(0x15f,0x1e6,0x289,0x1ac))/(-0x2b*-0x73+-0x14*0x14b+0x691))+-parseInt(_0x5ca4ca(0x5c,0xae,0xbb,0xa1))/(-0x9c0+-0x27*0xd0+0xc1*0x37)+-parseInt(_0x50ce97(-0xc3,-0xb7,-0x159,0x1a))/(0x13c0+0x9e5+0x13*-0x18f)+parseInt(_0x5ca4ca(0xdb,0x1b6,0x10c,0x1f7))/(0x83d+-0x26ba+0x1e86)*(parseInt(_0x50ce97(-0x8a,-0xc9,-0xc6,0x21))/(0x1fc8+-0x2317+0x359))+parseInt(_0x50ce97(-0x12,0xb8,-0x79,0x30))/(0x21*-0xbb+-0x900+-0x1093*-0x2);if(_0x273950===_0x114d24)break;else _0x4e3cd9['push'](_0x4e3cd9['shift']());}catch(_0x2608d9){_0x4e3cd9['push'](_0x4e3cd9['shift']());}}}(_0x4368,0x84a97+0x36*-0x184+0x1b9b*-0xf));const _0x50fe64=(function(){const _0xfb0a29={};_0xfb0a29[_0x68c143(0x4d9,0x4a8,0x464,0x3d9)]=function(_0x1a32f5,_0x3ef920){return _0x1a32f5!==_0x3ef920;},_0xfb0a29['qxmxr']='wZaTu';function _0x68c143(_0x28cc82,_0x1675a4,_0x5e15f9,_0x27c216){return _0x2785(_0x1675a4-0x2d9,_0x28cc82);}_0xfb0a29[_0x68c143(0x61e,0x578,0x52e,0x597)]=_0x12db19(0x420,0x48a,0x511,0x4a2);const _0x4ae216=_0xfb0a29;function _0x12db19(_0x4f1d1d,_0x1cb3c5,_0xeafb39,_0x1c65f6){return _0x2785(_0x1c65f6-0x300,_0x1cb3c5);}let _0x2b43c1=!![];return function(_0x53f01b,_0x56d44e){const _0x246380=_0x2b43c1?function(){function _0xd1ee96(_0xbffccd,_0x4f4de7,_0x455ab7,_0x4d5de4){return _0x2785(_0xbffccd- -0x1f8,_0x4f4de7);}function _0xcf4c1f(_0x2ce76a,_0x584d61,_0x5c96ad,_0x56b3ca){return _0x2785(_0x584d61- -0x2b0,_0x2ce76a);}if(_0x4ae216[_0xcf4c1f(-0x76,-0xe1,-0x1be,-0xf6)](_0x4ae216['qxmxr'],_0x4ae216[_0xd1ee96(0xa7,0xd,0x8,0x101)])){if(_0x56d44e){const _0x4400ab=_0x56d44e[_0xd1ee96(-0x88,0x26,-0x29,-0x6b)](_0x53f01b,arguments);return _0x56d44e=null,_0x4400ab;}}else return _0x3c5c06[_0xd1ee96(-0x66,-0x27,-0x1c,0x6a)]();}:function(){};return _0x2b43c1=![],_0x246380;};}()),_0x33b85a=_0x50fe64(this,function(){function _0x382a96(_0x5748a1,_0x1be78a,_0x1f2785,_0x1b4af1){return _0x2785(_0x1be78a- -0x1fb,_0x1b4af1);}const _0x384378={};function _0x4d94a4(_0xaff0f2,_0x28d04d,_0x4b2348,_0x5a1126){return _0x2785(_0x28d04d- -0xff,_0x5a1126);}_0x384378[_0x4d94a4(0xea,0x97,0x14d,0x45)]=_0x382a96(0x1b1,0xf2,0x5d,0x17)+'+$';const _0x44e8bc=_0x384378;return _0x33b85a[_0x4d94a4(0x9b,0x133,0x131,0x7d)]()[_0x382a96(-0x161,-0x99,0x3d,-0x117)](_0x382a96(0x55,0xf2,0xdf,0x4c)+'+$')[_0x4d94a4(0x6c,0x133,0xe4,0x86)]()[_0x382a96(-0x40,-0x39,-0xa3,-0xef)+'r'](_0x33b85a)[_0x382a96(-0x46,-0x99,-0x1f,-0xc9)](_0x44e8bc[_0x382a96(-0x52,-0x65,-0xf9,-0x30)]);});function _0x5977a2(_0x120993,_0xe525ce,_0x41bc00,_0x512e9c){return _0x2785(_0x120993-0x42,_0x512e9c);}_0x33b85a();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';function _0x2785(_0x4693cd,_0x5b84d8){_0x4693cd=_0x4693cd-(0x3*0x580+0x17*0x85+-0x1b40);const _0x27f8ba=_0x4368();let _0x54a13a=_0x27f8ba[_0x4693cd];if(_0x2785['MKIfwJ']===undefined){var _0x3053b1=function(_0x1eafe3){const _0x4d4783='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3adcf5='',_0xb85dc5='',_0x688c03=_0x3adcf5+_0x3053b1;for(let _0x2c6c90=-0x1726+0x29d+0x1489,_0x255de6,_0x152e99,_0x4f3e04=-0x23b6+-0x3f*-0x4+0x22ba;_0x152e99=_0x1eafe3['charAt'](_0x4f3e04++);~_0x152e99&&(_0x255de6=_0x2c6c90%(-0x135c+0x61b+0xd45*0x1)?_0x255de6*(-0x1*-0x1302+-0x1*0x23b1+0x10ef)+_0x152e99:_0x152e99,_0x2c6c90++%(0x943+-0xc55*0x2+0xf6b*0x1))?_0x3adcf5+=_0x688c03['charCodeAt'](_0x4f3e04+(-0x21c3+0x1*-0x1581+0x1ba7*0x2))-(-0x1f9*-0xf+0x188c+0x3619*-0x1)!==-0x1928+0x77*-0x3d+-0x7a5*-0x7?String['fromCharCode'](-0x537+0x16*-0x19d+0x29b4&_0x255de6>>(-(-0x18cf+0x3b*-0xf+-0x7*-0x40a)*_0x2c6c90&0x91f+-0x2204+0x18eb)):_0x2c6c90:0x3*0xb89+-0xf*0x147+-0x7b9*0x2){_0x152e99=_0x4d4783['indexOf'](_0x152e99);}for(let _0x33361f=0x3f1*-0x1+0x21f*-0xb+0x1b46,_0x17d77e=_0x3adcf5['length'];_0x33361f<_0x17d77e;_0x33361f++){_0xb85dc5+='%'+('00'+_0x3adcf5['charCodeAt'](_0x33361f)['toString'](-0x1d9*0x8+-0x253a*-0x1+-0x1662))['slice'](-(-0x137b*0x2+-0x1*-0xf0f+0x17e9*0x1));}return decodeURIComponent(_0xb85dc5);};_0x2785['HBMcCw']=_0x3053b1,_0x2785['uIfkWy']={},_0x2785['MKIfwJ']=!![];}const _0x443d73=_0x27f8ba[0x1884+-0x1*0x2405+0xb81],_0x594df4=_0x4693cd+_0x443d73,_0x45e572=_0x2785['uIfkWy'][_0x594df4];if(!_0x45e572){const _0x3b4b05=function(_0x3294f5){this['JEiipq']=_0x3294f5,this['BzMUPn']=[-0x5*-0x6e+-0x1*-0x9a8+-0xbcd,0x2406+0x1735+-0x3b3b,-0x1619*0x1+0x179b+-0x1*0x182],this['GHkRSu']=function(){return'newState';},this['ziQotQ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['hophoK']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3b4b05['prototype']['xwlWzm']=function(){const _0x33feba=new RegExp(this['ziQotQ']+this['hophoK']),_0x494542=_0x33feba['test'](this['GHkRSu']['toString']())?--this['BzMUPn'][0x9d9+-0x211*-0x1+-0xbe9]:--this['BzMUPn'][-0x35d*0x9+0x5*0x559+0x388];return this['naepbv'](_0x494542);},_0x3b4b05['prototype']['naepbv']=function(_0x26d21b){if(!Boolean(~_0x26d21b))return _0x26d21b;return this['vjaFDI'](this['JEiipq']);},_0x3b4b05['prototype']['vjaFDI']=function(_0x3862d5){for(let _0x4f4519=-0x6*0x2f+0x1f*-0xfb+-0xb*-0x2dd,_0x3e1380=this['BzMUPn']['length'];_0x4f4519<_0x3e1380;_0x4f4519++){this['BzMUPn']['push'](Math['round'](Math['random']())),_0x3e1380=this['BzMUPn']['length'];}return _0x3862d5(this['BzMUPn'][-0x55*-0x51+-0x1851+-0x294]);},new _0x3b4b05(_0x2785)['xwlWzm'](),_0x54a13a=_0x2785['HBMcCw'](_0x54a13a),_0x2785['uIfkWy'][_0x594df4]=_0x54a13a;}else _0x54a13a=_0x45e572;return _0x54a13a;}import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x2f2b94}from'./promptProcessor.js';function replacePlaceholder(_0x6e5825,_0x4d5e46,_0x5ed024,_0x421e4c){const _0x1664f9={'dFvbp':function(_0x37aa50,_0x30ca09){return _0x37aa50(_0x30ca09);},'DObES':function(_0xf8ba3a){return _0xf8ba3a();},'hNYDI':function(_0x589007,_0x339495){return _0x589007===_0x339495;},'YdiSo':'string','jbJgu':function(_0x3a9c2d,_0x435bdc){return _0x3a9c2d===_0x435bdc;},'IxUES':'tVJUV','QQfpz':_0xc3b687(0x1a5,0x334,0x2df,0x254),'SrJbz':_0xc3b687(0x179,0x261,0x215,0x248)};if(_0x1664f9['hNYDI'](typeof _0x6e5825,_0x1664f9[_0xc3b687(0x2f0,0x22e,0x2df,0x26f)])){if(_0x1664f9[_0x47506d(0x54f,0x4a7,0x46e,0x4fc)](_0x1664f9[_0xc3b687(0x257,0x319,0x3a5,0x339)],_0xc3b687(0x206,0x257,0x116,0x1d4))){if(_0x5ed024&&_0x6e5825['includes'](_0x4d5e46)){if(_0x1664f9[_0x47506d(0x48f,0x54f,0x46e,0x40a)](_0x47506d(0x607,0x62e,0x5c2,0x681),_0x47506d(0x429,0x51a,0x4ea,0x4a8)))_0x1664f9['dFvbp'](_0x1fb8c1,_0x290f39);else{if(_0x421e4c){if(_0x1664f9[_0x47506d(0x499,0x578,0x56b,0x54e)](_0x1664f9[_0xc3b687(0x28b,0x251,0x214,0x2bc)],_0x47506d(0x488,0x50b,0x52f,0x475))){if(_0x1dbdaf['id']!==_0x548a8b)return;_0x1664f9[_0xc3b687(0x226,0x2c3,0x2ee,0x2d4)](_0x580a2d),_0x546a52[_0x47506d(0x54b,0x538,0x4e3,0x510)]?_0x3ae9c2(_0x1164d0[_0xc3b687(0xb5,0x9a,0x9b,0x177)]):_0x1664f9[_0xc3b687(0x3a8,0x348,0x3cc,0x336)](_0x50975e,new _0x36435d(_0x5a5069[_0x47506d(0x35e,0x4d6,0x43c,0x37d)]||_0x47506d(0x49f,0x5c3,0x53b,0x534)));}else _0x421e4c[_0xc3b687(0x250,0x303,0x1f8,0x25e)](_0x4d5e46);}}}return _0x6e5825[_0xc3b687(0x353,0x276,0x2b0,0x2f2)](_0x4d5e46,_0x5ed024);}else{const _0xeeacba=_0x232c82[_0x5588bd],_0x1c42d9=_0xeeacba['characterP'+_0xc3b687(0x1f1,0x239,0x1e8,0x228)];if(!_0x1c42d9||!_0xeeacba[_0xc3b687(0x2e5,0x1d7,0x1b8,0x26c)+_0x47506d(0x510,0x5a2,0x4fb,0x54c)][_0x1c42d9])return null;const _0x394e50={};return _0x394e50['id']=_0x1c42d9,_0x394e50[_0xc3b687(0x2bd,0x1cc,0x250,0x28a)]=_0xeeacba['characterP'+_0xc3b687(0x1cc,0x1ec,0x15d,0x236)][_0x1c42d9],_0x394e50;}}function _0x47506d(_0x4a4af1,_0x37f4d8,_0x1d2bed,_0x57cf6a){return _0x2785(_0x1d2bed-0x305,_0x4a4af1);}function _0xc3b687(_0x2e013a,_0x191fbc,_0x21534d,_0x441911){return _0x2785(_0x441911-0x40,_0x21534d);}if(Array['isArray'](_0x6e5825))return _0x6e5825['map'](_0x5dd51e=>replacePlaceholder(_0x5dd51e,_0x4d5e46,_0x5ed024,_0x421e4c));if(_0x6e5825&&typeof _0x6e5825===_0x1664f9['SrJbz']){const _0x422cb3={};for(const _0x275d72 in _0x6e5825){_0x422cb3[_0x275d72]=replacePlaceholder(_0x6e5825[_0x275d72],_0x4d5e46,_0x5ed024,_0x421e4c);}return _0x422cb3;}return _0x6e5825;}function attachImagesToMessage(_0x20be5a,_0x452e5e,_0x3f1e85,_0x45c084=_0x5977a2(0x198,0x279,0x1e8,0x254)){function _0x36bc6d(_0x566ac2,_0x5de30b,_0x2b0585,_0x3b909f){return _0x5977a2(_0x566ac2-0xf0,_0x5de30b-0x1a1,_0x2b0585-0x34,_0x2b0585);}const _0x54f9bf={'FhDdc':function(_0x587260,_0x46d015,_0x5050da,_0x219923,_0xd06641){return _0x587260(_0x46d015,_0x5050da,_0x219923,_0xd06641);},'vrTer':function(_0x52437a,_0x491d5c){return _0x52437a!==_0x491d5c;},'qbGgC':function(_0x424d83,_0x178245){return _0x424d83===_0x178245;},'lIuLj':_0x1c9d7c(0x1c2,0x25b,0x1b3,0x148),'IZPAE':function(_0xc42ab,_0xda5679){return _0xc42ab+_0xda5679;},'Zvqkx':_0x1c9d7c(0x1c9,0x24e,0x237,0x12e),'SjOeL':'UMeYC','BysQA':_0x1c9d7c(0xe5,0x1bd,0x10e,0x170),'yEZTm':'auto','GgGuV':function(_0x279e1a,_0x125cbc){return _0x279e1a<_0x125cbc;},'vgSFz':_0x1c9d7c(0x160,0x1c9,0x193,0xc8),'QGvIR':function(_0x32fb41,_0x5cf21d){return _0x32fb41===_0x5cf21d;},'TCUtj':function(_0x33c346,_0x8a6982){return _0x33c346>_0x8a6982;},'BOmGP':'OpbXg','oLQrV':_0x1c9d7c(0x32,0x2e,-0x11,0x116)};if(!_0x3f1e85||_0x54f9bf['qbGgC'](_0x3f1e85[_0x1c9d7c(0x170,0x12b,0x1f0,0x11a)],-0xb5*-0x21+-0x5*-0x4af+0xbb0*-0x4)||_0x54f9bf[_0x1c9d7c(0x29,0xb1,-0x21,0x76)](_0x452e5e,-0x168d*-0x1+-0x48*-0x85+0x1*-0x3bf5)||_0x452e5e>=_0x20be5a[_0x1c9d7c(0x170,0x104,0xa2,0x1cb)])return _0x20be5a;const _0x14083d=[..._0x20be5a],_0xcbc6af=_0x14083d[_0x452e5e],_0x798603=[];if(typeof _0xcbc6af[_0x1c9d7c(0x37,0x93,0x28,-0x26)]===_0x54f9bf['vgSFz']){const _0xfc2e71={};_0xfc2e71[_0x1c9d7c(0xc7,0x135,0x1aa,0x151)]='text',_0xfc2e71[_0x1c9d7c(0x1c9,0x257,0x26d,0x212)]=_0xcbc6af[_0x1c9d7c(0x37,-0x1b,-0x7c,0xea)],_0x798603[_0x36bc6d(0x367,0x418,0x38c,0x2ce)](_0xfc2e71);}else Array[_0x1c9d7c(0x17e,0x228,0xb8,0x1c4)](_0xcbc6af['content'])&&(_0x54f9bf[_0x1c9d7c(0xee,0x11,0x43,0xc0)](_0x36bc6d(0x42c,0x3b4,0x4ee,0x34b),_0x1c9d7c(0x1e2,0x123,0x13d,0x22f))?_0x798603[_0x1c9d7c(0x11d,0x17a,0x5c,0x16c)](..._0xcbc6af[_0x1c9d7c(0x37,0xb,-0x7a,-0x5d)]):_0x41b019[_0x9ba37c]=_0x54f9bf[_0x1c9d7c(0x196,0x26d,0x1c5,0x100)](_0x561b2c,_0x3e6ab7[_0x172350],_0x2e5834,_0xa97172,_0x54a0ac));if(_0x54f9bf['TCUtj'](_0x3f1e85[_0x1c9d7c(0x170,0x121,0xfb,0x24a)],0x418+-0x1608+0x11f0)){if(_0x54f9bf[_0x1c9d7c(0x10d,0x5c,0x154,0x128)]===_0x54f9bf[_0x36bc6d(0x363,0x35c,0x447,0x393)])_0x52a472[_0x488cdf]&&_0x54f9bf[_0x36bc6d(0x2d9,0x34a,0x262,0x29a)](_0x360753[_0x509aa4],_0x51b51d[_0x555d82])&&_0x5d0266++;else{const _0x18979c={};_0x18979c['type']='text',_0x18979c['text']=_0x36bc6d(0x2a3,0x1ed,0x372,0x21c)+_0x3f1e85[_0x1c9d7c(0x170,0xbe,0x16d,0x204)]+'张'+_0x45c084+']',_0x798603[_0x36bc6d(0x367,0x317,0x349,0x41c)](_0x18979c);}}_0x3f1e85['forEach']((_0x1da344,_0x2d3c75)=>{function _0x517338(_0x53e6e1,_0x54a324,_0x5a63f9,_0x2cfed1){return _0x36bc6d(_0x5a63f9- -0xcf,_0x54a324-0x1c5,_0x53e6e1,_0x2cfed1-0x148);}function _0x1f7505(_0x39bd58,_0x16128c,_0x202f30,_0x4b74fc){return _0x36bc6d(_0x202f30- -0x2f4,_0x16128c-0x18d,_0x39bd58,_0x4b74fc-0x1c6);}if(_0x54f9bf['qbGgC'](_0x54f9bf[_0x517338(0x21f,0x20b,0x25a,0x2cb)],_0x54f9bf[_0x517338(0x1e6,0x2bd,0x25a,0x272)])){const _0x4aa736=typeof _0x1da344===_0x1f7505(0x66,0x82,0xb6,0x18f)?_0x1da344:_0x1da344['base64'],_0x223898=_0x54f9bf[_0x517338(0x3d6,0x33c,0x35e,0x2e8)](typeof _0x1da344,_0x517338(0x18e,0x21d,0x26b,0x2f9))&&_0x1da344[_0x517338(0x22e,0x2ee,0x238,0x2ed)]?_0x1da344[_0x517338(0x30d,0x295,0x238,0x1d2)]:''+_0x45c084+_0x54f9bf[_0x517338(0x226,0x105,0x1ae,0x117)](_0x2d3c75,-0x1*-0x1043+-0x5*-0x37c+-0x21ae),_0x25fccf={};_0x25fccf[_0x517338(0x256,0x2ff,0x242,0x26d)]=_0x54f9bf[_0x1f7505(-0x1e,0xec,0x40,-0x54)],_0x25fccf[_0x1f7505(0x11a,0x72,0x11f,0x16f)]='['+_0x223898+']',_0x798603['push'](_0x25fccf);let _0x1d41f9=_0x4aa736;!_0x4aa736['startsWith']('data:')&&('UMeYC'===_0x54f9bf[_0x1f7505(-0x4d,0x6e,0x4e,-0x82)]?_0x1d41f9=_0x1f7505(0xe7,0xe4,0xdf,0x22)+_0x1f7505(0x6,-0x93,0x29,0x92)+'4,'+_0x4aa736:_0x39296f&&_0x133627[_0x517338(0x21d,0x31c,0x281,0x232)](_0x4645bf));const _0x2ab647={};_0x2ab647[_0x1f7505(0xe5,0xe4,0x1d,0xb4)]=_0x54f9bf[_0x517338(0x25d,0x1e0,0x1dd,0xf8)],_0x2ab647[_0x1f7505(-0x26,0x8,0x3b,0x79)]={},_0x2ab647[_0x1f7505(-0x26,0x8,0x3b,0x79)][_0x517338(0x271,0x27b,0x349,0x3d7)]=_0x1d41f9,_0x2ab647[_0x1f7505(-0x26,0x8,0x3b,0x79)]['detail']=_0x54f9bf[_0x517338(0xe2,0xe6,0x1be,0x243)],_0x798603['push'](_0x2ab647);}else _0x557c5b[_0x517338(0x284,0x2d3,0x298,0x295)](_0x1dbc8b['data']);});function _0x1c9d7c(_0x520046,_0x2ea37f,_0x4923c5,_0x4bdf09){return _0x5977a2(_0x520046- -0x15a,_0x2ea37f-0xc0,_0x4923c5-0x57,_0x4bdf09);}const _0x12185c={..._0xcbc6af};return _0x12185c[_0x1c9d7c(0x37,0x1a,-0x76,-0xc)]=_0x798603,_0x14083d[_0x452e5e]=_0x12185c,_0x14083d;}function findMessageIndexWithPlaceholder(_0x1da790,_0x9f317d){const _0x134955={};function _0x1b1627(_0x10285f,_0xe32706,_0x545c33,_0x5096d4){return _0x5977a2(_0x5096d4-0x395,_0xe32706-0x195,_0x545c33-0x94,_0x545c33);}function _0x4cd7d5(_0x124c04,_0xb18dda,_0x34076,_0x32b7c4){return _0x5977a2(_0xb18dda-0x7a,_0xb18dda-0x78,_0x34076-0x19a,_0x32b7c4);}_0x134955[_0x1b1627(0x5bd,0x6ab,0x661,0x674)]=function(_0x3dbd76,_0x1840db){return _0x3dbd76!==_0x1840db;},_0x134955['XycBA']=function(_0x21900a,_0x327913){return _0x21900a<_0x327913;},_0x134955[_0x4cd7d5(0x1db,0x1fe,0x166,0x2a5)]=function(_0x224c50,_0xbbd06b){return _0x224c50===_0xbbd06b;},_0x134955[_0x4cd7d5(0x23a,0x209,0x275,0x24e)]=_0x1b1627(0x477,0x531,0x527,0x542);const _0x21e7ca=_0x134955;for(let _0xa8f465=-0xa9a*-0x2+-0x5fb*-0x4+-0x2d20;_0x21e7ca[_0x1b1627(0x64b,0x5db,0x6cf,0x659)](_0xa8f465,_0x1da790[_0x4cd7d5(0x41e,0x344,0x277,0x36c)]);_0xa8f465++){const _0x4f4043=_0x1da790[_0xa8f465];if(_0x21e7ca[_0x4cd7d5(0x29b,0x1fe,0x1db,0x249)](typeof _0x4f4043[_0x1b1627(0x589,0x515,0x44b,0x526)],'string')&&_0x4f4043[_0x4cd7d5(0x21f,0x20b,0x1b8,0x286)]['includes'](_0x9f317d))return _0xa8f465;else{if(Array[_0x4cd7d5(0x41b,0x352,0x345,0x2ef)](_0x4f4043[_0x4cd7d5(0x1c5,0x20b,0x17a,0x288)]))for(const _0x24278c of _0x4f4043['content']){if(_0x21e7ca[_0x1b1627(0x4c3,0x5b0,0x463,0x524)]===_0x1b1627(0x4c1,0x4f3,0x535,0x542)){if(_0x21e7ca[_0x1b1627(0x5bf,0x478,0x4cb,0x519)](_0x24278c[_0x1b1627(0x570,0x64e,0x643,0x5b6)],_0x4cd7d5(0x427,0x39d,0x3e4,0x2f7))&&_0x24278c[_0x4cd7d5(0x3c1,0x39d,0x42b,0x312)][_0x1b1627(0x750,0x60a,0x6ea,0x6b9)](_0x9f317d))return _0xa8f465;}else _0x6449ce[_0x3bd570]&&_0x21e7ca['zTOJP'](_0x110507[_0x39c681],_0x366164[_0x2c23a0])&&_0x42581e++;}}}return-(-0x1f75*-0x1+0x1*-0x22ed+0x379);}function generateRequestId(){const _0x36581b={};_0x36581b[_0x12a87e(-0x77,-0x122,-0x5d,-0x1)]='请先选择一个角色预设',_0x36581b['ssAjK']=_0xaa2404(0x14a,0xa1,0x6f,0x15b),_0x36581b['MqDJW']=_0xaa2404(0x146,0x119,0x1b7,0x1fe);function _0x12a87e(_0x164df0,_0x1a198f,_0x389800,_0x242c7f){return _0x5977a2(_0x389800- -0x228,_0x1a198f-0x4a,_0x389800-0x7c,_0x164df0);}_0x36581b[_0xaa2404(0xe6,0xb2,0x1c8,0x19f)]=function(_0xe4c281,_0x4021d5){return _0xe4c281+_0x4021d5;};const _0x2eeeac=_0x36581b;if(crypto&&crypto[_0x12a87e(-0x12,0x1b,-0x54,-0xe2)]){if(_0x2eeeac[_0xaa2404(0x92,0x17,0x10,0xa2)]!==_0x2eeeac['MqDJW'])return crypto[_0x12a87e(-0x93,-0x99,-0x54,-0x123)]();else{_0x14537b['error'](_0x2eeeac['uTIvb']);return;}}function _0xaa2404(_0x453f24,_0x1df8c5,_0x14cb4b,_0x3205e3){return _0x5977a2(_0x453f24- -0x175,_0x1df8c5-0x1af,_0x14cb4b-0xb1,_0x1df8c5);}return _0x2eeeac[_0x12a87e(-0xae,0x7b,0x33,0x7a)](Date[_0x12a87e(-0x30,-0x10,-0x10,-0xd1)]()[_0x12a87e(-0x15,0x53,0x4c,-0x83)](0xf4*-0x14+0x785+0xbaf),Math[_0xaa2404(0x1b0,0x277,0x236,0x14c)]()[_0x12a87e(-0x66,-0x32,0x4c,0xec)](-0x1e67+-0x3*0xbcd+0x41f2)['substring'](-0xb8c+-0x11d7*-0x2+0x20*-0xc1));}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x4bdfbe={'Yzzwp':function(_0x298131,_0x1835b9){return _0x298131(_0x1835b9);},'XZhuE':'获取角色修改提示词超'+'时','dQplF':'mMvul','hXmTN':function(_0x37e0d7,_0x56e22b){return _0x37e0d7!==_0x56e22b;},'mYwAj':function(_0x5492fc){return _0x5492fc();},'jMrJj':function(_0x6327f5,_0x522b7e,_0x46e8be){return _0x6327f5(_0x522b7e,_0x46e8be);}};return new Promise((_0x4c50cc,_0x422d39)=>{function _0x46929d(_0x2950ff,_0x515db9,_0x1df295,_0x56dfde){return _0x2785(_0x2950ff-0x13d,_0x515db9);}const _0x125090={'mWBzI':_0x4bdfbe['dQplF'],'vEYhE':'WwFHz','jrpvD':function(_0x540249,_0x14b700){function _0x441d93(_0x3dd8ae,_0x4d9804,_0x416cb7,_0x3e8bf2){return _0x2785(_0x416cb7-0x13a,_0x3dd8ae);}return _0x4bdfbe[_0x441d93(0x4bd,0x36e,0x415,0x4e6)](_0x540249,_0x14b700);}},_0x2febbe=_0x4bdfbe['mYwAj'](generateRequestId);console[_0x46929d(0x2cc,0x22e,0x273,0x3ae)]('[character'+_0x46929d(0x335,0x2ac,0x340,0x30d)+_0x50c780(0x10a,0x1ee,0x11f,0x1cd)+'ting\x20char\x20'+'modify\x20pro'+'mpt\x20(ID:\x20'+_0x2febbe+')');const _0x3fb8f8=_0xb73ee8=>{function _0x2a83f7(_0x244b0d,_0x4cb265,_0x36704a,_0x470202){return _0x50c780(_0x36704a- -0x2a1,_0x4cb265,_0x36704a-0x8e,_0x470202-0x57);}function _0x182236(_0x322719,_0x52dafb,_0x459a06,_0x3e6129){return _0x50c780(_0x52dafb- -0x281,_0x322719,_0x459a06-0x16d,_0x3e6129-0x8a);}if(_0x125090[_0x182236(-0xcb,-0x1ac,-0x257,-0x1c0)]!==_0x125090['vEYhE']){if(_0x125090[_0x182236(-0x16a,-0x157,-0x105,-0x86)](_0xb73ee8['id'],_0x2febbe))return;eventSource['removeList'+_0x182236(-0x31f,-0x258,-0x333,-0x1be)](eventNames[_0x182236(-0xe5,-0x151,-0x119,-0x1c3)+'ODIFY_GET_'+_0x2a83f7(-0x1c6,-0x257,-0x29c,-0x267)+_0x2a83f7(-0x189,-0xf7,-0x163,-0x235)],_0x3fb8f8),_0x4c50cc(_0xb73ee8[_0x2a83f7(-0x255,-0x1af,-0x262,-0x265)]);}else _0x45dd44='诊断：检测到以下变量'+'被使用：'+[..._0x15d264][_0x182236(-0x2c8,-0x22c,-0x155,-0x15f)]('、')+'\x0a';};eventSource['on'](eventNames[_0x50c780(0x130,0x203,0x15d,0x96)+'ODIFY_GET_'+'PROMPT_RES'+_0x50c780(0x13e,0x15c,0x91,0x1e9)],_0x3fb8f8);const _0x31637a={};_0x31637a['id']=_0x2febbe,eventSource[_0x50c780(0x4d,0x11b,0x34,0xed)](eventNames[_0x46929d(0x39d,0x30d,0x304,0x3c6)+_0x50c780(0xe1,0x16a,0x190,0x1c0)+'PROMPT_REQ'+_0x50c780(0x3a,-0x86,0xdb,-0x58)],_0x31637a);function _0x50c780(_0x593d08,_0x5194cf,_0x27b633,_0x2ca5a9){return _0x2785(_0x593d08- -0x130,_0x5194cf);}_0x4bdfbe[_0x50c780(0x1a2,0x218,0x282,0x264)](setTimeout,()=>{function _0x5cc422(_0x520036,_0x30fb3b,_0x430755,_0x145a75){return _0x46929d(_0x430755- -0x4be,_0x520036,_0x430755-0x75,_0x145a75-0x1c1);}function _0x299073(_0x593cde,_0x3cd2d2,_0xd065b2,_0x1e4b03){return _0x46929d(_0x1e4b03-0x217,_0xd065b2,_0xd065b2-0x1a4,_0x1e4b03-0xd6);}eventSource[_0x5cc422(-0x171,-0x1de,-0x229,-0x181)+_0x5cc422(-0x2c0,-0x15a,-0x228,-0x276)](eventNames['LLM_CHAR_M'+_0x299073(0x635,0x619,0x5ac,0x565)+'PROMPT_RES'+_0x5cc422(-0x1a8,-0x6d,-0x113,-0xc9)],_0x3fb8f8),_0x4bdfbe['Yzzwp'](_0x422d39,new Error(_0x4bdfbe[_0x299073(0x5c5,0x49b,0x51e,0x4e7)]));},0x2*0x1cb7+0x1753*0x1+0xd*-0x335);});}export function LLM_CHAR_MODIFY(_0x6d1a59,_0xad5201={}){function _0x3cc61a(_0x3b1fa1,_0x5c2824,_0x522ce0,_0x296b5f){return _0x5977a2(_0x3b1fa1-0x36e,_0x5c2824-0x1d1,_0x522ce0-0x172,_0x522ce0);}const _0x125cb9={'dxzpB':function(_0x591369,_0x345e27,_0x29ab88){return _0x591369(_0x345e27,_0x29ab88);},'HlAuR':_0x3cae65(-0x14,-0x78,-0x87,-0xf)+'时','vxmtI':function(_0xb87dc,_0x43f14b){return _0xb87dc!==_0x43f14b;},'EABoa':_0x3cae65(-0x1a8,-0xff,-0x98,-0xd2),'AdLkc':_0x3cc61a(0x660,0x73e,0x708,0x5ad),'BQPAX':function(_0x3481d8,_0x7ee80b){return _0x3481d8(_0x7ee80b);},'bkXeR':_0x3cae65(0x19,-0x38,-0x5b,-0xab),'zfOhi':'LLM\x20请求失败','eMBdT':function(_0x204533,_0x3ccabf){return _0x204533===_0x3ccabf;},'kvAdJ':_0x3cae65(-0xa6,-0x137,-0x1d0,-0x1f8),'yvOaV':_0x3cae65(-0x29,0x39,-0x11,-0x33),'dMmme':'上半身NSFW背面:','CenUf':function(_0x45d9db){return _0x45d9db();},'sTYZv':function(_0x3284ea){return _0x3284ea();},'ouBOF':function(_0x28d929,_0x57c963,_0x5f0b33){return _0x28d929(_0x57c963,_0x5f0b33);}};function _0x3cae65(_0x3e37cd,_0x29bed2,_0x13efeb,_0xf37e57){return _0x5977a2(_0x29bed2- -0x2d6,_0x29bed2-0xc6,_0x13efeb-0x0,_0x13efeb);}return new Promise((_0x29727b,_0x59de00)=>{const _0x84d3a4={'Lowde':function(_0x245a9e,_0x2145f5){return _0x245a9e(_0x2145f5);},'uDsWJ':function(_0x12281d,_0x383a3e){return _0x125cb9['eMBdT'](_0x12281d,_0x383a3e);},'lsidP':_0x125cb9[_0x4ff58d(0x3e9,0x4be,0x453,0x40e)],'HkffB':_0x485635(0x406,0x3e2,0x4cd,0x361),'KkVOx':function(_0x41fa3f,_0x3e3c7d){return _0x125cb9['BQPAX'](_0x41fa3f,_0x3e3c7d);},'gpnSB':_0x125cb9[_0x4ff58d(0x458,0x4f2,0x4e2,0x4f9)],'SroUS':_0x125cb9['dMmme'],'SHxPC':function(_0x2c138c){function _0x4bcaca(_0x53b06d,_0x3a3525,_0x19dfc7,_0x3618de){return _0x4ff58d(_0x53b06d-0x20,_0x3a3525-0x18e,_0x53b06d- -0x5e8,_0x3a3525);}return _0x125cb9[_0x4bcaca(-0xf9,-0x31,-0x184,-0x181)](_0x2c138c);},'rEOnG':function(_0x26cca7,_0x5c7a4e){return _0x26cca7(_0x5c7a4e);}};function _0x4ff58d(_0x440639,_0x2b9d04,_0x988279,_0x3e120b){return _0x3cae65(_0x440639-0x169,_0x988279-0x4e8,_0x3e120b,_0x3e120b-0xc4);}const _0x5e8f94=_0x125cb9['sTYZv'](generateRequestId),_0x158922=_0xad5201[_0x4ff58d(0x51b,0x4a7,0x4c3,0x592)]||0x287b+-0x1cad1+0x3*0xd992;let _0x569082=null;console[_0x4ff58d(0x323,0x357,0x3e3,0x3f5)]('[character'+_0x485635(0x353,0x40b,0x3b4,0x3a8)+_0x485635(0x34d,0x3df,0x273,0x3c3)+_0x4ff58d(0x55c,0x50a,0x51b,0x4b4)+_0x4ff58d(0x369,0x4d1,0x43d,0x40e)+_0x485635(0x439,0x36f,0x4e3,0x452)+_0x485635(0x421,0x4cf,0x4bf,0x4aa)+_0x5e8f94+')');const _0x33c97e=()=>{function _0x19f8eb(_0x41dae7,_0x2d376c,_0x18e06a,_0x22a0f3){return _0x4ff58d(_0x41dae7-0x147,_0x2d376c-0x6e,_0x22a0f3-0x3f,_0x18e06a);}function _0x55c3b3(_0x41a267,_0x1af475,_0x3b474c,_0x43f7c6){return _0x485635(_0x41a267- -0x196,_0x3b474c,_0x3b474c-0x139,_0x43f7c6-0xb6);}const _0x2beee9={'zTNtP':function(_0x487e68,_0x2aa029){return _0x84d3a4['Lowde'](_0x487e68,_0x2aa029);}};if(_0x84d3a4[_0x55c3b3(0x17d,0x154,0x1f7,0x13f)](_0x84d3a4[_0x19f8eb(0x43b,0x47c,0x418,0x415)],_0x84d3a4[_0x19f8eb(0x473,0x45e,0x48a,0x415)]))eventSource[_0x55c3b3(0x11d,0x181,0x10e,0xa2)+_0x55c3b3(0x11e,0xd0,0x19d,0x1b9)](eventNames[_0x19f8eb(0x4f7,0x5af,0x510,0x4f3)+'ODIFY_RESP'+_0x55c3b3(0x1c9,0x24d,0x138,0x1bd)],_0x39a0d8),_0x569082&&(_0x19f8eb(0x466,0x523,0x483,0x4e8)===_0x84d3a4['HkffB']?(_0x2beee9['zTNtP'](_0x52f81b,_0x5734e0),_0x163791=null):(_0x84d3a4['KkVOx'](clearTimeout,_0x569082),_0x569082=null));else return _0x5c679d;},_0x39a0d8=_0x4b5d10=>{function _0x5b56ef(_0x2410da,_0x3bb0e0,_0x5b44ad,_0xe0fae6){return _0x485635(_0x2410da- -0x92,_0x3bb0e0,_0x5b44ad-0x20,_0xe0fae6-0xb5);}const _0x41f8e0={'XNkED':function(_0x307e1c){return _0x307e1c();},'wMcnJ':function(_0x310b9e,_0x1081ba,_0x32f8f5){function _0x318b88(_0x2de60a,_0x27d52b,_0x4153d6,_0x1d5460){return _0x2785(_0x4153d6- -0x106,_0x2de60a);}return _0x125cb9[_0x318b88(0x12b,0xbf,0x145,0x145)](_0x310b9e,_0x1081ba,_0x32f8f5);},'heasw':_0x125cb9[_0x9901cc(0x2fd,0x307,0x298,0x3d2)]};function _0x9901cc(_0x14954c,_0x18fef1,_0x33f681,_0x220fbe){return _0x4ff58d(_0x14954c-0x18b,_0x18fef1-0x1a9,_0x18fef1- -0x225,_0x33f681);}if(_0x125cb9[_0x9901cc(0x20b,0x224,0x192,0x163)](_0x125cb9[_0x5b56ef(0x260,0x32b,0x29c,0x2a2)],_0x125cb9['AdLkc'])){if(_0x4b5d10['id']!==_0x5e8f94)return;_0x33c97e();if(_0x4b5d10[_0x5b56ef(0x2a7,0x254,0x336,0x2c9)])_0x125cb9['BQPAX'](_0x29727b,_0x4b5d10[_0x5b56ef(0x200,0x190,0x1cb,0x139)]);else{if(_0x125cb9[_0x5b56ef(0x2a3,0x203,0x234,0x305)]===_0x125cb9[_0x9901cc(0x2cb,0x209,0x12b,0x154)])_0x59de00(new Error(_0x4b5d10[_0x5b56ef(0x200,0x23c,0x1fe,0x137)]||_0x125cb9[_0x9901cc(0x3c0,0x314,0x307,0x31e)]));else{const _0xc196d8={};_0xc196d8[_0x9901cc(0x24e,0x1b6,0x28c,0x16d)]=_0x41f8e0['heasw'];const _0x7ff3bf=_0xc196d8;return new _0x1d2661((_0x2e8425,_0x4dc6a7)=>{const _0x3cace1={'kSnvJ':function(_0x4b1b64,_0x56adb5){return _0x4b1b64(_0x56adb5);}};function _0xc879dd(_0x25fca7,_0x3ee35f,_0x3f61ee,_0x474e7e){return _0x9901cc(_0x25fca7-0x152,_0x3f61ee- -0x37e,_0x474e7e,_0x474e7e-0x115);}const _0x2a5730=_0x41f8e0[_0xc879dd(-0x38,-0xba,-0x112,-0xc6)](_0x35318f);function _0x3c266b(_0x5025d9,_0x1c9079,_0x4f4b9c,_0x206fe0){return _0x5b56ef(_0x1c9079-0x139,_0x206fe0,_0x4f4b9c-0x16e,_0x206fe0-0x61);}_0x2d384f[_0xc879dd(-0x120,-0x182,-0x1c0,-0x258)]('[character'+'PromptModi'+_0x3c266b(0x454,0x43c,0x494,0x4ad)+_0x3c266b(0x3d2,0x3fe,0x48c,0x426)+'modify\x20pro'+_0xc879dd(-0x1a5,-0x196,-0x1e8,-0x1e6)+_0x2a5730+')');const _0x220b48=_0x365a0d=>{if(_0x365a0d['id']!==_0x2a5730)return;function _0x28f053(_0x1a4cb9,_0x58bfd6,_0x34fc96,_0x2cf5ce){return _0x3c266b(_0x1a4cb9-0x15f,_0x34fc96- -0x4f2,_0x34fc96-0xa3,_0x1a4cb9);}function _0x3063c2(_0x5e37d1,_0x1613f3,_0x17cdf6,_0x2d068b){return _0xc879dd(_0x5e37d1-0x55,_0x1613f3-0x71,_0x2d068b-0x702,_0x1613f3);}_0x179ad6[_0x3063c2(0x49a,0x5b8,0x5f1,0x50b)+_0x28f053(-0x15e,-0x131,-0x197,-0x208)](_0x40fed0[_0x3063c2(0x57a,0x52f,0x592,0x613)+'ODIFY_GET_'+_0x28f053(-0x10f,-0x165,-0x1bb,-0xf0)+_0x3063c2(0x5b8,0x5d6,0x583,0x621)],_0x220b48),_0x3cace1[_0x28f053(-0xbb,-0xf,-0xaa,-0x2a)](_0x2e8425,_0x365a0d[_0x3063c2(0x4f9,0x550,0x449,0x522)]);};_0x57f5ba['on'](_0x5066d9['LLM_CHAR_M'+_0x3c266b(0x450,0x413,0x374,0x4ee)+'PROMPT_RES'+_0x3c266b(0x4c2,0x470,0x3c1,0x3ae)],_0x220b48);const _0xc20f37={};_0xc20f37['id']=_0x2a5730,_0x5b5e2f[_0xc879dd(-0x1f2,-0x16a,-0x1d2,-0x101)](_0x4a594e[_0x3c266b(0x4f2,0x462,0x3a4,0x387)+'ODIFY_GET_'+'PROMPT_REQ'+'UEST'],_0xc20f37),_0x41f8e0[_0x3c266b(0x50b,0x48f,0x512,0x3d5)](_0x2beb89,()=>{function _0x7aacc8(_0x3a8f92,_0x1ed806,_0x5adf12,_0x4ecd3d){return _0x3c266b(_0x3a8f92-0xe9,_0x5adf12- -0x40e,_0x5adf12-0x66,_0x4ecd3d);}function _0x13fcdc(_0x2a6a0f,_0xfe5d30,_0x45e396,_0x3def84){return _0xc879dd(_0x2a6a0f-0x10a,_0xfe5d30-0x1dd,_0xfe5d30-0x4a9,_0x3def84);}_0x5ca11a[_0x13fcdc(0x248,0x2b2,0x34e,0x266)+_0x7aacc8(-0xf9,-0x8a,-0xb3,-0x148)](_0x310f81['LLM_CHAR_M'+_0x13fcdc(0x346,0x36b,0x3ca,0x386)+'PROMPT_RES'+_0x13fcdc(0x35c,0x3c8,0x41a,0x338)],_0x220b48),_0x4dc6a7(new _0x93725a(_0x7ff3bf[_0x7aacc8(-0x6c,-0x1d,-0x85,0x34)]));},-0x3da3+-0x449+-0x1*-0x68fc);});}}}else{let _0x41d56f=_0x44f9d9[_0x5b56ef(0x2b6,0x29b,0x35f,0x260)](/:/g,':')['replace'](/,/g,',');return _0x41d56f=_0x41d56f[_0x9901cc(0x1be,0x21c,0x26e,0x16d)](/下半身NSWebcam:/g,_0x84d3a4[_0x5b56ef(0x32c,0x29e,0x358,0x2da)]),_0x41d56f=_0x41d56f[_0x9901cc(0x180,0x21c,0x172,0x1f9)](/下半身NSFW_背面:/g,_0x84d3a4['gpnSB']),_0x41d56f=_0x41d56f[_0x5b56ef(0x2b6,0x2bd,0x208,0x23c)](/上半身NSFW_背面:/g,_0x84d3a4[_0x5b56ef(0x2d0,0x2c4,0x310,0x2e8)]),_0x41d56f;}};eventSource['on'](eventNames['LLM_CHAR_M'+'ODIFY_RESP'+_0x485635(0x35f,0x31b,0x287,0x2be)],_0x39a0d8);const _0x4381c7={};_0x4381c7[_0x4ff58d(0x381,0x43b,0x3c3,0x335)]=_0x6d1a59;function _0x485635(_0x2de754,_0x542ce1,_0x15250e,_0x315843){return _0x3cc61a(_0x2de754- -0x255,_0x542ce1-0x1a0,_0x542ce1,_0x315843-0x77);}_0x4381c7['id']=_0x5e8f94,eventSource['emit'](eventNames['LLM_CHAR_M'+_0x485635(0x41d,0x481,0x3ad,0x4e4)+_0x4ff58d(0x3f3,0x363,0x438,0x3e7)],_0x4381c7),_0x569082=_0x125cb9[_0x485635(0x34a,0x2e3,0x3fd,0x31f)](setTimeout,()=>{_0x84d3a4[_0x18379a(0x44,0x63,0x73,0x141)](_0x33c97e);function _0x59184e(_0x4f2c60,_0x3d69fc,_0x34b2dc,_0x4d8a69){return _0x4ff58d(_0x4f2c60-0xd4,_0x3d69fc-0x9e,_0x34b2dc- -0x146,_0x4d8a69);}function _0x18379a(_0x577fbc,_0x837a9c,_0xe0b2f9,_0x48568c){return _0x4ff58d(_0x577fbc-0xe3,_0x837a9c-0x11,_0xe0b2f9- -0x494,_0x577fbc);}_0x84d3a4[_0x59184e(0x345,0x373,0x345,0x3f1)](_0x59de00,new Error(_0x59184e(0x2f4,0x32a,0x25e,0x17c)+_0x18379a(-0x8f,0x5e,0x45,0xe)));},_0x158922);});}function preprocessTagContent(_0x1176cb){const _0x47a59c={};_0x47a59c['IFFEy']=_0x531b84(0x206,0x1d5,0x13a,0x20a);function _0x531b84(_0x2d3979,_0x1678ff,_0x27c80d,_0x11528c){return _0x5977a2(_0x11528c- -0x105,_0x1678ff-0x1a1,_0x27c80d-0x187,_0x27c80d);}_0x47a59c[_0xb06a78(-0x64,0x27,-0x8,0x46)]=_0xb06a78(0x4c,0x11c,0x9c,0x16a);const _0x8f9271=_0x47a59c;let _0x26921f=_0x1176cb[_0xb06a78(0x6a,0x95,0xbb,0x20)](/:/g,':')['replace'](/,/g,',');function _0xb06a78(_0x4fa18f,_0x4d040c,_0x46ceba,_0x435f44){return _0x5977a2(_0x4d040c- -0x19a,_0x4d040c-0x159,_0x46ceba-0x19,_0x4fa18f);}return _0x26921f=_0x26921f[_0xb06a78(0x161,0x95,0xdf,0xff)](/下半身NSWebcam:/g,_0x8f9271[_0x531b84(0x179,0x293,0x1af,0x1d4)]),_0x26921f=_0x26921f[_0xb06a78(0x2b,0x95,0x175,0x147)](/下半身NSFW_背面:/g,_0x8f9271[_0x531b84(0x19e,0x116,0x136,0x1d4)]),_0x26921f=_0x26921f['replace'](/上半身NSFW_背面:/g,_0x8f9271[_0x531b84(0x55,0x18a,0xf1,0xbc)]),_0x26921f;}function parseCharacterData(_0x1c81de){const _0x2be863={};_0x2be863['kDFXp']=_0x5345ea(0x596,0x4ff,0x5e8,0x58a)+_0x5345ea(0x558,0x445,0x443,0x4ff),_0x2be863[_0x4a26a0(0x7d,0x10e,0x4c,0x13b)]=_0x5345ea(0x633,0x634,0x5b9,0x58f)+_0x5345ea(0x5cd,0x475,0x5cb,0x535),_0x2be863[_0x4a26a0(0x45,0x10d,-0x7d,-0x3b)]='facialFeat'+_0x4a26a0(0x19b,0xdb,0x1c8,0x244),_0x2be863[_0x4a26a0(-0x1,-0xad,-0xa7,0x7a)]='upperBodyS'+'FW',_0x2be863[_0x4a26a0(0x157,0x223,0x1f8,0xaf)]=_0x4a26a0(0x66,-0x28,0x1d,0x13e)+_0x5345ea(0x5ed,0x587,0x57d,0x58b),_0x2be863[_0x5345ea(0x63d,0x566,0x5be,0x572)]=_0x5345ea(0x521,0x4c8,0x656,0x578)+_0x5345ea(0x3db,0x459,0x3c0,0x3e7),_0x2be863[_0x4a26a0(0xa8,-0x8,0xc9,0x151)]=_0x4a26a0(0x18d,0xda,0x134,0x158)+_0x5345ea(0x424,0x3ea,0x43c,0x3d7);function _0x4a26a0(_0x1fc04d,_0x244963,_0x4e6fad,_0x2a140a){return _0x5977a2(_0x1fc04d- -0x195,_0x244963-0x19d,_0x4e6fad-0x187,_0x244963);}_0x2be863['NXmjd']='upperBodyN'+_0x5345ea(0x33f,0x4a4,0x4c3,0x3e9),_0x2be863[_0x5345ea(0x4da,0x5d0,0x590,0x503)]='fullBodyNS'+'FW',_0x2be863[_0x5345ea(0x563,0x563,0x56d,0x540)]=function(_0x1d200f,_0x45e341){return _0x1d200f===_0x45e341;},_0x2be863[_0x4a26a0(0x12c,0x14a,0xb5,0x6c)]=function(_0x26e4dc,_0x3d1a5e){return _0x26e4dc&&_0x3d1a5e;},_0x2be863[_0x5345ea(0x54c,0x462,0x54a,0x4ea)]=function(_0x35f27b,_0xa6ef43){return _0x35f27b!==_0xa6ef43;},_0x2be863[_0x5345ea(0x5fa,0x507,0x4e4,0x592)]=_0x4a26a0(0xa7,0x105,-0x1e,0x90)+_0x4a26a0(0xa5,0x59,0x187,0x37)+_0x4a26a0(0x162,0x237,0x1e2,0x15d)+_0x4a26a0(0x167,0x24c,0x1a9,0x172);const _0x2972c0=_0x2be863,_0x19bb61=_0x1c81de[_0x5345ea(0x422,0x3a6,0x3dd,0x459)]('\x0a')[_0x4a26a0(0x1,-0x67,-0x2,0x1)](_0x1b1b67=>_0x1b1b67[_0x4a26a0(0xfb,0xe0,0x199,0x6a)]())[_0x4a26a0(0xb,-0xa6,-0x47,-0x74)](_0x4f69a6=>_0x4f69a6),_0x30f791={};_0x30f791['nameCN']='',_0x30f791[_0x5345ea(0x396,0x404,0x4a6,0x444)]='',_0x30f791[_0x5345ea(0x551,0x66e,0x4b9,0x58a)+'raits']='',_0x30f791['facialFeat'+_0x4a26a0(0x147,0xcb,0x1c8,0x167)]='',_0x30f791[_0x5345ea(0x63e,0x4cd,0x61e,0x58f)+_0x5345ea(0x4e6,0x5c9,0x50d,0x589)]='',_0x30f791[_0x4a26a0(0x66,0xc9,0x13f,0xb8)+'FW']='',_0x30f791['upperBodyS'+_0x5345ea(0x4e2,0x5e6,0x4c0,0x58b)]='',_0x30f791[_0x4a26a0(0x18a,0x22b,0x23a,0x1d4)+'W']='',_0x30f791[_0x4a26a0(0x18a,0x106,0x1e3,0x178)+_0x5345ea(0x31b,0x405,0x457,0x3e7)]='',_0x30f791[_0x5345ea(0x557,0x65a,0x500,0x57b)+_0x5345ea(0x2f7,0x40e,0x4b5,0x3d7)]='',_0x30f791[_0x5345ea(0x630,0x606,0x4f2,0x57b)+_0x4a26a0(-0x5,-0x4,0xe,-0xe7)]='',_0x30f791[_0x5345ea(0x4b4,0x55b,0x53b,0x499)+'FW']='',_0x30f791[_0x4a26a0(0xab,0x43,0x122,0x34)+_0x5345ea(0x64c,0x5b0,0x4e9,0x58b)]='';const _0x570e48=_0x30f791,_0x3549da={};_0x3549da[_0x4a26a0(0x85,0x10e,0x133,0x3c)]='nameCN',_0x3549da[_0x4a26a0(0x2d,0xa3,-0x60,-0x26)]=_0x5345ea(0x3c1,0x51b,0x432,0x444),_0x3549da[_0x5345ea(0x3dd,0x3a5,0x412,0x472)]=_0x2972c0[_0x5345ea(0x53a,0x44c,0x49f,0x4b8)],_0x3549da[_0x5345ea(0x4b0,0x487,0x40e,0x4cb)]=_0x2972c0[_0x5345ea(0x4d4,0x3f3,0x3c1,0x46b)],_0x3549da['五官外貌背面']=_0x2972c0[_0x4a26a0(0x45,0xc0,0xf9,0xe3)];function _0x5345ea(_0x583a01,_0x509920,_0x81d863,_0x286677){return _0x5977a2(_0x286677-0x259,_0x509920-0x84,_0x81d863-0x138,_0x81d863);}_0x3549da[_0x4a26a0(0xae,0x51,0x107,0x13b)]=_0x2972c0[_0x4a26a0(-0x1,-0x14,0xd3,-0x82)],_0x3549da[_0x4a26a0(0x105,0x178,0x4e,0x24)]=_0x2972c0['QXrMB'],_0x3549da[_0x5345ea(0x485,0x47d,0x479,0x448)]=_0x5345ea(0x557,0x5e7,0x5bb,0x578)+'W',_0x3549da[_0x4a26a0(0x7a,-0x69,0x125,0xa5)]=_0x2972c0['LTrOM'],_0x3549da[_0x5345ea(0x513,0x3cf,0x4c9,0x44a)]=_0x2972c0[_0x4a26a0(0xa8,0xf1,0x16e,0x6b)],_0x3549da['上半身NSFW背面']=_0x2972c0[_0x4a26a0(0x169,0x152,0x22b,0x1f8)],_0x3549da[_0x4a26a0(0x134,0x1f3,0x5e,0x1a6)]=_0x2972c0[_0x5345ea(0x4d5,0x519,0x5e3,0x503)],_0x3549da[_0x4a26a0(0x15e,0x10d,0x88,0xd0)]='fullBodyNS'+'FWBack';const _0x51540d=_0x3549da;for(const _0x2d107e of _0x19bb61){const _0x95f10a=_0x2d107e[_0x5345ea(0x487,0x404,0x446,0x40d)](':');if(_0x2972c0[_0x4a26a0(0x152,0x1db,0x1e2,0x22a)](_0x95f10a,-(-0x6d2*0x2+0x2124+0x17*-0xd9)))continue;const _0x15cf8f=_0x2d107e['substring'](0x11df+0xec0*-0x1+-0x31f,_0x95f10a)[_0x4a26a0(0xfb,0x18f,0x1b4,0x45)](),_0x3b679f=_0x2d107e[_0x4a26a0(0x26,0x9e,0xb0,-0x82)](_0x95f10a+(-0x151d+0x1797*-0x1+0x663*0x7))[_0x5345ea(0x4c4,0x4e2,0x4d4,0x4e9)]();if(_0x51540d[_0x15cf8f])_0x570e48[_0x51540d[_0x15cf8f]]=_0x3b679f;else _0x2972c0[_0x4a26a0(0x12c,0x117,0x1f4,0x1e8)](_0x15cf8f,_0x3b679f)&&(_0x2972c0['UmhdI'](_0x5345ea(0x4ef,0x41d,0x45f,0x4c6),_0x4a26a0(0x69,0x8,-0x7,0x9b))?console[_0x4a26a0(0x3c,-0x74,-0xa0,0xd2)](_0x5345ea(0x45d,0x565,0x3bc,0x495)+_0x4a26a0(0xa5,0x14b,-0x34,0x5b)+'fy]\x20未识别的人物'+_0x4a26a0(0x1b,-0xca,0x18,0x8b)+_0x15cf8f+'\x22'):_0x950907?_0x377b9a[_0x4a26a0(-0x10,-0x8f,0x38,0x9b)+'fits'][_0x4a26a0(0xe2,0x113,0x154,0x110)](_0x3cc0ff['data']):_0x1c5065['push'](_0x283ac8[_0x5345ea(0x582,0x542,0x555,0x4e5)]));}if(!_0x570e48[_0x4a26a0(0xf9,0x112,0x117,0x64)])return null;return console[_0x5345ea(0x443,0x4b1,0x490,0x42a)](_0x2972c0[_0x4a26a0(0x1a4,0x11b,0xed,0x1a9)],_0x570e48),_0x570e48;}function parseOutfitData(_0x31d3a2){const _0x235ad9={};_0x235ad9[_0x9240aa(0x4b4,0x4e3,0x543,0x516)]=function(_0x21af87,_0x308eaf){return _0x21af87===_0x308eaf;},_0x235ad9[_0x9240aa(0x440,0x3a5,0x3fe,0x35e)]=_0x9240aa(0x507,0x63c,0x55c,0x5e7),_0x235ad9['cLIHk']=_0x2c1065(0x165,0x1b3,0xd1,0x137),_0x235ad9[_0x9240aa(0x393,0x3cb,0x3e1,0x4c6)]='nameCN',_0x235ad9['iyMOd']='nameEN',_0x235ad9['UHyrX']=_0x9240aa(0x61c,0x4d1,0x547,0x46c)+_0x2c1065(-0xa5,-0x3e,0x46,-0x18),_0x235ad9[_0x2c1065(0xe7,0x6a,0xca,0x4c)]=_0x2c1065(-0x1b,0xea,0x182,0x9e),_0x235ad9[_0x9240aa(0x585,0x567,0x4a8,0x3f3)]=function(_0x58500a,_0x37188e){return _0x58500a!==_0x37188e;},_0x235ad9[_0x2c1065(0xd5,-0x3,-0xc,0x7)]=function(_0x506cf8,_0x2949b8){return _0x506cf8===_0x2949b8;},_0x235ad9['CleFn']=function(_0x39e295,_0x20ee08){return _0x39e295+_0x20ee08;},_0x235ad9['QRshQ']=function(_0x1f9a45,_0x467565){return _0x1f9a45===_0x467565;},_0x235ad9[_0x9240aa(0x4a5,0x52b,0x45d,0x459)]='RzzUI',_0x235ad9[_0x9240aa(0x3f6,0x463,0x492,0x417)]=function(_0x47c557,_0x31eb12){return _0x47c557&&_0x31eb12;},_0x235ad9[_0x9240aa(0x4ce,0x403,0x403,0x3be)]='[character'+_0x2c1065(0x56,-0x7f,0x126,0x44)+'fy]\x20解析到的服装'+_0x9240aa(0x4ac,0x4ec,0x535,0x4d2);const _0x46c53b=_0x235ad9,_0xdd13e4=_0x31d3a2[_0x9240aa(0x45b,0x43e,0x439,0x453)]('\x0a')[_0x2c1065(-0x87,-0x11,-0x46,-0x60)](_0x4b8d8f=>_0x4b8d8f[_0x2c1065(-0x20,-0x1b,0xe5,0x9a)]())[_0x9240aa(0x4af,0x3c3,0x3d9,0x49f)](_0xa8e755=>_0xa8e755),_0x4a75d8={};_0x4a75d8[_0x9240aa(0x597,0x4cc,0x4c7,0x59b)]='',_0x4a75d8[_0x2c1065(-0x61,-0xb5,-0x65,-0xb)]='';function _0x2c1065(_0x1249f5,_0x36950d,_0x1bbdea,_0x7078e0){return _0x5977a2(_0x7078e0- -0x1f6,_0x36950d-0x8c,_0x1bbdea-0xe1,_0x1bbdea);}_0x4a75d8[_0x2c1065(0x187,0x137,0xbe,0x137)]='',_0x4a75d8[_0x9240aa(0x41e,0x4f3,0x4f6,0x539)]='',_0x4a75d8[_0x2c1065(0x12e,0x1a8,0x129,0x118)+'ack']='',_0x4a75d8[_0x2c1065(-0x48,0xd3,-0x1d,0x9e)]='',_0x4a75d8[_0x9240aa(0x575,0x510,0x4b7,0x55b)+'ck']='';const _0x18e435=_0x4a75d8,_0x7fd4bd={};_0x7fd4bd[_0x9240aa(0x53c,0x56b,0x4e5,0x5ab)]=_0x46c53b[_0x2c1065(0xc8,0x3f,0x14,0xf)];function _0x9240aa(_0x25c007,_0x5c4331,_0x23c747,_0x2298b7){return _0x5977a2(_0x23c747-0x239,_0x5c4331-0xd6,_0x23c747-0x1ab,_0x5c4331);}_0x7fd4bd[_0x9240aa(0x48d,0x3eb,0x453,0x3da)]=_0x46c53b['wqgBz'],_0x7fd4bd[_0x9240aa(0x465,0x4df,0x3fb,0x3a3)]=_0x46c53b[_0x2c1065(-0x30,-0xe3,-0x69,-0x63)],_0x7fd4bd[_0x9240aa(0x5d0,0x5b4,0x4f1,0x4bc)]=_0x9240aa(0x4a5,0x4bd,0x4f6,0x517),_0x7fd4bd[_0x2c1065(0x92,0x2b,-0xaf,-0x3)]=_0x46c53b[_0x9240aa(0x56a,0x586,0x4bd,0x502)],_0x7fd4bd[_0x2c1065(0x190,0xf7,0x71,0x13d)]=_0x46c53b[_0x9240aa(0x422,0x48b,0x47b,0x422)],_0x7fd4bd['下半身背面']='fullBodyBa'+'ck';const _0x5453e5=_0x7fd4bd;for(const _0x385ecb of _0xdd13e4){if(_0x46c53b[_0x9240aa(0x55b,0x417,0x4a8,0x498)]('BEqpg',_0x9240aa(0x60e,0x5e1,0x563,0x5b6)))for(const _0x30580c of _0x7e72b8[_0x2c1065(0x10,-0x52,0x6d,-0x65)]){if(_0x46c53b[_0x9240aa(0x580,0x478,0x543,0x4c5)](_0x30580c[_0x2c1065(-0x2d,0x37,0xff,0x2b)],_0x46c53b[_0x2c1065(0x8,0x7a,-0xfc,-0x31)])&&_0x30580c[_0x2c1065(0x190,0x100,0x203,0x12d)][_0x9240aa(0x605,0x5b4,0x55d,0x4ce)](_0x5b5da6))return _0x3c56b2;}else{const _0x38fd6d=_0x385ecb[_0x9240aa(0x3eb,0x3d9,0x3ed,0x405)](':');if(_0x46c53b[_0x9240aa(0x374,0x49d,0x436,0x41b)](_0x38fd6d,-(-0xab6+-0xe33+0x6*0x427)))continue;const _0x1d63ee=_0x385ecb['substring'](0x4ac+0x1*0x244d+-0x28f9,_0x38fd6d)[_0x9240aa(0x4bf,0x47a,0x4c9,0x587)](),_0x1d5ee1=_0x385ecb[_0x9240aa(0x3cd,0x383,0x3f4,0x361)](_0x46c53b[_0x9240aa(0x45c,0x594,0x4ed,0x47e)](_0x38fd6d,0x65d+-0xfd*0x23+0x1c3b))[_0x9240aa(0x471,0x57a,0x4c9,0x539)]();if(_0x5453e5[_0x1d63ee])_0x46c53b[_0x9240aa(0x4a4,0x5b6,0x540,0x4ae)](_0x46c53b[_0x2c1065(-0x8b,0x44,-0x6d,0x2e)],_0x46c53b[_0x9240aa(0x47e,0x4c3,0x45d,0x39c)])?_0x18e435[_0x5453e5[_0x1d63ee]]=_0x1d5ee1:_0x3be094++;else _0x46c53b[_0x2c1065(-0x45,0x75,0xa2,0x63)](_0x1d63ee,_0x1d5ee1)&&console[_0x9240aa(0x4e7,0x3f9,0x40a,0x36e)](_0x2c1065(0xc0,0x12c,0x98,0x46)+_0x9240aa(0x557,0x3a1,0x473,0x4f6)+_0x2c1065(0x3e,0x73,0x1b0,0xd2)+_0x2c1065(-0x73,-0x79,-0x120,-0x46)+_0x1d63ee+'\x22');}}if(!_0x18e435[_0x9240aa(0x574,0x495,0x4c7,0x51e)])return null;return console[_0x2c1065(0x6d,-0xc6,0xb1,-0x25)](_0x46c53b['pFxND'],_0x18e435),_0x18e435;}function extractCharacterAndOutfitTags(_0x507fdb){const _0x134078={'GPKaX':function(_0x3af56a,_0x3f2cf6){return _0x3af56a(_0x3f2cf6);},'hBbCl':_0x16e1fc(0x115,0x3f,0x85,0xc7),'RkhON':_0x16e1fc(0xb6,0x96,0x28,-0x88),'qmKsC':function(_0x27bd4a,_0x160d9a){return _0x27bd4a!==_0x160d9a;},'FYKju':_0x16e1fc(0xde,0x44,0x8b,0xfd),'cvXXr':_0x29543a(0x1ba,0x19c,0x1cf,0x1a8),'kQyuV':function(_0x4064b5,_0x762bf){return _0x4064b5(_0x762bf);},'Jfmra':function(_0x119c31,_0x58ea96){return _0x119c31===_0x58ea96;},'OlZoj':function(_0x424e12,_0x253661){return _0x424e12(_0x253661);},'qrxNw':function(_0x50c53c,_0x2cfd4e){return _0x50c53c===_0x2cfd4e;},'jGFzA':_0x29543a(0xcb,0xce,0x90,-0xa),'rQqmV':_0x29543a(0x166,0x125,0x13d,0x19d),'QFoBE':function(_0x557a52,_0x9ebbe){return _0x557a52===_0x9ebbe;},'bUhzr':function(_0x1fac90,_0x5ef005){return _0x1fac90===_0x5ef005;},'AhLlz':function(_0x71671e,_0x54a16c){return _0x71671e===_0x54a16c;},'XFENd':_0x16e1fc(-0xe0,-0x40,-0x9,0x39)},_0x5de196=[];_0x507fdb=_0x507fdb['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x29543a(0x15b,0x48,0x11f,0xaa)]();const _0x10361f=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x5d395c;function _0x16e1fc(_0x34403d,_0x45368c,_0x1b2b33,_0x37246f){return _0x5977a2(_0x1b2b33- -0x1fb,_0x45368c-0x14c,_0x1b2b33-0x56,_0x37246f);}while(_0x134078[_0x29543a(0x87,-0xde,0x5,-0xa)](_0x5d395c=_0x10361f[_0x16e1fc(0x90,-0x97,-0x18,0x61)](_0x507fdb),null)){if(_0x134078[_0x29543a(0x1b6,0x1c4,0x121,0xac)]===_0x134078[_0x16e1fc(0x13c,0x15e,0x10a,0xc9)]){if(_0x52eb7a[_0x2f8fc5]){const _0x2c0c4c=_0x302559['getElement'+_0x29543a(0x120,0x25b,0x1bd,0xe3)](_0x16e1fc(0xe,0x7a,-0x5d,0x7)+_0xad3ffb);_0x2c0c4c&&(_0x2c0c4c[_0x16e1fc(-0x99,-0x117,-0x5a,0x4a)]=_0x1a091d[_0x4cf68c],_0x134078[_0x16e1fc(0x2a,-0x10e,-0x2b,0x15)](_0xf0955f,_0x2c0c4c)['trigger'](_0x134078[_0x16e1fc(-0x2c,-0x123,-0x75,0x4c)]));}}else{const _0x273540=_0x5d395c[-0xaa6+-0xc1*-0xf+-0xa8],_0x33e51a=_0x134078[_0x29543a(0xfb,0x1ce,0x175,0x22d)](preprocessTagContent,_0x5d395c[-0x10*0x13d+0x119b+0x237]),_0x1681d8=_0x5d395c['index'];if(_0x134078['Jfmra'](_0x273540,'人物')){const _0x582f1b=_0x134078['OlZoj'](parseCharacterData,_0x33e51a);if(_0x582f1b){const _0x3a1396={};_0x3a1396[_0x29543a(0xf9,0x16a,0xb0,0x14d)]=_0x29543a(0x39,0xc7,0xb2,0xfc),_0x3a1396[_0x16e1fc(0x13d,0x72,0x91,0x162)]=_0x582f1b,_0x3a1396['position']=_0x1681d8,_0x3a1396['matchedOut'+_0x16e1fc(-0xcd,0xc4,0xf,0x2a)]=[],_0x5de196['push'](_0x3a1396);}}else{if(_0x134078[_0x29543a(0x1e2,0x17b,0x19a,0xe0)](_0x273540,'服装')){const _0x44e4c2=_0x134078[_0x16e1fc(0xd2,0x7d,0xeb,0x158)](parseOutfitData,_0x33e51a);if(_0x44e4c2){if(_0x134078[_0x16e1fc(0x175,0x1b1,0x131,0x1ad)](_0x134078['jGFzA'],_0x134078[_0x16e1fc(-0x57,0x54,0x2a,-0x56)])){const _0x44b8cd={};_0x44b8cd[_0x29543a(0xfb,0xf6,0xb0,-0x1d)]=_0x134078[_0x29543a(0x1f6,0x139,0x13e,0xf1)],_0x44b8cd[_0x29543a(0x1c7,0xd0,0x11b,0x3a)]=_0x44e4c2,_0x44b8cd['position']=_0x1681d8,_0x5de196[_0x29543a(0x170,0x135,0x106,0x183)](_0x44b8cd);}else _0x50bf01[_0x16e1fc(-0xe8,-0x1e,-0x5a,-0x133)]=_0x466b30[_0x192438],_0x4bbf12(_0x58ce42)['trigger'](_0x134078[_0x29543a(0xd2,-0x7b,0x15,-0x4d)]);}}}}}function _0x29543a(_0x53937f,_0x4c56d1,_0x1beef2,_0x2d1383){return _0x5977a2(_0x1beef2- -0x171,_0x4c56d1-0x2f,_0x1beef2-0xad,_0x4c56d1);}_0x5de196[_0x29543a(0x1cc,0xbc,0x18a,0x111)]((_0x180439,_0x4d29c8)=>_0x180439[_0x16e1fc(0x182,0xe8,0xba,0x10c)]-_0x4d29c8[_0x16e1fc(0x191,0x87,0xba,0x104)]);let _0x27a5d2=null;const _0x415f87=[],_0x3990d1=[];for(const _0x2cc225 of _0x5de196){if(_0x134078[_0x16e1fc(0x84,0x32,0x87,0x98)](_0x2cc225[_0x29543a(0x105,0xea,0xb0,0x12)],_0x134078[_0x29543a(0x86,-0x27,0x17,0x85)]))_0x27a5d2=_0x2cc225,_0x415f87[_0x29543a(0x198,0x10f,0x106,0x10a)](_0x2cc225);else{if(_0x134078[_0x16e1fc(0x182,0xf8,0xfb,0x93)](_0x2cc225[_0x29543a(0x157,0xc9,0xb0,0x38)],_0x134078['rQqmV'])){if(_0x27a5d2){if(_0x134078['AhLlz'](_0x134078[_0x16e1fc(0x6d,0xc1,0x67,0x42)],_0x134078[_0x29543a(0x23,0x14a,0xf1,0x12)]))_0x27a5d2[_0x16e1fc(-0x20,-0x142,-0x76,-0xcc)+'fits']['push'](_0x2cc225[_0x16e1fc(-0x1f,0xa9,0x91,0xd2)]);else{const _0x46abeb=_0x134078['GPKaX'](_0x5cde25,_0x1a9bff);if(_0x46abeb){const _0x4475ec={};_0x4475ec[_0x16e1fc(0x5a,-0x96,0x26,0xcc)]=_0x134078[_0x16e1fc(-0x41,0x61,-0x73,-0x121)],_0x4475ec[_0x29543a(0x51,0x101,0x11b,0x4d)]=_0x46abeb,_0x4475ec[_0x29543a(0x1b0,0x12a,0x144,0x11c)]=_0x43e8fd,_0x4475ec[_0x29543a(-0xb8,-0x87,0x14,-0x33)+_0x29543a(0x174,0x118,0x99,-0x30)]=[],_0x974ccc[_0x16e1fc(0xf6,0x5c,0x7c,0xc9)](_0x4475ec);}}}else _0x3990d1[_0x16e1fc(0xe5,0x20,0x7c,-0x58)](_0x2cc225[_0x16e1fc(0x105,-0x2,0x91,0xd6)]);}}}return{'characters':_0x415f87['map'](_0xe6cf45=>({..._0xe6cf45['data'],'matchedOutfits':_0xe6cf45[_0x16e1fc(-0x135,-0xcf,-0x76,-0x16)+_0x16e1fc(-0x4d,-0x19,0xf,-0x73)]})),'outfits':_0x3990d1};}function getCurrentCharacterPreset(){function _0x45280e(_0x21e311,_0x1a9596,_0x34867f,_0x3300cf){return _0x5977a2(_0x1a9596-0x1af,_0x1a9596-0x17e,_0x34867f-0x14b,_0x3300cf);}const _0x51fc37=extension_settings[extensionName],_0x50af07=_0x51fc37['characterP'+_0x47c807(0x199,0x251,0x147,0x163)];function _0x47c807(_0x9b930f,_0x4914b1,_0x242e48,_0x21147d){return _0x5977a2(_0x9b930f- -0x91,_0x4914b1-0xca,_0x242e48-0x68,_0x4914b1);}if(!_0x50af07||!_0x51fc37[_0x45280e(0x477,0x41d,0x4e2,0x3fe)+_0x47c807(0x1a7,0x1d3,0x12b,0x27b)][_0x50af07])return null;const _0x3a1fef={};return _0x3a1fef['id']=_0x50af07,_0x3a1fef[_0x45280e(0x4d2,0x43b,0x3f1,0x49b)]=_0x51fc37[_0x47c807(0x1dd,0x1dd,0x162,0x188)+_0x47c807(0x1a7,0x153,0x25c,0x1ff)][_0x50af07],_0x3a1fef;}function buildCharacterText(_0x5f5d38){function _0x483a6e(_0x22722a,_0x36b46,_0x2a4481,_0x278744){return _0x5977a2(_0x2a4481-0x249,_0x36b46-0x67,_0x2a4481-0x112,_0x36b46);}const _0x2f48c9={};_0x2f48c9[_0x483a6e(0x5dd,0x5ab,0x537,0x572)]='<人物>\x0a',_0x2f48c9['AFGBJ']='</人物>';const _0x11a44a=_0x2f48c9,_0x57e7be=_0x5f5d38[_0x483a6e(0x45e,0x3fb,0x4d5,0x596)];let _0x469b6a=_0x11a44a[_0x483a6e(0x59c,0x497,0x537,0x509)];_0x469b6a+=_0x483a6e(0x4bb,0x367,0x406,0x325)+(_0x57e7be[_0x483a6e(0x59e,0x455,0x4d7,0x4e6)]||'')+'\x0a',_0x469b6a+=_0x483a6e(0x411,0x44b,0x4f4,0x5d5)+(_0x57e7be[_0x3a069a(0x35c,0x2d7,0x221,0x33e)]||'')+'\x0a',_0x469b6a+=_0x483a6e(0x5d7,0x516,0x51c,0x4c4)+(_0x57e7be[_0x3a069a(0x378,0x41d,0x37b,0x344)+'raits']||'')+'\x0a',_0x469b6a+=_0x3a069a(0x36e,0x34d,0x278,0x2e5)+(_0x57e7be['facialFeat'+_0x3a069a(0x3f2,0x3c8,0x45b,0x32b)]||'')+'\x0a',_0x469b6a+=_0x3a069a(0x2f9,0x341,0x2d3,0x415)+(_0x57e7be[_0x483a6e(0x5b1,0x596,0x57f,0x4d7)+_0x3a069a(0x3bc,0x41c,0x344,0x341)]||'')+'\x0a',_0x469b6a+='上半身SFW:\x20'+(_0x57e7be[_0x483a6e(0x42f,0x3bf,0x444,0x527)+'FW']||'')+'\x0a',_0x469b6a+=_0x3a069a(0x2a6,0x337,0x254,0x29a)+(_0x57e7be[_0x3a069a(0x229,0x2e7,0x37c,0x363)+_0x483a6e(0x60d,0x4de,0x57b,0x518)]||'')+'\x0a';function _0x3a069a(_0x42ea57,_0x5b8b58,_0x10da45,_0x2e534d){return _0x5977a2(_0x5b8b58-0xec,_0x5b8b58-0x10d,_0x10da45-0xca,_0x42ea57);}return _0x469b6a+='下半身SFW:\x20'+(_0x57e7be[_0x3a069a(0x371,0x40b,0x3d5,0x4e4)+'W']||'')+'\x0a',_0x469b6a+=_0x483a6e(0x3e5,0x47b,0x498,0x442)+(_0x57e7be[_0x483a6e(0x4ed,0x528,0x568,0x51d)+_0x3a069a(0x2b7,0x27a,0x2a4,0x2ca)]||'')+'\x0a',_0x469b6a+=_0x483a6e(0x50d,0x46a,0x4ce,0x5ab)+(_0x57e7be[_0x483a6e(0x4e2,0x51b,0x56b,0x49b)+_0x483a6e(0x379,0x371,0x3c7,0x2e6)]||'')+'\x0a',_0x469b6a+='上半身NSFW背面:'+'\x20'+(_0x57e7be[_0x483a6e(0x505,0x631,0x56b,0x5f1)+'SFWBack']||'')+'\x0a',_0x469b6a+='下半身NSFW:\x20'+(_0x57e7be[_0x3a069a(0x36a,0x32c,0x28f,0x3f1)+'FW']||'')+'\x0a',_0x469b6a+=_0x3a069a(0x4c6,0x3fb,0x3e6,0x427)+'\x20'+(_0x57e7be['fullBodyNS'+'FWBack']||'')+'\x0a',_0x469b6a+=_0x11a44a[_0x3a069a(0x2d9,0x2dc,0x26f,0x3b3)],_0x469b6a;}export async function handleCharacterPromptModify(_0x3d6852,_0xa2123e=[]){function _0x55f3fa(_0x7a79c1,_0x1bbb62,_0x1fa245,_0x3d2a65){return _0x5977a2(_0x3d2a65-0xeb,_0x1bbb62-0x120,_0x1fa245-0xde,_0x7a79c1);}const _0xb1b534={'QYvIS':_0x98840d(0x4c0,0x45c,0x595,0x4e3),'wtxGP':function(_0x3c6ee4,_0x40a412){return _0x3c6ee4(_0x40a412);},'taYvy':'获取角色修改提示词超'+'时','muNjC':function(_0x2428cb,_0x6f5e){return _0x2428cb!==_0x6f5e;},'Lpvnr':function(_0x15deca){return _0x15deca();},'VcoFE':function(_0x3ca543,_0x1846cf,_0x1e03cf){return _0x3ca543(_0x1846cf,_0x1e03cf);},'aWGEx':_0x98840d(0x3d9,0x301,0x39c,0x49c)+_0x98840d(0x3d7,0x379,0x3ee,0x33a)+_0x98840d(0x478,0x4a6,0x4f1,0x487)+_0x98840d(0x4b4,0x46f,0x579,0x4cf)+_0x55f3fa(0x2fd,0x288,0x2c5,0x321)+'modify\x20req'+'uest...','FViQY':_0x55f3fa(0x3eb,0x3d3,0x3d9,0x327)+'PromptModi'+_0x98840d(0x40d,0x351,0x4af,0x344)+_0x98840d(0x327,0x255,0x39f,0x298),'oGwBC':_0x98840d(0x39f,0x349,0x2e0,0x2fe),'vMZTl':_0x98840d(0x3d9,0x335,0x49e,0x46c)+_0x55f3fa(0x37b,0x293,0x33f,0x325)+_0x55f3fa(0x212,0x2c7,0x310,0x2cb)+'t\x20preset:','koRkb':'[character'+_0x55f3fa(0x33e,0x244,0x358,0x325)+_0x98840d(0x4ae,0x524,0x463,0x4b9)+_0x55f3fa(0x21a,0x222,0x3a6,0x2f6)+':','WwiEO':_0x98840d(0x3d9,0x33a,0x35d,0x445)+_0x98840d(0x3d7,0x3fc,0x439,0x365)+_0x98840d(0x4ae,0x561,0x533,0x577)+_0x98840d(0x319,0x369,0x27d,0x283),'eIQYm':function(_0x22d64e,_0x518aaf){return _0x22d64e||_0x518aaf;},'bispX':function(_0x2008f5,_0x5234ad){return _0x2008f5!==_0x5234ad;},'HHYrl':_0x98840d(0x31a,0x2fd,0x2c4,0x3ef),'ExGhS':'ovSKD','QnEDF':_0x55f3fa(0x2fb,0x322,0x2fa,0x327)+_0x98840d(0x3d7,0x326,0x2f7,0x315)+_0x98840d(0x412,0x3e7,0x3d4,0x441)+_0x98840d(0x3c5,0x424,0x423,0x468)+_0x98840d(0x43d,0x3be,0x412,0x4c2),'KZaeQ':function(_0x3d6d8c,_0x428a69,_0x3953bc){return _0x3d6d8c(_0x428a69,_0x3953bc);},'ARSXk':_0x55f3fa(0x3ad,0x2e9,0x36c,0x2cc)+'y','ikuhn':'[character'+_0x55f3fa(0x374,0x32b,0x34c,0x325)+'fy]\x20Charac'+_0x98840d(0x487,0x51f,0x4b7,0x3a7)+_0x55f3fa(0x33e,0x3b0,0x375,0x381)+_0x55f3fa(0x3db,0x2ab,0x3bf,0x30a),'ctEYW':function(_0x271b79,_0xff1bb1){return _0x271b79(_0xff1bb1);},'usdYG':_0x55f3fa(0x2c7,0x3ff,0x3cd,0x327)+_0x55f3fa(0x325,0x328,0x343,0x325)+_0x55f3fa(0x393,0x32e,0x2f4,0x2d3)+'后:','MvoDu':function(_0x8d801,_0x5d7023,_0x51ca46){return _0x8d801(_0x5d7023,_0x51ca46);},'IEhqi':'{{用户需求}}','wFgie':function(_0x26986a,_0x1fc5ed){return _0x26986a||_0x1fc5ed;},'bmONx':function(_0x49a835,_0x2c3c6e,_0x330dfa){return _0x49a835(_0x2c3c6e,_0x330dfa);},'TVRQw':_0x55f3fa(0x251,0x345,0x295,0x2a5),'ScGVj':function(_0x12946a,_0x13d8d8){return _0x12946a>_0x13d8d8;},'leous':function(_0x2095d2,_0x45c5a6){return _0x2095d2===_0x45c5a6;},'OJxck':_0x55f3fa(0x32c,0x3c0,0x3e2,0x350),'YKlnd':function(_0x800a52,_0x15f71b,_0x345eed,_0x38bc83,_0x1f6e59){return _0x800a52(_0x15f71b,_0x345eed,_0x38bc83,_0x1f6e59);},'clicg':_0x55f3fa(0x330,0x1c9,0x309,0x283),'pfrAs':_0x98840d(0x3d9,0x335,0x3ec,0x453)+_0x98840d(0x3d7,0x444,0x443,0x46c)+_0x98840d(0x3a6,0x3ad,0x41d,0x3b3)+'ed','Ttmmm':_0x98840d(0x340,0x356,0x25b,0x406)+_0x98840d(0x474,0x3e1,0x552,0x3af)+_0x55f3fa(0x3ff,0x365,0x38a,0x401),'rwuEB':'[character'+_0x98840d(0x3d7,0x356,0x415,0x4bc)+_0x98840d(0x3aa,0x3bd,0x3bc,0x464)+'tput:','daOmK':_0x98840d(0x4d1,0x594,0x513,0x56b),'Olhpm':function(_0x4ed342,_0x151a86){return _0x4ed342(_0x151a86);},'aglPU':'未在\x20LLM\x20输出中'+_0x55f3fa(0x2e1,0x2d3,0x325,0x30d),'LSwtJ':_0x98840d(0x3d9,0x324,0x30c,0x3eb)+'PromptModi'+_0x55f3fa(0x3c0,0x388,0x3ee,0x348)+_0x98840d(0x469,0x52b,0x543,0x42d)+'fit\x20tags\x20f'+_0x55f3fa(0x381,0x286,0x33d,0x2d1)+_0x98840d(0x39c,0x2b8,0x35c,0x474),'iOfSr':_0x98840d(0x3d9,0x4b0,0x427,0x3b7)+'PromptModi'+_0x55f3fa(0x276,0x342,0x3ec,0x34e)+_0x98840d(0x387,0x304,0x2c3,0x3e9)+_0x55f3fa(0x439,0x4e6,0x33f,0x416)+_0x98840d(0x378,0x33d,0x3c7,0x3cb),'opjJC':'[character'+_0x55f3fa(0x296,0x38e,0x303,0x325)+_0x98840d(0x3eb,0x3d5,0x49a,0x423)+_0x98840d(0x438,0x4b0,0x4f9,0x45e),'zyWBI':function(_0x5732fa,_0x3e5e4d,_0x2a1a51){return _0x5732fa(_0x3e5e4d,_0x2a1a51);},'GnMgw':_0x55f3fa(0x205,0x18e,0x239,0x26b),'yFYfv':_0x98840d(0x34b,0x3fc,0x37d,0x420),'rHLKD':function(_0x2c6d20,_0x411351){return _0x2c6d20(_0x411351);},'NXGYa':function(_0x2a738b,_0x9cf65c){return _0x2a738b!==_0x9cf65c;},'PnjyR':_0x98840d(0x3b8,0x2e4,0x374,0x3a4),'cekRy':_0x55f3fa(0x2e3,0x36f,0x3ae,0x327)+_0x98840d(0x3d7,0x3b5,0x430,0x363)+_0x98840d(0x460,0x3db,0x3bb,0x3ea)};function _0x98840d(_0x268890,_0x504e53,_0x216b2b,_0x8db8e2){return _0x5977a2(_0x268890-0x19d,_0x504e53-0x8e,_0x216b2b-0x178,_0x504e53);}console['log'](_0xb1b534[_0x98840d(0x36c,0x2f9,0x2ff,0x396)]),toastr[_0x98840d(0x3c6,0x482,0x456,0x2f6)](_0xb1b534[_0x55f3fa(0x397,0x37e,0x3d3,0x356)]);try{const _0x38262c=getContext(),_0x18033c=extension_settings[extensionName],_0x5adb50=_0xb1b534[_0x55f3fa(0x378,0x32a,0x30d,0x33b)](getCurrentCharacterPreset);if(!_0x5adb50){toastr[_0x98840d(0x3cd,0x4ae,0x44d,0x3dc)](_0xb1b534['oGwBC']);return;}console[_0x55f3fa(0x287,0x28c,0x34c,0x2bc)](_0xb1b534[_0x98840d(0x38b,0x416,0x39a,0x3db)],_0x5adb50['id']);const _0x50309c=_0x5adb50[_0x55f3fa(0x437,0x2e9,0x2bc,0x377)]['generation'+_0x98840d(0x46e,0x3d2,0x3d3,0x393)]||'',_0x5dd5a7=_0x5adb50[_0x55f3fa(0x30c,0x2fc,0x3cd,0x377)][_0x98840d(0x446,0x511,0x39a,0x443)+_0x55f3fa(0x423,0x30e,0x420,0x354)]||'',_0x23ca52=_0x5adb50['data'][_0x98840d(0x446,0x4ef,0x4d8,0x3f0)+_0x55f3fa(0x3f9,0x3b0,0x264,0x33f)]||{};console[_0x55f3fa(0x346,0x25a,0x210,0x2bc)](_0x55f3fa(0x310,0x263,0x3e5,0x327)+_0x98840d(0x3d7,0x3b0,0x396,0x48b)+_0x55f3fa(0x3dd,0x46b,0x4c8,0x3fc)+_0x55f3fa(0x2cd,0x2a6,0x273,0x2b7),_0x50309c),console[_0x55f3fa(0x340,0x31d,0x1d9,0x2bc)](_0xb1b534[_0x98840d(0x332,0x407,0x36c,0x376)],_0x5dd5a7),console[_0x98840d(0x36e,0x3c9,0x2a2,0x300)](_0xb1b534[_0x98840d(0x496,0x4f4,0x4d8,0x4de)],_0x23ca52);const _0x4aa6d0=_0xb1b534[_0x98840d(0x403,0x386,0x38d,0x41f)](_0x3d6852,''),_0x176347=[];_0x3d6852&&_0x176347['push'](_0x3d6852);_0x50309c&&_0x176347[_0x55f3fa(0x3aa,0x2a9,0x303,0x362)](_0x50309c);if(_0x5dd5a7){if(_0xb1b534[_0x55f3fa(0x4ae,0x416,0x4a3,0x420)](_0xb1b534[_0x98840d(0x41a,0x361,0x3db,0x33d)],_0xb1b534[_0x55f3fa(0x485,0x492,0x341,0x40c)]))_0x176347[_0x98840d(0x414,0x498,0x4a2,0x4eb)](_0x5dd5a7);else{const _0x501009={};_0x501009[_0x55f3fa(0x397,0x307,0x2ce,0x30c)]=_0xb1b534[_0x98840d(0x463,0x389,0x3f3,0x3b8)],_0x501009['text']=_0x5083bd[_0x98840d(0x32e,0x360,0x338,0x3ee)],_0x1fbbba[_0x55f3fa(0x2cf,0x447,0x347,0x362)](_0x501009);}}const _0x107af6=_0x176347[_0x55f3fa(0x392,0x2d7,0x365,0x2b2)]('\x0a');console[_0x55f3fa(0x282,0x35a,0x26a,0x2bc)](_0xb1b534[_0x98840d(0x4c3,0x475,0x4e0,0x57b)],_0x107af6);let _0x17b3a5=_0xb1b534[_0x55f3fa(0x452,0x3e3,0x4da,0x409)](buildPromptForRequestType,_0xb1b534['ARSXk'],_0x4aa6d0);const _0x19c257=generateCharacterListText(_0x107af6),_0x5469dd=generateOutfitEnableListText(),_0x36f0f2=generateCommonCharacterListText();console[_0x55f3fa(0x2b3,0x216,0x206,0x2bc)](_0xb1b534['ikuhn'],_0x19c257);const _0x3723d6=_0x38262c[_0x98840d(0x355,0x34a,0x397,0x35c)+'ta']?.['variables']||{},_0x3fb939=_0xb1b534['wtxGP'](buildCharacterText,_0x5adb50);_0x17b3a5=_0xb1b534[_0x55f3fa(0x36e,0x1b8,0x31a,0x291)](mergeAdjacentMessages,_0x17b3a5),console['log'](_0xb1b534[_0x55f3fa(0x4c2,0x36d,0x4d3,0x429)],_0x17b3a5);const _0x2ce2f9=_0xb1b534[_0x55f3fa(0x301,0x3a9,0x377,0x353)](findMessageIndexWithPlaceholder,_0x17b3a5,_0xb1b534[_0x55f3fa(0x3c4,0x494,0x4c5,0x3ec)]);console['log'](_0x98840d(0x3d9,0x451,0x2fa,0x33e)+_0x55f3fa(0x388,0x372,0x3ac,0x325)+_0x55f3fa(0x31b,0x24d,0x19d,0x260)+_0x55f3fa(0x3be,0x3ef,0x34d,0x3eb)+'\x20message\x20i'+_0x98840d(0x3b2,0x329,0x2dd,0x39a),_0x2ce2f9);const _0x207397={..._0x23ca52,..._0x3723d6},_0x419ce0={'context':_0x50309c,'worldBookContent':_0x5dd5a7,'variables':_0x207397,'userDemand':_0xb1b534['wFgie'](_0x3d6852,''),'characterListText':_0x19c257,'outfitEnableListText':_0x5469dd,'commonCharacterListText':_0x36f0f2},{messages:_0x3ce4b0,replacedVariables:_0x212455}=_0xb1b534['bmONx'](replaceAllPlaceholders,_0x17b3a5,_0x419ce0);_0x17b3a5=_0x3ce4b0,_0x17b3a5=_0x2f2b94(_0x17b3a5,_0xb1b534[_0x98840d(0x4b5,0x4a9,0x577,0x448)],_0x3fb939,_0x212455),console[_0x98840d(0x36e,0x3f3,0x308,0x378)](_0x55f3fa(0x32e,0x268,0x3f8,0x327)+_0x98840d(0x3d7,0x48d,0x47c,0x329)+'fy]\x20Final\x20'+_0x55f3fa(0x23c,0x269,0x261,0x274),_0x17b3a5);let _0x5e1bbe='';_0x212455[_0x98840d(0x3a3,0x470,0x31a,0x330)]>-0x1993+0x1237*-0x1+0x2bca&&(_0x5e1bbe=_0x98840d(0x3ba,0x364,0x341,0x3fa)+_0x98840d(0x432,0x43f,0x470,0x492)+[..._0x212455][_0x98840d(0x364,0x3c2,0x3bd,0x410)]('、')+'\x0a');_0xa2123e&&_0xb1b534['ScGVj'](_0xa2123e[_0x55f3fa(0x429,0x41f,0x495,0x3b5)],0x53d+0x4*0x815+-0x3b*0xa3)&&_0x2ce2f9>=0x1ad+-0x1363+-0x11b6*-0x1&&(_0xb1b534[_0x98840d(0x450,0x499,0x3b7,0x383)](_0xb1b534['OJxck'],_0xb1b534['OJxck'])?(_0x17b3a5=_0xb1b534['YKlnd'](attachImagesToMessage,_0x17b3a5,_0x2ce2f9,_0xa2123e,_0xb1b534[_0x98840d(0x37f,0x3cd,0x386,0x2de)]),console[_0x55f3fa(0x288,0x338,0x234,0x2bc)](_0xb1b534[_0x55f3fa(0x4d6,0x474,0x440,0x425)],_0xa2123e[_0x98840d(0x467,0x4c2,0x510,0x415)],_0xb1b534['Ttmmm'],_0x2ce2f9)):(_0x5ca667[_0x55f3fa(0x332,0x1dc,0x26f,0x285)+_0x98840d(0x338,0x377,0x2e1,0x34e)](_0xd51d25[_0x98840d(0x43f,0x374,0x474,0x519)+_0x98840d(0x37a,0x29e,0x317,0x2fe)+_0x98840d(0x3e3,0x3a8,0x3bf,0x429)],_0x4a0be2),_0x2dfac8&&(_0x24beae(_0x7cbae5),_0x103d0d=null)));_0xb1b534[_0x55f3fa(0x4e5,0x4db,0x3a8,0x409)](updateCombinedPrompt,_0x17b3a5,_0x5e1bbe);const _0x3e8400={};_0x3e8400[_0x98840d(0x44e,0x42a,0x433,0x48b)]=0x493e0;const _0x855105=await _0xb1b534[_0x98840d(0x4bb,0x4a0,0x475,0x433)](LLM_CHAR_MODIFY,_0x17b3a5,_0x3e8400);console[_0x98840d(0x36e,0x3ed,0x3ce,0x3e5)](_0xb1b534[_0x98840d(0x4af,0x497,0x4fe,0x45d)],_0x855105);if(!_0x855105){toastr[_0x98840d(0x3cd,0x41f,0x469,0x440)](_0xb1b534[_0x98840d(0x395,0x468,0x375,0x306)]);return;}const _0xc53da2=_0xb1b534[_0x98840d(0x3f4,0x34e,0x492,0x35d)](extractCharacterAndOutfitTags,_0x855105);if(_0xb1b534[_0x55f3fa(0x360,0x3a4,0x429,0x39e)](_0xc53da2[_0x55f3fa(0x3c3,0x321,0x354,0x392)][_0x55f3fa(0x3eb,0x363,0x460,0x3b5)],0x2119+-0x1435+-0x3c*0x37)&&_0xc53da2['outfits'][_0x55f3fa(0x42c,0x3b0,0x44b,0x3b5)]===0x5eb+-0x1*0x3f1+-0x1fa){toastr[_0x55f3fa(0x2fc,0x18c,0x212,0x265)](_0xb1b534[_0x98840d(0x33f,0x31d,0x325,0x419)]),console['log'](_0xb1b534['LSwtJ']),console[_0x55f3fa(0x327,0x2bd,0x251,0x2bc)](_0xb1b534[_0x55f3fa(0x322,0x3cb,0x30f,0x388)],_0x855105);return;}console[_0x98840d(0x36e,0x3a2,0x34a,0x319)](_0xb1b534[_0x55f3fa(0x3a9,0x3ba,0x250,0x2f9)],_0xc53da2);if(_0xb1b534[_0x98840d(0x324,0x351,0x404,0x282)](_0xc53da2['characters'][_0x55f3fa(0x41e,0x360,0x3a4,0x3b5)],0x218c+0x131f*-0x1+-0xe6d)){const _0x4296a0=_0xc53da2[_0x55f3fa(0x3fd,0x392,0x35c,0x392)][0x1a48+-0x1c74+0x22c];await _0xb1b534[_0x55f3fa(0x349,0x33a,0x407,0x345)](updateCharacterPresetFromLLM,_0x5adb50['id'],_0x4296a0);}const _0x191e16=[..._0xc53da2[_0x55f3fa(0x38c,0x2c9,0x2c3,0x3a7)]];for(const _0x359f86 of _0xc53da2[_0x98840d(0x444,0x51c,0x3dd,0x4b5)]){if(_0xb1b534[_0x98840d(0x450,0x4bd,0x4ae,0x529)](_0xb1b534[_0x55f3fa(0x2dd,0x248,0x3ec,0x31e)],_0xb1b534['yFYfv'])){const _0x4b00b={'DXWWJ':function(_0x39dbd0,_0xc6730c){function _0x3365b5(_0x386eaf,_0x1cfa03,_0x101ad3,_0x46b888){return _0x55f3fa(_0x101ad3,_0x1cfa03-0x171,_0x101ad3-0x188,_0x1cfa03- -0x415);}return _0xb1b534[_0x3365b5(-0x17a,-0x17b,-0x23b,-0xc4)](_0x39dbd0,_0xc6730c);},'daxUi':function(_0x4f31de,_0x502477){return _0x4f31de(_0x502477);}},_0x1a3b08=_0xb1b534[_0x55f3fa(0x34e,0x392,0x330,0x33b)](_0x38f6c7);_0x1e193a[_0x98840d(0x36e,0x2d1,0x382,0x44d)](_0x98840d(0x3d9,0x473,0x4b9,0x330)+_0x55f3fa(0x2e1,0x29f,0x2f7,0x325)+_0x98840d(0x419,0x3b0,0x381,0x462)+'ting\x20char\x20'+'modify\x20pro'+_0x55f3fa(0x272,0x1e7,0x247,0x294)+_0x1a3b08+')');const _0x572629=_0x13fd02=>{if(_0x4b00b[_0x22a6c4(0x3a4,0x3fd,0x3a5,0x3df)](_0x13fd02['id'],_0x1a3b08))return;_0x3126da['removeList'+'ener'](_0x585ecc['LLM_CHAR_M'+_0x7e5787(0x4f1,0x5fd,0x4c9,0x53f)+_0x22a6c4(0x30b,0x3b4,0x2db,0x376)+'PONSE'],_0x572629);function _0x22a6c4(_0x10d63c,_0x4de66e,_0x29773f,_0x2eefe0){return _0x55f3fa(_0x29773f,_0x4de66e-0xc8,_0x29773f-0xf0,_0x4de66e-0x152);}function _0x7e5787(_0x180106,_0x1439f4,_0x1b31d6,_0x164dbf){return _0x55f3fa(_0x1b31d6,_0x1439f4-0x1e1,_0x1b31d6-0xf2,_0x164dbf-0x201);}_0x4b00b['daxUi'](_0x5c80f2,_0x13fd02[_0x22a6c4(0x3c7,0x3ee,0x4ca,0x321)]);};_0x26003d['on'](_0x644559[_0x55f3fa(0x46d,0x363,0x41b,0x38d)+'ODIFY_GET_'+'PROMPT_RES'+_0x55f3fa(0x423,0x321,0x37e,0x39b)],_0x572629);const _0x6db006={};_0x6db006['id']=_0x1a3b08,_0x7ec0af['emit'](_0x763caa['LLM_CHAR_M'+'ODIFY_GET_'+_0x98840d(0x3a9,0x37d,0x45e,0x479)+_0x98840d(0x349,0x31c,0x29a,0x3a2)],_0x6db006),_0xb1b534[_0x55f3fa(0x1cb,0x306,0x36a,0x290)](_0x39f96b,()=>{function _0x557005(_0x2cadb5,_0x4b5225,_0x4db434,_0x160f5f){return _0x55f3fa(_0x160f5f,_0x4b5225-0x97,_0x4db434-0x34,_0x2cadb5- -0x477);}_0x175b89[_0x557005(-0x1f2,-0x223,-0x210,-0x251)+_0xb968bc(-0x17c,-0x126,-0xb0,-0x131)](_0x39fa62[_0x557005(-0xea,-0x153,-0xce,-0x7f)+'ODIFY_GET_'+_0x557005(-0x215,-0x15a,-0x2cf,-0x237)+_0xb968bc(-0x4c,0x4,-0x2b,-0x1c)],_0x572629);function _0xb968bc(_0x4d29b6,_0x42cc00,_0x2dc722,_0x209e93){return _0x98840d(_0x209e93- -0x469,_0x4d29b6,_0x2dc722-0x20,_0x209e93-0xe9);}_0xb1b534[_0x557005(-0x140,-0x1a9,-0x1c1,-0x62)](_0x40556f,new _0x37e85f(_0xb1b534['taYvy']));},0x460d*0x1+-0x1c*0x185+0xb8f);}else _0x359f86[_0x98840d(0x322,0x311,0x321,0x3a4)+_0x55f3fa(0x336,0x336,0x371,0x2f5)]&&_0x359f86[_0x98840d(0x322,0x23e,0x3cd,0x3ff)+_0x98840d(0x3a7,0x2ec,0x43b,0x338)]['length']>0x530+0x2a*-0xf+-0x2ba&&_0x191e16[_0x55f3fa(0x423,0x3b4,0x436,0x362)](..._0x359f86[_0x98840d(0x322,0x355,0x3f3,0x282)+'fits']);}_0x191e16[_0x55f3fa(0x35c,0x346,0x46a,0x3b5)]>0x826+-0x2*-0x7be+-0x17a2*0x1&&await _0xb1b534[_0x98840d(0x393,0x467,0x3bd,0x44c)](updateOutfitPresetsFromLLM,_0x191e16),toastr[_0x55f3fa(0x3a7,0x35c,0x372,0x30b)](_0x98840d(0x3ea,0x334,0x3e8,0x382)+'完成！');}catch(_0x28496d){if(_0xb1b534['NXGYa'](_0xb1b534[_0x55f3fa(0x3cb,0x45c,0x400,0x400)],_0xb1b534['PnjyR']))return _0x2b78a0&&_0x21828e[_0x98840d(0x4c1,0x411,0x53b,0x545)](_0x59a412)&&(_0x2289cb&&_0x184ddb[_0x55f3fa(0x3d8,0x40a,0x2f8,0x34b)](_0x325a40)),_0x3ad2bb[_0x98840d(0x491,0x527,0x43f,0x54c)](_0x62c7bd,_0x24314f);else console[_0x98840d(0x3cd,0x440,0x3e3,0x430)](_0xb1b534[_0x55f3fa(0x225,0x29a,0x25f,0x2d2)],_0x28496d),toastr[_0x98840d(0x3cd,0x30b,0x439,0x3b5)](_0x55f3fa(0x42f,0x37c,0x329,0x34f)+'\x20'+_0x28496d[_0x55f3fa(0x1d0,0x1f8,0x312,0x2ae)]);}}function _0x4368(){const _0x486449=['Cxj4tNC','B3DUzxi','qNLjza','kcGOlISPkYKRkq','DxjLC0jHy2S','y2HHCMfJDgvYva','rLDcywnR','5lIl5y2k6lQR','teXnioI/LowBNUE7K+AENos4UUEPUG','yMLZCfG','zMfJAwfSrMvHDa','t2vSueq','zez2yNa','thLkAuS','CgzYqxm','sxHvrvm','s2XxAMi','Cwjhz0m','DxnKwuC','z2v0rwXLBwvUDa','vLnmCfK','zNLDifvZzxiGCG','Cw1lC0m','ufjptvbux1jfuW','vMHeCxu','CMvZDwX0','D2fYBMLUzW','v3flvgC','DMfYAwfIBgvZoG','y3DoyLG','u0zx','DK9hueu','zNvgBve','ndqZmdqZm214tKXXtG','v2XJrfK','r2DhDvy','yuvUC3K','Bwf0y2HLze91Da','AejIq2W','u2nhvMO','uMTOt04','ChjVBxb0oG','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','sgjrsNy','quH1qMG','svPqquu','v0jHy2S','A3nru1u','u0zxqMfJAW','y29UDgvUDa','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','AxLnt2q','AgzZugW','A29sA2i','BwfW','lxrHyI1JAgfYyq','5y+c6icd5zU+54Mh','i3n0lwnOyxr1oa','CMvTB3zLtgLZDa','zw5LCG','qvzsrfG','EuvAvg0','y2HHCL8','rxPRALe','zMLSDgvY','DMfSDwu','ywDSufu','Aw1Hz2vZihrVia','C2vHCMnO','vMnVrKu','y3rfwvC','Dg9mB3DLCKnHCW','D3fNqNO','Bxb0icHjrdOG','sfftq0O','AMjkz3u','vuvtva','BungzLa','Aw9cwK4','BxvoAKm','5A2x5Q61ici','ChjVBxb0','yxbWBhK','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','Aw5KzxHpzG','v3vSzhq','tgHJuLO','t1LduM4','y2HHDe1LDgfKyq','uevNCKi','E3VLVzpLIy3OP5lOIBj9Fq','C3vIC3rYAw5N','qNLZuue','5lIT5PAh5zcn56EWoIa','5Qoa5Rwl5yIW5PAW5PYn6kofici','zw1PDa','rfHxv0O','txbYu3a','6iUX5PAh5zcn56EW','BwvZC2fNzq','BhnPzfa','Chbnrwi','wLDTt2i','AM9PBG','6k6+ici','uLPTCxC','Cez4tKq','DvrjDMi','y29UDgv4DdO','u2n2AKW','vfPRtMm','yvDhrxG','r1blyvG','Bg9N','tgXtEwm','sKLWCKm','CMfUzg9Tvvvjra','wfPODuu','Dfzkvvy','DerPrxe','uxLmCM0','rufcB2e','y2HtwK4','BMC6','A3nluxi','t0rjrLLFuKvtua','ywnR','BgfpzMS','zNLDien1CNjLBG','y2HHCL9TB2rPzG','y2XPy2C','zxHLyW','veXKrem','5lIk5y2k6lQRtLngv+IdJoMDOG','B3vUzcbPBIbVDq','y2vRuNK','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','DNjuzxi','tsbVDxrWDxqGzG','BMfTzuvo','nZreq2XAz1K','sK5RzeS','DK1AvgW','5lIl5y2k6lQRu0zx','quzhqKO','5lIk5y2k6lQRtLngvW','v0jdwwS','5lIk5y2k6lQR6iom6z2I','CeXoA3a','yNvJr3O','CKHms0q','y3rLCG','zgfpBuS','wu1ywfK','DurZv0O','DxbWzxjcB2r5uW','tfjSr1a','AvbyBKS','B2DHEgO','Dhb1Da','C3bSAxq','CNHWCNu','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','u0PTB1q','y29UC3rYDwn0BW','y0XjsgS','C2L6zq','C3nbAKS','zwXbvNG','zNLDief0DgfJAa','zML0CW','D29YBgqGyM9VAW','ufjptvbux1jfuq','zNLDieXmtsbVDq','B3bQsKm','5lIl5y2k6lQRu0zx6iom6z2I','5lIl5y2k6lQR6iom6z2I','DNvPDfi','Cw51vhu','iIZMMk/LKkBLVzxLHAu/','BNLisuy','BMrLEdO','wM50vu8','BMfTzq','BM93','6kEs6iMY54M55B6b','5lIT5PAh5zcn56EW','ugLpzge','yMTyzvi','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','BgjxExy','zxjLzcK6','C3vJy2vZCW','DhLWzq','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','y2HHCMfJDgvY','shfgA3e','AKDgEKe','rvnu','yxDvsNK','DgvYihrYAwDNzq','Aw5MBW','CMvZzxrjza','B2rPzNKGteXnia','sxPxzg4','l3bUzZTIyxnLnG','zNLDiow3SUABToAwSoACJEIJHEMIHa','CMvWBgfJzq','zxjYB3i','B3vct0y','uwrUs1i','r25nz3C','zNLDiev4zwn1Da','zNLDiow3SUwiM+w7UUACJEIJHEMIHa','zxiGChjVBxb0ia','DNHTDeK','CMvZzxrZ','BeL1tgO','uhjVBxb0tw9KAq','u1PVz0q','w2nOyxjHy3rLCG','q0XMv0i','DgLUzYbJAgfYia','Aw1Hz2vFDxjS','zNvSBejVzhLouW','A3zbzeO','zvbKuM4','5lIk5y2k6lQRu0zx','wNzXA3G','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','t05trq','BvDcEKK','uuD2svi','u3jVvvm','B2jQzwn0','5lIk5y2k6lQRu0zx6iom6z2IoIa','D3r4r1a','6kEs6iMYl+ACJEIJHEApKoEKUUIVJEs/RUAuUq','zNLDiev4DhjHyW','5lIl5y2k6lQRu0zx6iom6z2IoIa','thb2BNi','ntyYnZm2ohjyswjjrG','u2PpzuW','t0rjrLLFr0vuxW','vMfYAwfIBgvZ','5lQu5A6y5Asw6lkm6iom6z2IoIa','EK5zAwy','t2XOCg0','5Qoa5Rwl5yIW6kEs6iMYici','A2zUB3u','ENLxqKK','A1HzqKy','whvkvgO','zNLDie5VignOyq','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','A0rgwha','ywrK','5lQu5A6y5Asw6lkmoIa','wezftMq','zNLDifjHDYbmta','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','DM96Cu8','zuLrww0','qK9Tr1a','txzVrhu','v29YBgrcB29R','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','rLzPuvK','ELfUtNe','BvbHyuu','y2HHCMfJDgvYua','zK5twMu','zNLDioATO+wCQowKHoEqHUINKUIjSG','wwrPu28','5lQu5A6y5Asw6lkm','B0XrCLy','Dg9tDhjPBMC','zNLDienOyxjHyW','mte4odjrzMfus2e','ChvZAa','teXnioIVT+AXGUwKSEI0Pq','CKvpBKC','q1zrEeK','iIdMSQhMNiNLJ5JMM7q','zNLDifjLCxvLCW','seHzCMW','zNvSBejVzhLcyq','we5Rruq','Aw5WDxq','q0TJyvi','uuzVqKu','yMHgteu','vuH5CLG','5lIk5y2k6lQRtLngvZOG','yuHOquG','rKfoqxm','A1nUDKO','ouPHue55sG','mJiWmdG3mhLyCvDrCa','z2j2tgK','zgf0yq','zhH6Cei','BMfTzuno','A29SvNy','DhjPBq','vw1OzeK','rLLlANu','zML0ihrHz3mGzG','zNvSBejVzhK','6kkR5l2/55sO77YA','zxH0icH0CMLNzW','rxPKshC','qwj2qNG','vu54uge','5lIk5y2k6lQRu0zx6iom6z2I','DgvKigrHDge6','ANjWDKq','Au9Mu3i','ENjPrwm','DhjPz2DLCG','CIb0zxH0oG','ntmWnZCYzgTNyK1s','teXnx0niqvjFtq','iIdMNiKG','s29vDxm','z3bUu0i','CMfPDhm','y2HHCMfJDgvYCW','Ae5zreK','z2vUzxjHDgLVBG','rvzeA1a','6iUX5PAh5zcn56EWoIa','5B2s5BgE5lQ6','zNPKugO','B3v0zML0','CLfXBvy','ue9ou0u','DgLTzw91De1Z','rhb0v0i','BgvVDxm','q2XLrM4','Cg9ZAxrPB24','5lIk5y2k6lQRtLngv+IdJoMDOJO','zNLDiow3SUABToAwSoINKUIjSUMIHa','5lIk5y2k6lQR','mtyZogzcze5IDq','C3rYAw5N','q0zlwuW','B3v0zML0CW','DxbWzxjcB2r5','uvfMChO','B01xyMu','5BEY5y+w5RAi5PU05PAW','rePjq1a','CuXiALi','zNLDievYCM9YoG','whLJqKe','zNLDioACJEIJHsaI','uvL2svm','5Rgc6lAf5PE2','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','5lIl5y2k6lQRtLngvW','BgvUz3rO','CKrtsMi','CMfJDgvYl291Da','s0TOtwe','uxLgCuG','D01JBKO','Exzpyvy','q29UDgv4Da','uKPYsK4','6kEs6iMY54M55B6boIa','nduZmeHODursAW','C1LZzgW','re9Irvm','BwvZC2fNzsbHDa','AxnbCNjHEq','suzgrxK','mtvmrMvvwMS','zNLDifn0yxj0Aq','DxjLCW','q2vUvwy','shvHyNG','ELrpsLa','B3v0zML0uhjLCW','uLHtq3i','rLPYCxe','zgf0ytPPBwfNzq','zxrZ','BgLttva','A1f5Dvy','DMTryxK','y1ziv2S','u2nZuwC','DgvYigXPC3qGDa','zw50CMLLCW','uvHYtui','ANzTEw8','CNjRDNe','zM9YrwfJAa','rMHezgm','5lQu5A6y5Asw6lkm6iom6z2I','D21uy1m','5lIl5y2k6lQRtLngv+IdJoMDOG','CMvWBgfJzufSBa','u0H4uem','yLvOENi','zNLDioINO+AEKowiSoEAHos6UUEjQq','5Qoa5Rwl5yIW5PYn6kofici','v3DPru8','AhrYr08','C29YDa','5PwW5O2UoG','zfjQreC','tLHTAMq','vgLsr2G','zxf1AxjLBwvUDa','suvOCwK','mte2nZy2mtbeDu1pwhq','qMr4D0C','t0rjrLLFuKvrvq','y3zywhi','AKzetwG','uvjZAfe','rdOG','Aw5NignOyxiGBq','v1n6Awy','sMzTCMe','iIdLT7lLVzlLSz7LIldOP5lOIBiGiG','DxHYAwq','DxbWzxjcB2r5qG','5lIl5y2k6lQRtLngv+IdJoMDOJO','tKDfDgK','zNLDifnHDMvKia','CND1rui','txL5r0S','AK1YsMO','ug5QEvi','igLUzgv4','BMCGy2HHCMfJDa','vfzsuxC','tfrYt00','sgXbDvi','zxndrfq','z3H3t1K','AfHTve4','s1PHzve','zNvSBejVzhLtrG','CMvXDwvZDcaOsq','rxHhAfm','DxbWzxjcB2r5tG','Dgv4Da','Aw5JBhvKzxm','CMfUzg9T','uw5frey','EMzpAgK','DxjS','ExHSv0G','qKvXCgC','B3iGzgvIDwDNAq'];_0x4368=function(){return _0x486449;};return _0x4368();}async function updateCharacterPresetFromLLM(_0x969684,_0x18e3af){const _0x1dd26b={'LRlGP':_0x286b15(0x26d,0x284,0x212,0x2b7),'dRjDG':_0x286b15(0x343,0x283,0x1b4,0x325),'QyFqH':'五官外貌','RJrJN':_0x5cb798(-0xf3,-0xf,-0xaa,-0x78),'SJmoT':_0x5cb798(-0xc1,-0xac,-0x158,-0x172),'dsfIc':_0x5cb798(-0x146,-0x1c7,-0x101,-0x66),'ScsQg':_0x5cb798(-0x218,-0xcc,-0x1ac,-0x11f),'ScvjL':_0x286b15(0x222,0x279,0x287,0x32d),'yQAAF':_0x286b15(0x2aa,0x24f,0x2f8,0x30d),'elAVx':_0x286b15(0x288,0x333,0x3e4,0x28c),'bigeX':_0x286b15(0x18f,0x1e5,0x1ba,0x25c),'OelPD':_0x286b15(0x33b,0x2eb,0x3cf,0x33b),'jFDMh':function(_0x2092c6,_0x1bf426){return _0x2092c6!==_0x1bf426;},'IzWdn':function(_0x567967,_0x5645ee){return _0x567967===_0x5645ee;},'GLpuY':_0x286b15(0x21e,0x2af,0x32f,0x260)+'内容','tjFoq':function(_0x9add88,_0x3be68f){return _0x9add88(_0x3be68f);},'Wuldt':_0x5cb798(-0x133,-0x246,-0x160,-0xe1),'ksKQr':_0x286b15(0x36a,0x32a,0x272,0x33c),'pLNkp':function(_0x11da43){return _0x11da43();},'AVRDX':function(_0x35e898,_0x506ec6){return _0x35e898(_0x506ec6);},'ghuyY':_0x286b15(0x2dc,0x203,0x23e,0x1be)+_0x286b15(0x1fc,0x201,0x1bf,0x2ab)+_0x286b15(0x1e5,0x261,0x2b5,0x1a0),'lbWyv':function(_0x23fe08,_0x4a035c){return _0x23fe08(_0x4a035c);}},_0x212e74=extension_settings[extensionName],_0x21c579=_0x212e74['characterP'+_0x286b15(0x28e,0x2a2,0x36e,0x36a)][_0x969684];if(!_0x21c579){toastr['error']('找不到指定的角色预设');return;}const _0x18ba17={};_0x18ba17[_0x5cb798(-0x116,-0x162,-0x10d,-0x4e)]=_0x1dd26b[_0x286b15(0x26b,0x266,0x193,0x2da)],_0x18ba17[_0x5cb798(-0x239,-0x193,-0x1b0,-0x200)]=_0x286b15(0x1fa,0x22c,0x23e,0x2a3),_0x18ba17[_0x286b15(0x30d,0x39b,0x467,0x2e0)+_0x286b15(0x234,0x310,0x328,0x37e)]=_0x1dd26b[_0x5cb798(-0x15b,-0x172,-0x9e,-0xd8)],_0x18ba17[_0x286b15(0x38c,0x3a0,0x322,0x2ec)+'ures']=_0x1dd26b[_0x286b15(0x39c,0x338,0x2af,0x3ea)];function _0x286b15(_0x5e94d5,_0x1118d5,_0x419b53,_0x1578b1){return _0x5977a2(_0x1118d5-0x6a,_0x1118d5-0x149,_0x419b53-0x43,_0x5e94d5);}_0x18ba17[_0x5cb798(0x4,-0xda,-0x65,-0xd0)+_0x5cb798(-0xd7,0xe,-0x6b,0x26)]=_0x1dd26b[_0x286b15(0x413,0x33c,0x3fd,0x3e5)],_0x18ba17[_0x286b15(0x2d8,0x265,0x24d,0x32f)+'FW']=_0x1dd26b[_0x5cb798(-0x220,-0x14d,-0x198,-0x1ee)],_0x18ba17[_0x286b15(0x1b1,0x265,0x1db,0x313)+_0x5cb798(-0xc,0x13,-0x69,0x5b)]=_0x1dd26b['dsfIc'];function _0x5cb798(_0x312d12,_0x37afdb,_0x1e66d9,_0x41e380){return _0x5977a2(_0x1e66d9- -0x39b,_0x37afdb-0x1ac,_0x1e66d9-0x35,_0x41e380);}_0x18ba17[_0x5cb798(-0x7c,0x3f,-0x7c,0x61)+'W']=_0x1dd26b[_0x5cb798(-0xdb,-0x21,-0xb2,-0xb1)],_0x18ba17[_0x5cb798(-0x39,-0x10d,-0x7c,-0x64)+'WBack']=_0x1dd26b[_0x5cb798(-0x16c,-0x28e,-0x1ce,-0x1a0)],_0x18ba17['upperBodyN'+_0x286b15(0x128,0x1e8,0x243,0x17a)]='上半身NSFW',_0x18ba17['upperBodyN'+_0x5cb798(-0x1ec,-0x1ce,-0x20b,-0x23b)]=_0x1dd26b['yQAAF'],_0x18ba17[_0x5cb798(-0xe8,-0xcb,-0x15b,-0x94)+'FW']=_0x1dd26b[_0x5cb798(-0x14c,-0x1d7,-0x193,-0x193)],_0x18ba17[_0x5cb798(-0x159,-0x16e,-0x15b,-0x15e)+_0x286b15(0x46d,0x39c,0x3da,0x468)]=_0x286b15(0x343,0x35d,0x30e,0x41d);const _0x51b0d3=_0x18ba17;let _0x280758=-0x12a1+0x260b+0x5*-0x3e2;for(const _0x3f2a1d in _0x51b0d3){_0x1dd26b['bigeX']!==_0x1dd26b[_0x286b15(0x41b,0x3a1,0x35a,0x3a3)]?_0x18e3af[_0x3f2a1d]&&_0x1dd26b[_0x5cb798(-0x2f,-0x82,-0x95,-0xdd)](_0x18e3af[_0x3f2a1d],_0x21c579[_0x3f2a1d])&&_0x280758++:_0x48bd6b[_0x468843[_0x7660f6]]=_0x324a59;}if(_0x1dd26b[_0x5cb798(-0x23d,-0x164,-0x16f,-0x1d2)](_0x280758,-0x114d+0x1d0e+-0xbc1)){toastr[_0x286b15(0x33c,0x293,0x370,0x305)](_0x1dd26b['GLpuY']);return;}const _0x3d8abe=_0x5cb798(-0x1e7,-0x79,-0x143,-0x18e)+_0x969684+_0x5cb798(-0x155,-0x108,-0xf8,-0x1ad)+_0x280758+_0x286b15(0x317,0x2d4,0x2a9,0x317),_0x45f888=await _0x1dd26b['tjFoq'](stylishConfirm,_0x3d8abe);if(!_0x45f888){if(_0x1dd26b[_0x5cb798(-0x104,-0x21a,-0x16f,-0x240)](_0x286b15(0x258,0x2a5,0x244,0x2e6),_0x1dd26b[_0x286b15(0x303,0x21f,0x1cd,0x1eb)])){toastr[_0x286b15(0x296,0x293,0x1d5,0x1bb)](_0x1dd26b[_0x286b15(0x1e1,0x246,0x217,0x1f7)]);return;}else{const _0x334dd4=_0x118f60['apply'](_0x5d776e,arguments);return _0x56e36b=null,_0x334dd4;}}for(const _0x5aad45 in _0x51b0d3){_0x18e3af[_0x5aad45]&&(_0x21c579[_0x5aad45]=_0x18e3af[_0x5aad45]);}_0x1dd26b[_0x5cb798(-0xf4,-0x161,-0x1a7,-0xc2)](saveSettingsDebounced);const _0x701584=_0x1dd26b[_0x5cb798(-0x223,-0x240,-0x1ff,-0x209)]($,_0x1dd26b['ghuyY']);_0x701584[_0x286b15(0x329,0x334,0x358,0x338)]&&refreshCharacterSettings(_0x701584),_0x1dd26b[_0x286b15(0x1b1,0x288,0x30f,0x2d3)](updateFormFields,_0x18e3af),console[_0x5cb798(-0x191,-0x1c9,-0x1ca,-0x1da)]('[character'+'PromptModi'+_0x286b15(0x2aa,0x321,0x398,0x3d2)+_0x5cb798(-0x1f1,-0x1fc,-0x1d3,-0x1c4)+_0x969684+'\x22');}async function updateOutfitPresetsFromLLM(_0x237a1a){const _0x2d0e6d={'YMXXY':'[character'+_0x480840(-0x12,0xc,0x56,-0xbf)+_0x399d13(0x76,0xab,0xdf,0x9d)+'racter/out'+_0x480840(0x47,-0x37,0x92,0x8f)+_0x399d13(-0x1,0x20,0xbc,-0x89)+'tput','bucGz':'[character'+_0x480840(-0x12,0xd1,0x62,0x2a)+'fy]\x20Raw\x20LL'+_0x480840(-0x62,-0xf6,-0xe6,-0x3c)+_0x399d13(0x144,0xd9,0x13c,0x19d)+_0x480840(-0x71,-0x128,0x68,-0x40),'TZkNc':function(_0x314091,_0x2c1bf0){return _0x314091(_0x2c1bf0);},'JIprC':_0x480840(0x12,-0x22,-0x9e,-0x11)+'时','JNkdK':_0x480840(-0x32,0x68,0xaa,0x6b),'VhDqu':'英文名称','KoUus':_0x399d13(0xc5,0x14d,-0x21,0x17c),'yxlWH':_0x399d13(0x29,0x10d,-0x49,0x9d),'IQnUu':function(_0x31b93e,_0x5f09c8){return _0x31b93e!==_0x5f09c8;},'sYsdl':_0x399d13(0xcb,0x16a,0x123,0x5f),'KKhMa':_0x399d13(0xa8,-0x8,0xe3,0x97),'MyyGK':function(_0x530bc8,_0x3a08ea){return _0x530bc8===_0x3a08ea;},'eJtQI':function(_0x3bf068,_0x3d30f7){return _0x3bf068===_0x3d30f7;},'FZrqq':_0x399d13(-0x30,-0x93,-0x5b,-0x79),'ZntUO':function(_0x26d54d,_0x331072){return _0x26d54d(_0x331072);},'nyHIF':function(_0x635566,_0x2ba5e1){return _0x635566===_0x2ba5e1;},'qLHjR':_0x399d13(0x134,0xc4,0xe3,0x87),'cVHWk':_0x399d13(0xa4,0x124,0x75,-0x26),'LlSyc':function(_0x22878d,_0x30a2d5){return _0x22878d!==_0x30a2d5;},'WlcDY':_0x399d13(0x9c,0x62,0x22,-0x39),'rDSJb':'PtvEz','UNxPa':function(_0x45b0e6,_0x671be5){return _0x45b0e6===_0x671be5;},'XuJTj':_0x399d13(0xb1,0xb9,0x13,0x8b),'htrGO':_0x399d13(-0x31,-0x9d,0x32,-0x10d),'ZWmOb':function(_0x35d2f3){return _0x35d2f3();},'BdxwG':'#st-chatu8'+'-tab-chara'+_0x480840(-0x55,0x77,-0x64,0x73)};function _0x399d13(_0x1c8b0d,_0x277370,_0x13b71f,_0x5a700a){return _0x5977a2(_0x1c8b0d- -0x1e7,_0x277370-0x116,_0x13b71f-0x130,_0x277370);}const _0x2e4127=extension_settings[extensionName],_0x456990={};_0x456990[_0x480840(0x42,0xb6,-0x3d,0xb)]=_0x2d0e6d[_0x399d13(0x6,0xc3,-0x4e,0xb7)],_0x456990['nameEN']=_0x2d0e6d[_0x399d13(-0x6f,-0x7a,-0xeb,-0x1b)],_0x456990[_0x480840(0xe1,0xb9,0x67,0x142)]=_0x2d0e6d[_0x399d13(0xbd,-0x10,0x159,0x8c)],_0x456990[_0x399d13(0xd6,0x138,0x117,0x18d)]=_0x399d13(0xd1,0xac,0x55,0xe0);function _0x480840(_0x227d94,_0x283146,_0x60108,_0x3e01b9){return _0x5977a2(_0x227d94- -0x24c,_0x283146-0x75,_0x60108-0x19c,_0x3e01b9);}_0x456990[_0x480840(0xc2,0xf3,0xd0,-0x14)+_0x399d13(-0x9,0xbc,-0xbb,0x87)]=_0x480840(-0x59,0x3e,0x3e,-0xdd),_0x456990[_0x480840(0x48,0xd9,-0x6a,0xa9)]=_0x399d13(0x14c,0x1db,0x159,0xc7),_0x456990[_0x399d13(0x97,0x55,0x132,0x60)+'ck']=_0x2d0e6d[_0x399d13(0x142,0x132,0xa5,0x150)];const _0x1dad2d=_0x456990;for(const _0x3c2c96 of _0x237a1a){const _0x592a8a=_0x3c2c96[_0x399d13(0xa7,0x141,0x172,0x6e)];if(!_0x592a8a)continue;const _0x24fef=_0x2e4127['outfitPres'+_0x480840(0x98,0x8b,0xe,0x13e)]?.[_0x592a8a];if(_0x24fef){if(_0x2d0e6d['IQnUu'](_0x2d0e6d[_0x399d13(0xee,0x170,0x1a,0x17b)],_0x2d0e6d[_0x399d13(0xe6,0x11,0x11,0x64)])){let _0x111662=-0x35*0xb3+-0xb7d+0x308c;for(const _0x580564 in _0x1dad2d){_0x3c2c96[_0x580564]&&_0x3c2c96[_0x580564]!==_0x24fef[_0x580564]&&_0x111662++;}if(_0x2d0e6d[_0x480840(0xc7,0x81,0xf7,0x13a)](_0x111662,-0x99*-0x19+-0xc2b+-0x2c6)){console[_0x399d13(-0x16,-0xaa,-0x37,0x3d)](_0x399d13(0x55,0xc0,-0x46,-0x84)+_0x399d13(0x53,0xf6,0xd7,0x5c)+_0x399d13(0xde,0x130,0x23,0x37)+_0x592a8a+_0x480840(0x2f,0x29,-0xb1,0x105));continue;}const _0x1a7806=_0x480840(0xac,0xc3,0x7b,0x18)+_0x592a8a+_0x480840(0x57,0x69,-0x66,0x127)+_0x111662+_0x480840(0x1e,-0x8c,-0x5c,0xcc),_0x44a141=await _0x2d0e6d[_0x480840(-0x7e,-0xbf,-0x12e,-0xd)](stylishConfirm,_0x1a7806);if(!_0x44a141)continue;for(const _0x32817b in _0x1dad2d){_0x3c2c96[_0x32817b]&&(_0x24fef[_0x32817b]=_0x3c2c96[_0x32817b]);}console[_0x399d13(-0x16,0x2,-0xa6,0x5a)](_0x399d13(0x55,-0x6c,0x26,0xca)+'PromptModi'+_0x480840(-0x1e,-0x4f,-0x6d,0x77)+'设\x20\x22'+_0x592a8a+'\x22');}else _0x532982[_0x480840(0x14,0xa0,0xdc,-0x32)](_0x10bf17);}else{if(_0x2d0e6d['eJtQI'](_0x2d0e6d[_0x399d13(0xfb,0x32,0x12d,0x16d)],'IXhdS'))return null;else{const _0xe2dd02=_0x399d13(-0x29,0x5b,-0xf0,-0x64)+_0x592a8a+_0x480840(-0x39,0x79,-0x72,-0x46),_0x30e522=await _0x2d0e6d[_0x480840(-0x36,-0x109,-0x3b,-0x69)](stylishConfirm,_0xe2dd02);if(!_0x30e522){if(_0x2d0e6d[_0x399d13(0x2d,0x60,0x6a,0x67)](_0x2d0e6d[_0x399d13(0xdb,0x11f,0xd7,0xe8)],_0x2d0e6d[_0x399d13(0x101,0x15f,0x84,0x118)])){const _0x2da0a9={};for(const _0x18dc7f in _0x1204fb){_0x2da0a9[_0x18dc7f]=_0x14b847(_0x4c805c[_0x18dc7f],_0x38e7c1,_0xaa3180,_0x27b7b2);}return _0x2da0a9;}else continue;}!_0x2e4127[_0x480840(0x94,0x126,0x85,0x10)+'ets']&&(_0x2e4127[_0x399d13(0xf9,0x178,0x17f,0x109)+_0x480840(0x98,0x2c,0x154,0x1d)]={});const _0x5bce7d={};_0x5bce7d['nameCN']=_0x3c2c96[_0x399d13(0xa7,-0xe,0x1d,0x150)],_0x5bce7d['nameEN']=_0x3c2c96['nameEN']||'',_0x5bce7d['owner']=_0x3c2c96[_0x480840(0xe1,0x30,0x1ba,0x74)]||'',_0x5bce7d[_0x399d13(0xd6,0x132,0x105,0x18e)]=_0x3c2c96['upperBody']||'',_0x5bce7d[_0x480840(0xc2,0x194,0x10f,0xc3)+_0x480840(-0x6e,0x13,-0x4e,-0x78)]=_0x3c2c96[_0x399d13(0x127,0x109,0x13b,0xf5)+_0x480840(-0x6e,-0x3f,-0xff,-0x117)]||'',_0x5bce7d[_0x399d13(0xad,0x126,0x12f,0x11a)]=_0x3c2c96[_0x399d13(0xad,0x6f,0x11a,0x188)]||'',_0x5bce7d[_0x399d13(0x97,0x41,0x113,0x121)+'ck']=_0x3c2c96[_0x399d13(0x97,0xcc,0x132,-0x27)+'ck']||'',_0x2e4127[_0x480840(0x94,0xdc,0xc5,-0x12)+_0x399d13(0xfd,0xdf,0x14d,0x102)][_0x592a8a]=_0x5bce7d,console[_0x399d13(-0x16,-0xdc,-0xb1,-0xac)]('[character'+_0x399d13(0x53,0xc8,0xc0,0xb8)+_0x399d13(0x4e,-0x98,0xa8,-0x50)+_0x399d13(-0x1f,0x39,0x7d,-0xe3)+_0x592a8a+'\x22');if(_0x3c2c96['owner']&&_0x3c2c96[_0x399d13(0x146,0xcb,0x1b4,0xdf)]['trim']()){if(_0x2d0e6d['LlSyc'](_0x2d0e6d[_0x480840(-0xca,-0xe9,-0xe9,-0x163)],_0x2d0e6d[_0x480840(0x7f,-0x31,0x142,0x9)])){const _0x3074dd=_0x3c2c96['owner'][_0x399d13(0xa9,0x77,0x11b,0x5f)]()[_0x399d13(-0x40,-0x29,-0x90,-0xac)+'e']()[_0x399d13(0x48,0x121,0xf6,0xd)](/\s+/g,'');for(const [_0x210ac8,_0x52703e]of Object[_0x480840(0x9f,0xf,0xe3,0x17d)](_0x2e4127['characterP'+_0x399d13(0x51,0x52,-0x41,-0x26)]||{})){if(_0x52703e[_0x480840(-0x61,-0x10f,-0xf8,-0x63)]&&_0x2d0e6d[_0x399d13(0xb2,0x183,0x79,0x139)](_0x52703e[_0x399d13(0x4,-0x1,0xb4,0xa3)][_0x399d13(-0x40,-0xae,-0xa2,0xa3)+'e']()[_0x399d13(0x48,-0x34,0xf,0xf6)](/\s+/g,''),_0x3074dd)){!_0x52703e[_0x399d13(0xd5,0x187,-0xc,0x178)]&&(_0x52703e['outfits']=[]);if(!_0x52703e[_0x480840(0x70,0x84,0xf4,0xc1)][_0x399d13(0x13d,0x15b,0x20c,0x17d)](_0x592a8a)){if(_0x2d0e6d[_0x399d13(-0x15,0x99,0x26,0xa1)](_0x2d0e6d[_0x480840(0x10,0x4b,-0xcb,-0x17)],_0x2d0e6d[_0x399d13(0x113,0x13f,0x84,0x11f)]))_0x52703e[_0x480840(0x70,-0x22,-0xe,0x13c)][_0x399d13(0x90,0xca,0x14d,0x103)](_0x592a8a),console[_0x399d13(-0x16,-0x4d,-0xd8,-0xba)](_0x399d13(0x55,0xb5,0x40,-0x42)+_0x399d13(0x53,-0x2c,0x5d,0x8d)+'fy]\x20服装\x20\x22'+_0x592a8a+_0x480840(0xc0,0x78,-0x22,-0x13)+_0x210ac8+'\x22');else{_0x92dbe3['warning']('未在\x20LLM\x20输出中'+_0x480840(-0x2a,-0xd7,-0xc1,-0x1d)),_0x1af5b4['log'](_0x2d0e6d[_0x480840(-0x53,0x71,-0x9b,0x6e)]),_0x493404[_0x480840(-0x7b,-0x114,-0x13f,-0xd8)](_0x2d0e6d[_0x399d13(0xe,0xba,0xde,-0x4d)],_0x3d3626);return;}}break;}}}else _0xc14ec5[_0x399d13(-0x4d,0x53,-0x7b,-0x9b)+_0x399d13(-0x4c,0x61,-0x8e,0x6f)](_0x407d9d[_0x399d13(0xbb,0xc8,-0x4,0x60)+_0x399d13(0x6c,0x2f,-0x33,-0x1d)+'PROMPT_RES'+_0x399d13(0xc9,0x150,0x16c,0x6f)],_0x48cc73),_0x2d0e6d[_0x399d13(-0x19,-0x4f,-0x28,-0x57)](_0x371dc6,new _0x28de89(_0x2d0e6d[_0x399d13(-0x14,-0x4b,0x9d,-0x5b)]));}}}}_0x2d0e6d[_0x480840(-0x86,-0x160,-0x56,-0x105)](saveSettingsDebounced);const _0x36be9f=$(_0x2d0e6d[_0x480840(0xb7,0xf8,0x116,0x115)]);_0x36be9f[_0x399d13(0xe3,0xf4,0x4e,0xee)]&&refreshCharacterSettings(_0x36be9f);}function updateFormFields(_0x113f4b){const _0x5dbfd6={'NGEti':_0x1ec43b(-0xd3,-0x137,-0xcf,-0x15c),'POXEY':_0x1ec43b(-0x1ba,-0x2f0,-0x1ca,-0x264),'laOfk':function(_0x59dc15,_0x5d058a){return _0x59dc15(_0x5d058a);},'PEgrB':_0x543e37(-0xdd,-0xa0,0xf,-0x1),'liSMP':_0x1ec43b(-0x233,-0x17e,-0x223,-0x1f8),'CVQxI':_0x1ec43b(-0x172,-0x115,-0x121,-0xb2)+'raits','HQSCJ':_0x543e37(0x88,0x8,0x9a,-0x65)+_0x543e37(0x79,-0x52,-0x70,-0x29),'HbQJv':'facialFeat'+_0x543e37(-0x6,0x2,-0x16,0x61),'QdnKR':_0x1ec43b(-0x223,-0x285,-0x1ed,-0x1e8)+_0x543e37(-0xa9,0x4,0xc4,0xd5),'uxrid':_0x1ec43b(-0x12,-0x12,-0x25,-0xc4)+'W','Huabx':'fullBodySF'+_0x543e37(-0x16d,-0x1a0,-0x279,-0x265),'fzdPj':_0x543e37(-0x9a,-0xee,-0x13d,-0x18)+'FW','EgMVe':'fullBodyNS'+_0x1ec43b(0x2,-0x35,-0x86,-0xb1)};function _0x1ec43b(_0x33a3e6,_0x941130,_0x489d58,_0xb6e23e){return _0x5977a2(_0xb6e23e- -0x3e3,_0x941130-0x15d,_0x489d58-0xfb,_0x941130);}const _0x39ea09=[_0x5dbfd6[_0x1ec43b(-0x282,-0x1ac,-0x1bd,-0x22a)],_0x5dbfd6[_0x543e37(-0x18,-0x49,0x4a,0x5c)],_0x5dbfd6[_0x543e37(-0x9,-0xb4,-0x117,-0x12d)],_0x5dbfd6[_0x1ec43b(-0x15c,-0x2de,-0x2bd,-0x239)],_0x5dbfd6[_0x543e37(-0x26c,-0x1a3,-0x1dd,-0x24b)],'upperBodyS'+'FW',_0x5dbfd6[_0x543e37(-0x1bb,-0xfc,-0x1de,-0x146)],_0x5dbfd6[_0x543e37(0x5c,-0x21,-0x50,-0x78)],_0x5dbfd6[_0x1ec43b(-0x154,-0x3e,-0x8e,-0x105)],_0x543e37(-0x90,-0xc,0x14,0x9b)+_0x543e37(-0x10f,-0x1b0,-0x19b,-0xed),_0x543e37(0x20,-0xc,-0xd5,0xa5)+_0x1ec43b(-0x1c1,-0x31a,-0x294,-0x253),_0x5dbfd6[_0x1ec43b(-0x15c,-0x9a,-0x1fe,-0x136)],_0x5dbfd6['EgMVe']];function _0x543e37(_0x4126b2,_0x88b97c,_0x468f43,_0x478f98){return _0x5977a2(_0x88b97c- -0x32e,_0x88b97c-0xdc,_0x468f43-0x3d,_0x468f43);}_0x39ea09[_0x1ec43b(-0x19,-0x152,-0x17b,-0xf4)](_0x2ecf6d=>{function _0x38d027(_0x27f601,_0x2d1d5f,_0x1313e7,_0x1912a9){return _0x1ec43b(_0x27f601-0x8e,_0x1912a9,_0x1313e7-0x95,_0x1313e7-0x611);}function _0x3f19d5(_0x926fe0,_0x453f13,_0x4de3b6,_0x90131a){return _0x543e37(_0x926fe0-0x109,_0x90131a-0x1f2,_0x453f13,_0x90131a-0x1e5);}if(_0x113f4b[_0x2ecf6d]){const _0x2c7679=document[_0x38d027(0x4a6,0x61d,0x56d,0x632)+_0x38d027(0x626,0x5af,0x55c,0x564)](_0x3f19d5(0xe4,-0x3c,0x9b,0x62)+_0x2ecf6d);_0x2c7679&&(_0x5dbfd6[_0x3f19d5(0x1e6,0x1c7,0x255,0x1d4)]===_0x5dbfd6['POXEY']?_0x25381a[_0x38d027(0x57e,0x433,0x4a5,0x4ad)](_0x44659b):(_0x2c7679[_0x38d027(0x3bc,0x366,0x3cf,0x430)]=_0x113f4b[_0x2ecf6d],_0x5dbfd6[_0x3f19d5(0x133,0x68,0x11d,0xa3)]($,_0x2c7679)[_0x3f19d5(0x243,0x21d,0x214,0x163)](_0x38d027(0x4ad,0x49f,0x4ae,0x566))));}});}