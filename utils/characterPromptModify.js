(function(_0x486120,_0x1ed853){function _0x4dfe4e(_0x3f2c97,_0x1023a0,_0x498bb5,_0x23a0b1){return _0xb15c(_0x1023a0-0x34b,_0x23a0b1);}function _0x4e6611(_0x477b5d,_0x22ab3b,_0x4bcd6a,_0x177513){return _0xb15c(_0x477b5d- -0x2ed,_0x22ab3b);}const _0x4d66bf=_0x486120();while(!![]){try{const _0x4753b2=parseInt(_0x4dfe4e(0x5cc,0x54a,0x5d6,0x529))/(-0x107c+-0x57f+-0x2a*-0x86)+-parseInt(_0x4dfe4e(0x54e,0x585,0x624,0x617))/(0x1*0x37e+0xfd2*0x1+-0x134e)+-parseInt(_0x4e6611(-0x8f,-0x4e,-0xc0,-0x113))/(0x985+0x776*0x5+-0x2ed0)+-parseInt(_0x4e6611(0x2c,0x19,0x14,-0xac))/(-0x9b7*0x3+-0x1105+-0x2e2e*-0x1)*(-parseInt(_0x4e6611(-0x20,0x64,0x41,-0x35))/(0x1c62+-0x138b+-0x8d2))+-parseInt(_0x4e6611(-0x6a,-0xd7,-0x91,-0x5e))/(0x4*0xea+-0xc5f+0x8bd)+parseInt(_0x4dfe4e(0x50f,0x51c,0x585,0x45c))/(-0xd*-0x59+0x1679+-0x27*0xb1)*(parseInt(_0x4dfe4e(0x5e4,0x621,0x57a,0x544))/(-0x5*-0x797+-0x1f3*0x11+-0x4c8))+parseInt(_0x4e6611(0x6,0x3c,-0x60,0x7))/(0x18df*0x1+-0x1*-0xe25+0x26fb*-0x1)*(-parseInt(_0x4e6611(-0x67,-0x119,-0xad,-0xd))/(-0x248e+-0x76*-0x1+0x2422));if(_0x4753b2===_0x1ed853)break;else _0x4d66bf['push'](_0x4d66bf['shift']());}catch(_0x316355){_0x4d66bf['push'](_0x4d66bf['shift']());}}}(_0x4b6b,0x16f7*0x4e+-0x10bb*0x15+-0x3e92));const _0x4502d5=(function(){const _0x443013={};_0x443013['lYFcv']=function(_0x5150df,_0x392536){return _0x5150df===_0x392536;},_0x443013[_0x2cf263(0x36,-0x72,-0xb8,0x5)]='VsTmJ';function _0x2cf263(_0x46fd2d,_0xf9fef9,_0x3f9902,_0x5bc737){return _0xb15c(_0x5bc737- -0x2f7,_0x46fd2d);}const _0x351087=_0x443013;let _0x40de30=!![];return function(_0x5082f6,_0x3f9e85){const _0x25fd5a={'MuEQV':function(_0x5db12b,_0x2a57d7){function _0x360606(_0x55d223,_0x2f5524,_0x35b21a,_0x427e76){return _0xb15c(_0x55d223-0x2f8,_0x35b21a);}return _0x351087[_0x360606(0x5b3,0x545,0x5fb,0x667)](_0x5db12b,_0x2a57d7);},'cEOcX':_0x5ba37d(0x36b,0x342,0x3b1,0x2c1),'YcYGe':_0x351087[_0x5ba37d(0x48b,0x473,0x45a,0x3c4)]},_0x4254b5=_0x40de30?function(){function _0x5f1ba6(_0x45d60c,_0x1dbd17,_0x5362af,_0x4abfb1){return _0x439819(_0x45d60c-0xca,_0x45d60c,_0x1dbd17-0x26e,_0x4abfb1-0x16d);}function _0x5dfc93(_0x3748b5,_0x27c2f0,_0x9f115a,_0x4cf8f4){return _0x439819(_0x3748b5-0x147,_0x3748b5,_0x4cf8f4-0x2e9,_0x4cf8f4-0x17f);}if(_0x25fd5a[_0x5f1ba6(0x38b,0x336,0x30a,0x2c8)](_0x25fd5a['cEOcX'],_0x25fd5a[_0x5f1ba6(0x201,0x2be,0x2cc,0x2d7)]))_0x54fa1a=_0x5dfc93(0x349,0x39a,0x400,0x3e1)+_0x5dfc93(0x309,0x331,0x2f3,0x371)+'4,'+_0x35d35f;else{if(_0x3f9e85){const _0x316c51=_0x3f9e85[_0x5dfc93(0x452,0x2f4,0x471,0x3a3)](_0x5082f6,arguments);return _0x3f9e85=null,_0x316c51;}}}:function(){};function _0x5ba37d(_0x2251f4,_0x31c8b7,_0x1d9043,_0xe27995){return _0x2cf263(_0x1d9043,_0x31c8b7-0xd3,_0x1d9043-0x1b2,_0x2251f4-0x486);}_0x40de30=![];function _0x439819(_0x533007,_0x266721,_0x1fd6c8,_0x378dd4){return _0x2cf263(_0x266721,_0x266721-0x1c8,_0x1fd6c8-0x69,_0x1fd6c8-0xe2);}return _0x4254b5;};}()),_0x1a163b=_0x4502d5(this,function(){const _0x40556c={};function _0x570a82(_0x17bd69,_0xfd0030,_0x55347e,_0x216553){return _0xb15c(_0x216553-0x279,_0x17bd69);}_0x40556c[_0x246cc0(0x1dc,0x135,0x128,0x203)]=_0x246cc0(0x154,0x12d,0xf7,0x1ca)+'+$';function _0x246cc0(_0x28337a,_0x4d1bc7,_0x3bdef2,_0x122594){return _0xb15c(_0x4d1bc7- -0xce,_0x122594);}const _0x27a56c=_0x40556c;return _0x1a163b[_0x246cc0(0x1f7,0x284,0x1bf,0x22c)]()[_0x246cc0(0x199,0x115,0x173,0x17e)](_0x27a56c['Syzvk'])[_0x246cc0(0x285,0x284,0x223,0x209)]()['constructo'+'r'](_0x1a163b)[_0x246cc0(0x4c,0x115,0xb5,0x16a)](_0x246cc0(0x121,0x12d,0x6a,0x1c7)+'+$');});_0x1a163b();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function _0xb15c(_0x2957bb,_0x432e7d){_0x2957bb=_0x2957bb-(-0x661+0xfd3+0x3f*-0x1f);const _0x46e250=_0x4b6b();let _0x39bc71=_0x46e250[_0x2957bb];if(_0xb15c['uZBEiY']===undefined){var _0x57f1d6=function(_0x52e72c){const _0xe5b954='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3875b3='',_0x425ba2='',_0x5971d9=_0x3875b3+_0x57f1d6;for(let _0x1bbfe0=0x3*-0x9ff+0x1d*0xc1+0x104*0x8,_0xbd09e6,_0x37f357,_0x230990=0x1*0x2009+0x1*-0x1dc1+-0x248;_0x37f357=_0x52e72c['charAt'](_0x230990++);~_0x37f357&&(_0xbd09e6=_0x1bbfe0%(-0x9b*0x29+0x1a+-0x1*-0x18bd)?_0xbd09e6*(0x1462+-0x2*0x52c+0x166*-0x7)+_0x37f357:_0x37f357,_0x1bbfe0++%(0x10f+-0x21*0xb5+-0x3b7*-0x6))?_0x3875b3+=_0x5971d9['charCodeAt'](_0x230990+(0x1*-0x1f3+0x5*-0x59c+0x1e09))-(-0x38f*-0x5+-0x2f1*-0x7+-0x2658)!==-0x60+-0x1*0x1669+0x16c9?String['fromCharCode'](0x1*0xd7f+-0xe56+0x5e*0x5&_0xbd09e6>>(-(0x1720+-0x9*0xd6+-0xf98)*_0x1bbfe0&-0x3*0x137+-0xb5d+0xf08)):_0x1bbfe0:-0x557+-0x1*-0x2122+0x58f*-0x5){_0x37f357=_0xe5b954['indexOf'](_0x37f357);}for(let _0x4292a5=-0xaed+-0x1*-0x1825+-0xd38,_0x5392cb=_0x3875b3['length'];_0x4292a5<_0x5392cb;_0x4292a5++){_0x425ba2+='%'+('00'+_0x3875b3['charCodeAt'](_0x4292a5)['toString'](0x13df*0x1+-0x242+-0x118d))['slice'](-(0xc84+0xaab*-0x3+0x17*0xd9));}return decodeURIComponent(_0x425ba2);};_0xb15c['waFRow']=_0x57f1d6,_0xb15c['EUelgV']={},_0xb15c['uZBEiY']=!![];}const _0x4e62b2=_0x46e250[-0x8*0x60+0xa*0x15f+-0xab6],_0x308227=_0x2957bb+_0x4e62b2,_0x1727fe=_0xb15c['EUelgV'][_0x308227];if(!_0x1727fe){const _0x5a1b43=function(_0x9a04fb){this['KlhRcd']=_0x9a04fb,this['Ssdydz']=[0x13a0+0x1753+0x17*-0x1de,0x1b37*0x1+0x1e76+-0x39ad*0x1,-0xe83+0x2*0x65d+0x1c9*0x1],this['dGwsJF']=function(){return'newState';},this['SrbhXr']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['baUGSi']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5a1b43['prototype']['JoprZr']=function(){const _0x5edade=new RegExp(this['SrbhXr']+this['baUGSi']),_0x143088=_0x5edade['test'](this['dGwsJF']['toString']())?--this['Ssdydz'][-0x1d69+-0x12bc+0x2*0x1813]:--this['Ssdydz'][-0x78e*0x1+0xb7b*-0x1+-0x1309*-0x1];return this['HhqbXs'](_0x143088);},_0x5a1b43['prototype']['HhqbXs']=function(_0x2b98c9){if(!Boolean(~_0x2b98c9))return _0x2b98c9;return this['OZLwgT'](this['KlhRcd']);},_0x5a1b43['prototype']['OZLwgT']=function(_0x546a21){for(let _0x400eaa=0x22a7+-0x5*0x104+-0x1d93,_0x3462ab=this['Ssdydz']['length'];_0x400eaa<_0x3462ab;_0x400eaa++){this['Ssdydz']['push'](Math['round'](Math['random']())),_0x3462ab=this['Ssdydz']['length'];}return _0x546a21(this['Ssdydz'][-0x6*0x223+0x7*-0x4ef+0x2f5b]);},new _0x5a1b43(_0xb15c)['JoprZr'](),_0x39bc71=_0xb15c['waFRow'](_0x39bc71),_0xb15c['EUelgV'][_0x308227]=_0x39bc71;}else _0x39bc71=_0x1727fe;return _0x39bc71;}import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x293f4c}from'./promptProcessor.js';function replacePlaceholder(_0x136039,_0xc070c2,_0x5080e1,_0x5e4720){const _0x552acc={'QrNUn':_0x4aa640(0x496,0x49c,0x515,0x47c)+_0x16428a(-0x200,-0x1b2,-0xad,-0x165),'RGRWc':_0x16428a(-0x196,-0x158,-0x19c,-0x1a0)+_0x16428a(-0xf,-0x55,-0xe,-0x4b)+_0x4aa640(0x532,0x466,0x448,0x409)+'M\x20output\x20f'+_0x4aa640(0x5e8,0x598,0x4f5,0x57b)+'ng:','qJijX':_0x4aa640(0x44d,0x4b6,0x574,0x444),'OrIzP':function(_0x5e7a73,_0x3ae44c){return _0x5e7a73===_0x3ae44c;},'zmozt':_0x16428a(-0xc7,-0x106,0x3b,-0x9b),'NsZOu':'RxjZx','AXWfm':_0x4aa640(0x51e,0x484,0x3ce,0x548),'ZdCGP':_0x4aa640(0x526,0x514,0x5b0,0x5c3),'Cpkvl':_0x16428a(-0x1cf,-0x7b,-0x15e,-0x142),'MHHTZ':function(_0x249c35,_0x3f1d57){return _0x249c35!==_0x3f1d57;},'jjavq':_0x16428a(0x7c,-0xd6,0x54,-0x58),'aAehX':'LMCiS','IstNa':function(_0x56e623,_0x18323a,_0x58c4b6,_0x123d8c,_0x20246c){return _0x56e623(_0x18323a,_0x58c4b6,_0x123d8c,_0x20246c);}};if(_0x552acc[_0x16428a(-0x1c0,-0x149,-0x2b4,-0x1eb)](typeof _0x136039,_0x4aa640(0x544,0x5af,0x67a,0x667))){if(_0x552acc[_0x16428a(-0x7c,0x13,-0x68,-0x37)]!==_0x552acc[_0x4aa640(0x6cc,0x5ff,0x6ce,0x602)])_0x4973cb[_0x16428a(-0x128,-0x1ca,-0x1b9,-0x13c)](_0x15229b);else return _0x5080e1&&_0x136039[_0x4aa640(0x4f2,0x593,0x655,0x614)](_0xc070c2)&&(_0x552acc[_0x16428a(-0x141,-0x22f,-0x275,-0x1eb)](_0x552acc[_0x4aa640(0x560,0x517,0x5b8,0x462)],_0x4aa640(0x575,0x5e9,0x640,0x69c))?_0x370645++:_0x5e4720&&_0x5e4720[_0x4aa640(0x58b,0x4e1,0x5a7,0x47e)](_0xc070c2)),_0x136039['replaceAll'](_0xc070c2,_0x5080e1);}function _0x4aa640(_0x17c80d,_0x453a77,_0x533ca7,_0x7a4a7e){return _0xb15c(_0x453a77-0x279,_0x17c80d);}if(Array[_0x4aa640(0x45a,0x4d2,0x4af,0x405)](_0x136039)){if(_0x552acc[_0x4aa640(0x419,0x463,0x392,0x537)]===_0x552acc['ZdCGP']){_0x42bd44[_0x16428a(-0x12f,-0xf,0x30,-0x5b)](_0x552acc[_0x4aa640(0x4b1,0x50f,0x4ac,0x466)]),_0x382b6a[_0x4aa640(0x527,0x59e,0x4ca,0x4eb)](_0x16428a(-0x268,-0x200,-0x1ed,-0x1a0)+'PromptModi'+'fy]\x20No\x20cha'+_0x4aa640(0x524,0x44f,0x496,0x4c2)+_0x4aa640(0x471,0x4cf,0x43a,0x55a)+_0x16428a(-0x192,-0x1af,-0x74,-0x132)+_0x4aa640(0x592,0x552,0x567,0x588)),_0x3dcd68['log'](_0x552acc['RGRWc'],_0x5624dc);return;}else return _0x136039[_0x4aa640(0x39c,0x46f,0x4ec,0x400)](_0x43b0ee=>replacePlaceholder(_0x43b0ee,_0xc070c2,_0x5080e1,_0x5e4720));}if(_0x136039&&_0x552acc[_0x4aa640(0x3eb,0x44b,0x38f,0x47a)](typeof _0x136039,_0x552acc[_0x16428a(-0x1a6,-0xf2,-0x1a5,-0x171)])){const _0x4c2cd8={};for(const _0x42ce06 in _0x136039){if(_0x552acc[_0x16428a(-0x250,-0x115,-0x17b,-0x1d9)](_0x552acc[_0x4aa640(0x51e,0x537,0x59c,0x5bf)],_0x552acc['aAehX']))_0x4c2cd8[_0x42ce06]=_0x552acc[_0x16428a(0x3d,0x77,-0x11f,-0x4f)](replacePlaceholder,_0x136039[_0x42ce06],_0xc070c2,_0x5080e1,_0x5e4720);else{_0x5ee591[_0x4aa640(0x556,0x58b,0x4ea,0x4d0)](_0x552acc['qJijX']);return;}}return _0x4c2cd8;}function _0x16428a(_0x5cd517,_0x4abf60,_0x53a359,_0x22ff16){return _0xb15c(_0x22ff16- -0x3bd,_0x4abf60);}return _0x136039;}function _0x28ca41(_0x33bf54,_0x51fffc,_0xc384b7,_0x3a9d6f){return _0xb15c(_0x3a9d6f-0x8a,_0x51fffc);}function attachImagesToMessage(_0x555392,_0x3deae9,_0x48f899,_0x4e587e=_0x28ca41(0x273,0x2c6,0x333,0x309)){const _0x378762={'yWELn':function(_0x31f396,_0x39ddcd){return _0x31f396(_0x39ddcd);},'DiSQW':'角色修改\x20LLM\x20请'+_0x4de734(0x4f9,0x588,0x46b,0x4a7),'qaCYl':_0x5e5e15(0x586,0x5b5,0x4e2,0x5c2)+'时','hfLyH':function(_0x383c60,_0x2d4183){return _0x383c60!==_0x2d4183;},'ULNJO':function(_0x1ec003,_0x41dc4b,_0x111b5f){return _0x1ec003(_0x41dc4b,_0x111b5f);},'Hheso':function(_0x30c0d9,_0x16a8bb){return _0x30c0d9!==_0x16a8bb;},'LhGvy':_0x5e5e15(0x6b0,0x615,0x56b,0x6a2),'xmBGu':_0x5e5e15(0x7ac,0x72e,0x6d9,0x704),'MpjkC':function(_0xa51b9,_0x2fd809){return _0xa51b9===_0x2fd809;},'suDRP':_0x4de734(0x521,0x499,0x51c,0x505),'BNXGx':_0x4de734(0x62f,0x5a5,0x656,0x5e2),'txMOa':'auto','PVUoa':function(_0x4685b5,_0x3464a7){return _0x4685b5<_0x3464a7;},'YIbQl':function(_0xce08a2,_0x42e7cb){return _0xce08a2>=_0x42e7cb;},'XIJXo':function(_0x2d93ad,_0x51e2a2){return _0x2d93ad===_0x51e2a2;},'SBFIj':'string','EtriO':_0x4de734(0x4ca,0x4b6,0x57b,0x509),'ZiDxV':_0x5e5e15(0x672,0x66d,0x602,0x60f),'BVXhP':_0x5e5e15(0x673,0x663,0x6fb,0x61c)};if(!_0x48f899||_0x378762[_0x4de734(0x5dd,0x574,0x50a,0x543)](_0x48f899[_0x5e5e15(0x686,0x713,0x6d1,0x644)],0x1*-0x25d3+0x1*0x4d5+0x107f*0x2)||_0x378762[_0x5e5e15(0x63e,0x658,0x6dc,0x5a6)](_0x3deae9,0xe96+0x1dee+-0x1c*0x197)||_0x378762[_0x4de734(0x602,0x590,0x570,0x5f7)](_0x3deae9,_0x555392[_0x5e5e15(0x75e,0x713,0x7ec,0x74b)]))return _0x555392;const _0x53c87d=[..._0x555392],_0x45d05a=_0x53c87d[_0x3deae9],_0x421976=[];if(_0x378762[_0x4de734(0x4b2,0x571,0x547,0x502)](typeof _0x45d05a[_0x5e5e15(0x5e4,0x5cb,0x686,0x5fe)],_0x378762[_0x4de734(0x59e,0x4dd,0x5fa,0x5cb)])){if(_0x378762[_0x4de734(0x5ed,0x67f,0x66d,0x5fe)]===_0x5e5e15(0x566,0x5dd,0x560,0x591)){const _0x52d431={};_0x52d431['type']=_0x378762[_0x5e5e15(0x50a,0x5ae,0x4f9,0x5e9)],_0x52d431['text']=_0x45d05a[_0x4de734(0x4b8,0x4ff,0x426,0x3e6)],_0x421976['push'](_0x52d431);}else _0x936e63(),_0x378762['yWELn'](_0x2b6e9a,new _0x37e699(_0x378762[_0x4de734(0x4e2,0x48a,0x418,0x47d)]));}else Array[_0x5e5e15(0x593,0x612,0x583,0x5f0)](_0x45d05a[_0x5e5e15(0x64a,0x5cb,0x58a,0x55e)])&&_0x421976['push'](..._0x45d05a[_0x5e5e15(0x541,0x5cb,0x53a,0x65f)]);function _0x5e5e15(_0x324d54,_0x4524a6,_0x325731,_0x3518b4){return _0x28ca41(_0x324d54-0x168,_0x3518b4,_0x325731-0x135,_0x4524a6-0x32f);}if(_0x48f899[_0x5e5e15(0x6d5,0x713,0x7ed,0x7c2)]>-0x179a+0x6d*-0x1f+-0x24cd*-0x1){if(_0x4de734(0x59d,0x605,0x5f9,0x5ae)===_0x378762[_0x4de734(0x4e6,0x50a,0x5b8,0x4f9)])return _0x54c7d9[_0x4de734(0x49c,0x530,0x4b7,0x522)](_0x41f546=>_0x1377e0(_0x41f546,_0x30f2d7,_0x5242e8,_0x4d9642));else{const _0x264aa6={};_0x264aa6[_0x5e5e15(0x650,0x6f8,0x756,0x71a)]=_0x4de734(0x55a,0x538,0x571,0x4b3),_0x264aa6['text']=_0x4de734(0x508,0x511,0x490,0x438)+_0x48f899[_0x4de734(0x600,0x624,0x610,0x62d)]+'张'+_0x4e587e+']',_0x421976[_0x5e5e15(0x58f,0x63a,0x624,0x5e2)](_0x264aa6);}}_0x48f899[_0x4de734(0x533,0x4a5,0x4f5,0x501)]((_0xa95971,_0x44a924)=>{const _0x4bbbf2={'PEFXX':_0x378762[_0x39b092(0x5d9,0x60b,0x543,0x46d)],'OYHXr':function(_0x29b61a,_0x8dc37b){return _0x378762['hfLyH'](_0x29b61a,_0x8dc37b);},'popND':function(_0x69a131,_0x5d9254,_0x3f10e2){function _0x292e14(_0x351892,_0x4a3d76,_0x4a43a7,_0x41fcbe){return _0x39b092(_0x351892-0x151,_0x4a43a7,_0x4a3d76- -0x492,_0x41fcbe-0x2a);}return _0x378762[_0x292e14(0xf2,0xaf,0x185,0x148)](_0x69a131,_0x5d9254,_0x3f10e2);}};function _0x39b092(_0x95a2be,_0x378ac8,_0x4ce249,_0x42d6ac){return _0x5e5e15(_0x95a2be-0xc2,_0x4ce249- -0x148,_0x4ce249-0x144,_0x378ac8);}function _0xbbdb92(_0x2b367f,_0x2be18a,_0x228665,_0x39e68c){return _0x5e5e15(_0x2b367f-0x162,_0x39e68c- -0x323,_0x228665-0x99,_0x2b367f);}if(_0x378762['Hheso'](_0x378762[_0x39b092(0x5aa,0x55c,0x573,0x645)],_0x378762['xmBGu'])){const _0x49df58=_0x378762[_0xbbdb92(0x440,0x3e6,0x3fe,0x3cd)](typeof _0xa95971,_0xbbdb92(0x305,0x445,0x39c,0x3cc))?_0xa95971:_0xa95971[_0x39b092(0x556,0x461,0x51c,0x58a)],_0x5196dc=_0x378762['MpjkC'](typeof _0xa95971,_0x378762[_0x39b092(0x666,0x656,0x5ca,0x64d)])&&_0xa95971['name']?_0xa95971[_0xbbdb92(0x445,0x41d,0x45b,0x3a0)]:''+_0x4e587e+(_0x44a924+(0x39*0x40+0x2107+-0x2f46)),_0x385b37={};_0x385b37[_0x39b092(0x547,0x516,0x5b0,0x5e1)]=_0xbbdb92(0x408,0x2b9,0x33b,0x34a),_0x385b37['text']='['+_0x5196dc+']',_0x421976[_0xbbdb92(0x2ac,0x3e4,0x2d1,0x317)](_0x385b37);let _0x1d9f6e=_0x49df58;!_0x49df58[_0xbbdb92(0x368,0x1fe,0x274,0x29d)](_0x39b092(0x444,0x4a1,0x508,0x555))&&(_0x1d9f6e='data:image'+'/png;base6'+'4,'+_0x49df58);const _0x2bf485={};_0x2bf485[_0x39b092(0x568,0x641,0x5b0,0x54f)]=_0x378762[_0x39b092(0x673,0x6b3,0x5ec,0x666)],_0x2bf485[_0x39b092(0x6b6,0x568,0x5fa,0x5e9)]={},_0x2bf485[_0x39b092(0x6b6,0x568,0x5fa,0x5e9)][_0x39b092(0x51f,0x527,0x594,0x5dc)]=_0x1d9f6e,_0x2bf485[_0x39b092(0x6b6,0x568,0x5fa,0x5e9)][_0xbbdb92(0x2bc,0x281,0x2b2,0x2b4)]=_0x378762['txMOa'],_0x421976[_0x39b092(0x506,0x478,0x4f2,0x474)](_0x2bf485);}else{const _0x1815e5={'JVqfq':function(_0x3e5dd3,_0x14277d){function _0x3178aa(_0x10ec4e,_0x35b922,_0x3cd2ad,_0x559587){return _0x39b092(_0x10ec4e-0x104,_0x3cd2ad,_0x10ec4e- -0x12f,_0x559587-0x2);}return _0x4bbbf2[_0x3178aa(0x430,0x438,0x427,0x397)](_0x3e5dd3,_0x14277d);}},_0x420312=_0x46f2b6();_0x888a6e['log'](_0xbbdb92(0x38b,0x364,0x2a1,0x2b3)+'PromptModi'+_0xbbdb92(0x49a,0x39d,0x31a,0x3da)+_0xbbdb92(0x226,0x2ad,0x1e4,0x298)+_0xbbdb92(0x2bb,0x33b,0x219,0x2ce)+_0xbbdb92(0x2a1,0x321,0x262,0x2d4)+_0x420312+')');const _0x1090a9=_0x4c0163=>{function _0x409b05(_0x464d52,_0x1c49f7,_0xd17d40,_0x9fdca1){return _0xbbdb92(_0x1c49f7,_0x1c49f7-0xc9,_0xd17d40-0xad,_0x9fdca1-0x2a2);}function _0x17e778(_0x27ded3,_0x526d07,_0x27936e,_0x353be6){return _0xbbdb92(_0x27ded3,_0x526d07-0x49,_0x27936e-0x51,_0x27936e- -0x422);}if(_0x1815e5[_0x17e778(-0xb9,-0x81,-0x54,-0x44)](_0x4c0163['id'],_0x420312))return;_0x40951b['removeList'+_0x409b05(0x5d8,0x670,0x589,0x636)](_0x385fa5[_0x17e778(-0x21d,-0x13d,-0x1a0,-0x1b0)+_0x17e778(-0x135,-0x10c,-0x102,-0x12e)+'PROMPT_RES'+_0x409b05(0x750,0x600,0x5d7,0x696)],_0x1090a9),_0x5d10f3(_0x4c0163[_0x17e778(0x2a,0x2c,-0xa5,-0x3b)]);};_0x4c9a3d['on'](_0x1baa02[_0xbbdb92(0x1fb,0x2d6,0x1db,0x282)+_0xbbdb92(0x3e0,0x2a7,0x266,0x320)+_0xbbdb92(0x276,0x397,0x270,0x2c0)+_0xbbdb92(0x3ad,0x444,0x370,0x3f4)],_0x1090a9);const _0x5a73f5={};_0x5a73f5['id']=_0x420312,_0xb76bd7[_0x39b092(0x40d,0x458,0x486,0x441)](_0x3f1841[_0x39b092(0x520,0x40c,0x45d,0x443)+'ODIFY_GET_'+_0xbbdb92(0x211,0x30a,0x2d5,0x2e0)+'UEST'],_0x5a73f5),_0x4bbbf2[_0x39b092(0x5c0,0x60f,0x5fb,0x5b1)](_0xa53cd1,()=>{_0x2ee44d[_0x5cee8c(0x190,0x1a5,0x1f5,0x1ee)+'ener'](_0x114084[_0x37d755(-0x10c,-0xe1,-0xb1,-0x45)+'ODIFY_GET_'+_0x37d755(0x46,0x20,-0x73,-0x1a)+_0x5cee8c(0x184,0x1a2,0x1d6,0x249)],_0x1090a9);function _0x5cee8c(_0x4ea33b,_0xc530,_0x4ec20f,_0x420ca6){return _0xbbdb92(_0x4ea33b,_0xc530-0x89,_0x4ec20f-0x133,_0x4ec20f- -0x21e);}function _0x37d755(_0x1fd5d3,_0x303941,_0x4544d3,_0x4b37cb){return _0x39b092(_0x1fd5d3-0x132,_0x303941,_0x4544d3- -0x50e,_0x4b37cb-0x5e);}_0x34ad63(new _0xe77f33(_0x4bbbf2['PEFXX']));},-0x1fd2+-0x7aa+-0x1c9*-0x2c);}});const _0x12ec07={..._0x45d05a};function _0x4de734(_0x36bd07,_0x450eeb,_0x1a6f10,_0xe4fae){return _0x28ca41(_0x36bd07-0x1d3,_0x1a6f10,_0x1a6f10-0x136,_0x36bd07-0x21c);}return _0x12ec07[_0x4de734(0x4b8,0x515,0x4e2,0x483)]=_0x421976,_0x53c87d[_0x3deae9]=_0x12ec07,_0x53c87d;}function findMessageIndexWithPlaceholder(_0x111e04,_0x4278a8){const _0x129113={};_0x129113[_0x396209(0x26f,0x380,0x2c4,0x2c7)]=function(_0x23af2e,_0x23f1d8){return _0x23af2e<_0x23f1d8;};function _0x2c8342(_0x19bd64,_0x535ba2,_0xb46039,_0x2bf4d8){return _0x28ca41(_0x19bd64-0x13f,_0x535ba2,_0xb46039-0x1c0,_0xb46039-0x229);}function _0x396209(_0x2ec607,_0x32d8b2,_0x1656d4,_0x1b6d0f){return _0x28ca41(_0x2ec607-0x126,_0x2ec607,_0x1656d4-0xee,_0x1b6d0f-0xa);}_0x129113[_0x2c8342(0x4c3,0x45c,0x48e,0x4c9)]=_0x2c8342(0x606,0x654,0x5e9,0x681),_0x129113[_0x396209(0x414,0x343,0x276,0x345)]=function(_0x59a436,_0x18d66a){return _0x59a436===_0x18d66a;},_0x129113['wVTpq']=function(_0x344175,_0x37c2e9){return _0x344175===_0x37c2e9;},_0x129113['cuENV']=_0x396209(0x2f5,0x1dc,0x28a,0x283);const _0x4dd773=_0x129113;for(let _0x1df973=-0x65f*-0x3+0x1f*0x85+-0x2338;_0x4dd773[_0x396209(0x371,0x21e,0x2c2,0x2c7)](_0x1df973,_0x111e04['length']);_0x1df973++){const _0x422885=_0x111e04[_0x1df973];if(typeof _0x422885[_0x396209(0x24d,0x1fc,0x1cb,0x2a6)]===_0x4dd773[_0x396209(0x242,0x21d,0x2eb,0x26f)]&&_0x422885[_0x2c8342(0x476,0x4f5,0x4c5,0x552)][_0x2c8342(0x5a0,0x577,0x5cd,0x63c)](_0x4278a8))return _0x1df973;else{if(Array[_0x2c8342(0x4aa,0x514,0x50c,0x5e7)](_0x422885['content'])){if(_0x4dd773[_0x2c8342(0x5d2,0x55c,0x564,0x578)](_0x2c8342(0x5db,0x63e,0x569,0x635),'SxUiw'))for(const _0x434542 of _0x422885[_0x396209(0x22e,0x2c6,0x2ce,0x2a6)]){if(_0x4dd773['wVTpq'](_0x2c8342(0x40f,0x571,0x4a2,0x3ff),_0x4dd773[_0x2c8342(0x5aa,0x545,0x56c,0x5bb)])){if(_0x4dd773[_0x2c8342(0x53e,0x678,0x5ef,0x5c7)](_0x434542[_0x396209(0x31c,0x49d,0x2f7,0x3d3)],_0x2c8342(0x53d,0x626,0x567,0x548))&&_0x434542['text'][_0x396209(0x3f0,0x314,0x37c,0x3ae)](_0x4278a8))return _0x1df973;}else _0x14b85b[_0x3d46d7[_0x4baaeb]]=_0x590e87;}else{_0xc5ff1[_0x396209(0x320,0x362,0x36a,0x3a6)](_0x2c8342(0x5c5,0x4db,0x59d,0x5a4));return;}}}}return-(0x10f*-0x2+0xafb*-0x2+0x1815);}function generateRequestId(){const _0x531134={};function _0x113139(_0x512863,_0x437307,_0x26da39,_0xb08127){return _0x28ca41(_0x512863-0x9f,_0xb08127,_0x26da39-0x83,_0x26da39-0x1ab);}_0x531134['ATsrZ']=function(_0x4f4a9b,_0x4f871b){return _0x4f4a9b+_0x4f871b;};const _0x38a0a5=_0x531134;function _0x29bd78(_0x4cf5b7,_0x3b799c,_0x12941c,_0x3b675d){return _0x28ca41(_0x4cf5b7-0x4b,_0x3b675d,_0x12941c-0xf3,_0x3b799c-0x10d);}if(crypto&&crypto[_0x29bd78(0x54e,0x4e1,0x4ed,0x561)])return crypto[_0x113139(0x548,0x507,0x57f,0x620)]();return _0x38a0a5[_0x29bd78(0x34d,0x3ee,0x479,0x35a)](Date[_0x113139(0x56f,0x571,0x513,0x5b3)]()[_0x29bd78(0x4ab,0x4e9,0x559,0x46e)](0x1993+0x204b+-0x9*0x66a),Math['random']()[_0x29bd78(0x41f,0x4e9,0x57e,0x514)](0x509*-0x1+0x1e5*0x3+-0x82*0x1)[_0x113139(0x50a,0x47c,0x4bd,0x48d)](-0x9e8+-0x1*-0x2d+0x9bd));}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x5c7666={'mmEhq':function(_0x145e31,_0x4690b2){return _0x145e31!==_0x4690b2;},'LpIvi':function(_0x54b227,_0x1d02bf){return _0x54b227(_0x1d02bf);},'dNLvk':function(_0x324b7f){return _0x324b7f();}};return new Promise((_0x5540d6,_0x341b14)=>{function _0x913f43(_0x34fa8a,_0x267c5e,_0x18a172,_0x5bedab){return _0xb15c(_0x18a172-0x3ad,_0x5bedab);}const _0x4ade55={'pbMGh':function(_0xecb4d3,_0x1ded95){function _0x11dfdc(_0x343a84,_0x5e55b8,_0x1e3bbd,_0x352aa7){return _0xb15c(_0x5e55b8-0x188,_0x352aa7);}return _0x5c7666[_0x11dfdc(0x3c8,0x456,0x41b,0x454)](_0xecb4d3,_0x1ded95);},'IcSmB':'获取角色修改提示词超'+'时'},_0x1aebfd=_0x5c7666[_0x276d32(-0x202,-0x1d2,-0x13b,-0x9e)](generateRequestId);console['log'](_0x913f43(0x52e,0x5de,0x5ca,0x5d6)+'PromptModi'+'fy]\x20Reques'+_0x913f43(0x522,0x52e,0x5af,0x642)+_0x913f43(0x628,0x589,0x5e5,0x6bb)+_0x276d32(-0xb9,-0x169,-0x11c,-0x1ce)+_0x1aebfd+')');const _0x371cbd=_0x3d9929=>{function _0x15912d(_0x145a9d,_0x370413,_0x146c17,_0x2206ad){return _0x276d32(_0x145a9d-0x150,_0x370413,_0x145a9d-0x103,_0x2206ad-0x106);}if(_0x5c7666[_0x4982cf(0x53c,0x52f,0x4ea,0x576)](_0x3d9929['id'],_0x1aebfd))return;function _0x4982cf(_0x388c45,_0x158359,_0x43b57b,_0x15e2cb){return _0x913f43(_0x388c45-0x8b,_0x158359-0x1ce,_0x43b57b- -0x11d,_0x388c45);}eventSource[_0x4982cf(0x6bd,0x57e,0x60d,0x6ce)+'ener'](eventNames[_0x15912d(-0x6b,0x4e,-0x4f,-0x51)+_0x4982cf(0x4a9,0x519,0x51a,0x5d7)+_0x15912d(-0x2d,-0xa5,-0xbd,-0x77)+_0x4982cf(0x52a,0x5b6,0x5ee,0x637)],_0x371cbd),_0x5c7666['LpIvi'](_0x5540d6,_0x3d9929[_0x4982cf(0x4b1,0x600,0x577,0x4b7)]);};function _0x276d32(_0x3adbf2,_0x2eaa4a,_0x23e5c6,_0xfc0f05){return _0xb15c(_0x23e5c6- -0x35a,_0x2eaa4a);}eventSource['on'](eventNames[_0x913f43(0x64a,0x5bf,0x599,0x5d8)+'ODIFY_GET_'+_0x913f43(0x5c4,0x66d,0x5d7,0x54c)+_0x913f43(0x644,0x71f,0x70b,0x719)],_0x371cbd);const _0x5b1f1f={};_0x5b1f1f['id']=_0x1aebfd,eventSource[_0x276d32(-0x7c,-0x1a6,-0x145,-0x168)](eventNames[_0x913f43(0x4d8,0x661,0x599,0x506)+_0x276d32(-0x10,-0x57,-0xd0,-0xd3)+_0x276d32(-0xdd,-0x11e,-0x110,-0xdc)+_0x276d32(0x55,0x8b,-0x44,0x5f)],_0x5b1f1f),setTimeout(()=>{function _0xea1bd1(_0xc94a1f,_0x44f745,_0x5a1371,_0x8e3671){return _0x913f43(_0xc94a1f-0x1a3,_0x44f745-0xae,_0x44f745- -0x2fc,_0xc94a1f);}function _0x452a4c(_0x573433,_0xed733c,_0x70e6c6,_0x5b8f2a){return _0x913f43(_0x573433-0x89,_0xed733c-0x40,_0x70e6c6- -0x4f0,_0x5b8f2a);}eventSource['removeList'+'ener'](eventNames[_0x452a4c(0x143,0xc3,0xa9,0x5b)+_0x452a4c(0x162,0x169,0x147,0x1b7)+'PROMPT_RES'+_0x452a4c(0x295,0x1f8,0x21b,0x2be)],_0x371cbd),_0x4ade55['pbMGh'](_0x341b14,new Error(_0x4ade55[_0xea1bd1(0x38a,0x401,0x341,0x49c)]));},0xaa*0x32+0x2527+-0x1f4b*0x1);});}export function LLM_CHAR_MODIFY(_0x1f3fac,_0x16f39b={}){function _0x1a3c08(_0x5d5114,_0x54459e,_0x17ed38,_0x3e4cc1){return _0x28ca41(_0x5d5114-0x17b,_0x3e4cc1,_0x17ed38-0x181,_0x5d5114-0x5b);}const _0xee7c7d={'NJofn':function(_0x534dd7,_0x5769ae){return _0x534dd7(_0x5769ae);},'fDyXW':_0x1a3c08(0x399,0x46a,0x41e,0x439),'dbkCy':function(_0x27598e,_0x5c64ec){return _0x27598e!==_0x5c64ec;},'zGkaM':function(_0x9d6eb8){return _0x9d6eb8();},'BuQbn':function(_0x1094fa,_0x5686df){return _0x1094fa===_0x5686df;},'OpoFi':_0x482a12(0x62b,0x557,0x496,0x61e),'kLWrz':function(_0xd887be,_0x37b3be){return _0xd887be(_0x37b3be);},'SdcqY':'TnpCQ'};function _0x482a12(_0x4801d9,_0x56a367,_0x1b6edc,_0x1297d9){return _0x28ca41(_0x4801d9-0x14e,_0x1b6edc,_0x1b6edc-0x14b,_0x56a367-0x256);}return new Promise((_0x3d4679,_0x34edef)=>{const _0x1f7374={'pGerT':_0xee7c7d[_0x1758b9(0x25b,0x2d3,0x237,0x2f0)],'xqzzR':function(_0x4b86c0,_0x538836){return _0xee7c7d['dbkCy'](_0x4b86c0,_0x538836);},'hAEQq':function(_0x3c847d){function _0x1a9ae3(_0x421432,_0x3c58b4,_0x56e49a,_0x1c3ff7){return _0x1758b9(_0x421432,_0x56e49a- -0x102,_0x56e49a-0x13a,_0x1c3ff7-0x44);}return _0xee7c7d[_0x1a9ae3(0x14b,0x164,0x125,0xb8)](_0x3c847d);},'PEzEZ':function(_0x2fbbdd,_0x2d8a5f){return _0xee7c7d['BuQbn'](_0x2fbbdd,_0x2d8a5f);},'eXYit':_0xee7c7d[_0x5b8d60(0x1b9,0xff,0x1a2,0x1d4)],'YXbdl':function(_0x32bf2b,_0x504c90){return _0xee7c7d['kLWrz'](_0x32bf2b,_0x504c90);},'ILiPR':_0xee7c7d[_0x1758b9(0x33d,0x384,0x2fe,0x41f)],'zAMCe':_0x5b8d60(0x1e0,0x25d,0x18d,0x295)};function _0x1758b9(_0x7c17c4,_0x30cef6,_0x5831c2,_0x46772a){return _0x1a3c08(_0x30cef6- -0xe3,_0x30cef6-0x136,_0x5831c2-0x160,_0x7c17c4);}const _0x1c69b7=_0xee7c7d[_0x5b8d60(0x7d,0xe8,0x60,0xd3)](generateRequestId),_0x5eeeb3=_0x16f39b[_0x5b8d60(0x15e,0x137,0x22f,0x208)]||-0x52c5+-0xb4e2+0x1f207;let _0x35b9c7=null;console[_0x1758b9(0x29d,0x327,0x2d8,0x2c5)](_0x1758b9(0x16c,0x21f,0x19d,0x2a0)+'PromptModi'+'fy]\x20Execut'+'ing\x20char\x20m'+_0x5b8d60(0x1ce,0x29a,0x1f7,0x126)+_0x5b8d60(0x1a4,0x130,0x108,0x217)+_0x1758b9(0x1dc,0x1e2,0x208,0x11a)+_0x1c69b7+')');const _0x36c595=()=>{function _0x3a3ebe(_0x382986,_0x2b1b9e,_0x20ec96,_0xb7075){return _0x5b8d60(_0x382986-0x88,_0x2b1b9e-0x154,_0xb7075,_0xb7075-0x68);}eventSource[_0x1e930e(0x557,0x61d,0x5b6,0x602)+_0x1e930e(0x537,0x59e,0x4ec,0x638)](eventNames[_0x1e930e(0x3e5,0x48c,0x4c8,0x45d)+_0x3a3ebe(0x226,0x222,0x2cb,0x19d)+_0x1e930e(0x5c2,0x5f3,0x548,0x69f)],_0x3f83b4);function _0x1e930e(_0x477efa,_0x554452,_0x341ce0,_0x42ce9c){return _0x5b8d60(_0x554452-0x448,_0x554452-0xc,_0x42ce9c,_0x42ce9c-0x14a);}_0x35b9c7&&(_0xee7c7d['NJofn'](clearTimeout,_0x35b9c7),_0x35b9c7=null);},_0x3f83b4=_0x4b1759=>{function _0x11941a(_0x234770,_0x56ef8a,_0x2c8cd8,_0x88ef20){return _0x5b8d60(_0x56ef8a- -0x113,_0x56ef8a-0x1c0,_0x2c8cd8,_0x88ef20-0x8d);}function _0x3c1b73(_0x2a927b,_0x14ee44,_0x19e440,_0x2b893a){return _0x5b8d60(_0x2a927b-0x50b,_0x14ee44-0xe7,_0x14ee44,_0x2b893a-0x23);}if(_0x1f7374['xqzzR'](_0x4b1759['id'],_0x1c69b7))return;_0x1f7374[_0x3c1b73(0x680,0x609,0x71e,0x720)](_0x36c595);if(_0x4b1759[_0x3c1b73(0x624,0x5c7,0x69c,0x570)]){if(_0x1f7374[_0x11941a(-0x2e,-0x50,-0x34,-0xda)](_0x1f7374[_0x3c1b73(0x592,0x646,0x569,0x511)],_0x3c1b73(0x5da,0x5e5,0x648,0x596)))_0x1f7374['YXbdl'](_0x3d4679,_0x4b1759[_0x3c1b73(0x57e,0x4cc,0x594,0x532)]);else{const _0x431356={};_0x431356[_0x11941a(0x39,0x84,0xda,0x14)]=_0x1f7374[_0x3c1b73(0x56b,0x586,0x5eb,0x59f)],_0x431356['text']=_0x1718b6[_0x11941a(-0x171,-0xa9,-0x81,-0x78)],_0x26a3e5[_0x11941a(0x7,-0x3a,0x58,0x1d)](_0x431356);}}else{if(_0x1f7374['PEzEZ'](_0x1f7374[_0x3c1b73(0x623,0x6d2,0x557,0x635)],_0x1f7374[_0x11941a(-0x71,0x5,0x31,-0xd1)]))_0x1f7374['YXbdl'](_0x34edef,new Error(_0x4b1759[_0x3c1b73(0x57e,0x4dc,0x4dc,0x539)]||_0x1f7374[_0x3c1b73(0x6a3,0x73d,0x63a,0x77b)]));else{_0x103b72['info']('已取消更新');return;}}};eventSource['on'](eventNames['LLM_CHAR_M'+_0x1758b9(0x30f,0x348,0x38d,0x3bd)+_0x1758b9(0x2f6,0x355,0x384,0x3d9)],_0x3f83b4);const _0x8c0689={};function _0x5b8d60(_0x3aaea6,_0x3e6aa8,_0x139671,_0x42b329){return _0x482a12(_0x3aaea6-0x47,_0x3aaea6- -0x488,_0x139671,_0x42b329-0x144);}_0x8c0689[_0x1758b9(0x348,0x2e9,0x2ae,0x368)]=_0x1f3fac,_0x8c0689['id']=_0x1c69b7,eventSource[_0x5b8d60(0x6d,0x76,-0x5e,0xb7)](eventNames[_0x1758b9(0x159,0x1ee,0x14f,0x168)+'ODIFY_REQU'+_0x5b8d60(0x52,0xed,-0x37,-0x12)],_0x8c0689),_0x35b9c7=setTimeout(()=>{function _0x3d3c36(_0x2ab07d,_0x20a9e1,_0x4afc59,_0x277bf1){return _0x5b8d60(_0x4afc59-0xa6,_0x20a9e1-0x62,_0x2ab07d,_0x277bf1-0x11a);}_0x36c595();function _0x4a7f90(_0xf36c03,_0x12dbaf,_0x4b675b,_0x2c94b6){return _0x5b8d60(_0x2c94b6-0x331,_0x12dbaf-0x19b,_0xf36c03,_0x2c94b6-0x19);}_0x1f7374[_0x4a7f90(0x490,0x453,0x42c,0x3d4)](_0x34edef,new Error(_0x3d3c36(0x133,0xd2,0x14d,0x82)+_0x3d3c36(0x214,0x211,0x151,0xde)));},_0x5eeeb3);});}function preprocessTagContent(_0x4f2bfd){const _0x12ec2c={};function _0x5c37f9(_0x51ba3c,_0x43df75,_0x1c73bf,_0x3f021d){return _0x28ca41(_0x51ba3c-0x1ed,_0x43df75,_0x1c73bf-0x48,_0x3f021d-0x31f);}_0x12ec2c['wCscF']=_0x5c37f9(0x715,0x661,0x6dd,0x6b8),_0x12ec2c[_0x5c37f9(0x52d,0x546,0x64b,0x5cf)]=_0x5c37f9(0x565,0x6ef,0x56d,0x625);const _0x105654=_0x12ec2c;let _0x4f9699=_0x4f2bfd[_0x5c37f9(0x68d,0x5d9,0x67a,0x616)](/:/g,':')[_0x5c37f9(0x55d,0x5d1,0x548,0x616)](/,/g,',');function _0x307c09(_0x208d60,_0x522f2e,_0x147d25,_0x4cace0){return _0x28ca41(_0x208d60-0x131,_0x4cace0,_0x147d25-0x20,_0x522f2e- -0x276);}return _0x4f9699=_0x4f9699[_0x5c37f9(0x5d3,0x5fc,0x6cd,0x616)](/下半身NSWebcam:/g,_0x105654['wCscF']),_0x4f9699=_0x4f9699[_0x5c37f9(0x5ed,0x569,0x689,0x616)](/下半身NSFW_背面:/g,'下半身NSFW背面:'),_0x4f9699=_0x4f9699[_0x5c37f9(0x652,0x656,0x599,0x616)](/上半身NSFW_背面:/g,_0x105654[_0x5c37f9(0x53b,0x6a4,0x54c,0x5cf)]),_0x4f9699;}function parseCharacterData(_0x4ed3c4){const _0x543b02={};_0x543b02[_0x49a8f3(0x71,0xac,0x14d,0x120)]='outfit',_0x543b02['Sqtja']='nameEN';function _0x49a8f3(_0x3840d5,_0x5db791,_0x46503d,_0x1e0379){return _0x28ca41(_0x3840d5-0x1d6,_0x1e0379,_0x46503d-0x189,_0x3840d5- -0x2ad);}_0x543b02[_0x49a8f3(0x132,0x1f7,0xc1,0x177)]=_0x209387(0x333,0x3d5,0x315,0x3de)+'raits',_0x543b02['kmzvq']=_0x49a8f3(0x112,0x1cc,0xd6,0x16d)+_0x209387(0x4a9,0x438,0x448,0x3fb),_0x543b02[_0x49a8f3(0xcc,0xe9,0xd4,0x180)]=_0x49a8f3(0x112,0x64,0xaa,0x3e)+_0x209387(0x2c7,0x2de,0x32c,0x323),_0x543b02[_0x209387(0x4ff,0x56c,0x524,0x4a4)]=_0x49a8f3(0xa6,0xa2,0x42,0xf9)+'FW',_0x543b02[_0x209387(0x399,0x528,0x399,0x458)]=_0x49a8f3(0x76,-0x1d,0x8,0x4)+'W',_0x543b02['wdJcP']=_0x49a8f3(0x76,0x11a,0x119,-0x49)+'WBack',_0x543b02[_0x209387(0x530,0x436,0x56a,0x495)]=_0x209387(0x478,0x4c0,0x45a,0x461)+_0x209387(0x44d,0x2fd,0x34e,0x379),_0x543b02[_0x209387(0x4ff,0x528,0x40b,0x48e)]=_0x209387(0x51a,0x452,0x4ce,0x461)+_0x49a8f3(0xc1,0x100,0x5,0x1d),_0x543b02[_0x49a8f3(-0x3d,0x51,-0x29,0x12)]='fullBodyNS'+'FW',_0x543b02[_0x49a8f3(-0x3b,-0x82,0x4,-0x5f)]=function(_0x57dd17,_0x34d211){return _0x57dd17===_0x34d211;},_0x543b02['wcVZP']=function(_0x167023,_0x481ea2){return _0x167023&&_0x481ea2;},_0x543b02[_0x209387(0x45e,0x428,0x469,0x3b8)]=function(_0x56ff12,_0x37c02c){return _0x56ff12!==_0x37c02c;},_0x543b02[_0x209387(0x450,0x4a3,0x382,0x421)]=_0x49a8f3(0xb2,0x91,0x50,0xf1),_0x543b02[_0x49a8f3(0x12c,0x1c1,0x1c8,0xd8)]='[character'+_0x209387(0x44a,0x414,0x50e,0x4aa)+_0x49a8f3(0xd,0xa5,0x20,-0x1a)+_0x49a8f3(0x5f,0x110,0xe2,0x85);const _0x37b25b=_0x543b02,_0x4428b3=_0x4ed3c4['split']('\x0a')[_0x209387(0x2e0,0x2af,0x3a3,0x32e)](_0x1309e6=>_0x1309e6[_0x209387(0x428,0x372,0x492,0x3e1)]())['filter'](_0x7a73c5=>_0x7a73c5),_0xbeedb8={};_0xbeedb8[_0x209387(0x438,0x471,0x36a,0x3ad)]='',_0xbeedb8['nameEN']='',_0xbeedb8[_0x209387(0x435,0x3fe,0x3ea,0x3de)+'raits']='',_0xbeedb8[_0x49a8f3(0x112,0x1b8,0x192,0x35)+_0x49a8f3(0xa0,0x177,0xa4,0xea)]='';function _0x209387(_0x5ea8b7,_0x2c7016,_0x52327e,_0x2c2f6d){return _0x28ca41(_0x5ea8b7-0x1bf,_0x52327e,_0x52327e-0x86,_0x2c2f6d-0xae);}_0xbeedb8[_0x49a8f3(0x112,0x71,0xbb,0x1af)+_0x209387(0x389,0x375,0x3b4,0x323)]='',_0xbeedb8[_0x209387(0x3db,0x3ef,0x48a,0x401)+'FW']='',_0xbeedb8[_0x49a8f3(0xa6,0xd5,0x99,0xcd)+_0x49a8f3(0x8a,0x161,0x1e,0x5a)]='',_0xbeedb8['fullBodySF'+'W']='',_0xbeedb8['fullBodySF'+'WBack']='',_0xbeedb8[_0x209387(0x3f9,0x53d,0x474,0x461)+_0x49a8f3(0x1e,-0x5,-0x43,0xcc)]='',_0xbeedb8[_0x49a8f3(0x106,0xe0,0x1c6,0x165)+_0x209387(0x38e,0x4be,0x415,0x41c)]='',_0xbeedb8['fullBodyNS'+'FW']='',_0xbeedb8[_0x209387(0x4ab,0x4c0,0x41d,0x45c)+_0x49a8f3(0x8a,-0x4a,-0x4b,0x91)]='';const _0x107fb8=_0xbeedb8,_0x4d1752={};_0x4d1752[_0x209387(0x32e,0x31b,0x38b,0x33e)]=_0x49a8f3(0x52,0xfb,0x71,0xc6),_0x4d1752[_0x209387(0x42f,0x421,0x50e,0x431)]=_0x37b25b[_0x49a8f3(0x14,0x4f,0x92,0x93)],_0x4d1752[_0x49a8f3(-0x10,-0xd,0xc3,-0x47)]=_0x37b25b[_0x49a8f3(0x132,0xd8,0x64,0xf6)],_0x4d1752[_0x209387(0x552,0x4e9,0x519,0x4bd)]=_0x37b25b['kmzvq'],_0x4d1752[_0x49a8f3(0x4c,0x7c,0x78,-0xf)]=_0x37b25b[_0x49a8f3(0xcc,0x113,0x6e,0x47)],_0x4d1752[_0x49a8f3(0xc5,0x67,0xbd,0x67)]=_0x37b25b[_0x209387(0x532,0x44c,0x51d,0x4a4)],_0x4d1752[_0x209387(0x3bb,0x325,0x356,0x32a)]=_0x49a8f3(0xa6,0xc3,0x53,0x115)+'FWBack',_0x4d1752['下半身SFW']=_0x37b25b[_0x209387(0x4e0,0x3be,0x4a5,0x458)],_0x4d1752['下半身SFW背面']=_0x37b25b[_0x49a8f3(0x11a,0x15e,0x172,0x65)],_0x4d1752[_0x49a8f3(0xd2,0x68,0xca,0x2c)]=_0x37b25b['fOHvV'],_0x4d1752[_0x209387(0x35d,0x339,0x39f,0x3c9)]=_0x37b25b[_0x209387(0x498,0x447,0x3c1,0x48e)],_0x4d1752[_0x49a8f3(0x138,0x1b7,0xa6,0xb4)]=_0x37b25b[_0x209387(0x320,0x2c9,0x272,0x31e)],_0x4d1752[_0x49a8f3(0x43,0xd5,-0x62,0xa0)]=_0x209387(0x3bf,0x4d4,0x43c,0x45c)+'FWBack';const _0x2508c6=_0x4d1752;for(const _0x59676f of _0x4428b3){const _0xbdb968=_0x59676f['indexOf'](':');if(_0x37b25b[_0x209387(0x2b8,0x308,0x2cd,0x320)](_0xbdb968,-(0x4*-0x377+0x246*0x7+0xf*-0x23)))continue;const _0x2dcfcb=_0x59676f[_0x49a8f3(0x65,0x18,0x1b,0x12e)](0x545+-0x1668+-0x6b*-0x29,_0xbdb968)[_0x209387(0x3c0,0x348,0x352,0x3e1)](),_0x1a5741=_0x59676f[_0x49a8f3(0x65,0xf0,0xfc,0x20)](_0xbdb968+(0x1a+-0x2674+-0x265b*-0x1))[_0x49a8f3(0x86,0x6d,-0x32,0x149)]();if(_0x2508c6[_0x2dcfcb])_0x107fb8[_0x2508c6[_0x2dcfcb]]=_0x1a5741;else{if(_0x37b25b[_0x209387(0x2bd,0x3fb,0x2b4,0x341)](_0x2dcfcb,_0x1a5741)){if(_0x37b25b[_0x209387(0x456,0x3e5,0x30d,0x3b8)](_0x37b25b[_0x209387(0x4a7,0x47a,0x380,0x421)],_0x37b25b[_0x49a8f3(0xc6,0xce,0x10d,0x92)])){const _0x5e7363={};_0x5e7363[_0x49a8f3(0x11c,0x179,0x41,0x9d)]=_0x37b25b['mpQhe'],_0x5e7363['data']=_0x140d67,_0x5e7363[_0x209387(0x2e2,0x2f9,0x3ad,0x339)]=_0x2814d2,_0x1a85e5[_0x209387(0x33d,0x3f1,0x3c7,0x3b9)](_0x5e7363);}else console['log'](_0x209387(0x2bb,0x37e,0x2a6,0x355)+'PromptModi'+'fy]\x20未识别的人物'+_0x49a8f3(0x147,0x21d,0x180,0x1eb)+_0x2dcfcb+'\x22');}}}if(!_0x107fb8[_0x49a8f3(0x52,-0x2f,0x39,-0x10)])return null;return console['log'](_0x37b25b[_0x49a8f3(0x12c,0x112,0x1bf,0x10f)],_0x107fb8),_0x107fb8;}function parseOutfitData(_0x216817){const _0x4cbfb1={};_0x4cbfb1[_0x3d816f(0x488,0x497,0x56b,0x49c)]=_0x3d816f(0x4da,0x4db,0x4c2,0x42e),_0x4cbfb1[_0x37116e(0x593,0x608,0x4de,0x594)]=_0x37116e(0x56f,0x59b,0x58f,0x503)+_0x37116e(0x705,0x5bb,0x675,0x658)+'fy]\x20Attach'+'ed',_0x4cbfb1[_0x3d816f(0x580,0x5cf,0x5a7,0x4f8)]=_0x3d816f(0x30a,0x401,0x42c,0x3e0)+'message\x20at'+_0x3d816f(0x4d2,0x382,0x3c7,0x457),_0x4cbfb1['WPLrF']=_0x37116e(0x507,0x504,0x5ad,0x4f3),_0x4cbfb1['OQVht']=_0x37116e(0x4c4,0x594,0x576,0x55b),_0x4cbfb1[_0x37116e(0x648,0x581,0x5d0,0x582)]=_0x3d816f(0x3aa,0x45f,0x450,0x475),_0x4cbfb1[_0x3d816f(0x4f9,0x56e,0x49d,0x507)]=_0x37116e(0x68b,0x661,0x64b,0x5c7)+_0x37116e(0x447,0x517,0x425,0x4ea),_0x4cbfb1[_0x37116e(0x6f9,0x6ea,0x670,0x61f)]=_0x3d816f(0x362,0x46a,0x3a1,0x394),_0x4cbfb1[_0x37116e(0x5ca,0x66a,0x61e,0x618)]=_0x37116e(0x6c4,0x5e1,0x5bd,0x65e)+'ck',_0x4cbfb1['sFYVG']=function(_0x304999,_0x20e2ef){return _0x304999===_0x20e2ef;},_0x4cbfb1[_0x3d816f(0x323,0x44e,0x3da,0x3f7)]=function(_0x13dd84,_0x139a50){return _0x13dd84+_0x139a50;},_0x4cbfb1[_0x37116e(0x673,0x605,0x5b0,0x646)]='fylBM',_0x4cbfb1[_0x37116e(0x698,0x610,0x5a1,0x64e)]=function(_0x1b6226,_0x285838){return _0x1b6226&&_0x285838;},_0x4cbfb1[_0x3d816f(0x4c1,0x4e2,0x41e,0x41f)]=_0x37116e(0x506,0x498,0x56b,0x503)+_0x3d816f(0x470,0x5c5,0x535,0x521)+'fy]\x20解析到的服装'+_0x3d816f(0x3f1,0x4c7,0x401,0x431);const _0x16ae96=_0x4cbfb1,_0x24f4bc=_0x216817[_0x37116e(0x5d5,0x47a,0x51f,0x500)]('\x0a')[_0x3d816f(0x442,0x370,0x449,0x3a5)](_0x1beab2=>_0x1beab2['trim']())['filter'](_0x18bd8c=>_0x18bd8c),_0x63bbb2={};_0x63bbb2[_0x37116e(0x5ee,0x4be,0x4a5,0x55b)]='',_0x63bbb2[_0x3d816f(0x414,0x414,0x404,0x3dc)]='',_0x63bbb2[_0x3d816f(0x3fd,0x45e,0x3dd,0x3bc)]='',_0x63bbb2[_0x3d816f(0x501,0x3fe,0x45c,0x475)]='',_0x63bbb2[_0x3d816f(0x4c9,0x4df,0x50b,0x490)+'ack']='',_0x63bbb2[_0x3d816f(0x426,0x3e7,0x3c0,0x394)]='';function _0x3d816f(_0xdaeefb,_0x5e8f66,_0x49c304,_0x2b70d3){return _0x28ca41(_0xdaeefb-0xd,_0x5e8f66,_0x49c304-0x72,_0x2b70d3-0x125);}_0x63bbb2[_0x37116e(0x5c8,0x62e,0x6ec,0x65e)+'ck']='';const _0x373f4b=_0x63bbb2,_0x945566={};_0x945566['归属人']=_0x16ae96['WPLrF'],_0x945566[_0x37116e(0x5a8,0x4b1,0x47c,0x4ec)]=_0x16ae96[_0x37116e(0x69a,0x677,0x58c,0x5c5)],_0x945566[_0x37116e(0x5ad,0x531,0x5fa,0x5df)]=_0x3d816f(0x31d,0x3b3,0x32f,0x3dc),_0x945566[_0x3d816f(0x38a,0x33b,0x488,0x403)]=_0x16ae96[_0x37116e(0x5ee,0x4dc,0x5a4,0x582)];function _0x37116e(_0x50c2ce,_0x3a86bb,_0x2b6478,_0x3a7df7){return _0x28ca41(_0x50c2ce-0x1d3,_0x3a86bb,_0x2b6478-0x1c6,_0x3a7df7-0x25c);}_0x945566[_0x37116e(0x4d9,0x4a3,0x515,0x541)]=_0x16ae96[_0x3d816f(0x4dc,0x44f,0x43d,0x507)],_0x945566[_0x37116e(0x556,0x662,0x546,0x5e7)]=_0x16ae96[_0x3d816f(0x59e,0x4b6,0x49e,0x4e8)],_0x945566[_0x37116e(0x4e6,0x529,0x44b,0x50e)]=_0x16ae96[_0x3d816f(0x517,0x499,0x539,0x4e1)];const _0x9d18fc=_0x945566;for(const _0x440d0b of _0x24f4bc){const _0xdfb819=_0x440d0b[_0x37116e(0x5ca,0x60e,0x508,0x5d2)](':');if(_0x16ae96[_0x3d816f(0x4f0,0x539,0x60b,0x52e)](_0xdfb819,-(-0x23f+-0xaa0+0x19c*0x8)))continue;const _0x317575=_0x440d0b[_0x3d816f(0x366,0x419,0x3b5,0x437)](0xed*0xf+0x369+-0x114c,_0xdfb819)[_0x37116e(0x581,0x5b3,0x4f5,0x58f)](),_0x1c8277=_0x440d0b[_0x37116e(0x4c5,0x61d,0x611,0x56e)](_0x16ae96[_0x3d816f(0x3da,0x3c3,0x448,0x3f7)](_0xdfb819,-0x2ee*0x3+-0x356*-0x7+-0xe8f))[_0x37116e(0x4e7,0x506,0x53b,0x58f)]();if(_0x9d18fc[_0x317575])'fylBM'!==_0x16ae96['oxIMs']?(_0x971e8d=_0x17ac8d(_0x1b7316,_0x504843,_0x15b508,_0x16ae96['vqDPc']),_0x10ac59[_0x3d816f(0x47b,0x3fa,0x491,0x4d4)](_0x16ae96['QukKD'],_0x528cd2['length'],_0x16ae96[_0x37116e(0x63f,0x677,0x5b5,0x62f)],_0x13f05b)):_0x373f4b[_0x9d18fc[_0x317575]]=_0x1c8277;else _0x16ae96[_0x3d816f(0x546,0x486,0x48c,0x517)](_0x317575,_0x1c8277)&&console['log'](_0x3d816f(0x385,0x3ec,0x33a,0x3cc)+'PromptModi'+_0x37116e(0x443,0x561,0x583,0x51c)+_0x3d816f(0x563,0x55c,0x4de,0x519)+_0x317575+'\x22');}if(!_0x373f4b[_0x3d816f(0x4d0,0x4ce,0x4eb,0x424)])return null;return console[_0x3d816f(0x3fb,0x460,0x49b,0x4d4)](_0x16ae96['CfhqK'],_0x373f4b),_0x373f4b;}function _0x4b6b(){const _0x40bfc5=['5Qoa5Rwl5yIW5PYn6kofici','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','u3f0AMe','Bw9KAwz5ihbYBW','t1njELO','nJm0mde4v3fQDhPp','Ag9LC1u','rgLtuvC','teXnioI/LowBNUE7K+AENos4UUEPUG','Bxb0icHjrdOG','AvvTzgS','qLzyAfa','u0zx','wgTlrgm','DxnLCKrLBwfUza','weXbufe','uKHls2u','zwPOvxC','wu1bB0K','B1zQyLa','y29UDgv4DdO','ufjptvbux1jfuq','wvHIzgW','q3bRDMW','Avj5wwG','BgPsD1a','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','EK9mtg8','zNLDifnHDMvKia','zNHjy1O','5Rgc6lAf5PE2','5lIk5y2k6lQR','sLj6Egu','zML0ihrHz3mGzG','qvrZCLO','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','AxnbCNjHEq','Bw1fAhe','5lIk5y2k6lQR6iom6z2I','A0DQuwu','yK1AugK','mta2nJK4tNrPChrr','y2rcyvK','r2DMrMK','t1vNqMq','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','zNLDiev4DhjHyW','BMrLEdO','wwnzr2u','5lIl5y2k6lQRtLngv+IdJoMDOG','s3vRyxK','ywrK','ExLKqLe','pos6UUEjQt4k','uev6rvO','rLvIuhq','CMvWBgfJzq','q29UDgv4Da','5lQu5A6y5Asw6lkm6iom6z2I','q2zOCuS','Aw5KzxG','zxrZ','Bw9KAwz5ihjLCq','5lQu5A6y5Asw6lkmoIa','BMfTzuno','Dhb1DdO','seLTtK4','EuPwAgC','B0X0sha','zhfpC0i','B2jQzwn0','5lIk5y2k6lQRtLngv+IdJoMDOJO','Aujnv0q','zNLDienOyxjHyW','5y+c6icd5zU+54Mh','CLLAuge','ChvZAa','5PwW5O2UoG','mty0mJi2mfDPr1bgyG','AePRrxC','y2HHCMfJDgvYta','mtbAzLzQzMS','u3jhsLa','C3vIC3rYAw5N','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','t0rjrLLFr0vuxW','B3vUzcbPBIbVDq','zNLDieXmtsbVDq','zM9YrwfJAa','zNLDiow3SUABToAwSoINKUIjSUMIHa','sg51zvy','uKj6DwS','5lIk5y2k6lQRtLngv+IdJoMDOG','BwzxyMK','BfzLvwm','BxbrAgu','y2HHCMfJDgvYCW','uxjovw4','zgf0ytO','wuzxEgC','zNvSBejVzhLtrG','6kkR5l2/55sO77YA','Axr1whq','wevxrw0','l3bUzZTIyxnLnG','tNnAt3u','ufzvB2e','DgvKigrHDge6','5lIl5y2k6lQRu0zx6iom6z2IoIa','BMDKDuS','tuH5CNy','ugjSueG','s3vttKK','y2HHCMfJDgvYva','wgLpEwC','igLUzgv4','DhjPBq','vwrLv1i','yMfZzty0','BgvmAxn0vgv4Da','rLDcywnR','uxvRs0q','vunQuey','vejjteK','BLPoqxq','5B2s5BgE5lQ6','qKrguLa','Dgv4Da','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','u3HvAxC','6k6+ici','B250zw50','y3vftLy','5lIk5y2k6lQRtLngvZOG','BfLgy3y','CNP3Evq','s1DeqMi','AMPHDNe','tencyvO','suXPufi','C3vJy2vZCW','C0TdDei','DxjLCW','ugfsENe','B3v0zML0','DxbWzxjcB2r5','zNLDioACJEIJHsaI','C29YDa','DxbWzxjcB2r5uW','zxH0','AeTsC1u','z2v0rwXLBwvUDa','mtvqy2XPzvC','thbjDMK','yxbWBhK','vuXosK8','zKr5wfC','CwfdwwW','Aw5WDxq','zgPvwuC','sef4BKe','ndbpDKXWAMm','t0Teu3y','ChjVBxb0oG','Dhb1Da','zNLDifvZzxiGCG','ueXbwwu','DgvYigXPC3qGDa','txvfuvy','BM93','t1fwAhq','zxHLyW','DxbWzxjcB2r5qG','zNLDifn0yxj0Aq','zxbSCfe','u0zxqMfJAW','AejtrNu','zxjLzcK6','ChjVBxb0','5lIk5y2k6lQRu0zx','qvbIEvu','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','CIb0zxH0oG','Aw5KzxHpzG','DNfeugm','t1Liwhi','vgj5r00','DwfPs1i','A2f0BNC','pc/KURRNIAK+','mtm1oty0oejuzgjLuG','ueTwt3m','5lIk5y2k6lQRtLngvW','zNLDien1CNjLBG','B0rzAvy','u0jgswO','6iUX5PAh5zcn56EW','5lIT5PAh5zcn56EWoIa','zw50CMLLCW','q2fHDhG','s0n1BvC','zw5LCG','DLf1why','y2HHCL9TB2rPzG','5lIl5y2k6lQR','tgHhDNK','DvLXCeO','zgf0yq','zNLDie5VignOyq','DgLTzw91De1Z','yxrZDgu','B3v0zML0CW','5lIk5y2k6lQRu0zxoIa','BMfTzq','Aw5MBW','t1L1re8','zgf0ytPPBwfNzq','EhvbAwq','5lIl5y2k6lQRtLngv+IdJoMDOJO','t2HeEgS','r3nXD3a','zxjYB3i','i3n0lwnOyxr1oa','CuHSrMW','5Qoa5Rwl5yIW5PAW5PYn6kofici','vuvtva','6iUX5PAh5zcn56EWoIa','sMXTuxi','mZm3nZK2uM5vr2PT','Aw5JBhvKzxm','zNrUuui','CMfPDhm','Aeffuxe','DMfYAwfIBgvZ','B3iGzgvIDwDNAq','zM16qM4','y3rLCG','shj1uva','DxjS','zNvSBejVzhLouW','Bg9N','vg51q1u','z2vUzxjHDgLVBG','zNLDief0DgfJAa','DxbWzxjcB2r5tG','DgvYihrYAwDNzq','iIdLT7lLVzlLSz7LIldOP5lOIBiGiG','CMvZzxrjza','B3v0zML0rw5HyG','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','EMvOtKu','5lIk5y2k6lQRu0zx6iom6z2IoIa','Ee9JALm','A0vRtMe','5lIl5y2k6lQRu0zx6iom6z2I','DKfzvwS','zMfJAwfSrMvHDa','C3rYAw5N','txbQA0m','sLzXzNe','u0fstgy','D2DtD1O','sLDxwwq','D1zuChe','D2rky1a','Bwf0y2HLze91Da','DhLWzq','EKfnq2u','v0jHy2S','q0LyyMe','sNDVD1q','zNLDifjLCxvLCW','DhjPz2DLCG','t0rjrLLFuKvtua','rxrYAu8','DwvZDc4UlG','qxLIBeK','CMfUzg9Tvvvjra','CMvZzxrZ','CMvXDwvZDcaOsq','BMCGy2HHCMfJDa','AwjmDwm','ExbrvM4','swntBui','vNjjqxm','Dg9tDhjPBMC','t05trq','vMrbEMq','rvnks1i','ELnZwuS','CMj3seG','v0vOvhe','C3veuLa','BgvUz3rO','5lIl5y2k6lQRtLngvW','wuLIuwW','zK9iDLy','ue9ou0u','Axn0vgv4Da','B3Hjtxm','t3bVrMK','D2fYBMLUzW','5lIl5y2k6lQRtLngvZOG','txvgDg8','rhDZyLC','svf4yMS','ENrOB1C','zKjlvKy','qNLjza','5A2x5Q61ici','rMnLy0y','CxLwrxa','B3v0zML0uhjLCW','sxn0tMe','rMnXtK4','tu5vrvu','zxH0icH0CMLNzW','uhjVBxb0tw9KAq','DMfSDwu','BwvZC2fNzq','C2X5D0u','B2rPzNKGteXnia','5lQu5A6y5Asw6lkm6iom6z2IoIa','zNvSBejVzhLcyq','ufzJrMO','t1HvC2u','qK5yr3G','vwrLr3C','CMvTB3zLtgLZDa','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','C0zzvKC','y2HHCMfJDgvYua','wLDRsfe','u2rJCvK','qvfNtvO','5lIl5y2k6lQRu0zx','5lQu5A6y5Asw6lkm','EM1VENq','v1n5v0C','teXnioIVT+AXGUwKSEI0Pq','Aw1Hz2vFDxjS','Cg9WtKq','nJmZnJq3vhPPtujP','t3jjELa','y2HHCMfJDgvY','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','whzRrgi','CMfJDgvYl291Da','ANb5tue','CvnLtvy','6kEs6iMY54M55B6boIa','s2DIzuK','sw5my2K','EuDHywq','A1zeAMS','AM9PBG','CfLMtuK','rdOG','BuLtquO','zNLDiow3SUwiM+w7UUACJEIJHEMIHa','C2vHCMnO','tuHivfO','zNvSBejVzhK','EM9oDe4','DfPSvfu','s2vrrhm','CvD5uwO','qvHxzM0','DxjLC0jHy2S','teXnx0niqvjFtq','zNLDifjHDYbmta','Dg9mB3DLCKnHCW','q3vetee','tMfLrfa','tKDAwuO','5lIk5y2k6lQRu0zx6iom6z2I','E3VLVzpLIy3OP5lOIBj9Fq','uxD3CeS','wMLeEfy','BwfW','y29TBw9Uq2HHCG','CLDsqxO','zuzpzuS','rvnu','kcGOlISPkYKRkq','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','CfbXwxG','su1PCNm','ndi0mda2BgPuCfnf','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','Cg9ZAxrPB24','DgLUzYbJAgfYia','u3L6DMS','ywnR','5lIl5y2k6lQRu0zxoIa','5lIT5PAh5zcn56EW','C3rHCNrZv2L0Aa','CeDLCLq','D2nwwLa','Cgvlqvi','DfLACe4','weLkwg8','B3DUzxi','ze1pr28','zNLDioATO+wCQowKHoEqHUINKUIjSG','seLss2K','DcbWCMvZzxq6','y29UDgvUDa','6kEs6iMY54M55B6b','y2HHCL8','zw1PDa','vuP5Au4','sK9AEMS','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','5BEY5y+w5RAi5PU05PAW','C3bSAxq','CMvZDwX0','zML0CW','w2nOyxjHy3rLCG','zgv0ywLS','ze5mDMS','iIdMNiKG','zNLDiezPBMfSia','EKPPzui','5PYQ5zYOieXmtsdOVPpLH7RKUk0','v0fLtwO','EKDRyu0','DuPfBvu','y2HOq04','5lIl5y2k6lQR6iom6z2I','y0TxDMu','ufjptvbux1jfuW','rhvuB3q','BMC6','BMfTzuvo','v0jTrw0','zvHzAxq','zNLDioINO+AEKowiSoEAHos6UUEjQq','Aw1Hz2vZihrVia','tePmrLu','zhrQC3O','EePbtwS'];_0x4b6b=function(){return _0x40bfc5;};return _0x4b6b();}function extractCharacterAndOutfitTags(_0x5554da){function _0x1afbfd(_0x3310cd,_0x292886,_0x5cb249,_0x1dd387){return _0x28ca41(_0x3310cd-0xa5,_0x1dd387,_0x5cb249-0x11e,_0x3310cd- -0x320);}const _0x2f6a73={'sPzEz':_0x389336(0x44d,0x582,0x502,0x4ab),'hoesU':function(_0x20bb7d,_0x3f0e0b){return _0x20bb7d!==_0x3f0e0b;},'wgSwZ':function(_0x49fd0d,_0x37a757){return _0x49fd0d(_0x37a757);},'yJVhg':function(_0xc07158,_0x2de134){return _0xc07158===_0x2de134;},'yydBQ':function(_0x1d0261,_0x20fd4b){return _0x1d0261(_0x20fd4b);},'VdAzd':'character','iUmdk':function(_0x2d972c,_0x259e54){return _0x2d972c(_0x259e54);},'HnueV':_0x1afbfd(-0xb9,-0xc1,-0x11a,-0xa5),'OKDSv':_0x389336(0x4e0,0x616,0x573,0x508),'IxFaJ':_0x1afbfd(0x2f,0x57,-0x8,-0x13),'JwowT':function(_0x3f7f15,_0x5f0688){return _0x3f7f15===_0x5f0688;},'UJyiN':_0x1afbfd(0x4d,0x3,0xc7,0xe2),'KWDBb':_0x1afbfd(-0x46,0x6f,-0x26,-0x4)},_0x38b633=[];_0x5554da=_0x5554da[_0x1afbfd(-0x29,0x89,0x32,-0x45)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x1afbfd(0x13,-0x60,0x9c,0xa2)]();const _0x31f056=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x4f2374;while(_0x2f6a73[_0x389336(0x562,0x545,0x4d3,0x499)](_0x4f2374=_0x31f056[_0x389336(0x615,0x5fe,0x578,0x5c8)](_0x5554da),null)){const _0x58e799=_0x4f2374[0xe89*0x1+-0x2*-0x10a6+-0x2fd4],_0x2e0808=_0x2f6a73[_0x389336(0x4fd,0x59b,0x5d2,0x542)](preprocessTagContent,_0x4f2374[-0x3a2+-0x1de8+0x218c]),_0x3f8687=_0x4f2374[_0x389336(0x566,0x532,0x509,0x46c)];if(_0x2f6a73[_0x389336(0x4e1,0x4cd,0x510,0x4e3)](_0x58e799,'人物')){const _0x5d43e5=_0x2f6a73[_0x389336(0x5ae,0x514,0x501,0x487)](parseCharacterData,_0x2e0808);if(_0x5d43e5){const _0x118efb={};_0x118efb['type']=_0x2f6a73[_0x389336(0x518,0x5d1,0x5ec,0x5cb)],_0x118efb[_0x389336(0x527,0x649,0x59c,0x500)]=_0x5d43e5,_0x118efb['position']=_0x3f8687,_0x118efb[_0x389336(0x5a5,0x567,0x5d6,0x5de)+_0x389336(0x433,0x577,0x4b4,0x4d9)]=[],_0x38b633[_0x1afbfd(-0x15,0x88,-0x8f,0x80)](_0x118efb);}}else{if(_0x2f6a73['yJVhg'](_0x58e799,'服装')){const _0xec430=_0x2f6a73[_0x1afbfd(-0x57,-0x99,-0xaf,-0x6e)](parseOutfitData,_0x2e0808);if(_0xec430){if(_0x2f6a73[_0x1afbfd(-0x7,-0x86,0x4f,-0xba)]===_0x2f6a73[_0x389336(0x4da,0x5ba,0x56f,0x5bd)]){const _0x1170c8=_0x27e6b7[_0x492678],_0x1025cb=_0x1170c8[_0x389336(0x5d1,0x69b,0x618,0x5ec)+_0x389336(0x51c,0x627,0x5c4,0x608)];if(!_0x1025cb||!_0x1170c8[_0x389336(0x5de,0x6c0,0x618,0x577)+_0x389336(0x591,0x517,0x5e3,0x5b5)][_0x1025cb])return null;const _0x15c6e8={};return _0x15c6e8['id']=_0x1025cb,_0x15c6e8[_0x1afbfd(0x6e,0x29,0x108,0xbc)]=_0x1170c8[_0x389336(0x5e1,0x618,0x618,0x65d)+'resets'][_0x1025cb],_0x15c6e8;}else{const _0x5c5f1f={};_0x5c5f1f[_0x389336(0x556,0x5aa,0x5d7,0x5c6)]=_0x2f6a73['IxFaJ'],_0x5c5f1f[_0x389336(0x630,0x4ec,0x59c,0x60e)]=_0xec430,_0x5c5f1f['position']=_0x3f8687,_0x38b633[_0x1afbfd(-0x15,0xab,-0x86,-0xd)](_0x5c5f1f);}}}}}_0x38b633[_0x389336(0x52f,0x489,0x560,0x535)]((_0x4049e7,_0x3cf7e4)=>_0x4049e7[_0x1afbfd(-0x95,0x2d,-0x137,-0x111)]-_0x3cf7e4['position']);let _0x563828=null;const _0x2fed58=[];function _0x389336(_0x4f7f4d,_0x10a750,_0x58d8ee,_0xef4663){return _0x28ca41(_0x4f7f4d-0x15c,_0xef4663,_0x58d8ee-0x62,_0x58d8ee-0x20e);}const _0x2bd39d=[];for(const _0x24463d of _0x38b633){if(_0x2f6a73[_0x1afbfd(-0x1e,-0x53,-0xda,0x23)](_0x24463d[_0x389336(0x542,0x5a8,0x5d7,0x669)],_0x2f6a73[_0x1afbfd(0xbe,0xfb,0xde,0x33)])){if(_0x2f6a73[_0x389336(0x5c1,0x526,0x5db,0x547)](_0x2f6a73[_0x1afbfd(-0x80,-0xe1,-0x40,-0x15c)],_0x2f6a73[_0x1afbfd(0x27,-0x38,0x91,-0x21)])){const _0x1e7e3a=_0x221115[_0x389336(0x4c2,0x4cc,0x59c,0x4fb)];let _0x67d38e=_0x2f6a73['sPzEz'];return _0x67d38e+='中文名称:\x20'+(_0x1e7e3a[_0x1afbfd(-0x21,-0x86,-0xd4,-0x94)]||'')+'\x0a',_0x67d38e+=_0x389336(0x649,0x507,0x5af,0x64a)+(_0x1e7e3a[_0x1afbfd(-0x69,0x8,-0x12b,-0x129)]||'')+'\x0a',_0x67d38e+=_0x1afbfd(-0xbd,-0x99,-0x11d,-0x93)+(_0x1e7e3a['characterT'+_0x1afbfd(0x86,-0x57,-0xf,0xca)]||'')+'\x0a',_0x67d38e+=_0x389336(0x599,0x51e,0x50c,0x58c)+(_0x1e7e3a['facialFeat'+_0x1afbfd(0x2d,-0xab,-0x97,0xce)]||'')+'\x0a',_0x67d38e+=_0x389336(0x5d3,0x5d1,0x60f,0x618)+(_0x1e7e3a[_0x389336(0x59b,0x51e,0x5cd,0x527)+'uresBack']||'')+'\x0a',_0x67d38e+='上半身SFW:\x20'+(_0x1e7e3a[_0x1afbfd(0x33,0x7b,0x74,-0x3a)+'FW']||'')+'\x0a',_0x67d38e+=_0x389336(0x5af,0x509,0x5c8,0x64c)+(_0x1e7e3a[_0x389336(0x5be,0x521,0x561,0x5d1)+_0x389336(0x46c,0x5b1,0x545,0x60f)]||'')+'\x0a',_0x67d38e+=_0x389336(0x4c2,0x3f1,0x49d,0x54f)+(_0x1e7e3a[_0x389336(0x557,0x53f,0x531,0x578)+'W']||'')+'\x0a',_0x67d38e+=_0x389336(0x52f,0x4a5,0x539,0x4cc)+(_0x1e7e3a['fullBodySF'+_0x389336(0x6ae,0x598,0x5d9,0x526)]||'')+'\x0a',_0x67d38e+='上半身NSFW:\x20'+(_0x1e7e3a[_0x1afbfd(0x93,0x3b,0x5b,0xcd)+_0x389336(0x40e,0x51e,0x4d9,0x5b1)]||'')+'\x0a',_0x67d38e+=_0x389336(0x478,0x538,0x514,0x57e)+'\x20'+(_0x1e7e3a[_0x1afbfd(0x93,0x158,0x25,0xb8)+_0x389336(0x5c3,0x57f,0x57c,0x5aa)]||'')+'\x0a',_0x67d38e+=_0x1afbfd(0xcd,0xe8,0x15b,0x15a)+(_0x1e7e3a[_0x1afbfd(0x8e,-0x10,0x16a,0x3b)+'FW']||'')+'\x0a',_0x67d38e+=_0x1afbfd(0x79,-0x45,-0x29,0xa3)+'\x20'+(_0x1e7e3a[_0x389336(0x5e9,0x539,0x5bc,0x555)+'FWBack']||'')+'\x0a',_0x67d38e+=_0x1afbfd(0x5c,-0x51,0xe1,0x134),_0x67d38e;}else _0x563828=_0x24463d,_0x2fed58[_0x389336(0x589,0x55d,0x519,0x565)](_0x24463d);}else _0x2f6a73['yJVhg'](_0x24463d['type'],'outfit')&&(_0x563828?_0x563828[_0x389336(0x502,0x618,0x5d6,0x67b)+_0x1afbfd(-0x7a,0x1e,-0xd1,-0xa5)]['push'](_0x24463d[_0x389336(0x4d1,0x502,0x59c,0x4c0)]):_0x2bd39d[_0x1afbfd(-0x15,-0xab,0x2b,0xc6)](_0x24463d[_0x389336(0x567,0x572,0x59c,0x4c5)]));}return{'characters':_0x2fed58[_0x389336(0x4fe,0x470,0x48e,0x3b3)](_0x5a2508=>({..._0x5a2508[_0x389336(0x5d8,0x595,0x59c,0x5cf)],'matchedOutfits':_0x5a2508[_0x389336(0x665,0x6b0,0x5d6,0x501)+_0x1afbfd(-0x7a,-0xad,-0x122,-0x129)]})),'outfits':_0x2bd39d};}function getCurrentCharacterPreset(){function _0x2938a8(_0xdeba04,_0x359ea4,_0x2fa647,_0x4428e2){return _0x28ca41(_0xdeba04-0xf1,_0xdeba04,_0x2fa647-0x59,_0x359ea4-0x41);}const _0x24a820=extension_settings[extensionName],_0x5bc582=_0x24a820[_0x2938a8(0x404,0x44b,0x39a,0x46b)+_0x11e418(0x5c8,0x5da,0x685,0x570)];if(!_0x5bc582||!_0x24a820['characterP'+_0x2938a8(0x3d9,0x416,0x4df,0x3bb)][_0x5bc582])return null;const _0x435822={};_0x435822['id']=_0x5bc582;function _0x11e418(_0x39625a,_0x381797,_0x19d937,_0x31dbcb){return _0x28ca41(_0x39625a-0x1ed,_0x19d937,_0x19d937-0xa5,_0x381797-0x224);}return _0x435822['data']=_0x24a820[_0x2938a8(0x37a,0x44b,0x3df,0x51e)+_0x11e418(0x697,0x5f9,0x65a,0x6c9)][_0x5bc582],_0x435822;}function buildCharacterText(_0x2abc4f){const _0x56d680={};_0x56d680['XvkDb']=_0xafc3a4(0x419,0x3c3,0x37c,0x397),_0x56d680[_0xafc3a4(0x4d9,0x48d,0x3f4,0x3e1)]=_0xafc3a4(0x3e8,0x44b,0x437,0x40f);function _0x268e0b(_0x4f7269,_0x24b2d2,_0x2677a8,_0x56610c){return _0x28ca41(_0x4f7269-0x1e8,_0x4f7269,_0x2677a8-0x15e,_0x2677a8- -0x139);}const _0x385b42=_0x56d680;function _0xafc3a4(_0x3c396d,_0x59dd5b,_0x1dce2c,_0x11cfb0){return _0x28ca41(_0x3c396d-0x103,_0x11cfb0,_0x1dce2c-0x1df,_0x59dd5b-0xcf);}const _0x3958ce=_0x2abc4f[_0x268e0b(0x2ba,0x264,0x255,0x1e3)];let _0x252549=_0x385b42[_0xafc3a4(0x271,0x32e,0x31e,0x3f2)];return _0x252549+=_0x268e0b(0x2a5,0x1a6,0x24b,0x1a6)+(_0x3958ce[_0x268e0b(0x13d,0x1d1,0x1c6,0x132)]||'')+'\x0a',_0x252549+=_0x268e0b(0x28c,0x252,0x268,0x18f)+(_0x3958ce['nameEN']||'')+'\x0a',_0x252549+=_0xafc3a4(0x295,0x332,0x262,0x25e)+(_0x3958ce['characterT'+_0x268e0b(0x216,0x28c,0x26d,0x1d6)]||'')+'\x0a',_0x252549+=_0x268e0b(0x144,0x1e1,0x1c5,0x17c)+(_0x3958ce[_0xafc3a4(0x51a,0x48e,0x3ef,0x487)+_0x268e0b(0x2e8,0x2b9,0x214,0x1b6)]||'')+'\x0a',_0x252549+=_0x268e0b(0x242,0x204,0x2c8,0x2d0)+(_0x3958ce['facialFeat'+_0xafc3a4(0x366,0x344,0x281,0x414)]||'')+'\x0a',_0x252549+=_0xafc3a4(0x38e,0x462,0x39d,0x387)+(_0x3958ce[_0x268e0b(0x1d8,0x1e7,0x21a,0x20e)+'FW']||'')+'\x0a',_0x252549+='上半身SFW背面:\x20'+(_0x3958ce[_0xafc3a4(0x36e,0x422,0x40e,0x498)+_0xafc3a4(0x4a6,0x406,0x41b,0x450)]||'')+'\x0a',_0x252549+=_0x268e0b(0x1e5,0xb1,0x156,0x7f)+(_0x3958ce[_0x268e0b(0x29c,0x2b0,0x1ea,0x1c0)+'W']||'')+'\x0a',_0x252549+=_0xafc3a4(0x362,0x3fa,0x371,0x3f0)+(_0x3958ce[_0x268e0b(0x2af,0x116,0x1ea,0x195)+_0xafc3a4(0x465,0x49a,0x3c4,0x42c)]||'')+'\x0a',_0x252549+=_0xafc3a4(0x47f,0x413,0x3f8,0x425)+(_0x3958ce['upperBodyN'+_0xafc3a4(0x385,0x39a,0x37c,0x476)]||'')+'\x0a',_0x252549+='上半身NSFW背面:'+'\x20'+(_0x3958ce[_0xafc3a4(0x453,0x482,0x4fa,0x44c)+_0xafc3a4(0x386,0x43d,0x443,0x471)]||'')+'\x0a',_0x252549+=_0xafc3a4(0x44e,0x4bc,0x445,0x445)+(_0x3958ce[_0xafc3a4(0x48c,0x47d,0x47f,0x4b2)+'FW']||'')+'\x0a',_0x252549+=_0xafc3a4(0x492,0x468,0x4ee,0x411)+'\x20'+(_0x3958ce[_0x268e0b(0x25e,0x2be,0x275,0x1e9)+'FWBack']||'')+'\x0a',_0x252549+=_0x385b42[_0xafc3a4(0x3bb,0x48d,0x546,0x455)],_0x252549;}export async function handleCharacterPromptModify(_0x518541,_0x4a9d9a=[]){const _0x425c7c={'UdeGw':function(_0x2b7339,_0x29c011){return _0x2b7339(_0x29c011);},'AQgMZ':'获取角色修改提示词超'+'时','XLAPQ':function(_0x3d357a,_0x5cec8a){return _0x3d357a!==_0x5cec8a;},'VrIAs':function(_0x276603,_0x26a7e9,_0xed26cd){return _0x276603(_0x26a7e9,_0xed26cd);},'myVjV':_0xa970da(0x522,0x572,0x4d6,0x4ae)+_0x4c20ca(0x358,0x3ac,0x2e3,0x391)+_0x4c20ca(0x2c8,0x2ef,0x36e,0x35f)+_0xa970da(0x54e,0x5e5,0x606,0x66e)+'er\x20prompt\x20'+_0xa970da(0x47e,0x538,0x52c,0x5d0)+_0xa970da(0x642,0x5e2,0x601,0x5ef),'SrGJP':'[character'+'PromptModi'+_0x4c20ca(0x1f5,0x219,0x19c,0x199)+_0x4c20ca(0x26f,0x23f,0x1a4,0x2a0),'ftnQB':function(_0x499f64){return _0x499f64();},'pPqYx':_0xa970da(0x3fb,0x46a,0x4d1,0x589),'KCumW':_0x4c20ca(0x203,0x226,0x13c,0x220)+_0x4c20ca(0x358,0x3dd,0x2ac,0x29e)+_0x4c20ca(0x2dc,0x35b,0x2b4,0x247)+_0x4c20ca(0x1f7,0x2bc,0x19f,0x295),'mISAJ':_0x4c20ca(0x203,0x215,0x1a8,0x220)+_0x4c20ca(0x358,0x353,0x2a5,0x382)+_0x4c20ca(0x237,0x28b,0x1fc,0x272)+_0x4c20ca(0x22f,0x273,0x1e8,0x169),'FcqNN':'[character'+_0xa970da(0x5c9,0x605,0x62b,0x5b5)+_0xa970da(0x571,0x475,0x50a,0x5a3)+'world\x20book'+':','FUbPt':_0xa970da(0x4be,0x42f,0x4d6,0x401)+_0x4c20ca(0x358,0x28f,0x34c,0x343)+_0xa970da(0x491,0x516,0x50a,0x44e)+'variables:','GdoOd':function(_0x20cded,_0x48a2f3){return _0x20cded||_0x48a2f3;},'TBILI':function(_0x3c8bb5,_0x423beb){return _0x3c8bb5===_0x423beb;},'xOcjS':'zthoW','xJAMk':_0xa970da(0x4f7,0x48e,0x4d6,0x406)+_0xa970da(0x5bd,0x66c,0x62b,0x5b3)+'fy]\x20Charac'+_0xa970da(0x6af,0x64d,0x5e3,0x625)+_0xa970da(0x5c7,0x5d7,0x5a4,0x50f),'MzpFx':_0xa970da(0x602,0x551,0x5b9,0x65c)+'y','Gsqwp':function(_0x1a1a64,_0x1d0e24){return _0x1a1a64(_0x1d0e24);},'GgfFi':function(_0x2a0783){return _0x2a0783();},'YMAoI':_0x4c20ca(0x203,0x22f,0x214,0x1e9)+_0x4c20ca(0x358,0x287,0x2b4,0x30c)+_0xa970da(0x46b,0x521,0x537,0x5e0)+_0x4c20ca(0x2c2,0x1e9,0x2e4,0x2d8)+_0xa970da(0x5bd,0x563,0x62a,0x633)+_0xa970da(0x650,0x631,0x59f,0x503),'OhDxk':function(_0xfb0fb0,_0x2a621e){return _0xfb0fb0(_0x2a621e);},'NeZjJ':'[character'+_0xa970da(0x589,0x676,0x62b,0x5c3)+_0x4c20ca(0x314,0x3d2,0x26f,0x2fa)+'后:','MsKEn':'{{用户需求}}','sKCtB':'[character'+_0xa970da(0x6f4,0x607,0x62b,0x616)+_0xa970da(0x543,0x5f2,0x593,0x4bb)+'equirement'+'\x20message\x20i'+_0xa970da(0x572,0x5d9,0x51d,0x5e8),'peKAR':function(_0xbe3c05,_0x2628b8,_0x374c95){return _0xbe3c05(_0x2628b8,_0x374c95);},'OGzUC':function(_0x4f2d62,_0x39f76c,_0x54aea0,_0x200df4,_0x1910a3){return _0x4f2d62(_0x39f76c,_0x54aea0,_0x200df4,_0x1910a3);},'rzwyT':_0x4c20ca(0x1d9,0x1fb,0x222,0x166),'PVcFj':_0xa970da(0x422,0x42e,0x4d6,0x4b7)+_0x4c20ca(0x358,0x2b2,0x326,0x2d1)+_0xa970da(0x59b,0x41e,0x4da,0x49b)+_0x4c20ca(0x2be,0x2e2,0x2c7,0x364),'TnuCU':function(_0x2904d7,_0xe5ad70){return _0x2904d7>_0xe5ad70;},'WSyWG':function(_0x385f03,_0x59ef60){return _0x385f03>=_0x59ef60;},'kGwQg':_0xa970da(0x4b5,0x589,0x4ff,0x434),'djUYG':function(_0x535692,_0x5b59b7,_0x1b8273,_0x97ee66,_0x4bf162){return _0x535692(_0x5b59b7,_0x1b8273,_0x97ee66,_0x4bf162);},'iBMWD':_0xa970da(0x604,0x53b,0x538,0x548),'JRzxe':_0x4c20ca(0x203,0x184,0x2bb,0x220)+'PromptModi'+_0xa970da(0x640,0x507,0x5e1,0x569)+'ed','erUuF':_0xa970da(0x4dd,0x52b,0x4ea,0x5c3)+'message\x20at'+_0xa970da(0x5dd,0x625,0x561,0x5ad),'xhEQh':function(_0x592fca,_0x721763,_0x4784b6){return _0x592fca(_0x721763,_0x4784b6);},'EsNcY':function(_0xab79c2,_0x27a3f3){return _0xab79c2===_0x27a3f3;},'Kukay':_0xa970da(0x4e8,0x557,0x4dc,0x519)+_0x4c20ca(0x23e,0x1b1,0x1dd,0x18e),'oLtHp':'[character'+_0xa970da(0x699,0x6b4,0x62b,0x6ac)+_0x4c20ca(0x2eb,0x2a5,0x2e6,0x375)+_0xa970da(0x482,0x42f,0x48f,0x4ef)+'fit\x20tags\x20f'+_0x4c20ca(0x271,0x1e1,0x1c5,0x329)+'tput','PaRzq':'[character'+'PromptModi'+_0xa970da(0x55c,0x4b9,0x4a6,0x4c6)+'M\x20output\x20f'+_0xa970da(0x582,0x696,0x5d8,0x699)+_0x4c20ca(0x212,0x153,0x201,0x184),'LCBaZ':_0xa970da(0x4d4,0x440,0x4d6,0x562)+'PromptModi'+_0xa970da(0x4f6,0x470,0x51c,0x528)+_0x4c20ca(0x286,0x2ae,0x279,0x1e9),'atste':function(_0x4ec639,_0x158c01){return _0x4ec639>_0x158c01;},'LJLFU':_0x4c20ca(0x1be,0x159,0x275,0x281),'KgbeI':_0x4c20ca(0x208,0x2cf,0x1ac,0x1a5),'bMZPi':_0xa970da(0x5ec,0x53f,0x518,0x512),'OUgBd':_0x4c20ca(0x276,0x1a2,0x1c9,0x28e),'VFuwJ':function(_0x4ff47e,_0x440bdd){return _0x4ff47e(_0x440bdd);},'DuTot':_0x4c20ca(0x203,0x1f5,0x1c5,0x195)+_0xa970da(0x613,0x619,0x62b,0x6cc)+'fy]\x20Error:'};function _0x4c20ca(_0x13d9c9,_0x10f99d,_0x27fcdb,_0xb1a8ce){return _0x28ca41(_0x13d9c9-0x106,_0x27fcdb,_0x27fcdb-0x1d0,_0x13d9c9- -0xa4);}console['log'](_0x425c7c['myVjV']),toastr[_0xa970da(0x5f3,0x654,0x5c4,0x62d)](_0x425c7c[_0xa970da(0x5c6,0x4ea,0x540,0x602)]);function _0xa970da(_0x1ab449,_0x8a5b3d,_0x3032f2,_0x69f05e){return _0x28ca41(_0x1ab449-0x0,_0x1ab449,_0x3032f2-0xad,_0x3032f2-0x22f);}try{const _0x18b953=_0x425c7c[_0xa970da(0x535,0x688,0x5d4,0x613)](getContext),_0x542211=extension_settings[extensionName],_0x1ef883=_0x425c7c[_0xa970da(0x535,0x54b,0x5d4,0x669)](getCurrentCharacterPreset);if(!_0x1ef883){toastr[_0xa970da(0x580,0x63c,0x5cb,0x5bc)](_0x425c7c[_0x4c20ca(0x1e3,0x229,0x1a9,0x21d)]);return;}console[_0x4c20ca(0x30b,0x3a3,0x26a,0x35f)](_0x425c7c[_0x4c20ca(0x2e3,0x2fa,0x249,0x381)],_0x1ef883['id']);const _0x44649a=_0x1ef883[_0x4c20ca(0x2ea,0x361,0x2c3,0x247)][_0x4c20ca(0x30d,0x37d,0x29a,0x371)+_0xa970da(0x488,0x4fe,0x527,0x46b)]||'',_0x282f5f=_0x1ef883[_0xa970da(0x5c5,0x558,0x5bd,0x656)][_0x4c20ca(0x30d,0x3d2,0x2a5,0x247)+'WorldBook']||'',_0x105f77=_0x1ef883[_0x4c20ca(0x2ea,0x380,0x242,0x38d)][_0x4c20ca(0x30d,0x2d0,0x270,0x35b)+'Variables']||{};console[_0x4c20ca(0x30b,0x248,0x34d,0x3b2)](_0x425c7c[_0xa970da(0x430,0x469,0x49a,0x547)],_0x44649a),console[_0xa970da(0x5fb,0x5b7,0x5de,0x672)](_0x425c7c[_0xa970da(0x5e8,0x5a9,0x628,0x5ef)],_0x282f5f),console['log'](_0x425c7c[_0x4c20ca(0x252,0x1c6,0x271,0x1dd)],_0x105f77);const _0x43c51b=_0x425c7c['GdoOd'](_0x518541,''),_0xd6ddb=[];_0x518541&&(_0x425c7c[_0x4c20ca(0x296,0x258,0x21b,0x304)](_0x4c20ca(0x34d,0x347,0x3a7,0x3c0),_0x425c7c[_0xa970da(0x6bb,0x5b9,0x5ea,0x663)])?_0xd6ddb[_0xa970da(0x4a9,0x528,0x53a,0x49f)](_0x518541):_0x425c7c[_0x4c20ca(0x362,0x329,0x361,0x325)](_0x1196df,_0x2c38e2));_0x44649a&&_0xd6ddb[_0xa970da(0x5fe,0x50d,0x53a,0x557)](_0x44649a);_0x282f5f&&_0xd6ddb[_0x4c20ca(0x267,0x265,0x32e,0x27f)](_0x282f5f);const _0x3ab237=_0xd6ddb[_0x4c20ca(0x1c4,0x1bd,0x160,0x10c)]('\x0a');console[_0xa970da(0x602,0x59c,0x5de,0x666)](_0x425c7c[_0x4c20ca(0x21a,0x2ce,0x25d,0x244)],_0x3ab237);let _0xf92417=_0x425c7c[_0x4c20ca(0x337,0x319,0x319,0x358)](buildPromptForRequestType,_0x425c7c['MzpFx'],_0x43c51b);const _0xf3968d=_0x425c7c[_0x4c20ca(0x2f7,0x3a5,0x3b7,0x3cb)](generateCharacterListText,_0x3ab237),_0x447e48=generateOutfitEnableListText(),_0x396a05=_0x425c7c[_0x4c20ca(0x246,0x2af,0x234,0x1b4)](generateCommonCharacterListText);console[_0xa970da(0x64f,0x5c3,0x5de,0x6a6)](_0x425c7c[_0x4c20ca(0x22d,0x25e,0x1d8,0x15c)],_0xf3968d);const _0x346174=_0x18b953['chatMetada'+'ta']?.[_0x4c20ca(0x304,0x22a,0x386,0x323)]||{},_0x47c82c=buildCharacterText(_0x1ef883);_0xf92417=_0x425c7c[_0xa970da(0x532,0x684,0x5c9,0x614)](mergeAdjacentMessages,_0xf92417),console['log'](_0x425c7c['NeZjJ'],_0xf92417);const _0x147b00=findMessageIndexWithPlaceholder(_0xf92417,_0x425c7c['MsKEn']);console[_0x4c20ca(0x30b,0x2ee,0x249,0x294)](_0x425c7c[_0xa970da(0x5a7,0x527,0x57b,0x4db)],_0x147b00);const _0x554b26={..._0x105f77,..._0x346174},_0x623da6={};_0x623da6['context']=_0x44649a,_0x623da6['worldBookC'+_0xa970da(0x4c8,0x64d,0x571,0x60f)]=_0x282f5f,_0x623da6['variables']=_0x554b26,_0x623da6[_0xa970da(0x4d2,0x479,0x4fc,0x477)]=_0x518541||'',_0x623da6[_0xa970da(0x583,0x577,0x53e,0x514)+_0xa970da(0x60e,0x5aa,0x618,0x57a)]=_0xf3968d,_0x623da6[_0xa970da(0x563,0x695,0x5e6,0x591)+_0xa970da(0x5d2,0x607,0x565,0x557)]=_0x447e48,_0x623da6[_0xa970da(0x4be,0x48d,0x4b0,0x52c)+'acterListT'+_0xa970da(0x5b7,0x5cf,0x583,0x609)]=_0x396a05;const _0x11a3b6=_0x623da6,{messages:_0x319dce,replacedVariables:_0x5b07d6}=_0x425c7c[_0x4c20ca(0x1f0,0x229,0x1ad,0x1ed)](replaceAllPlaceholders,_0xf92417,_0x11a3b6);_0xf92417=_0x319dce,_0xf92417=_0x425c7c['OGzUC'](_0x293f4c,_0xf92417,_0x425c7c[_0x4c20ca(0x2a2,0x311,0x2fa,0x2c2)],_0x47c82c,_0x5b07d6),console[_0xa970da(0x592,0x589,0x5de,0x5f2)](_0x425c7c[_0x4c20ca(0x35f,0x30d,0x2fc,0x323)],_0xf92417);let _0x235849='';_0x425c7c[_0xa970da(0x64b,0x534,0x5df,0x642)](_0x5b07d6['size'],-0xaa0+-0x1b*-0xf2+-0xee6*0x1)&&(_0x235849=_0xa970da(0x49b,0x506,0x48d,0x432)+_0xa970da(0x5e7,0x530,0x553,0x531)+[..._0x5b07d6][_0x4c20ca(0x1c4,0x1b3,0x221,0x26d)]('、')+'\x0a');_0x4a9d9a&&_0x425c7c['TnuCU'](_0x4a9d9a[_0x4c20ca(0x340,0x2c1,0x3ba,0x38c)],-0xd88+-0x2015+0x2d9d)&&_0x425c7c[_0xa970da(0x613,0x65e,0x640,0x57b)](_0x147b00,0x2359*-0x1+-0x74c*0x5+-0x1f1*-0x25)&&(_0x425c7c['kGwQg']!==_0x425c7c['kGwQg']?_0x440862[_0x58c2b6]&&(_0x2855b9[_0x4568d6]=_0x4ba619[_0x2d2f9b]):(_0xf92417=_0x425c7c[_0x4c20ca(0x2ba,0x22c,0x312,0x279)](attachImagesToMessage,_0xf92417,_0x147b00,_0x4a9d9a,_0x425c7c[_0xa970da(0x553,0x492,0x536,0x5f1)]),console[_0x4c20ca(0x30b,0x28c,0x33d,0x37f)](_0x425c7c[_0x4c20ca(0x23b,0x273,0x288,0x258)],_0x4a9d9a[_0xa970da(0x544,0x691,0x613,0x570)],_0x425c7c['erUuF'],_0x147b00)));_0x425c7c[_0x4c20ca(0x1f0,0x27c,0x257,0x23a)](updateCombinedPrompt,_0xf92417,_0x235849);const _0xb930d={};_0xb930d[_0x4c20ca(0x2ec,0x2c8,0x259,0x31a)]=0x493e0;const _0x573da7=await _0x425c7c['xhEQh'](LLM_CHAR_MODIFY,_0xf92417,_0xb930d);console[_0xa970da(0x5fd,0x5ce,0x5de,0x69c)]('[character'+_0xa970da(0x5d5,0x657,0x62b,0x5d8)+_0x4c20ca(0x272,0x2a2,0x30c,0x1ae)+_0x4c20ca(0x25c,0x244,0x2da,0x2b8),_0x573da7);if(!_0x573da7){toastr[_0x4c20ca(0x2f8,0x2a8,0x369,0x30f)](_0xa970da(0x4b3,0x577,0x4f6,0x4d5));return;}const _0x492706=_0x425c7c[_0xa970da(0x680,0x59a,0x5c9,0x573)](extractCharacterAndOutfitTags,_0x573da7);if(_0x425c7c['EsNcY'](_0x492706[_0x4c20ca(0x27b,0x28b,0x21b,0x1d2)][_0xa970da(0x689,0x6e6,0x613,0x60e)],0x2259+0x1b*-0xba+-0x1*0xebb)&&_0x425c7c[_0xa970da(0x610,0x616,0x569,0x5aa)](_0x492706[_0xa970da(0x607,0x559,0x5c1,0x609)][_0x4c20ca(0x340,0x3fc,0x3d9,0x3da)],-0x1995+0x162d+0x368)){toastr['warning'](_0x425c7c[_0xa970da(0x46c,0x5b1,0x520,0x46c)]),console['log'](_0x425c7c[_0xa970da(0x499,0x48f,0x532,0x58e)]),console[_0xa970da(0x664,0x60c,0x5de,0x530)](_0x425c7c[_0x4c20ca(0x2aa,0x32f,0x29f,0x2b1)],_0x573da7);return;}console[_0x4c20ca(0x30b,0x344,0x338,0x36e)](_0x425c7c[_0x4c20ca(0x2a5,0x374,0x2ca,0x242)],_0x492706);if(_0x425c7c[_0x4c20ca(0x2ed,0x2ac,0x313,0x226)](_0x492706[_0x4c20ca(0x27b,0x1ab,0x2cc,0x21f)][_0x4c20ca(0x340,0x2dc,0x267,0x294)],0x22dc+-0x1dac+-0x530)){if(_0x425c7c['TBILI'](_0x425c7c[_0x4c20ca(0x218,0x27a,0x161,0x2cd)],_0x425c7c[_0x4c20ca(0x1c0,0x263,0xfe,0x22e)])){const _0x5679b1={'ZWkHQ':function(_0x2351bb,_0x98d4c2){function _0x45df3a(_0x397cf5,_0x3fc388,_0x257cd3,_0x50f0f8){return _0xa970da(_0x50f0f8,_0x3fc388-0x198,_0x397cf5- -0x2d0,_0x50f0f8-0xee);}return _0x425c7c[_0x45df3a(0x365,0x3ea,0x326,0x2b7)](_0x2351bb,_0x98d4c2);},'XkKDc':_0x425c7c[_0xa970da(0x5e1,0x5c7,0x63c,0x6d2)],'YFWxg':function(_0x51fa6e,_0x42e1f3){function _0xd81e13(_0x11c94e,_0x2aa0ec,_0x281b6c,_0x1fdd75){return _0xa970da(_0x281b6c,_0x2aa0ec-0x128,_0x11c94e- -0x416,_0x1fdd75-0x18e);}return _0x425c7c[_0xd81e13(0xe7,0x117,0x16e,0x38)](_0x51fa6e,_0x42e1f3);},'MHyrv':function(_0x19bfd1,_0x298ddc,_0xa88ae8){function _0x2f5224(_0x49ff3d,_0x46e515,_0x34a505,_0x9611fd){return _0xa970da(_0x9611fd,_0x46e515-0x1d0,_0x46e515- -0x649,_0x9611fd-0xb1);}return _0x425c7c[_0x2f5224(-0x3,-0x3f,-0x48,-0xd1)](_0x19bfd1,_0x298ddc,_0xa88ae8);}};return new _0x288130((_0x1e91cf,_0x3eeeb2)=>{function _0x38d794(_0x4814d8,_0x2ef32b,_0x450397,_0x567d55){return _0x4c20ca(_0x4814d8- -0x165,_0x2ef32b-0x46,_0x2ef32b,_0x567d55-0x13e);}const _0x3b6f29={'KuSNI':function(_0x11d272,_0x2d6142){function _0x15d4d6(_0x17bf92,_0x2c069e,_0x50252d,_0x124f63){return _0xb15c(_0x124f63-0x117,_0x2c069e);}return _0x5679b1[_0x15d4d6(0x359,0x45b,0x431,0x3af)](_0x11d272,_0x2d6142);}},_0x46144f=_0x56097e();_0x4a0911[_0x38d794(0x1a6,0x10d,0x185,0x198)]('[character'+'PromptModi'+_0x43f820(0x173,0x23a,0x22d,0x129)+_0x43f820(0x31,0x61,-0x19,0x10)+'modify\x20pro'+_0x43f820(0x6d,0x10d,-0x3a,0xb6)+_0x46144f+')');const _0x35505e=_0xf830d2=>{if(_0x3b6f29[_0x3d852e(0x5d4,0x511,0x517,0x651)](_0xf830d2['id'],_0x46144f))return;function _0x3d852e(_0x215a73,_0x24a0bd,_0x43a438,_0x161a92){return _0x43f820(_0x215a73-0x500,_0x24a0bd,_0x43a438-0x13e,_0x161a92-0x170);}_0x288ed2['removeList'+_0x3d852e(0x62d,0x5e0,0x679,0x635)](_0x253f21[_0x10d441(0x20b,0x22b,0x1bc,0x213)+_0x3d852e(0x5b9,0x63a,0x61b,0x66e)+_0x3d852e(0x559,0x5ed,0x4bf,0x57c)+'PONSE'],_0x35505e);function _0x10d441(_0x1158e9,_0x4a69a8,_0x1d6212,_0x58ae43){return _0x43f820(_0x1d6212-0x1a1,_0x1158e9,_0x1d6212-0x14c,_0x58ae43-0xa);}_0x1e91cf(_0xf830d2[_0x3d852e(0x616,0x687,0x57b,0x686)]);};_0x2f5ea3['on'](_0x214908[_0x38d794(0x6d,-0x3a,0xf3,-0x20)+'ODIFY_GET_'+'PROMPT_RES'+'PONSE'],_0x35505e);const _0x3f7836={};_0x3f7836['id']=_0x46144f,_0x191226[_0x38d794(0x96,0xfc,0x0,0x0)](_0x39c0eb[_0x43f820(0x1b,0x61,-0xc0,0xf1)+_0x43f820(0xb9,0xfc,0xf,0x1c)+_0x43f820(0x79,-0x5b,0x2c,0xac)+_0x38d794(0x197,0x271,0x196,0x18b)],_0x3f7836);function _0x43f820(_0x472082,_0x412cab,_0x3939c0,_0x2db5af){return _0xa970da(_0x412cab,_0x412cab-0x15a,_0x472082- -0x48a,_0x2db5af-0x1ea);}_0x5679b1[_0x38d794(0x124,0xc2,0xd2,0x159)](_0x1936da,()=>{_0x2d8bac[_0x2e85d8(0xd1,0x18e,0xc8,0xdc)+_0x4a8d08(0x547,0x4f4,0x42a,0x493)](_0x180050[_0x2e85d8(0x80,-0x3,-0x35,0xa2)+_0x4a8d08(0x4ec,0x356,0x378,0x41f)+'PROMPT_RES'+_0x4a8d08(0x54b,0x4ad,0x436,0x4f3)],_0x35505e);function _0x2e85d8(_0x544891,_0x2c7e8d,_0x4a5ab6,_0x291752){return _0x43f820(_0x2c7e8d- -0x1e,_0x291752,_0x4a5ab6-0x13c,_0x291752-0xe1);}function _0x4a8d08(_0x409315,_0x8550ff,_0x5ee1bd,_0xe0788){return _0x43f820(_0xe0788-0x366,_0x5ee1bd,_0x5ee1bd-0x17a,_0xe0788-0xa5);}_0x5679b1[_0x2e85d8(0x14e,0x192,0xf6,0xfd)](_0x3eeeb2,new _0x5dab38(_0x5679b1[_0x4a8d08(0x361,0x498,0x40e,0x3d7)]));},0x13d*-0x29+0xad*0x11+0x4e58);});}else{const _0x1bcfc1=_0x492706[_0xa970da(0x516,0x4d8,0x54e,0x48a)][0x2286+0xe3*0x23+0x418f*-0x1];await updateCharacterPresetFromLLM(_0x1ef883['id'],_0x1bcfc1);}}const _0x3c14d7=[..._0x492706[_0xa970da(0x61e,0x5ee,0x5c1,0x665)]];for(const _0x56238d of _0x492706[_0xa970da(0x495,0x5ce,0x54e,0x5f2)]){_0x425c7c['XLAPQ'](_0x425c7c[_0x4c20ca(0x243,0x25f,0x232,0x27f)],_0x425c7c[_0xa970da(0x5e0,0x4e4,0x51a,0x519)])?_0x56238d['matchedOut'+'fits']&&_0x425c7c['TnuCU'](_0x56238d[_0xa970da(0x695,0x63a,0x5f7,0x670)+'fits'][_0x4c20ca(0x340,0x366,0x364,0x377)],-0x3*0x305+-0x7ec+-0x26d*-0x7)&&_0x3c14d7['push'](..._0x56238d[_0xa970da(0x554,0x5d5,0x5f7,0x51b)+'fits']):_0x4eca8e[_0x406078[_0x4a607c]]=_0x256735;}_0x425c7c[_0x4c20ca(0x2ed,0x257,0x267,0x3be)](_0x3c14d7[_0x4c20ca(0x340,0x274,0x375,0x3f3)],0x1373+0x512*0x1+0x1*-0x1885)&&await _0x425c7c['VFuwJ'](updateOutfitPresetsFromLLM,_0x3c14d7),toastr[_0x4c20ca(0x2a7,0x381,0x363,0x206)]('角色/服装提示词修改'+'完成！');}catch(_0x1f7bf2){console[_0xa970da(0x616,0x64c,0x5cb,0x55a)](_0x425c7c[_0x4c20ca(0x211,0x247,0x2b0,0x284)],_0x1f7bf2),toastr[_0x4c20ca(0x2f8,0x390,0x360,0x232)](_0x4c20ca(0x364,0x34e,0x317,0x29b)+'\x20'+_0x1f7bf2[_0x4c20ca(0x35a,0x2a9,0x2f6,0x33f)]);}}async function updateCharacterPresetFromLLM(_0x4bfb33,_0x5eb5c3){const _0x14cf80={'NiLGX':_0x3f6dbf(0x15c,0x35,0x146,0xaf),'BDFRP':_0x3f6dbf(-0x7,-0xc0,-0xf1,-0x35),'WBmEm':_0x3f6dbf(-0xc0,0x85,0xb2,-0x28),'UCjPF':_0x46725b(0xfc,0x1b7,0x242,0x1be),'XiOyg':_0x46725b(0x171,0xa1,0xb7,0x138),'PPfzb':_0x46725b(0x14a,0x11a,0x196,0x134),'JWWYd':'上半身SFW背面','ZCLCL':_0x3f6dbf(0x1c0,0xf2,0x1c8,0x149),'JLBym':_0x46725b(0xc6,0x165,0x207,0x1c5),'zapXI':'上半身NSFW','xuAid':_0x3f6dbf(0xa8,0x6f,0x7a,0x2b),'OYuDO':function(_0x5612e8,_0x3a3bec){return _0x5612e8===_0x3a3bec;},'pYfMI':_0x3f6dbf(0x1ed,0x1e5,0x77,0x11c),'jpyMA':_0x46725b(0xac,0x135,0x151,0xb6),'QwwpK':function(_0x46ac37){return _0x46ac37();},'FcecF':function(_0x5a0395,_0x5a6fd6){return _0x5a0395(_0x5a6fd6);},'qHlFl':_0x46725b(0x199,0x145,0x198,0xdc)+'-tab-chara'+_0x46725b(0x13f,0x153,0x12a,0xc9),'eFOeK':function(_0x512991,_0x3299c8){return _0x512991===_0x3299c8;},'zehNE':_0x46725b(0x195,0x122,0xd3,0xfa),'MuFto':_0x3f6dbf(0x4a,0x15e,0x66,0xb6),'YuKpg':function(_0x272ac9,_0x2ab292){return _0x272ac9(_0x2ab292);}},_0x223503=extension_settings[extensionName],_0x3a88aa=_0x223503[_0x3f6dbf(0xb3,0x6f,0x1a9,0x145)+_0x3f6dbf(0x10e,0x1da,0xb0,0x110)][_0x4bfb33];if(!_0x3a88aa){toastr['error'](_0x14cf80['NiLGX']);return;}const _0x4b7ad4={};_0x4b7ad4['nameCN']=_0x14cf80[_0x46725b(0x16a,0xe5,0x17a,0x158)],_0x4b7ad4[_0x3f6dbf(0x30,-0x24,0x43,-0xe)]=_0x3f6dbf(0xf2,0x3a,0xae,0xbe),_0x4b7ad4[_0x3f6dbf(0xb,0xe0,0x140,0x6b)+'raits']=_0x14cf80[_0x46725b(0x15,0x60,0xef,0xe0)],_0x4b7ad4['facialFeat'+_0x46725b(0x6b,0xf5,0x1b1,0x1c0)]=_0x14cf80[_0x3f6dbf(0xdc,0x17,0xb9,0x74)],_0x4b7ad4['facialFeat'+_0x3f6dbf(-0x10a,-0xd9,-0x2f,-0x50)]=_0x14cf80[_0x3f6dbf(0x1,-0x70,-0x13,0x6c)],_0x4b7ad4[_0x3f6dbf(0x6,0x10b,-0x28,0x8e)+'FW']=_0x14cf80['PPfzb'],_0x4b7ad4[_0x3f6dbf(0x44,0xf,0x3e,0x8e)+_0x46725b(0x128,0xdf,0x20,0x53)]=_0x14cf80[_0x46725b(0x1d5,0x16d,0x113,0x23c)],_0x4b7ad4[_0x46725b(0x177,0xcb,0x34,0xfb)+'W']=_0x14cf80['ZCLCL'],_0x4b7ad4[_0x46725b(0x2,0xcb,0x41,-0x12)+_0x3f6dbf(0x127,0x57,0xc4,0x106)]=_0x14cf80['JLBym'],_0x4b7ad4[_0x46725b(0x167,0x15b,0xa5,0x21d)+'SFW']=_0x14cf80['zapXI'],_0x4b7ad4[_0x3f6dbf(0x20,0x119,0x18a,0xee)+'SFWBack']='上半身NSFW背面',_0x4b7ad4[_0x3f6dbf(0xd7,0x15,0xe8,0xe9)+'FW']=_0x46725b(0x249,0x18d,0x149,0x263),_0x4b7ad4['fullBodyNS'+'FWBack']=_0x14cf80[_0x46725b(0x1a9,0x140,0x1d7,0x18f)];const _0x3310fb=_0x4b7ad4;let _0x22a11d=0xb0*-0x28+-0x17ec+-0xc*-0x449;for(const _0x3a3f8a in _0x3310fb){_0x5eb5c3[_0x3a3f8a]&&_0x5eb5c3[_0x3a3f8a]!==_0x3a88aa[_0x3a3f8a]&&_0x22a11d++;}if(_0x14cf80[_0x3f6dbf(0x113,0xa0,0x6f,0xd1)](_0x22a11d,0x71*0x23+0x1a7+-0x111a)){toastr[_0x46725b(0x1c0,0x13d,0x20b,0x7e)]('没有检测到需要更新的'+'内容');return;}const _0x2bc982='检测到角色\x20\x22'+_0x4bfb33+_0x46725b(0x113,0x52,0x114,0x124)+_0x22a11d+'\x20项更改,是否应用?',_0x169bb5=await stylishConfirm(_0x2bc982);function _0x3f6dbf(_0x386f59,_0x25b1ea,_0x51ef8e,_0x481fba){return _0x28ca41(_0x386f59-0x16c,_0x386f59,_0x51ef8e-0x194,_0x481fba- -0x2c5);}if(!_0x169bb5){if(_0x14cf80[_0x3f6dbf(-0xcb,-0x26,0x20,-0x5c)]===_0x14cf80[_0x3f6dbf(0x2c,-0xa4,-0x130,-0x5c)]){toastr[_0x3f6dbf(0x57,0x7b,0x174,0xd0)](_0x46725b(0x70,0x4b,0xf9,-0x69));return;}else{if(_0x4dd4e7[_0x36486f]){const _0x4708f3=_0x445265[_0x3f6dbf(0x151,0xb5,0x125,0x91)+_0x46725b(0x131,0x19b,0x1b2,0x264)]('char_'+_0x5e61c7);_0x4708f3&&(_0x4708f3[_0x46725b(0x1cc,0x1a5,0x185,0x1b3)]=_0x5d88e3[_0x105499],_0x2d57ea(_0x4708f3)[_0x46725b(0x1df,0x177,0x178,0xe2)]('input'));}}}for(const _0x54698b in _0x3310fb){_0x14cf80['OYuDO'](_0x46725b(0x161,0x135,0x164,0x62),_0x14cf80[_0x46725b(-0x90,0x9,0xb3,0x9a)])?_0x5eb5c3[_0x54698b]&&(_0x3a88aa[_0x54698b]=_0x5eb5c3[_0x54698b]):_0x56ad0a['log']('[character'+_0x3f6dbf(0x107,0x66,0x97,0x137)+'fy]\x20未识别的服装'+_0x46725b(0x265,0x19c,0x130,0x19b)+_0x545059+'\x22');}_0x14cf80[_0x46725b(0xb2,0x26,0x97,-0x9d)](saveSettingsDebounced);const _0x33c662=_0x14cf80[_0x3f6dbf(0xd1,0x1df,0x158,0x130)]($,_0x14cf80[_0x46725b(0x15c,0x146,0x1aa,0x17e)]);_0x33c662[_0x46725b(0x14e,0x18c,0x161,0xfd)]&&(_0x14cf80[_0x46725b(0x9e,0x2b,-0x90,0x25)](_0x14cf80[_0x3f6dbf(0x7f,0x5b,0x1a7,0xf4)],_0x14cf80[_0x3f6dbf(0x1ab,0x16f,0xd9,0x129)])?_0x50f977[_0x43f517]=_0xaab6e1[_0x5f397c]:_0x14cf80['YuKpg'](refreshCharacterSettings,_0x33c662));_0x14cf80[_0x3f6dbf(0x108,0x15d,0x1e3,0x130)](updateFormFields,_0x5eb5c3);function _0x46725b(_0x41dea5,_0x2db1a6,_0x321309,_0x2e255d){return _0x28ca41(_0x41dea5-0x6f,_0x321309,_0x321309-0x16f,_0x2db1a6- -0x258);}console['log']('[character'+'PromptModi'+_0x3f6dbf(0x2d,0xb5,0x115,0x53)+_0x46725b(0x39,0xe9,0x161,0xed)+_0x4bfb33+'\x22');}async function updateOutfitPresetsFromLLM(_0x3599f4){const _0x53361c={'PblPH':function(_0x52f6e2,_0x48f96a){return _0x52f6e2(_0x48f96a);},'RHKKe':_0x5b755a(-0x15f,-0x1e5,-0x20f,-0x203),'NGZYJ':_0x2c78f6(0x5c1,0x51e,0x4f7,0x520),'ibLuc':_0x2c78f6(0x646,0x638,0x64b,0x613),'fSZKa':_0x5b755a(-0x85,-0x106,-0x46,-0x1c1),'mKuvW':_0x2c78f6(0x520,0x4da,0x5a4,0x56e),'JOZzk':_0x5b755a(-0x13f,-0x15d,-0x1da,-0x229),'cKWve':_0x2c78f6(0x66d,0x6be,0x631,0x61b),'lVeUc':_0x2c78f6(0x4e6,0x4c1,0x4a3,0x542),'ljRwP':function(_0x21b54f,_0x4248be){return _0x21b54f===_0x4248be;},'OXUse':_0x2c78f6(0x6b1,0x5ae,0x6a1,0x619),'ngduK':_0x5b755a(-0x1a7,-0xed,-0x8a,-0x8c),'sjWYW':'yzxMn','mfWbi':'vXJpE','NaeDP':function(_0x534219,_0x3089ff){return _0x534219===_0x3089ff;},'SAzoB':'kRXoi','uNTwp':_0x2c78f6(0x49e,0x587,0x5e7,0x56c),'chhCN':function(_0x417a09,_0x4cc76f){return _0x417a09(_0x4cc76f);},'iRyYh':'qrAok','dyReI':function(_0x67b496){return _0x67b496();},'JlmQr':function(_0x46e121,_0x3256b8){return _0x46e121(_0x3256b8);},'hBSFu':_0x5b755a(-0xd5,-0xa5,-0xbe,-0x147)+'-tab-chara'+_0x5b755a(-0x47,-0x97,-0xd7,-0xa7)},_0x1b0e81=extension_settings[extensionName],_0x4a3fa8={};function _0x5b755a(_0x2a47f7,_0x5db8b5,_0x32d63b,_0x1ed7b3){return _0x28ca41(_0x2a47f7-0x176,_0x2a47f7,_0x32d63b-0x157,_0x5db8b5- -0x442);}_0x4a3fa8[_0x2c78f6(0x5b8,0x640,0x61a,0x58f)]=_0x53361c[_0x2c78f6(0x536,0x5d0,0x44d,0x50b)],_0x4a3fa8[_0x5b755a(-0x200,-0x18b,-0x236,-0x247)]=_0x53361c[_0x2c78f6(0x6af,0x615,0x5f1,0x668)],_0x4a3fa8['owner']=_0x53361c['fSZKa'],_0x4a3fa8[_0x2c78f6(0x657,0x637,0x6a2,0x5e0)]=_0x53361c['mKuvW'],_0x4a3fa8[_0x2c78f6(0x615,0x691,0x66d,0x5fb)+_0x2c78f6(0x52a,0x509,0x4bb,0x51e)]=_0x53361c[_0x2c78f6(0x4bf,0x490,0x58f,0x531)],_0x4a3fa8['fullBody']=_0x53361c[_0x2c78f6(0x5dc,0x50c,0x594,0x543)],_0x4a3fa8[_0x5b755a(-0x76,-0x40,-0x43,-0x115)+'ck']=_0x53361c[_0x2c78f6(0x617,0x595,0x61d,0x5ad)];const _0x1bfcd5=_0x4a3fa8;function _0x2c78f6(_0x24b5f5,_0x13ab9e,_0x2fca77,_0xe2ab1d){return _0x28ca41(_0x24b5f5-0x1,_0x2fca77,_0x2fca77-0x10d,_0xe2ab1d-0x290);}for(const _0x33f1df of _0x3599f4){const _0x3d36fd=_0x33f1df[_0x5b755a(-0xaa,-0x143,-0xc7,-0x211)];if(!_0x3d36fd)continue;const _0x15b195=_0x1b0e81[_0x2c78f6(0x756,0x5b5,0x6c9,0x687)+'ets']?.[_0x3d36fd];if(_0x15b195){let _0x52851b=0x320+-0x1d22+-0x1a02*-0x1;for(const _0x5d24a0 in _0x1bfcd5){if(_0x53361c['ljRwP'](_0x53361c[_0x2c78f6(0x60c,0x5d4,0x719,0x694)],_0x53361c[_0x5b755a(-0x114,-0x3e,0x39,0xe)]))_0x33f1df[_0x5d24a0]&&_0x33f1df[_0x5d24a0]!==_0x15b195[_0x5d24a0]&&(_0x53361c[_0x2c78f6(0x646,0x4ef,0x50c,0x5bc)]===_0x53361c[_0x2c78f6(0x557,0x4ea,0x5cb,0x5bc)]?_0x52851b++:_0x5cc730[_0x5b755a(-0x80,-0x137,-0x12d,-0xe0)](..._0x1aef09[_0x5b755a(-0x236,-0x1a6,-0x224,-0xdd)]));else{const _0x3b4a3e=_0x53361c['PblPH'](_0x1976e2,_0x2e1c2d);if(_0x3b4a3e){const _0x4b0984={};_0x4b0984['type']=_0x53361c[_0x2c78f6(0x528,0x5ad,0x563,0x55f)],_0x4b0984['data']=_0x3b4a3e,_0x4b0984[_0x2c78f6(0x596,0x56b,0x442,0x51b)]=_0x3f43ca,_0x4b0984[_0x2c78f6(0x6ff,0x63b,0x6dc,0x658)+_0x5b755a(-0x197,-0x19c,-0x12c,-0x11a)]=[],_0x29db34['push'](_0x4b0984);}}}if(_0x53361c[_0x5b755a(-0x1d1,-0x16a,-0x14c,-0x184)](_0x52851b,-0x1312*-0x2+0x116c+-0x3790)){console[_0x5b755a(-0x24,-0x93,-0x101,-0xf9)](_0x5b755a(-0x101,-0x19b,-0x173,-0x174)+_0x5b755a(0x89,-0x46,0x36,0x90)+_0x2c78f6(0x68e,0x635,0x51b,0x5e1)+_0x3d36fd+'\x22\x20没有变更');continue;}const _0x48b2e4=_0x5b755a(-0x1fc,-0x183,-0x1a8,-0xe9)+_0x3d36fd+_0x5b755a(-0xd0,-0x198,-0x25c,-0x14b)+_0x52851b+_0x2c78f6(0x513,0x630,0x649,0x5cf),_0x5e0ffb=await _0x53361c[_0x5b755a(-0x64,-0x114,-0xe2,-0x7c)](stylishConfirm,_0x48b2e4);if(!_0x5e0ffb){if(_0x5b755a(-0x10f,-0x134,-0x1ec,-0x19a)!==_0x53361c['sjWYW'])continue;else _0x53491b++;}for(const _0x3f0f62 in _0x1bfcd5){'MaLtL'===_0x53361c[_0x5b755a(-0xf4,-0x126,-0xe1,-0xa7)]?_0x13cdc5[_0x2c78f6(0x67c,0x5d3,0x715,0x63f)](_0x2c78f6(0x48b,0x4da,0x4ba,0x537)+_0x5b755a(0x61,-0x46,-0xf0,0x68)+_0x2c78f6(0x440,0x584,0x43d,0x51a)+_0x2c78f6(0x5d3,0x66f,0x6cb,0x684)+_0x33b6a8+'\x22'):_0x33f1df[_0x3f0f62]&&(_0x53361c[_0x5b755a(-0x1e8,-0x1c8,-0xfa,-0x291)](_0x53361c['SAzoB'],_0x53361c['uNTwp'])?_0x1fc8c0[_0x2c78f6(0x56b,0x53e,0x5c3,0x59b)](..._0xdea277['matchedOut'+_0x5b755a(-0x1b1,-0x19c,-0x126,-0xc5)]):_0x15b195[_0x3f0f62]=_0x33f1df[_0x3f0f62]);}console[_0x5b755a(-0x142,-0x93,-0xcd,-0x93)](_0x2c78f6(0x484,0x5fa,0x4d6,0x537)+_0x5b755a(-0x4d,-0x46,-0x25,0x6d)+'fy]\x20已更新服装预'+'设\x20\x22'+_0x3d36fd+'\x22');}else{const _0x111882=_0x5b755a(-0x159,-0xa3,-0x89,0x2b)+_0x3d36fd+'\x22,是否录入?',_0x1b855a=await _0x53361c[_0x2c78f6(0x5b8,0x50c,0x539,0x541)](stylishConfirm,_0x111882);if(!_0x1b855a)continue;!_0x1b0e81[_0x5b755a(-0x1c,-0x4b,-0x8,0x57)+_0x2c78f6(0x589,0x532,0x5e4,0x58c)]&&(_0x1b0e81[_0x2c78f6(0x695,0x631,0x739,0x687)+_0x2c78f6(0x633,0x4af,0x5fd,0x58c)]={});const _0x161db6={};_0x161db6['nameCN']=_0x33f1df[_0x5b755a(-0x8b,-0x143,-0xb2,-0x1ab)],_0x161db6['nameEN']=_0x33f1df[_0x2c78f6(0x4c9,0x568,0x4b4,0x547)]||'',_0x161db6['owner']=_0x33f1df['owner']||'',_0x161db6['upperBody']=_0x33f1df[_0x5b755a(-0x132,-0xf2,-0x100,-0x171)]||'',_0x161db6[_0x5b755a(-0x121,-0xd7,-0x27,-0x174)+'ack']=_0x33f1df[_0x5b755a(-0x188,-0xd7,-0x157,-0x84)+_0x2c78f6(0x579,0x575,0x4f2,0x51e)]||'',_0x161db6['fullBody']=_0x33f1df[_0x5b755a(-0x199,-0x1d3,-0x1cc,-0x20d)]||'',_0x161db6[_0x2c78f6(0x632,0x5d9,0x75d,0x692)+'ck']=_0x33f1df[_0x2c78f6(0x633,0x67f,0x5bf,0x692)+'ck']||'',_0x1b0e81['outfitPres'+'ets'][_0x3d36fd]=_0x161db6,console[_0x5b755a(-0x80,-0x93,-0x2,-0x160)](_0x2c78f6(0x4d4,0x4eb,0x4df,0x537)+_0x5b755a(-0xcd,-0x46,0x2f,0x3d)+_0x5b755a(-0x188,-0x1d6,-0x1ab,-0x16b)+_0x5b755a(-0x1ca,-0x101,-0x19b,-0xc2)+_0x3d36fd+'\x22');if(_0x33f1df[_0x2c78f6(0x471,0x4e4,0x5e9,0x527)]&&_0x33f1df[_0x5b755a(-0x115,-0x1ab,-0x1b4,-0x238)][_0x5b755a(-0xe1,-0x10f,-0x13f,-0xf2)]()){const _0x399ad8=_0x33f1df[_0x5b755a(-0x11f,-0x1ab,-0x199,-0x240)][_0x5b755a(-0xb7,-0x10f,-0x170,-0x15b)]()['toLowerCas'+'e']()[_0x5b755a(-0x128,-0x14b,-0xc5,-0x16d)](/\s+/g,'');for(const [_0xf12f42,_0x4e381e]of Object[_0x2c78f6(0x570,0x55a,0x658,0x615)](_0x1b0e81[_0x2c78f6(0x64a,0x5c2,0x74d,0x69a)+_0x2c78f6(0x63b,0x6e5,0x673,0x665)]||{})){if(_0x53361c[_0x5b755a(-0x29c,-0x1c8,-0x165,-0x192)](_0x53361c[_0x5b755a(-0xdf,-0x16b,-0x11d,-0xa3)],_0x53361c[_0x5b755a(-0x201,-0x16b,-0x187,-0x20f)])){if(_0x4e381e[_0x2c78f6(0x4f9,0x53b,0x5a9,0x547)]&&_0x53361c['NaeDP'](_0x4e381e['nameEN'][_0x2c78f6(0x54d,0x544,0x43e,0x508)+'e']()['replace'](/\s+/g,''),_0x399ad8)){!_0x4e381e[_0x2c78f6(0x678,0x64c,0x647,0x622)]&&(_0x4e381e[_0x2c78f6(0x6b0,0x5b4,0x5be,0x622)]=[]);!_0x4e381e[_0x2c78f6(0x58c,0x66e,0x67a,0x622)][_0x2c78f6(0x65a,0x653,0x5c6,0x634)](_0x3d36fd)&&(_0x4e381e['outfits'][_0x2c78f6(0x54b,0x4be,0x575,0x59b)](_0x3d36fd),console['log'](_0x2c78f6(0x575,0x4cc,0x45d,0x537)+_0x5b755a(0x11,-0x46,-0xae,-0x107)+_0x5b755a(-0x39,-0xf1,-0x72,-0x34)+_0x3d36fd+_0x5b755a(-0x144,-0x8d,-0x135,-0x2d)+_0xf12f42+'\x22'));break;}}else return _0x425bba;}}}}_0x53361c['dyReI'](saveSettingsDebounced);const _0x3094f7=_0x53361c[_0x5b755a(0x14,-0xa0,-0x63,-0x95)]($,_0x53361c[_0x5b755a(-0x95,-0xd3,-0x30,0x7)]);_0x3094f7[_0x2c78f6(0x71e,0x736,0x6ee,0x674)]&&_0x53361c[_0x2c78f6(0x665,0x561,0x69a,0x632)](refreshCharacterSettings,_0x3094f7);}function updateFormFields(_0x4455f6){function _0x4c9dd5(_0x52db67,_0x634f0e,_0x6da862,_0x31348b){return _0x28ca41(_0x52db67-0x13b,_0x634f0e,_0x6da862-0x1e3,_0x31348b- -0x236);}const _0x5edf6f={'rWRAz':function(_0x35d496,_0x16a41a){return _0x35d496!==_0x16a41a;},'IQxbk':_0x4c9dd5(0x141,0x266,0xe7,0x196),'dMOGo':function(_0x48dbe8,_0x1105b3){return _0x48dbe8(_0x1105b3);},'BbhJq':_0x4c9dd5(0xae,0xb,-0x28,0x81),'MQLEK':_0x4c9dd5(0x124,0x166,0xc5,0xfa)+_0x498a8a(0x428,0x332,0x37e,0x36f),'qWyQj':_0x4c9dd5(0x107,0x1f1,0xea,0x189)+_0x4c9dd5(0x1c6,0x160,0x1e8,0x117),'PKVOs':_0x4c9dd5(0xae,0x22d,0xfa,0x189)+_0x498a8a(0x1c9,0x2a6,0x24d,0x20f),'IMirs':_0x498a8a(0x3ef,0x39d,0x32b,0x3ae)+'FW','dqOsB':_0x498a8a(0x38d,0x31a,0x2fb,0x32f)+'W','dEiHn':_0x498a8a(0x422,0x2b1,0x38b,0x2e9)+_0x4c9dd5(0x14e,0x7e,0xb3,0x95),'OSIzZ':'upperBodyN'+'SFWBack','tZlTU':_0x4c9dd5(0x1ba,0xe6,0x1f6,0x178)+'FW','HIRKi':_0x4c9dd5(0x1bc,0x22e,0xda,0x178)+_0x4c9dd5(0x8f,0xb6,0x57,0x101)},_0x1f0006=[_0x498a8a(0x2dc,0x3a2,0x2d7,0x386),_0x5edf6f['BbhJq'],_0x5edf6f['MQLEK'],_0x5edf6f[_0x4c9dd5(-0xb,0xca,0xf6,0x3d)],_0x5edf6f[_0x498a8a(0x424,0x3e6,0x356,0x351)],_0x5edf6f[_0x4c9dd5(0xcf,0x86,-0x43,0x52)],'upperBodyS'+_0x498a8a(0x3c2,0x256,0x30f,0x258),_0x5edf6f[_0x498a8a(0x208,0x306,0x2dc,0x219)],'fullBodySF'+_0x4c9dd5(0x24d,0x130,0x272,0x195),_0x5edf6f['dEiHn'],_0x5edf6f[_0x4c9dd5(0x60,0xcf,0x11b,0x8d)],_0x5edf6f[_0x498a8a(0x2bf,0x1b5,0x249,0x1c1)],_0x5edf6f[_0x498a8a(0x2c0,0x1ad,0x272,0x31b)]];function _0x498a8a(_0x370f3e,_0x106919,_0x5eb61f,_0x2086dd){return _0x28ca41(_0x370f3e-0xe5,_0x370f3e,_0x5eb61f-0x1bc,_0x5eb61f- -0x28);}_0x1f0006[_0x498a8a(0x278,0x222,0x2ef,0x2a7)](_0x268c8d=>{function _0x2bd08e(_0x336887,_0x160641,_0x62509a,_0xfdf186){return _0x4c9dd5(_0x336887-0x1b4,_0x62509a,_0x62509a-0xd7,_0xfdf186-0x2c0);}function _0xcf2857(_0x54bcf3,_0x57a503,_0x246335,_0x4cdf8b){return _0x498a8a(_0x54bcf3,_0x57a503-0x117,_0x57a503-0x2f,_0x4cdf8b-0x163);}if(_0x4455f6[_0x268c8d]){const _0x60ed9e=document[_0xcf2857(0x408,0x35d,0x355,0x2ae)+'ById'](_0x2bd08e(0x2e3,0x283,0x274,0x328)+_0x268c8d);_0x60ed9e&&(_0x5edf6f[_0x2bd08e(0x273,0x2a7,0x33f,0x30c)](_0x2bd08e(0x40d,0x37d,0x44a,0x456),_0x5edf6f[_0x2bd08e(0x3e1,0x483,0x4c6,0x47a)])?_0x4566a8[_0x10061b]=_0x30d9ae[_0x488d03]:(_0x60ed9e[_0xcf2857(0x3d4,0x404,0x33a,0x4c0)]=_0x4455f6[_0x268c8d],_0x5edf6f[_0x2bd08e(0x2aa,0x2dd,0x374,0x322)]($,_0x60ed9e)[_0xcf2857(0x4a0,0x3d6,0x416,0x48b)](_0x2bd08e(0x360,0x488,0x495,0x3e7))));}});}