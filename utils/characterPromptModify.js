(function(_0x2eceda,_0x491a16){function _0x6ee9ad(_0x3527e0,_0x3fdbe4,_0x515570,_0x58befe){return _0x639d(_0x515570- -0x3e0,_0x3527e0);}const _0x6dfd77=_0x2eceda();function _0x3d8b31(_0x138345,_0x291b56,_0x262e1e,_0x3826bf){return _0x639d(_0x291b56- -0x2e8,_0x262e1e);}while(!![]){try{const _0xfcfac6=parseInt(_0x3d8b31(-0x3f,-0xbc,-0x71,-0x9))/(0xad2*-0x3+0xef*-0xa+-0x29*-0x105)*(parseInt(_0x3d8b31(-0x1bb,-0x16c,-0x1b2,-0x15b))/(-0x1c83+0x1*-0x11f3+0x2*0x173c))+-parseInt(_0x6ee9ad(-0x18f,-0xdb,-0x14b,-0x157))/(0xa5*-0x2b+-0x1851+-0x1*-0x340b)+parseInt(_0x6ee9ad(-0x305,-0x375,-0x2ad,-0x2b4))/(-0x12d1*0x1+0x1*-0x7f4+0x1*0x1ac9)+parseInt(_0x3d8b31(-0x87,-0x130,-0x179,-0x154))/(-0x3*0xa8e+0xff0+0xfbf)*(parseInt(_0x3d8b31(-0x102,-0x140,-0x180,-0x140))/(0x1*0x22ea+0x1efc+0x11*-0x3e0))+-parseInt(_0x6ee9ad(-0x254,-0x1c7,-0x187,-0x153))/(0x2032*-0x1+-0x2343+0x437c)+parseInt(_0x6ee9ad(-0x1a3,-0x194,-0x23e,-0x1a2))/(-0x724*-0x5+0x2167+-0x4513)*(-parseInt(_0x6ee9ad(-0xc9,-0x1a6,-0x158,-0x223))/(0x1343+0x20f5+-0x3*0x1165))+parseInt(_0x3d8b31(-0x100,-0x142,-0x98,-0x132))/(0x19a4*0x1+-0x1114*-0x1+-0x2aae);if(_0xfcfac6===_0x491a16)break;else _0x6dfd77['push'](_0x6dfd77['shift']());}catch(_0x1915bd){_0x6dfd77['push'](_0x6dfd77['shift']());}}}(_0x2d8f,-0xacf9*-0x5+-0xca2c3+0x16d77b));const _0x30fdd2=(function(){const _0x52ddcf={};_0x52ddcf[_0x57164e(0x6de,0x709,0x64c,0x636)]=_0x1444bc(0xeb,0x13c,0x5b,0xe9);function _0x1444bc(_0x261463,_0x2347db,_0x4bdd04,_0x33704d){return _0x639d(_0x33704d- -0x12d,_0x2347db);}function _0x57164e(_0x45af42,_0x5c3a60,_0x263391,_0x1f4dcf){return _0x639d(_0x263391-0x3d8,_0x1f4dcf);}_0x52ddcf['XSfDP']=_0x1444bc(0xe8,0xb5,0x1c8,0x179);const _0x10c038=_0x52ddcf;let _0x4ff3d1=!![];return function(_0x532952,_0x32df37){function _0x35ed53(_0x3757b6,_0x296a72,_0x397f4e,_0x10d5d7){return _0x1444bc(_0x3757b6-0x1e1,_0x3757b6,_0x397f4e-0x3f,_0x397f4e- -0xcd);}const _0x5291d4={};_0x5291d4['ybdCg']=function(_0x3c6389,_0xedccd7){return _0x3c6389!==_0xedccd7;},_0x5291d4[_0x31d221(0x4e1,0x536,0x5ab,0x553)]=_0x10c038['OdUwK'],_0x5291d4['Pwbfn']=_0x10c038[_0x35ed53(-0x5e,-0x4d,0x28,0x106)];function _0x31d221(_0xd9a346,_0x5f3843,_0x1c4f6f,_0x9f95ab){return _0x1444bc(_0xd9a346-0x112,_0xd9a346,_0x1c4f6f-0x187,_0x5f3843-0x47a);}const _0x2734ac=_0x5291d4,_0x5eb6a8=_0x4ff3d1?function(){function _0x45de40(_0x272a76,_0x571e32,_0x393313,_0x450f4d){return _0x35ed53(_0x393313,_0x571e32-0x1e,_0x272a76- -0x39,_0x450f4d-0xcd);}function _0x5a9c4a(_0x45abf6,_0x5cf901,_0x43e428,_0x467e8f){return _0x35ed53(_0x43e428,_0x5cf901-0x72,_0x467e8f-0x48,_0x467e8f-0x124);}if(_0x2734ac[_0x45de40(0x63,-0x7b,0xfb,-0x42)](_0x2734ac['OXDGa'],_0x2734ac[_0x45de40(0x7,0xb4,-0xd6,0x89)])){if(_0x32df37){const _0x913030=_0x32df37[_0x45de40(-0x88,-0xe8,0x51,0x2d)](_0x532952,arguments);return _0x32df37=null,_0x913030;}}else _0x24bbf4?_0x51c859['matchedOut'+'fits'][_0x5a9c4a(0x99,0xaa,0x131,0xde)](_0xfd96d6[_0x5a9c4a(0x218,0x58,0x14e,0x141)]):_0x3d4e81['push'](_0x5013ea[_0x5a9c4a(0x74,0x21b,0x185,0x141)]);}:function(){};return _0x4ff3d1=![],_0x5eb6a8;};}()),_0x1bc0e0=_0x30fdd2(this,function(){const _0x3fae88={};function _0x3eb5ce(_0x5b9a9c,_0x1f02a0,_0x49f2c7,_0x11cebd){return _0x639d(_0x5b9a9c- -0x1a5,_0x49f2c7);}function _0xd4c5cc(_0x32091f,_0x2c81d4,_0x4b9874,_0x32fb80){return _0x639d(_0x4b9874- -0xde,_0x2c81d4);}_0x3fae88[_0xd4c5cc(0x165,0x1cf,0x20a,0x1be)]='(((.+)+)+)'+'+$';const _0x3bcb60=_0x3fae88;return _0x1bc0e0[_0x3eb5ce(0x98,0xbd,0x10b,0xdf)]()[_0x3eb5ce(0x3c,0x116,0x81,0x4a)](_0x3bcb60['ZcuBM'])[_0xd4c5cc(0x1c6,0x186,0x15f,0xaa)]()[_0xd4c5cc(0x92,0x12e,0xcb,-0x11)+'r'](_0x1bc0e0)['search'](_0x3eb5ce(0xf,0x67,0xdd,-0xb2)+'+$');});_0x1bc0e0();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x46293e}from'./promptProcessor.js';function replacePlaceholder(_0x1889b2,_0x20711d,_0x47be0d,_0x452e23){const _0x2078d6={'ONjpc':function(_0x540d11,_0x147cb4,_0x280325,_0x23275d,_0x4324b4){return _0x540d11(_0x147cb4,_0x280325,_0x23275d,_0x4324b4);},'IboJs':function(_0xcfd8e5,_0x3feecd){return _0xcfd8e5===_0x3feecd;},'ojmWD':'string','qHBLX':_0x1e2af8(0x2c8,0x257,0x293,0x265)};if(_0x2078d6[_0x2297e5(0x2c2,0x173,0x1f2,0x2cb)](typeof _0x1889b2,_0x2078d6['ojmWD']))return _0x1e2af8(0x313,0x261,0x344,0x312)===_0x2078d6['qHBLX']?(_0x8d6931&&_0x27cb43[_0x1e2af8(0x266,0x2b8,0x2de,0x2ae)](_0x1b5e3a)&&(_0x4c8ee9&&_0x1e1faf['add'](_0x415adc)),_0x47cf86[_0x1e2af8(0x159,0x23b,0x226,0x31a)](_0x298fcb,_0x54ab1e)):(_0x47be0d&&_0x1889b2['includes'](_0x20711d)&&(_0x452e23&&_0x452e23[_0x1e2af8(0x2b8,0x1f6,0x21a,0x2ae)](_0x20711d)),_0x1889b2[_0x1e2af8(0x29f,0x23b,0x1c7,0x22b)](_0x20711d,_0x47be0d));if(Array[_0x1e2af8(0x279,0x2bd,0x1ee,0x24e)](_0x1889b2)){if(_0x1e2af8(0x207,0x1a1,0x289,0x1d2)!=='etLFX'){const _0x29dc8a={};for(const _0x154afa in _0x6ef127){_0x29dc8a[_0x154afa]=_0x2078d6[_0x2297e5(0x21a,0x9c,0x186,0x166)](_0x42b459,_0x388611[_0x154afa],_0x436caf,_0x5c25fd,_0x4f6831);}return _0x29dc8a;}else return _0x1889b2[_0x2297e5(0xb0,-0x5,0xcc,0xbf)](_0x1c152a=>replacePlaceholder(_0x1c152a,_0x20711d,_0x47be0d,_0x452e23));}function _0x2297e5(_0x3a79a8,_0x57c015,_0x509ac3,_0x13225f){return _0x639d(_0x509ac3- -0x6b,_0x13225f);}if(_0x1889b2&&typeof _0x1889b2===_0x1e2af8(0x258,0x1b8,0x1ad,0x160)){const _0x2b6bd5={};for(const _0x31810c in _0x1889b2){_0x2b6bd5[_0x31810c]=_0x2078d6[_0x2297e5(0x25f,0x126,0x186,0x122)](replacePlaceholder,_0x1889b2[_0x31810c],_0x20711d,_0x47be0d,_0x452e23);}return _0x2b6bd5;}function _0x1e2af8(_0x51c866,_0x472505,_0xd8fd39,_0x4229f3){return _0x639d(_0x472505-0x9,_0x4229f3);}return _0x1889b2;}function attachImagesToMessage(_0x2e84c6,_0x3e9695,_0x4dc6a2,_0x2a3712=_0x904c37(0xcb,-0x8b,0x27,0x51)){const _0x5e5883={};_0x5e5883[_0x52712c(0x505,0x491,0x50b,0x549)]=function(_0x13080a,_0x4b85da){return _0x13080a===_0x4b85da;},_0x5e5883[_0x52712c(0x5cf,0x63d,0x565,0x5a8)]='string',_0x5e5883[_0x5d5c76(0x523,0x5aa,0x4e0,0x495)]=function(_0x566758,_0x8df0c1){return _0x566758===_0x8df0c1;},_0x5e5883[_0x5d5c76(0x540,0x410,0x463,0x391)]=_0x5d5c76(0x442,0x369,0x44b,0x498),_0x5e5883[_0x5d5c76(0x4b8,0x53e,0x504,0x535)]=_0x52712c(0x4fe,0x50c,0x620,0x59f),_0x5e5883[_0x52712c(0x44e,0x503,0x451,0x4a0)]=_0x52712c(0x561,0x5f3,0x688,0x631),_0x5e5883[_0x52712c(0x50a,0x58a,0x403,0x4dd)]=_0x52712c(0x5ce,0x59b,0x6be,0x62b);function _0x5d5c76(_0x2f47c8,_0x2a024c,_0x1aeb1b,_0x2873ec){return _0x904c37(_0x2f47c8-0x51,_0x2a024c,_0x1aeb1b-0x3f,_0x1aeb1b-0x439);}_0x5e5883[_0x5d5c76(0x453,0x58f,0x4f1,0x479)]=function(_0x59ef95,_0x1c20b5){return _0x59ef95<_0x1c20b5;},_0x5e5883['odiDT']=function(_0x2aeab4,_0x521072){return _0x2aeab4!==_0x521072;},_0x5e5883[_0x52712c(0x512,0x593,0x6d1,0x5f9)]='CTsbJ',_0x5e5883[_0x52712c(0x491,0x4d0,0x515,0x48a)]='FybGS',_0x5e5883[_0x52712c(0x520,0x4d4,0x550,0x490)]=function(_0xa059cf,_0x42e11a){return _0xa059cf>_0x42e11a;},_0x5e5883['wvUxF']=function(_0x5364c6,_0x5da804){return _0x5364c6===_0x5da804;},_0x5e5883['ZxNMc']='LcAAO';const _0x4a2d33=_0x5e5883;if(!_0x4dc6a2||_0x4a2d33[_0x52712c(0x558,0x586,0x4c5,0x549)](_0x4dc6a2[_0x52712c(0x530,0x60e,0x50a,0x5df)],0x26c8+0xed5*0x2+0x2*-0x2239)||_0x4a2d33[_0x52712c(0x545,0x581,0x5b1,0x599)](_0x3e9695,-0xef3+0x3*0x28a+-0x755*-0x1)||_0x3e9695>=_0x2e84c6[_0x5d5c76(0x52d,0x49e,0x537,0x513)]){if(_0x4a2d33['odiDT']('CTsbJ',_0x4a2d33[_0x5d5c76(0x5ae,0x600,0x551,0x62b)]))_0x9dd4da=_0x48d860,_0x3a2ae7['push'](_0x233626);else return _0x2e84c6;}const _0x36afb9=[..._0x2e84c6],_0x35c623=_0x36afb9[_0x3e9695],_0x287c9c=[];if(_0x4a2d33[_0x52712c(0x4b9,0x4d9,0x5d1,0x549)](typeof _0x35c623[_0x52712c(0x53c,0x46a,0x526,0x54c)],_0x4a2d33['VIWAg'])){const _0x51d944={};_0x51d944[_0x5d5c76(0x391,0x3c0,0x3c3,0x38b)]=_0x4a2d33['EzIas'],_0x51d944[_0x52712c(0x61b,0x67e,0x4fa,0x59f)]=_0x35c623[_0x5d5c76(0x417,0x58b,0x4a4,0x56d)],_0x287c9c[_0x52712c(0x537,0x5bd,0x523,0x5d4)](_0x51d944);}else Array['isArray'](_0x35c623['content'])&&(_0x4a2d33[_0x52712c(0x49d,0x412,0x4aa,0x46f)](_0x4a2d33[_0x5d5c76(0x38e,0x3ce,0x3e2,0x4bf)],_0x4a2d33[_0x52712c(0x455,0x449,0x47a,0x48a)])?_0x5c7241[_0x52712c(0x579,0x61a,0x6d2,0x5fc)](_0x52712c(0x5c6,0x5eb,0x5dc,0x533)+_0x5d5c76(0x546,0x487,0x52e,0x5d8)+_0x52712c(0x51a,0x5a5,0x57c,0x580)+_0x52712c(0x59f,0x498,0x4e6,0x50a)+_0x454fa3+'\x22'):_0x287c9c[_0x5d5c76(0x456,0x4a1,0x52c,0x4be)](..._0x35c623[_0x5d5c76(0x432,0x3ed,0x4a4,0x4a9)]));function _0x52712c(_0x41f63a,_0x42bd8f,_0x43ff9d,_0x45d5ff){return _0x904c37(_0x41f63a-0xd4,_0x42bd8f,_0x43ff9d-0x69,_0x45d5ff-0x4e1);}if(_0x4a2d33['ajPyW'](_0x4dc6a2[_0x5d5c76(0x460,0x529,0x537,0x4de)],0x1efd*-0x1+0x25+0x6*0x524)){if(_0x4a2d33[_0x52712c(0x52b,0x5eb,0x4bb,0x52b)](_0x4a2d33['ZxNMc'],_0x4a2d33['ZxNMc'])){const _0x3e0de1={};_0x3e0de1['type']=_0x4a2d33[_0x5d5c76(0x573,0x5e2,0x504,0x4a6)],_0x3e0de1[_0x5d5c76(0x434,0x555,0x4f7,0x50e)]='\x0a[以下是用户上传的'+_0x4dc6a2[_0x5d5c76(0x5d2,0x61b,0x537,0x583)]+'张'+_0x2a3712+']',_0x287c9c[_0x5d5c76(0x50e,0x575,0x52c,0x5bf)](_0x3e0de1);}else _0x1d880f[_0x29ea65[_0x4e3270]]=_0x15bc96;}_0x4dc6a2[_0x52712c(0x557,0x4ea,0x647,0x5d1)]((_0x130373,_0x3c69de)=>{const _0x43acd9=_0x4a2d33[_0x4b58aa(0x15b,0x209,0x2be,0x214)](typeof _0x130373,_0x4a2d33['VIWAg'])?_0x130373:_0x130373[_0x5dd436(0x1e3,0x1d4,0x2b4,0x296)],_0x53e2e6=_0x4a2d33['uexSv'](typeof _0x130373,_0x4a2d33['dsCSG'])&&_0x130373['name']?_0x130373[_0x4b58aa(0x2c6,0x3b6,0x2f0,0x2dd)]:''+_0x2a3712+(_0x3c69de+(-0x11b*0xd+-0x7*-0x2e3+-0x5d5));function _0x4b58aa(_0x2126d9,_0x422475,_0x387f18,_0x1152f2){return _0x52712c(_0x2126d9-0xad,_0x422475,_0x387f18-0x43,_0x1152f2- -0x335);}const _0x5b1516={};_0x5b1516[_0x4b58aa(0xcb,0xe8,0x50,0x136)]=_0x4a2d33[_0x5dd436(0x400,0x301,0x387,0x44c)],_0x5b1516['text']='['+_0x53e2e6+']',_0x287c9c[_0x5dd436(0x494,0x3c1,0x3af,0x35b)](_0x5b1516);let _0xd31c5d=_0x43acd9;!_0x43acd9[_0x5dd436(0x2b7,0x38e,0x2f5,0x39d)](_0x4a2d33[_0x4b58aa(0x132,0x1b5,0x12d,0x16b)])&&(_0xd31c5d=_0x4b58aa(0x163,0x2ad,0x102,0x1d7)+_0x5dd436(0x41c,0x3dc,0x3db,0x393)+'4,'+_0x43acd9);const _0x21b40d={};function _0x5dd436(_0x14d580,_0x5cb47b,_0x1e92bf,_0x4663d2){return _0x5d5c76(_0x14d580-0x36,_0x14d580,_0x1e92bf- -0x17d,_0x4663d2-0x10);}_0x21b40d['url']=_0xd31c5d,_0x21b40d[_0x4b58aa(0x228,0x1fb,0x388,0x2b9)]=_0x4a2d33[_0x4b58aa(0xdc,0x10c,0x1db,0x1a8)];const _0xb86fe4={};_0xb86fe4[_0x4b58aa(0xb9,0x152,0x188,0x136)]=_0x5dd436(0x1e3,0x19a,0x282,0x2cc),_0xb86fe4['image_url']=_0x21b40d,_0x287c9c[_0x5dd436(0x45b,0x32f,0x3af,0x2e9)](_0xb86fe4);});const _0x4cc166={..._0x35c623};return _0x4cc166[_0x52712c(0x631,0x60f,0x516,0x54c)]=_0x287c9c,_0x36afb9[_0x3e9695]=_0x4cc166,_0x36afb9;}function findMessageIndexWithPlaceholder(_0x201dab,_0x32bac8){const _0x48204={};_0x48204['PrXBs']=function(_0x526f52,_0x1d2155){return _0x526f52<_0x1d2155;},_0x48204[_0x2fe6d7(0x1a9,0xdd,0xeb,0x132)]=function(_0x3e8e0d,_0x1e0ed1){return _0x3e8e0d===_0x1e0ed1;},_0x48204[_0x2dd549(-0x3c,-0x12b,0x6a,-0x51)]=_0x2fe6d7(0x173,0x126,0xc0,0x24c),_0x48204[_0x2fe6d7(0xbe,0x18c,0x14e,-0x1b)]=function(_0x5c1617,_0x2eb9d8){return _0x5c1617!==_0x2eb9d8;};function _0x2fe6d7(_0x247b44,_0x4bc0ed,_0x1e72a3,_0x2e84c2){return _0x904c37(_0x247b44-0x156,_0x4bc0ed,_0x1e72a3-0x8d,_0x247b44-0x64);}_0x48204[_0x2dd549(0xa2,-0x24,0x4,0x20)]=_0x2dd549(-0x142,-0x5b,-0x197,-0xed),_0x48204[_0x2dd549(-0xac,-0x15a,0xe,-0xa0)]=_0x2fe6d7(0x122,0x10e,0x12a,0x1c2);const _0x5615b8=_0x48204;function _0x2dd549(_0x2dd2ce,_0x40c488,_0x35b9bd,_0x26c6e9){return _0x904c37(_0x2dd2ce-0x1cc,_0x35b9bd,_0x35b9bd-0xd8,_0x26c6e9- -0xdc);}for(let _0x3c6375=-0x1f76+0x1531*-0x1+0x34a7;_0x5615b8['PrXBs'](_0x3c6375,_0x201dab[_0x2dd549(-0x38,0x11,0x6e,0x22)]);_0x3c6375++){const _0x19132b=_0x201dab[_0x3c6375];if(_0x5615b8[_0x2fe6d7(0x1a9,0x18e,0xcc,0x10f)](typeof _0x19132b[_0x2fe6d7(0xcf,0x10a,0x2,0xaa)],'string')&&_0x19132b[_0x2fe6d7(0xcf,0x100,0x165,0xa0)]['includes'](_0x32bac8)){if(_0x5615b8[_0x2dd549(-0x7c,-0xd7,0x43,-0x51)]===_0x5615b8[_0x2fe6d7(0xef,0x48,0x19e,0x146)])return _0x3c6375;else{const _0x451b7e=_0x1e0036['apply'](_0x37b97e,arguments);return _0x143d62=null,_0x451b7e;}}else{if(Array[_0x2fe6d7(0x17b,0x21c,0x233,0x163)](_0x19132b[_0x2dd549(-0x15b,-0x94,-0x43,-0x71)])){if(_0x5615b8['SpZeg'](_0x5615b8[_0x2dd549(-0xaf,0xab,-0x95,0x20)],_0x2fe6d7(0x53,-0x4b,0xe9,0xf2)))_0x790bf6[_0xb9a8fa[_0x243072]]=_0xdf3f45;else for(const _0x26d633 of _0x19132b[_0x2fe6d7(0xcf,-0x9,0x12e,0x1)]){if(_0x26d633[_0x2fe6d7(-0x12,0x5a,0x13,-0x61)]===_0x5615b8[_0x2fe6d7(0xa0,0x9b,0x147,0x147)]&&_0x26d633[_0x2dd549(-0x62,-0x7d,-0x40,-0x1e)][_0x2fe6d7(0x176,0xed,0x1e6,0x12b)](_0x32bac8))return _0x3c6375;}}}}return-(-0x151*0x19+0x1f64+0x186);}function generateRequestId(){function _0x18b2d8(_0x33ef03,_0x1078a6,_0xec6438,_0x5ab2ac){return _0x904c37(_0x33ef03-0x1da,_0x5ab2ac,_0xec6438-0x68,_0xec6438- -0x14c);}const _0x8a1b4a={'faLGp':function(_0x59eac5,_0x562f2d){return _0x59eac5(_0x562f2d);},'uABUY':function(_0x278126,_0x508e7e){return _0x278126===_0x508e7e;},'EpVaR':_0x18b2d8(-0x113,-0x1e7,-0x156,-0xff),'UOgWM':_0x378d46(0x431,0x4ac,0x3dd,0x481),'VlaiZ':function(_0x12479d,_0x12e42d){return _0x12479d+_0x12e42d;}};if(crypto&&crypto[_0x18b2d8(-0x178,-0xa9,-0x160,-0x192)]){if(_0x8a1b4a[_0x18b2d8(-0x80,-0x7d,-0x8b,-0x2e)](_0x8a1b4a[_0x18b2d8(0x6e,-0x149,-0x60,-0x41)],_0x8a1b4a[_0x18b2d8(0x35,0x92,-0xc,-0x47)]))_0x8a1b4a[_0x378d46(0x454,0x430,0x53b,0x443)](_0x115143,_0x36831a),_0x175746=null;else return crypto[_0x378d46(0x436,0x440,0x3cc,0x502)]();}function _0x378d46(_0x4b3b79,_0x30ce00,_0x1dccd6,_0x18c0d7){return _0x904c37(_0x4b3b79-0x16c,_0x1dccd6,_0x1dccd6-0x14,_0x4b3b79-0x44a);}return _0x8a1b4a['VlaiZ'](Date[_0x378d46(0x550,0x47f,0x51c,0x571)]()['toString'](-0x2*-0x8e4+-0x2*0x549+0x2*-0x389),Math['random']()['toString'](-0x1*-0x1c15+0x11c8+-0x2db9)[_0x378d46(0x582,0x4a5,0x59d,0x519)](-0xabd*-0x1+-0x1*0x2335+0x1e2*0xd));}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x5066c7={'cpKUt':function(_0x4115ca,_0x377c5c){return _0x4115ca!==_0x377c5c;},'kVtKj':function(_0x3323b0,_0x23aa2b){return _0x3323b0(_0x23aa2b);},'rLDbo':function(_0x1b10aa,_0x421ca3){return _0x1b10aa>_0x421ca3;},'HshLz':function(_0x98dd66,_0x456aad){return _0x98dd66!==_0x456aad;},'RkYSA':'pgpBS','KdlFx':function(_0x5a0381,_0x10cfcf){return _0x5a0381(_0x10cfcf);},'efTZp':function(_0x1aab61){return _0x1aab61();}};return new Promise((_0x2325aa,_0x499420)=>{function _0x364f3e(_0x13a26e,_0x17dda6,_0x132bbe,_0x39be9){return _0x639d(_0x17dda6-0x16b,_0x132bbe);}const _0x209c6a={'rJRMY':function(_0x527a61,_0x476298){function _0x3b77ac(_0x44e260,_0x3d262a,_0x10eb2a,_0xf8ffde){return _0x639d(_0x44e260- -0x39c,_0xf8ffde);}return _0x5066c7[_0x3b77ac(-0x20a,-0x232,-0x257,-0x157)](_0x527a61,_0x476298);},'MmpwN':function(_0x908781,_0x1138d0){function _0x162db3(_0x3ac535,_0x45016f,_0x43c678,_0x4c5b77){return _0x639d(_0x45016f- -0x3d2,_0x4c5b77);}return _0x5066c7[_0x162db3(-0x2ba,-0x299,-0x216,-0x297)](_0x908781,_0x1138d0);},'TpQRA':_0x5066c7['RkYSA'],'tQAZi':function(_0x2116a3,_0x5eb331){function _0x578fc2(_0x2de65c,_0x5f0020,_0x2841d8,_0x2ef95f){return _0x639d(_0x2ef95f- -0x1a8,_0x5f0020);}return _0x5066c7[_0x578fc2(-0xd8,-0x61,-0x55,-0x17)](_0x2116a3,_0x5eb331);}},_0x16bb54=_0x5066c7[_0x3f20f0(0x1e5,0x2af,0x26d,0x387)](generateRequestId);console[_0x364f3e(0x48e,0x423,0x3f9,0x3e8)](_0x364f3e(0x2b1,0x35a,0x369,0x3dd)+'PromptModi'+'fy]\x20Reques'+_0x3f20f0(0x344,0x3ed,0x391,0x4c7)+_0x364f3e(0x3e7,0x449,0x471,0x466)+_0x364f3e(0x4b4,0x43f,0x376,0x385)+_0x16bb54+')');const _0x9172b1=_0x32d685=>{function _0x3e3223(_0x5e0afc,_0x1723cb,_0x4c9f85,_0x5658c1){return _0x364f3e(_0x5e0afc-0x149,_0x5e0afc- -0x3f0,_0x1723cb,_0x5658c1-0x118);}function _0x46d70e(_0x37b8f3,_0x58daeb,_0x4a6cf1,_0x3be74c){return _0x3f20f0(_0x58daeb,_0x37b8f3- -0x3d3,_0x4a6cf1-0x64,_0x3be74c-0x1de);}if(_0x5066c7[_0x46d70e(-0xa5,-0x8b,-0x116,-0xcb)](_0x32d685['id'],_0x16bb54))return;eventSource[_0x46d70e(-0x117,-0x197,-0xb7,-0xed)+'ener'](eventNames[_0x46d70e(-0x55,-0x112,0x70,-0xb8)+_0x3e3223(-0x12,0x8d,-0xc1,0x3d)+_0x46d70e(-0x40,-0xf3,-0x71,-0xa3)+_0x3e3223(0xa,-0x5f,-0x64,0x66)],_0x9172b1),_0x5066c7[_0x46d70e(-0xf4,-0x12e,-0xed,-0x137)](_0x2325aa,_0x32d685[_0x46d70e(-0xe2,-0x1b3,-0x148,-0x138)]);};eventSource['on'](eventNames['LLM_CHAR_M'+_0x364f3e(0x36c,0x3de,0x455,0x3aa)+_0x3f20f0(0x346,0x393,0x2e7,0x3bb)+_0x364f3e(0x37b,0x3fa,0x4b8,0x3e8)],_0x9172b1);const _0x5580c7={};_0x5580c7['id']=_0x16bb54,eventSource[_0x364f3e(0x4c7,0x3ec,0x494,0x49b)](eventNames[_0x364f3e(0x415,0x399,0x2b3,0x30f)+_0x3f20f0(0x43a,0x3c3,0x3bc,0x406)+_0x364f3e(0x42f,0x3ba,0x49c,0x2d7)+_0x364f3e(0x3a1,0x457,0x4e2,0x4bf)],_0x5580c7);function _0x3f20f0(_0x13e939,_0x11762b,_0x48e98c,_0x2845b0){return _0x639d(_0x11762b-0x150,_0x13e939);}setTimeout(()=>{function _0x69439d(_0x3865cc,_0x25fde5,_0x3ea463,_0x4e052d){return _0x3f20f0(_0x25fde5,_0x4e052d-0xd4,_0x3ea463-0x14,_0x4e052d-0x113);}function _0x18914a(_0x39c995,_0xd13ef5,_0x224759,_0x2d85d4){return _0x3f20f0(_0x2d85d4,_0x39c995- -0x2e6,_0x224759-0x3,_0x2d85d4-0x106);}_0x209c6a[_0x69439d(0x4dd,0x4d0,0x56a,0x49e)](_0x209c6a[_0x18914a(-0x65,0x3a,-0xfc,-0xa2)],_0x69439d(0x436,0x3a5,0x29c,0x36f))?(eventSource[_0x69439d(0x3cf,0x3b5,0x471,0x390)+_0x18914a(0x11d,0x81,0xab,0x9c)](eventNames[_0x18914a(0x98,-0x4b,0xa9,0xf8)+'ODIFY_GET_'+_0x18914a(0xad,-0x23,0x55,0xd0)+_0x69439d(0x3cd,0x3ff,0x572,0x4b3)],_0x9172b1),_0x209c6a[_0x18914a(0xb2,0xff,0xe9,0xe3)](_0x499420,new Error(_0x69439d(0x308,0x2f1,0x3cf,0x3d0)+'时'))):_0x2177e9[_0x69439d(0x559,0x451,0x51c,0x489)+_0x18914a(0xe,0x17,-0x99,0x2c)]&&_0x209c6a[_0x18914a(-0x6,-0xd3,0xb5,0x6c)](_0x29301b[_0x69439d(0x509,0x529,0x4f8,0x489)+_0x69439d(0x491,0x470,0x39a,0x3c8)][_0x69439d(0x430,0x534,0x56b,0x4bf)],0x2501+-0x824+-0x1cdd)&&_0x179cea[_0x18914a(0xfa,0x12e,0xbc,0x9b)](..._0x372cb1['matchedOut'+_0x69439d(0x438,0x332,0x495,0x3c8)]);},0x16ee+-0x13d8+0x23fa);});}export function LLM_CHAR_MODIFY(_0x297e2b,_0x17d34d={}){function _0x461889(_0x5b9ddb,_0x4a2dea,_0xb6c442,_0x3d04aa){return _0x904c37(_0x5b9ddb-0xab,_0x3d04aa,_0xb6c442-0x1f0,_0x4a2dea-0x1de);}function _0x2f54c2(_0x488c7f,_0x3d4700,_0x531aa4,_0x16ff2b){return _0x904c37(_0x488c7f-0xe7,_0x531aa4,_0x531aa4-0x11f,_0x3d4700-0x3ec);}const _0x186212={'BELKO':function(_0x3b0266,_0x3837f8){return _0x3b0266(_0x3837f8);},'Afyqw':function(_0x28e9a7,_0xa490c8){return _0x28e9a7!==_0xa490c8;},'QbykO':_0x2f54c2(0x321,0x397,0x342,0x46a),'MvrzZ':_0x2f54c2(0x3ba,0x384,0x413,0x459)+_0x461889(0x1e7,0x227,0x2f1,0x1d9),'OTlME':_0x461889(0x2fe,0x2bf,0x39c,0x395),'TXGpW':'PWaus','DNpZz':function(_0x1ff552){return _0x1ff552();},'vkazp':function(_0x206c29,_0xe2320b,_0xcd7327){return _0x206c29(_0xe2320b,_0xcd7327);}};return new Promise((_0x251cca,_0x27229a)=>{function _0x21dd5b(_0x5cf61b,_0x4a06b7,_0x538d0a,_0x306f67){return _0x461889(_0x5cf61b-0xcc,_0x4a06b7- -0x20c,_0x538d0a-0x1c3,_0x306f67);}const _0x2f959a={'rQNwk':function(_0x5ac001,_0x1c0588){return _0x5ac001!==_0x1c0588;},'qohGF':function(_0x3d13ba,_0x434e74){return _0x186212['Afyqw'](_0x3d13ba,_0x434e74);},'bfQZW':_0x186212[_0x4cb998(0x222,0x248,0x262,0x22b)],'NpUHN':function(_0x2e17e3,_0x3922bd){function _0x30ddab(_0x138d80,_0x3b716b,_0x5ec978,_0x227aee){return _0x4cb998(_0x5ec978- -0x82,_0x3b716b-0x1d9,_0x138d80,_0x227aee-0x1d9);}return _0x186212[_0x30ddab(0xc0,0x10,0x89,0xe5)](_0x2e17e3,_0x3922bd);},'ovqFf':_0x186212[_0x21dd5b(-0x45,0x91,0x179,-0x53)]};function _0x4cb998(_0x145337,_0x27cc43,_0x244da1,_0x163769){return _0x461889(_0x145337-0x74,_0x145337- -0x108,_0x244da1-0xd1,_0x244da1);}if(_0x186212['OTlME']!==_0x186212[_0x21dd5b(-0x12,-0x93,-0x71,-0x129)]){const _0x12c005=_0x186212[_0x21dd5b(-0x82,-0x8f,-0x91,0x2a)](generateRequestId),_0x56f59b=_0x17d34d[_0x21dd5b(-0xc7,-0x35,-0x53,0xb)]||-0x510b+-0x1*0x12cc+0x14e37;let _0x5c3685=null;console[_0x4cb998(0x1f1,0x1e6,0x110,0x182)]('[character'+_0x21dd5b(0x19c,0xc7,0x50,0xf5)+_0x4cb998(0x132,0x1dc,0x7a,0x1a2)+_0x21dd5b(0xef,0x77,0xcd,0x6a)+'odify\x20LLM\x20'+_0x21dd5b(-0x1,-0x19,-0x3d,0x6b)+_0x4cb998(0x1d5,0x25f,0x208,0x167)+_0x12c005+')');const _0x2415e6=()=>{function _0x27196a(_0x2d9157,_0x6009bf,_0x36c527,_0x504426){return _0x21dd5b(_0x2d9157-0x59,_0x504426- -0x208,_0x36c527-0xd7,_0x2d9157);}function _0x489688(_0x39f1e2,_0x17f8f9,_0x177c60,_0xcce7df){return _0x4cb998(_0x17f8f9-0x15f,_0x17f8f9-0xb6,_0x39f1e2,_0xcce7df-0x1c1);}eventSource[_0x489688(0x233,0x204,0x2ee,0x281)+_0x489688(0x2dc,0x34b,0x294,0x3e7)](eventNames['LLM_CHAR_M'+_0x27196a(-0x2b5,-0x19d,-0x18d,-0x1d7)+_0x27196a(-0x1c1,-0x198,-0x1cb,-0x281)],_0x308859),_0x5c3685&&(_0x186212['BELKO'](clearTimeout,_0x5c3685),_0x5c3685=null);},_0x308859=_0x1cbf98=>{if(_0x2f959a[_0x26432c(0x4f4,0x3e9,0x490,0x48b)](_0x1cbf98['id'],_0x12c005))return;_0x2415e6();function _0x5df015(_0x5376bb,_0x2d2e44,_0xc953fc,_0x5aedd5){return _0x21dd5b(_0x5376bb-0x6e,_0x5aedd5-0x152,_0xc953fc-0x173,_0x2d2e44);}function _0x26432c(_0x248838,_0x1da853,_0x3708e2,_0x29463a){return _0x4cb998(_0x3708e2-0x394,_0x1da853-0x98,_0x248838,_0x29463a-0x43);}_0x1cbf98[_0x26432c(0x4b7,0x3f2,0x434,0x47c)]?_0x2f959a[_0x26432c(0x459,0x553,0x46b,0x40a)](_0x2f959a[_0x26432c(0x616,0x5d0,0x546,0x541)],_0x2f959a[_0x5df015(0x2e7,0x2ac,0x158,0x200)])?_0x53c4b3[_0x26432c(0x5e5,0x583,0x55d,0x63c)](..._0x1cb3e9[_0x26432c(0x47e,0x492,0x532,0x50a)+_0x26432c(0x535,0x411,0x471,0x411)]):_0x2f959a[_0x26432c(0x4c2,0x528,0x549,0x45f)](_0x251cca,_0x1cbf98['result']):_0x2f959a[_0x5df015(0xe9,0x20f,0x1b3,0x125)]('isecf',_0x26432c(0x59e,0x5fc,0x5b3,0x4f0))?_0x250eaf[_0x5df015(0x18a,0x16c,0x1c2,0x217)](_0x17e2d8):_0x2f959a[_0x26432c(0x4c1,0x5b8,0x549,0x512)](_0x27229a,new Error(_0x1cbf98['result']||'LLM\x20请求失败'));};eventSource['on'](eventNames['LLM_CHAR_M'+_0x4cb998(0x135,0x1bd,0x18b,0xac)+_0x4cb998(0x8b,0x4c,0x7f,0xa1)],_0x308859);const _0x1db11b={};_0x1db11b[_0x4cb998(0xda,0x14e,0x127,0x157)]=_0x297e2b,_0x1db11b['id']=_0x12c005,eventSource[_0x21dd5b(0xd1,0xb6,0x67,0x11d)](eventNames[_0x21dd5b(0x25,0x63,0x136,0x131)+_0x4cb998(0x8f,-0x3d,-0x12,-0x16)+_0x21dd5b(-0xd5,-0x6a,-0xea,-0x13)],_0x1db11b),_0x5c3685=_0x186212['vkazp'](setTimeout,()=>{function _0x452925(_0x1a2bd6,_0x443c77,_0x167753,_0x4db126){return _0x4cb998(_0x4db126- -0x137,_0x443c77-0x168,_0x1a2bd6,_0x4db126-0x1e9);}_0x2415e6(),_0x2f959a[_0x452925(0x119,0x12,0x92,0x7e)](_0x27229a,new Error(_0x2f959a['ovqFf']));},_0x56f59b);}else _0x2f959a['NpUHN'](_0x4d6c61,_0x126a9b);});}function preprocessTagContent(_0x3028cc){function _0x3693a5(_0x5ba945,_0x3ab957,_0x4dcf3b,_0x497787){return _0x904c37(_0x5ba945-0x1c7,_0x4dcf3b,_0x4dcf3b-0x125,_0x5ba945- -0x2c);}const _0xc5f927={};_0xc5f927[_0x546f93(-0xd8,-0xca,-0x7b,-0x4e)]=_0x546f93(-0x124,-0x137,-0x1a0,-0x1b4),_0xc5f927[_0x3693a5(0x0,0x4c,0x50,-0xd8)]=_0x3693a5(-0x5f,-0x136,-0x5f,-0x6c);const _0x3232d7=_0xc5f927;let _0x2c598f=_0x3028cc['replace'](/:/g,':')[_0x546f93(-0x15a,-0x140,-0x115,-0x9a)](/,/g,',');function _0x546f93(_0x2dba23,_0x4286ea,_0x54448f,_0x2853d3){return _0x904c37(_0x2dba23-0x62,_0x2853d3,_0x54448f-0x13,_0x54448f- -0x144);}return _0x2c598f=_0x2c598f[_0x546f93(-0x1b7,-0xa7,-0x115,-0x14d)](/下半身NSWebcam:/g,_0x3232d7[_0x3693a5(0x9d,0x101,0xc1,0x130)]),_0x2c598f=_0x2c598f[_0x546f93(-0x8c,-0x18b,-0x115,-0x1b0)](/下半身NSFW_背面:/g,_0x3232d7[_0x546f93(-0x5a,0x8,-0x7b,-0x3f)]),_0x2c598f=_0x2c598f[_0x546f93(-0x103,-0x40,-0x115,-0x2c)](/上半身NSFW_背面:/g,_0x3232d7[_0x546f93(-0x202,-0xc5,-0x118,-0xb2)]),_0x2c598f;}function parseCharacterData(_0x2efc15){const _0xbca343={};_0xbca343[_0x443183(0x27a,0x2e7,0x266,0x22d)]=_0x32e937(0x274,0x23f,0x2f5,0x239),_0xbca343['EuKtE']='nameCN',_0xbca343[_0x32e937(0x1c7,0x252,0x326,0x2de)]=_0x32e937(0x1b5,0x253,0x2ee,0x19a),_0xbca343[_0x32e937(0x261,0x1f0,0x297,0x13b)]=_0x32e937(0x14a,0x146,0x1ae,0x17b)+'raits',_0xbca343[_0x32e937(0x81,0x157,0x10c,0x180)]=_0x32e937(0x266,0x285,0x27f,0x319)+'FW',_0xbca343['fDXes']='upperBodyS'+_0x443183(0x252,0x263,0x201,0x2cd),_0xbca343[_0x443183(0x213,0x12c,0x1ff,0x263)]='fullBodySF'+_0x32e937(0x247,0x1da,0x169,0x11a),_0xbca343[_0x443183(0x3b8,0x3a8,0x34f,0x302)]=_0x443183(0x30d,0x21d,0x2a6,0x213)+_0x32e937(0x133,0x1cf,0x137,0x23f),_0xbca343['xuXig']=_0x32e937(0x227,0x191,0xf0,0x175)+_0x32e937(0x194,0x15a,0x1dc,0x8c),_0xbca343[_0x32e937(0x1eb,0x159,0x21c,0x137)]=function(_0x4af520,_0x274561){return _0x4af520!==_0x274561;},_0xbca343[_0x443183(0x183,0x242,0x1fd,0x23f)]=_0x32e937(0x2df,0x29b,0x305,0x2d5),_0xbca343[_0x32e937(0x2ae,0x266,0x2a1,0x2ff)]=function(_0x5adf48,_0x5a5180){return _0x5adf48+_0x5a5180;},_0xbca343[_0x32e937(0x20b,0x17f,0x129,0x24c)]=function(_0x1acdc4,_0x458a69){return _0x1acdc4&&_0x458a69;},_0xbca343['yTOqb']=function(_0x1aa24e,_0x3e93d6){return _0x1aa24e===_0x3e93d6;},_0xbca343['otTHd']='kmTKL';function _0x443183(_0x17dd9e,_0x30f391,_0xc9e8b5,_0x42344e){return _0x904c37(_0x17dd9e-0x6c,_0x30f391,_0xc9e8b5-0x78,_0xc9e8b5-0x228);}const _0x7ab35b=_0xbca343,_0x3c7ced=_0x2efc15['split']('\x0a')[_0x32e937(0x49,0x11b,0xa6,0x82)](_0x3d6c4c=>_0x3d6c4c['trim']())[_0x443183(0x11e,0x28c,0x1fc,0x2a5)](_0x3f66d1=>_0x3f66d1),_0x5c8962={};_0x5c8962[_0x32e937(0x16e,0x1f6,0x19f,0x2de)]='',_0x5c8962[_0x32e937(0x243,0x253,0x1c4,0x20a)]='',_0x5c8962[_0x443183(0x26f,0x1a5,0x1ed,0x25f)+'raits']='',_0x5c8962[_0x32e937(0x9f,0x148,0x196,0x1eb)+_0x32e937(0x212,0x28f,0x2e6,0x291)]='',_0x5c8962[_0x32e937(0xac,0x148,0x123,0xc5)+_0x443183(0x180,0x1e4,0x209,0x25d)]='',_0x5c8962[_0x32e937(0x36c,0x285,0x22f,0x2c2)+'FW']='',_0x5c8962[_0x32e937(0x27a,0x285,0x28d,0x27e)+_0x443183(0x13c,0x119,0x201,0x126)]='',_0x5c8962['fullBodySF'+'W']='',_0x5c8962['fullBodySF'+'WBack']='',_0x5c8962['upperBodyN'+_0x32e937(0xf8,0x1cf,0xf1,0x19d)]='',_0x5c8962[_0x32e937(0x23d,0x1ff,0x1ca,0x282)+_0x32e937(0x1cc,0x255,0x1b3,0x175)]='',_0x5c8962[_0x443183(0x161,0x1b1,0x238,0x285)+'FW']='',_0x5c8962[_0x443183(0x17b,0x2ec,0x238,0x150)+_0x32e937(0x142,0x15a,0x9b,0xac)]='';const _0x5093cc=_0x5c8962,_0x5e1f8e={};_0x5e1f8e['中文名称']=_0x7ab35b['EuKtE'],_0x5e1f8e[_0x443183(0x30d,0x1e4,0x2b6,0x27e)]=_0x7ab35b[_0x32e937(0x1ec,0x252,0x2b6,0x276)];function _0x32e937(_0x44b7ab,_0x21c1cd,_0x2a9bc2,_0x30f3b0){return _0x904c37(_0x44b7ab-0x18b,_0x2a9bc2,_0x2a9bc2-0x1e2,_0x21c1cd-0x181);}_0x5e1f8e[_0x443183(0x195,0x2eb,0x255,0x216)]=_0x7ab35b[_0x443183(0x304,0x24f,0x297,0x24e)],_0x5e1f8e['五官外貌']='facialFeat'+_0x32e937(0x2db,0x28f,0x20b,0x275),_0x5e1f8e[_0x32e937(0x9e,0x15d,0x207,0x19d)]=_0x443183(0x161,0x1ed,0x1ef,0x26e)+_0x443183(0x1db,0x24f,0x209,0x233),_0x5e1f8e['上半身SFW']=_0x7ab35b[_0x32e937(0x207,0x157,0xf1,0x156)],_0x5e1f8e[_0x443183(0x2bd,0x226,0x2d7,0x2a0)]=_0x7ab35b[_0x32e937(0x378,0x2a3,0x363,0x382)],_0x5e1f8e[_0x32e937(0x9e,0x17b,0x11e,0x114)]=_0x443183(0x181,0x2de,0x230,0x180)+'W',_0x5e1f8e[_0x32e937(0x308,0x2b5,0x27d,0x38c)]=_0x7ab35b[_0x443183(0x171,0x1aa,0x1ff,0x217)],_0x5e1f8e[_0x443183(0x253,0x29b,0x211,0x217)]=_0x7ab35b[_0x32e937(0x1cb,0x2a8,0x332,0x324)],_0x5e1f8e[_0x443183(0x3af,0x3a2,0x349,0x271)]=_0x443183(0x304,0x1ce,0x2a6,0x1cd)+_0x32e937(0x279,0x255,0x301,0x18d),_0x5e1f8e['下半身NSFW']=_0x32e937(0x183,0x191,0x24e,0xfc)+'FW',_0x5e1f8e[_0x443183(0x21e,0x25d,0x202,0x297)]=_0x7ab35b[_0x443183(0x212,0x2b1,0x23c,0x20b)];const _0x50d1d8=_0x5e1f8e;for(const _0x75fcd7 of _0x3c7ced){if(_0x7ab35b['nibuJ'](_0x7ab35b['hDUwO'],_0x7ab35b[_0x443183(0x25e,0x246,0x1fd,0x23e)])){const _0x154969={};_0x154969['type']=_0x7ab35b[_0x32e937(0x146,0x1bf,0x1e2,0x104)],_0x154969[_0x443183(0x365,0x2e9,0x2e6,0x2bc)]=_0x32e937(0x1f4,0x11f,0xed,0x77)+_0x14a5f8[_0x32e937(0x263,0x27f,0x2a4,0x1f8)]+'张'+_0x37bd17+']',_0x48cdbb[_0x32e937(0x2ec,0x274,0x2bb,0x34d)](_0x154969);}else{const _0x41d2bf=_0x75fcd7['indexOf'](':');if(_0x41d2bf===-(-0xece+-0x1*0x77b+0x164a))continue;const _0x3f25b5=_0x75fcd7[_0x32e937(0x37a,0x2b9,0x250,0x2ae)](0x1a6b+-0x252d+-0x66*-0x1b,_0x41d2bf)['trim'](),_0x320310=_0x75fcd7[_0x443183(0x325,0x2a0,0x360,0x3b4)](_0x7ab35b[_0x32e937(0x1f3,0x266,0x30b,0x208)](_0x41d2bf,-0x3*-0x97a+0x190d+-0xa*0x559))[_0x32e937(0x2dd,0x270,0x33d,0x1b3)]();if(_0x50d1d8[_0x3f25b5])_0x5093cc[_0x50d1d8[_0x3f25b5]]=_0x320310;else _0x7ab35b[_0x32e937(0x248,0x17f,0x1ab,0xdb)](_0x3f25b5,_0x320310)&&console[_0x443183(0x409,0x400,0x343,0x35f)](_0x32e937(0x17f,0x1d3,0x1b7,0x1e8)+'PromptModi'+_0x32e937(0x23f,0x2b6,0x2dc,0x249)+'字段\x20\x22'+_0x3f25b5+'\x22');}}if(!_0x5093cc[_0x32e937(0x223,0x1f6,0x178,0x2c7)]){if(_0x7ab35b[_0x443183(0x2b5,0x25f,0x20b,0x24b)](_0x7ab35b['otTHd'],_0x7ab35b[_0x443183(0x244,0x2c6,0x298,0x356)]))return null;else _0x2f5422[_0x32e937(0x12c,0x1d1,0x2bb,0x274)](_0x58b563);}return console[_0x443183(0x39d,0x2a1,0x343,0x25d)](_0x32e937(0x278,0x1d3,0x17e,0x28c)+'PromptModi'+'fy]\x20解析到的人物'+_0x443183(0x273,0x223,0x2e5,0x324),_0x5093cc),_0x5093cc;}function parseOutfitData(_0x3323ea){const _0x17c159={'ZTwUm':function(_0x2f3325,_0x27a8e9){return _0x2f3325(_0x27a8e9);},'dTSWA':_0x37e480(-0xbe,-0x150,-0x138,-0x96),'spzXQ':'nameCN','kmeDO':'nameEN','VDuxc':'upperBody','gnhmp':_0x3b24df(0x31c,0x355,0x283,0x3d7),'HqoaQ':_0x37e480(-0xf8,-0x14a,-0x227,-0x7e)+'ck','fowHX':function(_0x39d1b2,_0x13bf56){return _0x39d1b2===_0x13bf56;},'bRhOa':'MeAIs','NiXpk':_0x3b24df(0x31f,0x394,0x2fb,0x355),'Pximb':function(_0xe37a98,_0x335960){return _0xe37a98+_0x335960;},'PrcKh':_0x3b24df(0x33a,0x367,0x408,0x39b),'rAqkH':'yMtmH'},_0x22e059=_0x3323ea[_0x3b24df(0x223,0x19f,0x28b,0x294)]('\x0a')[_0x37e480(-0x181,-0x26a,-0x255,-0x19e)](_0x5edef3=>_0x5edef3[_0x3b24df(0x349,0x392,0x2ab,0x2dd)]())[_0x37e480(-0x239,-0x230,-0x1cb,-0x24f)](_0x3bc9c4=>_0x3bc9c4),_0x5ab00c={};_0x5ab00c[_0x37e480(-0x120,-0x18f,-0x192,-0xd4)]='',_0x5ab00c[_0x3b24df(0x32c,0x282,0x247,0x36a)]='',_0x5ab00c[_0x37e480(-0x149,-0xff,-0x52,-0x9d)]='',_0x5ab00c[_0x3b24df(0x2d4,0x1f0,0x34e,0x2c7)]='',_0x5ab00c[_0x37e480(-0x122,-0x1f3,-0x148,-0x150)+_0x37e480(-0x210,-0x1d3,-0x182,-0x169)]='',_0x5ab00c[_0x37e480(-0x76,-0x142,-0xe6,-0xd9)]='',_0x5ab00c[_0x3b24df(0x314,0x338,0x395,0x32d)+'ck']='';const _0x4410f9=_0x5ab00c,_0x8e5e00={};_0x8e5e00[_0x37e480(-0x169,-0x21c,-0x17c,-0x225)]=_0x37e480(-0x49,-0xff,-0x140,-0xf2),_0x8e5e00[_0x37e480(-0x113,-0xab,-0x73,-0x131)]=_0x17c159[_0x3b24df(0x382,0x3db,0x3e5,0x3ab)],_0x8e5e00[_0x37e480(-0xe0,-0x176,-0x220,-0x11b)]=_0x17c159[_0x3b24df(0x228,0x1f7,0x1bf,0x1a2)];function _0x37e480(_0x8ec957,_0x116c2f,_0x3ef457,_0x4e9111){return _0x904c37(_0x8ec957-0xa,_0x4e9111,_0x3ef457-0x8d,_0x116c2f- -0x204);}function _0x3b24df(_0x7f0294,_0x3492b1,_0x258f26,_0x18837b){return _0x904c37(_0x7f0294-0x1cb,_0x3492b1,_0x258f26-0x6d,_0x7f0294-0x25a);}_0x8e5e00[_0x3b24df(0x2d1,0x32f,0x1ef,0x23e)]=_0x17c159[_0x37e480(-0x277,-0x1ea,-0x249,-0x137)],_0x8e5e00[_0x3b24df(0x2be,0x39e,0x290,0x1e8)]=_0x37e480(-0x1cf,-0x1f3,-0x297,-0x189)+_0x3b24df(0x28b,0x2c1,0x2a8,0x2a0),_0x8e5e00[_0x3b24df(0x2b2,0x266,0x2c9,0x2b5)]=_0x17c159[_0x3b24df(0x225,0x236,0x1e7,0x231)],_0x8e5e00[_0x3b24df(0x3b5,0x36b,0x41b,0x331)]=_0x17c159[_0x3b24df(0x389,0x2cc,0x32c,0x2f4)];const _0x3f1220=_0x8e5e00;for(const _0x2da3af of _0x22e059){if(_0x17c159[_0x37e480(-0x122,-0x1f1,-0x292,-0x26f)](_0x17c159[_0x3b24df(0x2f1,0x233,0x261,0x359)],_0x17c159[_0x3b24df(0x282,0x23a,0x2bc,0x1f6)]))_0x1bd618[_0x3b24df(0x34b,0x382,0x2a7,0x39f)+_0x37e480(-0x182,-0x227,-0x2b6,-0x1c7)]={};else{const _0x5d309f=_0x2da3af[_0x37e480(-0x110,-0xca,-0x16d,-0x14c)](':');if(_0x5d309f===-(-0x5b6+0x1dec*-0x1+0x23a3))continue;const _0xfb0416=_0x2da3af[_0x37e480(-0x13b,-0xcc,-0xb1,-0x16d)](0x18d*0x1+-0xd23+-0x5cb*-0x2,_0x5d309f)['trim'](),_0x37c501=_0x2da3af[_0x3b24df(0x392,0x329,0x2b2,0x2d8)](_0x17c159[_0x3b24df(0x329,0x274,0x3dd,0x38b)](_0x5d309f,0x1dd1+0x1cc8+-0x3a98))[_0x3b24df(0x349,0x358,0x326,0x381)]();if(_0x3f1220[_0xfb0416])_0x4410f9[_0x3f1220[_0xfb0416]]=_0x37c501;else _0xfb0416&&_0x37c501&&console['log'](_0x3b24df(0x2ac,0x2b2,0x323,0x2d2)+_0x3b24df(0x34f,0x2e4,0x41f,0x2c3)+_0x37e480(-0x12d,-0x165,-0xcb,-0xe7)+_0x37e480(-0x2aa,-0x1db,-0x239,-0x10c)+_0xfb0416+'\x22');}}if(!_0x4410f9[_0x3b24df(0x2cf,0x39c,0x327,0x290)]){if(_0x17c159[_0x3b24df(0x273,0x1c7,0x256,0x1e5)]!==_0x17c159[_0x3b24df(0x23c,0x23e,0x249,0x23b)])return null;else{const _0x36d2c0=_0x17c159[_0x37e480(-0x139,-0xbe,-0x190,-0x1e)](_0x2a6d23,_0x508245);if(_0x36d2c0){const _0x70210c={};_0x70210c['type']=_0x17c159['dTSWA'],_0x70210c[_0x3b24df(0x3b0,0x3bb,0x3bb,0x38c)]=_0x36d2c0,_0x70210c['position']=_0x4a5aef,_0x70210c['matchedOut'+_0x3b24df(0x261,0x192,0x20b,0x279)]=[],_0x976c5e[_0x3b24df(0x34d,0x39f,0x42c,0x27a)](_0x70210c);}}}return console[_0x37e480(-0x1a8,-0xe9,-0xb,-0x117)](_0x3b24df(0x2ac,0x249,0x219,0x1c6)+_0x37e480(-0x10e,-0x10f,-0x191,-0x1ca)+_0x3b24df(0x343,0x3d5,0x302,0x3c6)+'数据:',_0x4410f9),_0x4410f9;}function extractCharacterAndOutfitTags(_0x14d4c9){const _0xfc09f3={'ISeHp':_0x1faebd(-0x75,-0x13,0x54,-0x152),'gwthR':_0x927c37(0x270,0x284,0x245,0x2c5),'YmSAj':function(_0x3db011,_0x5a072d){return _0x3db011(_0x5a072d);},'gXNDK':function(_0xecc942,_0x39085c){return _0xecc942===_0x39085c;},'QQcNx':function(_0x3ae984,_0x33392c){return _0x3ae984===_0x33392c;},'GrKvA':_0x927c37(0x300,0x341,0x2fa,0x38b),'sfzNX':function(_0x33f278,_0x1fee77){return _0x33f278(_0x1fee77);},'lizWh':'fWbDW','USdlj':function(_0x299f4a,_0x24a84b){return _0x299f4a!==_0x24a84b;},'mmOZV':_0x927c37(0x3d5,0x2f3,0x2dc,0x396),'yutiT':function(_0x214b74,_0x3442f2){return _0x214b74===_0x3442f2;},'oOXqe':_0x927c37(0x2b8,0x320,0x39c,0x305),'yQgEh':_0x1faebd(-0x1f0,-0x24d,-0x210,-0x1dd),'lZJGJ':_0x927c37(0x333,0x2dd,0x2e8,0x2f7),'wQHhc':'NlHRh'},_0x34c9e9=[];_0x14d4c9=_0x14d4c9[_0x1faebd(-0x173,-0x144,-0xc6,-0x1c0)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x1faebd(-0xb3,-0x127,-0xff,-0x169)]();const _0xeebcb2=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x800f24;while((_0x800f24=_0xeebcb2[_0x1faebd(-0xa0,-0x34,-0x63,-0xe3)](_0x14d4c9))!==null){const _0x15aaa6=_0x800f24[0x164f+0x1*-0x381+-0x12cd],_0x447638=_0xfc09f3[_0x927c37(0x24c,0x2f9,0x325,0x261)](preprocessTagContent,_0x800f24[0x233a+-0x912*-0x4+-0x4780]),_0x814a61=_0x800f24[_0x927c37(0x293,0x2d9,0x203,0x3a3)];if(_0xfc09f3[_0x927c37(0x198,0x259,0x22a,0x17d)](_0x15aaa6,'人物')){if(_0xfc09f3[_0x927c37(0x197,0x1f9,0x11a,0x1e2)](_0xfc09f3['GrKvA'],_0xfc09f3[_0x1faebd(-0xf6,-0x142,-0x1ad,-0x95)])){const _0x99a1ef=_0xfc09f3[_0x1faebd(-0x1b8,-0x270,-0x1cc,-0x1aa)](parseCharacterData,_0x447638);if(_0x99a1ef){if(_0xfc09f3[_0x1faebd(-0x15d,-0x16b,-0x151,-0x134)]!==_0xfc09f3[_0x1faebd(-0x15d,-0x216,-0x19c,-0x93)])_0x3576ce[_0x1faebd(-0xd8,-0x10d,-0x186,-0x17b)]=[];else{const _0x1f494d={};_0x1f494d[_0x1faebd(-0x218,-0x1f4,-0x2bc,-0x1d9)]=_0x927c37(0x3f1,0x320,0x288,0x32e),_0x1f494d[_0x927c37(0x3a1,0x3c2,0x43e,0x35a)]=_0x99a1ef,_0x1f494d[_0x927c37(0x423,0x398,0x378,0x32e)]=_0x814a61,_0x1f494d[_0x927c37(0x259,0x334,0x2c5,0x32c)+_0x1faebd(-0x19b,-0x1bc,-0x257,-0x181)]=[],_0x34c9e9[_0x1faebd(-0xaf,-0x63,-0x78,-0x120)](_0x1f494d);}}}else{_0x1dfa43[_0x927c37(0x342,0x315,0x27f,0x3fc)](_0xfc09f3[_0x927c37(0x371,0x34a,0x2c3,0x3b6)]);return;}}else{if(_0x15aaa6==='服装'){const _0x2d60c8=parseOutfitData(_0x447638);if(_0x2d60c8){const _0xe42b5c={};_0xe42b5c[_0x927c37(0x129,0x1f6,0x238,0x2d3)]=_0x927c37(0x285,0x2dd,0x345,0x381),_0xe42b5c[_0x927c37(0x351,0x3c2,0x385,0x466)]=_0x2d60c8,_0xe42b5c[_0x927c37(0x352,0x398,0x349,0x387)]=_0x814a61,_0x34c9e9[_0x1faebd(-0xaf,-0x118,-0x73,-0x156)](_0xe42b5c);}}}}_0x34c9e9[_0x927c37(0x304,0x31a,0x277,0x293)]((_0x1175ea,_0x4bd382)=>_0x1175ea[_0x927c37(0x436,0x398,0x324,0x30b)]-_0x4bd382[_0x927c37(0x3cb,0x398,0x2b0,0x389)]);let _0x56c788=null;const _0x26c607=[];function _0x927c37(_0x114a1e,_0x4e7159,_0x4f4b61,_0x387dbb){return _0x904c37(_0x114a1e-0x109,_0x387dbb,_0x4f4b61-0x1c1,_0x4e7159-0x26c);}const _0x2dc44a=[];for(const _0x483e7e of _0x34c9e9){if(_0xfc09f3[_0x1faebd(-0x74,-0x87,-0x13f,0x19)](_0xfc09f3[_0x927c37(0x16c,0x222,0x15a,0x308)],_0x1faebd(-0x11b,-0x10a,-0x1f9,-0x9b)))_0x1ce92f['value']=_0x533f3d[_0x213d4f],_0x2dacf6(_0x212724)[_0x1faebd(-0x122,-0xaf,-0x1a5,-0x1e1)](_0x927c37(0x2ff,0x220,0x237,0x26c));else{if(_0xfc09f3[_0x927c37(0x2ec,0x21d,0x254,0x210)](_0x483e7e[_0x927c37(0x2dc,0x1f6,0x198,0x124)],_0xfc09f3[_0x1faebd(-0x72,-0xdd,-0xbc,-0x92)]))_0xfc09f3['USdlj'](_0xfc09f3['yQgEh'],'zIaSL')?_0x925dd&&_0x1ee07a[_0x927c37(0x23a,0x2bc,0x275,0x2e7)](_0x5b0aeb):(_0x56c788=_0x483e7e,_0x26c607[_0x927c37(0x311,0x35f,0x3ca,0x2fe)](_0x483e7e));else{if(_0x483e7e['type']===_0xfc09f3[_0x927c37(0x394,0x300,0x339,0x261)]){if(_0x56c788){if(_0xfc09f3[_0x927c37(0x24d,0x1f9,0x29f,0x161)](_0xfc09f3[_0x927c37(0x229,0x251,0x336,0x257)],_0xfc09f3[_0x1faebd(-0x1bd,-0x282,-0x1cd,-0xfa)]))_0x56c788[_0x1faebd(-0xda,-0x19a,-0x172,-0xd5)+'fits']['push'](_0x483e7e[_0x1faebd(-0x4c,0x9b,0x87,0x1a)]);else{_0x3e5e31[_0x1faebd(-0xf9,-0x138,-0x1d6,-0x89)](_0xfc09f3[_0x1faebd(-0x127,-0x1be,-0xcf,-0x80)]);return;}}else _0x2dc44a[_0x1faebd(-0xaf,-0x128,-0x125,-0x17c)](_0x483e7e[_0x927c37(0x450,0x3c2,0x301,0x393)]);}}}}function _0x1faebd(_0x26ede0,_0x3d5cb1,_0x21f835,_0x59f3fd){return _0x904c37(_0x26ede0-0x19,_0x21f835,_0x21f835-0x195,_0x26ede0- -0x1a2);}return{'characters':_0x26c607[_0x927c37(0x141,0x206,0x12f,0x173)](_0x562d8b=>({..._0x562d8b[_0x1faebd(-0x4c,-0xf2,-0x3b,-0x43)],'matchedOutfits':_0x562d8b['matchedOut'+'fits']})),'outfits':_0x2dc44a};}function getCurrentCharacterPreset(){const _0x3989ab={};_0x3989ab[_0x364b14(0x329,0x3af,0x302,0x337)]=_0x364b14(0x465,0x3b4,0x471,0x3bc),_0x3989ab['JyWUe']=_0xc5f6dc(0x519,0x588,0x532,0x4aa)+_0xc5f6dc(0x5fd,0x62b,0x5d0,0x5ba)+_0xc5f6dc(0x6d9,0x5ef,0x694,0x565)+'ed',_0x3989ab[_0xc5f6dc(0x4c1,0x4cb,0x400,0x59a)]=_0xc5f6dc(0x615,0x5e3,0x653,0x6be)+'message\x20at'+_0x364b14(0x359,0x306,0x3ce,0x3ed),_0x3989ab[_0xc5f6dc(0x631,0x5a2,0x50a,0x58b)]=function(_0x31d16a,_0x324ae8){return _0x31d16a!==_0x324ae8;},_0x3989ab[_0xc5f6dc(0x4bd,0x583,0x65e,0x54f)]=_0xc5f6dc(0x49a,0x4f4,0x551,0x41b);function _0x364b14(_0xc862fb,_0x194f81,_0x529476,_0x53ca66){return _0x904c37(_0xc862fb-0x25,_0x529476,_0x529476-0xb1,_0x53ca66-0x36b);}_0x3989ab[_0xc5f6dc(0x639,0x656,0x5d2,0x666)]=_0x364b14(0x2b4,0x2c7,0x3b0,0x38a);const _0x359642=_0x3989ab,_0x6cc2d8=extension_settings[extensionName],_0x4ebeab=_0x6cc2d8[_0x364b14(0x2ee,0x332,0x396,0x34b)+_0xc5f6dc(0x700,0x675,0x594,0x6f6)];if(!_0x4ebeab||!_0x6cc2d8[_0xc5f6dc(0x5aa,0x516,0x5ee,0x57f)+'resets'][_0x4ebeab]){if(_0x359642[_0xc5f6dc(0x5d9,0x5a2,0x4bd,0x4d1)](_0x359642[_0xc5f6dc(0x543,0x583,0x502,0x644)],_0x359642['gmZDr']))return null;else _0x53079c=_0xa16490(_0x250064,_0x22e9c9,_0x46fc50,_0x359642['TBsuK']),_0x184768[_0xc5f6dc(0x574,0x651,0x6ca,0x5c4)](_0x359642[_0x364b14(0x533,0x591,0x550,0x4c2)],_0x5e6e2d[_0x364b14(0x46b,0x3ea,0x459,0x469)],_0x359642['dJiGL'],_0x4d31c5);}const _0x577cc6={};_0x577cc6['id']=_0x4ebeab;function _0xc5f6dc(_0x33866b,_0x130095,_0xf90fff,_0x566e01){return _0x904c37(_0x33866b-0x1a8,_0xf90fff,_0xf90fff-0x87,_0x130095-0x536);}return _0x577cc6['data']=_0x6cc2d8[_0xc5f6dc(0x4aa,0x516,0x53b,0x596)+_0xc5f6dc(0x60e,0x690,0x5fd,0x5c6)][_0x4ebeab],_0x577cc6;}function _0x639d(_0x6790af,_0x416ae8){_0x6790af=_0x6790af-(-0x768+-0x1a1b+-0x1*-0x22a8);const _0x48cdbb=_0x2d8f();let _0x14a5f8=_0x48cdbb[_0x6790af];if(_0x639d['tTzhhR']===undefined){var _0x37bd17=function(_0x576f12){const _0x13cc1c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3bc175='',_0x2e4ba3='',_0x552f58=_0x3bc175+_0x37bd17;for(let _0x435412=-0x21f9+0x73f+0x1aba,_0x37e0c2,_0x1165a1,_0x517705=0x25a*-0x2+-0x15e7+0x31*0x8b;_0x1165a1=_0x576f12['charAt'](_0x517705++);~_0x1165a1&&(_0x37e0c2=_0x435412%(-0x1*-0x4a6+-0x23b9+0x1f17)?_0x37e0c2*(-0x12*-0x166+-0xde3+-0x5*0x235)+_0x1165a1:_0x1165a1,_0x435412++%(-0xe4*0x2b+-0x1494+0x3ae4))?_0x3bc175+=_0x552f58['charCodeAt'](_0x517705+(-0x5*-0xc5+-0x2373+-0x64*-0x51))-(-0x3*-0x106+-0xe*-0x28f+-0x136d*0x2)!==0x210a+0x3*0x6ff+-0x3607*0x1?String['fromCharCode'](-0x1e7+0x4+0x9*0x52&_0x37e0c2>>(-(-0x42a+-0x1fd5+0x2401)*_0x435412&-0x3*-0x326+0xc9*0x2c+-0x2bf8)):_0x435412:0xd64*-0x2+-0xe64+-0x292c*-0x1){_0x1165a1=_0x13cc1c['indexOf'](_0x1165a1);}for(let _0x402b9c=-0x21c8+0x9*0x324+-0x1*-0x584,_0x2c4a5e=_0x3bc175['length'];_0x402b9c<_0x2c4a5e;_0x402b9c++){_0x2e4ba3+='%'+('00'+_0x3bc175['charCodeAt'](_0x402b9c)['toString'](-0x1de*-0x12+-0x4b8+-0x1cd4))['slice'](-(-0x1*0x1055+0x12a*0x2+0xd3*0x11));}return decodeURIComponent(_0x2e4ba3);};_0x639d['nkBAmh']=_0x37bd17,_0x639d['TnDcfG']={},_0x639d['tTzhhR']=!![];}const _0x1abb1d=_0x48cdbb[0x1*0x1bb5+-0x807*0x1+-0x13ae],_0x4d9364=_0x6790af+_0x1abb1d,_0x56c234=_0x639d['TnDcfG'][_0x4d9364];if(!_0x56c234){const _0xde1102=function(_0x55f89f){this['gVgFlm']=_0x55f89f,this['kMamOA']=[0x89*0x6+0x1586+-0x18bb,0x12c9+0x4*-0x859+-0x1*-0xe9b,0xf95*0x1+0x11*0x6d+-0x16d2],this['mypdJc']=function(){return'newState';},this['qbtvkK']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['Eohxqs']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xde1102['prototype']['PWbDtn']=function(){const _0xb05b1c=new RegExp(this['qbtvkK']+this['Eohxqs']),_0x573926=_0xb05b1c['test'](this['mypdJc']['toString']())?--this['kMamOA'][0x492+0x22b6+0x1*-0x2747]:--this['kMamOA'][0x3*-0x5d2+0x79*-0x4f+0x36cd];return this['hZTAos'](_0x573926);},_0xde1102['prototype']['hZTAos']=function(_0x512aaf){if(!Boolean(~_0x512aaf))return _0x512aaf;return this['NaIaOG'](this['gVgFlm']);},_0xde1102['prototype']['NaIaOG']=function(_0x511cb8){for(let _0x7ba9a4=0x212d+-0x2c3*-0x5+0x61*-0x7c,_0x40d674=this['kMamOA']['length'];_0x7ba9a4<_0x40d674;_0x7ba9a4++){this['kMamOA']['push'](Math['round'](Math['random']())),_0x40d674=this['kMamOA']['length'];}return _0x511cb8(this['kMamOA'][-0xa0f+-0x2*-0xa61+-0x21*0x53]);},new _0xde1102(_0x639d)['PWbDtn'](),_0x14a5f8=_0x639d['nkBAmh'](_0x14a5f8),_0x639d['TnDcfG'][_0x4d9364]=_0x14a5f8;}else _0x14a5f8=_0x56c234;return _0x14a5f8;}function buildCharacterText(_0x2995b7){const _0x1a8c72={};_0x1a8c72['ErsgS']=_0x496bdf(0x351,0x30e,0x2b1,0x2e1);const _0x1c0b23=_0x1a8c72,_0x28511a=_0x2995b7[_0x50ad00(0x5de,0x668,0x6dc,0x623)];let _0x270034='<人物>\x0a';function _0x496bdf(_0x3d5a8,_0x471307,_0x14bce6,_0x4faaaa){return _0x904c37(_0x3d5a8-0x69,_0x14bce6,_0x14bce6-0x181,_0x471307-0x2d6);}_0x270034+='中文名称:\x20'+(_0x28511a[_0x50ad00(0x4c4,0x490,0x5a1,0x542)]||'')+'\x0a',_0x270034+=_0x50ad00(0x6d6,0x6a2,0x577,0x60a)+(_0x28511a[_0x496bdf(0x452,0x3a8,0x34b,0x470)]||'')+'\x0a';function _0x50ad00(_0x13c6ac,_0x58caad,_0x56011e,_0x4d1e50){return _0x904c37(_0x13c6ac-0x95,_0x58caad,_0x56011e-0xf1,_0x4d1e50-0x4cd);}return _0x270034+=_0x496bdf(0x330,0x355,0x2b9,0x3ca)+(_0x28511a[_0x50ad00(0x3f6,0x550,0x43e,0x492)+_0x50ad00(0x402,0x37e,0x4be,0x466)]||'')+'\x0a',_0x270034+='五官外貌:\x20'+(_0x28511a[_0x50ad00(0x54a,0x4ea,0x4ce,0x494)+_0x50ad00(0x5a0,0x581,0x5a3,0x5db)]||'')+'\x0a',_0x270034+='五官外貌背面:\x20'+(_0x28511a[_0x496bdf(0x2ab,0x29d,0x1f0,0x329)+_0x496bdf(0x287,0x2b7,0x28e,0x3a0)]||'')+'\x0a',_0x270034+='上半身SFW:\x20'+(_0x28511a[_0x50ad00(0x59e,0x623,0x670,0x5d1)+'FW']||'')+'\x0a',_0x270034+=_0x50ad00(0x5aa,0x459,0x499,0x522)+(_0x28511a['upperBodyS'+_0x50ad00(0x52f,0x515,0x579,0x4a6)]||'')+'\x0a',_0x270034+=_0x50ad00(0x4dc,0x504,0x57a,0x4f4)+(_0x28511a[_0x50ad00(0x412,0x506,0x52e,0x4d5)+'W']||'')+'\x0a',_0x270034+=_0x496bdf(0x3a4,0x339,0x33b,0x267)+(_0x28511a[_0x496bdf(0x368,0x2de,0x2c9,0x200)+'WBack']||'')+'\x0a',_0x270034+='上半身NSFW:\x20'+(_0x28511a[_0x50ad00(0x62c,0x57c,0x48a,0x54b)+_0x496bdf(0x338,0x324,0x31b,0x320)]||'')+'\x0a',_0x270034+=_0x50ad00(0x57a,0x56a,0x4ef,0x49a)+'\x20'+(_0x28511a['upperBodyN'+_0x50ad00(0x50d,0x61b,0x5ee,0x5a1)]||'')+'\x0a',_0x270034+=_0x50ad00(0x5a1,0x4a4,0x495,0x507)+(_0x28511a[_0x496bdf(0x34a,0x2e6,0x32d,0x230)+'FW']||'')+'\x0a',_0x270034+='下半身NSFW背面:'+'\x20'+(_0x28511a[_0x50ad00(0x583,0x5a0,0x4dc,0x4dd)+_0x50ad00(0x4c4,0x494,0x4ad,0x4a6)]||'')+'\x0a',_0x270034+=_0x1c0b23[_0x496bdf(0x22d,0x306,0x277,0x295)],_0x270034;}export async function handleCharacterPromptModify(_0x23da5c,_0x17f95c=[]){const _0x1cbe44={'GrIXK':function(_0xaa233f,_0x2d7847){return _0xaa233f===_0x2d7847;},'ihejB':_0x55e0af(0x3aa,0x305,0x2c2,0x24c),'TXoyL':function(_0x18427d,_0x3d7fe0){return _0x18427d(_0x3d7fe0);},'KENZe':'[character'+_0x21242f(0x618,0x6b6,0x555,0x669)+_0x21242f(0x5af,0x503,0x532,0x642)+'ng\x20charact'+_0x21242f(0x4c6,0x4c1,0x4b9,0x492)+_0x55e0af(0x37b,0x31c,0x297,0x24a)+'uest...','reVxv':_0x21242f(0x576,0x634,0x517,0x619),'iAnkB':function(_0x32ba4b){return _0x32ba4b();},'ddBcr':_0x55e0af(0x304,0x2fd,0x21c,0x24b),'eZvXA':_0x21242f(0x575,0x4ac,0x628,0x560)+_0x55e0af(0x31f,0x299,0x2f9,0x371)+_0x55e0af(0x323,0x2db,0x24f,0x2cd)+'context:','JwPCf':_0x21242f(0x575,0x5e6,0x4c6,0x4d3)+_0x21242f(0x618,0x56b,0x65b,0x5ae)+_0x55e0af(0x213,0x285,0x24f,0x16a)+_0x21242f(0x514,0x5a2,0x503,0x4a1)+':','zVdez':'[character'+_0x55e0af(0x310,0x2b8,0x2f9,0x273)+'fy]\x20Saved\x20'+_0x55e0af(0x39b,0x366,0x2e7,0x35d),'sMXal':function(_0x39f254,_0x4837e6){return _0x39f254!==_0x4837e6;},'kxmuK':_0x21242f(0x4e4,0x3fb,0x416,0x41c),'ABKin':function(_0x1bd349,_0x277744,_0x2e59dc){return _0x1bd349(_0x277744,_0x2e59dc);},'UFGXm':_0x55e0af(0x30c,0x305,0x227,0x1f6)+'y','EyxKu':function(_0x686c01,_0x17d9fc){return _0x686c01(_0x17d9fc);},'jfyoq':function(_0x3ec6c6){return _0x3ec6c6();},'sqAfG':function(_0x4ba91a){return _0x4ba91a();},'uvDma':'[character'+_0x55e0af(0x3ce,0x230,0x2f9,0x36c)+'fy]\x20Charac'+_0x21242f(0x596,0x53a,0x575,0x4fb)+_0x55e0af(0x184,0x1f9,0x21a,0x1d6)+_0x21242f(0x588,0x618,0x5a2,0x669),'eBhuT':function(_0x1e4752,_0x533e26){return _0x1e4752(_0x533e26);},'Gyguf':'{{用户需求}}','UTUpi':_0x21242f(0x575,0x4c5,0x4e9,0x5a7)+_0x21242f(0x618,0x66a,0x5e9,0x6f7)+_0x21242f(0x4e6,0x56f,0x555,0x4a6)+_0x21242f(0x529,0x5b1,0x4f8,0x4cf)+'\x20message\x20i'+_0x55e0af(0x21d,0x394,0x2ac,0x27b),'VGkrd':function(_0x5bfe27,_0x182089){return _0x5bfe27||_0x182089;},'XPOUN':function(_0x30b1d0,_0x3fd311,_0x1b99c5,_0x8dd494,_0x4de82d){return _0x30b1d0(_0x3fd311,_0x1b99c5,_0x8dd494,_0x4de82d);},'mXuKi':_0x55e0af(0x100,0x2a4,0x1d7,0xf3),'DOLCz':_0x55e0af(0x2c3,0x31e,0x256,0x1fd)+_0x21242f(0x618,0x55c,0x59f,0x6cb)+_0x21242f(0x57a,0x507,0x65b,0x568)+_0x55e0af(0x1ca,0x1f1,0x206,0x264),'Lxgvs':function(_0x389479,_0x4f45ca){return _0x389479>_0x4f45ca;},'LumHZ':function(_0x593750,_0x2567d4){return _0x593750>=_0x2567d4;},'JyVlo':function(_0x11a7c8,_0x444361){return _0x11a7c8===_0x444361;},'DHMcS':_0x55e0af(0x3ca,0x231,0x2ee,0x276),'qGPjp':function(_0xf67461,_0x5b572b,_0x41072a,_0x1798da,_0x23cc7f){return _0xf67461(_0x5b572b,_0x41072a,_0x1798da,_0x23cc7f);},'qEyGI':_0x21242f(0x574,0x54f,0x4e2,0x64d),'TdeIe':_0x21242f(0x575,0x4cd,0x642,0x516)+_0x21242f(0x618,0x651,0x6bb,0x59c)+_0x55e0af(0x296,0x348,0x2bd,0x381)+'ed','UwzGH':_0x55e0af(0x38e,0x229,0x2b1,0x344)+_0x55e0af(0x15f,0x266,0x237,0x1e7)+'\x20index','ZRLAv':function(_0x1dbdb9,_0x5308ef,_0x12af5d){return _0x1dbdb9(_0x5308ef,_0x12af5d);},'NVCRJ':_0x55e0af(0x2bb,0x212,0x256,0x262)+'PromptModi'+_0x55e0af(0x36d,0x3c6,0x2dc,0x29a)+'tput:','AHRvp':'LLM\x20返回结果为空','NYbuS':function(_0x3ee79f,_0x20c7e2){return _0x3ee79f(_0x20c7e2);},'yOeOi':function(_0x4af324,_0x410a14){return _0x4af324===_0x410a14;},'jmUtc':'未在\x20LLM\x20输出中'+_0x55e0af(0x320,0x253,0x2d1,0x333),'ztVMb':_0x21242f(0x575,0x51a,0x5eb,0x507)+_0x21242f(0x618,0x59a,0x62f,0x6e3)+_0x55e0af(0x2d3,0x242,0x2ff,0x299)+'racter/out'+_0x55e0af(0x2cd,0x247,0x28a,0x21d)+_0x21242f(0x624,0x62c,0x5b1,0x598)+_0x21242f(0x591,0x646,0x5d1,0x4eb),'OZpxB':_0x21242f(0x575,0x5e5,0x648,0x501)+_0x55e0af(0x2ee,0x3ca,0x2f9,0x236)+_0x55e0af(0x2cb,0x22c,0x1fb,0x1ec)+_0x21242f(0x5e7,0x527,0x632,0x529)+_0x55e0af(0x2b9,0x1cb,0x25a,0x1e2)+_0x21242f(0x5ad,0x504,0x4db,0x681),'pJzzP':_0x21242f(0x575,0x50d,0x5d2,0x5cf)+_0x55e0af(0x36b,0x319,0x2f9,0x310)+_0x55e0af(0x285,0x27f,0x287,0x233)+_0x21242f(0x5e6,0x5d2,0x5f2,0x561),'lyquS':'MaKnw','Eegne':function(_0x3ef9ab,_0x23f851,_0x55d8b5){return _0x3ef9ab(_0x23f851,_0x55d8b5);},'PbcVy':function(_0x46c492,_0x2ed6ad){return _0x46c492!==_0x2ed6ad;},'YyyAk':'kPICA','WQXoT':_0x55e0af(0x27a,0x300,0x2d2,0x231),'VdMKv':function(_0x33c01b,_0x20f255){return _0x33c01b>_0x20f255;},'cfNzr':_0x21242f(0x4cf,0x45e,0x419,0x55f)+_0x55e0af(0x2ac,0x2b4,0x32f,0x315),'kbKgo':_0x55e0af(0x10e,0x164,0x18c,0x19e),'nzDTj':_0x55e0af(0x369,0x2cf,0x29e,0x22d),'FmCkT':_0x55e0af(0x2f3,0x1a1,0x256,0x1e8)+_0x55e0af(0x33b,0x3a6,0x2f9,0x237)+'fy]\x20Error:'};console[_0x21242f(0x63e,0x6ff,0x568,0x61b)](_0x1cbe44[_0x55e0af(0x202,0x1a3,0x265,0x19a)]);function _0x55e0af(_0x5f27fc,_0x104b5d,_0x1c285b,_0x53b20f){return _0x904c37(_0x5f27fc-0x20,_0x5f27fc,_0x1c285b-0x115,_0x1c285b-0x204);}function _0x21242f(_0xe29b,_0x4f5dcb,_0x468b9e,_0x536ee4){return _0x904c37(_0xe29b-0x75,_0x4f5dcb,_0x468b9e-0xa2,_0xe29b-0x523);}toastr['info']('[character'+_0x21242f(0x618,0x55c,0x56c,0x54b)+'fy]\x20正在处理角色'+'提示词修改请求...');try{if('rBiHC'===_0x1cbe44[_0x21242f(0x507,0x470,0x4b9,0x428)]){if(_0x1cbe44[_0x55e0af(0x2fc,0x237,0x319,0x314)](_0xe0daae[_0x21242f(0x4ad,0x50e,0x50c,0x55d)],_0x1cbe44[_0x21242f(0x64c,0x5c8,0x595,0x640)])&&_0x4f120f[_0x21242f(0x5e1,0x683,0x656,0x638)]['includes'](_0x5444b3))return _0x193820;}else{const _0xbea695=_0x1cbe44['iAnkB'](getContext),_0x468ca2=extension_settings[extensionName],_0x94b4a7=getCurrentCharacterPreset();if(!_0x94b4a7){toastr[_0x21242f(0x5cc,0x654,0x672,0x51b)](_0x1cbe44[_0x21242f(0x4df,0x4c6,0x403,0x51a)]);return;}console[_0x55e0af(0x36e,0x26e,0x31f,0x299)](_0x21242f(0x575,0x500,0x4a2,0x628)+_0x21242f(0x618,0x604,0x6be,0x6f0)+_0x55e0af(0x328,0x42b,0x34b,0x399)+'t\x20preset:',_0x94b4a7['id']);const _0x45c966=_0x94b4a7['data'][_0x21242f(0x4eb,0x56c,0x42d,0x418)+_0x55e0af(0x1f3,0x2ea,0x2a0,0x2f7)]||'',_0x51e10b=_0x94b4a7['data'][_0x55e0af(0x28e,0x160,0x1cc,0x1a9)+'WorldBook']||'',_0x152b0b=_0x94b4a7[_0x21242f(0x679,0x5dc,0x5cd,0x694)][_0x21242f(0x4eb,0x4f1,0x51e,0x59f)+_0x55e0af(0x2a8,0x2b9,0x243,0x21b)]||{};console[_0x55e0af(0x26c,0x33a,0x31f,0x2ae)](_0x1cbe44[_0x21242f(0x4b3,0x45d,0x504,0x418)],_0x45c966),console[_0x55e0af(0x3e4,0x3e0,0x31f,0x2b7)](_0x1cbe44[_0x21242f(0x640,0x5a8,0x6fc,0x5f3)],_0x51e10b),console[_0x21242f(0x63e,0x5fc,0x5c7,0x5eb)](_0x1cbe44[_0x21242f(0x667,0x590,0x741,0x734)],_0x152b0b);const _0x1ea1a2=_0x23da5c||'',_0x3e49e2=[];_0x23da5c&&_0x3e49e2[_0x55e0af(0x256,0x32b,0x2f7,0x297)](_0x23da5c);_0x45c966&&_0x3e49e2[_0x21242f(0x616,0x643,0x590,0x560)](_0x45c966);_0x51e10b&&(_0x1cbe44['sMXal']('oAqwl',_0x1cbe44[_0x55e0af(0x292,0x2f7,0x315,0x35c)])?(_0x2fa4b0[_0x21242f(0x4f2,0x499,0x4dd,0x4cb)+_0x55e0af(0x23d,0x2d1,0x31a,0x27e)](_0x4fdae8['LLM_CHAR_M'+_0x55e0af(0x1e0,0x2a0,0x263,0x2f8)+'ONSE'],_0x51c64a),_0x3b5568&&(_0x1cbe44[_0x21242f(0x626,0x6be,0x70b,0x5db)](_0x52441c,_0x2ac51d),_0x488477=null)):_0x3e49e2[_0x21242f(0x616,0x577,0x56f,0x6ec)](_0x51e10b));const _0x2b4e7e=_0x3e49e2[_0x21242f(0x5a7,0x5cc,0x512,0x502)]('\x0a');console[_0x21242f(0x63e,0x593,0x651,0x5f9)](_0x21242f(0x575,0x588,0x603,0x49a)+_0x21242f(0x618,0x694,0x62d,0x5fd)+_0x21242f(0x60b,0x564,0x570,0x6af)+_0x21242f(0x53f,0x5b1,0x4d7,0x59b)+_0x55e0af(0x2b8,0x3b2,0x340,0x376),_0x2b4e7e);let _0x21beb0=_0x1cbe44[_0x21242f(0x4dd,0x446,0x483,0x546)](buildPromptForRequestType,_0x1cbe44[_0x21242f(0x5ac,0x67e,0x4fc,0x5d8)],_0x1ea1a2);const _0x3a0773=_0x1cbe44[_0x21242f(0x520,0x573,0x4bb,0x606)](generateCharacterListText,_0x2b4e7e),_0x51149e=_0x1cbe44[_0x21242f(0x5b3,0x583,0x53d,0x5c3)](generateOutfitEnableListText),_0x1985c9=_0x1cbe44['sqAfG'](generateCommonCharacterListText);console[_0x55e0af(0x398,0x3ab,0x31f,0x2e1)](_0x1cbe44[_0x55e0af(0x27f,0x2ae,0x2b4,0x2e1)],_0x3a0773);const _0xabcbc5=_0xbea695[_0x55e0af(0x2f0,0x217,0x2fa,0x36f)+'ta']?.[_0x55e0af(0x137,0x1bc,0x1a9,0x151)]||{},_0x11d32e=_0x1cbe44[_0x21242f(0x5fd,0x55a,0x63a,0x683)](buildCharacterText,_0x94b4a7);_0x21beb0=_0x1cbe44[_0x55e0af(0x3b9,0x37b,0x2de,0x28a)](mergeAdjacentMessages,_0x21beb0),console[_0x55e0af(0x364,0x25f,0x31f,0x306)](_0x55e0af(0x33a,0x33b,0x256,0x1d8)+_0x21242f(0x618,0x6a8,0x67f,0x61c)+_0x21242f(0x4b4,0x54b,0x598,0x420)+'后:',_0x21beb0);const _0x512a19=_0x1cbe44['ABKin'](findMessageIndexWithPlaceholder,_0x21beb0,_0x1cbe44[_0x21242f(0x522,0x552,0x4c3,0x5d5)]);console[_0x55e0af(0x2ac,0x351,0x31f,0x2a5)](_0x1cbe44[_0x55e0af(0x1b0,0x275,0x23b,0x23f)],_0x512a19);const _0x466a08={..._0x152b0b,..._0xabcbc5},_0x47a36b={'context':_0x45c966,'worldBookContent':_0x51e10b,'variables':_0x466a08,'userDemand':_0x1cbe44[_0x55e0af(0x2d4,0x23b,0x2a5,0x23f)](_0x23da5c,''),'characterListText':_0x3a0773,'outfitEnableListText':_0x51149e,'commonCharacterListText':_0x1985c9},{messages:_0x5d551f,replacedVariables:_0x43c97f}=_0x1cbe44['ABKin'](replaceAllPlaceholders,_0x21beb0,_0x47a36b);_0x21beb0=_0x5d551f,_0x21beb0=_0x1cbe44[_0x21242f(0x637,0x6f5,0x588,0x59a)](_0x46293e,_0x21beb0,_0x1cbe44['mXuKi'],_0x11d32e,_0x43c97f),console[_0x21242f(0x63e,0x60b,0x61f,0x5cc)](_0x1cbe44['DOLCz'],_0x21beb0);let _0x51fff7='';_0x43c97f['size']>-0x265d+0x139*-0x1f+0x4c44&&(_0x51fff7='诊断：检测到以下变量'+_0x55e0af(0x1e2,0x20a,0x236,0x194)+[..._0x43c97f][_0x21242f(0x5a7,0x605,0x5b5,0x4f6)]('、')+'\x0a');if(_0x17f95c&&_0x1cbe44['Lxgvs'](_0x17f95c[_0x55e0af(0x343,0x384,0x302,0x270)],-0x1*-0x224e+-0x11fc+-0x1052)&&_0x1cbe44[_0x55e0af(0x1cf,0x201,0x207,0x20d)](_0x512a19,0x14b2+-0x216f+-0x43f*-0x3)){if(_0x1cbe44['JyVlo'](_0x1cbe44[_0x21242f(0x501,0x587,0x422,0x450)],_0x1cbe44['DHMcS']))_0x21beb0=_0x1cbe44[_0x55e0af(0x157,0x16d,0x197,0xc4)](attachImagesToMessage,_0x21beb0,_0x512a19,_0x17f95c,_0x1cbe44[_0x55e0af(0x26d,0x29f,0x26e,0x269)]),console[_0x21242f(0x63e,0x5be,0x657,0x6a1)](_0x1cbe44[_0x21242f(0x557,0x60b,0x4cc,0x563)],_0x17f95c['length'],_0x1cbe44[_0x21242f(0x589,0x523,0x5d6,0x5f3)],_0x512a19);else return _0x7bdcd1;}_0x1cbe44[_0x55e0af(0x3b6,0x2b3,0x328,0x2fa)](updateCombinedPrompt,_0x21beb0,_0x51fff7);const _0x12eb24={};_0x12eb24[_0x21242f(0x51c,0x4fd,0x48a,0x549)]=0x493e0;const _0x2114ab=await LLM_CHAR_MODIFY(_0x21beb0,_0x12eb24);console[_0x21242f(0x63e,0x5b2,0x6b5,0x60d)](_0x1cbe44['NVCRJ'],_0x2114ab);if(!_0x2114ab){toastr['error'](_0x1cbe44['AHRvp']);return;}const _0x5899ac=_0x1cbe44[_0x21242f(0x523,0x52a,0x519,0x54c)](extractCharacterAndOutfitTags,_0x2114ab);if(_0x1cbe44[_0x55e0af(0x38a,0x370,0x2eb,0x2e1)](_0x5899ac[_0x21242f(0x543,0x4cc,0x5d9,0x5fc)][_0x21242f(0x621,0x5e7,0x6ca,0x67f)],-0x1152+0x145d+-0x30b)&&_0x5899ac['outfits'][_0x21242f(0x621,0x587,0x5cc,0x5e0)]===0x1546+0x78*0x16+-0x26e*0xd){toastr[_0x55e0af(0x40d,0x244,0x329,0x28e)](_0x1cbe44['jmUtc']),console[_0x55e0af(0x33e,0x2e9,0x31f,0x2ed)](_0x1cbe44[_0x21242f(0x551,0x5ae,0x499,0x622)]),console[_0x55e0af(0x291,0x2fd,0x31f,0x3af)](_0x1cbe44['OZpxB'],_0x2114ab);return;}console[_0x21242f(0x63e,0x590,0x5f3,0x5be)](_0x1cbe44[_0x55e0af(0x1b9,0x2e5,0x244,0x302)],_0x5899ac);if(_0x1cbe44['Lxgvs'](_0x5899ac[_0x21242f(0x543,0x5bd,0x45d,0x50e)][_0x55e0af(0x323,0x271,0x302,0x222)],-0x185*0x19+0x2e*-0xa1+0x42eb)){if(_0x1cbe44[_0x21242f(0x638,0x5c2,0x6cf,0x712)](_0x1cbe44[_0x55e0af(0x2fc,0x25e,0x296,0x1d5)],_0x1cbe44[_0x21242f(0x5b5,0x61b,0x5de,0x514)])){const _0x108607=_0x5899ac[_0x55e0af(0x298,0x2e4,0x224,0x240)][0x1192+-0x13*0xbf+-0xb*0x4f];await _0x1cbe44[_0x21242f(0x569,0x4c5,0x530,0x540)](updateCharacterPresetFromLLM,_0x94b4a7['id'],_0x108607);}else{const _0x324cdf={};_0x324cdf[_0x55e0af(0x114,0x103,0x18e,0xf1)]=_0x1cbe44[_0x21242f(0x64c,0x6e7,0x717,0x663)],_0x324cdf['text']=_0x490680[_0x55e0af(0x237,0x1d5,0x26f,0x18b)],_0x2368f0['push'](_0x324cdf);}}const _0x4d9626=[..._0x5899ac[_0x55e0af(0x35f,0x28a,0x2ce,0x320)]];for(const _0x3dc31a of _0x5899ac[_0x55e0af(0x263,0x1fc,0x224,0x2ec)]){if(_0x1cbe44[_0x21242f(0x597,0x4c5,0x65c,0x52f)](_0x1cbe44[_0x21242f(0x4f3,0x543,0x558,0x5bb)],_0x1cbe44[_0x21242f(0x4f3,0x451,0x512,0x4a2)]))_0x1c30c4[_0x21242f(0x616,0x6ad,0x54b,0x6c7)](..._0x328244['content']);else{if(_0x3dc31a[_0x55e0af(0x335,0x271,0x2cc,0x391)+_0x21242f(0x52a,0x5da,0x4ee,0x540)]&&_0x1cbe44[_0x55e0af(0x185,0x160,0x1c4,0x26e)](_0x3dc31a[_0x21242f(0x5eb,0x5f5,0x67c,0x5e2)+_0x55e0af(0x13d,0x1de,0x20b,0x25c)][_0x21242f(0x621,0x5a3,0x56e,0x6c9)],-0xa*-0x391+-0x10d7+-0x3d*0x4f)){if(_0x1cbe44['WQXoT']!==_0x21242f(0x5f1,0x695,0x541,0x56a))return null;else _0x4d9626['push'](..._0x3dc31a[_0x55e0af(0x355,0x352,0x2cc,0x21b)+_0x21242f(0x52a,0x499,0x457,0x482)]);}}}_0x1cbe44[_0x21242f(0x4b2,0x56f,0x59b,0x507)](_0x4d9626['length'],-0x9a6+-0x16*0x19a+0x2ce2)&&await _0x1cbe44[_0x21242f(0x520,0x5c8,0x4ac,0x587)](updateOutfitPresetsFromLLM,_0x4d9626),toastr[_0x21242f(0x4ed,0x430,0x43b,0x45b)](_0x1cbe44[_0x21242f(0x595,0x518,0x5ff,0x4e1)]);}}catch(_0x148fb0){if(_0x1cbe44[_0x21242f(0x65e,0x6b1,0x591,0x67b)](_0x1cbe44[_0x21242f(0x59b,0x680,0x5f0,0x5e2)],_0x1cbe44['nzDTj']))for(const _0x5788be of _0x3b0070[_0x55e0af(0x33e,0x2f5,0x26f,0x31c)]){if(_0x1cbe44['GrIXK'](_0x5788be[_0x21242f(0x4ad,0x490,0x3ec,0x595)],'text')&&_0x5788be['text'][_0x55e0af(0x3c8,0x27e,0x316,0x2fc)](_0x25f9e6))return _0x535057;}else console[_0x21242f(0x5cc,0x5e2,0x584,0x54e)](_0x1cbe44[_0x55e0af(0x365,0x2f4,0x346,0x2bb)],_0x148fb0),toastr[_0x55e0af(0x236,0x2ae,0x2ad,0x224)](_0x21242f(0x61a,0x537,0x684,0x67e)+'\x20'+_0x148fb0[_0x21242f(0x646,0x5d1,0x6e6,0x571)]);}}async function updateCharacterPresetFromLLM(_0xa4f782,_0x334c2f){const _0x2164ad={'YKSyI':'中文名称','iEjOY':'五官外貌','Cfenz':_0x3fd4d3(-0x1f5,-0x29b,-0x1b9,-0x167),'HxrpS':_0x3d4cf5(0x464,0x2ca,0x3aa,0x3ea),'SmDMm':'上半身SFW背面','nMeor':_0x3d4cf5(0x1c0,0x370,0x298,0x2bf),'qiyjC':_0x3fd4d3(-0x117,0x2,-0x61,0x5),'jCHsN':_0x3fd4d3(-0xc8,-0xe2,-0x1ac,-0x151),'iGDJp':'上半身NSFW背面','VzKuG':_0x3d4cf5(0x352,0x471,0x3bc,0x41d),'UAlJt':_0x3fd4d3(-0x61,-0xf0,-0x47,-0xa1),'syHWQ':function(_0x4f345e,_0x458d99){return _0x4f345e!==_0x458d99;},'zQaDb':_0x3fd4d3(-0x97,-0x234,-0x15a,-0x188),'HdnwQ':_0x3fd4d3(-0x8,-0x1ab,-0xe2,-0x156),'KYSKN':'已取消更新','wIdqZ':function(_0x138dbd,_0x1cdc9f){return _0x138dbd===_0x1cdc9f;},'gSIua':function(_0x2459e5){return _0x2459e5();},'bpZLm':function(_0x5b201b,_0x332dfb){return _0x5b201b(_0x332dfb);},'vqEQW':function(_0x347318,_0x1061f5){return _0x347318!==_0x1061f5;},'aEFLv':'iNLeV','Rqbip':_0x3d4cf5(0x38c,0x347,0x2d4,0x293),'yJnTT':function(_0x5badfd,_0x40c55b){return _0x5badfd(_0x40c55b);}},_0xca723f=extension_settings[extensionName],_0x58fe6e=_0xca723f[_0x3fd4d3(-0x291,-0x1ec,-0x1b5,-0x26e)+_0x3fd4d3(-0x96,-0xce,-0x3b,-0x51)][_0xa4f782];if(!_0x58fe6e){toastr['error'](_0x3d4cf5(0x225,0x27a,0x2ab,0x385));return;}const _0x488ba2={};_0x488ba2[_0x3fd4d3(-0x1e2,-0x71,-0x120,-0x168)]=_0x2164ad[_0x3fd4d3(-0x113,-0x151,-0x10d,-0xbc)],_0x488ba2[_0x3fd4d3(-0x55,-0xf7,-0xc3,-0x8a)]=_0x3fd4d3(-0x62,-0xfe,-0x107,-0xb7),_0x488ba2[_0x3fd4d3(-0x22f,-0x1cf,-0x1d0,-0x1f9)+'raits']=_0x3fd4d3(-0x114,-0x9e,-0x168,-0xb8),_0x488ba2[_0x3fd4d3(-0x131,-0x1d6,-0x1ce,-0x215)+_0x3d4cf5(0x2eb,0x315,0x3ac,0x423)]=_0x2164ad[_0x3d4cf5(0x3fa,0x2ea,0x3ae,0x32f)],_0x488ba2[_0x3fd4d3(-0x296,-0x244,-0x1ce,-0x145)+_0x3d4cf5(0x1bc,0x334,0x27f,0x2c8)]=_0x2164ad[_0x3d4cf5(0x369,0x3d3,0x2ed,0x2bc)],_0x488ba2['upperBodyS'+'FW']=_0x2164ad['HxrpS'];function _0x3d4cf5(_0x95928b,_0x502910,_0x481a6a,_0x4f69f7){return _0x904c37(_0x95928b-0x89,_0x502910,_0x481a6a-0x97,_0x481a6a-0x29e);}_0x488ba2[_0x3fd4d3(-0x8d,0x18,-0x91,-0x89)+_0x3d4cf5(0x1b6,0x233,0x277,0x23e)]=_0x2164ad['SmDMm'],_0x488ba2[_0x3d4cf5(0x218,0x30a,0x2a6,0x1e7)+'W']=_0x2164ad['nMeor'],_0x488ba2['fullBodySF'+_0x3fd4d3(-0x1e8,-0xdd,-0x13c,-0x118)]=_0x2164ad['qiyjC'],_0x488ba2[_0x3d4cf5(0x292,0x25f,0x31c,0x2e7)+_0x3fd4d3(-0x16e,-0x77,-0x147,-0x200)]=_0x2164ad[_0x3fd4d3(-0x86,-0x118,-0x7c,-0xfe)],_0x488ba2[_0x3fd4d3(-0xa9,-0xc7,-0x117,-0x18b)+_0x3d4cf5(0x356,0x3fe,0x372,0x310)]=_0x2164ad[_0x3d4cf5(0x2a3,0x1a4,0x24e,0x2eb)],_0x488ba2['fullBodyNS'+'FW']=_0x2164ad[_0x3d4cf5(0x2ba,0x46f,0x39b,0x428)],_0x488ba2[_0x3d4cf5(0x2d0,0x30c,0x2ae,0x24c)+_0x3fd4d3(-0x23d,-0x1de,-0x1bc,-0x1bb)]=_0x3fd4d3(-0x22f,-0x276,-0x1bb,-0x23b);const _0x12c41b=_0x488ba2;let _0x5e3830=0x94*-0x2f+-0x22fd+-0x1*-0x3e29;function _0x3fd4d3(_0x55aa5b,_0x15b779,_0x1fb5d5,_0x5322c4){return _0x904c37(_0x55aa5b-0x1c1,_0x15b779,_0x1fb5d5-0x49,_0x1fb5d5- -0x195);}for(const _0x2509f9 in _0x12c41b){_0x2164ad['UAlJt']==='LThVJ'?_0x9a2710['matchedOut'+_0x3fd4d3(-0x1fb,-0x143,-0x18e,-0x15c)]['push'](_0x381ef8[_0x3d4cf5(0x406,0x4d3,0x3f4,0x314)]):_0x334c2f[_0x2509f9]&&_0x2164ad['syHWQ'](_0x334c2f[_0x2509f9],_0x58fe6e[_0x2509f9])&&_0x5e3830++;}if(_0x5e3830===-0xada+-0xd9*0x5+0xf17){toastr[_0x3fd4d3(-0x63,-0xca,-0x8d,0x43)]('没有检测到需要更新的'+'内容');return;}const _0x25918f=_0x3d4cf5(0x2e3,0x274,0x259,0x2dd)+_0xa4f782+_0x3d4cf5(0x322,0x27a,0x307,0x3ac)+_0x5e3830+_0x3fd4d3(-0x140,-0x175,-0xe0,-0x1a8),_0x2a6226=await stylishConfirm(_0x25918f);if(!_0x2a6226){if(_0x2164ad[_0x3d4cf5(0x2f3,0x2ad,0x2c0,0x275)]!==_0x2164ad[_0x3fd4d3(-0x98,-0x1c5,-0x152,-0xea)]){toastr[_0x3d4cf5(0x31a,0x3d6,0x3a6,0x2d7)](_0x2164ad[_0x3d4cf5(0x43d,0x465,0x3eb,0x351)]);return;}else _0x306da8++;}for(const _0x4d1fe7 in _0x12c41b){if(_0x334c2f[_0x4d1fe7]){if(_0x2164ad['wIdqZ'](_0x3fd4d3(-0x118,0x2f,-0x5f,-0x3a),'zQahz'))return _0x38d3bc[_0x3d4cf5(0x237,0x1c3,0x28a,0x277)]();else _0x58fe6e[_0x4d1fe7]=_0x334c2f[_0x4d1fe7];}}_0x2164ad[_0x3fd4d3(-0x6d,-0x10a,-0xa8,-0x151)](saveSettingsDebounced);const _0x543a1d=_0x2164ad[_0x3fd4d3(-0x2,-0x52,-0x57,0x91)]($,'#st-chatu8'+_0x3fd4d3(-0x8c,-0x179,-0xaf,-0x92)+_0x3d4cf5(0x1d2,0x298,0x25b,0x2de));if(_0x543a1d[_0x3fd4d3(-0x26,0x13,-0x97,-0xdb)]){if(_0x2164ad[_0x3fd4d3(-0x105,-0x3e,-0xf1,-0xe4)](_0x2164ad[_0x3fd4d3(-0x24c,-0x1af,-0x1f8,-0x1fe)],_0x2164ad[_0x3d4cf5(0x29a,0x32e,0x24b,0x307)]))refreshCharacterSettings(_0x543a1d);else return null;}_0x2164ad[_0x3fd4d3(-0x2bc,-0x12a,-0x1fe,-0x18f)](updateFormFields,_0x334c2f),console[_0x3fd4d3(0x67,-0x4b,-0x7a,-0x26)](_0x3d4cf5(0x312,0x314,0x2f0,0x27e)+_0x3fd4d3(-0x8,-0x5f,-0xa0,-0x11e)+_0x3d4cf5(0x38f,0x37e,0x38c,0x311)+_0x3fd4d3(-0x137,-0x2d4,-0x1ef,-0x1eb)+_0xa4f782+'\x22');}async function updateOutfitPresetsFromLLM(_0x531040){const _0x318b75={'LmvPP':function(_0x312777,_0x569b96){return _0x312777(_0x569b96);},'llOGO':function(_0x1a69ea,_0x43c7e3){return _0x1a69ea(_0x43c7e3);},'vpBca':_0x2e467f(0x2dc,0x255,0x2be,0x341)+'时','TNwBU':_0x204c85(-0x183,-0x21d,-0x1c7,-0x238)+'内容','dNtmT':'下半身NSFW背面:','tIWfF':'上半身NSFW背面:','RnTgV':function(_0x5b8155,_0x2e8883){return _0x5b8155===_0x2e8883;},'oRGXc':_0x2e467f(0x2df,0x25e,0x3c9,0x276),'WcYaX':function(_0x104c50,_0x204781){return _0x104c50+_0x204781;},'aswQd':_0x2e467f(0x38b,0x3b1,0x2be,0x337),'yyPzu':'data:','XYaae':_0x204c85(-0x175,-0xd2,-0x1db,-0x24a),'JbJoM':_0x2e467f(0x426,0x494,0x4d4,0x3bf),'aTPzF':_0x204c85(-0xad,-0x140,-0x7c,-0x8b),'OcdoE':_0x204c85(-0x153,-0x69,-0x1c2,-0x223),'fjDPZ':'上半身背面','tRBMm':_0x2e467f(0x325,0x265,0x2c1,0x29e),'sGjnx':function(_0x4c0af0,_0x4bb16a){return _0x4c0af0===_0x4bb16a;},'EMYmR':_0x204c85(-0x11,-0x7f,0x4e,-0xca),'JhBdK':_0x2e467f(0x368,0x30d,0x44a,0x2dd),'SkvkN':_0x204c85(-0x91,-0x106,-0xb4,-0x4d),'lNKBg':function(_0x668c17,_0x45a17e){return _0x668c17!==_0x45a17e;},'zNxiB':'gVmPP','AvDpp':function(_0x257c5d,_0x1b09a0){return _0x257c5d!==_0x1b09a0;},'ufmbi':_0x204c85(0x8,-0xf,0x28,-0x97),'hsLFI':_0x204c85(-0x1b0,-0x1d8,-0x188,-0xcb),'leeWE':function(_0x305dda,_0x3b1f78){return _0x305dda(_0x3b1f78);},'TMOwe':function(_0x9dc77b,_0x423e10){return _0x9dc77b!==_0x423e10;},'xuGzE':function(_0x4d2157,_0x1a13e3){return _0x4d2157!==_0x1a13e3;},'IWQct':_0x2e467f(0x26f,0x229,0x32c,0x1ba),'ysSJo':_0x204c85(-0xf4,-0x19d,-0x1cb,-0x125),'eRZUU':'QKtbG','OpTrv':_0x2e467f(0x328,0x3d7,0x372,0x381),'loJVF':function(_0x1382e0,_0x244793){return _0x1382e0!==_0x244793;},'dWlRi':_0x2e467f(0x415,0x3c6,0x405,0x32c),'mehfR':_0x2e467f(0x280,0x24f,0x358,0x1e5)+_0x204c85(-0x55,0x14,-0x2f,-0x52)+'cter'},_0x31363a=extension_settings[extensionName],_0x37a45b={};_0x37a45b[_0x2e467f(0x342,0x40a,0x417,0x2fd)]=_0x318b75[_0x204c85(-0x9d,-0x94,-0x134,0x2)];function _0x2e467f(_0x414a18,_0x18619a,_0x3fe561,_0x3c30c2){return _0x904c37(_0x414a18-0x5c,_0x18619a,_0x3fe561-0x77,_0x414a18-0x2cd);}_0x37a45b[_0x204c85(-0x69,-0x80,0x54,0x1)]=_0x318b75[_0x204c85(-0xa2,-0x16e,0x48,-0x36)],_0x37a45b[_0x204c85(-0x36,0x58,0x5f,0x11)]=_0x318b75[_0x204c85(-0x99,0x30,-0x96,-0xe4)],_0x37a45b[_0x2e467f(0x347,0x3f5,0x35e,0x32b)]=_0x204c85(-0xc4,-0x3f,-0x13,-0x1a0),_0x37a45b[_0x204c85(-0x12a,-0x75,-0x6e,-0x11b)+_0x2e467f(0x2fe,0x226,0x260,0x3ba)]=_0x318b75[_0x204c85(-0xbe,-0x51,-0x1a7,-0x8d)],_0x37a45b[_0x204c85(-0x79,-0xea,-0x24,-0x143)]=_0x318b75[_0x2e467f(0x30a,0x311,0x32d,0x308)],_0x37a45b[_0x204c85(-0x81,0x2c,-0x117,0x2d)+'ck']=_0x204c85(0x20,-0x54,0x58,0xd7);function _0x204c85(_0x2c3b14,_0x265ad8,_0x11d462,_0x2df6e7){return _0x904c37(_0x2c3b14-0x8e,_0x11d462,_0x11d462-0x184,_0x2c3b14- -0x13b);}const _0x2bfb03=_0x37a45b;for(const _0x5cc466 of _0x531040){if(_0x318b75[_0x2e467f(0x26d,0x224,0x1e8,0x215)](_0x318b75[_0x204c85(-0x11d,-0x206,-0x170,-0xb3)],_0x318b75[_0x204c85(-0x11d,-0x162,-0x1ec,-0xa8)])){const _0x488412=_0x5cc466['nameCN'];if(!_0x488412)continue;const _0x4f22a9=_0x31363a[_0x204c85(-0x4a,0x17,-0x5e,-0x12c)+_0x204c85(-0x15e,-0xdc,-0x176,-0xa7)]?.[_0x488412];if(_0x4f22a9){if(_0x318b75[_0x204c85(0x1d,0xa7,0x73,0x77)]===_0x318b75[_0x2e467f(0x3c1,0x2e8,0x474,0x393)])_0x318b75['LmvPP'](_0x4fc98a,_0x22d6d7[_0x2e467f(0x2bd,0x21f,0x2b3,0x30a)]);else{let _0x2f20e3=0x1846+-0x10af+-0x797;for(const _0x27a059 in _0x2bfb03){_0x318b75[_0x204c85(-0x85,0x63,-0xdf,-0xfe)](_0x318b75[_0x204c85(-0xc5,-0x64,-0x150,-0xf1)],_0x318b75[_0x204c85(-0xc5,-0x5b,-0xa6,-0x5d)])?(_0x49c0b9[_0x204c85(-0x16c,-0x137,-0x193,-0x1ae)+'ener'](_0x478b29[_0x2e467f(0x35e,0x388,0x2df,0x3e8)+_0x2e467f(0x3a3,0x41c,0x2d6,0x2dd)+'PROMPT_RES'+_0x2e467f(0x3bf,0x329,0x330,0x367)],_0x586631),_0x318b75['llOGO'](_0xe6bd3e,new _0x1c9ef0(_0x318b75[_0x2e467f(0x25f,0x211,0x1ad,0x1b3)]))):_0x5cc466[_0x27a059]&&_0x318b75[_0x204c85(-0x59,-0xee,-0xdd,-0xc6)](_0x5cc466[_0x27a059],_0x4f22a9[_0x27a059])&&_0x2f20e3++;}if(_0x2f20e3===-0x1c61*-0x1+-0x326*0x1+-0x193b){if(_0x318b75[_0x2e467f(0x2f1,0x30a,0x35d,0x367)]!==_0x318b75['hsLFI']){console[_0x204c85(-0x20,-0x9a,0x19,-0x4b)](_0x2e467f(0x31f,0x3dd,0x3c4,0x2db)+_0x2e467f(0x3c2,0x316,0x306,0x408)+_0x204c85(0x17,0x14,0x93,-0x58)+_0x488412+_0x2e467f(0x3c7,0x462,0x37f,0x3e9));continue;}else _0x20112d[_0x9c0077]=_0x2e8d6f[_0x29975e];}const _0x3c80c8=_0x2e467f(0x284,0x22b,0x32d,0x34e)+_0x488412+'\x22\x20有\x20'+_0x2f20e3+_0x204c85(-0x86,-0x57,0x3c,0x41),_0xc1a424=await _0x318b75[_0x204c85(-0x28,-0x26,0x90,-0xfd)](stylishConfirm,_0x3c80c8);if(!_0xc1a424)continue;for(const _0x4cc58f in _0x2bfb03){if(_0x5cc466[_0x4cc58f]){if(_0x318b75['TMOwe'](_0x2e467f(0x3e9,0x458,0x3b7,0x33d),_0x204c85(-0x98,-0x19,0x3c,-0x160)))_0x4f22a9[_0x4cc58f]=_0x5cc466[_0x4cc58f];else{_0x324e67[_0x2e467f(0x3d5,0x390,0x3a0,0x423)](_0x318b75[_0x204c85(-0x1b2,-0x181,-0x20d,-0x17e)]);return;}}}console[_0x2e467f(0x3e8,0x33e,0x468,0x3a3)](_0x204c85(-0xe9,-0x125,-0x1d2,-0x17d)+_0x204c85(-0x46,-0x21,-0x20,-0xe7)+_0x2e467f(0x3a8,0x2eb,0x38f,0x46f)+_0x2e467f(0x273,0x2bc,0x238,0x263)+_0x488412+'\x22');}}else{const _0x2076f6=_0x204c85(-0x6b,0x1d,-0x74,-0x65)+_0x488412+'\x22,是否录入?',_0x168cf7=await stylishConfirm(_0x2076f6);if(!_0x168cf7){if(_0x318b75[_0x2e467f(0x30f,0x303,0x2c9,0x32f)]('vJgLv',_0x318b75[_0x204c85(-0x8,-0xac,0xcf,0x1c)]))continue;else{let _0x29f7c4=_0x6eca6a['replace'](/:/g,':')[_0x2e467f(0x2fc,0x38b,0x2b8,0x370)](/,/g,',');return _0x29f7c4=_0x29f7c4[_0x2e467f(0x2fc,0x21c,0x3c3,0x339)](/下半身NSWebcam:/g,_0x318b75[_0x204c85(-0xde,-0x9c,-0x67,-0xa2)]),_0x29f7c4=_0x29f7c4[_0x2e467f(0x2fc,0x2e9,0x241,0x30f)](/下半身NSFW_背面:/g,_0x204c85(-0x197,-0x18e,-0x14f,-0x1af)),_0x29f7c4=_0x29f7c4[_0x2e467f(0x2fc,0x2e7,0x2d3,0x230)](/上半身NSFW_背面:/g,_0x318b75['tIWfF']),_0x29f7c4;}}!_0x31363a[_0x204c85(-0x4a,0x78,0x14,-0x1a)+'ets']&&(_0x318b75['ysSJo']===_0x318b75[_0x2e467f(0x334,0x323,0x312,0x24d)]?_0x31363a[_0x204c85(-0x4a,-0xf0,-0x12d,-0xc9)+_0x2e467f(0x2aa,0x392,0x36b,0x31a)]={}:(_0x2e1b05[_0x204c85(-0x71,-0x132,-0x87,-0x5b)][_0x2e467f(0x3c0,0x315,0x32c,0x2de)](_0x51d7c8),_0x18cd4b[_0x2e467f(0x3e8,0x3e8,0x46b,0x43c)](_0x2e467f(0x31f,0x33d,0x344,0x39a)+_0x204c85(-0x46,0x59,-0xfe,-0x128)+_0x204c85(0x17,-0xbe,0xc1,-0x85)+_0x1c2934+_0x204c85(-0x193,-0xd9,-0xd3,-0x178)+_0x32bb74+'\x22')));const _0x22be2a={};_0x22be2a[_0x204c85(-0xc6,-0x177,-0x11,-0x14e)]=_0x5cc466[_0x2e467f(0x342,0x2a3,0x2d0,0x370)],_0x22be2a[_0x204c85(-0x69,-0x112,-0x5d,0x53)]=_0x5cc466[_0x204c85(-0x69,0x3,0x3b,-0x3e)]||'',_0x22be2a[_0x2e467f(0x3d2,0x4ab,0x42e,0x4ac)]=_0x5cc466['owner']||'',_0x22be2a['upperBody']=_0x5cc466[_0x2e467f(0x347,0x2a6,0x3c6,0x37a)]||'',_0x22be2a[_0x2e467f(0x2de,0x31b,0x242,0x37a)+_0x204c85(-0x10a,-0xb1,-0x60,-0xdd)]=_0x5cc466[_0x204c85(-0x12a,-0x54,-0x111,-0x1d7)+_0x204c85(-0x10a,-0x3e,-0x194,-0x15c)]||'',_0x22be2a['fullBody']=_0x5cc466[_0x2e467f(0x38f,0x414,0x332,0x36c)]||'',_0x22be2a[_0x204c85(-0x81,-0x110,-0xa6,-0x49)+'ck']=_0x5cc466['fullBodyBa'+'ck']||'',_0x31363a[_0x204c85(-0x4a,-0x12c,0x79,-0xad)+_0x204c85(-0x15e,-0x1bd,-0x120,-0x1db)][_0x488412]=_0x22be2a,console['log'](_0x2e467f(0x31f,0x3d5,0x369,0x243)+_0x204c85(-0x46,-0xef,-0x127,-0x2b)+_0x204c85(-0x6f,0x7b,0x35,-0x154)+_0x2e467f(0x273,0x344,0x1ec,0x28a)+_0x488412+'\x22');if(_0x5cc466[_0x204c85(-0x36,-0x44,-0x10,0x22)]&&_0x5cc466[_0x204c85(-0x36,0x39,0x6e,0x2b)]['trim']()){if(_0x318b75[_0x2e467f(0x315,0x386,0x28e,0x389)]!==_0x318b75[_0x2e467f(0x2ee,0x2bd,0x20d,0x38f)]){const _0x2b9c89=_0x5cc466['owner'][_0x2e467f(0x3bc,0x2fe,0x4a1,0x34c)]()[_0x2e467f(0x393,0x375,0x390,0x33e)+'e']()[_0x2e467f(0x2fc,0x3b9,0x31f,0x3b8)](/\s+/g,'');for(const [_0x5151a6,_0x3f1d3f]of Object[_0x2e467f(0x365,0x401,0x2ac,0x32b)](_0x31363a[_0x204c85(-0x15b,-0x160,-0x117,-0x10e)+'resets']||{})){if(_0x3f1d3f['nameEN']&&_0x3f1d3f[_0x204c85(-0x69,-0x117,-0x6f,-0x44)][_0x204c85(-0x75,-0x134,-0x10a,0x49)+'e']()[_0x204c85(-0x10c,-0x6d,-0xd9,-0x18f)](/\s+/g,'')===_0x2b9c89){!_0x3f1d3f['outfits']&&(_0x318b75[_0x204c85(-0x194,-0xf0,-0x130,-0x18f)](_0x318b75['dWlRi'],_0x2e467f(0x422,0x46b,0x37a,0x4b1))?_0x3f1d3f[_0x2e467f(0x397,0x478,0x3fd,0x2e7)]=[]:_0x23d668=_0x204c85(-0xd9,-0x189,-0x24,-0x45)+_0x2e467f(0x2ff,0x2b5,0x36b,0x2c0)+[..._0x322a0b][_0x204c85(-0xb7,-0x123,-0x21,-0x84)]('、')+'\x0a');!_0x3f1d3f[_0x2e467f(0x397,0x2b0,0x2d7,0x35e)][_0x2e467f(0x3df,0x386,0x387,0x475)](_0x488412)&&(_0x3f1d3f[_0x204c85(-0x71,-0xf5,-0x67,0x3c)][_0x2e467f(0x3c0,0x3aa,0x32f,0x3d5)](_0x488412),console[_0x2e467f(0x3e8,0x46a,0x357,0x33f)](_0x204c85(-0xe9,-0x17d,-0x5c,-0xf7)+_0x204c85(-0x46,-0x11d,-0x10c,-0x3b)+_0x2e467f(0x41f,0x46a,0x501,0x451)+_0x488412+_0x204c85(-0x193,-0x1d0,-0x130,-0x1ef)+_0x5151a6+'\x22'));break;}}}else _0x32f69e[_0x1426e2]=_0x3ac59c[_0x46a365];}}}else _0x52113[_0x204c85(-0x48,-0x9,-0x18,-0x2b)](_0x26b319[_0x2e467f(0x423,0x47f,0x34f,0x4bd)]);}saveSettingsDebounced();const _0x4b0ef6=$(_0x318b75['mehfR']);if(_0x4b0ef6[_0x2e467f(0x3cb,0x2f9,0x37b,0x4ae)]){if(_0x204c85(-0x191,-0x169,-0x11a,-0x1d5)!==_0x2e467f(0x3d7,0x3d7,0x482,0x38f))_0x318b75[_0x204c85(-0x16a,-0x241,-0x209,-0x104)](refreshCharacterSettings,_0x4b0ef6);else{const _0x3297e0=typeof _0x1165a1===_0x2e467f(0x3a0,0x3f7,0x486,0x3e9)?_0x517705:_0x402b9c[_0x204c85(-0x143,-0x138,-0xcb,-0x20c)],_0x4d01fc=_0x318b75['RnTgV'](typeof _0x2c4a5e,_0x318b75[_0x204c85(-0x1af,-0x1a5,-0x1aa,-0x298)])&&_0xde1102['name']?_0x55f89f[_0x204c85(-0xa,0x5b,0x81,0x54)]:''+_0xb05b1c+_0x318b75[_0x2e467f(0x34e,0x364,0x2df,0x3f7)](_0x573926,-0x1*-0x2228+0x39*0x1d+-0x144e*0x2),_0x483c79={};_0x483c79[_0x204c85(-0x1b1,-0xd3,-0x287,-0x276)]=_0x318b75[_0x2e467f(0x421,0x338,0x4a7,0x340)],_0x483c79[_0x204c85(-0x7d,-0x15c,-0x53,-0xeb)]='['+_0x4d01fc+']',_0x512aaf[_0x204c85(-0x48,-0x82,-0x71,0x1b)](_0x483c79);let _0x187afe=_0x3297e0;!_0x3297e0['startsWith'](_0x318b75[_0x2e467f(0x2b3,0x307,0x300,0x35b)])&&(_0x187afe=_0x2e467f(0x2f8,0x3d6,0x22c,0x32f)+'/png;base6'+'4,'+_0x3297e0);const _0x48a0ff={};_0x48a0ff[_0x204c85(-0x150,-0xc8,-0xc6,-0xf2)]=_0x187afe,_0x48a0ff[_0x2e467f(0x3da,0x35c,0x2f8,0x410)]=_0x2e467f(0x417,0x3e7,0x331,0x40e);const _0x4ce2af={};_0x4ce2af['type']=_0x318b75['XYaae'],_0x4ce2af[_0x204c85(-0x175,-0x1f7,-0x230,-0x1b7)]=_0x48a0ff,_0x511cb8[_0x2e467f(0x3c0,0x480,0x45a,0x32d)](_0x4ce2af);}}}function _0x904c37(_0xd29fba,_0x4e08c4,_0x14a906,_0x326729){return _0x639d(_0x326729- -0x19d,_0x4e08c4);}function _0x2d8f(){const _0x579e09=['DxzeBwe','DNLpD1a','ufjptvbux1jfuq','u0Hnu2G','y2HHCMfJDgvY','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','Be5lqMC','DufHEMe','y2D4CK8','zNLDief0DgfJAa','zNvSBejVzhLcyq','rg9rtgu','nJG5nJuXmMzuuxjnzW','5PwW5O2UoG','Dgv4Da','txzYELO','swjVsNm','DufcvvK','zNvSBejVzhK','DgvKigrHDge6','tsbVDxrWDxqGzG','q0fWDhu','Dg9mB3DLCKnHCW','vKLxqwC','Bwf0y2HLze91Da','DuTSCNy','B3v0zML0CW','rxPjyxm','zNLDiow3SUwiM+w7UUACJEIJHEMIHa','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','sfvozum','uhHPBwi','5Qoa5Rwl5yIW5PAW5PYn6kofici','BLrywhm','BMfTzuvo','C3rYAw5N','u0zxqMfJAW','tunOwvm','t0rjrLLFr0vuxW','t2rvD0S','zNLDieXmtsbVDq','C0TdC3e','zujODvq','zNLDiow3SUABToAwSoACJEIJHEMIHa','yMzrwLC','tw1WD04','svnLsha','tNbvse4','rLDmuLO','z3vbve8','qxzeCha','DMfYAwfIBgvZoG','zw1PDa','qvDlqMC','lxrHyI1JAgfYyq','Eu9Lt2K','zNLDienOyxjHyW','zNLDioINO+AEKowiSoEAHoACJEIJHq','rLvYsNe','mteYoti3mtr6BvzbCM4','rxbwyvi','z1njDwe','zNLDiow3SUABToAwSoINKUIjSUMIHa','DhjPBq','zM9YrwfJAa','B3v0zML0uhjLCW','ue9ou0u','ChvZAa','u2T2A04','uhjVBxb0tw9KAq','y2HHDe1LDgfKyq','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','ody4mtiYuNvcvu5U','EwjKq2C','iIdMSQhMNiNLJ5JMM7q','zNLDie5VignOyq','AK1QrvG','vNPlDuC','BgvUz3rO','rdOG','DgLUzYbJAgfYia','B3vUzcbPBIbVDq','zxHLyW','vfHVEuW','DxbWzxjcB2r5uW','B3DUzxi','BM93','qNLjza','Aw5MBW','A29RDeG','quHyt0O','yu9eBNy','5lIk5y2k6lQRu0zx','zgv0ywLS','DxjLCW','EwrfCNa','AuvQt1K','A3HTDuS','Aw5JBhvKzxm','BgvLv0u','wfbpvu4','r3jjweS','zw5LCG','AxnbCNjHEq','EfDRA04','AKniC04','Dw1guu0','Bg9N','CMzQrKi','sNDqq2y','5lIl5y2k6lQRtLngvW','l3bUzZTIyxnLnG','z21Arhi','5lIk5y2k6lQRtLngv+IdJoMDOG','zKryzxm','BwvZC2fNzq','wLjmqxy','D2fYBMLUzW','rhzvwNO','rNf0qxq','C3b6wfe','AwHLAKi','wfD4quO','5A6m5OIq77Yb','Cg9ZAxrPB24','teXnioI/LowBNUE7K+AENos4UUEPUG','vvnKBgO','shfVyve','B09yCwu','BMfTzq','AMLdwKC','svDry3q','5lIl5y2k6lQRu0zx6iom6z2I','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','DvHiEgK','Bxb0icHjrdOG','C3vIC3rYAw5N','CfHLEw0','Aw5KzxHpzG','sNLwBg8','CIb0zxH0oG','6iUX5PAh5zcn56EWoIa','yNbAtg0','CMvZzxrjza','vu9Nv00','Bw9KAwz5ihbYBW','rM1dA1q','v0Pms1u','ELzKzxO','BM9jANa','wLr3vw0','zNLDien1CNjLBG','sNHNt2C','AxnLy2y','yxv0BW','wMn1qK0','uwj5A08','s1Lts04','rvvwDK0','vuvtva','zgf0ytO','AuTor24','zNLDioACJEIJHsaI','z2v0rwXLBwvUDa','yxn3uwq','s2LMtM0','zgf0yq','sNLxvwu','sMHczeS','5lIT5PAh5zcn56EW','CMvZzxrZ','5lIl5y2k6lQR6iom6z2I','Cgr1s28','ve53qLu','DhLWzq','D1z3Cwm','B1jhwgm','uvfJtNG','B2rPrfq','vMrns3y','zvP2wee','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','DNbcy2e','CuDqANa','vhbruKe','zePPr0W','ntGYotiWEe9htMPo','EuPUvfq','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','CMfPDhm','BwfW','vfHhCfC','shnOthO','yuvgthy','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','re5WwNO','C0DQBNG','BfjVq3K','quTly04','zxiGChjVBxb0ia','5lIl5y2k6lQRtLngv+IdJoMDOJO','DMfYAwfIBgvZ','6k6+ici','Bg9kvKy','iIdLT7lLVzlLSz7LIldOP5lOIBiGiG','r3f6seK','ChLSAvK','vg5QCe8','6kEs6iMYl+ACJEIJHEApKoEKUUIVJEs/RUAuUq','uNfIAxa','z1HSu3e','ywPqEvC','AuDesNa','Exv0Avq','EKLHu0W','i3n0lwnOyxr1oa','Aw5WDxq','t05trq','Bw1pwLy','5Qoa5Rwl5yIW5PYn6kofici','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','t0rjrLLFuKvrvq','qujlAw4','5Qoa5Rwl5yIW6kEs6iMYici','zgrcy3i','y3rLCG','vhLwseu','t1jLzhK','thHNDNm','B0fXD2W','zwzuwNa','zNLDifvZzxiGCG','rvnu','y2HHCMfJDgvYva','Aw1Hz2vFDxjS','zMfJAwfSrMvHDa','z2vUzxjHDgLVBG','C3bSAxq','C3vJy2vZCW','z25OBxa','vejZDuS','5lIk5y2k6lQRtLngv+IdJoMDOJO','A21Lre8','CMvTB3zLtgLZDa','wxL5qwS','tg12ufa','q3rVDKS','E3VLVzpLIy3OP5lOIBj9Fq','zMLSDgvY','AervD08','vhLLuNy','qwLjvM4','BMLIDuO','rLDcywnR','5lIl5y2k6lQRtLngv+IdJoMDOG','vKT5zu0','5lQu5A6y5Asw6lkm6iom6z2I','zxrZ','reHny1m','mJbTB3DXzhG','y2HHCMfJDgvYua','DxjLC0jHy2S','CKfXA0G','EvrpCwi','CMvwEhy','D1fiAgm','ExLqENu','sMPVDgu','5B2s5BgE5lQ6','5lIk5y2k6lQRtLngvW','C2z6tLG','DxjS','CMfUzg9Tvvvjra','z1HoreS','uNfnvgi','s1PKA3G','CMvZDwX0','D29YBgqGyM9VAW','A1z0s2O','CKPstvK','s2rSrNG','CKXeyM8','uMTKsMO','zNLDifjHDYbmta','yMfZzty0','DgLTzw91De1Z','5lIl5y2k6lQRu0zx','zxrmrLG','Dg9eANO','rxL4s3u','yMDUtw8','r3LNDwy','tLLIDvm','Cw9Or0y','ChjVBxb0oG','thvTsfO','ChjVBxb0','ogv3EhbXvW','zxf1AxjLBwvUDa','zML0CW','zNvSBejVzhLtrG','mJi2nJC3ndboy2TLwfy','zMfmr3a','mZa2s29ougLL','y29UC3rYDwn0BW','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','yxbWBhK','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','zNvSBejVzhLouW','DxbWzxjcB2r5qG','B2jQzwn0','zM93sfG','EhvyAwC','CMvXDwvZDcaOsq','zxH0icH0CMLNzW','kcGOlISPkYKRkq','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','uhjJs2G','vKr1Egm','odi4nJvYr0PYAhm','DgvYihrYAwDNzq','ve9kq1e','ru1zBvi','AKPurwu','y2HHCMfJDgvYCW','t3buCNy','ELfHrgi','y2HHCL9TB2rPzG','DwzTyMK','DMfSDwu','CLfoD2S','5lIl5y2k6lQRu0zxoIa','tMLyCgS','5A2x5Q61ici','zhndu0C','zgf0ytPPBwfNzq','uxvNsKe','6kEs6iMY54M55B6b','ENrwtwi','CMvWBgfJzq','rxjZz1m','ywnR','6kkR5l2/55sO77YA','BwvZC2fNzsbHDa','vgrLswu','qKvms08','A0zOzfq','vvrvCgK','pc/KURRNIAK+','C3rHCNrZv2L0Aa','5lIl5y2k6lQRtLngvZOG','vK10v1G','weTiELa','Dfjctw0','tuXbr1G','vMfYAwfIBgvZ','CeP6ELa','y3blvxq','EhvhEKu','sgrUD1e','C2vHCMnO','BgL6v2G','rwvNBMu','v1HyvKq','zvjAvvu','5Rgc6lAf5PE2','D3zvEey','zNLDifnHDMvKia','t1Her2e','C3vQt2i','u0zx','q2zLBNO','ywrK','5y+c6icd5zU+54Mh','w2nOyxjHy3rLCG','zKLvB3m','t05QCgm','5lIk5y2k6lQRu0zx6iom6z2IoIa','B3iGzgvIDwDNAq','zNLDiezPBMfSia','5lIl5y2k6lQR','v0jHy2S','u3bAzwC','wLvmzKe','zNLDiev4zwn1Da','ze50Bvq','t29yAwG','t0rjrLLFuKvtua','yNnlwKG','s0vowMu','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','5lIl5y2k6lQRu0zx6iom6z2IoIa','5lIk5y2k6lQR6iom6z2I','zxjLzcK6','vxD6r0G','ExntsM8','BgjQrw4','iIdMNiKG','Cuv5r0K','y29UDgvUDa','wMTYyNy','Aw5KzxG','Dhb1Da','vurdEfu','B3rusgq','B3v0zML0','y2zoENi','DgvYigXPC3qGDa','ugjJvNK','BMfTzuno','EK54Aui','5lIk5y2k6lQR','A2jlz28','s3DUBg0','DxbWzxjcB2r5','z3D0Afi','y29IB0y','zMPeufO','DxbWzxjcB2r5tG','6kEs6iMY54M55B6boIa','DhjPz2DLCG','v2nzyvG','igLUzgv4','zNLDiev4DhjHyW','AM9PBG','wfnMrfa','zML0ihrHz3mGzG','ExbVywe','wuTtEuK','vuzhwg0','BMC6','qwDnsxe','zNLDifn0yxj0Aq','ww1tqwO','6iUX5PAh5zcn56EW','mtyXodDSBMXUCxm','AMz5B3e','teXnx0niqvjFtq','BhLXDvm','Bw9KAwz5ihjLCq','BfPkr0O','CMvWBgfJzufSBa','Bu5vrfu','yLjOt2e','zw50CMLLCW','yvrqEKy','tujtENG','sK5Xuvu','q29UDgv4Da','uhDIzM4','sMjkB00','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','Dg9tDhjPBMC','vKDRCMq','t2nKB0u','rNPeCvq','DNffuvC','Aw5NignOyxiGBq','ufjptvbux1jfuW','Dwv4u3y','BMrLEdO','zxjYB3i','wxverLK','DffbwMK','r3jlDKe','Aw1Hz2vZihrVia','C29YDa','5lIk5y2k6lQRu0zx6iom6z2I'];_0x2d8f=function(){return _0x579e09;};return _0x2d8f();}function updateFormFields(_0x423c0c){const _0x1bda09={'doijq':function(_0x168b43,_0x12db9f){return _0x168b43===_0x12db9f;},'uAaza':_0x5b612f(0xab,0x12a,-0xe,0x18),'mNUDU':_0x5b612f(0xca,0x14d,0xde,0x45),'pXeym':_0x5b612f(-0xe6,-0xd5,-0x185,-0xca),'CtovK':function(_0x17ee52,_0x59a607){return _0x17ee52(_0x59a607);},'bsKZH':'characterT'+'raits','RqMTb':'facialFeat'+_0x5bd819(0x18,0x7e,0xd9,0xd3),'VKyeM':_0x5b612f(-0xc0,-0x164,-0x1a2,-0xd7)+_0x5bd819(-0xb5,-0xf2,-0x54,0x8f),'sKCsq':_0x5bd819(0x79,0x143,0xcf,-0x16)+'FW','TOJCQ':'upperBodyS'+_0x5b612f(-0xae,-0x97,-0x59,-0x145),'DvUZz':_0x5bd819(0x4d,0xa5,-0x2d,-0x8b)+'W','XjaMb':_0x5b612f(-0x7f,-0xbd,0x3a,0x1e)+'WBack','OrDEE':'upperBodyN'+_0x5bd819(-0x17,-0x47,0x19,0xdf),'aODnv':_0x5b612f(-0x77,-0x15b,0x64,-0x89)+'FW','OoXih':_0x5bd819(0x3f,0xa6,-0x25,-0x20)+_0x5b612f(-0xae,0x13,0xa,0x3b)},_0x218db0=['nameCN',_0x5bd819(0x12a,-0x21,0x9d,0xb6),_0x1bda09[_0x5bd819(-0x2a,0x74,0x2b,-0x76)],_0x1bda09[_0x5b612f(-0x99,-0x176,-0x53,-0x38)],_0x1bda09[_0x5b612f(-0xac,-0x9,-0x69,-0xde)],_0x1bda09[_0x5b612f(0x52,0x73,0x65,0x103)],_0x1bda09[_0x5bd819(0x8a,0xbd,-0x18,0x56)],_0x1bda09[_0x5b612f(0x9f,0xd8,0xa4,-0x9)],_0x1bda09['XjaMb'],_0x1bda09['OrDEE'],'upperBodyN'+'SFWBack',_0x1bda09[_0x5b612f(0x84,-0x5,0x117,0xde)],_0x1bda09[_0x5bd819(0x97,-0x5e,0x29,-0x3f)]];function _0x5bd819(_0x508f79,_0x13f02e,_0x16df52,_0xa117bc){return _0x904c37(_0x508f79-0x105,_0x508f79,_0x16df52-0x1bd,_0x16df52- -0x35);}function _0x5b612f(_0x237807,_0x3273a6,_0x4a4494,_0x33c98c){return _0x904c37(_0x237807-0x95,_0x33c98c,_0x4a4494-0x192,_0x237807- -0x87);}_0x218db0[_0x5b612f(0x69,0xeb,0x23,-0x72)](_0x522b4b=>{function _0x16d9cc(_0xf30cb9,_0x2b719,_0x4ccaaa,_0x28443b){return _0x5b612f(_0x2b719- -0xe5,_0x2b719-0x79,_0x4ccaaa-0xdf,_0xf30cb9);}function _0x59c05f(_0x59a040,_0x1a933b,_0x57e2cf,_0x5b94b7){return _0x5bd819(_0x57e2cf,_0x1a933b-0x4f,_0x1a933b-0x2b3,_0x5b94b7-0x182);}if(_0x1bda09['doijq'](_0x1bda09[_0x59c05f(0x3da,0x335,0x306,0x2f9)],_0x1bda09[_0x59c05f(0x37f,0x314,0x29b,0x315)])){if(_0x46b7da){const _0x1a016d=_0x4d784c['apply'](_0x1672a4,arguments);return _0x336fd2=null,_0x1a016d;}}else{if(_0x423c0c[_0x522b4b]){if(_0x1bda09[_0x59c05f(0x3eb,0x3b7,0x354,0x2dd)]===_0x16d9cc(-0xe3,-0xf0,-0xd5,-0x1bf))_0x1dbb72[_0x2baae0]&&(_0x46331b[_0x48caff]=_0x3645c0[_0x9d3e34]);else{const _0x2710b7=document[_0x59c05f(0x48b,0x3d1,0x3fd,0x308)+_0x59c05f(0x3ee,0x385,0x3e8,0x32b)]('char_'+_0x522b4b);_0x2710b7&&(_0x2710b7[_0x59c05f(0x286,0x2a3,0x1fe,0x2eb)]=_0x423c0c[_0x522b4b],_0x1bda09[_0x16d9cc(-0x276,-0x19a,-0xcc,-0x152)]($,_0x2710b7)[_0x16d9cc(-0x19a,-0xec,-0x1be,-0x15b)](_0x59c05f(0x28e,0x232,0x2cd,0x1bb)));}}}});}