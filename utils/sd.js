function _0x27558c(_0x64c031,_0x53959a,_0x2adc19,_0x1d720c){return _0x155a(_0x2adc19-0x336,_0x64c031);}(function(_0x8361d1,_0x18bcc5){function _0x456ab2(_0x943f36,_0x4f42d4,_0x4ea93b,_0x31a8ff){return _0x155a(_0x4f42d4-0x381,_0x31a8ff);}const _0x1172ee=_0x8361d1();function _0x1b2182(_0x410aac,_0x256082,_0x3f43ab,_0x1e1308){return _0x155a(_0x256082-0x21f,_0x410aac);}while(!![]){try{const _0x53565c=parseInt(_0x456ab2(0x451,0x49a,0x497,0x538))/(-0x2*-0x189+-0x1c9f*0x1+-0x198e*-0x1)+parseInt(_0x1b2182(0x477,0x3f6,0x39a,0x470))/(-0x1e06+-0x2330+-0x209c*-0x2)+-parseInt(_0x456ab2(0x521,0x4dd,0x4d6,0x47b))/(0x25*-0xca+-0xca6+0x29db)*(parseInt(_0x1b2182(0x367,0x3c1,0x3b9,0x39d))/(0x14dc+-0x1129+0x17*-0x29))+parseInt(_0x456ab2(0x4c7,0x4c9,0x527,0x431))/(0xeff*-0x2+0x2f9*-0x1+0x20fc)*(-parseInt(_0x1b2182(0x411,0x3cc,0x45a,0x3c6))/(-0x26*-0x4d+-0x13*0x12a+-0x392*-0x3))+parseInt(_0x1b2182(0x2bd,0x33a,0x296,0x2a2))/(-0x1aca+-0xc8f+0x46*0x90)*(-parseInt(_0x1b2182(0x384,0x3d6,0x3d4,0x40a))/(-0x19c*-0x2+-0x106*0x8+0x140*0x4))+-parseInt(_0x1b2182(0x41c,0x3ba,0x427,0x33c))/(0x15c8+-0x881+0x1*-0xd3e)+parseInt(_0x456ab2(0x454,0x469,0x490,0x4fb))/(0x61*0x1c+0x12e3+-0x1d75);if(_0x53565c===_0x18bcc5)break;else _0x1172ee['push'](_0x1172ee['shift']());}catch(_0x5b404b){_0x1172ee['push'](_0x1172ee['shift']());}}}(_0x5b91,0x17561d*-0x1+-0x6*0x14fd4+0x1*0x2e5cdd));const _0x11fa2d=(function(){const _0x42cc55={};function _0x76e8bc(_0x72451b,_0x31d2fd,_0x3446dd,_0xeb8827){return _0x155a(_0x3446dd- -0x3a9,_0xeb8827);}_0x42cc55[_0x76e8bc(-0x297,-0x266,-0x211,-0x195)]=function(_0x322ed5,_0xdd91ba){return _0x322ed5+_0xdd91ba;};function _0x512a08(_0x4b08e6,_0x37704e,_0x125d0f,_0x4ca6c8){return _0x155a(_0x4b08e6- -0xed,_0x37704e);}_0x42cc55[_0x512a08(0x82,0x5a,0x94,0x3)]=_0x76e8bc(-0x18e,-0x27f,-0x232,-0x25e),_0x42cc55[_0x76e8bc(-0x2d8,-0x1a6,-0x243,-0x2a1)]=function(_0x383629,_0x1fde5a){return _0x383629!==_0x1fde5a;},_0x42cc55[_0x76e8bc(-0x348,-0x399,-0x2f6,-0x317)]=_0x76e8bc(-0x224,-0x2e4,-0x280,-0x236);const _0x26137e=_0x42cc55;let _0x1115a8=!![];return function(_0x269280,_0x20e240){const _0x5b07d7=_0x1115a8?function(){const _0x64a8ea={'DAJmU':function(_0x20d858,_0xcf9587){function _0x43159e(_0xe9f2c0,_0x42e2bb,_0x6a0a5a,_0x385edf){return _0x155a(_0x385edf- -0x17e,_0x42e2bb);}return _0x26137e[_0x43159e(0x13,-0x78,0x8e,0x1a)](_0x20d858,_0xcf9587);}};function _0x2360c3(_0x30c56e,_0x63f0d3,_0x3879bb,_0x12549e){return _0x155a(_0x3879bb-0x3aa,_0x63f0d3);}function _0x565b28(_0x2d259b,_0x112b8f,_0x3b0e15,_0x51cbc1){return _0x155a(_0x3b0e15- -0x3a4,_0x51cbc1);}if('HAzAt'!==_0x26137e['UwMUP']){if(_0x20e240){if(_0x26137e[_0x565b28(-0x2d6,-0x290,-0x23e,-0x229)]('iKVOj',_0x26137e[_0x2360c3(0x40e,0x4d5,0x45d,0x419)]))_0x49e408[_0x565b28(-0x279,-0x215,-0x1f3,-0x19e)+_0x397160+_0x2360c3(0x3fb,0x42a,0x46d,0x44f)]&&(_0x1ab8f8=_0x64a8ea['DAJmU'](_0x64a8ea[_0x565b28(-0x2e0,-0x239,-0x2ba,-0x2e2)](_0x2f76c1,',\x20'),_0x3dfa6f['Character\x20'+_0x1045ef+_0x565b28(-0x2bd,-0x2f7,-0x2e1,-0x2d8)]));else{const _0x37d6d7=_0x20e240['apply'](_0x269280,arguments);return _0x20e240=null,_0x37d6d7;}}}else _0xdb313[_0x565b28(-0x2f8,-0x2a8,-0x259,-0x2f4)+_0x2360c3(0x603,0x540,0x56b,0x535)](_0x4db3bf,_0x3f4e32);}:function(){};return _0x1115a8=![],_0x5b07d7;};}()),_0x59c845=_0x11fa2d(this,function(){const _0x27008e={};function _0x2e6e5e(_0x300bae,_0x474d37,_0x4466b1,_0x12c633){return _0x155a(_0x12c633-0xe8,_0x4466b1);}_0x27008e[_0x2e6e5e(0x187,0x1be,0x19b,0x1f8)]=_0x1e6ac1(-0x80,-0x106,-0xd5,-0x15d)+'+$';function _0x1e6ac1(_0x46b0be,_0x1c919f,_0x3f2d16,_0x3ff142){return _0x155a(_0x1c919f- -0x2d3,_0x46b0be);}const _0x1e53e9=_0x27008e;return _0x59c845[_0x2e6e5e(0x2fc,0x27b,0x280,0x281)]()[_0x1e6ac1(-0xbf,-0x10b,-0x84,-0x161)](_0x1e6ac1(-0x1a7,-0x106,-0x124,-0x13f)+'+$')['toString']()[_0x1e6ac1(-0x152,-0x1a6,-0x224,-0x231)+'r'](_0x59c845)['search'](_0x1e53e9[_0x1e6ac1(-0x255,-0x1c3,-0x1c9,-0x20e)]);});_0x59c845();function _0x155a(_0x2de69b,_0x35df5f){_0x2de69b=_0x2de69b-(0x12f4+-0x145*-0x1a+-0x151*0x27);const _0x51b31d=_0x5b91();let _0x59acb9=_0x51b31d[_0x2de69b];if(_0x155a['wIoxzA']===undefined){var _0x375138=function(_0x16a486){const _0x2a2704='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xaaf79e='',_0x26a1a0='',_0x45690e=_0xaaf79e+_0x375138;for(let _0x3e8757=-0x109+0x50b*-0x1+0x614,_0x18cf1b,_0x4b05e6,_0x2b6feb=0x24aa+0x9a5+-0x2e4f*0x1;_0x4b05e6=_0x16a486['charAt'](_0x2b6feb++);~_0x4b05e6&&(_0x18cf1b=_0x3e8757%(0x2*-0x33c+-0x258d*-0x1+-0x1f11)?_0x18cf1b*(-0x7e2+-0x17*-0x109+0xfad*-0x1)+_0x4b05e6:_0x4b05e6,_0x3e8757++%(0x3*0x98f+0x1cdd+0x1cc3*-0x2))?_0xaaf79e+=_0x45690e['charCodeAt'](_0x2b6feb+(-0xd*0xd5+0x1*0x709+0x3d2))-(0xa4e+0x1f8a+0x29ce*-0x1)!==-0x185*0x6+-0x1e*-0xd+0x798?String['fromCharCode'](-0x9e2+-0x10*-0xb2+-0x1*0x3f&_0x18cf1b>>(-(-0x2010*-0x1+0x250f+0xd*-0x551)*_0x3e8757&-0x4*0x870+-0xc6f+-0xf67*-0x3)):_0x3e8757:0x2a8+0xd02+0x322*-0x5){_0x4b05e6=_0x2a2704['indexOf'](_0x4b05e6);}for(let _0x5cd484=0xb40+-0x1426+0x8e6,_0x5cf4b4=_0xaaf79e['length'];_0x5cd484<_0x5cf4b4;_0x5cd484++){_0x26a1a0+='%'+('00'+_0xaaf79e['charCodeAt'](_0x5cd484)['toString'](0x2340+-0x1*-0x98b+0x3*-0xee9))['slice'](-(-0x33f+-0x20*-0x58+-0x7bf));}return decodeURIComponent(_0x26a1a0);};_0x155a['wxiANw']=_0x375138,_0x155a['uwWhcY']={},_0x155a['wIoxzA']=!![];}const _0x338ef7=_0x51b31d[0xbb5+-0xb*0x257+-0x2*-0x704],_0x3e38da=_0x2de69b+_0x338ef7,_0x2eea16=_0x155a['uwWhcY'][_0x3e38da];if(!_0x2eea16){const _0x24e6d5=function(_0x2cd0bf){this['XePPIZ']=_0x2cd0bf,this['THdqqI']=[-0x13b1*-0x1+-0x188f+0x1*0x4df,0x1e1*0x4+0x1384+0x4*-0x6c2,-0x3*0xc26+-0xdae+-0x8*-0x644],this['zgqYLg']=function(){return'newState';},this['pCyJRr']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['RRPyME']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x24e6d5['prototype']['ZksWTH']=function(){const _0x3dcb0c=new RegExp(this['pCyJRr']+this['RRPyME']),_0x1cce51=_0x3dcb0c['test'](this['zgqYLg']['toString']())?--this['THdqqI'][0xfe1+0x1129*0x1+0x2109*-0x1]:--this['THdqqI'][-0x96e+0x2b1*-0xc+-0x5f6*-0x7];return this['AwrKLj'](_0x1cce51);},_0x24e6d5['prototype']['AwrKLj']=function(_0xdb89ed){if(!Boolean(~_0xdb89ed))return _0xdb89ed;return this['KZHQLd'](this['XePPIZ']);},_0x24e6d5['prototype']['KZHQLd']=function(_0x2b07ef){for(let _0x36ba2c=-0x16d5+-0x986+0x205b,_0x26ed54=this['THdqqI']['length'];_0x36ba2c<_0x26ed54;_0x36ba2c++){this['THdqqI']['push'](Math['round'](Math['random']())),_0x26ed54=this['THdqqI']['length'];}return _0x2b07ef(this['THdqqI'][-0xe32+-0x6d*-0x52+-0x14b8]);},new _0x24e6d5(_0x155a)['ZksWTH'](),_0x59acb9=_0x155a['wxiANw'](_0x59acb9),_0x155a['uwWhcY'][_0x3e38da]=_0x59acb9;}else _0x59acb9=_0x2eea16;return _0x59acb9;}import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,waitForLock,releaseLock,acquireLock}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';function _0x5b91(){const _0x45f58c=['uNnisNy','zM9YrwfJAa','sKvNzeO','ue9tva','ifbYB21WDa','DxrqEgS','A0nmBxO','AxPLktOQkIa','keHPCMvZiezPEa','Bg9Hza','tMvuAMG','zML4zwrqCM9TCa','C2v0DgLUz3nZlG','E+s/RUwBVN0','EfnTug0','of91ChnJywXLCG','B3iGChjVBxb0oG','ALjcwhm','wgD4zgS','cI0TlqOJiYmG55sF','C2rFy3n0zxbZ','DhjPBq','tMjuDeS','sujYBha','z3LHD0q','q0Xjuf9ZDg9WxW','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','qLbhuLa','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','r0vorvjbvevFsq','cI0GkIRNP43LRzaGkfm','zwf4uvu','C2rFDMfL','cI0GkIRLSlRLR7GGkfm','wufowwS','vxnUChG','Bw9Kzq','6zQp5PY6kc0Xkq','og4UChq','t0Tfve4','t2jXEKi','mtu2nJqXnJbcBuLJEge','EgjfD0e','refkBvu','qufXr3q','BKneDKG','Ahn5swm','A2LW','5yIh5O2I5QIH5z6l5AsX6lsLoIa','u2HwBum','rvztww0','BMvYyxrL','rgfLBgu','u1D0Bwu','77Ym6k+35Qoa5P+LC2r3zwj1','yw1L','AhjFC2nHBgu','56cboIa','C2rFy3DPzhrO','kfvWC2nHBguGrG','seXxshe','DgvWCYK6kIOG','AuPUqNq','qvfux3nK','C2fTCgXLCL9Uyq','Dc1TB2rLBa','z2fezeC','CerRtum','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','y2fSztOQkIa','C2rFy2HLAwDODa','rhDbq3O','u2fUC2W','qK56BM0','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','6zsz6k+VoIa','t1z5vxe','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','5Q2J5zYO6k6+572U5QIH5z6l5lI6','5yYw5lI6igrHDgeGvvi','svngrg0','tLjyCLa','cI0GkIRMLl7LPkFLGi3NJOCG','kerPDMLKzv9YBW','cI0GkIRMRAxMLBaGkfm','sLnptIdOP6pMNPdLPlhOTkxVViW','BI9QC29U','zffdrhy','Bw9KzwW','ywn0B3iPoIOQia','nJm4mZa3v3HizM12','CMvZDg9YzuzHyW','n29WqM9JCa','Aw5JBhvKzxm','BwvZC2fNzq','v0jYvLa','C3vJy2vZCW','lI4U','zxH0zw5ZAw9UxW','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','zwnpsgC','z1PMDgi','Ew9rveq','kIOG','ANnVBG','zMfJzsdKUlRLVidLKk8','AuTwt2O','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','B2rLBcK6kIOG','DLfhwLO','y29UC3rYDwn0BW','ywrLDgfPBgvYxW','BunnA2q','yxrFBgfZDf9Syq','sfDOrLG','wLPzBxG','zv9Mywn0B3i','D0Hzwve','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','BwfNzs1Yzxf1zq','B3zLCNjPzgvFCW','ywrFBw9KzwW','rezss2W','EvbQDMu','wuz3yvq','shzKsxq','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','y3jPChrZ','z2fOswC','yLDdu0W','tufhrv9srvfvrq','BfDSuw8','zty0ioAvSoAnRUwKHoEqHUoaGG','5BEY5yID5AEl5yYw44cc','rNjwEei','cI0GkIRMQkhLNOSGke0','zML4','nwXkzMnlvq','qMjHCMO','ic0Gq2HHBMDLoG','CMvTB3zLtgLZDa','ke5Lz2f0AxzLia','u0rmAxn0zw5LCG','ww5OreO','cI0GkIROHlJPG6JKV67LPi0G','of9TB2rLBa','q1f1zgy','C3rLChm','B21WDa','B3nPDgLVBG','wundr1e','l2fWAs9Zzc9Nzq','DxjS','C0PhEu4','t3bWzva','uuDUz1e','44cc6k+35Qoa5P+LC2r3zwj1','mJy4mty3Duv5ExPT','kfnHBxbSzxiPoG','ChqPoIOQia','6lsF6z2I5lI6oIa','qLvuuhi','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','cI0GkIPwquu6kG','A2DvuxG','yxv0B191CMW','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','BwfbuMi','shbHu3O','yKnXs3y','Aw5MBW','Df9LBMq','ChjVBxb0','5Q2J6z2I5O+q56s6icHqCM9T','CMvZDg9Yzv9Myq','C2rFy2fKzxrHAq','vxDnvva','CMf0Aw5NigLTyq','D2LKDgG','AgvPz2H0','v2zMDfK','cI0GkIPdrKCGuW','y2XPzw50','EgvjrLq','quHVCLi','5Q2J5zYO6ycA6l+hC2r3zwj1','y2vZ','EeX2we0','Aw1Hz2u6','yxbWBhK','yxv0Aa','y1jdu3C','lcdOR6BMG4u6ia','ywnLCYK6kIOG','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','q3j3y3u','Aw5PDgLHBgL6zq','cI0GkIPdBgLWia','u2nLBMuGq29TCa','wuXLr00','EeDWugm','Aw5Nx3n0CMvUzW','t3flvvK','yNbkBLK','ExvZAgu','uMDOCw8','yK5osKm','EwvYCW','zgvUB2LZAw5NxW','BwfNzv9Yzxf1zq','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','tLnf','icHjrdOG','Cgf5C3rFy2HHDa','55sO5lQo55sF5OIq55QevgfNoIa','qurLDgfPBgvY','zgf0ytPPBwfNzq','CwL1EhK','Dg9tDhjPBMC','r0n4CeK','odKXndeZmuvvAvLnsa','of9Zyw1WBgvYtG','vg5kCK8','u3DJAxC','thH0EMO','Bg9N','Dhj1zq','mtjuwwneAKe','C2rFy2rLBM9PCW','BgvY','DwzuBhO','Dg9Rzw4','r2LtteK','suq6ia','CMf0Aw5Nifneia','zxjYB3i','uuPLwhO','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','nty2nZm3ohbzwKvswG','C3rFy2HHDhu4xW','vwrzuvy','rgzoAfO','q2HHCMfJDgvYia','tufhrv9srvnqtW','C3rHDhvZvgv4Da','C2rFy2nOyxr1xW','ywX3yxLZB25FCW','DMDYz0C','mJq1mJu2ogPPAxLpqq','C3rYzw5NDgG','vejkAhC','6k+V44cc54Q25Ocb56cboIa','l3nKyxbPl3yXlW','5BI4icHjrdOG','C2rFyxv0Aa','qLrtvNO','zw5HyMXLx2HY','qwPPwee','zw5LCG','zxr0Aw5NCW','CvngBLC','rxjYB3iGz2vUzq','loAOOEwEI+s4UG','y21VzgvSmJiYmG','A2LiA2G','C2vHCMnO','44cc5zon5BQu5yAf5A65oIa','C3rYAw5NAwz5','t1fyuxa','A0nLwLi','kcGOlISPkYKRkq','zw5HyMXLx2HYia','EKDODuy','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','uhbbC3i','BLbOwNO','Bfndsee','ExvZAgvPzf9Zza','y2fJAgu','6i635y+w5QIH5z6l5AsX6lsLoIa','mJu5nJuYmKzZA2D5BG','B2PRy1i','6k6+572U5QIH5z6llI4U5lI6','ExHhBLm','cI0GkIRPQ5JMUixKV67LPi0G','5BcD6k+v5l2C5lI65y6F5AEliejHCW','rwjIteS','ktOG','vgPju2y','yxbWBgLJyxrPBW','zwvKktOQkIa','CerUqNe','u0vizeO','C2rvCMW','yxjNCW','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','y2zNx3nJywXL','DhH0mMLTzW','C2rFy3vWC2nHBa','of92ywu','Dgv4Da','z2u6','u1jsww4','C3rHDhvZ','zLLUtKK','AMnxy3G','y0TpsNa','ufLRB3q','tgPmuMi','ktOQkIa','vezhDMy','of9Zy2HLzhvSzq','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','qMT2s3u','zw1PDa','qK13thi','BgvZktOG','A1vjAgK','C2vLza','Ewnlz3u','r2PsyM0','sgXfwuC','uuHdt3m','C2rFy2HPCMvZxW','cI0GkIROTj/PNAlMJ5dNPlOG','Aw1Hz2vZ','s1rpwxy'];_0x5b91=function(){return _0x45f58c;};return _0x5b91();}import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';function _0x6bf2d4(_0x10c4de,_0x39900a,_0x889d85,_0x1b0213){return _0x155a(_0x1b0213-0x112,_0x39900a);}async function generateSDImage({prompt:_0x2fdb50,width:_0x27e337,height:_0x1fd543,change:_0x498a6c}){const _0x2fed19={'OQXQp':function(_0x18d993,_0x314834){return _0x18d993<=_0x314834;},'zGhuF':function(_0xdeaca4,_0x107e50){return _0xdeaca4+_0x107e50;},'hsyIc':function(_0x3ee0da,_0x4b5277){return _0x3ee0da(_0x4b5277);},'xGpPc':function(_0x2e04a4,_0xe913cc){return _0x2e04a4(_0xe913cc);},'mCMkd':'分角色模式:\x20解析带'+_0x39fe6c(0x242,0x2de,0x2a5,0x2c0),'ObqzB':'Scene\x20Comp'+_0x39fe6c(0x28a,0x2e9,0x272,0x2e5),'dwfEq':function(_0x39d464,_0x4b9bfd){return _0x39d464<=_0x4b9bfd;},'WBrVP':'API响应中未找到图'+'像数据。','DfNhZ':function(_0x8631c4,_0x2eeea3){return _0x8631c4+_0x2eeea3;},'ShVmC':'(((.+)+)+)'+'+$','xSmPm':function(_0x47f6ee,_0x37a9bf){return _0x47f6ee+_0x37a9bf;},'FrVxB':function(_0x3acdda,_0x394a67){return _0x3acdda(_0x394a67);},'ZZYmx':function(_0x561756,_0x4a9bea){return _0x561756(_0x4a9bea);},'TFGvf':function(_0x3153c4){return _0x3153c4();},'HpaSz':function(_0x438a04,_0x5c37e6){return _0x438a04(_0x5c37e6);},'Rghqo':function(_0x2380d8,_0x2c7507){return _0x2380d8!==_0x2c7507;},'TjISf':function(_0x9c6a0c,_0xea9e58){return _0x9c6a0c(_0xea9e58);},'QJeXz':function(_0x8239bc,_0x49fd43){return _0x8239bc(_0x49fd43);},'sHooE':function(_0x364953,_0xc6d74c){return _0x364953(_0xc6d74c);},'kUIhi':function(_0x4f2bba,_0x26f204){return _0x4f2bba===_0x26f204;},'MdlnX':_0x39fe6c(0x25b,0x1c8,0x2e8,0x241),'LjLRb':_0x39fe6c(0x231,0x206,0x2c3,0x20b),'cKOJp':_0x1635e4(-0x144,-0xdb,-0xb1,-0x159)+'中的\x20prompt。','DwACz':function(_0x656d7d,_0x1099da,_0x9e662b){return _0x656d7d(_0x1099da,_0x9e662b);},'vgrgG':function(_0x59eb6c,_0x1102f2){return _0x59eb6c!==_0x1102f2;},'AHNuf':_0x1635e4(-0x20c,-0x21f,-0x1ff,-0x226),'BNznm':function(_0x21c898,_0x4a6e2e){return _0x21c898!==_0x4a6e2e;},'SEHdJ':_0x39fe6c(0x1f7,0x292,0x1e3,0x19b),'PpAsr':function(_0x4cd75f,_0xa819c7){return _0x4cd75f+_0xa819c7;},'CQudf':function(_0x5c6e73,_0x2805ff){return _0x5c6e73+_0x2805ff;},'nyiRL':function(_0x3b471d,_0x10d27d,_0x256954,_0x50dfd3,_0x43c6e3,_0xea83b4){return _0x3b471d(_0x10d27d,_0x256954,_0x50dfd3,_0x43c6e3,_0xea83b4);},'UYdrf':function(_0xb3a27,_0x1d4881,_0x28c476){return _0xb3a27(_0x1d4881,_0x28c476);},'uTkvk':function(_0x58385f,_0x4deec9){return _0x58385f===_0x4deec9;},'GjRbm':function(_0x4df07f,_0x784083){return _0x4df07f===_0x784083;},'utPxk':'jiuguan','yxGnS':_0x1635e4(-0x10c,-0x90,-0x180,-0x189),'yPjve':'XDOuH','JJbff':_0x1635e4(-0x16f,-0x154,-0x1a2,-0xfd)+_0x1635e4(-0x1c5,-0x259,-0x262,-0x194),'cRCSw':_0x1635e4(-0x203,-0x21d,-0x239,-0x25f),'QGngQ':_0x39fe6c(0x2fc,0x29d,0x268,0x369)+'2222','sJGyN':_0x1635e4(-0x1a4,-0x20f,-0x1af,-0x1f3)+_0x39fe6c(0x201,0x1cf,0x297,0x256)+_0x39fe6c(0x2ea,0x2c6,0x2b5,0x381)+_0x39fe6c(0x286,0x1e6,0x2b8,0x21c),'EbbLK':function(_0x184ef4,_0x5af972){return _0x184ef4!=_0x5af972;},'bCqKv':function(_0x237291,_0xbc908c){return _0x237291!==_0xbc908c;},'RsHJv':_0x1635e4(-0x12b,-0x19e,-0xff,-0x115),'qSFnW':function(_0x12f430,_0x3dbe9a,_0xb301b3){return _0x12f430(_0x3dbe9a,_0xb301b3);},'kCLmz':'/api/sd/se'+_0x1635e4(-0x1c5,-0x23e,-0x1ed,-0x22c),'fYnNI':function(_0x587ede,_0x5ea7d2){return _0x587ede(_0x5ea7d2);},'EVSYm':function(_0xcf0d63,_0x173497){return _0xcf0d63(_0x173497);},'zDZOi':function(_0x53a26b,_0x261a85){return _0x53a26b!=_0x261a85;},'SdWDM':function(_0x37da69,_0x696689){return _0x37da69!==_0x696689;},'YnhDJ':'pDnBq','KTOYv':function(_0xa38299,_0x5ca563,_0xb988e){return _0xa38299(_0x5ca563,_0xb988e);},'bWCSL':function(_0x5b30cd,_0xf4535e){return _0x5b30cd(_0xf4535e);},'gaDdG':function(_0x32cf27,_0xb848fd){return _0x32cf27!==_0xb848fd;},'QHCOs':function(_0x54c04a,_0x5091f3){return _0x54c04a!==_0x5091f3;},'nPhZz':function(_0x118ca3,_0x47c67d){return _0x118ca3>=_0x47c67d;},'gahIg':function(_0x221fdc,_0x3584d4){return _0x221fdc(_0x3584d4);},'QZEle':function(_0x652343,_0x3413bf){return _0x652343!==_0x3413bf;},'Usnpx':_0x39fe6c(0x271,0x2ab,0x22b,0x274),'UdYQV':function(_0x3394ac,_0xf4bab7){return _0x3394ac==_0xf4bab7;},'xeIFT':_0x39fe6c(0x2d7,0x27e,0x23d,0x339),'AAqGt':function(_0x479e39,_0x25f997){return _0x479e39(_0x25f997);},'OKETN':function(_0x5efc5f,_0x2a528c){return _0x5efc5f(_0x2a528c);},'SWtme':_0x1635e4(-0x197,-0x184,-0x18c,-0x173)+_0x39fe6c(0x25e,0x210,0x2a4,0x279),'Daele':'face_yolov'+_0x1635e4(-0x1e0,-0x274,-0x241,-0x184),'jRBXs':function(_0x1c1ebf,_0x885f60){return _0x1c1ebf===_0x885f60;},'BPGRP':_0x1635e4(-0x1e1,-0x13e,-0x27c,-0x218),'Crwcu':function(_0x4580ce,_0xbce684){return _0x4580ce==_0xbce684;},'vQGZZ':function(_0xe3e372,_0x439fc8){return _0xe3e372(_0x439fc8);},'SRRYn':'payload','kkvpM':function(_0x3911c3){return _0x3911c3();},'VelOe':_0x39fe6c(0x2ca,0x2b9,0x22b,0x299)+'u8_sd_auth'+_0x1635e4(-0x1fd,-0x256,-0x26a,-0x27f),'DFRKl':function(_0x642ef8,_0x2ce8cf,_0x3fd6c2){return _0x642ef8(_0x2ce8cf,_0x3fd6c2);},'YLeGM':'/api/sd/ge'+_0x1635e4(-0x1d3,-0x1b4,-0x165,-0x1b6),'lWlQo':function(_0x433c98,_0x4b7f99){return _0x433c98(_0x4b7f99);},'ufTlz':'响应内容:','jKlsB':function(_0x80b55d,_0x2c1608){return _0x80b55d(_0x2c1608);},'bNNJC':_0x1635e4(-0x1b1,-0x133,-0x1b8,-0x173)+_0x1635e4(-0xe9,-0x58,-0x94,-0x159)+_0x39fe6c(0x279,0x2bc,0x206,0x222),'BUTPr':_0x1635e4(-0x12e,-0x97,-0x94,-0x1c7)+'/png;base6'+'4,','gZftb':function(_0x410410,_0x2ef6a5){return _0x410410(_0x2ef6a5);},'dQCDv':'图像已成功获取并格式'+_0x1635e4(-0x1b7,-0x1f1,-0x1b4,-0x1a7)+'L。','Sansl':function(_0x1eeefb,_0x1d0b9c){return _0x1eeefb||_0x1d0b9c;},'GiSLI':function(_0x1f4eeb,_0x23c8b8){return _0x1f4eeb+_0x23c8b8;},'edwjN':_0x39fe6c(0x2f1,0x322,0x317,0x26d)+_0x39fe6c(0x1d7,0x1c7,0x17e,0x15d),'PYkot':_0x1635e4(-0xe5,-0xb5,-0x160,-0x95)+_0x1635e4(-0x1b0,-0x139,-0x19a,-0x125),'bpJnY':function(_0x159674){return _0x159674();},'IBrlp':function(_0x5bf300,_0xe0214f){return _0x5bf300(_0xe0214f);},'kCeZR':function(_0x1c8340,_0x53d514){return _0x1c8340===_0x53d514;},'BkvKu':_0x39fe6c(0x1df,0x1bd,0x233,0x1ee),'purMH':function(_0x2304c9,_0x4937a9){return _0x2304c9(_0x4937a9);}};let _0x28d76e=_0x498a6c;_0x2fdb50=_0x2fed19['FrVxB'](processCharacterPrompt,_0x2fdb50),_0x2fdb50=await _0x2fed19[_0x39fe6c(0x27b,0x2e8,0x273,0x203)](stripChineseAnnotations,_0x2fdb50),_0x498a6c=_0x2fed19[_0x39fe6c(0x2bd,0x2c0,0x33a,0x2a7)](processCharacterPrompt,_0x498a6c),_0x498a6c=await _0x2fed19[_0x39fe6c(0x268,0x278,0x1d3,0x296)](stripChineseAnnotations,_0x498a6c);const _0x12d1b1=extension_settings[extensionName][_0x1635e4(-0xe1,-0x55,-0x171,-0xda)][_0x1635e4(-0x1f1,-0x15a,-0x1ba,-0x22f)](),_0x48867c=extension_settings[extensionName];_0x2fed19[_0x1635e4(-0x217,-0x26f,-0x187,-0x1b0)](clearLog),_0x2fed19[_0x1635e4(-0x15e,-0xfd,-0x106,-0x1bd)](addLog,_0x1635e4(-0x14d,-0x113,-0x162,-0x171)+_0x39fe6c(0x23f,0x2db,0x19c,0x2aa)+'端为'+_0x48867c[_0x1635e4(-0x150,-0x1b3,-0x1c8,-0x161)]+_0x39fe6c(0x2fb,0x25c,0x2ba,0x2ff)+_0x48867c['sd_cchatu_'+_0x39fe6c(0x286,0x315,0x23f,0x2fb)]);const _0x3824a3=_0x498a6c&&_0x2fed19[_0x1635e4(-0x139,-0x1b5,-0x1c4,-0x129)](_0x498a6c[_0x39fe6c(0x20a,0x17a,0x1e3,0x18d)](),'')?_0x498a6c:_0x2fdb50;_0x2fed19['TjISf'](addLog,_0x1635e4(-0x130,-0x151,-0x15a,-0x9d)+_0x3824a3);let _0x5cf424=![];_0x3824a3[_0x39fe6c(0x252,0x2a4,0x277,0x1dd)](_0x39fe6c(0x2bb,0x2f7,0x309,0x292)+_0x1635e4(-0x171,-0x193,-0xe0,-0x18d))&&(_0x5cf424=!![]);_0x2fed19[_0x39fe6c(0x2e1,0x31b,0x382,0x33d)](addLog,_0x39fe6c(0x273,0x2ee,0x292,0x2b8)+_0x39fe6c(0x248,0x282,0x1a6,0x23e)+_0x39fe6c(0x1ea,0x1b3,0x15b,0x22e)+_0x5cf424);let _0xac2a81={},_0x1df3df='',_0x32b7e4='';if(_0x5cf424){_0x2fed19['sHooE'](addLog,_0x2fed19[_0x1635e4(-0x196,-0x1fa,-0x13c,-0x115)]),_0xac2a81=_0x2fed19[_0x39fe6c(0x29d,0x237,0x24f,0x26b)](parsePromptStringWithCoordinates,_0x3824a3),_0x1df3df=_0xac2a81[_0x2fed19[_0x1635e4(-0x1de,-0x20d,-0x206,-0x20b)]];for(let _0x2acb68=-0x130d+-0x2c5*-0x7+-0x55;_0x2acb68<=-0x16d9*0x1+-0x653*0x1+0x1d30;_0x2acb68++){if(_0x2fed19[_0x1635e4(-0x210,-0x251,-0x285,-0x26d)](_0x2fed19['MdlnX'],_0x2fed19[_0x39fe6c(0x1e2,0x158,0x1ae,0x22e)]))for(let _0x3888d3=0x1487+0x37c+-0x2*0xc01;_0x2fed19[_0x39fe6c(0x301,0x39c,0x277,0x299)](_0x3888d3,-0x921+0x1d53+-0x2e2*0x7);_0x3888d3++){_0x312d86[_0x1635e4(-0x114,-0x120,-0xed,-0x91)+_0x3888d3+_0x39fe6c(0x1f9,0x29b,0x253,0x273)]&&(_0x844e2a=_0x2fed19[_0x1635e4(-0xf6,-0x8f,-0x6d,-0xb2)](_0x2fed19['zGhuF'](_0x1938c6,',\x20'),_0x2fed19[_0x39fe6c(0x223,0x23e,0x22d,0x185)](_0x469126,_0x5551b8['Character\x20'+_0x3888d3+_0x1635e4(-0x202,-0x220,-0x286,-0x27d)])));}else _0xac2a81[_0x1635e4(-0x114,-0xde,-0x125,-0x92)+_0x2acb68+_0x1635e4(-0x202,-0x266,-0x296,-0x1c7)]&&(_0x32b7e4=_0x2fed19[_0x1635e4(-0x1f8,-0x172,-0x275,-0x256)](_0x2fed19[_0x1635e4(-0xf6,-0x15c,-0x11d,-0xdb)](_0x32b7e4,',\x20'),_0xac2a81[_0x1635e4(-0x114,-0xf6,-0x12e,-0xe7)+_0x2acb68+_0x1635e4(-0x202,-0x1e0,-0x1d0,-0x2a2)]));}}else addLog(_0x2fed19[_0x39fe6c(0x1e0,0x185,0x143,0x19c)]),_0x1df3df=_0x3824a3;let {modifiedPrompt:_0x466031,insertions:_0x3cabfc}=await _0x2fed19[_0x39fe6c(0x23c,0x19f,0x228,0x224)](prompt_replace,_0x1df3df,_0x32b7e4);if(_0x5cf424){if(_0x2fed19[_0x1635e4(-0x10f,-0x8d,-0xee,-0xc8)](_0x2fed19['AHNuf'],_0x1635e4(-0x128,-0xbc,-0xcc,-0x170)))for(let _0x3eef87=0x1620+0xc2f+-0x224e;_0x2fed19['dwfEq'](_0x3eef87,0x2*-0xf35+0x819+0x1655);_0x3eef87++){if(_0xac2a81[_0x39fe6c(0x2e7,0x2bb,0x35d,0x378)+_0x3eef87+_0x1635e4(-0x202,-0x1a9,-0x280,-0x25f)]){if(_0x2fed19[_0x1635e4(-0x1bd,-0x19c,-0x179,-0x18b)](_0x1635e4(-0x204,-0x259,-0x18d,-0x221),_0x2fed19[_0x39fe6c(0x319,0x382,0x391,0x329)])){_0x19a559(_0x1635e4(-0x119,-0x15d,-0xee,-0x10b)+':\x20'+_0x470e83[_0x1635e4(-0x1a8,-0x197,-0x1a4,-0x1e3)]+(_0x1635e4(-0x16a,-0xdb,-0x201,-0x109)+_0x39fe6c(0x258,0x234,0x295,0x2f4)+'查模型是否正确。'));throw new _0x1c1850('获取或者切换模型失败'+_0x1635e4(-0x1d0,-0x12e,-0x241,-0x18d)+_0x39fe6c(0x258,0x1e3,0x1e8,0x2eb)+_0x1635e4(-0x215,-0x292,-0x209,-0x259));}else _0x466031=_0x2fed19[_0x1635e4(-0xf4,-0x69,-0x17f,-0xfc)](_0x2fed19[_0x1635e4(-0x174,-0x16c,-0x1e5,-0x15f)](_0x466031,',\x20'),prompt_replace_for_character(_0xac2a81[_0x39fe6c(0x2e7,0x317,0x304,0x258)+_0x3eef87+_0x1635e4(-0x202,-0x22d,-0x29c,-0x27d)]));}}else{_0x2fed19[_0x1635e4(-0x13e,-0x13f,-0xd4,-0x19a)](_0x32aac4,_0x2fed19[_0x1635e4(-0x196,-0x15f,-0x169,-0x1c8)]),_0xda4c7=_0x2fed19[_0x1635e4(-0x1d8,-0x14e,-0x1cb,-0x1f3)](_0x14b5e2,_0x5c9f2f),_0x3be80d=_0x67ed2e[_0x2fed19[_0x1635e4(-0x1de,-0x1e1,-0x200,-0x21c)]];for(let _0xb34616=0x2574+-0x1*-0xdbd+0x75*-0x70;_0x2fed19['dwfEq'](_0xb34616,-0x19*0x127+-0x1f9b+-0x1c7*-0x22);_0xb34616++){_0x191441['Character\x20'+_0xb34616+_0x1635e4(-0x202,-0x284,-0x252,-0x190)]&&(_0x3d6b1a=_0x1718f2+',\x20'+_0x182281['Character\x20'+_0xb34616+_0x39fe6c(0x1f9,0x221,0x158,0x1ce)]);}}}let _0x1b3f5e=await _0x2fed19['nyiRL'](zhengmian,extension_settings[extensionName][_0x39fe6c(0x2c1,0x2b7,0x265,0x2d2)][extension_settings[extensionName][_0x39fe6c(0x30a,0x29c,0x329,0x354)]][_0x39fe6c(0x200,0x1f3,0x222,0x27d)+'t'],_0x466031,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x39fe6c(0x30a,0x2c9,0x27f,0x26f)]][_0x1635e4(-0x1fb,-0x238,-0x23c,-0x173)+_0x1635e4(-0x15b,-0x193,-0x1b0,-0x1e8)],extension_settings[extensionName][_0x1635e4(-0x1c7,-0x22b,-0x15b,-0x1e8)],_0x3cabfc),_0x21a6d5=await _0x2fed19['UYdrf'](fumian,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x1635e4(-0xf1,-0x175,-0xed,-0x161)]]['negativePr'+_0x39fe6c(0x289,0x2c4,0x29a,0x20b)],extension_settings[extensionName]['UCP_sd']);function _0x39fe6c(_0x9b5797,_0x1e63e1,_0x4dafc8,_0x24b396){return _0x155a(_0x9b5797-0x136,_0x4dafc8);}_0x2fed19[_0x39fe6c(0x27b,0x1fd,0x2e5,0x29d)](addLog,_0x39fe6c(0x295,0x2fc,0x2a9,0x272)+_0x21a6d5),extension_settings['sd'][_0x1635e4(-0x161,-0x176,-0x170,-0xe2)]=_0x12d1b1,await _0x2fed19[_0x39fe6c(0x1e4,0x25b,0x1bd,0x236)](saveSettingsDebounced);try{if(_0x2fed19['uTkvk'](_0x39fe6c(0x2f4,0x25e,0x2e6,0x31e),_0x39fe6c(0x2f4,0x34d,0x297,0x250))){if(_0x2fed19[_0x1635e4(-0x20d,-0x272,-0x2ab,-0x1fd)](_0x48867c[_0x39fe6c(0x2ab,0x30c,0x29e,0x33d)],_0x2fed19[_0x1635e4(-0x201,-0x1f6,-0x1ef,-0x27c)])){if(_0x2fed19[_0x39fe6c(0x1ee,0x1bd,0x16b,0x277)](_0x2fed19[_0x39fe6c(0x310,0x358,0x376,0x394)],_0x2fed19[_0x1635e4(-0x18b,-0x1bf,-0x1b2,-0x125)]))throw new _0x5d9a78(_0x2fed19[_0x39fe6c(0x254,0x1bf,0x1d7,0x2e3)]);else{const _0xb77cb8={};_0xb77cb8['auth']=_0x48867c[_0x1635e4(-0x117,-0xed,-0x152,-0x10d)+_0x1635e4(-0x108,-0x6b,-0xfa,-0x17d)]?_0x48867c[_0x39fe6c(0x2e4,0x2d3,0x308,0x251)+_0x39fe6c(0x2f3,0x2ca,0x32e,0x2fa)]:'',_0xb77cb8[_0x39fe6c(0x28d,0x2b2,0x23c,0x2ed)]=_0x12d1b1;const _0xf6a44f=await fetch(_0x2fed19['JJbff'],{'method':_0x2fed19[_0x39fe6c(0x2b4,0x228,0x354,0x214)],'body':JSON['stringify'](_0xb77cb8),'headers':getRequestHeaders(window[_0x39fe6c(0x2dc,0x2a1,0x32b,0x37e)])});if(!_0xf6a44f['ok']){addLog(_0x39fe6c(0x30c,0x2d2,0x277,0x35c)+_0xf6a44f[_0x1635e4(-0x21e,-0x1ea,-0x270,-0x213)]+'\x20'+_0xf6a44f[_0x1635e4(-0x112,-0x90,-0x177,-0x82)]);throw new Error(_0x1635e4(-0xef,-0x132,-0x92,-0xd3)+_0xf6a44f[_0x39fe6c(0x1dd,0x216,0x149,0x231)]+'\x20'+_0xf6a44f[_0x1635e4(-0x112,-0x173,-0x74,-0xc1)]);}let _0x3b86bd=await _0xf6a44f['text']();console[_0x39fe6c(0x2d6,0x2bd,0x333,0x299)](_0x2fed19[_0x39fe6c(0x290,0x2e2,0x264,0x300)],_0x3b86bd),console['log'](_0x2fed19[_0x1635e4(-0x16d,-0x18a,-0x15d,-0x133)],_0x48867c[_0x39fe6c(0x2ea,0x2d4,0x2bf,0x315)+_0x1635e4(-0x175,-0x12b,-0x1bd,-0x157)]);if(_0x2fed19[_0x39fe6c(0x313,0x27d,0x3b5,0x2aa)](_0x3b86bd,_0x48867c[_0x39fe6c(0x2ea,0x2ae,0x35c,0x273)+_0x39fe6c(0x286,0x26e,0x222,0x25c)])){if(_0x2fed19[_0x39fe6c(0x29e,0x327,0x308,0x24f)](_0x2fed19[_0x39fe6c(0x1f5,0x214,0x17d,0x165)],_0x1635e4(-0x1a2,-0x1cb,-0x20a,-0x15b))){addLog(_0x39fe6c(0x243,0x21a,0x228,0x262)+_0x48867c['sd_cchatu_'+'8_model']+'...'),toastr['info'](_0x39fe6c(0x306,0x34a,0x27b,0x31a)+_0x48867c[_0x39fe6c(0x2ea,0x36e,0x329,0x331)+'8_model']);const _0x4df31e={};_0x4df31e[_0x39fe6c(0x2b3,0x2d5,0x22d,0x33b)]=_0x48867c[_0x1635e4(-0x117,-0x154,-0xf5,-0x10d)+_0x39fe6c(0x2f3,0x2be,0x336,0x308)]?_0x48867c[_0x1635e4(-0x117,-0x184,-0xb8,-0xa0)+_0x39fe6c(0x2f3,0x2f5,0x332,0x2b8)]:'',_0x4df31e[_0x1635e4(-0x16e,-0x200,-0x1ae,-0x117)]=_0x12d1b1,_0x4df31e[_0x39fe6c(0x24d,0x293,0x2b0,0x214)]=_0x48867c[_0x39fe6c(0x2ea,0x2e5,0x34f,0x337)+'8_model'];const _0x150f6a=await _0x2fed19[_0x1635e4(-0x102,-0x19b,-0xf3,-0x10c)](fetch,_0x2fed19[_0x1635e4(-0x200,-0x220,-0x1ac,-0x235)],{'method':_0x2fed19['cRCSw'],'body':JSON[_0x39fe6c(0x300,0x2f2,0x32e,0x264)](_0x4df31e),'headers':_0x2fed19[_0x39fe6c(0x1de,0x15f,0x162,0x1b3)](getRequestHeaders,window[_0x1635e4(-0x11f,-0xc8,-0x178,-0xb9)])});if(!_0x150f6a['ok']){_0x2fed19[_0x39fe6c(0x315,0x2a6,0x34f,0x397)](addLog,_0x1635e4(-0x1d6,-0x222,-0x26c,-0x171)+_0x150f6a[_0x1635e4(-0x21e,-0x18e,-0x1c3,-0x2bf)]+'\x20'+_0x150f6a['statusText']);throw new Error(_0x1635e4(-0x1d6,-0x191,-0x199,-0x1ad)+_0x150f6a[_0x39fe6c(0x1dd,0x14e,0x193,0x225)]+'\x20'+_0x150f6a[_0x1635e4(-0x112,-0xe2,-0x141,-0x16e)]);}toastr[_0x39fe6c(0x29f,0x226,0x2e7,0x283)](_0x1635e4(-0xec,-0x59,-0x12c,-0x148)+_0x48867c['sd_cchatu_'+_0x39fe6c(0x286,0x230,0x2ca,0x1eb)]+'成功');}else _0x5a4d5b[_0x1635e4(-0x114,-0x9c,-0x154,-0x1a4)+_0x1dbf51+_0x39fe6c(0x1f9,0x197,0x292,0x288)]&&(_0x51b31d=_0x2fed19[_0x1635e4(-0x115,-0x126,-0x1ad,-0xa8)](_0x59acb9+',\x20',_0x2fed19['xGpPc'](_0x375138,_0x338ef7[_0x1635e4(-0x114,-0x1ab,-0x13d,-0x75)+_0x3e38da+_0x1635e4(-0x202,-0x1dc,-0x290,-0x248)])));}}}else{let _0x1d3b91=await _0x2fed19[_0x1635e4(-0x1d4,-0x1b0,-0x21d,-0x1b4)](getSDMode,_0x12d1b1);if(_0x2fed19['zDZOi'](_0x1d3b91,_0x48867c[_0x39fe6c(0x2ea,0x2ec,0x250,0x37f)+_0x1635e4(-0x175,-0x137,-0x122,-0x111)])){if(_0x2fed19['SdWDM'](_0x39fe6c(0x318,0x3ae,0x2f6,0x35b),_0x2fed19[_0x1635e4(-0x177,-0x1cc,-0x20b,-0x11e)]))return _0x478bfa['toString']()['search'](_0x39fe6c(0x303,0x327,0x285,0x348)+'+$')[_0x1635e4(-0x12c,-0x12b,-0xa7,-0x12b)]()['constructo'+'r'](_0x138175)[_0x39fe6c(0x2fe,0x39e,0x338,0x348)](TYEFwj[_0x39fe6c(0x226,0x1aa,0x2c7,0x26f)]);else _0x2fed19['xGpPc'](addLog,'正在切换模型为'+_0x48867c['sd_cchatu_'+_0x1635e4(-0x175,-0x1f3,-0xee,-0x18c)]+_0x1635e4(-0x1a5,-0x221,-0x17f,-0x1c4)),await _0x2fed19[_0x1635e4(-0x207,-0x1cb,-0x1b4,-0x1a5)](setSDMode,_0x12d1b1,_0x48867c[_0x39fe6c(0x2ea,0x36e,0x30a,0x30e)+'8_model']);}}}else _0x45690e=_0x2fed19[_0x1635e4(-0x1f8,-0x20a,-0x280,-0x22d)](_0x2fed19[_0x39fe6c(0x203,0x265,0x1ec,0x1ff)](_0x3e8757,',\x20'),_0x2fed19[_0x1635e4(-0x13e,-0x1a0,-0xd7,-0xf4)](_0x18cf1b,_0x4b05e6['Character\x20'+_0x2b6feb+_0x39fe6c(0x1f9,0x251,0x1de,0x205)]));}catch(_0x1f830d){_0x2fed19[_0x39fe6c(0x276,0x282,0x274,0x2bb)](addLog,_0x1635e4(-0x119,-0x1a1,-0xfe,-0xb7)+':\x20'+_0x1f830d['message']+(_0x1635e4(-0x16a,-0x1c1,-0x14b,-0x17c)+_0x1635e4(-0x1a3,-0x130,-0x15a,-0x113)+_0x1635e4(-0x215,-0x2a1,-0x1f5,-0x1d4)));throw new Error('获取或者切换模型失败'+_0x39fe6c(0x22b,0x1f9,0x1a3,0x249)+'i是否正常启动，并检'+_0x39fe6c(0x1e6,0x218,0x15e,0x245));}let _0xa069b8=-(-0x18b6+0x1036+0x881);const _0x5856b4=_0x48867c['sd_cseed'];_0x2fed19[_0x39fe6c(0x237,0x1f9,0x260,0x256)](_0x5856b4,'')&&_0x2fed19[_0x1635e4(-0x20b,-0x254,-0x1d4,-0x1ff)](_0x5856b4,null)&&!_0x2fed19[_0x39fe6c(0x268,0x2e1,0x215,0x217)](isNaN,Number(_0x5856b4))&&_0x2fed19[_0x1635e4(-0xf3,-0xb4,-0x18e,-0x102)](_0x2fed19[_0x39fe6c(0x275,0x270,0x2a0,0x282)](Number,_0x5856b4),-0x70b*0x1+0xbfc+-0x4f1)&&(_0x2fed19['QZEle']('YFwaT',_0x2fed19[_0x1635e4(-0x1e3,-0x15a,-0x1e0,-0x143)])?_0x2f1d23['on'](_0x559db5,_0x21a894):_0xa069b8=Number(_0x5856b4));let _0xb8958={'prompt':_0x1b3f5e,'negative_prompt':_0x21a6d5,'sampler_name':_0x48867c['sd_cchatu_'+_0x39fe6c(0x2d2,0x304,0x31b,0x2e2)+_0x1635e4(-0x1cf,-0x152,-0x1e5,-0x16f)],'scheduler':_0x48867c[_0x1635e4(-0x111,-0x70,-0x11b,-0x171)+_0x39fe6c(0x1e5,0x1c6,0x1ec,0x17a)+'r'],'steps':_0x48867c[_0x1635e4(-0x1f2,-0x202,-0x1c8,-0x269)],'cfg_scale':_0x48867c['sdCfgScale'],'width':_0x27e337?_0x27e337:_0x48867c[_0x1635e4(-0x1cc,-0x189,-0x167,-0x12b)],'height':_0x1fd543?_0x1fd543:_0x48867c[_0x1635e4(-0x1c0,-0x169,-0x25e,-0x1a3)],'restore_faces':_0x48867c[_0x39fe6c(0x250,0x227,0x2c4,0x1ac)+'es']==_0x1635e4(-0x124,-0x1b8,-0x133,-0x97),'enable_hr':_0x2fed19[_0x39fe6c(0x2e5,0x34a,0x2c7,0x31d)](_0x48867c[_0x39fe6c(0x1f1,0x282,0x1aa,0x181)+_0x39fe6c(0x27d,0x2f4,0x2ac,0x1ea)],_0x2fed19[_0x39fe6c(0x2ac,0x271,0x300,0x26d)]),'hr_upscaler':_0x48867c[_0x39fe6c(0x2ea,0x2cf,0x297,0x28d)+_0x1635e4(-0x1f7,-0x1bd,-0x1a9,-0x181)],'hr_scale':_0x48867c[_0x1635e4(-0x223,-0x1cf,-0x211,-0x1ff)+_0x39fe6c(0x269,0x2bc,0x1c9,0x1cc)],'hr_additional_modules':[],'denoising_strength':_0x48867c[_0x1635e4(-0x122,-0x186,-0x145,-0x129)+_0x1635e4(-0x13d,-0xf9,-0x1bc,-0x188)+'th'],'hr_second_pass_steps':_0x48867c[_0x1635e4(-0x20a,-0x2a8,-0x1e7,-0x1e2)+_0x1635e4(-0x173,-0x133,-0x16f,-0x168)],'seed':_0xa069b8,'override_settings':{'CLIP_stop_at_last_layers':_0x2fed19[_0x39fe6c(0x221,0x2a2,0x1b5,0x28e)](Number,_0x48867c['sd_cclip_s'+_0x39fe6c(0x224,0x1d3,0x1e0,0x1f0)]),'sd_vae':_0x48867c[_0x39fe6c(0x2ea,0x352,0x325,0x37b)+_0x39fe6c(0x1d9,0x22e,0x25f,0x1e0)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x2fed19[_0x39fe6c(0x21c,0x1d3,0x182,0x186)](addLog,_0x1635e4(-0x158,-0xe9,-0x117,-0x187)+'ces\x20脸部修复\x20为'+_0xb8958[_0x39fe6c(0x2a3,0x275,0x26c,0x2a0)+_0x1635e4(-0x14c,-0x1e3,-0x1b8,-0x179)]),addLog(_0x39fe6c(0x304,0x2f0,0x26d,0x30f)+'高清修复\x20为'+_0xb8958[_0x1635e4(-0x106,-0x199,-0x70,-0xe5)]);if(_0x2fed19[_0x1635e4(-0x116,-0x7f,-0x12b,-0xad)](_0x48867c['sd_cadetai'+_0x1635e4(-0x121,-0x178,-0x155,-0xb4)],_0x2fed19['xeIFT'])){addLog(_0x2fed19[_0x39fe6c(0x22a,0x18f,0x2c0,0x1c8)]);const _0x501064={};_0x501064[_0x39fe6c(0x26e,0x2b1,0x2b2,0x280)]=_0x2fed19[_0x39fe6c(0x229,0x1b1,0x23a,0x2a9)];const _0x2e900f={};_0x2e900f[_0x1635e4(-0xe0,-0x11b,-0x101,-0x4b)]=[!![],!![],_0x501064];const _0x52e5a6={};_0x52e5a6[_0x39fe6c(0x2cc,0x302,0x2fc,0x28e)]=_0x2e900f;const _0x11cc9c={};_0x11cc9c[_0x1635e4(-0x110,-0x11a,-0x11d,-0xbc)+_0x39fe6c(0x274,0x2a3,0x24b,0x1d4)]=_0x52e5a6,_0xb8958=deepMerge(_0xb8958,_0x11cc9c);}const _0x1f0d7e=_0x39fe6c(0x208,0x208,0x1f6,0x1b2)+'图参数报告\x0a-\x20**'+_0x1635e4(-0x159,-0x181,-0xf5,-0x11c)+_0x39fe6c(0x294,0x2f3,0x266,0x2aa)+_0x1b3f5e+(_0x1635e4(-0x209,-0x25b,-0x22f,-0x268)+_0x39fe6c(0x282,0x30c,0x2dd,0x20a)+'Prompt):**'+'\x20')+_0x21a6d5+('\x0a-\x20**采样方法\x20'+_0x1635e4(-0x168,-0x209,-0x1f6,-0x159)+_0x1635e4(-0x19f,-0x126,-0x112,-0x197))+_0xb8958[_0x39fe6c(0x235,0x2ad,0x1b0,0x255)+'me']+(_0x39fe6c(0x249,0x2e3,0x1be,0x2df)+_0x39fe6c(0x232,0x2a2,0x220,0x2d4))+_0xb8958['steps']+(_0x1635e4(-0x151,-0x1c1,-0x14b,-0xe9)+_0x1635e4(-0x1c1,-0x154,-0x19b,-0x260))+_0xb8958[_0x1635e4(-0x225,-0x1bb,-0x2c1,-0x1c9)]+(_0x1635e4(-0x1e5,-0x18f,-0x1f8,-0x1be)+_0x1635e4(-0x1ff,-0x198,-0x15d,-0x231))+_0xb8958[_0x39fe6c(0x2a7,0x2ec,0x347,0x317)]+'x'+_0xb8958[_0x39fe6c(0x2a8,0x30e,0x235,0x212)]+(_0x1635e4(-0x1e8,-0x17f,-0x17f,-0x25c)+_0x1635e4(-0xe4,-0x7f,-0xfa,-0x183))+(_0x2fed19[_0x39fe6c(0x206,0x1af,0x1a5,0x191)](_0xb8958[_0x1635e4(-0x20f,-0x287,-0x22b,-0x1fd)],-(0x1654+0x20cf+0x1*-0x3722))?_0x2fed19[_0x1635e4(-0x1eb,-0x258,-0x227,-0x275)]:_0xb8958[_0x1635e4(-0x20f,-0x240,-0x27e,-0x258)])+(_0x39fe6c(0x27c,0x2ae,0x220,0x2a6)+_0x1635e4(-0x19a,-0x1d8,-0x1a9,-0xfa))+_0x48867c[_0x39fe6c(0x2ea,0x29b,0x342,0x345)+_0x39fe6c(0x286,0x230,0x1ea,0x2c2)]+(_0x39fe6c(0x298,0x221,0x26c,0x2dc)+'*\x20')+_0xb8958[_0x39fe6c(0x26d,0x2ec,0x2db,0x25f)+_0x1635e4(-0x103,-0xb2,-0x82,-0xab)][_0x39fe6c(0x215,0x28a,0x275,0x20b)]+(_0x1635e4(-0x141,-0x12b,-0xab,-0x1c3)+'Skip:**\x20')+_0xb8958[_0x1635e4(-0x18e,-0xfc,-0x135,-0x12b)+_0x39fe6c(0x2f8,0x354,0x27a,0x31e)][_0x39fe6c(0x20e,0x230,0x16d,0x2aa)+_0x1635e4(-0x195,-0x12a,-0x200,-0x239)+_0x1635e4(-0x137,-0x124,-0xfe,-0x13f)]+(_0x1635e4(-0xea,-0xe0,-0x13e,-0xc8)+_0x39fe6c(0x1fd,0x16d,0x192,0x217)+_0x1635e4(-0x218,-0x297,-0x1fa,-0x253))+_0xb8958[_0x39fe6c(0x2f5,0x317,0x259,0x2a0)]+(_0x39fe6c(0x247,0x2bc,0x2a3,0x1cf)+_0x1635e4(-0x1cb,-0x199,-0x254,-0x1b2)+_0x1635e4(-0x1ad,-0x1b4,-0x123,-0x1ce))+_0xb8958[_0x39fe6c(0x22d,0x25d,0x26d,0x1e4)]+('\x0a-\x20**重绘幅度\x20'+'(Denoising'+'\x20Strength)'+':**\x20')+_0xb8958[_0x39fe6c(0x2c5,0x251,0x30c,0x254)+_0x39fe6c(0x2ee,0x303,0x322,0x295)]+(_0x39fe6c(0x285,0x2ce,0x27a,0x1e3)+'(Restore\x20F'+_0x39fe6c(0x2b6,0x23c,0x2fe,0x230))+_0xb8958['restore_fa'+'ces']+('\x0a-\x20**ADeta'+'iler:**\x20')+_0x2fed19[_0x39fe6c(0x2b8,0x22a,0x2aa,0x27e)](_0x48867c[_0x1635e4(-0x157,-0x1a7,-0x143,-0x18e)+_0x1635e4(-0x121,-0x14b,-0xeb,-0x98)],_0x2fed19[_0x39fe6c(0x2ac,0x2e0,0x288,0x2b5)])+'\x0a---\x0a\x20\x20\x20\x20';addLog(_0x1f0d7e),_0x2fed19[_0x1635e4(-0x199,-0x1cf,-0x150,-0x19a)](addLog,'sdwebui生图参'+'数为'+JSON[_0x39fe6c(0x300,0x31d,0x393,0x2af)](_0xb8958));function _0x1635e4(_0x13f612,_0x275717,_0x41f181,_0x147cfb){return _0x155a(_0x13f612- -0x2c5,_0x147cfb);}console[_0x1635e4(-0x125,-0x19c,-0x1ac,-0x165)](_0x2fed19[_0x1635e4(-0x21f,-0x20d,-0x22b,-0x1e2)],_0xb8958),await _0x2fed19['kkvpM'](waitForLock),acquireLock();try{if(_0x48867c[_0x1635e4(-0x150,-0x15d,-0x141,-0x177)]===_0x2fed19[_0x1635e4(-0x201,-0x20a,-0x1fe,-0x276)]){_0xb8958[_0x1635e4(-0x16e,-0xe7,-0x191,-0x14a)]=_0x12d1b1,console[_0x1635e4(-0x125,-0x94,-0x190,-0x15b)](_0x2fed19['VelOe'],_0x48867c['st_chatu8_'+_0x39fe6c(0x2f3,0x382,0x314,0x283)]),_0xb8958[_0x39fe6c(0x2b3,0x2e9,0x2fc,0x2d5)]=_0x48867c[_0x1635e4(-0x117,-0x158,-0x106,-0x1ab)+'sd_auth']?_0x48867c[_0x39fe6c(0x2e4,0x25c,0x35b,0x24e)+_0x1635e4(-0x108,-0xa0,-0x8b,-0xfe)]:'';const _0x443643=await _0x2fed19[_0x39fe6c(0x26f,0x2ce,0x291,0x2c1)](fetch,_0x2fed19[_0x39fe6c(0x2bc,0x338,0x347,0x2f1)],{'method':'POST','headers':_0x2fed19[_0x39fe6c(0x268,0x275,0x291,0x20a)](getRequestHeaders,window[_0x1635e4(-0x11f,-0x14a,-0xb1,-0xa2)]),'body':JSON[_0x39fe6c(0x300,0x2da,0x27b,0x2e9)](_0xb8958)});if(!_0x443643['ok']){const _0x30de58=await _0x443643[_0x39fe6c(0x1da,0x1fa,0x154,0x1ba)]();_0x2fed19[_0x1635e4(-0x183,-0x1cc,-0x1c1,-0x1a7)](addLog,_0x39fe6c(0x239,0x2c9,0x1c1,0x267)+_0x39fe6c(0x22e,0x294,0x237,0x272)+_0x443643[_0x1635e4(-0x21e,-0x275,-0x27c,-0x283)]+_0x39fe6c(0x2ff,0x2f9,0x2da,0x2ac)+_0x30de58),console[_0x39fe6c(0x2d6,0x32c,0x2ab,0x2e3)](_0x2fed19[_0x39fe6c(0x2db,0x2ea,0x25b,0x23f)],_0x30de58);throw new Error('请求失败,状态码:\x20'+_0x443643[_0x39fe6c(0x1dd,0x168,0x1b1,0x1e5)]+',\x20详情:\x20'+_0x30de58);}const _0x5ca52f=await _0x443643['text']();let _0x288045='';try{const _0x39548d=JSON['parse'](_0x5ca52f);_0x288045=_0x39548d[_0x39fe6c(0x1f3,0x1a0,0x28f,0x251)][-0xf+-0x7*-0x17e+-0xa63];}catch(_0x4dabfd){_0x2fed19['jKlsB'](addLog,_0x2fed19[_0x1635e4(-0x138,-0xe1,-0x157,-0xda)]),_0x288045=_0x5ca52f;}const _0x1895bd=_0x2fed19[_0x39fe6c(0x2e6,0x265,0x372,0x312)](_0x2fed19['BUTPr'],_0x288045);return _0x2fed19[_0x39fe6c(0x25a,0x1c5,0x1e9,0x200)](addLog,_0x2fed19[_0x1635e4(-0x1af,-0x18a,-0x1c8,-0x11e)]),{'image':_0x1895bd,'change':_0x2fed19[_0x1635e4(-0x1be,-0x14c,-0x1f9,-0x12a)](_0x498a6c,'')};}else{if(_0x39fe6c(0x299,0x22b,0x2e4,0x29b)===_0x39fe6c(0x299,0x2fd,0x2ac,0x297)){const _0x3f49e=new URL(_0x2fed19[_0x39fe6c(0x2dd,0x27a,0x29d,0x302)](_0x12d1b1,_0x2fed19['edwjN'])),_0x30ed5b=await fetch(_0x3f49e,{'method':_0x39fe6c(0x1f8,0x279,0x1e7,0x1c9),'body':JSON[_0x1635e4(-0xfb,-0x57,-0x157,-0x108)](_0xb8958),'headers':{'Content-Type':_0x2fed19[_0x1635e4(-0x21a,-0x278,-0x251,-0x1ea)],'Authorization':getsdAuth()}});_0x2fed19[_0x1635e4(-0x13b,-0x125,-0x18a,-0x161)](releaseLock);if(!_0x30ed5b['ok']){const _0x40e786=await _0x30ed5b[_0x1635e4(-0x221,-0x26e,-0x181,-0x239)]();_0x2fed19[_0x1635e4(-0x1ef,-0x206,-0x276,-0x215)](addLog,'SD\x20API\x20返回错'+_0x1635e4(-0x10b,-0x85,-0xae,-0x93)+_0x30ed5b[_0x39fe6c(0x1dd,0x191,0x1cc,0x14b)]+'。响应内容:\x20'+_0x40e786),console['log'](_0x2fed19[_0x39fe6c(0x2db,0x251,0x307,0x268)],_0x40e786);throw new Error('请求失败,状态码:\x20'+_0x30ed5b[_0x39fe6c(0x1dd,0x16b,0x229,0x1da)]+_0x1635e4(-0x146,-0x141,-0x18f,-0xf9)+_0x40e786);}const _0x432dbe=await _0x30ed5b[_0x39fe6c(0x25d,0x200,0x2a3,0x24e)]();if(!_0x432dbe[_0x1635e4(-0x208,-0x172,-0x1f4,-0x1ef)]||_0x2fed19[_0x39fe6c(0x206,0x191,0x283,0x263)](_0x432dbe[_0x39fe6c(0x1f3,0x1a7,0x199,0x200)]['length'],0x1*0x20fc+0x2016+0x1*-0x4112)){if(_0x2fed19[_0x39fe6c(0x302,0x348,0x2ff,0x2d9)](_0x2fed19[_0x39fe6c(0x1e7,0x213,0x227,0x18d)],_0x2fed19['BkvKu']))throw new Error(_0x2fed19[_0x39fe6c(0x254,0x1f0,0x1b6,0x2b3)]);else{_0xcde12d(_0x40b34b);return;}}const _0x36e4d6=_0x432dbe[_0x1635e4(-0x208,-0x22e,-0x1b9,-0x25b)][0xd36*0x1+0x166f*0x1+0x1*-0x23a5],_0x13daa2=_0x2fed19[_0x1635e4(-0x165,-0x16e,-0x1ef,-0x1a0)]+_0x36e4d6;return _0x2fed19['purMH'](addLog,_0x1635e4(-0x19b,-0x201,-0x1da,-0x1d4)+_0x1635e4(-0x1b7,-0x24b,-0x24b,-0x124)+'L。'),{'image':_0x13daa2,'change':_0x2fed19['Sansl'](_0x28d76e,'')};}else _0xa04c47['on'](_0x40b4ee[_0x39fe6c(0x212,0x1fd,0x1b7,0x263)+_0x1635e4(-0x184,-0x139,-0x187,-0x21e)+'ST'],_0x574922),_0x256daf[_0x1635e4(-0x205,-0x196,-0x172,-0x270)](_0x54c3ec=>{_0x2d61cc['on'](_0x54c3ec,_0x46aef4);}),_0x2fed19['hsyIc'](_0x134c91,_0x39fe6c(0x26b,0x271,0x26d,0x211)+_0x39fe6c(0x27a,0x1fb,0x256,0x279));}}catch(_0x1cbf51){releaseLock(),_0x2fed19['EVSYm'](addLog,'sd请求生图错误:\x20'+_0x1cbf51[_0x39fe6c(0x253,0x1eb,0x1dd,0x2c2)]),console[_0x39fe6c(0x2e0,0x373,0x2d7,0x373)](_0x39fe6c(0x2fa,0x2c6,0x295,0x2a1)+_0x1635e4(-0x155,-0x1c1,-0x120,-0xd9)+_0x39fe6c(0x1db,0x24c,0x262,0x19b),_0x1cbf51);throw _0x1cbf51;}}async function sdGenerate(_0x5832a5){function _0x1a6220(_0x14e5ff,_0x5c5520,_0x34a7ff,_0x1de8af){return _0x155a(_0x5c5520- -0x1fb,_0x1de8af);}const _0x164320={'NeTjh':function(_0x1a0622,_0x14c549){return _0x1a0622(_0x14c549);},'NbTtK':function(_0x5f4cac,_0x2dde0c){return _0x5f4cac(_0x2dde0c);},'AjiXA':_0x1a6220(-0x1c1,-0x12f,-0xf8,-0x15b),'Bbarj':_0x34df96(0x1c,0x9f,0x57,0x58),'gyawD':function(_0x4cfea5,_0x5ad93f){return _0x4cfea5(_0x5ad93f);},'ojkcR':function(_0xcb1cd1,_0x3786ef){return _0xcb1cd1!=_0x3786ef;},'OppeP':_0x1a6220(-0xa8,-0xbf,-0xd6,-0xb8),'OqKUY':function(_0x3127f8,_0x1b1bfc,_0x120c3e,_0x5c3eeb){return _0x3127f8(_0x1b1bfc,_0x120c3e,_0x5c3eeb);},'eaxQU':function(_0x2cd1af,_0x436a44){return _0x2cd1af!==_0x436a44;},'YCCGQ':_0x34df96(0x8d,0x66,0xac,0x11e),'xLvXM':function(_0xd971fd,_0x2a08a8){return _0xd971fd(_0x2a08a8);},'lSCHA':function(_0x49874a,_0x4ba28b){return _0x49874a(_0x4ba28b);}},{id:_0x3320c0,prompt:_0x162906,width:_0x3d56d9,height:_0x32fa84,change:_0x2e0eff}=_0x5832a5;_0x164320[_0x34df96(-0x11,0x40,-0x6,0x32)](addLog,_0x1a6220(-0x15b,-0x15c,-0x1e2,-0xbe)+_0x1a6220(0x16,-0x53,0xb,-0x35)+_0x3320c0+(')\x20-\x20Prompt'+':\x20')+_0x162906+(_0x2e0eff?_0x34df96(0x64,0x85,0x83,-0x26)+'\x20'+_0x2e0eff:''));function _0x34df96(_0x3cc050,_0xbc05d4,_0xaae332,_0x2e03dd){return _0x155a(_0x3cc050- -0xe6,_0xbc05d4);}if(_0x2e0eff&&_0x2e0eff['includes'](_0x164320[_0x34df96(0xda,0x12a,0x75,0x67)])){if(_0x164320[_0x34df96(0x63,0x13,0xc5,0x102)]!==_0x1a6220(-0xdd,-0xf9,-0x132,-0x9f)){if(_0x3acd47){const _0x1a366f=_0x3a3f16[_0x1a6220(0x14,-0x7f,0x7,-0x8e)](_0x23440d,arguments);return _0x39c3f1=null,_0x1a366f;}}else{_0x164320[_0x34df96(-0xf,-0x45,-0x79,-0x46)](bananaGenerate,_0x5832a5);return;}}try{const {image:_0x28247d,change:_0x1b3f9e}=await _0x164320[_0x34df96(-0xf,0x68,-0x5a,-0x6c)](generateSDImage,{'prompt':_0x162906,'width':_0x3d56d9,'height':_0x32fa84,'change':_0x2e0eff});if(_0x164320[_0x1a6220(0x39,-0x23,-0xf,0x45)](extension_settings[extensionName][_0x34df96(0xef,0x180,0x79,0xde)],'0')){if(_0x164320[_0x34df96(0x73,0x10a,0xa4,-0x28)]!==_0x164320[_0x34df96(0x73,0x17,0x18,0x8a)])_0x26bd95=_0x164320[_0x1a6220(-0xcb,-0x132,-0xe4,-0xfc)](_0xf76e1c,_0x4fbc6f);else{const _0x37e19a={};_0x37e19a['change']=_0x1b3f9e,await _0x164320[_0x34df96(0xa3,0x4a,0xce,0x2b)](setItemImg,_0x162906,_0x28247d,_0x37e19a),addLog(_0x1a6220(-0x126,-0x96,-0x31,-0x8b)+_0x1a6220(-0xb3,-0x12c,-0xd1,-0xb1)+'\x20'+_0x162906);}}else{if(_0x164320[_0x34df96(-0x8,0x14,-0x6d,-0x5b)](_0x164320[_0x1a6220(-0xdb,-0xa6,-0xd8,-0x12a)],_0x164320['YCCGQ'])){_0x164320[_0x1a6220(-0xac,-0x132,-0x158,-0x9b)](_0xdb89ed,_0x34df96(0xf0,0xe3,0xd8,0x9f)+_0x2b07ef[_0x34df96(-0x3f,-0xf,0x25,0x6)]+'\x20'+_0x36ba2c[_0x34df96(0xcd,0x139,0xc2,0x162)]);throw new _0x26ed54(_0x34df96(0xf0,0x147,0xe6,0xc7)+_0x5f3f21[_0x1a6220(-0x174,-0x154,-0xfe,-0x162)]+'\x20'+_0xf99a47['statusText']);}else _0x164320[_0x34df96(0x94,0x3a,0xa0,0x102)](addLog,_0x34df96(-0xb,0x89,0x6,-0x2a)+'库');}const _0x187d01={};_0x187d01['id']=_0x3320c0,_0x187d01[_0x34df96(0x39,0xb7,-0x9,-0x5)]=!![],_0x187d01['imageData']=_0x28247d,_0x187d01[_0x1a6220(-0x11a,-0x90,-0xed,-0x3)]=_0x162906,_0x187d01['change']=_0x1b3f9e,eventSource[_0x34df96(-0x34,0x17,-0x54,-0x8b)](EventType[_0x1a6220(-0x13d,-0x11f,-0xa9,-0x122)+'MAGE_RESPO'+'NSE'],_0x187d01),_0x164320[_0x1a6220(-0x1c,-0x28,-0x7,0x34)](addLog,_0x34df96(-0xd,-0x49,0x8a,-0x90)+_0x34df96(0xad,0x18,0x13a,0x112)+_0x3320c0+')');}catch(_0x16869c){const _0x2aafee=_0x1a6220(-0x92,-0x6a,0x31,-0xc2)+_0x34df96(0xd6,0x44,0x172,0x64)+_0x3320c0+_0x1a6220(0x26,-0x1d,0x6b,-0x8)+_0x16869c[_0x34df96(0x37,0x49,0xd1,0x8a)];addLog(_0x1a6220(-0xfe,-0xf1,-0x79,-0x5d)+_0x2aafee),console['error'](_0x1a6220(0x5a,-0x37,-0x28,0x24)+_0x34df96(0xc3,0x57,0x13d,0x72)+_0x1a6220(-0xff,-0x80,-0x69,-0x15),_0x16869c);const _0x548a32={};_0x548a32['id']=_0x3320c0,_0x548a32[_0x1a6220(-0xc4,-0xdc,-0x93,-0xc0)]=![],_0x548a32['error']=_0x16869c[_0x34df96(0x37,-0x27,-0x1e,0xbb)],_0x548a32[_0x1a6220(-0xa3,-0x90,-0xb0,-0xc1)]=_0x162906,eventSource[_0x34df96(-0x34,-0x50,-0x3a,-0xa4)](EventType[_0x34df96(-0xa,0x15,0x42,0x8b)+_0x34df96(0xcc,0xc2,0x38,0xb3)+_0x1a6220(-0xc7,-0x69,0x2f,-0x9)],_0x548a32),_0x164320[_0x34df96(-0x1d,-0x76,-0x3a,0xd)](addLog,_0x1a6220(-0x32,-0x9a,-0x110,-0x2e)+_0x1a6220(-0x7e,-0x68,-0xc8,-0xe3)+_0x3320c0+')');}}const LEGACY_EVENT_NAMES=['generate-i'+_0x27558c(0x4e0,0x3f4,0x46c,0x44d)+'st','generate_i'+_0x27558c(0x470,0x544,0x4c6,0x509)+'st'];function initializeSDListener(){const _0x413f9d={'iJnBt':function(_0x233352,_0x1b75aa){return _0x233352===_0x1b75aa;},'xbEwA':_0x563c4e(-0x1ef,-0x1f8,-0x1bf,-0x147),'ycKgu':function(_0x5db921,_0x342b0b){return _0x5db921(_0x342b0b);}};eventSource['on'](EventType[_0x563c4e(-0x1cc,-0x199,-0x217,-0x1b9)+_0x3db381(0x4e9,0x545,0x4fe,0x460)+'ST'],sdGenerate);function _0x3db381(_0x2ffc72,_0x5ebcf2,_0x22504d,_0x4cda78){return _0x27558c(_0x5ebcf2,_0x5ebcf2-0x97,_0x2ffc72-0x72,_0x4cda78-0x1bc);}function _0x563c4e(_0xae7e46,_0x167618,_0x33e430,_0x37043d){return _0x6bf2d4(_0xae7e46-0x10f,_0x37043d,_0x33e430-0x1a2,_0x33e430- -0x405);}LEGACY_EVENT_NAMES[_0x563c4e(-0x2ba,-0x1d2,-0x233,-0x28c)](_0x402a99=>{function _0x2e0ad8(_0x7f0fd0,_0x1a7018,_0x1bda17,_0x592852){return _0x3db381(_0x1a7018- -0x3d8,_0x592852,_0x1bda17-0xf,_0x592852-0x17);}function _0x58293c(_0x342149,_0x1dead8,_0x3506b7,_0x3385ec){return _0x3db381(_0x3506b7- -0x547,_0x342149,_0x3506b7-0x5f,_0x3385ec-0xac);}if(_0x413f9d[_0x2e0ad8(0x8b,0xcd,0x131,0xa4)](_0x2e0ad8(0x22b,0x197,0x1e9,0x164),_0x413f9d[_0x2e0ad8(0xc9,0xb9,0x9e,0x96)])){_0x270571(_0x58293c(-0xac,-0x9b,-0xb0,-0x11a)+_0x5a654f[_0x58293c(-0x177,-0xdc,-0xf8,-0x14b)]+'\x20'+_0x55231b[_0x2e0ad8(0x17f,0x183,0x218,0x1c8)]);throw new _0xdbc638(_0x58293c(-0x88,-0xc6,-0xb0,-0xfa)+_0x57979e[_0x58293c(-0x12b,-0x173,-0xf8,-0x16a)]+'\x20'+_0x4d8bd8[_0x2e0ad8(0x216,0x183,0x1a4,0x1eb)]);}else eventSource['on'](_0x402a99,sdGenerate);}),_0x413f9d[_0x3db381(0x45f,0x46d,0x465,0x46c)](addLog,_0x563c4e(-0x136,-0x259,-0x1be,-0x1ee)+_0x3db381(0x4ec,0x516,0x516,0x465));}export async function replaceWithSd(){function _0x22bf68(_0x178e82,_0xa9f782,_0x2d49b9,_0x2becff){return _0x27558c(_0xa9f782,_0xa9f782-0x149,_0x2d49b9- -0x670,_0x2becff-0x1ca);}function _0x5b3aa4(_0x105230,_0x38ae9d,_0x4ef531,_0x4ec47b){return _0x6bf2d4(_0x105230-0x35,_0x4ef531,_0x4ef531-0x1bd,_0x4ec47b-0x1f9);}const _0xbbc9d6={'ISFDm':function(_0x565117,_0x273de8){return _0x565117(_0x273de8);},'Swciw':_0x5b3aa4(0x3e7,0x3a6,0x464,0x41f)+_0x22bf68(-0xe0,-0x17c,-0x15e,-0x13b)+'e64\x20数据处理。','Lxtzj':function(_0x1246e2,_0x430ba5){return _0x1246e2(_0x430ba5);},'Xgxdk':_0x5b3aa4(0x4af,0x3a6,0x40c,0x440)+'已关闭。','HWhFX':function(_0x19e42d,_0x900b7c){return _0x19e42d==_0x900b7c;},'cZzgT':function(_0x4624e0,_0x551b37){return _0x4624e0===_0x551b37;},'YANYk':'HQfNw','UoOSd':function(_0xeb3f6b,_0x7166e7){return _0xeb3f6b!==_0x7166e7;},'nCDvH':_0x22bf68(-0x1d4,-0x1e3,-0x22f,-0x27b)};_0xbbc9d6[_0x22bf68(-0x240,-0x17b,-0x209,-0x167)](extension_settings[extensionName][_0x5b3aa4(0x388,0x3cb,0x34d,0x3ee)],'sd')?(!window[_0x5b3aa4(0x45d,0x42e,0x3f9,0x48e)+_0x22bf68(-0x241,-0x1fb,-0x1ed,-0x1e7)]&&(window[_0x5b3aa4(0x4bf,0x4cc,0x47e,0x48e)+_0x5b3aa4(0x3fc,0x3c5,0x4df,0x458)]=!![],initializeSDListener()),initializeImageProcessing()):_0xbbc9d6['cZzgT'](_0xbbc9d6[_0x22bf68(-0x268,-0x1d6,-0x259,-0x227)],_0xbbc9d6[_0x22bf68(-0x2be,-0x1d2,-0x259,-0x2be)])?window['initialize'+'SDListener']&&(_0xbbc9d6['UoOSd'](_0x5b3aa4(0x3f3,0x457,0x3c1,0x416),_0xbbc9d6[_0x22bf68(-0x1c6,-0x1ab,-0x24e,-0x1c4)])?(_0xbbc9d6[_0x5b3aa4(0x38c,0x415,0x476,0x41a)](_0x5968ec,_0xbbc9d6[_0x5b3aa4(0x474,0x4a1,0x523,0x4a9)]),_0x10460b=_0x2a8f04):(eventSource[_0x22bf68(-0x1e6,-0x194,-0x1ef,-0x289)+_0x22bf68(-0xf7,-0x1c4,-0x179,-0x142)](EventType['GENERATE_I'+_0x5b3aa4(0x4a1,0x478,0x3bd,0x44c)+'ST'],sdGenerate),LEGACY_EVENT_NAMES['forEach'](_0x2dbc7d=>{function _0x58f8fc(_0x4c5d5b,_0x5cfc3a,_0x53236e,_0x2de649){return _0x22bf68(_0x4c5d5b-0x17e,_0x5cfc3a,_0x2de649-0x713,_0x2de649-0xfb);}function _0x3dd89(_0x4afae3,_0x9f7eae,_0xd7972,_0x49f5f1){return _0x5b3aa4(_0x4afae3-0x146,_0x9f7eae-0x91,_0x4afae3,_0xd7972- -0x2ba);}eventSource[_0x3dd89(0x102,0x1a0,0x19c,0x21c)+_0x58f8fc(0x53b,0x608,0x51d,0x59a)](_0x2dbc7d,sdGenerate);}),window[_0x5b3aa4(0x4ee,0x48d,0x4c4,0x48e)+_0x22bf68(-0x250,-0x1cc,-0x1ed,-0x1b6)]=![],addLog(_0xbbc9d6[_0x5b3aa4(0x3a5,0x40e,0x3f1,0x3dc)]))):_0x15e1c9[_0x22bf68(-0x1c1,-0x1f4,-0x1b7,-0x1a7)+_0x22bf68(-0x1c8,-0x152,-0x1ed,-0x158)]&&(_0x5b67c0[_0x5b3aa4(0x4aa,0x3e8,0x45a,0x456)+'ener'](_0x31f2dd[_0x5b3aa4(0x3c5,0x460,0x476,0x3e7)+'MAGE_REQUE'+'ST'],_0x50cd76),_0x41c4c7[_0x22bf68(-0x24d,-0x241,-0x27a,-0x283)](_0x32cd60=>{function _0x5dadfc(_0x1b8eda,_0x3e25a4,_0x3c6f14,_0xb7c429){return _0x22bf68(_0x1b8eda-0x6e,_0xb7c429,_0x3c6f14-0x3e0,_0xb7c429-0x2a);}function _0x4e912a(_0x915945,_0x38ce41,_0x4a8630,_0x237045){return _0x22bf68(_0x915945-0x68,_0x4a8630,_0x237045-0x682,_0x237045-0x96);}_0x496036[_0x4e912a(0x4a7,0x407,0x493,0x493)+_0x4e912a(0x51d,0x47f,0x51c,0x509)](_0x32cd60,_0xf22191);}),_0x562602[_0x22bf68(-0x1ed,-0x24e,-0x1b7,-0x147)+_0x22bf68(-0x21a,-0x179,-0x1ed,-0x27b)]=![],_0xbbc9d6[_0x22bf68(-0x15c,-0x108,-0x19b,-0x1c1)](_0x39eac9,_0xbbc9d6[_0x22bf68(-0x206,-0x218,-0x269,-0x2c4)]));}
//# sourceMappingURL=http://localhost:8000/sd.js.map