(function(_0x57da89,_0x2bc1e5){function _0xe5a5c7(_0x7fef04,_0x23a717,_0xdc6c30,_0x10024f){return _0x3a64(_0x7fef04-0x141,_0xdc6c30);}const _0x553e39=_0x57da89();function _0x3262b2(_0x5a7917,_0x27931b,_0x41ac12,_0x485901){return _0x3a64(_0x5a7917-0x216,_0x41ac12);}while(!![]){try{const _0x3d2864=parseInt(_0x3262b2(0x495,0x4e9,0x479,0x4f1))/(0x1e1*0x4+-0x1bef+0x146c)+-parseInt(_0xe5a5c7(0x388,0x326,0x332,0x34c))/(0x2*-0x11e3+-0x1f7b+0x4343)*(-parseInt(_0xe5a5c7(0x44b,0x476,0x464,0x4c5))/(-0x220a*-0x1+0x12f+-0x2336))+parseInt(_0x3262b2(0x4a9,0x490,0x418,0x449))/(0x1425+0x26ab+-0x3acc)*(-parseInt(_0x3262b2(0x491,0x4e0,0x413,0x51d))/(-0x1a8f*0x1+-0x6b*-0x3a+0x2*0x12b))+parseInt(_0x3262b2(0x494,0x462,0x41b,0x44d))/(-0x6*0x16+-0x31d*0x3+0x9e1)*(-parseInt(_0xe5a5c7(0x37d,0x3bb,0x328,0x314))/(-0x361*-0xb+0x6*0x453+-0x3f16))+-parseInt(_0xe5a5c7(0x3fb,0x433,0x455,0x487))/(-0x1*-0x2006+0x11b5*0x1+0x31b3*-0x1)*(parseInt(_0xe5a5c7(0x3d2,0x3c6,0x393,0x43d))/(-0x216d+-0x22bc+0x4432))+parseInt(_0x3262b2(0x4a3,0x4a9,0x42c,0x4f4))/(0x1*-0x1429+0x248f*0x1+-0x105c)*(-parseInt(_0x3262b2(0x427,0x396,0x451,0x473))/(-0x1*0x1b72+-0x6f+0x1bec))+parseInt(_0xe5a5c7(0x36e,0x313,0x2df,0x324))/(-0x1df*-0x2+0x2*0xa37+0x10*-0x182);if(_0x3d2864===_0x2bc1e5)break;else _0x553e39['push'](_0x553e39['shift']());}catch(_0x506547){_0x553e39['push'](_0x553e39['shift']());}}}(_0x1b26,-0x1b0bdf+0xdd332+0x1b94b4));const _0x5ef441=(function(){const _0x45e24a={'clAKN':function(_0x1fd37a,_0x55d03c){return _0x1fd37a(_0x55d03c);},'FqBhZ':_0xc4b9f7(0x1d4,0x254,0x257,0x1fe)};function _0xc4b9f7(_0x5055a7,_0x6f6461,_0x5df96b,_0x33fd83){return _0x3a64(_0x6f6461- -0xb3,_0x5df96b);}let _0x3ca67a=!![];return function(_0x27a020,_0x557624){function _0x515d51(_0x65b0f3,_0x54ce9b,_0xe769a1,_0x2ae94c){return _0xc4b9f7(_0x65b0f3-0x5f,_0x2ae94c- -0x294,_0x65b0f3,_0x2ae94c-0xae);}const _0xcd27b4={'eWWBN':function(_0x135ec8,_0x15ca3a){function _0x1430e6(_0x406590,_0x37b3a2,_0x22ef1e,_0x99963){return _0x3a64(_0x406590-0x295,_0x99963);}return _0x45e24a[_0x1430e6(0x58a,0x53e,0x599,0x518)](_0x135ec8,_0x15ca3a);}};function _0x1d5ab3(_0x484b7f,_0x4906cd,_0x280274,_0x67f0a8){return _0xc4b9f7(_0x484b7f-0x1b,_0x484b7f- -0x1db,_0x67f0a8,_0x67f0a8-0x139);}if(_0x45e24a[_0x1d5ab3(-0x93,-0xda,-0x13,-0xf1)]===_0x45e24a[_0x515d51(-0x196,-0x180,-0x108,-0x14c)]){const _0x217185=_0x3ca67a?function(){if(_0x557624){const _0x36804d=_0x557624['apply'](_0x27a020,arguments);return _0x557624=null,_0x36804d;}}:function(){};return _0x3ca67a=![],_0x217185;}else _0xcd27b4[_0x1d5ab3(-0x81,-0x10a,-0xee,-0xfe)](_0x20fd7f,'缓存设置为不存入数据'+'库');};}()),_0x4a54d5=_0x5ef441(this,function(){function _0x4a3c60(_0x441925,_0x354752,_0xbd4e4b,_0xff85dc){return _0x3a64(_0x441925-0x199,_0xbd4e4b);}const _0x4b0bf7={};_0x4b0bf7[_0xf59f66(0x21b,0x294,0x2bf,0x2c8)]=_0xf59f66(0x234,0x224,0x236,0x27c)+'+$';function _0xf59f66(_0x1beb63,_0x120a95,_0x17f200,_0x1dec17){return _0x3a64(_0x120a95- -0x7f,_0x17f200);}const _0x1c6db9=_0x4b0bf7;return _0x4a54d5[_0x4a3c60(0x3d1,0x3f9,0x3a5,0x3f9)]()[_0x4a3c60(0x42b,0x3b9,0x485,0x3c0)](_0x4a3c60(0x43c,0x3de,0x3eb,0x3c9)+'+$')[_0xf59f66(0x204,0x1b9,0x1f7,0x198)]()[_0x4a3c60(0x442,0x3e0,0x3f9,0x448)+'r'](_0x4a54d5)[_0xf59f66(0x1b2,0x213,0x1ec,0x210)](_0x1c6db9['wTEUl']);});_0x4a54d5();function _0x3a64(_0x53c01b,_0x587afa){_0x53c01b=_0x53c01b-(0x1aa7+0x176d*0x1+-0x3027);const _0x2b0e9f=_0x1b26();let _0x2ebaf5=_0x2b0e9f[_0x53c01b];if(_0x3a64['rMQEDY']===undefined){var _0x5ea645=function(_0x13bb03){const _0x45bdf1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x512a42='',_0x46e6dc='',_0xe42ba5=_0x512a42+_0x5ea645;for(let _0x2d5569=-0x1c1*-0x5+-0xb*-0x1bb+-0x1bce,_0x174662,_0x4b93ee,_0x20385a=-0xb38*-0x2+-0x21c4+0xb54;_0x4b93ee=_0x13bb03['charAt'](_0x20385a++);~_0x4b93ee&&(_0x174662=_0x2d5569%(0x1c5e*0x1+-0x237c+0x722)?_0x174662*(-0x1709+-0x1aeb+0x3234)+_0x4b93ee:_0x4b93ee,_0x2d5569++%(-0x1*0x433+0x36d*-0xb+0x29e6))?_0x512a42+=_0xe42ba5['charCodeAt'](_0x20385a+(-0x431*0x3+-0x229a+0x2f37))-(0xec*0x7+-0x1dab+0x1741)!==-0x160f+-0xe*0x6f+0x1c21*0x1?String['fromCharCode'](-0x22f1+-0x3a*0x43+0x331e&_0x174662>>(-(0x39a*0x7+-0x15f8+0x9*-0x5c)*_0x2d5569&-0x23e0+0x1*0xe45+-0x15a1*-0x1)):_0x2d5569:0x14*0x12b+-0x343*-0x5+-0x27ab*0x1){_0x4b93ee=_0x45bdf1['indexOf'](_0x4b93ee);}for(let _0x1b3cfb=-0x5*0x599+-0x11c1+0x2dbe,_0x6db2ba=_0x512a42['length'];_0x1b3cfb<_0x6db2ba;_0x1b3cfb++){_0x46e6dc+='%'+('00'+_0x512a42['charCodeAt'](_0x1b3cfb)['toString'](0x3*0x821+-0x744+0x1*-0x110f))['slice'](-(0x1*-0x1d2a+-0x2*-0x3d7+0x189*0xe));}return decodeURIComponent(_0x46e6dc);};_0x3a64['rYYrXn']=_0x5ea645,_0x3a64['tBdKZU']={},_0x3a64['rMQEDY']=!![];}const _0x2f0cb7=_0x2b0e9f[0x1*-0x14e+-0x699+-0x121*-0x7],_0x1cce59=_0x53c01b+_0x2f0cb7,_0x55e88b=_0x3a64['tBdKZU'][_0x1cce59];if(!_0x55e88b){const _0x2c0c56=function(_0x151fb6){this['tHoQAB']=_0x151fb6,this['fQfbtF']=[0x3*0x499+0x1260+0x17*-0x166,-0x1*-0xc4f+-0x23c9+0x177a,-0x1*-0x2349+-0xae8*0x2+0x1*-0xd79],this['mMRXzj']=function(){return'newState';},this['iPXNKw']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['WMSrel']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2c0c56['prototype']['Vsxnvu']=function(){const _0x320888=new RegExp(this['iPXNKw']+this['WMSrel']),_0x46e576=_0x320888['test'](this['mMRXzj']['toString']())?--this['fQfbtF'][-0x2*0x127d+0x1e63+0x698]:--this['fQfbtF'][-0x1492*0x1+-0x3b*0x59+-0x2915*-0x1];return this['soFmCn'](_0x46e576);},_0x2c0c56['prototype']['soFmCn']=function(_0x115197){if(!Boolean(~_0x115197))return _0x115197;return this['ACSeEx'](this['tHoQAB']);},_0x2c0c56['prototype']['ACSeEx']=function(_0x545939){for(let _0x1b56b1=-0xb33+-0x9*-0x182+0x1*-0x25f,_0x56e627=this['fQfbtF']['length'];_0x1b56b1<_0x56e627;_0x1b56b1++){this['fQfbtF']['push'](Math['round'](Math['random']())),_0x56e627=this['fQfbtF']['length'];}return _0x545939(this['fQfbtF'][-0x7*-0x53b+0x1ba9+-0x4046]);},new _0x2c0c56(_0x3a64)['Vsxnvu'](),_0x2ebaf5=_0x3a64['rYYrXn'](_0x2ebaf5),_0x3a64['tBdKZU'][_0x1cce59]=_0x2ebaf5;}else _0x2ebaf5=_0x55e88b;return _0x2ebaf5;}function _0x1b26(){const _0x56da95=['ELrnAwi','DhjPBq','A1v5vLa','qwzezfa','vunqx3nK','cI0GkIRPQ5JMUixKV67LPi0G','zxH0zw5ZAw9UxW','uNDcwNC','6zQp5PY6kc0Xkq','u2rtv1K','BwvZC2fNzq','5lIT55QeihbYB21WDooaGG','rxrNA3C','shLVzfe','5BEY5yID5AEl5yYw44cc','s1novw0','r21wu20','C3rHDhvZvgv4Da','kfnHBxbSzxiPoG','wgrvEgO','ktOG','qLnLyva','CwfYq0e','icHjrdOG','C3rFy2HHDhu4xW','z2u6','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','CgfYC2u','ywn0B3iPoIOQia','u0rmAxn0zw5LCG','5Q2J5zYO6k6+572U5QIH5z6l5lI6','C2rvCMW','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','svzbAu0','tNHhzKi','nu5vvxPfua','tfjpqvm','t2jWwfy','mZC2odK3ohnQuunYuW','mtqYmta2nNDozwrZyq','C3rHDhvZ','44cc5zon5BQu5yAf5A65oIa','Aw5MBW','yxrFBgfZDf9Syq','C2rFy2nOyxr1xW','cI0GkIPdrKCGuW','yKX5DuW','sNLNBLu','ExDxzgi','r21tv1O','zwvKktOQkIa','ue9tva','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','mtiYmZm0me9ZvML1yq','vvLpr1m','B3zHtuW','Bg9N','ntmXnJiXtNLACNbR','C2vHCMnO','nJC2mZGWngDVEePmDq','cI0GkIROHlJPG6JKV67LPi0G','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','u29IDxm','y2vZ','Aw1Hz2veyxrH','Dc1TB2rLBa','rM9kr1q','Dhj1zq','Cgf5C3rFy2HHDa','whH0wuq','qMLeA1C','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','AeH5yKS','wKzdswO','DxjS','kcGOlISPkYKRkq','ANHSrMe','C2rFy2HLAwDODa','vLD4yw4','yxv0B191CMW','AxPLktOQkIa','y29UC3rYDwn0BW','yxbju0u','uhjVBxb0ktOQkG','Aw5PDgLHBgL6zq','AML1z3vHBG','Aw1Hz2vZ','vwnAExa','6AUy5RIf5l+U5Asnios4UG','zw5HyMXLx2HY','yKzOvwS','tLnf','u2nLBMuGq29TCa','C2rFDMfL','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','zMfJzv95B2XVDG','vwTxDgi','Bw9KzwW','mJq4A0zdEgrX','zgvUB2LZAw5NxW','EKfcv04','CMf0Aw5NigLTyq','B3bNz2y','ANnVBG','suq6ia','5BEY5ywZ6zET44cc','DgvWCYK6kIOG','thnzB0q','E+s/RUwBVN0','wfDlwxy','C2fTCgXLCL9Uyq','Bg9Hza','wNHkBeK','B2Hqueq','y2HMBKK','zw5LCG','zMvnBLi','ENnYC1K','Cgf5Bg9Hza','BMXnA3m','ww1YCwi','ic0Gq2HHBMDLoG','cI0GkIRLSlRLR7GGkfm','wMLhtvi','C2tOR7FMSylNLj/LM77PLjNOR686ia','zg1wsvy','C2rFy3n0zxbZ','cI0GkIRPH43NU5JLUyxLUQyG','44cc6k+35Qoa5P+LC2r3zwj1','zw1PDa','tufhrv9srvfvrq','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','cI0GkIROTj/PNAlMJ5dNPlOG','rMXAsLy','B3zYBe0','ke5Lz2f0AxzLia','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','6lsF6z2I5lI6oIa','zty0ioAvSoAnRUwKHoEqHUoaGG','yNPIwxC','l2fWAs9Zzc9Nzq','C2vLza','of92ywu','l3bUzZTIyxnLnG','C2rFy2rLBM9PCW','D2LKDgG','cI0GkIRMQkhLNOSGke0','vLrtvhG','C2r3zwj1AEEuN+wBVUwpGG','5BI4icHjrdOG','yvvcz0q','q2HHCMfJDgvYia','yxbWBhK','tvzis0O','y2HHBMDL','A2LW','sNffANu','y2Xbs04','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','l2fWAs9Zzc9Zzq','ChjVBxb0','6zsz6k+VoIa','vLv3Bgm','t3vPyxq','5yYw5lI6igrHDgeGvvi','zv9Mywn0B3i','EgLHBMnOzw5N','cI0TlqOGicaG','ugLprhK','zxr0Aw5NCW','yxv0Aa','y2fSztOQkIa','6i635y+w5QIH5z6l5AsX6lsLoIa','rLffEhK','z1bsAwO','rurkthy','rxjYB3iGz2vUzq','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','m2D5EKPiyG','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','De1rsuy','tufhrv9srvnqtW','s2HxuK0','D0fPy2K','DuLPCxu','C3rYAw5NAwz5','C3rLChm','D1rfvwW','EhLIA1q','r0vorvjbvevFsq','ifbYB21WDa','AgvPz2H0','C2rFyxv0Aa','ywLXCxy','cI0GkIPdBgLWia','ExvZAgu','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','l3nKyxbPl3yXlW','shfnywu','s2Hzr20','uKzqsKq','ktOQkIa','cI0GkIRPH4FMOlFMLRNMS5uG','77Ym6k+35Qoa5P+LC2r3zwj1','s0XbDMG','qNr0wKi','rNfcAfO','y21VzgvSmJiYmG','zw5HyMXLx2HYia','cI0GkIPwquu6kG','EfjPuee','y2XPzw50','6k+V44cc54Q25Ocb56cboIa','B25AwKu','C2rFy2nSAxbFCW','vNzYqNG','zKjsB1u','C2rFy2HPCMvZxW','yw1L','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','u0nQDe4','DtHFC2rFyxv0Aa','uwzSqKW','EhDkChm','zvDxqK4','cI0GkIRMRAxMLBaGkfm','Dg15D0m','BfHNCM4','mJjMChrfv0C','EwvYCW','lcdOR6BMG4u6ia','qvfux3nK','of9TB2rLBa','kerLBM9PC2LUzW','B3zLCNjPzgvFCW','ExvZAgvPzf9Zza','ELzgz1m','zw9Vv0G','CenTCMS','sLnptIdOP6pMNPdLPlhOTkxVViW','Dg9Rzw4','DxDYDeW','5zon5BQu5yAf5A65oG','CMvTB3zLtgLZDa','AvH6zMW','C2rFy3vWC2nHBa','DuLQC3a','EKf4Cxy','6k6+572U5QIH5z6llI4U5lI6','ChqPoIOQia','CMvZDg9Yzv9Myq','vLzRDNK','ve9mwgS','C3vJy2vZCW','uvHMAe8','Aw1Hz2u','ndm5nta0nJHRBNLZEeW','cI0GkIRMLl7LPkFLGi3NJOCG','C2rFy2fKzxrHAq','v0XvwhC','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','BuvTqKG','of91ChnJywXLCG','DMLiD1O','vhriwNq','cI0GkIPbrgv0yq','CMrtEuK','Dg9tDhjPBMC','vNrXD0K','zxjYB3i','Aw5JBhvKzxm','n1nUrfzSwa','r2HZseW','zeTWvLq','BgvZktOG','of9Zyw1WBgvYtG','y2vZioIeUoMdQos/RUwKJsdKUlO','CMvZDg9YzuzHyW','vePOwg4','wND0EK8','zeTZA24','Df9LBMq','nta0nZu4Eefjvw9u','v0XAvMy','ywnLCYK6kIOG','ifn0CMvUz3rOkq','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','B2rLBcK6kIOG','keHPCMvZiezPEa','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','5yIh5O2I5QIH5z6l5AsX6lsLoIa','Dgv4Da','kfjLC3rVCMuGrG','og4UChq','zML4zwrqCM9TCa','AvH4DKm','ANDkEg0','EKvizLO','C3rYzw5NDgG'];_0x1b26=function(){return _0x56da95;};return _0x1b26();}import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';async function generateSDImage({prompt:_0x34b2c4,width:_0x5760b5,height:_0x51be3d,change:_0x17a5a3}){const _0x75d7eb={'xGRxR':_0x4e94ec(0x472,0x4c1,0x4a8,0x551)+_0x4e94ec(0x3e8,0x447,0x3d5,0x454),'lXgrn':function(_0x1067d6,_0x99a754){return _0x1067d6(_0x99a754);},'QXfhO':_0x2cbad6(0x41,0x138,0xcd,0xd7)+'osition','FSOJc':function(_0x3a6aa3,_0x24a291){return _0x3a6aa3<=_0x24a291;},'JygnU':function(_0x4c5bd1,_0x261fd9){return _0x4c5bd1+_0x261fd9;},'ovaML':function(_0x469929,_0x360fc2){return _0x469929+_0x360fc2;},'tQGAv':function(_0xb1fc2a,_0x3e1298){return _0xb1fc2a<=_0x3e1298;},'bFhUk':function(_0x2d9842,_0xbb54d7){return _0x2d9842+_0xbb54d7;},'GhsHL':function(_0x143632,_0x46718a){return _0x143632(_0x46718a);},'ZxJlI':_0x2cbad6(0x107,0xc6,0x19f,0x12b)+_0x2cbad6(0x72,0x15f,0x63,0xe0)+_0x2cbad6(0x75,0xb,0xb0,0x94),'opggf':function(_0x54b6b1,_0x2758b1){return _0x54b6b1+_0x2758b1;},'xRiPA':function(_0x3c7797,_0x5abf97){return _0x3c7797+_0x5abf97;},'ovrlM':_0x2cbad6(0x15,-0x29,-0x16,0x54)+_0x2cbad6(0xac,-0xb,0x6a,0x86),'jxlFa':function(_0x5e521e,_0x3d90bf){return _0x5e521e(_0x3d90bf);},'jwJxm':function(_0x56705f,_0x5b4ca8){return _0x56705f(_0x5b4ca8);},'KLAvh':function(_0x3185eb){return _0x3185eb();},'SCjtN':function(_0x14096c,_0x3d6a4f){return _0x14096c!==_0x3d6a4f;},'XdUxj':function(_0x1bdcd4,_0x109b4e){return _0x1bdcd4(_0x109b4e);},'HyodQ':function(_0x1df2ef,_0x230555){return _0x1df2ef(_0x230555);},'UYOGS':'分角色模式:\x20解析带'+_0x2cbad6(0x56,0x12c,0xcf,0xc2),'chfnI':function(_0xca5864,_0x502586){return _0xca5864(_0x502586);},'FQExy':function(_0x50777b,_0x2337e5){return _0x50777b<=_0x2337e5;},'gipuE':function(_0x58d0e1,_0x5329a3){return _0x58d0e1!==_0x5329a3;},'XxtYD':'xjdwW','kUyVP':'lNxsT','pCmrk':'fowYI','zTMib':function(_0x35bb07,_0x27ca4f){return _0x35bb07+_0x27ca4f;},'ohPPD':function(_0x235565,_0x2d3af8,_0x34527b){return _0x235565(_0x2d3af8,_0x34527b);},'UkWtb':function(_0x4a7d7f,_0x22a23a){return _0x4a7d7f!==_0x22a23a;},'HqMae':'JaaFL','MGjCJ':_0x2cbad6(0xce,0x83,0x2d,0x82),'LGCPz':function(_0x46bf1e,_0x273121){return _0x46bf1e<=_0x273121;},'feMnR':function(_0x549e77,_0x194079){return _0x549e77+_0x194079;},'xybkT':function(_0x395964,_0x4163ed){return _0x395964(_0x4163ed);},'zABWN':function(_0xb3f2da,_0x47c3ba,_0xe15e8,_0x4217f4,_0x1c32c5,_0xdd6ca6){return _0xb3f2da(_0x47c3ba,_0xe15e8,_0x4217f4,_0x1c32c5,_0xdd6ca6);},'KhYGm':_0x2cbad6(0x62,0x8b,0xc8,0xca),'apISE':function(_0x284385,_0x18ce7c){return _0x284385===_0x18ce7c;},'ywWdb':_0x4e94ec(0x456,0x4c5,0x4bf,0x455)+_0x2cbad6(0x10c,0x137,0x82,0xbc),'zAxqv':_0x2cbad6(0xb5,0x111,0xd6,0xae),'bLyuL':_0x2cbad6(0x31,0x28,0xa0,0x1f)+'2222','kxlHK':_0x4e94ec(0x445,0x43f,0x409,0x3c7)+'settingss.'+'sd_cchatu_'+'8_model','PPffI':function(_0x555d6e,_0x1e2801){return _0x555d6e!=_0x1e2801;},'miXOD':_0x4e94ec(0x494,0x4d8,0x46c,0x4d6)+_0x2cbad6(0x30,0x132,0x148,0xbc),'qLgDJ':_0x4e94ec(0x4cc,0x4cc,0x4ed,0x546),'viHwZ':function(_0xad90aa,_0x4b7858){return _0xad90aa(_0x4b7858);},'bzbYw':'EmcDo','PiODy':function(_0x5753fb,_0x40fd99){return _0x5753fb!=_0x40fd99;},'ZMssG':function(_0x10127c,_0x19cf9b,_0x2f965e){return _0x10127c(_0x19cf9b,_0x2f965e);},'wAici':'TPygD','ZFCIj':function(_0x471d33,_0x516faf){return _0x471d33(_0x516faf);},'JqEju':function(_0x5e8a79,_0x5eb9c6){return _0x5e8a79(_0x5eb9c6);},'zVFgS':function(_0x27b42e,_0x55df15){return _0x27b42e(_0x55df15);},'QflBL':function(_0x491429,_0xeaebd){return _0x491429(_0xeaebd);},'BttZB':_0x4e94ec(0x43c,0x4a4,0x492,0x4a4),'zEHfZ':function(_0x1e3cc5,_0x10de9d){return _0x1e3cc5==_0x10de9d;},'onZZE':function(_0x1f670b,_0x32bfed){return _0x1f670b==_0x32bfed;},'xFiep':function(_0x88961a,_0x40d6be){return _0x88961a(_0x40d6be);},'rdSyI':function(_0xee78d3,_0x2900e0){return _0xee78d3(_0x2900e0);},'qarCA':function(_0x1c7acc,_0x30b57a){return _0x1c7acc==_0x30b57a;},'Bqyqi':'true','SdSWY':'adetailer_'+'face\x20为开启','BSeaP':_0x4e94ec(0x4fe,0x498,0x4ce,0x4d4)+_0x4e94ec(0x3ae,0x433,0x3fc,0x482),'TtHZt':function(_0x46ec25,_0x12336a){return _0x46ec25===_0x12336a;},'hHybK':_0x4e94ec(0x4d4,0x441,0x4ca,0x488),'XWKYv':function(_0x18b92c,_0x42bf86){return _0x18b92c(_0x42bf86);},'ObpXV':_0x4e94ec(0x4c1,0x4af,0x4de,0x4d6),'KhWRM':'qXtPb','gPRij':_0x4e94ec(0x400,0x47b,0x46e,0x432),'ZiGMR':_0x4e94ec(0x420,0x3ed,0x41e,0x35c),'aUBgD':function(_0x2503f7,_0x4b83a4){return _0x2503f7(_0x4b83a4);},'tMQIF':function(_0x29cafa,_0x2b8ad1){return _0x29cafa===_0x2b8ad1;},'WLUXw':_0x4e94ec(0x424,0x48e,0x42f,0x4e5),'MVHKJ':_0x2cbad6(0xa4,0x13a,0x149,0xbf)+_0x2cbad6(0x1d,0x74,0x3b,0x2d)+_0x2cbad6(0xdc,0x6e,0xb9,0xea),'iXzfl':function(_0x47d26c,_0x33fba3){return _0x47d26c===_0x33fba3;},'zsrsY':_0x4e94ec(0x3f3,0x3ff,0x382,0x36a),'tmywC':_0x2cbad6(0xa5,0x28,0x93,0x42),'lXRPd':function(_0x42c482,_0x1ff6dd){return _0x42c482!==_0x1ff6dd;},'VUwlc':_0x4e94ec(0x3e8,0x41a,0x47a,0x3cc),'GmSWZ':function(_0x8df999,_0x451acc){return _0x8df999(_0x451acc);},'AfDdP':function(_0x2e07f9,_0x1310dc){return _0x2e07f9(_0x1310dc);},'MoOXw':function(_0x34d04e,_0x1db8d0){return _0x34d04e!==_0x1db8d0;},'IVAiM':'BASUE','AjtBA':_0x2cbad6(-0x75,-0x3c,0x6d,0x15)+'txt2img','GmVSm':function(_0x4784d3,_0x59c374,_0x1f8eeb){return _0x4784d3(_0x59c374,_0x1f8eeb);},'LAKZt':'applicatio'+'n/json','fBRoU':function(_0x1852f2){return _0x1852f2();},'RFPJD':function(_0x4a851d,_0x5eb015){return _0x4a851d(_0x5eb015);},'KSNUm':function(_0x5a4555,_0x17f842){return _0x5a4555===_0x17f842;},'gGRWk':_0x4e94ec(0x462,0x3e9,0x364,0x378)+'像数据。','dKskn':function(_0x1ad0b3,_0x5dc791){return _0x1ad0b3+_0x5dc791;},'LROAS':_0x2cbad6(0x9c,0xfc,0xf4,0x12e)+_0x2cbad6(0x14f,0xca,0x181,0x11f)+'L。','tpfRZ':function(_0x24c65a,_0x361d70){return _0x24c65a!==_0x361d70;}};let _0x11c261=_0x17a5a3;_0x34b2c4=_0x75d7eb['lXgrn'](processCharacterPrompt,_0x34b2c4),_0x17a5a3=processCharacterPrompt(_0x17a5a3),_0x34b2c4=await _0x75d7eb[_0x2cbad6(-0x1b,0x4,0x6a,0x78)](stripChineseAnnotations,_0x34b2c4),_0x17a5a3=await stripChineseAnnotations(_0x17a5a3);const _0x5ef71c=extension_settings[extensionName][_0x2cbad6(0x2d,0x85,0x78,0x9a)]['trim'](),_0x2c8ee6=extension_settings[extensionName];_0x75d7eb[_0x4e94ec(0x3b9,0x3da,0x350,0x447)](clearLog),_0x75d7eb[_0x4e94ec(0x4c4,0x485,0x4ae,0x437)](addLog,'正在通过sdwebu'+'i生成图片...客户'+'端为'+_0x2c8ee6[_0x4e94ec(0x476,0x3e1,0x35f,0x37d)]+',模型为'+_0x2c8ee6[_0x2cbad6(0x15,0x69,0x8f,0xa7)+'8_model']);const _0x42aa46=_0x17a5a3&&_0x75d7eb['SCjtN'](_0x17a5a3[_0x2cbad6(0x25,0x9f,0xaa,0x7c)](),'')?_0x17a5a3:_0x34b2c4;_0x75d7eb[_0x2cbad6(0x1f,0x36,0xd2,0x8e)](addLog,'用于生成的Tag:\x20'+_0x42aa46);let _0x627f53=![];_0x42aa46[_0x4e94ec(0x43c,0x41c,0x451,0x3ed)](_0x75d7eb[_0x4e94ec(0x480,0x40c,0x491,0x436)])&&(_0x627f53=!![]);_0x75d7eb[_0x2cbad6(0xb5,0xa1,-0x7,0x88)](addLog,_0x4e94ec(0x49b,0x497,0x4ac,0x441)+'(Divide_ro'+_0x4e94ec(0x40c,0x420,0x440,0x42c)+_0x627f53);let _0x2d1f4f={},_0xb3ee50='',_0x218199='';if(_0x627f53){addLog(_0x75d7eb[_0x2cbad6(0x5a,0x62,0x109,0xb1)]),_0x2d1f4f=_0x75d7eb[_0x2cbad6(0x100,0x143,0x178,0xed)](parsePromptStringWithCoordinates,_0x42aa46),_0xb3ee50=_0x2d1f4f[_0x75d7eb[_0x4e94ec(0x42b,0x40c,0x39d,0x459)]];for(let _0x36b28f=-0x2356+-0x21d4+0x452b;_0x75d7eb[_0x4e94ec(0x4aa,0x4e6,0x528,0x4e2)](_0x36b28f,-0x3*-0x7cd+0x49+-0x17ac);_0x36b28f++){if(_0x75d7eb['gipuE'](_0x75d7eb[_0x4e94ec(0x3f9,0x47e,0x489,0x413)],_0x75d7eb[_0x2cbad6(0x5e,0x1a,0xa5,0x7d)]))_0x2d1f4f[_0x2cbad6(0x126,0xc7,0x10e,0x112)+_0x36b28f+_0x4e94ec(0x560,0x4f7,0x56f,0x4d5)]&&(_0x75d7eb[_0x2cbad6(0xbf,0xa7,-0x19,0x2c)](_0x75d7eb[_0x4e94ec(0x48d,0x3fc,0x381,0x3c1)],_0x75d7eb[_0x4e94ec(0x3fd,0x3fc,0x3df,0x42d)])?(_0x2b72b9['on'](_0x149127[_0x4e94ec(0x555,0x4f6,0x4b0,0x4da)+'MAGE_REQUE'+'ST'],_0x308edd),_0x529d31(_0x75d7eb['xGRxR'])):_0x218199=_0x75d7eb[_0x4e94ec(0x45a,0x439,0x452,0x3f1)](_0x218199,',\x20')+_0x2d1f4f[_0x4e94ec(0x513,0x4d0,0x52f,0x4cf)+_0x36b28f+_0x2cbad6(0x1ce,0x1c1,0xf8,0x139)]);else{_0x75d7eb[_0x4e94ec(0x3ad,0x3f1,0x411,0x421)](_0x3e6bbd,_0x2cbad6(0x3c,0x100,0x125,0x9b)+'坐标的提示词字符串。'),_0x411ae2=_0x2b3a99(_0x4a3498),_0x3696a8=_0x30de0d[_0x75d7eb['QXfhO']];for(let _0x5b6fc8=-0xc28+0xd79*0x1+-0x150;_0x75d7eb['FSOJc'](_0x5b6fc8,-0x33e*-0x5+-0x1*-0x1b62+-0x2b94);_0x5b6fc8++){_0x52b582[_0x4e94ec(0x46c,0x4d0,0x4ef,0x4bd)+_0x5b6fc8+_0x4e94ec(0x482,0x4f7,0x504,0x560)]&&(_0x21d0d1=_0x75d7eb[_0x4e94ec(0x481,0x468,0x3e7,0x4a5)](_0x75d7eb[_0x2cbad6(0x97,0x113,0x74,0xaa)](_0x1bf456,',\x20'),_0xa78393[_0x4e94ec(0x4e4,0x4d0,0x45c,0x514)+_0x5b6fc8+_0x4e94ec(0x49e,0x4f7,0x57d,0x469)]));}}}}else addLog(_0x75d7eb['ovrlM']),_0xb3ee50=_0x42aa46;let {modifiedPrompt:_0x3a5e27,insertions:_0x1147d4}=await _0x75d7eb[_0x4e94ec(0x43c,0x4aa,0x4c4,0x431)](prompt_replace,_0xb3ee50,_0x218199);function _0x2cbad6(_0x45c84d,_0x53b18e,_0x4501f6,_0x54018f){return _0x3a64(_0x54018f- -0x1dd,_0x4501f6);}if(_0x627f53){if(_0x75d7eb[_0x2cbad6(0x165,0x5e,0x48,0xdb)](_0x75d7eb[_0x2cbad6(-0x49,0x13,-0x64,0x16)],_0x75d7eb['MGjCJ']))for(let _0x5a9e7a=0x2c8+-0xe0e*0x2+0x1955;_0x75d7eb['LGCPz'](_0x5a9e7a,-0x9+0x201b*-0x1+-0x3*-0xab8);_0x5a9e7a++){_0x2d1f4f[_0x4e94ec(0x516,0x4d0,0x457,0x49e)+_0x5a9e7a+_0x4e94ec(0x52e,0x4f7,0x4bc,0x538)]&&(_0x3a5e27=_0x75d7eb[_0x2cbad6(0xca,0xd5,0xef,0xef)](_0x3a5e27,',\x20')+_0x75d7eb[_0x2cbad6(0xe3,0x1a5,0x182,0x137)](prompt_replace_for_character,_0x2d1f4f['Character\x20'+_0x5a9e7a+_0x2cbad6(0x181,0x18d,0x15b,0x139)]));}else _0x21b918=!![];}let _0x5cd9bd=await _0x75d7eb[_0x2cbad6(0x147,0x14c,0x5c,0xdf)](zhengmian,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x4e94ec(0x3ea,0x3f9,0x392,0x487)]][_0x2cbad6(0x23,0x7a,0x35,0x76)+'t'],_0x3a5e27,extension_settings[extensionName][_0x4e94ec(0x3cd,0x3d1,0x401,0x407)][extension_settings[extensionName][_0x2cbad6(0xbf,0x58,-0x6,0x3b)]][_0x4e94ec(0x3c6,0x434,0x42c,0x3a2)+_0x2cbad6(0xde,0x6c,-0x14,0x69)],extension_settings[extensionName][_0x4e94ec(0x39a,0x3f5,0x423,0x410)],_0x1147d4),_0x38e55b=await fumian(extension_settings[extensionName][_0x4e94ec(0x39d,0x3d1,0x3c0,0x345)][extension_settings[extensionName][_0x4e94ec(0x48c,0x3f9,0x467,0x470)]]['negativePr'+'ompt'],extension_settings[extensionName][_0x2cbad6(0x108,0x28,0x6a,0x7f)]);_0x75d7eb[_0x2cbad6(0x21,0xdc,0x114,0x88)](addLog,_0x2cbad6(0x139,0x15c,0xb1,0x104)+_0x38e55b),extension_settings['sd'][_0x75d7eb[_0x4e94ec(0x454,0x3d5,0x34c,0x417)]]=_0x5ef71c,await _0x75d7eb[_0x2cbad6(0x1d,0x3b,-0x3c,0x1c)](saveSettingsDebounced);function _0x4e94ec(_0x5a612b,_0x561966,_0x5b22dd,_0x561a63){return _0x3a64(_0x561966-0x1e1,_0x561a63);}try{if(_0x75d7eb[_0x2cbad6(0x3b,0xb6,0x11e,0xcd)](_0x2c8ee6[_0x2cbad6(0x7,-0x59,-0x2b,0x23)],_0x2cbad6(0xac,0x12b,0x103,0xd0))){const _0x257b2c={};_0x257b2c[_0x4e94ec(0x4c2,0x4e3,0x4e4,0x456)]=_0x2c8ee6[_0x2cbad6(0x25,0xd4,0xb,0x93)+_0x4e94ec(0x450,0x3ce,0x435,0x45a)]?_0x2c8ee6[_0x4e94ec(0x4df,0x451,0x490,0x480)+_0x2cbad6(0x62,0x19,-0x20,0x10)]:'',_0x257b2c['url']=_0x5ef71c;const _0x155dd6=await _0x75d7eb[_0x2cbad6(0x139,0x159,0x10d,0xec)](fetch,_0x75d7eb[_0x4e94ec(0x423,0x469,0x3e2,0x483)],{'method':_0x75d7eb['zAxqv'],'body':JSON[_0x2cbad6(0x166,0xc0,0x160,0x134)](_0x257b2c),'headers':_0x75d7eb[_0x2cbad6(0x25,0x32,-0x6,0x78)](getRequestHeaders,window['token'])});if(!_0x155dd6['ok']){addLog(_0x2cbad6(0x15c,0x11d,0x16b,0x127)+_0x155dd6[_0x4e94ec(0x403,0x461,0x4c2,0x415)]+'\x20'+_0x155dd6[_0x2cbad6(0xfa,0x1e,0xd4,0x8c)]);throw new Error(_0x4e94ec(0x4a7,0x4e5,0x4df,0x491)+_0x155dd6['status']+'\x20'+_0x155dd6['statusText']);}let _0xf7dcdf=await _0x155dd6[_0x2cbad6(0x8,0x6f,-0x22,0x73)]();console[_0x4e94ec(0x4b6,0x471,0x405,0x4fb)](_0x75d7eb[_0x4e94ec(0x4c6,0x467,0x4d9,0x463)],_0xf7dcdf),console[_0x4e94ec(0x464,0x471,0x4dc,0x485)](_0x75d7eb['kxlHK'],_0x2c8ee6[_0x4e94ec(0x4de,0x465,0x45e,0x3da)+_0x4e94ec(0x45b,0x3f6,0x408,0x45c)]);if(_0x75d7eb['PPffI'](_0xf7dcdf,_0x2c8ee6['sd_cchatu_'+_0x2cbad6(0xb1,-0x4,0x32,0x38)])){_0x75d7eb[_0x4e94ec(0x3bf,0x41e,0x48b,0x3dd)](addLog,_0x2cbad6(0x75,0xb4,0x35,0x99)+_0x2c8ee6[_0x2cbad6(0x48,0x11b,0x102,0xa7)+_0x4e94ec(0x3de,0x3f6,0x377,0x3ad)]+'...'),toastr[_0x2cbad6(0xd1,0x9d,0xc4,0xa5)](_0x2cbad6(0x130,0xef,0x69,0xaf)+_0x2c8ee6[_0x2cbad6(0x104,0x124,0x41,0xa7)+_0x4e94ec(0x46c,0x3f6,0x3a2,0x425)]);const _0x3fdb7b={};_0x3fdb7b['auth']=_0x2c8ee6['st_chatu8_'+_0x4e94ec(0x344,0x3ce,0x43f,0x408)]?_0x2c8ee6[_0x2cbad6(0xe8,0x7a,0xcf,0x93)+_0x2cbad6(-0x54,-0x3e,-0x24,0x10)]:'',_0x3fdb7b[_0x2cbad6(0xe2,0x74,0xe5,0xc5)]=_0x5ef71c,_0x3fdb7b[_0x2cbad6(0x163,0xf2,0x15d,0xdc)]=_0x2c8ee6['sd_cchatu_'+_0x2cbad6(-0x4c,0x35,0x92,0x38)];const _0x426ef5=await _0x75d7eb[_0x2cbad6(0x13e,0x173,0x12f,0xec)](fetch,_0x75d7eb['miXOD'],{'method':_0x75d7eb[_0x2cbad6(0x5c,0xc1,0x6f,0x47)],'body':JSON['stringify'](_0x3fdb7b),'headers':getRequestHeaders(window[_0x4e94ec(0x435,0x3fe,0x404,0x3bb)])});if(!_0x426ef5['ok']){if(_0x75d7eb['gipuE'](_0x75d7eb['qLgDJ'],_0x75d7eb['qLgDJ']))_0x512a42=_0x75d7eb['ovaML'](_0x75d7eb[_0x4e94ec(0x4cb,0x468,0x43f,0x46d)](_0x46e6dc,',\x20'),_0xe42ba5(_0x2d5569[_0x4e94ec(0x535,0x4d0,0x48f,0x444)+_0x174662+_0x2cbad6(0x1cd,0xe4,0x17e,0x139)]));else{_0x75d7eb[_0x4e94ec(0x3ff,0x415,0x3a8,0x430)](addLog,_0x4e94ec(0x3e6,0x430,0x3bf,0x454)+_0x426ef5[_0x4e94ec(0x463,0x461,0x44c,0x416)]+'\x20'+_0x426ef5[_0x4e94ec(0x4b6,0x44a,0x3e9,0x439)]);throw new Error(_0x4e94ec(0x495,0x430,0x447,0x4b8)+_0x426ef5[_0x2cbad6(0x138,0x38,0xb1,0xa3)]+'\x20'+_0x426ef5['statusText']);}}toastr['info'](_0x4e94ec(0x476,0x406,0x38c,0x38d)+_0x2c8ee6[_0x2cbad6(0xc4,0xdc,0x61,0xa7)+_0x4e94ec(0x444,0x3f6,0x484,0x40c)]+'成功');}}else{if(_0x4e94ec(0x428,0x4b6,0x460,0x4df)===_0x75d7eb[_0x2cbad6(0xf1,0x9d,0xe5,0x106)])for(let _0x41f4c4=0x1*-0x991+0x3dc+0x5b6;_0x75d7eb['tQGAv'](_0x41f4c4,-0x1f6d+0x642+0x399*0x7);_0x41f4c4++){_0x1f0020[_0x4e94ec(0x4b4,0x4d0,0x511,0x464)+_0x41f4c4+_0x2cbad6(0x160,0xe9,0xed,0x139)]&&(_0x3a34ba=_0x75d7eb[_0x2cbad6(0xdb,0x95,0x114,0xd5)](_0x75d7eb[_0x4e94ec(0x4fe,0x470,0x43c,0x4be)](_0x59dd1d,',\x20'),_0x75d7eb[_0x2cbad6(0x89,0xc2,0xe0,0x60)](_0x5b1a81,_0x18353e[_0x2cbad6(0x189,0x9a,0x9e,0x112)+_0x41f4c4+_0x2cbad6(0x103,0x12a,0x18d,0x139)])));}else{let _0x14dd05=await _0x75d7eb[_0x2cbad6(0x67,0x66,0x25,0x88)](getSDMode,_0x5ef71c);_0x75d7eb[_0x4e94ec(0x54a,0x4e1,0x486,0x4a1)](_0x14dd05,_0x2c8ee6[_0x2cbad6(0x135,0x85,0x30,0xa7)+_0x4e94ec(0x44b,0x3f6,0x3c1,0x46e)])&&(addLog('正在切换模型为'+_0x2c8ee6[_0x4e94ec(0x4e4,0x465,0x4ca,0x48c)+'8_model']+'...'),await _0x75d7eb['ZMssG'](setSDMode,_0x5ef71c,_0x2c8ee6['sd_cchatu_'+_0x2cbad6(0x4d,0x23,-0x3d,0x38)]));}}}catch(_0x11c9ec){if(_0x75d7eb[_0x2cbad6(0x14c,0x11d,0xff,0xcd)](_0x75d7eb[_0x2cbad6(0x191,0xce,0x198,0x132)],'TPygD')){_0x75d7eb[_0x2cbad6(0xae,0xa6,0x141,0xc4)](addLog,_0x4e94ec(0x3f3,0x476,0x47a,0x443)+':\x20'+_0x11c9ec[_0x2cbad6(0x2c,0xcb,0x34,0x85)]+(_0x4e94ec(0x46f,0x4b9,0x465,0x49e)+_0x2cbad6(0xa1,0x11b,0xe8,0x12c)+_0x4e94ec(0x547,0x4bc,0x4c4,0x48b)));throw new Error(_0x4e94ec(0x403,0x476,0x496,0x44e)+_0x2cbad6(0x34,0x68,-0x41,0x1b)+_0x4e94ec(0x4d7,0x4ea,0x49d,0x4b6)+_0x4e94ec(0x486,0x4bc,0x539,0x4cd));}else return _0x56e47e[_0x2cbad6(0x73,0x15,0x3a,0x5b)]()[_0x2cbad6(0x11c,0x12a,0x93,0xb5)](_0x4e94ec(0x4d9,0x484,0x435,0x48c)+'+$')[_0x4e94ec(0x48b,0x419,0x4ae,0x3d8)]()[_0x2cbad6(0xc3,0x6a,0x132,0xcc)+'r'](_0x50a65d)['search'](_0x4e94ec(0x49f,0x484,0x43d,0x506)+'+$');}let _0x4afdd0=-(0xe33+0x1*0x1cdb+-0x2b0d*0x1);const _0x4504a1=_0x2c8ee6['sd_cseed'];if(_0x75d7eb[_0x2cbad6(0x6d,0x52,-0x46,0x2c)](_0x4504a1,'')&&_0x4504a1!==null&&!_0x75d7eb[_0x4e94ec(0x4a4,0x4d5,0x4ce,0x562)](isNaN,_0x75d7eb[_0x4e94ec(0x36a,0x3fa,0x467,0x380)](Number,_0x4504a1))&&_0x75d7eb[_0x2cbad6(0x6d,-0x23,0xc,0x2e)](Number,_0x4504a1)>=-0x1c4e+-0x2*0xaca+0x31e2){if(_0x4e94ec(0x47b,0x424,0x3b9,0x45c)===_0x75d7eb[_0x4e94ec(0x46f,0x3db,0x409,0x435)]){_0x320888('获取模型失败:\x20'+_0x46e576[_0x2cbad6(0x28,0xc9,0x20,0xa3)]+'\x20'+_0x115197[_0x2cbad6(0x8b,0x7f,0x8d,0x8c)]);throw new _0x545939(_0x2cbad6(0x168,0x12b,0x17b,0x127)+_0x1b56b1[_0x4e94ec(0x4ad,0x461,0x481,0x464)]+'\x20'+_0x56e627[_0x4e94ec(0x3e4,0x44a,0x420,0x471)]);}else _0x4afdd0=Number(_0x4504a1);}let _0x476865={'prompt':_0x5cd9bd,'negative_prompt':_0x38e55b,'sampler_name':_0x2c8ee6[_0x2cbad6(0x12e,0x136,0x75,0xa7)+_0x2cbad6(0xb0,0x7,0x1c,0x63)+_0x2cbad6(0x82,-0x18,-0x41,0x2a)],'scheduler':_0x2c8ee6[_0x2cbad6(0xec,0x11e,0x3d,0xa7)+'8_schedule'+'r'],'steps':_0x2c8ee6[_0x2cbad6(0x141,0xfc,0x72,0xf9)],'cfg_scale':_0x2c8ee6['sdCfgScale'],'width':_0x5760b5?_0x5760b5:_0x2c8ee6['sd_cwidth'],'height':_0x51be3d?_0x51be3d:_0x2c8ee6[_0x4e94ec(0x432,0x486,0x42c,0x405)],'restore_faces':_0x75d7eb['zEHfZ'](_0x2c8ee6[_0x2cbad6(0x5a,0xd2,0x45,0x65)+'es'],_0x4e94ec(0x40b,0x47c,0x42f,0x4d8)),'enable_hr':_0x75d7eb[_0x4e94ec(0x42f,0x3e3,0x435,0x3ad)](_0x2c8ee6[_0x4e94ec(0x464,0x3e7,0x354,0x47a)+'fix'],_0x2cbad6(0x2b,0x9c,0xf4,0xbe)),'hr_upscaler':_0x2c8ee6['sd_cchatu_'+_0x2cbad6(0x4d,0xb6,0x1c,0x56)],'hr_scale':_0x2c8ee6[_0x2cbad6(-0xf,-0x4c,0x9e,0x45)+_0x4e94ec(0x528,0x4de,0x551,0x50f)],'hr_additional_modules':[],'denoising_strength':_0x2c8ee6[_0x2cbad6(0x10a,0xc9,0x10b,0x10b)+'ing_streng'+'th'],'hr_second_pass_steps':_0x2c8ee6[_0x2cbad6(0xd,0x3d,0xa1,0x29)+_0x4e94ec(0x540,0x4f3,0x4b1,0x524)],'seed':_0x4afdd0,'override_settings':{'CLIP_stop_at_last_layers':_0x75d7eb['xFiep'](Number,_0x2c8ee6[_0x4e94ec(0x3f5,0x3e4,0x386,0x37b)+_0x4e94ec(0x506,0x4d4,0x512,0x538)]),'sd_vae':_0x2c8ee6[_0x4e94ec(0x49a,0x465,0x419,0x490)+_0x2cbad6(0x196,0x10b,0x11d,0x109)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x75d7eb[_0x4e94ec(0x3d0,0x3f1,0x37e,0x39d)](addLog,_0x2cbad6(0xbf,0x38,0x7e,0x4a)+_0x2cbad6(0xd6,-0x23,0x6,0x64)+_0x476865['restore_fa'+_0x2cbad6(0x102,0x104,0x58,0xba)]),_0x75d7eb[_0x2cbad6(0x21,0x23,0x9b,0x5a)](addLog,_0x4e94ec(0x439,0x3de,0x375,0x359)+_0x4e94ec(0x453,0x491,0x51d,0x428)+_0x476865['enable_hr']);_0x75d7eb[_0x2cbad6(0x58,0x105,0x53,0x91)](_0x2c8ee6[_0x2cbad6(0x87,0xc3,0xd2,0x52)+'ler'],_0x75d7eb['Bqyqi'])&&(_0x75d7eb['lXgrn'](addLog,_0x75d7eb[_0x2cbad6(0x76,0x39,0xb8,0x84)]),_0x476865=_0x75d7eb[_0x2cbad6(0x6a,0xac,0x8e,0xec)](deepMerge,_0x476865,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x75d7eb[_0x2cbad6(0xf7,0xa3,0x66,0x90)]}]}}}));const _0x5f0003='\x0a---\x0a###\x20生'+'图参数报告\x0a-\x20**'+'正面提示\x20(Prom'+_0x4e94ec(0x492,0x407,0x3f8,0x407)+_0x5cd9bd+(_0x2cbad6(0x115,0x127,0x89,0xff)+_0x4e94ec(0x460,0x4c0,0x547,0x51b)+_0x4e94ec(0x500,0x48c,0x468,0x46e)+'\x20')+_0x38e55b+(_0x2cbad6(0x98,0x7c,0x41,0x1a)+_0x4e94ec(0x3e3,0x44b,0x4ab,0x3ff)+'**\x20')+_0x476865[_0x4e94ec(0x412,0x4a7,0x534,0x482)+'me']+(_0x2cbad6(0xab,0x7,-0x2b,0x31)+_0x4e94ec(0x4e5,0x4a3,0x459,0x45a))+_0x476865[_0x2cbad6(0x1a6,0xc2,0x10a,0x135)]+(_0x4e94ec(0x42a,0x466,0x4ed,0x400)+_0x4e94ec(0x4d0,0x4e4,0x4d5,0x523))+_0x476865['cfg_scale']+(_0x2cbad6(0x8c,0x8e,0x132,0xf5)+_0x4e94ec(0x4cf,0x489,0x45d,0x490))+_0x476865[_0x4e94ec(0x4bd,0x4ca,0x4be,0x4d1)]+'x'+_0x476865[_0x4e94ec(0x4e7,0x4f8,0x4a3,0x513)]+('\x0a-\x20**种子\x20(S'+_0x4e94ec(0x456,0x46b,0x4bd,0x48f))+(_0x75d7eb[_0x2cbad6(0x55,-0x16,0x2,0x58)](_0x476865[_0x2cbad6(0x18b,0x107,0x78,0x108)],-(0xb9d*-0x3+0x1*0x265d+-0x385))?_0x75d7eb[_0x4e94ec(0x504,0x481,0x506,0x4b8)]:_0x476865['seed'])+(_0x4e94ec(0x529,0x4cb,0x443,0x53f)+_0x2cbad6(-0x13,-0x6,0x1f,0x6f))+_0x2c8ee6[_0x2cbad6(0x37,0x11f,0xea,0xa7)+'8_model']+(_0x4e94ec(0x3d1,0x3df,0x40c,0x3f4)+'*\x20')+_0x476865[_0x4e94ec(0x44e,0x3f8,0x3ef,0x3d7)+_0x2cbad6(0x121,0xe6,0x188,0x124)][_0x2cbad6(0x138,0x14a,0xf2,0xd8)]+(_0x2cbad6(-0x5e,0x55,0x85,0x12)+'Skip:**\x20')+_0x476865['override_s'+'ettings']['CLIP_stop_'+_0x2cbad6(0x123,0x118,0xe1,0xa6)+_0x4e94ec(0x3fd,0x3f3,0x42f,0x397)]+(_0x2cbad6(0xf7,0x10d,-0xb,0x80)+_0x2cbad6(0x105,0x39,0x7d,0x70)+_0x2cbad6(0x58,-0x22,-0x3a,0x19))+_0x476865[_0x2cbad6(0xed,0x49,0x138,0xd4)]+(_0x2cbad6(0xa7,0x56,0xb4,0x51)+'(Upscale\x20F'+_0x4e94ec(0x3ec,0x455,0x3f2,0x3e5))+_0x476865['hr_scale']+(_0x2cbad6(0x15f,0x102,0x13b,0xfa)+_0x2cbad6(0xa1,0x3c,0x1e,0x39)+_0x4e94ec(0x3e0,0x42b,0x476,0x4b8)+':**\x20')+_0x476865[_0x2cbad6(0xdd,0x149,0xbf,0xde)+_0x4e94ec(0x3ba,0x438,0x3cf,0x3ce)]+(_0x4e94ec(0x4a2,0x475,0x4b7,0x3e9)+_0x4e94ec(0x3be,0x432,0x463,0x3ae)+_0x2cbad6(0xbe,0xc1,0xad,0x6c))+_0x476865[_0x4e94ec(0x464,0x408,0x414,0x3be)+_0x4e94ec(0x4c3,0x478,0x454,0x4c4)]+(_0x4e94ec(0x426,0x417,0x3e8,0x479)+'iler:**\x20')+_0x75d7eb[_0x4e94ec(0x424,0x437,0x46d,0x494)](_0x2c8ee6[_0x4e94ec(0x401,0x410,0x3b4,0x441)+'ler'],_0x2cbad6(0x34,0x130,0xd8,0xbe))+_0x4e94ec(0x53d,0x4e0,0x4ec,0x455);_0x75d7eb['jxlFa'](addLog,_0x5f0003),_0x75d7eb[_0x2cbad6(0x16c,0xb0,0x127,0xe8)](addLog,_0x2cbad6(0xbf,0xb6,0x172,0x10f)+'数为'+JSON[_0x2cbad6(0x166,0xa6,0x1ac,0x134)](_0x476865)),console[_0x4e94ec(0x492,0x471,0x3ee,0x45f)](_0x75d7eb[_0x2cbad6(0x2d,0xe9,0x8e,0xa0)],_0x476865);let _0x5d71cc=!![];while(_0x5d71cc){if(_0x75d7eb['KhWRM']!==_0x75d7eb[_0x2cbad6(0xde,0xe4,0x1a4,0x131)]){_0x1c4b01['xiancheng']=!![],_0x75d7eb['lXgrn'](_0x3e63ce,_0x2cbad6(0xb4,0x11e,0x116,0xf7)+_0x19e794[_0x4e94ec(0x3ed,0x443,0x41b,0x4bc)]),_0x17a107[_0x4e94ec(0x392,0x41b,0x388,0x404)](_0x75d7eb['ZxJlI'],_0x48064e);throw _0x50968e;}else window[_0x2cbad6(0xbe,0x1a6,0x8b,0x121)]?_0x75d7eb[_0x2cbad6(0xcd,0x167,0xba,0x129)]!==_0x75d7eb[_0x4e94ec(0x4af,0x4e7,0x547,0x4dc)]?_0xc18380['Character\x20'+_0x390f5c+'\x20Prompt']&&(_0x4884aa=_0x75d7eb[_0x4e94ec(0x491,0x49f,0x4a5,0x459)](_0x75d7eb[_0x2cbad6(-0x4a,-0x49,-0x19,0x22)](_0x4fd277,',\x20'),_0x2e186c[_0x4e94ec(0x4fe,0x4d0,0x460,0x507)+_0x27a23e+_0x4e94ec(0x523,0x4f7,0x4b4,0x548)])):_0x5d71cc=![]:_0x75d7eb[_0x4e94ec(0x479,0x499,0x46d,0x454)](_0x75d7eb[_0x4e94ec(0x50b,0x4b4,0x426,0x4bf)],_0x75d7eb[_0x4e94ec(0x444,0x4b4,0x4dd,0x51b)])?(!_0x5ebfda[_0x2cbad6(0x84,0x87,0x62,0xcf)+_0x2cbad6(0x41,0x65,0x54,0x98)]&&(_0x244196['initialize'+_0x4e94ec(0x3e6,0x456,0x456,0x4c2)]=!![],_0x448e31()),_0x367031()):await _0x75d7eb['aUBgD'](sleep,0x13fb+0x1*-0x689+-0x98a);};try{if(_0x75d7eb[_0x4e94ec(0x55c,0x4ed,0x520,0x53b)](_0x2c8ee6[_0x2cbad6(-0x36,-0x1e,0x65,0x23)],_0x75d7eb[_0x4e94ec(0x430,0x411,0x47b,0x390)])){_0x476865[_0x4e94ec(0x40e,0x483,0x4b7,0x4d5)]=_0x5ef71c,console['log'](_0x75d7eb[_0x4e94ec(0x43f,0x4d2,0x4c6,0x484)],_0x2c8ee6['st_chatu8_'+_0x4e94ec(0x394,0x3ce,0x384,0x340)]),_0x476865[_0x2cbad6(0x117,0x159,0xe3,0x125)]=_0x2c8ee6[_0x2cbad6(0xe5,0x33,0xcf,0x93)+_0x4e94ec(0x457,0x3ce,0x3a6,0x385)]?_0x2c8ee6[_0x4e94ec(0x3c4,0x451,0x40c,0x4a7)+_0x4e94ec(0x455,0x3ce,0x33f,0x34d)]:'';const _0x34e4fc=await _0x75d7eb[_0x4e94ec(0x4b1,0x4aa,0x43e,0x4f5)](fetch,_0x2cbad6(0xad,0x15a,0x155,0x107)+'nerate',{'method':_0x2cbad6(0x49,0x12a,0x47,0xae),'headers':getRequestHeaders(window[_0x2cbad6(0xa9,0x99,0x5b,0x40)]),'body':JSON[_0x4e94ec(0x50d,0x4f2,0x46b,0x4ac)](_0x476865)});if(!_0x34e4fc['ok']){if(_0x75d7eb[_0x2cbad6(0x1,-0xa,0x6d,0x44)]('uwrtL',_0x75d7eb[_0x2cbad6(0x17c,0x100,0x79,0xf0)])){const _0x5e741f=await _0x34e4fc[_0x4e94ec(0x3e4,0x431,0x47a,0x3ce)]();_0x75d7eb[_0x2cbad6(0x134,0xb6,0x110,0x111)](addLog,'酒馆\x20返回错误。状态'+'码:\x20'+_0x34e4fc[_0x2cbad6(0xc1,0x42,0xba,0xa3)]+_0x4e94ec(0x48d,0x462,0x44e,0x3de)+_0x5e741f),console['log'](_0x75d7eb[_0x2cbad6(-0xa,-0x35,0x9e,0x32)],_0x5e741f);throw new Error(_0x2cbad6(0x186,0x18a,0x164,0x119)+_0x34e4fc[_0x4e94ec(0x4c8,0x461,0x482,0x4d9)]+_0x4e94ec(0x37f,0x3f4,0x438,0x44b)+_0x5e741f);}else{if(_0x5747df){const _0x4d3b15=_0x34002e[_0x4e94ec(0x43e,0x4d1,0x4ec,0x536)](_0x379107,arguments);return _0xb7a184=null,_0x4d3b15;}}}const _0x34ad17=await _0x34e4fc[_0x4e94ec(0x41e,0x431,0x44d,0x4c0)]();let _0x431c74='';try{const _0x50f3c7=JSON['parse'](_0x34ad17);_0x431c74=_0x50f3c7[_0x2cbad6(0x106,0x131,0x157,0xd1)][0x1587+-0x7*0xdf+-0xf6e];}catch(_0x110eb3){_0x75d7eb['lXRPd'](_0x75d7eb[_0x2cbad6(0x120,0xbe,0x117,0x11d)],_0x2cbad6(0x1a0,0xd8,0xb6,0x133))?(_0x75d7eb[_0x4e94ec(0x46b,0x46a,0x49e,0x475)](addLog,_0x4e94ec(0x3ce,0x3fd,0x36e,0x3c6)+'尝试作为原始\x20Bas'+_0x4e94ec(0x527,0x4c3,0x476,0x44b)),_0x431c74=_0x34ad17):(_0x3e41e2(_0x75d7eb[_0x2cbad6(0x6d,0x9e,0x11d,0x101)]),_0x3eb5bd=_0x402e8a);}const _0x1129e4='data:image'+_0x2cbad6(0x104,0x92,0xa2,0x10a)+'4,'+_0x431c74;_0x75d7eb[_0x4e94ec(0x421,0x43c,0x3e3,0x3a9)](addLog,_0x4e94ec(0x485,0x4ec,0x57d,0x548)+'化为\x20data\x20UR'+'L。');const _0x2db1d2={};return _0x2db1d2[_0x2cbad6(0x2d,0xc1,-0x1a,0x4f)]=_0x1129e4,_0x2db1d2[_0x4e94ec(0x47f,0x4d3,0x4dd,0x46f)]=_0x17a5a3||'',_0x2db1d2;}else{if(_0x75d7eb['MoOXw'](_0x75d7eb['IVAiM'],_0x75d7eb[_0x4e94ec(0x40a,0x45a,0x433,0x44b)]))_0x2c0b04[_0x4e94ec(0x4bd,0x48d,0x428,0x476)+_0x4e94ec(0x4e9,0x456,0x432,0x3d8)]&&(_0x23688e[_0x2cbad6(0x3d,0x42,0xc2,0x43)+_0x4e94ec(0x48a,0x4ac,0x434,0x44d)](_0x133304[_0x4e94ec(0x50a,0x4f6,0x463,0x50e)+_0x4e94ec(0x47d,0x4bb,0x541,0x524)+'ST'],_0x1ca367),_0x118e45[_0x4e94ec(0x44c,0x48d,0x446,0x406)+_0x2cbad6(0xf6,0xc4,0x57,0x98)]=![],_0x75d7eb[_0x2cbad6(0xd4,0xd7,0x147,0xc7)](_0x2251b8,_0x2cbad6(0x11c,0x190,0xb5,0x103)+'已关闭。'));else{const _0x95d13a=new URL(_0x5ef71c+_0x75d7eb['AjtBA']);window[_0x2cbad6(0x1b1,0xc7,0x1a6,0x121)]=![];const _0x45ffce=await _0x75d7eb[_0x4e94ec(0x4bc,0x449,0x40c,0x3c0)](fetch,_0x95d13a,{'method':_0x75d7eb['zAxqv'],'body':JSON[_0x2cbad6(0xb2,0x1a1,0x101,0x134)](_0x476865),'headers':{'Content-Type':_0x75d7eb['LAKZt'],'Authorization':_0x75d7eb[_0x2cbad6(0x4,0x7f,0x45,0x28)](getsdAuth)}});window[_0x4e94ec(0x568,0x4df,0x46c,0x4c2)]=!![];if(!_0x45ffce['ok']){const _0x6d7120=await _0x45ffce[_0x4e94ec(0x3e4,0x431,0x473,0x431)]();_0x75d7eb[_0x4e94ec(0x443,0x3d6,0x3f1,0x465)](addLog,'SD\x20API\x20返回错'+_0x4e94ec(0x3f2,0x3e2,0x3e7,0x3c5)+_0x45ffce[_0x4e94ec(0x4df,0x461,0x4f1,0x431)]+_0x2cbad6(0x9d,0x39,0x104,0xa4)+_0x6d7120),console[_0x2cbad6(0x3e,0x133,0x103,0xb3)](_0x75d7eb[_0x2cbad6(0x9d,0x81,0x32,0x32)],_0x6d7120);throw new Error('请求失败,状态码:\x20'+_0x45ffce['status']+_0x2cbad6(0x2b,0x63,0xb0,0x36)+_0x6d7120);}const _0x4f7c4c=await _0x45ffce[_0x4e94ec(0x4b5,0x4a0,0x43c,0x451)]();if(!_0x4f7c4c['images']||_0x75d7eb[_0x2cbad6(0x8a,0xaf,0xaa,0x8a)](_0x4f7c4c[_0x2cbad6(0x10d,0x64,0xc7,0xd1)]['length'],0x1a99*0x1+-0x26*-0xc0+-0x1c7*0x1f))throw new Error(_0x75d7eb['gGRWk']);const _0x4a343c=_0x4f7c4c[_0x2cbad6(0x6f,0xcc,0x3d,0xd1)][0x4*-0x153+0x1f55+-0x1a09],_0x38639a=_0x75d7eb[_0x4e94ec(0x479,0x426,0x45e,0x46d)]('data:image'+'/png;base6'+'4,',_0x4a343c);addLog(_0x75d7eb[_0x2cbad6(0x103,0x11c,0x5e,0x9f)]);const _0x14a501={};return _0x14a501[_0x4e94ec(0x44b,0x40d,0x460,0x450)]=_0x38639a,_0x14a501[_0x2cbad6(0x1a5,0x164,0x18c,0x115)]=_0x11c261||'',_0x14a501;}}}catch(_0x3bf39b){if(_0x75d7eb['tpfRZ'](_0x4e94ec(0x3fb,0x413,0x403,0x3ab),_0x2cbad6(-0x46,-0x3d,0xc0,0x3d))){window[_0x2cbad6(0xdd,0xe2,0x196,0x121)]=!![],_0x75d7eb[_0x2cbad6(0x136,0xfe,0x12e,0xc7)](addLog,_0x2cbad6(0xa7,0xfb,0x10a,0xf7)+_0x3bf39b[_0x2cbad6(-0x5,0x54,0xd2,0x85)]),console[_0x2cbad6(0xec,0x51,0x8e,0x5d)](_0x75d7eb[_0x2cbad6(0x5c,0xd8,0x11a,0xeb)],_0x3bf39b);throw _0x3bf39b;}else{_0x75d7eb[_0x4e94ec(0x42b,0x3f1,0x487,0x3bb)](_0xcc0538,_0x519444);return;}}}async function sdGenerate(_0x30bc46){function _0x375312(_0x12c20a,_0x4528dd,_0x504995,_0x34420b){return _0x3a64(_0x34420b-0x362,_0x12c20a);}function _0x528f57(_0x528155,_0x21c3bb,_0x224376,_0x4f7587){return _0x3a64(_0x4f7587-0x90,_0x21c3bb);}const _0x1dacd2={'NxGfB':function(_0x7af38d,_0x4c3746){return _0x7af38d+_0x4c3746;},'VWxan':function(_0x5b784d,_0x80af23){return _0x5b784d(_0x80af23);},'VVkvy':function(_0xdb43d5,_0x133f3b){return _0xdb43d5(_0x133f3b);},'Etgkw':function(_0x1f83f2,_0x24912b){return _0x1f83f2===_0x24912b;},'Sobus':_0x528f57(0x3ee,0x2e1,0x31d,0x360),'TOLXk':function(_0x2f27e1,_0x2f2dab){return _0x2f27e1(_0x2f2dab);},'Ouiat':function(_0x3aba25,_0x5f4f8f){return _0x3aba25!==_0x5f4f8f;},'WLZVf':_0x528f57(0x311,0x392,0x2a0,0x32e),'uIjsp':function(_0x134eef,_0x4160b8){return _0x134eef!=_0x4160b8;},'lYtmx':function(_0x23e988,_0x3f26d2){return _0x23e988===_0x3f26d2;},'dKpVT':_0x528f57(0x3de,0x387,0x359,0x36d),'iXxvC':_0x528f57(0x220,0x2a2,0x28a,0x294),'aiqqv':_0x528f57(0x376,0x385,0x3c6,0x398)+'rating\x20SD\x20'+'image:'},{id:_0x533e5c,prompt:_0x3fbb25,width:_0x17c938,height:_0x4d28c4,change:_0xea271d}=_0x30bc46;_0x1dacd2['VVkvy'](addLog,_0x375312(0x56e,0x56f,0x605,0x5d4)+_0x375312(0x64d,0x69c,0x668,0x622)+_0x533e5c+(')\x20-\x20Prompt'+':\x20')+_0x3fbb25+(_0xea271d?_0x375312(0x610,0x5cf,0x6ba,0x633)+'\x20'+_0xea271d:''));if(_0xea271d&&_0xea271d['includes'](_0x375312(0x63d,0x61b,0x5c8,0x626))){if(_0x1dacd2[_0x528f57(0x274,0x330,0x2a9,0x2f4)](_0x1dacd2['Sobus'],_0x1dacd2[_0x375312(0x5b6,0x640,0x608,0x5f8)])){_0x1dacd2[_0x375312(0x556,0x541,0x55f,0x58b)](bananaGenerate,_0x30bc46);return;}else{const _0x4459d2=_0x268dab[_0x528f57(0x2f9,0x359,0x299,0x303)](_0x51ef1c);_0xe36dbf=_0x4459d2[_0x375312(0x61c,0x6a3,0x60e,0x610)][0x1f20*0x1+-0x13a3+-0xb7d*0x1];}}try{if(_0x1dacd2[_0x375312(0x5fe,0x63d,0x65d,0x65d)](_0x1dacd2[_0x528f57(0x31c,0x284,0x2d7,0x2d8)],_0x1dacd2[_0x375312(0x5a7,0x5f6,0x638,0x5aa)]))_0xa8e322=_0x1dacd2[_0x528f57(0x291,0x2d6,0x33c,0x30a)](_0x408643+',\x20',_0x461ddf[_0x528f57(0x3bd,0x34e,0x3a9,0x37f)+_0x422b41+_0x528f57(0x41e,0x423,0x390,0x3a6)]);else{const {image:_0x549e3a,change:_0x2cf4cd}=await generateSDImage({'prompt':_0x3fbb25,'width':_0x17c938,'height':_0x4d28c4,'change':_0xea271d});if(_0x1dacd2[_0x528f57(0x2c5,0x310,0x2d0,0x2b3)](extension_settings[extensionName]['cache'],'0')){const _0x3a1e67={};_0x3a1e67[_0x375312(0x674,0x5ff,0x692,0x654)]=_0x2cf4cd,await setItemImg(_0x3fbb25,_0x549e3a,_0x3a1e67),addLog('图像已存入数据库\x20f'+'or\x20prompt:'+'\x20'+_0x3fbb25);}else _0x1dacd2[_0x528f57(0x306,0x23b,0x271,0x2b9)](addLog,_0x375312(0x57d,0x520,0x5db,0x553)+'库');const _0x57b0ed={};_0x57b0ed['id']=_0x533e5c,_0x57b0ed[_0x528f57(0x228,0x2cf,0x275,0x2ba)]=!![],_0x57b0ed[_0x375312(0x690,0x576,0x574,0x5fa)]=_0x549e3a,_0x57b0ed['prompt']=_0x3fbb25,_0x57b0ed[_0x375312(0x692,0x664,0x6c9,0x654)]=_0x2cf4cd,eventSource['emit'](EventType['GENERATE_I'+_0x528f57(0x30f,0x40c,0x326,0x39d)+'NSE'],_0x57b0ed),_0x1dacd2[_0x375312(0x557,0x548,0x5cc,0x58a)](addLog,'发送SD生图成功响应'+'\x20(ID:\x20'+_0x533e5c+')');}}catch(_0x5a3419){if(_0x1dacd2['lYtmx'](_0x1dacd2[_0x375312(0x536,0x56f,0x5cc,0x5a0)],_0x1dacd2[_0x375312(0x59a,0x55e,0x643,0x5b6)])){_0x1dacd2[_0x528f57(0x2ad,0x36c,0x327,0x336)](_0x11718d,_0x528f57(0x2fa,0x34b,0x2e7,0x325)+':\x20'+_0x2bdccd[_0x528f57(0x342,0x30a,0x280,0x2f2)]+(_0x528f57(0x399,0x3b9,0x3b3,0x368)+_0x528f57(0x3b6,0x3b2,0x307,0x399)+_0x375312(0x5e3,0x69c,0x5a9,0x63d)));throw new _0x1daef3(_0x375312(0x66d,0x5c4,0x636,0x5f7)+'，请检查sdwebu'+'i是否正常启动，并检'+_0x375312(0x699,0x5ff,0x605,0x63d));}else{const _0x3d7ada=_0x528f57(0x2cc,0x343,0x289,0x2de)+_0x528f57(0x389,0x315,0x36e,0x37d)+_0x533e5c+_0x375312(0x599,0x62b,0x559,0x5ce)+_0x5a3419[_0x375312(0x5a0,0x540,0x589,0x5c4)];_0x1dacd2[_0x375312(0x5fd,0x53c,0x5a2,0x58a)](addLog,_0x375312(0x5f3,0x6da,0x6c3,0x65b)+_0x3d7ada),console['error'](_0x1dacd2[_0x528f57(0x2a6,0x291,0x2c2,0x27e)],_0x5a3419);const _0x496cb5={};_0x496cb5['id']=_0x533e5c,_0x496cb5['success']=![],_0x496cb5[_0x528f57(0x2ce,0x2ee,0x2c9,0x2ca)]=_0x5a3419[_0x528f57(0x29b,0x2ed,0x2a8,0x2f2)],_0x496cb5[_0x528f57(0x31e,0x364,0x37c,0x388)]=_0x3fbb25,eventSource[_0x528f57(0x3e7,0x3bf,0x335,0x369)](EventType['GENERATE_I'+_0x375312(0x64c,0x698,0x60b,0x66f)+_0x528f57(0x3d3,0x3b7,0x32e,0x343)],_0x496cb5),addLog(_0x528f57(0x247,0x2d2,0x309,0x2db)+_0x375312(0x59c,0x633,0x570,0x5d1)+_0x533e5c+')');}}}function initializeSDListener(){function _0x140270(_0x4950bf,_0x1f549b,_0x2b6a02,_0x108ca1){return _0x3a64(_0x108ca1-0x2c9,_0x4950bf);}const _0x5e61fa={'orliq':function(_0x38cfe3,_0x59029f){return _0x38cfe3(_0x59029f);}};function _0x510bc4(_0x2b1856,_0x31b4ed,_0x3f62ca,_0x53af70){return _0x3a64(_0x53af70- -0x66,_0x3f62ca);}eventSource['on'](EventType['GENERATE_I'+'MAGE_REQUE'+'ST'],sdGenerate),_0x5e61fa['orliq'](addLog,_0x140270(0x5f0,0x5fd,0x57a,0x5a9)+_0x140270(0x574,0x5b3,0x5be,0x52f));}export async function replaceWithSd(){const _0x324e4b={'ACeoI':function(_0x1a96d8){return _0x1a96d8();},'oxyjG':function(_0x1c9fbc,_0x27db1e){return _0x1c9fbc===_0x27db1e;},'nlMks':_0x5a5271(0x10f,0xe5,0x16c,0x106),'UcZyp':_0x5a5271(0x195,0x181,0x17f,0x203)+_0x3fc2d2(0x296,0x272,0x27e,0x231)};function _0x3fc2d2(_0x12f547,_0x224ead,_0x212512,_0x227de1){return _0x3a64(_0x224ead- -0x4f,_0x12f547);}function _0x5a5271(_0x4ef7a8,_0x3385c0,_0x537505,_0x22cb2d){return _0x3a64(_0x3385c0- -0x15f,_0x537505);}extension_settings[extensionName]['mode']=='sd'?(!window[_0x3fc2d2(0x2c5,0x25d,0x2d4,0x2a9)+_0x5a5271(0xf0,0x116,0x19c,0x8b)]&&(window[_0x3fc2d2(0x1d1,0x25d,0x2ad,0x28d)+_0x3fc2d2(0x1f8,0x226,0x1b4,0x1fd)]=!![],initializeSDListener()),_0x324e4b['ACeoI'](initializeImageProcessing)):window[_0x5a5271(0x1af,0x14d,0x179,0x1d6)+'SDListener']&&(_0x324e4b['oxyjG'](_0x324e4b[_0x3fc2d2(0x2aa,0x280,0x314,0x233)],_0x324e4b[_0x5a5271(0x110,0x170,0x176,0x1a2)])?(eventSource[_0x3fc2d2(0x262,0x1d1,0x1ee,0x143)+'ener'](EventType[_0x5a5271(0x1fc,0x1b6,0x1a6,0x19c)+'MAGE_REQUE'+'ST'],sdGenerate),window[_0x5a5271(0xf6,0x14d,0xbf,0x1ac)+_0x5a5271(0x192,0x116,0xb7,0x176)]=![],addLog(_0x324e4b[_0x5a5271(0x106,0x150,0x1b7,0x162)])):_0xfd46ef=![]);}