(function(_0x655deb,_0x23b186){function _0x17c3dc(_0x437535,_0xbd7869,_0x10ac22,_0x504a46){return _0x40df(_0xbd7869-0x2d7,_0x10ac22);}const _0x430725=_0x655deb();function _0x4a8a29(_0x25dafe,_0x1c27ab,_0x44c63d,_0x3b2480){return _0x40df(_0x44c63d-0x2ff,_0x3b2480);}while(!![]){try{const _0x2e838d=-parseInt(_0x4a8a29(0x426,0x438,0x45d,0x4a7))/(-0x2*0xf1e+-0x410+0x1*0x224d)+-parseInt(_0x17c3dc(0x4e9,0x4f6,0x48a,0x4f7))/(-0xedd+0x12*-0x3+0xd*0x129)+-parseInt(_0x4a8a29(0x51f,0x479,0x480,0x4a0))/(0xedd*-0x2+0x52c+0x13*0x14b)+parseInt(_0x4a8a29(0x490,0x449,0x49f,0x42a))/(-0x1*-0x1912+0xed9+0x7fb*-0x5)+parseInt(_0x17c3dc(0x4ec,0x520,0x4d1,0x4ce))/(0x1927*-0x1+0x261d+0xcf1*-0x1)+-parseInt(_0x4a8a29(0x4c3,0x4d3,0x52f,0x563))/(0x3*0x9ad+-0x8ca+-0x1437)*(-parseInt(_0x4a8a29(0x5a4,0x4ed,0x55a,0x59f))/(-0x17*-0x29+-0x42*-0x61+-0x1caa))+parseInt(_0x17c3dc(0x48c,0x47c,0x3d1,0x4c1))/(0xa4*0x28+-0x2309+0x971);if(_0x2e838d===_0x23b186)break;else _0x430725['push'](_0x430725['shift']());}catch(_0x108fea){_0x430725['push'](_0x430725['shift']());}}}(_0x1f84,-0x14f8cf+0x64575+0x1b4200));const _0x280a78=(function(){function _0x2b8322(_0x181310,_0x20a15a,_0x2aa82d,_0x226ccb){return _0x40df(_0x181310-0x3b4,_0x226ccb);}const _0xa7136d={'umUup':function(_0x1bb3c8,_0x1e74fe){return _0x1bb3c8(_0x1e74fe);},'uGQPy':_0x2b8322(0x4f6,0x4cb,0x547,0x4d0),'kRveG':'任务已取消','LCKiY':function(_0x3fd43e,_0x10c50a){return _0x3fd43e!==_0x10c50a;},'ItrDc':_0x2b8322(0x4ee,0x584,0x565,0x493)};function _0x4f3dac(_0x47ee66,_0x38f83c,_0x2fcd57,_0x4ca90f){return _0x40df(_0x38f83c-0x312,_0x2fcd57);}let _0x51a6fa=!![];return function(_0x5a25e2,_0xccbeba){function _0x22f98a(_0x38fdef,_0x4f06f0,_0x1be150,_0x213fc3){return _0x2b8322(_0x1be150- -0x2e0,_0x4f06f0-0x51,_0x1be150-0x107,_0x213fc3);}const _0x56c426={'EEJqf':function(_0x4d5821,_0x4a6e42){return _0xa7136d['umUup'](_0x4d5821,_0x4a6e42);},'IBzmy':_0xa7136d['uGQPy'],'GNEBG':_0xa7136d['kRveG']};function _0x31d449(_0x54650c,_0x2a038a,_0x35745f,_0x5db720){return _0x2b8322(_0x2a038a- -0xec,_0x2a038a-0x15c,_0x35745f-0x1aa,_0x54650c);}if(_0xa7136d[_0x31d449(0x474,0x4ff,0x5a7,0x595)](_0xa7136d[_0x31d449(0x514,0x4e6,0x527,0x54d)],_0xa7136d[_0x31d449(0x4e0,0x4e6,0x438,0x4a6)])){_0x56c426[_0x22f98a(0x19b,0x25b,0x234,0x1a8)](_0x40da4c,_0x56c426[_0x22f98a(0x1d5,0x218,0x267,0x2d8)]);throw new _0x53790a(_0x56c426[_0x22f98a(0x29f,0x357,0x331,0x3c9)]);}else{const _0x273ee1=_0x51a6fa?function(){function _0x174c1f(_0x1c4bc9,_0x3204ef,_0x51713c,_0x5273e5){return _0x31d449(_0x51713c,_0x5273e5- -0x659,_0x51713c-0x1d9,_0x5273e5-0x151);}if(_0xccbeba){const _0x6f1d2b=_0xccbeba[_0x174c1f(-0x199,-0x100,-0x156,-0x17c)](_0x5a25e2,arguments);return _0xccbeba=null,_0x6f1d2b;}}:function(){};return _0x51a6fa=![],_0x273ee1;}};}()),_0x1db448=_0x280a78(this,function(){const _0x50afb9={};function _0x3dce34(_0x27260a,_0x2fd775,_0x4f260c,_0x5b2c5b){return _0x40df(_0x27260a- -0x1f9,_0x5b2c5b);}_0x50afb9[_0x3dce34(-0x22,0x4e,0x76,-0xc9)]=_0x24a30d(0x2e4,0x2c9,0x318,0x26c)+'+$';const _0x57a8d2=_0x50afb9;function _0x24a30d(_0x5a5626,_0x13aeb6,_0x3965c7,_0x22e39d){return _0x40df(_0x3965c7-0x122,_0x22e39d);}return _0x1db448[_0x3dce34(-0x84,-0x83,-0x12c,-0x10e)]()[_0x3dce34(-0x8f,-0x31,-0x78,-0x66)](_0x57a8d2['gvIPg'])['toString']()[_0x24a30d(0x38d,0x2e3,0x36a,0x309)+'r'](_0x1db448)['search'](_0x57a8d2['gvIPg']);});_0x1db448();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';function _0x40df(_0x13f9ec,_0x259eb3){_0x13f9ec=_0x13f9ec-(-0x1ef1+-0x218+0x2240);const _0x15391c=_0x1f84();let _0x4729f3=_0x15391c[_0x13f9ec];if(_0x40df['hIWtUl']===undefined){var _0x24000d=function(_0x11156b){const _0x1c538b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5875a7='',_0xff2acd='',_0x30a4fe=_0x5875a7+_0x24000d;for(let _0x1fe438=0x1*-0x2575+0xe14+-0x13*-0x13b,_0x222bc0,_0x100457,_0x44b196=0x1*0x1908+0x19*0x3a+-0x1eb2;_0x100457=_0x11156b['charAt'](_0x44b196++);~_0x100457&&(_0x222bc0=_0x1fe438%(0x1806+-0x1592+-0x270)?_0x222bc0*(0xa8c+-0x277+-0x7d5)+_0x100457:_0x100457,_0x1fe438++%(-0x2494+0x1066*-0x2+0x4564))?_0x5875a7+=_0x30a4fe['charCodeAt'](_0x44b196+(-0xb33+0x1a35+-0x77c*0x2))-(0x1df*0xb+0x67*-0x21+-0x744)!==-0x3c1*0x8+0x10cc+0x134*0xb?String['fromCharCode'](-0x156e*-0x1+0x2*0x66b+-0x2145&_0x222bc0>>(-(-0xf65*-0x1+0x12b1+-0x2214)*_0x1fe438&-0x6e6+0x1*-0x1e35+0x2521)):_0x1fe438:-0x1*-0x1de6+0x388+-0x216e){_0x100457=_0x1c538b['indexOf'](_0x100457);}for(let _0x42e37a=-0x1*-0x262+0x1a9+-0x40b,_0x1da1ff=_0x5875a7['length'];_0x42e37a<_0x1da1ff;_0x42e37a++){_0xff2acd+='%'+('00'+_0x5875a7['charCodeAt'](_0x42e37a)['toString'](0x2*-0x458+0xcc7*-0x1+0x1587))['slice'](-(-0x1*0x1+-0x1*-0xc91+0x647*-0x2));}return decodeURIComponent(_0xff2acd);};_0x40df['uaquwj']=_0x24000d,_0x40df['AgzkEK']={},_0x40df['hIWtUl']=!![];}const _0x1786d3=_0x15391c[0x23ef*0x1+0x1a37+-0x3e26],_0x37da18=_0x13f9ec+_0x1786d3,_0x4fc127=_0x40df['AgzkEK'][_0x37da18];if(!_0x4fc127){const _0x86f52d=function(_0x199c46){this['jJbGwk']=_0x199c46,this['ydZckr']=[-0x9e7*-0x3+0x1050+-0x2e04,0x1c5d+-0x13ad+-0x8b0,-0x1e3d*-0x1+0x53*-0x30+-0x121*0xd],this['AQlLeV']=function(){return'newState';},this['sgPIZF']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['rlRVFg']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x86f52d['prototype']['NmLfYO']=function(){const _0x580f01=new RegExp(this['sgPIZF']+this['rlRVFg']),_0x576559=_0x580f01['test'](this['AQlLeV']['toString']())?--this['ydZckr'][0x14dc+0x1*-0x1b61+0x686]:--this['ydZckr'][0x1ca*0x4+-0x3d4+0x8e*-0x6];return this['sxbzJU'](_0x576559);},_0x86f52d['prototype']['sxbzJU']=function(_0x47debd){if(!Boolean(~_0x47debd))return _0x47debd;return this['YWiRvv'](this['jJbGwk']);},_0x86f52d['prototype']['YWiRvv']=function(_0x3b8b9f){for(let _0x9aea4=-0x3*-0xc7d+-0x220+-0x2357,_0x3bde0b=this['ydZckr']['length'];_0x9aea4<_0x3bde0b;_0x9aea4++){this['ydZckr']['push'](Math['round'](Math['random']())),_0x3bde0b=this['ydZckr']['length'];}return _0x3b8b9f(this['ydZckr'][-0x165*0x19+-0x21*-0xd4+0x789]);},new _0x86f52d(_0x40df)['NmLfYO'](),_0x4729f3=_0x40df['uaquwj'](_0x4729f3),_0x40df['AgzkEK'][_0x37da18]=_0x4729f3;}else _0x4729f3=_0x4fc127;return _0x4729f3;}import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;async function generateSDImage({prompt:_0x172b14,width:_0x7c2feb,height:_0x2528e2,change:_0x511a88}){const _0x5d0fc2={'AeiIF':function(_0x5b1294,_0x1f6c57){return _0x5b1294(_0x1f6c57);},'VKteI':function(_0x3de72b,_0xcbdc8f){return _0x3de72b(_0xcbdc8f);},'zHlyc':_0x378680(0x4f3,0x48b,0x4e3,0x4c1)+_0x2a1f9a(0x41d,0x488,0x33d,0x3e1),'ZXNZf':function(_0x5ddf95,_0x130d28){return _0x5ddf95+_0x130d28;},'hrTXU':function(_0x3357ef,_0x44c201){return _0x3357ef(_0x44c201);},'KfNks':_0x378680(0x4c8,0x4ff,0x4d6,0x506)+_0x2a1f9a(0x45f,0x39d,0x3f4,0x445),'URAhx':function(_0x2bdf79,_0x28c53e){return _0x2bdf79(_0x28c53e);},'deSTU':'SD\x20生图事件监听器'+_0x378680(0x515,0x52f,0x539,0x581),'rMwiQ':'Error\x20gene'+_0x378680(0x5ec,0x5ac,0x616,0x608)+_0x378680(0x44b,0x471,0x48b,0x3fd),'JCzbO':'(((.+)+)+)'+'+$','RpykK':function(_0x2e821f){return _0x2e821f();},'FhKDQ':function(_0xea38f0,_0x3611e1){return _0xea38f0||_0x3611e1;},'QerXz':function(_0x3d717c,_0x32b661){return _0x3d717c>_0x32b661;},'bHjGw':function(_0x135656,_0x357e3b){return _0x135656(_0x357e3b);},'tDxva':function(_0x5a3a6b,_0x149624){return _0x5a3a6b!==_0x149624;},'jCeCX':function(_0x1caa37,_0x1872ff){return _0x1caa37(_0x1872ff);},'szHDx':'juHVo','TkDuP':_0x2a1f9a(0x403,0x38b,0x45c,0x41f),'oTmjo':function(_0x15251e,_0x1ac185){return _0x15251e(_0x1ac185);},'xuTka':function(_0x2c6f09,_0x28066c){return _0x2c6f09<=_0x28066c;},'DHZCf':function(_0x3089b4,_0xa41755){return _0x3089b4+_0xa41755;},'tVRnb':function(_0x48dd8a,_0x140d5c){return _0x48dd8a(_0x140d5c);},'zksgw':'标准模式:\x20使用请求'+_0x2a1f9a(0x3e9,0x493,0x393,0x425),'ZEtRL':function(_0x443b1f,_0x17de75,_0x1f99d7){return _0x443b1f(_0x17de75,_0x1f99d7);},'SipYO':_0x378680(0x42c,0x4b3,0x4f5,0x413),'KtFRn':function(_0xccbded,_0x3389e5){return _0xccbded===_0x3389e5;},'HJvuP':'nQAma','cPIYM':function(_0x306246,_0x2c780a,_0x2d1543,_0x2b77d2,_0x113b48,_0x16bccd){return _0x306246(_0x2c780a,_0x2d1543,_0x2b77d2,_0x113b48,_0x16bccd);},'ljAOZ':_0x2a1f9a(0x4e4,0x4eb,0x4ae,0x4d5),'aBiEC':_0x2a1f9a(0x49e,0x4e6,0x417,0x47c),'xzzvn':function(_0x3d3afe,_0x2253f7){return _0x3d3afe===_0x2253f7;},'AxSlD':_0x378680(0x449,0x4e2,0x55d,0x53c),'eXZYG':_0x2a1f9a(0x486,0x4b3,0x40c,0x4a7)+_0x378680(0x5ee,0x564,0x5bb,0x4da),'EFEZC':_0x378680(0x548,0x530,0x50d,0x4dd),'SpLiv':function(_0x13602a,_0x587cbd){return _0x13602a(_0x587cbd);},'lMfvT':'cmodel2222'+_0x2a1f9a(0x516,0x445,0x4dd,0x48a),'cOhkD':_0x2a1f9a(0x4e3,0x4cc,0x4cb,0x479)+'settingss.'+'sd_cchatu_'+'8_model','hsCiN':function(_0x23ea9f,_0xa194eb){return _0x23ea9f!=_0xa194eb;},'jaPwT':function(_0x2b6aa3,_0x51285f,_0x22a618){return _0x2b6aa3(_0x51285f,_0x22a618);},'tnhjp':_0x378680(0x52e,0x552,0x5db,0x503)+'t-model','NdRjj':function(_0x3f75f8,_0x1d709e){return _0x3f75f8(_0x1d709e);},'rxVyS':_0x2a1f9a(0x514,0x488,0x45f,0x4de),'dGbww':function(_0x3c07a6,_0xff1ede,_0x217cfc){return _0x3c07a6(_0xff1ede,_0x217cfc);},'sRIfp':function(_0x29115c,_0x34b047){return _0x29115c(_0x34b047);},'DWTqA':function(_0x573b65,_0x263d30){return _0x573b65(_0x263d30);},'eHBvY':function(_0x864252,_0x552b47){return _0x864252>=_0x552b47;},'AqbuV':function(_0x384fbc,_0x12a2d4){return _0x384fbc!==_0x12a2d4;},'ZCIGX':_0x2a1f9a(0x448,0x4da,0x53c,0x4b6),'LckBX':function(_0x4c99a6,_0x3020d0){return _0x4c99a6==_0x3020d0;},'UzOum':'true','jFFQn':function(_0x52253e,_0x3247f8){return _0x52253e==_0x3247f8;},'PvalF':function(_0x55547b,_0x31b71d){return _0x55547b(_0x31b71d);},'rOBVJ':'adetailer_'+_0x378680(0x45b,0x4b7,0x4d1,0x540),'DyjyG':function(_0x5de5dc,_0x3e9a9c,_0x439c45){return _0x5de5dc(_0x3e9a9c,_0x439c45);},'LGTAU':_0x2a1f9a(0x491,0x478,0x513,0x51c),'zgoCq':_0x378680(0x3d8,0x478,0x4ac,0x4a5),'FXnYg':_0x378680(0x4c9,0x54a,0x57f,0x5d0),'mbLsk':_0x2a1f9a(0x594,0x4de,0x5a8,0x524),'QgMzw':_0x378680(0x43b,0x491,0x509,0x4cb),'dGwJS':_0x2a1f9a(0x3ef,0x518,0x4ef,0x46c),'gHKYM':function(_0x2bec45,_0x744082){return _0x2bec45!==_0x744082;},'SYFEL':_0x378680(0x609,0x5a6,0x5b0,0x5b5),'pvwpc':_0x378680(0x4ef,0x460,0x50d,0x442),'gjYrk':_0x2a1f9a(0x4d7,0x4cf,0x509,0x49b)+_0x378680(0x4f9,0x4ac,0x43d,0x479),'ajMcX':_0x378680(0x52d,0x589,0x5c8,0x5f2),'guLfb':_0x2a1f9a(0x4a7,0x3af,0x4b0,0x40d)+_0x378680(0x4bc,0x4c1,0x56b,0x4bc)+_0x2a1f9a(0x4a2,0x3f6,0x424,0x3f6),'NIXjd':_0x2a1f9a(0x465,0x448,0x51a,0x4a7)+_0x378680(0x55e,0x53f,0x4c6,0x559),'QEClE':_0x2a1f9a(0x404,0x36e,0x3e5,0x3de),'BEhkl':function(_0x424546,_0x59d473){return _0x424546===_0x59d473;},'QgKhR':'ReiFp','Tytyt':function(_0x38c50b,_0xd0dbc2){return _0x38c50b(_0xd0dbc2);},'qKqZx':_0x2a1f9a(0x43c,0x479,0x471,0x4cb)+_0x378680(0x56f,0x50d,0x493,0x58a)+_0x2a1f9a(0x3b4,0x471,0x4cc,0x444),'VwqDw':function(_0x2a16de,_0x5b54fb){return _0x2a16de(_0x5b54fb);},'iVNOz':_0x378680(0x413,0x498,0x4d0,0x4b6)+_0x378680(0x420,0x4ad,0x429,0x55b)+'L。','ruDnk':function(_0x35b356,_0x4bc084){return _0x35b356||_0x4bc084;},'Duwtd':_0x2a1f9a(0x4cc,0x544,0x4d2,0x4a1),'ahjZt':function(_0x4623cc,_0x4e2e51){return _0x4623cc+_0x4e2e51;},'XMAAU':_0x378680(0x60e,0x5a4,0x629,0x5d3)+_0x378680(0x3fa,0x492,0x540,0x460),'zWJIG':function(_0x3e9b6f,_0x37ba50,_0x5ac63d){return _0x3e9b6f(_0x37ba50,_0x5ac63d);},'wdJcm':_0x2a1f9a(0x4c6,0x406,0x461,0x421)+'n/json','mekmp':function(_0x530300){return _0x530300();},'ZaPfe':function(_0x4398f9,_0x296bb1){return _0x4398f9!==_0x296bb1;},'gAbUp':_0x2a1f9a(0x4ab,0x3c8,0x4fb,0x453),'tsQwp':function(_0x4471e2,_0x4c7e0b){return _0x4471e2(_0x4c7e0b);},'XMjQA':_0x2a1f9a(0x353,0x48c,0x398,0x3ec)+_0x2a1f9a(0x550,0x42f,0x4dc,0x4b7),'KNLIu':function(_0x44c3d0,_0x575879){return _0x44c3d0+_0x575879;},'XAwif':function(_0x47ca77,_0x26dff9){return _0x47ca77(_0x26dff9);},'ybuJF':_0x2a1f9a(0x478,0x3d7,0x41a,0x478)+'1','rDKCp':'Error\x20gene'+'rating\x20ima'+_0x378680(0x518,0x46e,0x450,0x4f7)};_0x5d0fc2[_0x2a1f9a(0x3e7,0x37d,0x47e,0x41b)](clearLog);const _0x325167=taskQueue[_0x2a1f9a(0x58f,0x47e,0x46f,0x51b)]({'name':_0x5d0fc2[_0x2a1f9a(0x44f,0x520,0x511,0x4c2)](_0x172b14,'')[_0x2a1f9a(0x3b1,0x3da,0x3e6,0x3e4)](0x26f0+-0x1*-0x259a+-0x4c8a,0x1*-0x26+-0x1c5+0x209*0x1)+(_0x172b14&&_0x5d0fc2[_0x2a1f9a(0x42e,0x42c,0x552,0x4cf)](_0x172b14[_0x2a1f9a(0x4f5,0x523,0x454,0x492)],0x1ed9*-0x1+0x264c+-0x755*0x1)?_0x2a1f9a(0x386,0x375,0x3b7,0x402):''),'type':TaskType['SD'],'prompt':_0x172b14});currentTaskId=_0x325167;let _0x483c8e=_0x511a88;_0x172b14=_0x5d0fc2['VKteI'](processCharacterPrompt,_0x172b14),_0x511a88=_0x5d0fc2['AeiIF'](processCharacterPrompt,_0x511a88),_0x172b14=await stripChineseAnnotations(_0x172b14),_0x511a88=await stripChineseAnnotations(_0x511a88);const _0x16feeb=extension_settings[extensionName][_0x378680(0x50a,0x4cb,0x502,0x538)][_0x378680(0x4c8,0x510,0x5a1,0x5a8)](),_0x46cd53=extension_settings[extensionName];_0x5d0fc2[_0x378680(0x505,0x46b,0x47a,0x425)](addLog,_0x378680(0x55e,0x5ab,0x527,0x50d)+_0x378680(0x643,0x596,0x522,0x63e)+'端为'+_0x46cd53['client']+',模型为'+_0x46cd53[_0x378680(0x4df,0x515,0x4eb,0x4e6)+_0x378680(0x513,0x4c4,0x42b,0x4f7)]);const _0x4a38ea=_0x511a88&&_0x5d0fc2['tDxva'](_0x511a88['trim'](),'')?_0x511a88:_0x172b14;_0x5d0fc2[_0x2a1f9a(0x343,0x393,0x3f7,0x3d4)](addLog,_0x2a1f9a(0x3d6,0x3c3,0x3f0,0x404)+_0x4a38ea);let _0x5f25b2=![];_0x4a38ea[_0x378680(0x5dc,0x573,0x5a7,0x57b)](_0x378680(0x447,0x48b,0x467,0x474)+_0x378680(0x451,0x462,0x4a2,0x3bd))&&(_0x5f25b2=!![]);_0x5d0fc2['hrTXU'](addLog,_0x2a1f9a(0x4ac,0x408,0x486,0x438)+_0x378680(0x544,0x549,0x584,0x579)+_0x2a1f9a(0x5ba,0x570,0x49c,0x510)+_0x5f25b2);let _0x4d7e95={},_0x564dbb='',_0xd91bda='';if(_0x5f25b2){if(_0x5d0fc2[_0x2a1f9a(0x522,0x4bf,0x4e0,0x4ff)]!==_0x5d0fc2['TkDuP']){_0x5d0fc2[_0x378680(0x3b6,0x455,0x3f3,0x3bf)](addLog,_0x2a1f9a(0x437,0x400,0x4ff,0x452)+_0x378680(0x515,0x4ba,0x4f3,0x429)),_0x4d7e95=_0x5d0fc2[_0x2a1f9a(0x3ec,0x3eb,0x3fe,0x491)](parsePromptStringWithCoordinates,_0x4a38ea),_0x564dbb=_0x4d7e95[_0x5d0fc2[_0x2a1f9a(0x3fd,0x473,0x375,0x40e)]];for(let _0x3c410d=-0x1d64+0x17bf+0x5a6;_0x5d0fc2[_0x378680(0x444,0x4dd,0x4ba,0x50f)](_0x3c410d,-0x1f5+0x2635+-0x243c);_0x3c410d++){_0x4d7e95[_0x378680(0x5f5,0x590,0x514,0x5d3)+_0x3c410d+_0x2a1f9a(0x4e2,0x503,0x447,0x4e1)]&&(_0xd91bda=_0x5d0fc2[_0x378680(0x46b,0x507,0x56a,0x51f)](_0xd91bda,',\x20')+_0x4d7e95[_0x2a1f9a(0x4c7,0x585,0x476,0x50f)+_0x3c410d+'\x20Prompt']);}}else _0x13318e=_0x5d0fc2[_0x2a1f9a(0x4ae,0x3ae,0x3f9,0x401)](_0x2d5030,_0x5d96b0);}else _0x5d0fc2[_0x378680(0x614,0x599,0x5eb,0x4f4)](addLog,_0x5d0fc2[_0x378680(0x4b4,0x542,0x4dd,0x4af)]),_0x564dbb=_0x4a38ea;let {modifiedPrompt:_0xe8491a,insertions:_0x45164e}=await _0x5d0fc2['ZEtRL'](prompt_replace,_0x564dbb,_0xd91bda);if(_0x5f25b2)for(let _0x2e2e35=0x1225+-0xfab+0xd3*-0x3;_0x5d0fc2[_0x378680(0x516,0x4dd,0x486,0x466)](_0x2e2e35,-0x2b*-0x53+-0x1*0x1ce2+0xef5*0x1);_0x2e2e35++){if(_0x5d0fc2['tDxva'](_0x5d0fc2['SipYO'],_0x5d0fc2[_0x378680(0x5a2,0x54f,0x526,0x51f)])){_0x5d0fc2['VKteI'](_0xad1ea7,_0x378680(0x49e,0x4d3,0x541,0x4aa)+'坐标的提示词字符串。'),_0x4dcbe7=_0x5d0fc2['VKteI'](_0x4f7c98,_0x31eead),_0x2a6760=_0x542e19[_0x5d0fc2[_0x378680(0x4eb,0x48f,0x3eb,0x514)]];for(let _0x19d140=-0x1289+-0x1255*0x2+0x3734;_0x19d140<=-0x9a*0x23+-0x1*0x26e+0x1780;_0x19d140++){_0x2c7eb6[_0x2a1f9a(0x5b9,0x59f,0x49c,0x50f)+_0x19d140+_0x2a1f9a(0x532,0x537,0x519,0x4e1)]&&(_0x2017ef=_0x5d0fc2[_0x378680(0x52d,0x4ca,0x4ed,0x453)](_0x5d0fc2['ZXNZf'](_0x58ec90,',\x20'),_0x38d13c[_0x378680(0x540,0x590,0x60b,0x5e4)+_0x19d140+_0x2a1f9a(0x47e,0x580,0x56a,0x4e1)]));}}else{if(_0x4d7e95[_0x2a1f9a(0x594,0x48a,0x46d,0x50f)+_0x2e2e35+_0x378680(0x55d,0x562,0x542,0x4bb)]){if(_0x5d0fc2[_0x2a1f9a(0x45a,0x52f,0x51b,0x488)](_0x378680(0x554,0x5af,0x569,0x5b0),_0x5d0fc2[_0x378680(0x553,0x501,0x4be,0x567)])){_0x5d0fc2[_0x2a1f9a(0x4bc,0x43e,0x52c,0x4d0)](_0xfbd2bd,_0x378680(0x519,0x47b,0x524,0x409)+':\x20'+_0x507037[_0x2a1f9a(0x48f,0x4e4,0x561,0x4c6)]+(_0x378680(0x4fd,0x4d7,0x576,0x511)+_0x2a1f9a(0x493,0x4af,0x48e,0x473)+_0x378680(0x52a,0x53a,0x5d2,0x4f9))),_0x599204[_0x378680(0x481,0x48d,0x50e,0x4d2)+'sk'](_0xa9ca98,![]),_0x8a0722=null;throw new _0xcffd1b(_0x378680(0x415,0x47b,0x3fd,0x479)+_0x2a1f9a(0x4ea,0x526,0x4c9,0x51f)+'i是否正常启动，并检'+_0x2a1f9a(0x518,0x444,0x52b,0x4b9));}else _0xe8491a=_0xe8491a+',\x20'+prompt_replace_for_character(_0x4d7e95[_0x2a1f9a(0x581,0x541,0x46b,0x50f)+_0x2e2e35+_0x2a1f9a(0x532,0x56a,0x434,0x4e1)]);}}}let _0x1fe15c=await _0x5d0fc2[_0x2a1f9a(0x3ce,0x427,0x4e0,0x447)](zhengmian,extension_settings[extensionName][_0x378680(0x54d,0x545,0x596,0x4ab)][extension_settings[extensionName][_0x378680(0x407,0x468,0x507,0x40d)]]['fixedPromp'+'t'],_0xe8491a,extension_settings[extensionName]['yushe'][extension_settings[extensionName]['yusheid_sd']][_0x2a1f9a(0x4b4,0x414,0x496,0x435)+_0x2a1f9a(0x4b2,0x424,0x3c1,0x424)],extension_settings[extensionName]['AQT_sd'],_0x45164e),_0x30c636=await fumian(extension_settings[extensionName][_0x2a1f9a(0x54b,0x543,0x55d,0x4c4)][extension_settings[extensionName][_0x2a1f9a(0x45e,0x430,0x347,0x3e7)]][_0x2a1f9a(0x51f,0x4b7,0x4de,0x49f)+_0x2a1f9a(0x40b,0x50b,0x425,0x484)],extension_settings[extensionName]['UCP_sd']);_0x5d0fc2['jCeCX'](addLog,_0x2a1f9a(0x375,0x3d7,0x445,0x409)+_0x30c636),extension_settings['sd'][_0x5d0fc2[_0x2a1f9a(0x3d9,0x423,0x46d,0x405)]]=_0x16feeb,await saveSettingsDebounced();try{if(_0x5d0fc2[_0x378680(0x4f8,0x509,0x5a2,0x53d)](_0x46cd53[_0x378680(0x416,0x484,0x472,0x4c2)],_0x5d0fc2[_0x378680(0x538,0x496,0x42d,0x44c)])){if(_0x5d0fc2[_0x378680(0x502,0x4e9,0x44a,0x51e)](_0x5d0fc2[_0x2a1f9a(0x476,0x363,0x460,0x406)],_0x2a1f9a(0x40a,0x48c,0x3dd,0x461))){const _0x4a7d23={};_0x4a7d23['auth']=_0x46cd53[_0x378680(0x414,0x494,0x414,0x482)+_0x2a1f9a(0x3e4,0x4c5,0x449,0x45a)]?_0x46cd53[_0x2a1f9a(0x414,0x42f,0x3de,0x413)+_0x378680(0x555,0x4db,0x48f,0x439)]:'',_0x4a7d23[_0x2a1f9a(0x571,0x549,0x47e,0x4df)]=_0x16feeb;const _0x333cb7=await _0x5d0fc2[_0x2a1f9a(0x49b,0x48c,0x3a6,0x448)](fetch,_0x5d0fc2[_0x378680(0x4fb,0x45d,0x3b6,0x476)],{'method':_0x5d0fc2[_0x2a1f9a(0x5d7,0x4ef,0x517,0x530)],'body':JSON[_0x2a1f9a(0x4a1,0x539,0x46a,0x4fd)](_0x4a7d23),'headers':_0x5d0fc2[_0x2a1f9a(0x37a,0x39e,0x3f6,0x3ea)](getRequestHeaders,window[_0x2a1f9a(0x571,0x4bd,0x4f4,0x4ec)])});if(!_0x333cb7['ok']){if(_0x2a1f9a(0x3e6,0x415,0x4c1,0x44e)!==_0x2a1f9a(0x3b6,0x3ec,0x484,0x44e)){const _0x4d4a15=_0x4d01db?function(){function _0x316e48(_0xa37975,_0x4e7900,_0x47f632,_0x2a4d84){return _0x378680(_0xa37975,_0x2a4d84- -0x472,_0x47f632-0xe7,_0x2a4d84-0x1ce);}if(_0x2cae5d){const _0x5f5d4f=_0x30b0a6[_0x316e48(0xf6,0x156,0x152,0xc1)](_0x7a8fca,arguments);return _0x294bcd=null,_0x5f5d4f;}}:function(){};return _0x3c9034=![],_0x4d4a15;}else{_0x5d0fc2['SpLiv'](addLog,'获取模型失败:\x20'+_0x333cb7[_0x2a1f9a(0x4cf,0x4a0,0x4f8,0x4f3)]+'\x20'+_0x333cb7[_0x2a1f9a(0x426,0x480,0x50b,0x4a6)]);throw new Error(_0x2a1f9a(0x478,0x5a0,0x484,0x504)+_0x333cb7[_0x378680(0x5fb,0x574,0x5f0,0x5ac)]+'\x20'+_0x333cb7[_0x2a1f9a(0x417,0x432,0x45c,0x4a6)]);}}let _0x160140=await _0x333cb7[_0x378680(0x4ac,0x4bf,0x41c,0x50b)]();console['log'](_0x5d0fc2['lMfvT'],_0x160140),console[_0x378680(0x512,0x4fb,0x561,0x44d)](_0x5d0fc2[_0x2a1f9a(0x4cd,0x3f6,0x42f,0x4a3)],_0x46cd53['sd_cchatu_'+_0x2a1f9a(0x477,0x3be,0x45b,0x443)]);if(_0x5d0fc2['hsCiN'](_0x160140,_0x46cd53[_0x2a1f9a(0x53b,0x477,0x51e,0x494)+_0x378680(0x487,0x4c4,0x485,0x421)])){_0x5d0fc2[_0x2a1f9a(0x4ed,0x535,0x4aa,0x4e8)](addLog,_0x2a1f9a(0x412,0x3bf,0x41f,0x3f5)+_0x46cd53[_0x378680(0x559,0x515,0x4d1,0x4ca)+_0x2a1f9a(0x44a,0x4df,0x3f8,0x443)]+_0x378680(0x4d1,0x483,0x4ec,0x51c)),toastr[_0x378680(0x558,0x588,0x553,0x572)](_0x378680(0x596,0x50c,0x4b0,0x4e3)+_0x46cd53[_0x2a1f9a(0x458,0x507,0x45d,0x494)+_0x378680(0x4fe,0x4c4,0x45e,0x43e)]);const _0x1b19bc={};_0x1b19bc[_0x2a1f9a(0x500,0x3e1,0x4d1,0x47b)]=_0x46cd53[_0x2a1f9a(0x464,0x498,0x48d,0x413)+_0x2a1f9a(0x458,0x49a,0x473,0x45a)]?_0x46cd53[_0x2a1f9a(0x3db,0x456,0x372,0x413)+_0x378680(0x4a2,0x4db,0x4fc,0x510)]:'',_0x1b19bc[_0x378680(0x593,0x560,0x4f5,0x586)]=_0x16feeb,_0x1b19bc['model']=_0x46cd53[_0x378680(0x4eb,0x515,0x52d,0x4e6)+_0x378680(0x449,0x4c4,0x4ca,0x42d)];const _0x1214b1=await _0x5d0fc2[_0x2a1f9a(0x414,0x42c,0x390,0x3d8)](fetch,_0x5d0fc2['tnhjp'],{'method':_0x5d0fc2[_0x2a1f9a(0x510,0x487,0x4b4,0x530)],'body':JSON[_0x378680(0x5a4,0x57e,0x50c,0x562)](_0x1b19bc),'headers':getRequestHeaders(window[_0x378680(0x4fd,0x56d,0x5bb,0x52b)])});if(!_0x1214b1['ok']){_0x5d0fc2[_0x2a1f9a(0x3bc,0x446,0x47c,0x43b)](addLog,'切换模型失败:\x20'+_0x1214b1[_0x2a1f9a(0x4ef,0x5a0,0x4f2,0x4f3)]+'\x20'+_0x1214b1[_0x378680(0x51b,0x527,0x518,0x557)]);throw new Error(_0x2a1f9a(0x56a,0x486,0x4af,0x4ea)+_0x1214b1[_0x378680(0x530,0x574,0x54c,0x512)]+'\x20'+_0x1214b1['statusText']);}toastr[_0x2a1f9a(0x4c8,0x503,0x503,0x507)](_0x378680(0x4d5,0x50f,0x4a6,0x531)+_0x46cd53[_0x378680(0x563,0x515,0x53d,0x486)+_0x378680(0x56f,0x4c4,0x42d,0x528)]+'成功');}}else _0x272da5[_0x378680(0x44e,0x490,0x529,0x500)+_0x378680(0x508,0x4cc,0x4cd,0x4e3)]&&(_0x30e7c8[_0x378680(0x565,0x593,0x5db,0x565)+_0x378680(0x44e,0x463,0x4c9,0x4f9)](_0x192066[_0x378680(0x535,0x592,0x57e,0x5ea)+'MAGE_REQUE'+'ST'],_0x2c270b),_0x56e066[_0x2a1f9a(0x409,0x406,0x410,0x40f)+_0x378680(0x423,0x4cc,0x433,0x434)]=![],_0x29b01c(_0x5d0fc2[_0x2a1f9a(0x586,0x483,0x570,0x4f6)]));}else{let _0xf9e2a6=await getSDMode(_0x16feeb);if(_0x5d0fc2[_0x378680(0x4e7,0x4ea,0x493,0x550)](_0xf9e2a6,_0x46cd53[_0x378680(0x5af,0x515,0x573,0x592)+_0x378680(0x534,0x4c4,0x4c5,0x516)])){if(_0x5d0fc2['rxVyS']!==_0x5d0fc2[_0x378680(0x497,0x503,0x56b,0x575)]){_0x5d0fc2[_0x378680(0x514,0x540,0x556,0x59a)](_0x1f0f7b,_0x2a1f9a(0x459,0x538,0x55e,0x4ea)+_0x128827[_0x2a1f9a(0x530,0x575,0x4e5,0x4f3)]+'\x20'+_0x110c41['statusText']);throw new _0x1658cb('切换模型失败:\x20'+_0x4e2ce7[_0x2a1f9a(0x48f,0x598,0x4e7,0x4f3)]+'\x20'+_0x3dbb7a[_0x2a1f9a(0x4bb,0x4d8,0x4a6,0x4a6)]);}else _0x5d0fc2['jCeCX'](addLog,'正在切换模型为'+_0x46cd53['sd_cchatu_'+_0x2a1f9a(0x4a6,0x3c7,0x499,0x443)]+_0x2a1f9a(0x3d5,0x462,0x3b1,0x402)),await _0x5d0fc2[_0x2a1f9a(0x442,0x3f7,0x380,0x414)](setSDMode,_0x16feeb,_0x46cd53['sd_cchatu_'+_0x378680(0x49d,0x4c4,0x41f,0x524)]);}}}catch(_0x1ba9ac){_0x5d0fc2['sRIfp'](addLog,'获取或者切换模型失败'+':\x20'+_0x1ba9ac[_0x378680(0x54d,0x547,0x5ea,0x4fd)]+(_0x2a1f9a(0x3f7,0x442,0x3c9,0x456)+_0x2a1f9a(0x4e4,0x4f3,0x4ea,0x473)+_0x378680(0x5b3,0x53a,0x5e2,0x50a))),taskQueue[_0x378680(0x431,0x48d,0x441,0x3f7)+'sk'](_0x325167,![]),currentTaskId=null;throw new Error(_0x378680(0x4e0,0x47b,0x4f0,0x428)+_0x378680(0x5ef,0x5a0,0x598,0x5ff)+_0x378680(0x48d,0x4f4,0x55d,0x538)+_0x378680(0x5a1,0x53a,0x5dc,0x55d));}let _0x193436=-(-0x337+-0x94f*0x3+0x43*0x77);const _0x137190=_0x46cd53[_0x378680(0x4f0,0x55e,0x5b2,0x567)];_0x5d0fc2[_0x378680(0x4be,0x508,0x476,0x57b)](_0x137190,'')&&_0x5d0fc2[_0x378680(0x4bf,0x508,0x591,0x56c)](_0x137190,null)&&!_0x5d0fc2[_0x2a1f9a(0x55b,0x53d,0x4dc,0x517)](isNaN,_0x5d0fc2[_0x2a1f9a(0x596,0x595,0x55a,0x517)](Number,_0x137190))&&_0x5d0fc2[_0x2a1f9a(0x4ee,0x471,0x434,0x4d8)](Number(_0x137190),-0x63d*-0x2+0x1889+-0x1*0x2503)&&(_0x5d0fc2[_0x2a1f9a(0x3e1,0x408,0x432,0x441)](_0x5d0fc2['ZCIGX'],_0x5d0fc2[_0x2a1f9a(0x40b,0x42d,0x4e4,0x467)])?(_0x422d59['on'](_0x5e2a9a[_0x2a1f9a(0x569,0x59c,0x4d9,0x511)+_0x2a1f9a(0x539,0x4b3,0x4d1,0x4d9)+'ST'],_0x212592),_0x5d0fc2['hrTXU'](_0x444d90,_0x5d0fc2[_0x378680(0x4c7,0x479,0x441,0x4e9)])):_0x193436=_0x5d0fc2['jCeCX'](Number,_0x137190));function _0x378680(_0x4bc05e,_0x39fd0c,_0x2da921,_0x2106a8){return _0x40df(_0x39fd0c-0x31e,_0x4bc05e);}let _0x3feaf2={'prompt':_0x1fe15c,'negative_prompt':_0x30c636,'sampler_name':_0x46cd53['sd_cchatu_'+_0x378680(0x51f,0x4d8,0x4cb,0x548)+_0x378680(0x5d5,0x54d,0x570,0x5b0)],'scheduler':_0x46cd53[_0x378680(0x4d0,0x515,0x586,0x560)+_0x378680(0x4eb,0x52b,0x52a,0x4d9)+'r'],'steps':_0x46cd53['sd_csteps'],'cfg_scale':_0x46cd53[_0x2a1f9a(0x4b8,0x468,0x4a7,0x459)],'width':_0x7c2feb?_0x7c2feb:_0x46cd53[_0x378680(0x4ea,0x4af,0x47a,0x48b)],'height':_0x2528e2?_0x2528e2:_0x46cd53['sd_cheight'],'restore_faces':_0x5d0fc2['LckBX'](_0x46cd53[_0x378680(0x4cf,0x531,0x563,0x5af)+'es'],_0x5d0fc2[_0x378680(0x52c,0x4ce,0x469,0x459)]),'enable_hr':_0x5d0fc2[_0x378680(0x557,0x595,0x637,0x51a)](_0x46cd53[_0x378680(0x428,0x4a7,0x4a5,0x4be)+'fix'],_0x378680(0x53f,0x535,0x58e,0x5db)),'hr_upscaler':_0x46cd53[_0x2a1f9a(0x472,0x475,0x403,0x494)+_0x2a1f9a(0x453,0x478,0x39b,0x428)],'hr_scale':_0x46cd53[_0x378680(0x3f6,0x499,0x47b,0x40c)+_0x2a1f9a(0x3e9,0x355,0x47a,0x3e6)],'hr_additional_modules':[],'denoising_strength':_0x46cd53['sd_cdenois'+'ing_streng'+'th'],'hr_second_pass_steps':_0x46cd53[_0x2a1f9a(0x415,0x3ed,0x3c5,0x426)+_0x378680(0x631,0x5a1,0x547,0x5ec)],'seed':_0x193436,'override_settings':{'CLIP_stop_at_last_layers':Number(_0x46cd53[_0x378680(0x587,0x5a8,0x633,0x5b5)+_0x2a1f9a(0x548,0x469,0x513,0x49d)]),'sd_vae':_0x46cd53[_0x378680(0x520,0x515,0x4e7,0x48f)+_0x378680(0x49d,0x45a,0x4c2,0x4cf)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x5d0fc2[_0x2a1f9a(0x460,0x452,0x4c0,0x4eb)](addLog,_0x2a1f9a(0x475,0x3f0,0x348,0x3f4)+_0x2a1f9a(0x357,0x417,0x354,0x3fc)+_0x3feaf2['restore_fa'+_0x378680(0x4cc,0x49b,0x459,0x406)]),_0x5d0fc2[_0x378680(0x504,0x4bc,0x446,0x428)](addLog,_0x378680(0x5ac,0x572,0x54f,0x5cd)+_0x378680(0x512,0x581,0x54d,0x60c)+_0x3feaf2[_0x2a1f9a(0x408,0x525,0x4e4,0x49c)]);if(_0x5d0fc2[_0x2a1f9a(0x530,0x4e5,0x45d,0x4f5)](_0x46cd53['sd_cadetai'+_0x2a1f9a(0x4d3,0x4dc,0x591,0x4fb)],_0x378680(0x5db,0x535,0x4bf,0x4c3))){_0x5d0fc2[_0x378680(0x419,0x482,0x420,0x42c)](addLog,_0x5d0fc2[_0x2a1f9a(0x458,0x455,0x4e6,0x463)]);const _0xc3c14a={};_0xc3c14a[_0x2a1f9a(0x549,0x49a,0x494,0x4ef)]=_0x378680(0x517,0x52e,0x584,0x4ea)+_0x2a1f9a(0x4aa,0x513,0x45c,0x4b1);const _0x19406d={};_0x19406d[_0x2a1f9a(0x5a1,0x5ab,0x464,0x50b)]=[!![],!![],_0xc3c14a];const _0x3967ba={};_0x3967ba[_0x2a1f9a(0x4ad,0x45a,0x4ff,0x451)]=_0x19406d;const _0x3bc294={};_0x3bc294[_0x2a1f9a(0x4b7,0x553,0x57d,0x4db)+_0x2a1f9a(0x3f9,0x475,0x468,0x44f)]=_0x3967ba,_0x3feaf2=_0x5d0fc2[_0x378680(0x4af,0x4a1,0x4de,0x515)](deepMerge,_0x3feaf2,_0x3bc294);}const _0x2dff91=_0x378680(0x454,0x4a8,0x548,0x54f)+_0x378680(0x4f1,0x558,0x515,0x4bd)+_0x2a1f9a(0x522,0x416,0x478,0x4c3)+'pt):**\x20'+_0x1fe15c+(_0x378680(0x4b4,0x46c,0x480,0x500)+_0x378680(0x3f6,0x49e,0x4ee,0x4bb)+_0x2a1f9a(0x58a,0x466,0x572,0x4e9)+'\x20')+_0x30c636+(_0x2a1f9a(0x437,0x431,0x455,0x3ee)+'(Sampler):'+'**\x20')+_0x3feaf2[_0x2a1f9a(0x578,0x565,0x585,0x522)+'me']+('\x0a-\x20**步数\x20(S'+_0x378680(0x59a,0x51a,0x482,0x59f))+_0x3feaf2[_0x2a1f9a(0x4c6,0x4f4,0x512,0x520)]+(_0x378680(0x4fc,0x4d5,0x573,0x4a1)+_0x2a1f9a(0x4ad,0x4b9,0x3b6,0x45e))+_0x3feaf2[_0x2a1f9a(0x4b0,0x3fb,0x403,0x43f)]+(_0x378680(0x5a3,0x53e,0x5c1,0x5a8)+_0x378680(0x50e,0x489,0x518,0x3fa))+_0x3feaf2[_0x2a1f9a(0x58f,0x4c4,0x54a,0x50c)]+'x'+_0x3feaf2[_0x378680(0x442,0x4aa,0x4fc,0x455)]+(_0x2a1f9a(0x3a7,0x414,0x49b,0x43c)+_0x2a1f9a(0x4ba,0x418,0x3da,0x423))+(_0x5d0fc2['xzzvn'](_0x3feaf2[_0x378680(0x5bf,0x554,0x5a7,0x5d7)],-(-0x4*0x244+0x5a7+-0x1b5*-0x2))?'随机(-1)':_0x3feaf2[_0x378680(0x4b6,0x554,0x541,0x4f2)])+(_0x2a1f9a(0x58b,0x4f9,0x52a,0x516)+'odel):**\x20')+_0x46cd53[_0x378680(0x49e,0x515,0x573,0x46c)+'8_model']+(_0x2a1f9a(0x545,0x44c,0x463,0x4ba)+'*\x20')+_0x3feaf2[_0x2a1f9a(0x485,0x40d,0x3e1,0x471)+_0x2a1f9a(0x407,0x42e,0x44c,0x4b5)][_0x378680(0x4d0,0x4e6,0x57d,0x45b)]+(_0x378680(0x5ae,0x57f,0x615,0x627)+_0x378680(0x53f,0x4de,0x4a7,0x45b))+_0x3feaf2[_0x378680(0x4ce,0x4f2,0x4dc,0x462)+_0x378680(0x5b5,0x536,0x4e9,0x56a)]['CLIP_stop_'+_0x378680(0x3b3,0x45c,0x499,0x3f5)+_0x378680(0x592,0x582,0x520,0x59d)]+(_0x2a1f9a(0x37a,0x361,0x3f0,0x3e9)+_0x2a1f9a(0x4d8,0x529,0x546,0x4c5)+_0x378680(0x4bc,0x481,0x47b,0x3fb))+_0x3feaf2[_0x378680(0x59f,0x51d,0x4fe,0x4ca)]+(_0x2a1f9a(0x436,0x359,0x415,0x3ef)+'(Upscale\x20F'+_0x2a1f9a(0x500,0x422,0x4dd,0x48d))+_0x3feaf2[_0x378680(0x44a,0x45e,0x4c1,0x448)]+(_0x378680(0x471,0x47a,0x410,0x501)+_0x378680(0x4ba,0x52d,0x499,0x543)+_0x378680(0x433,0x4ae,0x499,0x504)+_0x2a1f9a(0x4ee,0x458,0x48d,0x490))+_0x3feaf2['denoising_'+_0x378680(0x4a1,0x4f7,0x521,0x55e)]+(_0x378680(0x52e,0x502,0x524,0x468)+_0x378680(0x45c,0x4f6,0x4cf,0x567)+_0x2a1f9a(0x4c6,0x4e0,0x4c3,0x521))+_0x3feaf2[_0x378680(0x476,0x475,0x4c7,0x516)+'ces']+('\x0a-\x20**ADeta'+_0x2a1f9a(0x52f,0x5a1,0x4ff,0x51e))+_0x5d0fc2[_0x2a1f9a(0x4b5,0x4ee,0x58e,0x514)](_0x46cd53[_0x378680(0x4ae,0x50a,0x529,0x505)+_0x378680(0x5b9,0x57c,0x5f4,0x4e6)],_0x2a1f9a(0x461,0x507,0x4e0,0x4b4))+_0x2a1f9a(0x3c2,0x4f8,0x430,0x44c);function _0x2a1f9a(_0x2f4d61,_0x1881c1,_0x276d46,_0x369929){return _0x40df(_0x369929-0x29d,_0x2f4d61);}_0x5d0fc2[_0x378680(0x518,0x551,0x523,0x4c5)](addLog,_0x2dff91),_0x5d0fc2['PvalF'](addLog,_0x378680(0x5c8,0x51f,0x476,0x5b4)+'数为'+JSON[_0x2a1f9a(0x577,0x4d0,0x4cd,0x4fd)](_0x3feaf2)),console[_0x378680(0x4ad,0x4fb,0x4bf,0x486)](_0x5d0fc2[_0x378680(0x5ed,0x5ad,0x632,0x57e)],_0x3feaf2);let _0x5d44e0=!![];while(_0x5d44e0){if(window[_0x378680(0x590,0x518,0x4b5,0x4e9)]){if(_0x5d0fc2[_0x2a1f9a(0x41c,0x48e,0x431,0x487)]('ANGyT',_0x5d0fc2[_0x378680(0x600,0x58b,0x5bf,0x510)]))_0x5d44e0=![];else{_0x438d21(_0x2a1f9a(0x4c9,0x47a,0x4d7,0x504)+_0x5ee437['status']+'\x20'+_0x1d77e9[_0x378680(0x52e,0x527,0x581,0x566)]);throw new _0x5b5711(_0x378680(0x587,0x585,0x4ed,0x51e)+_0x1e00cf[_0x378680(0x571,0x574,0x54a,0x512)]+'\x20'+_0xb706e1[_0x2a1f9a(0x46c,0x414,0x4c2,0x4a6)]);}}else await _0x5d0fc2[_0x378680(0x4d2,0x551,0x598,0x517)](sleep,-0x2046+-0x479+0x28a7);};try{if(_0x5d0fc2[_0x2a1f9a(0x4c8,0x418,0x47e,0x46a)]!==_0x5d0fc2[_0x2a1f9a(0x492,0x495,0x57f,0x505)]){window[_0x378680(0x4c1,0x518,0x4a6,0x53d)]=!![],taskQueue[_0x2a1f9a(0x55c,0x496,0x54a,0x4f4)+'us'](_0x325167,_0x5d0fc2[_0x378680(0x60c,0x5a7,0x5f1,0x5d1)]);if(_0x46cd53[_0x378680(0x408,0x484,0x3f4,0x402)]===_0x5d0fc2[_0x2a1f9a(0x38f,0x48b,0x422,0x415)]){if(_0x2a1f9a(0x533,0x464,0x519,0x4e7)!==_0x5d0fc2[_0x378680(0x4d4,0x461,0x49a,0x4e0)]){if(!taskQueue['isTaskInQu'+'eue'](_0x325167)){if(_0x5d0fc2[_0x378680(0x506,0x563,0x531,0x5d5)](_0x5d0fc2['SYFEL'],_0x5d0fc2[_0x2a1f9a(0x534,0x521,0x47d,0x4d6)]))_0x259eb3[_0x2a1f9a(0x5a6,0x4ce,0x4df,0x50f)+_0x15391c+_0x378680(0x610,0x562,0x595,0x5ec)]&&(_0x11156b=_0x5d0fc2[_0x2a1f9a(0x491,0x3d9,0x435,0x449)](_0x1c538b,',\x20')+_0x5875a7(_0xff2acd[_0x378680(0x56b,0x590,0x581,0x5d4)+_0x30a4fe+_0x2a1f9a(0x4f7,0x4bb,0x577,0x4e1)]));else{addLog(_0x5d0fc2[_0x2a1f9a(0x4c8,0x471,0x45f,0x470)]),eventSource[_0x378680(0x4dc,0x534,0x569,0x548)](_0x5d0fc2['gjYrk']);throw new Error(_0x5d0fc2[_0x2a1f9a(0x44c,0x481,0x442,0x49a)]);}}_0x3feaf2[_0x2a1f9a(0x573,0x47f,0x574,0x4df)]=_0x16feeb,console['log'](_0x5d0fc2[_0x378680(0x552,0x594,0x62d,0x59d)],_0x46cd53[_0x2a1f9a(0x466,0x3ce,0x390,0x413)+_0x2a1f9a(0x4e9,0x3b2,0x500,0x45a)]),_0x3feaf2[_0x2a1f9a(0x461,0x427,0x3cd,0x47b)]=_0x46cd53['st_chatu8_'+_0x2a1f9a(0x4ab,0x3da,0x4bb,0x45a)]?_0x46cd53[_0x2a1f9a(0x439,0x39f,0x39f,0x413)+_0x378680(0x51a,0x4db,0x485,0x42d)]:'';const _0x4d58a1=await fetch(_0x5d0fc2[_0x2a1f9a(0x598,0x4c3,0x512,0x51d)],{'method':_0x5d0fc2['EFEZC'],'headers':getRequestHeaders(window[_0x378680(0x4f8,0x56d,0x61b,0x526)]),'body':JSON[_0x2a1f9a(0x517,0x517,0x4bd,0x4fd)](_0x3feaf2)});if(!_0x4d58a1['ok']){const _0x296458=await _0x4d58a1[_0x2a1f9a(0x3fc,0x3ca,0x3b4,0x43e)]();addLog(_0x378680(0x526,0x500,0x4eb,0x52c)+_0x2a1f9a(0x434,0x4ce,0x421,0x46d)+_0x4d58a1[_0x2a1f9a(0x540,0x4b9,0x46e,0x4f3)]+'。响应内容:\x20'+_0x296458),console[_0x2a1f9a(0x476,0x47a,0x486,0x47a)](_0x5d0fc2[_0x2a1f9a(0x44f,0x440,0x33e,0x3da)],_0x296458);throw new Error(_0x2a1f9a(0x4c7,0x4e3,0x4b8,0x4d2)+_0x4d58a1['status']+',\x20详情:\x20'+_0x296458);}const _0x9d1deb=await _0x4d58a1[_0x2a1f9a(0x469,0x48e,0x3e3,0x43e)]();let _0x13d599='';try{if(_0x5d0fc2[_0x378680(0x42f,0x4d9,0x54e,0x54a)](_0x5d0fc2[_0x2a1f9a(0x38e,0x343,0x47f,0x3e3)],_0x5d0fc2['QgKhR'])){const _0x3b7865=JSON[_0x2a1f9a(0x43a,0x4d1,0x460,0x477)](_0x9d1deb);_0x13d599=_0x3b7865[_0x2a1f9a(0x415,0x43a,0x3b4,0x433)][-0x2e2+0xd*-0x1eb+0x1bd1];}else{const _0x251be8=_0x378680(0x4d6,0x584,0x5e9,0x5e0)+'常\x20(ID:\x20'+_0x46ea49+'):\x20'+_0x20db27[_0x378680(0x54e,0x547,0x533,0x585)];_0x5adfa5(_0x378680(0x4ce,0x521,0x48d,0x53c)+_0x251be8),_0x735317[_0x378680(0x546,0x517,0x546,0x58a)](_0x5d0fc2[_0x2a1f9a(0x511,0x4b8,0x465,0x472)],_0x2bf9dc);const _0x3e3c2b={};_0x3e3c2b['id']=_0x5a22f5,_0x3e3c2b['success']=![],_0x3e3c2b[_0x378680(0x483,0x517,0x581,0x4c6)]=_0x1bf269[_0x2a1f9a(0x42f,0x473,0x431,0x4c6)],_0x3e3c2b[_0x2a1f9a(0x4d5,0x43b,0x44b,0x4b8)]=_0x5ead50,_0x9162f4[_0x2a1f9a(0x49e,0x55d,0x51f,0x4b3)](_0x58d4fb['GENERATE_I'+_0x2a1f9a(0x574,0x515,0x56c,0x50d)+'NSE'],_0x3e3c2b),_0x118982(_0x2a1f9a(0x38a,0x3f2,0x47d,0x419)+_0x2a1f9a(0x536,0x499,0x4cb,0x502)+_0x2b3b0a+')');}}catch(_0x3f25a4){_0x5d0fc2[_0x378680(0x513,0x56f,0x5fa,0x4d6)](addLog,_0x5d0fc2[_0x2a1f9a(0x43d,0x40a,0x4ee,0x495)]),_0x13d599=_0x9d1deb;}const _0x42c5aa=_0x5d0fc2['ZXNZf'](_0x2a1f9a(0x499,0x3de,0x3b8,0x42f)+'/png;base6'+'4,',_0x13d599);return _0x5d0fc2['VwqDw'](addLog,_0x5d0fc2[_0x2a1f9a(0x423,0x467,0x489,0x498)]),taskQueue['completeTa'+'sk'](_0x325167,!![]),currentTaskId=null,{'image':_0x42c5aa,'change':_0x5d0fc2[_0x2a1f9a(0x47f,0x463,0x5ae,0x506)](_0x511a88,'')};}else return _0x49d875[_0x378680(0x404,0x493,0x4ef,0x40b)]()[_0x2a1f9a(0x3f9,0x402,0x444,0x407)](usYpVR[_0x378680(0x4dc,0x49d,0x401,0x446)])[_0x378680(0x45e,0x493,0x4d0,0x3f5)]()[_0x378680(0x593,0x566,0x59e,0x5d1)+'r'](_0x3f5b58)[_0x2a1f9a(0x4a4,0x489,0x3f9,0x407)](usYpVR[_0x2a1f9a(0x46d,0x4a9,0x3c1,0x41c)]);}else{if(_0x5d0fc2[_0x378680(0x4ce,0x4c2,0x419,0x4aa)](_0x5d0fc2[_0x378680(0x4d8,0x4fe,0x4bb,0x558)],_0x378680(0x583,0x522,0x5b6,0x4de)))_0x3b67d9=![];else{if(!taskQueue[_0x2a1f9a(0x459,0x4d9,0x452,0x4fc)+'eue'](_0x325167)){_0x5d0fc2['VwqDw'](addLog,_0x5d0fc2[_0x2a1f9a(0x486,0x4a8,0x4d3,0x470)]);throw new Error(_0x5d0fc2[_0x378680(0x592,0x51b,0x508,0x56e)]);}const _0xe22986=new URL(_0x5d0fc2[_0x2a1f9a(0x464,0x493,0x3d0,0x460)](_0x16feeb,_0x5d0fc2[_0x378680(0x5d9,0x52c,0x4ae,0x5c7)]));window['xiancheng']=![];const _0x5e1c47=await _0x5d0fc2[_0x378680(0x50a,0x504,0x576,0x505)](fetch,_0xe22986,{'method':_0x5d0fc2[_0x378680(0x5ad,0x5b1,0x50f,0x592)],'body':JSON[_0x378680(0x4da,0x57e,0x52a,0x610)](_0x3feaf2),'headers':{'Content-Type':_0x5d0fc2[_0x378680(0x507,0x4bb,0x552,0x418)],'Authorization':_0x5d0fc2[_0x2a1f9a(0x4e6,0x412,0x406,0x450)](getsdAuth)}});window[_0x378680(0x58e,0x518,0x568,0x595)]=!![];if(!_0x5e1c47['ok']){if(_0x5d0fc2[_0x378680(0x463,0x4f0,0x4e0,0x4db)](_0x5d0fc2[_0x378680(0x430,0x4b8,0x4d7,0x4e0)],_0x378680(0x4fb,0x4d4,0x4d6,0x52f))){const _0x1742c3=_0x44302c[_0x378680(0x5b5,0x533,0x535,0x5c1)](_0x37947d,arguments);return _0xce0f06=null,_0x1742c3;}else{const _0xd3d6b2=await _0x5e1c47['text']();_0x5d0fc2['tsQwp'](addLog,_0x378680(0x4e1,0x58f,0x5eb,0x5e4)+_0x378680(0x4f0,0x4e5,0x485,0x4de)+_0x5e1c47[_0x2a1f9a(0x4f1,0x476,0x4f3,0x4f3)]+_0x378680(0x531,0x571,0x5f7,0x547)+_0xd3d6b2),console[_0x378680(0x506,0x4fb,0x557,0x4b2)](_0x5d0fc2['QEClE'],_0xd3d6b2);throw new Error(_0x2a1f9a(0x4cc,0x4cf,0x52e,0x4d2)+_0x5e1c47[_0x378680(0x5b1,0x574,0x5bf,0x56b)]+_0x378680(0x627,0x578,0x59f,0x5f8)+_0xd3d6b2);}}const _0x3a94ee=await _0x5e1c47[_0x378680(0x3fd,0x474,0x472,0x494)]();if(!_0x3a94ee['images']||_0x3a94ee[_0x378680(0x4ab,0x4b4,0x4d8,0x4a7)][_0x2a1f9a(0x49a,0x4d5,0x45d,0x492)]===-0x23c6+0x248+-0x1*-0x217e)throw new Error(_0x5d0fc2[_0x2a1f9a(0x4ce,0x457,0x4de,0x4dc)]);const _0x108d51=_0x3a94ee[_0x2a1f9a(0x4b1,0x4b9,0x3f3,0x433)][-0x32*0xc5+0x1b1e+0xb5c],_0x33c698=_0x5d0fc2[_0x378680(0x53f,0x529,0x562,0x565)](_0x378680(0x476,0x4b0,0x4f3,0x44f)+_0x378680(0x450,0x480,0x448,0x4c2)+'4,',_0x108d51);return _0x5d0fc2[_0x2a1f9a(0x387,0x433,0x43e,0x422)](addLog,_0x5d0fc2[_0x378680(0x54e,0x519,0x597,0x522)]),taskQueue[_0x2a1f9a(0x42e,0x41f,0x3fb,0x40c)+'sk'](_0x325167,!![]),currentTaskId=null,{'image':_0x33c698,'change':_0x5d0fc2[_0x2a1f9a(0x514,0x4d1,0x4b4,0x4c2)](_0x483c8e,'')};}}}else{const _0x1318d8=_0x168e18[_0x2a1f9a(0x40c,0x413,0x441,0x477)](_0x2534e9);_0x6e3cf5=_0x1318d8[_0x378680(0x53f,0x4b4,0x524,0x41b)][-0x23*0xa4+-0xcd*-0x13+0x735];}}catch(_0x354fe3){const _0x323dd6=_0x5d0fc2[_0x378680(0x56f,0x4e7,0x518,0x4be)]['split']('|');let _0x1488b5=0x2008+0x5c8+0x37*-0xb0;while(!![]){switch(_0x323dd6[_0x1488b5++]){case'0':_0x5d0fc2[_0x378680(0x5c3,0x598,0x53a,0x574)](addLog,_0x2a1f9a(0x3ef,0x418,0x3e8,0x434)+_0x354fe3['message']);continue;case'1':throw _0x354fe3;continue;case'2':window[_0x378680(0x4fb,0x518,0x4f0,0x4af)]=!![];continue;case'3':console[_0x378680(0x578,0x517,0x593,0x5b9)](_0x5d0fc2[_0x378680(0x598,0x56e,0x5bc,0x52f)],_0x354fe3);continue;case'4':if(_0x5d0fc2['KtFRn'](_0x354fe3[_0x2a1f9a(0x4d5,0x48e,0x509,0x4c6)],_0x5d0fc2['ajMcX'])){}else taskQueue[_0x378680(0x4dd,0x48d,0x4cd,0x4f1)+'sk'](_0x325167,![]);continue;case'5':currentTaskId=null;continue;}break;}}}async function sdGenerate(_0x5f3470){const _0xc12264={'gSiEy':function(_0x2337cb,_0x258129){return _0x2337cb<=_0x258129;},'Qotge':function(_0x36d445,_0x310958){return _0x36d445+_0x310958;},'CQild':function(_0x36208f,_0x10c741){return _0x36208f(_0x10c741);},'lGSgC':'任务已被用户取消。','zogBl':_0x2b590c(0x3b8,0x4d6,0x445,0x4a9)+_0x50f6ef(-0x2a0,-0x1fe,-0x1f3,-0x249),'ywQjn':_0x2b590c(0x416,0x54a,0x4b2,0x42d),'QCnaH':function(_0x26e4e0,_0xdf4c){return _0x26e4e0(_0xdf4c);},'evrWO':'{修图}','tJNpL':function(_0x1065e0,_0xb5409c){return _0x1065e0!==_0xb5409c;},'Gkdrm':_0x50f6ef(-0x22a,-0x14e,-0x253,-0x1cf),'LsyDE':function(_0xf6d86a,_0x1160d3){return _0xf6d86a(_0x1160d3);},'xxwqb':function(_0x3a5b20,_0x25e7bf){return _0x3a5b20(_0x25e7bf);},'vgIcw':_0x2b590c(0x43e,0x48f,0x46a,0x3ef),'bnGXD':_0x2b590c(0x3d1,0x454,0x44c,0x438),'XFBWa':function(_0x25dafd,_0x8a185d){return _0x25dafd(_0x8a185d);}},{id:_0x958225,prompt:_0x21fe3b,width:_0x1bf72b,height:_0x23e2f0,change:_0x22ca8c}=_0x5f3470;_0xc12264[_0x2b590c(0x4df,0x523,0x4b3,0x55f)](addLog,_0x2b590c(0x4c2,0x51f,0x471,0x41e)+'ID:\x20'+_0x958225+(')\x20-\x20Prompt'+':\x20')+_0x21fe3b+(_0x22ca8c?'\x20-\x20Change:'+'\x20'+_0x22ca8c:''));function _0x2b590c(_0x3794f6,_0x31662f,_0x1cf5eb,_0x3135a5){return _0x40df(_0x1cf5eb-0x247,_0x3794f6);}if(_0x22ca8c&&_0x22ca8c[_0x2b590c(0x480,0x548,0x49c,0x539)](_0xc12264['evrWO'])){if(_0xc12264[_0x50f6ef(-0x276,-0x1f7,-0x22e,-0x29e)](_0x50f6ef(-0x25b,-0x13c,-0x232,-0x1cf),_0xc12264[_0x50f6ef(-0x116,-0x19e,-0x16f,-0x15a)]))for(let _0x2cccfc=0x13b*-0xb+-0x436+0x11c0;_0xc12264[_0x2b590c(0x3b9,0x417,0x415,0x41f)](_0x2cccfc,0x21*-0x93+0x15e*-0xf+0x2779);_0x2cccfc++){_0x133e94[_0x2b590c(0x477,0x4a2,0x4b9,0x41d)+_0x2cccfc+_0x50f6ef(-0x212,-0x167,-0x1c0,-0x193)]&&(_0x4d7281=_0xc12264['Qotge'](_0x24bcdb,',\x20')+_0xc12264[_0x2b590c(0x3e0,0x3b6,0x3a8,0x387)](_0x28c69d,_0x279ace[_0x2b590c(0x4ef,0x414,0x4b9,0x4fd)+_0x2cccfc+_0x50f6ef(-0x1d6,-0x109,-0x136,-0x193)]));}else{_0xc12264[_0x2b590c(0x476,0x361,0x405,0x3b4)](bananaGenerate,_0x5f3470);return;}}function _0x50f6ef(_0x1eeb78,_0x4df6ac,_0x447a30,_0x2bd7bc){return _0x40df(_0x2bd7bc- -0x3d7,_0x4df6ac);}try{const {image:_0x2998b5,change:_0xdee101}=await _0xc12264['xxwqb'](generateSDImage,{'prompt':_0x21fe3b,'width':_0x1bf72b,'height':_0x23e2f0,'change':_0x22ca8c});if(extension_settings[extensionName][_0x2b590c(0x35d,0x372,0x3d4,0x451)]!='0'){if(_0xc12264[_0x2b590c(0x386,0x41e,0x37f,0x334)]===_0xc12264[_0x2b590c(0x3f3,0x45d,0x3db,0x35d)]){_0xc12264[_0x50f6ef(-0x2b0,-0x22a,-0x269,-0x276)](_0x542d71,_0xc12264[_0x2b590c(0x410,0x4eb,0x474,0x4d3)]),_0x3229d0[_0x50f6ef(-0x1dd,-0x26b,-0x146,-0x1c1)](_0xc12264[_0x2b590c(0x422,0x412,0x3f0,0x376)]);throw new _0x3f6303(_0xc12264[_0x2b590c(0x3a8,0x41f,0x3ff,0x3d2)]);}else{const _0x174618={};_0x174618[_0x2b590c(0x4cb,0x516,0x48a,0x4e8)]=_0xdee101,await setItemImg(_0x21fe3b,_0x2998b5,_0x174618),_0xc12264[_0x50f6ef(-0x2cc,-0x2e8,-0x2c4,-0x276)](addLog,'图像已存入数据库\x20f'+_0x50f6ef(-0x19f,-0x1b9,-0x126,-0x14b)+'\x20'+_0x21fe3b);}}else _0xc12264['XFBWa'](addLog,_0x2b590c(0x494,0x4e5,0x4d9,0x490)+'库');const _0x3c41a6={};_0x3c41a6['id']=_0x958225,_0x3c41a6[_0x50f6ef(-0xc4,-0x10d,-0x1d6,-0x14c)]=!![],_0x3c41a6['imageData']=_0x2998b5,_0x3c41a6[_0x50f6ef(-0x22f,-0x1d8,-0x20e,-0x1bc)]=_0x21fe3b,_0x3c41a6[_0x2b590c(0x506,0x4f5,0x48a,0x4ef)]=_0xdee101,eventSource[_0x2b590c(0x446,0x504,0x45d,0x4e9)](EventType[_0x2b590c(0x462,0x46f,0x4bb,0x528)+_0x2b590c(0x537,0x522,0x4b7,0x493)+_0x2b590c(0x4ae,0x4a1,0x42f,0x3be)],_0x3c41a6),addLog(_0x50f6ef(-0x13f,-0xf5,-0x115,-0x15b)+_0x50f6ef(-0x1ff,-0x1d2,-0x13d,-0x172)+_0x958225+')');}catch(_0x8e7d26){const _0x4df4c0='SD生图流程捕获到异'+_0x50f6ef(-0x1f2,-0x27b,-0x271,-0x215)+_0x958225+_0x2b590c(0x4f8,0x497,0x48e,0x43e)+_0x8e7d26[_0x2b590c(0x51c,0x4f3,0x470,0x3ce)];_0xc12264[_0x2b590c(0x394,0x3aa,0x405,0x4a0)](addLog,'错误:\x20'+_0x4df4c0),console['error']('Error\x20gene'+_0x2b590c(0x44d,0x43b,0x4d5,0x46f)+'image:',_0x8e7d26);const _0x874926={};_0x874926['id']=_0x958225,_0x874926['success']=![],_0x874926[_0x2b590c(0x4eb,0x482,0x440,0x396)]=_0x8e7d26[_0x50f6ef(-0x25a,-0x241,-0x114,-0x1ae)],_0x874926[_0x50f6ef(-0x18b,-0x117,-0x20d,-0x1bc)]=_0x21fe3b,eventSource[_0x50f6ef(-0x223,-0x11d,-0x199,-0x1c1)](EventType['GENERATE_I'+_0x50f6ef(-0xf5,-0x1ab,-0x1a5,-0x167)+_0x2b590c(0x4b8,0x4cd,0x42f,0x429)],_0x874926),addLog(_0x2b590c(0x3ea,0x395,0x3c3,0x3ff)+_0x2b590c(0x40a,0x541,0x4ac,0x47a)+_0x958225+')');}}function initializeSDListener(){function _0x26e999(_0x3968cd,_0x3d6140,_0x57cdd1,_0x127042){return _0x40df(_0x3d6140- -0x31,_0x3968cd);}const _0x292900={'ACexC':function(_0x5c7238,_0x5d3db4){return _0x5c7238(_0x5d3db4);}};function _0x466849(_0x519431,_0x548aef,_0x1b8d59,_0x48473f){return _0x40df(_0x548aef- -0x5b,_0x1b8d59);}eventSource['on'](EventType['GENERATE_I'+_0x26e999(0x2a7,0x20b,0x25e,0x281)+'ST'],sdGenerate),_0x292900[_0x466849(0x144,0xf9,0x149,0x1a2)](addLog,_0x26e999(0x227,0x1b0,0x228,0x1eb)+'已初始化。');}function _0x1f84(){const _0x26a338=['CMvTB3zLtgLZDa','z3vmzMi','AKzguw4','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','cI0GkIRMQkhLNOSGke0','rfDuCue','DfzsBMi','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','r2TKCM0','ywrKvgfZAW','Cgf5Bg9Hza','tKLyAMq','AwXLCJOQkIa','77Ym6k+35Qoa5P+LC2r3zwj1','C3rLChm','ywnLCYK6kIOG','C2fTCgXLCL9Uyq','l3nKyxbPl3yXlW','we51DMO','zgLLDKq','uwDnENC','C2rFy2nSAxbFCW','C3vJy2vZCW','B3iGChjVBxb0oG','5Q2J5zYO6ycA6l+hC2r3zwj1','CMf0Aw5Nifneia','teDuqvu','DwPgz1m','Cu9rD2u','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','ruzfwKm','AKnLq1G','DMDjy3C','DePoCeW','DuTlEue','AMfqD1q','of92ywu','uuvdBeu','yxrFBgfZDf9Syq','zvHAwuC','AhjFC2nHBgu','5zon5BQu5yAf5A65oG','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','zeD3sLm','B3nPDgLVBG','zw5LCG','uwDlAfi','C3vIC3rYAw5N','rxjYB3iGz2vUzq','zv9Mywn0B3i','ExvZAgvPzf9Zza','t2nruKm','cI0GkIRPQ5JMUixKV67LPi0G','yKHQr3C','cI0GkIROTj/PNAlMJ5dNPlOG','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','z2u6','cI0GkIRPH4FMOlFMLRNMS5uG','cI0GkIRMLl7LPkFLGi3NJOCG','Aw1Hz2u6','qunLEem','rMjpru4','ANnVBG','CMvZDg9Yzv9Myq','5Q2J5zYO6k6+572U5QIH5z6l5lI6','Bg9Hza','vhbvqw4','zgvtvfu','cI0GkIRPH43NU5JLUyxLUQyG','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','mZqXmZaWqLD4v0Xd','y2vZioIeUoMdQos/RUwKJsdKUlO','ruvkCwy','q1fPBgq','l3bUzZTIyxnLnG','ktOQkIa','qwvPsuy','lI4U','y2XPzw50','55sO5lQo55sF5OIq55QevgfNoIa','BgPbt1O','qxHtBeq','C2vHCMnO','AxPLktOQkIa','6lsF6z2I5lI6oIa','u2nLBMuGq29TCa','mhWXFdv8nhWYFa','y29TCgXLDgvuyq','Cgf5C3rFy2HHDa','EKHSEwm','Aw5PDgLHBgL6zq','CNvUBMLUzW','DhH0mMLTzW','Dg9tDhjPBMC','C3rFy2HHDhu4xW','zeDID3C','yujPrum','svbiAu8','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','C2rFy3vWC2nHBa','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','y2vZ','uNb5A0S','sKn6yK8','ke5Lz2f0AxzLia','mtq5nJy0m2XTBgzoAa','vhHcAg0','rhLQEuC','yxbWBgLJyxrPBW','wef3Awy','zwvKktOQkIa','Df9LBMq','5lIT55QeihbYB21WDooaGG','C2rFy2HPCMvZxW','cI0TlqOJiYmG55sF','of91ChnJywXLCG','AgvPz2H0','y2fJAgu','BMvYyxrPB24','5yYw5lI6igrHDgeGvvi','ifn0CMvUz3rOkq','C2rFy3DPzhrO','zgf0ytPPBwfNzq','suj6BxK','yM5hweq','Bu1tEum','Aw1Hz2vZ','C2tOR7FMSylNLj/LM77PLjNOR686ia','zML4zwrqCM9TCa','zMfJzsdKUlRLVidLKk8','z0fIvxa','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','D2rky20','tMrsAMO','cI0GkIRNP43LRzaGkfm','mtmYotqWywLQANnW','Dgv4Da','y2zNx3nJywXL','DtHFC2rFyxv0Aa','qxfIDvy','mta5nZq5mtjKt0PuDgK','of9TB2rLBa','zty0ioAvSoAnRUwKHoEqHUoaGG','5BEY5ywZ6zET44cc','EM9NqMW','y1bjwu0','wKv0uKW','wLHowMy','C2rvCMW','u0rmAxn0zw5LCG','cI0TlqOGicaG','vxPpDw0','wMTrr3a','y3jPChrZ','BwvRBxa','qurLDgfPBgvY','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','zxbSuu8','cI0GkIPdrKCGuW','ExDrAM4','44cc6k+35Qoa5P+LC2r3zwj1','of9Zyw1WBgvYtG','qKvOA2W','C2rdzMDty2fSzq','C2rFyxv0Aa','thn5reu','EhvuA2e','u2TPCdOQkIa','y2fSztOQkIa','5BI4icHjrdOG','ywHQwNq','BgvNyLa','D3vLBKG','CK9cvKO','6k+V44cc54Q25Ocb56cboIa','C2rFDMfL','Ewj1sKy','wKnjr1G','EhP6DM4','AhndAu4','rLHUwwC','z1nPrxK','wvPKCw4','56cboIa','C3bSAxq','wMfqzMu','Chz3Cgm','B3zLCNjPzgvFCW','CK13Ave','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','z3zjugC','kfjLC3rVCMuGrG','C3rYzw5NDgG','CgfYC2u','mNW0Fdv8mhWZFa','zxH0zw5ZAw9UxW','Bg9N','yxv0Aa','AML1z3vHBG','rhv3Dgq','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','seP2Dva','cI0GkIROHlJPG6JKV67LPi0G','CNHwEvm','ELDksuC','B21WDa','tLnf','reHAq2y','Der4DMe','s3rguM4','C2rFy2fKzxrHAq','mJiYmG','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','5BcD6k+v5l2C5lI65y6F5AEliejHCW','ywn0B3iPoIOQia','6k6+572U5QIH5z6llI4U5lI6','DhjPBq','oIOQia','B1rTAM8','BgvUz3rO','kcGOlISPkYKRkq','C2rFy2nOyxr1xW','CuTXwNG','zxjYB3i','EgLHBMnOzw5N','Avzot3O','DgvWCYK6kIOG','ywPny1G','C2rFC3rVCf9Nzq','zw5HyMXLx2HY','A2LW','C2r3zwj1AEEuN+wBVUwpGG','BMvNyxrPDMvqCG','6zsz6k+VoIa','Bu9Sv3y','DujLy2O','y09OA0q','z2TuzeC','q01VuK4','C3rHDhvZvgv4Da','l2fWAs9Zzc9Nzq','s05msxu','wNPtugO','of9Zy2HLzhvSzq','we1bqvu','kerLBM9PC2LUzW','zMfJzv95B2XVDG','5BEY5yID5AEl5yYw44cc','ue9tva','CMvZDg9YzuzHyW','og4UChq','yxbWBhK','zw1PDa','Dhj1zq','zxr0Aw5NCW','qurxvKm','5yop5PwW5O2U44cc','ChjVBxb0','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','cI0GkIPwquu6kG','sxrYrgm','mJm4mZq5mejpDLznyq','cI0GkIRLSlRLR7GGkfm','BMvYyxrL','vvjbAhG','BLnkz2q','EMTZz3C','rMHlrfe','5Q2J6z2I5O+q56s6icHqCM9T','ExvZAgu','keHPCMvZiezPEa','BwvZC2fNzq','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','kerPDMLKzv9YBW','uLfhuvm','BeDtz0m','sLnptIdOP6pMNPdLPlhOTkxVViW','yw1L','mtGWndq5ngTiswrewq','u2LWwu8','uwvYwhO','Ahjuwfu','l2fWAs9Zzc9Zzq','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','C2vLza','tenlAvK','yxv0B191CMW','u1LgruW','5zU+5y+c5PwW5OQL5zgkcI0GkIO','zuHcDLK','tufhrv9srvfvrq','CMf0Aw5NigLTyq','ywX3yxLZB25FCW','we1Quue','C2rFy3nLzwq','EMfIEeu','DxjS','y2HHBMDL','ifbYB21WDa','z0Hlwu0','Dc1TB2rLBa','ktOG','y29UC3rYDwn0BW','ntC0nte0mhjIwe5uBq','v3vWA3O','u3bmAxy','uhjVBxb0ktOQkG','5yIh5O2I5QIH5z6l5AsX6lsLoIa','uhzHBey','Dg9Rzw4','CKrlq3a','vhL0Exq','ywrFBw9KzwW','44cc5zon5BQu5yAf5A65oIa','zw5HyMXLx2HYia','Aw5JBhvKzxm','C3rHDhvZ','DxbKyxrLu3rHDa','tgnRqLG','s2zoA3m','lcdOR6BMG4u6ia','n0D6q0zOvW','Bw9Kzq','r05fqKC','BgvY','AxnuyxnRsw5rDq','C3rYAw5NAwz5','cI0GkIPdBgLWia','C3PirhG','6AUy5RIf5l+U5Asnios4UG','EwvYCW','icHjrdOG','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','6i635y+w5QIH5z6l5AsX6lsLoIa','BwjmC2S','CNveBMS','Aw5MBW','5lU75yQH5BEY5y+w5RAi','uunUyuG','EMDVq3e','yxjNCW','D2LKDgG','tufhrv9srvnqtW','u0qGqvbjioI/LowBNUMuMq','q2HHCMfJDgvYia','BgvZktOG','r0vorvjbvevFsq'];_0x1f84=function(){return _0x26a338;};return _0x1f84();}export async function replaceWithSd(){function _0x498f5d(_0x1aa93c,_0x37462b,_0x2cdb2b,_0x2c4954){return _0x40df(_0x2cdb2b- -0x334,_0x1aa93c);}const _0x219bf9={'FbOEN':_0x54ec30(-0x1e9,-0x24a,-0x1bb,-0x23b)+'3','ZzSPj':function(_0x1a59a6,_0x3ecad3){return _0x1a59a6===_0x3ecad3;},'wuenH':_0x498f5d(-0x159,-0x86,-0xc9,-0xc4),'OcQRC':function(_0x2b60b5,_0x5609f2){return _0x2b60b5(_0x5609f2);},'gkTdG':function(_0x211981,_0x30c8c7){return _0x211981==_0x30c8c7;},'oNufY':_0x54ec30(-0x141,-0x128,-0xe1,-0x7b),'IPHiO':function(_0x57357f){return _0x57357f();}};function _0x54ec30(_0x166ad9,_0x308bbf,_0x267889,_0x402457){return _0x40df(_0x308bbf- -0x3b8,_0x402457);}if(_0x219bf9[_0x498f5d(-0xd1,-0x156,-0x12d,-0xc0)](extension_settings[extensionName][_0x54ec30(-0x17d,-0x15c,-0xf8,-0x115)],'sd')){if(_0x219bf9[_0x498f5d(-0x186,-0x8a,-0x128,-0xf8)](_0x219bf9['oNufY'],_0x219bf9['oNufY']))!window[_0x54ec30(-0x227,-0x246,-0x23a,-0x1ca)+'SDListener']&&(window[_0x498f5d(-0x205,-0x1a7,-0x1c2,-0x25f)+_0x54ec30(-0x24e,-0x20a,-0x1d8,-0x2a7)]=!![],_0x219bf9['IPHiO'](initializeSDListener)),_0x219bf9[_0x54ec30(-0x2a3,-0x23f,-0x2db,-0x1e0)](initializeImageProcessing);else{const _0x2fceb6=_0x219bf9[_0x498f5d(-0x20b,-0x227,-0x1df,-0x1f1)][_0x54ec30(-0x23f,-0x1e7,-0x237,-0x28f)]('|');let _0x5293ff=-0x246e+0x2*-0xd99+-0x2*-0x1fd0;while(!![]){switch(_0x2fceb6[_0x5293ff++]){case'0':_0x242c4d['xiancheng']=!![];continue;case'1':if(_0x219bf9[_0x54ec30(-0x1fe,-0x1ac,-0x1e4,-0x1fc)](_0x3cbc57['message'],_0x219bf9[_0x498f5d(-0x12c,-0x112,-0x16f,-0x194)])){}else _0x558807[_0x498f5d(-0x170,-0x1fa,-0x1c5,-0x1bd)+'sk'](_0x4d151a,![]);continue;case'2':_0x4564ed['error'](_0x54ec30(-0x1f4,-0x270,-0x285,-0x311)+_0x498f5d(-0x176,-0x12e,-0xf7,-0x77)+'ge:',_0x42b9bb);continue;case'3':throw _0x4659df;continue;case'4':_0x219bf9[_0x498f5d(-0x274,-0x19b,-0x1e9,-0x24b)](_0x3f14d3,_0x498f5d(-0x1ac,-0x19e,-0x19d,-0x135)+_0x3a3a73['message']);continue;case'5':_0x340634=null;continue;}break;}}}else window[_0x498f5d(-0x223,-0x1bb,-0x1c2,-0x261)+_0x54ec30(-0x261,-0x20a,-0x1d1,-0x246)]&&(eventSource[_0x54ec30(-0x18f,-0x143,-0x183,-0x102)+_0x54ec30(-0x212,-0x273,-0x28f,-0x285)](EventType[_0x54ec30(-0x11c,-0x144,-0x1ed,-0x9c)+'MAGE_REQUE'+'ST'],sdGenerate),window[_0x54ec30(-0x28c,-0x246,-0x293,-0x1ab)+_0x498f5d(-0xdd,-0x128,-0x186,-0x119)]=![],addLog('SD\x20生图事件监听器'+_0x498f5d(-0x153,-0x179,-0x18c,-0x156)));}