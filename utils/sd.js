(function(_0x31cedb,_0x1c806e){const _0x19ddc6=_0x31cedb();function _0x3ae488(_0x28495e,_0x14077d,_0x352bee,_0x117fe5){return _0x3ba2(_0x28495e- -0x22d,_0x14077d);}function _0x2ee566(_0x14becb,_0x10f09e,_0x5748c8,_0x420591){return _0x3ba2(_0x14becb-0x390,_0x5748c8);}while(!![]){try{const _0x5392c6=-parseInt(_0x3ae488(0x37,0x62,0x44,0xb9))/(0x1e75+-0x17*0x13a+-0x23e)*(parseInt(_0x3ae488(0x73,0x1a,0xd3,0x111))/(0x1*0x22ed+-0xa98+-0x1853))+-parseInt(_0x2ee566(0x699,0x70a,0x700,0x633))/(-0x899*0x2+0x1*-0x532+0x5*0x47b)*(parseInt(_0x3ae488(0xe5,0x5c,0x150,0x12a))/(-0x7*-0x4e5+0x56e+-0x27ad*0x1))+-parseInt(_0x3ae488(0x14,0xa7,0xa3,0x39))/(0x6*0x112+-0x25f1+-0x2de*-0xb)+parseInt(_0x2ee566(0x631,0x656,0x5cd,0x599))/(-0xe4d+-0x454*0x9+0x3547)*(parseInt(_0x3ae488(0x62,0x6b,0xd4,0x2b))/(-0x19*-0xcd+0x10ff+-0x24fd))+-parseInt(_0x2ee566(0x605,0x63f,0x688,0x61f))/(0x1f*0x29+0x254*-0xe+-0x49*-0x61)*(parseInt(_0x2ee566(0x59a,0x5cf,0x62c,0x56c))/(-0x71*0x43+-0x1*0xea2+0x329*0xe))+-parseInt(_0x3ae488(-0x15,0x37,-0x17,-0x94))/(0xd4+-0x6f7*-0x5+-0x239d)+parseInt(_0x3ae488(-0x3e,0x61,0x5c,0x1f))/(-0x11af*-0x1+-0x13f7+-0x55*-0x7);if(_0x5392c6===_0x1c806e)break;else _0x19ddc6['push'](_0x19ddc6['shift']());}catch(_0x19f4dc){_0x19ddc6['push'](_0x19ddc6['shift']());}}}(_0x3233,0x8f*-0x43b+0xae840+0x6841b));const _0x59898c=(function(){function _0x3144c4(_0x304c5e,_0xa9c6ee,_0x1e9182,_0xd3bc12){return _0x3ba2(_0xd3bc12-0x2b,_0x1e9182);}const _0x19b859={'IrRkZ':'oJgNG','HWYHD':_0x3144c4(0x379,0x2c8,0x28f,0x32e),'WNhxj':function(_0xc7cadb,_0x53c212){return _0xc7cadb(_0x53c212);},'GQliO':'face_yolov'+_0x19e157(0x54b,0x56a,0x55c,0x56e)};let _0x5a1de6=!![];function _0x19e157(_0x1ea8ad,_0x32e092,_0x241a1a,_0x367949){return _0x3ba2(_0x241a1a-0x305,_0x1ea8ad);}return function(_0x327475,_0xa7917d){const _0x2da73c={'oicZK':function(_0x16a742,_0x416606){function _0x143eb3(_0x485566,_0x244586,_0x304344,_0x3b5716){return _0x3ba2(_0x304344- -0x1a6,_0x3b5716);}return _0x19b859[_0x143eb3(0xe5,0x55,0x46,0xb3)](_0x16a742,_0x416606);},'Vcglq':_0x19b859['GQliO']},_0x2ceb50=_0x5a1de6?function(){function _0x5b01a4(_0x1aee75,_0x25a407,_0x286f9f,_0x37589a){return _0x3ba2(_0x286f9f-0x18f,_0x37589a);}function _0x5d0a37(_0x2a4c68,_0xb7b8bd,_0x2dd9ae,_0x7d89a2){return _0x3ba2(_0xb7b8bd- -0xd7,_0x2a4c68);}if(_0x19b859[_0x5b01a4(0x4fb,0x4a7,0x46c,0x48e)]===_0x19b859[_0x5d0a37(0x23b,0x21e,0x1e6,0x2bc)]){_0x2da73c['oicZK'](_0x57f30b,'adetailer_'+_0x5d0a37(0x252,0x1c2,0x227,0x253));const _0x53970e={};_0x53970e[_0x5b01a4(0x429,0x3fb,0x390,0x3db)]=_0x2da73c[_0x5d0a37(0x1db,0x1a8,0x10e,0x116)];const _0x1a643f={};_0x1a643f[_0x5b01a4(0x45a,0x4e7,0x474,0x4ba)]=[!![],!![],_0x53970e];const _0x12b31e={};_0x12b31e[_0x5d0a37(0x16c,0x198,0x1f6,0x190)]=_0x1a643f;const _0x5e6122={};_0x5e6122[_0x5d0a37(0x1bf,0x192,0x1a2,0x1e9)+_0x5b01a4(0x37c,0x3d3,0x407,0x482)]=_0x12b31e,_0x1f6c93=_0x40bfc7(_0x30f942,_0x5e6122);}else{if(_0xa7917d){const _0x37e801=_0xa7917d['apply'](_0x327475,arguments);return _0xa7917d=null,_0x37e801;}}}:function(){};return _0x5a1de6=![],_0x2ceb50;};}()),_0x55ab13=_0x59898c(this,function(){function _0x18257d(_0x3b51bd,_0x203a89,_0x58c7d4,_0x9c6225){return _0x3ba2(_0x3b51bd-0x37,_0x9c6225);}const _0x162eb8={};function _0x2706cb(_0x508102,_0x5716d6,_0x3dceb2,_0x112caf){return _0x3ba2(_0x5716d6- -0x59,_0x508102);}_0x162eb8[_0x18257d(0x274,0x20b,0x25a,0x254)]=_0x18257d(0x2ec,0x2c6,0x360,0x2b3)+'+$';const _0x457648=_0x162eb8;return _0x55ab13[_0x18257d(0x23e,0x229,0x2d4,0x1ea)]()['search'](_0x457648['KRspn'])[_0x2706cb(0x216,0x1ae,0x23d,0x24f)]()[_0x2706cb(0x1e6,0x222,0x271,0x282)+'r'](_0x55ab13)['search'](_0x457648[_0x2706cb(0x253,0x1e4,0x1d0,0x1e5)]);});_0x55ab13();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';function _0x3233(){const _0x56b46d=['zNftrg8','BwrotMG','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','Aw1Hz2veyxrH','yNvREha','5zon5BQu5yAf5A65oG','sNzete4','AxnuyxnRsw5rDq','EgLHBMnOzw5N','sfj3y1u','AeL0yNC','B2nfC2m','vuHgD3a','C3rHDhvZvgv4Da','C2r3zwj1AEEuN+wBVUwpGG','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','zKPOuvi','Aw1Hz2vZ','ExvZAgvPzf9Zza','kerLBM9PC2LUzW','CxvnAMS','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','uNDJwKK','Cu95CwS','vhz6EfO','t0TOAva','Aw5Nx3n0CMvUzW','suq6ia','cI0GkIRMLl7LPkFLGi3NJOCG','zfPuB0e','of92ywu','s1jZCg4','C3vJy2vZCW','5lU75yQH5BEY5y+w5RAi','yxv0Aa','nZC1mZe0merftxDutq','BxLqs0u','5yop5PwW5O2U44cc','u0rmAxn0zw5LCG','cI0GkIRPH4FMOlFMLRNMS5uG','ktOG','BgvUz3rO','Dgv4Da','EwXsC3O','zML4zwrqCM9TCa','kfnHBxbSzxiPoG','5BI4icHjrdOG','AuPiDLi','y2zNx3nJywXL','C3rFy2HHDhu4xW','C2vLza','rxLdAe0','6k+V44cc54Q25Ocb56cboIa','44cc6k+35Qoa5P+LC2r3zwj1','r1nIuxq','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','l2fWAs9Zzc9Zzq','og4UChq','DhH0mMLTzW','nxWZFdj8nhWXFa','Agj3uvq','twvqr3O','BeLgv00','zw5LCG','5yIh5O2I5QIH5z6l5AsX6lsLoIa','DhjPBq','BMvYyxrPB24','cI0TlqOGicaG','y2HHBMDL','vgrcy2O','m2HtrvHWtq','yxbWBhK','yxDLq1u','C2rFy3DPzhrO','AKfUrgq','ywX3yxLZB25FCW','CvbvtLi','BgvZktOG','zxvL','u3rMzLi','zKjtwNK','qurLDgfPBgvY','s0r4tM8','ke5Lz2f0AxzLia','cI0GkIROHlJPG6JKV67LPi0G','q2HHCMfJDgvYia','vvLmrhq','ntCWneToAKTYDq','tvLAr2S','77Ym6k+35Qoa5P+LC2r3zwj1','y3jPChrZ','B3DWD28','CMvZDg9Yzv9Myq','y29UC3rYDwn0BW','kerPDMLKzv9YBW','C3rHDhvZ','A2LW','vMnNBhe','Aw5JBhvKzxm','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','BgvY','zty0ioAvSoAnRUwKHoEqHUoaGG','of9TB2rLBa','uxbus3e','CfvSyuS','ywrKvgfZAW','ChbUA1O','r0vorvjbvevFsq','rvjfzwi','Bg9N','zgf0ytPPBwfNzq','Dfr3swe','cI0GkIRLSlRLR7GGkfm','mJflzw9ivgS','rvbzzvy','z2u6','B2rLBcK6kIOG','5Q2J5zYO6ycA6l+hC2r3zwj1','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','uhjVBxb0ktOQkG','q21LALa','y2XPzw50','CMvTB3zLtgLZDa','zMfJzsdKUlRLVidLKk8','A3PcsvC','CgfYC2u','Dg9Rzw4','Aw1Hz2u6','yLvrsxK','DtHFC2rFyxv0Aa','ndK5mtGYvxrMuuX3','mtK1nZe4mMT2r3rrAG','Cgf5Bg9Hza','ktOQkIa','DxbKyxrLu3rHDa','zgvUB2LZAw5NxW','AwXLCJOQkIa','AfjgCxu','D2PisLC','DhDOEM4','C3rYzw5NDgG','5lIT55QeihbYB21WDooaGG','A2rfq2q','zw5HyMXLx2HYia','DMT4BKy','BvDOz2q','cI0GkIPdBgLWia','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','t1jLCvG','rfDpzu4','DK9bBeW','kcGOlISPkYKRkq','s3v5CK8','lcdOR6BMG4u6ia','Awzfugq','zfvquNC','l3bUzZTIyxnLnG','AgvPz2H0','z3HMsxO','qvfux3nK','5yYw5lI6igrHDgeGvvi','s0TXAwy','y29TCgXLDgvuyq','C2rFy2nSAxbFCW','twTcy3m','6k6+572U5QIH5z6llI4U5lI6','kIOG','5Q2J6z2I5O+q56s6icHqCM9T','Exvxu0K','C2rFy2HLAwDODa','DKr3rNq','56cboIa','zw1PDa','u2vVyMu','C3bSAxq','tLnf','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','qMDUyK0','rNjYDg4','A05PA0u','of9Zyw1WBgvYtG','C2rFDMfL','rNjHDNC','yxv0B191CMW','ChjVBxb0','BMvYyxrL','BwvZC2fNzq','l2fWAs9Zzc9Nzq','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','C3vIC3rYAw5N','qMDdEu8','sxjsA1O','zLH2sw8','u2TPCdOQkIa','ifbYB21WDa','Bw9KzwW','C2rFy3nLzwq','s0ToueC','cI0GkIROTj/PNAlMJ5dNPlOG','yxjNCW','EMn3Egu','uwXNwNy','DgvWCYK6kIOG','Dvr1EgK','of9Zy2HLzhvSzq','whzpyuS','cI0GkIRNP43LRzaGkfm','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','tufhrv9srvfvrq','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','zLjxz04','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','wgLnvwW','ksaTifbYB21WDa','EwvYCW','sfDzseq','wM5Hyue','Df9LBMq','yxrFBgfZDf9Syq','cI0GkIPwquu6kG','AxPLktOQkIa','C2rFy2HPCMvZxW','6i635y+w5QIH5z6l5AsX6lsLoIa','Dc1TB2rLBa','uMnbAgK','uvbLDfe','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','suvkENG','yvbwzMy','zxjYB3i','y2fJAgu','6zQp5PY6kc0Xkq','C2rdzMDty2fSzq','wNntC0G','mJfyqxjYC1G','ue9tva','q0Xjuf9ZDg9WxW','6zsz6k+VoIa','Bvr0zKK','rKH5zhO','v2DRruW','44cc5zon5BQu5yAf5A65oIa','cI0TlqOJiYmG55sF','ntiZmdi0zfzdAxzx','zMvcs0y','zxH0zw5ZAw9UxW','zMDZBMS','B3iGChjVBxb0oG','rxjYB3iGz2vUzq','icHjrdOG','lI4U','55sO5lQo55sF5OIq55QevgfNoIa','Aw5MBW','vLfXz04','yxbWBgLJyxrPBW','5BEY5yID5AEl5yYw44cc','twTSyvO','C2rFyxv0Aa','BMvNyxrPDMvqCG','z3Hez0y','cI0GkIRPQ5JMUixKV67LPi0G','AfDAEeG','tNfACgm','ywnLCYK6kIOG','vwTIDLG','C2tOR7FMSylNLj/LM77PLjNOR686ia','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','u2nLBMuGq29TCa','C0vQt2S','ugjQu08','v05OEgO','C2rFC3rVCf9Nzq','Bg9Hza','nZqXotCYndr4r1nwz0S','keHPCMvZiezPEa','CMf0Aw5Nifneia','C3rYAw5NAwz5','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','v1Pxz3O','v3L5u1m','5BEY5ywZ6zET44cc','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','5zU+5y+c5PwW5OQL5zgkcI0GkIO','sKzuEeC','5BcD6k+v5l2C5lI65y6F5AEliejHCW','BxDLDgG','BI9QC29U','B21WDa','sgfms2C','DxjS','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','ywrFBw9KzwW','CNvUBMLUzW','E+s/RUwBVN0','whHiz2O','C2rFy2fKzxrHAq','B3nPDgLVBG','Dg9tDhjPBMC','AhjFC2nHBgu','C3rLChm','mJe4mJvsqw1pr3q','CMf0Aw5NigLTyq','Aw5PDgLHBgL6zq','BfHouge','rM5Wv3a','zML4','ExvZAgu','A3LMvNm','of91ChnJywXLCG','ywn0B3iPoIOQia','ENfqrKG','y2zlDhO','AKfprhy','C2rFy2nOyxr1xW','mtC5mZa5ntbwEuLZDgy','DgHvAhm','zxr0Aw5NCW','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','ANvdyLy','D2LKDgG'];_0x3233=function(){return _0x56b46d;};return _0x3233();}import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';function _0x3ba2(_0x4f5d0b,_0x27b61b){_0x4f5d0b=_0x4f5d0b-(-0x1686+0xb0*-0x3+0x25*0xb7);const _0x56a4a9=_0x3233();let _0x28aa97=_0x56a4a9[_0x4f5d0b];if(_0x3ba2['hZRbKU']===undefined){var _0x27aa55=function(_0x1934fe){const _0x1c9744='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1f4e20='',_0x11bc47='',_0x46acf1=_0x1f4e20+_0x27aa55;for(let _0x22c76b=0x1*0x1451+-0xd2c+-0x725,_0x56d888,_0x3641e4,_0x45b517=0x1657*0x1+0x1e68+0x283*-0x15;_0x3641e4=_0x1934fe['charAt'](_0x45b517++);~_0x3641e4&&(_0x56d888=_0x22c76b%(-0x1bd9+0x119+0x1ac4)?_0x56d888*(-0xe0b+0x14f2+-0x6a7*0x1)+_0x3641e4:_0x3641e4,_0x22c76b++%(0x633*-0x5+0xfa*-0x1f+-0x1*-0x3d49))?_0x1f4e20+=_0x46acf1['charCodeAt'](_0x45b517+(-0x31*0x91+-0x169e+-0x1*-0x3269))-(-0x11dd+0x6*-0x5e7+0x3551)!==-0x13e3+0x54d*0x1+-0x2*-0x74b?String['fromCharCode'](-0x5*-0x673+0x1*0x166a+-0x2*0x1ad5&_0x56d888>>(-(0x65*0x41+-0x1*0x1145+-0x85e)*_0x22c76b&-0x1999+0x172*-0x2+0x1c83)):_0x22c76b:0x1f5*-0x13+-0x50e+0x2a3d){_0x3641e4=_0x1c9744['indexOf'](_0x3641e4);}for(let _0x378af3=0x151e*-0x1+-0x12d2+0x27f0,_0x2ddb1e=_0x1f4e20['length'];_0x378af3<_0x2ddb1e;_0x378af3++){_0x11bc47+='%'+('00'+_0x1f4e20['charCodeAt'](_0x378af3)['toString'](0x39e*-0x5+0x3b9*-0x3+-0x5*-0x5dd))['slice'](-(-0x262c*-0x1+-0x12df*-0x1+-0x3909));}return decodeURIComponent(_0x11bc47);};_0x3ba2['WtALTT']=_0x27aa55,_0x3ba2['arSMVG']={},_0x3ba2['hZRbKU']=!![];}const _0x57354a=_0x56a4a9[0x2225+-0x1d9a+-0x48b],_0x47f06d=_0x4f5d0b+_0x57354a,_0x3bff78=_0x3ba2['arSMVG'][_0x47f06d];if(!_0x3bff78){const _0x3a190b=function(_0x1ba7a9){this['VnmYWB']=_0x1ba7a9,this['kRITbv']=[0x9fe*-0x3+-0x167d+0x17*0x248,-0x13c4+-0xc*0x207+-0x583*-0x8,0x4b8+0x1bc7+-0xad5*0x3],this['NBJVna']=function(){return'newState';},this['tZsROH']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['yqrCtd']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3a190b['prototype']['bAQTqK']=function(){const _0x24cde5=new RegExp(this['tZsROH']+this['yqrCtd']),_0x5c1d48=_0x24cde5['test'](this['NBJVna']['toString']())?--this['kRITbv'][0x5*0x657+0x2254+-0x9*0x756]:--this['kRITbv'][-0x22c8+0x1*0x209a+0x3*0xba];return this['mIXzkj'](_0x5c1d48);},_0x3a190b['prototype']['mIXzkj']=function(_0x3007f3){if(!Boolean(~_0x3007f3))return _0x3007f3;return this['kUWiey'](this['VnmYWB']);},_0x3a190b['prototype']['kUWiey']=function(_0x32ba70){for(let _0x5bdcf6=-0x1609*-0x1+-0x1c1+-0x289*0x8,_0x5458df=this['kRITbv']['length'];_0x5bdcf6<_0x5458df;_0x5bdcf6++){this['kRITbv']['push'](Math['round'](Math['random']())),_0x5458df=this['kRITbv']['length'];}return _0x32ba70(this['kRITbv'][-0x2*0xacf+0x1850+-0x8a*0x5]);},new _0x3a190b(_0x3ba2)['bAQTqK'](),_0x28aa97=_0x3ba2['WtALTT'](_0x28aa97),_0x3ba2['arSMVG'][_0x47f06d]=_0x28aa97;}else _0x28aa97=_0x3bff78;return _0x28aa97;}import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;async function generateSDImage({prompt:_0x41c1c2,width:_0x47fd62,height:_0x48763b,change:_0x1f179b}){const _0x3e2722={'MePGz':function(_0x380a12){return _0x380a12();},'XghNr':function(_0x24eaa5){return _0x24eaa5();},'fqSDo':_0x17f1e5(0x373,0x3d2,0x44b,0x3bf)+'已关闭。','uTuxi':function(_0x369c32,_0x52630d){return _0x369c32+_0x52630d;},'fgsnk':function(_0x33143a,_0x547c07){return _0x33143a(_0x547c07);},'FnpWp':_0x385d96(0xd7,0xfc,0x17d,0x160)+_0x17f1e5(0x456,0x45d,0x4b9,0x443),'ifEPd':'Scene\x20Comp'+_0x17f1e5(0x3e3,0x404,0x416,0x398),'StffR':function(_0x157ab4,_0x2a7ea5){return _0x157ab4<=_0x2a7ea5;},'MklaZ':function(_0x4a327b,_0x25a651){return _0x4a327b+_0x25a651;},'bPuuy':function(_0x53b640,_0x524405){return _0x53b640+_0x524405;},'iJHvR':function(_0x39bad9,_0x511dea){return _0x39bad9(_0x511dea);},'mweth':'任务已被用户取消。','MkBcs':_0x385d96(0x87,0xed,0x164,0xd1),'ykwiE':_0x385d96(0xac,0x61,0x168,0xeb)+'0','Seobe':_0x17f1e5(0x4a0,0x50c,0x4ac,0x4a9)+_0x17f1e5(0x30b,0x326,0x3d0,0x39d)+_0x17f1e5(0x4ba,0x473,0x3c5,0x423),'QlgZv':function(_0x1641e3,_0x2645ca){return _0x1641e3===_0x2645ca;},'tTwIa':function(_0x1c9e20,_0x5d94b1){return _0x1c9e20(_0x5d94b1);},'ocEsc':_0x17f1e5(0x4c1,0x4a4,0x4a6,0x492)+_0x385d96(0xca,0xb5,0x12d,0xd5),'JFTxG':function(_0x3b4681){return _0x3b4681();},'BgnbM':function(_0x325531,_0xbe0f97){return _0x325531>_0xbe0f97;},'WZWgz':'...','OTzFz':function(_0x2f2d27,_0x31f07f){return _0x2f2d27(_0x31f07f);},'WyySS':function(_0x10b331,_0x11f223){return _0x10b331!==_0x11f223;},'QPetQ':_0x17f1e5(0x3fd,0x49c,0x419,0x482),'YrEEg':function(_0x69ee41,_0x1ccb77){return _0x69ee41+_0x1ccb77;},'vOAlL':function(_0x15bcfc,_0x1a8531){return _0x15bcfc+_0x1a8531;},'YGQYv':'标准模式:\x20使用请求'+_0x385d96(0xe4,0xad,0x150,0x13d),'ppnkZ':function(_0x591de7,_0x464821,_0x215106){return _0x591de7(_0x464821,_0x215106);},'mdNNh':function(_0x36def0,_0x35f319){return _0x36def0!==_0x35f319;},'MYZGk':_0x385d96(0x15d,0x173,0x105,0x148),'ylRsz':function(_0x2b44da,_0x26bbb0){return _0x2b44da+_0x26bbb0;},'cfKtz':function(_0x5cf0ca,_0x49e2a){return _0x5cf0ca(_0x49e2a);},'rdgOC':function(_0x48178e,_0x759ad9,_0x1ce264,_0x5b72e6,_0x35daa8,_0x2cb88f){return _0x48178e(_0x759ad9,_0x1ce264,_0x5b72e6,_0x35daa8,_0x2cb88f);},'mTtfI':function(_0x2cb436,_0x4b2b62){return _0x2cb436(_0x4b2b62);},'sEjOk':_0x17f1e5(0x505,0x406,0x4eb,0x467),'jAnDd':_0x17f1e5(0x4bb,0x440,0x495,0x488),'UkbvX':_0x17f1e5(0x3bb,0x3c6,0x345,0x3a6),'zcwxe':'jiuguan','fXvIo':'ZsSsH','feBKF':_0x17f1e5(0x470,0x532,0x477,0x49c),'EREeb':function(_0x4522af,_0x401cc2){return _0x4522af(_0x401cc2);},'kzBIW':_0x385d96(0x46,0x83,0x43,0xba),'HaLKg':function(_0x110e78,_0x147a0d){return _0x110e78(_0x147a0d);},'GSbQt':'cmodel2222'+'2222','wjHJW':function(_0xcd1cee,_0x2729c5){return _0xcd1cee===_0x2729c5;},'PbjSO':'zxFfT','kdECd':'RgaTh','dZToA':function(_0x1b7e2c,_0x3a0007){return _0x1b7e2c(_0x3a0007);},'hRFqu':_0x385d96(0x124,0x181,0xed,0xe8)+_0x385d96(0x1e9,0x1c5,0x220,0x18f),'XvOaK':function(_0x459e55,_0x14105e){return _0x459e55(_0x14105e);},'XxHgj':'zUbkO','thUhs':_0x385d96(0x1b2,0x1c1,0x1fb,0x194),'vDwFt':function(_0xfeea1f,_0x3781c5){return _0xfeea1f(_0x3781c5);},'dEuan':function(_0x300c41,_0x2ce16b){return _0x300c41!=_0x2ce16b;},'RVePu':function(_0x4659cb,_0x51995c){return _0x4659cb(_0x51995c);},'GEtgH':function(_0x51a96a,_0x4fcf78){return _0x51a96a!==_0x4fcf78;},'juCbV':function(_0x394039,_0x58180f){return _0x394039!==_0x58180f;},'uwfDC':function(_0x2a8597,_0x5b0d3a){return _0x2a8597(_0x5b0d3a);},'kNikE':function(_0x2684a,_0x23c4d7){return _0x2684a(_0x23c4d7);},'gxfIz':function(_0x18a37b,_0x101042){return _0x18a37b>=_0x101042;},'OReqX':function(_0x47363d,_0x41f843){return _0x47363d(_0x41f843);},'bukxp':function(_0x1aa567,_0x3a30ca){return _0x1aa567==_0x3a30ca;},'JvDLN':'true','FDVza':function(_0x166214,_0x24b8af){return _0x166214(_0x24b8af);},'TdBcj':_0x385d96(0xd3,0xf9,0xb,0x75),'myPKE':'adetailer_'+'face\x20为开启','kyfVs':function(_0x5990bc,_0xa198d1,_0x510039){return _0x5990bc(_0xa198d1,_0x510039);},'yhNbO':'face_yolov'+'8n.pt','kftJC':function(_0x5e9f6a,_0xd7b4d6){return _0x5e9f6a===_0xd7b4d6;},'BfaPK':_0x17f1e5(0x408,0x419,0x442,0x498),'mWhgd':function(_0x35d2d3,_0x28ca62){return _0x35d2d3(_0x28ca62);},'pUlaK':_0x385d96(0x1cc,0x106,0x18c,0x134),'WgkEL':_0x385d96(0xf1,0x152,0xf0,0x158),'bUQIy':_0x385d96(0x24,0xf3,0x68,0x94),'GHrZd':function(_0x10ccae,_0x5ea8bc){return _0x10ccae===_0x5ea8bc;},'VQqgN':_0x385d96(0xc9,0xce,0x11c,0xa8),'fJhQR':'payst_chat'+_0x17f1e5(0x477,0x495,0x4c4,0x431)+_0x17f1e5(0x39b,0x362,0x40a,0x380),'OKhiP':_0x17f1e5(0x474,0x3fe,0x456,0x46b)+_0x17f1e5(0x472,0x4b6,0x506,0x469),'lIFWM':_0x385d96(0x6b,0x10b,0xea,0xb5),'FzFEP':_0x17f1e5(0x42a,0x452,0x483,0x400),'Fravw':function(_0x4e6796,_0x18a37f){return _0x4e6796+_0x18a37f;},'EyChM':function(_0x43544d,_0x110ef0){return _0x43544d||_0x110ef0;},'aweCU':function(_0x500e8a,_0x2dbf69){return _0x500e8a!==_0x2dbf69;},'NWItr':_0x17f1e5(0x3e2,0x470,0x39e,0x43b),'apppb':'/sdapi/v1/'+_0x17f1e5(0x3b6,0x397,0x372,0x3ea),'KKNPG':function(_0x3996a3,_0x13d51b,_0x1c96f2){return _0x3996a3(_0x13d51b,_0x1c96f2);},'EPYeV':_0x17f1e5(0x53f,0x515,0x508,0x4af)+_0x17f1e5(0x2fb,0x41a,0x3ad,0x38e),'cANKH':function(_0x181a42){return _0x181a42();},'qOyqk':_0x385d96(0xdb,0x114,0x199,0x11e)+_0x17f1e5(0x4ac,0x4a6,0x495,0x44c)+'4,','RwcZI':function(_0x202bc5,_0x30e6eb){return _0x202bc5(_0x30e6eb);},'HRwcU':function(_0x53cf98,_0x83982d){return _0x53cf98||_0x83982d;},'quMjk':_0x17f1e5(0x410,0x40b,0x381,0x3c8),'BgCyO':function(_0x3cf6a2,_0x181449){return _0x3cf6a2===_0x181449;},'gxDgF':'akpfF'};_0x3e2722[_0x17f1e5(0x379,0x41b,0x329,0x38b)](clearLog);const _0x38281f=taskQueue[_0x17f1e5(0x431,0x415,0x480,0x419)]({'name':(_0x41c1c2||'')[_0x385d96(0xf8,0x180,0x18e,0x16d)](-0x1b02+-0x726+0x2228,-0x2*-0x373+-0x3*-0x878+-0x2030)+(_0x41c1c2&&_0x3e2722[_0x385d96(0x1d4,0x177,0x163,0x161)](_0x41c1c2[_0x385d96(0xd9,0x14f,0xe5,0xd9)],-0x238+0x1744+0x72*-0x2f)?_0x3e2722[_0x17f1e5(0x3e9,0x419,0x306,0x386)]:''),'type':TaskType['SD'],'prompt':_0x41c1c2});currentTaskId=_0x38281f;let _0x2a62cf=_0x1f179b;_0x41c1c2=_0x3e2722['OTzFz'](processCharacterPrompt,_0x41c1c2),_0x1f179b=_0x3e2722[_0x17f1e5(0x42c,0x461,0x476,0x3df)](processCharacterPrompt,_0x1f179b),_0x41c1c2=await _0x3e2722['OTzFz'](stripChineseAnnotations,_0x41c1c2),_0x1f179b=await _0x3e2722[_0x385d96(0x110,0x1d5,0x153,0x1a7)](stripChineseAnnotations,_0x1f179b);const _0x1e86e7=extension_settings[extensionName]['sdUrl'][_0x385d96(0x117,0x17b,0x190,0xf1)](),_0x375f7c=extension_settings[extensionName];_0x3e2722[_0x385d96(0x85,0x10d,0x167,0xdf)](addLog,_0x17f1e5(0x45d,0x49e,0x419,0x425)+_0x17f1e5(0x3fe,0x2fd,0x2f9,0x385)+'端为'+_0x375f7c[_0x385d96(0x1bc,0x18c,0x10f,0x129)]+',模型为'+_0x375f7c[_0x17f1e5(0x397,0x400,0x37c,0x3a9)+_0x385d96(0xaf,0x1a1,0x146,0x116)]);const _0x3e516d=_0x1f179b&&_0x3e2722[_0x17f1e5(0x3d0,0x33d,0x3b8,0x387)](_0x1f179b[_0x17f1e5(0x39f,0x3f9,0x3b5,0x3f1)](),'')?_0x1f179b:_0x41c1c2;addLog(_0x385d96(0x1e2,0x10d,0x11e,0x1ac)+_0x3e516d);let _0x5098bb=![];function _0x385d96(_0x800fe2,_0x1bf222,_0x10bd6d,_0x3f4133){return _0x3ba2(_0x3f4133- -0x16e,_0x800fe2);}_0x3e516d[_0x385d96(0x12e,0x119,0x12c,0x112)](_0x17f1e5(0x3fa,0x350,0x36c,0x37b)+'osition')&&(_0x5098bb=!![]);addLog(_0x385d96(0xc9,0xf8,0x12a,0x126)+_0x385d96(0xf6,0x145,0x12d,0x10e)+_0x385d96(0x121,0x69,0x77,0xfd)+_0x5098bb);let _0x5401db={},_0x2437ef='',_0x51309a='';if(_0x5098bb){_0x3e2722[_0x385d96(0x13c,0xd3,0x11a,0x11f)](addLog,_0x3e2722['FnpWp']),_0x5401db=parsePromptStringWithCoordinates(_0x3e516d),_0x2437ef=_0x5401db[_0x3e2722['ifEPd']];for(let _0x36f167=0x1320+-0x10d2+-0x24d;_0x3e2722[_0x385d96(0x93,0x19f,0x185,0xff)](_0x36f167,-0x1*0x4e7+-0x1fa*-0x3+-0x103);_0x36f167++){_0x3e2722['WyySS'](_0x3e2722[_0x385d96(0x19b,0x1ee,0x213,0x191)],_0x3e2722[_0x385d96(0x14f,0x165,0x1b0,0x191)])?(!_0x2fc4ab['initialize'+'SDListener']&&(_0x7bd685[_0x17f1e5(0x30c,0x3a1,0x32a,0x39e)+_0x385d96(0x149,0x7c,0xd5,0xd6)]=!![],_0x3e2722[_0x385d96(0x142,0xb7,0x10d,0xed)](_0x3731f9)),_0x3e2722['XghNr'](_0x2caf9e)):_0x5401db['Character\x20'+_0x36f167+'\x20Prompt']&&(_0x51309a=_0x3e2722['YrEEg'](_0x3e2722[_0x385d96(0x1aa,0xdf,0xba,0x146)](_0x51309a,',\x20'),_0x5401db[_0x17f1e5(0x4a2,0x4a5,0x48a,0x405)+_0x36f167+_0x17f1e5(0x408,0x4b1,0x492,0x472)]));}}else _0x3e2722[_0x17f1e5(0x33f,0x372,0x380,0x3df)](addLog,_0x3e2722['YGQYv']),_0x2437ef=_0x3e516d;let {modifiedPrompt:_0x508f1a,insertions:_0xba4646}=await _0x3e2722[_0x385d96(0x1a5,0x80,0x120,0x11a)](prompt_replace,_0x2437ef,_0x51309a);function _0x17f1e5(_0x24a86f,_0xdc00b8,_0x30802a,_0x25e03d){return _0x3ba2(_0x25e03d-0x192,_0x30802a);}if(_0x5098bb)for(let _0x164d9f=0xad5+-0x2*0xfab+0x46*0x4b;_0x3e2722[_0x17f1e5(0x48d,0x3f9,0x45e,0x3ff)](_0x164d9f,0x13bc*0x1+0x2*-0xd55+0x6f2);_0x164d9f++){_0x3e2722['mdNNh']('Vumjz',_0x3e2722[_0x385d96(0x139,0x88,0x172,0x108)])?_0x5401db[_0x385d96(0x16d,0x16a,0x19c,0x105)+_0x164d9f+_0x385d96(0x100,0x181,0xf9,0x172)]&&(_0x508f1a=_0x3e2722[_0x17f1e5(0x3c2,0x3a5,0x343,0x3db)](_0x3e2722['uTuxi'](_0x508f1a,',\x20'),_0x3e2722[_0x385d96(0xd1,0x63,0x8b,0xa7)](prompt_replace_for_character,_0x5401db['Character\x20'+_0x164d9f+'\x20Prompt']))):_0x394028[_0x385d96(0xf8,0x64,0x114,0x9e)+_0x385d96(0x133,0x3d,0xef,0xd6)]&&(_0x585d18['removeList'+_0x385d96(0x88,0x187,0x4e,0xef)](_0x270af3[_0x17f1e5(0x3ed,0x4a1,0x405,0x41b)+_0x17f1e5(0x4bd,0x4c1,0x401,0x480)+'ST'],_0x460fd2),_0x40b47a[_0x17f1e5(0x351,0x317,0x3c4,0x39e)+_0x385d96(0xa8,0x93,0xae,0xd6)]=![],_0x10e246(_0x3e2722[_0x17f1e5(0x3a5,0x33c,0x315,0x3b0)]));}let _0xa6b812=await _0x3e2722['rdgOC'](zhengmian,extension_settings[extensionName][_0x385d96(0x2c,0x132,0x3d,0xa2)][extension_settings[extensionName]['yusheid_sd']][_0x17f1e5(0x38d,0x368,0x42d,0x3dc)+'t'],_0x508f1a,extension_settings[extensionName][_0x17f1e5(0x3f2,0x3f1,0x3c8,0x3a2)][extension_settings[extensionName][_0x17f1e5(0x3b7,0x43d,0x410,0x3c2)]][_0x385d96(0xe3,0x143,0x13f,0xdc)+_0x385d96(0x193,0x14b,0x210,0x189)],extension_settings[extensionName][_0x17f1e5(0x3bf,0x3cf,0x406,0x44f)],_0xba4646),_0xbc25f0=await _0x3e2722[_0x385d96(0x93,0x1aa,0x79,0x11a)](fumian,extension_settings[extensionName][_0x385d96(0x137,0x112,0xd2,0xa2)][extension_settings[extensionName][_0x385d96(0x4f,0x87,0x10d,0xc2)]][_0x385d96(0xde,0xef,0x50,0x72)+_0x17f1e5(0x324,0x326,0x3b1,0x38f)],extension_settings[extensionName]['UCP_sd']);_0x3e2722[_0x17f1e5(0x417,0x439,0x437,0x49f)](addLog,'负面为:\x20'+_0xbc25f0),extension_settings['sd'][_0x3e2722[_0x17f1e5(0x31c,0x3d2,0x411,0x37c)]]=_0x1e86e7,await _0x3e2722[_0x17f1e5(0x46b,0x3af,0x477,0x3ed)](saveSettingsDebounced);try{if(_0x3e2722[_0x17f1e5(0x3ba,0x455,0x49a,0x3fa)]===_0x3e2722[_0x17f1e5(0x3be,0x382,0x3bd,0x378)])_0x1f4e20=_0x3e2722['uTuxi'](_0x11bc47+',\x20',_0x3e2722['fgsnk'](_0x46acf1,_0x22c76b[_0x385d96(0xd7,0x11b,0x80,0x105)+_0x56d888+_0x17f1e5(0x455,0x493,0x50f,0x472)]));else{if(_0x3e2722[_0x17f1e5(0x449,0x48a,0x4f2,0x479)](_0x375f7c[_0x385d96(0x13e,0x105,0xac,0x129)],_0x3e2722[_0x17f1e5(0x4dc,0x461,0x3fe,0x478)])){if(_0x3e2722[_0x385d96(0x3b,0x13a,0x59,0xb1)](_0x17f1e5(0x4d1,0x530,0x502,0x49a),_0x3e2722[_0x17f1e5(0x3de,0x3f8,0x4a9,0x470)])){_0x3e2722[_0x17f1e5(0x4f3,0x4ed,0x45b,0x4a7)](_0x4008ed,_0x3e2722[_0x17f1e5(0x3b3,0x38c,0x3d2,0x3a0)]),_0x4b169a=_0x3e2722[_0x385d96(0x1da,0x179,0x150,0x1a7)](_0x3aca06,_0x269946),_0x2dd200=_0x1071da[_0x3e2722[_0x385d96(0x1b4,0x111,0x10e,0x14a)]];for(let _0x46e91c=-0x1*0x24d4+0x1323+0x11b2;_0x3e2722[_0x17f1e5(0x374,0x478,0x475,0x3ff)](_0x46e91c,0x1*0x18a7+0xc81+-0x1*0x2524);_0x46e91c++){_0x5368d7[_0x17f1e5(0x423,0x3fe,0x433,0x405)+_0x46e91c+_0x385d96(0x1f5,0xed,0x1b4,0x172)]&&(_0x18b7d8=_0x3e2722['uTuxi'](_0x3e2722[_0x17f1e5(0x31c,0x3af,0x337,0x370)](_0x4f0cb5,',\x20'),_0x5c952c[_0x17f1e5(0x48e,0x40b,0x48e,0x405)+_0x46e91c+_0x17f1e5(0x409,0x4aa,0x508,0x472)]));}}else{const _0x3603dc={};_0x3603dc[_0x17f1e5(0x438,0x42c,0x3b2,0x3d2)]=_0x375f7c[_0x17f1e5(0x472,0x470,0x46c,0x3e1)+_0x17f1e5(0x410,0x391,0x2e9,0x371)]?_0x375f7c[_0x17f1e5(0x3fd,0x3ce,0x376,0x3e1)+_0x385d96(0xb1,0x5f,-0x2b,0x71)]:'',_0x3603dc[_0x17f1e5(0x407,0x327,0x403,0x391)]=_0x1e86e7;const _0x4e69be=await _0x3e2722['ppnkZ'](fetch,'/api/sd/ge'+_0x385d96(0x1cb,0x111,0x1cb,0x18f),{'method':_0x3e2722[_0x17f1e5(0x416,0x414,0x510,0x4a5)],'body':JSON[_0x17f1e5(0x32c,0x385,0x39a,0x384)](_0x3603dc),'headers':_0x3e2722[_0x385d96(0x1ab,0x12f,0x191,0x11c)](getRequestHeaders,window[_0x17f1e5(0x3bd,0x3b3,0x3a0,0x42e)])});if(!_0x4e69be['ok']){if(_0x3e2722['kzBIW']===_0x3e2722[_0x385d96(0xf7,0x162,0x106,0x12c)]){_0x3e2722[_0x385d96(0x4d,0x11c,0x56,0x90)](addLog,_0x385d96(0x20f,0x196,0x203,0x18e)+_0x4e69be[_0x385d96(0x128,0x7d,0x180,0x10f)]+'\x20'+_0x4e69be['statusText']);throw new Error('获取模型失败:\x20'+_0x4e69be[_0x17f1e5(0x39a,0x3d5,0x42e,0x40f)]+'\x20'+_0x4e69be[_0x385d96(0xea,0x4a,0xdf,0xbd)]);}else{const _0x59b6c7=_0x4a49aa[_0x385d96(0xf3,0x182,0x124,0xf7)](_0x43c053,arguments);return _0x19e19c=null,_0x59b6c7;}}let _0x5bae22=await _0x4e69be[_0x385d96(0x157,0x50,0xcb,0xda)]();console[_0x385d96(0x175,0x1a3,0x186,0x11d)](_0x3e2722[_0x17f1e5(0x41a,0x3e1,0x3b5,0x3e6)],_0x5bae22),console[_0x17f1e5(0x3ee,0x428,0x47c,0x41d)](_0x17f1e5(0x43d,0x475,0x4d7,0x4a6)+'settingss.'+'sd_cchatu_'+_0x385d96(0x1ac,0xea,0x81,0x116),_0x375f7c['sd_cchatu_'+_0x17f1e5(0x431,0x413,0x37d,0x416)]);if(_0x5bae22!=_0x375f7c[_0x17f1e5(0x3e5,0x3fa,0x323,0x3a9)+_0x385d96(0x174,0x81,0x188,0x116)]){if(_0x3e2722[_0x385d96(0xc7,0xa7,0x1c7,0x13a)](_0x3e2722[_0x385d96(0x10a,0x27,-0xb,0x7d)],_0x3e2722[_0x385d96(0xba,0xae,0x11f,0x13e)])){const _0xbf11df=_0x48e954?function(){function _0x26b3f5(_0x8e7deb,_0x5a3bf5,_0x8cf8a2,_0x244d9b){return _0x17f1e5(_0x8e7deb-0x1e8,_0x5a3bf5-0x14,_0x8e7deb,_0x5a3bf5- -0x28d);}if(_0x1e8be2){const _0x259683=_0x534170[_0x26b3f5(0x1a8,0x16a,0x15b,0x197)](_0x44bd49,arguments);return _0x9db4da=null,_0x259683;}}:function(){};return _0x1b0190=![],_0xbf11df;}else{_0x3e2722[_0x17f1e5(0x3d7,0x3f4,0x426,0x3cd)](addLog,'正在设置模型为'+_0x375f7c[_0x385d96(0xa3,0x129,0x13,0xa9)+_0x385d96(0xff,0xbb,0xcc,0x116)]+_0x17f1e5(0x4d9,0x51f,0x436,0x4ab)),toastr[_0x17f1e5(0x44b,0x506,0x43b,0x4ad)]('正在设置模型...为'+_0x375f7c[_0x385d96(0x2d,0x16,0xdb,0xa9)+_0x17f1e5(0x383,0x3a6,0x3cf,0x416)]);const _0x305916={};_0x305916['auth']=_0x375f7c[_0x385d96(0x15e,0xd4,0x63,0xe1)+_0x17f1e5(0x369,0x3e1,0x382,0x371)]?_0x375f7c['st_chatu8_'+_0x385d96(0xd9,0x10e,0x33,0x71)]:'',_0x305916[_0x385d96(0x63,0x11a,-0x6,0x91)]=_0x1e86e7,_0x305916[_0x385d96(0x117,0x1e0,0x1f1,0x173)]=_0x375f7c[_0x17f1e5(0x3cd,0x436,0x3d9,0x3a9)+_0x385d96(0xea,0xa4,0x90,0x116)];const _0x5caecc=await fetch(_0x3e2722[_0x385d96(0xe3,0xd8,0xaf,0x139)],{'method':_0x3e2722[_0x17f1e5(0x473,0x4d0,0x50b,0x4a5)],'body':JSON[_0x17f1e5(0x2e5,0x3ed,0x340,0x384)](_0x305916),'headers':_0x3e2722[_0x17f1e5(0x41b,0x4aa,0x512,0x47d)](getRequestHeaders,window[_0x17f1e5(0x459,0x48d,0x492,0x42e)])});if(!_0x5caecc['ok']){addLog(_0x385d96(0x99,0x75,0x180,0xf0)+_0x5caecc[_0x385d96(0xaf,0x11d,0x141,0x10f)]+'\x20'+_0x5caecc[_0x17f1e5(0x38e,0x3b4,0x360,0x3bd)]);throw new Error('切换模型失败:\x20'+_0x5caecc[_0x385d96(0x105,0x125,0xc9,0x10f)]+'\x20'+_0x5caecc[_0x385d96(0x53,0x115,0xf3,0xbd)]);}toastr[_0x17f1e5(0x458,0x460,0x462,0x4ad)](_0x17f1e5(0x458,0x4c2,0x46f,0x455)+_0x375f7c['sd_cchatu_'+_0x17f1e5(0x3c7,0x3cb,0x443,0x416)]+'成功');}}}}else{if(_0x3e2722[_0x17f1e5(0x361,0x39c,0x3c9,0x396)]===_0x3e2722[_0x17f1e5(0x3f7,0x321,0x334,0x3ab)])_0x3e2722[_0x385d96(0x1e6,0x1e4,0x19e,0x1a7)](_0x5f23d7,_0x385d96(0x10c,0x1f0,0x1f0,0x181)+'库');else{let _0x5c77d2=await _0x3e2722[_0x385d96(0x172,0x102,0x1bb,0x15a)](getSDMode,_0x1e86e7);_0x3e2722['dEuan'](_0x5c77d2,_0x375f7c[_0x17f1e5(0x426,0x446,0x3d8,0x3a9)+_0x385d96(0xa3,0x16a,0xb0,0x116)])&&(_0x3e2722['RVePu'](addLog,_0x17f1e5(0x3c3,0x3bd,0x428,0x3ad)+_0x375f7c[_0x385d96(0xc3,0x54,0x30,0xa9)+_0x17f1e5(0x439,0x3fa,0x382,0x416)]+_0x385d96(0x1b4,0x1a8,0x1ad,0x1ab)),await setSDMode(_0x1e86e7,_0x375f7c[_0x385d96(0x86,0xab,0xb9,0xa9)+_0x17f1e5(0x45d,0x417,0x434,0x416)]));}}}}catch(_0x1af32d){_0x3e2722[_0x17f1e5(0x452,0x3dd,0x3af,0x3df)](addLog,_0x17f1e5(0x3f4,0x345,0x34b,0x389)+':\x20'+_0x1af32d['message']+(_0x385d96(0x5c,0x50,0x143,0xe5)+_0x17f1e5(0x4ff,0x517,0x40b,0x47f)+_0x385d96(0x114,0x1a2,0x1c1,0x193))),taskQueue[_0x385d96(0x14b,0xcd,0xd7,0x152)+'sk'](_0x38281f,![]),currentTaskId=null;throw new Error(_0x385d96(0x78,0x111,0x4,0x89)+_0x17f1e5(0x44d,0x45c,0x399,0x409)+_0x385d96(0x210,0x200,0x1fe,0x17f)+_0x17f1e5(0x4ee,0x4e0,0x466,0x493));}let _0x2f61e4=-(0x1*0x72e+-0x1*-0x1065+0x35e*-0x7);const _0x30b306=_0x375f7c[_0x385d96(0x100,0x170,0x1ef,0x174)];_0x3e2722['GEtgH'](_0x30b306,'')&&_0x3e2722[_0x385d96(0x30,0x42,0x12,0xae)](_0x30b306,null)&&!_0x3e2722['uwfDC'](isNaN,_0x3e2722[_0x385d96(0x194,0xe9,0x173,0x163)](Number,_0x30b306))&&_0x3e2722[_0x17f1e5(0x4ca,0x3f4,0x4c0,0x44e)](_0x3e2722[_0x17f1e5(0x3b7,0x404,0x3e9,0x444)](Number,_0x30b306),-0x23*0xf3+-0x251*-0x4+0x1*0x17f5)&&(_0x2f61e4=Number(_0x30b306));let _0x4cb2d7={'prompt':_0xa6b812,'negative_prompt':_0xbc25f0,'sampler_name':_0x375f7c['sd_cchatu_'+_0x385d96(0x128,0x1f4,0x1d1,0x164)+'ame'],'scheduler':_0x375f7c[_0x385d96(0x63,0x1d,0xe1,0xa9)+_0x17f1e5(0x40d,0x467,0x468,0x47c)+'r'],'steps':_0x375f7c['sd_csteps'],'cfg_scale':_0x375f7c[_0x385d96(0x160,0x1d9,0x148,0x199)],'width':_0x47fd62?_0x47fd62:_0x375f7c[_0x17f1e5(0x37c,0x366,0x3ea,0x3f9)],'height':_0x48763b?_0x48763b:_0x375f7c[_0x385d96(0x1e0,0xd3,0x172,0x159)],'restore_faces':_0x3e2722[_0x17f1e5(0x342,0x36f,0x371,0x3b4)](_0x375f7c['restoreFac'+'es'],_0x3e2722['JvDLN']),'enable_hr':_0x3e2722['bukxp'](_0x375f7c[_0x17f1e5(0x440,0x434,0x4d0,0x48d)+_0x385d96(0xf5,0xcf,0x41,0xa1)],_0x3e2722[_0x17f1e5(0x3a1,0x385,0x34d,0x3b6)]),'hr_upscaler':_0x375f7c[_0x17f1e5(0x3b6,0x404,0x348,0x3a9)+_0x385d96(0x4f,0x120,0x28,0xa4)],'hr_scale':_0x375f7c['sd_cupscal'+'e_factor'],'hr_additional_modules':[],'denoising_strength':_0x375f7c['sd_cdenois'+_0x17f1e5(0x43f,0x37c,0x37d,0x3ca)+'th'],'hr_second_pass_steps':_0x375f7c[_0x385d96(0x186,0x19d,0x1d0,0x18d)+_0x17f1e5(0x3c2,0x3f9,0x3d7,0x39b)],'seed':_0x2f61e4,'override_settings':{'CLIP_stop_at_last_layers':_0x3e2722[_0x17f1e5(0x3e3,0x412,0x3df,0x3cd)](Number,_0x375f7c[_0x17f1e5(0x49b,0x483,0x48d,0x453)+_0x385d96(0x16a,0x91,0x196,0x110)]),'sd_vae':_0x375f7c[_0x17f1e5(0x432,0x3d9,0x321,0x3a9)+_0x385d96(0x102,0x129,0xa0,0xce)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x3e2722['FDVza'](addLog,_0x385d96(0x89,0x178,0x157,0x10c)+'ces\x20脸部修复\x20为'+_0x4cb2d7[_0x385d96(0x183,0x163,0x81,0x10c)+'ces']),addLog(_0x385d96(0x112,0x11e,0xb3,0x13f)+'高清修复\x20为'+_0x4cb2d7['enable_hr']);_0x3e2722[_0x385d96(0x24,0xc4,0x1c,0xb4)](_0x375f7c[_0x385d96(0xb0,0xda,0x33,0x97)+_0x385d96(0xf9,0xc8,0xf2,0x114)],_0x3e2722[_0x385d96(0x6f,0xef,0x95,0xb6)])&&(_0x3e2722[_0x385d96(0x117,0x12a,0x15c,0x179)](_0x3e2722[_0x385d96(0xd8,0x131,0x191,0xf5)],_0x3e2722[_0x385d96(0x173,0x190,0xde,0xf5)])?(_0x3e2722[_0x17f1e5(0x4d1,0x3d1,0x444,0x45a)](addLog,_0x3e2722[_0x385d96(0x9e,0x10c,0x11b,0xd4)]),_0x4cb2d7=_0x3e2722[_0x385d96(0xe2,0xec,0x91,0xa3)](deepMerge,_0x4cb2d7,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x3e2722['yhNbO']}]}}})):_0x154d6b[_0x385d96(0x149,0x159,0x11a,0x105)+_0x4d5c80+_0x385d96(0x144,0x1e2,0x1cb,0x172)]&&(_0x4f5d0b=_0x3e2722[_0x385d96(0x1bd,0x1d4,0xf9,0x17b)](_0x3e2722['bPuuy'](_0x27b61b,',\x20'),_0x3e2722[_0x385d96(0x47,0xcc,0xde,0xdf)](_0x56a4a9,_0x28aa97[_0x17f1e5(0x3cd,0x3b7,0x3b2,0x405)+_0x27aa55+_0x385d96(0x20a,0x1d8,0xea,0x172)]))));const _0x2037aa=_0x385d96(0x10e,0x1d4,0x17a,0x1a3)+_0x17f1e5(0x379,0x30f,0x333,0x38a)+_0x17f1e5(0x49f,0x448,0x42b,0x457)+'pt):**\x20'+_0xa6b812+(_0x385d96(0x18b,0x134,0x1cf,0x176)+_0x17f1e5(0x37e,0x394,0x413,0x403)+_0x17f1e5(0x413,0x469,0x3c2,0x427)+'\x20')+_0xbc25f0+(_0x17f1e5(0x456,0x424,0x41c,0x3d7)+_0x385d96(0x132,0x117,0x168,0xdd)+_0x385d96(0x13e,0x10d,0x124,0x156))+_0x4cb2d7['sampler_na'+'me']+('\x0a-\x20**步数\x20(S'+_0x385d96(0x19b,0x114,0x15b,0x17a))+_0x4cb2d7[_0x17f1e5(0x3f3,0x39e,0x38a,0x39b)]+('\x0a-\x20**CFG\x20S'+'cale:**\x20')+_0x4cb2d7[_0x385d96(0xe2,0x5e,0x73,0xe0)]+(_0x17f1e5(0x41b,0x482,0x3e8,0x420)+_0x385d96(0x144,0x1aa,0x120,0x18c))+_0x4cb2d7[_0x17f1e5(0x383,0x342,0x313,0x3af)]+'x'+_0x4cb2d7[_0x17f1e5(0x432,0x4a5,0x3d1,0x44d)]+(_0x17f1e5(0x407,0x3fc,0x432,0x47e)+'eed):**\x20')+(_0x3e2722['kftJC'](_0x4cb2d7[_0x17f1e5(0x3f0,0x41a,0x409,0x3e2)],-(0xcc7*-0x1+0x24aa+-0x17e2))?_0x3e2722['BfaPK']:_0x4cb2d7[_0x17f1e5(0x352,0x37f,0x40d,0x3e2)])+('\x0a-\x20**模型\x20(M'+_0x385d96(0xa5,0x14b,0x166,0x124))+_0x375f7c[_0x17f1e5(0x43e,0x43e,0x317,0x3a9)+_0x17f1e5(0x40a,0x47d,0x3a7,0x416)]+(_0x385d96(0x14d,0x142,0x110,0x18b)+'*\x20')+_0x4cb2d7['override_s'+'ettings'][_0x17f1e5(0x4de,0x481,0x456,0x465)]+(_0x385d96(0x14b,0x187,0x1c2,0x142)+_0x385d96(0x206,0x204,0x150,0x171))+_0x4cb2d7['override_s'+_0x17f1e5(0x3ac,0x44b,0x396,0x3ac)][_0x385d96(0x14c,0x144,0x236,0x19d)+_0x385d96(0x217,0x1f8,0x101,0x18a)+_0x17f1e5(0x48b,0x468,0x3f0,0x486)]+(_0x17f1e5(0x34d,0x3f9,0x315,0x374)+_0x385d96(0x48,-0xe,0xed,0x82)+_0x17f1e5(0x431,0x428,0x3a7,0x435))+_0x4cb2d7['enable_hr']+(_0x385d96(0x66,0x66,0xd9,0xcc)+'(Upscale\x20F'+_0x17f1e5(0x41e,0x420,0x3e3,0x3a5))+_0x4cb2d7[_0x385d96(0x29,0x10b,0x2,0x9a)]+('\x0a-\x20**重绘幅度\x20'+_0x385d96(0xdb,0x112,0x6f,0xc3)+'\x20Strength)'+':**\x20')+_0x4cb2d7[_0x17f1e5(0x473,0x3d0,0x4c5,0x437)+_0x17f1e5(0x47b,0x4b8,0x494,0x43c)]+(_0x385d96(0x184,0x17a,0x18b,0x104)+'(Restore\x20F'+_0x385d96(0x89,-0x1d,0x15,0x77))+_0x4cb2d7[_0x17f1e5(0x3b7,0x388,0x3ea,0x40c)+'ces']+('\x0a-\x20**ADeta'+_0x17f1e5(0x441,0x4a5,0x4b1,0x438))+_0x3e2722[_0x385d96(0x9a,0xdb,0x6f,0xb4)](_0x375f7c[_0x385d96(0x135,0x10e,0x106,0x97)+'ler'],_0x3e2722[_0x17f1e5(0x3bc,0x348,0x32f,0x3b6)])+_0x17f1e5(0x371,0x43b,0x47b,0x3f3);_0x3e2722[_0x385d96(0x193,0xe6,0x182,0x17d)](addLog,_0x2037aa),_0x3e2722[_0x17f1e5(0x48e,0x442,0x3c1,0x441)](addLog,_0x385d96(0x85,0x6f,0x68,0xbe)+'数为'+JSON[_0x17f1e5(0x3b8,0x38f,0x3fc,0x384)](_0x4cb2d7)),console[_0x17f1e5(0x3b5,0x3ed,0x3c2,0x41d)](_0x3e2722[_0x17f1e5(0x40a,0x4b7,0x3b1,0x418)],_0x4cb2d7);let _0x454d55=!![];while(_0x454d55){window[_0x17f1e5(0x391,0x444,0x32d,0x3b8)]?_0x3e2722[_0x17f1e5(0x4e5,0x508,0x4c2,0x4a1)]===_0x3e2722[_0x385d96(0x1fd,0x170,0x128,0x1a1)]?_0x454d55=![]:(_0x2dcf93[_0x17f1e5(0x40d,0x3e6,0x41e,0x39e)+_0x385d96(0x142,0x9f,0x137,0xd6)]=!![],_0x3e2722[_0x17f1e5(0x355,0x3d0,0x380,0x3ed)](_0x146fa8)):await _0x3e2722[_0x17f1e5(0x3e1,0x449,0x369,0x3df)](sleep,-0x1aae+0x1b27+0x36f);};try{window[_0x385d96(0x70,0x40,0x7c,0xb8)]=!![],taskQueue[_0x385d96(0x135,0xaf,0x14a,0x136)+'us'](_0x38281f,_0x3e2722[_0x17f1e5(0x4c2,0x3c9,0x4a1,0x430)]);if(_0x3e2722['GHrZd'](_0x375f7c[_0x385d96(0x165,0x107,0x1b0,0x129)],_0x3e2722[_0x385d96(0x141,0x217,0x116,0x178)])){if(!taskQueue[_0x385d96(0xc5,0xa3,0x4a,0xb7)+'eue'](_0x38281f)){if(_0x3e2722[_0x385d96(0x157,0x17f,0x1f0,0x179)](_0x17f1e5(0x454,0x3df,0x4b9,0x445),_0x3e2722[_0x17f1e5(0x537,0x52d,0x4e8,0x4ae)])){_0x55f8a5(_0x3e2722[_0x17f1e5(0x3ca,0x315,0x32d,0x38d)]);throw new _0x27b44d(_0x3e2722[_0x385d96(0xf9,0x1d6,0xf3,0x154)]);}else{_0x3e2722[_0x17f1e5(0x36c,0x34f,0x398,0x3cd)](addLog,_0x3e2722['mweth']),eventSource[_0x17f1e5(0x3d7,0x3eb,0x3fc,0x45c)](_0x385d96(0xae,0x64,0x11f,0x7f)+_0x17f1e5(0x383,0x488,0x491,0x3f2));throw new Error(_0x3e2722['MkBcs']);}}_0x4cb2d7[_0x17f1e5(0x31e,0x2ff,0x37b,0x391)]=_0x1e86e7,console[_0x385d96(0x182,0x85,0x162,0x11d)](_0x3e2722[_0x17f1e5(0x34e,0x45d,0x34f,0x3c0)],_0x375f7c['st_chatu8_'+_0x17f1e5(0x2ff,0x336,0x3a2,0x371)]),_0x4cb2d7[_0x17f1e5(0x375,0x452,0x43e,0x3d2)]=_0x375f7c[_0x17f1e5(0x418,0x3f5,0x35f,0x3e1)+'sd_auth']?_0x375f7c['st_chatu8_'+'sd_auth']:'';const _0x18c89d=await _0x3e2722['kyfVs'](fetch,_0x3e2722[_0x17f1e5(0x341,0x370,0x3c7,0x3c9)],{'method':_0x17f1e5(0x476,0x42c,0x529,0x49c),'headers':_0x3e2722[_0x385d96(0x192,0x13b,0x12d,0x19f)](getRequestHeaders,window[_0x385d96(0x127,0x168,0x95,0x12e)]),'body':JSON[_0x385d96(0x98,0x10b,0x7a,0x84)](_0x4cb2d7)});if(!_0x18c89d['ok']){const _0x48b460=await _0x18c89d[_0x385d96(0x8b,0x6f,0x6a,0xda)]();_0x3e2722[_0x385d96(0x15c,0x19e,0x11a,0x11f)](addLog,_0x17f1e5(0x3a4,0x43b,0x3cb,0x3c5)+_0x17f1e5(0x4b6,0x4db,0x4b3,0x45b)+_0x18c89d[_0x385d96(0x12e,0x13c,0x140,0x10f)]+_0x385d96(0x1e1,0x237,0x139,0x1a2)+_0x48b460),console[_0x17f1e5(0x397,0x3f7,0x3da,0x41d)](_0x3e2722['lIFWM'],_0x48b460);throw new Error(_0x17f1e5(0x43e,0x3c5,0x341,0x3b2)+_0x18c89d[_0x385d96(0x150,0xc9,0x175,0x10f)]+_0x17f1e5(0x4a5,0x4ce,0x459,0x449)+_0x48b460);}const _0x1267e2=await _0x18c89d['text']();let _0x32ff7f='';try{if(_0x3e2722[_0x385d96(0x14e,0x18,0x49,0xb1)](_0x3e2722['FzFEP'],_0x3e2722['FzFEP']))_0x1878dd=![];else{const _0x375a11=JSON[_0x17f1e5(0x4a1,0x3a6,0x43a,0x42d)](_0x1267e2);_0x32ff7f=_0x375a11['images'][-0x27*-0x89+0x139d+-0x287c];}}catch(_0x1da591){_0x3e2722[_0x385d96(0x1b1,0x1a9,0x104,0x144)](addLog,'JSON\x20解析失败，'+_0x385d96(0xbb,0x9e,0x47,0x8c)+_0x17f1e5(0x3cb,0x397,0x3d7,0x415)),_0x32ff7f=_0x1267e2;}const _0xfff682=_0x3e2722[_0x17f1e5(0x4d2,0x451,0x3f6,0x466)]('data:image'+'/png;base6'+'4,',_0x32ff7f);return _0x3e2722[_0x385d96(0x145,0x144,0xe3,0xcd)](addLog,_0x385d96(0xf0,0xe0,0x94,0x113)+_0x17f1e5(0x430,0x4b2,0x48f,0x450)+'L。'),taskQueue[_0x385d96(0xba,0x141,0x142,0x152)+'sk'](_0x38281f,!![]),currentTaskId=null,{'image':_0xfff682,'change':_0x3e2722[_0x17f1e5(0x457,0x366,0x480,0x3e3)](_0x1f179b,'')};}else{if(_0x3e2722[_0x17f1e5(0x3e2,0x453,0x42c,0x3f8)](_0x3e2722['NWItr'],_0x3e2722['NWItr']))_0x19578c[_0x385d96(0x127,0x148,0x103,0x152)+'sk'](_0x3f4984,![]);else{if(!taskQueue[_0x385d96(0x9f,0xda,0xda,0xb7)+_0x385d96(0x180,0xe3,0xbf,0xfe)](_0x38281f)){addLog(_0x3e2722[_0x17f1e5(0x324,0x423,0x329,0x38d)]);throw new Error('任务已取消');}const _0x313921=new URL(_0x1e86e7+_0x3e2722['apppb']);window[_0x385d96(0x1d,0x114,0x30,0xb8)]=![];const _0x19913f=await _0x3e2722[_0x385d96(0x128,0x159,0x12c,0x175)](fetch,_0x313921,{'method':_0x3e2722[_0x17f1e5(0x41c,0x542,0x516,0x4a5)],'body':JSON[_0x385d96(0x3e,0x10e,0x72,0x84)](_0x4cb2d7),'headers':{'Content-Type':_0x3e2722[_0x17f1e5(0x44a,0x498,0x45d,0x422)],'Authorization':_0x3e2722['cANKH'](getsdAuth)}});window[_0x17f1e5(0x3c2,0x347,0x3b0,0x3b8)]=!![];if(!_0x19913f['ok']){const _0x5bc9b0=await _0x19913f[_0x385d96(0xbd,0x10a,0x123,0xda)]();addLog('SD\x20API\x20返回错'+_0x17f1e5(0x3d4,0x348,0x481,0x3e4)+_0x19913f[_0x385d96(0xa9,0x161,0x18b,0x10f)]+'。响应内容:\x20'+_0x5bc9b0),console[_0x385d96(0x198,0x168,0x179,0x11d)](_0x3e2722[_0x17f1e5(0x463,0x3cb,0x43e,0x3ee)],_0x5bc9b0);throw new Error(_0x17f1e5(0x37c,0x3ca,0x322,0x3b2)+_0x19913f[_0x385d96(0xbc,0x89,0x156,0x10f)]+_0x17f1e5(0x45b,0x44f,0x4d5,0x449)+_0x5bc9b0);}const _0x2fdcc0=await _0x19913f['json']();if(!_0x2fdcc0[_0x385d96(0x2e,0x98,0x12b,0xc1)]||_0x3e2722[_0x385d96(0x1d3,0x141,0x1bf,0x13a)](_0x2fdcc0[_0x385d96(0x11d,0x34,0x107,0xc1)][_0x385d96(0x8b,0x62,0x161,0xd9)],0x3a*0x61+-0x1617+-0x1*-0x1d))throw new Error(_0x3e2722[_0x17f1e5(0x3dc,0x351,0x413,0x3bb)]);const _0x50b463=_0x2fdcc0['images'][-0x8dd*-0x4+-0x200*0x11+0xc*-0x1f],_0x4283ad=_0x3e2722[_0x385d96(0xd6,0x12a,0x122,0xc7)]+_0x50b463;return _0x3e2722[_0x385d96(0xf9,0x13c,0xfd,0xc6)](addLog,_0x17f1e5(0x46f,0x4b0,0x47e,0x413)+_0x17f1e5(0x43c,0x4af,0x44f,0x450)+'L。'),taskQueue['completeTa'+'sk'](_0x38281f,!![]),currentTaskId=null,{'image':_0x4283ad,'change':_0x3e2722[_0x385d96(0x6c,0x7c,0xa5,0xb9)](_0x2a62cf,'')};}}}catch(_0x171b14){if(_0x3e2722[_0x385d96(0x13b,0x158,0x6c,0xc4)]===_0x385d96(0x138,0xc1,0x121,0xc8)){window['xiancheng']=!![];if(_0x171b14[_0x385d96(0xe5,0x105,0x176,0x16a)]===_0x3e2722[_0x385d96(0x182,0xc2,0x130,0x154)]){}else{if(_0x3e2722[_0x17f1e5(0x4a6,0x425,0x4a4,0x46e)](_0x3e2722[_0x385d96(0x80,0xe7,0x79,0x73)],_0x3e2722['gxDgF']))taskQueue[_0x17f1e5(0x4bc,0x4d4,0x420,0x452)+'sk'](_0x38281f,![]);else{const _0x5badb3=_0x3e2722['ykwiE'][_0x17f1e5(0x4f0,0x463,0x4ae,0x45e)]('|');let _0x452360=-0x5*0x51a+-0xc1*0xd+0x83*0x45;while(!![]){switch(_0x5badb3[_0x452360++]){case'0':throw _0x5e7d4e;continue;case'1':_0x49dc89[_0x385d96(0x154,0x19e,0x1e2,0x196)](_0x3e2722['Seobe'],_0x19c2ff);continue;case'2':_0x37e5ca=null;continue;case'3':if(_0x3e2722[_0x17f1e5(0x3ef,0x48f,0x3fd,0x479)](_0x3c1c7a[_0x17f1e5(0x4bc,0x47e,0x4df,0x46a)],_0x3e2722[_0x385d96(0x1d9,0xd1,0x169,0x154)])){}else _0x425b67['completeTa'+'sk'](_0x4f9e44,![]);continue;case'4':_0x3e2722['tTwIa'](_0x104120,'sd请求生图错误:\x20'+_0x20839d['message']);continue;case'5':_0xa18bc2[_0x385d96(0x119,0xb8,0xc6,0xb8)]=!![];continue;}break;}}}currentTaskId=null,_0x3e2722[_0x17f1e5(0x537,0x43d,0x46e,0x4a7)](addLog,_0x17f1e5(0x3ea,0x380,0x392,0x379)+_0x171b14[_0x17f1e5(0x4d4,0x4c4,0x4e2,0x46a)]),console[_0x17f1e5(0x4d7,0x4f0,0x4ba,0x496)](_0x3e2722[_0x17f1e5(0x42e,0x4d6,0x3de,0x45d)],_0x171b14);throw _0x171b14;}else throw new _0x30bd35(_0x3e2722['ocEsc']);}}async function sdGenerate(_0x2145e4){function _0x1200ed(_0x41e926,_0x1e10f2,_0x14abd9,_0x1304f4){return _0x3ba2(_0x1e10f2- -0x1f5,_0x1304f4);}const _0x4efc57={'owpwo':function(_0x3dc9b4,_0x2eb076){return _0x3dc9b4(_0x2eb076);},'QpTKq':_0x1200ed(-0x3b,0x38,-0xa,0x1b)+'已关闭。','lXNPa':function(_0x3ea1bb,_0xfe58ed){return _0x3ea1bb(_0xfe58ed);},'XhDRM':_0x53fa90(0x5f7,0x5c3,0x5a2,0x5bc),'RcAhi':function(_0x142be7,_0x121bda){return _0x142be7!=_0x121bda;},'kHcfE':function(_0x12fecb,_0x3dcff7,_0x51911c,_0x399fcb){return _0x12fecb(_0x3dcff7,_0x51911c,_0x399fcb);},'KKqif':_0x1200ed(0x57,0xdb,0xe3,0x107),'xDnty':'Error\x20gene'+_0x53fa90(0x50a,0x57a,0x5b3,0x5aa)+_0x1200ed(0xa7,0xa8,0xd7,0x109),'NqYiy':function(_0x5f1642,_0x717fc7){return _0x5f1642(_0x717fc7);}},{id:_0x52bf51,prompt:_0x2cc5c3,width:_0x3fc3f8,height:_0x2c6bf8,change:_0x25dfd8}=_0x2145e4;function _0x53fa90(_0x4c8e89,_0x173ad9,_0x598212,_0x298cdd){return _0x3ba2(_0x298cdd-0x3b9,_0x4c8e89);}_0x4efc57[_0x53fa90(0x52c,0x5a4,0x5a8,0x5c6)](addLog,_0x1200ed(0xc8,0x60,0x39,-0x8)+_0x53fa90(0x580,0x589,0x61d,0x5f2)+_0x52bf51+(_0x1200ed(0x173,0xfe,0x8c,0x152)+':\x20')+_0x2cc5c3+(_0x25dfd8?'\x20-\x20Change:'+'\x20'+_0x25dfd8:''));if(_0x25dfd8&&_0x25dfd8['includes'](_0x4efc57['XhDRM'])){_0x4efc57['lXNPa'](bananaGenerate,_0x2145e4);return;}try{const {image:_0x6603b4,change:_0xbf55c2}=await generateSDImage({'prompt':_0x2cc5c3,'width':_0x3fc3f8,'height':_0x2c6bf8,'change':_0x25dfd8});if(_0x4efc57[_0x53fa90(0x71b,0x619,0x70c,0x6b7)](extension_settings[extensionName][_0x53fa90(0x71c,0x711,0x741,0x6be)],'0')){const _0x546fcf={};_0x546fcf[_0x1200ed(0x55,0x6d,0x4d,0x5c)]=_0xbf55c2,await _0x4efc57['kHcfE'](setItemImg,_0x2cc5c3,_0x6603b4,_0x546fcf),_0x4efc57[_0x1200ed(-0x77,0x18,0x7f,0x43)](addLog,_0x1200ed(0xa,-0xd,-0x7f,0x14)+_0x1200ed(0xd8,0x121,0x9a,0xad)+'\x20'+_0x2cc5c3);}else _0x4efc57['lXNPa'](addLog,'缓存设置为不存入数据'+'库');const _0x270ebb={};_0x270ebb['id']=_0x52bf51,_0x270ebb[_0x1200ed(0x21,0x49,-0x36,0x78)]=!![],_0x270ebb[_0x53fa90(0x556,0x60c,0x5a5,0x5da)]=_0x6603b4,_0x270ebb[_0x1200ed(0x11d,0xe1,0x120,0x13d)]=_0x2cc5c3,_0x270ebb[_0x1200ed(0xb6,0x6d,0x8a,0xe4)]=_0xbf55c2,eventSource[_0x1200ed(0xf0,0xd5,0x125,0x8d)](EventType[_0x1200ed(0x10a,0x94,0xd1,0x9)+'MAGE_RESPO'+_0x1200ed(0x82,0xd8,0xac,0x159)],_0x270ebb),addLog(_0x53fa90(0x61b,0x670,0x616,0x693)+_0x1200ed(0xd7,0x123,0xb3,0x167)+_0x52bf51+')');}catch(_0x5abe2e){if(_0x4efc57[_0x1200ed(0x7f,0xca,0x9c,0x13f)]!==_0x53fa90(0x627,0x6ea,0x6d7,0x689))_0x2de9f4['removeList'+_0x1200ed(0xa8,0x68,0x8,0x105)](_0x2981f0[_0x53fa90(0x68f,0x63b,0x673,0x642)+_0x53fa90(0x6e1,0x730,0x636,0x6a7)+'ST'],_0xac459d),_0x4bf082[_0x53fa90(0x57d,0x650,0x5ff,0x5c5)+_0x1200ed(0xd3,0x4f,0x3f,-0x30)]=![],_0x4efc57['owpwo'](_0x3c70a7,_0x4efc57[_0x53fa90(0x688,0x5d9,0x5fe,0x63e)]);else{const _0x541c01=_0x1200ed(-0x67,0xb,-0x42,-0xc)+_0x1200ed(0x9a,0x57,0xa7,0xea)+_0x52bf51+_0x1200ed(-0x2a,0x51,0x2,0x9d)+_0x5abe2e[_0x53fa90(0x69c,0x688,0x6df,0x691)];_0x4efc57[_0x53fa90(0x5db,0x666,0x5a2,0x632)](addLog,_0x1200ed(0x10b,0x117,0x118,0xef)+_0x541c01),console[_0x53fa90(0x64f,0x676,0x6ab,0x6bd)](_0x4efc57['xDnty'],_0x5abe2e);const _0x2ba187={};_0x2ba187['id']=_0x52bf51,_0x2ba187[_0x53fa90(0x55d,0x68e,0x68c,0x5f7)]=![],_0x2ba187[_0x53fa90(0x73b,0x6ee,0x63b,0x6bd)]=_0x5abe2e[_0x1200ed(0x10b,0xe3,0xaa,0x5c)],_0x2ba187[_0x1200ed(0x167,0xe1,0x12a,0x15b)]=_0x2cc5c3,eventSource[_0x53fa90(0x6a4,0x617,0x6de,0x683)](EventType[_0x53fa90(0x5c9,0x5b1,0x60e,0x642)+'MAGE_RESPO'+_0x53fa90(0x673,0x6af,0x726,0x686)],_0x2ba187),_0x4efc57['NqYiy'](addLog,_0x53fa90(0x691,0x70d,0x717,0x6aa)+_0x53fa90(0x740,0x6c7,0x68b,0x6d1)+_0x52bf51+')');}}}function initializeSDListener(){function _0x39bf3e(_0x1a2613,_0x2f4f04,_0x2b8394,_0x318dd6){return _0x3ba2(_0x2f4f04- -0x11b,_0x1a2613);}const _0x1ef9ea={'XiMUl':function(_0x1bec3b,_0x3a12d8){return _0x1bec3b(_0x3a12d8);},'dUPRw':_0x39bf3e(0xf8,0x112,0x111,0x14b)+_0x18e841(0x4d6,0x513,0x46a,0x498)};function _0x18e841(_0x571145,_0x12e8ed,_0x2487ad,_0x410ef3){return _0x3ba2(_0x410ef3-0x2bb,_0x571145);}eventSource['on'](EventType[_0x39bf3e(0x14b,0x16e,0x1ee,0x1f2)+'MAGE_REQUE'+'ST'],sdGenerate),_0x1ef9ea[_0x39bf3e(0x26a,0x1d7,0x158,0x169)](addLog,_0x1ef9ea[_0x39bf3e(0x22d,0x19e,0x13c,0x183)]);}export async function replaceWithSd(){const _0x3846a7={'KDxNo':function(_0x268f43,_0x253b5d){return _0x268f43<=_0x253b5d;},'UHFwp':function(_0x219d13,_0x1e34a8){return _0x219d13+_0x1e34a8;},'QzaGH':function(_0x5dc796,_0x1df2f8){return _0x5dc796+_0x1df2f8;},'hbwQT':function(_0x462851,_0xa3bb2d){return _0x462851==_0xa3bb2d;},'CmejP':function(_0x3cbf8b){return _0x3cbf8b();},'qPUNR':function(_0x31e014,_0x93b1e3){return _0x31e014===_0x93b1e3;},'FHydz':'DhJzr','vkxnF':_0x273e83(-0xc8,-0xde,-0x143,-0x12e),'UYLDt':_0x273e83(-0x7f,0xe,-0xe9,-0xf7)+_0x273e83(-0xb6,-0x20,-0x15,-0xae)};function _0x329a2b(_0x532840,_0xddd72a,_0x19f47f,_0x4be461){return _0x3ba2(_0xddd72a- -0x21e,_0x4be461);}function _0x273e83(_0x3889da,_0x325e87,_0x4c34df,_0x29985d){return _0x3ba2(_0x3889da- -0x2ac,_0x29985d);}if(_0x3846a7[_0x273e83(-0x52,-0xba,-0x1b,-0x43)](extension_settings[extensionName]['mode'],'sd'))!window[_0x329a2b(0x4b,-0x12,-0xa,0x17)+_0x329a2b(0x8a,0x26,-0x20,0x45)]&&(window['initialize'+'SDListener']=!![],_0x3846a7[_0x329a2b(0x107,0x78,0x97,0x2a)](initializeSDListener)),initializeImageProcessing();else{if(_0x3846a7[_0x329a2b(-0x3c,0x4c,0x7b,0xb4)](_0x3846a7[_0x329a2b(0x178,0xf0,0xb9,0x164)],_0x3846a7[_0x329a2b(-0xd,0x90,0x12,0x8a)]))for(let _0x50995e=-0x125*0x1+-0x1248+-0x3*-0x67a;_0x3846a7[_0x273e83(-0x3c,0x24,-0x9c,-0xbc)](_0x50995e,0x789+-0x1dae+0x1629);_0x50995e++){_0x55d591[_0x273e83(-0x39,-0xb2,-0xac,-0xd2)+_0x50995e+_0x273e83(0x34,0x32,-0x26,0x67)]&&(_0x18035e=_0x3846a7[_0x329a2b(-0x55,0xc,-0x18,0xb)](_0x3846a7['QzaGH'](_0x415804,',\x20'),_0x30e3c7(_0x4eee0b[_0x329a2b(0x95,0x55,0x30,-0xb)+_0x50995e+_0x329a2b(0x12b,0xc2,0x44,0xf7)])));}else window['initialize'+_0x273e83(-0x68,-0x2b,-0x4d,-0xc)]&&(eventSource[_0x329a2b(0x6a,0x7a,0xb5,0x5e)+'ener'](EventType['GENERATE_I'+_0x273e83(0x42,-0x5d,0xb3,0x82)+'ST'],sdGenerate),window[_0x273e83(-0xa0,-0x4a,-0x85,-0x34)+_0x273e83(-0x68,-0x9d,-0x88,0x29)]=![],addLog(_0x3846a7[_0x273e83(-0x38,-0x7f,-0xa8,-0xca)]));}}