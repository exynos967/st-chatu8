(function(_0x337142,_0x2e6ef2){function _0x5f36cb(_0xbc22fa,_0x19c7ac,_0x485243,_0x4515a0){return _0x5943(_0xbc22fa- -0x2e8,_0x4515a0);}function _0x5589af(_0x112440,_0x19460d,_0x12daa5,_0x4d8626){return _0x5943(_0x12daa5-0x20c,_0x19460d);}const _0x528422=_0x337142();while(!![]){try{const _0x3ee6e2=parseInt(_0x5589af(0x398,0x491,0x424,0x497))/(-0x173a+-0x1c83+0x19df*0x2)*(-parseInt(_0x5f36cb(-0x1c,-0x2b,0x52,-0x92))/(0x1*-0x9c1+0x3e0+0x5e3))+parseInt(_0x5589af(0x35c,0x32a,0x3ad,0x3c3))/(-0xfb*0xf+-0x62e+0x14e6)+parseInt(_0x5589af(0x4a6,0x500,0x4ac,0x4a9))/(-0x5*0x81+0x9fd+-0x774)*(parseInt(_0x5589af(0x3b7,0x361,0x409,0x476))/(-0x1*-0x111a+0x15ac+-0x26c1))+parseInt(_0x5f36cb(-0x61,-0x19,-0x106,-0xd5))/(-0x1b5c+0x1*0x116c+-0x4fb*-0x2)*(-parseInt(_0x5589af(0x425,0x448,0x4b4,0x475))/(0x1b25+-0x1*-0xd1f+0x1*-0x283d))+parseInt(_0x5f36cb(-0x125,-0x174,-0xf2,-0xaf))/(0xa*-0x3ac+0x99*0x32+0x6de)+-parseInt(_0x5589af(0x4c4,0x4b2,0x4a8,0x43d))/(0x3*0x442+0x6*0x7c+0x3*-0x537)*(-parseInt(_0x5f36cb(-0x98,-0x39,-0x89,-0x77))/(-0x310+-0x89*0x22+0x154c))+-parseInt(_0x5589af(0x42b,0x4fa,0x49c,0x417))/(0x1f3f+0x101*-0xe+-0x1126);if(_0x3ee6e2===_0x2e6ef2)break;else _0x528422['push'](_0x528422['shift']());}catch(_0x1ab49f){_0x528422['push'](_0x528422['shift']());}}}(_0x22fb,-0x23f*0xef+-0x56*-0x2e4c+-0x4e1e0));const _0x1a3c06=(function(){function _0x2747f5(_0x59a1b2,_0x1a73e0,_0x396fba,_0x54e508){return _0x5943(_0x59a1b2-0x323,_0x1a73e0);}function _0x4ad51b(_0x2e5ede,_0x190e90,_0x231e45,_0x23d897){return _0x5943(_0x23d897- -0x110,_0x190e90);}const _0x3677bf={'cvThj':function(_0x51308b,_0x5575d9){return _0x51308b!==_0x5575d9;},'AkXEx':_0x2747f5(0x538,0x4ae,0x545,0x5b6),'yctuA':_0x2747f5(0x5b1,0x5d7,0x523,0x52a),'QBwNi':function(_0x4092da){return _0x4092da();}};let _0x131d2c=!![];return function(_0x43117a,_0x231911){const _0x33fdae={'vJICt':function(_0x4438e6){function _0x433d02(_0x26fce3,_0xca58d,_0x3e6336,_0x4a65e0){return _0x5943(_0x26fce3-0x33e,_0x4a65e0);}return _0x3677bf[_0x433d02(0x5d0,0x621,0x673,0x602)](_0x4438e6);}},_0x4574fc=_0x131d2c?function(){function _0x5719bc(_0x40777e,_0x28a2a8,_0x2166fc,_0x276bd4){return _0x5943(_0x276bd4-0x2e5,_0x28a2a8);}function _0x31946d(_0x20b787,_0x5361d4,_0x3e3327,_0x2adeaf){return _0x5943(_0x3e3327-0x4e,_0x2adeaf);}if(_0x231911){if(_0x3677bf[_0x5719bc(0x5d6,0x55e,0x555,0x562)](_0x3677bf['AkXEx'],_0x3677bf[_0x31946d(0x252,0x274,0x279,0x202)])){const _0x3fbb9=_0x231911[_0x31946d(0x174,0x1a0,0x21c,0x24e)](_0x43117a,arguments);return _0x231911=null,_0x3fbb9;}else!_0x560b8b[_0x31946d(0x1fb,0x1f8,0x223,0x208)+_0x31946d(0x24d,0x307,0x2a6,0x26d)]&&(_0x40e18e[_0x31946d(0x197,0x29b,0x223,0x255)+_0x31946d(0x25a,0x20c,0x2a6,0x2da)]=!![],_0x33fdae[_0x31946d(0x251,0x27d,0x23b,0x1b8)](_0x3738ba)),_0x33fdae[_0x5719bc(0x53c,0x53c,0x4ba,0x4d2)](_0x3dbc2e);}}:function(){};return _0x131d2c=![],_0x4574fc;};}()),_0x5ab7ef=_0x1a3c06(this,function(){function _0x3bed59(_0x5176fd,_0x45c352,_0x11ac96,_0x4824b5){return _0x5943(_0x11ac96- -0x3cd,_0x5176fd);}function _0x22e7b2(_0x25ac2c,_0x2ccfca,_0x3d48b9,_0x44b59b){return _0x5943(_0x3d48b9-0x3ab,_0x44b59b);}const _0x473d0c={};_0x473d0c[_0x3bed59(-0x10b,-0x175,-0xfd,-0x9f)]=_0x3bed59(-0x1f9,-0x121,-0x178,-0xda)+'+$';const _0x3e4455=_0x473d0c;return _0x5ab7ef[_0x22e7b2(0x4fc,0x534,0x59e,0x56a)]()['search'](_0x3e4455['dTKeN'])[_0x22e7b2(0x541,0x54e,0x59e,0x546)]()[_0x3bed59(-0x1d1,-0xf1,-0x143,-0x14a)+'r'](_0x5ab7ef)[_0x3bed59(-0x12e,-0x1c3,-0x19c,-0x14d)](_0x3e4455[_0x22e7b2(0x689,0x63a,0x67b,0x6cd)]);});function _0x5943(_0x398874,_0x5f145e){_0x398874=_0x398874-(0x9a7+-0x13*0x39+-0x3d8);const _0x5c091d=_0x22fb();let _0x405fba=_0x5c091d[_0x398874];if(_0x5943['QHxlZE']===undefined){var _0x57b259=function(_0x508b){const _0x152b47='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x56e54b='',_0x1b9696='',_0x1fa90f=_0x56e54b+_0x57b259;for(let _0x4e7d93=0x2211+-0x106a+-0x11a7,_0x1593f1,_0x22b375,_0x55580c=0xda8+-0x2*-0x9dd+-0x2162;_0x22b375=_0x508b['charAt'](_0x55580c++);~_0x22b375&&(_0x1593f1=_0x4e7d93%(-0x148d+-0x1*-0x23e9+-0xf58)?_0x1593f1*(0x3*-0x89d+0x9bf+0x1058)+_0x22b375:_0x22b375,_0x4e7d93++%(0x2010+0x9cf+0x5*-0x85f))?_0x56e54b+=_0x1fa90f['charCodeAt'](_0x55580c+(-0x2*0x1379+0x2f8+0x734*0x5))-(-0x5b8+-0x3*-0xaa3+0x1*-0x1a27)!==0x1*-0x2419+-0x1c57+-0x407*-0x10?String['fromCharCode'](-0x5*0x6bc+0x1*0xa0f+0x189c&_0x1593f1>>(-(-0x1*-0xc33+-0x7*-0x289+-0x1df0)*_0x4e7d93&-0x1491+-0x1565+0x29fc)):_0x4e7d93:-0xa9+0xb93*0x1+-0xaea){_0x22b375=_0x152b47['indexOf'](_0x22b375);}for(let _0x4538c0=0x1c81+-0x25*-0x109+-0x2167*0x2,_0x33270d=_0x56e54b['length'];_0x4538c0<_0x33270d;_0x4538c0++){_0x1b9696+='%'+('00'+_0x56e54b['charCodeAt'](_0x4538c0)['toString'](-0xa*0x2d5+0x1ac7+0x19b))['slice'](-(0x1e63+0xe63+-0x2cc4));}return decodeURIComponent(_0x1b9696);};_0x5943['EXchLq']=_0x57b259,_0x5943['lkjlTs']={},_0x5943['QHxlZE']=!![];}const _0x1c1c2c=_0x5c091d[-0xc6f*0x3+0x8ed+0x1c60],_0x45bc2e=_0x398874+_0x1c1c2c,_0x5ac76a=_0x5943['lkjlTs'][_0x45bc2e];if(!_0x5ac76a){const _0x3fb498=function(_0x41b253){this['LauvTb']=_0x41b253,this['PpFOwY']=[0x797+-0xc2d+0x2f*0x19,-0x2f1+-0x2550+0x2841,-0x1772+0x48c+0x12e6],this['MvDtFp']=function(){return'newState';},this['LQsivH']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['UQrIjf']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3fb498['prototype']['HUnBgd']=function(){const _0x54c81f=new RegExp(this['LQsivH']+this['UQrIjf']),_0x13c411=_0x54c81f['test'](this['MvDtFp']['toString']())?--this['PpFOwY'][0xa7*-0x1f+0x15*-0x4b+0x1a61]:--this['PpFOwY'][0x199e*0x1+0x16*0x146+-0xa*0x55d];return this['EOYJNK'](_0x13c411);},_0x3fb498['prototype']['EOYJNK']=function(_0x14abb6){if(!Boolean(~_0x14abb6))return _0x14abb6;return this['jSfxyz'](this['LauvTb']);},_0x3fb498['prototype']['jSfxyz']=function(_0x34207b){for(let _0x5d54c1=-0x1*-0x1565+0x11*-0x15d+-0x18*-0x13,_0x3c4913=this['PpFOwY']['length'];_0x5d54c1<_0x3c4913;_0x5d54c1++){this['PpFOwY']['push'](Math['round'](Math['random']())),_0x3c4913=this['PpFOwY']['length'];}return _0x34207b(this['PpFOwY'][0x1d32+0xc96+-0xe*0x2fc]);},new _0x3fb498(_0x5943)['HUnBgd'](),_0x405fba=_0x5943['EXchLq'](_0x405fba),_0x5943['lkjlTs'][_0x45bc2e]=_0x405fba;}else _0x405fba=_0x5ac76a;return _0x405fba;}function _0x22fb(){const _0x3b8aa2=['ChzJDMO','DuLqyuS','zgvUB2LZAw5NxW','cI0GkIRPH43NU5JLUyxLUQyG','C2vLza','ywrLDgfPBgvYxW','C2rdzMDty2fSzq','cI0GkIRPH4FMOlFMLRNMS5uG','5lU75yQH5BEY5y+w5RAi','tMPpu1a','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','EMDlAwW','sLnptIdOP6pMNPdLPlhOTkxVViW','z2H2Cfi','of9Zyw1WBgvYtG','5Q2J5zYO6ycA6l+hC2r3zwj1','of91ChnJywXLCG','u1HvzgC','CxHKqxO','ue9tva','Aw1Hz2vZ','BgvY','tw1JC3O','ic0Gq2HHBMDLoG','y3zuAgO','C2rFy3DPzhrO','CNvUBMLUzW','B3iGChjVBxb0oG','of9TB2rLBa','6k+V44cc54Q25Ocb56cboIa','BMvYyxrPB24','kerPDMLKzv9YBW','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','cI0TlqOGicaG','mtmXmduZoeXosK9UrW','CfjSCui','D1b5BNC','y29UC3rYDwn0BW','keHPCMvZiezPEa','yxrFBgfZDf9Syq','D0Dkr3q','C3P0CwS','5yYw5lI6igrHDgeGvvi','nZq1mdC5nwrQAufRDa','5Q2J6z2I5O+q56s6icHqCM9T','uuj3tMK','Cgf5Bg9Hza','yxjNCW','EejLvuC','C3rYzw5NDgG','zwvKktOQkIa','y2fSztOQkIa','6zsz6k+VoIa','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','zuXeyKO','mtHzzeHgs2C','C2v0DgLUz3nZlG','EvHcENG','oIOQia','nfbhr3Ljta','C3rFy2HHDhu4xW','rNDXuhG','u2TPCdOQkIa','ywnbD1q','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','ufbPuLG','CNPwu3C','mtroA1DmALO','r1bZDhO','vejXB1G','C3vJy2vZCW','C2r3zwj1AEEuN+wBVUwpGG','C2rFC3rVCf9Nzq','rMjQEvG','uKD2Ew4','DgvWCYK6kIOG','AgvPz2H0','l3bUzZTIyxnLnG','ifn0CMvUz3rOkq','wKjxBNu','thr1z1i','C2rvCMW','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','cI0GkIRMQkhLNOSGke0','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','zw5LCG','DhjPBq','u2nLBMuGq29TCa','y1Pou3O','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','yxbWBgLJyxrPBW','AKXTvM4','EM15BNa','r0vorvjbvevFsq','l2fWAs9Zzc9Nzq','DxjS','DhH0mMLTzW','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','yK5NB3e','C2rFy3nLzwq','icHjrdOG','B3zLCNjPzgvFCW','zxjYB3i','mJi3mJK4D0jxwwnI','6i635y+w5QIH5z6l5AsX6lsLoIa','C2rFy2HPCMvZxW','vuXJAum','zfrlzu4','cI0GkIPdBgLWia','y2XPzw50','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','ug15wxe','kerLBM9PC2LUzW','Ewfbrvq','CMvZDg9Yzv9Myq','5yIh5O2I5QIH5z6l5AsX6lsLoIa','Bvvorfu','cI0TlqOJiYmG55sF','CvzXsuq','kfnHBxbSzxiPoG','l3nKyxbPl3yXlW','z1P4D0m','rxjYB3iGz2vUzq','CKr6Dhq','Bufyugi','cI0GkIRMLl7LPkFLGi3NJOCG','r3roCNG','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','56cboIa','q1jWzhm','CMvTB3zLtgLZDa','E+s/RUwBVN0','q1fNB1G','zv9Mywn0B3i','C2rFy2nOyxr1xW','C3rLChm','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','uLDAAM0','uw55wu4','u0TvBwi','mJeZnZe3zLvJEfPf','ke5Lz2f0AxzLia','kfjLC3rVCMuGrG','55sO5lQo55sF5OIq55QevgfNoIa','rKPjv28','tLLSBum','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','Bg9N','C3bSAxq','zxr0Aw5NCW','seLVtuO','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','C2rFy2fKzxrHAq','BgvUz3rO','C3rHDhvZ','lcdOR6BMG4u6ia','zNrhr1K','ywrFBw9KzwW','y2fJAgu','of9Zy2HLzhvSzq','wuvbqMG','q2HHCMfJDgvYia','tufhrv9srvfvrq','z2u6','Dgv4Da','yxv0Aa','yw1L','zMfJzsdKUlRLVidLKk8','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','rLPXDxu','y1D6B3m','cI0GkIRLSlRLR7GGkfm','y2zNx3nJywXL','DfbHBLq','nti0mtyYngTPvxPetW','vNjKwK8','tLDwsfG','uwTUsMu','ChbYD3K','tKzhvgW','A2LW','uvrZEu8','DfvXvMq','5zU+5y+c5PwW5OQL5zgkcI0GkIO','ywX3yxLZB25FCW','yxbWBhK','tfrwq08','r1n6wLe','AwXLCJOQkIa','cI0GkIROHlJPG6JKV67LPi0G','44cc5zon5BQu5yAf5A65oIa','zxH0zw5ZAw9UxW','Aw5PDgLHBgL6zq','vvHHwfm','cI0GkIRPQ5JMUixKV67LPi0G','y21VzgvSmJiYmG','tufhrv9srvnqtW','ug1sy1O','BfnKvxC','BKv6sK0','DtHFC2rFyxv0Aa','qvvXvKi','loAOOEwEI+s4UG','EgfVD0O','Df9LBMq','ksaTifbYB21WDa','Aw5Nx3n0CMvUzW','AxnuyxnRsw5rDq','yMvsz1q','wefbvxG','s21LsLO','EwvYCW','Bw9xsgq','5yop5PwW5O2U44cc','cI0GkIPwquu6kG','5zon5BQu5yAf5A65oG','DKPjq3q','DfLStuy','5BI4icHjrdOG','m3WYFdf8mhW1Fa','z2DcBwG','qurLDgfPBgvY','Dg9tDhjPBMC','AuPAvLu','Cg5QqLe','s3DLBvq','AhjFC2nHBgu','BwvZC2fNzq','Dxf2ww0','suDTzKe','uxPSDum','BI9QC29U','mJyXnZeWnxrOrKLpsG','zw5HyMXLx2HY','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','z3fWDMW','Bw9Kzq','wxrZC3i','l2fWAs9Zzc9Zzq','y2vZ','y2vZioIeUoMdQos/RUwKJsdKUlO','A0XpqK4','tNbvwgO','Bw9KzwW','B0zOyLy','ChDhs1m','yM1IB0W','5BcD6k+v5l2C5lI65y6F5AEliejHCW','sKzvtwS','BMvNyxrPDMvqCG','Ceznt2u','ywnLCYK6kIOG','C2rFyxv0Aa','ywn0B3iPoIOQia','seXOAMe','yKjjy0u','Exf6DhO','lI4U','s1nmuxq','m3vNuNPWCG','Aw5MBW','rwv6DuW','BevPze4','yxnTuwG','z2DSvxy','ExvZAgvPzf9Zza','Aw5JBhvKzxm','Dg9Rzw4','Auz2yMi','q3jcs2m','B3nPDgLVBG','y2HHBMDL','CgfYC2u','BvHgAMy','CgvhrxK','5BEY5ywZ6zET44cc','C2rFy2nSAxbFCW','44cc6k+35Qoa5P+LC2r3zwj1','Ewn0Due','C3rYAw5NAwz5','ugH5BMe','AML1z3vHBG','og4UChq','C3rHDhvZvgv4Da','C2vHCMnO','y29TCgXLDgvuyq','EgLHBMnOzw5N','yMXzAu4','BvPtueq','zw5HyMXLx2HYia','B0zgvwC','D2LKDgG','qMHKt2y','C2tOR7FMSylNLj/LM77PLjNOR686ia','Dc1TB2rLBa','ChqPoIOQia','Bwviqu4','wgXTwKq','u0qGqvbjioI/LowBNUMuMq','EuXOAge','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','BMvYyxrL','wNrXq0K','Agnpu0O','zML4zwrqCM9TCa','suq6ia','v3vWBeu','C2nft3a','vunqx3nK','ExvZAgu','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','BLzcDKK','zw1PDa','5lIT55QeihbYB21WDooaGG','y3jPChrZ','mZGZntC3mgTnEKHLta','y0L4EMu','CvrHAMu','vK12shC','zgf0ytPPBwfNzq','kcGOlISPkYKRkq','tLnf','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','u0rmAxn0zw5LCG','thvrwKe','uhjVBxb0ktOQkG','zML4','svvWtNq','ELfyCNe','CNPKEhG','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','CMf0Aw5NigLTyq','ifbYB21WDa','Aw1Hz2u6','ALvpr0O','Cgf5C3rFy2HHDa'];_0x22fb=function(){return _0x3b8aa2;};return _0x22fb();}_0x5ab7ef();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;async function generateSDImage({prompt:_0x2dd89b,width:_0x2f04e9,height:_0xb655f7,change:_0x54a852}){const _0x79c53d={'KwemT':function(_0x506a0b,_0x33a9e7){return _0x506a0b(_0x33a9e7);},'qxdAz':function(_0x4257bd,_0x54cfec){return _0x4257bd(_0x54cfec);},'VrdZO':_0x44f930(0x1d2,0x1e3,0x201,0x185)+'已初始化。','JFUMk':function(_0x339d2c,_0x1abd15){return _0x339d2c(_0x1abd15);},'GSzZQ':function(_0x3a5ce8,_0x2c7762){return _0x3a5ce8+_0x2c7762;},'cZNSz':function(_0x5d65bf,_0x582b5c){return _0x5d65bf+_0x582b5c;},'tPanT':function(_0x3ec587,_0x1ef57c){return _0x3ec587<=_0x1ef57c;},'zgKil':function(_0x2ed89c,_0x35052f){return _0x2ed89c+_0x35052f;},'NFGTl':function(_0x1cd2d9,_0x50872a){return _0x1cd2d9(_0x50872a);},'XAAUx':function(_0x1435bb,_0x3fa1d8){return _0x1435bb(_0x3fa1d8);},'WuplE':'adetailer_'+_0x44f930(0x43,0xe5,-0x26,0x7b),'Mmcsz':function(_0x1fc05e,_0x149db7,_0x53c6d8){return _0x1fc05e(_0x149db7,_0x53c6d8);},'XPmHI':'face_yolov'+_0x193a0e(0x67,0xde,0xff,0x112),'pRlqB':function(_0x47d1fb){return _0x47d1fb();},'QTsyO':function(_0x4f0024,_0x1e2ba4){return _0x4f0024(_0x1e2ba4);},'peGEy':_0x44f930(0x130,0x18b,0x220,0x17d),'NYlmC':_0x193a0e(0x1f8,0x14b,0x17d,0x159)+_0x44f930(0x127,0x116,0x120,0x142),'Fxsjt':function(_0x4f997b){return _0x4f997b();},'bNgoq':function(_0x283387,_0x424812){return _0x283387+_0x424812;},'lSdUw':function(_0x487fca,_0x5e6cc1){return _0x487fca>_0x5e6cc1;},'LfIHJ':_0x44f930(0x79,0xaa,0x139,0xd5),'QnyYN':function(_0x5c0bdf,_0x295691){return _0x5c0bdf(_0x295691);},'KmeJZ':function(_0x9de6c5,_0x39ee1b){return _0x9de6c5(_0x39ee1b);},'NWVHX':function(_0x1eef8f,_0x1d612b){return _0x1eef8f(_0x1d612b);},'NpUXj':function(_0x1be872,_0x308923){return _0x1be872!==_0x308923;},'pprwy':function(_0x39fadd,_0x28a30c){return _0x39fadd(_0x28a30c);},'oZJME':'Scene\x20Comp'+'osition','NjOSP':function(_0x17f4de,_0x158f69){return _0x17f4de<=_0x158f69;},'jLmVn':function(_0x13345d,_0x145d25){return _0x13345d===_0x145d25;},'ZBWnu':_0x44f930(0x1d8,0xc0,0x1ab,0x168),'RGvyn':_0x193a0e(0x5a,0x5c,0x77,-0x2f)+_0x193a0e(0x151,0x11c,0x11e,0xd5),'FbjyX':function(_0x3ff256,_0x24e47b,_0x3e62f7){return _0x3ff256(_0x24e47b,_0x3e62f7);},'CRpds':_0x193a0e(0x34,0x6b,0x6e,0xe9),'PFPPs':_0x193a0e(0xdf,0xb0,0x75,0x7),'rzVSw':function(_0x57d2f1,_0x46e7fc){return _0x57d2f1+_0x46e7fc;},'qTaje':function(_0x27a53a,_0x6a19b5){return _0x27a53a+_0x6a19b5;},'UXaXS':function(_0x5dec6a,_0x529a9c,_0x33230b,_0x3e815d,_0x522320,_0x3b2395){return _0x5dec6a(_0x529a9c,_0x33230b,_0x3e815d,_0x522320,_0x3b2395);},'zLgfl':function(_0x185dde,_0x3e2175){return _0x185dde(_0x3e2175);},'meHAN':'auto_url','uIPaK':function(_0x3ec50e){return _0x3ec50e();},'bRUDr':_0x44f930(0xb7,0x54,0x11,0x70),'pFMOe':_0x44f930(0x17e,0x11c,0xdc,0xed),'ipLVP':_0x44f930(0x1db,0x15c,0x19d,0x182)+_0x193a0e(0x129,0x159,0x10b,0x136),'ULciC':'POST','Phyna':_0x44f930(0x118,0x12f,0x1f6,0x1a0),'scEOp':function(_0x59070f,_0x5849cf){return _0x59070f(_0x5849cf);},'WNweQ':_0x193a0e(0x6d,0xb,0xa4,0x79)+_0x193a0e(0x139,0x12a,0x16d,0x120)+_0x44f930(0x1f,0xa9,-0x35,0x5a)+_0x44f930(0xdb,0x16c,0x1c8,0x140),'PmRcZ':function(_0x4cc957,_0x39cbb2){return _0x4cc957!=_0x39cbb2;},'TBqoX':_0x193a0e(0x168,0x6f,0xe7,0x11d),'wPynw':function(_0x5ecead,_0x2edd33,_0x4e5fb8){return _0x5ecead(_0x2edd33,_0x4e5fb8);},'LuQZA':function(_0x4e6e6a,_0x4e6824){return _0x4e6e6a(_0x4e6824);},'tUqVd':_0x193a0e(0x79,0xd6,0xac,0x8c),'ZtqCI':_0x193a0e(0x1df,0x158,0x15d,0xce),'tYlMF':function(_0x4dd82c,_0x3c9bab){return _0x4dd82c(_0x3c9bab);},'eLDbJ':function(_0xfc8cef,_0x196f67){return _0xfc8cef(_0x196f67);},'oFFUg':function(_0x252246,_0x4e001d){return _0x252246(_0x4e001d);},'asmQh':function(_0x352ad9,_0x1c71ef){return _0x352ad9!==_0x1c71ef;},'AUqVB':function(_0x48e641,_0x1d6eef){return _0x48e641>=_0x1d6eef;},'FwqPx':function(_0x53b06e,_0x3dbecf){return _0x53b06e(_0x3dbecf);},'SXUdg':_0x193a0e(0x191,0x18d,0x12c,0xe4),'rzdxx':function(_0x1a2d15,_0x119435){return _0x1a2d15==_0x119435;},'GtNrx':'true','hcOSJ':function(_0x3a1dd6,_0x41a2bc){return _0x3a1dd6(_0x41a2bc);},'zmynp':function(_0x4d9f79,_0x55d795){return _0x4d9f79(_0x55d795);},'SKUmb':'随机(-1)','HweRC':function(_0x35abf4,_0x56255e){return _0x35abf4==_0x56255e;},'IGmfA':_0x193a0e(0x141,0x199,0x163,0x1e9),'ghvpR':_0x193a0e(0x3b,0xc2,0xb0,0x68),'HLhja':function(_0xbdc2a3,_0x27873e){return _0xbdc2a3===_0x27873e;},'LTVCO':_0x193a0e(0x1b9,0x1ae,0x1ab,0x180),'CrBKc':_0x193a0e(0x140,0x126,0x14f,0x1d1),'ggBmh':function(_0x4faefa,_0x109e01){return _0x4faefa===_0x109e01;},'acAwT':_0x44f930(0x14f,0x89,0x13d,0xca),'gZxwC':'bwVAc','cIxze':function(_0x5e6522,_0x43b4ea){return _0x5e6522(_0x43b4ea);},'beRgT':_0x193a0e(0xf0,0xd6,0x13d,0x13a),'Ytssr':function(_0x5e2a53,_0x4e1df2,_0x499c9){return _0x5e2a53(_0x4e1df2,_0x499c9);},'EezuL':_0x44f930(0x1fc,0x1b2,0x225,0x182)+_0x193a0e(0x1a4,0x12c,0x112,0x154),'xBeUG':function(_0x3a7251,_0x3c38e2){return _0x3a7251(_0x3c38e2);},'mUNDU':_0x193a0e(0xe3,0x80,0xbc,0x11f),'FZquu':_0x44f930(0x184,0x141,0x133,0x130)+_0x193a0e(0x74,0xba,0xdc,0xe3)+'e64\x20数据处理。','mZSPD':function(_0x56738c,_0x35ace5){return _0x56738c+_0x35ace5;},'rDztt':_0x193a0e(0x133,0x13f,0x124,0x171)+_0x193a0e(0x1c2,0x1bf,0x182,0x1c3)+'4,','YEABh':_0x44f930(0xa5,0x172,0xbd,0xe5),'pwGKS':function(_0x4c6963,_0x38d425){return _0x4c6963(_0x38d425);},'XvwmM':_0x44f930(0x139,0x14a,0x166,0x17e)+_0x44f930(0x1b,0x64,0x6c,0xbb),'LtugR':function(_0xaa5eb3,_0x59399e){return _0xaa5eb3(_0x59399e);},'pnjBQ':function(_0x6a2220,_0x4a23fe){return _0x6a2220===_0x4a23fe;},'HIoMJ':'umKlp','lEidN':_0x193a0e(0x19e,0x17b,0x175,0xe7)+_0x193a0e(0x105,0x89,0xba,0x13d),'hqOgc':function(_0x7a5d50,_0x50730c){return _0x7a5d50+_0x50730c;},'MjvLv':'图像已成功获取并格式'+_0x193a0e(0x13e,0x1cc,0x15f,0xb7)+'L。','yaAET':function(_0x471271,_0x5bc38f){return _0x471271||_0x5bc38f;},'blYiN':_0x193a0e(0xcc,0x153,0xc0,0x164)+'4','CQgoX':_0x193a0e(0x22a,0x1c9,0x1af,0x137)+_0x44f930(0xf6,0xc8,0xc6,0x11f)+_0x44f930(-0xd,0x119,0xd4,0x77)};_0x79c53d['Fxsjt'](clearLog);const _0x3090cb=taskQueue['addTask']({'name':_0x79c53d[_0x44f930(0x11d,0x15e,0x10d,0x186)]((_0x2dd89b||'')['substring'](0x67*0x4+-0x2254+0x105c*0x2,0x164f*0x1+-0x866+0x21*-0x6b),_0x2dd89b&&_0x79c53d[_0x44f930(0xef,0xed,0xed,0x9a)](_0x2dd89b[_0x193a0e(0xda,0xf2,0x7e,0x111)],-0x283+-0x73c+0x9dd)?_0x79c53d['LfIHJ']:''),'type':TaskType['SD'],'prompt':_0x2dd89b});currentTaskId=_0x3090cb;function _0x44f930(_0x2c58df,_0xbe2a1b,_0x128752,_0x5d0ba8){return _0x5943(_0x5d0ba8- -0x141,_0xbe2a1b);}let _0x550a83=_0x54a852;_0x2dd89b=_0x79c53d[_0x193a0e(0x55,0x7b,0x6f,0x1e)](processCharacterPrompt,_0x2dd89b),_0x54a852=_0x79c53d[_0x44f930(0xab,0x149,0x105,0xa6)](processCharacterPrompt,_0x54a852),_0x2dd89b=await _0x79c53d['qxdAz'](stripChineseAnnotations,_0x2dd89b),_0x54a852=await _0x79c53d[_0x44f930(0x93,0xe2,0x74,0x84)](stripChineseAnnotations,_0x54a852);const _0x4dff7c=extension_settings[extensionName][_0x193a0e(0xf8,0x100,0x186,0x12d)][_0x193a0e(0x188,0x227,0x18b,0x15e)](),_0x55a744=extension_settings[extensionName];addLog(_0x193a0e(0x1ab,0x1e6,0x144,0x17c)+_0x44f930(0xb8,0x9,0x55,0x6b)+'端为'+_0x55a744[_0x44f930(0x188,0x204,0x10b,0x191)]+_0x193a0e(0x30,0x64,0xaf,0x7b)+_0x55a744[_0x193a0e(0xc9,0x43,0x6b,0xcd)+_0x193a0e(0x180,0xce,0x151,0x18c)]);const _0x5bd8a3=_0x54a852&&_0x79c53d['NpUXj'](_0x54a852[_0x193a0e(0x1cd,0x1b0,0x18b,0x1d1)](),'')?_0x54a852:_0x2dd89b;_0x79c53d['pprwy'](addLog,_0x44f930(-0x1e,0x52,0x61,0x63)+_0x5bd8a3);let _0x158004=![];_0x5bd8a3[_0x193a0e(0xef,0xff,0xef,0x17c)](_0x44f930(0x110,0x189,0x10c,0x17b)+_0x193a0e(0xc1,0xf4,0xf3,0xfb))&&(_0x158004=!![]);_0x79c53d[_0x44f930(0x9e,0x75,-0x19,0x89)](addLog,_0x193a0e(0xcd,0x56,0x6d,0x91)+_0x44f930(0x14c,0xf8,0x13a,0x143)+'les):\x20'+_0x158004);let _0x4f9cc5={},_0x4ca392='',_0x59360c='';if(_0x158004){_0x79c53d[_0x193a0e(0x114,0x172,0x147,0xa4)](addLog,_0x193a0e(0x1ab,0x96,0x111,0xf6)+_0x44f930(0x172,0xb5,0x1d6,0x144)),_0x4f9cc5=parsePromptStringWithCoordinates(_0x5bd8a3),_0x4ca392=_0x4f9cc5[_0x79c53d['oZJME']];for(let _0x5e9f6c=0x73d*-0x2+-0x1f43+0x2dbe;_0x79c53d[_0x44f930(0x131,0x86,0xed,0x12d)](_0x5e9f6c,0xf*-0x1ea+-0xbd*-0x1f+0x5d7);_0x5e9f6c++){_0x4f9cc5['Character\x20'+_0x5e9f6c+_0x193a0e(0x150,0x15e,0x131,0x199)]&&(_0x59360c=_0x79c53d['GSzZQ'](_0x79c53d[_0x44f930(0x14d,0x1a6,0x1ab,0x12f)](_0x59360c,',\x20'),_0x4f9cc5[_0x44f930(0x110,0x113,-0xa,0x75)+_0x5e9f6c+'\x20Prompt']));}}else{if(_0x79c53d[_0x44f930(0x1cb,0x1e5,0x176,0x17f)](_0x79c53d[_0x44f930(0x1dc,0x1c8,0xec,0x173)],_0x79c53d[_0x44f930(0x206,0x17c,0x101,0x173)]))_0x79c53d[_0x193a0e(0x38,0x52,0xdd,0x11d)](addLog,_0x79c53d[_0x193a0e(0x19a,0x11c,0x17f,0x15e)]),_0x4ca392=_0x5bd8a3;else{const _0x2552cd=_0x3a114b[_0x193a0e(0x144,0x58,0x9e,0x130)](_0xd19562,arguments);return _0x5df7e4=null,_0x2552cd;}}let {modifiedPrompt:_0x262d2b,insertions:_0x281f6a}=await _0x79c53d[_0x44f930(0x122,0x1ab,0xcc,0x16d)](prompt_replace,_0x4ca392,_0x59360c);function _0x193a0e(_0x3ec71f,_0x2b6ef7,_0x3e8349,_0x1b8b86){return _0x5943(_0x3e8349- -0x130,_0x3ec71f);}if(_0x158004){if(_0x79c53d[_0x44f930(0x33,0x6b,-0x50,0x55)]===_0x79c53d[_0x193a0e(0x54,0xa8,0x66,0xc3)])for(let _0x2d4c89=0xed6+-0x88f+-0x92*0xb;_0x79c53d[_0x193a0e(0xa7,0x12,0x92,0x126)](_0x2d4c89,0x3*0x23e+-0x5*-0x2a1+0x1*-0x13db);_0x2d4c89++){_0x44f930(0x69,0x34,0xb4,0x64)!==_0x79c53d['PFPPs']?_0x5cc003=_0x79c53d['KwemT'](_0x1da50d,_0x4182d3):_0x4f9cc5[_0x193a0e(0x40,-0x15,0x86,0x15)+_0x2d4c89+_0x44f930(0xd4,0x102,0xeb,0x120)]&&(_0x262d2b=_0x79c53d[_0x193a0e(0x187,0x1ff,0x177,0xdc)](_0x79c53d[_0x44f930(0x92,0xe3,0xee,0x111)](_0x262d2b,',\x20'),_0x79c53d[_0x44f930(0xd7,0x15,0x101,0x86)](prompt_replace_for_character,_0x4f9cc5[_0x193a0e(0x16,0x81,0x86,0xf0)+_0x2d4c89+_0x193a0e(0xaa,0x100,0x131,0x1d8)])));}else{const _0x1842c9=_0x20f0f8?function(){if(_0x477e3d){const _0x2ecc27=_0x56d226['apply'](_0x3ba86d,arguments);return _0x2cb1a7=null,_0x2ecc27;}}:function(){};return _0x3b9557=![],_0x1842c9;}}let _0x20fac3=await _0x79c53d[_0x193a0e(0x85,-0x2,0xa6,0x45)](zhengmian,extension_settings[extensionName][_0x44f930(0xfb,0x74,0x62,0x109)][extension_settings[extensionName][_0x193a0e(0x16d,0x159,0xee,0x66)]][_0x44f930(0xfd,0x8f,0x89,0x104)+'t'],_0x262d2b,extension_settings[extensionName][_0x193a0e(0xe5,0x164,0x11a,0x18a)][extension_settings[extensionName]['yusheid_sd']][_0x193a0e(0xe7,0x10a,0x115,0x145)+_0x193a0e(0xf3,0xf2,0xb1,0xe6)],extension_settings[extensionName]['AQT_sd'],_0x281f6a),_0x3f2b1e=await _0x79c53d[_0x193a0e(0x17d,0xff,0x17e,0x1a6)](fumian,extension_settings[extensionName][_0x44f930(0xdb,0x15d,0x131,0x109)][extension_settings[extensionName][_0x193a0e(0xe3,0x53,0xee,0xe3)]][_0x193a0e(0xcc,0xb8,0xde,0x15d)+'ompt'],extension_settings[extensionName][_0x193a0e(0x150,0x156,0x119,0x17f)]);_0x79c53d['zLgfl'](addLog,'负面为:\x20'+_0x3f2b1e),extension_settings['sd'][_0x79c53d[_0x193a0e(0xb3,0x11b,0x10d,0x172)]]=_0x4dff7c,await _0x79c53d[_0x193a0e(0x149,0xc1,0x136,0x1a7)](saveSettingsDebounced);try{if(_0x44f930(0x11d,0xe5,0xe4,0x7e)===_0x79c53d['bRUDr']){_0x79c53d[_0x44f930(0x166,0xea,0x1dd,0x136)](_0xdbc0cc,_0x15e611);return;}else{if(_0x55a744[_0x44f930(0x1b2,0x22b,0x1f9,0x191)]===_0x79c53d[_0x44f930(0xae,0x155,0xce,0xce)]){const _0x4c3cef={};_0x4c3cef[_0x193a0e(0xdb,0x52,0x8a,0xf0)]=_0x55a744[_0x44f930(0x172,0x103,0x11e,0x160)+_0x44f930(0xf7,0x90,0x8a,0xd0)]?_0x55a744[_0x44f930(0x1a0,0xc9,0x18a,0x160)+_0x193a0e(0xa8,0x110,0xe1,0xe3)]:'',_0x4c3cef[_0x44f930(0x176,0x1f5,0x155,0x183)]=_0x4dff7c;const _0x48b9e0=await fetch(_0x79c53d['ipLVP'],{'method':_0x79c53d[_0x193a0e(0x10e,0x123,0x19f,0x156)],'body':JSON[_0x44f930(0xf6,0xad,0x89,0xeb)](_0x4c3cef),'headers':_0x79c53d[_0x193a0e(0xa4,0x149,0xb7,0xc1)](getRequestHeaders,window[_0x44f930(0x8b,0xb2,0x14c,0xdf)])});if(!_0x48b9e0['ok']){if(_0x79c53d['NpUXj'](_0x79c53d[_0x193a0e(0x13e,0xe6,0xfd,0x18d)],_0x193a0e(0x13b,0x59,0xc9,0x49))){_0x79c53d[_0x44f930(0x195,0x103,0xed,0x107)](addLog,_0x193a0e(0x1eb,0x20a,0x19d,0x189)+_0x48b9e0['status']+'\x20'+_0x48b9e0['statusText']);throw new Error(_0x193a0e(0x142,0x1fd,0x19d,0x235)+_0x48b9e0[_0x44f930(0xcb,0x10d,0x79,0x6e)]+'\x20'+_0x48b9e0['statusText']);}else throw new _0x51e2c8(_0x44f930(0x155,0x1e1,0x1df,0x164)+'像数据。');}let _0x3c9ce5=await _0x48b9e0[_0x193a0e(0xf0,0x116,0x89,0x67)]();console['log'](_0x193a0e(0x3f,0x53,0xa8,0xc3)+'2222',_0x3c9ce5),console[_0x44f930(-0x36,0x82,-0x2,0x67)](_0x79c53d['WNweQ'],_0x55a744[_0x193a0e(0xc9,0x112,0x6b,0xc1)+_0x193a0e(0x14a,0xee,0x151,0x1ad)]);if(_0x79c53d[_0x44f930(0xb8,0xb0,0x12,0x99)](_0x3c9ce5,_0x55a744[_0x44f930(0xb2,0x102,0x17,0x5a)+'8_model'])){if(_0x79c53d[_0x44f930(0x117,0xa9,0x31,0xc6)](_0x79c53d[_0x44f930(0x1d1,0x1a5,0x13f,0x169)],_0x79c53d[_0x44f930(0xc6,0x14d,0x147,0x169)]))_0x400e83['on'](_0x483422[_0x44f930(0x1cc,0xfb,0x1c2,0x181)+_0x193a0e(0x3c,-0x19,0x87,-0x7)+'ST'],_0x210192),_0x2888c5(_0x79c53d[_0x193a0e(0x5e,0xab,0x94,0x10)]);else{_0x79c53d[_0x193a0e(0x13a,0x67,0x9a,0xf)](addLog,'正在设置模型为'+_0x55a744[_0x44f930(0x8a,-0x4b,0xeb,0x5a)+_0x44f930(0xdc,0x1de,0xfb,0x140)]+'...'),toastr[_0x193a0e(0x124,0x133,0xe9,0xae)]('正在设置模型...为'+_0x55a744['sd_cchatu_'+_0x44f930(0xd1,0xf1,0x1a6,0x140)]);const _0x48c637={};_0x48c637['auth']=_0x55a744[_0x193a0e(0x17a,0x182,0x171,0x179)+_0x44f930(0x137,0xb1,0x85,0xd0)]?_0x55a744[_0x193a0e(0x1f1,0x11e,0x171,0xf4)+_0x193a0e(0xb3,0x5a,0xe1,0xfe)]:'',_0x48c637[_0x44f930(0x17e,0x132,0x163,0x183)]=_0x4dff7c,_0x48c637[_0x193a0e(0xaf,0x169,0xd8,0xbb)]=_0x55a744[_0x44f930(0x67,0x9c,0xb8,0x5a)+'8_model'];const _0x52460a=await _0x79c53d[_0x44f930(0x14a,0x154,0xf4,0x148)](fetch,_0x44f930(0x133,0x1a,0x69,0xc2)+'t-model',{'method':_0x79c53d[_0x193a0e(0x199,0x141,0x19f,0x198)],'body':JSON[_0x44f930(0x17a,0x4e,0x11b,0xeb)](_0x48c637),'headers':_0x79c53d[_0x44f930(0x18d,0xdc,0xb8,0x118)](getRequestHeaders,window[_0x193a0e(0x185,0x146,0xf0,0x11c)])});if(!_0x52460a['ok']){_0x79c53d['JFUMk'](addLog,_0x44f930(0x229,0x101,0x23a,0x197)+_0x52460a[_0x193a0e(0x42,0x65,0x7f,0xd3)]+'\x20'+_0x52460a['statusText']);throw new Error(_0x193a0e(0x1e1,0x241,0x1a8,0x129)+_0x52460a['status']+'\x20'+_0x52460a[_0x193a0e(0x99,0x15d,0x100,0x16d)]);}toastr['info']('设置模型...为'+_0x55a744[_0x193a0e(0x100,0x11,0x6b,0x1d)+'8_model']+'成功');}}}else{if(_0x79c53d[_0x193a0e(0x215,0x18e,0x190,0x1a5)](_0x79c53d[_0x193a0e(0x8f,0x114,0x9b,0xa4)],_0x79c53d[_0x44f930(0x149,0x15a,0x183,0x102)]))_0x5c166e[_0x44f930(-0x24,0x15,-0x9,0x56)+_0x44f930(0x188,0x193,0xe2,0x179)](_0x45ffee[_0x44f930(0x21d,0x1b3,0x1d7,0x181)+'MAGE_REQUE'+'ST'],_0x3770f6),_0x5a9e3d['initialize'+_0x44f930(0x1b2,0x77,0x140,0x117)]=![],_0x79c53d[_0x193a0e(0xb5,0xe1,0xdd,0x184)](_0x5907bf,_0x193a0e(0x20a,0x1f2,0x196,0x112)+_0x193a0e(0x11b,0x116,0xf8,0x112));else{let _0x16f6b4=await _0x79c53d[_0x193a0e(0x157,0xff,0xbe,0x1d)](getSDMode,_0x4dff7c);_0x79c53d[_0x193a0e(0x58,0x79,0xaa,0x30)](_0x16f6b4,_0x55a744[_0x44f930(0xf1,0xc5,0x71,0x5a)+_0x44f930(0x154,0x14b,0x186,0x140)])&&(_0x79c53d[_0x193a0e(0x1d6,0xde,0x16b,0x1d3)](addLog,_0x193a0e(0x5f,0x7a,0x64,-0x42)+_0x55a744[_0x193a0e(0x45,0x9c,0x6b,0x6f)+_0x193a0e(0xfa,0x165,0x151,0x1ed)]+_0x193a0e(0x79,0x147,0xe6,0x53)),await setSDMode(_0x4dff7c,_0x55a744['sd_cchatu_'+_0x44f930(0x167,0xa9,0x1b1,0x140)]));}}}}catch(_0x1f3dfa){_0x79c53d[_0x44f930(0x181,0x5e,0x14f,0xf6)](addLog,_0x193a0e(0x1b3,0xa1,0x13f,0xe5)+':\x20'+_0x1f3dfa[_0x193a0e(0x112,0x161,0xc8,0x104)]+(_0x44f930(0x150,0xb2,0xe8,0xe9)+_0x193a0e(0x11c,0x1ba,0x189,0x145)+'查模型是否正确。')),taskQueue['completeTa'+'sk'](_0x3090cb,![]),currentTaskId=null;throw new Error(_0x44f930(0x8f,0x18b,0x16f,0x12e)+'，请检查sdwebu'+_0x193a0e(0x137,0x188,0x189,0x16c)+_0x193a0e(0x9e,0x162,0x11b,0xcd));}let _0x4f9c39=-(-0x20d3*-0x1+-0x1*-0x233d+-0x440f);const _0x238877=_0x55a744[_0x193a0e(0x116,0x1bf,0x198,0x1de)];_0x79c53d['asmQh'](_0x238877,'')&&_0x238877!==null&&!isNaN(Number(_0x238877))&&_0x79c53d[_0x193a0e(0xb7,0x135,0xae,0x143)](_0x79c53d[_0x44f930(0x100,0xdb,0x15a,0x161)](Number,_0x238877),-0xc00+0x5ed+-0x613*-0x1)&&(_0x79c53d['asmQh'](_0x79c53d[_0x193a0e(0x17f,0x18a,0x146,0xb1)],_0x79c53d[_0x193a0e(0x16c,0xba,0x146,0x194)])?_0x41b253=_0x79c53d[_0x193a0e(0x55,0x3d,0xa0,0xb6)](_0x54c81f,',\x20')+_0x79c53d[_0x44f930(0x11,0x158,0x115,0xb5)](_0x13c411,_0x14abb6[_0x44f930(0x104,0x5e,0x5,0x75)+_0x34207b+'\x20Prompt']):_0x4f9c39=Number(_0x238877));let _0x1bee42={'prompt':_0x20fac3,'negative_prompt':_0x3f2b1e,'sampler_name':_0x55a744['sd_cchatu_'+_0x193a0e(0x1c0,0x1aa,0x143,0xef)+_0x44f930(0xa5,0x65,0x104,0x7a)],'scheduler':_0x55a744[_0x44f930(0xa4,0x8f,0x0,0x5a)+_0x44f930(0x113,0x8f,-0x20,0x73)+'r'],'steps':_0x55a744['sd_csteps'],'cfg_scale':_0x55a744[_0x193a0e(0xdf,0xb7,0x13b,0x1dd)],'width':_0x2f04e9?_0x2f04e9:_0x55a744[_0x193a0e(0x11c,0x116,0x14e,0x17a)],'height':_0xb655f7?_0xb655f7:_0x55a744['sd_cheight'],'restore_faces':_0x79c53d['rzdxx'](_0x55a744['restoreFac'+'es'],_0x79c53d[_0x193a0e(0x196,0x17c,0x1b3,0x1bc)]),'enable_hr':_0x55a744['sd_chires_'+_0x44f930(0xc3,0x18b,0x163,0x11a)]==_0x79c53d['GtNrx'],'hr_upscaler':_0x55a744[_0x193a0e(0x50,0x78,0x6b,0x25)+_0x193a0e(0xa3,0x136,0x145,0xaa)],'hr_scale':_0x55a744['sd_cupscal'+_0x44f930(0xb9,0xa7,-0x1d,0x59)],'hr_additional_modules':[],'denoising_strength':_0x55a744['sd_cdenois'+_0x44f930(0xe6,0xd9,0x2e,0xa2)+'th'],'hr_second_pass_steps':_0x55a744[_0x44f930(0x209,0x1fd,0x182,0x18d)+_0x44f930(0x35,0x9b,0x76,0x5b)],'seed':_0x4f9c39,'override_settings':{'CLIP_stop_at_last_layers':Number(_0x55a744[_0x193a0e(0xb7,0x199,0xf9,0x15e)+_0x193a0e(0x95,0x6b,0x99,0xd3)]),'sd_vae':_0x55a744[_0x44f930(0x17,0x7a,0xde,0x5a)+'8_vae']},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x79c53d['pprwy'](addLog,_0x193a0e(0x1a2,0x1bd,0x1a7,0x223)+_0x44f930(0x13b,0x65,0x131,0xc4)+_0x1bee42[_0x193a0e(0x222,0x119,0x1a7,0x241)+_0x193a0e(0x34,0x169,0xd4,0x117)]),_0x79c53d[_0x44f930(0xc1,0x105,0xb6,0x103)](addLog,_0x193a0e(0x126,0x111,0x106,0x9d)+'高清修复\x20为'+_0x1bee42[_0x44f930(0x50,0x155,0x8e,0xbd)]);if(_0x79c53d[_0x193a0e(0x12c,0xc7,0x12e,0x91)](_0x55a744[_0x44f930(0xaa,0x62,0x72,0x6c)+_0x44f930(0x9a,0x1af,0xce,0x139)],'true')){_0x79c53d[_0x193a0e(0x129,0x1e0,0x191,0x1d9)](addLog,_0x193a0e(0xaf,0xfe,0x13a,0xed)+'face\x20为开启');const _0x384c05={};_0x384c05[_0x44f930(0x50,0xb2,0x111,0x71)]=_0x79c53d['XPmHI'];const _0x3085cd={};_0x3085cd[_0x44f930(0x1b9,0x117,0x17b,0x153)]=[!![],!![],_0x384c05];const _0x2efefc={};_0x2efefc[_0x193a0e(0xd3,0x133,0xc2,0x87)]=_0x3085cd;const _0xa07746={};_0xa07746[_0x44f930(0x11b,0x2,0x84,0x8c)+_0x44f930(0x11a,0x144,0x16f,0x10e)]=_0x2efefc,_0x1bee42=deepMerge(_0x1bee42,_0xa07746);}const _0xf0fe78=_0x193a0e(0x202,0x113,0x1aa,0x1fd)+_0x44f930(0x82,0xd1,0x12,0x8b)+_0x193a0e(0xc5,0x195,0x161,0x192)+_0x193a0e(0x19d,0xf9,0x10c,0x160)+_0x20fac3+('\x0a-\x20**负面提示\x20'+_0x193a0e(0x9a,0x24,0x72,0x25)+_0x44f930(0xe3,0xd5,0x181,0x119)+'\x20')+_0x3f2b1e+(_0x44f930(0x1cd,0x97,0x186,0x12b)+_0x193a0e(0x127,0x22e,0x1ac,0x126)+'**\x20')+_0x1bee42['sampler_na'+'me']+('\x0a-\x20**步数\x20(S'+_0x193a0e(0x131,0xe9,0x180,0x215))+_0x1bee42[_0x44f930(0x4a,0x4e,0xa2,0x5b)]+('\x0a-\x20**CFG\x20S'+_0x44f930(0xe3,0x155,0xd0,0x157))+_0x1bee42[_0x193a0e(0x10b,0x106,0x91,0xe5)]+(_0x193a0e(0xd4,0x102,0x90,0x10d)+'ize):**\x20')+_0x1bee42[_0x193a0e(0x105,0xb3,0x108,0x175)]+'x'+_0x1bee42[_0x44f930(0x1eb,0x119,0x1ec,0x170)]+('\x0a-\x20**种子\x20(S'+_0x44f930(0x118,0x183,0x13a,0x156))+(_0x1bee42[_0x44f930(0xb4,0x174,0xee,0x128)]===-(0x15cd+0xa*-0x35b+-0x5e1*-0x2)?_0x79c53d[_0x193a0e(0x66,0x9b,0x70,-0x3)]:_0x1bee42[_0x193a0e(0x149,0x1c0,0x139,0x1a2)])+(_0x193a0e(0x149,0x122,0x188,0x149)+'odel):**\x20')+_0x55a744[_0x193a0e(-0x31,-0x39,0x6b,-0x1d)+_0x193a0e(0xc2,0xad,0x151,0x16d)]+(_0x193a0e(0x4f,0x47,0xbb,0xd0)+'*\x20')+_0x1bee42[_0x44f930(0xf4,0x1f2,0x142,0x189)+_0x193a0e(0xf,0x11b,0x7a,0x92)]['sd_vae']+(_0x193a0e(0x14b,0x1e2,0x1a1,0x1ed)+_0x44f930(0x1dd,0x1d3,0x141,0x162))+_0x1bee42['override_s'+'ettings']['CLIP_stop_'+_0x193a0e(0x17c,0x192,0x15c,0x142)+_0x44f930(0x104,0x41,0x65,0xa7)]+(_0x193a0e(0x57,0x11,0xa7,0x37)+_0x193a0e(0x114,0xec,0x15b,0x146)+'):**\x20')+_0x1bee42[_0x44f930(0x96,0x104,0x159,0xbd)]+(_0x193a0e(0x10c,0x199,0x1b2,0x21e)+'(Upscale\x20F'+_0x193a0e(0x46,0xdc,0xe2,0x13c))+_0x1bee42[_0x44f930(0xd4,0x4d,0x147,0xb6)]+(_0x44f930(0xa3,0x145,0x1ba,0x127)+_0x193a0e(0xfd,0x15c,0x1a5,0x10b)+_0x44f930(0x17c,0x124,0x1d3,0x172)+_0x193a0e(0xd7,0x208,0x16f,0x13a))+_0x1bee42[_0x193a0e(0x191,0x161,0x137,0x184)+_0x193a0e(0xd7,0x1b5,0x166,0x123)]+(_0x44f930(0xf1,0x3f,-0x3,0x91)+_0x44f930(0x4a,0x33,0x3b,0x62)+_0x193a0e(0x5e,0x91,0xe0,0x155))+_0x1bee42[_0x193a0e(0x231,0x15c,0x1a7,0x23c)+'ces']+('\x0a-\x20**ADeta'+_0x193a0e(0xb2,0x3f,0xa1,0x52))+_0x79c53d['HweRC'](_0x55a744[_0x193a0e(0x2e,0x52,0x7d,-0x1d)+_0x193a0e(0xa5,0xf9,0x14a,0x1b0)],_0x79c53d['GtNrx'])+_0x44f930(0x101,0xea,0x1ac,0x145);_0x79c53d[_0x44f930(0xaa,0xf,0x7a,0x86)](addLog,_0xf0fe78),_0x79c53d[_0x193a0e(0x3a,0x80,0xb6,0x152)](addLog,_0x44f930(0x1db,0x17c,0x101,0x16b)+'数为'+JSON[_0x193a0e(0x105,0x178,0xfc,0xf5)](_0x1bee42)),console[_0x193a0e(0x54,0xee,0x78,0xea)](_0x79c53d[_0x44f930(0xcb,0x1e,0x11c,0xb9)],_0x1bee42);let _0x251fc2=!![];while(_0x251fc2){window[_0x44f930(0x113,0xf3,0x52,0xf2)]?_0x79c53d[_0x193a0e(0x20d,0x227,0x190,0xf2)](_0x193a0e(0x144,0x154,0xb0,0xdf),_0x79c53d[_0x44f930(0x129,0xe4,0xff,0x131)])?_0x251fc2=![]:_0xc31380['Character\x20'+_0x2af222+_0x44f930(0xf3,0xd7,0x133,0x120)]&&(_0x264ffb=_0x79c53d['GSzZQ'](_0x79c53d['cZNSz'](_0x12590a,',\x20'),_0x38f40d[_0x44f930(-0x22,0x116,0x36,0x75)+_0x20d349+_0x193a0e(0x137,0xf0,0x131,0x1d6)])):await _0x79c53d[_0x44f930(0x26,0xfa,0x159,0xcc)](sleep,-0x1afd+-0x1e3e+0x3d23);};try{if(_0x79c53d['HLhja'](_0x79c53d['LTVCO'],_0x79c53d[_0x193a0e(0xd2,-0x9,0x9f,0x145)])){window[_0x193a0e(0x10c,0xfd,0x103,0x189)]=!![],taskQueue['updateStat'+'us'](_0x3090cb,_0x79c53d[_0x44f930(0x166,0x118,0x5b,0xe1)]);if(_0x79c53d[_0x193a0e(0x126,0xc3,0xc1,0xad)](_0x55a744[_0x44f930(0x215,0x14c,0x214,0x191)],_0x79c53d[_0x44f930(0x174,0xe2,0xc4,0xce)])){if(_0x79c53d['jLmVn'](_0x79c53d[_0x193a0e(0x196,0x18f,0x174,0xdb)],_0x79c53d[_0x44f930(0x11f,0x17a,0x15d,0x19d)]))for(let _0x477b65=-0x409+0x26fb+-0x22f1;_0x79c53d['tPanT'](_0x477b65,0x3*-0x9b6+-0x22a8+0x3fce);_0x477b65++){_0x49cd7f[_0x44f930(-0x1a,0xa8,0x7f,0x75)+_0x477b65+_0x44f930(0x112,0xdc,0x177,0x120)]&&(_0x423b7c=_0x79c53d[_0x193a0e(0x1c7,0x225,0x18d,0x1c2)](_0x79c53d['zgKil'](_0x5d77fe,',\x20'),_0x79c53d[_0x193a0e(0x32,0xf0,0x98,0xe1)](_0x168995,_0x535286[_0x193a0e(0x11,0x102,0x86,0x8)+_0x477b65+'\x20Prompt'])));}else{if(!taskQueue['isTaskInQu'+'eue'](_0x3090cb)){_0x79c53d[_0x44f930(0xb2,0x121,0xf4,0x110)](addLog,_0x79c53d[_0x44f930(0x7f,0x122,0x170,0xe6)]),eventSource[_0x193a0e(0xa7,0x11d,0x11d,0x82)](_0x79c53d[_0x44f930(0x6f,0x8b,0xf8,0x65)]);throw new Error(_0x79c53d[_0x193a0e(0x100,0x88,0xb5,0x8d)]);}_0x1bee42[_0x193a0e(0xf2,0x1cd,0x194,0xfb)]=_0x4dff7c,console[_0x44f930(0x1,0x48,0x84,0x67)](_0x44f930(0xdd,0x17f,0xd7,0x123)+_0x193a0e(0x116,0xa1,0xad,0x99)+'load',_0x55a744['st_chatu8_'+_0x193a0e(0x163,0x8b,0xe1,0x179)]),_0x1bee42[_0x193a0e(-0x6,0xc0,0x8a,0x10a)]=_0x55a744[_0x193a0e(0x20b,0x20b,0x171,0xcd)+_0x193a0e(0x50,0xbc,0xe1,0xf0)]?_0x55a744[_0x44f930(0x1e0,0x18f,0x159,0x160)+_0x44f930(0x16c,0x143,0x6c,0xd0)]:'';const _0x54e091=await _0x79c53d[_0x44f930(0xc4,0x144,0x25,0xc1)](fetch,_0x79c53d[_0x193a0e(0xa6,0xe0,0xea,0xab)],{'method':_0x193a0e(0x184,0x1be,0x148,0x192),'headers':getRequestHeaders(window['token']),'body':JSON[_0x193a0e(0x57,0xa4,0xfc,0xaa)](_0x1bee42)});if(!_0x54e091['ok']){const _0x3ad040=await _0x54e091[_0x44f930(0x3c,0x81,0x3b,0x78)]();_0x79c53d[_0x44f930(0x12c,0x147,0x1d7,0x154)](addLog,_0x193a0e(0x103,0x1ad,0x187,0x17c)+_0x44f930(0x87,-0x28,0x75,0x54)+_0x54e091[_0x44f930(0xc6,0x3d,-0x37,0x6e)]+'。响应内容:\x20'+_0x3ad040),console[_0x44f930(-0x2b,0xd1,0x100,0x67)](_0x79c53d[_0x193a0e(0x12b,0x247,0x1a9,0x189)],_0x3ad040);throw new Error(_0x44f930(0x13b,0xb3,0x79,0x116)+_0x54e091[_0x44f930(0x6c,0x40,0xea,0x6e)]+_0x193a0e(0x96,0xb2,0x80,0xbe)+_0x3ad040);}const _0x17bbe5=await _0x54e091[_0x44f930(0xde,0x4,0xee,0x78)]();let _0x203eff='';try{const _0x43f210=JSON[_0x193a0e(0xcb,0x178,0xf5,0x125)](_0x17bbe5);_0x203eff=_0x43f210[_0x44f930(0x16d,0x17e,0x19f,0x138)][0xa*0x3e2+0x6*-0xbf+-0x225a];}catch(_0x48f940){_0x79c53d['pprwy'](addLog,_0x79c53d[_0x193a0e(0x95,0xfa,0x8e,0xec)]),_0x203eff=_0x17bbe5;}const _0x18c76a=_0x79c53d[_0x193a0e(0x143,0x154,0x105,0x141)](_0x79c53d[_0x44f930(0x176,0x1f8,0x22c,0x19f)],_0x203eff);_0x79c53d[_0x44f930(0x12e,0x7d,0x32,0xcc)](addLog,_0x44f930(0x1d4,0x17b,0x1f3,0x159)+'化为\x20data\x20UR'+'L。'),taskQueue[_0x193a0e(0xb5,0x17a,0x102,0x159)+'sk'](_0x3090cb,!![]),currentTaskId=null;const _0x1cda24={};return _0x1cda24['image']=_0x18c76a,_0x1cda24[_0x44f930(0x62,0x5b,0x171,0xe3)]=_0x54a852||'',_0x1cda24;}}else{if(_0x79c53d[_0x44f930(0xbc,0x6b,0x131,0xb0)](_0x79c53d[_0x44f930(0xe4,0x54,0x113,0x74)],_0x79c53d[_0x193a0e(0x42,0x6e,0x85,0x4d)])){if(!taskQueue[_0x44f930(0x129,0x108,0x130,0xa3)+'eue'](_0x3090cb)){_0x79c53d[_0x193a0e(0x65,0x56,0xda,0x40)](addLog,_0x79c53d['peGEy']);throw new Error(_0x79c53d[_0x44f930(0x61,0x33,0xeb,0xa4)]);}const _0x221fc3=new URL(_0x4dff7c+(_0x193a0e(0x18f,0x24b,0x1ad,0x125)+_0x44f930(0x136,0x212,0x20a,0x184)));window[_0x44f930(0x77,0x143,0xe3,0xf2)]=![];const _0x3de28e=await _0x79c53d[_0x193a0e(0x1f1,0x1f0,0x14b,0x14c)](fetch,_0x221fc3,{'method':_0x79c53d[_0x193a0e(0x1a8,0x1c0,0x19f,0x13d)],'body':JSON['stringify'](_0x1bee42),'headers':{'Content-Type':_0x79c53d['XvwmM'],'Authorization':_0x79c53d[_0x193a0e(0x146,0x1ea,0x158,0x17a)](getsdAuth)}});window[_0x193a0e(0xc3,0xad,0x103,0x17f)]=!![];if(!_0x3de28e['ok']){const _0xfb1d15=await _0x3de28e[_0x44f930(0xa9,0xa2,0x4e,0x78)]();_0x79c53d[_0x193a0e(0x1e9,0x173,0x185,0xf2)](addLog,_0x44f930(0x152,0x184,0xaf,0xfe)+_0x193a0e(0xdf,0xb9,0x152,0x134)+_0x3de28e[_0x44f930(0xd2,-0x2d,0xc4,0x6e)]+_0x193a0e(0xad,0x79,0xa3,0xdb)+_0xfb1d15),console[_0x193a0e(0x109,0xbf,0x78,0xf6)](_0x79c53d[_0x44f930(0x1a7,0x132,0x1c4,0x198)],_0xfb1d15);throw new Error('请求失败,状态码:\x20'+_0x3de28e[_0x193a0e(-0x16,0x59,0x7f,0x19)]+_0x44f930(0x87,-0x17,-0x1b,0x6f)+_0xfb1d15);}const _0x39cee6=await _0x3de28e['json']();if(!_0x39cee6['images']||_0x79c53d[_0x193a0e(0x90,0x99,0xc5,0x6e)](_0x39cee6[_0x193a0e(0x1e1,0x199,0x149,0x138)][_0x193a0e(0x107,0x3b,0x7e,0x52)],0x1cd*0x1+0x299*0x1+0x466*-0x1)){if(_0x79c53d[_0x193a0e(0xdc,0x4a,0xec,0x80)](_0x79c53d[_0x44f930(0x3d,0xc7,0xbc,0x6a)],_0x44f930(0xde,0x5d,0x162,0xdc)))throw new Error(_0x79c53d[_0x193a0e(0x80,0x17d,0xeb,0x130)]);else _0x79c53d[_0x193a0e(0x76,0x10e,0xb6,0xdc)](_0x48863f,_0x79c53d[_0x44f930(0x126,0x116,0x177,0x106)]),_0x127f87=_0x79c53d[_0x193a0e(0x1d1,0xef,0x14b,0x1f0)](_0x37a4aa,_0x5f9b84,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x79c53d['XPmHI']}]}}});}const _0x2474db=_0x39cee6[_0x193a0e(0x123,0x10a,0x149,0x19b)][-0xa43+0x2*0xd3+0x1b9*0x5],_0x1a89de=_0x79c53d['hqOgc'](_0x79c53d[_0x193a0e(0x1bb,0x1b5,0x1b0,0x1b5)],_0x2474db);return addLog(_0x79c53d['MjvLv']),taskQueue['completeTa'+'sk'](_0x3090cb,!![]),currentTaskId=null,{'image':_0x1a89de,'change':_0x79c53d[_0x193a0e(0x1de,0x17e,0x1a6,0x1a7)](_0x550a83,'')};}else _0x11aec5[_0x193a0e(0x11b,0x1d,0xa5,0x51)+_0x44f930(0x13c,0x163,0xea,0x117)]=!![],_0x79c53d['pRlqB'](_0x5b988d);}}else{_0x79c53d[_0x44f930(0x104,0x22,0x5d,0x89)](_0x125300,_0x79c53d[_0x44f930(0x15b,0x17c,0x68,0xe6)]),_0x23b9e5[_0x44f930(0x149,0xc6,0x75,0x10c)](_0x79c53d['NYlmC']);throw new _0x496c15('任务已取消');}}catch(_0x39a800){const _0x121d5c=_0x79c53d[_0x44f930(0x17b,0x183,0xc3,0xf3)][_0x193a0e(0x3,0xe3,0x79,0x4f)]('|');let _0x5e505b=-0x2*0x1377+0x1c0a+-0x1*-0xae4;while(!![]){switch(_0x121d5c[_0x5e505b++]){case'0':addLog(_0x44f930(0xa3,0x186,0x198,0xf9)+_0x39a800['message']);continue;case'1':currentTaskId=null;continue;case'2':if(_0x79c53d[_0x44f930(0x152,0x144,0x14d,0xd2)](_0x39a800[_0x44f930(0x67,0xb3,0xae,0xb7)],_0x79c53d[_0x193a0e(0x109,0x128,0xb5,0x1b)])){}else taskQueue[_0x193a0e(0xa2,0xaa,0x102,0x7c)+'sk'](_0x3090cb,![]);continue;case'3':window[_0x193a0e(0x8d,0x6c,0x103,0x120)]=!![];continue;case'4':throw _0x39a800;continue;case'5':console[_0x193a0e(0x225,0x10b,0x19b,0x187)](_0x79c53d[_0x193a0e(0xe,0x4e,0x69,0x5f)],_0x39a800);continue;}break;}}}async function sdGenerate(_0x4815c9){const _0x10e6ca={'iJZVU':function(_0x4134e2,_0x5d7716){return _0x4134e2(_0x5d7716);},'kLOBN':_0x15ae28(0x51c,0x479,0x49d,0x436),'jUOGJ':_0x15ae28(0x468,0x428,0x470,0x4ad),'XlmZD':_0x15ae28(0x3b2,0x40e,0x3f4,0x3cc),'zQXrq':_0x15ae28(0x462,0x3bb,0x3c2,0x3cd),'QknJe':function(_0x2efb14,_0x647b3b){return _0x2efb14(_0x647b3b);},'pvcvj':function(_0x2c68d2,_0x158542){return _0x2c68d2!==_0x158542;},'yLhha':_0x18ed79(0x5b4,0x575,0x651,0x56e),'yXBzx':_0x18ed79(0x4c9,0x567,0x51f,0x51b),'iFvbb':function(_0x337324,_0xfcd836){return _0x337324(_0xfcd836);},'nVBvI':_0x18ed79(0x5bf,0x535,0x5b7,0x524)+'rating\x20SD\x20'+_0x15ae28(0x3ab,0x41d,0x3b1,0x4ac),'bBIcE':function(_0x147105,_0x2e47ed){return _0x147105(_0x2e47ed);}},{id:_0x1e5d61,prompt:_0x52024e,width:_0x1988d4,height:_0x255ec,change:_0xf8c282}=_0x4815c9;_0x10e6ca[_0x18ed79(0x4d4,0x50d,0x483,0x44a)](addLog,_0x18ed79(0x49d,0x53d,0x533,0x4e3)+_0x18ed79(0x526,0x4da,0x57b,0x4ce)+_0x1e5d61+(_0x15ae28(0x42d,0x39d,0x335,0x326)+':\x20')+_0x52024e+(_0xf8c282?_0x15ae28(0x3e6,0x437,0x43c,0x391)+'\x20'+_0xf8c282:''));if(_0xf8c282&&_0xf8c282['includes'](_0x15ae28(0x2ac,0x353,0x338,0x2db))){if(_0x10e6ca[_0x15ae28(0x3d3,0x3f9,0x3dc,0x42e)]===_0x10e6ca[_0x15ae28(0x42c,0x418,0x3ba,0x40f)]){_0x10e6ca[_0x15ae28(0x44a,0x3af,0x3dc,0x3f3)](_0x5374aa,_0x10e6ca[_0x18ed79(0x4e6,0x536,0x52e,0x582)]);throw new _0x1f1aaf(_0x10e6ca[_0x18ed79(0x543,0x5e0,0x594,0x55b)]);}else{_0x10e6ca[_0x15ae28(0x342,0x381,0x305,0x3aa)](bananaGenerate,_0x4815c9);return;}}function _0x18ed79(_0xf9009a,_0x215167,_0x5306d3,_0x449cdb){return _0x5943(_0xf9009a-0x2e0,_0x215167);}function _0x15ae28(_0x4ef907,_0x224120,_0x343097,_0x33cbde){return _0x5943(_0x224120-0x1bb,_0x33cbde);}try{const {image:_0x4c686a,change:_0x4c0333}=await generateSDImage({'prompt':_0x52024e,'width':_0x1988d4,'height':_0x255ec,'change':_0xf8c282});if(extension_settings[extensionName][_0x15ae28(0x3fe,0x36e,0x3cc,0x398)]!='0'){const _0x321782={};_0x321782[_0x15ae28(0x47c,0x3df,0x441,0x45f)]=_0x4c0333,await setItemImg(_0x52024e,_0x4c686a,_0x321782),_0x10e6ca[_0x15ae28(0x301,0x381,0x2fb,0x32c)](addLog,_0x18ed79(0x5b3,0x57e,0x54c,0x556)+_0x18ed79(0x560,0x517,0x525,0x4e0)+'\x20'+_0x52024e);}else _0x10e6ca[_0x15ae28(0x3d9,0x420,0x42e,0x486)](_0x10e6ca[_0x18ed79(0x520,0x51e,0x51b,0x4eb)],_0x10e6ca[_0x15ae28(0x4e1,0x459,0x4f9,0x4c5)])?_0x10e6ca[_0x15ae28(0x320,0x3af,0x3bc,0x3d3)](addLog,'缓存设置为不存入数据'+'库'):_0x3082ed=!![];const _0x2e9770={};_0x2e9770['id']=_0x1e5d61,_0x2e9770[_0x15ae28(0x3d5,0x466,0x470,0x4e9)]=!![],_0x2e9770['imageData']=_0x4c686a,_0x2e9770['prompt']=_0x52024e,_0x2e9770['change']=_0x4c0333,eventSource[_0x18ed79(0x52d,0x5c6,0x4e3,0x597)](EventType[_0x18ed79(0x5a2,0x634,0x507,0x5c8)+_0x18ed79(0x4b9,0x425,0x473,0x47f)+_0x15ae28(0x3a5,0x411,0x3f4,0x37e)],_0x2e9770),_0x10e6ca[_0x18ed79(0x501,0x547,0x538,0x4ba)](addLog,_0x15ae28(0x468,0x41a,0x389,0x3e6)+_0x18ed79(0x5a9,0x62f,0x51a,0x62e)+_0x1e5d61+')');}catch(_0x578747){const _0x9199d8=_0x15ae28(0x3ca,0x3ba,0x32d,0x42c)+_0x15ae28(0x425,0x3aa,0x413,0x41e)+_0x1e5d61+'):\x20'+_0x578747['message'];addLog(_0x15ae28(0x4f3,0x454,0x431,0x40f)+_0x9199d8),console['error'](_0x10e6ca[_0x15ae28(0x458,0x407,0x398,0x3e1)],_0x578747);const _0x47bb48={};_0x47bb48['id']=_0x1e5d61,_0x47bb48[_0x15ae28(0x4c6,0x466,0x490,0x4b3)]=![],_0x47bb48[_0x18ed79(0x5ab,0x598,0x554,0x552)]=_0x578747[_0x18ed79(0x4d8,0x447,0x48c,0x48d)],_0x47bb48['prompt']=_0x52024e,eventSource[_0x18ed79(0x52d,0x4f6,0x5b5,0x4d6)](EventType['GENERATE_I'+_0x18ed79(0x4b9,0x413,0x41b,0x467)+_0x18ed79(0x536,0x553,0x4ea,0x516)],_0x47bb48),_0x10e6ca[_0x15ae28(0x428,0x3cf,0x33a,0x3e0)](addLog,'发送SD生图失败响应'+'\x20(ID:\x20'+_0x1e5d61+')');}}function initializeSDListener(){const _0x19bc08={'BhdOf':function(_0x156805,_0x1ce793){return _0x156805(_0x1ce793);},'QzluC':_0x15e935(0x327,0x2e2,0x381,0x40a)+'已初始化。'};function _0x15e935(_0xd53d0c,_0x5499ac,_0x59a89f,_0x49d491){return _0x5943(_0x59a89f-0xbb,_0x5499ac);}function _0x39eb86(_0x47941c,_0x576902,_0x540951,_0x299451){return _0x5943(_0x299451- -0x230,_0x540951);}eventSource['on'](EventType[_0x15e935(0x2d7,0x3c8,0x37d,0x3ca)+_0x39eb86(-0xb7,-0xa8,-0xee,-0x79)+'ST'],sdGenerate),_0x19bc08[_0x15e935(0x2cd,0x250,0x2f4,0x2ad)](addLog,_0x19bc08[_0x15e935(0x2e5,0x24e,0x2b6,0x250)]);}export async function replaceWithSd(){const _0xf77deb={'PPiRX':function(_0x1909c2){return _0x1909c2();},'oFhbV':function(_0x2e2b96,_0x2e786e){return _0x2e2b96(_0x2e786e);}};function _0xb4f676(_0x20f329,_0x1c544a,_0x1a70b3,_0x211f9a){return _0x5943(_0x1a70b3- -0x2d3,_0x1c544a);}function _0x15b6fe(_0x318553,_0x1c8786,_0x52422e,_0x591e4a){return _0x5943(_0x52422e- -0x1b4,_0x591e4a);}extension_settings[extensionName][_0x15b6fe(0xb0,0x42,0x4d,0x59)]=='sd'?(!window[_0xb4f676(-0xf6,-0x168,-0xfe,-0xda)+_0xb4f676(-0xbe,-0xb4,-0x7b,-0x86)]&&(window[_0x15b6fe(-0x3a,-0x35,0x21,-0x77)+_0xb4f676(-0x11e,0x1d,-0x7b,-0x24)]=!![],_0xf77deb[_0x15b6fe(0x192,0xc1,0xf2,0xaf)](initializeSDListener)),_0xf77deb[_0xb4f676(-0x56,-0x95,-0x2d,0x3a)](initializeImageProcessing)):window[_0x15b6fe(-0x3c,-0xb,0x21,0x5f)+_0xb4f676(-0x1d,-0x58,-0x7b,-0xa6)]&&(eventSource[_0xb4f676(-0x162,-0x180,-0x13c,-0x164)+_0xb4f676(-0xbc,0x2b,-0x19,-0x41)](EventType[_0x15b6fe(0xa8,0x1a0,0x10e,0xdc)+_0xb4f676(-0x165,-0x16d,-0x11c,-0xbe)+'ST'],sdGenerate),window[_0xb4f676(-0x166,-0x11f,-0xfe,-0xbc)+_0xb4f676(-0x123,-0xbb,-0x7b,-0x8b)]=![],_0xf77deb[_0xb4f676(-0xdc,-0x102,-0xca,-0xbe)](addLog,_0x15b6fe(0x9a,0x122,0x112,0xa7)+'已关闭。'));}