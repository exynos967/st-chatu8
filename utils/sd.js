(function(_0x5e275b,_0x54bc87){function _0x3bb27d(_0x1fa1b5,_0x3c86a9,_0x30ca47,_0x1cc356){return _0x4d4b(_0x30ca47-0x42,_0x3c86a9);}const _0x6bba3e=_0x5e275b();function _0x2a36c1(_0x5638e7,_0x117ff5,_0x1c3e44,_0x574995){return _0x4d4b(_0x1c3e44- -0x304,_0x574995);}while(!![]){try{const _0x48f19a=parseInt(_0x2a36c1(-0xaf,-0x66,-0xfb,-0x11c))/(-0xdff+0x722+0x6de)+parseInt(_0x3bb27d(0x212,0x1d2,0x255,0x2cd))/(-0x43*-0x53+-0x5*-0x1a1+-0x62*0x4e)*(-parseInt(_0x3bb27d(0x327,0x2e9,0x28d,0x1ff))/(0x2143+0x2ee*-0x6+-0x3eb*0x4))+-parseInt(_0x3bb27d(0x2ad,0x30c,0x312,0x3a0))/(0x349*-0x2+-0x25b3+0x2c49)+-parseInt(_0x2a36c1(-0xb0,0x7,-0x4b,-0x17))/(-0x1f94+0xd9b+0x11fe)*(-parseInt(_0x2a36c1(-0xe0,-0x8f,-0x8a,-0xca))/(-0x7f*-0x29+-0xeb9*-0x1+0xd*-0x2b2))+parseInt(_0x3bb27d(0x2c5,0x3b9,0x32f,0x345))/(0x26d8+0x1*0x1af8+-0x41c9)+parseInt(_0x2a36c1(-0x28,-0x4d,-0xbc,-0x145))/(0x4*0x611+-0x1da5*0x1+0x115*0x5)*(-parseInt(_0x3bb27d(0x2c1,0x230,0x2bb,0x2f7))/(-0x10f9+0x265*-0xb+0x2b59))+-parseInt(_0x2a36c1(-0x75,-0x19,-0x1d,-0x8a))/(-0x5*-0x702+-0x130*-0x16+-0xa3*0x60);if(_0x48f19a===_0x54bc87)break;else _0x6bba3e['push'](_0x6bba3e['shift']());}catch(_0x1c1390){_0x6bba3e['push'](_0x6bba3e['shift']());}}}(_0x3610,-0x9387*-0x3+0x2b519*-0x2+0x6e41a));const _0x146352=(function(){function _0x125076(_0x2660db,_0x548e3d,_0x54da91,_0x1f1005){return _0x4d4b(_0x54da91-0xd6,_0x1f1005);}const _0x40eebe={'RYIrv':function(_0x4f565f,_0x4f3432){return _0x4f565f(_0x4f3432);},'DLkGm':_0x2a4569(0x202,0x193,0x191,0x1e6),'vOyDP':_0x2a4569(0x199,0x195,0x1f4,0x1ad),'wmpVT':function(_0x2cebc2,_0x1d6aee){return _0x2cebc2===_0x1d6aee;},'KsqmH':_0x125076(0x3ec,0x374,0x36e,0x2f8),'YynbQ':_0x2a4569(0x215,0x1fb,0x220,0x19d)};let _0x40ab2e=!![];function _0x2a4569(_0x247301,_0x5be9e2,_0x53fe79,_0x51881c){return _0x4d4b(_0x5be9e2- -0xd8,_0x53fe79);}return function(_0x531e29,_0x5722f1){const _0x2c219b=_0x40ab2e?function(){function _0x19c340(_0x50a9f4,_0x54ab01,_0x1de082,_0x5231a3){return _0x4d4b(_0x1de082-0x1b8,_0x50a9f4);}function _0x5ba8c1(_0x2b0b75,_0x33c5d9,_0x10b0ef,_0x1d29b6){return _0x4d4b(_0x33c5d9- -0x23b,_0x10b0ef);}const _0x5d4dc5={'DlbSz':function(_0x1536a5,_0x283008){function _0x3d9384(_0x39ffac,_0x271314,_0x213135,_0xc7f90){return _0x4d4b(_0x271314-0x51,_0x213135);}return _0x40eebe[_0x3d9384(0x2f6,0x286,0x2ed,0x1f0)](_0x1536a5,_0x283008);}};if(_0x40eebe['DLkGm']===_0x40eebe[_0x5ba8c1(0xf2,0xbd,0xa7,0xae)])_0x3d4480[_0x19c340(0x3e7,0x446,0x45e,0x3d0)+_0x5ba8c1(-0xb1,-0x44,-0xc5,0x28)](_0x17a9c4,_0x495d4f);else{if(_0x5722f1){if(_0x40eebe['wmpVT'](_0x40eebe[_0x5ba8c1(-0x39,0x2b,-0x66,0x8a)],_0x40eebe[_0x5ba8c1(-0x2a,0x43,0x55,0x53)])){_0x5d4dc5[_0x19c340(0x4af,0x425,0x446,0x4c8)](_0x9b4d55,_0x739155);return;}else{const _0x1cac09=_0x5722f1[_0x19c340(0x3f5,0x50e,0x47f,0x43d)](_0x531e29,arguments);return _0x5722f1=null,_0x1cac09;}}}}:function(){};return _0x40ab2e=![],_0x2c219b;};}()),_0x55d94b=_0x146352(this,function(){const _0x34b504={};function _0x5ed352(_0x1df871,_0x2f43e7,_0x349f81,_0x18ae79){return _0x4d4b(_0x349f81- -0x395,_0x2f43e7);}function _0x5d322a(_0x1f5059,_0x2b248c,_0x5d04fe,_0x41a5fa){return _0x4d4b(_0x5d04fe- -0x244,_0x2b248c);}_0x34b504[_0x5d322a(-0x6b,0x5,-0x52,0x1a)]=_0x5ed352(-0x115,-0x90,-0xff,-0xed)+'+$';const _0xa5a48e=_0x34b504;return _0x55d94b[_0x5d322a(0x56,0xdb,0xad,0xdd)]()['search'](_0xa5a48e[_0x5ed352(-0x1ac,-0x21d,-0x1a3,-0x21e)])['toString']()['constructo'+'r'](_0x55d94b)[_0x5ed352(-0x79,-0x11e,-0xf4,-0x100)](_0x5d322a(-0x1,0x5a,0x52,0x20)+'+$');});_0x55d94b();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,waitForLock,releaseLock,acquireLock}from'./utils.js';function _0x9fff6a(_0x3df2fd,_0xc1d428,_0x1bd1a2,_0x4a2900){return _0x4d4b(_0x1bd1a2-0x39d,_0xc1d428);}import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';function _0x3610(){const _0x384062=['zvvbA3i','Egz2CgW','og4UChq','veLvt3a','zv9Mywn0B3i','C2r3zwj1AEEuN+wBVUwpGG','Aw1Hz2u6','rLLSvey','BMvNyxrPDMvqCG','s3nXBuG','tu94CKe','kerLBM9PC2LUzW','cI0GkIRMQkhLNOSGke0','C2rFy2rLBM9PCW','Cg9yrve','CMf0Aw5Nifneia','uwveD0i','Bg9N','tMrKrNC','loAOOEwEI+s4UG','BMfRvxG','r0vorvjbvevFsq','DLnwwgy','BwvZC2fNzq','qMvkC3i','ke5Lz2f0AxzLia','kfvWC2nHBguGrG','yxv0Aa','nZKYzhPjBwnl','nLrTrMP4Aa','zuXdAgK','vKH3ufO','5zon5BQu5yAf5A65oG','wxLUyLe','EufvD1m','AM91AMC','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','EhvmAw4','qurLDgfPBgvY','Dg9Rzw4','cI0GkIRNP43LRzaGkfm','5yIh5O2I5QIH5z6l5AsX6lsLoIa','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','re5QAw0','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','sLHlzNq','of92ywu','y2zNx3nJywXL','whbpBeO','rgXIu3O','lI4U','cI0TlqOGicaG','s2Lmv0C','5yop5PwW5O2U44cc','sxPOwwO','C2vLza','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','kcGOlISPkYKRkq','cI0GkIRPH43NU5JLUyxLUQyG','BwTsyva','ChqPoIOQia','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','tK55s20','Aw1Hz2vZ','wg9mCLu','tfvKwue','vfrkALi','BwfNzs1Yzxf1zq','C2vHCMnO','AhjFC2nHBgu','EwvYCW','ywn0B3iPoIOQia','D1jgquq','CMvTB3zLtgLZDa','icHjrdOG','tun3reG','ChjVBxb0','zM1it3m','C2v0DgLUz3nZlG','teP2BKW','B3jvseC','Dhj1zq','zxr0Aw5NCW','44cc6k+35Qoa5P+LC2r3zwj1','tLPszwC','Aw5JBhvKzxm','CgHjweO','qvfux3nK','BgvUz3rO','keHPCMvZiezPEa','v3ncAgK','of9Zyw1WBgvYtG','mtyYntmXnwXMy0nvza','q0Xjuf9ZDg9WxW','C3rHDhvZ','wKXyrKK','C3rLChm','zgjmy1y','C2rFy3n0zxbZ','qNfMthe','C3rYzw5NDgG','6lsF6z2I5lI6oIa','Dgv4Da','5Q2J5zYO6ycA6l+hC2r3zwj1','CxPMtKW','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','yxbWBhK','cI0GkIRLSlRLR7GGkfm','B3nPDgLVBG','DtHFC2rFyxv0Aa','tLnPt3K','C2rFy3vWC2nHBa','44cc5zon5BQu5yAf5A65oIa','zxH0zw5ZAw9UxW','DKHqrgy','mteZodG2ohLztujttW','sMjwuvK','Bw9KzwW','v3bMzxi','6zQp5PY6kc0Xkq','DxjS','cI0GkIPdBgLWia','cI0GkIPdrKCGuW','of91ChnJywXLCG','C2rFy2fKzxrHAq','rKzqEgm','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','5yYw5lI6igrHDgeGvvi','BxnLyMq','5Q2J5zYO6k6+572U5QIH5z6l5lI6','ANnVBG','s2jvreu','Cgf5C3rFy2HHDa','A2LW','rLr5AM4','CuP2Awm','yvzbB2q','BgvY','mJm3mJyXmeDUDNLiyW','wevkwKG','A2f3wNK','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','u0rmAxn0zw5LCG','uLLtsgm','mtu0otiZm1fSvfzoyW','q2HHCMfJDgvYia','q3PSEw0','5BEY5yID5AEl5yYw44cc','Dg9tDhjPBMC','sfLRB1y','y2XPzw50','zLjiqu0','z2vUzxjHDgvFAq','BfvSBNi','5BcD6k+v5l2C5lI65y6F5AEliejHCW','DK95rfa','tLnf','tufhrv9srvnqtW','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','6zsz6k+VoIa','DNvrCM0','C2rFyxv0Aa','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','ic0Gq2HHBMDLoG','uKT6CK4','BMvYyxrL','C3rFy2HHDhu4xW','BxPjr1u','ywrLDgfPBgvYxW','EuPHDKS','wxL0vha','DufctwK','vfj2DMG','ksaTifbYB21WDa','vunqx3nK','Aw5MBW','ufjuyw0','tKf1ANC','cI0GkIRMRAxMLBaGkfm','q3HXzKS','sMTUvve','zw1PDa','l2fWAs9Zzc9Zzq','5zU+5y+c5PwW5OQL5zgkcI0GkIO','uuLkuLa','Cgf5Bg9Hza','wK9ty3a','EMTXtNK','C2fTCgXLCL9Uyq','yLvhv1i','C3rYAw5NAwz5','l3bUzZTIyxnLnG','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','C2rFy2nSAxbFCW','y2vZ','ExvZAgvPzf9Zza','ifbYB21WDa','AwXLCJOQkIa','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','suq6ia','Efvby0K','quTUEwW','55sO5lQo55sF5OIq55QevgfNoIa','z2vUzxjHDguTAq','CMf0Aw5NigLTyq','C2Hnr1G','zw5LCG','qMndDui','Bg9Hza','cI0GkIPwquu6kG','of9TB2rLBa','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','zw5HyMXLx2HY','yxbWBgLJyxrPBW','rxjYB3iGz2vUzq','Bw9Kzq','DgvWCYK6kIOG','yxrFBgfZDf9Syq','Aw5PDgLHBgL6zq','rwXLt1e','yxv0B191CMW','56cboIa','C2rFy2HPCMvZxW','zML4','ndeXodKWu0X1uvn3','77Ym6k+35Qoa5P+LC2r3zwj1','Df9LBMq','rhfgwhy','CMfyru8','zxjYB3i','DNn3r0e','AwTls1m','CMvZDg9Yzv9Myq','AxPLktOQkIa','mLj3thjzqq','qLHPEeK','zeftDM4','zgf0ytPPBwfNzq','DhH0mMLTzW','C3vJy2vZCW','yxjNCW','cI0TlqOJiYmG55sF','y2fSztOQkIa','C2rFy3DPzhrO','zM9YrwfJAa','zw5HyMXLx2HYia','EMfczue','C2LcqMy','B3zLCNjPzgvFCW','DhjPBq','cI0GkIROHlJPG6JKV67LPi0G','BLHVuLy','vKvoEfK','B21WDa','CK5Yzfy','yw1L','5BI4icHjrdOG','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','z2u6','EgHQAMy','ue9tva','lcdOR6BMG4u6ia','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','tufhrv9srvfvrq','cI0GkIRPH4FMOlFMLRNMS5uG','5BEY5ywZ6zET44cc','6k+V44cc54Q25Ocb56cboIa','uLLjCNy','Dc1TB2rLBa','oIOQia','r1nRzgK','EhnzsLC','ALjfEgO','kerPDMLKzv9YBW','tfblv3C','uhnuz2K','B3HOwK0','u2nLBMuGq29TCa','CK10wwK','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','C3rHDhvZvgv4Da','y2HHBMDL','BgvZktOG','kfnHBxbSzxiPoG','B0XuswG','C2rFDMfL','ntG4oerxtvveCq','C2rdzMDty2fSzq','CMvZDg9YzuzHyW','ndG0ndqZve9Qzhjv','C2rFy2nOyxr1xW','cI0GkIRMLl7LPkFLGi3NJOCG','6i635y+w5QIH5z6l5AsX6lsLoIa','l2fWAs9Zzc9Nzq','suH4rKO','ExvZAgu','t2DrzfK','zwvKktOQkIa','C2rFy3nLzwq','zNbLwue','t3vsr2O','zML4zwrqCM9TCa','E+s/RUwBVN0','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','C2tOR7FMSylNLj/LM77PLjNOR686ia','weTyDeG','z3nmDuq'];_0x3610=function(){return _0x384062;};return _0x3610();}import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';function _0x54ba33(_0x2072e9,_0xce2559,_0x502eba,_0x792710){return _0x4d4b(_0x502eba-0x3a0,_0x792710);}import{bananaGenerate}from'./banana.js';async function generateSDImage({prompt:_0x422916,width:_0x37d62e,height:_0x16c593,change:_0x457259}){const _0x5a27b9={'qJvic':function(_0x427238){return _0x427238();},'LUdYA':_0x9751ee(0x620,0x535,0x5b2,0x610)+'中的\x20prompt。','LJvnL':function(_0x3341c0,_0xb8547c){return _0x3341c0(_0xb8547c);},'JXKft':'JSON\x20解析失败，'+_0x9751ee(0x623,0x6ff,0x6ba,0x65f)+'e64\x20数据处理。','shMGX':function(_0x423478,_0x3699c4){return _0x423478(_0x3699c4);},'QIJRP':_0x9751ee(0x60e,0x5ea,0x659,0x5ef)+'+$','LPKWw':function(_0x30c2ea,_0x109531){return _0x30c2ea(_0x109531);},'qzfNL':function(_0x4a76e0,_0x1c5f76){return _0x4a76e0(_0x1c5f76);},'vSVXf':function(_0x3f4a5f){return _0x3f4a5f();},'nakUx':function(_0x399a6f,_0x5a89e7){return _0x399a6f!==_0x5a89e7;},'IzhYj':function(_0x1fe60e,_0x45a7f4){return _0x1fe60e(_0x45a7f4);},'ojVAb':function(_0x1d37a9,_0x4c1994){return _0x1d37a9(_0x4c1994);},'RYSHc':_0x9751ee(0x6e3,0x6c9,0x64c,0x67f)+_0x9751ee(0x6d9,0x66a,0x644,0x68b),'xsYJW':_0x9751ee(0x61f,0x62b,0x602,0x5b1)+_0x44fe0d(0x307,0x2cc,0x31b,0x2e6),'ZOScp':function(_0x227fb0,_0x2c6d56){return _0x227fb0<=_0x2c6d56;},'uABMi':function(_0x3046eb,_0x3c2c18){return _0x3046eb===_0x3c2c18;},'JbVQY':_0x9751ee(0x6be,0x61e,0x627,0x681),'bUGWR':function(_0x3b23b0,_0x24c5bb,_0x1b9a96){return _0x3b23b0(_0x24c5bb,_0x1b9a96);},'BXixI':_0x9751ee(0x6f1,0x6fa,0x6a0,0x6c8),'oLTIh':function(_0x48dd37,_0x5c0516){return _0x48dd37<=_0x5c0516;},'oVXEP':function(_0x53e39c,_0x574152,_0x1c8382,_0x590266,_0x1f98f8,_0xd8f224){return _0x53e39c(_0x574152,_0x1c8382,_0x590266,_0x1f98f8,_0xd8f224);},'xuLin':'jiuguan','rMtYi':function(_0x33a203,_0x447cde,_0x5a9e99){return _0x33a203(_0x447cde,_0x5a9e99);},'fpeYA':_0x9751ee(0x632,0x69e,0x612,0x59a)+_0x9751ee(0x679,0x5f0,0x5f9,0x5fe),'phIXJ':_0x9751ee(0x5ee,0x674,0x5f1,0x5ed),'XEJZH':function(_0xdf19aa,_0x12a4d1){return _0xdf19aa(_0x12a4d1);},'XKXtH':_0x9751ee(0x619,0x678,0x662,0x63d),'lUlnr':'cmodel2222'+'2222','FFPxc':_0x44fe0d(0x366,0x3a5,0x320,0x370)+_0x44fe0d(0x2e0,0x2e5,0x2fd,0x323)+_0x9751ee(0x5db,0x592,0x60f,0x5f1)+_0x44fe0d(0x20f,0x1e7,0x24d,0x29d),'NccOo':function(_0xf53a92,_0xafde10){return _0xf53a92!=_0xafde10;},'XoLrU':function(_0xa83fd8,_0x151fe8,_0x46fab1){return _0xa83fd8(_0x151fe8,_0x46fab1);},'VHwPZ':_0x44fe0d(0x1fb,0x22d,0x230,0x20e)+_0x9751ee(0x637,0x5ff,0x5f9,0x62d),'zkqNy':_0x44fe0d(0x259,0x2be,0x28f,0x2c7),'YpFwr':function(_0x107caf,_0x16fb29){return _0x107caf(_0x16fb29);},'KbUDE':'XozYj','xfvpl':function(_0x1be594,_0x5040d8){return _0x1be594(_0x5040d8);},'rNrdV':function(_0x5e058c,_0x57c466){return _0x5e058c!==_0x57c466;},'CUxGj':function(_0x592add,_0x3fd749){return _0x592add(_0x3fd749);},'MCwDH':function(_0x2ef02d,_0x73bba3){return _0x2ef02d(_0x73bba3);},'OuRGj':function(_0x251f7a,_0xf869d8){return _0x251f7a(_0xf869d8);},'vHPDf':function(_0x28701e,_0xbd930b){return _0x28701e(_0xbd930b);},'ikKKS':function(_0x39b6e3,_0x3dad39){return _0x39b6e3==_0x3dad39;},'EleOQ':_0x44fe0d(0x2c7,0x2af,0x300,0x303),'dASvn':function(_0x570bf6,_0x54bdda){return _0x570bf6(_0x54bdda);},'VYpQp':_0x44fe0d(0x346,0x362,0x2d1,0x2f7),'Lxgsu':'IhufX','sSoCv':_0x9751ee(0x75c,0x70d,0x6c8,0x75b)+'face\x20为开启','BcCuB':'face_yolov'+_0x44fe0d(0x297,0x33a,0x2b1,0x270),'YytTp':function(_0x4a1878,_0x1a752d){return _0x4a1878===_0x1a752d;},'orUHG':_0x44fe0d(0x300,0x2de,0x326,0x2dc),'NZReg':function(_0x198277,_0x2b7d22){return _0x198277==_0x2b7d22;},'fmHOs':_0x44fe0d(0x21f,0x1dd,0x233,0x221),'yJavK':function(_0x2b47e0){return _0x2b47e0();},'WsBhi':_0x9751ee(0x61a,0x61e,0x612,0x5b8)+_0x9751ee(0x74a,0x747,0x6c5,0x63f),'oxhZM':_0x44fe0d(0x366,0x2a0,0x2cf,0x23d),'TRvvh':'BuRmm','fRHAM':function(_0x4185c0,_0x439b7a){return _0x4185c0(_0x439b7a);},'vswGA':function(_0x3d952d,_0x455136){return _0x3d952d+_0x455136;},'mzIGU':_0x44fe0d(0x1e3,0x296,0x268,0x2f5)+_0x44fe0d(0x278,0x27d,0x239,0x2be)+'4,','zaBeA':_0x44fe0d(0x2df,0x1bf,0x24e,0x223)+_0x44fe0d(0x346,0x2dc,0x32e,0x369)+'L。','NSiOy':function(_0x23ac66,_0x4a7932){return _0x23ac66||_0x4a7932;},'joujg':function(_0x941052,_0x35580b){return _0x941052+_0x35580b;},'ZeLOJ':_0x44fe0d(0x26d,0x1ff,0x250,0x228)+'n/json','siBBf':function(_0x3971c9){return _0x3971c9();},'eUAkr':function(_0xd9ad09,_0x4e0247){return _0xd9ad09(_0x4e0247);},'NNyKm':_0x9751ee(0x64e,0x6d5,0x65d,0x676)+_0x9751ee(0x5cc,0x6b2,0x655,0x608),'gsLuD':_0x9751ee(0x588,0x592,0x5c2,0x5ea)+_0x44fe0d(0x2ac,0x2d1,0x247,0x218)+_0x44fe0d(0x293,0x1fa,0x27e,0x2bf)};let _0x22c489=_0x457259;_0x422916=_0x5a27b9['LPKWw'](processCharacterPrompt,_0x422916),_0x422916=await _0x5a27b9[_0x44fe0d(0x2ba,0x320,0x317,0x364)](stripChineseAnnotations,_0x422916),_0x457259=_0x5a27b9[_0x9751ee(0x610,0x5a9,0x5b9,0x534)](processCharacterPrompt,_0x457259),_0x457259=await _0x5a27b9[_0x9751ee(0x56f,0x643,0x5ff,0x5b8)](stripChineseAnnotations,_0x457259);const _0x34dc64=extension_settings[extensionName]['sdUrl'][_0x9751ee(0x57b,0x61b,0x5e5,0x55e)](),_0x3b7e52=extension_settings[extensionName];_0x5a27b9[_0x9751ee(0x6d0,0x654,0x636,0x681)](clearLog),addLog(_0x9751ee(0x692,0x6d1,0x687,0x6a1)+'i生成图片...客户'+'端为'+_0x3b7e52[_0x9751ee(0x658,0x678,0x6b6,0x68b)]+_0x9751ee(0x614,0x651,0x633,0x62b)+_0x3b7e52[_0x9751ee(0x674,0x5fe,0x60f,0x65e)+'8_model']);function _0x9751ee(_0x433e55,_0x2a7777,_0x23f210,_0x32678b){return _0x4d4b(_0x23f210-0x3c3,_0x32678b);}const _0xf21d5c=_0x457259&&_0x5a27b9[_0x9751ee(0x5e4,0x6be,0x634,0x6a2)](_0x457259['trim'](),'')?_0x457259:_0x422916;_0x5a27b9[_0x44fe0d(0x2db,0x36f,0x2e5,0x2f5)](addLog,_0x44fe0d(0x1cb,0x2a6,0x245,0x2c6)+_0xf21d5c);let _0x3d66dc=![];_0xf21d5c[_0x44fe0d(0x37c,0x30c,0x304,0x2ea)](_0x9751ee(0x63f,0x5ed,0x602,0x699)+_0x9751ee(0x6d3,0x63d,0x68c,0x6b0))&&(_0x3d66dc=!![]);addLog(_0x9751ee(0x6ca,0x5f5,0x689,0x70c)+_0x9751ee(0x5a3,0x60d,0x5fe,0x5fb)+_0x44fe0d(0x226,0x204,0x296,0x30b)+_0x3d66dc);let _0xebe65b={},_0x275f71='',_0x2161f7='';if(_0x3d66dc){_0x5a27b9['ojVAb'](addLog,_0x5a27b9[_0x44fe0d(0x333,0x377,0x33e,0x320)]),_0xebe65b=_0x5a27b9[_0x44fe0d(0x2a2,0x2aa,0x317,0x33f)](parsePromptStringWithCoordinates,_0xf21d5c),_0x275f71=_0xebe65b[_0x5a27b9[_0x44fe0d(0x2fb,0x2ce,0x28b,0x221)]];for(let _0xf75977=0x3*-0x38a+-0x23e2+0x2e81;_0x5a27b9[_0x44fe0d(0x2c2,0x29f,0x234,0x1cc)](_0xf75977,-0xc34+-0x3*-0x11+0xc05);_0xf75977++){_0xebe65b[_0x44fe0d(0x387,0x3c9,0x340,0x2ed)+_0xf75977+_0x44fe0d(0x1ba,0x253,0x23f,0x2d5)]&&(_0x2161f7=_0x2161f7+',\x20'+_0xebe65b[_0x9751ee(0x6a7,0x61d,0x6b1,0x703)+_0xf75977+'\x20Prompt']);}}else _0x5a27b9[_0x44fe0d(0x391,0x349,0x35a,0x3a3)](_0x5a27b9[_0x44fe0d(0x3a6,0x38c,0x323,0x32a)],_0x5a27b9[_0x9751ee(0x67e,0x612,0x694,0x70c)])?(addLog(_0x5a27b9[_0x9751ee(0x6a5,0x669,0x661,0x66b)]),_0x275f71=_0xf21d5c):_0x185fdd['on'](_0x4f7cee,_0x2a080e);let {modifiedPrompt:_0x51d4bb,insertions:_0x38b5b0}=await _0x5a27b9['bUGWR'](prompt_replace,_0x275f71,_0x2161f7);if(_0x3d66dc){if(_0x5a27b9[_0x44fe0d(0x26a,0x2b8,0x2c3,0x340)](_0x5a27b9[_0x44fe0d(0x264,0x1e0,0x266,0x23c)],_0x44fe0d(0x2da,0x399,0x32f,0x2d3)))_0x3b5a35[_0x44fe0d(0x219,0x1c0,0x255,0x1e1)+_0x44fe0d(0x35f,0x2fd,0x33d,0x2ce)]=!![],_0x5a27b9[_0x9751ee(0x67c,0x64b,0x6a7,0x657)](_0x54fe4d);else for(let _0x36d3e8=-0x3*0xc00+0x407*-0x5+0x1*0x3824;_0x5a27b9[_0x9751ee(0x667,0x65f,0x609,0x675)](_0x36d3e8,0x42c+0x1b24*0x1+0x2*-0xfa6);_0x36d3e8++){_0xebe65b[_0x44fe0d(0x2c7,0x3d3,0x340,0x382)+_0x36d3e8+_0x44fe0d(0x291,0x21b,0x23f,0x2c5)]&&(_0x51d4bb=_0x51d4bb+',\x20'+prompt_replace_for_character(_0xebe65b[_0x9751ee(0x684,0x687,0x6b1,0x708)+_0x36d3e8+_0x9751ee(0x51b,0x58d,0x5b0,0x590)]));}}let _0x45246e=await _0x5a27b9['oVXEP'](zhengmian,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x44fe0d(0x1c1,0x223,0x23e,0x1ef)]][_0x44fe0d(0x2b8,0x342,0x2a9,0x238)+'t'],_0x51d4bb,extension_settings[extensionName][_0x9751ee(0x657,0x66f,0x614,0x593)][extension_settings[extensionName][_0x9751ee(0x5dc,0x524,0x5af,0x5b1)]][_0x44fe0d(0x240,0x240,0x2a9,0x23e)+_0x44fe0d(0x289,0x1cb,0x25d,0x1f3)],extension_settings[extensionName][_0x44fe0d(0x376,0x322,0x306,0x329)],_0x38b5b0),_0x56d13f=await _0x5a27b9[_0x44fe0d(0x248,0x272,0x237,0x2bd)](fumian,extension_settings[extensionName][_0x9751ee(0x60a,0x60f,0x614,0x60f)][extension_settings[extensionName][_0x44fe0d(0x1be,0x1db,0x23e,0x289)]][_0x44fe0d(0x347,0x33f,0x2b7,0x2e1)+_0x9751ee(0x5a7,0x56d,0x5e9,0x584)],extension_settings[extensionName][_0x9751ee(0x6c9,0x63b,0x6ce,0x667)]);_0x5a27b9['ojVAb'](addLog,_0x9751ee(0x618,0x719,0x685,0x6ac)+_0x56d13f);function _0x44fe0d(_0xce08c3,_0x10a3c1,_0x2f89ba,_0x33b377){return _0x4d4b(_0x2f89ba-0x52,_0x10a3c1);}extension_settings['sd'][_0x9751ee(0x655,0x586,0x5c8,0x546)]=_0x34dc64,await _0x5a27b9[_0x9751ee(0x630,0x738,0x6a7,0x727)](saveSettingsDebounced);try{if(_0x3b7e52['client']===_0x5a27b9[_0x9751ee(0x616,0x5d6,0x645,0x677)]){const _0x3bfbfe={};_0x3bfbfe['auth']=_0x3b7e52[_0x44fe0d(0x2d4,0x3e8,0x355,0x371)+'sd_auth']?_0x3b7e52[_0x9751ee(0x724,0x741,0x6c6,0x6a4)+_0x44fe0d(0x2de,0x3d2,0x350,0x3d5)]:'',_0x3bfbfe['url']=_0x34dc64;const _0x200ff4=await _0x5a27b9[_0x9751ee(0x653,0x57c,0x603,0x5b6)](fetch,_0x5a27b9[_0x44fe0d(0x245,0x306,0x2a7,0x2ac)],{'method':_0x5a27b9['phIXJ'],'body':JSON[_0x9751ee(0x542,0x56d,0x5a9,0x60b)](_0x3bfbfe),'headers':_0x5a27b9[_0x44fe0d(0x3a3,0x2cc,0x33a,0x2f6)](getRequestHeaders,window[_0x9751ee(0x6be,0x5e5,0x647,0x669)])});if(!_0x200ff4['ok']){if(_0x5a27b9[_0x44fe0d(0x341,0x300,0x2ad,0x21f)]===_0x5a27b9[_0x44fe0d(0x30a,0x311,0x2ad,0x22b)]){_0x5a27b9['qzfNL'](addLog,_0x44fe0d(0x2fd,0x27b,0x2a0,0x2f8)+_0x200ff4[_0x9751ee(0x69e,0x5ff,0x67e,0x63d)]+'\x20'+_0x200ff4['statusText']);throw new Error(_0x44fe0d(0x24b,0x223,0x2a0,0x339)+_0x200ff4[_0x44fe0d(0x290,0x28f,0x30d,0x343)]+'\x20'+_0x200ff4[_0x9751ee(0x670,0x59f,0x605,0x5f6)]);}else _0x41731f(_0x5a27b9[_0x44fe0d(0x292,0x35b,0x2f0,0x275)]),_0x436a92=_0x2e4619;}let _0x8ca2a3=await _0x200ff4['text']();console[_0x44fe0d(0x2e7,0x30a,0x2c0,0x2d9)](_0x5a27b9[_0x44fe0d(0x382,0x2b2,0x348,0x32e)],_0x8ca2a3),console[_0x9751ee(0x5bf,0x5e1,0x631,0x622)](_0x5a27b9[_0x44fe0d(0x380,0x319,0x32c,0x2e1)],_0x3b7e52[_0x44fe0d(0x312,0x2f2,0x29e,0x262)+_0x9751ee(0x608,0x602,0x5be,0x62f)]);if(_0x5a27b9['NccOo'](_0x8ca2a3,_0x3b7e52[_0x44fe0d(0x26b,0x20d,0x29e,0x227)+_0x44fe0d(0x294,0x206,0x24d,0x1df)])){addLog(_0x9751ee(0x688,0x6e0,0x6a1,0x6d8)+_0x3b7e52[_0x44fe0d(0x216,0x30a,0x29e,0x254)+_0x44fe0d(0x28d,0x2b2,0x24d,0x246)]+_0x44fe0d(0x2c7,0x33f,0x2e1,0x2b9)),toastr[_0x44fe0d(0x377,0x32c,0x35e,0x360)](_0x44fe0d(0x250,0x2cc,0x282,0x296)+_0x3b7e52[_0x44fe0d(0x320,0x2b0,0x29e,0x26b)+'8_model']);const _0x22918e={};_0x22918e[_0x44fe0d(0x34c,0x2db,0x2ca,0x2cd)]=_0x3b7e52[_0x9751ee(0x64e,0x65f,0x6c6,0x671)+_0x44fe0d(0x36d,0x2fc,0x350,0x3c1)]?_0x3b7e52['st_chatu8_'+_0x44fe0d(0x2fd,0x3e6,0x350,0x380)]:'',_0x22918e[_0x44fe0d(0x380,0x395,0x327,0x2bd)]=_0x34dc64,_0x22918e[_0x44fe0d(0x394,0x339,0x324,0x2f5)]=_0x3b7e52[_0x9751ee(0x671,0x62a,0x60f,0x57f)+_0x44fe0d(0x280,0x2c6,0x24d,0x203)];const _0xe80885=await _0x5a27b9[_0x9751ee(0x64d,0x6b2,0x660,0x65c)](fetch,_0x5a27b9[_0x9751ee(0x5c2,0x62b,0x63f,0x6b3)],{'method':_0x5a27b9[_0x9751ee(0x6ea,0x6e8,0x676,0x636)],'body':JSON[_0x9751ee(0x644,0x589,0x5a9,0x5a5)](_0x22918e),'headers':getRequestHeaders(window[_0x9751ee(0x69a,0x5d3,0x647,0x617)])});if(!_0xe80885['ok']){_0x5a27b9['XEJZH'](addLog,'切换模型失败:\x20'+_0xe80885[_0x44fe0d(0x2b5,0x277,0x30d,0x336)]+'\x20'+_0xe80885[_0x44fe0d(0x2cc,0x28b,0x294,0x210)]);throw new Error(_0x9751ee(0x602,0x5fe,0x649,0x5d6)+_0xe80885[_0x44fe0d(0x361,0x387,0x30d,0x348)]+'\x20'+_0xe80885[_0x44fe0d(0x2fe,0x20a,0x294,0x2c3)]);}toastr[_0x44fe0d(0x364,0x2d7,0x35e,0x369)]('设置模型...为'+_0x3b7e52[_0x9751ee(0x5ec,0x5a4,0x60f,0x615)+_0x9751ee(0x653,0x537,0x5be,0x546)]+'成功');}}else{if(_0x9751ee(0x5de,0x627,0x62a,0x661)===_0x5a27b9[_0x9751ee(0x57c,0x62d,0x5a6,0x5b1)]){if(_0x5d5d57){const _0x21b163=_0x12bf02[_0x9751ee(0x5ff,0x6bb,0x68a,0x6b6)](_0x430410,arguments);return _0x241197=null,_0x21b163;}}else{let _0x1a193c=await getSDMode(_0x34dc64);_0x5a27b9['NccOo'](_0x1a193c,_0x3b7e52[_0x44fe0d(0x2ac,0x2a4,0x29e,0x2e6)+_0x9751ee(0x5ea,0x5b0,0x5be,0x64d)])&&(_0x5a27b9['YpFwr'](addLog,_0x9751ee(0x6bf,0x62e,0x6ad,0x6d1)+_0x3b7e52[_0x9751ee(0x65c,0x64f,0x60f,0x5f7)+_0x9751ee(0x59e,0x5f7,0x5be,0x592)]+'...'),await _0x5a27b9['bUGWR'](setSDMode,_0x34dc64,_0x3b7e52['sd_cchatu_'+_0x9751ee(0x603,0x5da,0x5be,0x64b)]));}}}catch(_0x1a57a0){if(_0x5a27b9[_0x9751ee(0x642,0x671,0x6cb,0x6f0)](_0x5a27b9[_0x9751ee(0x614,0x6a4,0x6a3,0x70b)],_0x5a27b9[_0x9751ee(0x6c4,0x6b1,0x6a3,0x6b1)])){_0x5a27b9['xfvpl'](addLog,_0x44fe0d(0x2ab,0x2b6,0x27c,0x206)+':\x20'+_0x1a57a0['message']+(_0x9751ee(0x5fe,0x5ea,0x673,0x60c)+_0x9751ee(0x63b,0x6d1,0x6be,0x643)+_0x9751ee(0x6d8,0x66d,0x658,0x65c)));throw new Error(_0x9751ee(0x574,0x5b7,0x5ed,0x688)+_0x9751ee(0x560,0x62d,0x5cd,0x65c)+_0x44fe0d(0x2f4,0x38d,0x34d,0x366)+'查模型是否正确。');}else _0x5a27b9[_0x9751ee(0x650,0x6b2,0x66f,0x6c2)](_0x380b49,_0x5a27b9[_0x9751ee(0x6cc,0x6d0,0x64d,0x66a)]),_0x125dc4=_0x22fbb9;}let _0x10a458=-(0x707+-0x457*-0x1+0xb5d*-0x1);const _0x5bd70d=_0x3b7e52[_0x9751ee(0x69b,0x62e,0x617,0x68b)];_0x5a27b9[_0x9751ee(0x61f,0x5e0,0x634,0x5f7)](_0x5bd70d,'')&&_0x5a27b9[_0x9751ee(0x661,0x633,0x5ea,0x589)](_0x5bd70d,null)&&!_0x5a27b9['CUxGj'](isNaN,_0x5a27b9[_0x9751ee(0x64e,0x5fd,0x66b,0x660)](Number,_0x5bd70d))&&_0x5a27b9[_0x9751ee(0x61c,0x698,0x619,0x5ed)](Number,_0x5bd70d)>=-0x1e6a+0x1*0x1a45+-0x1*-0x425&&(_0x10a458=_0x5a27b9[_0x9751ee(0x6a6,0x6d5,0x692,0x62a)](Number,_0x5bd70d));let _0x33b4dd={'prompt':_0x45246e,'negative_prompt':_0x56d13f,'sampler_name':_0x3b7e52[_0x44fe0d(0x2d4,0x2dd,0x29e,0x311)+_0x9751ee(0x6ec,0x60e,0x67b,0x671)+_0x9751ee(0x630,0x5bc,0x5eb,0x5f1)],'scheduler':_0x3b7e52[_0x44fe0d(0x330,0x227,0x29e,0x2dc)+'8_schedule'+'r'],'steps':_0x3b7e52[_0x44fe0d(0x345,0x35d,0x311,0x2bf)],'cfg_scale':_0x3b7e52[_0x44fe0d(0x2a7,0x288,0x29b,0x26f)],'width':_0x37d62e?_0x37d62e:_0x3b7e52[_0x44fe0d(0x224,0x2ac,0x26e,0x20d)],'height':_0x16c593?_0x16c593:_0x3b7e52['sd_cheight'],'restore_faces':_0x5a27b9[_0x44fe0d(0x2b3,0x2a6,0x262,0x2a7)](_0x3b7e52[_0x44fe0d(0x20b,0x247,0x29c,0x26c)+'es'],_0x5a27b9[_0x44fe0d(0x1f8,0x246,0x256,0x1e9)]),'enable_hr':_0x3b7e52[_0x9751ee(0x649,0x625,0x5ca,0x63f)+_0x9751ee(0x55b,0x646,0x5cb,0x5f9)]==_0x5a27b9[_0x44fe0d(0x1bd,0x2b1,0x256,0x291)],'hr_upscaler':_0x3b7e52[_0x9751ee(0x5b1,0x681,0x60f,0x641)+_0x9751ee(0x720,0x624,0x69b,0x605)],'hr_scale':_0x3b7e52[_0x44fe0d(0x2cf,0x330,0x31e,0x396)+_0x44fe0d(0x329,0x2b1,0x2b3,0x2bd)],'hr_additional_modules':[],'denoising_strength':_0x3b7e52[_0x9751ee(0x66c,0x6b5,0x62d,0x608)+'ing_streng'+'th'],'hr_second_pass_steps':_0x3b7e52[_0x44fe0d(0x1c1,0x205,0x259,0x1d4)+_0x9751ee(0x617,0x6a1,0x680,0x629)],'seed':_0x10a458,'override_settings':{'CLIP_stop_at_last_layers':_0x5a27b9[_0x9751ee(0x5d0,0x630,0x5d8,0x5ea)](Number,_0x3b7e52[_0x44fe0d(0x267,0x2af,0x23c,0x28d)+_0x9751ee(0x6bd,0x680,0x6a5,0x634)]),'sd_vae':_0x3b7e52['sd_cchatu_'+_0x44fe0d(0x28d,0x28b,0x2dd,0x2d2)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};addLog(_0x44fe0d(0x2ca,0x2e4,0x263,0x278)+'ces\x20脸部修复\x20为'+_0x33b4dd[_0x9751ee(0x5f0,0x568,0x5d4,0x5a8)+'ces']),_0x5a27b9['MCwDH'](addLog,_0x44fe0d(0x2a2,0x2de,0x270,0x2a3)+'高清修复\x20为'+_0x33b4dd[_0x44fe0d(0x1d7,0x29e,0x24f,0x1bc)]);if(_0x5a27b9[_0x44fe0d(0x24f,0x245,0x262,0x2a2)](_0x3b7e52[_0x44fe0d(0x2ea,0x3af,0x32b,0x2df)+_0x9751ee(0x6bf,0x614,0x6a9,0x6de)],_0x5a27b9[_0x9751ee(0x5c4,0x5ee,0x5c7,0x5c7)])){if(_0x5a27b9['VYpQp']!==_0x5a27b9['Lxgsu']){addLog(_0x5a27b9['sSoCv']);const _0x5d9685={};_0x5d9685['ad_model']=_0x5a27b9[_0x9751ee(0x5c9,0x5cf,0x5bb,0x5f3)];const _0x409b03={};_0x409b03[_0x9751ee(0x612,0x5b7,0x5dc,0x646)]=[!![],!![],_0x5d9685];const _0x2e42da={};_0x2e42da[_0x44fe0d(0x340,0x30c,0x2d5,0x242)]=_0x409b03;const _0x17ece9={};_0x17ece9['alwayson_s'+'cripts']=_0x2e42da,_0x33b4dd=deepMerge(_0x33b4dd,_0x17ece9);}else _0x3c25a2=_0x5a27b9[_0x44fe0d(0x1b7,0x282,0x248,0x295)](_0x499fef,_0x2b0206);}const _0x4cbdf7=_0x44fe0d(0x2bb,0x1f7,0x26c,0x2cf)+_0x44fe0d(0x29c,0x24e,0x231,0x2b1)+'正面提示\x20(Prom'+_0x44fe0d(0x2a3,0x355,0x2eb,0x2d3)+_0x45246e+('\x0a-\x20**负面提示\x20'+_0x9751ee(0x650,0x607,0x639,0x6a7)+'Prompt):**'+'\x20')+_0x56d13f+(_0x9751ee(0x62e,0x575,0x5f5,0x659)+_0x44fe0d(0x283,0x20d,0x297,0x2e6)+'**\x20')+_0x33b4dd[_0x44fe0d(0x29a,0x246,0x236,0x20d)+'me']+(_0x44fe0d(0x23f,0x19a,0x22c,0x19c)+_0x44fe0d(0x1da,0x212,0x253,0x23a))+_0x33b4dd[_0x44fe0d(0x33f,0x279,0x30f,0x2be)]+(_0x9751ee(0x655,0x6be,0x69a,0x6db)+_0x44fe0d(0x2cb,0x2e5,0x26d,0x2d8))+_0x33b4dd[_0x9751ee(0x697,0x62c,0x64f,0x659)]+(_0x44fe0d(0x2a0,0x351,0x31a,0x32d)+_0x9751ee(0x5f3,0x63f,0x5d5,0x665))+_0x33b4dd['width']+'x'+_0x33b4dd['height']+(_0x44fe0d(0x300,0x2de,0x2d7,0x25d)+_0x44fe0d(0x225,0x250,0x2a5,0x237))+(_0x5a27b9[_0x9751ee(0x6e1,0x6f6,0x6ca,0x6ee)](_0x33b4dd[_0x44fe0d(0x28e,0x31a,0x2e6,0x33f)],-(-0xac4+0x47d+0x648))?_0x5a27b9[_0x9751ee(0x698,0x6a4,0x670,0x64c)]:_0x33b4dd[_0x9751ee(0x67d,0x5ce,0x657,0x619)])+(_0x9751ee(0x67d,0x63d,0x62c,0x601)+'odel):**\x20')+_0x3b7e52['sd_cchatu_'+_0x9751ee(0x603,0x55f,0x5be,0x554)]+(_0x44fe0d(0x20a,0x1d8,0x24c,0x28a)+'*\x20')+_0x33b4dd[_0x9751ee(0x623,0x57d,0x5e4,0x612)+'ettings'][_0x9751ee(0x637,0x57c,0x60a,0x588)]+(_0x9751ee(0x6cd,0x605,0x699,0x618)+'Skip:**\x20')+_0x33b4dd[_0x44fe0d(0x2c6,0x284,0x273,0x26a)+_0x9751ee(0x604,0x614,0x672,0x6a1)][_0x9751ee(0x6ac,0x6af,0x67d,0x621)+_0x9751ee(0x584,0x54e,0x5c5,0x54a)+_0x44fe0d(0x32e,0x2a0,0x2f5,0x283)]+('\x0a-\x20**高清修复\x20'+_0x44fe0d(0x39e,0x320,0x308,0x281)+'):**\x20')+_0x33b4dd['enable_hr']+(_0x9751ee(0x5b5,0x658,0x610,0x625)+_0x9751ee(0x5ee,0x642,0x63a,0x625)+_0x44fe0d(0x35a,0x2d4,0x2f6,0x373))+_0x33b4dd[_0x9751ee(0x5fc,0x696,0x665,0x677)]+(_0x9751ee(0x63b,0x633,0x65a,0x625)+_0x9751ee(0x5e7,0x5c2,0x62b,0x6b8)+'\x20Strength)'+_0x9751ee(0x634,0x5b2,0x5fa,0x5de))+_0x33b4dd['denoising_'+_0x9751ee(0x6f1,0x66f,0x684,0x701)]+(_0x9751ee(0x57f,0x5e6,0x5e6,0x65a)+'(Restore\x20F'+'aces):**\x20')+_0x33b4dd[_0x44fe0d(0x2d0,0x242,0x263,0x271)+_0x9751ee(0x581,0x5a6,0x5ae,0x5fe)]+('\x0a-\x20**ADeta'+_0x9751ee(0x518,0x5d8,0x5b1,0x5f4))+_0x5a27b9[_0x44fe0d(0x361,0x377,0x303,0x375)](_0x3b7e52['sd_cadetai'+_0x44fe0d(0x2fb,0x29f,0x338,0x3b5)],_0x5a27b9[_0x9751ee(0x582,0x53c,0x5c7,0x644)])+_0x9751ee(0x61a,0x5fd,0x653,0x6b7);addLog(_0x4cbdf7),_0x5a27b9['xfvpl'](addLog,_0x44fe0d(0x33e,0x295,0x2b4,0x31b)+'数为'+JSON[_0x9751ee(0x601,0x555,0x5a9,0x539)](_0x33b4dd)),console[_0x9751ee(0x5ce,0x64a,0x631,0x6b9)](_0x5a27b9[_0x44fe0d(0x326,0x37b,0x2fc,0x35b)],_0x33b4dd),await _0x5a27b9[_0x9751ee(0x630,0x68b,0x6c9,0x65d)](waitForLock),acquireLock();try{if(_0x3b7e52[_0x9751ee(0x70e,0x72e,0x6b6,0x6dc)]===_0x5a27b9[_0x44fe0d(0x338,0x35d,0x2d4,0x316)]){_0x33b4dd[_0x9751ee(0x6ac,0x66a,0x698,0x696)]=_0x34dc64,console[_0x44fe0d(0x243,0x2e8,0x2c0,0x309)](_0x9751ee(0x697,0x72f,0x6a4,0x621)+_0x44fe0d(0x363,0x2e8,0x31c,0x2f6)+_0x44fe0d(0x26c,0x1c9,0x24b,0x1e0),_0x3b7e52['st_chatu8_'+'sd_auth']),_0x33b4dd['auth']=_0x3b7e52['st_chatu8_'+_0x44fe0d(0x3ac,0x384,0x350,0x335)]?_0x3b7e52[_0x44fe0d(0x3e0,0x39b,0x355,0x386)+_0x9751ee(0x6bd,0x6b4,0x6c1,0x6ba)]:'';const _0x497de8=await fetch(_0x5a27b9[_0x9751ee(0x714,0x6d3,0x67a,0x63b)],{'method':_0x5a27b9[_0x44fe0d(0x331,0x2c6,0x305,0x274)],'headers':getRequestHeaders(window[_0x9751ee(0x5c6,0x6bb,0x647,0x6aa)]),'body':JSON[_0x44fe0d(0x2c8,0x231,0x238,0x1cd)](_0x33b4dd)});if(!_0x497de8['ok']){const _0x3890c2=await _0x497de8[_0x9751ee(0x700,0x6fa,0x686,0x700)]();addLog(_0x44fe0d(0x307,0x32b,0x351,0x334)+_0x44fe0d(0x1f4,0x2a3,0x258,0x1e3)+_0x497de8[_0x9751ee(0x664,0x6a2,0x67e,0x68a)]+'。响应内容:\x20'+_0x3890c2),console[_0x44fe0d(0x22a,0x2c0,0x2c0,0x2f6)](_0x5a27b9[_0x9751ee(0x694,0x619,0x601,0x605)],_0x3890c2);throw new Error('请求失败,状态码:\x20'+_0x497de8['status']+_0x44fe0d(0x30a,0x2d0,0x281,0x312)+_0x3890c2);}const _0x4dfa13=await _0x497de8['text']();let _0xc59e10='';try{const _0x5d597e=JSON['parse'](_0x4dfa13);_0xc59e10=_0x5d597e['images'][0x3*0x6b2+0x1b5a+-0xb*0x450];}catch(_0xc31e33){if(_0x5a27b9[_0x44fe0d(0x326,0x3b6,0x35b,0x2ef)]===_0x44fe0d(0x212,0x31d,0x28c,0x2a6)){_0x5a27b9[_0x9751ee(0x552,0x631,0x5b9,0x612)](_0x813932,_0x9751ee(0x670,0x5cd,0x611,0x61b)+_0x36ce24[_0x9751ee(0x705,0x6b6,0x67e,0x6b6)]+'\x20'+_0x421259[_0x44fe0d(0x201,0x250,0x294,0x262)]);throw new _0x1bd4ef(_0x9751ee(0x5a3,0x5ee,0x611,0x675)+_0x3abad7[_0x44fe0d(0x28b,0x32e,0x30d,0x2fe)]+'\x20'+_0x26fa40[_0x44fe0d(0x247,0x291,0x294,0x29a)]);}else _0x5a27b9[_0x9751ee(0x723,0x652,0x6b7,0x662)](addLog,_0x5a27b9[_0x44fe0d(0x2bd,0x34d,0x2dc,0x260)]),_0xc59e10=_0x4dfa13;}const _0x5515bf=_0x5a27b9['vswGA'](_0x5a27b9[_0x9751ee(0x69e,0x75c,0x6c7,0x728)],_0xc59e10);return _0x5a27b9['OuRGj'](addLog,_0x5a27b9[_0x44fe0d(0x1eb,0x203,0x271,0x227)]),{'image':_0x5515bf,'change':_0x5a27b9['NSiOy'](_0x457259,'')};}else{const _0x36d15e=new URL(_0x5a27b9[_0x9751ee(0x65e,0x691,0x643,0x638)](_0x34dc64,'/sdapi/v1/'+_0x44fe0d(0x28a,0x2c3,0x269,0x256))),_0x5afd18=await fetch(_0x36d15e,{'method':_0x5a27b9[_0x44fe0d(0x2c9,0x2e2,0x305,0x2ff)],'body':JSON[_0x9751ee(0x554,0x525,0x5a9,0x63b)](_0x33b4dd),'headers':{'Content-Type':_0x5a27b9['ZeLOJ'],'Authorization':_0x5a27b9[_0x9751ee(0x5df,0x560,0x5e3,0x584)](getsdAuth)}});_0x5a27b9[_0x9751ee(0x607,0x61b,0x636,0x612)](releaseLock);if(!_0x5afd18['ok']){const _0x26a539=await _0x5afd18[_0x9751ee(0x6a7,0x5f2,0x686,0x628)]();_0x5a27b9[_0x9751ee(0x68f,0x609,0x620,0x6a6)](addLog,'SD\x20API\x20返回错'+_0x44fe0d(0x2dd,0x282,0x286,0x2e2)+_0x5afd18['status']+_0x9751ee(0x68b,0x69f,0x690,0x71f)+_0x26a539),console['log'](_0x5a27b9['oxhZM'],_0x26a539);throw new Error(_0x44fe0d(0x237,0x200,0x293,0x28c)+_0x5afd18[_0x9751ee(0x6d4,0x6eb,0x67e,0x6f2)]+_0x9751ee(0x5f0,0x5d1,0x5f2,0x63d)+_0x26a539);}const _0x33e193=await _0x5afd18[_0x9751ee(0x6b0,0x64a,0x6a2,0x6b6)]();if(!_0x33e193[_0x44fe0d(0x261,0x253,0x2ee,0x2db)]||_0x33e193[_0x9751ee(0x6f4,0x5d9,0x65f,0x6e2)][_0x9751ee(0x673,0x66e,0x678,0x6f4)]===-0x1*-0x17b1+0x2190+-0x3941)throw new Error(_0x5a27b9[_0x44fe0d(0x28c,0x27d,0x2ed,0x2a5)]);const _0x26f23b=_0x33e193[_0x9751ee(0x632,0x63e,0x65f,0x626)][0x51c+0x2e2*-0x1+-0x39*0xa],_0x1bcdd8=_0x5a27b9[_0x44fe0d(0x298,0x2dd,0x261,0x25e)](_0x44fe0d(0x20e,0x1cf,0x268,0x2ea)+_0x44fe0d(0x2a3,0x2c6,0x239,0x219)+'4,',_0x26f23b);return _0x5a27b9[_0x44fe0d(0x2f7,0x2df,0x2b0,0x25f)](addLog,_0x5a27b9[_0x44fe0d(0x2ec,0x24a,0x271,0x298)]),{'image':_0x1bcdd8,'change':_0x5a27b9[_0x44fe0d(0x284,0x326,0x31d,0x318)](_0x22c489,'')};}}catch(_0x2f1453){if(_0x5a27b9[_0x44fe0d(0x2af,0x26e,0x279,0x2bf)]('sHVdF',_0x44fe0d(0x23f,0x345,0x2b2,0x254))){releaseLock(),addLog(_0x44fe0d(0x2d3,0x244,0x2ac,0x306)+_0x2f1453['message']),console[_0x44fe0d(0x291,0x252,0x260,0x220)](_0x5a27b9[_0x44fe0d(0x21e,0x2b9,0x2ae,0x327)],_0x2f1453);throw _0x2f1453;}else return _0x2b2f6a[_0x9751ee(0x6e3,0x714,0x6b4,0x6ab)]()[_0x9751ee(0x674,0x699,0x664,0x5f0)](RcpUzi[_0x9751ee(0x59d,0x5a4,0x5a3,0x5cc)])[_0x44fe0d(0x39c,0x2c8,0x343,0x34d)]()['constructo'+'r'](_0x300fb2)['search'](RcpUzi[_0x9751ee(0x62c,0x60c,0x5a3,0x5c2)]);}}async function sdGenerate(_0x434bcf){const _0x4344ca={'KiLWG':function(_0x1afa5e,_0x3329cd){return _0x1afa5e(_0x3329cd);},'Czlym':function(_0x185ceb,_0x391c43){return _0x185ceb(_0x391c43);},'zkQhf':_0x4b9b12(0xb0,0x12c,0xc7,0x9a),'XpOlJ':function(_0x31bc57,_0x3857af){return _0x31bc57!==_0x3857af;},'RKzrN':_0x1e0751(0x388,0x414,0x360,0x3d4),'DqFXv':function(_0x389f46,_0x23bcf1){return _0x389f46!=_0x23bcf1;},'PRTam':function(_0x2dd37d,_0x1d4411,_0x3a12d2,_0x15e0c3){return _0x2dd37d(_0x1d4411,_0x3a12d2,_0x15e0c3);},'ZLXFI':function(_0x5c2ca7,_0x4b4e39){return _0x5c2ca7(_0x4b4e39);},'ejpLk':_0x1e0751(0x3e0,0x444,0x45d,0x416),'BqfLq':'rjhlu','FTyjn':function(_0x2fd88f,_0x386634){return _0x2fd88f(_0x386634);},'wRFAD':function(_0x2f6da8,_0x55ed33){return _0x2f6da8(_0x55ed33);},'erkXc':function(_0x3d822d,_0x3cbe8c){return _0x3d822d!==_0x3cbe8c;},'JknUQ':'CxqfK','xUAcI':function(_0x594e81,_0x54803f){return _0x594e81(_0x54803f);},'raXEO':_0x4b9b12(0x62,0x9f,-0x3f,0x41)+_0x1e0751(0x47c,0x48c,0x381,0x413)+_0x4b9b12(0x13d,0x3f,0xb4,0xa5),'SHZOa':function(_0x59a142,_0x7f124e){return _0x59a142(_0x7f124e);}},{id:_0x148bb6,prompt:_0x334b55,width:_0x44b077,height:_0x5db0fd,change:_0x554667}=_0x434bcf;_0x4344ca[_0x1e0751(0x457,0x488,0x45f,0x496)](addLog,_0x1e0751(0x3f7,0x31b,0x393,0x390)+_0x1e0751(0x323,0x2fd,0x314,0x397)+_0x148bb6+(_0x4b9b12(0x150,0x14e,0xc1,0x14c)+':\x20')+_0x334b55+(_0x554667?_0x4b9b12(0x111,0xe8,0xec,0x142)+'\x20'+_0x554667:''));function _0x1e0751(_0xf4e3e5,_0x640d9,_0x295a25,_0x56e8c6){return _0x4d4b(_0x56e8c6-0x1a7,_0x295a25);}if(_0x554667&&_0x554667['includes'](_0x4344ca['zkQhf'])){if(_0x4344ca['XpOlJ'](_0x4344ca[_0x1e0751(0x461,0x4d4,0x4bb,0x4a8)],'XCjzI')){bananaGenerate(_0x434bcf);return;}else{const _0xff5cb8=_0x679046['apply'](_0xdba354,arguments);return _0x2f07df=null,_0xff5cb8;}}function _0x4b9b12(_0x22ff6e,_0x1c6b13,_0x37e9c1,_0x4f8569){return _0x4d4b(_0x4f8569- -0x1be,_0x37e9c1);}try{const {image:_0x28be73,change:_0x2505cb}=await _0x4344ca[_0x1e0751(0x4b0,0x446,0x49d,0x496)](generateSDImage,{'prompt':_0x334b55,'width':_0x44b077,'height':_0x5db0fd,'change':_0x554667});if(_0x4344ca[_0x1e0751(0x411,0x3d8,0x331,0x3b3)](extension_settings[extensionName]['cache'],'0')){const _0x5a0593={};_0x5a0593[_0x4b9b12(0xa6,0x14,0xaf,0x85)]=_0x2505cb,await _0x4344ca[_0x4b9b12(0x186,0x185,0x18a,0x14f)](setItemImg,_0x334b55,_0x28be73,_0x5a0593),_0x4344ca[_0x1e0751(0x489,0x3ed,0x4ab,0x463)](addLog,_0x4b9b12(0x80,0x3,-0x10,0x6d)+'or\x20prompt:'+'\x20'+_0x334b55);}else{if(_0x4344ca[_0x1e0751(0x418,0x429,0x3ed,0x434)](_0x4344ca['ejpLk'],_0x4344ca[_0x4b9b12(0x107,0x16d,0x187,0x102)]))_0x4344ca[_0x4b9b12(0xa3,0x1b4,0xb7,0x125)](addLog,'缓存设置为不存入数据'+'库');else{_0x4344ca[_0x4b9b12(0x10a,0x5b,0xdc,0xd3)](_0x5eb1a0,_0x1e0751(0x48e,0x447,0x3e1,0x42d)+_0x498a9f[_0x1e0751(0x477,0x414,0x458,0x462)]+'\x20'+_0x226adc['statusText']);throw new _0x10c9f1('切换模型失败:\x20'+_0x32138d[_0x4b9b12(0xc3,0x107,0x69,0xfd)]+'\x20'+_0x555d2e[_0x4b9b12(0x8e,0xfb,0xd0,0x84)]);}}const _0x4d9691={};_0x4d9691['id']=_0x148bb6,_0x4d9691[_0x4b9b12(-0xe,0x5e,0x18,0x5a)]=!![],_0x4d9691['imageData']=_0x28be73,_0x4d9691[_0x1e0751(0x3b7,0x4b7,0x4a0,0x450)]=_0x334b55,_0x4d9691['change']=_0x2505cb,eventSource[_0x4b9b12(-0x39,-0x33,0x6e,0x1f)](EventType[_0x4b9b12(0x91,0x122,0x8d,0xb4)+_0x4b9b12(0x15e,0xd9,0x132,0x13c)+_0x1e0751(0x50e,0x415,0x435,0x4a0)],_0x4d9691),_0x4344ca[_0x1e0751(0x425,0x4bc,0x43a,0x44c)](addLog,_0x4b9b12(0xb9,-0x6c,-0x37,0x2a)+_0x1e0751(0x462,0x413,0x4a0,0x44e)+_0x148bb6+')');}catch(_0x42139d){if(_0x4344ca['erkXc'](_0x4344ca[_0x1e0751(0x3bd,0x32d,0x384,0x383)],_0x1e0751(0x402,0x357,0x410,0x382))){_0x333d49('获取或者切换模型失败'+':\x20'+_0x364baf['message']+(_0x1e0751(0x3f3,0x462,0x426,0x457)+'i是否正常启动，并检'+_0x1e0751(0x42c,0x438,0x481,0x43c)));throw new _0x54e72c('获取或者切换模型失败'+_0x1e0751(0x41c,0x3d2,0x3e5,0x3b1)+'i是否正常启动，并检'+_0x1e0751(0x498,0x480,0x3e3,0x43c));}else{const _0x57dfce=_0x4b9b12(0x103,0xe5,0x113,0xc9)+_0x1e0751(0x403,0x36c,0x401,0x3d0)+_0x148bb6+'):\x20'+_0x42139d[_0x1e0751(0x3fa,0x410,0x383,0x41b)];_0x4344ca[_0x1e0751(0x3c2,0x3ab,0x38f,0x398)](addLog,_0x1e0751(0x451,0x534,0x51e,0x4a3)+_0x57dfce),console[_0x1e0751(0x3cb,0x426,0x3ef,0x3b5)](_0x4344ca[_0x1e0751(0x3b1,0x3d6,0x342,0x3b4)],_0x42139d);const _0x3bb07e={};_0x3bb07e['id']=_0x148bb6,_0x3bb07e[_0x4b9b12(0x69,0x83,-0x3,0x5a)]=![],_0x3bb07e[_0x1e0751(0x355,0x36b,0x3cb,0x3b5)]=_0x42139d[_0x4b9b12(0x133,0xbf,0x101,0xb6)],_0x3bb07e['prompt']=_0x334b55,eventSource[_0x1e0751(0x3b2,0x3f2,0x392,0x384)](EventType[_0x1e0751(0x46b,0x435,0x41c,0x419)+_0x1e0751(0x419,0x4cd,0x4c2,0x4a1)+_0x1e0751(0x446,0x4ec,0x52e,0x4a0)],_0x3bb07e),_0x4344ca['SHZOa'](addLog,_0x1e0751(0x3e9,0x36f,0x439,0x400)+_0x4b9b12(0x73,0x5d,0x176,0xe9)+_0x148bb6+')');}}}const LEGACY_EVENT_NAMES=[_0x9fff6a(0x623,0x5ef,0x591,0x607)+_0x9fff6a(0x5aa,0x6ae,0x63d,0x69a)+'st',_0x54ba33(0x689,0x661,0x695,0x6db)+'mage_reque'+'st'];function initializeSDListener(){const _0x11f663={'kzNhD':function(_0x2d3699,_0x1bd142){return _0x2d3699===_0x1bd142;},'HYkoV':_0x4c5065(0x13e,0x11c,0x197,0x132),'vuQrm':function(_0x1879ae,_0x413a99){return _0x1879ae(_0x413a99);},'BeJsr':_0x4c5065(0x25c,0x1ba,0x23a,0x25e)+_0x2cfff5(0x233,0x21b,0x1bf,0x20d)};eventSource['on'](EventType['GENERATE_I'+'MAGE_REQUE'+'ST'],sdGenerate);function _0x2cfff5(_0x766499,_0x2c90cf,_0x422638,_0x2a82ce){return _0x9fff6a(_0x766499-0x1de,_0x422638,_0x2c90cf- -0x472,_0x2a82ce-0x167);}LEGACY_EVENT_NAMES[_0x2cfff5(0x1dc,0x148,0x1b6,0xe4)](_0x2fd56e=>{function _0x5652c5(_0xad3f11,_0x7ded97,_0x5ccc90,_0x13e730){return _0x4c5065(_0xad3f11-0x142,_0xad3f11,_0x13e730-0x428,_0x13e730-0x115);}function _0x481dd2(_0x231154,_0x10d4f5,_0x19b004,_0x309e8e){return _0x4c5065(_0x231154-0xe7,_0x309e8e,_0x10d4f5- -0xcc,_0x309e8e-0x34);}if(_0x11f663['kzNhD'](_0x11f663[_0x481dd2(0x17a,0x185,0x145,0x1fe)],_0x11f663[_0x5652c5(0x6b2,0x5fb,0x669,0x679)]))eventSource['on'](_0x2fd56e,sdGenerate);else throw new _0xc325fa(_0x5652c5(0x632,0x614,0x616,0x621)+_0x481dd2(0x1b1,0x125,0x1b7,0x12b));});function _0x4c5065(_0x3106f5,_0x22bd5d,_0x18d07a,_0x42bc34){return _0x9fff6a(_0x3106f5-0x14a,_0x22bd5d,_0x18d07a- -0x43e,_0x42bc34-0x47);}_0x11f663[_0x4c5065(0x2cb,0x1ec,0x25c,0x2aa)](addLog,_0x11f663[_0x4c5065(0x1ca,0x267,0x1d4,0x165)]);}function _0x4d4b(_0x2f1ef6,_0x3671f0){_0x2f1ef6=_0x2f1ef6-(0x9b*0x2+0x23ed+0x11a5*-0x2);const _0x3d0ec5=_0x3610();let _0x420f79=_0x3d0ec5[_0x2f1ef6];if(_0x4d4b['YYAnQA']===undefined){var _0x255e29=function(_0x31de3e){const _0x4c7131='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x15555d='',_0x5949f7='',_0x137b32=_0x15555d+_0x255e29;for(let _0x3b8b4f=0x15e5+-0x1cd*-0x7+-0x2280,_0x5bad65,_0x3e94db,_0x1f79a0=-0x2025+-0x408+-0x405*-0x9;_0x3e94db=_0x31de3e['charAt'](_0x1f79a0++);~_0x3e94db&&(_0x5bad65=_0x3b8b4f%(-0x5de*-0x1+-0x2*0x52+-0x536)?_0x5bad65*(0x1*-0x14ef+-0x213*-0xf+-0x9ee)+_0x3e94db:_0x3e94db,_0x3b8b4f++%(-0x97e+0x710*-0x2+-0xa*-0x25d))?_0x15555d+=_0x137b32['charCodeAt'](_0x1f79a0+(-0x4c+-0x1*0xdc3+-0xe19*-0x1))-(-0x18ce+-0x1edf+0x37b7)!==-0x2*-0xb0d+-0xa12*0x1+-0xc08?String['fromCharCode'](0x1*0x311+-0x14f3+0x1b*0xb3&_0x5bad65>>(-(-0x1aa4+-0x1*-0x852+0x1254)*_0x3b8b4f&0x1*-0x1b6d+-0x6f*0xf+-0x35*-0xa4)):_0x3b8b4f:-0x1350+-0x2*-0x135+-0xce*-0x15){_0x3e94db=_0x4c7131['indexOf'](_0x3e94db);}for(let _0x3f70c7=-0x7e6+0x240b*-0x1+0x647*0x7,_0x1efca7=_0x15555d['length'];_0x3f70c7<_0x1efca7;_0x3f70c7++){_0x5949f7+='%'+('00'+_0x15555d['charCodeAt'](_0x3f70c7)['toString'](-0x1a*0xca+0x65*0x2e+-0x137*-0x2))['slice'](-(-0x1212+-0x367*0x3+0x1c49));}return decodeURIComponent(_0x5949f7);};_0x4d4b['pIGFLU']=_0x255e29,_0x4d4b['iKkmCc']={},_0x4d4b['YYAnQA']=!![];}const _0x2cb5c6=_0x3d0ec5[0xe2e+0x3*-0x79f+-0x13*-0x75],_0x31b44d=_0x2f1ef6+_0x2cb5c6,_0x258594=_0x4d4b['iKkmCc'][_0x31b44d];if(!_0x258594){const _0x813932=function(_0x36ce24){this['iZBRpF']=_0x36ce24,this['BqiPZK']=[0xb*-0x83+-0x1*0x2118+0x1*0x26ba,0x1bce*0x1+0x1*-0x1f42+0x11*0x34,-0x1*0x2044+0x1c52+-0x3f2*-0x1],this['zmXTZM']=function(){return'newState';},this['smPouh']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['akqJye']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x813932['prototype']['uOoUKD']=function(){const _0x421259=new RegExp(this['smPouh']+this['akqJye']),_0x1bd4ef=_0x421259['test'](this['zmXTZM']['toString']())?--this['BqiPZK'][0x24f4+0xe6f*0x1+-0x3362]:--this['BqiPZK'][0xad*-0x39+0xbc6+0x1abf];return this['ubwaMc'](_0x1bd4ef);},_0x813932['prototype']['ubwaMc']=function(_0x3abad7){if(!Boolean(~_0x3abad7))return _0x3abad7;return this['cgfpaY'](this['iZBRpF']);},_0x813932['prototype']['cgfpaY']=function(_0x26fa40){for(let _0x3c3173=-0x5c*0x45+0x1733+0x199,_0xceaede=this['BqiPZK']['length'];_0x3c3173<_0xceaede;_0x3c3173++){this['BqiPZK']['push'](Math['round'](Math['random']())),_0xceaede=this['BqiPZK']['length'];}return _0x26fa40(this['BqiPZK'][-0x21*0xbc+-0xd2f+0x256b]);},new _0x813932(_0x4d4b)['uOoUKD'](),_0x420f79=_0x4d4b['pIGFLU'](_0x420f79),_0x4d4b['iKkmCc'][_0x31b44d]=_0x420f79;}else _0x420f79=_0x258594;return _0x420f79;}export async function replaceWithSd(){const _0x53db7f={'XRrFD':function(_0x4f4c70,_0x232236){return _0x4f4c70+_0x232236;},'NAujw':function(_0x3e652d,_0x13cdae){return _0x3e652d+_0x13cdae;},'lOwiT':function(_0x4a3a98,_0x38a947){return _0x4a3a98==_0x38a947;},'eLChi':_0x406ac3(0x386,0x3e6,0x472,0x38b),'VENxY':function(_0x492677){return _0x492677();},'DNjim':function(_0x5105b5,_0x8e65ff){return _0x5105b5!==_0x8e65ff;},'dbLcV':_0x2564a7(-0x21a,-0x1b7,-0x1af,-0x203),'bUrHW':_0x406ac3(0x359,0x3e4,0x455,0x398),'kawZy':function(_0x28a6e4,_0x8f78c2){return _0x28a6e4(_0x8f78c2);},'aVAod':'SD\x20生图事件监听器'+_0x2564a7(-0x158,-0x1a8,-0x188,-0x12d)};function _0x406ac3(_0x94f204,_0x3aa22e,_0x5528c8,_0x32455f){return _0x54ba33(_0x94f204-0x19b,_0x3aa22e-0x197,_0x3aa22e- -0x20c,_0x94f204);}function _0x2564a7(_0x3fbbbe,_0x36ecdd,_0x5f0ffe,_0x54811d){return _0x9fff6a(_0x3fbbbe-0x1eb,_0x5f0ffe,_0x36ecdd- -0x778,_0x54811d-0xf9);}_0x53db7f['lOwiT'](extension_settings[extensionName][_0x2564a7(-0x219,-0x1db,-0x15d,-0x259)],'sd')?(!window['initialize'+_0x2564a7(-0xf9,-0xf0,-0x10f,-0x152)]&&(_0x406ac3(0x389,0x3e6,0x353,0x419)!==_0x53db7f[_0x406ac3(0x3e1,0x40f,0x4a5,0x3d8)]?_0x29578d=!![]:(window['initialize'+_0x2564a7(-0x100,-0xf0,-0xe4,-0xf1)]=!![],_0x53db7f[_0x2564a7(-0x1f5,-0x1b6,-0x179,-0x16d)](initializeSDListener))),initializeImageProcessing()):_0x53db7f[_0x2564a7(-0x103,-0x153,-0x10f,-0x139)](_0x53db7f[_0x2564a7(-0x164,-0x11d,-0x127,-0x10d)],_0x53db7f['bUrHW'])?window[_0x406ac3(0x317,0x397,0x392,0x309)+_0x406ac3(0x4f0,0x47f,0x413,0x515)]&&(eventSource[_0x406ac3(0x3be,0x43a,0x45f,0x46d)+_0x406ac3(0x3d1,0x38b,0x3f6,0x40c)](EventType['GENERATE_I'+_0x2564a7(-0x168,-0x1aa,-0x1e1,-0x16c)+'ST'],sdGenerate),LEGACY_EVENT_NAMES[_0x406ac3(0x3b2,0x3b1,0x3e1,0x344)](_0x5ad5f3=>{function _0x261a14(_0x51d291,_0x5e8146,_0x23ee07,_0x3eef62){return _0x406ac3(_0x23ee07,_0x51d291- -0x18f,_0x23ee07-0x1b0,_0x3eef62-0x88);}function _0x16de60(_0xc5d747,_0x1f7f6b,_0x63073f,_0x5b913f){return _0x2564a7(_0xc5d747-0x1e0,_0x5b913f-0x16,_0x63073f,_0x5b913f-0x14b);}eventSource[_0x16de60(-0x13c,-0x113,-0xe3,-0x11f)+_0x16de60(-0x143,-0x1e8,-0x265,-0x1ce)](_0x5ad5f3,sdGenerate);}),window['initialize'+_0x2564a7(-0xff,-0xf0,-0x100,-0xfa)]=![],_0x53db7f[_0x2564a7(-0x17d,-0xf2,-0x8f,-0x11e)](addLog,_0x53db7f[_0x406ac3(0x43f,0x479,0x400,0x41a)])):_0x1d28bc['Character\x20'+_0x33d9f3+_0x406ac3(0x3c7,0x381,0x365,0x2fa)]&&(_0x233b52=_0x53db7f['XRrFD'](_0x53db7f[_0x406ac3(0x374,0x36d,0x3a0,0x300)](_0xa1885b,',\x20'),_0x4fd9fd[_0x406ac3(0x4a3,0x482,0x42a,0x4af)+_0xb7f8ff+'\x20Prompt']));}