(function(_0x5353a9,_0x32eaf4){const _0x17f184=_0x5353a9();function _0x1357cb(_0x166979,_0x4e4347,_0x80e1f2,_0x3993d3){return _0x10cd(_0x166979-0x1c6,_0x4e4347);}function _0x4e8163(_0x383e36,_0x209b6b,_0x28b28f,_0x1d681e){return _0x10cd(_0x209b6b- -0x116,_0x383e36);}while(!![]){try{const _0x165504=parseInt(_0x4e8163(-0xd,0x45,0xa,0x78))/(0x1e26+0xf48+-0x2d6d)+-parseInt(_0x4e8163(-0x8,0x32,0xb3,0xd7))/(-0xa8+0xb2*0x2e+0xd3*-0x26)*(parseInt(_0x1357cb(0x3d1,0x36b,0x38b,0x464))/(-0x21c2+-0x26b7+0x487c))+-parseInt(_0x4e8163(0xb5,0x72,0xb4,0xdb))/(0x1b9+0x5d*0x3+-0x2cc)*(-parseInt(_0x4e8163(0x80,0xb0,0x134,0x111))/(-0x12e9+0x3*0x6e+-0x2*-0x8d2))+parseInt(_0x1357cb(0x306,0x2e0,0x34a,0x30e))/(0x1947+0xc7*-0xb+-0x42d*0x4)*(parseInt(_0x4e8163(0xdb,0xb9,0x6a,0x132))/(0x1aed+0x1*0x12fb+-0x2de1))+-parseInt(_0x4e8163(0xca,0x76,0x28,-0x14))/(0x4e3*-0x3+-0xb*-0x323+0x8*-0x27a)*(-parseInt(_0x4e8163(0x11d,0xc7,0x7f,0x137))/(0x3*0xc06+0x60a*-0x4+-0xbe1))+-parseInt(_0x1357cb(0x32c,0x2ee,0x2da,0x3be))/(-0x2044+0x1202+0xe4c)*(-parseInt(_0x4e8163(-0x15,0x87,0xac,0xce))/(0x1f3*0x5+-0x1676+-0x2e*-0x47))+-parseInt(_0x4e8163(-0x1b,0x73,0x39,0xdf))/(0x3*-0xc1+-0x1a06+0x1*0x1c55)*(parseInt(_0x1357cb(0x355,0x2c1,0x2e0,0x3bc))/(-0x1f11+0x1*-0x581+0x3*0xc35));if(_0x165504===_0x32eaf4)break;else _0x17f184['push'](_0x17f184['shift']());}catch(_0xec6b72){_0x17f184['push'](_0x17f184['shift']());}}}(_0x2aca,-0x19*0x6cd+0x155f2*-0x1+0x5cb67*0x1));const _0x5888b2=(function(){let _0x247dae=!![];return function(_0xa6ebcd,_0x350afc){const _0x8ce626=_0x247dae?function(){function _0x37f07b(_0x2e6678,_0x3f362b,_0x328c8b,_0x272457){return _0x10cd(_0x328c8b-0x35e,_0x3f362b);}if(_0x350afc){const _0x334689=_0x350afc[_0x37f07b(0x59f,0x48e,0x529,0x595)](_0xa6ebcd,arguments);return _0x350afc=null,_0x334689;}}:function(){};return _0x247dae=![],_0x8ce626;};}()),_0x5c4d3c=_0x5888b2(this,function(){const _0x3ee37c={};function _0x348bbb(_0x5e8568,_0x2662b1,_0x1268f9,_0x422d31){return _0x10cd(_0x5e8568- -0x389,_0x1268f9);}_0x3ee37c[_0x348bbb(-0x22d,-0x1ac,-0x1a1,-0x2b1)]=_0x348bbb(-0x153,-0x176,-0x164,-0x1a2)+'+$';const _0x1cccee=_0x3ee37c;function _0x3e3481(_0xdb1795,_0x5f0ea1,_0xee2f9d,_0x3cba17){return _0x10cd(_0xee2f9d-0x82,_0x5f0ea1);}return _0x5c4d3c[_0x3e3481(0x1e7,0x191,0x235,0x24b)]()['search'](_0x1cccee['ZEOur'])[_0x348bbb(-0x1d6,-0x17b,-0x204,-0x16a)]()[_0x348bbb(-0x198,-0x17b,-0x110,-0x102)+'r'](_0x5c4d3c)[_0x348bbb(-0x1e0,-0x252,-0x19c,-0x191)](_0x1cccee[_0x3e3481(0x216,0x272,0x1de,0x17c)]);});_0x5c4d3c();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';function _0x2aca(){const _0x56d42d=['rvnWB2u','C2rFyxv0Aa','ue9tva','CMf0Aw5NigLTyq','DgvWCYK6kIOG','y2HHBMDL','6AUy5RIf5l+U5Asnios4UG','cI0TlqOJiYmG55sF','56cboIa','txrLze4','C3rFy2HHDhu4xW','mJG5nvbYyLPwwG','ExvZAgu','CMvZDg9YzuzHyW','AhjFC2nHBgu','og4UChq','B2rLBcK6kIOG','C2rFy3n0zxbZ','5BEY5ywZ6zET44cc','zw1PDa','loAOOEwEI+s4UG','ELPIDhq','rxjYB3iGz2vUzq','Aw5MBW','y2fSztOQkIa','y2vZ','Aw1Hz2veyxrH','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','ChjVBxb0','ufrrse0','kerLBM9PC2LUzW','veDvCeO','kerPDMLKzv9YBW','5BcD6k+v5l2C5lI65y6F5AEliejHCW','AxPLktOQkIa','5BI4icHjrdOG','AxPfveu','C3rLChm','AuXgsfG','CMvZDg9Yzv9Myq','C2rFy2HPCMvZxW','zw5HyMXLx2HYia','DxjS','uwHVy1i','zKjtze8','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','mJiYmG','kfjLC3rVCMuGrG','BMvYyxrPB24','cI0GkIRLSlRLR7GGkfm','q0Xjuf9ZDg9WxW','keHPCMvZiezPEa','rxHfwva','77Ym6k+35Qoa5P+LC2r3zwj1','kcGOlISPkYKRkq','of9TB2rLBa','qxbKtvG','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','BMvYyxrL','C3vJy2vZCW','Bg9Hza','B21WDa','Aw5Nx3n0CMvUzW','AhLetwG','BwvZC2fNzq','tNbrC08','A215C2m','qvfUrvy','EvrNve4','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','zgrmAe4','zw1rreC','uMrny3u','CNbyyK8','DefnBwq','uhP4DLC','B3nPDgLVBG','qurWu20','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','C0vky1u','6i635y+w5QIH5z6l5AsX6lsLoIa','BgvZktOG','zxjYB3i','kfnHBxbSzxiPoG','CNfpsMq','5lU75yQH5BEY5y+w5RAi','l3nKyxbPl3yXlW','y2zNx3nJywXL','zMXxCLy','ktOG','t0f0rhG','uhjVBxb0ktOQkG','cI0GkIRMQkhLNOSGke0','ywrKvgfZAW','zty0ioAvSoAnRUwKHoEqHUoaGG','zLbuBKu','A3LyuNm','q2HjuK8','yxrFBgfZDf9Syq','u3Dss2q','CwjtCLm','zgvUB2LZAw5NxW','zwvKktOQkIa','u0rmAxn0zw5LCG','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','z21Ttw8','Cgf5Bg9Hza','vvfwEgm','u2nLBMuGq29TCa','y21VzgvSmJiYmG','t1vmtge','vNnAzMu','q1PiB3u','B1PuvfK','A2LW','quL3sgC','E+s/RUwBVN0','Dgv4Da','Ewn5zfO','Dc1TB2rLBa','AgvPz2H0','BLzyz2C','6zQp5PY6kc0Xkq','C3vnA1q','tufhrv9srvnqtW','C2rFy2nOyxr1xW','yu9ss3u','cI0GkIROTj/PNAlMJ5dNPlOG','Bhzgrvm','AML1z3vHBG','yxv0B191CMW','C2rFy2fKzxrHAq','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','zxvL','BeTev1O','vgTqAfO','tufhrv9srvfvrq','mty3mtK0mNjWtLHYDa','BgvUz3rO','rLDotwC','zMfJzv95B2XVDG','BeTzC1y','5yYw5lI6igrHDgeGvvi','vunqx3nK','DtHFC2rFyxv0Aa','oty0D0vUtNjQ','ywHwzxe','svnMzeq','of92ywu','zML4','l2fWAs9Zzc9Nzq','weXwCNC','C2rdzMDty2fSzq','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','uK1tt0i','Dgr1ueW','lcdOR6BMG4u6ia','sgLTEwu','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','ExvZAgvPzf9Zza','sLnptIdOP6pMNPdLPlhOTkxVViW','DxLgwKW','5yIh5O2I5QIH5z6l5AsX6lsLoIa','twjtzeK','mJqWnJKYr29dv3rU','wKvpDxi','tLnf','B0zMswC','C3rHDhvZvgv4Da','DgT6tLi','C2nPANi','DwLbquq','DhH0mMLTzW','C2rqDNa','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','otmWtxvABhPR','Cgf5C3rFy2HHDa','BgfkB2y','C2rvCMW','tgvzB1q','C3rHDhvZ','DKfRuxq','s3b4tMe','C2rFy2rLBM9PCW','5zon5BQu5yAf5A65oG','qNfUsg0','zMPpDey','cI0GkIPbrgv0yq','CNvUBMLUzW','CvnhBva','cI0GkIRNP43LRzaGkfm','of91ChnJywXLCG','z2u6','q2HHCMfJDgvYia','s1LuzMG','ChqPoIOQia','ic0Gq2HHBMDLoG','EgLHBMnOzw5N','5yop5PwW5O2U44cc','lI4U','cI0GkIPdrKCGuW','cI0GkIROHlJPG6JKV67LPi0G','C3rYAw5NAwz5','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','tMrJANm','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','ufPot0O','vNfRyKm','qNLZD2q','ngzerKDyAW','mtKWoezev3zmyW','weHLwNO','BeryrwG','ntm2AfvSv3H3','C2rFy2nSAxbFCW','r0vorvjbvevFsq','mJaZntHduffwsLm','zwL2EK0','55sO5lQo55sF5OIq55QevgfNoIa','C2rFC3rVCf9Nzq','ifbYB21WDa','ugjmzKu','qvfux3nK','Aw1Hz2vZ','AwXLCJOQkIa','CfH2vNe','EKXkq2W','BLfTueu','ywrLDgfPBgvYxW','ktOQkIa','ndq5ouj2DeHIzq','zML4zwrqCM9TCa','vfLxD04','6zsz6k+VoIa','DKvwuKi','C2vLza','5lIT55QeihbYB21WDooaGG','rwzky0K','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','s0fetNK','BhzTCxy','zxr0Aw5NCW','C2vHCMnO','z0jnAeG','z01VAM8','cI0GkIRPQ5JMUixKV67LPi0G','5zU+5y+c5PwW5OQL5zgkcI0GkIO','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','vKHkvwS','u0PosNy','AuLfEKe','ywn0B3iPoIOQia','Dg9tDhjPBMC','t1zOCgq','EKfrEKm','v0zXrKq','Ber1Beq','vw13zui','5BEY5yID5AEl5yYw44cc','ruPoA2G','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','rMPzuee','A1DjAuO','C0HbzNq','ENfLtKC','vNv1Eu8','y3zWsNm','reHmEeW','DxbKyxrLu3rHDa','C2rFy3vWC2nHBa','rgvRvfe','mtC3ndiWnuPUzuPXra','zMfJzsdKUlRLVidLKk8','cI0TlqOGicaG','cI0GkIRPH4FMOlFMLRNMS5uG','BgvY','yxbWBhK','rwrPqNe','y29TCgXLDgvuyq','CLDZAeq','n3Hzvg5jqG','A1bXvKW','yND3CwC','yNvfvfG','Bg9N','of9Zy2HLzhvSzq','s3fRzNK','AxnuyxnRsw5rDq','u2rHr3y','A1nZAeO','EgDbBxK','CLv6s20','tKrorg0','C2rFy2HLAwDODa','nJC5nvb1wevIua','zw5HyMXLx2HY','zv9Mywn0B3i','qLrYwKu','AvPhDwO','uKrwwue','Dg9Rzw4','r0T4zfe','yxPIC2q','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','y2vZioIeUoMdQos/RUwKJsdKUlO','cI0GkIRPH43NU5JLUyxLUQyG','rMfUq1G','CMf0Aw5Nifneia','Aw5JBhvKzxm','EvbdCfG','C2rFDMfL','zw5LCG','Dhj1zq','y2XPzw50','y29UC3rYDwn0BW','BI9QC29U','Aw5PDgLHBgL6zq','of9Zyw1WBgvYtG','q2jpsKC','DuH3Eg0','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','yxv0Aa','A0Tcwe4','u0fOEeG','CMvTB3zLtgLZDa','Df9LBMq','ALHuC3u','suq6ia','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc'];_0x2aca=function(){return _0x56d42d;};return _0x2aca();}import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;async function generateSDImage({prompt:_0x37bc95,width:_0x3bf1e7,height:_0x6a8b42,change:_0x2e656b}){const _0x1a27fb={'ESpoe':_0x5eff0d(-0x210,-0x197,-0x1c1,-0x122)+_0x5eff0d(-0x1c7,-0x1be,-0x14a,-0x136),'WFqFD':function(_0x3d1f69,_0x384623){return _0x3d1f69(_0x384623);},'kmysc':_0x5eff0d(-0x1a2,-0x235,-0x1bf,-0x231)+_0x5eff0d(-0x23d,-0x209,-0x29c,-0x1c5),'eivzM':function(_0x16ed02,_0x829db2,_0x524463){return _0x16ed02(_0x829db2,_0x524463);},'aORKu':_0x46de37(-0x1d8,-0x1aa,-0x20e,-0x139)+_0x46de37(-0x147,-0xde,-0x15f,-0x111),'suMkT':function(_0xd24b63,_0xb06bb2){return _0xd24b63(_0xb06bb2);},'lDulD':function(_0x25535b,_0x206e8a){return _0x25535b<=_0x206e8a;},'UQVxc':function(_0x492350,_0x1545ef){return _0x492350+_0x1545ef;},'SAhxH':function(_0x30d4db,_0x2efd00){return _0x30d4db(_0x2efd00);},'ADpSm':function(_0x17e3f8,_0x278ea6){return _0x17e3f8(_0x278ea6);},'SwRKd':_0x46de37(-0x1e4,-0x13f,-0xc8,-0xb9),'kSshJ':_0x5eff0d(-0xd9,-0x17b,-0x209,-0xda),'nQmPE':function(_0x578074,_0x5746cd){return _0x578074(_0x5746cd);},'DHLxL':_0x46de37(-0x1c1,-0x196,-0x1e4,-0x1c3)+_0x46de37(-0xcb,-0xcc,-0x50,-0x66)+_0x46de37(-0x100,-0x8f,-0x106,-0x123),'uFPbi':function(_0x37b1,_0x5f113b){return _0x37b1(_0x5f113b);},'PZNOJ':function(_0x29cfc0,_0x305937){return _0x29cfc0+_0x305937;},'BqnHm':function(_0x1d2fb4,_0x551063){return _0x1d2fb4(_0x551063);},'uyFZL':_0x46de37(-0xf1,-0x132,-0x8e,-0x1cb)+_0x5eff0d(-0x148,-0x1d1,-0x234,-0x181),'Himye':_0x46de37(-0x1da,-0x1ca,-0x190,-0x1a8)+_0x5eff0d(-0x1a2,-0x184,-0x174,-0xe1),'EJNkh':function(_0x56bdce){return _0x56bdce();},'ChIRO':function(_0x5b4dcd,_0x51d615){return _0x5b4dcd+_0x51d615;},'kyXRs':function(_0x578194,_0x5dbeff){return _0x578194>_0x5dbeff;},'oZTTY':_0x5eff0d(-0x237,-0x252,-0x1db,-0x24d),'LzzIb':function(_0x28f532,_0x464bed){return _0x28f532(_0x464bed);},'TGUpJ':function(_0x5a0013,_0x6e3a73){return _0x5a0013(_0x6e3a73);},'gMojo':function(_0x54d6a8,_0x524a60){return _0x54d6a8(_0x524a60);},'pXvVq':function(_0x20d4df,_0x391c92){return _0x20d4df!==_0x391c92;},'EZoat':_0x5eff0d(-0x219,-0x18a,-0x132,-0x19f),'kajXK':function(_0x17bad5,_0x175e5a){return _0x17bad5<=_0x175e5a;},'cYvKk':function(_0x135e0b,_0x5417c4){return _0x135e0b+_0x5417c4;},'rUzKm':function(_0x91efb0,_0x2c70ca){return _0x91efb0(_0x2c70ca);},'KADNy':'标准模式:\x20使用请求'+_0x5eff0d(-0x1ff,-0x22d,-0x21a,-0x1bf),'kKBXN':function(_0x193e19,_0x1d8748,_0x2dfb60){return _0x193e19(_0x1d8748,_0x2dfb60);},'gBMhH':function(_0x13cb1f,_0x1c5c97){return _0x13cb1f===_0x1c5c97;},'VuuyO':_0x5eff0d(-0x1f9,-0x1f9,-0x238,-0x273),'PzxvW':_0x5eff0d(-0x20d,-0x1f5,-0x19b,-0x1a3),'iLFHX':_0x46de37(-0x134,-0x16a,-0x1c6,-0x18e),'zGeeQ':function(_0x5e8a3d,_0x547b3f){return _0x5e8a3d+_0x547b3f;},'FanCX':function(_0xf07076,_0x2151fd){return _0xf07076+_0x2151fd;},'sHAft':function(_0x27bde5,_0x29555d,_0x5b412f,_0x91cb8d,_0x4be4d7,_0x4d0a94){return _0x27bde5(_0x29555d,_0x5b412f,_0x91cb8d,_0x4be4d7,_0x4d0a94);},'kCxaE':_0x5eff0d(-0x1fe,-0x297,-0x2ed,-0x28a),'NpQsO':function(_0x3b5c37){return _0x3b5c37();},'CZHou':_0x46de37(-0x1dd,-0x138,-0xa9,-0x157),'TkPhZ':_0x46de37(-0x164,-0x1a4,-0x1b6,-0x208),'FjYPA':_0x46de37(-0x15e,-0x1b5,-0x175,-0x236),'KVmJl':function(_0x4b4a01,_0x3931b5){return _0x4b4a01===_0x3931b5;},'VqkbC':'izETE','rqOJd':_0x5eff0d(-0x2de,-0x283,-0x27e,-0x24d)+_0x46de37(-0x1fc,-0x1bf,-0x137,-0x1aa),'BTrZE':_0x46de37(-0x109,-0xeb,-0x71,-0x75),'xgAmy':function(_0xaf2dd,_0x352b15){return _0xaf2dd===_0x352b15;},'VHJUk':_0x46de37(-0x102,-0x159,-0x1cc,-0x11d),'SJNJv':_0x5eff0d(-0x2a8,-0x2ac,-0x2b9,-0x235)+_0x46de37(-0x146,-0xbf,-0x99,-0xbb),'fBSdO':'extension_'+'settingss.'+_0x5eff0d(-0x20d,-0x29c,-0x222,-0x305)+_0x46de37(-0xb5,-0xb6,-0x8f,-0x24),'lKYsV':function(_0xc842aa,_0x450c3e){return _0xc842aa!=_0x450c3e;},'ISfdD':function(_0x7a24a9,_0x11c095){return _0x7a24a9===_0x11c095;},'oFfIg':_0x46de37(-0x100,-0xf7,-0x53,-0x156),'RDVYA':function(_0x44af2e,_0x59b631){return _0x44af2e!==_0x59b631;},'XLVrw':_0x46de37(-0xcb,-0x135,-0x1b1,-0x166),'OULLa':'fQXFB','lMhyy':function(_0x554646,_0x4f08d8){return _0x554646(_0x4f08d8);},'qbSrS':function(_0x250fe2,_0x1ef7e6){return _0x250fe2!=_0x1ef7e6;},'bwwqg':_0x46de37(-0x230,-0x1b6,-0x188,-0x227),'VsZfe':function(_0x4fa4b5,_0x35b187){return _0x4fa4b5(_0x35b187);},'RTWhH':function(_0x7029b9,_0x5199f7,_0xc734a4){return _0x7029b9(_0x5199f7,_0xc734a4);},'buETX':_0x46de37(-0x105,-0xae,-0xa8,-0x12d),'tAMmd':function(_0x5c8790,_0x14a5c2){return _0x5c8790!==_0x14a5c2;},'KYTfh':function(_0x1e1661,_0x402c55){return _0x1e1661(_0x402c55);},'laJof':function(_0x5c908e,_0x563475){return _0x5c908e>=_0x563475;},'cvpJs':function(_0x4fa6c9,_0x28284d){return _0x4fa6c9===_0x28284d;},'rWshD':'gZZxx','tduPL':function(_0x13dde9,_0xbe4654){return _0x13dde9==_0xbe4654;},'lKDWZ':function(_0x479e9e,_0x25059e){return _0x479e9e(_0x25059e);},'CbOJG':function(_0x43d969,_0x2f82bd){return _0x43d969(_0x2f82bd);},'TYWwN':function(_0x126bcc,_0x47693d){return _0x126bcc===_0x47693d;},'kUXyN':_0x5eff0d(-0x1fc,-0x276,-0x21d,-0x214),'wmfEO':function(_0x244893,_0x52a694,_0xaeb55b){return _0x244893(_0x52a694,_0xaeb55b);},'MtedN':_0x46de37(-0x1d1,-0x1bc,-0x186,-0x150),'azbsd':_0x5eff0d(-0x1dc,-0x1e1,-0x1e0,-0x257),'DekTQ':_0x5eff0d(-0x2a2,-0x2af,-0x312,-0x269),'vEVRB':function(_0x381362,_0x30ba19){return _0x381362===_0x30ba19;},'PTQHM':_0x46de37(-0x7d,-0xa9,-0xec,-0x9a),'xSsdo':'fqHyb','fjOtF':_0x46de37(-0x188,-0x13c,-0xca,-0xbc),'fnrTG':_0x5eff0d(-0x239,-0x25d,-0x207,-0x21c),'sdPvp':'LGvxM','AIwHg':_0x46de37(-0x1b0,-0x163,-0x17a,-0xcb),'LeYoT':_0x46de37(-0x107,-0x186,-0x208,-0x206)+_0x46de37(-0x134,-0x1a6,-0x1c8,-0x1a1)+_0x46de37(-0x127,-0xb1,-0xb3,-0xaf),'zZbtt':_0x5eff0d(-0x2d2,-0x283,-0x268,-0x207)+_0x5eff0d(-0x155,-0x196,-0x206,-0x118),'RdMcu':function(_0x25a680,_0x433241){return _0x25a680(_0x433241);},'tkzNR':function(_0x573c4d,_0xa0faaf){return _0x573c4d(_0xa0faaf);},'YwFjU':_0x46de37(-0xe6,-0x17e,-0x138,-0xf7),'QhocR':function(_0x432ea3,_0x1ba3eb){return _0x432ea3+_0x1ba3eb;},'XXEkW':'data:image'+'/png;base6'+'4,','EdiBq':function(_0x5e1561,_0x447210){return _0x5e1561(_0x447210);},'qSGmP':_0x5eff0d(-0x2b7,-0x280,-0x237,-0x2bc)+_0x5eff0d(-0x31b,-0x28b,-0x235,-0x2fa)+'L。','pPebX':function(_0x285c7a,_0x15defc){return _0x285c7a||_0x15defc;},'FWNMg':function(_0x3c20f2,_0x5e3253,_0x18013c){return _0x3c20f2(_0x5e3253,_0x18013c);},'RMSOB':'applicatio'+_0x5eff0d(-0x1b4,-0x1de,-0x1ac,-0x22d),'OAtDx':'API响应中未找到图'+_0x46de37(-0x1fa,-0x170,-0x186,-0x1aa),'kWIiJ':function(_0xda242d,_0x3de671){return _0xda242d(_0x3de671);},'zLJCl':function(_0x2e1d7a,_0x2d9b09){return _0x2e1d7a||_0x2d9b09;},'uiAAD':'zqeNG','jXTsu':function(_0x5ef08c,_0x562689){return _0x5ef08c===_0x562689;},'emQDG':_0x46de37(-0x164,-0x149,-0x19a,-0xd1)};_0x1a27fb[_0x46de37(-0x16a,-0x133,-0x10d,-0xcd)](clearLog);const _0x232ad9=taskQueue[_0x46de37(0xc,-0x90,-0xa8,-0xdb)]({'name':_0x1a27fb[_0x46de37(-0xe7,-0x8c,-0xd1,-0x93)]((_0x37bc95||'')['substring'](-0xc07+0x16*-0x48+0x1237,-0xc0*0x14+0x446*0x1+0xad8),_0x37bc95&&_0x1a27fb[_0x46de37(-0xd7,-0x8d,-0x11b,-0xe)](_0x37bc95[_0x5eff0d(-0x23d,-0x28f,-0x2b0,-0x2c7)],0xbc6+-0x1138+0x590*0x1)?_0x1a27fb[_0x5eff0d(-0x2ce,-0x2a8,-0x277,-0x226)]:''),'type':TaskType['SD'],'prompt':_0x37bc95});currentTaskId=_0x232ad9;let _0x235b13=_0x2e656b;_0x37bc95=_0x1a27fb['nQmPE'](processCharacterPrompt,_0x37bc95),_0x2e656b=processCharacterPrompt(_0x2e656b),_0x37bc95=await _0x1a27fb['LzzIb'](stripChineseAnnotations,_0x37bc95),_0x2e656b=await _0x1a27fb[_0x5eff0d(-0x250,-0x1b1,-0x1fc,-0x1ef)](stripChineseAnnotations,_0x2e656b);function _0x46de37(_0x118a4b,_0x1b9bbc,_0x2af4fa,_0x13890c){return _0x10cd(_0x1b9bbc- -0x2ed,_0x13890c);}const _0x1fe625=extension_settings[extensionName][_0x46de37(-0x224,-0x184,-0x1dc,-0x14a)]['trim'](),_0x5ac403=extension_settings[extensionName];_0x1a27fb[_0x46de37(-0xf7,-0x142,-0xe7,-0xa1)](addLog,'正在通过sdwebu'+_0x46de37(-0xd8,-0xa8,-0x70,-0x120)+'端为'+_0x5ac403[_0x46de37(-0xea,-0xfd,-0x75,-0xd7)]+_0x5eff0d(-0x166,-0x1bc,-0x19b,-0x120)+_0x5ac403['sd_cchatu_'+_0x46de37(-0xad,-0xb6,-0xd9,-0xb0)]);const _0xc27590=_0x2e656b&&_0x1a27fb['pXvVq'](_0x2e656b['trim'](),'')?_0x2e656b:_0x37bc95;addLog(_0x5eff0d(-0x2a1,-0x23f,-0x1b8,-0x23a)+_0xc27590);let _0x268fc5=![];_0xc27590[_0x5eff0d(-0x275,-0x1e5,-0x27f,-0x22c)](_0x1a27fb[_0x5eff0d(-0x263,-0x27c,-0x2c3,-0x2c4)])&&(_0x268fc5=!![]);_0x1a27fb[_0x46de37(-0x1cd,-0x17d,-0xdf,-0x166)](addLog,_0x5eff0d(-0x2a6,-0x27b,-0x22b,-0x282)+_0x5eff0d(-0x1be,-0x1b0,-0x1a7,-0x247)+_0x5eff0d(-0x182,-0x17f,-0x17e,-0x1fc)+_0x268fc5);let _0x311878={},_0xa5a92f='',_0x5783a0='';if(_0x268fc5){if(_0x1a27fb[_0x46de37(-0xe2,-0x155,-0xcc,-0x1a4)](_0x1a27fb['EZoat'],'ddLhN'))_0x2144b5[_0x5eff0d(-0x1c6,-0x1d5,-0x253,-0x1bb)+_0x5eff0d(-0x15c,-0x1e2,-0x149,-0x282)](_0x146e43['GENERATE_I'+_0x46de37(-0x146,-0x1ae,-0x172,-0x20b)+'ST'],_0x2ddeb4),_0x4b87e5[_0x46de37(-0x18a,-0xfa,-0xdd,-0x193)+_0x46de37(-0x244,-0x1cf,-0x258,-0x1fe)]=![],_0x4588b7(_0x1a27fb[_0x5eff0d(-0x151,-0x1d0,-0x23d,-0x213)]);else{addLog(_0x1a27fb['uyFZL']),_0x311878=parsePromptStringWithCoordinates(_0xc27590),_0xa5a92f=_0x311878[_0x1a27fb['Himye']];for(let _0x2bbfcc=0xdc8*-0x2+-0x9ca+0x255b;_0x1a27fb['kajXK'](_0x2bbfcc,0x8*-0x291+0x8d*-0x2b+-0x367*-0xd);_0x2bbfcc++){_0x311878[_0x46de37(-0x1bc,-0x175,-0x140,-0x1c7)+_0x2bbfcc+_0x46de37(-0xf1,-0x15a,-0x1aa,-0x192)]&&(_0x5783a0=_0x1a27fb['cYvKk'](_0x5783a0+',\x20',_0x311878[_0x46de37(-0x1b9,-0x175,-0xdc,-0x100)+_0x2bbfcc+'\x20Prompt']));}}}else _0x1a27fb[_0x5eff0d(-0x19f,-0x1f6,-0x20e,-0x1df)](addLog,_0x1a27fb[_0x46de37(-0x159,-0x147,-0x191,-0x191)]),_0xa5a92f=_0xc27590;let {modifiedPrompt:_0x3fc4cc,insertions:_0x28f25e}=await _0x1a27fb[_0x46de37(-0x122,-0xf4,-0xab,-0x197)](prompt_replace,_0xa5a92f,_0x5783a0);if(_0x268fc5){if(_0x1a27fb[_0x46de37(-0x15c,-0x143,-0x17b,-0x16e)](_0x5eff0d(-0x2a0,-0x26f,-0x29d,-0x2f7),_0x1a27fb[_0x46de37(-0x1cb,-0x12d,-0xb3,-0x18a)]))_0x1a27fb[_0x5eff0d(-0x196,-0x21a,-0x1bd,-0x215)](_0x13286e,_0x1a27fb[_0x5eff0d(-0x22b,-0x18e,-0xfe,-0x127)]),_0x58e541=_0x1a27fb[_0x5eff0d(-0x1e1,-0x240,-0x28d,-0x28e)](_0x5a68e5,_0x129764,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x1a27fb[_0x46de37(-0x18e,-0x1b8,-0x19b,-0x12d)]}]}}});else for(let _0x52c0b8=-0x209c+-0x33*0x97+0x19*0x282;_0x52c0b8<=-0x1*0x25b1+-0x150a+0x3abf;_0x52c0b8++){if(_0x1a27fb[_0x46de37(-0xd3,-0x143,-0xb3,-0xc4)](_0x1a27fb[_0x46de37(-0x105,-0xa2,-0x48,-0xe3)],_0x1a27fb[_0x5eff0d(-0x142,-0x1aa,-0x1a7,-0x105)])){_0x1a27fb['WFqFD'](_0x565e42,_0x5907a9);return;}else _0x311878[_0x46de37(-0x11a,-0x175,-0x1a9,-0x1df)+_0x52c0b8+'\x20Prompt']&&(_0x3fc4cc=_0x1a27fb['zGeeQ'](_0x1a27fb[_0x46de37(-0x16f,-0x104,-0xb0,-0x19a)](_0x3fc4cc,',\x20'),_0x1a27fb[_0x5eff0d(-0x1a8,-0x1f6,-0x17e,-0x1d6)](prompt_replace_for_character,_0x311878[_0x5eff0d(-0x2d1,-0x258,-0x212,-0x276)+_0x52c0b8+'\x20Prompt'])));}}let _0x5063c6=await _0x1a27fb[_0x5eff0d(-0x284,-0x212,-0x1ff,-0x21e)](zhengmian,extension_settings[extensionName][_0x46de37(-0xcf,-0xe1,-0x78,-0x3c)][extension_settings[extensionName]['yusheid_sd']][_0x5eff0d(-0x23a,-0x232,-0x2d3,-0x2cb)+'t'],_0x3fc4cc,extension_settings[extensionName][_0x46de37(-0x13e,-0xe1,-0x94,-0x138)][extension_settings[extensionName][_0x5eff0d(-0x226,-0x27a,-0x290,-0x2cc)]][_0x46de37(-0x18d,-0x14f,-0x120,-0x168)+_0x5eff0d(-0x1d7,-0x1d4,-0x276,-0x1b4)],extension_settings[extensionName][_0x46de37(-0x14a,-0x158,-0x1d4,-0x141)],_0x28f25e),_0x515791=await _0x1a27fb[_0x5eff0d(-0x158,-0x1d7,-0x1be,-0x254)](fumian,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x5eff0d(-0x2d9,-0x27a,-0x1dc,-0x261)]]['negativePr'+_0x46de37(-0x155,-0xb0,-0x4c,-0x2f)],extension_settings[extensionName][_0x46de37(-0x1e8,-0x1a7,-0x22f,-0x23b)]);_0x1a27fb['gMojo'](addLog,'负面为:\x20'+_0x515791),extension_settings['sd'][_0x1a27fb['kCxaE']]=_0x1fe625,await _0x1a27fb[_0x46de37(-0x44,-0xac,-0x10e,-0xea)](saveSettingsDebounced);try{if(_0x1a27fb[_0x5eff0d(-0x28e,-0x2a9,-0x31c,-0x284)]===_0x1a27fb[_0x46de37(-0x208,-0x1af,-0x1ed,-0x1b3)])_0x233105=_0x1a27fb[_0x46de37(-0x1fc,-0x1bb,-0x1c8,-0x217)](_0x2904ef,_0x1d4cfd);else{if(_0x5ac403[_0x46de37(-0x199,-0xfd,-0x84,-0x149)]===_0x1a27fb[_0x5eff0d(-0x257,-0x214,-0x170,-0x2a3)]){if(_0x1a27fb['KVmJl'](_0x46de37(-0x123,-0xc9,-0x77,-0xfa),_0x1a27fb[_0x5eff0d(-0x258,-0x24a,-0x1ea,-0x1fb)])){const _0x123032={};_0x123032['auth']=_0x5ac403[_0x46de37(-0xc4,-0xe3,-0x8e,-0xb5)+_0x46de37(-0xfb,-0xec,-0x4d,-0x146)]?_0x5ac403[_0x5eff0d(-0x23c,-0x1c6,-0x1b1,-0x25a)+'sd_auth']:'',_0x123032['url']=_0x1fe625;const _0x2dbde6=await _0x1a27fb[_0x5eff0d(-0x24c,-0x240,-0x2b4,-0x2c5)](fetch,_0x1a27fb[_0x46de37(0x7,-0x99,-0xd2,-0xd0)],{'method':_0x1a27fb[_0x46de37(-0x195,-0x10d,-0x1b0,-0x76)],'body':JSON[_0x5eff0d(-0x1e1,-0x24f,-0x223,-0x27b)](_0x123032),'headers':_0x1a27fb[_0x46de37(-0x172,-0x113,-0x13a,-0xd3)](getRequestHeaders,window['token'])});if(!_0x2dbde6['ok']){if(_0x1a27fb['xgAmy']('AeQac',_0x1a27fb[_0x5eff0d(-0x2c1,-0x221,-0x1d0,-0x231)]))for(let _0x406c0d=0x61a+0x3*-0x9c7+0x173c;_0x1a27fb[_0x46de37(-0xe3,-0x136,-0x1c1,-0x95)](_0x406c0d,0x1d36+0x2*0x2cc+-0x2*0x1165);_0x406c0d++){_0x6e2e68[_0x5eff0d(-0x1c5,-0x258,-0x210,-0x2d7)+_0x406c0d+_0x46de37(-0x134,-0x15a,-0x130,-0x115)]&&(_0x155cc2=_0x1a27fb[_0x46de37(-0x220,-0x1cb,-0x163,-0x1f7)](_0x5ddc32,',\x20')+_0x1a27fb['SAhxH'](_0x7c4abd,_0x13272d[_0x5eff0d(-0x2f8,-0x258,-0x2e2,-0x244)+_0x406c0d+_0x46de37(-0x15b,-0x15a,-0xdb,-0xe6)]));}else{addLog(_0x46de37(-0x3d,-0x9d,-0x86,-0xf6)+_0x2dbde6[_0x5eff0d(-0x2b0,-0x265,-0x269,-0x205)]+'\x20'+_0x2dbde6[_0x46de37(-0x161,-0x18e,-0x16f,-0x154)]);throw new Error('获取模型失败:\x20'+_0x2dbde6[_0x46de37(-0x141,-0x182,-0x186,-0x140)]+'\x20'+_0x2dbde6[_0x5eff0d(-0x25f,-0x271,-0x2f7,-0x2ff)]);}}let _0x5f563b=await _0x2dbde6[_0x5eff0d(-0x231,-0x2a4,-0x2d1,-0x31c)]();console[_0x46de37(-0xa9,-0x11a,-0xf7,-0x1bc)](_0x1a27fb[_0x46de37(-0xbb,-0x13d,-0x1b3,-0x164)],_0x5f563b),console[_0x46de37(-0xb0,-0x11a,-0xdc,-0x163)](_0x1a27fb[_0x46de37(-0x59,-0xc1,-0x4b,-0x143)],_0x5ac403[_0x5eff0d(-0x29a,-0x29c,-0x1fb,-0x318)+_0x46de37(-0xbe,-0xb6,-0xa7,-0x7a)]);if(_0x1a27fb[_0x5eff0d(-0x2ea,-0x28c,-0x2cb,-0x29c)](_0x5f563b,_0x5ac403[_0x46de37(-0x243,-0x1b9,-0x157,-0x221)+'8_model'])){if(_0x1a27fb[_0x5eff0d(-0x273,-0x286,-0x2bf,-0x2df)](_0x1a27fb[_0x46de37(-0x231,-0x18f,-0x18c,-0x1f2)],_0x1a27fb[_0x46de37(-0x15a,-0x18f,-0x174,-0x130)])){_0x1a27fb[_0x5eff0d(-0x1c3,-0x183,-0xe1,-0x14f)](addLog,'正在设置模型为'+_0x5ac403['sd_cchatu_'+_0x5eff0d(-0x15a,-0x199,-0x20c,-0x1a3)]+_0x5eff0d(-0x1e5,-0x252,-0x1c8,-0x2c8)),toastr[_0x46de37(-0xa7,-0xd6,-0x73,-0x149)]('正在设置模型...为'+_0x5ac403[_0x46de37(-0x249,-0x1b9,-0x18a,-0x1f4)+_0x46de37(-0x5c,-0xb6,-0x114,-0xff)]);const _0x50bf02={};_0x50bf02[_0x5eff0d(-0x200,-0x1d8,-0x22b,-0x265)]=_0x5ac403[_0x46de37(-0xac,-0xe3,-0x7f,-0x94)+_0x46de37(-0x49,-0xec,-0xc5,-0x144)]?_0x5ac403[_0x5eff0d(-0x262,-0x1c6,-0x23f,-0x24a)+_0x46de37(-0x7c,-0xec,-0x144,-0xf5)]:'',_0x50bf02[_0x46de37(-0x121,-0xc3,-0x77,-0x113)]=_0x1fe625,_0x50bf02['model']=_0x5ac403[_0x46de37(-0x158,-0x1b9,-0x1e2,-0x250)+_0x5eff0d(-0x214,-0x199,-0x14d,-0x17a)];const _0xd7397f=await fetch('/api/sd/se'+'t-model',{'method':_0x1a27fb[_0x5eff0d(-0x170,-0x1f0,-0x160,-0x1c3)],'body':JSON[_0x46de37(-0x16a,-0x16c,-0x185,-0x1f7)](_0x50bf02),'headers':getRequestHeaders(window['token'])});if(!_0xd7397f['ok']){if(_0x1a27fb[_0x46de37(-0x14e,-0x10b,-0x157,-0x17f)](_0x1a27fb[_0x46de37(-0x1e7,-0x19f,-0x127,-0x13e)],_0x1a27fb[_0x5eff0d(-0x20a,-0x2ab,-0x214,-0x32b)])){_0x1a27fb['lMhyy'](addLog,_0x46de37(-0x165,-0x194,-0x104,-0xf1)+_0xd7397f[_0x46de37(-0x1c0,-0x182,-0x12b,-0xdf)]+'\x20'+_0xd7397f[_0x5eff0d(-0x275,-0x271,-0x217,-0x215)]);throw new Error('切换模型失败:\x20'+_0xd7397f[_0x5eff0d(-0x200,-0x265,-0x25f,-0x20f)]+'\x20'+_0xd7397f[_0x5eff0d(-0x20c,-0x271,-0x1fe,-0x29c)]);}else{_0x1a27fb[_0x46de37(-0x42,-0xa0,-0xc1,-0x47)](_0x4fa8c9,_0x1a27fb[_0x46de37(-0x111,-0x8a,-0x114,-0xdd)]);throw new _0x3e5c56(_0x1a27fb[_0x46de37(-0x189,-0x115,-0xbd,-0x174)]);}}toastr['info']('设置模型...为'+_0x5ac403[_0x5eff0d(-0x2bb,-0x29c,-0x255,-0x2ec)+'8_model']+'成功');}else throw new _0x573ab7(_0x46de37(-0x185,-0x1b2,-0x23c,-0x1ee)+_0x46de37(-0x130,-0x170,-0xeb,-0x19f));}}else _0x4d7da5[_0x46de37(-0x123,-0xfa,-0xa5,-0x7f)+'SDListener']&&(_0x20a842['removeList'+_0x46de37(-0xef,-0xff,-0x173,-0xef)](_0x45ca4b['GENERATE_I'+_0x5eff0d(-0x27c,-0x291,-0x247,-0x21f)+'ST'],_0x2e293c),_0x1e2073[_0x46de37(-0xf2,-0xfa,-0x195,-0xb3)+_0x46de37(-0x191,-0x1cf,-0x24c,-0x15f)]=![],_0x1a27fb[_0x5eff0d(-0x19f,-0x236,-0x254,-0x1e9)](_0x17c3ed,_0x46de37(-0xae,-0xb4,-0xc3,-0x19)+_0x5eff0d(-0x14b,-0x1be,-0x16c,-0x244)));}else{let _0x4b2994=await getSDMode(_0x1fe625);if(_0x1a27fb[_0x46de37(-0x125,-0x89,-0xb7,-0x26)](_0x4b2994,_0x5ac403[_0x46de37(-0x1b5,-0x1b9,-0x11d,-0x1e3)+'8_model'])){if(_0x1a27fb['bwwqg']===_0x1a27fb[_0x5eff0d(-0x1ce,-0x1ff,-0x27c,-0x21d)])_0x1a27fb[_0x5eff0d(-0x2e3,-0x2aa,-0x253,-0x34b)](addLog,_0x46de37(-0xb8,-0xf6,-0x103,-0xcb)+_0x5ac403[_0x46de37(-0x146,-0x1b9,-0x23e,-0x19b)+_0x5eff0d(-0x173,-0x199,-0x1a1,-0x187)]+_0x5eff0d(-0x2e7,-0x252,-0x1ef,-0x20a)),await _0x1a27fb['RTWhH'](setSDMode,_0x1fe625,_0x5ac403[_0x5eff0d(-0x28d,-0x29c,-0x20c,-0x2af)+_0x5eff0d(-0x1ee,-0x199,-0x139,-0x17d)]);else{const _0x3747cb=_0xd293e4['parse'](_0x232a1c);_0x121715=_0x3747cb[_0x46de37(-0x1b2,-0x157,-0x1d2,-0xee)][-0xc9c+-0x1*0x55d+-0x6b*-0x2b];}}}}}catch(_0x4da71d){if(_0x1a27fb['buETX']!==_0x1a27fb[_0x46de37(-0xe9,-0x11b,-0x1a3,-0x10b)])_0x1d7882(_0x1a27fb[_0x5eff0d(-0x1e0,-0x20e,-0x27d,-0x23b)]),_0x59da1c=_0x2c0e16;else{addLog(_0x46de37(-0x75,-0xd2,-0x49,-0x5b)+':\x20'+_0x4da71d['message']+('。请检查sdwebu'+_0x5eff0d(-0x273,-0x24e,-0x2a8,-0x257)+_0x5eff0d(-0x1cf,-0x182,-0x12d,-0x177))),taskQueue['completeTa'+'sk'](_0x232ad9,![]),currentTaskId=null;throw new Error('获取或者切换模型失败'+_0x5eff0d(-0x15f,-0x19b,-0x225,-0x134)+_0x5eff0d(-0x200,-0x24e,-0x296,-0x2a9)+_0x46de37(-0x104,-0x9f,-0xd7,-0x109));}}let _0x458886=-(-0x2671+-0x5d5*-0x4+0xf1e);const _0x3a0040=_0x5ac403['sd_cseed'];_0x1a27fb[_0x5eff0d(-0x1e6,-0x186,-0x221,-0x13e)](_0x3a0040,'')&&_0x1a27fb['RDVYA'](_0x3a0040,null)&&!_0x1a27fb[_0x46de37(-0xe2,-0x174,-0x138,-0x135)](isNaN,Number(_0x3a0040))&&_0x1a27fb[_0x46de37(-0x115,-0x185,-0x1df,-0x108)](_0x1a27fb[_0x46de37(-0x1da,-0x17d,-0xfd,-0x1cc)](Number,_0x3a0040),-0x1756+-0x1*0x593+-0x9a3*-0x3)&&(_0x1a27fb[_0x46de37(-0x1b5,-0x12c,-0xdb,-0x178)](_0x1a27fb[_0x46de37(-0x149,-0x11f,-0xf7,-0x7b)],_0x46de37(-0xea,-0x95,-0xd1,-0x8e))?_0x1a27fb['uFPbi'](_0x38aa8d,_0x5eff0d(-0x24e,-0x24c,-0x2df,-0x209)+'库'):_0x458886=_0x1a27fb['VsZfe'](Number,_0x3a0040));function _0x5eff0d(_0x31fec1,_0x1f3f3c,_0x4ce0b8,_0x4a0feb){return _0x10cd(_0x1f3f3c- -0x3d0,_0x4a0feb);}let _0x19e3a6={'prompt':_0x5063c6,'negative_prompt':_0x515791,'sampler_name':_0x5ac403['sd_cchatu_'+_0x46de37(-0x15d,-0xf9,-0x14e,-0xe1)+'ame'],'scheduler':_0x5ac403[_0x46de37(-0x219,-0x1b9,-0x1f6,-0x13e)+_0x46de37(-0x109,-0x119,-0xcb,-0x173)+'r'],'steps':_0x5ac403[_0x46de37(-0x8b,-0xdc,-0xfa,-0xb9)],'cfg_scale':_0x5ac403[_0x5eff0d(-0x283,-0x281,-0x25b,-0x2ad)],'width':_0x3bf1e7?_0x3bf1e7:_0x5ac403['sd_cwidth'],'height':_0x6a8b42?_0x6a8b42:_0x5ac403[_0x5eff0d(-0x1c3,-0x1f4,-0x230,-0x199)],'restore_faces':_0x1a27fb[_0x46de37(-0x17b,-0x19b,-0x14f,-0x182)](_0x5ac403[_0x5eff0d(-0x14c,-0x1c3,-0x23c,-0x21e)+'es'],_0x46de37(-0x195,-0xfe,-0x16c,-0x191)),'enable_hr':_0x1a27fb[_0x46de37(-0x229,-0x19b,-0x1b3,-0x234)](_0x5ac403[_0x46de37(-0x5c,-0xc5,-0x12b,-0xb1)+_0x5eff0d(-0x28a,-0x284,-0x2f5,-0x31a)],'true'),'hr_upscaler':_0x5ac403[_0x46de37(-0x159,-0x1b9,-0x1d2,-0x1ff)+_0x46de37(-0x19c,-0x177,-0x192,-0xdc)],'hr_scale':_0x5ac403[_0x5eff0d(-0x1a8,-0x20c,-0x17d,-0x219)+_0x46de37(-0xc8,-0x10e,-0x7d,-0x185)],'hr_additional_modules':[],'denoising_strength':_0x5ac403[_0x5eff0d(-0x22a,-0x262,-0x23d,-0x27e)+_0x46de37(-0x87,-0xaf,-0x44,-0xe2)+'th'],'hr_second_pass_steps':_0x5ac403[_0x5eff0d(-0x1e4,-0x1a8,-0x23f,-0x17a)+'steps'],'seed':_0x458886,'override_settings':{'CLIP_stop_at_last_layers':_0x1a27fb[_0x46de37(-0x159,-0x1b0,-0x1c7,-0x22c)](Number,_0x5ac403[_0x5eff0d(-0x290,-0x243,-0x1ec,-0x243)+_0x46de37(-0x146,-0x1c4,-0x236,-0x236)]),'sd_vae':_0x5ac403[_0x46de37(-0x1ee,-0x1b9,-0x172,-0x249)+_0x46de37(-0x1a1,-0x1a2,-0x214,-0x21c)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x1a27fb['lMhyy'](addLog,'restore_fa'+_0x46de37(-0x69,-0x106,-0x121,-0x16b)+_0x19e3a6[_0x46de37(-0x7b,-0xc6,-0xa4,-0xc6)+_0x5eff0d(-0x121,-0x1b7,-0x1f0,-0x13c)]),_0x1a27fb[_0x5eff0d(-0x182,-0x1db,-0x1d5,-0x27e)](addLog,_0x46de37(-0x71,-0xc4,-0xb4,-0x151)+_0x5eff0d(-0x17d,-0x1ca,-0x1a5,-0x1ff)+_0x19e3a6[_0x5eff0d(-0x241,-0x1f2,-0x27b,-0x1a8)]);_0x5ac403[_0x46de37(-0x210,-0x1b3,-0x23c,-0x23b)+_0x46de37(-0x158,-0x123,-0x125,-0x13b)]==_0x5eff0d(-0x27e,-0x1e1,-0x148,-0x16b)&&(_0x1a27fb[_0x5eff0d(-0x1e4,-0x231,-0x224,-0x2cf)](_0x1a27fb['kUXyN'],_0x46de37(-0x118,-0x193,-0x10a,-0x168))?(_0x1a27fb[_0x46de37(-0x1b6,-0x1bb,-0x18e,-0x1e7)](addLog,_0x1a27fb[_0x5eff0d(-0x1ac,-0x18e,-0x139,-0x220)]),_0x19e3a6=_0x1a27fb['wmfEO'](deepMerge,_0x19e3a6,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x1a27fb[_0x5eff0d(-0x2b4,-0x29b,-0x1fa,-0x282)]}]}}})):(!_0x4bca9c[_0x5eff0d(-0x14f,-0x1dd,-0x205,-0x157)+_0x46de37(-0x1ff,-0x1cf,-0x1a9,-0x1b3)]&&(_0x3f6d24['initialize'+_0x46de37(-0x13d,-0x1cf,-0x135,-0x17b)]=!![],_0x5c1423()),_0x17bd51()));const _0xeaff09=_0x46de37(-0x10e,-0xe6,-0x161,-0x4a)+_0x46de37(-0x111,-0x140,-0x128,-0x108)+'正面提示\x20(Prom'+_0x5eff0d(-0x1fa,-0x256,-0x235,-0x2ae)+_0x5063c6+(_0x5eff0d(-0x336,-0x29a,-0x279,-0x2b4)+'(Negative\x20'+_0x5eff0d(-0x206,-0x175,-0x146,-0x1a8)+'\x20')+_0x515791+(_0x46de37(-0x105,-0x124,-0x8e,-0xc1)+_0x5eff0d(-0x189,-0x17d,-0x1cd,-0x1a3)+'**\x20')+_0x19e3a6['sampler_na'+'me']+('\x0a-\x20**步数\x20(S'+_0x5eff0d(-0x1e5,-0x1cc,-0x270,-0x14d))+_0x19e3a6[_0x46de37(-0x96,-0xc8,-0xa2,-0x6a)]+(_0x46de37(-0x1bf,-0x16e,-0x1dd,-0x1f8)+_0x46de37(-0x157,-0xd5,-0x91,-0xb7))+_0x19e3a6[_0x46de37(-0x23,-0x96,-0x84,-0x118)]+(_0x46de37(-0x6c,-0xbc,-0x110,-0x122)+_0x46de37(-0x65,-0xcb,-0x170,-0xbf))+_0x19e3a6['width']+'x'+_0x19e3a6[_0x5eff0d(-0x20d,-0x2a1,-0x321,-0x33d)]+(_0x5eff0d(-0x1ca,-0x25b,-0x2aa,-0x1d8)+_0x46de37(-0x1bc,-0x1d0,-0x22b,-0x23a))+(_0x1a27fb[_0x5eff0d(-0x19a,-0x1f7,-0x1f2,-0x1fa)](_0x19e3a6[_0x46de37(-0x122,-0x14b,-0x1c6,-0x19d)],-(-0x20e4+-0xa4c+0x2b31))?_0x1a27fb[_0x46de37(-0x77,-0xe4,-0x11a,-0x93)]:_0x19e3a6[_0x46de37(-0x17e,-0x14b,-0x145,-0xf2)])+(_0x5eff0d(-0x133,-0x174,-0xe9,-0x19d)+_0x5eff0d(-0x153,-0x1c0,-0x1bb,-0x1b0))+_0x5ac403[_0x46de37(-0x173,-0x1b9,-0x138,-0x173)+_0x46de37(-0xda,-0xb6,-0xf4,-0xa5)]+('\x0a-\x20**VAE:*'+'*\x20')+_0x19e3a6['override_s'+'ettings'][_0x46de37(-0xa1,-0x100,-0xd3,-0x107)]+('\x0a-\x20**Clip\x20'+'Skip:**\x20')+_0x19e3a6['override_s'+_0x5eff0d(-0x245,-0x228,-0x2c6,-0x289)][_0x46de37(-0x14a,-0xbb,-0x64,-0xf1)+_0x46de37(-0x74,-0x8b,-0x6,-0xb)+'yers']+(_0x5eff0d(-0x28e,-0x224,-0x28b,-0x1a6)+_0x46de37(-0x12f,-0xba,-0x12d,-0x14a)+_0x5eff0d(-0x2a9,-0x234,-0x27d,-0x22e))+_0x19e3a6[_0x5eff0d(-0x25b,-0x1f2,-0x1e1,-0x1e9)]+('\x0a-\x20**放大倍率\x20'+'(Upscale\x20F'+_0x46de37(-0x14b,-0x13b,-0x16d,-0x9b))+_0x19e3a6[_0x46de37(-0xfb,-0xdf,-0x11b,-0x154)]+(_0x5eff0d(-0x16e,-0x1e8,-0x27f,-0x260)+_0x46de37(-0xb1,-0xcf,-0x43,-0x8b)+'\x20Strength)'+':**\x20')+_0x19e3a6[_0x5eff0d(-0x341,-0x2b4,-0x243,-0x33d)+'strength']+(_0x46de37(-0x1ce,-0x16d,-0x144,-0x134)+_0x46de37(-0x13d,-0xbe,-0x41,-0xfe)+'aces):**\x20')+_0x19e3a6[_0x46de37(-0x3a,-0xc6,-0x169,-0x116)+'ces']+(_0x5eff0d(-0x2ab,-0x25e,-0x2b1,-0x1e3)+_0x46de37(-0x194,-0x156,-0x15c,-0x1a5))+(_0x5ac403[_0x46de37(-0x171,-0x1b3,-0x1a7,-0x1da)+_0x46de37(-0xcd,-0x123,-0xa1,-0x111)]==_0x1a27fb[_0x46de37(-0x7b,-0x108,-0xc8,-0x13d)])+_0x46de37(-0x194,-0x125,-0x1c4,-0xa5);addLog(_0xeaff09),_0x1a27fb[_0x46de37(-0x162,-0xf3,-0x104,-0xa1)](addLog,'sdwebui生图参'+'数为'+JSON['stringify'](_0x19e3a6)),console['log'](_0x1a27fb[_0x46de37(-0xe5,-0x128,-0x179,-0x159)],_0x19e3a6);let _0x458b3c=!![];while(_0x458b3c){_0x1a27fb[_0x5eff0d(-0x29a,-0x22f,-0x264,-0x2ac)](_0x1a27fb[_0x46de37(-0x12c,-0xd0,-0x6b,-0x90)],_0x1a27fb['xSsdo'])?_0x1591c8[_0x46de37(-0x1b3,-0x175,-0x16f,-0x1f6)+_0x5b9160+_0x5eff0d(-0x263,-0x23d,-0x1fb,-0x1e0)]&&(_0x531cd0=_0x1a27fb[_0x5eff0d(-0x2d8,-0x24b,-0x26f,-0x25d)](_0x1a27fb['PZNOJ'](_0x5dfd80,',\x20'),_0x29bd61['Character\x20'+_0x57042a+_0x5eff0d(-0x1f3,-0x23d,-0x234,-0x297)])):window[_0x46de37(-0x137,-0x171,-0x13f,-0x206)]?_0x458b3c=![]:await _0x1a27fb[_0x5eff0d(-0x275,-0x1d6,-0x225,-0x223)](sleep,0x16d5+0x1327+0x2*-0x130a);};try{if(_0x1a27fb[_0x5eff0d(-0x17a,-0x186,-0x113,-0x1c2)](_0x1a27fb[_0x5eff0d(-0x2e8,-0x25f,-0x2e5,-0x227)],_0x1a27fb[_0x46de37(-0x14d,-0x17c,-0x1d2,-0x104)]))_0x120172=![];else{window['xiancheng']=!![],taskQueue[_0x46de37(-0x1c6,-0x12a,-0xf8,-0xe8)+'us'](_0x232ad9,_0x1a27fb['fnrTG']);if(_0x1a27fb[_0x5eff0d(-0x2ba,-0x286,-0x251,-0x2fa)](_0x5ac403[_0x46de37(-0x9c,-0xfd,-0xec,-0x70)],_0x1a27fb[_0x46de37(-0xae,-0x131,-0x1b3,-0xae)])){if(_0x1a27fb[_0x46de37(-0xc2,-0xa3,-0x94,-0xf1)](_0x1a27fb[_0x5eff0d(-0x1d5,-0x26c,-0x29b,-0x22e)],_0x1a27fb[_0x46de37(-0x112,-0x189,-0x1f0,-0x13f)])){_0x1a27fb[_0x5eff0d(-0x1d2,-0x260,-0x24b,-0x275)](_0x2a6b0b,_0x1a27fb[_0x46de37(-0x135,-0x195,-0x171,-0x1b0)]),_0x37acc9=_0x1a27fb['BqnHm'](_0x1865a0,_0x2b9ffd),_0x54cbc3=_0x513395[_0x1a27fb[_0x46de37(-0x1d1,-0x199,-0x21c,-0x198)]];for(let _0x1f7028=0x4*-0x8fa+0x4eb*0x1+0x2*0xf7f;_0x1f7028<=-0x7dd+-0x755+0xf36;_0x1f7028++){_0x5bd506[_0x46de37(-0xe4,-0x175,-0x10d,-0x159)+_0x1f7028+_0x46de37(-0x1cc,-0x15a,-0x1dc,-0xd4)]&&(_0x35170b=_0x1a27fb['UQVxc'](_0x2e786f+',\x20',_0x50a4be[_0x5eff0d(-0x2ac,-0x258,-0x275,-0x1d3)+_0x1f7028+_0x46de37(-0x1e8,-0x15a,-0x1e3,-0xec)]));}}else{if(!taskQueue[_0x46de37(-0xfb,-0x117,-0x8e,-0xb8)+_0x5eff0d(-0x221,-0x294,-0x28d,-0x229)](_0x232ad9)){if(_0x1a27fb[_0x46de37(-0x155,-0x12c,-0xf0,-0xc3)](_0x1a27fb[_0x5eff0d(-0x210,-0x2a6,-0x2dc,-0x2d6)],_0x1a27fb[_0x5eff0d(-0x24d,-0x2a6,-0x24f,-0x2c0)])){_0x1a27fb[_0x46de37(-0x1b3,-0x153,-0xd1,-0x1d1)](addLog,'任务已被用户取消。'),eventSource[_0x5eff0d(-0x195,-0x1bd,-0x1bd,-0x190)](_0x5eff0d(-0x1ce,-0x23e,-0x2d2,-0x262)+_0x46de37(-0xcd,-0xbd,-0xc9,-0xf1));throw new Error(_0x1a27fb[_0x46de37(-0x1ac,-0x115,-0x80,-0x197)]);}else _0x2d6ec1[_0x5eff0d(-0x1dc,-0x258,-0x2f5,-0x276)+_0x35c9dc+'\x20Prompt']&&(_0x531b58=_0x1a27fb[_0x46de37(-0x1e8,-0x1cb,-0x144,-0x22f)](_0x6a9637,',\x20')+_0x1a27fb['BqnHm'](_0x1cbebf,_0x3a3b1b[_0x5eff0d(-0x1da,-0x258,-0x2cb,-0x25d)+_0x16c6de+_0x5eff0d(-0x1cf,-0x23d,-0x1f9,-0x245)]));}_0x19e3a6['url']=_0x1fe625,console['log'](_0x1a27fb[_0x5eff0d(-0x270,-0x266,-0x301,-0x27c)],_0x5ac403[_0x5eff0d(-0x230,-0x1c6,-0x24a,-0x209)+'sd_auth']),_0x19e3a6[_0x46de37(-0xd4,-0xf5,-0x17c,-0x115)]=_0x5ac403['st_chatu8_'+_0x5eff0d(-0x1c4,-0x1cf,-0x175,-0x183)]?_0x5ac403[_0x46de37(-0x11c,-0xe3,-0x115,-0xe8)+'sd_auth']:'';const _0x3d5698=await fetch(_0x1a27fb[_0x5eff0d(-0x226,-0x1bb,-0x17b,-0x1b6)],{'method':_0x1a27fb[_0x5eff0d(-0x1f4,-0x1f0,-0x27b,-0x246)],'headers':_0x1a27fb[_0x46de37(-0x83,-0xa5,-0x6d,-0x72)](getRequestHeaders,window[_0x5eff0d(-0x15e,-0x1ed,-0x185,-0x247)]),'body':JSON[_0x5eff0d(-0x2ee,-0x24f,-0x2d4,-0x286)](_0x19e3a6)});if(!_0x3d5698['ok']){const _0x405baf=await _0x3d5698[_0x5eff0d(-0x27a,-0x2a4,-0x321,-0x2a8)]();_0x1a27fb[_0x46de37(-0x16b,-0x18d,-0x1da,-0x14d)](addLog,_0x5eff0d(-0x11e,-0x1a3,-0x1ae,-0x16a)+_0x46de37(-0x98,-0xe5,-0x178,-0xf9)+_0x3d5698[_0x46de37(-0x19a,-0x182,-0x115,-0x211)]+'。响应内容:\x20'+_0x405baf),console[_0x46de37(-0xad,-0x11a,-0x11d,-0x1b6)](_0x1a27fb['YwFjU'],_0x405baf);throw new Error(_0x5eff0d(-0x200,-0x22b,-0x219,-0x230)+_0x3d5698[_0x46de37(-0xe4,-0x182,-0x1e9,-0x104)]+_0x5eff0d(-0x1e2,-0x27d,-0x268,-0x286)+_0x405baf);}const _0x35fe77=await _0x3d5698['text']();let _0x1c8419='';try{const _0x233cb7=JSON['parse'](_0x35fe77);_0x1c8419=_0x233cb7[_0x46de37(-0x167,-0x157,-0x177,-0x1c0)][0x2*0xc82+-0x1*0x1c7b+0x377];}catch(_0x134c7b){_0x1a27fb['nQmPE'](addLog,_0x1a27fb[_0x46de37(-0x115,-0x12b,-0x13f,-0x114)]),_0x1c8419=_0x35fe77;}const _0x4519e5=_0x1a27fb[_0x5eff0d(-0x233,-0x1a5,-0x14a,-0x106)](_0x1a27fb['XXEkW'],_0x1c8419);return _0x1a27fb[_0x46de37(-0x188,-0x121,-0x1a6,-0xf8)](addLog,_0x1a27fb['qSGmP']),taskQueue[_0x46de37(-0x9b,-0x120,-0xea,-0x18e)+'sk'](_0x232ad9,!![]),currentTaskId=null,{'image':_0x4519e5,'change':_0x1a27fb['pPebX'](_0x2e656b,'')};}}else{if(!taskQueue[_0x5eff0d(-0x191,-0x1fa,-0x1bd,-0x17a)+'eue'](_0x232ad9)){_0x1a27fb[_0x5eff0d(-0x21f,-0x270,-0x303,-0x2c2)](addLog,_0x1a27fb[_0x46de37(-0x124,-0x8a,-0x56,-0xe5)]);throw new Error(_0x1a27fb['kSshJ']);}const _0xe46d1b=new URL(_0x1fe625+(_0x46de37(-0x42,-0x97,-0xcd,-0xfa)+_0x5eff0d(-0x225,-0x26d,-0x22c,-0x273)));window['xiancheng']=![];const _0x533d22=await _0x1a27fb[_0x5eff0d(-0x232,-0x28e,-0x21c,-0x323)](fetch,_0xe46d1b,{'method':_0x1a27fb[_0x46de37(-0x84,-0x10d,-0x98,-0x131)],'body':JSON['stringify'](_0x19e3a6),'headers':{'Content-Type':_0x1a27fb[_0x46de37(-0x131,-0x19c,-0x20b,-0x201)],'Authorization':getsdAuth()}});window['xiancheng']=!![];if(!_0x533d22['ok']){const _0x2c933d=await _0x533d22['text']();addLog('SD\x20API\x20返回错'+'误。状态码:\x20'+_0x533d22[_0x46de37(-0x1c8,-0x182,-0x11a,-0x1ee)]+'。响应内容:\x20'+_0x2c933d),console['log'](_0x46de37(-0xdc,-0x17e,-0x212,-0xdf),_0x2c933d);throw new Error(_0x5eff0d(-0x243,-0x22b,-0x2c3,-0x2c9)+_0x533d22[_0x46de37(-0xe3,-0x182,-0x176,-0xf6)]+_0x46de37(-0x1fd,-0x19a,-0xfb,-0x17f)+_0x2c933d);}const _0x48cf4d=await _0x533d22['json']();if(!_0x48cf4d[_0x5eff0d(-0x23a,-0x23a,-0x200,-0x1d3)]||_0x48cf4d[_0x46de37(-0x166,-0x157,-0xbd,-0x1c6)]['length']===-0x5*-0x50b+0x12ee+-0x2c25)throw new Error(_0x1a27fb[_0x46de37(-0x9c,-0x93,-0xe7,-0x4d)]);const _0x3e6a1e=_0x48cf4d[_0x46de37(-0x1e3,-0x157,-0x11f,-0xf5)][0x1e7f+-0x1ee1+0x62],_0x14ea1a=_0x1a27fb['XXEkW']+_0x3e6a1e;return _0x1a27fb[_0x5eff0d(-0x17b,-0x213,-0x267,-0x281)](addLog,_0x1a27fb[_0x46de37(-0x202,-0x179,-0xde,-0x193)]),taskQueue['completeTa'+'sk'](_0x232ad9,!![]),currentTaskId=null,{'image':_0x14ea1a,'change':_0x1a27fb[_0x46de37(-0x12f,-0x154,-0x1c0,-0x137)](_0x235b13,'')};}}}catch(_0x55e947){if(_0x5eff0d(-0x291,-0x211,-0x263,-0x253)!==_0x1a27fb[_0x5eff0d(-0x303,-0x26e,-0x1d0,-0x1ce)]){const _0x5c440d=_0x562c8b?function(){if(_0x3b7da5){const _0x2f50e0=_0x51877e['apply'](_0x2b046d,arguments);return _0x4af8b2=null,_0x2f50e0;}}:function(){};return _0x4aa9dd=![],_0x5c440d;}else{window[_0x46de37(-0xd6,-0x171,-0x138,-0x1b5)]=!![];if(_0x1a27fb['gBMhH'](_0x55e947[_0x5eff0d(-0x150,-0x190,-0x15b,-0x22f)],_0x1a27fb[_0x46de37(-0x120,-0x115,-0x128,-0x151)])){}else{if(_0x1a27fb[_0x5eff0d(-0x15a,-0x1d3,-0x157,-0x240)](_0x5eff0d(-0x2e2,-0x249,-0x1aa,-0x28a),_0x1a27fb[_0x5eff0d(-0x1b2,-0x189,-0xec,-0x1d8)])){const _0x4d3982=_0x2ada99[_0x5eff0d(-0x1e9,-0x205,-0x198,-0x18b)](_0x5a12a2,arguments);return _0x58b0b9=null,_0x4d3982;}else taskQueue[_0x46de37(-0x193,-0x120,-0x1a7,-0x85)+'sk'](_0x232ad9,![]);}currentTaskId=null,_0x1a27fb[_0x5eff0d(-0x15e,-0x1db,-0x146,-0x161)](addLog,'sd请求生图错误:\x20'+_0x55e947['message']),console[_0x5eff0d(-0x193,-0x17e,-0xdd,-0x136)](_0x5eff0d(-0x1d7,-0x1ba,-0x253,-0x1da)+_0x5eff0d(-0x243,-0x1cd,-0x136,-0x1bb)+_0x5eff0d(-0x21a,-0x259,-0x1c2,-0x2d1),_0x55e947);throw _0x55e947;}}}async function sdGenerate(_0x90e464){const _0x44fdc2={'nVXgg':function(_0x49abb3,_0x57ed15){return _0x49abb3(_0x57ed15);},'sEJcU':'标准模式:\x20使用请求'+_0x4b1863(0x1c4,0x1f1,0x19d,0x13b),'duBGK':_0x285929(0x4d5,0x39b,0x432,0x432),'lDXEh':function(_0x289e3a,_0x8402ff){return _0x289e3a!==_0x8402ff;},'yPCpX':'yzFMY','zaCyS':_0x4b1863(0x25e,0x2a9,0x259,0x229),'GKxdQ':_0x285929(0x463,0x560,0x4dc,0x549),'kPqVL':_0x285929(0x453,0x472,0x4e8,0x518),'vAkQt':_0x4b1863(0x2c9,0x21f,0x243,0x296),'ycydZ':function(_0xc0008e,_0x864211){return _0xc0008e(_0x864211);},'MKiGG':function(_0x3c43ff,_0x416602){return _0x3c43ff(_0x416602);},'XNLrF':'Error\x20gene'+_0x4b1863(0x270,0x1b4,0x1e4,0x210)+'image:','QObOp':function(_0xe8164c,_0x211be0){return _0xe8164c(_0x211be0);}},{id:_0x5043d4,prompt:_0x8e1969,width:_0x4c2920,height:_0x1deef0,change:_0x188b1a}=_0x90e464;_0x44fdc2['nVXgg'](addLog,_0x4b1863(0x232,0x172,0x1e0,0x25c)+_0x285929(0x5a8,0x4f7,0x505,0x48d)+_0x5043d4+(')\x20-\x20Prompt'+':\x20')+_0x8e1969+(_0x188b1a?_0x4b1863(0x116,0xf5,0x175,0x11a)+'\x20'+_0x188b1a:''));function _0x4b1863(_0x584b7e,_0x46e0ca,_0x27afc8,_0x252634){return _0x10cd(_0x27afc8- -0x6,_0x46e0ca);}if(_0x188b1a&&_0x188b1a['includes'](_0x44fdc2['duBGK'])){if(_0x44fdc2[_0x285929(0x440,0x410,0x492,0x4f6)](_0x44fdc2[_0x4b1863(0x198,0x168,0x1e6,0x1b6)],_0x44fdc2['zaCyS'])){_0x44fdc2[_0x4b1863(0x17e,0x127,0x12a,0x160)](bananaGenerate,_0x90e464);return;}else _0x4cdf15=!![];}function _0x285929(_0x5b4806,_0x22c7b1,_0x20f7eb,_0x504d8e){return _0x10cd(_0x20f7eb-0x307,_0x504d8e);}try{if(_0x44fdc2[_0x4b1863(0x16a,0x1c2,0x1de,0x1d0)]===_0x4b1863(0x10a,0x154,0x11a,0x19a))_0x44fdc2[_0x4b1863(0x182,0x17d,0x12a,0x16e)](_0x1ca086,_0x44fdc2[_0x285929(0x524,0x5f4,0x556,0x4e6)]),_0x3d5936=_0x586b93;else{const {image:_0x4b6df2,change:_0x24b4e2}=await _0x44fdc2[_0x285929(0x445,0x4d5,0x437,0x3cd)](generateSDImage,{'prompt':_0x8e1969,'width':_0x4c2920,'height':_0x1deef0,'change':_0x188b1a});if(extension_settings[extensionName]['cache']!='0'){const _0x127123={};_0x127123[_0x4b1863(0x165,0x1dc,0x1ff,0x1b4)]=_0x24b4e2,await setItemImg(_0x8e1969,_0x4b6df2,_0x127123),_0x44fdc2[_0x4b1863(0xa1,0x13f,0x12a,0xde)](addLog,'图像已存入数据库\x20f'+'or\x20prompt:'+'\x20'+_0x8e1969);}else{if(_0x44fdc2[_0x285929(0x4e3,0x4d0,0x4d7,0x4c2)]===_0x44fdc2[_0x4b1863(0xd5,0x1fc,0x166,0x206)]){if(_0x294af2){const _0x35f97d=_0x53630b['apply'](_0x36b64c,arguments);return _0x49167d=null,_0x35f97d;}}else _0x44fdc2[_0x285929(0x47b,0x49a,0x434,0x4a0)](addLog,'缓存设置为不存入数据'+'库');}const _0x458f6a={};_0x458f6a['id']=_0x5043d4,_0x458f6a[_0x4b1863(0x1a0,0x1d9,0x235,0x1e2)]=!![],_0x458f6a[_0x285929(0x4d7,0x518,0x521,0x51d)]=_0x4b6df2,_0x458f6a[_0x4b1863(0x1af,0x251,0x216,0x208)]=_0x8e1969,_0x458f6a[_0x4b1863(0x295,0x1bd,0x1ff,0x160)]=_0x24b4e2,eventSource[_0x4b1863(0x1dd,0x1a2,0x20d,0x18b)](EventType['GENERATE_I'+_0x285929(0x3a7,0x39b,0x43a,0x3e6)+'NSE'],_0x458f6a),_0x44fdc2[_0x4b1863(0x102,0x10f,0x127,0xc9)](addLog,'发送SD生图成功响应'+'\x20(ID:\x20'+_0x5043d4+')');}}catch(_0x191985){const _0x4ae8f9=_0x285929(0x4f8,0x48f,0x46c,0x40b)+_0x4b1863(0x259,0x206,0x21d,0x28e)+_0x5043d4+_0x4b1863(0x283,0x1f0,0x253,0x2f2)+_0x191985[_0x285929(0x51e,0x5b5,0x547,0x543)];_0x44fdc2['MKiGG'](addLog,_0x285929(0x4cf,0x4a6,0x4a7,0x50e)+_0x4ae8f9),console[_0x285929(0x5af,0x56f,0x559,0x518)](_0x44fdc2['XNLrF'],_0x191985);const _0x256075={};_0x256075['id']=_0x5043d4,_0x256075[_0x285929(0x5a8,0x598,0x542,0x4a6)]=![],_0x256075[_0x285929(0x58e,0x572,0x559,0x59d)]=_0x191985[_0x4b1863(0x2d9,0x1ee,0x23a,0x258)],_0x256075[_0x285929(0x4d2,0x50b,0x523,0x57b)]=_0x8e1969,eventSource[_0x4b1863(0x267,0x21b,0x20d,0x1bf)](EventType['GENERATE_I'+_0x285929(0x3a8,0x4cf,0x43a,0x497)+_0x285929(0x419,0x4dc,0x464,0x474)],_0x256075),_0x44fdc2['QObOp'](addLog,_0x285929(0x3f5,0x3b7,0x426,0x482)+'\x20(ID:\x20'+_0x5043d4+')');}}function _0x10cd(_0x4a78dc,_0x3925bd){_0x4a78dc=_0x4a78dc-(0x441*-0x1+-0x1*-0x796+-0x239);const _0x531b58=_0x2aca();let _0x6a9637=_0x531b58[_0x4a78dc];if(_0x10cd['nNpKjZ']===undefined){var _0x1cbebf=function(_0x1e99bf){const _0x94bb91='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x404166='',_0x4e0968='',_0x4ec1b1=_0x404166+_0x1cbebf;for(let _0x4ce6e8=-0x26e7*-0x1+0x2ae*0x1+0x851*-0x5,_0x4e1cfe,_0x5adf99,_0x4d2362=0x23e7+0x143e*-0x1+-0xfa9*0x1;_0x5adf99=_0x1e99bf['charAt'](_0x4d2362++);~_0x5adf99&&(_0x4e1cfe=_0x4ce6e8%(0xc*0x2db+-0x1523+-0x1*0xd1d)?_0x4e1cfe*(0x2a*0xa9+-0x3d4+0x2*-0xbd3)+_0x5adf99:_0x5adf99,_0x4ce6e8++%(-0x18ca+0x114e+0x60*0x14))?_0x404166+=_0x4ec1b1['charCodeAt'](_0x4d2362+(0x1d40+0x5c1+-0x22f7))-(-0x10d0+0x1fa*-0x2+0xa67*0x2)!==-0xe3*0x13+-0x18d9*-0x1+-0x800?String['fromCharCode'](0x159e+0x4*-0x785+0x975&_0x4e1cfe>>(-(0xa53+-0x3d*-0x58+-0x1f49)*_0x4ce6e8&0x1e67+0x30d*0x9+-0x39d6)):_0x4ce6e8:0x2*-0x1a3+0x1f09*0x1+-0x1*0x1bc3){_0x5adf99=_0x94bb91['indexOf'](_0x5adf99);}for(let _0x37dc92=0x67*0xb+-0x1*0xff+-0x2*0x1b7,_0x4974aa=_0x404166['length'];_0x37dc92<_0x4974aa;_0x37dc92++){_0x4e0968+='%'+('00'+_0x404166['charCodeAt'](_0x37dc92)['toString'](-0x153+0x112f*0x1+0x6*-0x2a2))['slice'](-(-0x2*-0x34d+0xa*0x2e7+-0x239e));}return decodeURIComponent(_0x4e0968);};_0x10cd['kvDqCW']=_0x1cbebf,_0x10cd['mfaWif']={},_0x10cd['nNpKjZ']=!![];}const _0x3a3b1b=_0x531b58[-0x11eb+0x17*-0x4f+-0x4*-0x641],_0x16c6de=_0x4a78dc+_0x3a3b1b,_0x58dc46=_0x10cd['mfaWif'][_0x16c6de];if(!_0x58dc46){const _0x17c335=function(_0x248c36){this['PYqDrM']=_0x248c36,this['mTZktG']=[0x3ae+0xe27*0x1+-0x11d4,0x1*0x1d77+-0x29*-0x29+-0x2408,-0x382*-0x2+-0x5*0x75d+0x1dcd],this['cczgPg']=function(){return'newState';},this['StKIYQ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['oKOydM']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x17c335['prototype']['GJUxDa']=function(){const _0xb6204a=new RegExp(this['StKIYQ']+this['oKOydM']),_0xdc5c42=_0xb6204a['test'](this['cczgPg']['toString']())?--this['mTZktG'][0x10b7*-0x2+-0x9ad+0x2b1c]:--this['mTZktG'][0x25d4+-0x20b5+0x17*-0x39];return this['RKNOCD'](_0xdc5c42);},_0x17c335['prototype']['RKNOCD']=function(_0x24e6fb){if(!Boolean(~_0x24e6fb))return _0x24e6fb;return this['EiLHDd'](this['PYqDrM']);},_0x17c335['prototype']['EiLHDd']=function(_0x1b7191){for(let _0x5a6bb0=-0xef7+-0x18d1+0x27c8,_0xcb273d=this['mTZktG']['length'];_0x5a6bb0<_0xcb273d;_0x5a6bb0++){this['mTZktG']['push'](Math['round'](Math['random']())),_0xcb273d=this['mTZktG']['length'];}return _0x1b7191(this['mTZktG'][-0x1d9+0x4ff+-0x326]);},new _0x17c335(_0x10cd)['GJUxDa'](),_0x6a9637=_0x10cd['kvDqCW'](_0x6a9637),_0x10cd['mfaWif'][_0x16c6de]=_0x6a9637;}else _0x6a9637=_0x58dc46;return _0x6a9637;}function initializeSDListener(){const _0x26766b={'tJlfi':function(_0x560421,_0x3476e9){return _0x560421(_0x3476e9);},'ROrOe':_0x3fd7a5(0x496,0x46a,0x54d,0x4ed)+_0x19d6d2(0x442,0x4be,0x4d8,0x4cf)};function _0x3fd7a5(_0x26f614,_0x395487,_0x1ddd84,_0x4912fe){return _0x10cd(_0x4912fe-0x2b4,_0x1ddd84);}function _0x19d6d2(_0x5e4846,_0x5281b6,_0x53ef04,_0x16a5bf){return _0x10cd(_0x16a5bf-0x316,_0x53ef04);}eventSource['on'](EventType[_0x3fd7a5(0x404,0x470,0x451,0x442)+_0x3fd7a5(0x3e4,0x35c,0x3b6,0x3f3)+'ST'],sdGenerate),_0x26766b['tJlfi'](addLog,_0x26766b['ROrOe']);}export async function replaceWithSd(){const _0x3641f6={'ExEYP':_0x1560ec(0xfb,0xbe,0x171,0xe9)+'+$','AQnEV':function(_0x1f1b40){return _0x1f1b40();},'OVhpd':function(_0x9e7d8b,_0x3127d3){return _0x9e7d8b===_0x3127d3;},'lvmqv':'EEzTP','KpxNa':function(_0x54aaef,_0x17d4b5){return _0x54aaef(_0x17d4b5);},'ApdMX':'SD\x20生图事件监听器'+_0x1560ec(0xd7,0x129,0x71,0xe3)};function _0x1560ec(_0x15784c,_0x5137da,_0x1ba11d,_0xc460d0){return _0x10cd(_0x15784c- -0x13b,_0xc460d0);}function _0x1af29f(_0x3dba57,_0x353b83,_0x4804e3,_0x1840be){return _0x10cd(_0x353b83- -0x242,_0x3dba57);}if(extension_settings[extensionName]['mode']=='sd')!window['initialize'+'SDListener']&&(window[_0x1560ec(0xb8,0xd9,0x108,0xee)+_0x1af29f(-0x151,-0x124,-0xbc,-0xc8)]=!![],_0x3641f6[_0x1560ec(0x108,0x141,0x187,0x104)](initializeSDListener)),_0x3641f6[_0x1af29f(-0x72,0x1,0x2,-0x42)](initializeImageProcessing);else{if(window['initialize'+_0x1af29f(-0x120,-0x124,-0x1b2,-0xae)]){if(_0x3641f6[_0x1af29f(-0x6a,-0x8e,-0xd3,-0xbd)]('KLGyq',_0x3641f6[_0x1af29f(-0x39,-0x9b,-0xf9,-0xef)]))return _0x4e0401[_0x1560ec(0x78,0x82,0x10f,-0x7)]()[_0x1af29f(-0x106,-0x99,0xa,-0x9f)](NIOhqm[_0x1af29f(-0x3a,-0xe,0x17,-0x98)])[_0x1af29f(-0x7,-0x8f,-0x12f,-0xaf)]()['constructo'+'r'](_0x4015d4)[_0x1af29f(-0xc,-0x99,-0x68,-0x103)](_0x1af29f(0x82,-0xc,-0x5d,-0xa1)+'+$');else eventSource[_0x1560ec(0xc0,0x77,0x112,0x41)+_0x1560ec(0xb3,0xe6,0xba,0xdc)](EventType[_0x1560ec(0x53,0x36,-0x41,0x42)+'MAGE_REQUE'+'ST'],sdGenerate),window[_0x1560ec(0xb8,0xc3,0x114,0xa5)+'SDListener']=![],_0x3641f6[_0x1af29f(-0x36,-0xd5,-0x134,-0x7a)](addLog,_0x3641f6[_0x1af29f(0x38,-0xa,0x8f,-0xa4)]);}}}