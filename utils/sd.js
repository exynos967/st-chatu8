(function(_0x14798b,_0x5733ba){function _0x33692e(_0x135e27,_0x2f021f,_0x46ed82,_0xfc23e0){return _0x488d(_0x46ed82- -0x281,_0xfc23e0);}const _0x46cc64=_0x14798b();function _0x266789(_0x424db7,_0xa7f1ee,_0x47c968,_0x922dab){return _0x488d(_0xa7f1ee-0x32,_0x424db7);}while(!![]){try{const _0x5e0287=-parseInt(_0x33692e(-0xcf,-0x119,-0x85,-0xcf))/(0x1*-0x770+0x207c+0x190b*-0x1)+-parseInt(_0x33692e(-0x104,0x8,-0xa6,-0x81))/(0xfb*-0xb+-0x4*-0x705+-0x1149)+-parseInt(_0x33692e(-0xdf,-0xab,-0x8e,-0x59))/(0xb53+-0x44a+0x1d*-0x3e)+-parseInt(_0x266789(0x126,0x134,0xb4,0x18d))/(-0x161*0x1+-0x1f9c+-0x47*-0x77)+-parseInt(_0x266789(0x1e2,0x1b1,0x248,0x1e3))/(-0x357+0x1084*0x2+-0x1dac)*(parseInt(_0x33692e(-0xb8,-0xc6,-0x52,-0x110))/(-0xceb*-0x2+0x1*-0x503+0xf*-0x163))+-parseInt(_0x266789(0x1d3,0x1c2,0x1dd,0x254))/(0xedc+0x4e2+-0x13b7)+parseInt(_0x266789(0x1f7,0x13c,0xb5,0x116))/(0x1f8c+-0x696*-0x1+-0x1*0x261a);if(_0x5e0287===_0x5733ba)break;else _0x46cc64['push'](_0x46cc64['shift']());}catch(_0x4e0ffd){_0x46cc64['push'](_0x46cc64['shift']());}}}(_0xb630,-0x21aa1+-0x7e94+0x43f96));const _0x6e04fb=(function(){const _0x52409e={};_0x52409e[_0x52d881(-0x17,0x34,0x1a,0xc0)]='blMIH';function _0x52d881(_0x331e36,_0x9c09ac,_0x3b8986,_0x530540){return _0x488d(_0x3b8986- -0x18e,_0x331e36);}const _0x2bd6cd=_0x52409e;let _0x27bf94=!![];return function(_0x3aec24,_0x1a4602){const _0x3b0597={'VWzhA':function(_0x56290e){return _0x56290e();}},_0x38a8c9=_0x27bf94?function(){function _0x3a8b66(_0x54b1c6,_0x47eaaa,_0x461c75,_0x466e2e){return _0x488d(_0x47eaaa-0x1dc,_0x54b1c6);}function _0x1a42b6(_0x22ab3d,_0x40d183,_0x12722f,_0x11ef95){return _0x488d(_0x22ab3d- -0x1b8,_0x11ef95);}if(_0x1a4602){if(_0x3a8b66(0x401,0x347,0x34e,0x302)===_0x2bd6cd[_0x3a8b66(0x38a,0x384,0x3b8,0x358)])!_0x1c12c0[_0x3a8b66(0x370,0x312,0x2c9,0x366)+_0x3a8b66(0x332,0x3d3,0x42e,0x3d2)]&&(_0x2801c2[_0x1a42b6(-0x82,-0x112,-0x10d,-0xb7)+_0x3a8b66(0x459,0x3d3,0x422,0x41d)]=!![],_0x3b0597[_0x3a8b66(0x4a4,0x3e9,0x38b,0x34b)](_0x2ee476)),_0x3b0597[_0x3a8b66(0x35d,0x3e9,0x433,0x348)](_0x1b67cb);else{const _0x3091f5=_0x1a4602['apply'](_0x3aec24,arguments);return _0x1a4602=null,_0x3091f5;}}}:function(){};return _0x27bf94=![],_0x38a8c9;};}()),_0x10d685=_0x6e04fb(this,function(){const _0x1c579b={};function _0x319573(_0x2099c3,_0x33c738,_0x400895,_0x463459){return _0x488d(_0x400895-0x3d3,_0x463459);}_0x1c579b[_0x3ef45c(-0x17f,-0x6b,-0xb6,-0x120)]=_0x319573(0x682,0x651,0x5e3,0x5bb)+'+$';const _0x16184c=_0x1c579b;function _0x3ef45c(_0x29e3cb,_0x2825a4,_0xb2b982,_0x4ac255){return _0x488d(_0x4ac255- -0x244,_0xb2b982);}return _0x10d685[_0x3ef45c(-0x53,0x0,-0x147,-0x95)]()[_0x3ef45c(-0x2f,-0x51,-0xf4,-0xce)](_0x16184c[_0x319573(0x519,0x57a,0x4f7,0x4cc)])[_0x319573(0x573,0x63b,0x582,0x632)]()[_0x319573(0x599,0x5ae,0x550,0x569)+'r'](_0x10d685)['search'](_0x16184c[_0x3ef45c(-0x1bf,-0x97,-0xf5,-0x120)]);});_0x10d685();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,convertImageToJpeg}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';function _0x488d(_0x267117,_0x486479){_0x267117=_0x267117-(0x1f2+-0x147a+0x1371);const _0x2e990d=_0xb630();let _0x447e94=_0x2e990d[_0x267117];if(_0x488d['fREHCl']===undefined){var _0x3c9e1e=function(_0x2a40cb){const _0x14ac1f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x132d79='',_0x4f48fa='',_0x13a4d0=_0x132d79+_0x3c9e1e;for(let _0x1b3acc=-0x1dbe+0x2*0xa30+0xb*0xda,_0x22c5e9,_0x38b717,_0x38cbf1=0x1d73+0x2*-0x1243+-0x1*-0x713;_0x38b717=_0x2a40cb['charAt'](_0x38cbf1++);~_0x38b717&&(_0x22c5e9=_0x1b3acc%(0xf1+0xa4d+-0xb3a)?_0x22c5e9*(0x53*0x11+0xb64+-0x10a7)+_0x38b717:_0x38b717,_0x1b3acc++%(-0x12d*0x13+-0x1f1f+-0x172*-0x25))?_0x132d79+=_0x13a4d0['charCodeAt'](_0x38cbf1+(-0x1f19+-0x156*0x6+0x2727))-(0x23c+-0x4*0x902+0x21d6)!==0x12fb+0x26a3*-0x1+-0x44*-0x4a?String['fromCharCode'](-0x1bcf+0x1*-0x8ed+0x25bb&_0x22c5e9>>(-(-0x1*0x1a53+-0x2*-0x1eb+0x1*0x167f)*_0x1b3acc&-0x26f*0xd+-0x39*-0x2+0x1f37)):_0x1b3acc:0xdfd*-0x2+0x219b*-0x1+-0xf*-0x41b){_0x38b717=_0x14ac1f['indexOf'](_0x38b717);}for(let _0xf0ff5f=-0x19b8*-0x1+0x1cba+-0x3672,_0x395106=_0x132d79['length'];_0xf0ff5f<_0x395106;_0xf0ff5f++){_0x4f48fa+='%'+('00'+_0x132d79['charCodeAt'](_0xf0ff5f)['toString'](-0x46f*0x6+-0x1b7f*0x1+0x3629))['slice'](-(-0x76a*0x5+0x1*-0x7db+0x1*0x2cef));}return decodeURIComponent(_0x4f48fa);};_0x488d['QciwvY']=_0x3c9e1e,_0x488d['ANsMFp']={},_0x488d['fREHCl']=!![];}const _0x2c5b40=_0x2e990d[-0x2020+0x54b+0x1ad5],_0x48567e=_0x267117+_0x2c5b40,_0x4c9140=_0x488d['ANsMFp'][_0x48567e];if(!_0x4c9140){const _0x4d0923=function(_0x526fb9){this['kVQisI']=_0x526fb9,this['LeixTT']=[-0x26c8+-0x25b7*0x1+-0x60*-0xcc,0x2368+-0x1e*-0x47+-0x182*0x1d,-0x2045+0x1d17+-0x1*-0x32e],this['aCdmbY']=function(){return'newState';},this['QRJpRQ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['PLJgpR']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4d0923['prototype']['VTSezK']=function(){const _0x42a50a=new RegExp(this['QRJpRQ']+this['PLJgpR']),_0x1afe00=_0x42a50a['test'](this['aCdmbY']['toString']())?--this['LeixTT'][-0x6d7+0x6d9*0x3+-0xdb3]:--this['LeixTT'][0x1*0xbde+-0xa*0x2cf+0x15a*0xc];return this['vEdWgk'](_0x1afe00);},_0x4d0923['prototype']['vEdWgk']=function(_0x2c7376){if(!Boolean(~_0x2c7376))return _0x2c7376;return this['uDoLNM'](this['kVQisI']);},_0x4d0923['prototype']['uDoLNM']=function(_0x3dadd3){for(let _0x31a286=0x154b+0xe4+0x1*-0x162f,_0xd676ff=this['LeixTT']['length'];_0x31a286<_0xd676ff;_0x31a286++){this['LeixTT']['push'](Math['round'](Math['random']())),_0xd676ff=this['LeixTT']['length'];}return _0x3dadd3(this['LeixTT'][-0x2f*-0x8a+-0x24af*0x1+0x53*0x23]);},new _0x4d0923(_0x488d)['VTSezK'](),_0x447e94=_0x488d['QciwvY'](_0x447e94),_0x488d['ANsMFp'][_0x48567e]=_0x447e94;}else _0x447e94=_0x4c9140;return _0x447e94;}import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';function getDirectHeaders(_0x449880=null,_0xee31c1=null){const _0x305840={};_0x305840[_0x55fb3c(-0x1b7,-0x17e,-0x24f,-0x16d)]=_0x55fb3c(-0x18b,-0x248,-0xf0,-0x1a8)+_0x2f5eaa(0x698,0x62b,0x575,0x5e7)+_0x2f5eaa(0x51f,0x588,0x47f,0x4dd)+_0x2f5eaa(0x52a,0x3d6,0x3e4,0x489)+_0x2f5eaa(0x4ff,0x4b0,0x4ae,0x536)+_0x55fb3c(-0x132,-0x16c,-0xe6,-0x86)+_0x2f5eaa(0x480,0x4be,0x470,0x4b1)+'ike\x20Gecko)'+'\x20Chrome/12'+_0x2f5eaa(0x3fc,0x453,0x432,0x4aa)+_0x2f5eaa(0x4b5,0x4d6,0x4af,0x528)+'6',_0x305840[_0x2f5eaa(0x607,0x50a,0x5fa,0x5bc)]=_0x55fb3c(-0x1ba,-0x118,-0x227,-0x24b),_0x305840[_0x2f5eaa(0x59d,0x675,0x556,0x5c9)]=_0x2f5eaa(0x58a,0x58c,0x641,0x5c8)+_0x55fb3c(-0x1d5,-0x167,-0x166,-0x1e4)+'0.8',_0x305840[_0x2f5eaa(0x585,0x684,0x550,0x5d6)]=_0x2f5eaa(0x53b,0x5f1,0x610,0x56c),_0x305840['zYsTK']=_0x55fb3c(-0xf0,-0x4b,-0x178,-0xd9)+_0x55fb3c(-0x71,-0x48,-0x71,-0x36);const _0x5b2884=_0x305840,_0x44fe17={};_0x44fe17[_0x2f5eaa(0x538,0x526,0x46d,0x495)]=_0x5b2884['vvkkP'],_0x44fe17['Accept']=_0x5b2884[_0x55fb3c(-0xb1,-0x69,-0xfc,-0xd8)],_0x44fe17[_0x2f5eaa(0x471,0x548,0x4d1,0x51c)+_0x2f5eaa(0x429,0x4f1,0x484,0x4a4)]=_0x5b2884[_0x2f5eaa(0x5d7,0x64d,0x557,0x5c9)],_0x44fe17[_0x55fb3c(-0xe5,-0x1a2,-0xa3,-0x14f)+_0x2f5eaa(0x4be,0x406,0x4d3,0x4a7)]=_0x5b2884[_0x55fb3c(-0x97,-0x14a,-0x3,-0x11)],_0x44fe17['Pragma']=_0x55fb3c(-0x101,-0xf2,-0x19f,-0xad);const _0x153c80=_0x44fe17;_0x449880&&(_0x153c80[_0x2f5eaa(0x582,0x50f,0x4c2,0x519)+'pe']=_0x449880);_0xee31c1&&(_0x153c80[_0x5b2884[_0x2f5eaa(0x55a,0x600,0x4d9,0x565)]]=_0xee31c1);function _0x55fb3c(_0x63964f,_0x3b7b5d,_0x26bbb2,_0x3edf7a){return _0x488d(_0x63964f- -0x2cf,_0x3edf7a);}function _0x2f5eaa(_0x9ee382,_0x40636e,_0x2d7bbb,_0x181b84){return _0x488d(_0x181b84-0x39e,_0x2d7bbb);}return _0x153c80;}let currentTaskId=null;async function generateSDImage({prompt:_0xd667b,width:_0x4b6dcc,height:_0x241b84,change:_0x376c5b}){const _0x3bd69c={'oONUK':function(_0x283680,_0xb2d7fa){return _0x283680(_0xb2d7fa);},'etNoc':'Error\x20gene'+'rating\x20SD\x20'+_0x1da9ad(-0x279,-0x174,-0x240,-0x1cc),'vfuqj':_0x7a1438(-0x139,-0x141,-0x147,-0x125),'qKxcI':_0x1da9ad(-0x283,-0x12b,-0x19d,-0x1dc)+_0x1da9ad(-0x2d6,-0x1b1,-0x2d9,-0x236)+_0x7a1438(-0x7f,-0x109,-0xdc,-0x1a0),'DSXpu':function(_0x2cd4d7,_0x1acd3e){return _0x2cd4d7(_0x1acd3e);},'aIyvS':function(_0x2111c4,_0x156a3d){return _0x2111c4(_0x156a3d);},'QEECA':'SD\x20生图事件监听器'+_0x7a1438(-0x89,-0xf2,-0x6c,-0x9f),'vcbum':'标准模式:\x20使用请求'+_0x1da9ad(-0x18e,-0xb7,-0x18c,-0x138),'PoZZQ':function(_0x37a81d,_0x5ba97c){return _0x37a81d(_0x5ba97c);},'aqKTE':_0x1da9ad(-0x1e2,-0x1b3,-0x23e,-0x1d9)+_0x7a1438(0xa7,-0x2,-0x91,0xae),'ZusaZ':function(_0x7f1965,_0x9df868){return _0x7f1965<=_0x9df868;},'zUrEx':function(_0x1b15c4,_0x5e0d87){return _0x1b15c4+_0x5e0d87;},'VqGXx':function(_0x4f1eef,_0x301f17){return _0x4f1eef(_0x301f17);},'SGEFz':_0x7a1438(0x7,0x1,-0x27,0x4a)+'为true','kzMyF':_0x7a1438(-0xd6,-0x2e,0x58,0x60)+'+$','atumX':function(_0x3bda1a,_0x189b86){return _0x3bda1a+_0x189b86;},'pZkqK':function(_0x1a0378,_0x14e18a){return _0x1a0378+_0x14e18a;},'ZScoh':function(_0x3499f3){return _0x3499f3();},'xmjGQ':function(_0x2d5de6,_0x492708){return _0x2d5de6>_0x492708;},'qiwjL':function(_0x328542,_0x368e53){return _0x328542(_0x368e53);},'wbcqL':function(_0x3b3aa4,_0x13a370){return _0x3b3aa4(_0x13a370);},'fHAdD':function(_0xd64a8a,_0x5ae719){return _0xd64a8a(_0x5ae719);},'GYPPZ':function(_0x2714c4,_0x526c34){return _0x2714c4!==_0x526c34;},'DPCRp':function(_0x23ce75,_0x478aa5){return _0x23ce75(_0x478aa5);},'wwGiA':_0x7a1438(-0x107,-0x95,-0x7e,-0xc3)+_0x1da9ad(-0x1ff,-0x28b,-0x186,-0x1ec),'uDWCG':function(_0x38c710,_0x3c9d51){return _0x38c710(_0x3c9d51);},'XdwSx':function(_0x28efa1,_0x3a9c40){return _0x28efa1===_0x3a9c40;},'Jhhts':'IOUzU','OiAdE':function(_0x239ddf,_0x22dd7c){return _0x239ddf+_0x22dd7c;},'iOVmx':function(_0x4bc898,_0x8afa85,_0x451ab1){return _0x4bc898(_0x8afa85,_0x451ab1);},'LRflv':_0x7a1438(-0x20,-0x6f,-0x107,-0x69),'bMelw':function(_0x49d6e2,_0x337f8d){return _0x49d6e2<=_0x337f8d;},'rfDuk':'incam','mjkRu':function(_0xd8af88,_0x20b1c7){return _0xd8af88+_0x20b1c7;},'dcBmL':function(_0x4d9a35,_0x204a5b){return _0x4d9a35(_0x204a5b);},'ZYKSb':function(_0x11e8be,_0x1ab739){return _0x11e8be===_0x1ab739;},'HxkrV':'BeNCT','GIdRH':_0x7a1438(-0x10b,-0x73,0x3,-0x10c),'LrgQa':function(_0x127d1c,_0x3a0845){return _0x127d1c===_0x3a0845;},'iWqnc':_0x7a1438(0x28,0x0,-0x3e,0x5),'afnMf':_0x7a1438(-0xea,-0x4a,0x21,-0x65)+_0x1da9ad(-0xe6,-0x14f,-0x84,-0x122),'uoSKf':function(_0x1eb4d5,_0xe3bd04){return _0x1eb4d5(_0xe3bd04);},'TVHxH':function(_0xeca1f7,_0x4d5ed5){return _0xeca1f7(_0x4d5ed5);},'OJNbn':_0x1da9ad(-0x26e,-0x1d8,-0x2bf,-0x203)+'settingss.'+_0x7a1438(-0x98,-0x11e,-0x1b2,-0x1a8)+_0x7a1438(-0xcd,-0x76,-0x111,-0x7a),'arFOy':function(_0x16be53,_0x218ef1,_0x4b1b53){return _0x16be53(_0x218ef1,_0x4b1b53);},'ioyhF':'/api/sd/se'+_0x1da9ad(-0x12b,-0x17b,-0xa4,-0x122),'KbmbN':function(_0x2674e1,_0x5e25f0){return _0x2674e1===_0x5e25f0;},'xpqRE':_0x7a1438(-0x131,-0x8d,0xe,-0x42),'YNmWi':_0x7a1438(0xd3,0x24,0xe,0x1e),'ZUbLm':function(_0x375671,_0xddbc17){return _0x375671(_0xddbc17);},'wMqPS':function(_0x3d604f,_0xabf8cf){return _0x3d604f!=_0xabf8cf;},'AosXz':function(_0x961a62,_0x22461d){return _0x961a62!==_0x22461d;},'GvuDO':_0x7a1438(-0x188,-0x124,-0x1be,-0x99),'owncS':function(_0x55c637,_0x5e0125){return _0x55c637(_0x5e0125);},'YAuWV':function(_0x40a384,_0x352e36,_0x524217){return _0x40a384(_0x352e36,_0x524217);},'yxhsf':function(_0x5c84ac,_0x596736){return _0x5c84ac!==_0x596736;},'oCupx':_0x7a1438(0xa,-0xb3,-0x8c,-0xc),'tWnQH':function(_0x2ab2cc,_0x64ba47){return _0x2ab2cc!==_0x64ba47;},'lIBHp':function(_0x6bd295,_0xe9e917){return _0x6bd295!==_0xe9e917;},'mkDXS':function(_0x4fdb2a,_0x51063a){return _0x4fdb2a>=_0x51063a;},'ZSHQb':function(_0x21033d,_0x1e226c){return _0x21033d(_0x1e226c);},'WIEmt':function(_0x2ff017,_0x23f949){return _0x2ff017(_0x23f949);},'FoKkA':function(_0x5bada4,_0x518145){return _0x5bada4==_0x518145;},'yKupQ':_0x7a1438(0x1,-0xb8,-0xbb,-0xfe),'JtMKI':function(_0x35d70d,_0x13d021){return _0x35d70d(_0x13d021);},'oXgul':function(_0x2964d2,_0x168bc6){return _0x2964d2(_0x168bc6);},'ecrFt':function(_0x149193,_0x2effce){return _0x149193==_0x2effce;},'jeWjg':function(_0x6bed14,_0x5a47ee){return _0x6bed14===_0x5a47ee;},'hrrjG':_0x7a1438(-0x116,-0x11f,-0xd6,-0x1c5),'WrVJs':_0x7a1438(0x44,0x21,0x89,0x46)+'face\x20为开启','DRQWi':function(_0x109800,_0x56b7de,_0x11ba42){return _0x109800(_0x56b7de,_0x11ba42);},'GucuK':_0x7a1438(-0xbe,-0x11c,-0x16c,-0x87)+_0x7a1438(0x43,-0x41,0x5d,0xf),'cAUeS':_0x1da9ad(-0x11e,-0x20f,-0x118,-0x15a),'bWKpH':function(_0x4d2948,_0x1daad0){return _0x4d2948(_0x1daad0);},'IFCua':_0x7a1438(0x41,-0x65,-0x10c,-0xb9),'Dlcer':'OgDta','nWaLU':function(_0x5eb3f7,_0x57a28f){return _0x5eb3f7===_0x57a28f;},'pCXHv':_0x7a1438(-0x1c5,-0x119,-0x183,-0x13d),'thPcm':_0x1da9ad(-0x101,-0x15f,-0x11c,-0x16d),'fujUn':_0x1da9ad(-0x241,-0x1b6,-0x138,-0x1da),'WACbe':_0x1da9ad(-0x1c3,-0x228,-0x12d,-0x198)+_0x7a1438(-0x1a4,-0x117,-0xc1,-0x167),'yTrRf':_0x1da9ad(-0x1f3,-0x23f,-0x22b,-0x1b2)+_0x7a1438(-0xdb,-0x61,-0xe7,-0xde)+_0x1da9ad(-0x14a,-0x169,-0xc3,-0xdc),'LgRLT':function(_0xb09207,_0x453125,_0x209013){return _0xb09207(_0x453125,_0x209013);},'zxhnd':_0x1da9ad(-0x1f4,-0xa4,-0xc9,-0x142)+_0x1da9ad(-0x172,-0x149,-0xff,-0x166),'pMJwU':_0x1da9ad(-0x124,-0x1af,-0x236,-0x180),'AsSKi':function(_0x1afbdf,_0x20b847){return _0x1afbdf(_0x20b847);},'dcKrh':function(_0x15eb81,_0x471a72){return _0x15eb81(_0x471a72);},'qoArL':_0x7a1438(-0xaf,-0x13f,-0xe4,-0x13e),'jUICC':_0x7a1438(-0xd7,-0x98,-0xd2,-0x67),'xgSZE':_0x7a1438(-0xa3,-0x140,-0x1cb,-0x1b2),'OaTtM':function(_0x4b7637,_0x5977d2){return _0x4b7637+_0x5977d2;},'QiorV':_0x7a1438(-0x10f,-0x12e,-0x8d,-0x177)+_0x7a1438(-0x13b,-0x9c,0x13,-0xff)+'4,','nTvEh':function(_0x4f3e42,_0x2edc07){return _0x4f3e42(_0x2edc07);},'bxunn':_0x1da9ad(-0xf7,-0x148,-0x205,-0x170)+_0x1da9ad(-0x1fb,-0x136,-0x119,-0x1a1)+'L。','nLUTu':function(_0x28ae84,_0x4718a2){return _0x28ae84||_0x4718a2;},'xaCKi':_0x1da9ad(-0x287,-0x1ed,-0x19d,-0x209),'cxpZA':_0x7a1438(-0x2f,-0x39,0x65,-0xc3),'XsKdl':function(_0x332102,_0x132d10){return _0x332102(_0x132d10);},'tkcca':function(_0x559f2e,_0x152e24){return _0x559f2e+_0x152e24;},'ddblA':function(_0xafda96,_0x2b6184,_0xf24f07){return _0xafda96(_0x2b6184,_0xf24f07);},'NAWWG':function(_0x1c3b3f){return _0x1c3b3f();},'MBCAE':function(_0xd671c0,_0x3aa1c8,_0x23fc7d){return _0xd671c0(_0x3aa1c8,_0x23fc7d);},'ysueQ':_0x1da9ad(-0x22d,-0x183,-0x17e,-0x1fb),'QWajB':function(_0x51e93b,_0x26fcea){return _0x51e93b+_0x26fcea;},'jhNFH':function(_0x1d6eed,_0x59b75b){return _0x1d6eed===_0x59b75b;},'kckWF':function(_0x2cef37,_0x56ba02){return _0x2cef37(_0x56ba02);},'RPbOp':function(_0xa7f2fe,_0x166ad6){return _0xa7f2fe||_0x166ad6;},'OnHLE':_0x1da9ad(-0x1e2,-0xe5,-0x200,-0x195),'lprMV':_0x7a1438(0x1d,-0x83,-0xf6,-0x63),'xfZgb':_0x7a1438(-0x18f,-0xf0,-0xdc,-0x12e),'Rtgtn':_0x7a1438(-0x102,-0xd9,-0x12f,-0x145),'LprGq':_0x7a1438(-0xb5,-0x11d,-0x9d,-0x160)+_0x7a1438(-0x5f,-0x53,0x1a,-0xb6)+_0x1da9ad(-0x14e,-0xb0,-0x178,-0x127)};_0x3bd69c['ZScoh'](clearLog);const _0x25bec6=taskQueue[_0x1da9ad(-0xc5,-0x11a,-0x210,-0x165)]({'name':(_0xd667b||'')[_0x1da9ad(-0x47,-0x66,-0x10b,-0xf2)](-0x195b+0x1b9f+-0x2*0x122,-0x3d2*-0x2+-0x74*-0x46+-0x273e)+(_0xd667b&&_0x3bd69c[_0x1da9ad(-0xca,-0x11f,-0x129,-0x177)](_0xd667b[_0x1da9ad(-0x2e2,-0x184,-0x2b5,-0x240)],-0xa*-0x1b8+0x1bfa+-0x2d0c)?_0x1da9ad(-0x1d7,-0x29c,-0x225,-0x220):''),'type':TaskType['SD'],'prompt':_0xd667b});currentTaskId=_0x25bec6;let _0x2a7e8e=_0x376c5b;_0xd667b=_0x3bd69c['qiwjL'](processCharacterPrompt,_0xd667b),_0x376c5b=_0x3bd69c[_0x7a1438(-0x9,-0x9b,-0x11c,-0xaf)](processCharacterPrompt,_0x376c5b),_0xd667b=await _0x3bd69c[_0x7a1438(-0x9d,0x14,-0xe,0x83)](stripChineseAnnotations,_0xd667b),_0x376c5b=await _0x3bd69c[_0x1da9ad(-0x195,-0x1e2,-0x20f,-0x205)](stripChineseAnnotations,_0x376c5b);function _0x1da9ad(_0x5df004,_0x5c7607,_0x297c39,_0x5a344c){return _0x488d(_0x5a344c- -0x336,_0x297c39);}const _0x3949ec=extension_settings[extensionName][_0x7a1438(-0xa6,-0x133,-0x101,-0x1dc)][_0x1da9ad(-0x139,-0xb7,-0xc3,-0x160)](),_0x42b5d9=extension_settings[extensionName];addLog('正在通过sdwebu'+_0x1da9ad(-0x1a4,-0x95,-0x198,-0x136)+'端为'+_0x42b5d9[_0x1da9ad(-0xe9,-0x19c,-0x5b,-0x113)]+_0x1da9ad(-0x2a,-0x135,-0x5a,-0xdb)+_0x42b5d9[_0x7a1438(-0xec,-0x11e,-0xad,-0x19a)+_0x7a1438(-0xf5,-0x76,-0xa4,-0xd8)]);const _0x49eabf=_0x376c5b&&_0x3bd69c[_0x7a1438(-0xd4,-0x14b,-0xfc,-0x1df)](_0x376c5b['trim'](),'')?_0x376c5b:_0xd667b;addLog(_0x7a1438(-0x81,-0xfb,-0x5a,-0x7a)+_0x49eabf);let _0x4499cd=![];_0x49eabf[_0x7a1438(-0x91,0x13,-0x9c,0x97)](_0x1da9ad(-0x220,-0x28d,-0x1b1,-0x1d9)+_0x1da9ad(-0x60,-0x16d,-0x178,-0xfa))&&(_0x4499cd=!![]);_0x3bd69c[_0x7a1438(-0x34,-0x12,-0x87,0x25)](addLog,'是否启用分角色模式\x20'+_0x1da9ad(-0x169,-0x13c,-0xba,-0x100)+_0x7a1438(-0x10,-0x9e,0x8,-0x11f)+_0x4499cd);let _0x2ae416={},_0x34f12f='',_0x5e60e8='';if(_0x4499cd){addLog(_0x3bd69c[_0x7a1438(-0x11d,-0x13a,-0xff,-0xb4)]),_0x2ae416=_0x3bd69c[_0x1da9ad(-0x1a7,-0x23c,-0x187,-0x1c1)](parsePromptStringWithCoordinates,_0x49eabf),_0x34f12f=_0x2ae416[_0x3bd69c[_0x1da9ad(-0x175,-0x18b,-0x1e9,-0x12f)]];for(let _0x2e3136=0x3f*-0x8e+-0x18e3+-0x1deb*-0x2;_0x2e3136<=0x1e5a+0x1f35*-0x1+0x1*0xdf;_0x2e3136++){if(_0x2ae416['Character\x20'+_0x2e3136+_0x1da9ad(-0x150,-0x256,-0x18c,-0x1bc)]){if(_0x3bd69c['XdwSx'](_0x3bd69c[_0x1da9ad(-0x1b2,-0x1ff,-0x1a4,-0x23b)],_0x3bd69c[_0x1da9ad(-0x2df,-0x212,-0x1f2,-0x23b)]))_0x5e60e8=_0x3bd69c[_0x7a1438(-0xd6,-0xd0,-0x188,-0x33)](_0x3bd69c['pZkqK'](_0x5e60e8,',\x20'),_0x2ae416[_0x7a1438(-0x17e,-0xec,-0xbc,-0xaf)+_0x2e3136+_0x7a1438(-0x119,-0xc4,-0x116,-0xe7)]);else{const _0x2e4b3a=_0x1da9ad(-0xc3,-0x179,-0x14b,-0xfb)+_0x1da9ad(-0x174,-0x225,-0x20b,-0x1dd)+_0x4f2dc3+'):\x20'+_0x326884[_0x7a1438(-0xa8,-0x79,-0x10b,-0x99)];_0x3bd69c[_0x7a1438(-0x205,-0x14d,-0x204,-0xe9)](_0x165d09,_0x7a1438(-0xc2,-0x14e,-0x1aa,-0x194)+_0x2e4b3a),_0x3e7c0a[_0x1da9ad(-0x24f,-0x2a6,-0x1ef,-0x20a)](_0x3bd69c['etNoc'],_0x1a1e50);const _0x1ac8d7={};_0x1ac8d7['id']=_0xd8ad82,_0x1ac8d7[_0x7a1438(0x5,-0x28,-0x96,0x56)]=![],_0x1ac8d7[_0x1da9ad(-0x1eb,-0x162,-0x276,-0x20a)]=_0x5f279d[_0x7a1438(-0xa8,-0x79,-0x61,-0xbc)],_0x1ac8d7[_0x7a1438(-0xb3,-0x4e,-0xaa,0xa)]=_0x54dcb7,_0x410924[_0x7a1438(-0xe1,-0x26,0x88,-0xc3)](_0x517ead[_0x1da9ad(-0x1cb,-0xea,-0x1ba,-0x117)+_0x1da9ad(-0x12d,-0x110,-0x17f,-0xea)+'NSE'],_0x1ac8d7),_0x3bd69c['oONUK'](_0x3cc059,_0x7a1438(-0x56,0x4,-0x4e,0xf)+_0x7a1438(-0x41,-0xb,0x8c,0xa2)+_0x908262+')');}}}}else addLog(_0x3bd69c['vcbum']),_0x34f12f=_0x49eabf;let {modifiedPrompt:_0x40abb0,insertions:_0x26d864}=await _0x3bd69c[_0x7a1438(0xa0,0x1b,-0x15,-0x51)](prompt_replace,_0x34f12f,_0x5e60e8);if(_0x4499cd){if(_0x3bd69c[_0x7a1438(-0x46,-0x5e,-0x59,-0x77)]!==_0x3bd69c[_0x7a1438(0x5d,-0x5e,-0x16,-0x85)])_0x3e5f8b[_0x1da9ad(-0x1a4,-0x6e,-0x11d,-0x104)+'sk'](_0x39dafb,![]);else for(let _0x46f2f8=0x1*0x247c+0x3*0x125+-0x27ea;_0x3bd69c['bMelw'](_0x46f2f8,-0xa21+0x247a+0x8c7*-0x3);_0x46f2f8++){if(_0x2ae416[_0x7a1438(-0x65,-0xec,-0x173,-0x91)+_0x46f2f8+'\x20Prompt']){if(_0x7a1438(-0xa7,-0x2c,-0x30,-0x81)===_0x3bd69c[_0x7a1438(-0xb6,-0x94,-0xce,-0x103)]){_0x3bd69c[_0x1da9ad(-0x2b8,-0x1bf,-0x195,-0x245)](_0x510e48,_0x1da9ad(-0x11f,-0x131,-0x218,-0x1da)),_0x558d4e[_0x1da9ad(-0xe4,-0x102,-0xf7,-0x11e)](_0x7a1438(-0xa4,-0xa0,-0xb0,-0x55)+_0x1da9ad(-0x246,-0x173,-0x1ae,-0x20f));throw new _0x57e484(_0x3bd69c[_0x7a1438(-0x15a,-0xdc,-0xd5,-0x96)]);}else _0x40abb0=_0x3bd69c['zUrEx'](_0x3bd69c['mjkRu'](_0x40abb0,',\x20'),_0x3bd69c['dcBmL'](prompt_replace_for_character,_0x2ae416[_0x1da9ad(-0x20a,-0x1a3,-0x224,-0x1e4)+_0x46f2f8+'\x20Prompt']));}}}let _0x34e2e0=await zhengmian(extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x1da9ad(-0x165,-0x1e7,-0x209,-0x1c6)]][_0x7a1438(-0x36,-0x81,-0x7b,-0xce)+'t'],_0x40abb0,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x7a1438(-0x167,-0xce,-0x82,-0x14e)]][_0x1da9ad(-0x203,-0x1d2,-0x169,-0x179)+_0x7a1438(-0x4b,-0x33,-0xb0,-0xb4)],extension_settings[extensionName][_0x7a1438(-0x19c,-0xe7,-0x47,-0xfb)],_0x26d864),_0x294614=await fumian(extension_settings[extensionName][_0x7a1438(0x39,-0x3d,-0x63,-0x77)][extension_settings[extensionName]['yusheid_sd']][_0x7a1438(-0x58,-0x72,-0xd6,-0x1)+_0x1da9ad(-0xd4,-0x104,-0x113,-0x11c)],extension_settings[extensionName]['UCP_sd']);_0x3bd69c[_0x1da9ad(-0x169,-0x1c7,-0x238,-0x1a7)](addLog,_0x7a1438(-0x81,-0x9f,-0x135,-0x151)+_0x294614),extension_settings['sd']['auto_url']=_0x3949ec,await saveSettingsDebounced();try{if(_0x3bd69c['ZYKSb'](_0x3bd69c['HxkrV'],_0x3bd69c[_0x7a1438(-0x10d,-0x51,-0x10b,-0x4d)]))_0x3bd69c[_0x1da9ad(-0x249,-0x215,-0x2c4,-0x245)](_0x57bd53,_0x3bd69c['qKxcI']),_0x22a8d8=_0x2730f7;else{if(_0x3bd69c[_0x7a1438(-0x13b,-0x13d,-0x1bd,-0x7f)](_0x42b5d9['client'],_0x3bd69c[_0x1da9ad(-0x117,-0x5e,-0xba,-0xf3)])){const _0xa4f318={};_0xa4f318[_0x1da9ad(-0xce,-0xf3,-0x65,-0x10e)]=_0x42b5d9[_0x7a1438(0x8b,0xa,-0x73,0xc3)+_0x7a1438(0x65,-0x58,-0x48,0x32)]?_0x42b5d9['st_chatu8_'+_0x1da9ad(-0xa8,-0x165,-0x1b8,-0x150)]:'',_0xa4f318[_0x7a1438(-0x3,-0xb0,-0x39,-0x63)]=_0x3949ec;const _0x261404=await fetch(_0x3bd69c[_0x1da9ad(-0x217,-0x1fa,-0x278,-0x20c)],{'method':_0x7a1438(-0x2b,-0x88,-0x65,-0x36),'body':JSON[_0x1da9ad(-0x29a,-0x240,-0x2ea,-0x24d)](_0xa4f318),'headers':_0x3bd69c[_0x1da9ad(-0x12f,-0x23c,-0x11a,-0x1d5)](getRequestHeaders,window['token'])});if(!_0x261404['ok']){_0x3bd69c['TVHxH'](addLog,_0x7a1438(-0xca,-0x8e,-0xf9,-0xa6)+_0x261404[_0x7a1438(-0x9,0x16,-0x4,-0x8b)]+'\x20'+_0x261404['statusText']);throw new Error(_0x7a1438(-0x49,-0x8e,-0x12f,-0xe6)+_0x261404[_0x1da9ad(-0x196,-0x127,-0xd7,-0xe2)]+'\x20'+_0x261404[_0x1da9ad(-0x231,-0x273,-0x198,-0x24c)]);}let _0x3cf567=await _0x261404[_0x1da9ad(-0x119,-0x188,-0x10b,-0x18b)]();console[_0x7a1438(-0x26,-0x6c,-0x11a,-0xe0)]('cmodel2222'+_0x7a1438(-0x106,-0x60,-0x113,-0x7f),_0x3cf567),console[_0x1da9ad(-0x126,-0x188,-0x148,-0x164)](_0x3bd69c[_0x7a1438(0xba,0xc,0xf,-0x12)],_0x42b5d9[_0x7a1438(-0x14a,-0x11e,-0x162,-0x1af)+_0x7a1438(-0x43,-0x76,-0xf1,-0xea)]);if(_0x3cf567!=_0x42b5d9['sd_cchatu_'+_0x1da9ad(-0x1b7,-0x17d,-0x21b,-0x16e)]){_0x3bd69c[_0x7a1438(0xab,0x3,-0x2,0x1e)](addLog,_0x7a1438(-0x25,-0x35,-0xa8,0x68)+_0x42b5d9[_0x1da9ad(-0x17d,-0x2c9,-0x235,-0x216)+_0x7a1438(-0xd8,-0x76,-0x75,-0x8a)]+_0x7a1438(-0x6a,-0x128,-0x1d3,-0x154)),toastr[_0x1da9ad(-0x1d0,-0xc0,-0xe8,-0x161)]('正在设置模型...为'+_0x42b5d9[_0x1da9ad(-0x1c1,-0x1a9,-0x225,-0x216)+'8_model']);const _0x43aa67={};_0x43aa67[_0x7a1438(0xa7,-0x16,0x74,0x4f)]=_0x42b5d9[_0x7a1438(0x60,0xa,-0x3a,0x15)+_0x7a1438(0x9,-0x58,-0xbc,-0x2)]?_0x42b5d9[_0x7a1438(0x6e,0xa,-0xae,-0x47)+_0x1da9ad(-0x1a2,-0x1c2,-0x10b,-0x150)]:'',_0x43aa67[_0x7a1438(-0xc,-0xb0,-0x160,-0xbc)]=_0x3949ec,_0x43aa67[_0x7a1438(-0x8a,-0xd7,-0x61,-0x13c)]=_0x42b5d9[_0x7a1438(-0x17f,-0x11e,-0x109,-0x191)+_0x7a1438(-0x70,-0x76,-0xd1,-0x111)];const _0x4a0925=await _0x3bd69c[_0x1da9ad(-0x210,-0x27a,-0x2b4,-0x207)](fetch,_0x3bd69c[_0x1da9ad(-0xfb,-0xe0,-0x191,-0x125)],{'method':_0x1da9ad(-0x190,-0x23d,-0x190,-0x180),'body':JSON['stringify'](_0x43aa67),'headers':getRequestHeaders(window[_0x7a1438(0x17,-0x50,-0x6e,-0x18)])});if(!_0x4a0925['ok']){if(_0x3bd69c['KbmbN'](_0x3bd69c[_0x7a1438(-0x103,-0xa3,-0xde,-0xcc)],_0x3bd69c[_0x7a1438(0x47,-0x25,-0x96,-0xd6)])){if(_0x25e7db){const _0x3b073d=_0xf66d33[_0x7a1438(-0x171,-0xfd,-0x191,-0xa2)](_0x326a1b,arguments);return _0x3b5aeb=null,_0x3b073d;}}else{_0x3bd69c[_0x1da9ad(-0x262,-0x203,-0x215,-0x245)](addLog,_0x1da9ad(-0x2bf,-0x1cc,-0x17e,-0x20b)+_0x4a0925[_0x1da9ad(-0x168,-0x107,-0x98,-0xe2)]+'\x20'+_0x4a0925[_0x7a1438(-0x174,-0x154,-0xbe,-0x10f)]);throw new Error('切换模型失败:\x20'+_0x4a0925[_0x1da9ad(-0x11c,-0x174,-0x49,-0xe2)]+'\x20'+_0x4a0925[_0x7a1438(-0xde,-0x154,-0x166,-0x1b6)]);}}toastr[_0x1da9ad(-0x1d9,-0x17b,-0xe9,-0x161)](_0x7a1438(-0x21,0x1f,-0x6e,-0xb)+_0x42b5d9[_0x7a1438(-0x1db,-0x11e,-0x14e,-0x127)+'8_model']+'成功');}}else{let _0x3616be=await _0x3bd69c['ZUbLm'](getSDMode,_0x3949ec);_0x3bd69c[_0x7a1438(-0x75,0x9,-0x3c,-0xa1)](_0x3616be,_0x42b5d9[_0x1da9ad(-0x26e,-0x196,-0x2d0,-0x216)+'8_model'])&&(_0x3bd69c[_0x1da9ad(-0x14a,-0x23b,-0x21a,-0x1be)](_0x3bd69c[_0x1da9ad(-0x219,-0x25d,-0x148,-0x1a2)],_0x3bd69c['GvuDO'])?(_0x2c6acb['on'](_0x24a8b8[_0x7a1438(0x65,-0x1f,0x48,-0xd5)+_0x1da9ad(-0x1ca,-0x14a,-0x25e,-0x1c2)+'ST'],_0x4ca7ac),_0x3bd69c[_0x7a1438(-0x92,-0x10d,-0x15b,-0x1b1)](_0x4f1b86,_0x1da9ad(-0x23b,-0x1d1,-0x1b2,-0x233)+_0x7a1438(0x4c,-0x3b,0x6a,-0x13))):(_0x3bd69c[_0x1da9ad(-0x1fe,-0x26c,-0x23c,-0x1db)](addLog,'正在切换模型为'+_0x42b5d9[_0x7a1438(-0x1b7,-0x11e,-0x9c,-0x1d7)+_0x1da9ad(-0x11b,-0x159,-0xe2,-0x16e)]+_0x1da9ad(-0x2b3,-0x235,-0x253,-0x220)),await _0x3bd69c['YAuWV'](setSDMode,_0x3949ec,_0x42b5d9[_0x1da9ad(-0x2c4,-0x283,-0x219,-0x216)+_0x7a1438(-0x133,-0x76,-0x80,-0xbf)])));}}}catch(_0x141dbb){if(_0x3bd69c['yxhsf'](_0x3bd69c[_0x1da9ad(-0x1bb,-0xff,-0xfc,-0x152)],_0x3bd69c[_0x1da9ad(-0x147,-0x11a,-0x176,-0x152)]))_0x2564aa[_0x7a1438(-0x1e8,-0x14f,-0xd3,-0x159)+_0x1da9ad(-0xb8,-0xa7,-0x16d,-0xde)](_0x2a8de1['GENERATE_I'+_0x7a1438(-0x7a,-0xca,-0x109,-0x16f)+'ST'],_0x3b442f),_0x1da7ba[_0x7a1438(-0x10b,-0x108,-0x75,-0x1ab)+'SDListener']=![],_0x3bd69c[_0x1da9ad(-0x11f,-0x12f,-0x1f5,-0x1a7)](_0x23a058,_0x3bd69c[_0x7a1438(-0xea,-0x150,-0xa3,-0x1b8)]);else{addLog('获取或者切换模型失败'+':\x20'+_0x141dbb[_0x7a1438(-0x3,-0x79,-0xfe,0x39)]+(_0x7a1438(-0x82,-0xef,-0x95,-0x139)+_0x7a1438(-0x36,0xf,0x71,0xac)+_0x7a1438(-0x181,-0xcc,-0x129,-0x100))),taskQueue['completeTa'+'sk'](_0x25bec6,![]),currentTaskId=null;throw new Error(_0x1da9ad(-0x26b,-0x22e,-0x1cf,-0x242)+'，请检查sdwebu'+_0x7a1438(0x67,0xf,-0xab,-0x8)+'查模型是否正确。');}}let _0x501d95=-(-0xdb+-0xfa1+0x107d);const _0x32ae14=_0x42b5d9[_0x1da9ad(-0x20d,-0x1d5,-0x1e9,-0x225)];_0x3bd69c[_0x7a1438(0x30,-0x55,-0x17,-0x95)](_0x32ae14,'')&&_0x3bd69c['lIBHp'](_0x32ae14,null)&&!isNaN(_0x3bd69c[_0x1da9ad(-0x1e4,-0x1fc,-0x1ed,-0x1db)](Number,_0x32ae14))&&_0x3bd69c[_0x7a1438(-0xad,-0x8b,-0x8c,-0xb1)](_0x3bd69c[_0x1da9ad(-0x13c,-0x13e,-0x111,-0xff)](Number,_0x32ae14),0x111*-0x13+0x200*-0xd+0xd*0x38f)&&(_0x501d95=_0x3bd69c[_0x7a1438(0x8,0x15,-0x6c,0x11)](Number,_0x32ae14));let _0x568dfd={'prompt':_0x34e2e0,'negative_prompt':_0x294614,'sampler_name':_0x42b5d9['sd_cchatu_'+_0x1da9ad(-0x1d2,-0x1e8,-0x2b6,-0x22f)+'ame'],'scheduler':_0x42b5d9[_0x1da9ad(-0x1cc,-0x1f8,-0x1d2,-0x216)+'8_schedule'+'r'],'steps':_0x42b5d9['sd_csteps'],'cfg_scale':_0x42b5d9[_0x7a1438(-0x13e,-0xb2,-0x12b,-0x121)],'width':_0x4b6dcc?_0x4b6dcc:_0x42b5d9[_0x7a1438(0xb,-0x71,-0x59,-0x7d)],'height':_0x241b84?_0x241b84:_0x42b5d9[_0x1da9ad(-0xf4,-0x140,-0x1f6,-0x192)],'restore_faces':_0x3bd69c['FoKkA'](_0x42b5d9[_0x1da9ad(-0x189,-0x25d,-0x2a2,-0x1fd)+'es'],_0x3bd69c[_0x1da9ad(-0x1ac,-0x139,-0xea,-0x11b)]),'enable_hr':_0x42b5d9[_0x1da9ad(-0x224,-0x137,-0x1f4,-0x16c)+_0x7a1438(-0x1de,-0x130,-0xc3,-0x13f)]==_0x3bd69c[_0x1da9ad(-0x12e,-0x77,-0x66,-0x11b)],'hr_upscaler':_0x42b5d9[_0x1da9ad(-0x2a5,-0x2c0,-0x182,-0x216)+_0x1da9ad(-0x1f5,-0x17c,-0x1ed,-0x178)],'hr_scale':_0x42b5d9[_0x1da9ad(-0x1c2,-0x139,-0x144,-0x1de)+'e_factor'],'hr_additional_modules':[],'denoising_strength':_0x42b5d9[_0x1da9ad(-0x191,-0xbd,-0xb7,-0x119)+_0x1da9ad(-0x1df,-0x126,-0x16f,-0x15c)+'th'],'hr_second_pass_steps':_0x42b5d9[_0x1da9ad(-0x19c,-0x1ed,-0xc2,-0x16c)+_0x7a1438(-0x11e,-0x92,-0xc0,-0x10c)],'seed':_0x501d95,'override_settings':{'CLIP_stop_at_last_layers':_0x3bd69c[_0x7a1438(0x4e,-0x44,-0xf4,-0x7e)](Number,_0x42b5d9[_0x7a1438(-0x60,-0x3f,0x12,-0xdf)+_0x7a1438(-0x102,-0xbb,-0x14c,-0xe9)]),'sd_vae':_0x42b5d9[_0x1da9ad(-0x2bf,-0x196,-0x218,-0x216)+_0x7a1438(-0x172,-0x131,-0x186,-0x98)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x3bd69c['oXgul'](addLog,_0x7a1438(-0x50,0x7,-0x6a,-0x91)+_0x7a1438(0x8f,-0x2b,0x31,0x89)+_0x568dfd[_0x7a1438(0x4,0x7,-0x91,0xc0)+_0x7a1438(-0x10b,-0x139,-0x185,-0x130)]);function _0x7a1438(_0x3da7b5,_0x2d42a8,_0x31ec81,_0xa97f7){return _0x488d(_0x2d42a8- -0x23e,_0x31ec81);}_0x3bd69c['uoSKf'](addLog,_0x1da9ad(-0x1d2,-0x15f,-0xce,-0x15e)+_0x7a1438(-0xdf,-0x38,-0x92,-0xea)+_0x568dfd[_0x7a1438(-0x5c,-0x8c,0x1e,-0x31)]);_0x3bd69c['ecrFt'](_0x42b5d9[_0x1da9ad(-0x15b,-0x185,-0xc2,-0x15f)+_0x1da9ad(-0x200,-0x16b,-0x12a,-0x1af)],_0x3bd69c['yKupQ'])&&(_0x3bd69c['jeWjg'](_0x3bd69c[_0x1da9ad(-0xe0,-0x170,-0x106,-0x10f)],_0x3bd69c[_0x7a1438(-0xce,-0x17,-0x1e,-0x86)])?(_0x3bd69c['JtMKI'](addLog,_0x3bd69c[_0x1da9ad(-0x133,-0x11d,-0x152,-0xe8)]),_0x568dfd=_0x3bd69c[_0x7a1438(0x6,-0x1c,-0x83,0x94)](deepMerge,_0x568dfd,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x3bd69c[_0x7a1438(-0x1db,-0x12a,-0x8b,-0x176)]}]}}})):(_0x3bd69c['aIyvS'](_0x3e2cad,_0x3bd69c[_0x1da9ad(-0x247,-0x16b,-0x1b5,-0x1ce)]),_0xd6913c=_0x530712));const _0x391068=_0x7a1438(-0xbf,-0xbd,-0xca,-0x86)+'图参数报告\x0a-\x20**'+_0x1da9ad(-0x7e,-0x88,-0x9a,-0xdf)+'pt):**\x20'+_0x34e2e0+('\x0a-\x20**负面提示\x20'+_0x7a1438(-0x44,-0x1e,-0xc0,-0x10)+_0x1da9ad(-0x1b2,-0x211,-0x2a1,-0x1ee)+'\x20')+_0x294614+(_0x7a1438(-0xf7,-0x151,-0xd6,-0x1d6)+_0x1da9ad(-0x18b,-0x1ae,-0x1b5,-0x18f)+'**\x20')+_0x568dfd[_0x7a1438(-0x174,-0xf3,-0x61,-0xf3)+'me']+(_0x7a1438(-0x155,-0x107,-0xb1,-0xe3)+_0x7a1438(-0x39,-0x91,-0xdd,-0x10c))+_0x568dfd[_0x1da9ad(-0x1de,-0x1ea,-0x164,-0x18a)]+('\x0a-\x20**CFG\x20S'+_0x7a1438(0x7c,0x12,0x9f,0x9c))+_0x568dfd[_0x7a1438(-0x17,0xd,-0x7e,-0x2d)]+('\x0a-\x20**尺寸\x20(S'+_0x7a1438(-0xf5,-0xd8,-0x124,-0x16b))+_0x568dfd[_0x1da9ad(-0x102,-0x4f,-0xfc,-0xd6)]+'x'+_0x568dfd[_0x7a1438(-0x78,-0x32,0x12,-0x6c)]+(_0x1da9ad(-0x1c8,-0x15c,-0x211,-0x1b6)+'eed):**\x20')+(_0x3bd69c[_0x1da9ad(-0x1c2,-0x1aa,-0x11d,-0x151)](_0x568dfd[_0x7a1438(-0x4b,-0xb9,-0x144,-0x7f)],-(0x25*-0x61+-0x1faa+0x22*0x158))?_0x3bd69c[_0x1da9ad(-0x179,-0x28e,-0x2ca,-0x21b)]:_0x568dfd['seed'])+('\x0a-\x20**模型\x20(M'+_0x1da9ad(-0x161,-0x1a1,-0x177,-0x1fc))+_0x42b5d9[_0x1da9ad(-0x20b,-0x28f,-0x21c,-0x216)+'8_model']+(_0x7a1438(-0xbb,-0x142,-0x1e8,-0x15c)+'*\x20')+_0x568dfd[_0x7a1438(0x48,-0xd,0x2d,0xac)+'ettings']['sd_vae']+('\x0a-\x20**Clip\x20'+_0x7a1438(-0x3,-0x52,-0x102,-0x7b))+_0x568dfd[_0x1da9ad(-0x109,-0x55,-0xd1,-0x105)+_0x7a1438(-0xd,-0x3a,0x34,-0x1f)][_0x7a1438(-0x101,-0x149,-0x1a7,-0x1c5)+'at_last_la'+_0x7a1438(-0x8c,-0x100,-0x119,-0x1a1)]+(_0x7a1438(0xa8,-0x11,0x4e,0x3a)+'(Hires\x20Fix'+_0x7a1438(-0xd2,-0x115,-0x1b4,-0x131))+_0x568dfd[_0x7a1438(-0x128,-0x8c,0x25,-0x6f)]+(_0x7a1438(-0xd8,-0x106,-0xd7,-0x11b)+'(Upscale\x20F'+'actor):**\x20')+_0x568dfd[_0x7a1438(-0x190,-0x11b,-0x152,-0x172)]+(_0x1da9ad(-0x191,-0x1a1,-0x14a,-0x1d8)+_0x1da9ad(-0xfd,-0x16c,-0x16c,-0x174)+_0x1da9ad(-0x137,-0x21b,-0x20e,-0x1f4)+_0x1da9ad(-0x168,-0x17c,-0xe7,-0x1a0))+_0x568dfd[_0x1da9ad(-0x246,-0x2a3,-0x183,-0x202)+_0x1da9ad(-0x197,-0xd2,-0x179,-0x112)]+(_0x7a1438(0x3b,-0x7a,-0xb8,-0xef)+_0x7a1438(-0x159,-0x118,-0x1a7,-0x1b8)+_0x1da9ad(-0x190,-0x103,-0x17d,-0x128))+_0x568dfd[_0x7a1438(-0x93,0x7,0x6f,-0xa1)+_0x1da9ad(-0x197,-0x1ee,-0x238,-0x231)]+(_0x1da9ad(-0x123,-0x1e7,-0x180,-0x145)+'iler:**\x20')+_0x3bd69c[_0x1da9ad(-0x1dd,-0x1da,-0x1e9,-0x1e9)](_0x42b5d9[_0x7a1438(-0xe4,-0x67,-0x33,-0x1b)+'ler'],_0x1da9ad(-0x13b,-0x13d,-0x175,-0x1b0))+'\x0a---\x0a\x20\x20\x20\x20';_0x3bd69c[_0x1da9ad(-0x21c,-0x264,-0x155,-0x1f9)](addLog,_0x391068),_0x3bd69c[_0x1da9ad(-0x177,-0x13c,-0x1bb,-0x1e0)](addLog,_0x1da9ad(-0x165,-0x162,-0x209,-0x17a)+'数为'+JSON[_0x7a1438(-0x1eb,-0x155,-0x178,-0xb6)](_0x568dfd)),console['log'](_0x3bd69c[_0x1da9ad(-0xf2,-0x179,-0x63,-0x102)],_0x568dfd);while(!window['xiancheng']){if(_0x3bd69c['KbmbN'](_0x3bd69c[_0x7a1438(-0x10f,-0x84,-0x69,-0xf7)],_0x3bd69c[_0x7a1438(0x35,-0x84,-0x8e,-0x63)]))await sleep(0x27*0x2+0x17bf+-0x1*0x1425);else throw new _0x1f5628(_0x1da9ad(-0x111,-0xcf,-0x12b,-0x14e)+'像数据。');};try{if(_0x3bd69c[_0x7a1438(0x56,-0x5b,0x37,-0x102)](_0x3bd69c[_0x1da9ad(-0x14b,-0x163,-0x140,-0xfc)],_0x7a1438(-0x12d,-0x7d,-0x42,-0xc))){_0x3bd69c['PoZZQ'](_0x50653e,_0x1da9ad(-0x11f,-0x15a,-0xfe,-0x18d)+_0x1da9ad(-0x170,-0x275,-0x1bc,-0x1ec)),_0xc80e98=_0x3bd69c[_0x7a1438(-0x11a,-0x14d,-0xfa,-0x1eb)](_0x1824f1,_0xf3868a),_0xe20e0b=_0x5cb8c6[_0x3bd69c['aqKTE']];for(let _0x442d6b=0x2292+0xc7*0xb+-0x2b1e;_0x3bd69c[_0x7a1438(-0x1e,0x17,-0x34,-0x6b)](_0x442d6b,0x1e19+-0x3d5+-0x1a40);_0x442d6b++){_0x3c1d4f[_0x1da9ad(-0x247,-0x135,-0x1dc,-0x1e4)+_0x442d6b+'\x20Prompt']&&(_0x87a31c=_0x3bd69c['zUrEx'](_0x3bd69c[_0x1da9ad(-0x240,-0x14d,-0x26c,-0x1ed)](_0x362593,',\x20'),_0x1e7451[_0x1da9ad(-0x1e0,-0x214,-0x296,-0x1e4)+_0x442d6b+'\x20Prompt']));}}else{window[_0x1da9ad(-0x164,-0x125,-0x18f,-0xda)]=![],taskQueue[_0x7a1438(-0xd4,-0x10c,-0x192,-0x9b)+'us'](_0x25bec6,_0x3bd69c['thPcm']);if(_0x42b5d9[_0x1da9ad(-0x13a,-0x190,-0x9f,-0x113)]===_0x7a1438(-0x96,0x0,-0x46,-0x64)){if(!taskQueue[_0x1da9ad(-0x229,-0x1a7,-0x21e,-0x24a)+_0x7a1438(-0xae,-0xb1,-0xbf,-0x99)](_0x25bec6)){addLog(_0x3bd69c[_0x1da9ad(-0x280,-0x1a9,-0x21b,-0x22e)]),eventSource[_0x1da9ad(-0x1d7,-0x8f,-0xef,-0x11e)](_0x3bd69c[_0x1da9ad(-0x200,-0x137,-0x16d,-0x182)]);throw new Error(_0x1da9ad(-0x19e,-0x1e9,-0x2f1,-0x239));}_0x568dfd['url']=_0x3949ec,console[_0x7a1438(-0x8f,-0x6c,-0x87,0x3)](_0x3bd69c[_0x7a1438(-0xd3,-0x90,-0xb5,-0x138)],_0x42b5d9['st_chatu8_'+_0x7a1438(0x26,-0x58,0x1c,0x27)]),_0x568dfd[_0x1da9ad(-0x15b,-0x15d,-0x1cc,-0x10e)]=_0x42b5d9[_0x7a1438(-0x70,0xa,-0xa1,0x19)+_0x7a1438(-0x79,-0x58,-0xfc,0x7)]?_0x42b5d9[_0x1da9ad(-0x4f,-0x5e,-0x19a,-0xee)+_0x1da9ad(-0x1df,-0x12c,-0xd8,-0x150)]:'';const _0x3556bb=await _0x3bd69c['LgRLT'](fetch,_0x3bd69c[_0x1da9ad(-0x133,-0x10e,-0x1a3,-0x1ad)],{'method':_0x3bd69c[_0x1da9ad(-0x50,-0x18b,-0x54,-0xd3)],'headers':_0x3bd69c[_0x1da9ad(-0x241,-0x1f8,-0x23d,-0x19a)](getRequestHeaders,window['token']),'body':JSON['stringify'](_0x568dfd)});if(!_0x3556bb['ok']){const _0x2bd0be=await _0x3556bb[_0x7a1438(-0xbe,-0x93,-0xb8,-0x75)]();_0x3bd69c[_0x7a1438(-0x6e,0x18,0xbe,0xbb)](addLog,_0x1da9ad(-0x15f,-0x16d,-0x1e3,-0x1bf)+_0x7a1438(-0x181,-0x12c,-0x18e,-0x1aa)+_0x3556bb[_0x1da9ad(-0xbf,-0xb5,-0x19f,-0xe2)]+_0x7a1438(-0x8a,-0xad,-0xa7,-0x12f)+_0x2bd0be),console['log'](_0x3bd69c[_0x7a1438(-0xd0,-0x14c,-0x201,-0x1a7)],_0x2bd0be);throw new Error(_0x7a1438(-0xcb,-0xe,0x18,-0x4c)+_0x3556bb['status']+',\x20详情:\x20'+_0x2bd0be);}const _0x32e2bd=await _0x3556bb['text']();let _0x1e20c4='';try{const _0x108fdf=JSON['parse'](_0x32e2bd);_0x1e20c4=_0x108fdf['images'][0x2e*-0x3+-0xb1e+0xba8];}catch(_0x2d5c21){if(_0x3bd69c[_0x1da9ad(-0x1f7,-0x1af,-0x219,-0x1a3)](_0x3bd69c[_0x7a1438(-0x138,-0x127,-0x1c9,-0x1d3)],_0x3bd69c[_0x1da9ad(-0x73,-0x155,-0x19b,-0x12e)])){_0x3bd69c[_0x1da9ad(-0x152,-0x2c5,-0x1da,-0x20e)](_0x523712,_0x1da9ad(-0x22d,-0x250,-0x245,-0x20b)+_0x2fd790[_0x7a1438(-0x84,0x16,0x0,0x2c)]+'\x20'+_0x5337c4[_0x7a1438(-0x158,-0x154,-0xd1,-0x1df)]);throw new _0x4d5f0c(_0x1da9ad(-0x20c,-0x1b4,-0x1f5,-0x20b)+_0x4b3206[_0x1da9ad(-0x17c,-0x126,-0x15e,-0xe2)]+'\x20'+_0x3a5374[_0x1da9ad(-0x2d7,-0x27f,-0x295,-0x24c)]);}else addLog(_0x3bd69c['qKxcI']),_0x1e20c4=_0x32e2bd;}const _0x53f44f=_0x3bd69c[_0x7a1438(0x59,-0x57,-0x93,-0x34)](_0x3bd69c[_0x1da9ad(-0x24c,-0x16d,-0x17a,-0x1c3)],_0x1e20c4);_0x3bd69c[_0x1da9ad(-0x186,-0xf4,-0x220,-0x163)](addLog,_0x3bd69c['bxunn']),setTimeout(()=>{function _0x3225c1(_0x2f7702,_0x5ba364,_0x548d3c,_0x49fe05){return _0x7a1438(_0x2f7702-0x1f1,_0x49fe05-0x2ab,_0x5ba364,_0x49fe05-0x17e);}console[_0x3225c1(0x270,0x2c4,0x268,0x23f)](_0x3bd69c[_0x3225c1(0x17e,0x22c,0x1a3,0x1b3)]);function _0x25b7c9(_0x42bd21,_0xcb7079,_0x413dee,_0x41f793){return _0x1da9ad(_0x42bd21-0xf8,_0xcb7079-0x40,_0x42bd21,_0x413dee-0x596);}window[_0x25b7c9(0x525,0x4a3,0x4bc,0x504)]=!![];},extension_settings[extensionName][_0x1da9ad(-0x2cd,-0x2d5,-0x184,-0x218)+_0x7a1438(-0x99,-0xee,-0x105,-0x19d)]);;return taskQueue[_0x1da9ad(-0x12e,-0x10b,-0x1a1,-0x104)+'sk'](_0x25bec6,!![]),currentTaskId=null,_0x3bd69c[_0x7a1438(0x2d,-0x5b,-0x49,-0x5d)](String(extension_settings[extensionName][_0x7a1438(-0x12a,-0xde,-0x45,-0x101)+_0x1da9ad(-0x146,-0x91,-0x1ac,-0x11f)]),_0x3bd69c[_0x7a1438(-0x44,-0x23,0x21,-0x21)])&&(_0x53f44f=await _0x3bd69c[_0x7a1438(-0x87,-0xe3,-0x15c,-0x9f)](convertImageToJpeg,_0x53f44f)),{'image':_0x53f44f,'change':_0x3bd69c[_0x7a1438(-0xb4,-0xcd,-0x11,-0x12f)](_0x376c5b,'')};}else{if(!taskQueue['isTaskInQu'+'eue'](_0x25bec6)){if(_0x3bd69c['yxhsf'](_0x3bd69c['xaCKi'],_0x3bd69c['cxpZA'])){_0x3bd69c[_0x1da9ad(-0x185,-0xef,-0x158,-0x121)](addLog,_0x3bd69c[_0x1da9ad(-0x1be,-0x2b3,-0x199,-0x22e)]);throw new Error(_0x3bd69c['vfuqj']);}else return _0x19a707[_0x7a1438(-0x114,-0x8f,-0xe5,-0xae)]()['search'](huiWIx[_0x7a1438(-0x12d,-0x10e,-0xf3,-0xac)])[_0x7a1438(-0xbd,-0x8f,-0xc3,-0xfc)]()[_0x1da9ad(-0x1b4,-0x121,-0x219,-0x1b9)+'r'](_0xdbf23e)[_0x1da9ad(-0x248,-0x1da,-0x212,-0x1c0)](huiWIx[_0x7a1438(-0x175,-0x10e,-0x1c3,-0x66)]);}const _0x23b754=new URL(_0x3bd69c['tkcca'](_0x3949ec,_0x1da9ad(-0x83,-0x86,-0x7e,-0x101)+_0x7a1438(-0x14d,-0xdb,-0x193,-0x74)));window[_0x7a1438(-0x5f,0x1e,-0x16,0x5b)]=![];const _0x32b5ab=await _0x3bd69c[_0x7a1438(-0x83,0x1b,0x8,0x99)](fetch,_0x23b754,{'method':'POST','body':JSON[_0x7a1438(-0xc7,-0x155,-0x1f2,-0x1c3)](_0x568dfd),'headers':_0x3bd69c[_0x1da9ad(-0x1ae,-0x1d4,-0x107,-0x1a4)](getDirectHeaders,'applicatio'+'n/json',_0x3bd69c[_0x7a1438(0x22,-0x22,-0x11,-0x1d)](getsdAuth))});_0x3bd69c[_0x1da9ad(-0x1f7,-0x128,-0x228,-0x1b4)](setTimeout,()=>{function _0x120d21(_0x13e94b,_0x21ed64,_0x45ef2b,_0x223443){return _0x1da9ad(_0x13e94b-0xe5,_0x21ed64-0x65,_0x223443,_0x21ed64-0x2d7);}function _0xe431cc(_0x4ab471,_0x3b992f,_0x3db43c,_0x47d04c){return _0x1da9ad(_0x4ab471-0x37,_0x3b992f-0xd4,_0x3b992f,_0x4ab471-0x614);}console[_0x120d21(0x1bf,0x173,0x20f,0x1f8)](_0x120d21(0x256,0x1e0,0x24d,0x193)+_0xe431cc(0x4a1,0x53e,0x410,0x4ce)),window[_0x120d21(0x297,0x1fd,0x180,0x1eb)]=!![];},extension_settings[extensionName][_0x1da9ad(-0x18f,-0x22e,-0x2d1,-0x218)+_0x1da9ad(-0x29c,-0x13e,-0x136,-0x1e6)]);;if(!_0x32b5ab['ok']){const _0x575c94=await _0x32b5ab[_0x7a1438(0x1d,-0x93,-0x108,-0x64)]();_0x3bd69c[_0x7a1438(-0x6e,-0xc9,-0xa7,-0x49)](addLog,_0x1da9ad(-0x2f7,-0x18f,-0x1c8,-0x23d)+_0x7a1438(0x15,-0x99,-0x47,-0xe2)+_0x32b5ab[_0x7a1438(-0x92,0x16,-0x75,-0x2)]+'。响应内容:\x20'+_0x575c94),console[_0x1da9ad(-0x204,-0xe0,-0x1f1,-0x164)](_0x3bd69c[_0x7a1438(-0x116,-0x14c,-0x16b,-0x1b6)],_0x575c94);throw new Error(_0x1da9ad(-0xbf,-0x84,-0x192,-0x106)+_0x32b5ab[_0x1da9ad(-0x32,-0xbd,-0xc2,-0xe2)]+_0x1da9ad(-0x295,-0x214,-0x16e,-0x1e3)+_0x575c94);}const _0xe83677=await _0x32b5ab[_0x7a1438(-0x14f,-0xf7,-0x175,-0xcb)]();if(!_0xe83677['images']||_0x3bd69c[_0x7a1438(-0x8c,-0xab,-0xc0,-0x90)](_0xe83677[_0x7a1438(-0x44,-0xd1,-0x131,-0xae)][_0x7a1438(-0xaf,-0x148,-0x186,-0xb8)],-0x2323+-0x2220+0x11*0x413)){if(_0x3bd69c[_0x7a1438(-0x68,-0x125,-0x1d7,-0xda)](_0x3bd69c[_0x1da9ad(-0x1b9,-0x11c,-0x1b4,-0x19c)],_0x3bd69c[_0x7a1438(-0x7e,-0xa4,-0xd3,-0x4e)]))throw new Error(_0x7a1438(-0x85,-0x56,-0xf6,0x1a)+_0x7a1438(-0x35,-0x18,-0x6c,0x17));else for(let _0x2322a1=0x244*-0x2+-0x1*0x7d9+0xc62;_0x2322a1<=-0x9*0x3c1+0x2212+-0x45;_0x2322a1++){_0x54bc1c['Character\x20'+_0x2322a1+_0x7a1438(-0x10d,-0xc4,-0xaf,-0x31)]&&(_0x486479=_0x3bd69c[_0x7a1438(-0x68,-0x43,0x0,-0x35)](_0x2e990d+',\x20',_0x3bd69c[_0x7a1438(-0xd7,-0x10d,-0x1bb,-0x168)](_0x447e94,_0x3c9e1e[_0x1da9ad(-0x268,-0x23f,-0x239,-0x1e4)+_0x2322a1+_0x1da9ad(-0x13a,-0x23c,-0x1ee,-0x1bc)])));}}const _0x45b9bb=_0xe83677[_0x7a1438(-0x20,-0xd1,-0x135,-0x55)][0x4bb*0x3+0x33*-0x4c+0xf3],_0x54001a=_0x3bd69c['QWajB'](_0x3bd69c[_0x1da9ad(-0x242,-0x1bc,-0x187,-0x1c3)],_0x45b9bb);return addLog(_0x3bd69c[_0x1da9ad(-0x162,-0x1e1,-0x27a,-0x1e2)]),taskQueue['completeTa'+'sk'](_0x25bec6,!![]),currentTaskId=null,_0x3bd69c[_0x1da9ad(-0x1af,-0x18c,-0x55,-0x10d)](_0x3bd69c[_0x1da9ad(-0xed,-0xd4,-0x154,-0x163)](String,extension_settings[extensionName]['convertToJ'+_0x7a1438(-0xb3,-0x27,-0x83,-0xb4)]),_0x3bd69c['yKupQ'])&&(_0x54001a=await _0x3bd69c[_0x7a1438(-0xdb,-0x48,0x53,-0x9a)](convertImageToJpeg,_0x54001a)),{'image':_0x54001a,'change':_0x3bd69c[_0x1da9ad(-0xb2,-0xf1,-0x18c,-0x141)](_0x2a7e8e,'')};}}}catch(_0x10a99d){if(_0x3bd69c[_0x7a1438(-0x96,-0xd5,-0xc1,-0x173)]!==_0x3bd69c[_0x7a1438(0x14,0x11,-0x72,-0x20)]){window[_0x1da9ad(-0x8d,-0xc3,-0x92,-0xda)]=!![];if(_0x10a99d[_0x7a1438(-0xa,-0x79,-0x118,-0xf4)]===_0x3bd69c[_0x7a1438(-0x147,-0xdc,-0xdf,-0x65)]){}else _0x3bd69c[_0x1da9ad(-0x140,-0xcb,-0x1ff,-0x17e)]===_0x3bd69c[_0x1da9ad(-0x157,-0x82,-0x6c,-0x115)]?_0x2a4ef7=_0x3bd69c['pZkqK'](_0x3bd69c[_0x1da9ad(-0x14b,-0x1af,-0x1b4,-0x1ed)](_0x2756c8,',\x20'),_0x48c284[_0x1da9ad(-0x295,-0x227,-0x12d,-0x1e4)+_0x150e67+_0x1da9ad(-0x1ee,-0x154,-0x1a7,-0x1bc)]):taskQueue[_0x7a1438(0xae,-0xc,0x25,0x9c)+'sk'](_0x25bec6,![]);currentTaskId=null,addLog(_0x7a1438(-0x148,-0xfe,-0xfa,-0x198)+_0x10a99d[_0x7a1438(-0x1c,-0x79,-0xd4,-0x64)]),console[_0x1da9ad(-0x23b,-0x221,-0x212,-0x20a)](_0x3bd69c[_0x7a1438(-0x55,-0x5c,-0x2,0x4b)],_0x10a99d);throw _0x10a99d;}else _0x5c3a41=_0x2f17dc(_0x2a132f);}}async function sdGenerate(_0x2d086d){function _0x3f2c6b(_0x2df91e,_0x5efa25,_0x165f3c,_0x494bfa){return _0x488d(_0x494bfa- -0x195,_0x165f3c);}const _0x5b4582={'OgfXW':function(_0x428553,_0x2cb61d){return _0x428553(_0x2cb61d);},'xaSJy':function(_0x578c4b,_0x3bcb70){return _0x578c4b(_0x3bcb70);},'wuSeS':function(_0x10e92b,_0x4ca1c,_0x2f3341,_0x33bce7){return _0x10e92b(_0x4ca1c,_0x2f3341,_0x33bce7);},'umFSS':function(_0x4d5fd7,_0x54b6c9){return _0x4d5fd7(_0x54b6c9);},'FOiks':function(_0x27dcdb,_0x50182c){return _0x27dcdb(_0x50182c);},'crnig':_0x373533(-0x16e,-0x206,-0x1b7,-0x274)+'rating\x20SD\x20'+_0x373533(-0xca,-0x18f,-0x16e,-0x18e),'LjtHB':function(_0xa67746,_0x3abcc2){return _0xa67746(_0x3abcc2);}};function _0x373533(_0x1d12b8,_0x484ccc,_0x5e2da4,_0x3ae58c){return _0x488d(_0x5e2da4- -0x2d8,_0x3ae58c);}const {id:_0x426db3,prompt:_0x558712,width:_0x1d6292,height:_0x2ce10e,change:_0x1a1dfd}=_0x2d086d;_0x5b4582[_0x373533(-0x76,-0x158,-0xe0,-0xf2)](addLog,_0x373533(-0x10a,-0xf9,-0x13f,-0x1fd)+_0x373533(-0x171,-0x152,-0x1bb,-0x255)+_0x426db3+(_0x373533(-0x1ba,-0xcc,-0x141,-0x128)+':\x20')+_0x558712+(_0x1a1dfd?_0x373533(-0x8c,-0x158,-0xaa,-0x9d)+'\x20'+_0x1a1dfd:''));if(_0x1a1dfd&&_0x1a1dfd['includes'](_0x3f2c6b(0xf8,0x96,0x7,0xb1))){_0x5b4582[_0x373533(-0x132,-0x41,-0xe0,-0x71)](bananaGenerate,_0x2d086d);return;}try{const {image:_0x195567,change:_0x3e31b6}=await _0x5b4582[_0x373533(-0x1ef,-0x14a,-0x1e0,-0x18f)](generateSDImage,{'prompt':_0x558712,'width':_0x1d6292,'height':_0x2ce10e,'change':_0x1a1dfd});if(extension_settings[extensionName][_0x3f2c6b(0x11f,0xbb,0x2,0xa8)]!='0'){const _0x2e5b24={};_0x2e5b24[_0x373533(-0x195,-0x6e,-0x104,-0x1bc)]=_0x3e31b6,await _0x5b4582[_0x373533(-0x21f,-0x18a,-0x183,-0x197)](setItemImg,_0x558712,_0x195567,_0x2e5b24),_0x5b4582[_0x373533(-0x5f,-0x1e,-0xce,-0xd3)](addLog,_0x373533(-0x179,-0x20f,-0x179,-0xbd)+_0x3f2c6b(-0x26,-0x1e,-0x8f,-0xd)+'\x20'+_0x558712);}else addLog(_0x3f2c6b(-0x80,-0xc6,-0xbb,-0x50)+'库');const _0x254100={};_0x254100['id']=_0x426db3,_0x254100[_0x3f2c6b(0xe6,0x4a,0x13,0x81)]=!![],_0x254100[_0x373533(-0x7c,-0x168,-0xe9,-0x60)]=_0x195567,_0x254100[_0x3f2c6b(0x5,0x37,0xcd,0x5b)]=_0x558712,_0x254100[_0x3f2c6b(0xdd,-0x4c,0x97,0x3f)]=_0x3e31b6,eventSource[_0x373533(-0x11a,-0x130,-0xc0,-0x12)](EventType[_0x373533(-0xbf,-0x46,-0xb9,-0x13b)+_0x3f2c6b(0x158,0x45,0x102,0xb7)+_0x3f2c6b(-0x1a,0x3f,-0x13,-0x29)],_0x254100),_0x5b4582[_0x373533(-0x9e,-0xa7,-0x77,0xe)](addLog,_0x3f2c6b(0x15,0x14,0xbd,0x90)+_0x373533(-0xae,-0xd6,-0xa5,-0x72)+_0x426db3+')');}catch(_0x1ec613){const _0x5e6d52=_0x3f2c6b(0x21,0x122,0xfc,0xa6)+_0x373533(-0x129,-0x215,-0x17f,-0xea)+_0x426db3+_0x3f2c6b(0x37,0x44,-0x4,-0x44)+_0x1ec613[_0x373533(-0x156,-0x1b6,-0x113,-0x176)];_0x5b4582[_0x373533(-0x59,-0xf1,-0xce,-0xd3)](addLog,'错误:\x20'+_0x5e6d52),console[_0x373533(-0x168,-0xf9,-0x1ac,-0xf8)](_0x5b4582['crnig'],_0x1ec613);const _0x2cd11b={};_0x2cd11b['id']=_0x426db3,_0x2cd11b['success']=![],_0x2cd11b[_0x373533(-0x214,-0x1a2,-0x1ac,-0x15e)]=_0x1ec613[_0x3f2c6b(0xb3,-0x3c,0x8d,0x30)],_0x2cd11b['prompt']=_0x558712,eventSource['emit'](EventType[_0x373533(-0x49,-0x5e,-0xb9,-0xf5)+_0x373533(0x16,-0x12d,-0x8c,-0xd8)+'NSE'],_0x2cd11b),_0x5b4582[_0x3f2c6b(0xa5,0xb1,-0x59,0x5d)](addLog,_0x373533(0x19,-0x14f,-0x96,-0x4f)+_0x3f2c6b(0xb6,0x123,0x81,0x9e)+_0x426db3+')');}}function _0xb630(){const _0x6b3c20=['6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','q0Xjuf9ZDg9WxW','BgvUz3rO','vxnLCI1bz2vUDa','EgftsNK','u0qGqvbjioI/LowBNUMuMq','ptaUosXLBJTXpq','sMHODhm','cI0GkIPwquu6kG','5lU75yQH5BEY5y+w5RAi','ufrZte0','5zon5BQu5yAf5A65oG','5BcD6k+v5l2C5lI65y6F5AEliejHCW','thjNuwe','ndaXmZy0v1vqELHN','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','D3DhAue','y2vZ','z3vHz2u','of9Zyw1WBgvYtG','zNvQvw4','CM9S','ntiWodC2ofvwA214uG','C2rvCMW','mc4WlJaUmcbtyq','of92ywu','zML4','qwDIENa','zgf0ytPPBwfNzq','C2rFy3nLzwq','56cboIa','icHlsfrntcWGBa','r3vJDuS','kI8Q','lI4U','ALvjq0m','DNzRA1a','wgr3u3G','twXnvhC','y0fvzvm','CK5VzLe','suq6ia','Aw1Hz2vhzw5jBG','AwTdzLq','C2rFy2nOyxr1xW','rxjYB3iGz2vUzq','zMfJzv95B2XVDG','AhjFC2nHBgu','CvvHy2m','CgD5zKy','kfjLC3rVCMuGrG','BMvYyxrPB24','vNfhwhG','ktOQkIa','ywzUtwy','5yIh5O2I5QIH5z6l5AsX6lsLoIa','zxjYB3i','ExjLwuO','q3P3yuG','yxjgt3K','A3PnEuy','rfnyChu','DxbKyxrLu3rHDa','zxH0zw5ZAw9UxW','zgvUB2LZAw5NxW','zty0ioAvSoAnRUwKHoEqHUoaGG','Aw5PDgLHBgL6zq','cI0GkIRMRAxMLBaGkfm','cI0GkIRMLl7LPkFLGi3NJOCG','CMvZDg9YzuzHyW','B2rLBcK6kIOG','qKDMC1a','t0zjzw8','vfziEeG','EwvYCW','ie5uideWlJa7ia','C2tOR7FMSylNLj/LM77PLjNOR686ia','yxbWBhK','ifn0CMvUz3rOkq','55sO5lQo55sF5OIq55QevgfNoIa','tw96AwXSys81lG','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','u0DfrNO','ANnVBG','uhjVBxb0ktOQkG','ELvYrxG','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','C2fTCgXLCL9Uyq','5BEY5ywZ6zET44cc','zwnYrNq','tuPUvNG','44cc6k+35Qoa5P+LC2r3zwj1','DgvYDMfS','ktOG','q2HHCMfJDgvYia','lcdOR6BMG4u6ia','yNH1BM4','D3vtzvm','yLDlCeG','qvfux3nK','C2rFy3vWC2nHBa','5BI4icHjrdOG','sLnptIdOP6pMNPdLPlhOTkxVViW','B3DUy1m','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','u2nLBMuGq29TCa','cI0GkIRPH43NU5JLUyxLUQyG','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','y29UDMvYDfrVsG','Dw9ts2y','DMz1CwO','DhH0mMLTzW','yxjNCW','DxzxsvC','AxPLktOQkIa','Bw9KzwW','DMnIDw0','t25iteu','Aw1Hz2u6','quLzwg4','tLnf','Aw1Hz2vZ','t2Lbzeu','qMHgAgK','ExvZAgvPzf9Zza','BKXvvhu','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','uwLVCLy','tufhrv9srvfvrq','Durxq0C','C2vHCMnO','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','qw9ZwhO','ELn4ufm','ifbYB21WDa','q29UDgvUDc1uEq','qurLDgfPBgvY','y29UC3rYDwn0BW','qwnJzxb0luXHBG','mJu0mda1zwrouxDn','cI0GkIRNP43LRzaGkfm','cI0TlqOJiYmG55sF','tujdquu','A2LW','Cgf5C3rFy2HHDa','C2vLza','Dhj1zq','BgvY','B3iGChjVBxb0oG','ENHOBMq','zMfYAs81mZCUmW','EfzLr1G','C2rdzMDty2fSzq','zxvL','DxjS','yuL5DLm','mtK3mJa0vK11q1rK','44cc5zon5BQu5yAf5A65oIa','zgrIBee','AMvxAMC','r3z1re8','5yYw5lI6igrHDgeGvvi','oIOQia','ksaTifbYB21WDa','ksbbChbSzvDLyG','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','Exn1zve','EhbXuKu','qxnts2K','s2L0lZuZnY4ZnG','C2rFC3rVCf9Nzq','6lsF6z2I5lI6oIa','BgvZktOG','t3jRvKK','l3bUzZTIyxnLnG','D2jJCuW','C2rFy2HLAwDODa','6k+V44cc54Q25Ocb56cboIa','v2PqEhK','kfnHBxbSzxiPoG','rwL4rhG','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','CMzeDwS','Dgv4Da','C3rLChm','DgvWCYK6kIOG','EvrYuMy','Dg9tDhjPBMC','6i635y+w5QIH5z6l5AsX6lsLoIa','rwjcqxm','zw5HyMXLx2HY','BwTewfm','v0fdyMu','twjrsKe','ue9tva','y3jPChrZ','EgzAz2i','DgDpz2m','rgXJzxi','sLDqrKC','C2r3zwj1AEEuN+wBVUwpGG','zML4zwrqCM9TCa','of91ChnJywXLCG','Eg1Qr1e','zhLRsMW','z3Ler2O','kerLBM9PC2LUzW','5lI6Dhj1zq','cI0GkIROHlJPG6JKV67LPi0G','BwvZC2fNzq','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','ELLZveS','of9TB2rLBa','CNvUBMLUzW','C2rFy2HPCMvZxW','sMfOr1y','BMvNyxrPDMvqCG','C2rFy3DPzhrO','BM8Ty2fJAgu','uNHcv1i','BMvYyxrL','ywrKvgfZAW','Bg9N','BLr2rwG','y2HHBMDL','Aw5MBW','DhjPBq','C2rFy2fKzxrHAq','zw5HyMXLx2HYia','Cgf5Bg9Hza','Aw5Nx3n0CMvUzW','mJG2mJe2vLPUz3jT','6zQp5PY6kc0Xkq','DtHFC2rFyxv0Aa','mJiYmG','qxv0Ag9YAxPHDa','tfjMBhy','DxjerKC','thbYr3e','BLDHtfu','B0n1ChG','wLLlu2i','C2rFyxv0Aa','t2fuDe0','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','DfDUuuG','q2fJAguTq29UDa','CMf0Aw5NigLTyq','u2TPCdOQkIa','r0LKuKG','Dg9Rzw4','Aw1Hz2veyxrH','ChjVBxb0','cI0GkIPbrgv0yq','tgP0sei','mJq0mJaZuxrxCwDq','l2fWAs9Zzc9Nzq','uLbIt3a','A2nRv0y','u0rmAxn0zw5LCG','t2DMwfC','Dez6Cvu','sNrns0K','yxr1BvG','mtm5mtq0tefyB1ru','og4UChq','5lIT55QeihbYB21WDooaGG','C2rFy2nSAxbFCW','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','ExvZAgu','vejYrKO','5BEY5yID5AEl5yYw44cc','zxr0Aw5NCW','yu11s1u','6AUy5RIf5l+U5Asnios4UG','yxflveu','EgDtwKu','5Q2J5zYO6k6+572U5QIH5z6l5lI6','Dw1gu1m','Df9LBMq','AgvPz2H0','vLD6Aee','ywnLCYK6kIOG','z2u6','kcGOlISPkYKRkq','Aw95Aey','Aev0vuW','y2vZioIeUoMdQos/RUwKJsdKUlO','Dc1TB2rLBa','whnlzgW','C3vJy2vZCW','CgvNu3rVCMfNzq','zw1PDa','wu5Tv2K','B21WDa','EuT1Cfe','tKfxv0C','C2rFy2rLBM9PCW','teDosva','r0vorvjbvevFsq','ke5Lz2f0AxzLia','uNrNDg4','rfjrv2K','y2XPzw50','C3rYzw5NDgG','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','5yop5PwW5O2U44cc','AhjYAKC','yxv0Aa','AMHorKG','EMGTq04SEMG7Cq','ywntCK8','rfbduNa','cI0GkIRPQ5JMUixKV67LPi0G','ic0Gq2HHBMDLoG','nMLjt05jrG','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','B3zLCNjPzgvFCW','y29TCgXLDgvuyq','icHjrdOG','suzdDwe','l3nKyxbPl3yXlW','kerPDMLKzv9YBW','wLniuwi','uNrvreO','Bw9Kzq','Cenyshy','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','B3nPDgLVBG','y2fJAgu','AML1z3vHBG','EgLHBMnOzw5Nia','vMXYDgq','zgncBuW','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','AvDXBMm','C3vIC3rYAw5N','CMvZDg9Yzv9Myq','E+s/RUwBVN0','D01Xufm','C3rFy2HHDhu4xW','mcaOv2LUzg93CW','t0PoyM4','y2zNx3nJywXL','tufhrv9srvnqtW','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','v3jwsNm','BhbYtvy','y2fSztOQkIa','Aw5JBhvKzxm','zKHbzeq','v0LfBxq','C3rHDhvZ','wNvZyvO','zgnlCMG','5Q2J6z2I5O+q56s6icHqCM9T','zw5LCG','Au9wBxG','Bg9Hza','loAOOEwEI+s4UG','EgLHBMnOzw5N','6k6+572U5QIH5z6llI4U5lI6','Aw9U','ywrLDgfPBgvYxW','D2LKDgG','rK9PA3m','wNHZzKy','Ce1kD1u','C3rYAw5NAwz5','C3rHDhvZvgv4Da','v2LUnJq7ihG2na','AxnuyxnRsw5rDq','cI0GkIRPH4FMOlFMLRNMS5uG','uuvfq0e','CMvTB3zLtgLZDa','6zsz6k+VoIa','B09ovuS','Cw9bCKW','r1LqufO'];_0xb630=function(){return _0x6b3c20;};return _0xb630();}function initializeSDListener(){const _0x9d6b2a={'tgOgc':function(_0x20aad0,_0x2b816a){return _0x20aad0(_0x2b816a);},'SdBKu':_0x7edde8(-0x113,-0xb6,-0x1ca,-0x1b4)+_0x7edde8(-0x13,-0xbc,-0x33,0x77)};function _0x309c62(_0x4aa9cf,_0xfab2fd,_0x52158,_0x10a6c8){return _0x488d(_0x10a6c8-0x5d,_0xfab2fd);}eventSource['on'](EventType[_0x7edde8(0x9,0x3c,0x1c,-0x86)+_0x7edde8(-0xa2,-0x6,-0x7d,-0x15f)+'ST'],sdGenerate);function _0x7edde8(_0x1b6cca,_0x1fed37,_0x33fe1f,_0xf68db5){return _0x488d(_0x1b6cca- -0x216,_0x1fed37);}_0x9d6b2a[_0x7edde8(-0x5d,0x30,-0x74,-0x94)](addLog,_0x9d6b2a['SdBKu']);}export async function replaceWithSd(){function _0x10a1db(_0x2aa94e,_0x338587,_0x2a9ea1,_0x36f6b4){return _0x488d(_0x36f6b4-0x2f6,_0x338587);}const _0x4817ea={'TBrFJ':function(_0x1c0a6e,_0x2c15b5){return _0x1c0a6e(_0x2c15b5);},'OFIeo':_0x10a1db(0x519,0x575,0x50b,0x555)+'face\x20为开启','urDFG':_0x5fe6b5(0x3de,0x489,0x42d,0x3df)+_0x10a1db(0x56f,0x591,0x53b,0x4f3),'MbQJA':function(_0x192452,_0x46d910){return _0x192452!==_0x46d910;},'OybHO':_0x5fe6b5(0x4b5,0x43e,0x4fb,0x527),'BhFhi':_0x5fe6b5(0x3ea,0x428,0x3d5,0x465),'rNofQ':function(_0x1ccf3f,_0x5019cd){return _0x1ccf3f!==_0x5019cd;},'Vlrtd':_0x5fe6b5(0x47c,0x3df,0x537,0x4b0),'mJwmA':function(_0x3df1d0){return _0x3df1d0();},'Agbzp':function(_0xc6b5ea,_0xa44d8b){return _0xc6b5ea(_0xa44d8b);},'zSxPS':_0x5fe6b5(0x3bf,0x3e5,0x375,0x3b4)+_0x5fe6b5(0x408,0x430,0x369,0x373)};function _0x5fe6b5(_0x924f50,_0x3de0b7,_0x2e61de,_0x44ddc6){return _0x488d(_0x924f50-0x2bc,_0x3de0b7);}if(extension_settings[extensionName][_0x5fe6b5(0x4f5,0x46b,0x5ae,0x4cc)]=='sd'){if(_0x4817ea[_0x10a1db(0x4b7,0x484,0x54e,0x4ab)](_0x4817ea['OybHO'],_0x4817ea[_0x10a1db(0x4a0,0x50c,0x3cb,0x465)])){if(!window[_0x10a1db(0x49a,0x3ef,0x408,0x42c)+_0x5fe6b5(0x4b3,0x4eb,0x513,0x473)]){if(_0x4817ea[_0x5fe6b5(0x3d8,0x3e5,0x372,0x337)](_0x4817ea[_0x5fe6b5(0x4fc,0x4de,0x55a,0x54e)],_0x5fe6b5(0x47c,0x449,0x3dd,0x4e8))){_0x4817ea[_0x5fe6b5(0x4be,0x470,0x44f,0x564)](_0x318958,_0x5fe6b5(0x46c,0x449,0x40e,0x3d6)+_0x4ccf76[_0x10a1db(0x52b,0x519,0x5ad,0x54a)]+'\x20'+_0x524d5b[_0x5fe6b5(0x3a6,0x3c9,0x330,0x2f1)]);throw new _0x3806db(_0x10a1db(0x558,0x42f,0x47f,0x4a6)+_0x1c2592[_0x5fe6b5(0x510,0x468,0x52e,0x4ee)]+'\x20'+_0x395935['statusText']);}else window[_0x10a1db(0x3e5,0x385,0x439,0x42c)+'SDListener']=!![],_0x4817ea['mJwmA'](initializeSDListener);}initializeImageProcessing();}else{_0x24b59f(_0x4817ea[_0x10a1db(0x4df,0x4a5,0x432,0x432)]);const _0x13db10={};_0x13db10['ad_model']=_0x4817ea[_0x10a1db(0x54b,0x4fb,0x41e,0x4d7)];const _0x38fdeb={};_0x38fdeb[_0x5fe6b5(0x420,0x46a,0x372,0x434)]=[!![],!![],_0x13db10];const _0x3a7987={};_0x3a7987[_0x5fe6b5(0x438,0x468,0x465,0x44d)]=_0x38fdeb;const _0x57b290={};_0x57b290['alwayson_s'+_0x5fe6b5(0x473,0x4f9,0x431,0x4fa)]=_0x3a7987,_0x36bcff=_0x3726e0(_0x1f3696,_0x57b290);}}else window[_0x10a1db(0x3f1,0x392,0x4c1,0x42c)+'SDListener']&&(eventSource['removeList'+'ener'](EventType[_0x5fe6b5(0x4db,0x50d,0x597,0x453)+_0x5fe6b5(0x430,0x450,0x37a,0x44f)+'ST'],sdGenerate),window['initialize'+'SDListener']=![],_0x4817ea[_0x10a1db(0x408,0x3f6,0x39a,0x405)](addLog,_0x4817ea[_0x10a1db(0x4b5,0x466,0x4a1,0x46f)]));}