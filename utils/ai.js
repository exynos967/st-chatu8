function _0x115a(_0x17ce9b,_0x4e8f1f){_0x17ce9b=_0x17ce9b-(0x16ce+0x1558+-0x2aba);const _0xb58e94=_0x478e();let _0x296e3c=_0xb58e94[_0x17ce9b];if(_0x115a['sgiBHm']===undefined){var _0x48ee1e=function(_0x3b9c00){const _0x2b117c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5cb4a8='',_0x3b8c5c='',_0x1eb612=_0x5cb4a8+_0x48ee1e;for(let _0x395dfe=0x138e*0x1+0xc6d*-0x2+0xe2*0x6,_0x4fcb50,_0x5ce9cc,_0x1794f8=0x1644+0xb*-0x2a1+-0x83*-0xd;_0x5ce9cc=_0x3b9c00['charAt'](_0x1794f8++);~_0x5ce9cc&&(_0x4fcb50=_0x395dfe%(0xc3e+0xfb*-0x10+-0x2*-0x1bb)?_0x4fcb50*(0x1ca3+0x24ef+-0x4152)+_0x5ce9cc:_0x5ce9cc,_0x395dfe++%(0x4*-0x64e+0x1*-0x209+0xd*0x219))?_0x5cb4a8+=_0x1eb612['charCodeAt'](_0x1794f8+(0x43*-0x12+-0x15f9+-0x1*-0x1ab9))-(-0x23f7+-0x1*-0xeba+0x1*0x1547)!==-0x1*0x97d+-0x3be*-0x1+0x5bf?String['fromCharCode'](-0x1a8d+0x4c4+-0xf3*-0x18&_0x4fcb50>>(-(-0x1a0b+-0x1f07+0x3914)*_0x395dfe&-0x6*-0x347+-0xca4+-0x700)):_0x395dfe:0x459*0x1+-0x6e1*0x2+0x969){_0x5ce9cc=_0x2b117c['indexOf'](_0x5ce9cc);}for(let _0x400639=-0x103f+0x2549+0xa85*-0x2,_0x5cc0cb=_0x5cb4a8['length'];_0x400639<_0x5cc0cb;_0x400639++){_0x3b8c5c+='%'+('00'+_0x5cb4a8['charCodeAt'](_0x400639)['toString'](0xccd+0xb8c*-0x3+0x15e7))['slice'](-(0x21a2+0x1e8e+-0x402e));}return decodeURIComponent(_0x3b8c5c);};_0x115a['HsVKZd']=_0x48ee1e,_0x115a['wjrALQ']={},_0x115a['sgiBHm']=!![];}const _0x380ac0=_0xb58e94[0x1*0x1290+-0x22fb+0x106b],_0x5e1e69=_0x17ce9b+_0x380ac0,_0x59f04a=_0x115a['wjrALQ'][_0x5e1e69];if(!_0x59f04a){const _0x5db349=function(_0x36737d){this['TPFDKA']=_0x36737d,this['wxLmdW']=[-0x843+0x2501+0x41b*-0x7,-0x1bd*0x3+-0x47*-0x83+-0x1*0x1f1e,0x5*0x449+-0x1de3+0x13*0x72],this['XHRnjD']=function(){return'newState';},this['wmVxmS']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['JMbbIN']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5db349['prototype']['JbQUsb']=function(){const _0x289fff=new RegExp(this['wmVxmS']+this['JMbbIN']),_0x6a3570=_0x289fff['test'](this['XHRnjD']['toString']())?--this['wxLmdW'][0x201c+-0x3*-0x626+-0x328d]:--this['wxLmdW'][0x4*-0x430+-0x55*-0x19+0x873];return this['jFfXMW'](_0x6a3570);},_0x5db349['prototype']['jFfXMW']=function(_0x1d04e6){if(!Boolean(~_0x1d04e6))return _0x1d04e6;return this['oDslRv'](this['TPFDKA']);},_0x5db349['prototype']['oDslRv']=function(_0x1607b7){for(let _0x578060=0x26db+-0x2*0xbfe+0x2f*-0x51,_0xed13db=this['wxLmdW']['length'];_0x578060<_0xed13db;_0x578060++){this['wxLmdW']['push'](Math['round'](Math['random']())),_0xed13db=this['wxLmdW']['length'];}return _0x1607b7(this['wxLmdW'][-0x1*0x22a5+0x13d7+0xece]);},new _0x5db349(_0x115a)['JbQUsb'](),_0x296e3c=_0x115a['HsVKZd'](_0x296e3c),_0x115a['wjrALQ'][_0x5e1e69]=_0x296e3c;}else _0x296e3c=_0x59f04a;return _0x296e3c;}(function(_0x9a473d,_0x69ff21){const _0x4eb0d2=_0x9a473d();function _0x108041(_0x39c442,_0x144308,_0x461efe,_0x1abf4e){return _0x115a(_0x144308-0x2ce,_0x39c442);}function _0x34cf6d(_0x2b4cee,_0x59cf52,_0x387e73,_0x40eb92){return _0x115a(_0x59cf52- -0x7d,_0x40eb92);}while(!![]){try{const _0x380db3=-parseInt(_0x108041(0x421,0x46e,0x4a9,0x44a))/(0x1b*0x14f+-0x160e+0x6a3*-0x2)*(-parseInt(_0x108041(0x43f,0x450,0x49f,0x4a2))/(-0x752*-0x3+-0xd9*0x17+-0x1*0x275))+parseInt(_0x108041(0x499,0x496,0x472,0x4e2))/(-0x251a+0x881*-0x2+0x32f*0x11)+-parseInt(_0x108041(0x4d6,0x49c,0x491,0x4b5))/(0x516+0x1*-0x155+-0x3bd)+-parseInt(_0x108041(0x491,0x48e,0x43f,0x49f))/(0x25af*-0x1+-0x1e4a+0xb55*0x6)*(parseInt(_0x108041(0x49d,0x4cf,0x488,0x519))/(0x586+0x1140+-0xd0*0x1c))+-parseInt(_0x34cf6d(0xff,0x148,0x149,0x104))/(0x1d61+0x20fb*0x1+-0x3e55)+-parseInt(_0x34cf6d(0x1eb,0x196,0x169,0x1e5))/(0xcb*-0x31+0x3c8+0xb*0x331)*(parseInt(_0x34cf6d(0x123,0x12f,0x104,0x182))/(0x187e+0x25a1+-0x3e16))+parseInt(_0x108041(0x502,0x4b7,0x476,0x4fb))/(0x3*-0x2e0+0x2d5+0x5d5*0x1);if(_0x380db3===_0x69ff21)break;else _0x4eb0d2['push'](_0x4eb0d2['shift']());}catch(_0x2f0d0f){_0x4eb0d2['push'](_0x4eb0d2['shift']());}}}(_0x478e,-0xbece0+0x104cb+0x1144d2));const _0x173875=(function(){const _0x4de7c5={};function _0x51ad84(_0x360f28,_0x3a20c0,_0x20ed14,_0x4f8e89){return _0x115a(_0x4f8e89-0x2a0,_0x20ed14);}_0x4de7c5['TxtKf']=_0x51ad84(0x427,0x3ef,0x41a,0x42f);const _0x31c1c0=_0x4de7c5;let _0x4d9a05=!![];return function(_0x2556dd,_0xcd861f){const _0x47bb0f={};function _0x3e6db0(_0x8b2e36,_0x15898f,_0x6a7d91,_0x4aeb0e){return _0x51ad84(_0x8b2e36-0x163,_0x15898f-0x116,_0x8b2e36,_0x15898f-0x20);}_0x47bb0f[_0x3e6db0(0x496,0x456,0x49f,0x427)]=_0x31c1c0[_0x3e6db0(0x480,0x467,0x428,0x488)];const _0x1d4521=_0x47bb0f;function _0x41a774(_0x63471e,_0x1bf852,_0x315e25,_0xbfabc){return _0x51ad84(_0x63471e-0x5e,_0x1bf852-0x143,_0x315e25,_0x63471e- -0x14);}const _0x282261=_0x4d9a05?function(){function _0x1451ac(_0xf3ab16,_0x31aef6,_0x1a7abd,_0x164162){return _0x41a774(_0x164162- -0x290,_0x31aef6-0xf4,_0x31aef6,_0x164162-0x48);}const _0x10a9d9={};_0x10a9d9[_0x1451ac(0x201,0x18c,0x1c3,0x1c9)]=function(_0x3d05f4,_0x3643d7){return _0x3d05f4+_0x3643d7;};const _0x2b0169=_0x10a9d9;function _0x26dec4(_0x4fae36,_0x197945,_0x121313,_0x370423){return _0x41a774(_0x4fae36- -0x2e2,_0x197945-0x17d,_0x197945,_0x370423-0xa6);}if(_0xcd861f){if(_0x1d4521[_0x1451ac(0x1d0,0x1d8,0x1d3,0x192)]===_0x1d4521['cJtYn']){const _0x4492a1=_0xcd861f[_0x26dec4(0x126,0xfc,0x16e,0xd2)](_0x2556dd,arguments);return _0xcd861f=null,_0x4492a1;}else{if(_0x1a7007&&_0x19cde1[_0x1451ac(0x1e6,0x1e7,0x201,0x1b1)])return _0x53a42c[_0x26dec4(0x15f,0x131,0x11c,0x199)]();return _0x2b0169[_0x1451ac(0x207,0x19c,0x208,0x1c9)](_0x3e2eff[_0x26dec4(0x117,0x13c,0x130,0xdf)]()[_0x1451ac(0x1e8,0x227,0x20a,0x1f8)](0x1*-0xc2f+-0x1c7+0xe1a),_0x709d80[_0x26dec4(0x16e,0x13d,0x15a,0x13d)]()[_0x26dec4(0x1a6,0x1ba,0x1f5,0x1b2)](-0x73d*-0x1+-0x2*0x66e+-0x19*-0x3b)['substring'](-0xf04*-0x2+-0x343+-0x1ac3));}}}:function(){};return _0x4d9a05=![],_0x282261;};}()),_0xceeb83=_0x173875(this,function(){function _0x4f531c(_0x2b39f3,_0x34a01c,_0x561082,_0x59d766){return _0x115a(_0x34a01c-0x30f,_0x561082);}const _0xfa122a={};_0xfa122a[_0x4f531c(0x4ab,0x4c0,0x4af,0x47f)]=_0x44da46(0xfd,0x7d,0xc8,0xa4)+'+$';const _0x5168e9=_0xfa122a;function _0x44da46(_0x4af314,_0x6bf308,_0x2563ef,_0x25f574){return _0x115a(_0x2563ef- -0xec,_0x6bf308);}return _0xceeb83[_0x44da46(0x151,0xe2,0x110,0xc3)]()[_0x44da46(0x157,0xcc,0x11a,0x156)](_0x5168e9[_0x4f531c(0x486,0x4c0,0x4c6,0x493)])[_0x44da46(0x101,0xbb,0x110,0x146)]()[_0x4f531c(0x4b1,0x4ee,0x529,0x4bf)+'r'](_0xceeb83)['search'](_0x5168e9[_0x44da46(0xab,0xc9,0xc5,0x10f)]);});_0xceeb83();import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{mergeAdjacentMessages}from'./promptProcessor.js';let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x119605){function _0x14014f(_0x2115ac,_0x5096f6,_0x11113f,_0x1e5423){return _0x115a(_0x2115ac- -0x12a,_0x11113f);}function _0x5b1418(_0x5e89f5,_0x32ab9e,_0x29485f,_0x517b43){return _0x115a(_0x5e89f5- -0x1d1,_0x29485f);}return SKIP_PATTERNS[_0x14014f(0x68,0xae,0x3e,0x84)](_0x39a5c6=>_0x39a5c6[_0x14014f(0x8d,0xb9,0xa4,0xcd)](_0x119605[_0x5b1418(0x3e,0x41,0x34,0x63)]()));}export function tagsToJsonString(_0x365bcb){function _0xf08cef(_0x310f16,_0x13209a,_0x92ce8a,_0x57fc39){return _0x115a(_0x310f16- -0x6f,_0x13209a);}if(!Array[_0x4d7fa7(0x155,0x10a,0x15d,0x16c)](_0x365bcb))return'[]';function _0x4d7fa7(_0x2ceb6a,_0x3b3bbf,_0x468860,_0x249893){return _0x115a(_0x468860- -0x14,_0x3b3bbf);}return JSON['stringify'](_0x365bcb[_0xf08cef(0x134,0x116,0xf5,0x128)](_0x1a366e=>_0x1a366e&&typeof _0x1a366e===_0x4d7fa7(0x190,0x199,0x1c0,0x1f5)));}export function preprocessPromptForTranslation(_0x27620a){const _0x55477b={'MLOcr':function(_0x41f7f9,_0x13becf){return _0x41f7f9<_0x13becf;},'EjwLo':function(_0x679d42,_0x41d367){return _0x679d42===_0x41d367;},'UGRSi':'AbortError','DNsYB':function(_0x422725,_0x21e16f){return _0x422725!==_0x21e16f;},'twIkY':function(_0x50dc97,_0x2bfdc3){return _0x50dc97(_0x2bfdc3);},'VgUBD':function(_0x3d5239,_0x57bee6){return _0x3d5239(_0x57bee6);},'hojaa':'LtFcI','Gjsda':_0x1abf4c(0x15,0x37,0x9,-0x48)};if(!_0x27620a||_0x55477b[_0x5a3e59(-0x147,-0x16e,-0x15c,-0x1ab)](typeof _0x27620a,'string'))return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};const _0x263d2c=_0x53aab5=>{const _0x1845d5=[];let _0x300cab='';function _0x147f45(_0x3b13d7,_0x290fd3,_0x19a5d3,_0x91a37e){return _0x1abf4c(_0x3b13d7-0x13,_0x19a5d3,_0x3b13d7- -0xb1,_0x91a37e-0x67);}let _0x4742b9=![];for(let _0x2029a6=-0x1*0x1668+0x1ea8+-0x8*0x108;_0x55477b[_0x111996(0x1b9,0x1f4,0x1e2,0x206)](_0x2029a6,_0x53aab5[_0x147f45(-0xc1,-0xb8,-0x9b,-0xb0)]);_0x2029a6++){const _0x335722=_0x53aab5[_0x2029a6];if(_0x55477b['EjwLo'](_0x335722,'$'))_0x4742b9=!_0x4742b9,_0x300cab+=_0x335722;else{if((_0x335722===','||_0x335722==='，')&&!_0x4742b9){const _0x2b8f09=_0x300cab[_0x111996(0x224,0x22b,0x24b,0x24c)]();if(_0x2b8f09)_0x1845d5[_0x147f45(-0x57,-0x71,-0x7b,-0xa9)](_0x2b8f09);_0x300cab='';}else _0x300cab+=_0x335722;}}if(_0x300cab[_0x147f45(-0x5c,-0x8a,-0x9e,-0x9)]())_0x1845d5[_0x111996(0x235,0x20c,0x20a,0x251)](_0x300cab['trim']());function _0x111996(_0x1fb73d,_0x21b71f,_0x338de4,_0x58c6c0){return _0x1abf4c(_0x1fb73d-0x2e,_0x338de4,_0x58c6c0-0x1f7,_0x58c6c0-0x138);}return _0x1845d5;},_0x46a4d8=_0x55477b[_0x1abf4c(0x3b,0x41,0x53,0x50)](_0x263d2c,_0x27620a),_0x1491df=[],_0x19d9b4=[];function _0x5a3e59(_0x4e589c,_0x2970a9,_0x556874,_0x3b4a25){return _0x115a(_0x2970a9- -0x375,_0x4e589c);}const _0xbec540=new Map();for(const _0x121d49 of _0x46a4d8){const _0x369d7e=_0x121d49[_0x5a3e59(-0x181,-0x1a5,-0x1de,-0x156)](SD_SYMBOL_PATTERN);if(_0x369d7e){const _0x3c4ad4=_0x369d7e[-0x23c1+0x1e04+-0x46*-0x15]||'',_0x33e3fe=(_0x369d7e[-0x3c*-0x35+-0x1598+-0x19*-0x5e]||'')[_0x1abf4c(0x79,0x99,0x55,0x75)](),_0x4cb82b=_0x369d7e[0x20e3+-0x65a+0x1e5*-0xe]||'',_0x134454=_0x369d7e[-0x1a43+-0x1e4a+-0x3*-0x12db]||'',_0x236ddf={'original':_0x121d49,'cleaned':_0x33e3fe,'prefix':_0x3c4ad4,'suffix':_0x4cb82b,'weight':_0x134454,'skip':shouldSkipTranslation(_0x121d49)||_0x55477b[_0x1abf4c(0x19,0x85,0x53,0x21)](shouldSkipTranslation,_0x33e3fe)};_0x1491df[_0x5a3e59(-0x14f,-0x161,-0x185,-0x114)](_0x236ddf),!_0x236ddf['skip']&&_0x33e3fe&&(_0x19d9b4[_0x5a3e59(-0x193,-0x161,-0x110,-0x166)](_0x33e3fe),_0xbec540[_0x1abf4c(0x56,0x5e,0x1f,0x74)](_0x33e3fe[_0x1abf4c(-0x17,0x35,0x3d,0x37)+'e'](),_0x236ddf));}else{if(_0x55477b[_0x1abf4c(0x7,-0x3d,-0x37,-0x36)](_0x5a3e59(-0x175,-0x1b7,-0x1a6,-0x198),'RynYY')){const _0x1b70ca={'original':_0x121d49,'cleaned':_0x121d49,'prefix':'','suffix':'','weight':'','skip':_0x55477b['VgUBD'](shouldSkipTranslation,_0x121d49)};_0x1491df[_0x1abf4c(0x97,0x8e,0x5a,0x23)](_0x1b70ca);if(!_0x1b70ca[_0x1abf4c(-0x5a,-0x23,-0x14,-0x15)]&&_0x121d49){if(_0x55477b[_0x1abf4c(0x2,0x30,0x41,0x22)]===_0x55477b['Gjsda']){const _0x4adc5c={};return _0x4adc5c[_0x5a3e59(-0x1d1,-0x183,-0x1c0,-0x1d5)]=[],_0x4adc5c[_0x5a3e59(-0x1c1,-0x1ea,-0x199,-0x227)+'t']='',_0x4adc5c['originalTa'+'gs']=[],_0x4adc5c;}else _0x19d9b4[_0x5a3e59(-0x12e,-0x161,-0x161,-0x1b2)](_0x121d49),_0xbec540[_0x5a3e59(-0x164,-0x19c,-0x171,-0x1aa)](_0x121d49[_0x1abf4c(0x30,0x8a,0x3d,-0xa)+'e'](),_0x1b70ca);}}else{if(_0x576eb6[_0x1abf4c(0x90,0x7e,0x3e,-0x13)]&&_0x58752f[_0x1abf4c(0x87,-0x7,0x3e,0x11)][_0x1abf4c(0x12,0x56,0x3b,0x51)]===_0x55477b[_0x1abf4c(-0x4d,-0x5b,-0x39,-0x20)]){const _0x1bc3d3=new _0x4f287c(_0x40f799[_0x1abf4c(0x6d,-0xc,0x3e,-0xa)]['message']);_0x1bc3d3[_0x5a3e59(-0x1c0,-0x180,-0x17b,-0x17f)]=_0x55477b[_0x5a3e59(-0x1da,-0x1f4,-0x1b5,-0x1ad)],_0x4fd73c(_0x1bc3d3);}else _0x3cb247(new _0x1693ad(_0x135214['result']));}}}function _0x1abf4c(_0x2cb6b4,_0x1a07ea,_0x4996c6,_0x51000c){return _0x115a(_0x4996c6- -0x1ba,_0x1a07ea);}return{'originalTags':_0x1491df,'cleanedTags':_0x19d9b4,'cleanedText':_0x55477b['VgUBD'](tagsToJsonString,_0x19d9b4),'tagMap':_0xbec540};}export function combineTranslationResult(_0x4c4de9,_0xdbf721){const _0x35d86c={};function _0x412a06(_0x552426,_0x502ae0,_0x540a28,_0x1fa9d3){return _0x115a(_0x502ae0- -0x1f,_0x1fa9d3);}_0x35d86c['yYfoi']=function(_0x42ec41,_0x4b7ce4){return _0x42ec41===_0x4b7ce4;};function _0x3d1338(_0x5b4afe,_0x273843,_0x340e09,_0x36a531){return _0x115a(_0x273843- -0xf6,_0x36a531);}_0x35d86c[_0x412a06(0x1bf,0x1c9,0x1b8,0x1b1)]=_0x3d1338(0x9d,0x7d,0x50,0x91),_0x35d86c[_0x3d1338(0xd8,0x120,0x15c,0x113)]=function(_0x389f44,_0x5c2e31){return _0x389f44!==_0x5c2e31;},_0x35d86c['frvUX']='unSxw';const _0x3a6655=_0x35d86c;if(!_0x4c4de9||!Array[_0x412a06(0x129,0x152,0x126,0x173)](_0x4c4de9))return[];const _0x4b4792={};if(_0xdbf721&&_0x3a6655['yYfoi'](typeof _0xdbf721,_0x3a6655[_0x3d1338(0xaf,0xf2,0x121,0xde)]))for(const [_0x29a5a0,_0x2be799]of Object[_0x3d1338(0x37,0x7e,0xa5,0xd0)](_0xdbf721)){_0x3a6655[_0x412a06(0x1cb,0x1f7,0x248,0x216)](_0x3d1338(0x8c,0x76,0x49,0x9f),_0x3a6655[_0x412a06(0x244,0x1f3,0x247,0x21a)])?_0x4b4792[_0x29a5a0[_0x3d1338(0x11a,0x101,0x152,0x141)+'e']()]=_0x2be799:_0x3ee765(new _0xff6497(_0x34aea3[_0x3d1338(0x10e,0xf5,0x108,0x132)]));}return _0x4c4de9[_0x412a06(0x186,0x194,0x14f,0x167)](_0x3297c8=>{function _0x352614(_0x193b45,_0xc2c5a2,_0x4bc95b,_0x245907){return _0x3d1338(_0x193b45-0x1c1,_0x193b45-0x394,_0x4bc95b-0x17f,_0x4bc95b);}const {original:_0xbdbcb1,cleaned:_0x2157d0,skip:_0x5c0857}=_0x3297c8;if(_0x5c0857){const _0x12256e={};return _0x12256e['original']=_0xbdbcb1,_0x12256e[_0x352614(0x438,0x484,0x439,0x416)+'n']='',_0x12256e[_0x1cb3da(-0x1da,-0x17d,-0x1d5,-0x1a6)]=_0x2157d0,_0x12256e['skipped']=!![],_0x12256e;}const _0x38a9d9=_0x4b4792[_0x2157d0['toLowerCas'+'e']()]||'',_0x4ee7e3={};_0x4ee7e3[_0x352614(0x4a3,0x464,0x44e,0x4b9)]=_0xbdbcb1,_0x4ee7e3[_0x1cb3da(-0x182,-0x17b,-0x1d4,-0x198)+'n']=_0x38a9d9;function _0x1cb3da(_0x3b0c3b,_0x144421,_0x185148,_0x335add){return _0x412a06(_0x3b0c3b-0x1b2,_0x335add- -0x313,_0x185148-0xbe,_0x3b0c3b);}return _0x4ee7e3['cleaned']=_0x2157d0,_0x4ee7e3[_0x1cb3da(-0x125,-0x129,-0xfe,-0x146)]=![],_0x4ee7e3;});}export function formatTranslationDisplay(_0x38f790,_0x26ca30={}){const _0x5e9ac9={};_0x5e9ac9[_0x23fcfe(-0x113,-0x138,-0xc8,-0x110)]=function(_0x13cba4,_0x35906d){return _0x13cba4===_0x35906d;},_0x5e9ac9[_0x5bac22(0x10a,0xe3,0x138,0xe5)]=_0x5bac22(0x157,0xe9,0x110,0x155),_0x5e9ac9[_0x23fcfe(-0x124,-0x13c,-0x10c,-0x16a)]=_0x23fcfe(-0x14a,-0x139,-0x130,-0x146);function _0x23fcfe(_0x4356a0,_0x3c7b83,_0x2f02fe,_0x250410){return _0x115a(_0x4356a0- -0x2c2,_0x250410);}function _0x5bac22(_0x26dbed,_0x4bdc72,_0x7d11e0,_0x4324ba){return _0x115a(_0x7d11e0- -0xcc,_0x4324ba);}const _0x20a1ef=_0x5e9ac9,{separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0x26ca30;if(!_0x38f790||!Array[_0x23fcfe(-0x151,-0xff,-0x14f,-0x16d)](_0x38f790))return'';return _0x38f790[_0x23fcfe(-0x10f,-0xec,-0x112,-0xbc)](_0x371a34=>{const _0x2a9819={};function _0x3b3b3d(_0x5e9be5,_0x5294c5,_0x36ab72,_0x495ee7){return _0x5bac22(_0x5e9be5-0x4d,_0x5294c5-0x1e,_0x495ee7-0x2a4,_0x5e9be5);}function _0x2aa492(_0x3510b5,_0x1a5c81,_0x371c8b,_0x3fc0fd){return _0x5bac22(_0x3510b5-0x1f0,_0x1a5c81-0x16b,_0x1a5c81-0x33f,_0x371c8b);}_0x2a9819[_0x2aa492(0x415,0x43e,0x450,0x422)]=_0x3b3b3d(0x392,0x3f5,0x409,0x3cb)+_0x3b3b3d(0x358,0x36e,0x368,0x3a9)+_0x2aa492(0x429,0x45a,0x423,0x486);const _0x290431=_0x2a9819;if(_0x371a34[_0x3b3b3d(0x3c1,0x394,0x3ee,0x3c4)]){if(_0x20a1ef[_0x3b3b3d(0x373,0x38b,0x37f,0x387)](_0x20a1ef[_0x3b3b3d(0x3e6,0x39d,0x3c9,0x3dc)],_0x20a1ef[_0x2aa492(0x3f2,0x411,0x43c,0x3dc)]))_0x5385a3[_0x3b3b3d(0x420,0x3d0,0x3e5,0x3cc)](_0x290431[_0x2aa492(0x433,0x43e,0x459,0x3f6)],_0xfba44e[_0x2aa492(0x3e7,0x43a,0x467,0x405)]);else return showOriginal?_0x371a34[_0x3b3b3d(0x39a,0x41d,0x3a2,0x3dd)]:'';}const _0x8838c2=[];if(showOriginal)_0x8838c2[_0x2aa492(0x451,0x487,0x4d4,0x4a9)](_0x371a34[_0x3b3b3d(0x3e5,0x399,0x41a,0x3dd)]);return showTranslation&&_0x371a34[_0x2aa492(0x418,0x40d,0x44f,0x3f1)+'n']&&_0x8838c2[_0x2aa492(0x49b,0x487,0x46a,0x483)]('('+_0x371a34[_0x2aa492(0x450,0x40d,0x3f2,0x3dc)+'n']+')'),_0x8838c2['join']('\x20');})['filter'](Boolean)[_0x23fcfe(-0x139,-0x127,-0x106,-0x128)](separator);}export async function translatePromptTags(_0x3e65e2){function _0x343506(_0x3c4b38,_0x58336a,_0x2d3f37,_0x2d1309){return _0x115a(_0x58336a- -0x2ab,_0x2d3f37);}const _0x5e0fa2={'fmnFA':'st-chatu8:'+_0x343506(-0xd6,-0x127,-0x157,-0xd8)+':','DobHI':function(_0xd208f0,_0x29c09b){return _0xd208f0===_0x29c09b;},'DNLjI':_0x2e4557(0x260,0x216,0x233,0x1eb),'jzEVm':function(_0x537929,_0x57ffb4){return _0x537929===_0x57ffb4;},'EQFrJ':_0x343506(-0x140,-0xf9,-0x105,-0x127),'wuhSl':function(_0xcb3c16,_0x1761fd){return _0xcb3c16(_0x1761fd);},'WDOMy':function(_0x3b6ae6,_0x2edd3b){return _0x3b6ae6!==_0x2edd3b;},'tPRGZ':_0x2e4557(0x2b0,0x26b,0x25b,0x22f)},{originalTags:_0x2a085d,cleanedText:_0x1ecce8}=preprocessPromptForTranslation(_0x3e65e2);function _0x2e4557(_0x5163ab,_0x1ff8eb,_0x5b98ed,_0x477c12){return _0x115a(_0x5b98ed-0x76,_0x477c12);}if(!_0x1ecce8){if(_0x5e0fa2[_0x2e4557(0x203,0x21c,0x209,0x1e3)](_0x343506(-0x11e,-0xee,-0x136,-0x11b),_0x5e0fa2[_0x343506(-0x15b,-0x10a,-0x152,-0x133)])){const _0x1ed553={};return _0x1ed553[_0x2e4557(0x254,0x218,0x268,0x260)]=[],_0x1ed553[_0x2e4557(0x216,0x20e,0x201,0x203)+'t']='',_0x1ed553['originalTa'+'gs']=[],_0x1ed553;}else return'';}try{if(_0x5e0fa2[_0x2e4557(0x234,0x210,0x1fd,0x1eb)](_0x5e0fa2['EQFrJ'],_0x5e0fa2['EQFrJ'])){const _0x18ac70=await _0x5e0fa2['wuhSl'](callTranslation,_0x1ecce8),_0x3d93b3=_0x5e0fa2[_0x2e4557(0x276,0x272,0x273,0x293)](parseTranslationResult,_0x18ac70),_0x27cd58=combineTranslationResult(_0x2a085d,_0x3d93b3),_0x2d4067=_0x5e0fa2[_0x2e4557(0x2bf,0x29e,0x273,0x2b7)](formatTranslationDisplay,_0x27cd58),_0x394107={};return _0x394107[_0x2e4557(0x22b,0x263,0x268,0x248)]=_0x27cd58,_0x394107[_0x343506(-0xe9,-0x120,-0x137,-0x136)+'t']=_0x2d4067,_0x394107[_0x2e4557(0x24b,0x239,0x242,0x240)+'gs']=_0x2a085d,_0x394107;}else{_0x1c1238[_0x343506(-0xa4,-0xb3,-0xf9,-0x106)](_0x5e0fa2['fmnFA'],_0x40dce3);throw _0x5c12ba;}}catch(_0x1e12b2){if(_0x5e0fa2[_0x2e4557(0x212,0x201,0x257,0x210)](_0x5e0fa2[_0x2e4557(0x1bd,0x1b9,0x200,0x220)],_0x2e4557(0x277,0x261,0x25b,0x231))){const _0xf3e7e5=new _0x41fc91(_0x508246[_0x343506(-0x71,-0xb3,-0xb7,-0x75)]['message']);_0xf3e7e5['name']=_0x2e4557(0x1f3,0x209,0x1e8,0x19b),_0x111939(_0xf3e7e5);}else{console[_0x2e4557(0x242,0x2b2,0x26e,0x245)](_0x5e0fa2[_0x343506(-0xbb,-0xbe,-0xb1,-0xf4)],_0x1e12b2);throw _0x1e12b2;}}}export function parseTranslationResult(_0x10a201){const _0x1fa39d={'poFsg':function(_0x2b3b88,_0x2a335c){return _0x2b3b88(_0x2a335c);},'XUMuv':_0x4bbd9e(0x437,0x432,0x456,0x468),'lNvgK':function(_0x4b6737,_0x8754e9){return _0x4b6737(_0x8754e9);},'Srmzd':function(_0x15b149,_0x24f15a){return _0x15b149!==_0x24f15a;},'lpKAC':_0x4bbd9e(0x3aa,0x395,0x3de,0x3af),'soIsL':_0x4bbd9e(0x49d,0x497,0x453,0x3fd)+_0x58ab3c(0x13,-0x4d,-0x1f,-0x74)+_0x4bbd9e(0x455,0x476,0x447,0x468),'OlvHI':'aOJFC','yrZOU':'yhtAg','DxjWY':function(_0x33f56d,_0x54315f){return _0x33f56d>_0x54315f;},'UTdHv':_0x4bbd9e(0x3ee,0x393,0x3d9,0x393)};if(!_0x10a201)return{};try{const _0x183481=_0x10a201[_0x4bbd9e(0x426,0x44c,0x430,0x428)](/\{[\s\S]*\}/);if(_0x183481){const _0x5b0b26=JSON['parse'](_0x183481[-0x5a0+-0x71*-0xa+0x2*0x9b]);if(typeof _0x5b0b26===_0x4bbd9e(0x3c3,0x39a,0x3d3,0x3ef)&&_0x1fa39d['Srmzd'](_0x5b0b26,null))return _0x5b0b26;}}catch(_0x1751aa){if(_0x4bbd9e(0x3ba,0x39c,0x3de,0x3ec)===_0x1fa39d[_0x58ab3c(0x3a,-0x5,-0x13,0x13)])console['warn'](_0x1fa39d[_0x4bbd9e(0x3bf,0x3c2,0x3cf,0x3b1)],_0x1751aa[_0x4bbd9e(0x415,0x403,0x427,0x401)]);else{_0x1fa39d[_0x4bbd9e(0x4b8,0x4b1,0x463,0x41c)](_0x3e58ae,'翻译失败:\x20'+_0x127a48[_0x58ab3c(-0x19,0x7,-0x29,0x16)]),_0x424325[_0x58ab3c(0x32,0x41,0x8,0x19)](_0x1fa39d[_0x4bbd9e(0x45f,0x462,0x440,0x455)],_0x40a317);throw _0x1a9157;}}const _0x12977f=String(_0x10a201)[_0x58ab3c(-0x18,0x35,-0xd,-0x7)](/[\r\n]+/g,'\x20')['replace'](/^[\s"'`]+|[\s"'`]+$/g,'')[_0x58ab3c(0x4b,-0x28,0x1f,0x52)]();function _0x4bbd9e(_0x1775b8,_0x34c5a0,_0x25d443,_0x4dd320){return _0x115a(_0x25d443-0x260,_0x34c5a0);}const _0xf2c46e=_0x12977f[_0x58ab3c(0x6,-0x16,-0x36,-0x7a)](/[,，]/)['map'](_0x1c232b=>_0x1c232b['trim']())[_0x4bbd9e(0x457,0x440,0x403,0x3e3)](Boolean),_0x3cd2a0={};function _0x58ab3c(_0x9e4fa5,_0x6b2706,_0x3a481b,_0x47b286){return _0x115a(_0x3a481b- -0x1f0,_0x9e4fa5);}for(const _0x54fc41 of _0xf2c46e){if(_0x1fa39d[_0x58ab3c(-0x35,0x35,-0x1,-0x4)]===_0x1fa39d[_0x4bbd9e(0x420,0x3b1,0x3fd,0x414)]){const _0x3b4837=_0x1ffcb2[-0x1fca+0x358+0x1c73]||'',_0x48bba5=(_0x17d9d5[-0x142+0x1e9b+-0x1d57]||'')[_0x58ab3c(0x4a,0x48,0x1f,-0x10)](),_0x164e5d=_0x1b3ece[0x80b*0x3+0x18*-0x11f+0x2ca]||'',_0x3f80f5=_0x39d1b5[0x622+-0x649*0x2+0x1c*0x3b]||'',_0x3df39f={'original':_0x50b3eb,'cleaned':_0x48bba5,'prefix':_0x3b4837,'suffix':_0x164e5d,'weight':_0x3f80f5,'skip':_0x1fa39d[_0x4bbd9e(0x3d3,0x3b9,0x3ce,0x3c6)](_0x393dce,_0x3ad4de)||_0x1fa39d['poFsg'](_0x1511ea,_0x48bba5)};_0x10a5d4[_0x58ab3c(0x6e,0x39,0x24,-0x12)](_0x3df39f),!_0x3df39f['skip']&&_0x48bba5&&(_0x13c57b[_0x4bbd9e(0x496,0x448,0x474,0x421)](_0x48bba5),_0x447053[_0x4bbd9e(0x473,0x45b,0x439,0x44c)](_0x48bba5[_0x58ab3c(0x43,-0x2a,0x7,0x4f)+'e'](),_0x3df39f));}else{const _0x5939c3=_0x54fc41['indexOf']('\x5c');if(_0x1fa39d[_0x4bbd9e(0x3a2,0x3bf,0x3dd,0x3bb)](_0x5939c3,0x227e+0x1647+-0x38c5*0x1)){if(_0x1fa39d[_0x58ab3c(-0x80,-0x49,-0x54,0x2)](_0x58ab3c(0x76,0x3,0x27,0x67),_0x1fa39d[_0x4bbd9e(0x4af,0x487,0x45a,0x416)])){const _0x2be64b=_0x54fc41[_0x4bbd9e(0x3cf,0x3d2,0x40b,0x400)](0x39*0xa+0x5d*0x40+-0x87e*0x3,_0x5939c3)[_0x58ab3c(0x56,-0x1f,0x1f,0x6b)](),_0x33d8c0=_0x54fc41[_0x4bbd9e(0x3c8,0x3be,0x40b,0x40a)](_0x5939c3+(-0x764+0x6*0x163+0x3*-0x4f))[_0x58ab3c(-0x1b,0x17,0x1f,0x40)]();if(_0x2be64b)_0x3cd2a0[_0x2be64b]=_0x33d8c0;}else _0x2ee0ea[_0x58ab3c(0x56,0x42,0x24,0x54)](_0x3ca0c5),_0x276548[_0x58ab3c(-0x4d,-0x1a,-0x17,-0x48)](_0x3c454a['toLowerCas'+'e'](),_0x50f09a);}}}return _0x3cd2a0;}function generateRequestId(){function _0x4735fe(_0x780e78,_0x7fc798,_0x2e06a0,_0x4fa91d){return _0x115a(_0x2e06a0- -0x2df,_0x7fc798);}const _0x1688cd={};_0x1688cd[_0x4735fe(-0x1ab,-0x18d,-0x160,-0x1b3)]=function(_0x5b85eb,_0x437f34){return _0x5b85eb!==_0x437f34;};function _0x4b2339(_0x32dba5,_0x5d3e67,_0x1b91a4,_0x18052a){return _0x115a(_0x18052a- -0x27a,_0x5d3e67);}_0x1688cd[_0x4735fe(-0x11f,-0xd8,-0x123,-0x132)]=_0x4735fe(-0x18f,-0x15f,-0x164,-0x1ab),_0x1688cd[_0x4b2339(-0x82,-0x44,-0x4d,-0x70)]='arnyQ',_0x1688cd[_0x4b2339(-0xde,-0xa3,-0xd9,-0x96)]=function(_0x2a8326,_0x5a88d8){return _0x2a8326+_0x5a88d8;};const _0x3c9476=_0x1688cd;if(crypto&&crypto[_0x4b2339(-0x81,-0x110,-0x93,-0xc5)]){if(_0x3c9476[_0x4b2339(-0xd2,-0xee,-0xea,-0xfb)](_0x3c9476[_0x4b2339(-0x6d,-0xc8,-0x10d,-0xbe)],_0x3c9476[_0x4b2339(-0x90,-0x87,-0xa8,-0x70)]))return crypto[_0x4b2339(-0xff,-0xaa,-0xc9,-0xc5)]();else{_0x3a23ba['removeList'+_0x4735fe(-0x173,-0x115,-0x12f,-0x172)](_0xd15d32[_0x4735fe(-0x13d,-0x132,-0x159,-0x10b)+_0x4735fe(-0x10f,-0x134,-0x157,-0x11d)+_0x4735fe(-0x113,-0x10c,-0x11d,-0x147)],_0x223dda);if(_0x58c62b)_0x21d3b8(_0x46cc55);}}return _0x3c9476[_0x4735fe(-0xfe,-0xb0,-0xfb,-0xd0)](Date[_0x4b2339(-0x13f,-0xeb,-0xf1,-0x10d)]()['toString'](-0xeaf*-0x1+0x5e*-0x13+-0xd*0x95),Math[_0x4735fe(-0xcd,-0xd1,-0x11b,-0xf8)]()[_0x4b2339(-0xb3,-0xaf,-0xa2,-0x7e)](-0x1*-0x1cbb+0xbed+-0x1442*0x2)[_0x4735fe(-0xca,-0x127,-0xe1,-0xaa)](0x14ac+0x1*-0x7f4+-0x65b*0x2));}export function LLM_TRANSLATION_GET_PROMPT(){const _0x51b94f={'buAqu':function(_0x2677ef,_0x1b8396){return _0x2677ef(_0x1b8396);},'apusa':_0x15b575(-0x58,-0x2b,-0x2c,0x1d)};function _0x15b575(_0x57593e,_0x5f43b3,_0x21d46a,_0x457c9d){return _0x115a(_0x21d46a- -0x1a3,_0x5f43b3);}return new Promise((_0x3a9a70,_0xc9a65)=>{const _0xb6db42=generateRequestId();console[_0x26cfdf(-0x1f8,-0x1b9,-0x18d,-0x1df)]('st-chatu8:'+_0x234de4(0x3c7,0x42b,0x38f,0x3df)+_0x26cfdf(-0x199,-0x1db,-0x21b,-0x1cd)+_0xb6db42+')');const _0x44233c=_0x3df22d=>{if(_0x3df22d['id']!==_0xb6db42)return;function _0x1b7013(_0x40f4f1,_0x39f1de,_0x52d261,_0x3eded7){return _0x234de4(_0x52d261,_0x39f1de-0x1cb,_0x52d261-0x0,_0x39f1de- -0x3cb);}eventSource[_0x1b7013(-0x87,-0x38,-0x7,-0x82)+_0x1b7013(0x12,-0x2,0x0,-0x12)](eventNames[_0x442019(0x33a,0x357,0x333,0x303)+_0x1b7013(-0x4a,-0x9,-0x5e,-0x55)+'PROMPT_RES'+_0x442019(0x3be,0x3c2,0x3c4,0x3c4)],_0x44233c);const {prompt:_0x47e342}=_0x3df22d;console[_0x1b7013(0xb,0x26,0x33,0x74)](_0x1b7013(0x8,0x41,0x4e,0x44)+_0x1b7013(0x20,-0x13,0x23,0x7)+_0x1b7013(-0x1d,-0x1b,-0xf,0x2a)+_0xb6db42+'):',_0x47e342);function _0x442019(_0x4d4bc0,_0x479022,_0x37207a,_0x418a95){return _0x26cfdf(_0x418a95,_0x479022-0x164,_0x37207a-0xa8,_0x479022-0x588);}_0x51b94f['buAqu'](_0x3a9a70,_0x47e342);};eventSource['on'](eventNames['LLM_TRANSL'+_0x234de4(0x3d2,0x3ff,0x3a6,0x3c2)+_0x26cfdf(-0x18b,-0x1f4,-0x1ab,-0x1a2)+_0x26cfdf(-0x1f0,-0x1cb,-0x1dd,-0x1c6)],_0x44233c);const _0x3b4948={};_0x3b4948['id']=_0xb6db42;function _0x26cfdf(_0x1a60d9,_0x1720e6,_0x19e887,_0x23cd3b){return _0x15b575(_0x1a60d9-0x161,_0x1a60d9,_0x23cd3b- -0x214,_0x23cd3b-0x113);}eventSource[_0x26cfdf(-0x1f2,-0x240,-0x1de,-0x1f8)](eventNames[_0x234de4(0x374,0x3f2,0x3da,0x39f)+_0x26cfdf(-0x1c1,-0x21c,-0x202,-0x20e)+_0x234de4(0x3c2,0x3d3,0x3bd,0x399)+_0x234de4(0x3b6,0x397,0x3e9,0x3cf)],_0x3b4948);function _0x234de4(_0x540e69,_0x1e889f,_0x53b0b8,_0x391591){return _0x15b575(_0x540e69-0x183,_0x540e69,_0x391591-0x3bc,_0x391591-0x19f);}setTimeout(()=>{eventSource[_0x3e8d9f(0x2d2,0x324,0x2a7,0x28e)+'ener'](eventNames[_0x1d27c6(0x3e7,0x42a,0x45f,0x3df)+_0x1d27c6(0x40b,0x44d,0x41f,0x474)+_0x1d27c6(0x4ca,0x4b9,0x496,0x483)+_0x1d27c6(0x4ba,0x495,0x497,0x455)],_0x44233c);function _0x1d27c6(_0x47a8eb,_0x5675b1,_0x58b3ba,_0x175af0){return _0x26cfdf(_0x58b3ba,_0x5675b1-0x126,_0x58b3ba-0xff,_0x5675b1-0x65b);}function _0x3e8d9f(_0x53e927,_0x3aa376,_0x13c2e3,_0x481a61){return _0x26cfdf(_0x3aa376,_0x3aa376-0xb0,_0x13c2e3-0xe1,_0x53e927-0x50f);}_0xc9a65(new Error(_0x51b94f[_0x3e8d9f(0x319,0x32f,0x321,0x342)]));},-0x10a3*0x1+0x6*-0x664+0x5e0b);});}export function LLM_TRANSLATION(_0xd739ed,{timeoutMs:timeoutMs=-0x209*-0x1f+0x1*0xd98b+-0x2e42}={}){const _0x6b5b5a={'ulfsc':function(_0x3cd977,_0x28a304){return _0x3cd977===_0x28a304;},'ACSAM':_0x5ddb57(-0x7f,-0x3a,-0x44,-0xc0),'lhthH':_0x5ddb57(-0xa7,-0xc4,-0xe3,-0xc6),'oMCpS':function(_0x10f2fb,_0x327751){return _0x10f2fb(_0x327751);},'HTxVx':function(_0x156cbb){return _0x156cbb();},'xdwRK':function(_0xbab40b,_0x29dd59){return _0xbab40b!==_0x29dd59;},'FxOAE':'dFObu','DhvtY':_0x5ddb57(-0xb9,-0x80,-0xe1,-0x64),'HExUW':_0x4e0f65(0x144,0x137,0xe9,0x169),'ftuFP':function(_0x5a9ce4,_0x273c37){return _0x5a9ce4===_0x273c37;},'mDWYS':_0x5ddb57(-0x3b,0x5,-0x2b,-0x65)};function _0x4e0f65(_0x35111e,_0x2c5039,_0x4e05ad,_0x1a3e91){return _0x115a(_0x2c5039- -0x3b,_0x35111e);}function _0x5ddb57(_0x3613b8,_0x2082c1,_0x4c2435,_0x437c6b){return _0x115a(_0x3613b8- -0x249,_0x4c2435);}return new Promise((_0x2af668,_0xa9d3ec)=>{function _0x343414(_0x3771a8,_0x4e4dd9,_0x934280,_0x169b3b){return _0x4e0f65(_0x169b3b,_0x934280-0xa0,_0x934280-0x68,_0x169b3b-0x2d);}const _0xb65eaf={'sQIMA':function(_0x4d0b29,_0x408c8f){function _0x487870(_0xfba649,_0x48e1de,_0x5a7e0d,_0x1992df){return _0x115a(_0xfba649- -0x181,_0x1992df);}return _0x6b5b5a[_0x487870(0x8f,0x81,0x9b,0xc7)](_0x4d0b29,_0x408c8f);},'qtTkn':function(_0x3df23a,_0x46043f){function _0x242d41(_0x5b4e6e,_0x5e099,_0x5aa394,_0x1ce903){return _0x115a(_0x5e099-0x311,_0x1ce903);}return _0x6b5b5a[_0x242d41(0x553,0x50a,0x51f,0x518)](_0x3df23a,_0x46043f);},'zhHQZ':_0x6b5b5a[_0x343414(0x22e,0x2b1,0x26d,0x281)],'qqnlG':function(_0x2fb8b1,_0xa92fe2){function _0x8faa9a(_0x2dc39c,_0x38e56c,_0x27bc97,_0x32eb2d){return _0x343414(_0x2dc39c-0x12a,_0x38e56c-0x188,_0x32eb2d- -0x6f,_0x27bc97);}return _0x6b5b5a[_0x8faa9a(0x1c7,0x1d8,0x255,0x206)](_0x2fb8b1,_0xa92fe2);},'OHFOY':function(_0x3d6282){function _0x196d12(_0x3c45c8,_0x9e21c1,_0x5afffe,_0xa290f){return _0x343414(_0x3c45c8-0x82,_0x9e21c1-0x1c,_0x9e21c1- -0x158,_0x3c45c8);}return _0x6b5b5a[_0x196d12(0xc9,0xe0,0x9f,0x94)](_0x3d6282);},'eOebR':_0x343414(0x269,0x251,0x23b,0x28a),'RnDTc':function(_0x43463a,_0x19cdf4){function _0x513695(_0x32e0f9,_0x1d4595,_0x73f57d,_0x3d2311){return _0x3273d1(_0x32e0f9-0xbf,_0x1d4595-0x60,_0x1d4595- -0x6be,_0x32e0f9);}return _0x6b5b5a[_0x513695(-0xc5,-0xdd,-0x12a,-0xcc)](_0x43463a,_0x19cdf4);},'LKSHV':_0x6b5b5a[_0x3273d1(0x553,0x5af,0x562,0x56b)],'bhrAp':_0x6b5b5a['HExUW'],'lDiiE':function(_0x1eb582,_0x1fb7df){function _0x38922f(_0x589e1b,_0x1ce41e,_0x54a68,_0x17e99b){return _0x3273d1(_0x589e1b-0x156,_0x1ce41e-0x197,_0x589e1b- -0x305,_0x54a68);}return _0x6b5b5a[_0x38922f(0x2bc,0x279,0x2d6,0x282)](_0x1eb582,_0x1fb7df);},'iTXZX':_0x6b5b5a[_0x343414(0x1c3,0x1a9,0x1fa,0x1fe)],'rxqvR':function(_0x9eed43,_0x5b14ec){return _0x9eed43(_0x5b14ec);}},_0x13b1cf=_0x6b5b5a[_0x3273d1(0x571,0x5e8,0x5a4,0x597)](generateRequestId);console[_0x3273d1(0x585,0x56c,0x5a9,0x5ab)](_0x343414(0x285,0x282,0x258,0x288)+_0x343414(0x1fa,0x241,0x243,0x243)+_0x3273d1(0x57d,0x538,0x568,0x58a)+_0x13b1cf+')');let _0x4cfe75=null;const _0x3a1ec9=()=>{const _0x5581c3={};_0x5581c3[_0x129484(0x172,0x15c,0x1c1,0x1a9)]=function(_0x3c9289,_0x4ba191){return _0x3c9289===_0x4ba191;};const _0x5f4704=_0x5581c3;function _0x5ad6e8(_0x243773,_0x5b7097,_0x47310c,_0x493c70){return _0x3273d1(_0x243773-0xbd,_0x5b7097-0x72,_0x5b7097- -0x4ff,_0x493c70);}function _0x129484(_0xb4bcee,_0x5d3eff,_0x5b5d33,_0x1907e8){return _0x343414(_0xb4bcee-0xeb,_0x5d3eff-0xc0,_0x1907e8- -0x41,_0xb4bcee);}if(_0x6b5b5a[_0x5ad6e8(0xac,0xa9,0xef,0xef)](_0x6b5b5a[_0x129484(0x181,0x1fc,0x1f6,0x1b1)],_0x6b5b5a[_0x129484(0x21f,0x1e1,0x23a,0x20a)])){const _0x25a851=_0x1e8c72[_0x1bdbbd];if(_0x25a851==='$')_0x378de0=!_0x555c90,_0x4cde09+=_0x25a851;else{if((_0x5f4704[_0x129484(0x1f6,0x193,0x1a2,0x1a9)](_0x25a851,',')||_0x5f4704[_0x129484(0x1bf,0x18e,0x1ce,0x1a9)](_0x25a851,'，'))&&!_0x53eda2){const _0x57a246=_0x58bd16['trim']();if(_0x57a246)_0x54fadf[_0x5ad6e8(0x134,0xe6,0xa3,0xfb)](_0x57a246);_0x129e9d='';}else _0xec5f4+=_0x25a851;}}else{eventSource[_0x5ad6e8(0x1,0x4c,0x58,0x89)+_0x5ad6e8(0x6e,0x82,0x5b,0xcb)](eventNames[_0x5ad6e8(0x43,0x58,0x16,0x6b)+_0x5ad6e8(0x23,0x5a,0x3f,0x4)+_0x5ad6e8(0xaa,0x94,0x65,0xb9)],_0x49e62e);if(_0x4cfe75)_0x6b5b5a['oMCpS'](clearTimeout,_0x4cfe75);}},_0x49e62e=_0xd5fb4b=>{const _0x1e9952={};function _0x6e2687(_0x45ca43,_0x57bee3,_0x3abc27,_0x427d05){return _0x3273d1(_0x45ca43-0x8,_0x57bee3-0x2d,_0x427d05- -0x278,_0x57bee3);}_0x1e9952['KMTvu']=_0x406896(0x3bd,0x39a,0x3de,0x3b3)+'\x20AI\x20设置已统一到'+'\x20LLM\x20设置页面';function _0x406896(_0x30d0dc,_0x14ff97,_0x306ad3,_0x59130d){return _0x343414(_0x30d0dc-0x172,_0x14ff97-0x1d6,_0x306ad3-0x186,_0x59130d);}const _0x173e9c=_0x1e9952;if(_0xb65eaf[_0x6e2687(0x331,0x3be,0x39a,0x36a)]!==_0xb65eaf[_0x6e2687(0x368,0x3ba,0x366,0x36a)])_0x2cc806=!_0x259aab,_0x5cda6c+=_0x10a28d;else{if(_0xb65eaf[_0x406896(0x40c,0x404,0x3eb,0x428)](_0xd5fb4b['id'],_0x13b1cf))return;_0xb65eaf['OHFOY'](_0x3a1ec9),console[_0x406896(0x3ec,0x3cd,0x3c3,0x3c3)](_0x406896(0x3f9,0x3dc,0x3de,0x3fd)+_0x6e2687(0x38b,0x340,0x310,0x33b)+'\x20执行结果\x20(ID:'+'\x20'+_0x13b1cf+'):',_0xd5fb4b);if(_0xd5fb4b[_0x406896(0x427,0x3cf,0x3d9,0x404)])_0x406896(0x381,0x401,0x3c1,0x37b)!==_0xb65eaf[_0x406896(0x381,0x36e,0x383,0x3ac)]?!_0x53bcaf&&(_0x4d6a25['log'](_0x173e9c[_0x406896(0x351,0x385,0x37f,0x33a)]),_0x36bb1c=!![]):_0xb65eaf[_0x406896(0x3bc,0x3c4,0x3a4,0x35a)](_0x2af668,_0xd5fb4b[_0x6e2687(0x372,0x35d,0x364,0x344)]);else{if(_0xb65eaf[_0x6e2687(0x32d,0x394,0x33c,0x364)](_0xb65eaf[_0x6e2687(0x330,0x348,0x2ca,0x2fe)],_0xb65eaf[_0x406896(0x3a0,0x39d,0x390,0x374)])){if(!_0xfe679e[_0x406896(0x360,0x3b1,0x35c,0x35e)](_0x9d1825))return'[]';return _0x1c2f6f[_0x6e2687(0x30c,0x371,0x306,0x333)](_0x1fcd85[_0x406896(0x36b,0x35b,0x38e,0x3d3)](_0x55fa1d=>_0x55fa1d&&typeof _0x55fa1d==='string'));}else{if(_0xd5fb4b[_0x6e2687(0x385,0x34b,0x351,0x351)]&&_0xd5fb4b['error'][_0x406896(0x393,0x3b7,0x3e0,0x419)]===_0xb65eaf[_0x406896(0x3ad,0x3e1,0x3ed,0x42a)]){const _0xd7f642=new Error(_0xd5fb4b[_0x6e2687(0x327,0x369,0x304,0x351)][_0x406896(0x3e1,0x395,0x3b2,0x3f2)]);_0xd7f642[_0x6e2687(0x351,0x385,0x352,0x34e)]=_0xb65eaf['bhrAp'],_0xa9d3ec(_0xd7f642);}else{if(_0xb65eaf[_0x406896(0x411,0x40d,0x3ea,0x3b4)](_0x6e2687(0x33e,0x32f,0x314,0x367),_0xb65eaf[_0x406896(0x3b4,0x3b4,0x399,0x377)]))_0xb65eaf['rxqvR'](_0xa9d3ec,new Error(_0xd5fb4b[_0x406896(0x421,0x3e5,0x3d6,0x421)]));else{if(_0xb65eaf[_0x6e2687(0x34a,0x330,0x30b,0x328)](_0x2adfd1['id'],_0x1627f3))return;_0x3f1fe2[_0x406896(0x34f,0x3b9,0x365,0x323)+_0x406896(0x3d7,0x378,0x39b,0x38f)](_0x193246[_0x6e2687(0x310,0x2a5,0x2ad,0x2df)+_0x406896(0x35a,0x3cf,0x394,0x3a7)+'PROMPT_RES'+_0x6e2687(0x374,0x332,0x346,0x34a)],_0x5a2bbc);const {prompt:_0x190b1e}=_0x4221be;_0x1005c3[_0x406896(0x3fa,0x3a7,0x3c3,0x38e)](_0x6e2687(0x2fc,0x37b,0x315,0x34c)+_0x406896(0x3d0,0x361,0x38a,0x38b)+'(ID:\x20'+_0x5013d7+'):',_0x190b1e),_0xb65eaf['qtTkn'](_0x2de803,_0x190b1e);}}}}}};function _0x3273d1(_0x3c60fa,_0x1d7ef1,_0x41f609,_0x4973ee){return _0x5ddb57(_0x41f609-0x61a,_0x1d7ef1-0xd0,_0x4973ee,_0x4973ee-0x15c);}eventSource['on'](eventNames[_0x343414(0x1f0,0x225,0x1eb,0x195)+_0x3273d1(0x525,0x55d,0x559,0x51b)+_0x343414(0x1eb,0x257,0x227,0x1ee)],_0x49e62e);const _0x40a7c1={};_0x40a7c1['prompt']=_0xd739ed,_0x40a7c1['id']=_0x13b1cf,eventSource[_0x343414(0x22d,0x24d,0x224,0x1df)](eventNames[_0x3273d1(0x596,0x5a8,0x557,0x537)+_0x3273d1(0x607,0x59f,0x5da,0x5cc)+_0x343414(0x286,0x226,0x23a,0x20d)],_0x40a7c1),_0x4cfe75=setTimeout(()=>{function _0x8c0de6(_0x378f20,_0x4bc9cd,_0x14914c,_0x11e061){return _0x3273d1(_0x378f20-0x4a,_0x4bc9cd-0xaf,_0x378f20- -0x90,_0x14914c);}function _0x4b09db(_0x27966d,_0x211a5b,_0x511120,_0x413dae){return _0x3273d1(_0x27966d-0x38,_0x211a5b-0x16a,_0x27966d- -0x46c,_0x211a5b);}_0x6b5b5a[_0x8c0de6(0x514,0x55f,0x555,0x4f3)](_0x3a1ec9),_0xa9d3ec(new Error(_0x4b09db(0x137,0x120,0x13f,0xf2)+'时（'+timeoutMs+'ms）'));},timeoutMs);});}export async function callTranslation(_0x19de5a){function _0x459ea1(_0x4e7de5,_0x4dcaf2,_0x237aa3,_0x3f8a12){return _0x115a(_0x3f8a12- -0x2f5,_0x4e7de5);}const _0x9790c3={'gHcdf':function(_0x4a68d8,_0x65df42){return _0x4a68d8===_0x65df42;},'kSXEi':'TIKFY','eZPkX':function(_0x280da5,_0x12ef07,_0x1e13d3){return _0x280da5(_0x12ef07,_0x1e13d3);},'KnhZZ':function(_0x340fb7,_0x394c3d){return _0x340fb7||_0x394c3d;},'KfKle':function(_0x4202b7,_0xe32ed3){return _0x4202b7(_0xe32ed3);},'HjkrA':'user','jpzHk':function(_0x35012d,_0x3f3100){return _0x35012d(_0x3f3100);},'ZkPmm':function(_0x4ba5c6,_0x242aa4){return _0x4ba5c6(_0x242aa4);},'HkKje':'翻译失败:'};function _0x1704c5(_0xd2855a,_0x2d92e4,_0x4a093b,_0x456215){return _0x115a(_0x2d92e4-0x25a,_0xd2855a);}try{if(_0x9790c3[_0x1704c5(0x3e2,0x3e8,0x3b0,0x3c2)](_0x9790c3[_0x1704c5(0x37d,0x3ca,0x3d9,0x3ef)],_0x1704c5(0x3fa,0x407,0x427,0x3c1))){let _0xaec067=_0x9790c3[_0x459ea1(-0x135,-0x15f,-0x122,-0x151)](buildPromptForRequestType,_0x459ea1(-0x120,-0x1a3,-0x18e,-0x15b)+'n',_0x9790c3[_0x459ea1(-0x1a9,-0x1d5,-0x1be,-0x180)](_0x19de5a,''));_0xaec067=_0x9790c3['KfKle'](mergeAdjacentMessages,_0xaec067);const _0x2f5b27=[..._0xaec067,{'role':_0x9790c3[_0x459ea1(-0x129,-0x13c,-0x175,-0x15a)],'content':_0x9790c3[_0x1704c5(0x413,0x3cf,0x3e4,0x3b5)](_0x19de5a,'')}];_0x9790c3['jpzHk'](updateCombinedPrompt,_0x2f5b27);const _0x773605=await _0x9790c3[_0x1704c5(0x3d2,0x3f3,0x421,0x39d)](LLM_TRANSLATION,_0x2f5b27);return _0x773605;}else{const _0x402aa9=_0x295304[_0x1704c5(0x4a1,0x469,0x47a,0x46b)]();if(_0x402aa9)_0x5c0892[_0x459ea1(-0x100,-0xaf,-0xf9,-0xe1)](_0x402aa9);_0x4cc23a='';}}catch(_0x4a1679){_0x9790c3[_0x459ea1(-0x152,-0xd6,-0xf2,-0x11a)](addLog,_0x1704c5(0x3f1,0x412,0x3c5,0x40a)+_0x4a1679['message']),console['error'](_0x9790c3[_0x1704c5(0x3a6,0x3d0,0x3ec,0x413)],_0x4a1679);throw _0x4a1679;}}let isAiInitialized=![];export function initAiSettings(_0x34471a){const _0x4d17fb={};function _0x5800a4(_0x5b3209,_0x3702b3,_0x16fcff,_0x25bcb7){return _0x115a(_0x16fcff-0x28a,_0x3702b3);}_0x4d17fb['zkpKD']='ltVnA',_0x4d17fb[_0x5800a4(0x493,0x4ae,0x496,0x4b1)]=_0x1f4872(0x5e7,0x5a3,0x588,0x5c2)+_0x1f4872(0x5c3,0x5ba,0x536,0x577)+'\x20LLM\x20设置页面';function _0x1f4872(_0x21bd61,_0x5ee1bf,_0x450aa1,_0x533cc0){return _0x115a(_0x533cc0-0x3cf,_0x5ee1bf);}const _0x461a31=_0x4d17fb;!isAiInitialized&&(_0x461a31['zkpKD']!==_0x1f4872(0x53b,0x5be,0x58a,0x58a)?(console['log'](_0x461a31[_0x1f4872(0x610,0x605,0x615,0x5db)]),isAiInitialized=!![]):_0x3d7fac[_0x1f4872(0x593,0x59a,0x611,0x5e3)]('('+_0xb46164[_0x1f4872(0x58f,0x56e,0x5bf,0x569)+'n']+')'));}function _0x478e(){const _0x263dea=['rxjwq0q','whPuEMW','BM93','Be52z0S','C29jC0W','A1nyrwK','AxnbCNjHEq','qwjVCNrfCNjVCG','B2jQzwn0','zw50CMLLCW','s25OwLO','sgTlAMu','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','yKXIu1a','yu1sEgu','CMvTB3zLtgLZDa','DNbUvNi','yxbWBhK','rhHQv1K','A1PqCfG','t2ftwNa','ufjptvbux1jfuq','vuDsu2K','mK9QugreBG','rwP3tg8','ioE/U+IVKEApKoEKUUIVJEAGH+ETVUwKSEI0Pq','Cxrxuxu','teXnx1rsqu5tta','ANPfvM0','qvrjt05FuKvtua','AM9PBG','Dfbsr1O','zgLZCgXHEvrLEa','y2XLyw5Lza','quntqu0','z0HJzgy','zfj5Euy','D0n2Dhu','rgH2DfK','C29Tzq','rg9IseK','s01uDNu','Burxwvm','y0P0ww4','keLeoIa','zu9LyLi','s2zlBgu','DhjHBNnSyxrPBW','sgPRCKe','u3jTEMq','ExjAt1u','q2TRwLe','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','nJi4nJC4rxjOwgvr','re5mAKK','zfPKr2u','zMLSDgvY','zvPqA1G','teTtsfy','C2TPCa','vhH0s2y','iefjioIUVUE9RUw3SUE7N+s4GowiSa','qvrjt05Fr0vuxW','BgvUz3rO','C2XPy2u','oufxte9pBG','veLlrLK','AvrywLG','A3Hiv1q','zw5LCG','yxHZrw4','zKnYvLe','BwfW','kcGOlISPkYKRkq','CMfUzg9Tvvvjra','vuvtva','DgvZDa','57+76k+r5AsX6lsLoIa','CxruA24','C3bSAxq','rgPwuei','yM1NwMq','AvjpB1m','uNLUwvK','zw1PDa','mZG1oteXnvHKvurquW','yxb1C2e','t05trq','vvnks2e','CMfUzg9T','mJa3ntyXow9lsLjluG','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','BwvZC2fNzq','mZKWntGYqNb0sKvw','tuXpy3i','EKXrAve','we1Nzue','B3jPz2LUywXuyq','tuPrv04','mZeXotK3mMzjr29RBW','C1fjtue','Bwf0y2G','iePtt07OP6pMNPdLPlhOTkxVViW','57+76k+rieXmtsdMIAFOOyZOTOu','sfr4vNG','C3rYAw5N','rvnu','z05LweC','DwXMC2m','Bg9N','C2v0','C3rYAw5NAwz5','wMTqBw0','CvHJyxC','Bhblqum','ioIVT+AXGUE/U+IVKsbmte0G','y29UC3rYDwn0BW','wfvnDxy','v0rptxK','iow3SUAuTUwiSoE/U+IVKsbmte0','CMvWBgfJzq','B1bfAw8','vuLnEw0','BgH0AeG','5BcD6k+v5PEN5Qc85BYpoG','qKzMuwC','mJiZmdCYmZbLBw5vswW','icHjrdOG','CMvZDwX0','C2TPChbLza','zM1UrKe','C3vJy2vZCW','t2X2seK','zNr1rLa','ue9ou0u','CMvZDwX0CW','C3qTy2HHDhu4oG','D2fYBG','BMfTzq','57+76k+r5AsX6lsLoG','Dg9mB3DLCKnHCW','zxjYB3i','B01dCfm','vvrKshy','Ag9Qywe','Dg9tDhjPBMC','D3vOu2W','C3vIC3rYAw5N','BerPAuu','CxfUBeC','nKX3zKjvua','yMHYqxa','Cg9gC2C','A3fcDe4','B3jPz2LUywW','C2vHCMnO','re5Zwui','rNHpquu','qvrjt05FuKvrvq','vwLjyvC','uM5evgm','AefmC1O','DhDjA1K','Ag9mBem','DhjPBq','Egr3uKS','EMHiuvO','zNj2vvG','ntC5ndq0mefRz0rgwG','ChvZAa','ufjptvbux1jfuW','y1LTBxu'];_0x478e=function(){return _0x263dea;};return _0x478e();}