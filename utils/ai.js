(function(_0x3e070f,_0x2aeea2){function _0x278efd(_0x37c206,_0x99bbd2,_0x50d13f,_0x31747a){return _0x28fc(_0x50d13f- -0x3d1,_0x37c206);}function _0x6f52cd(_0x577a3c,_0x351f15,_0x42cf35,_0x4590e7){return _0x28fc(_0x351f15-0x1fc,_0x4590e7);}const _0x3f2241=_0x3e070f();while(!![]){try{const _0x43c3e0=parseInt(_0x6f52cd(0x38f,0x35b,0x314,0x34d))/(-0x24f2*-0x1+0x3ce*-0x8+-0x681)*(parseInt(_0x278efd(-0x2d0,-0x340,-0x2f1,-0x33c))/(-0x19a5+-0x1*-0x2554+-0x1ab*0x7))+-parseInt(_0x6f52cd(0x33e,0x327,0x372,0x35c))/(-0x178d+0x1*-0x4d6+0xa*0x2d7)*(-parseInt(_0x6f52cd(0x270,0x2cd,0x2a4,0x28d))/(-0x2438+0x14b6+0xf86))+-parseInt(_0x6f52cd(0x349,0x313,0x2f7,0x316))/(0x1*0x202e+-0x9bf*-0x1+-0x29e8)+-parseInt(_0x278efd(-0x2a1,-0x314,-0x2b5,-0x2b4))/(-0x12fc+-0x3df*-0x2+0xb44)+-parseInt(_0x278efd(-0x2a8,-0x320,-0x2e6,-0x2d5))/(-0x24cf+0x1*-0x1003+0x53*0xa3)+-parseInt(_0x278efd(-0x233,-0x222,-0x266,-0x23f))/(-0x1131+-0x3*-0xb5d+-0x11*0xfe)+parseInt(_0x6f52cd(0x26b,0x2cb,0x2c8,0x29d))/(0x1d*0x11a+0x747+-0x2730)*(parseInt(_0x6f52cd(0x30f,0x2f1,0x332,0x311))/(-0x1*0x2f6+-0x2*0xa31+0x1762));if(_0x43c3e0===_0x2aeea2)break;else _0x3f2241['push'](_0x3f2241['shift']());}catch(_0x12ecf3){_0x3f2241['push'](_0x3f2241['shift']());}}}(_0x141b,0x15bb97*-0x1+0x6*0x41d86+0x1*0x9d439));const _0x5820eb=(function(){function _0x591d1e(_0x240a54,_0x6a0c1,_0x40eae9,_0x238cb7){return _0x28fc(_0x238cb7-0x18c,_0x6a0c1);}const _0x527a02={};_0x527a02[_0x591d1e(0x2b1,0x26c,0x20b,0x266)]=function(_0xa68ed9,_0x2559f2){return _0xa68ed9!==_0x2559f2;},_0x527a02['legJK']=_0x485220(0x10a,0x14e,0x151,0x13c),_0x527a02[_0x591d1e(0x2c0,0x269,0x2b5,0x299)]=_0x591d1e(0x220,0x24b,0x209,0x264),_0x527a02[_0x485220(0x14d,0x186,0x13a,0xda)]=_0x591d1e(0x2fe,0x2ad,0x303,0x2cf);function _0x485220(_0x1ac2f7,_0x97bb1c,_0x1c1374,_0xbc1704){return _0x28fc(_0x1c1374-0x53,_0x97bb1c);}_0x527a02[_0x591d1e(0x28f,0x283,0x265,0x255)]=function(_0x26c53f,_0x4deea6){return _0x26c53f!==_0x4deea6;},_0x527a02[_0x485220(0x160,0x152,0x163,0x118)]='ZDGad',_0x527a02['SCCwe']=_0x591d1e(0x2be,0x27b,0x225,0x26f);const _0x153374=_0x527a02;let _0x3d05be=!![];return function(_0x46225c,_0x338b89){function _0x243d0f(_0x485253,_0x1bf0bf,_0x89d5bb,_0x2a126d){return _0x591d1e(_0x485253-0x53,_0x89d5bb,_0x89d5bb-0x17e,_0x2a126d-0x212);}function _0x4a949a(_0x569cec,_0x4e8d92,_0x2f1322,_0x5450fc){return _0x485220(_0x569cec-0x132,_0x5450fc,_0x2f1322- -0xba,_0x5450fc-0xc9);}const _0x186f6d={'DWwVx':function(_0x2367cf,_0x48f483){function _0x17ed3c(_0x1b4446,_0x33d5c9,_0x38137b,_0x48596c){return _0x28fc(_0x1b4446- -0x13d,_0x33d5c9);}return _0x153374[_0x17ed3c(-0x63,-0x62,-0x2b,-0xb)](_0x2367cf,_0x48f483);},'bGqLR':_0x153374['legJK'],'cImQD':_0x153374[_0x243d0f(0x486,0x46e,0x472,0x4ab)],'CQUss':_0x153374['eTNhs']};if(_0x153374['HWMBB'](_0x153374['kudMz'],_0x153374[_0x4a949a(0x75,0x91,0x6b,0x13)])){const _0x799467=_0x3d05be?function(){function _0x548866(_0x5b2c0b,_0x239d0b,_0x44462e,_0x1d69de){return _0x243d0f(_0x5b2c0b-0x12a,_0x239d0b-0xef,_0x239d0b,_0x44462e- -0x643);}function _0x4d0be1(_0x447cc1,_0x8bb703,_0x3a513e,_0x59ea51){return _0x4a949a(_0x447cc1-0x63,_0x8bb703-0x1d0,_0x8bb703-0x1c7,_0x59ea51);}if(_0x186f6d['DWwVx'](_0x186f6d['bGqLR'],_0x186f6d[_0x4d0be1(0x24f,0x272,0x21a,0x238)])){if(_0x338b89){if(_0x548866(-0x1b1,-0x118,-0x162,-0x15f)!==_0x186f6d[_0x4d0be1(0x24c,0x281,0x253,0x2c1)]){const _0xb2ff44=_0x5c54e5['apply'](_0x4b0b2a,arguments);return _0x5bf555=null,_0xb2ff44;}else{const _0x5a64bd=_0x338b89[_0x548866(-0x155,-0xe4,-0x144,-0x12b)](_0x46225c,arguments);return _0x338b89=null,_0x5a64bd;}}}else{if(!_0x1777df[_0x548866(-0x1a6,-0x234,-0x1ec,-0x23e)](_0x1f0b7a))return'[]';return _0x6d5527['stringify'](_0x2d1991[_0x548866(-0x1bf,-0x1e6,-0x1ef,-0x1a1)](_0x1709de=>_0x1709de&&typeof _0x1709de==='string'));}}:function(){};return _0x3d05be=![],_0x799467;}else return _0x566fe8[_0x4a949a(0xa7,0x4e,0x5f,0xb)](_0x31b6ce=>_0x31b6ce[_0x243d0f(0x47a,0x428,0x480,0x486)](_0x457de1['trim']()));};}()),_0x3d997a=_0x5820eb(this,function(){function _0x4f787d(_0x576f9c,_0xcc0207,_0x279753,_0x4f3fda){return _0x28fc(_0x4f3fda- -0x22c,_0x576f9c);}const _0x3aeddb={};_0x3aeddb['zuIjz']='(((.+)+)+)'+'+$';const _0xa71b1e=_0x3aeddb;function _0x802abf(_0x563c6b,_0x2bc020,_0x43d63f,_0x35647e){return _0x28fc(_0x35647e-0x3d,_0x43d63f);}return _0x3d997a[_0x802abf(0x11e,0xf5,0x199,0x13c)]()['search'](_0x4f787d(-0xc7,-0x142,-0x150,-0x100)+'+$')['toString']()[_0x4f787d(-0x8f,-0xb6,-0x97,-0xc6)+'r'](_0x3d997a)[_0x802abf(0x13d,0x10f,0x197,0x16b)](_0xa71b1e[_0x802abf(0x1c9,0x1bd,0x1b4,0x19f)]);});_0x3d997a();import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';function _0x28fc(_0x5b9952,_0x31aebd){_0x5b9952=_0x5b9952-(-0x15bd+0x5e5*0x1+0x1087);const _0x37b24a=_0x141b();let _0xfeab44=_0x37b24a[_0x5b9952];if(_0x28fc['ENNTJH']===undefined){var _0x5874e7=function(_0x160498){const _0x447f63='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x32683e='',_0x1fb175='',_0x2c7b04=_0x32683e+_0x5874e7;for(let _0xbc2394=-0x57e+0x690+-0x112,_0x2af4d9,_0x11c7fb,_0x52881c=0x244e+0x1b5d*0x1+-0x3*0x1539;_0x11c7fb=_0x160498['charAt'](_0x52881c++);~_0x11c7fb&&(_0x2af4d9=_0xbc2394%(0x6a*-0x17+0x31b+-0x225*-0x3)?_0x2af4d9*(-0x413+0x3e*-0x6a+0x1dff)+_0x11c7fb:_0x11c7fb,_0xbc2394++%(0x1*-0x808+0x111*0x23+-0x1d47))?_0x32683e+=_0x2c7b04['charCodeAt'](_0x52881c+(-0x530+0x8d6+-0x16*0x2a))-(0x2155+-0x9*0x234+-0xd77)!==0x166a+0xc17*0x3+-0x3aaf?String['fromCharCode'](0xf7*0x5+0x1*-0xbdd+0x809&_0x2af4d9>>(-(-0x2613+-0xad*-0x2d+0x7ac)*_0xbc2394&0x30b*-0xb+-0x21f+-0xc2*-0x2f)):_0xbc2394:0x1cc6+-0x2215+0x54f){_0x11c7fb=_0x447f63['indexOf'](_0x11c7fb);}for(let _0x276fad=-0x1a10+-0x1de1+0x37f1,_0x2a4819=_0x32683e['length'];_0x276fad<_0x2a4819;_0x276fad++){_0x1fb175+='%'+('00'+_0x32683e['charCodeAt'](_0x276fad)['toString'](0x22e4+0x17af+-0x1381*0x3))['slice'](-(0x5ab*0x4+0x1c67+-0x3311));}return decodeURIComponent(_0x1fb175);};_0x28fc['kNaJpB']=_0x5874e7,_0x28fc['CKksNV']={},_0x28fc['ENNTJH']=!![];}const _0x5a8b53=_0x37b24a[-0x3*0x2bb+-0x2b3+-0x2*-0x572],_0x42aa71=_0x5b9952+_0x5a8b53,_0x37df70=_0x28fc['CKksNV'][_0x42aa71];if(!_0x37df70){const _0x353391=function(_0x5bb397){this['oeRuKx']=_0x5bb397,this['SxkLiz']=[-0x21ed+0x538+0x1cb6,0x1a6e+0xbe3*-0x1+-0xe8b,-0x1b40+0xc*-0x15f+-0x2*-0x15da],this['qSwcTg']=function(){return'newState';},this['wncOXJ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['fFlVXk']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x353391['prototype']['GOaVwD']=function(){const _0x1c77d0=new RegExp(this['wncOXJ']+this['fFlVXk']),_0x440220=_0x1c77d0['test'](this['qSwcTg']['toString']())?--this['SxkLiz'][0x8ed*0x1+0x2be*-0xb+0x1*0x153e]:--this['SxkLiz'][-0x1a51+-0x93a*0x2+0x2cc5];return this['OeQgHF'](_0x440220);},_0x353391['prototype']['OeQgHF']=function(_0x4e88fb){if(!Boolean(~_0x4e88fb))return _0x4e88fb;return this['pawazJ'](this['oeRuKx']);},_0x353391['prototype']['pawazJ']=function(_0x56235e){for(let _0x86e891=-0x1686+-0x1870+0x177b*0x2,_0x282a56=this['SxkLiz']['length'];_0x86e891<_0x282a56;_0x86e891++){this['SxkLiz']['push'](Math['round'](Math['random']())),_0x282a56=this['SxkLiz']['length'];}return _0x56235e(this['SxkLiz'][0x31*0x32+0x3*-0xa0b+-0x115*-0x13]);},new _0x353391(_0x28fc)['GOaVwD'](),_0xfeab44=_0x28fc['kNaJpB'](_0xfeab44),_0x28fc['CKksNV'][_0x42aa71]=_0xfeab44;}else _0xfeab44=_0x37df70;return _0xfeab44;}import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{mergeAdjacentMessages}from'./promptProcessor.js';let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x33222a){function _0x37b8cc(_0x3b0d03,_0x8edf2,_0x1306b8,_0x24e3ca){return _0x28fc(_0x1306b8-0xf,_0x24e3ca);}function _0x579029(_0x43feb3,_0x3da05a,_0x22f1a0,_0x2b8ebc){return _0x28fc(_0x3da05a-0x243,_0x2b8ebc);}return SKIP_PATTERNS['some'](_0x1d4c43=>_0x1d4c43[_0x579029(0x389,0x32b,0x2e2,0x2eb)](_0x33222a[_0x37b8cc(0x18f,0x137,0x14c,0x15f)]()));}export function tagsToJsonString(_0x43796a){if(!Array['isArray'](_0x43796a))return'[]';function _0x45bcea(_0x1b4e7f,_0x1ca917,_0x2a4012,_0x3cbd02){return _0x28fc(_0x3cbd02-0x1f8,_0x2a4012);}function _0x4a140a(_0x2aff71,_0x5e4eff,_0x222b6a,_0x48ab13){return _0x28fc(_0x5e4eff- -0x2c7,_0x2aff71);}return JSON[_0x4a140a(-0x17b,-0x1bb,-0x215,-0x20d)](_0x43796a[_0x4a140a(-0x1f6,-0x211,-0x20e,-0x212)](_0x77bada=>_0x77bada&&typeof _0x77bada===_0x4a140a(-0x178,-0x17d,-0x13a,-0x138)));}export function preprocessPromptForTranslation(_0x3b8b79){const _0x1cc97c={'XTlPB':function(_0x2e53f0,_0x31ea0c){return _0x2e53f0!==_0x31ea0c;},'xaPBM':_0x2df269(0x3ac,0x3a5,0x376,0x3ba),'WGpzb':function(_0x4e7121,_0x30c7ed){return _0x4e7121<_0x30c7ed;},'OzfXk':_0x2df269(0x3a9,0x34f,0x38a,0x3ff),'gOxtA':function(_0x1670fd,_0x20eb8c){return _0x1670fd===_0x20eb8c;},'cfemz':function(_0x5005b5,_0x579731){return _0x5005b5(_0x579731);},'tIOHt':function(_0x47a85f,_0x46b887){return _0x47a85f(_0x46b887);},'mzQTO':_0x2df269(0x3b0,0x383,0x407,0x3ff)+_0x2df269(0x360,0x38d,0x399,0x336)+_0x58f778(0x50e,0x52c,0x531,0x548),'BkXZU':function(_0x1d924d,_0x47d167){return _0x1d924d!==_0x47d167;},'ssFKs':_0x58f778(0x522,0x516,0x526,0x4ff),'LLrgl':function(_0x388220,_0x2c0deb){return _0x388220(_0x2c0deb);},'XQrRv':_0x58f778(0x494,0x48b,0x4bb,0x494),'AcizS':function(_0x173ae9,_0x273219){return _0x173ae9!==_0x273219;},'POHsp':_0x58f778(0x479,0x4a6,0x4c1,0x4ae),'ghcAZ':_0x2df269(0x34f,0x302,0x310,0x339)};if(!_0x3b8b79||_0x1cc97c[_0x2df269(0x3c5,0x374,0x37a,0x391)](typeof _0x3b8b79,_0x1cc97c[_0x2df269(0x36f,0x3c6,0x311,0x35f)]))return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};const _0x2a946d=_0x4987e0=>{function _0x204e5a(_0x43bbda,_0x198bf8,_0x3c317a,_0x419410){return _0x2df269(_0x3c317a- -0x5db,_0x43bbda,_0x3c317a-0xbe,_0x419410-0xa3);}function _0x4c03f7(_0x47e269,_0xcc4471,_0x2871af,_0x40f2d9){return _0x58f778(_0xcc4471,_0xcc4471-0xd9,_0x2871af- -0x81,_0x40f2d9-0x9d);}if(_0x1cc97c[_0x4c03f7(0x496,0x40d,0x455,0x45c)](_0x1cc97c[_0x204e5a(-0x256,-0x1eb,-0x205,-0x235)],_0x1cc97c[_0x4c03f7(0x499,0x4b8,0x4bf,0x49c)]))_0x21452d['push'](_0x8c5f65),_0x5a9776[_0x204e5a(-0x299,-0x25a,-0x243,-0x216)](_0x1568a7[_0x4c03f7(0x48e,0x473,0x497,0x4ca)+'e'](),_0x3f6554);else{const _0x519fda=[];let _0x264156='',_0x57f266=![];for(let _0x1f3b36=0x2015*-0x1+0x14d0+0xb45*0x1;_0x1cc97c[_0x4c03f7(0x3c6,0x43a,0x41c,0x3f2)](_0x1f3b36,_0x4987e0['length']);_0x1f3b36++){const _0x584cbd=_0x4987e0[_0x1f3b36];if(_0x584cbd==='$')_0x1cc97c[_0x4c03f7(0x485,0x442,0x47d,0x482)]!==_0x1cc97c[_0x204e5a(-0x239,-0x273,-0x247,-0x1f4)]?(_0x5a8b53[_0x204e5a(-0x23f,-0x20d,-0x233,-0x229)](_0x42aa71),_0x37df70[_0x204e5a(-0x207,-0x271,-0x243,-0x219)](_0x160498[_0x204e5a(-0x28a,-0x224,-0x22d,-0x239)+'e'](),_0x447f63)):(_0x57f266=!_0x57f266,_0x264156+=_0x584cbd);else{if((_0x584cbd===','||_0x1cc97c['gOxtA'](_0x584cbd,'，'))&&!_0x57f266){const _0x9fb6d7=_0x264156[_0x204e5a(-0x1f9,-0x1db,-0x22c,-0x1d5)]();if(_0x9fb6d7)_0x519fda[_0x4c03f7(0x47c,0x47f,0x491,0x467)](_0x9fb6d7);_0x264156='';}else _0x264156+=_0x584cbd;}}if(_0x264156[_0x4c03f7(0x4ab,0x471,0x498,0x479)]())_0x519fda[_0x4c03f7(0x4d2,0x44b,0x491,0x4b7)](_0x264156[_0x204e5a(-0x229,-0x1ed,-0x22c,-0x26b)]());return _0x519fda;}};function _0x58f778(_0x81ec74,_0x2011c4,_0x3e0878,_0x4dfacd){return _0x28fc(_0x3e0878-0x3dc,_0x81ec74);}const _0x20fa26=_0x1cc97c[_0x58f778(0x547,0x595,0x539,0x52a)](_0x2a946d,_0x3b8b79);function _0x2df269(_0x2adba0,_0x3d722b,_0x5a735d,_0xd30e4d){return _0x28fc(_0x2adba0-0x272,_0x3d722b);}const _0x1dd440=[],_0x1ae962=[],_0x546595=new Map();for(const _0x21d21e of _0x20fa26){if(_0x1cc97c[_0x2df269(0x36c,0x369,0x333,0x32b)](_0x1cc97c[_0x58f778(0x4db,0x49f,0x4d0,0x525)],'mASrZ')){const _0x22dc9a=_0x1845e3[-0x1187+-0xfe*0x3+0x23*0x96]||'',_0x12ce04=(_0x3c305e[0x2346+-0x11f+-0x2225]||'')['trim'](),_0x6a6eb4=_0x8efc68[-0x2*0x1369+0xc3*0x32+0xbf]||'',_0x3acd4b=_0x714b99[0x245b+0xb3c+-0x2f93]||'',_0x3868c9={'original':_0x1432e9,'cleaned':_0x12ce04,'prefix':_0x22dc9a,'suffix':_0x6a6eb4,'weight':_0x3acd4b,'skip':_0x1cc97c['cfemz'](_0x11dc1a,_0xcecab7)||_0x1cc97c['tIOHt'](_0x2a7cb7,_0x12ce04)};_0x45614c[_0x2df269(0x3a8,0x369,0x3bc,0x3e7)](_0x3868c9),!_0x3868c9[_0x58f778(0x460,0x48b,0x4a8,0x4eb)]&&_0x12ce04&&(_0xae9dea['push'](_0x12ce04),_0x3eb610['set'](_0x12ce04[_0x58f778(0x533,0x4e8,0x518,0x54f)+'e'](),_0x3868c9));}else{const _0x323864=_0x21d21e[_0x58f778(0x4fb,0x568,0x50b,0x540)](SD_SYMBOL_PATTERN);if(_0x323864){const _0xff4d21=_0x323864[0x1b6f+0x31b+0x1e89*-0x1]||'',_0x200fdd=(_0x323864[0x1ed7+-0x40*0x7f+0xeb*0x1]||'')[_0x58f778(0x4e5,0x4cc,0x519,0x52d)](),_0x4bb06e=_0x323864[-0x1131+0x1*-0x12ab+0x1*0x23df]||'',_0x5c46ec=_0x323864[-0xaee*-0x2+-0xd24+0x22d*-0x4]||'',_0x4208f9={'original':_0x21d21e,'cleaned':_0x200fdd,'prefix':_0xff4d21,'suffix':_0x4bb06e,'weight':_0x5c46ec,'skip':_0x1cc97c[_0x2df269(0x36a,0x31e,0x3c6,0x32c)](shouldSkipTranslation,_0x21d21e)||_0x1cc97c[_0x58f778(0x474,0x4c0,0x4b7,0x499)](shouldSkipTranslation,_0x200fdd)};_0x1dd440[_0x58f778(0x538,0x561,0x512,0x560)](_0x4208f9),!_0x4208f9['skip']&&_0x200fdd&&(_0x1cc97c[_0x58f778(0x4e2,0x513,0x524,0x4df)](_0x1cc97c[_0x58f778(0x4ed,0x560,0x52a,0x4d1)],_0x1cc97c[_0x2df269(0x3c0,0x379,0x37a,0x3ae)])?_0xc94811[_0x2df269(0x399,0x3d3,0x3dd,0x376)](_0x1cc97c['mzQTO'],_0x4f4723['message']):(_0x1ae962['push'](_0x200fdd),_0x546595[_0x58f778(0x4c1,0x542,0x502,0x50a)](_0x200fdd[_0x2df269(0x3ae,0x376,0x391,0x3f7)+'e'](),_0x4208f9)));}else{const _0x44c672={'original':_0x21d21e,'cleaned':_0x21d21e,'prefix':'','suffix':'','weight':'','skip':_0x1cc97c[_0x2df269(0x36a,0x35b,0x3be,0x32a)](shouldSkipTranslation,_0x21d21e)};_0x1dd440[_0x58f778(0x51e,0x52e,0x512,0x529)](_0x44c672);if(!_0x44c672[_0x58f778(0x44c,0x4dd,0x4a8,0x4e0)]&&_0x21d21e){if(_0x1cc97c[_0x58f778(0x4db,0x554,0x52b,0x54f)]!==_0x2df269(0x34f,0x389,0x382,0x32c))return'';else _0x1ae962[_0x2df269(0x3a8,0x34f,0x3b5,0x3b7)](_0x21d21e),_0x546595[_0x58f778(0x4e9,0x4b8,0x502,0x4de)](_0x21d21e['toLowerCas'+'e'](),_0x44c672);}}}}return{'originalTags':_0x1dd440,'cleanedTags':_0x1ae962,'cleanedText':_0x1cc97c[_0x2df269(0x36a,0x30c,0x317,0x314)](tagsToJsonString,_0x1ae962),'tagMap':_0x546595};}export function combineTranslationResult(_0x3dc377,_0x21651c){const _0x1e02d6={};function _0x404743(_0x75c90f,_0x54344a,_0x1e1840,_0x4e093a){return _0x28fc(_0x1e1840- -0x2f1,_0x4e093a);}_0x1e02d6['ViHCK']=function(_0x48cbdc,_0x4c5c5b){return _0x48cbdc!==_0x4c5c5b;},_0x1e02d6[_0x49f07b(0x6c,0x20,0x61,0x62)]=_0x49f07b(0x12d,0x106,0xdc,0x9b),_0x1e02d6['npskB']=function(_0x38bfbc,_0x43d069){return _0x38bfbc===_0x43d069;},_0x1e02d6[_0x404743(-0x1b9,-0x221,-0x1eb,-0x223)]='object';const _0x18422c=_0x1e02d6;function _0x49f07b(_0x3bc9c3,_0x56f649,_0x3b230f,_0x55328e){return _0x28fc(_0x3b230f- -0x8e,_0x3bc9c3);}if(!_0x3dc377||!Array[_0x404743(-0x277,-0x212,-0x238,-0x23a)](_0x3dc377))return[];const _0x486bf7={};if(_0x21651c&&_0x18422c[_0x404743(-0x1d0,-0x247,-0x227,-0x20b)](typeof _0x21651c,_0x18422c[_0x404743(-0x1c2,-0x215,-0x1eb,-0x1f9)]))for(const [_0x24eecf,_0x359bfb]of Object['entries'](_0x21651c)){_0x486bf7[_0x24eecf[_0x49f07b(0x53,0x7d,0xae,0xaa)+'e']()]=_0x359bfb;}return _0x3dc377['map'](_0x775a79=>{const {original:_0x50feb0,cleaned:_0x4b5465,skip:_0x4e350}=_0x775a79;if(_0x4e350){if(_0x18422c['ViHCK'](_0x18422c[_0x23d4c7(0x313,0x34b,0x30c,0x362)],_0x23d4c7(0x38e,0x356,0x3bc,0x33e))){const _0x396b99={};return _0x396b99['original']=_0x529658,_0x396b99['translatio'+'n']='',_0x396b99[_0x23d4c7(0x347,0x31e,0x3a6,0x3a6)]=_0xa03463,_0x396b99['skipped']=!![],_0x396b99;}else{const _0x254a4d={};return _0x254a4d[_0x23d4c7(0x364,0x3a9,0x38d,0x32a)]=_0x50feb0,_0x254a4d[_0x4c42cd(0x4e8,0x50a,0x4d4,0x4ae)+'n']='',_0x254a4d[_0x4c42cd(0x506,0x4eb,0x504,0x4dd)]=_0x4b5465,_0x254a4d[_0x23d4c7(0x35c,0x39b,0x361,0x302)]=!![],_0x254a4d;}}function _0x4c42cd(_0x20af51,_0x101641,_0x13e35a,_0x224c2e){return _0x49f07b(_0x13e35a,_0x101641-0x1b9,_0x101641-0x456,_0x224c2e-0x82);}const _0x1dcf52=_0x486bf7[_0x4b5465['toLowerCas'+'e']()]||'',_0x4f2c53={};_0x4f2c53[_0x4c42cd(0x520,0x508,0x4f3,0x4da)]=_0x50feb0,_0x4f2c53['translatio'+'n']=_0x1dcf52,_0x4f2c53[_0x4c42cd(0x4ce,0x4eb,0x508,0x51b)]=_0x4b5465;function _0x23d4c7(_0x1033be,_0x4d20fa,_0x30de47,_0x568031){return _0x404743(_0x1033be-0x188,_0x4d20fa-0x62,_0x1033be-0x515,_0x30de47);}return _0x4f2c53[_0x4c42cd(0x546,0x500,0x4d6,0x4e4)]=![],_0x4f2c53;});}export function formatTranslationDisplay(_0xc8b635,_0x8f5cbd={}){const _0x580c1a={};_0x580c1a[_0x517fb2(0x4cb,0x46f,0x430,0x4bb)]=function(_0xc60e33,_0x1e6e5f){return _0xc60e33!==_0x1e6e5f;},_0x580c1a['sepCX']=_0x38ecd8(-0x1b7,-0x208,-0x25e,-0x24f),_0x580c1a[_0x38ecd8(-0x1d8,-0x1ce,-0x1ca,-0x1b0)]=function(_0x301e67,_0x4269a0){return _0x301e67===_0x4269a0;},_0x580c1a['OFVFC']='dVjeK';function _0x517fb2(_0x413188,_0x3202d8,_0x4edf6f,_0x55884b){return _0x28fc(_0x3202d8-0x313,_0x55884b);}_0x580c1a['MybYK']=function(_0x292732,_0x25b817){return _0x292732===_0x25b817;};function _0x38ecd8(_0x5d6ab3,_0x3ab844,_0x27de15,_0xc75aa){return _0x28fc(_0x3ab844- -0x335,_0x27de15);}_0x580c1a['BnJjU']='oacWh',_0x580c1a[_0x517fb2(0x49b,0x447,0x41f,0x40e)]=_0x517fb2(0x3d8,0x406,0x3e1,0x452);const _0xf0caa7=_0x580c1a,{separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0x8f5cbd;if(!_0xc8b635||!Array[_0x517fb2(0x3cd,0x3cc,0x388,0x3ae)](_0xc8b635)){if(_0xf0caa7[_0x517fb2(0x406,0x459,0x42e,0x4a1)](_0xf0caa7[_0x38ecd8(-0x21c,-0x257,-0x284,-0x278)],_0xf0caa7[_0x517fb2(0x405,0x447,0x3f1,0x41c)])){const _0x5db4c2=_0x5cc24f['trim']();if(_0x5db4c2)_0x208290[_0x38ecd8(-0x213,-0x1ff,-0x1f9,-0x1a5)](_0x5db4c2);_0xe6d79d='';}else return'';}return _0xc8b635['map'](_0x38e3cc=>{function _0x3c8363(_0x225ff7,_0x28efd8,_0x104bd1,_0x377564){return _0x38ecd8(_0x225ff7-0x5a,_0x225ff7-0x6a6,_0x104bd1,_0x377564-0x139);}function _0x298eed(_0xf7c7ab,_0x3bdd15,_0x4c519f,_0x5906b8){return _0x38ecd8(_0xf7c7ab-0x28,_0x3bdd15-0x4de,_0xf7c7ab,_0x5906b8-0x163);}if(_0xf0caa7[_0x298eed(0x322,0x305,0x2b2,0x2ed)]('TBSdO',_0xf0caa7[_0x298eed(0x277,0x25d,0x251,0x264)])){if(_0x38e3cc[_0x3c8363(0x4a9,0x4cc,0x49a,0x481)])return _0xf0caa7['TvnaV'](_0xf0caa7['OFVFC'],'hFAUD')?{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new _0xa8e07()}:showOriginal?_0x38e3cc['original']:'';const _0x31fa44=[];if(showOriginal)_0x31fa44[_0x298eed(0x303,0x2df,0x2eb,0x2b6)](_0x38e3cc['original']);return showTranslation&&_0x38e3cc['translatio'+'n']&&_0x31fa44[_0x3c8363(0x4a7,0x44b,0x501,0x499)]('('+_0x38e3cc[_0x3c8363(0x4b3,0x4d7,0x46c,0x460)+'n']+')'),_0x31fa44[_0x298eed(0x27e,0x280,0x26d,0x27e)]('\x20');}else return _0x3cd385['randomUUID']();})[_0x38ecd8(-0x258,-0x27f,-0x264,-0x229)](Boolean)[_0x517fb2(0x3f9,0x3ea,0x3f3,0x3e1)](separator);}export async function translatePromptTags(_0x3fd57f){const _0x58419e={'BLZDd':function(_0x4ae10d,_0x1de3db){return _0x4ae10d(_0x1de3db);},'nuRfN':function(_0x2e3a51,_0x5f2345,_0xd5a24a){return _0x2e3a51(_0x5f2345,_0xd5a24a);},'ZGBNB':function(_0x1dbafe,_0x3dfb3c){return _0x1dbafe(_0x3dfb3c);},'DnEYY':'st-chatu8:'+'\x20翻译提示词标签失败'+':'};function _0x1317ac(_0x2e21ed,_0x5d71b9,_0x3cda8b,_0x3864ab){return _0x28fc(_0x2e21ed- -0x23,_0x3cda8b);}function _0x2b486d(_0x321e09,_0x47cdad,_0x24adb4,_0x4d9c7d){return _0x28fc(_0x24adb4-0x14a,_0x321e09);}const {originalTags:_0x295862,cleanedText:_0x2be711}=_0x58419e[_0x1317ac(0x92,0xa1,0x8f,0xdb)](preprocessPromptForTranslation,_0x3fd57f);if(!_0x2be711){const _0x14803d={};return _0x14803d[_0x2b486d(0x22c,0x206,0x233,0x262)]=[],_0x14803d[_0x2b486d(0x287,0x257,0x29c,0x275)+'t']='',_0x14803d[_0x1317ac(0xf6,0xba,0x131,0xfd)+'gs']=[],_0x14803d;}try{const _0x5c0934=await callTranslation(_0x2be711),_0x206a68=parseTranslationResult(_0x5c0934),_0x577aac=_0x58419e[_0x1317ac(0xfd,0xd6,0xa0,0x12e)](combineTranslationResult,_0x295862,_0x206a68),_0x55ebe2=_0x58419e['ZGBNB'](formatTranslationDisplay,_0x577aac),_0x4823a9={};return _0x4823a9['results']=_0x577aac,_0x4823a9[_0x1317ac(0x12f,0x14c,0x146,0x136)+'t']=_0x55ebe2,_0x4823a9[_0x1317ac(0xf6,0x14f,0xc7,0x136)+'gs']=_0x295862,_0x4823a9;}catch(_0x493f2b){console['error'](_0x58419e['DnEYY'],_0x493f2b);throw _0x493f2b;}}export function parseTranslationResult(_0x5c118a){const _0x47fefb={'HOzWt':_0x204ac1(0x102,0x148,0x140,0x164)+_0x462790(-0xed,-0x9e,-0xf5,-0x144)+_0x204ac1(0xfd,0x11e,0xc0,0xe6),'yuEho':function(_0x2425bc,_0x120d38){return _0x2425bc(_0x120d38);},'fTppZ':function(_0x320472,_0x5bbccf){return _0x320472===_0x5bbccf;},'WGOWf':_0x204ac1(0xf5,0xfc,0xdb,0x12b),'YmLNu':function(_0x29c380,_0x487663){return _0x29c380===_0x487663;},'YyNWd':_0x204ac1(0x5e,0xbc,0xd7,0xae),'QxCNo':function(_0x5f267d,_0x4261a6){return _0x5f267d!==_0x4261a6;},'HDHTV':function(_0x37c05a,_0xd0238c){return _0x37c05a(_0xd0238c);},'tFkHx':function(_0x496c60,_0x4a2484){return _0x496c60>_0x4a2484;},'elKEp':function(_0x11a86b,_0x2dad20){return _0x11a86b+_0x2dad20;}};function _0x204ac1(_0x349d34,_0x422903,_0x1cd434,_0x293a35){return _0x28fc(_0x422903-0xa,_0x1cd434);}if(!_0x5c118a)return{};try{if(_0x47fefb[_0x204ac1(0x1a7,0x177,0x133,0x1d6)](_0x47fefb['WGOWf'],_0x462790(-0x127,-0x183,-0x168,-0x1be))){const _0x198148=_0x5c118a[_0x462790(-0x102,-0x146,-0x12b,-0x186)](/\{[\s\S]*\}/);if(_0x198148){if(_0x47fefb[_0x462790(-0x13f,-0x146,-0x155,-0x132)](_0x204ac1(0x161,0x11b,0x151,0xd8),_0x47fefb['YyNWd']))!_0x418bf9&&(_0x4f4fe4[_0x462790(-0x1e7,-0x1eb,-0x18d,-0x1ea)](_0x47fefb[_0x462790(-0x173,-0x1c7,-0x16e,-0x112)]),_0x3be06b=!![]);else{const _0x21d807=JSON[_0x204ac1(0xc5,0x100,0xb0,0x10d)](_0x198148[-0x1c90+0x1345+-0xd*-0xb7]);if(typeof _0x21d807===_0x462790(-0x157,-0xe0,-0xfc,-0x10d)&&_0x47fefb[_0x462790(-0x101,-0x15f,-0x15f,-0x1a9)](_0x21d807,null))return _0x21d807;}}}else _0x35a2af(),_0x47fefb[_0x462790(-0x188,-0x192,-0x1a2,-0x200)](_0x30f335,new _0x5a7b9b('翻译\x20LLM\x20执行超'+'时（'+_0x29baec+_0x462790(-0x154,-0x1b7,-0x186,-0x17c)));}catch(_0x4577ea){console[_0x204ac1(0xd4,0x131,0xe2,0xd2)](_0x204ac1(0x108,0x148,0x10f,0x17f)+_0x204ac1(0x108,0xf8,0x111,0xbf)+_0x204ac1(0x126,0x15f,0x156,0x113),_0x4577ea[_0x204ac1(0x142,0x149,0x14b,0x111)]);}const _0x1bf3e6=_0x47fefb[_0x462790(-0x133,-0x11d,-0x163,-0x159)](String,_0x5c118a)['replace'](/[\r\n]+/g,'\x20')[_0x462790(-0x14d,-0x13c,-0x16a,-0x12c)](/^[\s"'`]+|[\s"'`]+$/g,'')[_0x462790(-0xc9,-0x133,-0x11d,-0x170)](),_0x184e7=_0x1bf3e6[_0x204ac1(0xd8,0xb9,0xb4,0x100)](/[,，]/)['map'](_0x39b17c=>_0x39b17c['trim']())[_0x462790(-0x14e,-0x1c2,-0x1a4,-0x151)](Boolean);function _0x462790(_0x454104,_0x5055db,_0x342454,_0x24758e){return _0x28fc(_0x342454- -0x25a,_0x24758e);}const _0x576819={};for(const _0x3467b1 of _0x184e7){const _0x4230cc=_0x3467b1[_0x204ac1(0x112,0xec,0x132,0x146)]('\x5c');if(_0x47fefb[_0x462790(-0x156,-0x1b5,-0x193,-0x199)](_0x4230cc,0x2390*-0x1+0x2e1*-0xd+-0x5*-0xe99)){if(_0x462790(-0x1c6,-0x1a0,-0x187,-0x194)==='MGbgF'){const _0x577723=_0x3467b1[_0x462790(-0xe1,-0x182,-0x13b,-0x131)](-0x9ac+-0x75b*-0x3+-0x1*0xc65,_0x4230cc)[_0x462790(-0x127,-0xd0,-0x11d,-0xbd)](),_0x53762c=_0x3467b1[_0x204ac1(0x15c,0x129,0x12c,0x114)](_0x47fefb[_0x462790(-0x146,-0x15e,-0x144,-0x122)](_0x4230cc,0x1c45+-0xe*0x1ff+-0x52))[_0x204ac1(0x14b,0x147,0x109,0xfb)]();if(_0x577723)_0x576819[_0x577723]=_0x53762c;}else _0x4f436f[_0x204ac1(0x166,0x140,0x134,0x125)]('('+_0x27db41[_0x462790(-0xde,-0x111,-0x118,-0x146)+'n']+')');}}return _0x576819;}function generateRequestId(){if(crypto&&crypto[_0x3c056c(-0x2d9,-0x2be,-0x289,-0x2e5)])return crypto[_0x3ba49d(0x9d,0x98,0x101,0xe8)]();function _0x3ba49d(_0x1c428c,_0x5ec675,_0x3b2ff4,_0x162240){return _0x28fc(_0x162240- -0x19,_0x5ec675);}function _0x3c056c(_0x3e5209,_0x5a4b8e,_0x13fe8c,_0x38c181){return _0x28fc(_0x13fe8c- -0x38a,_0x3e5209);}return Date[_0x3ba49d(0xe2,0xd3,0x9a,0xfa)]()['toString'](0x23f*0x7+0xbee+-0x1b83)+Math['random']()[_0x3ba49d(0xa4,0x129,0x140,0xe6)](0xe0c+-0xdf9*-0x2+-0x29da)[_0x3c056c(-0x2cf,-0x309,-0x2ae,-0x2ec)](-0x2605+0x12c0+-0x3*-0x66d);}export function LLM_TRANSLATION_GET_PROMPT(){const _0x2b7f55={'urrSi':function(_0x470552,_0x3a8def){return _0x470552===_0x3a8def;},'sRzax':_0x13a9df(0x1fc,0x1f4,0x1d1,0x1e8),'eUDNP':_0x3f1685(0x3e3,0x334,0x390,0x359),'nTntd':function(_0x5986f1,_0x3af219){return _0x5986f1!==_0x3af219;},'TOCOU':function(_0xa447ab,_0x1818fd){return _0xa447ab(_0x1818fd);},'EFFpb':_0x3f1685(0x3cd,0x403,0x3a6,0x374),'QfvDr':function(_0x511f48){return _0x511f48();}};function _0x3f1685(_0x395974,_0x165217,_0x4e4c82,_0x11ea1){return _0x28fc(_0x4e4c82-0x297,_0x11ea1);}function _0x13a9df(_0x138f17,_0x2d4683,_0x531d9e,_0x33bd46){return _0x28fc(_0x138f17-0xd7,_0x33bd46);}return new Promise((_0x30255b,_0x5c1ada)=>{function _0x179e5b(_0x3dc393,_0xe24463,_0x5f0d94,_0x142dad){return _0x3f1685(_0x3dc393-0xbd,_0xe24463-0xcd,_0xe24463- -0x566,_0x5f0d94);}const _0x2d5546={'TRSyU':function(_0x2c5c8b,_0x14e949){return _0x2b7f55['urrSi'](_0x2c5c8b,_0x14e949);},'Luxgo':_0x2b7f55[_0x596be0(-0x16f,-0x145,-0x10c,-0x162)],'xAMbK':function(_0x40991c,_0x3a224c){return _0x40991c(_0x3a224c);},'tDcHR':function(_0x5974fd,_0x1507f8){return _0x5974fd(_0x1507f8);},'svNFT':_0x2b7f55[_0x179e5b(-0x1e1,-0x1cb,-0x229,-0x1c9)],'LUafz':function(_0x33833b,_0x2cc263){function _0x18a939(_0x30595f,_0x212160,_0x11c8c7,_0x203d79){return _0x596be0(_0x30595f-0xe,_0x203d79,_0x11c8c7-0x1f,_0x30595f-0x25c);}return _0x2b7f55[_0x18a939(0x100,0xb0,0x159,0x134)](_0x33833b,_0x2cc263);},'ZRPYu':function(_0x928ccd,_0x5d9cd1){return _0x928ccd(_0x5d9cd1);},'WyXuP':function(_0xc8338b,_0x2e777a){function _0x4bb5a9(_0x1d3d2a,_0x566480,_0x4c3b76,_0x8c9d0e){return _0x179e5b(_0x1d3d2a-0x1f0,_0x4c3b76-0x4a4,_0x566480,_0x8c9d0e-0x8e);}return _0x2b7f55[_0x4bb5a9(0x2f5,0x2ea,0x2c2,0x268)](_0xc8338b,_0x2e777a);},'DBLoN':_0x2b7f55['EFFpb']},_0x57ba22=_0x2b7f55[_0x596be0(-0x1ae,-0x160,-0x160,-0x16c)](generateRequestId);console[_0x179e5b(-0x1e6,-0x202,-0x1ec,-0x1c5)]('st-chatu8:'+_0x179e5b(-0x182,-0x1ab,-0x1c2,-0x1b3)+_0x596be0(-0xd4,-0x115,-0x88,-0xc1)+_0x57ba22+')');const _0x19179d=_0x118ffb=>{function _0x31bc60(_0x32ecdd,_0x1f109c,_0x225aed,_0x301a81){return _0x596be0(_0x32ecdd-0x135,_0x301a81,_0x225aed-0xe2,_0x1f109c- -0x11);}function _0x139f21(_0x1a3641,_0x2ee431,_0x2ed4b8,_0x5ae703){return _0x596be0(_0x1a3641-0x9b,_0x2ed4b8,_0x2ed4b8-0x17d,_0x1a3641-0x140);}if(_0x2d5546[_0x31bc60(-0xe8,-0xeb,-0x12b,-0xb9)]!=='DAAFb'){if(_0x2d5546['LUafz'](_0x118ffb['id'],_0x57ba22))return;eventSource[_0x139f21(0x5d,-0x1,0x69,0x60)+_0x139f21(0x5f,0xb2,0x86,0x61)](eventNames['LLM_TRANSL'+_0x139f21(0x2e,-0x24,0x60,0x2a)+_0x31bc60(-0xb4,-0xdb,-0xc2,-0x125)+_0x31bc60(-0x13b,-0x120,-0xde,-0xf9)],_0x19179d);const {prompt:_0x160bb9}=_0x118ffb;console['log']('st-chatu8:'+_0x31bc60(-0x13f,-0x126,-0x157,-0x16e)+_0x31bc60(-0x1bd,-0x166,-0x127,-0x142)+_0x57ba22+'):',_0x160bb9),_0x2d5546[_0x31bc60(-0xcd,-0x109,-0x121,-0xe8)](_0x30255b,_0x160bb9);}else{if(_0x1f2526[_0x31bc60(-0xdc,-0x133,-0x119,-0x10d)]&&_0x2d5546[_0x31bc60(-0xc8,-0xe3,-0x105,-0x12e)](_0x477b3c[_0x139f21(0x1e,0x3c,-0x26,-0x34)]['name'],_0x2d5546[_0x139f21(0x16,0xf,-0x2f,0x35)])){const _0x50ef02=new _0x3924fa(_0x31405a['error'][_0x139f21(0x55,0x7,0x63,0x7b)]);_0x50ef02['name']=_0x2d5546['Luxgo'],_0x2d5546['xAMbK'](_0x12aab5,_0x50ef02);}else _0x2d5546[_0x31bc60(-0xa9,-0x106,-0xe8,-0xf4)](_0x2f6b1f,new _0x2052ee(_0x4031f6[_0x31bc60(-0xe7,-0x11e,-0x139,-0x142)]));}};function _0x596be0(_0x395d78,_0x2fde80,_0x181982,_0x16cb9e){return _0x13a9df(_0x16cb9e- -0x301,_0x2fde80-0x12d,_0x181982-0x1f3,_0x2fde80);}eventSource['on'](eventNames[_0x596be0(-0xf5,-0x176,-0x17b,-0x151)+'ATION_GET_'+_0x179e5b(-0x180,-0x16f,-0x182,-0x184)+_0x596be0(-0x119,-0x109,-0x113,-0x10f)],_0x19179d);const _0x4536b1={};_0x4536b1['id']=_0x57ba22,eventSource[_0x179e5b(-0x210,-0x1de,-0x1d9,-0x23b)](eventNames[_0x179e5b(-0x1c6,-0x1f6,-0x233,-0x234)+_0x179e5b(-0x1ec,-0x1b7,-0x1cf,-0x185)+_0x596be0(-0x9b,-0xd8,-0x117,-0xfa)+_0x179e5b(-0x1c1,-0x18a,-0x1d2,-0x173)],_0x4536b1),setTimeout(()=>{function _0x39fa21(_0x31576f,_0x47bedf,_0x2a00e2,_0x3d450b){return _0x596be0(_0x31576f-0x3c,_0x47bedf,_0x2a00e2-0x8,_0x2a00e2-0x3d7);}function _0x58b46a(_0x3b9114,_0x333135,_0x176a4a,_0x513e42){return _0x596be0(_0x3b9114-0x188,_0x3b9114,_0x176a4a-0x166,_0x176a4a-0x4bb);}eventSource[_0x39fa21(0x2da,0x294,0x2f4,0x345)+_0x39fa21(0x341,0x2fb,0x2f6,0x2e7)](eventNames[_0x58b46a(0x383,0x3c4,0x36a,0x371)+'ATION_GET_'+_0x39fa21(0x315,0x366,0x30d,0x2b7)+'PONSE'],_0x19179d),_0x2d5546[_0x39fa21(0x2ea,0x341,0x2ee,0x32a)](_0x5c1ada,new Error(_0x2d5546[_0x39fa21(0x322,0x36e,0x319,0x366)]));},0x1*-0x27a5+0x4225+-0xc*-0x10c);});}export function LLM_TRANSLATION(_0x3e465e,{timeoutMs:timeoutMs=0x196fb*-0x1+0xc69*0x16+0x17055}={}){function _0x51f683(_0x1f3d88,_0x241ae2,_0x3a860c,_0x51a02b){return _0x28fc(_0x3a860c- -0xb6,_0x241ae2);}const _0x3ed638={'bgQHT':function(_0x404abc,_0x167583){return _0x404abc(_0x167583);},'tADOH':function(_0xba0119,_0x22fd70){return _0xba0119!==_0x22fd70;},'LBorT':function(_0x3f1c00){return _0x3f1c00();},'NlEeq':function(_0x3bf4b2,_0xb8f644){return _0x3bf4b2===_0xb8f644;},'cWEpR':function(_0x30991e,_0x579a13){return _0x30991e===_0x579a13;},'vOKKN':function(_0x149c4b,_0x3240a0){return _0x149c4b!==_0x3240a0;},'StaPO':_0x51f683(0xda,0xab,0xad,0xb0),'FivUO':function(_0x5a3f52){return _0x5a3f52();},'lMjwk':function(_0x2a7983,_0x55919d,_0x3088ee){return _0x2a7983(_0x55919d,_0x3088ee);}};return new Promise((_0x3fc7c2,_0x3e3479)=>{const _0x18efd9={'KsfeU':function(_0x2b31de,_0x2ab0bd){function _0x568cd4(_0x3a5506,_0x174dd9,_0x3b7ceb,_0x3a48ca){return _0x28fc(_0x3b7ceb- -0x51,_0x174dd9);}return _0x3ed638[_0x568cd4(0x82,0x114,0xbd,0xe4)](_0x2b31de,_0x2ab0bd);},'TllQl':function(_0x5cd51b,_0x22f00a){return _0x5cd51b(_0x22f00a);},'oCubG':function(_0x3864c9){function _0x3c1eb2(_0x583aac,_0x16e90a,_0x2693f9,_0x26aeb5){return _0x28fc(_0x26aeb5-0x302,_0x583aac);}return _0x3ed638[_0x3c1eb2(0x41a,0x37f,0x3d6,0x3c7)](_0x3864c9);},'ZkmOa':function(_0xe52a35,_0x2be19f){function _0x271757(_0x384309,_0x31357c,_0x3c74ff,_0x55db4d){return _0x28fc(_0x384309- -0x7b,_0x31357c);}return _0x3ed638[_0x271757(0x87,0x9c,0x3c,0x7a)](_0xe52a35,_0x2be19f);},'TVaSX':_0x264024(0x4cf,0x4bf,0x4f5,0x503),'pnUiS':function(_0x502e06,_0x5828aa){function _0x340717(_0x2581ec,_0x324743,_0x46fba2,_0x4068ad){return _0x264024(_0x2581ec-0x10c,_0x324743-0xd0,_0x2581ec,_0x4068ad- -0x2e3);}return _0x3ed638[_0x340717(0x242,0x1e5,0x223,0x1eb)](_0x502e06,_0x5828aa);},'VioXz':function(_0x13106c,_0x1eeb78){function _0x21a6c1(_0x50bd5c,_0x61fb08,_0x358342,_0x1acd81){return _0x264024(_0x50bd5c-0xaa,_0x61fb08-0x98,_0x50bd5c,_0x1acd81- -0x2ff);}return _0x3ed638[_0x21a6c1(0x20a,0x197,0x1c5,0x1aa)](_0x13106c,_0x1eeb78);},'unmWL':_0x3a5289(0x1e,-0x6,0x79,-0x35),'KklZA':function(_0x159167,_0x163807){function _0x358a7c(_0x6f5be8,_0x1e91da,_0x33444f,_0x2dc9e0){return _0x3a5289(_0x33444f-0x30c,_0x1e91da-0xd8,_0x33444f-0x99,_0x1e91da);}return _0x3ed638[_0x358a7c(0x2eb,0x27b,0x2b4,0x2ac)](_0x159167,_0x163807);},'ynDmh':function(_0x2e450d,_0x598676){function _0x393b47(_0x2b4d7f,_0x3c9439,_0x1fdf12,_0x140977){return _0x3a5289(_0x3c9439-0x29c,_0x3c9439-0x3,_0x1fdf12-0x177,_0x1fdf12);}return _0x3ed638[_0x393b47(0x21d,0x254,0x25a,0x204)](_0x2e450d,_0x598676);},'TyIlV':_0x3ed638[_0x264024(0x426,0x42f,0x44f,0x456)],'XCSaq':_0x264024(0x51e,0x4b1,0x50e,0x4c0),'aXnwD':function(_0x55292d,_0x10073f){return _0x55292d(_0x10073f);},'oobJt':function(_0x5acb87){function _0x512144(_0x775b,_0x138be8,_0x3fd4d7,_0x2a8bf3){return _0x264024(_0x775b-0x7,_0x138be8-0xce,_0x775b,_0x2a8bf3- -0x531);}return _0x3ed638[_0x512144(-0x44,-0x56,-0x5d,-0x3f)](_0x5acb87);}},_0x3473fe=generateRequestId();console[_0x3a5289(-0x61,-0x56,-0x1a,-0x55)](_0x3a5289(0x10,0x51,0x5f,0x5a)+_0x264024(0x4a1,0x4bf,0x481,0x485)+_0x3a5289(-0x59,-0xab,0x2,-0x12)+_0x3473fe+')');let _0x79fac8=null;const _0x3f59c3=()=>{function _0x55242e(_0x3b6660,_0x449566,_0x16f572,_0x42402b){return _0x264024(_0x3b6660-0x11b,_0x449566-0xbb,_0x16f572,_0x42402b- -0x118);}eventSource[_0x253391(-0x23f,-0x299,-0x1df,-0x26f)+_0x55242e(0x3cb,0x3eb,0x3e7,0x3cc)](eventNames[_0x253391(-0x2ad,-0x2a7,-0x278,-0x28b)+'ATION_RESP'+_0x55242e(0x342,0x344,0x2ef,0x333)],_0x29f294);function _0x253391(_0x1ea06f,_0x967960,_0x1442ca,_0xaf3ba4){return _0x3a5289(_0x1ea06f- -0x258,_0x967960-0x153,_0x1442ca-0x1f2,_0x967960);}if(_0x79fac8)_0x3ed638[_0x253391(-0x253,-0x1fe,-0x233,-0x290)](clearTimeout,_0x79fac8);},_0x29f294=_0x21dd02=>{const _0x33f217={'OMCaZ':function(_0x57e392,_0x36605e){return _0x57e392(_0x36605e);},'nOuBe':'翻译失败:'};if(_0x18efd9[_0x4f17e7(0x11a,0x11c,0x13c,0x16b)](_0x21dd02['id'],_0x3473fe))return;function _0x4f17e7(_0x5ec790,_0x3e0c21,_0x285989,_0x1caafa){return _0x3a5289(_0x3e0c21-0x147,_0x3e0c21-0x102,_0x285989-0x1a8,_0x5ec790);}_0x18efd9[_0xb9c68c(-0x5c,-0xc8,-0x7a,-0x21)](_0x3f59c3),console['log'](_0xb9c68c(-0x85,-0x40,-0x95,-0x8d)+_0x4f17e7(0x9d,0xe9,0x103,0xd8)+_0xb9c68c(-0x11c,-0xb8,-0x113,-0x116)+'\x20'+_0x3473fe+'):',_0x21dd02);function _0xb9c68c(_0x431051,_0x32dbac,_0x522160,_0x50e60f){return _0x264024(_0x431051-0x153,_0x32dbac-0x132,_0x431051,_0x522160- -0x56e);}if(_0x21dd02[_0xb9c68c(-0x61,-0x1a,-0x78,-0x3e)]){if(_0x18efd9[_0xb9c68c(-0xa5,-0x29,-0x79,-0x6b)]('MadXm',_0x18efd9[_0x4f17e7(0xe3,0x143,0x10b,0xef)])){if(_0xbe0fc4[_0x4f17e7(0x130,0x151,0x131,0x179)])return _0x536dd2?_0x8b631[_0xb9c68c(-0x51,-0xba,-0x93,-0xc5)]:'';const _0x6821a3=[];if(_0x2b95b0)_0x6821a3[_0x4f17e7(0x115,0x14f,0x105,0x134)](_0x4354f5[_0xb9c68c(-0x9e,-0x8a,-0x93,-0x57)]);return _0x284dbb&&_0x17d334[_0xb9c68c(-0xa5,-0x49,-0x91,-0xc9)+'n']&&_0x6821a3['push']('('+_0x130817['translatio'+'n']+')'),_0x6821a3[_0xb9c68c(-0x13a,-0xaa,-0xfc,-0xed)]('\x20');}else _0x18efd9[_0x4f17e7(0x19c,0x164,0x17d,0x11d)](_0x3fc7c2,_0x21dd02[_0x4f17e7(0x175,0x136,0x14b,0xfb)]);}else{if(_0x18efd9[_0xb9c68c(-0xc4,-0x83,-0xb5,-0xc6)](_0x18efd9[_0xb9c68c(-0xc2,-0xe9,-0xd7,-0x81)],'TOFJb')){if(_0x21dd02[_0xb9c68c(-0xe2,-0x116,-0xcb,-0xb0)]&&_0x18efd9[_0x4f17e7(0xfa,0x14a,0x16a,0x1a7)](_0x21dd02[_0x4f17e7(0x16c,0x121,0xfd,0x15a)][_0xb9c68c(-0x8e,-0x10d,-0xc9,-0x72)],_0xb9c68c(-0xdb,-0x9b,-0xae,-0xef))){if(_0x18efd9[_0x4f17e7(0x96,0xcc,0x10d,0x98)](_0x18efd9[_0xb9c68c(-0xd2,-0x162,-0x108,-0x135)],_0x18efd9[_0xb9c68c(-0x11b,-0xcc,-0x108,-0xba)])){_0x33f217[_0x4f17e7(0xc9,0xd6,0xb7,0xf2)](_0x352a10,_0x4f17e7(0x148,0x16a,0x1b9,0x162)+_0x43317d[_0x4f17e7(0x148,0x158,0x13a,0x198)]),_0x1b1c95[_0x4f17e7(0x161,0x121,0x100,0x168)](_0x33f217[_0x4f17e7(0x1af,0x15d,0x156,0x112)],_0x49387f);throw _0x2afa0;}else{const _0x304bab=new Error(_0x21dd02['error'][_0xb9c68c(-0xa6,-0x6b,-0x94,-0x8b)]);_0x304bab[_0x4f17e7(0xfe,0x123,0x171,0x12c)]=_0x18efd9[_0xb9c68c(-0x11f,-0x6f,-0xc8,-0xea)],_0x18efd9['aXnwD'](_0x3e3479,_0x304bab);}}else _0x18efd9[_0x4f17e7(0x127,0x141,0x152,0x198)](_0x3e3479,new Error(_0x21dd02[_0x4f17e7(0xd8,0x136,0xe1,0xf7)]));}else{if(_0x18efd9[_0xb9c68c(-0xf7,-0xe8,-0xd0,-0x101)](_0x2fed38['id'],_0x2b2279))return;_0x30aa64[_0xb9c68c(-0x73,-0x5c,-0x8c,-0x2f)+_0x4f17e7(0x187,0x162,0x146,0x139)](_0x28ccf0[_0xb9c68c(-0xee,-0x139,-0xfa,-0x11a)+_0xb9c68c(-0x71,-0x105,-0xbb,-0x60)+_0xb9c68c(-0x57,-0x4f,-0x73,-0xa3)+'PONSE'],_0x2e713c);const {prompt:_0x3e4fc0}=_0x1a9f0b;_0x188757[_0x4f17e7(0x10e,0xe6,0xc8,0xfb)](_0x4f17e7(0xf8,0x157,0x111,0x14c)+_0x4f17e7(0x114,0x12e,0x17e,0x14c)+_0x4f17e7(0x9b,0xee,0x10d,0x13f)+_0x2ff2d1+'):',_0x3e4fc0),_0x18efd9[_0x4f17e7(0x158,0x141,0x19d,0x118)](_0x4e07a9,_0x3e4fc0);}}};function _0x3a5289(_0x533dce,_0x3e0089,_0x181d9a,_0x3712ef){return _0x51f683(_0x533dce-0x1a6,_0x3712ef,_0x533dce- -0x78,_0x3712ef-0xb3);}eventSource['on'](eventNames['LLM_TRANSL'+'ATION_RESP'+_0x264024(0x436,0x40f,0x408,0x44b)],_0x29f294);const _0x2d9c4d={};_0x2d9c4d[_0x3a5289(-0x6f,-0x6b,-0x76,-0x4f)]=_0x3e465e;function _0x264024(_0x185914,_0x40e20b,_0x494856,_0x4327d5){return _0x51f683(_0x185914-0x1d9,_0x494856,_0x4327d5-0x451,_0x4327d5-0x25);}_0x2d9c4d['id']=_0x3473fe,eventSource[_0x264024(0x4dd,0x4d5,0x43e,0x48c)](eventNames[_0x264024(0x489,0x460,0x484,0x474)+'ATION_REQU'+_0x3a5289(-0x14,-0x51,0x4c,-0x6a)],_0x2d9c4d),_0x79fac8=_0x3ed638['lMjwk'](setTimeout,()=>{function _0x538dfa(_0x2cf02a,_0x32c2a5,_0x2f2f52,_0x419900){return _0x3a5289(_0x2f2f52- -0x216,_0x32c2a5-0x118,_0x2f2f52-0x1d4,_0x32c2a5);}function _0x45c5db(_0xe814a2,_0x424138,_0x24d72c,_0x3e8fd0){return _0x3a5289(_0x3e8fd0- -0x221,_0x424138-0x13b,_0x24d72c-0x48,_0x24d72c);}_0x18efd9[_0x538dfa(-0x20a,-0x20d,-0x1ee,-0x1c2)](_0x3f59c3),_0x3e3479(new Error(_0x538dfa(-0x216,-0x23c,-0x1f7,-0x24a)+'时（'+timeoutMs+_0x45c5db(-0x2c0,-0x230,-0x229,-0x27b)));},timeoutMs);});}function _0x141b(){const _0x2cc8ca=['t05trq','57+76k+r5AsX6lsLoG','EeLRC0G','Ew5eBwG','C2vWq1G','qKXArgq','zMLSDgvY','BgX2Eva','ExvfAg8','AxnbCNjHEq','wNvkBgq','u3rHue8','wgrhq0e','t01dyvO','uwz2rhi','ChjVBxb0','ioAjP+IHJoE7K+AENcaOsuq6','v0DWEMi','zgTgBNe','tNrnC24','wM1dCgS','tejVCLq','C29Tzq','DezRshG','C1j6yxG','sfDnqKi','BNbZA0i','vhLjBfy','C2TPCa','Bg9N','BLrUDgq','mJi3mJaXnfPptwzUuq','iow3SUAuTUwiSoE/U+IVKsbmte0','ohPKvfbwva','u0ndD2u','tuDIz0y','BxpVViK','keLeoIa','y1DfCfi','AM9PBG','tgnUwLe','teXnx1rsqu5tta','tuHkEKy','DeLpshq','C3vIC3rYAw5N','qKriAwO','qM5kALu','BuftCLO','mtG3ndrRB3LMvxa','ve1AvgG','Aw5KzxHpzG','B0ruv3a','EgfLtwi','q3v2AhO','DK9ls04','zvroAhm','DgvZDa','CMvZDwX0CW','ioIVT+AXGUE/U+IVKsbmte0G','nJC3otq0ng1pq25IuW','se96v3q','ve9dt1u','iePtt07OP6pMNPdLPlhOTkxVViW','DvbQEKW','CMvWBgfJzq','zw1PDa','uuPxvvK','uMneCuO','wffYuNy','mtyWBLLSzMPx','CgfYC2u','serivfy','y2zLBxO','rLzuy00','wfrSuei','uxHdtM8','Dw5Tv0W','C3ngs3m','AhnOueK','Dg9tDhjPBMC','thv4z28','CMfUzg9Tvvvjra','tMXfzxe','s3nMzvu','zvvetLa','ww1mtNu','v1P5s0G','vhfZANu','zxjYB3i','r0n3ChO','BMfTzq','wentyxe','C3rYAw5NAwz5','Bhf5sLO','Defet0G','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','A3vKtxO','DvnKELe','y0LTuuq','BM93','ieXmtsdORR7NVA7POBxPNAi','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','zwXlrxa','nJKWnJa5mfHQC0rJvW','qvrjt05Fr0vuxW','B3jPz2LUywXuyq','rvnu','ue9ou0u','nte2mZa2mgLzrfvKwa','CMvZDwX0','vMLVwhO','C2XPy2u','BNvszK4','q1fvC3m','t3PMwgS','y2XLyw5Lza','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','qwjVCNrfCNjVCG','C2v0','D2fYBG','vgXSuwW','rhLVBum','vfzHu1G','mtuZntmZnhjWtwrUCq','kcGOlISPkYKRkq','tuXjvhe','C2vHCMnO','Bwf0y2G','ufjptvbux1jfuq','s2TSwKe','wLjqwxu','yMDrsfq','wLj6rMe','DerJsfi','ChvZAa','z1PmAwG','C2TPChbLza','wLfPAuK','sfHqu3u','B2nVsKq','Dg9mB3DLCKnHCW','DhjPBq','C3qTy2HHDhu4oG','BwvZC2fNzq','B3jPz2LUywW','v3LyDva','DhjHBNnSyxrPBW','zMz2sK4','BK91qMu','vuvtva','txLIwuS','CMvTB3zLtgLZDa','qwnPELm','zw5LCG','C3rYAw5N','Cg5vAvm','ALbyuva','57+76k+rieXmtsdMIAFOOyZOTOu','ue9iC3a','z2HJqvO','C3zorLq','57+76k+r5AsX6lsLoIa','zgLZCgXHEvrLEa','qMTywLu','DxnLCG','5BcD6k+v5PEN5Qc85BYpoG','B29IsNq','rML2vu8','vfjtEvu','B0n1yKC','wMTTt2e','C3vJy2vZCW','Au5zt2q','teXYz2W','B2jQzwn0','nxf5reD4ta','ufjptvbux1jfuW','yxbWBhK','ENvjANO','uw5gv0i','EgfqqK0','iefjioIUVUE9RUw3SUE7N+s4GowiSa','y29UC3rYDwn0BW','vhzUyvy','C0zZs0G','icHjrdOG','sgn2vKm','odq4otK2ohHKs0TmCa','rejmB04','zLrWCfO','C3bSAxq'];_0x141b=function(){return _0x2cc8ca;};return _0x141b();}export async function callTranslation(_0x54e3d7){function _0x1effaa(_0x524b67,_0x420a8e,_0xf9286f,_0x497883){return _0x28fc(_0x497883- -0x33f,_0x524b67);}const _0x4114bf={'fJsjh':function(_0x2a585b,_0x12551d){return _0x2a585b===_0x12551d;},'Tqsju':_0x1effaa(-0x27b,-0x218,-0x241,-0x25b),'XdGCA':function(_0x33108f,_0x146ecc,_0x139c30){return _0x33108f(_0x146ecc,_0x139c30);},'GCwpz':_0x1effaa(-0x1f0,-0x24a,-0x1d7,-0x1fd)+'n','NtMsn':function(_0x8cbf07,_0x3dcc93){return _0x8cbf07||_0x3dcc93;},'ZQiiI':function(_0x3e5864,_0x3184b3){return _0x3e5864(_0x3184b3);},'ZuJld':_0xd74afc(0x3a7,0x3cb,0x3b5,0x377),'llvyP':function(_0x1c1165,_0x416d44){return _0x1c1165||_0x416d44;},'DyomC':function(_0xa24651,_0x58de79){return _0xa24651(_0x58de79);}};function _0xd74afc(_0x5013b9,_0x2f73cd,_0x3f376b,_0x5ce1b0){return _0x28fc(_0x3f376b-0x261,_0x5ce1b0);}try{if(_0x4114bf['fJsjh'](_0x1effaa(-0x206,-0x265,-0x242,-0x25b),_0x4114bf[_0x1effaa(-0x228,-0x241,-0x233,-0x238)])){let _0x1e9014=_0x4114bf[_0x1effaa(-0x22c,-0x2da,-0x261,-0x283)](buildPromptForRequestType,_0x4114bf[_0x1effaa(-0x1e4,-0x279,-0x212,-0x236)],_0x4114bf[_0xd74afc(0x352,0x2c9,0x324,0x307)](_0x54e3d7,''));_0x1e9014=_0x4114bf[_0x1effaa(-0x250,-0x21e,-0x1e3,-0x206)](mergeAdjacentMessages,_0x1e9014);const _0x5e96f9=[..._0x1e9014,{'role':_0x4114bf[_0xd74afc(0x2de,0x2dd,0x31b,0x31b)],'content':_0x4114bf[_0xd74afc(0x350,0x2ec,0x318,0x327)](_0x54e3d7,'')}];updateCombinedPrompt(_0x5e96f9);const _0x1afc78=await _0x4114bf[_0xd74afc(0x396,0x3b9,0x38a,0x345)](LLM_TRANSLATION,_0x5e96f9);return _0x1afc78;}else return[];}catch(_0x3e524f){addLog(_0xd74afc(0x3f5,0x3ee,0x3b2,0x376)+_0x3e524f['message']),console['error'](_0x1effaa(-0x265,-0x2a9,-0x272,-0x28e),_0x3e524f);throw _0x3e524f;}}let isAiInitialized=![];export function initAiSettings(_0x3ba143){const _0x3dae92={};function _0x8aa34b(_0x3bc53b,_0x58c3d6,_0x45a1e0,_0x18b105){return _0x28fc(_0x18b105- -0x178,_0x58c3d6);}_0x3dae92[_0x8aa34b(-0xc6,-0xf6,-0xc7,-0xb6)]='(((.+)+)+)'+'+$',_0x3dae92[_0xc83ce2(0x48b,0x3e0,0x433,0x434)]=_0xc83ce2(0x3b6,0x389,0x3d9,0x3af);function _0xc83ce2(_0x4d0aa9,_0xb717cd,_0x4a72ea,_0x52587b){return _0x28fc(_0x4a72ea-0x2f8,_0x52587b);}_0x3dae92['ZmCpk']='st-chatu8:'+_0xc83ce2(0x49b,0x3fe,0x45d,0x491)+'\x20LLM\x20设置页面';const _0x333da1=_0x3dae92;if(!isAiInitialized){if(_0x333da1[_0xc83ce2(0x405,0x3f9,0x433,0x480)]===_0x333da1[_0xc83ce2(0x450,0x3e5,0x433,0x3e5)])console['log'](_0x333da1[_0xc83ce2(0x374,0x37e,0x3bc,0x3b1)]),isAiInitialized=!![];else return _0x509f8f['toString']()[_0x8aa34b(0x10,-0x30,-0x7e,-0x4a)](XucRTJ[_0xc83ce2(0x3ce,0x413,0x3ba,0x35b)])[_0xc83ce2(0x3b1,0x455,0x3f7,0x41c)]()[_0xc83ce2(0x40d,0x429,0x45e,0x4b5)+'r'](_0x35942d)[_0x8aa34b(-0x1,-0x65,-0x92,-0x4a)](_0xc83ce2(0x432,0x420,0x424,0x3d8)+'+$');}}