(function(_0x3eb3f9,_0x1aaeeb){function _0x4f2862(_0xbb962b,_0x432163,_0xab0d6e,_0x4321e6){return _0x2f29(_0x4321e6-0x299,_0xab0d6e);}function _0x500a7b(_0x2b9e93,_0x339f5f,_0x1e751a,_0x171a21){return _0x2f29(_0x1e751a- -0x23b,_0x171a21);}const _0xe8878b=_0x3eb3f9();while(!![]){try{const _0xf57944=-parseInt(_0x500a7b(-0xf8,-0xfa,-0x145,-0x162))/(0x373*0x2+-0x16df+0xffa)*(-parseInt(_0x4f2862(0x415,0x3d7,0x3d2,0x3c0))/(0x2*0x263+-0x3a1+-0x123*0x1))+-parseInt(_0x4f2862(0x409,0x387,0x400,0x3da))/(-0x1fe9+0x5*0x326+0x102e)+-parseInt(_0x4f2862(0x3f9,0x41e,0x3e3,0x424))/(-0x1*-0x1a8e+0x4*0x87c+-0x3c7a)+-parseInt(_0x4f2862(0x3d8,0x3af,0x3cd,0x3a9))/(-0x11b1*0x1+0x5a*-0x4b+0xb05*0x4)+parseInt(_0x500a7b(-0xc3,-0xd0,-0x9e,-0x7b))/(0x91d*0x2+0x76c+-0x19a0)*(-parseInt(_0x500a7b(-0x15e,-0xbe,-0x10f,-0x149))/(0x10*-0x219+0x1*0x223d+0xa6*-0x1))+-parseInt(_0x4f2862(0x3bd,0x3a4,0x3bd,0x3a5))/(-0x11*0x22c+-0x5*0x53f+0x3f2f)+parseInt(_0x500a7b(-0x10a,-0x129,-0xf5,-0x146))/(-0x1618+-0x4c7+0x1ae8);if(_0xf57944===_0x1aaeeb)break;else _0xe8878b['push'](_0xe8878b['shift']());}catch(_0x268441){_0xe8878b['push'](_0xe8878b['shift']());}}}(_0x499d,-0x1*-0x49e2f+0x17356+0x26d5*0x6));const _0x5b4285=(function(){let _0x1760d7=!![];return function(_0x5b3fb1,_0x153e64){const _0x523bb2={};_0x523bb2['tiwmc']=_0x904df4(0x4bb,0x4a0,0x48f,0x4f1);const _0x23c0c3=_0x523bb2,_0x4749c5=_0x1760d7?function(){function _0x3656cc(_0x53f5cb,_0xaf072e,_0x645591,_0x2dcdc4){return _0x904df4(_0x53f5cb-0x17a,_0x53f5cb- -0x3fe,_0x2dcdc4,_0x2dcdc4-0xb7);}function _0x3d5d01(_0x472db1,_0x1b1bda,_0x1e232b,_0x55d52b){return _0x904df4(_0x472db1-0x1b,_0x55d52b- -0x2b9,_0x472db1,_0x55d52b-0x179);}if(_0x153e64){if(_0x3d5d01(0x253,0x213,0x26a,0x235)===_0x23c0c3[_0x3d5d01(0x22b,0x198,0x1ad,0x1e6)])return _0x561971[_0x3656cc(0xfd,0x146,0x13e,0xf9)]()[_0x3d5d01(0x1d6,0x21a,0x24f,0x229)](_0x3656cc(0x89,0xcf,0x39,0xd7)+'+$')[_0x3d5d01(0x28c,0x1fe,0x284,0x242)]()[_0x3656cc(0xee,0x137,0xe4,0x98)+'r'](_0x488c62)[_0x3d5d01(0x1e9,0x22c,0x20d,0x229)]('(((.+)+)+)'+'+$');else{const _0x23ea98=_0x153e64['apply'](_0x5b3fb1,arguments);return _0x153e64=null,_0x23ea98;}}}:function(){};_0x1760d7=![];function _0x904df4(_0xea0a91,_0x300372,_0xec57a8,_0x4d71a9){return _0x2f29(_0x300372-0x364,_0xec57a8);}return _0x4749c5;};}()),_0x2fc74a=_0x5b4285(this,function(){const _0x420db3={};function _0x44d66c(_0xd213b8,_0x341a5a,_0x22ae71,_0x3be68a){return _0x2f29(_0x22ae71-0x35a,_0x341a5a);}_0x420db3[_0x44d66c(0x4d0,0x49f,0x4b6,0x473)]='(((.+)+)+)'+'+$';const _0x482c90=_0x420db3;function _0x162415(_0x69cc39,_0x2a48ac,_0x388f65,_0x264ec1){return _0x2f29(_0x69cc39-0x2ab,_0x264ec1);}return _0x2fc74a[_0x162415(0x442,0x43c,0x3f2,0x420)]()[_0x44d66c(0x4ca,0x4db,0x4d8,0x51f)](_0x44d66c(0x44b,0x467,0x47d,0x454)+'+$')[_0x162415(0x442,0x41b,0x47e,0x480)]()[_0x44d66c(0x49b,0x523,0x4e2,0x4ba)+'r'](_0x2fc74a)[_0x44d66c(0x4b0,0x51d,0x4d8,0x515)](_0x482c90[_0x162415(0x407,0x445,0x43d,0x3c4)]);});_0x2fc74a();import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{mergeAdjacentMessages}from'./promptProcessor.js';let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x4349e7){function _0x4d8a79(_0x3a848e,_0x2335c0,_0x52b5d8,_0x5c1d64){return _0x2f29(_0x2335c0- -0x47,_0x52b5d8);}function _0xbbe07e(_0x11ee20,_0x411b25,_0x525aa1,_0x258f01){return _0x2f29(_0x525aa1- -0x6e,_0x258f01);}return SKIP_PATTERNS[_0xbbe07e(0xba,0x68,0x92,0x84)](_0x58056f=>_0x58056f[_0xbbe07e(0xcb,0x167,0x117,0x16a)](_0x4349e7[_0x4d8a79(0xc0,0xe3,0x102,0xb7)]()));}export function tagsToJsonString(_0x5b2665){function _0x215a84(_0x33f2f0,_0x55ea5c,_0x42bf0e,_0x4e0cbc){return _0x2f29(_0x42bf0e-0x1f3,_0x33f2f0);}function _0x87aee(_0x523ed9,_0x5851ff,_0x471379,_0x1f6487){return _0x2f29(_0x1f6487- -0x194,_0x471379);}if(!Array['isArray'](_0x5b2665))return'[]';return JSON[_0x87aee(0x2b,-0x1,0xf,-0xe)](_0x5b2665[_0x87aee(-0x85,-0x16,-0x1,-0x4f)](_0x49074c=>_0x49074c&&typeof _0x49074c===_0x215a84(0x32f,0x2ef,0x32c,0x2df)));}export function preprocessPromptForTranslation(_0x2241e3){const _0x54d72c={'LvXLr':function(_0x3a09ad,_0x49f53c){return _0x3a09ad<_0x49f53c;},'tOZTg':function(_0x3ae686,_0x83ab28){return _0x3ae686===_0x83ab28;},'eeNZH':_0x3c715f(-0x5c,-0x48,-0x17,-0xe),'rPcld':function(_0x577c56,_0x5b2a4f){return _0x577c56===_0x5b2a4f;},'znLkf':'pZtgv','wAhLj':function(_0x4bd917,_0x1f00a9){return _0x4bd917===_0x1f00a9;},'zNguk':'FQCXw','NPSRi':function(_0x119fd4,_0x54a687){return _0x119fd4(_0x54a687);},'KZriU':function(_0x4fedd0,_0x25a15a){return _0x4fedd0===_0x25a15a;},'RtJBh':_0x3c715f(-0x44,-0x78,0xb,-0x6c),'DgDSv':function(_0x4c65b5,_0x2180ec){return _0x4c65b5(_0x2180ec);},'HJKIa':function(_0xd50191,_0x4ca79b){return _0xd50191(_0x4ca79b);}};if(!_0x2241e3||typeof _0x2241e3!==_0x3c715f(-0x57,-0x32,-0xac,-0x30)){if(_0x54d72c[_0x3c715f(-0x3c,-0x26,-0x48,-0x86)](_0x54d72c[_0x56526d(-0x169,-0x1cf,-0x19b,-0x181)],_0x54d72c[_0x56526d(-0x149,-0x163,-0x19b,-0x17f)]))return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};else{const _0x1239e0=_0x2e5a58?function(){function _0x4d2c63(_0x349473,_0x182945,_0x2b8836,_0x4790fa){return _0x56526d(_0x2b8836,_0x182945-0x182,_0x349473-0x3b9,_0x4790fa-0x17a);}if(_0x5ba0d6){const _0x39ab74=_0x15c96f[_0x4d2c63(0x239,0x238,0x1eb,0x233)](_0x4f46d4,arguments);return _0x4718e2=null,_0x39ab74;}}:function(){};return _0x251cb0=![],_0x1239e0;}}const _0xae72d5=_0x570df9=>{function _0x3209e5(_0xf9d6a4,_0x53ce5c,_0xd32544,_0x2e87fa){return _0x3c715f(_0xf9d6a4-0x324,_0xd32544,_0xd32544-0x1bd,_0x2e87fa-0x163);}function _0xb24e82(_0x48f996,_0x5edb43,_0x541c6e,_0x17d2b5){return _0x56526d(_0x5edb43,_0x5edb43-0x16d,_0x17d2b5-0x5ab,_0x17d2b5-0xaa);}const _0x227efb={};_0x227efb['jphRA']=_0x3209e5(0x2e5,0x303,0x308,0x312)+_0xb24e82(0x41b,0x3ed,0x3b4,0x3e0)+_0x3209e5(0x2b3,0x25d,0x268,0x2c5);const _0x446537=_0x227efb,_0x1223ca=[];let _0x23f8b9='',_0x4ed222=![];for(let _0x53ff3a=0x3fb+0x169*-0x2+0x1b*-0xb;_0x54d72c[_0x3209e5(0x32d,0x355,0x33e,0x2fa)](_0x53ff3a,_0x570df9[_0xb24e82(0x3d2,0x42a,0x3e2,0x3df)]);_0x53ff3a++){if(_0x54d72c[_0x3209e5(0x2c3,0x27c,0x2c8,0x2f1)](_0x3209e5(0x2f9,0x2e3,0x2c0,0x2dc),_0x54d72c['eeNZH']))return[];else{const _0x29fe7e=_0x570df9[_0x53ff3a];if(_0x54d72c[_0x3209e5(0x2c3,0x316,0x274,0x2ea)](_0x29fe7e,'$'))_0x4ed222=!_0x4ed222,_0x23f8b9+=_0x29fe7e;else{if((_0x54d72c[_0xb24e82(0x3ce,0x42c,0x431,0x407)](_0x29fe7e,',')||_0x54d72c[_0x3209e5(0x2f3,0x2f7,0x330,0x2b3)](_0x29fe7e,'，'))&&!_0x4ed222){const _0x5e34bc=_0x23f8b9['trim']();if(_0x5e34bc)_0x1223ca[_0x3209e5(0x29e,0x253,0x2b8,0x2aa)](_0x5e34bc);_0x23f8b9='';}else _0x54d72c[_0x3209e5(0x32c,0x30b,0x317,0x31e)]!==_0x54d72c['znLkf']?_0x21c1aa['warn'](_0x446537[_0xb24e82(0x3fa,0x401,0x3c9,0x40f)],_0x428925[_0x3209e5(0x28e,0x238,0x2db,0x2a2)]):_0x23f8b9+=_0x29fe7e;}}}if(_0x23f8b9['trim']())_0x1223ca[_0xb24e82(0x3d1,0x3bf,0x417,0x3e2)](_0x23f8b9['trim']());return _0x1223ca;},_0x57ed8f=_0x54d72c['NPSRi'](_0xae72d5,_0x2241e3),_0x1a632f=[],_0x406983=[];function _0x3c715f(_0x5f3cde,_0x2eecb2,_0x4cfbcf,_0x302d1a){return _0x2f29(_0x5f3cde- -0x190,_0x2eecb2);}function _0x56526d(_0x4e0599,_0x386a59,_0x3dc7a7,_0x72ab81){return _0x2f29(_0x3dc7a7- -0x2d3,_0x4e0599);}const _0x46dab8=new Map();for(const _0x325169 of _0x57ed8f){const _0x1dfe8c=_0x325169['match'](SD_SYMBOL_PATTERN);if(_0x1dfe8c){if(_0x54d72c[_0x56526d(-0x1a9,-0x1c5,-0x176,-0x125)](_0x54d72c['RtJBh'],_0x54d72c['RtJBh'])){const _0x4dfe7f=_0x1dfe8c[-0x2c*0xd0+0x10e2+0x12df]||'',_0x26d19f=(_0x1dfe8c[0x3*0x166+0x1*-0x204d+-0x1c1d*-0x1]||'')[_0x3c715f(-0x66,-0x70,-0x96,-0x4a)](),_0x24ce33=_0x1dfe8c[-0xd3d*-0x1+-0x34a*0xa+0x13aa]||'',_0x172e73=_0x1dfe8c[0x220a+0x9d*-0x31+0x153*-0x3]||'',_0x11ee11={'original':_0x325169,'cleaned':_0x26d19f,'prefix':_0x4dfe7f,'suffix':_0x24ce33,'weight':_0x172e73,'skip':_0x54d72c['DgDSv'](shouldSkipTranslation,_0x325169)||_0x54d72c[_0x56526d(-0x1b1,-0x1a5,-0x1a6,-0x199)](shouldSkipTranslation,_0x26d19f)};_0x1a632f[_0x3c715f(-0x86,-0x46,-0xb2,-0xd9)](_0x11ee11),!_0x11ee11[_0x56526d(-0x17e,-0x1f7,-0x1cd,-0x1f4)]&&_0x26d19f&&(_0x406983[_0x3c715f(-0x86,-0xac,-0x9a,-0x9c)](_0x26d19f),_0x46dab8[_0x56526d(-0x1b0,-0x1d5,-0x1d4,-0x212)](_0x26d19f[_0x56526d(-0x140,-0xef,-0x138,-0x107)+'e'](),_0x11ee11));}else{const _0x2910d2=_0xa72b87[_0x3c715f(-0x3d,-0x5a,-0x2c,-0x79)](_0x427616,arguments);return _0x4a0428=null,_0x2910d2;}}else{const _0x327f0f={'original':_0x325169,'cleaned':_0x325169,'prefix':'','suffix':'','weight':'','skip':_0x54d72c[_0x56526d(-0x176,-0x109,-0x152,-0x185)](shouldSkipTranslation,_0x325169)};_0x1a632f['push'](_0x327f0f),!_0x327f0f[_0x56526d(-0x21d,-0x215,-0x1cd,-0x21c)]&&_0x325169&&(_0x406983[_0x56526d(-0x188,-0x18c,-0x1c9,-0x1d9)](_0x325169),_0x46dab8[_0x3c715f(-0x91,-0x4f,-0x7e,-0x8d)](_0x325169[_0x56526d(-0x138,-0x13c,-0x138,-0x118)+'e'](),_0x327f0f));}}return{'originalTags':_0x1a632f,'cleanedTags':_0x406983,'cleanedText':tagsToJsonString(_0x406983),'tagMap':_0x46dab8};}export function combineTranslationResult(_0x4d193c,_0x1f2d25){function _0x5f2d9b(_0x5ed1fa,_0x1ec18a,_0x24935f,_0xb70747){return _0x2f29(_0x5ed1fa- -0x165,_0x1ec18a);}const _0x2657e8={'nhMPH':function(_0x17b0b9,_0x2fd49a){return _0x17b0b9(_0x2fd49a);},'hQeRh':function(_0x47c11f,_0x47953c){return _0x47c11f(_0x47953c);},'Uzuul':function(_0x1809ef,_0x4ce864){return _0x1809ef!==_0x4ce864;},'eTvMS':_0x5f2d9b(-0x16,-0x62,0x1b,0x3e),'siCgG':_0x5f2d9b(-0x30,-0x79,0x17,-0x7),'YvdLJ':function(_0x31aaf2,_0x1968df){return _0x31aaf2===_0x1968df;},'HwEDX':_0x5f2d9b(-0x28,-0x35,0x2d,0x2c),'fhUsu':function(_0x4e69fe,_0x50b6c7){return _0x4e69fe===_0x50b6c7;},'LEKDV':_0x5f2d9b(-0x5a,-0x2d,-0x60,-0x1e)};if(!_0x4d193c||!Array[_0x5f2d9b(-0x23,-0x22,0x1a,0x34)](_0x4d193c)){if(_0x2657e8[_0x5f2d9b(0x27,0x47,0x1b,0x3)](_0x2657e8[_0x556f57(0x45e,0x42c,0x48c,0x476)],_0x2657e8['siCgG']))return[];else{const _0x142da0=_0x1d7524[0xcd+0x23e6+0x53e*-0x7]||'',_0x21c590=(_0xcf3367[0x16*0x179+0x1*0xf31+-0x2f95*0x1]||'')[_0x556f57(0x45d,0x3f0,0x455,0x439)](),_0x2d976d=_0x59fb1d[0xb31+0xe39+-0x1967]||'',_0x25c006=_0x3490c8[-0x1*-0xec1+-0x1*0x2171+-0x2a*-0x72]||'',_0x514d4e={'original':_0x2fbd7a,'cleaned':_0x21c590,'prefix':_0x142da0,'suffix':_0x2d976d,'weight':_0x25c006,'skip':_0x2657e8[_0x5f2d9b(0x22,0x5b,0x5,0x8)](_0x41f0fa,_0x1773ed)||_0x2657e8['nhMPH'](_0x8bb836,_0x21c590)};_0x3be6d8[_0x556f57(0x445,0x3d4,0x3d5,0x419)](_0x514d4e),!_0x514d4e[_0x556f57(0x3fa,0x436,0x417,0x415)]&&_0x21c590&&(_0x2666b9[_0x556f57(0x41f,0x3f0,0x439,0x419)](_0x21c590),_0x5ea401[_0x5f2d9b(-0x66,-0x79,-0x1a,-0x71)](_0x21c590[_0x5f2d9b(0x36,0x7b,0x4,0x2c)+'e'](),_0x514d4e));}}function _0x556f57(_0x3405b1,_0x5530a1,_0x1797d5,_0x54168b){return _0x2f29(_0x54168b-0x30f,_0x1797d5);}const _0x162d98={};if(_0x1f2d25&&_0x2657e8[_0x5f2d9b(-0x3,-0xe,0xc,0x4e)](typeof _0x1f2d25,_0x2657e8['HwEDX']))for(const [_0x3bbfa0,_0x4ee93d]of Object['entries'](_0x1f2d25)){if(_0x2657e8[_0x5f2d9b(-0x50,-0x97,-0x78,-0x5d)](_0x5f2d9b(-0x4e,0x7,-0x99,-0x39),_0x2657e8[_0x5f2d9b(-0x32,-0x4b,-0x56,-0x41)])){_0x168659['removeList'+_0x5f2d9b(-0x33,-0x75,0x10,0x12)](_0x5c5ea6[_0x5f2d9b(-0x53,-0x36,-0x1a,-0x80)+_0x556f57(0x3e4,0x401,0x3d9,0x41d)+'ONSE'],_0x3d70d4);if(_0x5b832c)_0x2657e8['hQeRh'](_0x51f92c,_0x47d44b);}else _0x162d98[_0x3bbfa0[_0x5f2d9b(0x36,0x2a,0x48,-0xd)+'e']()]=_0x4ee93d;}return _0x4d193c[_0x5f2d9b(0xc,0x19,0x0,-0x44)](_0x23faae=>{const {original:_0xfee6da,cleaned:_0x4748e3,skip:_0x2b1ba0}=_0x23faae;function _0x4df66f(_0xfb741e,_0x325b68,_0x1c940b,_0x3554fa){return _0x5f2d9b(_0x1c940b-0x3b2,_0x325b68,_0x1c940b-0x18d,_0x3554fa-0x82);}function _0x56f153(_0x4eea88,_0x16779f,_0x5e66e8,_0x515ea8){return _0x556f57(_0x4eea88-0x161,_0x16779f-0x2f,_0x515ea8,_0x4eea88- -0x618);}if(_0x2b1ba0){const _0x4db7dc={};return _0x4db7dc['original']=_0xfee6da,_0x4db7dc['translatio'+'n']='',_0x4db7dc['cleaned']=_0x4748e3,_0x4db7dc['skipped']=!![],_0x4db7dc;}const _0x213297=_0x162d98[_0x4748e3[_0x4df66f(0x418,0x429,0x3e8,0x42a)+'e']()]||'',_0x531380={};return _0x531380[_0x4df66f(0x372,0x322,0x35e,0x35d)]=_0xfee6da,_0x531380[_0x4df66f(0x3d1,0x3d0,0x3cd,0x3f9)+'n']=_0x213297,_0x531380['cleaned']=_0x4748e3,_0x531380[_0x56f153(-0x1ab,-0x18b,-0x19d,-0x1fc)]=![],_0x531380;});}export function formatTranslationDisplay(_0x4159a6,_0x2d2c8f={}){const {separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0x2d2c8f;if(!_0x4159a6||!Array['isArray'](_0x4159a6))return'';function _0x34a37d(_0x509db4,_0x3ff73b,_0x1534e4,_0x4a9aaa){return _0x2f29(_0x1534e4- -0x23,_0x3ff73b);}function _0x138e70(_0x29a81a,_0x534016,_0x178912,_0x5664a4){return _0x2f29(_0x534016-0x21b,_0x29a81a);}return _0x4159a6[_0x138e70(0x33f,0x38c,0x37b,0x388)](_0x590675=>{function _0x35a5be(_0x43dcd4,_0x517316,_0x42d2d5,_0x42bed2){return _0x138e70(_0x43dcd4,_0x517316- -0x1bb,_0x42d2d5-0x185,_0x42bed2-0xb);}function _0x3314f5(_0x242822,_0x29de16,_0x57b404,_0x4567c8){return _0x138e70(_0x29de16,_0x4567c8- -0x1fe,_0x57b404-0x1ce,_0x4567c8-0x164);}if(_0x590675[_0x3314f5(0x1c3,0x18c,0x196,0x17b)])return showOriginal?_0x590675[_0x35a5be(0x12e,0x171,0x1a3,0x14e)]:'';const _0x5f2e7a=[];if(showOriginal)_0x5f2e7a[_0x3314f5(0x163,0x10b,0xe6,0x127)](_0x590675[_0x3314f5(0x13d,0x141,0x12e,0x12e)]);return showTranslation&&_0x590675['translatio'+'n']&&_0x5f2e7a[_0x3314f5(0xf2,0xf9,0xde,0x127)]('('+_0x590675[_0x3314f5(0x14b,0x188,0x1b7,0x19d)+'n']+')'),_0x5f2e7a[_0x35a5be(0x1af,0x1ce,0x213,0x1e4)]('\x20');})[_0x34a37d(0x165,0xe1,0x122,0xeb)](Boolean)[_0x34a37d(0x196,0x14a,0x14b,0x19e)](separator);}export async function translatePromptTags(_0x1c45ca){function _0x34337e(_0xdf5089,_0x18e822,_0x482039,_0x16eb9e){return _0x2f29(_0x482039-0x1f7,_0x16eb9e);}const _0x261c33={'QLIgw':function(_0x5ce707,_0x1207dc){return _0x5ce707(_0x1207dc);},'oCkmS':'获取翻译提示词超时','SWmFn':function(_0x560895,_0x5539e3){return _0x560895(_0x5539e3);},'EhQYC':function(_0x51aac6,_0x1f6263){return _0x51aac6===_0x1f6263;},'ERntK':_0x34337e(0x37b,0x347,0x36b,0x374),'uDezw':function(_0x39e820,_0x3b77a5){return _0x39e820(_0x3b77a5);},'BQrqZ':function(_0x1c1946,_0x3bb9bf){return _0x1c1946(_0x3bb9bf);},'hpbLi':function(_0x412e53,_0x362e2f,_0x5b8e5e){return _0x412e53(_0x362e2f,_0x5b8e5e);},'Fjmjo':function(_0x523aa4,_0x255fdf){return _0x523aa4(_0x255fdf);},'eAqPV':_0x34337e(0x396,0x32d,0x348,0x38b)+'\x20翻译提示词标签失败'+':'},{originalTags:_0x302ed4,cleanedText:_0x3ed26f}=_0x261c33[_0x34337e(0x3bb,0x365,0x379,0x384)](preprocessPromptForTranslation,_0x1c45ca);if(!_0x3ed26f){const _0x14c3ac={};return _0x14c3ac['results']=[],_0x14c3ac[_0x34337e(0x357,0x3be,0x38a,0x3a9)+'t']='',_0x14c3ac['originalTa'+'gs']=[],_0x14c3ac;}function _0x13a1ef(_0x4089a1,_0x1a4567,_0x1a2de1,_0x586eb0){return _0x2f29(_0x1a4567- -0x1bc,_0x586eb0);}try{if(_0x261c33[_0x13a1ef(-0xa0,-0x72,-0x28,-0x49)](_0x13a1ef(-0xa6,-0xa9,-0x6d,-0x5a),_0x261c33[_0x34337e(0x2bd,0x2ce,0x30f,0x2d0)]))_0x1e55e0['removeList'+_0x34337e(0x32c,0x35f,0x329,0x2f4)](_0x269424['LLM_TRANSL'+_0x13a1ef(-0x55,-0x47,-0x2d,-0x1e)+_0x13a1ef(-0x3e,-0x40,-0x27,-0x3c)+_0x34337e(0x350,0x355,0x337,0x345)],_0x3467c1),_0x261c33[_0x34337e(0x2d7,0x334,0x315,0x334)](_0x2b915c,new _0x3c1328(_0x261c33[_0x13a1ef(-0x7a,-0x5b,-0x8c,-0xad)]));else{const _0x7c0173=await _0x261c33[_0x13a1ef(-0x10a,-0xb7,-0xac,-0xab)](callTranslation,_0x3ed26f),_0x732f2c=_0x261c33[_0x34337e(0x368,0x31c,0x367,0x341)](parseTranslationResult,_0x7c0173),_0xfdc9df=_0x261c33[_0x13a1ef(-0xa4,-0x50,-0x74,-0x7b)](combineTranslationResult,_0x302ed4,_0x732f2c),_0x1fba3c=_0x261c33[_0x13a1ef(-0x60,-0x27,-0x66,-0x30)](formatTranslationDisplay,_0xfdc9df),_0x1d9564={};return _0x1d9564[_0x13a1ef(-0x29,-0x39,-0x73,-0x45)]=_0xfdc9df,_0x1d9564['displayTex'+'t']=_0x1fba3c,_0x1d9564[_0x13a1ef(-0xe6,-0x94,-0x8d,-0x4e)+'gs']=_0x302ed4,_0x1d9564;}}catch(_0x35d820){console['error'](_0x261c33[_0x13a1ef(-0x98,-0x58,-0xaf,-0x39)],_0x35d820);throw _0x35d820;}}export function parseTranslationResult(_0x14f9d4){const _0x153f81={'XSbdX':function(_0x59ceda,_0x2a19b9){return _0x59ceda(_0x2a19b9);},'CAoAi':function(_0xc803ba,_0x3bdcdd){return _0xc803ba===_0x3bdcdd;},'EodEN':'object','TSZQv':function(_0x3f1ff8,_0x225dc3){return _0x3f1ff8!==_0x225dc3;},'qhIrh':function(_0x193c36,_0x212e9d){return _0x193c36===_0x212e9d;},'ETbbQ':function(_0x205b30,_0x337270){return _0x205b30===_0x337270;},'FvAfK':'QFlIa','bOsan':_0x44d5c5(0x4c,0x1a,-0x28,0x28)+_0x195f47(0x24c,0x246,0x268,0x238)+'尝试旧格式:','QmKSQ':_0x195f47(0x300,0x2fa,0x2cb,0x2f9),'iCxWd':function(_0x2b64b4,_0x46aea7){return _0x2b64b4>_0x46aea7;},'thhqE':function(_0x53ff1c,_0x3294aa){return _0x53ff1c+_0x3294aa;}};function _0x195f47(_0x164bef,_0x11c377,_0x3cdab2,_0x50d253){return _0x2f29(_0x3cdab2-0x160,_0x50d253);}if(!_0x14f9d4)return{};try{const _0x2b4c7a=_0x14f9d4['match'](/\{[\s\S]*\}/);if(_0x2b4c7a){const _0x34d1ed=JSON['parse'](_0x2b4c7a[-0x1e74*-0x1+0x4fd*0x1+-0x2b*0xd3]);if(typeof _0x34d1ed===_0x153f81[_0x44d5c5(0x74,0x9a,0x82,0x6b)]&&_0x34d1ed!==null){if(_0x153f81['ETbbQ']('CCqZv','CCqZv'))return _0x34d1ed;else{_0x153f81[_0x44d5c5(-0xc,-0x11,-0x29,-0x13)](_0x1342a3,'翻译失败:\x20'+_0x3e5abe[_0x195f47(0x27a,0x238,0x25a,0x290)]),_0x57bcca[_0x44d5c5(-0x42,0x2f,-0x2a,0x8)](_0x195f47(0x261,0x2fa,0x2ae,0x2f6),_0x550a07);throw _0x3b3db7;}}}}catch(_0x246940){if(_0x153f81[_0x44d5c5(-0x71,-0x16,-0x7b,-0x28)](_0x153f81[_0x44d5c5(0x83,0x8e,0x1d,0x4a)],_0x195f47(0x272,0x264,0x26f,0x21a)))console[_0x195f47(0x290,0x2f8,0x2a3,0x2c1)](_0x153f81[_0x195f47(0x24b,0x292,0x29a,0x27c)],_0x246940[_0x44d5c5(0x1b,0x19,-0x53,-0x2f)]);else{const _0x5b4f76=new _0x24f017(_0x12d430[_0x44d5c5(-0x46,-0x2e,0x19,0x8)][_0x44d5c5(-0x2b,-0x4,-0x66,-0x2f)]);_0x5b4f76[_0x44d5c5(0x79,0x6d,0x70,0x40)]=_0x195f47(0x2bf,0x27c,0x282,0x252),_0x262353(_0x5b4f76);}}const _0x314bde=_0x153f81[_0x195f47(0x231,0x2b5,0x276,0x2a6)](String,_0x14f9d4)['replace'](/[\r\n]+/g,'\x20')[_0x44d5c5(0x26,0xf,-0x4c,-0x2c)](/^[\s"'`]+|[\s"'`]+$/g,'')['trim'](),_0x2808e4=_0x314bde[_0x44d5c5(-0xc,0x19,0x18,0x41)](/[,，]/)['map'](_0x4f8553=>_0x4f8553['trim']())['filter'](Boolean);function _0x44d5c5(_0x4b043d,_0x2f0b7e,_0x476934,_0x3a4f50){return _0x2f29(_0x3a4f50- -0x129,_0x4b043d);}const _0x421f57={};for(const _0x347eb5 of _0x2808e4){if(_0x153f81['TSZQv'](_0x153f81['QmKSQ'],_0x195f47(0x31c,0x2cb,0x2df,0x2bc))){const _0x1a10d4=_0x347eb5[_0x44d5c5(0x16,0x9,-0x17,0x32)]('\x5c');if(_0x153f81[_0x44d5c5(-0x63,-0x17,-0x21,-0x10)](_0x1a10d4,-0x804+0x2d*-0xda+0x7b9*0x6)){if(_0x153f81['TSZQv'](_0x195f47(0x234,0x23f,0x25e,0x245),_0x44d5c5(0xd,-0x22,0x25,-0x2b))){const _0x5044f1=_0x2f28c9[_0x44d5c5(0x53,0x53,0x6c,0x4d)](_0x4820bc[0x8ad+-0x124f+0x336*0x3]);if(_0x153f81['CAoAi'](typeof _0x5044f1,_0x153f81['EodEN'])&&_0x153f81['TSZQv'](_0x5044f1,null))return _0x5044f1;}else{const _0x1adeb6=_0x347eb5['slice'](0x1025*0x1+-0x204+-0xe21,_0x1a10d4)[_0x195f47(0x288,0x23c,0x28a,0x29f)](),_0xd021aa=_0x347eb5[_0x44d5c5(-0x27,-0x1f,0x27,-0x20)](_0x153f81[_0x195f47(0x2ab,0x2de,0x2d2,0x2d5)](_0x1a10d4,0x16eb+0x22*0xef+-0x36a8))[_0x44d5c5(0x47,-0x21,0x53,0x1)]();if(_0x1adeb6)_0x421f57[_0x1adeb6]=_0xd021aa;}}}else{const _0x848746=_0x21c70a[_0x541668];if(_0x848746==='$')_0x4796fa=!_0x7f307f,_0x2e62d6+=_0x848746;else{if((_0x153f81[_0x44d5c5(0x2e,-0x5,-0x5d,-0x8)](_0x848746,',')||_0x153f81[_0x44d5c5(0x1,0xd,0x7,-0x8)](_0x848746,'，'))&&!_0x371729){const _0x349de7=_0x3fb48b[_0x195f47(0x26e,0x2d5,0x28a,0x2a6)]();if(_0x349de7)_0x360ec4[_0x195f47(0x271,0x228,0x26a,0x220)](_0x349de7);_0x12d29a='';}else _0x445515+=_0x848746;}}}return _0x421f57;}function generateRequestId(){const _0x4cb6b0={};function _0xc21ac(_0xcbcace,_0x23d7d1,_0x376699,_0x5c14e0){return _0x2f29(_0xcbcace-0x25a,_0x5c14e0);}_0x4cb6b0[_0xc21ac(0x3a5,0x3d3,0x3f3,0x3ec)]=function(_0x5d0f40,_0x1adf07){return _0x5d0f40+_0x1adf07;};const _0x36b647=_0x4cb6b0;function _0x23d796(_0x49504f,_0x5af7c2,_0x3cefd8,_0x437bdd){return _0x2f29(_0x3cefd8-0x126,_0x49504f);}if(crypto&&crypto[_0xc21ac(0x398,0x394,0x37a,0x34c)])return crypto[_0xc21ac(0x398,0x36e,0x361,0x37d)]();return _0x36b647[_0x23d796(0x27e,0x227,0x271,0x229)](Date[_0xc21ac(0x36e,0x345,0x3b9,0x357)]()[_0xc21ac(0x3f1,0x408,0x408,0x432)](-0x336+0x25fe*-0x1+0x24*0x126),Math['random']()['toString'](0x175f*-0x1+0x6a1+0x10e2)[_0x23d796(0x242,0x223,0x24c,0x26e)](0x1068+0x3*0x685+0x1*-0x23f5));}export function LLM_TRANSLATION_GET_PROMPT(){function _0x9df955(_0x209f6b,_0x437ad2,_0x2dcc5e,_0x5115d6){return _0x2f29(_0x437ad2-0x28b,_0x209f6b);}function _0x2a1d40(_0x56dbca,_0x45bda5,_0x34a3ac,_0x511886){return _0x2f29(_0x511886-0x19b,_0x45bda5);}const _0x48a2df={'ZERTT':function(_0x271825,_0x27e3c8){return _0x271825(_0x27e3c8);},'xLRxs':function(_0x251056,_0x1b3303){return _0x251056!==_0x1b3303;},'OtbGH':_0x9df955(0x37a,0x3a6,0x37f,0x3f6),'YvOAH':_0x9df955(0x41d,0x405,0x3d0,0x42f),'DDUjn':function(_0x44ae55,_0x4f9c46,_0x97593f){return _0x44ae55(_0x4f9c46,_0x97593f);}};return new Promise((_0x6efed4,_0xd05d8)=>{function _0x530152(_0x3f449f,_0x513010,_0x5d2f62,_0x46458b){return _0x9df955(_0x46458b,_0x5d2f62-0x13b,_0x5d2f62-0xc5,_0x46458b-0xca);}const _0x538472={'kOjLO':function(_0x149a7e,_0x191387){function _0x3ef33b(_0x4af926,_0x31bca7,_0x193365,_0x3d2073){return _0x2f29(_0x3d2073- -0x13d,_0x4af926);}return _0x48a2df[_0x3ef33b(-0x2f,-0x22,0x1f,-0x18)](_0x149a7e,_0x191387);},'NPPPD':function(_0x5b67b5,_0x5060c4){function _0x59aa55(_0x3ee09c,_0x35e5ce,_0x43134b,_0x59f6e6){return _0x2f29(_0x59f6e6- -0x180,_0x43134b);}return _0x48a2df[_0x59aa55(-0x9e,-0x48,-0x38,-0x5c)](_0x5b67b5,_0x5060c4);}};function _0x41ce89(_0x267dcd,_0x413a18,_0x1ff2a0,_0x4f9647){return _0x9df955(_0x4f9647,_0x267dcd- -0x8d,_0x1ff2a0-0x15,_0x4f9647-0x4f);}if(_0x48a2df['xLRxs'](_0x48a2df['OtbGH'],_0x48a2df[_0x530152(0x4c5,0x4c1,0x4e6,0x4b1)])){const _0x37d633=generateRequestId();console[_0x41ce89(0x36d,0x342,0x338,0x386)](_0x41ce89(0x34f,0x362,0x2fe,0x3a4)+_0x41ce89(0x394,0x387,0x3b2,0x387)+_0x530152(0x549,0x568,0x556,0x57a)+_0x37d633+')');const _0x184776=_0x44140d=>{function _0x382178(_0x184235,_0x4a2ecc,_0x5bb4e9,_0x483190){return _0x41ce89(_0x184235-0x9f,_0x4a2ecc-0x133,_0x5bb4e9-0x1d7,_0x5bb4e9);}function _0x556225(_0x50b131,_0x49eba9,_0x329659,_0x3b8e3e){return _0x41ce89(_0x3b8e3e- -0x47d,_0x49eba9-0x41,_0x329659-0x1b4,_0x50b131);}if(_0x538472['kOjLO'](_0x44140d['id'],_0x37d633))return;eventSource[_0x382178(0x3cb,0x3d0,0x3a6,0x3a9)+_0x382178(0x3cf,0x3e0,0x38a,0x426)](eventNames[_0x382178(0x3af,0x3b6,0x384,0x38f)+_0x556225(-0x150,-0xbd,-0xcc,-0x10a)+_0x382178(0x419,0x40c,0x469,0x466)+_0x556225(-0xfb,-0x115,-0x11a,-0x13f)],_0x184776);const {prompt:_0x3ce0f2}=_0x44140d;console['log'](_0x556225(-0x14c,-0xf5,-0x10b,-0x12e)+'\x20已获取翻译提示词\x20'+_0x556225(-0xbc,-0xd1,-0xfc,-0xed)+_0x37d633+'):',_0x3ce0f2),_0x538472['NPPPD'](_0x6efed4,_0x3ce0f2);};eventSource['on'](eventNames[_0x530152(0x4af,0x4ac,0x4d8,0x50b)+_0x41ce89(0x373,0x38b,0x383,0x338)+_0x530152(0x57d,0x4f2,0x542,0x580)+_0x530152(0x508,0x4de,0x506,0x4ce)],_0x184776);const _0x5d3d65={};_0x5d3d65['id']=_0x37d633,eventSource[_0x41ce89(0x2f2,0x2a4,0x2e6,0x2e5)](eventNames[_0x530152(0x48b,0x4d0,0x4d8,0x486)+'ATION_GET_'+_0x530152(0x554,0x513,0x543,0x553)+_0x530152(0x58d,0x577,0x553,0x591)],_0x5d3d65),_0x48a2df[_0x530152(0x543,0x517,0x52c,0x50a)](setTimeout,()=>{function _0x33d99f(_0x1228a5,_0x2620d0,_0x522690,_0x4eca2d){return _0x41ce89(_0x2620d0- -0x1d,_0x2620d0-0x11e,_0x522690-0x1e9,_0x4eca2d);}eventSource[_0x33d99f(0x2fc,0x30f,0x309,0x2f2)+_0x33d99f(0x311,0x313,0x2d0,0x323)](eventNames['LLM_TRANSL'+_0x33d99f(0x321,0x356,0x39a,0x360)+_0x13b0af(0x426,0x455,0x40e,0x3d2)+_0x13b0af(0x3d5,0x3f1,0x3d2,0x39d)],_0x184776);function _0x13b0af(_0x231ee0,_0x289b8e,_0x2bfccc,_0x50d6a6){return _0x530152(_0x231ee0-0xed,_0x289b8e-0x11c,_0x2bfccc- -0x134,_0x289b8e);}_0x48a2df[_0x33d99f(0x2cc,0x305,0x338,0x34c)](_0xd05d8,new Error(_0x13b0af(0x37a,0x3b4,0x3c2,0x3cb)));},0x1767*0x1+0x2e82+0x1ed9*-0x1);}else{const _0x31853e=_0x54ef84[_0x530152(0x506,0x4f9,0x4f0,0x4f4)]();if(_0x31853e)_0x33e424[_0x530152(0x491,0x49b,0x4d0,0x4a4)](_0x31853e);_0x3714d8='';}});}function _0x2f29(_0x1181e1,_0x4e0651){_0x1181e1=_0x1181e1-(0x1*-0xd2a+0xbf*-0x22+0x2779);const _0xe0e192=_0x499d();let _0x2d6b89=_0xe0e192[_0x1181e1];if(_0x2f29['qHkgmo']===undefined){var _0x3a125c=function(_0x546a67){const _0x218553='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x24f4be='',_0x580765='',_0x3c9469=_0x24f4be+_0x3a125c;for(let _0x3db47a=-0x5*0x2af+-0x3*-0xcff+0x886*-0x3,_0x2a819a,_0x3c6de0,_0x55d921=-0x1a69+-0x1bfd+0x3666;_0x3c6de0=_0x546a67['charAt'](_0x55d921++);~_0x3c6de0&&(_0x2a819a=_0x3db47a%(0x4*0x496+-0x2d3+-0x15*0xbd)?_0x2a819a*(-0x24bf+0x16*-0x59+0x2ca5)+_0x3c6de0:_0x3c6de0,_0x3db47a++%(0x2458+0x2551+-0x49a5))?_0x24f4be+=_0x3c9469['charCodeAt'](_0x55d921+(-0x1683+0x5*0x13+-0x11*-0x14e))-(-0xead+0x1636+-0x77f)!==-0x1*-0xf62+0x1592+0x6e*-0x56?String['fromCharCode'](-0x5e3*0x6+0x57a+0x1ed7&_0x2a819a>>(-(-0x10ae+-0x1862*-0x1+-0x7b2)*_0x3db47a&-0x1*-0x1000+0x26e9+0x36e3*-0x1)):_0x3db47a:-0x423*-0x7+0xe*-0x133+-0x26f*0x5){_0x3c6de0=_0x218553['indexOf'](_0x3c6de0);}for(let _0x353019=-0xb66*0x1+0x3*0x9f1+-0x126d,_0x2552c1=_0x24f4be['length'];_0x353019<_0x2552c1;_0x353019++){_0x580765+='%'+('00'+_0x24f4be['charCodeAt'](_0x353019)['toString'](0x6f*-0x4e+-0x141c+0x35fe))['slice'](-(0xd1f+0x8*0xa7+-0x1255));}return decodeURIComponent(_0x580765);};_0x2f29['fqXboU']=_0x3a125c,_0x2f29['IpgTUZ']={},_0x2f29['qHkgmo']=!![];}const _0x1a539f=_0xe0e192[-0x1db8+-0x1e6b+0x5*0xc07],_0x3e07d9=_0x1181e1+_0x1a539f,_0x54a8cb=_0x2f29['IpgTUZ'][_0x3e07d9];if(!_0x54a8cb){const _0x5b3dad=function(_0x31099a){this['CDeQbY']=_0x31099a,this['LYEsgZ']=[0x1*0x6d+-0x1aad+0x1*0x1a41,0x60f+0xc3d*0x1+-0x926*0x2,-0x2*-0xe16+0x147d+-0x30a9],this['uSRWRx']=function(){return'newState';},this['FHfOwC']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['VdCzvm']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5b3dad['prototype']['GijXuT']=function(){const _0xdcc640=new RegExp(this['FHfOwC']+this['VdCzvm']),_0x1d3939=_0xdcc640['test'](this['uSRWRx']['toString']())?--this['LYEsgZ'][0x20bd*-0x1+0x1948+0x776]:--this['LYEsgZ'][0x3*0xb8d+0x3ff+-0x26a6];return this['fCvDEE'](_0x1d3939);},_0x5b3dad['prototype']['fCvDEE']=function(_0xadf589){if(!Boolean(~_0xadf589))return _0xadf589;return this['yJBBYZ'](this['CDeQbY']);},_0x5b3dad['prototype']['yJBBYZ']=function(_0x904d5a){for(let _0x35e6c4=-0x6*-0x1ab+-0x1*-0x1c99+-0x269b*0x1,_0x535709=this['LYEsgZ']['length'];_0x35e6c4<_0x535709;_0x35e6c4++){this['LYEsgZ']['push'](Math['round'](Math['random']())),_0x535709=this['LYEsgZ']['length'];}return _0x904d5a(this['LYEsgZ'][-0xdcd*0x1+0x9*-0x22c+0x2159]);},new _0x5b3dad(_0x2f29)['GijXuT'](),_0x2d6b89=_0x2f29['fqXboU'](_0x2d6b89),_0x2f29['IpgTUZ'][_0x3e07d9]=_0x2d6b89;}else _0x2d6b89=_0x54a8cb;return _0x2d6b89;}export function LLM_TRANSLATION(_0x2e4d41,{timeoutMs:timeoutMs=0x9c50+-0x286*-0x7b+-0xe852}={}){function _0x4adabe(_0x56ed90,_0x48bdfa,_0x45c7d1,_0x28ddbd){return _0x2f29(_0x45c7d1-0x2b,_0x48bdfa);}const _0x5fbba1={'nPQcb':function(_0x4aa7f8,_0x583120){return _0x4aa7f8===_0x583120;},'WEpsq':_0x4adabe(0x12a,0x105,0x127,0xe3),'NcLlX':function(_0x101dd7){return _0x101dd7();},'ZaYcA':function(_0x5a8b12,_0x3aacfb){return _0x5a8b12!==_0x3aacfb;},'mrPGb':function(_0x13fdce,_0xb2962a){return _0x13fdce(_0xb2962a);},'qQwCt':_0x45ff65(0x83,0x54,0x64,0x16),'KnzjK':'vuvaJ','UJkYQ':function(_0x4f3cd7){return _0x4f3cd7();},'WuJuk':'uQfzy','JfIbG':'AbortError','jlQNJ':function(_0x212b63){return _0x212b63();},'LDsrn':function(_0x4ab549,_0x37c912,_0x397e74){return _0x4ab549(_0x37c912,_0x397e74);}};function _0x45ff65(_0x599056,_0x2a09f8,_0x2c8fdc,_0x479e66){return _0x2f29(_0x2a09f8- -0xe2,_0x479e66);}return new Promise((_0x334f7d,_0x131492)=>{const _0x38241d={'RdiJN':function(_0x2ac219,_0x39834d){function _0x64c354(_0x61dcd2,_0x557f04,_0x4533f4,_0x3d1926){return _0x2f29(_0x4533f4- -0xab,_0x557f04);}return _0x5fbba1[_0x64c354(0x7d,0xa0,0x9d,0xaf)](_0x2ac219,_0x39834d);},'beetq':function(_0x3444de,_0x1abdad){function _0x4117a8(_0x52ea9c,_0x2fea9c,_0x1c1a38,_0x3c9db8){return _0x2f29(_0x1c1a38-0xbf,_0x2fea9c);}return _0x5fbba1[_0x4117a8(0x20f,0x239,0x21f,0x21f)](_0x3444de,_0x1abdad);},'GhLrG':function(_0x2caf6b,_0x5282b6){return _0x5fbba1['mrPGb'](_0x2caf6b,_0x5282b6);},'BmKyJ':_0x5fbba1[_0x5570df(0x32e,0x32a,0x349,0x32c)],'LDejg':_0x5fbba1[_0x5570df(0x30d,0x2c8,0x2a3,0x279)],'FhmqW':function(_0x5c3d35){function _0x3a3293(_0x567d6d,_0x59e990,_0x31b3b6,_0x17823c){return _0x5570df(_0x567d6d-0x6b,_0x31b3b6-0xe8,_0x17823c,_0x17823c-0x149);}return _0x5fbba1[_0x3a3293(0x416,0x3dd,0x3e8,0x398)](_0x5c3d35);},'QbciB':function(_0xf3a74a,_0x15815d){return _0xf3a74a===_0x15815d;},'oIUVu':_0x5fbba1[_0x39649f(-0x8b,-0xb2,-0xb4,-0xa7)],'pdLiO':_0x5fbba1[_0x39649f(-0xa2,-0x7e,-0x57,-0x49)],'HDTvU':function(_0x349c3e,_0x55af19){function _0x4d8404(_0x2ac6d7,_0x4479f2,_0x7047b4,_0x5bc878){return _0x5570df(_0x2ac6d7-0x146,_0x7047b4-0xd3,_0x2ac6d7,_0x5bc878-0x83);}return _0x5fbba1[_0x4d8404(0x429,0x3e7,0x408,0x3e4)](_0x349c3e,_0x55af19);}};function _0x39649f(_0x1e6133,_0x3f6c03,_0x16bb21,_0x19bb96){return _0x45ff65(_0x1e6133-0xd9,_0x16bb21- -0xec,_0x16bb21-0x1e5,_0x1e6133);}const _0x3af9d8=_0x5fbba1[_0x5570df(0x2f8,0x2cd,0x2a7,0x2e4)](generateRequestId);console[_0x5570df(0x33c,0x344,0x361,0x334)]('st-chatu8:'+_0x39649f(-0x7e,-0x2b,-0x4a,-0x2a)+_0x5570df(0x33e,0x367,0x369,0x3a5)+_0x3af9d8+')');let _0x115878=null;const _0x391c3a=()=>{function _0x27b423(_0x2697ef,_0x3ad171,_0x3bb4c1,_0x5198d9){return _0x39649f(_0x5198d9,_0x3ad171-0xfe,_0x2697ef-0x194,_0x5198d9-0x177);}function _0x3cc07d(_0x32aea9,_0x325332,_0xdcee06,_0x4031e5){return _0x39649f(_0x325332,_0x325332-0x11d,_0xdcee06- -0x17c,_0x4031e5-0x1bd);}if(_0x38241d[_0x3cc07d(-0x1f9,-0x236,-0x203,-0x259)](_0x27b423(0x162,0x114,0x19d,0x154),_0x27b423(0x120,0x116,0xda,0x126))){eventSource[_0x3cc07d(-0x25e,-0x21f,-0x21c,-0x267)+_0x27b423(0xf8,0xcd,0xb1,0xb1)](eventNames[_0x27b423(0xd8,0xb6,0xe9,0x97)+'ATION_RESP'+_0x27b423(0x10f,0xd3,0x14c,0xdc)],_0x6e5637);if(_0x115878)_0x38241d[_0x3cc07d(-0x22e,-0x207,-0x1f2,-0x1f7)](clearTimeout,_0x115878);}else{if(_0x522310&&_0x5339b9[_0x27b423(0x104,0xad,0xe9,0x106)])return _0x342194[_0x3cc07d(-0x1d6,-0x200,-0x20c,-0x1dd)]();return _0x563413[_0x27b423(0xda,0xa6,0x85,0x10f)]()[_0x3cc07d(-0x1a3,-0x1bd,-0x1b3,-0x173)](0x1cfb*-0x1+-0x2*0x5b+0x1dd5)+_0x22282e[_0x27b423(0x113,0xf4,0x128,0x155)]()['toString'](-0x3ae+0x121b+0x35*-0x45)[_0x3cc07d(-0x21d,-0x1d5,-0x224,-0x254)](-0xb51+0x4*0x965+-0xb*0x263);}};function _0x5570df(_0x34c5a7,_0x52eb2b,_0x534445,_0xab8ea4){return _0x45ff65(_0x34c5a7-0x1df,_0x52eb2b-0x2b7,_0x534445-0x141,_0x534445);}const _0x6e5637=_0x5ee434=>{function _0x1f9b82(_0x339eca,_0xe099f6,_0x314bb0,_0x19c746){return _0x39649f(_0x314bb0,_0xe099f6-0x1cf,_0xe099f6-0x137,_0x19c746-0x14a);}function _0x1b8d00(_0xa1103e,_0x33746e,_0x20984c,_0x4d4df1){return _0x5570df(_0xa1103e-0x113,_0x4d4df1- -0x57e,_0xa1103e,_0x4d4df1-0x12e);}if(_0x38241d[_0x1b8d00(-0x251,-0x236,-0x292,-0x262)](_0x38241d['BmKyJ'],_0x38241d['LDejg'])){if(_0x5ee434['id']!==_0x3af9d8)return;_0x38241d[_0x1f9b82(0xb2,0xd6,0xf7,0xb6)](_0x391c3a),console['log'](_0x1f9b82(0xca,0xba,0x9f,0xd3)+_0x1b8d00(-0x26d,-0x24a,-0x22e,-0x220)+_0x1b8d00(-0x1ff,-0x1fc,-0x273,-0x22e)+'\x20'+_0x3af9d8+'):',_0x5ee434);if(_0x5ee434[_0x1f9b82(0xe5,0xbf,0x93,0x8d)]){if(_0x38241d[_0x1f9b82(0x100,0xe2,0xe2,0x11c)](_0x38241d[_0x1b8d00(-0x29e,-0x2f6,-0x2b5,-0x2a5)],_0x38241d['oIUVu']))_0x334f7d(_0x5ee434['result']);else{const _0x3cf32d={};return _0x3cf32d[_0x1f9b82(0x8e,0x7a,0x9e,0x79)]=_0x5dbb62,_0x3cf32d[_0x1b8d00(-0x1fe,-0x1e6,-0x21e,-0x229)+'n']='',_0x3cf32d[_0x1f9b82(0x7e,0x5e,0x47,0x1c)]=_0x134e0f,_0x3cf32d[_0x1f9b82(0xaa,0xc7,0xd5,0xfe)]=!![],_0x3cf32d;}}else{if(_0x5ee434['error']&&_0x5ee434[_0x1f9b82(0x58,0x9a,0x63,0x60)]['name']===_0x38241d['pdLiO']){const _0x34dd35=new Error(_0x5ee434['error']['message']);_0x34dd35[_0x1f9b82(0xf9,0xd2,0xba,0xb8)]=_0x1f9b82(0xc9,0x8b,0xa1,0xe2),_0x38241d['HDTvU'](_0x131492,_0x34dd35);}else _0x131492(new Error(_0x5ee434['result']));}}else _0x38241d[_0x1f9b82(0xed,0xcc,0xbb,0x95)](_0x1a01fa,new _0x378db7(_0x3e15f6[_0x1f9b82(0x9b,0xa8,0xa3,0xa8)]));};eventSource['on'](eventNames[_0x5570df(0x2c3,0x2e7,0x2f3,0x2ae)+_0x5570df(0x333,0x2e3,0x2db,0x291)+_0x5570df(0x2fa,0x31e,0x33d,0x2f2)],_0x6e5637);const _0x801648={};_0x801648[_0x39649f(-0x106,-0xe5,-0xd3,-0xaa)]=_0x2e4d41,_0x801648['id']=_0x3af9d8,eventSource[_0x39649f(-0xad,-0xdf,-0xda,-0xed)](eventNames[_0x39649f(-0xf1,-0xcb,-0xbc,-0xd3)+'ATION_REQU'+'EST'],_0x801648),_0x115878=_0x5fbba1[_0x39649f(-0xd6,-0x128,-0xdd,-0xbb)](setTimeout,()=>{function _0x21ab33(_0x5645c6,_0x510d9b,_0x1f6e8c,_0x28bd7c){return _0x39649f(_0x1f6e8c,_0x510d9b-0x136,_0x510d9b-0x228,_0x28bd7c-0x6a);}function _0x6c6048(_0x205bbb,_0x5ea798,_0x5e2784,_0x5bcb46){return _0x39649f(_0x5ea798,_0x5ea798-0x181,_0x205bbb- -0x19b,_0x5bcb46-0x174);}if(_0x5fbba1[_0x21ab33(0x207,0x1c2,0x198,0x17f)](_0x5fbba1[_0x21ab33(0x12a,0x153,0x110,0x12e)],_0x5fbba1[_0x21ab33(0x16e,0x153,0x199,0x12b)]))_0x5fbba1[_0x21ab33(0x227,0x1e8,0x1f3,0x20b)](_0x391c3a),_0x131492(new Error('翻译\x20LLM\x20执行超'+'时（'+timeoutMs+_0x21ab33(0x111,0x167,0x15a,0x126)));else{if(!_0x1f0aa2[_0x21ab33(0x1ad,0x19c,0x18d,0x158)](_0x98ea80))return'[]';return _0x4337fd[_0x6c6048(-0x1e3,-0x20c,-0x1e3,-0x217)](_0x5f2dd0[_0x21ab33(0x14e,0x19f,0x1ae,0x1b4)](_0xb2450f=>_0xb2450f&&typeof _0xb2450f===_0x21ab33(0x142,0x193,0x17e,0x13d)));}},timeoutMs);});}export async function callTranslation(_0x3b9f64){function _0x37590a(_0x3dbcb1,_0x1a9b4a,_0x412ca8,_0x183990){return _0x2f29(_0x183990- -0x1,_0x412ca8);}const _0x2df51b={'LcxfH':function(_0xc7b0f4,_0x406784,_0x49c2fd){return _0xc7b0f4(_0x406784,_0x49c2fd);},'jTXCW':'translatio'+'n','cRWuN':function(_0x56e673,_0x235ea1){return _0x56e673||_0x235ea1;},'gQlgp':function(_0x561bb3,_0x3f9ee9){return _0x561bb3(_0x3f9ee9);},'leOiL':_0x5aba8f(0x3c5,0x3ef,0x41d,0x436),'LWjlh':function(_0x17148d,_0x5bf36f){return _0x17148d(_0x5bf36f);},'exbYC':_0x37590a(0x11b,0x153,0x102,0x14d)};function _0x5aba8f(_0x3d1a61,_0x4c89ee,_0x171ea2,_0x1974ac){return _0x2f29(_0x4c89ee-0x2ed,_0x1974ac);}try{let _0x8215ba=_0x2df51b[_0x37590a(0x110,0x147,0xfb,0x102)](buildPromptForRequestType,_0x2df51b[_0x37590a(0x159,0x13f,0x19a,0x151)],_0x2df51b[_0x37590a(0x15c,0x126,0xf1,0x11c)](_0x3b9f64,''));_0x8215ba=_0x2df51b[_0x5aba8f(0x4d6,0x487,0x4d5,0x46d)](mergeAdjacentMessages,_0x8215ba);const _0x14f3aa={};_0x14f3aa[_0x5aba8f(0x41c,0x409,0x3da,0x3dd)]=_0x2df51b[_0x5aba8f(0x476,0x431,0x476,0x47f)],_0x14f3aa[_0x37590a(0xbf,0x148,0x13c,0xf1)]=_0x3b9f64||'';const _0x4eb07a=[..._0x8215ba,_0x14f3aa];_0x2df51b[_0x5aba8f(0x4a1,0x47c,0x4ca,0x43c)](updateCombinedPrompt,_0x4eb07a);const _0x258a37=await _0x2df51b[_0x5aba8f(0x4c3,0x47c,0x4b7,0x49d)](LLM_TRANSLATION,_0x4eb07a);return _0x258a37;}catch(_0x40c7f5){_0x2df51b['gQlgp'](addLog,_0x5aba8f(0x426,0x444,0x41f,0x41a)+_0x40c7f5[_0x37590a(0x130,0x143,0x10c,0xf9)]),console['error'](_0x2df51b['exbYC'],_0x40c7f5);throw _0x40c7f5;}}let isAiInitialized=![];function _0x499d(){const _0xc96f63=['zMLSDgvY','nJKXotqZngrjDMLIAa','uMrPsK4','wMfzy0e','t05trq','rwHrwum','u0jRChq','zLPmrhu','CMfUzg9T','57+76k+r5AsX6lsLoG','tej2A2e','ExHtsvG','C3qTy2HHDhu4oG','ALryq1C','yxbWBhK','D0fOtgO','Cvf3q3q','C3vJy2vZCW','57+76k+r5AsX6lsLoIa','yMvLDhe','iefjioIUVUE9RUw3SUE7N+s4GowiSa','wwXosgG','Aw5KzxHpzG','D29ny0W','s1PYAvu','C2TPChbLza','CLbJBgq','Bxjqr2i','B0nRBvm','wxzKteO','r2HmCKC','zufXufy','Ag5KzLG','rervAM4','zvr2tvm','BLbry2i','BMfTzq','C3bSAxq','vwXVqxK','AhbItgK','rMHTCvC','AM9PBG','Bg9N','qLfYCvO','BwfW','DgHOCuu','rNzbzKS','v2DLA2S','qvrjt05Fr0vuxW','CgfYC2u','sMzjyKC','C3PLtM0','uwjJAui','t3vds04','ioAjP+IHJoE7K+AENcaOsuq6','ufjptvbux1jfuW','ufjptvbux1jfuq','C2vHCMnO','sMfwrNK','DhjHBNnSyxrPBW','sePlswe','u1DTrM4','CMvZDwX0CW','ioIVT+AXGUE/U+IVKsbmte0G','DgvZDa','C3rYAw5NAwz5','BMHnueG','y29UC3rYDwn0BW','iow3SUAuTUwiSoE/U+IVKsbmte0','CwXLzKG','nZuYmJGWDLDmCfv0','vxP1DwW','vuvtva','tMnmBfG','tfDQBgG','icHjrdOG','ieXmtsdORR7NVA7POBxPNAi','keLeoIa','zgLZCgXHEvrLEa','rw9Kru4','rMPTAM8','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','Dg9tDhjPBMC','EM5mA2y','thzythi','z1fSz3a','Dg9mB3DLCKnHCW','s1PUEha','mZbrC29PwLK','terZCM4','y29UDgvUDa','s256AKS','zw1PDa','y2XLyw5Lza','nda4ode1yMT1BwLP','DvzqAhe','AMXrtKO','v0vWC3e','BwvZC2fNzq','ChjVBxb0','CM5vshK','CMvWBgfJzq','sKPzEwq','C2v0','C29Tzq','vfnAuxy','DxnLCG','tgn4zKG','B0LvvNu','DurLENC','C2TPCa','BgvUz3rO','iePtt07OP6pMNPdLPlhOTkxVViW','C2XPy2u','ChvZAa','BLLLr00','mJq3ndi0ofz3C0nUrG','BxpVViK','qvrjt05FuKvtua','yLvSwxK','nta5odaWzxLmzhPV','B3jPz2LUywW','teXnx1rsqu5tta','uwjusuy','BM93','zMHvC3u','wfnIzfG','r0TttfG','rvjUDeS','Aun4v2q','v3vkDwS','CK5UEgS','CM9Szq','y1jxDu4','uuXjz3C','5BcD6k+v5PEN5Qc85BYpoG','wxzpquG','CwHjCMG','qwjVCNrfCNjVCG','kcGOlISPkYKRkq','wKvsvfq','EeXsEhm','C3vIC3rYAw5N','ne13q3HLta','B3jPz2LUywXuyq','ELr2zMi','DhjPBq','vuPRwve','nJyYotqYs2rgr25x','rgDeu3y','CMvTB3zLtgLZDa','De9AvgC','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','zxjYB3i','zw5LCG','tevlrfy','uenAveG','r2jgvem','Du12vLO','ANbOuKe','EK5NDwS','C3rYAw5N','yK9Zyw4','DgL3Bwm','vLfpB2C','B2jQzwn0','CMfUzg9Tvvvjra','CMvZDwX0','ue9ou0u','mty4oda0rfbuqNbM','AxnbCNjHEq','D2fYBG','BgvpAuW'];_0x499d=function(){return _0xc96f63;};return _0x499d();}export function initAiSettings(_0x4f04d3){function _0x47aa4f(_0x367638,_0x16af95,_0x23cdc3,_0xe57ced){return _0x2f29(_0x367638- -0x2e7,_0xe57ced);}const _0x4d9760={};_0x4d9760[_0x47aa4f(-0x1f0,-0x219,-0x208,-0x204)]=_0x1425ce(0x327,0x2dd,0x319,0x2ce),_0x4d9760[_0x1425ce(0x3af,0x3b6,0x368,0x3a7)]=_0x47aa4f(-0x196,-0x190,-0x176,-0x144)+_0x47aa4f(-0x18e,-0x1c3,-0x161,-0x1b7)+_0x47aa4f(-0x156,-0x110,-0x163,-0x1a4);function _0x1425ce(_0x32ca86,_0x444217,_0x66adaf,_0x1d8fe1){return _0x2f29(_0x66adaf-0x1f0,_0x1d8fe1);}const _0x2eda15=_0x4d9760;!isAiInitialized&&(_0x47aa4f(-0x197,-0x169,-0x1d3,-0x166)!==_0x2eda15[_0x1425ce(0x2a0,0x2cd,0x2e7,0x2b0)]?(console[_0x1425ce(0x379,0x396,0x35f,0x3b5)](_0x2eda15['szeNm']),isAiInitialized=!![]):(_0x1181e1[_0x47aa4f(-0x1dd,-0x20d,-0x1df,-0x199)](_0x4e0651),_0xe0e192[_0x1425ce(0x2ea,0x2b4,0x2ef,0x329)](_0x2d6b89[_0x47aa4f(-0x14c,-0x174,-0x11c,-0x13e)+'e'](),_0x3a125c)));}