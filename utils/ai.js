(function(_0x49d0f4,_0x5cc761){const _0x55885b=_0x49d0f4();function _0x37e5b4(_0x378cb2,_0x2df721,_0x20fc20,_0xf8aa03){return _0x5d08(_0xf8aa03-0x251,_0x2df721);}function _0x28d6a0(_0x1c2757,_0x405471,_0x1e648b,_0x506590){return _0x5d08(_0x506590- -0x37e,_0x405471);}while(!![]){try{const _0x2ff481=parseInt(_0x28d6a0(-0x265,-0x262,-0x267,-0x23d))/(-0xbf2+-0x2ba*0xd+0xb*0x44f)*(-parseInt(_0x28d6a0(-0x2a1,-0x2a2,-0x24e,-0x24b))/(-0x9d6+-0x20aa+0x1*0x2a82))+parseInt(_0x37e5b4(0x376,0x335,0x34a,0x37e))/(-0x10f*-0x8+-0x22c2+0x1a4d)*(parseInt(_0x28d6a0(-0x224,-0x23a,-0x231,-0x261))/(-0x21*-0xfd+-0x2561+0x4c8))+parseInt(_0x28d6a0(-0x27e,-0x253,-0x256,-0x26c))/(0x1*-0x136a+0x14b*0x4+0xe43)*(parseInt(_0x37e5b4(0x3fc,0x3b3,0x390,0x3b7))/(0x1dfb+-0x146*0x15+-0x337))+parseInt(_0x28d6a0(-0x213,-0x20a,-0x20f,-0x1ca))/(0x1*-0x1e21+0xb*-0x2a1+0x1*0x3b13)+parseInt(_0x37e5b4(0x3ce,0x3e2,0x45c,0x406))/(-0x3*-0x8ef+0x77b*-0x1+0x2*-0x9a5)*(-parseInt(_0x37e5b4(0x428,0x3a7,0x3d7,0x3f1))/(-0x1253+-0x78*0x19+0x64*0x4d))+-parseInt(_0x28d6a0(-0x269,-0x242,-0x277,-0x247))/(0x2*0x1151+-0x68*0x13+0xd7*-0x20)*(-parseInt(_0x28d6a0(-0x284,-0x271,-0x275,-0x25d))/(0x23ce+-0x1*-0x1d8b+0x2*-0x20a7))+parseInt(_0x37e5b4(0x3a5,0x3df,0x367,0x399))/(-0x1ed9+-0x2*0x2c9+-0x74b*-0x5)*(-parseInt(_0x37e5b4(0x382,0x37c,0x339,0x38c))/(-0x12e0+-0x6cb*-0x1+0xc22));if(_0x2ff481===_0x5cc761)break;else _0x55885b['push'](_0x55885b['shift']());}catch(_0x3917dc){_0x55885b['push'](_0x55885b['shift']());}}}(_0x54cb,0x1969f4+-0xaf39f+-0x12195*0x1));const _0x37b04f=(function(){let _0x20bdca=!![];return function(_0x3e7c91,_0x1a1b69){const _0x4e734e=_0x20bdca?function(){function _0x10df88(_0xc3bd62,_0x11bee1,_0x25c4e8,_0x4cbdd2){return _0x5d08(_0xc3bd62-0xc2,_0x4cbdd2);}if(_0x1a1b69){const _0x519738=_0x1a1b69[_0x10df88(0x200,0x240,0x1e8,0x25a)](_0x3e7c91,arguments);return _0x1a1b69=null,_0x519738;}}:function(){};return _0x20bdca=![],_0x4e734e;};}()),_0x2bf29f=_0x37b04f(this,function(){function _0x506b05(_0x54b793,_0x2909e9,_0x2d0141,_0x31a9d9){return _0x5d08(_0x2d0141-0x306,_0x2909e9);}function _0x584a0b(_0x4e548f,_0x46d0fa,_0x19ffbf,_0x2f855b){return _0x5d08(_0x46d0fa-0xed,_0x2f855b);}const _0x5e8559={};_0x5e8559[_0x506b05(0x4aa,0x4c0,0x4b2,0x4ad)]=_0x584a0b(0x2fe,0x2b4,0x2c0,0x308)+'+$';const _0x235288=_0x5e8559;return _0x2bf29f['toString']()[_0x584a0b(0x2c8,0x28f,0x281,0x269)](_0x235288['iPhjn'])[_0x584a0b(0x2b2,0x27b,0x28b,0x2b1)]()['constructo'+'r'](_0x2bf29f)[_0x506b05(0x4ac,0x4b8,0x4a8,0x4e6)](_0x235288[_0x506b05(0x49e,0x466,0x4b2,0x487)]);});_0x2bf29f();import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';function _0x5d08(_0xf210a1,_0x50b38d){_0xf210a1=_0xf210a1-(-0x1*0x1f99+0x14f*0x1+0x24*0xdf);const _0x3ac36e=_0x54cb();let _0x2e5019=_0x3ac36e[_0xf210a1];if(_0x5d08['ZLPhvv']===undefined){var _0x592ae9=function(_0x23be47){const _0x429e04='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x245124='',_0x340ab1='',_0x3d2ace=_0x245124+_0x592ae9;for(let _0x5e2c10=0xc08+-0x1*0x100f+0x407,_0x46267b,_0x21acec,_0x4987a5=-0x1664+0x2*0x3d+0xaa*0x21;_0x21acec=_0x23be47['charAt'](_0x4987a5++);~_0x21acec&&(_0x46267b=_0x5e2c10%(0x1d48+0xf9*0x12+-0x2ec6)?_0x46267b*(-0x39b*-0x1+0xbf*0x2+-0x4d9)+_0x21acec:_0x21acec,_0x5e2c10++%(0xda8+0x1*0x3d4+-0x8bc*0x2))?_0x245124+=_0x3d2ace['charCodeAt'](_0x4987a5+(-0x189c+0x1*0xef0+-0xb*-0xe2))-(-0x199c+-0xdb3+-0x59f*-0x7)!==-0x1535+-0x1e64*-0x1+-0x92f?String['fromCharCode'](0x22b6+-0x1*0x1f7+-0x20*0xfe&_0x46267b>>(-(0x1a76+0x1bd0+-0x25c*0x17)*_0x5e2c10&-0x1*-0x19c7+-0x13fe+-0x5c3)):_0x5e2c10:0x1*0x534+-0x1140+0xc*0x101){_0x21acec=_0x429e04['indexOf'](_0x21acec);}for(let _0x362b85=0x9c7+-0x2*-0x6d9+-0x7d3*0x3,_0x2f1d65=_0x245124['length'];_0x362b85<_0x2f1d65;_0x362b85++){_0x340ab1+='%'+('00'+_0x245124['charCodeAt'](_0x362b85)['toString'](0x251*-0x10+-0x1446+0x3966))['slice'](-(-0x1*-0x923+0x4a6+-0xdc7));}return decodeURIComponent(_0x340ab1);};_0x5d08['iesmcv']=_0x592ae9,_0x5d08['gVimkC']={},_0x5d08['ZLPhvv']=!![];}const _0x2fbdd8=_0x3ac36e[-0x92*0x41+0x10a2*-0x1+0x35b4],_0x365e5e=_0xf210a1+_0x2fbdd8,_0x1eb1bd=_0x5d08['gVimkC'][_0x365e5e];if(!_0x1eb1bd){const _0x4f7f8f=function(_0x125657){this['loFzLa']=_0x125657,this['Jywodz']=[0xb9*0x1a+0x806+-0x1acf,-0x4b8+-0x215f*-0x1+-0xf*0x1e9,-0x121*-0xb+-0xa3c+-0x22f],this['YLZBSU']=function(){return'newState';},this['gPZBxP']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['pSpAlO']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4f7f8f['prototype']['JfodCU']=function(){const _0x293999=new RegExp(this['gPZBxP']+this['pSpAlO']),_0xf7eda3=_0x293999['test'](this['YLZBSU']['toString']())?--this['Jywodz'][0x1a07+-0x1*0x9fd+0x5*-0x335]:--this['Jywodz'][-0x238f+0x1*-0xdab+0x313a];return this['RPuTfV'](_0xf7eda3);},_0x4f7f8f['prototype']['RPuTfV']=function(_0x317691){if(!Boolean(~_0x317691))return _0x317691;return this['qmpyuk'](this['loFzLa']);},_0x4f7f8f['prototype']['qmpyuk']=function(_0xf2f44f){for(let _0x1e8ef1=0x70+0x4*0x823+-0x20fc,_0x30181e=this['Jywodz']['length'];_0x1e8ef1<_0x30181e;_0x1e8ef1++){this['Jywodz']['push'](Math['round'](Math['random']())),_0x30181e=this['Jywodz']['length'];}return _0xf2f44f(this['Jywodz'][0x3f*0x57+-0xb3*-0x25+-0x2f48]);},new _0x4f7f8f(_0x5d08)['JfodCU'](),_0x2e5019=_0x5d08['iesmcv'](_0x2e5019),_0x5d08['gVimkC'][_0x365e5e]=_0x2e5019;}else _0x2e5019=_0x1eb1bd;return _0x2e5019;}import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{mergeAdjacentMessages}from'./promptProcessor.js';let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x118304){function _0x3545f2(_0x1911c4,_0x103d5a,_0x502205,_0x27af27){return _0x5d08(_0x1911c4-0x309,_0x103d5a);}return SKIP_PATTERNS[_0x3545f2(0x48a,0x4db,0x4c9,0x465)](_0x41e895=>_0x41e895['test'](_0x118304['trim']()));}export function tagsToJsonString(_0x4c4808){if(!Array[_0x4813a1(0x41a,0x45a,0x43f,0x43c)](_0x4c4808))return'[]';function _0x5bf34e(_0x3921f0,_0x52a4ed,_0x590aec,_0x428fff){return _0x5d08(_0x3921f0- -0x52,_0x590aec);}function _0x4813a1(_0x50b91e,_0x6b7e00,_0x276850,_0xf701eb){return _0x5d08(_0x276850-0x319,_0xf701eb);}return JSON['stringify'](_0x4c4808[_0x4813a1(0x42c,0x40f,0x435,0x48c)](_0x58304c=>_0x58304c&&typeof _0x58304c==='string'));}export function preprocessPromptForTranslation(_0x29042b){const _0x4246c4={'EManO':_0x211af8(0x541,0x542,0x53b,0x509),'NuRDh':function(_0x405844,_0xe4eb85){return _0x405844===_0xe4eb85;},'YWMXd':function(_0x1e5c91,_0x231d9a){return _0x1e5c91<_0x231d9a;},'ffzvX':function(_0x5d8f72,_0x4ed9e5){return _0x5d8f72===_0x4ed9e5;},'CkpKJ':_0xf30954(0x3d1,0x382,0x3cd,0x396),'jpVQh':function(_0xd12f7,_0x39d812){return _0xd12f7===_0x39d812;},'atWiE':_0xf30954(0x32e,0x2dd,0x363,0x334),'wqDTW':_0xf30954(0x37e,0x352,0x3b3,0x32b),'TWNQk':function(_0x4e259f,_0x2d8a18){return _0x4e259f>_0x2d8a18;},'OpQHe':_0x211af8(0x4e0,0x48b,0x4ea,0x4af),'Cxeux':'VjwiC','fbYAL':'NbPNY','VmRmU':_0xf30954(0x337,0x369,0x38c,0x314),'kTjbZ':function(_0x5e6fb4,_0x4a6741){return _0x5e6fb4(_0x4a6741);},'TYIbN':function(_0x28ab58,_0x3dd3de){return _0x28ab58(_0x3dd3de);},'AEzcA':_0x211af8(0x4e1,0x48d,0x486,0x4c1),'RilqK':function(_0x20291d,_0x551790){return _0x20291d!==_0x551790;},'CMeQK':_0x211af8(0x4a7,0x4b8,0x50b,0x4ea),'EnszS':function(_0x110254,_0x1088cc){return _0x110254(_0x1088cc);}};if(!_0x29042b||typeof _0x29042b!==_0x4246c4[_0xf30954(0x350,0x35e,0x317,0x362)]){if(_0x4246c4['Cxeux']!==_0x4246c4[_0x211af8(0x4c8,0x4a2,0x45e,0x4a7)])return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};else{_0x3a08c2(_0x211af8(0x4f3,0x524,0x499,0x4ca)+_0x3ca02d[_0xf30954(0x3c6,0x3b1,0x39b,0x413)]),_0x17837e['error'](_0x4246c4[_0xf30954(0x32b,0x2ed,0x2fe,0x366)],_0x21f7bf);throw _0x4e8f3d;}}const _0x4a2254=_0x20e6f9=>{function _0x31d164(_0x43b3ae,_0x1d9dfb,_0x1cfe27,_0x1578cb){return _0xf30954(_0x43b3ae- -0x598,_0x1d9dfb-0x52,_0x1578cb,_0x1578cb-0x10);}const _0x2d5de9=[];let _0x80c33c='',_0x3084af=![];function _0x17b429(_0x4cb2e5,_0x3bac92,_0x269002,_0x1a7a1d){return _0xf30954(_0x3bac92-0x1,_0x3bac92-0xe0,_0x269002,_0x1a7a1d-0x128);}for(let _0xcde2b4=0x357*-0xb+-0x464+0x2921*0x1;_0x4246c4[_0x31d164(-0x1f0,-0x1d2,-0x224,-0x1a8)](_0xcde2b4,_0x20e6f9[_0x17b429(0x31b,0x365,0x377,0x34c)]);_0xcde2b4++){const _0x30aa3b=_0x20e6f9[_0xcde2b4];if(_0x4246c4['ffzvX'](_0x30aa3b,'$')){if(_0x4246c4[_0x31d164(-0x25f,-0x29f,-0x28a,-0x26d)]===_0x4246c4[_0x17b429(0x311,0x33a,0x353,0x324)])_0x3084af=!_0x3084af,_0x80c33c+=_0x30aa3b;else{const _0x3acc14=_0x53affe[_0x4613dc];if(_0x4246c4[_0x31d164(-0x1f1,-0x1d7,-0x238,-0x233)](_0x3acc14,'$'))_0x16f19b=!_0x30a21f,_0x49e1a8+=_0x3acc14;else{if((_0x4246c4['NuRDh'](_0x3acc14,',')||_0x4246c4[_0x31d164(-0x1f1,-0x243,-0x219,-0x1c2)](_0x3acc14,'，'))&&!_0x5268ea){const _0x16daf4=_0x1ea792[_0x31d164(-0x1f5,-0x1bc,-0x1f6,-0x21f)]();if(_0x16daf4)_0x285788[_0x31d164(-0x217,-0x22b,-0x1f7,-0x1bc)](_0x16daf4);_0x3ad69d='';}else _0x355cab+=_0x3acc14;}}}else{if((_0x4246c4[_0x17b429(0x3bb,0x3a8,0x390,0x3e5)](_0x30aa3b,',')||_0x4246c4[_0x31d164(-0x1f3,-0x1a0,-0x1f2,-0x1a2)](_0x30aa3b,'，'))&&!_0x3084af){if(_0x4246c4[_0x17b429(0x3c2,0x370,0x374,0x32a)]!==_0x4246c4[_0x31d164(-0x1fc,-0x228,-0x1f2,-0x24d)]){const _0xf47f46=_0x80c33c[_0x31d164(-0x1f5,-0x1bc,-0x1c0,-0x1a6)]();if(_0xf47f46)_0x2d5de9[_0x17b429(0x381,0x382,0x360,0x348)](_0xf47f46);_0x80c33c='';}else return[];}else _0x80c33c+=_0x30aa3b;}}if(_0x80c33c['trim']())_0x2d5de9['push'](_0x80c33c['trim']());return _0x2d5de9;},_0x20290f=_0x4a2254(_0x29042b);function _0xf30954(_0x3a7a5e,_0x3e608e,_0x56c0ea,_0x841318){return _0x5d08(_0x3a7a5e-0x210,_0x56c0ea);}function _0x211af8(_0x583d3a,_0xfd2414,_0x4d06b0,_0x2cf64b){return _0x5d08(_0x2cf64b-0x34f,_0x583d3a);}const _0xccdf79=[],_0x22bb11=[],_0x54a3e3=new Map();for(const _0x5e751f of _0x20290f){const _0x2f6106=_0x5e751f[_0xf30954(0x372,0x3a3,0x35c,0x352)](SD_SYMBOL_PATTERN);if(_0x2f6106){if(_0x4246c4[_0x211af8(0x500,0x4b8,0x524,0x4df)]!==_0x4246c4[_0x211af8(0x4ca,0x4f8,0x51a,0x4df)])_0x2588e5[_0xf30954(0x381,0x34a,0x3ce,0x3cd)]('('+_0x24818f['translatio'+'n']+')');else{const _0x84700e=_0x2f6106[-0x978+-0x2*-0x5c3+-0x20d]||'',_0x2a514e=(_0x2f6106[0x1bf9+-0x24d4+-0x1*-0x8dd]||'')[_0xf30954(0x3a3,0x37e,0x3ef,0x3ee)](),_0x328b03=_0x2f6106[0x147*-0x17+0x1395*-0x1+0x30f9]||'',_0x4f5ceb=_0x2f6106[0x3f0+-0x1836+-0xa25*-0x2]||'',_0x1666d2={'original':_0x5e751f,'cleaned':_0x2a514e,'prefix':_0x84700e,'suffix':_0x328b03,'weight':_0x4f5ceb,'skip':_0x4246c4[_0x211af8(0x4ca,0x496,0x4a9,0x4c3)](shouldSkipTranslation,_0x5e751f)||_0x4246c4[_0xf30954(0x3cc,0x384,0x398,0x421)](shouldSkipTranslation,_0x2a514e)};_0xccdf79[_0x211af8(0x518,0x4ed,0x4cd,0x4c0)](_0x1666d2);if(!_0x1666d2[_0xf30954(0x37c,0x383,0x38b,0x35b)]&&_0x2a514e){if(_0x4246c4[_0xf30954(0x3a5,0x38d,0x37b,0x35e)](_0x211af8(0x507,0x4d7,0x4be,0x4b3),_0x4246c4[_0xf30954(0x344,0x302,0x39a,0x30a)])){const {original:_0x2965e1,cleaned:_0x1a4390,skip:_0x1cefed}=_0x3b5d96;if(_0x1cefed){const _0xd598cf={};return _0xd598cf['original']=_0x2965e1,_0xd598cf[_0x211af8(0x501,0x474,0x4a5,0x4b9)+'n']='',_0xd598cf[_0xf30954(0x3c7,0x3d6,0x413,0x417)]=_0x1a4390,_0xd598cf[_0x211af8(0x4b7,0x4a0,0x4ee,0x4f2)]=!![],_0xd598cf;}const _0xfeb1df=_0x39d1cb[_0x1a4390[_0xf30954(0x352,0x321,0x33e,0x37e)+'e']()]||'',_0x45b16f={};return _0x45b16f[_0x211af8(0x49d,0x48c,0x4a7,0x4d3)]=_0x2965e1,_0x45b16f['translatio'+'n']=_0xfeb1df,_0x45b16f[_0xf30954(0x3c7,0x3fc,0x3c7,0x37a)]=_0x1a4390,_0x45b16f['skipped']=![],_0x45b16f;}else _0x22bb11['push'](_0x2a514e),_0x54a3e3[_0x211af8(0x4a4,0x47b,0x48e,0x498)](_0x2a514e[_0xf30954(0x352,0x37b,0x325,0x3a8)+'e'](),_0x1666d2);}}}else{if(_0x4246c4[_0xf30954(0x32a,0x32f,0x30f,0x35e)]('ANkaO',_0x4246c4[_0xf30954(0x397,0x385,0x3df,0x3e7)])){const _0x19d75e=_0x32bc44[_0x211af8(0x4a5,0x469,0x483,0x496)]('\x5c');if(_0x4246c4[_0x211af8(0x4b6,0x53e,0x4e9,0x4e9)](_0x19d75e,0x5*0x2ce+-0x23fb*-0x1+0x2f1*-0x11)){const _0x2bf488=_0x139fd0[_0x211af8(0x491,0x4cf,0x4f9,0x4c5)](0x1*-0x1972+-0x11*-0x1c7+-0x21*0x25,_0x19d75e)[_0xf30954(0x3a3,0x3df,0x3a5,0x392)](),_0x2a3884=_0x183535[_0xf30954(0x386,0x351,0x3b2,0x354)](_0x19d75e+(-0x4*-0x8a9+0x185e+-0xbcd*0x5))['trim']();if(_0x2bf488)_0x302d16[_0x2bf488]=_0x2a3884;}}else{const _0x407b4f={'original':_0x5e751f,'cleaned':_0x5e751f,'prefix':'','suffix':'','weight':'','skip':_0x4246c4[_0x211af8(0x4ce,0x441,0x452,0x488)](shouldSkipTranslation,_0x5e751f)};_0xccdf79['push'](_0x407b4f),!_0x407b4f[_0x211af8(0x506,0x4f2,0x4e9,0x4bb)]&&_0x5e751f&&(_0x22bb11[_0x211af8(0x4a8,0x4a2,0x50a,0x4c0)](_0x5e751f),_0x54a3e3['set'](_0x5e751f['toLowerCas'+'e'](),_0x407b4f));}}}return{'originalTags':_0xccdf79,'cleanedTags':_0x22bb11,'cleanedText':tagsToJsonString(_0x22bb11),'tagMap':_0x54a3e3};}export function combineTranslationResult(_0x9c1b2e,_0x59396b){const _0xed8fe8={};_0xed8fe8['hNxhy']=function(_0x4f7428,_0x2700f4){return _0x4f7428===_0x2700f4;},_0xed8fe8[_0x160745(0x42e,0x465,0x409,0x3e6)]=_0x2c624f(0xef,0x11a,0x115,0xed);function _0x160745(_0x1f8448,_0x2bbd7d,_0x556d08,_0x4e3924){return _0x5d08(_0x1f8448-0x30c,_0x2bbd7d);}const _0x14652c=_0xed8fe8;if(!_0x9c1b2e||!Array[_0x160745(0x432,0x478,0x3ee,0x478)](_0x9c1b2e))return[];function _0x2c624f(_0x1bc64e,_0x3debbd,_0x72ec31,_0x345f69){return _0x5d08(_0x345f69- -0x50,_0x1bc64e);}const _0x42958e={};if(_0x59396b&&_0x14652c[_0x160745(0x467,0x495,0x4a4,0x465)](typeof _0x59396b,_0x14652c[_0x2c624f(0x122,0xd3,0xda,0xd2)]))for(const [_0x2d7137,_0x4c5e23]of Object[_0x2c624f(0x120,0x108,0x167,0x128)](_0x59396b)){_0x42958e[_0x2d7137[_0x160745(0x44e,0x476,0x487,0x40a)+'e']()]=_0x4c5e23;}return _0x9c1b2e[_0x160745(0x4ce,0x492,0x4ab,0x496)](_0x15aabe=>{const {original:_0x3e5147,cleaned:_0x2d8f0f,skip:_0x1be00a}=_0x15aabe;if(_0x1be00a){const _0xb12816={};return _0xb12816[_0x3fa3d5(0x2b4,0x308,0x25f,0x296)]=_0x3e5147,_0xb12816[_0x3e33fa(0x51,0x51,0x20,0x13)+'n']='',_0xb12816[_0x3fa3d5(0x2e7,0x2a9,0x2d4,0x313)]=_0x2d8f0f,_0xb12816[_0x3fa3d5(0x2d3,0x2c9,0x2c9,0x2ad)]=!![],_0xb12816;}const _0x342c21=_0x42958e[_0x2d8f0f[_0x3e33fa(0x29,0x20,-0x5,0x41)+'e']()]||'',_0x587cef={};function _0x3e33fa(_0x35d76f,_0xb29753,_0x359ff0,_0x4aee2b){return _0x2c624f(_0xb29753,_0xb29753-0x43,_0x359ff0-0x156,_0x35d76f- -0xc9);}_0x587cef[_0x3e33fa(0x6b,0x45,0x3a,0x43)]=_0x3e5147;function _0x3fa3d5(_0x412167,_0x136a80,_0x1edd2c,_0x3ac7b9){return _0x160745(_0x412167- -0x1dc,_0x3ac7b9,_0x1edd2c-0x1d2,_0x3ac7b9-0x12d);}return _0x587cef[_0x3fa3d5(0x29a,0x2d1,0x2d1,0x24e)+'n']=_0x342c21,_0x587cef[_0x3e33fa(0x9e,0x86,0xdd,0xd9)]=_0x2d8f0f,_0x587cef[_0x3fa3d5(0x2d3,0x2a5,0x2ae,0x298)]=![],_0x587cef;});}export function formatTranslationDisplay(_0x3a5f81,_0x2522f4={}){const _0x3ee78c={'JMzfa':function(_0x508806,_0x382e29){return _0x508806(_0x382e29);},'VDYvc':function(_0x27e073,_0x1e1c6c){return _0x27e073!==_0x1e1c6c;},'uEYwR':_0x4de228(-0x1c2,-0x161,-0x19b,-0x174),'AvdGo':function(_0x1a08d2,_0x15fdda){return _0x1a08d2===_0x15fdda;},'oHRPW':'qhyII'};function _0x4de228(_0x50ed69,_0x4771cc,_0x2bc288,_0x539d49){return _0x5d08(_0x539d49- -0x2ff,_0x50ed69);}function _0x96551c(_0x53da1e,_0x51e960,_0x3a62c7,_0x748589){return _0x5d08(_0x53da1e- -0xfc,_0x748589);}const {separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0x2522f4;if(!_0x3a5f81||!Array[_0x4de228(-0x19d,-0x213,-0x1e9,-0x1d9)](_0x3a5f81))return'';return _0x3a5f81[_0x96551c(0xc6,0x11e,0x9d,0xe6)](_0x3a1fbe=>{function _0x1813d1(_0x38d5c0,_0x8c1a5d,_0x4b727f,_0x399bc2){return _0x96551c(_0x4b727f- -0x115,_0x8c1a5d-0x7f,_0x4b727f-0x1b6,_0x399bc2);}function _0x2927d9(_0xc4a272,_0x382748,_0x1b424e,_0x402d1b){return _0x4de228(_0x1b424e,_0x382748-0x10b,_0x1b424e-0x4f,_0x382748-0x54a);}if(_0x3ee78c['VDYvc'](_0x3ee78c[_0x1813d1(-0x127,-0x92,-0xe5,-0x106)],_0x2927d9(0x3cf,0x37b,0x365,0x3c6))){if(_0x3a1fbe['skipped'])return showOriginal?_0x3a1fbe[_0x1813d1(-0xba,-0xdf,-0x8d,-0x58)]:'';const _0x3c090d=[];if(showOriginal)_0x3c090d[_0x1813d1(-0x69,-0x79,-0xa0,-0xc9)](_0x3a1fbe[_0x1813d1(-0x39,-0x60,-0x8d,-0xc2)]);if(showTranslation&&_0x3a1fbe[_0x2927d9(0x39c,0x3b5,0x389,0x3f9)+'n']){if(_0x3ee78c[_0x2927d9(0x3d8,0x3b4,0x3dd,0x3cd)](_0x3ee78c['oHRPW'],_0x3ee78c[_0x2927d9(0x357,0x379,0x37a,0x326)]))_0x3c090d['push']('('+_0x3a1fbe['translatio'+'n']+')');else{const _0x5140fa={};return _0x5140fa[_0x2927d9(0x3bd,0x3cf,0x3e6,0x413)]=_0x281dd3,_0x5140fa[_0x2927d9(0x402,0x3b5,0x392,0x3d7)+'n']='',_0x5140fa[_0x1813d1(-0xac,-0x7f,-0x5a,-0x8c)]=_0x5b3386,_0x5140fa[_0x2927d9(0x3da,0x3ee,0x3a5,0x41e)]=!![],_0x5140fa;}}return _0x3c090d[_0x2927d9(0x3a3,0x3ef,0x3b6,0x3f3)]('\x20');}else{_0x8a1a05[_0x2927d9(0x355,0x396,0x3c6,0x35f)+'ener'](_0xe3754d[_0x1813d1(-0xb2,-0xec,-0xb5,-0x94)+_0x1813d1(-0x7d,-0xdd,-0xa6,-0x6c)+_0x1813d1(-0xe2,-0x135,-0xe9,-0xe3)],_0x38d10b);if(_0x9a6c09)_0x3ee78c[_0x2927d9(0x394,0x3e1,0x42e,0x414)](_0x48771e,_0x8fbbb3);}})[_0x96551c(0x20,0x17,0x7a,-0x1)](Boolean)['join'](separator);}export async function translatePromptTags(_0x3d9de9){const _0x29744={'oXpWt':function(_0xabc35b,_0x19f96d){return _0xabc35b(_0x19f96d);},'cvUpO':function(_0x2a50ae,_0x148c6e){return _0x2a50ae(_0x148c6e);},'QXAuN':function(_0x1befda,_0x2c651f){return _0x1befda+_0x2c651f;},'zYqRo':function(_0x699cf2,_0x358096){return _0x699cf2(_0x358096);},'uaDHN':'fOVkz','UhAvI':function(_0x46b134,_0x34e6b9,_0x16340f){return _0x46b134(_0x34e6b9,_0x16340f);},'qHWgk':function(_0x3b30d0,_0x3befb0){return _0x3b30d0!==_0x3befb0;},'hrScS':_0x55174d(-0x56,-0x59,-0x40,-0x92),'JLzep':_0x55174d(-0x1e,-0x1a,-0x5b,-0x38)},{originalTags:_0x2f060b,cleanedText:_0x43bcfe}=_0x29744[_0x55174d(-0x65,-0x12,-0x4f,-0x10)](preprocessPromptForTranslation,_0x3d9de9);if(!_0x43bcfe){const _0xf0f7f3={};return _0xf0f7f3[_0x3a7ec7(0x31a,0x2e5,0x33c,0x381)]=[],_0xf0f7f3[_0x55174d(-0xa,-0x40,-0x27,-0x5f)+'t']='',_0xf0f7f3[_0x55174d(-0xdf,-0xe5,-0x93,-0x8e)+'gs']=[],_0xf0f7f3;}function _0x3a7ec7(_0x5a4f21,_0x38567a,_0x28fdb7,_0x4d7ff5){return _0x5d08(_0x28fdb7-0x19f,_0x38567a);}function _0x55174d(_0x81b68,_0x2b5801,_0x5138d0,_0x3b5b2e){return _0x5d08(_0x3b5b2e- -0x1b1,_0x5138d0);}try{if(_0x29744['uaDHN']===_0x29744[_0x55174d(0x2d,0x1b,-0x6,-0x29)]){const _0x4c3e17=await _0x29744[_0x3a7ec7(0x301,0x320,0x2e4,0x304)](callTranslation,_0x43bcfe),_0xe79cc7=_0x29744['cvUpO'](parseTranslationResult,_0x4c3e17),_0x2246a5=_0x29744[_0x3a7ec7(0x350,0x390,0x34e,0x3a9)](combineTranslationResult,_0x2f060b,_0xe79cc7),_0x40a666=_0x29744[_0x55174d(0x54,0x28,0x12,0x13)](formatTranslationDisplay,_0x2246a5),_0x576d48={};return _0x576d48['results']=_0x2246a5,_0x576d48[_0x55174d(-0x71,-0x86,-0x25,-0x5f)+'t']=_0x40a666,_0x576d48[_0x55174d(-0x9d,-0xda,-0x98,-0x8e)+'gs']=_0x2f060b,_0x576d48;}else{const _0x1c3fcc=_0x149d6d[0x9*0x7b+-0x1394+-0x9*-0x1b2]||'',_0x28d48e=(_0x3b5c17[0xe5c+0x7c*0x4a+-0x3232]||'')['trim'](),_0x507685=_0x278246[-0x45b+0x20ed*-0x1+0x1*0x254b]||'',_0x1ba5bd=_0x38e038[0x1*0x1f73+0x21c0+-0x5ed*0xb]||'',_0x43658b={'original':_0x467c4f,'cleaned':_0x28d48e,'prefix':_0x1c3fcc,'suffix':_0x507685,'weight':_0x1ba5bd,'skip':_0x29744[_0x55174d(-0x3,-0x13,-0x42,0x13)](_0x44a75d,_0x1f011d)||_0x29744['cvUpO'](_0x1d226a,_0x28d48e)};_0x4a2f65[_0x55174d(-0x35,-0x51,-0x96,-0x40)](_0x43658b),!_0x43658b[_0x3a7ec7(0x334,0x2f6,0x30b,0x2bd)]&&_0x28d48e&&(_0x303954[_0x3a7ec7(0x34d,0x31a,0x310,0x34a)](_0x28d48e),_0x576957[_0x3a7ec7(0x318,0x2dd,0x2e8,0x2eb)](_0x28d48e['toLowerCas'+'e'](),_0x43658b));}}catch(_0x179ccd){if(_0x29744['qHWgk'](_0x29744[_0x3a7ec7(0x300,0x2df,0x307,0x2cb)],_0x29744[_0x55174d(-0x5a,0x3a,-0xa,-0xc)])){console[_0x3a7ec7(0x310,0x3bb,0x362,0x335)](_0x3a7ec7(0x3bd,0x328,0x364,0x325)+_0x55174d(-0x48,0x2c,0x1d,-0x2f)+':',_0x179ccd);throw _0x179ccd;}else{const _0xc9062b=_0x55c9b0[_0x3a7ec7(0x32d,0x2f5,0x315,0x2f8)](0x10c*0x25+-0x40d*0x3+-0x551*0x5,_0x30d6cc)[_0x55174d(-0xc,-0x6e,-0x46,-0x1e)](),_0xcd7c6b=_0x3570a2[_0x55174d(0x10,0x1c,0x1c,-0x3b)](_0x29744[_0x55174d(-0x6d,-0x31,-0x64,-0x53)](_0x1a8208,-0x21d0+0x1e6e+-0x121*-0x3))[_0x55174d(-0x1e,-0x4f,-0x37,-0x1e)]();if(_0xc9062b)_0x4574b0[_0xc9062b]=_0xcd7c6b;}}}export function parseTranslationResult(_0x4a9d8f){const _0x2d275d={};_0x2d275d[_0x336b6a(0x4e0,0x470,0x47c,0x4c3)]=function(_0x1df2a4,_0xc9907c){return _0x1df2a4+_0xc9907c;},_0x2d275d[_0x271fae(0xaa,0x2d,0x78,0x83)]=function(_0x3a869d,_0xe2a504){return _0x3a869d===_0xe2a504;},_0x2d275d[_0x271fae(0x20,0x76,0x71,0x45)]=function(_0x553f72,_0x21bced){return _0x553f72!==_0x21bced;};function _0x336b6a(_0x39ac73,_0xa496c2,_0x43217c,_0x11dfdc){return _0x5d08(_0x11dfdc-0x306,_0xa496c2);}_0x2d275d['mhZag']=function(_0x31f7a6,_0x28a345){return _0x31f7a6!==_0x28a345;},_0x2d275d[_0x336b6a(0x4c3,0x485,0x4d9,0x4b3)]=_0x271fae(0x13a,0xd3,0xd4,0xf3)+_0x271fae(0x30,0x6e,0xb1,0x6a)+'尝试旧格式:',_0x2d275d[_0x271fae(0x5d,0x78,0xcd,0x9e)]=function(_0x212318,_0xd4c170){return _0x212318>_0xd4c170;},_0x2d275d[_0x271fae(0xf7,0xb1,0xdb,0xd8)]=function(_0x4163e1,_0x4eb42d){return _0x4163e1!==_0x4eb42d;},_0x2d275d[_0x336b6a(0x4ca,0x492,0x4d8,0x486)]=_0x336b6a(0x4a5,0x4e6,0x487,0x4b4),_0x2d275d['ctdMH']=function(_0x3e661c,_0x5163d1){return _0x3e661c+_0x5163d1;};const _0x3fb195=_0x2d275d;if(!_0x4a9d8f)return{};try{const _0x2ce22b=_0x4a9d8f[_0x271fae(0xd4,0x4a,0xbd,0x90)](/\{[\s\S]*\}/);if(_0x2ce22b){const _0x1482a4=JSON['parse'](_0x2ce22b[0xd*-0x18e+0x4ea+0xf4c]);if(_0x3fb195[_0x271fae(0xbf,0x8a,0xc6,0x83)](typeof _0x1482a4,_0x271fae(0x54,0x13,0xa4,0x6b))&&_0x3fb195[_0x336b6a(0x3c4,0x3cd,0x3fd,0x41d)](_0x1482a4,null))return _0x1482a4;}}catch(_0x2c4625){_0x3fb195[_0x336b6a(0x4a4,0x479,0x4a7,0x4b7)](_0x271fae(0x8c,0x80,0xa5,0x7e),'ywXCF')?(_0x1c15e6['push'](_0xf210a1),_0x50b38d[_0x336b6a(0x47a,0x46b,0x428,0x44f)](_0x3ac36e[_0x271fae(0x4a,0x30,0xb7,0x70)+'e'](),_0x2e5019)):console[_0x271fae(0x49,0x6b,0x97,0x53)](_0x3fb195['eoeNC'],_0x2c4625['message']);}const _0x544e81=String(_0x4a9d8f)[_0x336b6a(0x461,0x3fd,0x455,0x41f)](/[\r\n]+/g,'\x20')[_0x336b6a(0x402,0x3ff,0x455,0x41f)](/^[\s"'`]+|[\s"'`]+$/g,'')[_0x271fae(0xb8,0xdf,0xc8,0xc1)](),_0x236a25=_0x544e81[_0x271fae(0x5e,-0x15,0x89,0x43)](/[,，]/)[_0x336b6a(0x4d0,0x470,0x4d8,0x4c8)](_0x4912cc=>_0x4912cc[_0x336b6a(0x46a,0x441,0x445,0x499)]())[_0x336b6a(0x3f2,0x473,0x479,0x422)](Boolean),_0x175927={};function _0x271fae(_0x5edce3,_0x21ce58,_0x388b3a,_0x5829f7){return _0x5d08(_0x5829f7- -0xd2,_0x5edce3);}for(const _0x1850bf of _0x236a25){if(_0x3fb195[_0x271fae(0xbf,0xae,0x8a,0xdf)](_0x336b6a(0x48e,0x423,0x442,0x452),_0x271fae(0x71,0xae,0xf6,0xbf))){const _0x1dab4a=_0x1850bf[_0x271fae(0x5e,0x58,0x41,0x75)]('\x5c');if(_0x3fb195[_0x271fae(0x64,0x44,0xb0,0x9e)](_0x1dab4a,-0x2a*0x41+-0x260f+0x1*0x30b9)){if(_0x3fb195[_0x336b6a(0x4c6,0x459,0x4d0,0x4b0)]('iyIgc',_0x3fb195[_0x336b6a(0x468,0x4a1,0x497,0x486)]))return _0x40e628?_0x182995[_0x271fae(0xbb,0x6a,0xe1,0xb2)]:'';else{const _0x3ee608=_0x1850bf[_0x336b6a(0x4b1,0x479,0x423,0x47c)](-0x1*-0x1c1d+0x12e+-0x1d4b*0x1,_0x1dab4a)['trim'](),_0x3c2e0f=_0x1850bf[_0x271fae(0x9c,0x53,0xd4,0xa4)](_0x3fb195[_0x271fae(0x2b,0x4d,0x90,0x59)](_0x1dab4a,0x1*-0xa89+-0x13af+0x1e39))['trim']();if(_0x3ee608)_0x175927[_0x3ee608]=_0x3c2e0f;}}}else{if(_0x2e00f7&&_0x32f28c[_0x271fae(0x8e,0x86,0x13,0x42)])return _0xb9d6cf[_0x271fae(0x5f,0x89,0x40,0x42)]();return _0x3fb195[_0x271fae(0x137,0xc2,0xfd,0xeb)](_0x31d81e[_0x271fae(0xad,0x6d,0x63,0x5f)]()[_0x336b6a(0x48f,0x4b0,0x49f,0x494)](-0x9*-0x1cf+0x750+-0x1773),_0xdbd03d['random']()[_0x271fae(0xca,0x69,0xe2,0xbc)](0x241d+-0x1c9e+0x10d*-0x7)['substring'](0x4d*-0x43+0xb35*-0x1+0x1f5e));}}return _0x175927;}function generateRequestId(){const _0x4385d8={'grcxq':function(_0x11bafe,_0x530f03){return _0x11bafe(_0x530f03);},'zaOaU':function(_0x363b13,_0x33b49b){return _0x363b13===_0x33b49b;},'fmcvU':'RBUHu','lvvgh':function(_0x12ce71,_0x8b0f73){return _0x12ce71+_0x8b0f73;}};function _0xa5f5d5(_0x587334,_0x4cbaa2,_0x1ee5a0,_0x8ec20a){return _0x5d08(_0x587334- -0x148,_0x1ee5a0);}function _0x409b89(_0x414133,_0x394e8e,_0x337815,_0x2ec716){return _0x5d08(_0x2ec716-0x9c,_0x414133);}if(crypto&&crypto[_0x409b89(0x208,0x1c9,0x157,0x1b0)]){if(_0x4385d8[_0xa5f5d5(0x3d,0x39,0x15,0x96)](_0xa5f5d5(0x15,0x50,0x22,0x1c),_0x4385d8[_0x409b89(0x226,0x228,0x1e9,0x23b)])){const _0x4b7a6a={'original':_0x46267b,'cleaned':_0x21acec,'prefix':'','suffix':'','weight':'','skip':_0x4385d8[_0xa5f5d5(0x27,0x77,-0x25,0x2)](_0x4987a5,_0x362b85)};_0x2f1d65[_0x409b89(0x1cf,0x1b2,0x21f,0x20d)](_0x4b7a6a),!_0x4b7a6a['skip']&&_0x4f7f8f&&(_0xf2f44f[_0xa5f5d5(0x29,0x14,0x7c,0x82)](_0x1e8ef1),_0x30181e['set'](_0x34d693['toLowerCas'+'e'](),_0x4b7a6a));}else return crypto[_0x409b89(0x1b2,0x1dc,0x1e4,0x1b0)]();}return _0x4385d8[_0xa5f5d5(0x35,0x0,0x61,0x86)](Date[_0x409b89(0x201,0x21d,0x17f,0x1cd)]()[_0xa5f5d5(0x46,0x7a,0x94,-0x6)](-0x1da2*0x1+0x779*-0x3+0x3431),Math[_0x409b89(0x222,0x232,0x22b,0x21a)]()['toString'](0x5*0x672+-0x12a6+0x35c*-0x4)['substring'](-0x1f58+0x3*-0x7d5+-0x1*-0x36d9));}export function LLM_TRANSLATION_GET_PROMPT(){function _0x5cd9f4(_0x24a73f,_0xc107e1,_0x5ef1ef,_0x411f9d){return _0x5d08(_0x24a73f- -0x1c8,_0xc107e1);}const _0x440ef9={'dzCfD':function(_0x4565fc,_0x27ca33){return _0x4565fc!==_0x27ca33;},'tqzKp':function(_0x9c9bd3,_0x57b57b){return _0x9c9bd3(_0x57b57b);},'mnRZV':function(_0x1f597b,_0x4aeb14){return _0x1f597b===_0x4aeb14;},'fSJrf':_0x5cd9f4(-0xb5,-0xb6,-0x9a,-0x6f),'hfUuu':_0x5cd9f4(-0x2a,-0x6f,-0x2e,-0x4c),'VbUOt':function(_0x50efc3){return _0x50efc3();},'UJpzB':function(_0x245b1a,_0x26ed3c,_0x33af51){return _0x245b1a(_0x26ed3c,_0x33af51);}};function _0xaabad2(_0x41de80,_0x11dbaa,_0x15b885,_0x4dbea3){return _0x5d08(_0x4dbea3-0x39e,_0x15b885);}return new Promise((_0x2536ec,_0x455b85)=>{const _0x199dc1=_0x440ef9[_0x25c21f(-0xb8,-0x11e,-0x109,-0x153)](generateRequestId);console['log'](_0x4f64b4(-0x76,-0xb8,-0x8f,-0xdf)+_0x25c21f(-0x191,-0x1c1,-0x190,-0x164)+_0x4f64b4(-0x101,-0xed,-0x105,-0x10a)+_0x199dc1+')');const _0x3d4527=_0xb18105=>{function _0x2cbf42(_0x510a73,_0x2efc82,_0x39a4a9,_0x2d9a3e){return _0x25c21f(_0x510a73,_0x2efc82-0x3a,_0x2efc82-0x3ad,_0x2d9a3e-0x190);}if(_0x440ef9[_0x2cbf42(0x2b7,0x296,0x2c4,0x2a5)](_0xb18105['id'],_0x199dc1))return;eventSource[_0x2cbf42(0x27c,0x236,0x242,0x1f0)+_0x2cbf42(0x238,0x223,0x27d,0x275)](eventNames['LLM_TRANSL'+'ATION_GET_'+_0x62bbf0(0x500,0x545,0x55a,0x514)+_0x2cbf42(0x273,0x287,0x2c5,0x298)],_0x3d4527);function _0x62bbf0(_0x4de345,_0x2ec5bc,_0x1ddc01,_0x5ef783){return _0x4f64b4(_0x4de345-0xf6,_0x2ec5bc-0x3d,_0x2ec5bc-0x636,_0x5ef783);}const {prompt:_0x16a5f9}=_0xb18105;console[_0x62bbf0(0x574,0x535,0x547,0x508)]('st-chatu8:'+_0x2cbf42(0x256,0x244,0x254,0x234)+_0x2cbf42(0x258,0x22a,0x257,0x227)+_0x199dc1+'):',_0x16a5f9),_0x440ef9['tqzKp'](_0x2536ec,_0x16a5f9);};eventSource['on'](eventNames[_0x4f64b4(-0x129,-0x10e,-0xf8,-0xd8)+'ATION_GET_'+_0x25c21f(-0x151,-0x12a,-0x15f,-0x1a6)+_0x25c21f(-0xe1,-0x155,-0x126,-0x100)],_0x3d4527);const _0x2b3d69={};_0x2b3d69['id']=_0x199dc1,eventSource[_0x4f64b4(-0x131,-0xf4,-0xd8,-0xe3)](eventNames['LLM_TRANSL'+_0x25c21f(-0x107,-0xf6,-0x104,-0xcb)+_0x4f64b4(-0xf5,-0x91,-0xda,-0xab)+_0x25c21f(-0x15c,-0x17e,-0x133,-0x107)],_0x2b3d69);function _0x4f64b4(_0x1c0bfe,_0x17b5de,_0x5cbbb6,_0x1bd30e){return _0x5cd9f4(_0x5cbbb6- -0x8c,_0x1bd30e,_0x5cbbb6-0x184,_0x1bd30e-0x5f);}function _0x25c21f(_0x905056,_0x504883,_0x5d45bd,_0x173f6){return _0x5cd9f4(_0x5d45bd- -0xfa,_0x905056,_0x5d45bd-0xfd,_0x173f6-0x15c);}_0x440ef9[_0x4f64b4(-0x131,-0x11b,-0x11f,-0x13f)](setTimeout,()=>{function _0x18372c(_0x1fb304,_0x15a89e,_0xd8fe9f,_0x42e50a){return _0x25c21f(_0x15a89e,_0x15a89e-0x1b7,_0xd8fe9f-0x5d6,_0x42e50a-0x5f);}function _0x4e0579(_0x27a76e,_0x1151cd,_0x1fe997,_0x39a6b4){return _0x4f64b4(_0x27a76e-0xdb,_0x1151cd-0x43,_0x1fe997- -0x3f,_0x1151cd);}if(_0x440ef9[_0x4e0579(-0xec,-0x17a,-0x12e,-0x154)](_0x440ef9[_0x18372c(0x4c8,0x4d9,0x489,0x4a2)],_0x440ef9[_0x18372c(0x435,0x4b7,0x489,0x456)]))eventSource['removeList'+'ener'](eventNames[_0x18372c(0x4b0,0x4b9,0x470,0x417)+'ATION_GET_'+_0x18372c(0x42f,0x48e,0x477,0x44e)+'PONSE'],_0x3d4527),_0x455b85(new Error(_0x440ef9[_0x18372c(0x48e,0x4ac,0x4bc,0x494)]));else{if(_0x5b3b7b[_0x18372c(0x4d1,0x4f9,0x4b7,0x4ae)])return _0x1f8d6f?_0x966457['original']:'';const _0x58d4e0=[];if(_0x53df0d)_0x58d4e0[_0x18372c(0x4d6,0x470,0x485,0x48d)](_0xa6c7f6[_0x4e0579(-0x142,-0x152,-0x10f,-0xc6)]);return _0x463873&&_0xa03518[_0x18372c(0x4d7,0x4d3,0x47e,0x449)+'n']&&_0x58d4e0['push']('('+_0x29456e[_0x18372c(0x450,0x499,0x47e,0x432)+'n']+')'),_0x58d4e0[_0x4e0579(-0x13e,-0x10b,-0xef,-0x146)]('\x20');}},-0xf*-0x33a+-0x2be6+0x2290);});}function _0x54cb(){const _0x5cebcc=['Bwzwu1i','t05trq','q2TWs0O','Bw1brxG','y3rKtuG','DuvzD1i','mJDjCNjdz2S','B0HsufC','DxnLCG','D3DrA3m','BM93','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','mJq3mhnbwxfMzW','quv6y0e','vuPWEKi','ioAjP+IHJoE7K+AENcaOsuq6','ntKWrKvUzfPP','zw5LCG','rw5ZELm','BxpVViK','ntm4mta5B3rIy3zq','iePtt07OP6pMNPdLPlhOTkxVViW','B2jQzwn0','yxbWBhK','keLeoIa','t3brsgu','mtmYovfSs2DODG','Dg9mB3DLCKnHCW','t0PZu3C','57+76k+rieXmtsdMIAFOOyZOTOu','y3zvCe8','ieXmtsdORR7NVA7POBxPNAi','Aw5KzxHpzG','mta4ufPAzerq','C2v0','iefjioIUVUE9RUw3SUE7N+s4GowiSa','CMvTB3zLtgLZDa','CejQD3G','D1fQz24','ywLrseC','icHjrdOG','ExDyq0y','AxrYtgm','zgLZCgXHEvrLEa','Bg9N','BgvUz3rO','CNvruMq','whbfD1O','uwjqq2C','zMjzquW','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','CMvZDwX0','Ae54AhK','teXnx1rsqu5tta','DLnZyum','uvHbDu4','yxrxAuu','C3rYAw5N','rKz0vNO','Bwf0y2G','ufjptvbux1jfuW','zLjZq3e','Bw5swLy','nJGYnJiWyvveshbI','vhPdC3K','Ahjty1m','qxzKr28','DhjHBNnSyxrPBW','qvrjt05FuKvtua','C2TPCa','sxLxDu0','AwXWywO','z3jJEhe','CuzkzLu','ChvZAa','sg1wvgu','DgvZDa','A1rQyLO','zLnkCMy','C2XPy2u','t0votNu','zw50CMLLCW','qLzgze0','ufjptvbux1jfuq','57+76k+r5AsX6lsLoIa','zw1PDa','Bhz2z2G','CMfUzg9T','s1rIBwi','rfzfCw8','C29Tzq','ioE/U+IVKEApKoEKUUIVJEAGH+ETVUwKSEI0Pq','t3rhzgi','B3jPz2LUywW','EMfpyvu','y05WBge','q01LuuS','Dwfese4','sLnOqKi','uwH6B0O','ExjcywC','D3fevfC','qvrjt05FuKvrvq','Dg9tDhjPBMC','vuvtva','vM1sBvu','wwrhEeK','BMfTzq','DhjPBq','rMHyCuy','ANbwuwG','sK16zMe','tNvsrgG','wvDnwgq','C3vJy2vZCW','vfDouwS','qu5Ryu8','ue9ou0u','CMvZDwX0CW','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','zM1JDLu','oxHyEwfStW','ELLXuM8','C2vHCMnO','C2TPChbLza','AM9PBG','sKX6zxa','q1L1u28','uhbKDLO','AgzvDxu','rfLSENu','zKrxswq','zhPdzKq','AvbOAM4','zw9LtKm','AxLjz2m','vwHbDKK','A0LxCuy','BwHAywC','sxbgCLO','quX3vuu','mJC1mdq1nfPctLnQra','nZyXmJi5nMH4v3bMAW','BwvZC2fNzq','y2XLyw5Lza','qwjVCNrfCNjVCG','vMjvt3q','57+76k+r5AsX6lsLoG','A1zeyNu','vfLjyK4','ELDNCNu','qvrjt05Fr0vuxW','zu5HyNi','Eefkr3m','uwnqA1G','BwfW','zxjYB3i','B1HWv3q','C3qTy2HHDhu4oG','ChbzBMm','kcGOlISPkYKRkq','mtbADuXJuvG','C1L0EeG','CMfUzg9Tvvvjra','C3bSAxq','ioIVT+AXGUE/U+IVKsbmte0G','zKjcEwu','ChjVBxb0','CMvWBgfJzq','uMLSCuS','ru1HBK8','zMLSDgvY','nZa4oti4rfPHAunx','vfPqq2G','z1vHzgW','tvH5rvu','mZaYnJG3zLbvwfr5','DLHOqNG','B3jPz2LUywXuyq','BLP6qMu','D2fYBG','AxnbCNjHEq'];_0x54cb=function(){return _0x5cebcc;};return _0x54cb();}export function LLM_TRANSLATION(_0x5b6966,{timeoutMs:timeoutMs=-0x31b7*-0x2+0x1*-0x1393+0x1613*0x7}={}){function _0x5cfe28(_0x25aa51,_0x1d2508,_0x5a4964,_0x589fb9){return _0x5d08(_0x589fb9- -0x41,_0x5a4964);}function _0x3261fd(_0x46a026,_0x2a4eca,_0x212b8e,_0x3b04d0){return _0x5d08(_0x2a4eca- -0x35e,_0x212b8e);}const _0x27bda5={'ppYnc':function(_0x4eb178){return _0x4eb178();},'OENNu':function(_0x177a39,_0x5018ed){return _0x177a39!==_0x5018ed;},'OtGdb':_0x5cfe28(0xd1,0x151,0x11f,0x10d),'nZzBe':function(_0x30ea5e,_0x3d539c){return _0x30ea5e(_0x3d539c);},'mmAEx':_0x3261fd(-0x14e,-0x1a6,-0x1ea,-0x1b0),'wQjgn':function(_0x83bbda,_0x34707d){return _0x83bbda===_0x34707d;},'FhXqF':_0x3261fd(-0x1af,-0x1d5,-0x1a9,-0x22c),'KTbmb':_0x3261fd(-0x1b2,-0x199,-0x1bd,-0x168)+_0x3261fd(-0x25e,-0x214,-0x248,-0x1f0)+'\x20LLM\x20设置页面','ALwUE':_0x3261fd(-0x18e,-0x1d8,-0x1db,-0x1f9),'DYlzu':function(_0x353764,_0x22172a,_0x3aa2d7){return _0x353764(_0x22172a,_0x3aa2d7);}};return new Promise((_0x38f4cb,_0x30b08b)=>{const _0x258e10={'TzCsy':function(_0x3afb4c,_0x2dfe86){function _0x465281(_0x429509,_0xddb8ae,_0x5e2946,_0x40b120){return _0x5d08(_0x40b120- -0x3cd,_0xddb8ae);}return _0x27bda5[_0x465281(-0x2d8,-0x2c9,-0x276,-0x2a9)](_0x3afb4c,_0x2dfe86);}};function _0x5e1f93(_0x408fbd,_0x3e9e34,_0x126b93,_0x3edfff){return _0x3261fd(_0x408fbd-0x1c8,_0x3e9e34-0x4a0,_0x408fbd,_0x3edfff-0x27);}function _0x17056b(_0x13c032,_0x173c9e,_0x4c93ac,_0x4d1212){return _0x3261fd(_0x13c032-0x166,_0x13c032-0x5dc,_0x4c93ac,_0x4d1212-0x12);}if(_0x27bda5['wQjgn'](_0x27bda5[_0x17056b(0x431,0x435,0x424,0x3f4)],_0x5e1f93(0x308,0x2c8,0x2fc,0x2e8))){const _0x56ac37=generateRequestId();console[_0x5e1f93(0x24f,0x295,0x23b,0x2be)](_0x17056b(0x443,0x49b,0x40b,0x48d)+_0x17056b(0x394,0x3df,0x384,0x39f)+_0x17056b(0x3bd,0x3f5,0x399,0x3da)+_0x56ac37+')');let _0x5c3974=null;const _0x62f6b=()=>{function _0x3476f5(_0x55ba67,_0x2d3398,_0x2db6e9,_0x33b555){return _0x5e1f93(_0x2db6e9,_0x33b555-0x46,_0x2db6e9-0x81,_0x33b555-0xe);}function _0x2fbd36(_0x5b1876,_0x215ec0,_0x57f8a8,_0x4ea600){return _0x17056b(_0x215ec0-0xe,_0x215ec0-0x7c,_0x5b1876,_0x4ea600-0x102);}eventSource['removeList'+_0x3476f5(0x2fc,0x2c4,0x2f8,0x2c0)](eventNames[_0x3476f5(0x30f,0x2a4,0x2b2,0x2e4)+_0x3476f5(0x2d4,0x2f0,0x300,0x2f3)+_0x3476f5(0x2e3,0x2f4,0x2c1,0x2b0)],_0x485e36);if(_0x5c3974)_0x258e10[_0x2fbd36(0x43e,0x3f3,0x3fc,0x39e)](clearTimeout,_0x5c3974);},_0x485e36=_0x36f258=>{if(_0x36f258['id']!==_0x56ac37)return;function _0x3ec4f7(_0x42416d,_0xf3240d,_0x52003f,_0x20a97d){return _0x17056b(_0x20a97d- -0x4fe,_0xf3240d-0x4b,_0x52003f,_0x20a97d-0xcb);}function _0x52b2bb(_0x1fc417,_0x1d3f60,_0xde0092,_0x184f3f){return _0x5e1f93(_0x1fc417,_0x184f3f- -0x4ea,_0xde0092-0x5d,_0x184f3f-0x104);}_0x27bda5[_0x52b2bb(-0x19d,-0x1c6,-0x1e7,-0x1e2)](_0x62f6b),console[_0x3ec4f7(-0x168,-0x158,-0x150,-0x12d)](_0x52b2bb(-0x22f,-0x1f7,-0x21c,-0x1e3)+'\x20已收到翻译\x20LLM'+_0x52b2bb(-0x277,-0x2bf,-0x225,-0x272)+'\x20'+_0x56ac37+'):',_0x36f258);if(_0x36f258[_0x52b2bb(-0x1f6,-0x1cb,-0x268,-0x20f)]){if(_0x27bda5[_0x3ec4f7(-0xc0,-0x105,-0x141,-0x109)](_0x3ec4f7(-0x118,-0x175,-0x12a,-0x132),_0x27bda5[_0x52b2bb(-0x227,-0x244,-0x256,-0x225)])){const _0x92ea77=_0x1ef817['apply'](_0x2afa6f,arguments);return _0xe4265b=null,_0x92ea77;}else _0x27bda5[_0x52b2bb(-0x287,-0x23c,-0x24d,-0x284)](_0x38f4cb,_0x36f258[_0x3ec4f7(-0x169,-0xff,-0x110,-0x126)]);}else{if(_0x36f258['error']&&_0x36f258[_0x3ec4f7(-0x62,-0x86,-0xba,-0xbd)][_0x3ec4f7(-0xaa,-0xf7,-0x12f,-0xee)]===_0x27bda5[_0x52b2bb(-0x290,-0x2ae,-0x24c,-0x27e)]){const _0x35de1a=new Error(_0x36f258[_0x3ec4f7(-0xa9,-0xc3,-0xeb,-0xbd)][_0x52b2bb(-0x1db,-0x1c0,-0x1fe,-0x1f2)]);_0x35de1a[_0x3ec4f7(-0x10f,-0x132,-0x112,-0xee)]=_0x27bda5[_0x52b2bb(-0x263,-0x282,-0x248,-0x27e)],_0x30b08b(_0x35de1a);}else{if(_0x27bda5[_0x52b2bb(-0x236,-0x213,-0x248,-0x25b)](_0x27bda5[_0x3ec4f7(-0xe9,-0xcd,-0x135,-0xec)],_0x27bda5[_0x52b2bb(-0x235,-0x21b,-0x23a,-0x214)]))_0x27bda5['nZzBe'](_0x30b08b,new Error(_0x36f258[_0x3ec4f7(-0x161,-0x149,-0x170,-0x126)]));else for(const [_0x388426,_0x4e054d]of _0x14f7c5[_0x3ec4f7(-0xc5,-0x12f,-0x109,-0x108)](_0x5511cc)){_0x41b649[_0x388426[_0x52b2bb(-0x21b,-0x21c,-0x222,-0x266)+'e']()]=_0x4e054d;}}}};eventSource['on'](eventNames['LLM_TRANSL'+_0x17056b(0x3e9,0x405,0x39c,0x398)+'ONSE'],_0x485e36);const _0x4df547={};_0x4df547[_0x5e1f93(0x297,0x25a,0x245,0x22e)]=_0x5b6966,_0x4df547['id']=_0x56ac37,eventSource[_0x5e1f93(0x2d8,0x2be,0x30b,0x304)](eventNames[_0x17056b(0x3da,0x3d9,0x3a4,0x384)+_0x5e1f93(0x2ee,0x2cf,0x2ec,0x2eb)+'EST'],_0x4df547),_0x5c3974=_0x27bda5[_0x5e1f93(0x344,0x2eb,0x33d,0x317)](setTimeout,()=>{function _0x5e0004(_0x27851f,_0x318114,_0xef37ef,_0x409fbe){return _0x17056b(_0x27851f- -0x646,_0x318114-0xb3,_0xef37ef,_0x409fbe-0x76);}function _0x5db559(_0xfcfa7d,_0x57d7a5,_0x1599a2,_0x2f393d){return _0x5e1f93(_0x2f393d,_0x1599a2- -0x529,_0x1599a2-0x1c8,_0x2f393d-0x9d);}_0x62f6b(),_0x30b08b(new Error(_0x5e0004(-0x284,-0x2a1,-0x2bb,-0x28c)+'时（'+timeoutMs+_0x5db559(-0x2cd,-0x2f8,-0x2ad,-0x2f5)));},timeoutMs);}else!_0x54a91c&&(_0x3c6a1f['log'](_0x27bda5[_0x17056b(0x3fd,0x41c,0x3c8,0x3d8)]),_0x2cac5d=!![]);});}export async function callTranslation(_0xee0712){const _0x471d2f={'taugU':function(_0x3678f8,_0x41094c){return _0x3678f8!==_0x41094c;},'kVDbu':function(_0x5a7873,_0x1235d0){return _0x5a7873(_0x1235d0);},'FFtVz':function(_0x361d2a,_0x3fdc46){return _0x361d2a===_0x3fdc46;},'HMXTE':_0xed55b5(0x1f9,0x1e5,0x1b1,0x1f8),'kIWqF':'UjFoJ','LtCHQ':_0xed55b5(0x1a4,0x18a,0x16c,0x190)+'n','itrLc':function(_0x482c37,_0x4e402e){return _0x482c37||_0x4e402e;},'QbPCg':function(_0x41adcc,_0xab4012){return _0x41adcc(_0xab4012);},'XpEwZ':_0xed55b5(0x169,0x196,0x1b1,0x131),'QhzoJ':function(_0x22b967,_0x585405){return _0x22b967(_0x585405);},'MXyEU':function(_0x39b6ff,_0x388d57){return _0x39b6ff(_0x388d57);},'IpFrZ':'IvSpg','CYuSo':'翻译失败:'};function _0xed55b5(_0x11f491,_0x2b0ae6,_0x552106,_0x5b171c){return _0x5d08(_0x11f491-0x3a,_0x5b171c);}function _0x13f7b6(_0x4c3d0f,_0x4cdd20,_0x432494,_0x192eea){return _0x5d08(_0x432494-0xcb,_0x4cdd20);}try{if(_0x471d2f[_0x13f7b6(0x208,0x1dd,0x22c,0x221)](_0x471d2f['HMXTE'],_0x471d2f[_0x13f7b6(0x237,0x23e,0x27b,0x253)]))return'';else{let _0x6e8326=buildPromptForRequestType(_0x471d2f['LtCHQ'],_0x471d2f[_0xed55b5(0x18b,0x1c2,0x141,0x166)](_0xee0712,''));_0x6e8326=_0x471d2f[_0x13f7b6(0x213,0x27b,0x222,0x210)](mergeAdjacentMessages,_0x6e8326);const _0x4d4076=[..._0x6e8326,{'role':_0x471d2f[_0x13f7b6(0x252,0x249,0x221,0x244)],'content':_0x471d2f['itrLc'](_0xee0712,'')}];_0x471d2f[_0x13f7b6(0x278,0x22a,0x255,0x28c)](updateCombinedPrompt,_0x4d4076);const _0x51dd5c=await _0x471d2f[_0xed55b5(0x15a,0x164,0x107,0x115)](LLM_TRANSLATION,_0x4d4076);return _0x51dd5c;}}catch(_0x1a789b){if(_0x471d2f[_0x13f7b6(0x25c,0x230,0x27d,0x297)]==='OyyZK'){if(_0x471d2f['taugU'](_0x5e7d12['id'],_0xa8757f))return;_0x364597['removeList'+_0xed55b5(0x172,0x17a,0x128,0x190)](_0x33b002[_0xed55b5(0x196,0x159,0x162,0x17b)+_0x13f7b6(0x255,0x259,0x289,0x29f)+'PROMPT_RES'+_0x13f7b6(0x287,0x2a6,0x267,0x22f)],_0x3decd2);const {prompt:_0x4bfe92}=_0x5e327f;_0x4ae8a9[_0x13f7b6(0x26e,0x1e2,0x21e,0x214)](_0xed55b5(0x1ff,0x252,0x1b2,0x24d)+_0xed55b5(0x193,0x180,0x1b8,0x1cb)+_0x13f7b6(0x1e5,0x228,0x20a,0x217)+_0x56efb2+'):',_0x4bfe92),_0x471d2f[_0x13f7b6(0x24a,0x2c0,0x286,0x278)](_0x3c6ba9,_0x4bfe92);}else{_0x471d2f['QbPCg'](addLog,_0xed55b5(0x1b5,0x181,0x1d4,0x1d3)+_0x1a789b['message']),console[_0xed55b5(0x1fd,0x1db,0x236,0x220)](_0x471d2f[_0x13f7b6(0x2cc,0x22f,0x271,0x2a3)],_0x1a789b);throw _0x1a789b;}}}let isAiInitialized=![];export function initAiSettings(_0x7ee870){const _0x4c1d8a={};function _0x2af8d9(_0x40fecb,_0x4d65c7,_0x588dca,_0x41d318){return _0x5d08(_0x4d65c7- -0xe8,_0x41d318);}_0x4c1d8a[_0x2af8d9(0x113,0xbf,0xfb,0xb0)]=function(_0x5ec323,_0x349b10){return _0x5ec323!==_0x349b10;},_0x4c1d8a['OJsSw']=_0x1be70c(-0x14f,-0x18c,-0x199,-0x134),_0x4c1d8a[_0x2af8d9(0x33,0x85,0xd9,0x90)]=_0x2af8d9(0x95,0xdd,0xa3,0xe9)+_0x1be70c(-0x1c5,-0x196,-0x1cd,-0x17b)+_0x1be70c(-0x1c9,-0x216,-0x1bb,-0x1cd);function _0x1be70c(_0x305dd9,_0x5a7c1b,_0x445409,_0x4350b5){return _0x5d08(_0x305dd9- -0x30f,_0x4350b5);}const _0x254e3a=_0x4c1d8a;if(!isAiInitialized){if(_0x254e3a[_0x2af8d9(0x6b,0xbf,0xc1,0x84)](_0x254e3a[_0x1be70c(-0x1cc,-0x1e0,-0x1fe,-0x1bd)],_0x254e3a[_0x1be70c(-0x1cc,-0x21b,-0x197,-0x1a5)]))return _0x29b7b3[_0x1be70c(-0x18e,-0x1e7,-0x179,-0x1b1)](_0x39ec54=>_0x39ec54[_0x1be70c(-0x19c,-0x1ec,-0x1ab,-0x1f2)](_0x2d4a71[_0x1be70c(-0x17c,-0x128,-0x1d2,-0x17b)]()));else console[_0x2af8d9(0x27,0x6b,0xa3,0x71)](_0x254e3a['IyWuM']),isAiInitialized=!![];}}