function _0x4922(_0x1aad5f,_0x7e82db){_0x1aad5f=_0x1aad5f-(0x1517+0x2*0xe75+-0x3191);const _0x4c3f62=_0x8d98();let _0x115103=_0x4c3f62[_0x1aad5f];if(_0x4922['RGDhDd']===undefined){var _0x62d960=function(_0xbc5827){const _0x288a0c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1ddbf0='',_0x1b4830='',_0x9585d4=_0x1ddbf0+_0x62d960;for(let _0x361a94=0x14da+-0x2*0x1223+0xf6c,_0x1f1135,_0x49e9d0,_0x35819d=0x6*0x354+-0x13*-0x9+-0x14a3;_0x49e9d0=_0xbc5827['charAt'](_0x35819d++);~_0x49e9d0&&(_0x1f1135=_0x361a94%(-0x1*0x1b5c+0xd86+0xdda)?_0x1f1135*(0x11ac+-0x218b*-0x1+-0x32f7)+_0x49e9d0:_0x49e9d0,_0x361a94++%(0x1354+-0x38b+-0x16f*0xb))?_0x1ddbf0+=_0x9585d4['charCodeAt'](_0x35819d+(-0x1a25+-0x1011*-0x2+0x5f3*-0x1))-(-0x34*-0x10+0xcb4+-0x54e*0x3)!==0x20fb+0x510+-0x260b?String['fromCharCode'](0xa03+0x3*0x991+-0x25b7&_0x1f1135>>(-(0x220e+0x1*-0x1fc7+0x7*-0x53)*_0x361a94&0xf*-0x15b+0x2*-0x9d1+0x27fd)):_0x361a94:-0x8f6*-0x4+-0x51d+-0x1ebb){_0x49e9d0=_0x288a0c['indexOf'](_0x49e9d0);}for(let _0x1904bf=-0xd04+-0x20d6+0x2dda,_0x2f9442=_0x1ddbf0['length'];_0x1904bf<_0x2f9442;_0x1904bf++){_0x1b4830+='%'+('00'+_0x1ddbf0['charCodeAt'](_0x1904bf)['toString'](-0x1*0xbfa+-0x1*-0x5a8+0x662))['slice'](-(0x10cf+-0x1d8e+0xcc1));}return decodeURIComponent(_0x1b4830);};_0x4922['hKruhO']=_0x62d960,_0x4922['vDNChH']={},_0x4922['RGDhDd']=!![];}const _0x41cf09=_0x4c3f62[0xb0e+0x1297+0x1*-0x1da5],_0x37bad5=_0x1aad5f+_0x41cf09,_0x19c220=_0x4922['vDNChH'][_0x37bad5];if(!_0x19c220){const _0x3e46f2=function(_0x6401e4){this['KmAQpJ']=_0x6401e4,this['uNABVV']=[0x263b+-0x1*0x2543+-0xf7,-0x2659*0x1+-0x117d+-0x2*-0x1beb,0x158c+0x245b+-0x39e7],this['jwybpL']=function(){return'newState';},this['eLaEvF']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['peKjsF']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3e46f2['prototype']['yRVsOy']=function(){const _0x3f2468=new RegExp(this['eLaEvF']+this['peKjsF']),_0x202681=_0x3f2468['test'](this['jwybpL']['toString']())?--this['uNABVV'][-0x6b4+0x10b5+-0xa00]:--this['uNABVV'][0x3d*-0x2d+0xd*0x27b+-0x44e*0x5];return this['LIKcQm'](_0x202681);},_0x3e46f2['prototype']['LIKcQm']=function(_0xce5e29){if(!Boolean(~_0xce5e29))return _0xce5e29;return this['qRGRkn'](this['KmAQpJ']);},_0x3e46f2['prototype']['qRGRkn']=function(_0x2815d6){for(let _0x2c604f=-0x2597*-0x1+-0x760+0x11*-0x1c7,_0x2b1015=this['uNABVV']['length'];_0x2c604f<_0x2b1015;_0x2c604f++){this['uNABVV']['push'](Math['round'](Math['random']())),_0x2b1015=this['uNABVV']['length'];}return _0x2815d6(this['uNABVV'][-0x1c*-0x14+0x185+0x49*-0xd]);},new _0x3e46f2(_0x4922)['yRVsOy'](),_0x115103=_0x4922['hKruhO'](_0x115103),_0x4922['vDNChH'][_0x37bad5]=_0x115103;}else _0x115103=_0x19c220;return _0x115103;}(function(_0x4dbde9,_0x1fe905){const _0x55f6be=_0x4dbde9();function _0x271ec9(_0x3f4e09,_0x1fde33,_0x5e95e8,_0x55fb54){return _0x4922(_0x55fb54- -0x266,_0x3f4e09);}function _0x1fcef8(_0x49fc4c,_0x204dde,_0x4df187,_0x105b4c){return _0x4922(_0x49fc4c- -0x78,_0x4df187);}while(!![]){try{const _0x84baf1=-parseInt(_0x1fcef8(0x69,0xb4,0xa2,0x79))/(0x5*0x232+-0x1*0xa1f+0xda*-0x1)+-parseInt(_0x1fcef8(0x9b,0xf1,0xc4,0xc6))/(0x9fe+-0x43*-0x87+-0x1*0x2d51)+-parseInt(_0x271ec9(-0x1df,-0x1ab,-0x1f5,-0x1c0))/(-0x1*0x21fb+0x21b8+-0x23*-0x2)*(parseInt(_0x271ec9(-0x1bc,-0x234,-0x19f,-0x1eb))/(-0x346+-0x116e+-0x34*-0x66))+-parseInt(_0x271ec9(-0x12f,-0x190,-0x1a3,-0x161))/(0x2*0xde2+-0x769*-0x4+0x3*-0x1321)+parseInt(_0x1fcef8(0x65,0x9d,0x88,0xa0))/(-0xb29*-0x1+-0x871+-0x2b2)*(parseInt(_0x271ec9(-0x18e,-0x1d6,-0x205,-0x1db))/(0x24+-0x1067+0x104a))+parseInt(_0x1fcef8(0x9,0x17,0x26,-0x27))/(-0x1ecf+0x1*0x24d7+-0x600)+parseInt(_0x1fcef8(0x79,0x79,0x9d,0x44))/(0x74*0x12+0x5*0x23c+-0x134b)*(parseInt(_0x271ec9(-0x150,-0x16c,-0x17c,-0x18f))/(-0x2257*0x1+0x2391+0x130*-0x1));if(_0x84baf1===_0x1fe905)break;else _0x55f6be['push'](_0x55f6be['shift']());}catch(_0x93b33){_0x55f6be['push'](_0x55f6be['shift']());}}}(_0x8d98,0x2e5b*0x24+0x32*-0x2925+0x775c3));const _0x4289b2=(function(){const _0x336fb6={};_0x336fb6[_0x43289a(0x3f4,0x39d,0x419,0x3df)]=_0x43289a(0x3be,0x3a5,0x404,0x3ed);function _0x43289a(_0x2c1c11,_0x334c8b,_0x99f72f,_0x12afa8){return _0x4922(_0x12afa8-0x2e1,_0x2c1c11);}function _0x68d87d(_0x34aad2,_0x145be9,_0x294ace,_0x3fb80f){return _0x4922(_0x34aad2-0x32c,_0x3fb80f);}_0x336fb6[_0x43289a(0x39a,0x3f4,0x3bc,0x3cf)]=function(_0x17bd27,_0xc5cf08){return _0x17bd27!==_0xc5cf08;},_0x336fb6['JvjqI']=function(_0x20f55b,_0x5a0825){return _0x20f55b!==_0x5a0825;};const _0x5515f1=_0x336fb6;let _0x374086=!![];return function(_0x44c143,_0x4e706c){const _0x10c132=_0x374086?function(){const _0x48be34={'qHDQY':function(_0x5b468a,_0x3d2640){return _0x5b468a===_0x3d2640;},'CpoeZ':_0x5515f1[_0x183ede(0x449,0x4dc,0x4a5,0x486)],'YXrLg':function(_0x55f50a,_0xafde6b){function _0x2d431b(_0x507b40,_0x2bfe0e,_0x33c779,_0x53bade){return _0x183ede(_0x507b40-0xd3,_0x2bfe0e-0xc7,_0x2bfe0e,_0x33c779- -0x388);}return _0x5515f1[_0x2d431b(0x9f,0x9c,0xee,0xaa)](_0x55f50a,_0xafde6b);}};function _0x168f6b(_0x38f914,_0x314212,_0x353ed2,_0x2d5cc1){return _0x4922(_0x314212-0x1cf,_0x2d5cc1);}function _0x183ede(_0x4d1f06,_0x25e220,_0x11de72,_0x589214){return _0x4922(_0x589214-0x388,_0x11de72);}if(_0x183ede(0x48e,0x497,0x41a,0x459)!==_0x183ede(0x434,0x413,0x423,0x411)){if(_0x4e706c){if(_0x5515f1['JvjqI'](_0x183ede(0x47c,0x492,0x458,0x44e),_0x168f6b(0x280,0x284,0x25f,0x255))){const _0x3a9d1f=_0x4e706c['apply'](_0x44c143,arguments);return _0x4e706c=null,_0x3a9d1f;}else{const _0x4a36a7=_0x2b461f[_0x183ede(0x4aa,0x45b,0x490,0x466)](_0x3994c2[-0x4e6*0x2+0x335*-0xb+0x1*0x2d13]);if(_0x48be34['qHDQY'](typeof _0x4a36a7,_0x48be34[_0x168f6b(0x258,0x26c,0x231,0x27a)])&&_0x48be34[_0x168f6b(0x24c,0x24c,0x22d,0x276)](_0x4a36a7,null))return _0x4a36a7;}}}else return _0x14bd1a;}:function(){};return _0x374086=![],_0x10c132;};}()),_0x3c38bb=_0x4289b2(this,function(){function _0x1027aa(_0x532c15,_0x1e0772,_0x2e16de,_0x4a874c){return _0x4922(_0x2e16de- -0x348,_0x1e0772);}const _0x247086={};function _0x17de70(_0x1de8cf,_0x437633,_0x33823d,_0x183866){return _0x4922(_0x1de8cf- -0xec,_0x183866);}_0x247086[_0x1027aa(-0x261,-0x2a0,-0x27f,-0x2ce)]=_0x1027aa(-0x2a5,-0x28d,-0x27c,-0x268)+'+$';const _0x57158c=_0x247086;return _0x3c38bb[_0x17de70(-0x1c,-0x64,-0x4c,0xb)]()[_0x17de70(-0x66,-0x67,-0xa2,-0x86)](_0x57158c[_0x17de70(-0x23,0x1c,0x1c,-0xc)])[_0x1027aa(-0x265,-0x26d,-0x278,-0x2a1)]()[_0x1027aa(-0x1e0,-0x268,-0x230,-0x1f9)+'r'](_0x3c38bb)[_0x1027aa(-0x2d9,-0x28f,-0x2c2,-0x2f4)](_0x17de70(-0x20,0x19,-0x4d,-0xd)+'+$');});_0x3c38bb();import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';function _0x8d98(){const _0x4903a3=['AMTUv0u','BxpVViK','Ew1pwwG','ioAjP+IHJoE7K+AENcaOsuq6','A0zsEKu','57+76k+r5AsX6lsLoG','AvDovK0','DgvZDa','BM93','Aw5lBLi','B211s0e','EMzrDhy','C3bSAxq','icHjrdOG','qvrjt05FuKvrvq','DLvOwum','y2XLyw5Lza','t1fpswC','zw5LCG','uujhyKS','EM1NqMu','C0vREM8','DhjPBq','kcGOlISPkYKRkq','C29Tzq','wMj4B28','ChjVBxb0','Dg9tDhjPBMC','tKPhqM4','BwfW','AxnbCNjHEq','z0DKqxC','tM5RDLq','ChvZAa','mJuWDxHptwnY','D2fYBG','zw50CMLLCW','yxbiqMy','uKrsA0C','5BcD6k+v5PEN5Qc85BYpoG','nMzdy1LLAW','CgfYC2u','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','sxn2B3q','nta1mdiXv2nSDK5j','zw1PDa','Euj3A0y','zNvus3m','BwvZC2fNzq','ANrsyNG','EwrKvg0','yxbWBhK','qKfXCLC','CMvTB3zLtgLZDa','EKvSu3O','q01RBvG','wxjVr1O','se5qsg0','BMfTzq','BgDkv0e','mZu5nZeYsKXKB0nZ','tev0Bxu','qLr3qNm','te14ywq','vfvtEwS','tNvtrgy','CMfUzg9Tvvvjra','q2vzt3K','C3qTy2HHDhu4oG','DxnLCG','q1HNswG','sKj5tgq','AM9PBG','qvDZDfG','DhjHBNnSyxrPBW','CvnfBKy','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','u0PnqKG','D0z5vha','s2f3qxy','ndyYotu1tezRs2rP','rMXgrw0','vuvtva','t1Hhru8','Bg9N','Aw5KzxHpzG','C3vJy2vZCW','B2jQzwn0','B3jPz2LUywXuyq','wMfzqvm','iePtt07OP6pMNPdLPlhOTkxVViW','rLv2BK0','rMfbCwG','vNfYwhK','ntqXodKWDNnqDLHX','CMvWBgfJzq','swXrENi','u05LAK4','vxPRz2S','y29UC3rYDwn0BW','ue9ou0u','rvnu','Bwf0y2G','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','v0DcsKS','wuXUD1y','ANfmAwi','u1zYzKy','DKPlqLu','vwzItNC','zeH4ELi','ufjptvbux1jfuW','terctKK','yKXKrhu','iefjioIUVUE9RUw3SUE7N+s4GowiSa','odHgr1HzANi','zgLZCgXHEvrLEa','wvHYtgC','teXnx1rsqu5tta','AuHnuLm','Dg9mB3DLCKnHCW','otyYmdq4wefqC3vJ','C3rYAw5NAwz5','ugztvgu','57+76k+r5AsX6lsLoIa','vxf5Bxq','C2vHCMnO','uvjJwei','sKjOz3a','CerUsui','57+76k+rieXmtsdMIAFOOyZOTOu','mtu5mdG2mKr0CujzrG','qwjVCNrfCNjVCG','qvrjt05Fr0vuxW','C2TPChbLza','iow3SUAuTUwiSoE/U+IVKsbmte0','C2XPy2u','ioE/U+IVKEApKoEKUUIVJEAGH+ETVUwKSEI0Pq','zxjYB3i','zMLSDgvY','rfHwC1i','t05trq','C2TPCa','keLeoIa','Cezdzhi','B0rVEM0','v2Dvr3y','yKTHvuK','ufjptvbux1jfuq','q3bVzvO','rfPQzfa','C2v0','CMvZDwX0','q3PKs1u','C3j4z2e','ieXmtsdORR7NVA7POBxPNAi','uuLbBgO','r1zwB3C','mtiWotz1D3nhAe0','C3rYAw5N','CMDKrMS','wvvgD1i','DwrvDLC','DvrQywC','qvrjt05FuKvtua','CMvZDwX0CW','ufvKv1C','s0HHwwu','u1PfthO','AuLOwxO','uvrQqNi','z3jwEe4','B3jPz2LUywW'];_0x8d98=function(){return _0x4903a3;};return _0x8d98();}import{mergeAdjacentMessages}from'./promptProcessor.js';let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0xaaa2ed){function _0x20c0fc(_0x5c1698,_0x1abaf9,_0x4a7190,_0x2381cd){return _0x4922(_0x4a7190-0x150,_0x1abaf9);}function _0x28717d(_0xc1fcc2,_0x1ded1c,_0x5bc08e,_0x47a9de){return _0x4922(_0x47a9de-0x20a,_0xc1fcc2);}return SKIP_PATTERNS['some'](_0x152eb3=>_0x152eb3[_0x28717d(0x2c1,0x293,0x2a0,0x2c6)](_0xaaa2ed[_0x28717d(0x2c9,0x299,0x2ed,0x2d5)]()));}export function tagsToJsonString(_0x1bc4b1){if(!Array[_0x48a56c(0xb5,0x100,0xe4,0xd3)](_0x1bc4b1))return'[]';function _0x48a56c(_0x2542ea,_0x2073cf,_0x4a65d0,_0x2f4902){return _0x4922(_0x2f4902-0x0,_0x2542ea);}function _0x9c66a2(_0x2bc702,_0x523386,_0x13c6e0,_0x257efb){return _0x4922(_0x2bc702- -0x2da,_0x13c6e0);}return JSON[_0x48a56c(0x67,0x4e,0x75,0x82)](_0x1bc4b1[_0x9c66a2(-0x247,-0x295,-0x27b,-0x22d)](_0x115034=>_0x115034&&typeof _0x115034===_0x48a56c(0x85,0xcd,0x78,0xa7)));}export function preprocessPromptForTranslation(_0x3a0f23){const _0x67a3af={'SJMBH':function(_0x3a8758,_0x30258b){return _0x3a8758<_0x30258b;},'gGdAw':function(_0x4c1bbb,_0x4b396f){return _0x4c1bbb===_0x4b396f;},'grVxN':function(_0x4eee57,_0x23f6b0){return _0x4eee57===_0x23f6b0;},'npFKH':function(_0xadc50f,_0x2f3b52){return _0xadc50f!==_0x2f3b52;},'OXGEO':_0x51541f(-0x1e,-0x6f,-0x73,-0x49),'vBuDI':function(_0x457ebe,_0x1cde89){return _0x457ebe!==_0x1cde89;},'NuSDf':'vyXCH','CeYOy':function(_0x219dd9,_0x5bba53){return _0x219dd9(_0x5bba53);},'SVrfF':function(_0x21891c,_0x5f1ae7){return _0x21891c(_0x5f1ae7);},'iHMRS':function(_0x53e7cb,_0x5a0ce1){return _0x53e7cb(_0x5a0ce1);}};function _0x51541f(_0x24c2e2,_0x9c87e8,_0x235fbb,_0xe3bf30){return _0x4922(_0x9c87e8- -0x116,_0x24c2e2);}if(!_0x3a0f23||_0x67a3af['npFKH'](typeof _0x3a0f23,_0x67a3af[_0x51541f(-0x5e,-0xe,0x3e,-0x2a)]))return _0x67a3af['vBuDI'](_0x67a3af[_0x1e6d1d(0x2d4,0x2b7,0x2ed,0x30c)],_0x67a3af[_0x51541f(-0x5b,-0x20,0x28,0x13)])?_0xae3680[_0x1e6d1d(0x2d5,0x301,0x2a2,0x324)]():{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};const _0x569772=_0x756bc3=>{const _0x54a2e9=[];let _0x36b173='';function _0x30da3f(_0x49ea39,_0x56833d,_0x58e85e,_0x2ff541){return _0x1e6d1d(_0x2ff541- -0x459,_0x49ea39,_0x58e85e-0x170,_0x2ff541-0x158);}let _0x434c28=![];for(let _0x60a1da=-0x200e+0x1*0x1863+0x7ab;_0x67a3af[_0x30da3f(-0x192,-0x187,-0x1b2,-0x179)](_0x60a1da,_0x756bc3['length']);_0x60a1da++){const _0x2c95ac=_0x756bc3[_0x60a1da];if(_0x2c95ac==='$')_0x434c28=!_0x434c28,_0x36b173+=_0x2c95ac;else{if((_0x67a3af[_0x30da3f(-0x196,-0x186,-0x1dc,-0x1a7)](_0x2c95ac,',')||_0x67a3af[_0x30da3f(-0x1fa,-0x18f,-0x1f2,-0x1c8)](_0x2c95ac,'，'))&&!_0x434c28){const _0x1fe0c2=_0x36b173[_0x43e0f9(-0x18f,-0x191,-0x1bf,-0x197)]();if(_0x1fe0c2)_0x54a2e9[_0x30da3f(-0x181,-0x1f2,-0x1ac,-0x1a5)](_0x1fe0c2);_0x36b173='';}else _0x36b173+=_0x2c95ac;}}if(_0x36b173[_0x30da3f(-0x1cf,-0x177,-0x177,-0x1b0)]())_0x54a2e9[_0x43e0f9(-0x18c,-0x186,-0x1bb,-0x14c)](_0x36b173['trim']());function _0x43e0f9(_0x218228,_0x295441,_0x7c90da,_0x4d2b05){return _0x1e6d1d(_0x295441- -0x43a,_0x218228,_0x7c90da-0x124,_0x4d2b05-0x1e8);}return _0x54a2e9;},_0x3d9054=_0x67a3af[_0x1e6d1d(0x2d6,0x2c4,0x30c,0x2f6)](_0x569772,_0x3a0f23),_0x5c1e33=[],_0x36aba4=[],_0x5a7fe7=new Map();for(const _0x5ed90c of _0x3d9054){const _0x52275c=_0x5ed90c[_0x51541f(-0x4a,0x5,0x28,0x53)](SD_SYMBOL_PATTERN);if(_0x52275c){const _0x52ec9b=_0x52275c[-0x565+0x174*0x2+0x3a*0xb]||'',_0x309162=(_0x52275c[0x67*0x2d+0x527*0x7+0x2*-0x1b15]||'')['trim'](),_0x1a003b=_0x52275c[-0x20+-0x14f7+0x4a*0x49]||'',_0x2537c8=_0x52275c[0x2c3*0x6+0xfe4+-0x1039*0x2]||'',_0x3636b3={'original':_0x5ed90c,'cleaned':_0x309162,'prefix':_0x52ec9b,'suffix':_0x1a003b,'weight':_0x2537c8,'skip':_0x67a3af['CeYOy'](shouldSkipTranslation,_0x5ed90c)||shouldSkipTranslation(_0x309162)};_0x5c1e33[_0x1e6d1d(0x2b4,0x278,0x2d6,0x2a7)](_0x3636b3),!_0x3636b3['skip']&&_0x309162&&(_0x36aba4[_0x51541f(-0x84,-0x40,-0x79,-0x54)](_0x309162),_0x5a7fe7[_0x51541f(-0xa0,-0x77,-0x90,-0x71)](_0x309162[_0x51541f(-0x45,-0x96,-0x58,-0x6b)+'e'](),_0x3636b3));}else{const _0x6bfa84={'original':_0x5ed90c,'cleaned':_0x5ed90c,'prefix':'','suffix':'','weight':'','skip':_0x67a3af[_0x51541f(-0xa9,-0xa3,-0x5d,-0xdc)](shouldSkipTranslation,_0x5ed90c)};_0x5c1e33[_0x1e6d1d(0x2b4,0x307,0x25d,0x2b6)](_0x6bfa84),!_0x6bfa84[_0x51541f(-0x68,-0x80,-0x7b,-0x49)]&&_0x5ed90c&&(_0x36aba4[_0x51541f(-0x68,-0x40,0x13,-0x48)](_0x5ed90c),_0x5a7fe7[_0x1e6d1d(0x27d,0x2b2,0x2a5,0x262)](_0x5ed90c[_0x51541f(-0xe2,-0x96,-0x91,-0x53)+'e'](),_0x6bfa84));}}function _0x1e6d1d(_0x20000c,_0x41d557,_0x5a9c68,_0x47e5c3){return _0x4922(_0x20000c-0x1de,_0x41d557);}return{'originalTags':_0x5c1e33,'cleanedTags':_0x36aba4,'cleanedText':_0x67a3af[_0x51541f(-0x56,-0x97,-0xc7,-0x68)](tagsToJsonString,_0x36aba4),'tagMap':_0x5a7fe7};}export function combineTranslationResult(_0x4a8515,_0x6a1a0f){const _0x1fa4b7={};_0x1fa4b7[_0x9c8156(-0x1ad,-0x23b,-0x204,-0x1ee)]=function(_0x45462d,_0x38ce32){return _0x45462d>_0x38ce32;},_0x1fa4b7[_0x490dea(0x439,0x45e,0x455,0x47a)]=function(_0x38ed7e,_0x550ca5){return _0x38ed7e+_0x550ca5;},_0x1fa4b7[_0x490dea(0x39b,0x38a,0x3d6,0x3ad)]=function(_0x411bd9,_0x3c4648){return _0x411bd9===_0x3c4648;};function _0x490dea(_0x1044b4,_0x907d39,_0x2e6ed0,_0x19d1ca){return _0x4922(_0x2e6ed0-0x351,_0x19d1ca);}_0x1fa4b7[_0x490dea(0x383,0x39b,0x3d4,0x3f6)]='AiRlz',_0x1fa4b7['YLnwV']=_0x9c8156(-0x1bb,-0x19f,-0x1d3,-0x219),_0x1fa4b7[_0x9c8156(-0x2b2,-0x253,-0x272,-0x249)]=function(_0x459da7,_0x391079){return _0x459da7!==_0x391079;},_0x1fa4b7['mgICs']=_0x490dea(0x3d7,0x3f8,0x3f6,0x40f),_0x1fa4b7[_0x490dea(0x40b,0x486,0x451,0x457)]=function(_0x2a1585,_0x2d4830){return _0x2a1585===_0x2d4830;},_0x1fa4b7[_0x9c8156(-0x230,-0x1d3,-0x226,-0x1fd)]=_0x490dea(0x4af,0x45d,0x45d,0x488);const _0x29c307=_0x1fa4b7;if(!_0x4a8515||!Array[_0x9c8156(-0x200,-0x1d0,-0x211,-0x239)](_0x4a8515)){if(_0x29c307['jqLib'](_0x29c307['mgICs'],_0x490dea(0x3ab,0x3b6,0x3f6,0x40e))){const _0x1c9b12=_0x49700e[_0x9c8156(-0x1cd,-0x1ea,-0x1da,-0x1b2)]('\x5c');if(_0x29c307[_0x9c8156(-0x210,-0x252,-0x204,-0x1e8)](_0x1c9b12,0x15*-0x1f+-0x253+-0xb2*-0x7)){const _0x40d4f1=_0x2a12ae[_0x490dea(0x3db,0x3cf,0x3e1,0x392)](0x5*0x699+0x5*0x29b+-0x2e04,_0x1c9b12)[_0x9c8156(-0x246,-0x1f1,-0x219,-0x259)](),_0x17c925=_0x4d1a84[_0x9c8156(-0x20d,-0x258,-0x254,-0x25e)](_0x29c307['KawAv'](_0x1c9b12,-0x21a1+0x423*-0x4+0x322e))['trim']();if(_0x40d4f1)_0x425d71[_0x40d4f1]=_0x17c925;}}else return[];}function _0x9c8156(_0xb73d13,_0x1747b7,_0x282507,_0x4efa2b){return _0x4922(_0x282507- -0x2e4,_0x4efa2b);}const _0x17a173={};if(_0x6a1a0f&&_0x29c307[_0x9c8156(-0x1a0,-0x225,-0x1e4,-0x205)](typeof _0x6a1a0f,_0x29c307[_0x9c8156(-0x24a,-0x23d,-0x226,-0x1f7)]))for(const [_0x69e78d,_0x484134]of Object[_0x9c8156(-0x252,-0x1b7,-0x20b,-0x1f9)](_0x6a1a0f)){_0x17a173[_0x69e78d[_0x490dea(0x409,0x3e8,0x3d1,0x3bc)+'e']()]=_0x484134;}return _0x4a8515[_0x490dea(0x44f,0x3de,0x423,0x3f5)](_0x57d87c=>{function _0x573acc(_0x2a8f76,_0x13c3a8,_0xaaaf88,_0x59e130){return _0x490dea(_0x2a8f76-0x37,_0x13c3a8-0x30,_0x2a8f76- -0x426,_0x13c3a8);}function _0x49a32c(_0x5d879a,_0x252275,_0x58258c,_0x53f3e2){return _0x9c8156(_0x5d879a-0xc5,_0x252275-0x1e8,_0x53f3e2-0x13e,_0x252275);}if(_0x29c307[_0x49a32c(-0x136,-0x11f,-0xef,-0x121)](_0x29c307['PfSTe'],_0x29c307[_0x49a32c(-0x180,-0x152,-0x144,-0x135)]))return _0x5e9909[_0x573acc(-0x8,-0xb,-0x40,-0x3c)](_0x4c2835=>_0x4c2835[_0x573acc(-0x19,-0xe,-0x21,-0x46)](_0xfa2b11[_0x49a32c(-0x11b,-0xa7,-0xa0,-0xdb)]()));else{const {original:_0xa6a848,cleaned:_0x273d87,skip:_0x4e07b7}=_0x57d87c;if(_0x4e07b7){const _0x30272d={};return _0x30272d[_0x573acc(-0x21,-0xf,0x2b,-0x60)]=_0xa6a848,_0x30272d[_0x49a32c(-0x59,-0x67,-0x51,-0xa7)+'n']='',_0x30272d['cleaned']=_0x273d87,_0x30272d['skipped']=!![],_0x30272d;}const _0x114068=_0x17a173[_0x273d87[_0x573acc(-0x55,-0x15,-0x53,-0xa9)+'e']()]||'',_0xbd7837={};return _0xbd7837[_0x49a32c(-0xab,-0x142,-0xb3,-0xf2)]=_0xa6a848,_0xbd7837['translatio'+'n']=_0x114068,_0xbd7837[_0x49a32c(-0xe6,-0xf1,-0x136,-0xe1)]=_0x273d87,_0xbd7837[_0x49a32c(-0x11e,-0x144,-0xd8,-0x118)]=![],_0xbd7837;}});}export function formatTranslationDisplay(_0x1e4fdc,_0x3fde65={}){const _0x41d08f={};_0x41d08f[_0x1e9aee(0x1d8,0x1cb,0x1b7,0x1a8)]=_0x4332c1(-0x37c,-0x33c,-0x2f7,-0x331),_0x41d08f[_0x1e9aee(0x125,0x160,0x143,0xf7)]=function(_0x5923e1,_0x1699b5){return _0x5923e1!==_0x1699b5;},_0x41d08f[_0x1e9aee(0x146,0x14e,0x147,0x139)]=_0x1e9aee(0x211,0x1b8,0x1c7,0x1b9),_0x41d08f[_0x4332c1(-0x2e1,-0x366,-0x325,-0x322)]='ODDPX';function _0x4332c1(_0x31dc6b,_0x39b781,_0x5b88c3,_0x1b9548){return _0x4922(_0x1b9548- -0x3db,_0x39b781);}const _0x1b61b2=_0x41d08f;function _0x1e9aee(_0x3b6dca,_0x1252a,_0x457b71,_0x2d59e9){return _0x4922(_0x457b71-0xd3,_0x2d59e9);}const {separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0x3fde65;if(!_0x1e4fdc||!Array[_0x1e9aee(0x177,0x17b,0x1a6,0x160)](_0x1e4fdc)){if(_0x1b61b2[_0x1e9aee(0x111,0x15f,0x143,0x14d)](_0x1b61b2[_0x4332c1(-0x3b6,-0x365,-0x3ac,-0x367)],_0x1b61b2['kFRzE']))return'';else _0x2842db+=_0x163571;}return _0x1e4fdc[_0x1e9aee(0x186,0x192,0x1a5,0x1a8)](_0x46758e=>{if(_0x46758e[_0x187c87(-0x15a,-0x12b,-0x174,-0x16a)])return _0x1b61b2[_0x430655(0x130,0x12f,0x174,0x134)]===_0x430655(0x167,0x140,0x186,0x153)?'':showOriginal?_0x46758e[_0x430655(0x129,0xe7,0x142,0x104)]:'';const _0x4b6e0f=[];function _0x430655(_0x28306e,_0x445116,_0x4db5ca,_0x4afd3d){return _0x1e9aee(_0x28306e-0xd8,_0x445116-0x1c1,_0x4afd3d- -0x83,_0x4db5ca);}if(showOriginal)_0x4b6e0f[_0x187c87(-0xbc,-0xe3,-0xe3,-0xa8)](_0x46758e[_0x430655(0x134,0x105,0xbc,0x104)]);showTranslation&&_0x46758e[_0x430655(0x13a,0x12b,0x18a,0x14f)+'n']&&_0x4b6e0f[_0x430655(0x13d,0x10f,0x10d,0x126)]('('+_0x46758e['translatio'+'n']+')');function _0x187c87(_0x15049f,_0x24b405,_0x4dd52e,_0x1b298d){return _0x1e9aee(_0x15049f-0x166,_0x24b405-0xd4,_0x24b405- -0x28c,_0x4dd52e);}return _0x4b6e0f[_0x187c87(-0x8d,-0xbc,-0xd1,-0xe9)]('\x20');})[_0x4332c1(-0x374,-0x377,-0x393,-0x348)](Boolean)[_0x1e9aee(0x21f,0x1b1,0x1d0,0x1d8)](separator);}export async function translatePromptTags(_0x548605){const _0x3c91ef={'ZBCNq':_0x5ea67e(0xf8,0x8b,0xc0,0x10b),'zElSz':function(_0x159201,_0x281f7f){return _0x159201(_0x281f7f);},'lCdna':function(_0x1ae500,_0x105cf5){return _0x1ae500===_0x105cf5;},'TGjjD':'NKChp','kxvba':_0x5ea67e(0xf6,0xda,0x11c,0xed),'YroGZ':function(_0x122b22,_0x483b79){return _0x122b22(_0x483b79);},'iWNVM':function(_0x50e0ae,_0x51f057){return _0x50e0ae(_0x51f057);},'pFCdr':_0x535f75(0x4ae,0x42c,0x42d,0x46d),'OvsvI':_0x535f75(0x3b9,0x439,0x3ef,0x407),'HxnsO':_0x535f75(0x480,0x485,0x492,0x48b)+_0x5ea67e(0xa7,0xbe,0x97,0x47)+':'};function _0x535f75(_0x81b626,_0x2f61a4,_0x130e6e,_0x26a328){return _0x4922(_0x26a328-0x392,_0x2f61a4);}const {originalTags:_0x42ab91,cleanedText:_0x15ba9b}=_0x3c91ef[_0x5ea67e(0x132,0x132,0xf1,0xae)](preprocessPromptForTranslation,_0x548605);function _0x5ea67e(_0x46be90,_0x4bc7ba,_0x27d17b,_0x5b2661){return _0x4922(_0x27d17b-0x6,_0x46be90);}if(!_0x15ba9b){if(_0x3c91ef['lCdna'](_0x3c91ef['TGjjD'],_0x3c91ef['kxvba'])){_0x327547(_0x5ea67e(0xc5,0x7b,0x8a,0x59)+_0x4124b7[_0x5ea67e(0xbb,0x9e,0xeb,0xe7)]),_0xce8576[_0x535f75(0x445,0x400,0x455,0x424)](_0x3c91ef['ZBCNq'],_0x355e22);throw _0x35e9f2;}else{const _0x406514={};return _0x406514['results']=[],_0x406514[_0x535f75(0x3fc,0x44d,0x3f8,0x40e)+'t']='',_0x406514[_0x5ea67e(0x163,0x13f,0x113,0xdb)+'gs']=[],_0x406514;}}try{const _0x4f7a43=await _0x3c91ef[_0x535f75(0x434,0x458,0x4cd,0x47f)](callTranslation,_0x15ba9b),_0x5024ce=_0x3c91ef['iWNVM'](parseTranslationResult,_0x4f7a43),_0x2d6abb=combineTranslationResult(_0x42ab91,_0x5024ce),_0x1cc555=_0x3c91ef[_0x5ea67e(0xd9,0xfa,0xc1,0x92)](formatTranslationDisplay,_0x2d6abb),_0x1a48ea={};return _0x1a48ea[_0x5ea67e(0x68,0x70,0xb3,0x6e)]=_0x2d6abb,_0x1a48ea[_0x5ea67e(0xc8,0x80,0x82,0x72)+'t']=_0x1cc555,_0x1a48ea[_0x535f75(0x491,0x4e1,0x496,0x49f)+'gs']=_0x42ab91,_0x1a48ea;}catch(_0x3e1d56){if(_0x3c91ef[_0x5ea67e(0x7a,0xd2,0x9e,0xd9)]===_0x3c91ef['OvsvI'])_0x3c91ef['zElSz'](_0xcf8087,new _0x25ee80(_0x331c77[_0x5ea67e(0xed,0x71,0xa6,0x62)]));else{console[_0x5ea67e(0x41,0xde,0x98,0x5e)](_0x3c91ef['HxnsO'],_0x3e1d56);throw _0x3e1d56;}}}export function parseTranslationResult(_0x1d20b2){const _0x203468={};function _0x2f42e0(_0x18a698,_0x50ba87,_0x367aa6,_0x3850bd){return _0x4922(_0x50ba87-0x166,_0x18a698);}_0x203468[_0x2f42e0(0x255,0x211,0x245,0x1d6)]=function(_0x39e04a,_0x506c96){return _0x39e04a===_0x506c96;},_0x203468[_0x2f42e0(0x24d,0x225,0x227,0x1eb)]='object',_0x203468[_0x2f42e0(0x285,0x256,0x267,0x24d)]=function(_0x793980,_0x474451){return _0x793980===_0x474451;},_0x203468[_0x47589e(0x21e,0x215,0x237,0x26d)]=function(_0x33c8fd,_0x1aa787){return _0x33c8fd===_0x1aa787;},_0x203468[_0x47589e(0x24e,0x239,0x271,0x2a7)]=function(_0x3fa1d2,_0x230d94){return _0x3fa1d2!==_0x230d94;},_0x203468['vUhYC']=_0x2f42e0(0x207,0x24c,0x1ff,0x2a2),_0x203468['gLcDZ']='st-chatu8:'+_0x47589e(0x2cd,0x317,0x2d0,0x279)+_0x47589e(0x28f,0x282,0x29d,0x2c4),_0x203468[_0x47589e(0x2b8,0x2a2,0x296,0x2a0)]=_0x47589e(0x2c0,0x2bc,0x2d3,0x2c7),_0x203468['MQSdV']=function(_0x5d45b3,_0x52fd0c){return _0x5d45b3+_0x52fd0c;};const _0x33706d=_0x203468;if(!_0x1d20b2)return{};try{const _0x1f4baf=_0x1d20b2[_0x47589e(0x32c,0x2cb,0x2dc,0x2f2)](/\{[\s\S]*\}/);if(_0x1f4baf){const _0x2f0abb=JSON[_0x47589e(0x25c,0x2f6,0x29f,0x2a6)](_0x1f4baf[-0x9*0x2db+0x469*-0x5+0x5f8*0x8]);if(_0x33706d[_0x2f42e0(0x1f2,0x1dc,0x1e1,0x1cb)](typeof _0x2f0abb,_0x33706d['omuKA'])&&_0x33706d[_0x2f42e0(0x20c,0x216,0x23f,0x24c)](_0x2f0abb,null)){if(_0x33706d[_0x47589e(0x266,0x276,0x2b1,0x2e8)]('jtRbx',_0x33706d[_0x47589e(0x256,0x26c,0x285,0x296)]))return _0x2f0abb;else{const _0x429702=_0x138826[_0x2f42e0(0x29a,0x281,0x23e,0x27c)](/\{[\s\S]*\}/);if(_0x429702){const _0x238766=_0x5892b3['parse'](_0x429702[0x779+0xa66+0x19*-0xb7]);if(_0x33706d[_0x2f42e0(0x1f3,0x211,0x255,0x1bd)](typeof _0x238766,_0x33706d[_0x47589e(0x2ca,0x294,0x280,0x232)])&&_0x238766!==null)return _0x238766;}}}}}catch(_0x1a37bb){console[_0x47589e(0x27a,0x266,0x299,0x2d1)](_0x33706d['gLcDZ'],_0x1a37bb[_0x47589e(0x2e2,0x296,0x2a6,0x2d6)]);}function _0x47589e(_0x216381,_0x5983f5,_0x42747a,_0x46e4f6){return _0x4922(_0x42747a-0x1c1,_0x216381);}const _0xc4861e=String(_0x1d20b2)[_0x47589e(0x2d4,0x2bb,0x2d5,0x2de)](/[\r\n]+/g,'\x20')[_0x2f42e0(0x2be,0x27a,0x23e,0x26b)](/^[\s"'`]+|[\s"'`]+$/g,'')[_0x2f42e0(0x25d,0x231,0x229,0x263)](),_0x2c2da5=_0xc4861e[_0x2f42e0(0x214,0x227,0x1f8,0x22b)](/[,，]/)['map'](_0x376657=>_0x376657[_0x2f42e0(0x24f,0x231,0x266,0x1ec)]())[_0x2f42e0(0x249,0x1f9,0x21e,0x203)](Boolean),_0x35154e={};for(const _0x16bdad of _0x2c2da5){const _0x4e008d=_0x16bdad[_0x47589e(0x304,0x2d6,0x2cb,0x27b)]('\x5c');if(_0x4e008d>0x20be+0x27b*-0xe+0x1*0x1fc){if(_0x33706d[_0x2f42e0(0x227,0x211,0x24c,0x23b)](_0x33706d['NnkvT'],_0x33706d['NnkvT'])){const _0x5da845=_0x16bdad[_0x47589e(0x23e,0x206,0x251,0x21b)](0x1d9*0xc+-0x6c6+-0xf66,_0x4e008d)['trim'](),_0x3d5e14=_0x16bdad['slice'](_0x33706d['MQSdV'](_0x4e008d,0x99*-0x1c+-0x953*-0x1+0x76a))[_0x2f42e0(0x1db,0x231,0x1de,0x1e8)]();if(_0x5da845)_0x35154e[_0x5da845]=_0x3d5e14;}else{const _0x5aab5a=_0x2f3cb5[_0x28f294];if(_0x33706d[_0x47589e(0x2bc,0x2b7,0x26c,0x2b5)](_0x5aab5a,'$'))_0x443419=!_0xb9e496,_0x2f0ba7+=_0x5aab5a;else{if((_0x5aab5a===','||_0x33706d[_0x47589e(0x295,0x2ff,0x2b1,0x295)](_0x5aab5a,'，'))&&!_0x598ca1){const _0xa8da99=_0x25d37d[_0x47589e(0x2c9,0x239,0x28c,0x266)]();if(_0xa8da99)_0x28ffce['push'](_0xa8da99);_0x3d2dda='';}else _0x466041+=_0x5aab5a;}}}}return _0x35154e;}function generateRequestId(){const _0x9beb8d={};_0x9beb8d['oDozm']=function(_0x51dff7,_0x20fc49){return _0x51dff7+_0x20fc49;};const _0x195e5b=_0x9beb8d;function _0x3ff569(_0x49e53d,_0x447ee3,_0x12feaf,_0x2063b9){return _0x4922(_0x12feaf-0xed,_0x2063b9);}if(crypto&&crypto['randomUUID'])return crypto[_0x3ff569(0x197,0x1c2,0x1e4,0x194)]();function _0x252583(_0x21cc04,_0x4437e9,_0x2b0616,_0x18122e){return _0x4922(_0x18122e-0x73,_0x2b0616);}return _0x195e5b[_0x252583(0x15f,0xfe,0x14e,0x10c)](Date[_0x252583(0x180,0xfa,0x120,0x130)]()[_0x3ff569(0x195,0x1e3,0x1bd,0x167)](0x33a+0xbc1+0xed7*-0x1),Math['random']()[_0x252583(0x154,0x123,0x154,0x143)](0x7a7*-0x1+-0x1265+0x1a30)['substring'](-0x1b*0x3d+-0x2431+-0x2*-0x1551));}export function LLM_TRANSLATION_GET_PROMPT(){function _0x7b4365(_0x1e8675,_0x516bfc,_0x249bcc,_0x584977){return _0x4922(_0x249bcc-0x12e,_0x1e8675);}function _0x45f72d(_0x1cfe62,_0x69cd61,_0x31950b,_0x284027){return _0x4922(_0x284027- -0x35d,_0x69cd61);}const _0x5af56e={'rgdFk':function(_0x273b1b,_0x50f8dd){return _0x273b1b!==_0x50f8dd;},'zfQtv':function(_0x3a8523,_0x18865c){return _0x3a8523!==_0x18865c;},'BTwBs':_0x45f72d(-0x2a6,-0x286,-0x288,-0x2b4),'DZjdP':function(_0x5b4dd9,_0x15c614){return _0x5b4dd9(_0x15c614);},'Uzkgk':function(_0x50dc59,_0x40e164){return _0x50dc59!==_0x40e164;},'Aakzu':'pbUeT','TUSyk':_0x7b4365(0x1fe,0x216,0x21a,0x1e3),'QTjBr':function(_0x3d3c16){return _0x3d3c16();},'iIhYz':function(_0x595ed9,_0x5563a8,_0xbcf71a){return _0x595ed9(_0x5563a8,_0xbcf71a);}};return new Promise((_0xf22004,_0x544e74)=>{const _0x2336d8={'QBGbK':function(_0x11b13c,_0x3d1fd7){function _0x57d4c7(_0x343b10,_0x3dd0e9,_0x475cc0,_0x39f963){return _0x4922(_0x3dd0e9-0x21c,_0x39f963);}return _0x5af56e[_0x57d4c7(0x32c,0x2dc,0x304,0x2f3)](_0x11b13c,_0x3d1fd7);},'sEkzo':_0x5af56e[_0x51d2d2(0x165,0x12b,0xdf,0x154)],'WgUGv':function(_0x21382a,_0x40c2df){return _0x5af56e['zfQtv'](_0x21382a,_0x40c2df);},'bKaUI':function(_0x18f8b7,_0x37f3c2){function _0x3fb047(_0x437aa8,_0x50ae40,_0xe47f73,_0x114f98){return _0x51d2d2(_0x437aa8-0x3a,_0x114f98- -0x3b,_0xe47f73-0x1d1,_0x437aa8);}return _0x5af56e[_0x3fb047(0xd0,0xe2,0x55,0x9b)](_0x18f8b7,_0x37f3c2);},'FlFEm':_0x5e2b47(-0x1f7,-0x1dd,-0x1a9,-0x197)};function _0x51d2d2(_0x36511a,_0x2747b2,_0x215f33,_0x50606c){return _0x7b4365(_0x50606c,_0x2747b2-0x1d9,_0x2747b2- -0xf6,_0x50606c-0xa6);}function _0x5e2b47(_0x389230,_0x405d21,_0x2488e7,_0xc97216){return _0x7b4365(_0x389230,_0x405d21-0x1d4,_0x2488e7- -0x3d8,_0xc97216-0x12a);}if(_0x5af56e[_0x5e2b47(-0x15e,-0x156,-0x193,-0x18e)](_0x5af56e['Aakzu'],_0x5af56e[_0x51d2d2(0x16d,0x12d,0x16b,0x175)])){const _0x116b55=_0x5af56e[_0x51d2d2(0xbb,0xea,0xbc,0x9c)](generateRequestId);console[_0x5e2b47(-0x194,-0x192,-0x1a1,-0x190)](_0x51d2d2(0x167,0x131,0x178,0x15a)+_0x5e2b47(-0x1fa,-0x20d,-0x1cb,-0x17e)+_0x51d2d2(0xa5,0xfa,0xb5,0x13e)+_0x116b55+')');const _0x7a5737=_0x17a5d7=>{const _0x303882={'ymOYh':function(_0x1a222c,_0x4ba8a3){return _0x1a222c(_0x4ba8a3);}};function _0x58eeca(_0xc408e9,_0x3a0773,_0x183a69,_0x3535cd){return _0x51d2d2(_0xc408e9-0x1de,_0x3a0773-0x3f,_0x183a69-0x1e3,_0x183a69);}function _0x5a08b0(_0x435d3e,_0x5c84ca,_0x5e0969,_0x5c071e){return _0x5e2b47(_0x5c071e,_0x5c84ca-0x159,_0x5c84ca-0x3ef,_0x5c071e-0xeb);}if(_0x2336d8[_0x58eeca(0x188,0x13f,0x18c,0xfc)]('YUFwR',_0x2336d8[_0x58eeca(0x161,0x141,0x105,0x109)]))_0x303882[_0x5a08b0(0x241,0x1fc,0x21d,0x1a7)](_0x33f15b,_0x4abd95[_0x58eeca(0x130,0x117,0x142,0xc5)]);else{if(_0x2336d8[_0x5a08b0(0x1e5,0x1df,0x203,0x21f)](_0x17a5d7['id'],_0x116b55))return;eventSource[_0x58eeca(0x150,0x161,0x115,0x14e)+_0x5a08b0(0x247,0x20c,0x1bb,0x263)](eventNames['LLM_TRANSL'+_0x58eeca(0x109,0x104,0x138,0x111)+_0x5a08b0(0x169,0x1bc,0x1ec,0x197)+_0x5a08b0(0x293,0x25e,0x22f,0x2ac)],_0x7a5737);const {prompt:_0x5d6497}=_0x17a5d7;console[_0x58eeca(0x1af,0x180,0x1bd,0x184)]('st-chatu8:'+_0x5a08b0(0x24b,0x261,0x2a5,0x271)+_0x58eeca(0xf7,0x10e,0x11e,0xdd)+_0x116b55+'):',_0x5d6497),_0xf22004(_0x5d6497);}};eventSource['on'](eventNames[_0x51d2d2(0x96,0xb6,0x7d,0x9a)+_0x51d2d2(0x91,0xc5,0x8c,0xed)+'PROMPT_RES'+_0x5e2b47(-0x18f,-0x1a2,-0x191,-0x151)],_0x7a5737);const _0xa369aa={};_0xa369aa['id']=_0x116b55,eventSource['emit'](eventNames['LLM_TRANSL'+'ATION_GET_'+_0x51d2d2(0xb1,0xd4,0xa7,0x8b)+_0x5e2b47(-0x169,-0x180,-0x1a3,-0x1d8)],_0xa369aa),_0x5af56e[_0x5e2b47(-0x21b,-0x227,-0x1f9,-0x1c9)](setTimeout,()=>{function _0x57c9dc(_0x433156,_0x4a7000,_0x30e012,_0x200b3a){return _0x5e2b47(_0x433156,_0x4a7000-0x14c,_0x30e012-0x373,_0x200b3a-0x57);}function _0x296b48(_0x291bf4,_0x1b3f79,_0x4e7493,_0x393ad5){return _0x5e2b47(_0x393ad5,_0x1b3f79-0x3a,_0x1b3f79-0x346,_0x393ad5-0xb3);}eventSource[_0x57c9dc(0x164,0x176,0x1b3,0x195)+_0x57c9dc(0x1e0,0x14e,0x190,0x175)](eventNames['LLM_TRANSL'+_0x296b48(0x11f,0x129,0x130,0x153)+_0x57c9dc(0xfc,0x172,0x140,0x13a)+_0x296b48(0x1c9,0x1b5,0x19f,0x1a4)],_0x7a5737),_0x2336d8[_0x296b48(0x159,0x137,0x178,0x134)](_0x544e74,new Error(_0x2336d8[_0x57c9dc(0x1c3,0x1c6,0x1cf,0x17f)]));},-0x53*-0x2a+-0x457f+0x5ef1);}else{if(_0x5af56e[_0x5e2b47(-0x1c0,-0x221,-0x202,-0x1e0)](_0x3edf5f['id'],_0x5d8176))return;_0x3b2acf[_0x5e2b47(-0x1e1,-0x178,-0x1c0,-0x1fd)+_0x5e2b47(-0x200,-0x1e7,-0x1e3,-0x1ba)](_0x299145[_0x51d2d2(0x105,0xb6,0x99,0xa5)+_0x5e2b47(-0x1f5,-0x272,-0x21d,-0x21d)+_0x51d2d2(0x5c,0xaf,0x93,0xd2)+'PONSE'],_0x37f5fb);const {prompt:_0x2f40ef}=_0x153466;_0x2d5903[_0x51d2d2(0x160,0x141,0x166,0x11b)](_0x51d2d2(0x168,0x131,0x123,0x127)+_0x51d2d2(0x19f,0x154,0x118,0x152)+_0x51d2d2(0xc6,0xcf,0xaf,0x80)+_0x1e40c1+'):',_0x2f40ef),_0x8e053e(_0x2f40ef);}});}export function LLM_TRANSLATION(_0x335227,{timeoutMs:timeoutMs=-0x6*-0x9cd+0x2f*0xa6+0x9118}={}){function _0x581dd1(_0xaa2c35,_0x59d1a0,_0x1ffbe5,_0x30f923){return _0x4922(_0xaa2c35-0x34f,_0x30f923);}const _0x324f08={'Zbxoo':function(_0x18d79f,_0x41c234){return _0x18d79f!==_0x41c234;},'IlQzr':function(_0x2f87c5){return _0x2f87c5();},'QRcXB':_0x20159c(-0x173,-0x13f,-0x108,-0x127),'KHaYe':function(_0x561925,_0x261771){return _0x561925(_0x261771);},'QDchp':function(_0x393e39,_0x89d6a){return _0x393e39===_0x89d6a;},'eVoYz':_0x20159c(-0xbf,-0xb7,-0x101,-0xed),'CXgIh':_0x20159c(-0xf0,-0xed,-0x139,-0xa7),'yddTm':_0x20159c(-0xfc,-0x13b,-0x162,-0x110),'RUnjO':function(_0x304eb6,_0x155210){return _0x304eb6(_0x155210);},'LDBNI':_0x20159c(-0x8e,-0xe4,-0xd7,-0xf5),'BAqrW':function(_0x593dc4,_0x17bed7){return _0x593dc4(_0x17bed7);},'LEtmu':function(_0x2bfd90){return _0x2bfd90();},'srxga':function(_0x44956e,_0x56d590,_0x3743d8){return _0x44956e(_0x56d590,_0x3743d8);}};function _0x20159c(_0x3e8571,_0x31b2f2,_0x5b76bb,_0x192398){return _0x4922(_0x31b2f2- -0x1c7,_0x5b76bb);}return new Promise((_0x323966,_0x52e77f)=>{const _0x3917ae={'JByLd':function(_0x58f76b,_0x5141f2){return _0x58f76b===_0x5141f2;},'bLdDu':_0x324f08[_0x23c600(-0x144,-0x17b,-0x17d,-0x14e)],'QIAlj':function(_0x3ce475,_0x3b0086){function _0x539ab1(_0x486dd6,_0x3724b,_0x424aad,_0x44008a){return _0x23c600(_0x3724b- -0xb4,_0x486dd6,_0x424aad-0xa2,_0x44008a-0xa4);}return _0x324f08[_0x539ab1(-0x171,-0x187,-0x18a,-0x1ad)](_0x3ce475,_0x3b0086);},'SZELv':function(_0x357ede){function _0x138c18(_0xad1cb9,_0x36176f,_0x18a2fd,_0x17436c){return _0x23c600(_0x17436c-0x2ad,_0xad1cb9,_0x18a2fd-0x1d9,_0x17436c-0x2);}return _0x324f08[_0x138c18(0x1d9,0x1c9,0x1a5,0x1e3)](_0x357ede);}},_0x4aeadd=_0x324f08[_0xe2e9c1(-0xae,-0xfc,-0xb6,-0xf6)](generateRequestId);console[_0x23c600(-0xb3,-0xa8,-0xf3,-0x70)](_0xe2e9c1(-0x7c,-0x10c,-0xd2,-0xb3)+'\x20请求翻译\x20LLM\x20'+_0xe2e9c1(-0xe0,-0x177,-0x134,-0x100)+_0x4aeadd+')');let _0x3125ff=null;const _0x5ad591=()=>{function _0x4676cf(_0x41e9df,_0x13eee7,_0x307f39,_0x43cbd4){return _0xe2e9c1(_0x13eee7,_0x13eee7-0xd8,_0x307f39- -0x1ce,_0x43cbd4-0x1b9);}function _0x1869b9(_0x2ab369,_0x140683,_0x47fb43,_0x21e49d){return _0xe2e9c1(_0x2ab369,_0x140683-0xd3,_0x21e49d-0x296,_0x21e49d-0x73);}if(_0x3917ae[_0x1869b9(0x1fb,0x1c8,0x1f7,0x1c7)](_0x3917ae[_0x4676cf(-0x2f5,-0x36b,-0x320,-0x32c)],_0x1869b9(0x1f6,0x189,0x1b3,0x1ae))){eventSource[_0x4676cf(-0x2dc,-0x2b1,-0x2af,-0x2f1)+_0x4676cf(-0x2f9,-0x27d,-0x2d2,-0x2ee)](eventNames[_0x4676cf(-0x30e,-0x367,-0x31b,-0x33d)+_0x4676cf(-0x2c1,-0x2e3,-0x2ed,-0x307)+_0x1869b9(0x1a6,0x1b3,0x11b,0x160)],_0x5badb9);if(_0x3125ff)_0x3917ae[_0x4676cf(-0x348,-0x2fc,-0x2f5,-0x2d3)](clearTimeout,_0x3125ff);}else{const _0x2a4a7a=_0xe4bdb5?function(){function _0x4ea7ea(_0x254eb2,_0x550407,_0x5d27e5,_0x1fef27){return _0x4676cf(_0x254eb2-0x1ea,_0x254eb2,_0x5d27e5-0x64b,_0x1fef27-0x82);}if(_0x45421c){const _0x4d6244=_0x88685f[_0x4ea7ea(0x399,0x37b,0x39a,0x3b0)](_0x29b0d9,arguments);return _0x474799=null,_0x4d6244;}}:function(){};return _0xf8d4e4=![],_0x2a4a7a;}},_0x5badb9=_0x553927=>{if(_0x324f08[_0x4fd47b(-0x259,-0x222,-0x297,-0x291)](_0x553927['id'],_0x4aeadd))return;function _0x2aee57(_0x5bb237,_0x2cdeac,_0x3ba149,_0x68fb5){return _0x23c600(_0x3ba149- -0x181,_0x5bb237,_0x3ba149-0x104,_0x68fb5-0x60);}_0x324f08[_0x2aee57(-0x230,-0x248,-0x228,-0x1d6)](_0x5ad591),console[_0x2aee57(-0x1e0,-0x240,-0x234,-0x21a)]('st-chatu8:'+_0x2aee57(-0x2f3,-0x277,-0x2ae,-0x279)+_0x4fd47b(-0x26f,-0x24a,-0x2c2,-0x25b)+'\x20'+_0x4aeadd+'):',_0x553927);function _0x4fd47b(_0x321177,_0x11a927,_0x50470d,_0x4cd297){return _0xe2e9c1(_0x4cd297,_0x11a927-0xcd,_0x321177- -0x15c,_0x4cd297-0xc8);}if(_0x553927[_0x2aee57(-0x24b,-0x281,-0x232,-0x1e8)]){if(_0x324f08['Zbxoo'](_0x324f08[_0x4fd47b(-0x2a0,-0x2ca,-0x2af,-0x2f3)],_0x324f08[_0x4fd47b(-0x2a0,-0x2f4,-0x251,-0x255)])){if(_0x56e7e8){const _0x2319ac=_0x443729[_0x4fd47b(-0x23f,-0x23d,-0x23c,-0x21b)](_0x4f9f87,arguments);return _0x33a844=null,_0x2319ac;}}else _0x324f08[_0x2aee57(-0x258,-0x29c,-0x28e,-0x287)](_0x323966,_0x553927[_0x2aee57(-0x2c4,-0x2bc,-0x29d,-0x26a)]);}else{if(_0x324f08['QDchp'](_0x324f08['eVoYz'],_0x324f08[_0x4fd47b(-0x22c,-0x258,-0x243,-0x274)]))_0x37bad5[_0x4fd47b(-0x251,-0x234,-0x290,-0x207)](_0x19c220),_0xbc5827[_0x2aee57(-0x24f,-0x2b8,-0x29e,-0x287)](_0x288a0c['toLowerCas'+'e'](),_0x1ddbf0);else{if(_0x553927['error']&&_0x553927['error'][_0x4fd47b(-0x238,-0x242,-0x1e8,-0x235)]===_0x324f08[_0x2aee57(-0x256,-0x21b,-0x256,-0x224)]){const _0x1e4b86=new Error(_0x553927[_0x4fd47b(-0x295,-0x26f,-0x24f,-0x2e0)][_0x4fd47b(-0x242,-0x28e,-0x245,-0x228)]);_0x1e4b86[_0x2aee57(-0x215,-0x264,-0x24e,-0x206)]=_0x324f08['yddTm'],_0x324f08['RUnjO'](_0x52e77f,_0x1e4b86);}else _0x52e77f(new Error(_0x553927[_0x2aee57(-0x2c0,-0x29c,-0x29d,-0x2e6)]));}}};eventSource['on'](eventNames[_0xe2e9c1(-0x124,-0x146,-0x14d,-0x133)+_0x23c600(-0x110,-0xf7,-0xe8,-0xf2)+_0x23c600(-0x127,-0x119,-0xe7,-0x10f)],_0x5badb9);function _0xe2e9c1(_0xd13d9a,_0x1b2484,_0x27af51,_0x59fb94){return _0x581dd1(_0x27af51- -0x51a,_0x1b2484-0xee,_0x27af51-0x7c,_0xd13d9a);}const _0x2321c8={};_0x2321c8[_0x23c600(-0xed,-0xf9,-0x12e,-0xf0)]=_0x335227,_0x2321c8['id']=_0x4aeadd;function _0x23c600(_0x24a354,_0x10674b,_0x1dd43d,_0x516d9e){return _0x20159c(_0x24a354-0x72,_0x24a354-0xb,_0x10674b,_0x516d9e-0x128);}eventSource[_0xe2e9c1(-0xed,-0xd8,-0xe9,-0xe4)](eventNames[_0x23c600(-0x13e,-0x151,-0xfa,-0x143)+_0x23c600(-0xf9,-0xda,-0x13d,-0x14c)+_0xe2e9c1(-0xe2,-0x74,-0xb1,-0xdd)],_0x2321c8),_0x3125ff=_0x324f08[_0x23c600(-0x11a,-0x109,-0x142,-0xf7)](setTimeout,()=>{_0x3917ae['SZELv'](_0x5ad591);function _0x552d26(_0x476c27,_0x3213a7,_0x3fd661,_0x32fd9){return _0x23c600(_0x3213a7-0x21b,_0x32fd9,_0x3fd661-0x6e,_0x32fd9-0x173);}function _0x79c063(_0x135eef,_0x4d3081,_0x4b97d9,_0xfa4d43){return _0x23c600(_0x4d3081-0x2c7,_0xfa4d43,_0x4b97d9-0xd4,_0xfa4d43-0x22);}_0x52e77f(new Error(_0x79c063(0x15e,0x195,0x1db,0x1dc)+'时（'+timeoutMs+_0x79c063(0x20c,0x1c1,0x1ff,0x1f6)));},timeoutMs);});}export async function callTranslation(_0x1364e9){function _0x3c3cec(_0x7ee100,_0x170c84,_0x58a6b9,_0x4ccedd){return _0x4922(_0x4ccedd-0x169,_0x170c84);}function _0x2055c9(_0x1a000c,_0x2c7ddc,_0x217e45,_0x858aa1){return _0x4922(_0x1a000c-0x386,_0x2c7ddc);}const _0x552c55={'GrYQz':function(_0x22d780,_0x2f5797){return _0x22d780||_0x2f5797;},'DXVsR':function(_0x402e2b,_0x27fe0f){return _0x402e2b(_0x27fe0f);},'ZaYAS':_0x3c3cec(0x21b,0x26a,0x29b,0x263),'FEFIK':function(_0x43147f,_0x311d30){return _0x43147f||_0x311d30;},'CzdKU':function(_0x963f72,_0x39e7b8){return _0x963f72(_0x39e7b8);},'PUdWW':function(_0x19b4c5,_0x95686){return _0x19b4c5(_0x95686);},'Cxbvp':'翻译失败:'};try{let _0x286ed7=buildPromptForRequestType(_0x3c3cec(0x259,0x22c,0x284,0x268)+'n',_0x552c55['GrYQz'](_0x1364e9,''));_0x286ed7=_0x552c55[_0x3c3cec(0x242,0x1e4,0x247,0x1fd)](mergeAdjacentMessages,_0x286ed7);const _0x22522a=[..._0x286ed7,{'role':_0x552c55[_0x2055c9(0x494,0x4bf,0x47f,0x4d6)],'content':_0x552c55['FEFIK'](_0x1364e9,'')}];_0x552c55[_0x2055c9(0x427,0x3fa,0x44f,0x46d)](updateCombinedPrompt,_0x22522a);const _0x2fa777=await _0x552c55[_0x3c3cec(0x1cc,0x1e0,0x1d5,0x217)](LLM_TRANSLATION,_0x22522a);return _0x2fa777;}catch(_0x38350e){_0x552c55[_0x3c3cec(0x1d8,0x225,0x203,0x217)](addLog,_0x2055c9(0x40a,0x450,0x411,0x3f2)+_0x38350e[_0x3c3cec(0x279,0x25c,0x212,0x24e)]),console[_0x2055c9(0x418,0x467,0x3e1,0x3cc)](_0x552c55['Cxbvp'],_0x38350e);throw _0x38350e;}}let isAiInitialized=![];export function initAiSettings(_0xd335c7){function _0x534067(_0x3fe1a6,_0x30ffe0,_0x3c2932,_0x2f7eb5){return _0x4922(_0x30ffe0- -0x22c,_0x2f7eb5);}const _0x126c8e={};function _0x22805a(_0x48c67c,_0x26a4e1,_0x2c20bf,_0x1f2bb1){return _0x4922(_0x48c67c- -0xf9,_0x2c20bf);}_0x126c8e['HJMjJ']=_0x22805a(0x0,0x2b,0xc,0x51)+_0x22805a(-0x7f,-0x84,-0x73,-0x71)+_0x22805a(-0x56,-0x49,-0x93,-0x28);const _0x711f91=_0x126c8e;!isAiInitialized&&(console[_0x534067(-0x121,-0x123,-0x16f,-0x15b)](_0x711f91['HJMjJ']),isAiInitialized=!![]);}