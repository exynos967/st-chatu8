(function(_0x2f99cf,_0x529672){const _0x42d89c=_0x2f99cf();function _0x1011d5(_0x1305c2,_0x10b80c,_0xfbb9,_0x334f0d){return _0x4ce5(_0x334f0d- -0x94,_0xfbb9);}function _0x24c3db(_0x2db7c2,_0x263bd6,_0x42fa79,_0x4886df){return _0x4ce5(_0x42fa79-0xc3,_0x263bd6);}while(!![]){try{const _0x323f21=parseInt(_0x1011d5(0x60,0x84,0x116,0xc1))/(-0x218c+0x201c+0x171)*(parseInt(_0x1011d5(0x13e,0x124,0xed,0x12c))/(-0x17b3+-0x1993+0x1*0x3148))+-parseInt(_0x24c3db(0x230,0x242,0x28f,0x269))/(-0x69d+0x3e8*0x8+0x18a*-0x10)+-parseInt(_0x24c3db(0x1bd,0x1a2,0x20a,0x24b))/(0x168c+0x37c+0x1e*-0xde)+-parseInt(_0x1011d5(0xa1,0xe3,0xfc,0xff))/(0xa2f*0x1+0x3*-0x61f+0x833)*(parseInt(_0x1011d5(0xcd,0x8e,0x13e,0xef))/(0xd2b+0x278*-0x1+0x1*-0xaad))+-parseInt(_0x1011d5(0x130,0x13e,0xe4,0xe1))/(-0x14dc+-0x8ff+0x352*0x9)+-parseInt(_0x24c3db(0x2ca,0x25a,0x282,0x2e6))/(0x18f2+-0xc36+-0xcb4)+-parseInt(_0x1011d5(0xc9,0xc4,0xb0,0xf8))/(0x3*-0x959+0x88b+-0x1389*-0x1)*(-parseInt(_0x24c3db(0x1be,0x1b6,0x217,0x207))/(-0xebf+0x183+-0x1*-0xd46));if(_0x323f21===_0x529672)break;else _0x42d89c['push'](_0x42d89c['shift']());}catch(_0x466246){_0x42d89c['push'](_0x42d89c['shift']());}}}(_0x46ac,-0x12*0x2d56+0x5a1a1+0x7559));const _0x3c44a2=(function(){const _0x475581={};function _0x54a7a2(_0x2e7689,_0x1beee7,_0x58e759,_0x128c05){return _0x4ce5(_0x1beee7- -0xf0,_0x2e7689);}_0x475581[_0x2d57bd(0x35d,0x335,0x2e5,0x2d2)]=function(_0x5ac0c6,_0x1de4a6){return _0x5ac0c6!==_0x1de4a6;},_0x475581[_0x54a7a2(0xa1,0x8a,0xdc,0xc8)]='stLqJ',_0x475581['PKjwQ']=_0x54a7a2(0xe7,0xea,0xab,0x102);function _0x2d57bd(_0x2c1cd2,_0x5e57b6,_0x47d4bb,_0x28393f){return _0x4ce5(_0x5e57b6-0x203,_0x47d4bb);}const _0x19d900=_0x475581;let _0x5f1acd=!![];return function(_0x4a7a12,_0x446277){function _0x36930a(_0x227732,_0x39ea40,_0x34bbff,_0x5ac923){return _0x54a7a2(_0x227732,_0x34bbff- -0x2f5,_0x34bbff-0xa5,_0x5ac923-0x40);}if(_0x19d900[_0x36930a(-0x268,-0x2a6,-0x2b3,-0x269)](_0x19d900['IyLAJ'],_0x19d900['PKjwQ'])){const _0x3b1394=_0x5f1acd?function(){if(_0x446277){const _0x137f72=_0x446277['apply'](_0x4a7a12,arguments);return _0x446277=null,_0x137f72;}}:function(){};return _0x5f1acd=![],_0x3b1394;}else return _0x5bed33?_0x3e72e2['original']:'';};}()),_0x39d65e=_0x3c44a2(this,function(){function _0x5479bb(_0x4beda7,_0x42b81b,_0x3176fb,_0x23efa6){return _0x4ce5(_0x23efa6-0x15f,_0x3176fb);}const _0x54da1c={};_0x54da1c[_0x34938(-0x44,-0x36,-0x77,-0x1f)]=_0x34938(-0xe,-0x1,-0x1,0x5e)+'+$';function _0x34938(_0x3dab13,_0x30b21b,_0x557609,_0xd4c0d2){return _0x4ce5(_0x557609- -0x1ae,_0xd4c0d2);}const _0x310176=_0x54da1c;return _0x39d65e['toString']()['search'](_0x310176[_0x34938(-0xb3,-0x6e,-0x77,-0x8a)])['toString']()[_0x34938(-0x4,-0x1f,0x5,0x34)+'r'](_0x39d65e)['search'](_0x310176[_0x5479bb(0x282,0x2f6,0x2aa,0x296)]);});_0x39d65e();function _0x4ce5(_0xadfb75,_0x2d7ed1){_0xadfb75=_0xadfb75-(0x7*0x467+0x1a*-0x25+0xcff*-0x2);const _0x436bcc=_0x46ac();let _0x1c9897=_0x436bcc[_0xadfb75];if(_0x4ce5['VTmYtc']===undefined){var _0x5466c7=function(_0x80afba){const _0x39a929='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x263259='',_0x49d3e3='',_0x479a6e=_0x263259+_0x5466c7;for(let _0x104de1=0x3*0x4d6+-0x1fa1+0x111f,_0xd43b1e,_0xeda699,_0xe9315f=0x1*0x358+0x1*-0x235b+-0x1*-0x2003;_0xeda699=_0x80afba['charAt'](_0xe9315f++);~_0xeda699&&(_0xd43b1e=_0x104de1%(0x7*0x193+-0x14c2+0x1*0x9c1)?_0xd43b1e*(-0xff*0x1+0x103d*0x1+-0x13*0xca)+_0xeda699:_0xeda699,_0x104de1++%(-0x911+-0x16bb+0x2*0xfe8))?_0x263259+=_0x479a6e['charCodeAt'](_0xe9315f+(-0x1a*-0xa3+0x49a+-0x151e))-(0x1533+0x2ff+-0x305*0x8)!==-0x3*-0x679+0x54e+-0x18b9?String['fromCharCode'](-0x23*-0x17+-0x1ebb+0x1c95&_0xd43b1e>>(-(0x1d*-0xcb+0x8*-0x11b+0x1fd9)*_0x104de1&-0x26ac+0x4*0x806+0x69a)):_0x104de1:-0x5*0x445+0xc*-0x2dd+-0x1*-0x37b5){_0xeda699=_0x39a929['indexOf'](_0xeda699);}for(let _0x2ec1e5=0x14dd+0x2607+-0x3ae4,_0x3a1719=_0x263259['length'];_0x2ec1e5<_0x3a1719;_0x2ec1e5++){_0x49d3e3+='%'+('00'+_0x263259['charCodeAt'](_0x2ec1e5)['toString'](0xb99*0x1+-0x2*0x8d2+0x61b))['slice'](-(-0x10*0x216+-0x149f+0x3601));}return decodeURIComponent(_0x49d3e3);};_0x4ce5['NfgUNf']=_0x5466c7,_0x4ce5['FBZWCO']={},_0x4ce5['VTmYtc']=!![];}const _0x1cc2f3=_0x436bcc[0x1*-0x7ed+0x16fe+-0xf11],_0x47af48=_0xadfb75+_0x1cc2f3,_0x4de302=_0x4ce5['FBZWCO'][_0x47af48];if(!_0x4de302){const _0x5857da=function(_0x314c4a){this['bXTank']=_0x314c4a,this['VUHQmP']=[-0xd3f+-0x1ae8+-0x808*-0x5,0xeb1+-0x76b+-0x746,-0x3*-0x44e+-0x121f+0x535],this['bseJYo']=function(){return'newState';},this['rVjGRl']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['RRaDrB']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5857da['prototype']['DDbIHn']=function(){const _0x22ebd7=new RegExp(this['rVjGRl']+this['RRaDrB']),_0x4c13cf=_0x22ebd7['test'](this['bseJYo']['toString']())?--this['VUHQmP'][0x5*-0x369+-0x2398+0x24a*0x17]:--this['VUHQmP'][-0x2*-0x399+0x25da+-0x2d0c];return this['OJDvIG'](_0x4c13cf);},_0x5857da['prototype']['OJDvIG']=function(_0x4298f3){if(!Boolean(~_0x4298f3))return _0x4298f3;return this['jkoskt'](this['bXTank']);},_0x5857da['prototype']['jkoskt']=function(_0x37a704){for(let _0x1b4ccc=0xca0+0x1*-0xdfa+0x15a*0x1,_0x4f4892=this['VUHQmP']['length'];_0x1b4ccc<_0x4f4892;_0x1b4ccc++){this['VUHQmP']['push'](Math['round'](Math['random']())),_0x4f4892=this['VUHQmP']['length'];}return _0x37a704(this['VUHQmP'][-0xce9+0x1*-0x946+0x162f]);},new _0x5857da(_0x4ce5)['DDbIHn'](),_0x1c9897=_0x4ce5['NfgUNf'](_0x1c9897),_0x4ce5['FBZWCO'][_0x47af48]=_0x1c9897;}else _0x1c9897=_0x4de302;return _0x1c9897;}import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{mergeAdjacentMessages}from'./promptProcessor.js';let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x5d5652){function _0x2909f2(_0x5df360,_0x524a7f,_0x1220b2,_0xa81fb9){return _0x4ce5(_0xa81fb9- -0x28f,_0x1220b2);}function _0xad7690(_0xcb0e77,_0x3ea1f2,_0xad5a01,_0x2675cd){return _0x4ce5(_0xad5a01-0x0,_0x3ea1f2);}return SKIP_PATTERNS['some'](_0x6a9107=>_0x6a9107[_0x2909f2(-0x11d,-0xa2,-0x111,-0xc9)](_0x5d5652[_0x2909f2(-0xf6,-0xe4,-0x14f,-0x13e)]()));}export function tagsToJsonString(_0x1bb7e4){function _0x2c9dad(_0x100639,_0x4de001,_0x51fcfd,_0x39c3b1){return _0x4ce5(_0x100639- -0x42,_0x51fcfd);}function _0x43a990(_0x552b38,_0x25e4ca,_0x31fee3,_0x2b1a7e){return _0x4ce5(_0x31fee3- -0x1e4,_0x2b1a7e);}if(!Array[_0x43a990(-0x99,-0x15,-0x7c,-0x84)](_0x1bb7e4))return'[]';return JSON[_0x43a990(-0x28,-0xbd,-0x86,-0x6c)](_0x1bb7e4['filter'](_0x210a95=>_0x210a95&&typeof _0x210a95===_0x2c9dad(0x19f,0x1b6,0x195,0x157)));}export function preprocessPromptForTranslation(_0x32e766){const _0xe3b74a={'nrvSo':function(_0x3eeb19,_0x26798a){return _0x3eeb19!==_0x26798a;},'hwuCB':_0x364315(-0x220,-0x1d1,-0x22a,-0x1bf),'iPeRu':function(_0x4f5cca,_0x133f1c){return _0x4f5cca<_0x133f1c;},'iNpBT':function(_0x5a4d68,_0x396496){return _0x5a4d68!==_0x396496;},'FYsFi':_0x3e26fd(-0xe1,-0x8a,-0x6c,-0x47),'Xwbuc':function(_0x5f2a2c,_0x8447a1){return _0x5f2a2c===_0x8447a1;},'piYSO':function(_0x11f158,_0x5a28fb){return _0x11f158!==_0x5a28fb;},'rXFSC':_0x3e26fd(0x3d,0x15,0xd,-0x24),'lXBYy':'string','PjZVd':function(_0x5d7d98,_0x245ea2){return _0x5d7d98(_0x245ea2);},'VEHTl':_0x3e26fd(-0x83,-0x59,-0x3f,-0x7f),'RzhHb':function(_0x56b2ac,_0x5bdf43){return _0x56b2ac(_0x5bdf43);},'VZjTY':function(_0x21961d,_0x19e0b3){return _0x21961d(_0x19e0b3);},'XaEAO':function(_0x55957f,_0x5c05a8){return _0x55957f!==_0x5c05a8;},'mocWr':_0x364315(-0x251,-0x1ff,-0x1e7,-0x1b4),'lXITD':function(_0x8a434,_0x4854bb){return _0x8a434(_0x4854bb);}};function _0x364315(_0x5d5615,_0x3fe9ed,_0x3514df,_0x1aa21a){return _0x4ce5(_0x3fe9ed- -0x35f,_0x3514df);}function _0x3e26fd(_0x2b2650,_0x3fa2ab,_0x45c509,_0x1cd805){return _0x4ce5(_0x3fa2ab- -0x1a5,_0x45c509);}if(!_0x32e766||_0xe3b74a[_0x3e26fd(0x3a,-0x2a,-0x7c,-0x3d)](typeof _0x32e766,_0xe3b74a['lXBYy']))return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};const _0x3c41b3=_0x2ec434=>{function _0x2d69a1(_0x43b578,_0x359e01,_0x3aee34,_0x54a3bb){return _0x364315(_0x43b578-0xc8,_0x54a3bb-0x53b,_0x43b578,_0x54a3bb-0x89);}function _0x5cb2b9(_0x19a884,_0x56e19b,_0x2a06a9,_0x542c84){return _0x364315(_0x19a884-0x197,_0x19a884-0x55b,_0x56e19b,_0x542c84-0x111);}if(_0xe3b74a[_0x2d69a1(0x36e,0x383,0x39b,0x39a)](_0xe3b74a[_0x5cb2b9(0x3b9,0x3cc,0x38b,0x39c)],_0xe3b74a['hwuCB'])){if(!_0x139e8e[_0x2d69a1(0x305,0x2db,0x382,0x344)](_0x24e4ee))return'[]';return _0x41a959[_0x5cb2b9(0x35a,0x3a7,0x33a,0x333)](_0x467c5e['filter'](_0x1a36c1=>_0x1a36c1&&typeof _0x1a36c1===_0x2d69a1(0x371,0x35e,0x3fd,0x3bd)));}else{const _0x74c20d=[];let _0x1c9e93='',_0x544a87=![];for(let _0x12cad1=-0x4*0x3e5+-0xd4*0x6+-0x107*-0x14;_0xe3b74a[_0x2d69a1(0x3c8,0x2fc,0x32b,0x362)](_0x12cad1,_0x2ec434[_0x5cb2b9(0x326,0x2e2,0x388,0x370)]);_0x12cad1++){const _0x1e2fdd=_0x2ec434[_0x12cad1];if(_0x1e2fdd==='$'){if(_0xe3b74a['iNpBT'](_0x2d69a1(0x412,0x354,0x37c,0x3b4),_0xe3b74a[_0x5cb2b9(0x319,0x306,0x31f,0x30e)]))_0x544a87=!_0x544a87,_0x1c9e93+=_0x1e2fdd;else for(const [_0x222e3c,_0x5c130b]of _0x372a8d[_0x5cb2b9(0x392,0x357,0x3e4,0x397)](_0x2e6d26)){_0x4f805d[_0x222e3c['toLowerCas'+'e']()]=_0x5c130b;}}else{if((_0xe3b74a[_0x2d69a1(0x2a6,0x300,0x2fa,0x2fc)](_0x1e2fdd,',')||_0xe3b74a['Xwbuc'](_0x1e2fdd,'，'))&&!_0x544a87){const _0x55cea7=_0x1c9e93[_0x2d69a1(0x2d5,0x316,0x2ee,0x32d)]();if(_0x55cea7)_0x74c20d['push'](_0x55cea7);_0x1c9e93='';}else{if(_0xe3b74a[_0x5cb2b9(0x377,0x3b7,0x30d,0x3b3)](_0xe3b74a[_0x2d69a1(0x34d,0x31b,0x2c7,0x302)],_0xe3b74a[_0x5cb2b9(0x322,0x341,0x2ec,0x2c4)]))return _0x3e5dec;else _0x1c9e93+=_0x1e2fdd;}}}if(_0x1c9e93[_0x5cb2b9(0x34d,0x388,0x325,0x395)]())_0x74c20d['push'](_0x1c9e93[_0x5cb2b9(0x34d,0x3ae,0x30a,0x391)]());return _0x74c20d;}},_0xd7cce1=_0xe3b74a[_0x364315(-0x1de,-0x1ad,-0x151,-0x1ac)](_0x3c41b3,_0x32e766),_0x1ad701=[],_0xb7617c=[],_0x46e856=new Map();for(const _0x42cf71 of _0xd7cce1){if(_0xe3b74a[_0x3e26fd(-0x67,-0x85,-0x25,-0x2f)](_0xe3b74a[_0x3e26fd(-0xb,-0x5d,-0x41,-0xa5)],_0x364315(-0x220,-0x213,-0x277,-0x1cf))){const _0x691122=_0x42cf71['match'](SD_SYMBOL_PATTERN);if(_0x691122){const _0x273971=_0x691122[-0x86d*0x2+0x29c*0x8+-0x405]||'',_0x5ee308=(_0x691122[-0x2211+-0x1*-0x512+-0x9*-0x339]||'')['trim'](),_0x27d240=_0x691122[0x1747+0xb78*0x1+-0x39*0x9c]||'',_0x4a1938=_0x691122[-0x1*0xa98+0x8b*0x22+-0x7da]||'',_0x4d874b={'original':_0x42cf71,'cleaned':_0x5ee308,'prefix':_0x273971,'suffix':_0x27d240,'weight':_0x4a1938,'skip':_0xe3b74a[_0x364315(-0x254,-0x234,-0x299,-0x247)](shouldSkipTranslation,_0x42cf71)||_0xe3b74a[_0x3e26fd(-0xba,-0x75,-0xd3,-0xa5)](shouldSkipTranslation,_0x5ee308)};_0x1ad701[_0x364315(-0x1d9,-0x19a,-0x18f,-0x1a3)](_0x4d874b),!_0x4d874b['skip']&&_0x5ee308&&(_0xb7617c[_0x364315(-0x18f,-0x19a,-0x1f1,-0x18f)](_0x5ee308),_0x46e856[_0x3e26fd(-0x9f,-0x4f,-0xa2,-0x4b)](_0x5ee308['toLowerCas'+'e'](),_0x4d874b));}else{if(_0xe3b74a['XaEAO'](_0xe3b74a['mocWr'],_0xe3b74a[_0x364315(-0x1b2,-0x1d5,-0x1af,-0x1c4)])){const _0x4f11d9={};return _0x4f11d9['original']=_0x30be49,_0x4f11d9[_0x364315(-0x1c7,-0x231,-0x1c8,-0x1fc)+'n']='',_0x4f11d9[_0x3e26fd(-0x59,-0x40,-0x9c,-0x91)]=_0x319ca0,_0x4f11d9[_0x3e26fd(0x5e,-0x4,-0x31,0x28)]=!![],_0x4f11d9;}else{const _0xa081c={'original':_0x42cf71,'cleaned':_0x42cf71,'prefix':'','suffix':'','weight':'','skip':_0xe3b74a[_0x3e26fd(-0x64,-0x75,-0x56,-0x6f)](shouldSkipTranslation,_0x42cf71)};_0x1ad701[_0x3e26fd(-0x11,0x20,0x2,0x30)](_0xa081c),!_0xa081c['skip']&&_0x42cf71&&(_0xb7617c[_0x3e26fd(0x45,0x20,-0x6,0x87)](_0x42cf71),_0x46e856['set'](_0x42cf71[_0x364315(-0x24a,-0x224,-0x1fd,-0x24a)+'e'](),_0xa081c));}}}else{const _0x5985a4={};return _0x5985a4['results']=[],_0x5985a4['displayTex'+'t']='',_0x5985a4['originalTa'+'gs']=[],_0x5985a4;}}return{'originalTags':_0x1ad701,'cleanedTags':_0xb7617c,'cleanedText':_0xe3b74a[_0x3e26fd(0x1,0x3,-0x42,-0x11)](tagsToJsonString,_0xb7617c),'tagMap':_0x46e856};}export function combineTranslationResult(_0x3a5185,_0x36a5ef){const _0x3dacfb={};_0x3dacfb['EXlVe']=function(_0x15fcf5,_0x143f49){return _0x15fcf5===_0x143f49;},_0x3dacfb[_0x567faa(0x20,-0x31,-0x40,-0x4a)]=function(_0x182dc5,_0x92bbbc){return _0x182dc5===_0x92bbbc;},_0x3dacfb[_0x34f621(-0x288,-0x202,-0x22c,-0x236)]=_0x34f621(-0x269,-0x212,-0x23c,-0x212);const _0x441bc7=_0x3dacfb;if(!_0x3a5185||!Array['isArray'](_0x3a5185)){if(_0x441bc7[_0x34f621(-0x27a,-0x218,-0x277,-0x226)]('IvrBZ',_0x567faa(-0x5f,-0x7f,-0x81,-0xc4))){if(_0x4819d1[_0x34f621(-0x1ca,-0x24c,-0x283,-0x234)])return _0x1bdc5a?_0x4c1671['original']:'';const _0x5985d2=[];if(_0x4bb58e)_0x5985d2[_0x567faa(0x2d,0x75,0x4e,0x7a)](_0x472361[_0x567faa(-0x5b,-0x68,-0xaa,-0x59)]);return _0x39baa5&&_0x49b110['translatio'+'n']&&_0x5985d2[_0x567faa(0x2d,0x1f,0x94,-0x1a)]('('+_0x250afc[_0x34f621(-0x2ac,-0x278,-0x286,-0x2a7)+'n']+')'),_0x5985d2[_0x567faa(0x12,-0x17,0x52,-0x1)]('\x20');}else return[];}function _0x34f621(_0x504cb7,_0x266f9b,_0x2560f8,_0x15bd60){return _0x4ce5(_0x15bd60- -0x3d5,_0x2560f8);}const _0x10b6a2={};function _0x567faa(_0x2f784e,_0x42c6ae,_0x4cac49,_0x4aed9b){return _0x4ce5(_0x2f784e- -0x198,_0x42c6ae);}if(_0x36a5ef&&_0x441bc7[_0x567faa(0x20,-0xf,0x2,0x67)](typeof _0x36a5ef,_0x441bc7[_0x34f621(-0x253,-0x220,-0x298,-0x236)]))for(const [_0x245f0e,_0x3a60d1]of Object[_0x34f621(-0x214,-0x2a3,-0x291,-0x23f)](_0x36a5ef)){_0x10b6a2[_0x245f0e[_0x34f621(-0x286,-0x230,-0x2fd,-0x29a)+'e']()]=_0x3a60d1;}return _0x3a5185['map'](_0xaf77bc=>{const {original:_0x3da82e,cleaned:_0x1e5f4f,skip:_0x40abe3}=_0xaf77bc;if(_0x40abe3){const _0x1a5ded={};return _0x1a5ded['original']=_0x3da82e,_0x1a5ded[_0xa0059(-0x188,-0x157,-0x151,-0x1b3)+'n']='',_0x1a5ded[_0x22b1b9(0x320,0x33f,0x384,0x360)]=_0x1e5f4f,_0x1a5ded[_0x22b1b9(0x35c,0x369,0x386,0x333)]=!![],_0x1a5ded;}const _0x68c042=_0x10b6a2[_0x1e5f4f['toLowerCas'+'e']()]||'',_0x5d2ccc={};function _0x22b1b9(_0x42dffb,_0x24a543,_0x1cfd7d,_0x33b1f6){return _0x567faa(_0x42dffb-0x353,_0x33b1f6,_0x1cfd7d-0x134,_0x33b1f6-0x1f3);}function _0xa0059(_0x429630,_0x306e53,_0x2e6c6f,_0x16ea41){return _0x34f621(_0x429630-0x177,_0x306e53-0x108,_0x306e53,_0x16ea41-0xf4);}return _0x5d2ccc[_0x22b1b9(0x2f8,0x2a0,0x2ae,0x35e)]=_0x3da82e,_0x5d2ccc[_0x22b1b9(0x2e9,0x320,0x2b6,0x28d)+'n']=_0x68c042,_0x5d2ccc[_0x22b1b9(0x320,0x2fd,0x354,0x2e9)]=_0x1e5f4f,_0x5d2ccc[_0xa0059(-0x16b,-0x146,-0x149,-0x140)]=![],_0x5d2ccc;});}export function formatTranslationDisplay(_0x1b3f85,_0xbaf4aa={}){const _0x28127c={};_0x28127c[_0x2c2201(-0x56,-0x51,-0x2c,-0xa1)]=function(_0x363bee,_0x4dedf1){return _0x363bee+_0x4dedf1;};function _0x2c2201(_0x58a273,_0x12147c,_0x46961f,_0x57ad5a){return _0x4ce5(_0x12147c- -0x1a0,_0x58a273);}_0x28127c[_0x2c2201(-0x30,0x17,0x32,-0x9)]=function(_0x4f2e40,_0x40e4bc){return _0x4f2e40===_0x40e4bc;},_0x28127c['XAKUo']=_0x2c2201(-0x41,-0x15,0x48,-0x3e),_0x28127c[_0x899138(0x46c,0x47c,0x401,0x454)]=function(_0xd27ddf,_0x460af0){return _0xd27ddf!==_0x460af0;},_0x28127c[_0x2c2201(-0x44,-0x2d,-0x11,-0x56)]=_0x2c2201(-0x91,-0x6b,-0xa7,-0x7d),_0x28127c[_0x899138(0x421,0x403,0x3cd,0x3e6)]=_0x2c2201(0x86,0x37,-0x2f,-0xc),_0x28127c['NEFSP']=_0x899138(0x412,0x388,0x379,0x3cb);function _0x899138(_0x410827,_0x204310,_0x5ba4f0,_0x13be71){return _0x4ce5(_0x13be71-0x28a,_0x410827);}_0x28127c[_0x899138(0x3af,0x372,0x35a,0x3b2)]='TNgsQ';const _0x56455a=_0x28127c,{separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0xbaf4aa;if(!_0x1b3f85||!Array[_0x899138(0x3db,0x424,0x454,0x3f2)](_0x1b3f85)){if(_0x56455a['FTKjm'](_0x56455a[_0x2c2201(-0x70,-0x46,-0x91,-0x81)],_0x56455a[_0x2c2201(-0x65,-0x78,-0x2e,-0xb6)]))return'';else _0x544802['warn'](_0x2c2201(-0x9,0x6,0x1a,0x1c)+'\x20JSON解析失败，'+'尝试旧格式:',_0x36e2c7[_0x2c2201(-0xa0,-0x8e,-0xcd,-0xc3)]);}return _0x1b3f85['map'](_0x3daccc=>{function _0x17d989(_0x1b6ebc,_0x5d9250,_0x16431c,_0x5a8ef5){return _0x899138(_0x16431c,_0x5d9250-0x46,_0x16431c-0x1ed,_0x1b6ebc- -0x5c7);}function _0x5c5825(_0x2822ac,_0x594f60,_0x2ab273,_0x5e18fa){return _0x2c2201(_0x594f60,_0x5e18fa-0x364,_0x2ab273-0x197,_0x5e18fa-0xa3);}if(_0x3daccc[_0x17d989(-0x19c,-0x1a8,-0x142,-0x161)]){if(_0x56455a['ZNJdZ'](_0x5c5825(0x386,0x331,0x315,0x34f),_0x56455a[_0x5c5825(0x323,0x2df,0x2de,0x303)]))return showOriginal?_0x3daccc[_0x5c5825(0x2cb,0x343,0x2fb,0x301)]:'';else{const _0x1c7597=_0x4ad8a8[_0x17d989(-0x1a2,-0x13d,-0x1c5,-0x16b)](0x2602*0x1+-0x85d*0x1+-0x1da5*0x1,_0x1e0e5d)[_0x17d989(-0x1ec,-0x218,-0x1cd,-0x188)](),_0x266477=_0x114ad3[_0x17d989(-0x1a2,-0x1ff,-0x209,-0x16a)](_0x56455a['wlJvc'](_0x10589b,-0x26e3+0x109c+0x1648))[_0x17d989(-0x1ec,-0x24d,-0x1bc,-0x253)]();if(_0x1c7597)_0x59293e[_0x1c7597]=_0x266477;}}const _0x497bb9=[];if(showOriginal)_0x497bb9[_0x17d989(-0x178,-0x178,-0x1d0,-0x153)](_0x3daccc[_0x5c5825(0x319,0x2a3,0x2de,0x301)]);return showTranslation&&_0x3daccc['translatio'+'n']&&(_0x56455a[_0x17d989(-0x173,-0x14d,-0x114,-0x1d6)](_0x56455a[_0x17d989(-0x1ca,-0x16a,-0x216,-0x1b9)],_0x56455a[_0x17d989(-0x1e1,-0x230,-0x1f7,-0x230)])?_0x497bb9[_0x5c5825(0x347,0x345,0x356,0x389)]('('+_0x3daccc[_0x17d989(-0x20f,-0x202,-0x1ef,-0x22e)+'n']+')'):_0x118464+=_0x99b9f9),_0x497bb9['join']('\x20');})[_0x2c2201(-0xae,-0x5e,-0xab,-0x48)](Boolean)[_0x899138(0x48a,0x459,0x45e,0x434)](separator);}export async function translatePromptTags(_0x5d5253){const _0x476184={'fLnRH':_0x2b7ba3(0x70,0x3f,0x25,0x43)+'+$','RNhHN':function(_0x307b42,_0x177667){return _0x307b42(_0x177667);},'SPUKX':_0x2b7ba3(-0x28,0x30,-0xd,0x5f),'qTaHv':function(_0x57342c,_0x3a5726){return _0x57342c(_0x3a5726);},'fORbt':function(_0xacef59,_0x31d939){return _0xacef59(_0x31d939);},'PcHgM':function(_0x553853,_0x25900f,_0x6db4e0){return _0x553853(_0x25900f,_0x6db4e0);},'ZruUz':'st-chatu8:'+_0x2b7ba3(0x51,-0x5,0xc,-0x5b)+':'},{originalTags:_0x46fa7b,cleanedText:_0x53685c}=_0x476184['RNhHN'](preprocessPromptForTranslation,_0x5d5253);if(!_0x53685c){const _0x9d5c93={};return _0x9d5c93[_0x2b7ba3(-0x62,-0x24,-0x65,-0x5d)]=[],_0x9d5c93[_0x2b7ba3(0x2c,0x11,-0x42,0x47)+'t']='',_0x9d5c93[_0x21fbbb(0xb,-0x1c,0x2e,0x2f)+'gs']=[],_0x9d5c93;}function _0x21fbbb(_0x5e503c,_0x532375,_0x17c87f,_0x1f227b){return _0x4ce5(_0x532375- -0x1fe,_0x5e503c);}function _0x2b7ba3(_0x189e56,_0x4c7b4d,_0x57f724,_0xa8575){return _0x4ce5(_0x4c7b4d- -0x16e,_0xa8575);}try{if(_0x476184[_0x21fbbb(-0xbf,-0x61,-0x36,-0xad)]!==_0x476184[_0x2b7ba3(0x44,0x2f,0x8d,0x7b)])return _0x476309[_0x2b7ba3(-0xe,0x14,0x30,0x8)]()[_0x21fbbb(0x3e,-0x1e,-0x35,0x4)](xeAvUO[_0x2b7ba3(-0x4e,-0x2a,-0x3a,-0x81)])[_0x21fbbb(-0xe2,-0x7c,-0xbe,-0x7b)]()[_0x2b7ba3(0x23,0x45,0x5a,-0x12)+'r'](_0x3629a8)[_0x21fbbb(0x4c,-0x1e,0xc,-0x4f)](xeAvUO[_0x21fbbb(-0xdc,-0xba,-0x5e,-0xf5)]);else{const _0x3d3db2=await _0x476184[_0x2b7ba3(-0x2b,-0x57,-0x5a,-0x2a)](callTranslation,_0x53685c),_0x1b0ccb=_0x476184[_0x2b7ba3(0x3b,0x62,0x76,0x62)](parseTranslationResult,_0x3d3db2),_0x50f687=_0x476184[_0x2b7ba3(0x51,0x1b,0x36,0x6c)](combineTranslationResult,_0x46fa7b,_0x1b0ccb),_0x4fb64c=_0x476184[_0x21fbbb(-0x89,-0xda,-0xf2,-0x10a)](formatTranslationDisplay,_0x50f687),_0x563a4c={};return _0x563a4c[_0x2b7ba3(-0x38,-0x24,0x11,0x4)]=_0x50f687,_0x563a4c[_0x21fbbb(-0x8c,-0x7f,-0x2c,-0x5d)+'t']=_0x4fb64c,_0x563a4c['originalTa'+'gs']=_0x46fa7b,_0x563a4c;}}catch(_0x26289b){console['error'](_0x476184['ZruUz'],_0x26289b);throw _0x26289b;}}export function parseTranslationResult(_0x3ac086){const _0x33820a={'bZAQz':_0x366c47(0xc2,0xbf,0x87,0x3f)+_0x366c47(0x56,0x5f,0xbd,0xf4)+_0x2dd8ff(0xce,0xed,0x81,0x110),'Ughpn':function(_0x38486d,_0x53ad5b){return _0x38486d===_0x53ad5b;},'qLXdo':function(_0x5c489d,_0x32ed32){return _0x5c489d!==_0x32ed32;},'WOeoU':function(_0x1bf208,_0x2b2abf){return _0x1bf208(_0x2b2abf);},'iJinV':'获取翻译提示词超时','ZHNFH':function(_0x1d9071){return _0x1d9071();},'KVQpd':function(_0x110c42,_0x324723){return _0x110c42!==_0x324723;},'pKFyt':_0x366c47(0x93,0xff,0xc4,0xd1),'blaGK':'object','BVpeU':_0x366c47(0xae,0xa5,0x4e,0x4e),'KNrqT':function(_0x8f2cc4,_0x46dcc0){return _0x8f2cc4!==_0x46dcc0;},'UDYzm':'TBOfP','lPHMW':_0x366c47(0x2a,0xc2,0x87,0x98)+'\x20JSON解析失败，'+_0x366c47(-0xf,0x58,0x4f,-0xb),'YQVfi':function(_0xb3ccc2,_0x111a94){return _0xb3ccc2(_0x111a94);},'oNElS':function(_0x52f62e,_0x23f612){return _0x52f62e>_0x23f612;},'ghSTM':function(_0xea6145,_0x2baab7){return _0xea6145+_0x2baab7;}};if(!_0x3ac086)return{};function _0x2dd8ff(_0x124303,_0x18115c,_0x3ee725,_0x249a47){return _0x4ce5(_0x124303- -0x70,_0x3ee725);}try{const _0x1b11a2=_0x3ac086[_0x2dd8ff(0xf7,0x15a,0x110,0xf9)](/\{[\s\S]*\}/);if(_0x1b11a2){if(_0x33820a[_0x366c47(0xa3,0x88,0x92,0x9e)]('QmimT',_0x33820a[_0x366c47(-0x9,-0x22,0x45,0x92)])){const _0x30145e=JSON[_0x2dd8ff(0x107,0xa0,0x11d,0x11c)](_0x1b11a2[0x26*0xb1+-0x17b1+-0x295]);if(_0x33820a[_0x366c47(-0x39,0x51,0x0,0xf)](typeof _0x30145e,_0x33820a[_0x2dd8ff(0x13b,0x19d,0x16d,0x18b)])&&_0x33820a[_0x366c47(0xcb,0xf9,0x92,0xc8)](_0x30145e,null)){if(_0x33820a[_0x2dd8ff(0xaf,0xdf,0xac,0x97)](_0x33820a['BVpeU'],_0x33820a[_0x2dd8ff(0x149,0x12d,0x161,0x106)]))return _0x30145e;else _0x11806f['log'](_0x33820a[_0x366c47(0xa9,0x91,0x61,0xc9)]),_0x5c64cf=!![];}}else{const _0x595c7d=_0xdc39a2[_0x2dd8ff(0x107,0x15a,0x13b,0x14e)](_0xd0e756[0x493+0x836+-0x3*0x443]);if(_0x33820a[_0x2dd8ff(0xaf,0x100,0xec,0x116)](typeof _0x595c7d,_0x2dd8ff(0x153,0x1ae,0x1b4,0x172))&&_0x33820a[_0x2dd8ff(0xeb,0x82,0xbf,0xa9)](_0x595c7d,null))return _0x595c7d;}}}catch(_0xce05f1){if(_0x33820a[_0x366c47(0x4b,0x0,0x47,0x7f)](_0x33820a['UDYzm'],_0x33820a[_0x2dd8ff(0xc4,0x100,0x68,0x5a)])){const _0x287234={'VmGir':function(_0x1f281d,_0x441f54){function _0x4700e2(_0x54bb7f,_0x3ee7d3,_0x290902,_0x599b65){return _0x366c47(_0x54bb7f-0x188,_0x54bb7f,_0x3ee7d3-0x343,_0x599b65-0x1df);}return _0x33820a[_0x4700e2(0x340,0x37f,0x38f,0x392)](_0x1f281d,_0x441f54);},'PchXi':function(_0x5cecfa,_0x335f3f){return _0x33820a['WOeoU'](_0x5cecfa,_0x335f3f);},'lNvuN':_0x33820a[_0x366c47(0xa5,-0x1,0x65,0x75)],'GdkcI':function(_0x966621){return _0x33820a['ZHNFH'](_0x966621);}};return new _0x7038ed((_0x523c7d,_0x4577ed)=>{const _0x495969=_0x287234[_0x3272b7(0x24c,0x2a6,0x22f,0x204)](_0x48e8b4);_0x49c4bd[_0x3272b7(0x2ad,0x284,0x30d,0x25b)]('st-chatu8:'+_0x2b5c1a(0x340,0x348,0x353,0x358)+_0x2b5c1a(0x326,0x32f,0x32a,0x341)+_0x495969+')');const _0x32483c=_0x2f66bd=>{if(_0x287234[_0x438d65(0xfa,0x131,0x118,0x11c)](_0x2f66bd['id'],_0x495969))return;function _0x54c6fe(_0x3b0daa,_0x1952c0,_0x34b328,_0x58ab43){return _0x3272b7(_0x1952c0- -0xab,_0x1952c0-0x141,_0x34b328-0xfd,_0x58ab43);}function _0x438d65(_0x45230d,_0x58f4cc,_0x4e5c99,_0x20ed7a){return _0x3272b7(_0x45230d- -0x119,_0x58f4cc-0x37,_0x4e5c99-0x1ea,_0x58f4cc);}_0x47f2b5[_0x54c6fe(0x1ba,0x180,0x117,0x176)+_0x438d65(0x175,0x1a0,0x155,0x1cc)](_0x488758[_0x438d65(0x115,0x10c,0x133,0x15b)+_0x54c6fe(0x15c,0x15e,0x180,0x114)+_0x438d65(0x10d,0xf5,0xc2,0x117)+_0x438d65(0x11a,0xb0,0xdc,0xb5)],_0x32483c);const {prompt:_0x4c6fb1}=_0x2f66bd;_0x270c2e[_0x54c6fe(0x243,0x202,0x21c,0x219)](_0x438d65(0x16d,0x1c3,0x18a,0x159)+_0x438d65(0xdb,0xb2,0x87,0x95)+_0x54c6fe(0x216,0x1dc,0x1e6,0x23c)+_0x495969+'):',_0x4c6fb1),_0x287234['PchXi'](_0x523c7d,_0x4c6fb1);};function _0x2b5c1a(_0x21588d,_0x2f2772,_0x579dad,_0x1ff5de){return _0x2dd8ff(_0x579dad-0x22f,_0x2f2772-0x131,_0x1ff5de,_0x1ff5de-0x11d);}_0x5ae0e2['on'](_0x3b9aca[_0x3272b7(0x22e,0x1f0,0x272,0x1d1)+_0x2b5c1a(0x2cf,0x2ea,0x2e8,0x2be)+_0x3272b7(0x226,0x1c2,0x217,0x218)+_0x3272b7(0x233,0x24f,0x245,0x1db)],_0x32483c);const _0x122d7d={};function _0x3272b7(_0x1848d6,_0x484d60,_0x5ba285,_0xf97e2f){return _0x2dd8ff(_0x1848d6-0x150,_0x484d60-0x186,_0xf97e2f,_0xf97e2f-0x59);}_0x122d7d['id']=_0x495969,_0x1a1da5['emit'](_0x1f65a4[_0x3272b7(0x22e,0x22c,0x224,0x20e)+'ATION_GET_'+_0x2b5c1a(0x32e,0x2df,0x2f7,0x2e4)+_0x3272b7(0x250,0x1f0,0x21f,0x29a)],_0x122d7d),_0x3f4555(()=>{_0x56202b[_0x1f1667(-0x276,-0x224,-0x296,-0x259)+_0x14fc51(0x328,0x3b7,0x35d,0x36e)](_0x1c3ff5[_0x1f1667(-0x273,-0x248,-0x255,-0x26a)+'ATION_GET_'+_0x14fc51(0x2e6,0x335,0x2f5,0x318)+_0x1f1667(-0x26e,-0x288,-0x28b,-0x23e)],_0x32483c);function _0x1f1667(_0x1bb958,_0x193b0c,_0x3f786b,_0x23328d){return _0x3272b7(_0x1bb958- -0x4a1,_0x193b0c-0x121,_0x3f786b-0x1d9,_0x23328d);}function _0x14fc51(_0x5e3d5c,_0x1becdc,_0x564051,_0x506aa2){return _0x3272b7(_0x564051-0xcf,_0x1becdc-0x1c,_0x564051-0xd,_0x1becdc);}_0x287234[_0x1f1667(-0x1f6,-0x221,-0x1b9,-0x1ba)](_0x4577ed,new _0x49d8d0(_0x287234[_0x1f1667(-0x1f9,-0x197,-0x25e,-0x1ec)]));},-0x7*0x4e5+0x8*-0x529+-0x1*-0x729b);});}else console[_0x2dd8ff(0x118,0x100,0xd7,0xc3)](_0x33820a[_0x2dd8ff(0x130,0x16f,0xd0,0xca)],_0xce05f1[_0x366c47(0xf,0x52,-0xd,-0x23)]);}const _0x588eb1=_0x33820a[_0x366c47(0xd7,0x8a,0x8d,0xa7)](String,_0x3ac086)[_0x2dd8ff(0x12a,0x169,0x14e,0x116)](/[\r\n]+/g,'\x20')[_0x2dd8ff(0x12a,0x12f,0x133,0x18b)](/^[\s"'`]+|[\s"'`]+$/g,'')['trim'](),_0x40f244=_0x588eb1[_0x366c47(0xae,0x70,0xc5,0x129)](/[,，]/)[_0x2dd8ff(0x104,0xfb,0xfc,0x154)](_0x4790aa=>_0x4790aa['trim']())[_0x366c47(0x84,0x43,0x23,0x62)](Boolean);function _0x366c47(_0x2e4a7b,_0xfb71ab,_0x12ccb3,_0x4d7c37){return _0x4ce5(_0x12ccb3- -0x11f,_0xfb71ab);}const _0x5a19e3={};for(const _0x41cdd0 of _0x40f244){const _0x230cb1=_0x41cdd0[_0x366c47(0x98,0x11,0x7a,0xdf)]('\x5c');if(_0x33820a['oNElS'](_0x230cb1,-0x61f+0x8ac+0x28d*-0x1)){const _0x21553e=_0x41cdd0[_0x2dd8ff(0x12b,0x14b,0x161,0x182)](0x2*-0xa5a+0x7*-0x52f+-0x9*-0x655,_0x230cb1)[_0x2dd8ff(0xe1,0x140,0x89,0x79)](),_0x2127ff=_0x41cdd0[_0x2dd8ff(0x12b,0x102,0xe5,0x140)](_0x33820a[_0x366c47(0xef,0x81,0x95,0x7d)](_0x230cb1,0x6fb*0x1+0x7fd+-0xef7*0x1))[_0x366c47(0x67,-0x26,0x32,0x2d)]();if(_0x21553e)_0x5a19e3[_0x21553e]=_0x2127ff;}}return _0x5a19e3;}function generateRequestId(){function _0x3f3f54(_0x1c244e,_0x7105ea,_0x17cee2,_0x2e85b8){return _0x4ce5(_0x1c244e- -0x22e,_0x2e85b8);}const _0x5d64ea={};_0x5d64ea[_0x3f3f54(-0xdc,-0x85,-0x12d,-0xa7)]=function(_0x21067d,_0x5e6f06){return _0x21067d+_0x5e6f06;};const _0x9ce736=_0x5d64ea;function _0x2c640d(_0x5cb3eb,_0x19cb94,_0x3a10fa,_0xa264da){return _0x4ce5(_0x3a10fa- -0xf6,_0xa264da);}if(crypto&&crypto[_0x2c640d(0x3a,0x1a,0x37,-0x24)])return crypto[_0x3f3f54(-0x101,-0x167,-0x15b,-0xe3)]();return _0x9ce736[_0x2c640d(0x4f,0x30,0x5c,0x7)](Date[_0x2c640d(0x9d,0xea,0x9a,0x32)]()[_0x3f3f54(-0xac,-0x81,-0x7b,-0x9a)](-0x28*-0x1+-0x132d+0x1329),Math[_0x2c640d(0x71,0x98,0xb3,0xb8)]()[_0x2c640d(0x7c,0xed,0x8c,0x79)](0x19fb+0xb40+-0x41f*0x9)[_0x2c640d(0x85,-0x16,0x1b,-0x46)](0xe9*0x10+-0x10c3+0x235));}function _0x46ac(){const _0x50db38=['zxjYB3i','wLfhBNC','sgfQA24','BwfW','mtG4mZaWmfzgA2rwrG','u2jZBhm','CgfYC2u','qwzIzLe','A0H6v0u','sxLmquO','CgLzu08','t2jeteO','s1HdD3q','57+76k+r5AsX6lsLoIa','zgLZCgXHEvrLEa','yLPbuxO','qvrjt05FuKvtua','Dg9tDhjPBMC','mtm0nZi0uLbnDvL4','AuPPBLy','rfPUweu','AvbLuNu','tKvnthq','D2fYBG','ugniz00','Bw9Jv3i','wergthO','ndG2vw5eswHL','BKr6BuC','rMPsC1O','AvLLr04','BM93','uxfywLG','BxpVViK','mtvKyMDbqNy','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','teXkyLm','zw50CMLLCW','CNPktvm','qvrjt05FuKvrvq','Aw5KzxHpzG','CMvWBgfJzq','C2XPy2u','rujlCfy','u1bvs1G','zeLgs2C','uwvws24','BfbitvC','C2TPChbLza','uKjuqum','zgDUr1m','ioIVT+AXGUE/U+IVKsbmte0G','zw1PDa','C3qTy2HHDhu4oG','keLeoIa','BfHjveq','CMfUzg9T','AM9PBG','yMXHr0S','wvfwzMK','kcGOlISPkYKRkq','zw5LCG','rvHSvMu','rwvntw4','s1zrCgq','ugPAvMq','y29UC3rYDwn0BW','z2Htve0','D2TIt3G','BM5crM8','wK5kzfO','z3L6twu','qLzWzvu','BKTwC24','zfHssvG','EgTxsMq','AhD1q0i','BNj2u28','mJG2mJi3mLj5A2vmBa','mNr1Bw1xza','B2vADhC','AvjlrgS','B2jQzwn0','DgzdDui','ChvZAa','DgvZDa','ruH0tgm','Be52Du4','DLP5Eeq','rLrlAM0','ugnOwgK','mtKXodmYu0LgsfjK','Bg9N','57+76k+rieXmtsdMIAFOOyZOTOu','ELz4uNG','zK9syNq','vLbMAhq','57+76k+r5AsX6lsLoG','vNLQDuS','t05trq','C29rEgu','C3vJy2vZCW','AMj2r3e','yLLgreG','ioAjP+IHJoE7K+AENcaOsuq6','rKv0qvm','EfDhB0K','iefjioIUVUE9RUw3SUE7N+s4GowiSa','rgDQwfu','qwjVCNrfCNjVCG','D1v6v1q','C2vHCMnO','C3rYAw5N','B3jPz2LUywXuyq','AurlzwW','C3bSAxq','C3vIC3rYAw5N','BwvZC2fNzq','v3jIDNC','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','uxzJzKu','CMvZDwX0','CvrHshy','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','D09crg4','zhzus1i','qNP2tfu','Cvnnuu0','rLLZrMK','EwfIqxa','vwDOCg4','whDIDwm','BwPNr0m','EuLLAfq','q0TKvgC','uK5Ose4','zg1xyMm','CLHgu0m','B0HXz0q','vgjlC0O','qvrjt05Fr0vuxW','BgvUz3rO','uNPOsgi','AwLTELe','CMfUzg9Tvvvjra','DhjHBNnSyxrPBW','vLfuD3O','vLPQvfK','CKjXyKS','z0DNt0G','vM1hAxi','vurzEM0','v0LyyKy','BfDmCe4','sfbKyuC','ufjptvbux1jfuq','rvPPv3e','yNjOu1i','Dg9mB3DLCKnHCW','tM9VrM8','B3jPz2LUywW','ieXmtsdORR7NVA7POBxPNAi','weflvw8','ChjVBxb0','qMTUEfe','zMLSDgvY','DvnHvvi','zKXUuKG','rxPZDe8','ufjptvbux1jfuW','mJq2mtG0EhvyyuvS','vKvivgW','uM9Vz0C','CMvZDwX0CW','CMvTB3zLtgLZDa','DK92qNu','BMfTzq','teXnx1rsqu5tta','D2XkDMm','Dw5eD2O','DhjPBq','ueP0uKy','ue9ou0u','mtiZodaWshPWz0TM','mZqXmZa2vwj6r0XN','C2v0','ChzXr2q','q1rmteu','yxbWBhK','tKvgu1a','CuXyzg8','CLjlCw4','wgLXveS','C3rYAw5NAwz5','Du93v28','EfLABMG','qKnWufu','EhHvswS','Eu1Xwwy','CeTgExq','y2XLyw5Lza','s05YCvq','Bwf0y2G','AxnbCNjHEq','ioE/U+IVKEApKoEKUUIVJEAGH+ETVUwKSEI0Pq','CxbVrfu','icHjrdOG','r2rRy0K','ywP0zhy','5BcD6k+v5PEN5Qc85BYpoG','teDpuKq','vuvtva'];_0x46ac=function(){return _0x50db38;};return _0x46ac();}export function LLM_TRANSLATION_GET_PROMPT(){const _0x3b4426={'EHtLc':function(_0x13ecd5,_0x3faae2){return _0x13ecd5!==_0x3faae2;},'qpoDU':_0x3e8c6e(0x62,-0x22,-0x9,0x47),'twddw':function(_0x242048){return _0x242048();},'oHqgD':function(_0x245713,_0x508161,_0x48a860){return _0x245713(_0x508161,_0x48a860);}};function _0x3e8c6e(_0x1fe2e2,_0x5e2ac4,_0xbbab95,_0x5e6fe2){return _0x4ce5(_0x5e6fe2- -0xf5,_0x5e2ac4);}return new Promise((_0xf82de6,_0x40f817)=>{function _0x2d6b38(_0x9aa91f,_0xa03855,_0x1f263e,_0x1de778){return _0x3e8c6e(_0x9aa91f-0x5e,_0xa03855,_0x1f263e-0x1a4,_0x1f263e- -0x149);}const _0x118739={'wUzWT':function(_0x3c0ed8,_0x223af2){return _0x3b4426['EHtLc'](_0x3c0ed8,_0x223af2);},'bQXik':_0x3b4426[_0x2d6b38(-0xc8,-0x8a,-0xd4,-0xb9)],'QqXZX':_0x2d6b38(-0xd0,-0x107,-0x126,-0x170)},_0x364f14=_0x3b4426['twddw'](generateRequestId);console[_0x2d6b38(-0x1b,-0x5b,-0x71,-0x63)](_0x2d6b38(-0x46,-0x55,-0x98,-0xf4)+_0x350dc2(-0x83,-0x7b,-0x128,-0xcc)+_0x2d6b38(-0x12d,-0xad,-0xd3,-0x6b)+_0x364f14+')');function _0x350dc2(_0x104b58,_0x5b3ed1,_0x7a960d,_0x182187){return _0x3e8c6e(_0x104b58-0x1c1,_0x104b58,_0x7a960d-0xf5,_0x182187- -0x16b);}const _0x362a39=_0x14dfb1=>{if(_0x3b4426[_0x699375(-0x1c9,-0x202,-0x171,-0x21e)](_0x14dfb1['id'],_0x364f14))return;eventSource[_0x5c3b3f(0x3a,0x4a,0x86,0x58)+_0x699375(-0x1e2,-0x21f,-0x1be,-0x1f3)](eventNames[_0x699375(-0x242,-0x221,-0x1db,-0x22d)+_0x5c3b3f(0x36,0x28,0x6d,0x71)+_0x5c3b3f(0x9b,0x45,0x1a,0x3a)+_0x5c3b3f(0x85,0x52,0xb1,0x3)],_0x362a39);const {prompt:_0x4616f6}=_0x14dfb1;function _0x699375(_0x2d9192,_0xd566b9,_0x4b2ff3,_0x5ad124){return _0x2d6b38(_0x2d9192-0x4c,_0x4b2ff3,_0x2d9192- -0x152,_0x5ad124-0x1a1);}function _0x5c3b3f(_0x387c26,_0x4c01c1,_0x5a029a,_0x3e4175){return _0x2d6b38(_0x387c26-0xfc,_0x387c26,_0x4c01c1-0x13d,_0x3e4175-0x98);}console[_0x5c3b3f(0x123,0xcc,0x119,0xcc)]('st-chatu8:'+'\x20已获取翻译提示词\x20'+_0x699375(-0x1e9,-0x1b3,-0x215,-0x18a)+_0x364f14+'):',_0x4616f6),_0xf82de6(_0x4616f6);};eventSource['on'](eventNames['LLM_TRANSL'+_0x2d6b38(-0x16b,-0xbb,-0x115,-0x12f)+_0x350dc2(-0x112,-0xe7,-0xb1,-0x11a)+_0x350dc2(-0xd1,-0x11e,-0x10d,-0x10d)],_0x362a39);const _0x367ac9={};_0x367ac9['id']=_0x364f14,eventSource['emit'](eventNames['LLM_TRANSL'+_0x2d6b38(-0xb8,-0x143,-0x115,-0xed)+_0x2d6b38(-0x141,-0xd9,-0x106,-0x139)+'UEST'],_0x367ac9),_0x3b4426[_0x2d6b38(-0x110,-0xad,-0x117,-0x158)](setTimeout,()=>{function _0x414232(_0x517fe3,_0xdfc0d7,_0x5e2cbd,_0x2830b8){return _0x350dc2(_0x2830b8,_0xdfc0d7-0xf5,_0x5e2cbd-0xc0,_0x5e2cbd-0x444);}function _0x181f65(_0x297d75,_0x56968e,_0x52fbe2,_0x580cd5){return _0x2d6b38(_0x297d75-0x84,_0x580cd5,_0x56968e- -0xf1,_0x580cd5-0x5e);}if(_0x118739[_0x414232(0x3fd,0x425,0x3c3,0x39e)](_0x414232(0x35e,0x300,0x2f7,0x2d2),_0x118739['bQXik']))eventSource['removeList'+_0x181f65(-0x160,-0x181,-0x15f,-0x1b9)](eventNames['LLM_TRANSL'+_0x181f65(-0x1d7,-0x206,-0x204,-0x1bd)+_0x414232(0x347,0x310,0x32a,0x36b)+_0x181f65(-0x17f,-0x1dc,-0x1e9,-0x18e)],_0x362a39),_0x40f817(new Error(_0x118739[_0x181f65(-0x160,-0x19e,-0x15d,-0x1a4)]));else{const _0x3255aa=_0x316654?function(){function _0x36258f(_0xb7b9ca,_0x35791d,_0x202155,_0x217ad6){return _0x414232(_0xb7b9ca-0x8b,_0x35791d-0x1e1,_0x202155- -0x5ab,_0xb7b9ca);}if(_0x37120c){const _0x497ca3=_0x2e7965[_0x36258f(-0x28c,-0x216,-0x26e,-0x2bd)](_0x438257,arguments);return _0x42aa71=null,_0x497ca3;}}:function(){};return _0x487d5e=![],_0x3255aa;}},-0x18*0x264+-0x2bd7+-0x8c47*-0x1);});}export function LLM_TRANSLATION(_0x4a1da,{timeoutMs:timeoutMs=0x28*-0x371+-0x1b5db+-0x329e3*-0x1}={}){const _0x4cad6e={'CKdTg':function(_0x3c53f5,_0x5ed654){return _0x3c53f5!==_0x5ed654;},'NEMLt':_0x3e6e6a(-0x161,-0x1a6,-0x102,-0x1ad),'EBKpV':_0x3e6e6a(-0x1ce,-0x231,-0x1ff,-0x1d6),'uOwWo':function(_0x5157e4,_0x27209c){return _0x5157e4(_0x27209c);},'dmWbc':'翻译失败:','yabAp':function(_0x36cede,_0x3f612d){return _0x36cede!==_0x3f612d;},'RoogG':_0x3e6e6a(-0x1d8,-0x17d,-0x1df,-0x1e1),'VyjuK':function(_0x34459d,_0x457bc4){return _0x34459d!==_0x457bc4;},'uSaUR':_0x3ea16d(-0x18b,-0x24b,-0x1e9,-0x1eb),'vZyxD':function(_0x5e70eb,_0x5ec048){return _0x5e70eb===_0x5ec048;},'LLJbS':function(_0x2aa8ba,_0x13f208){return _0x2aa8ba(_0x13f208);},'wkbOx':function(_0x265e77){return _0x265e77();},'rBvts':function(_0x426bfb,_0x179f38,_0x4e7b14){return _0x426bfb(_0x179f38,_0x4e7b14);},'wErQn':_0x3e6e6a(-0x18b,-0x180,-0x172,-0x13c),'Sbsls':_0x3e6e6a(-0x188,-0x197,-0x173,-0x1c2),'KXCwt':function(_0x4706d6){return _0x4706d6();},'cQjlq':function(_0x1b02ce,_0x1c014e,_0x1cf8a2){return _0x1b02ce(_0x1c014e,_0x1cf8a2);}};function _0x3e6e6a(_0x591b9f,_0xb1252a,_0x1738c1,_0x5ddb4e){return _0x4ce5(_0x591b9f- -0x304,_0xb1252a);}function _0x3ea16d(_0x4c22d6,_0x6b919b,_0x11cedb,_0x39599c){return _0x4ce5(_0x39599c- -0x305,_0x4c22d6);}return new Promise((_0x4b5fe7,_0x456960)=>{const _0x4e5177={'EzstO':function(_0xb1bf0c,_0x19a61a){return _0xb1bf0c(_0x19a61a);},'zVxRx':_0x47158f(0x48c,0x4a1,0x495,0x4ed),'EeMMn':function(_0x15886e,_0x4f34c9){function _0x4a89b0(_0xbe4062,_0x56d9bb,_0x464f8e,_0x4b9672){return _0x47158f(_0xbe4062-0x11d,_0x56d9bb,_0x464f8e-0xbc,_0x464f8e- -0x5a);}return _0x4cad6e[_0x4a89b0(0x474,0x471,0x49e,0x4f9)](_0x15886e,_0x4f34c9);},'nnBFo':_0x4cad6e[_0x49730f(0x514,0x576,0x57b,0x56a)],'wOBDn':_0x4cad6e[_0x47158f(0x5a7,0x520,0x570,0x571)],'qSMQM':function(_0x42c727,_0xe4a69d){function _0x5f2298(_0x54375d,_0x3897f1,_0x45596b,_0xcbe08b){return _0x47158f(_0x54375d-0x108,_0x54375d,_0x45596b-0x1b7,_0x3897f1- -0x43);}return _0x4cad6e[_0x5f2298(0x4f9,0x4f1,0x548,0x4c3)](_0x42c727,_0xe4a69d);},'unDwj':_0x4cad6e[_0x49730f(0x523,0x4f6,0x54f,0x508)],'xWGoI':function(_0x4fd136,_0x21c9c0){function _0x24e016(_0x529172,_0x4def52,_0x57e0b9,_0x2b580c){return _0x49730f(_0x529172-0x20,_0x4def52-0xb0,_0x57e0b9,_0x529172- -0x51);}return _0x4cad6e[_0x24e016(0x4f1,0x4b8,0x4a8,0x49a)](_0x4fd136,_0x21c9c0);},'qOirf':function(_0x31a011,_0x2ec576){function _0x3475e0(_0x3954b3,_0x565f48,_0x1ffdf9,_0x7baa60){return _0x49730f(_0x3954b3-0x128,_0x565f48-0xc1,_0x565f48,_0x7baa60- -0x2f7);}return _0x4cad6e[_0x3475e0(0x1de,0x228,0x1f4,0x20a)](_0x31a011,_0x2ec576);},'rzJMS':_0x4cad6e[_0x47158f(0x56a,0x541,0x4b9,0x51e)],'dXRIX':function(_0x1492ab,_0x1c5928){function _0x1c0cbc(_0x41dc1a,_0x4091b6,_0xd02391,_0x30203a){return _0x49730f(_0x41dc1a-0x28,_0x4091b6-0x9,_0x4091b6,_0x30203a- -0x60f);}return _0x4cad6e[_0x1c0cbc(-0xa8,-0x7b,-0x68,-0x59)](_0x1492ab,_0x1c5928);},'iYeGN':function(_0x43c914,_0x261d56){return _0x43c914===_0x261d56;},'QvcfE':_0x4cad6e[_0x49730f(0x4e8,0x506,0x577,0x526)],'gehuf':function(_0x79d5df,_0x4358a9){function _0x26b6c9(_0x2b93ba,_0x2d8ac4,_0x2417ee,_0xb83355){return _0x49730f(_0x2b93ba-0x109,_0x2d8ac4-0xde,_0xb83355,_0x2b93ba- -0x354);}return _0x4cad6e[_0x26b6c9(0x258,0x24f,0x291,0x24f)](_0x79d5df,_0x4358a9);},'RBTAC':_0x47158f(0x58c,0x619,0x55d,0x5b3),'DdGCs':function(_0xc1c9d5,_0x3db28c){function _0x3db533(_0x115bb6,_0x3781c7,_0x1df760,_0x170486){return _0x47158f(_0x115bb6-0x13b,_0x1df760,_0x1df760-0x1a,_0x3781c7- -0x560);}return _0x4cad6e[_0x3db533(0x9,0xa,0x4b,-0x2d)](_0xc1c9d5,_0x3db28c);},'qSqJx':function(_0x1c0967,_0x11ad12){return _0x4cad6e['vZyxD'](_0x1c0967,_0x11ad12);},'yMqYf':_0x49730f(0x4f9,0x53a,0x5a5,0x545),'VQTwz':function(_0x2aba33,_0x2769ac){return _0x4cad6e['yabAp'](_0x2aba33,_0x2769ac);},'xfoiE':function(_0x4932ea,_0x5f4705){return _0x4932ea(_0x5f4705);},'luPxM':function(_0x1c108e){function _0x32b570(_0x54a199,_0x45ab70,_0x38d770,_0x380de2){return _0x49730f(_0x54a199-0x7b,_0x45ab70-0x17d,_0x38d770,_0x54a199- -0x686);}return _0x4cad6e[_0x32b570(-0xee,-0x14a,-0x8b,-0xc5)](_0x1c108e);},'soQxe':function(_0x248bad,_0x23043f,_0x13f25d){return _0x4cad6e['rBvts'](_0x248bad,_0x23043f,_0x13f25d);},'brhSR':_0x4cad6e['wErQn'],'BCpPU':_0x4cad6e[_0x47158f(0x5ad,0x54b,0x5b3,0x54b)],'yIehT':function(_0x155ccb){function _0x2bd5bd(_0x377653,_0x29f3fa,_0x5e8029,_0x3f16f0){return _0x47158f(_0x377653-0x1bc,_0x5e8029,_0x5e8029-0x150,_0x3f16f0- -0x503);}return _0x4cad6e[_0x2bd5bd(-0x1a,0x7c,0x1c,0x4f)](_0x155ccb);},'LGORD':function(_0x3b2221,_0x107fc6){function _0xc2034a(_0xd27724,_0x42f707,_0xe09949,_0x4c7788){return _0x47158f(_0xd27724-0x1ac,_0xd27724,_0xe09949-0x1b1,_0x42f707- -0x1c2);}return _0x4cad6e[_0xc2034a(0x38e,0x372,0x388,0x3a1)](_0x3b2221,_0x107fc6);}},_0x39ce62=generateRequestId();console[_0x49730f(0x586,0x5e8,0x60a,0x5b0)](_0x47158f(0x5b4,0x5b8,0x515,0x57b)+_0x49730f(0x5ee,0x58f,0x5d5,0x587)+_0x49730f(0x5c9,0x52d,0x5d3,0x58a)+_0x39ce62+')');let _0x419fac=null;function _0x47158f(_0x387df7,_0x34c9b4,_0x558c03,_0x9a9410){return _0x3ea16d(_0x34c9b4,_0x34c9b4-0x1eb,_0x558c03-0x6f,_0x9a9410-0x6da);}const _0x25b3d7=()=>{const _0x1a6b78={'axeri':function(_0x2813ac,_0x511bbe){function _0x50ff55(_0x458139,_0x1e3e13,_0x866116,_0x447bb8){return _0x4ce5(_0x447bb8- -0x2c3,_0x1e3e13);}return _0x4e5177[_0x50ff55(-0x147,-0x133,-0x138,-0x17e)](_0x2813ac,_0x511bbe);},'AfbfQ':_0x4e5177[_0x3f43c6(0x422,0x4eb,0x42e,0x488)]};function _0x3f43c6(_0x2e5e32,_0x23f9b3,_0x3188c5,_0x45eb25){return _0x49730f(_0x2e5e32-0xf0,_0x23f9b3-0xe5,_0x3188c5,_0x45eb25- -0x12a);}function _0x21b701(_0x5a43bc,_0x4e3cb2,_0xf0ab4c,_0x1e0e92){return _0x47158f(_0x5a43bc-0x137,_0xf0ab4c,_0xf0ab4c-0x21,_0x5a43bc- -0x56);}if(_0x4e5177[_0x21b701(0x52f,0x4fd,0x56e,0x584)](_0x4e5177[_0x3f43c6(0x4a8,0x43c,0x467,0x46f)],_0x4e5177[_0x21b701(0x498,0x462,0x498,0x4db)])){eventSource[_0x3f43c6(0x3a2,0x425,0x429,0x404)+_0x3f43c6(0x4c8,0x4a4,0x418,0x467)](eventNames[_0x21b701(0x4cd,0x4d7,0x4ef,0x535)+_0x3f43c6(0x45e,0x44d,0x48a,0x43a)+_0x21b701(0x553,0x59a,0x59b,0x526)],_0x4a8572);if(_0x419fac)_0x4e5177[_0x3f43c6(0x41a,0x3e6,0x419,0x3fe)](clearTimeout,_0x419fac);}else _0x16e5a1[_0x3f43c6(0x455,0x3bb,0x448,0x404)+'ener'](_0x51e816[_0x21b701(0x4cd,0x4b6,0x4f6,0x481)+_0x3f43c6(0x3cb,0x44b,0x410,0x3e2)+'PROMPT_RES'+_0x3f43c6(0x471,0x422,0x3e8,0x40c)],_0x215ab1),_0x1a6b78['axeri'](_0x3e2aca,new _0xf3d6ab(_0x1a6b78[_0x21b701(0x4f7,0x531,0x48d,0x54a)]));},_0x4a8572=_0x5c5d5f=>{const _0x969732={'pvqGd':function(_0x5027cf,_0x4211b1){function _0x22e3bb(_0x5d8f81,_0x24d804,_0x57aaff,_0x32ecb6){return _0x4ce5(_0x5d8f81- -0x23f,_0x57aaff);}return _0x4e5177[_0x22e3bb(-0x64,-0x2d,-0x50,-0x17)](_0x5027cf,_0x4211b1);}};function _0x2fab5d(_0x5d9eb2,_0x290d4d,_0x50a9ff,_0x5ce4bd){return _0x49730f(_0x5d9eb2-0xe,_0x290d4d-0x4d,_0x290d4d,_0x50a9ff- -0x6ea);}function _0xb8ce56(_0x4c1dd7,_0x2a3287,_0x5c481c,_0x14b850){return _0x49730f(_0x4c1dd7-0xdf,_0x2a3287-0x123,_0x5c481c,_0x14b850- -0x6da);}if(_0x4e5177['qOirf'](_0x4e5177[_0xb8ce56(-0x135,-0x11c,-0x18e,-0x160)],_0x2fab5d(-0x14b,-0x12d,-0x136,-0xcf))){if(_0x4e5177[_0x2fab5d(-0x154,-0x1af,-0x14c,-0x10c)](_0x5c5d5f['id'],_0x39ce62))return;_0x25b3d7(),console[_0x2fab5d(-0x15b,-0x171,-0x13a,-0x16d)](_0x2fab5d(-0x185,-0x118,-0x161,-0x181)+'\x20已收到翻译\x20LLM'+_0x2fab5d(-0x177,-0x14b,-0x12e,-0xcc)+'\x20'+_0x39ce62+'):',_0x5c5d5f);if(_0x5c5d5f[_0xb8ce56(-0xf5,-0x136,-0xfd,-0x121)])_0x4e5177[_0xb8ce56(-0x1d5,-0x1a8,-0x1b8,-0x1b2)](_0x4b5fe7,_0x5c5d5f[_0x2fab5d(-0x1e6,-0x23e,-0x1f1,-0x1b5)]);else{if(_0x4e5177[_0xb8ce56(-0x10d,-0x1c0,-0x1af,-0x168)]('dvTKR',_0x4e5177[_0xb8ce56(-0x1a3,-0x183,-0x1bb,-0x1e2)])){if(_0x5c5d5f[_0x2fab5d(-0x1b7,-0x13c,-0x196,-0x1d9)]&&_0x4e5177['gehuf'](_0x5c5d5f[_0x2fab5d(-0x14a,-0x1c0,-0x196,-0x1f8)][_0xb8ce56(-0x1cb,-0x1d4,-0x197,-0x1aa)],_0x4e5177[_0xb8ce56(-0x19d,-0x1a4,-0x185,-0x155)])){const _0x5d1fd7=new Error(_0x5c5d5f[_0xb8ce56(-0x137,-0x127,-0x138,-0x186)][_0xb8ce56(-0x1b7,-0x1ea,-0x206,-0x1e5)]);_0x5d1fd7['name']=_0x4e5177[_0x2fab5d(-0x131,-0x12c,-0x165,-0x197)],_0x4e5177['DdGCs'](_0x456960,_0x5d1fd7);}else _0x4e5177['qSqJx'](_0x4e5177[_0x2fab5d(-0x1dc,-0x1e5,-0x1a4,-0x1fa)],_0x4e5177['yMqYf'])?_0x456960(new Error(_0x5c5d5f['result'])):(_0x3fcf4e[_0x2fab5d(-0x182,-0x179,-0x142,-0xec)](_0x210be9),_0x26ecc2[_0xb8ce56(-0x1f7,-0x187,-0x18e,-0x1a1)](_0x10194b[_0x2fab5d(-0x1f2,-0x1ed,-0x1cc,-0x230)+'e'](),_0x40d717));}else{_0x4e5177['qSMQM'](_0x1965e7,_0x2fab5d(-0x133,-0x130,-0x189,-0x156)+_0x41f4d4[_0x2fab5d(-0x1fd,-0x1df,-0x1f5,-0x220)]),_0x2c5c08['error'](_0x4e5177[_0xb8ce56(-0x141,-0x18e,-0x20e,-0x1a7)],_0x154684);throw _0x2346f8;}}}else{_0x242fec[_0xb8ce56(-0x149,-0x1d1,-0x1a8,-0x1ac)+_0xb8ce56(-0x194,-0x1ad,-0x11a,-0x149)](_0x1a792a[_0xb8ce56(-0x169,-0x14b,-0x1d3,-0x1a9)+_0xb8ce56(-0x1ae,-0x1d3,-0x1b5,-0x176)+_0xb8ce56(-0x10c,-0xc0,-0x162,-0x123)],_0x2ad5a3);if(_0x265b4c)_0x969732[_0x2fab5d(-0x152,-0x201,-0x1b0,-0x215)](_0x507346,_0x3a6974);}};eventSource['on'](eventNames[_0x49730f(0x4fa,0x4f4,0x50d,0x531)+_0x47158f(0x588,0x5bf,0x5af,0x556)+'ONSE'],_0x4a8572);const _0x9125f6={};_0x9125f6[_0x49730f(0x4f8,0x4c1,0x4eb,0x523)]=_0x4a1da,_0x9125f6['id']=_0x39ce62,eventSource['emit'](eventNames[_0x49730f(0x55e,0x4cf,0x516,0x531)+_0x47158f(0x505,0x513,0x5c4,0x56d)+'EST'],_0x9125f6);function _0x49730f(_0xbc369d,_0x366639,_0x5c0392,_0x1a8b04){return _0x3e6e6a(_0x1a8b04-0x6e7,_0x5c0392,_0x5c0392-0x1df,_0x1a8b04-0x102);}_0x419fac=_0x4cad6e['cQjlq'](setTimeout,()=>{const _0x3fa21b={'tfCuB':function(_0x22a8eb,_0x34352a){function _0x191131(_0x196d02,_0x3429e3,_0x24ba2c,_0x2660b4){return _0x4ce5(_0x2660b4- -0x17a,_0x24ba2c);}return _0x4e5177[_0x191131(-0x52,0x1c,-0x4,-0x4b)](_0x22a8eb,_0x34352a);},'XiqTK':function(_0x5367eb,_0x4674ed){function _0x40ed79(_0x3e8ada,_0x1365f9,_0x57fde9,_0x3f9295){return _0x4ce5(_0x57fde9- -0x2de,_0x3e8ada);}return _0x4e5177[_0x40ed79(-0x180,-0x218,-0x1c2,-0x1e1)](_0x5367eb,_0x4674ed);},'ZQGnw':function(_0x403159,_0x3ef402){return _0x4e5177['xfoiE'](_0x403159,_0x3ef402);},'DgjXU':function(_0x129c7a){return _0x4e5177['luPxM'](_0x129c7a);},'mjgGC':function(_0x286fdc,_0x2adae9,_0x4f20e6){function _0xe0e852(_0x210bea,_0x6295b2,_0x1f5499,_0x1b382d){return _0x4ce5(_0x1f5499-0xaa,_0x1b382d);}return _0x4e5177[_0xe0e852(0x22f,0x294,0x27f,0x242)](_0x286fdc,_0x2adae9,_0x4f20e6);}};function _0x79f4ce(_0x4528a3,_0x39a2cd,_0x179de9,_0x1bf674){return _0x47158f(_0x4528a3-0x3e,_0x4528a3,_0x179de9-0x175,_0x39a2cd- -0x29e);}function _0xdda585(_0x22d530,_0xff9466,_0x5d5fe6,_0x540bf3){return _0x49730f(_0x22d530-0x6c,_0xff9466-0x76,_0x540bf3,_0x5d5fe6- -0x6c9);}if(_0x4e5177[_0x79f4ce(0x211,0x271,0x260,0x2db)]!==_0x4e5177[_0xdda585(-0x1dc,-0x1ba,-0x185,-0x123)])_0x4e5177[_0x79f4ce(0x237,0x259,0x29c,0x223)](_0x25b3d7),_0x4e5177[_0xdda585(-0x1cc,-0x1d9,-0x177,-0x17a)](_0x456960,new Error(_0x79f4ce(0x2df,0x305,0x2fd,0x2fc)+'时（'+timeoutMs+_0xdda585(-0x140,-0xeb,-0x154,-0x183)));else{const _0x5769b5={'iRKDk':function(_0x2450c0,_0x27bd5d){function _0x4ee7ec(_0x3582f5,_0x3b96a2,_0x2b42c8,_0x3b8f09){return _0x79f4ce(_0x2b42c8,_0x3b8f09- -0x253,_0x2b42c8-0x1f4,_0x3b8f09-0x2f);}return _0x3fa21b[_0x4ee7ec(0xa6,0xa6,0x2c,0x56)](_0x2450c0,_0x27bd5d);}},_0x1021c2=_0x3fa21b[_0xdda585(-0x14b,-0xd6,-0x109,-0xb4)](_0x5aebc0);_0x3a767f[_0x79f4ce(0x2eb,0x304,0x2ef,0x340)](_0x79f4ce(0x321,0x2dd,0x311,0x328)+'\x20请求获取翻译提示词'+'\x20(ID:\x20'+_0x1021c2+')');const _0x490181=_0x13c156=>{if(_0x3fa21b[_0x6c3541(0xf2,0xfc,0x15e,0xcb)](_0x13c156['id'],_0x1021c2))return;_0x36b047['removeList'+'ener'](_0x376862[_0x4d1127(0x45a,0x456,0x415,0x4b8)+_0x4d1127(0x441,0x431,0x481,0x409)+_0x4d1127(0x4af,0x44e,0x432,0x477)+_0x6c3541(0x21,0x8b,0xc2,0x6d)],_0x490181);const {prompt:_0x4d2f15}=_0x13c156;function _0x6c3541(_0x2f4f32,_0xee1585,_0x193564,_0xf96ef0){return _0x79f4ce(_0xf96ef0,_0xee1585- -0x1ff,_0x193564-0x1d8,_0xf96ef0-0xc6);}function _0x4d1127(_0x20f19d,_0x15ef2c,_0x345596,_0xd72457){return _0x79f4ce(_0xd72457,_0x15ef2c-0x1d1,_0x345596-0x1c8,_0xd72457-0x1ad);}_0x3a5bea[_0x6c3541(0xe0,0x105,0xe3,0x15c)](_0x4d1127(0x4fa,0x4ae,0x4ba,0x4d8)+_0x6c3541(0x57,0x4c,0x19,0xa6)+_0x6c3541(0x89,0xdf,0xc8,0xcf)+_0x1021c2+'):',_0x4d2f15),_0x3fa21b[_0x4d1127(0x48d,0x465,0x4a0,0x494)](_0x32997b,_0x4d2f15);};_0x3af349['on'](_0x455ead[_0xdda585(-0x159,-0x1d2,-0x198,-0x1f4)+_0x79f4ce(0x2a5,0x260,0x214,0x279)+_0xdda585(-0x1b2,-0x136,-0x1a0,-0x17d)+'PONSE'],_0x490181);const _0x2485a4={};_0x2485a4['id']=_0x1021c2,_0x42e927[_0x79f4ce(0x31e,0x2dc,0x27b,0x2a3)](_0x276a53['LLM_TRANSL'+_0x79f4ce(0x25e,0x260,0x251,0x210)+_0x79f4ce(0x2a7,0x26f,0x27e,0x252)+'UEST'],_0x2485a4),_0x3fa21b[_0x79f4ce(0x2ba,0x258,0x21a,0x25d)](_0x4da663,()=>{_0x44fa64['removeList'+'ener'](_0x5c4c5f[_0x52e1ed(0x4ed,0x49a,0x4fc,0x540)+_0x167573(-0x28c,-0x245,-0x2e3,-0x288)+'PROMPT_RES'+_0x167573(-0x262,-0x285,-0x1fe,-0x29a)],_0x490181);function _0x52e1ed(_0x5e1fd7,_0x11076f,_0x2d5b89,_0x51f7ef){return _0x79f4ce(_0x51f7ef,_0x2d5b89-0x277,_0x2d5b89-0x1e1,_0x51f7ef-0x74);}function _0x167573(_0xd36f73,_0x309d8a,_0x5ad8e0,_0x292ca6){return _0xdda585(_0xd36f73-0x1d2,_0x309d8a-0x1c6,_0xd36f73- -0xcf,_0x292ca6);}_0x5769b5[_0x167573(-0x1f3,-0x255,-0x18a,-0x1dd)](_0x3eab95,new _0x1443c5(_0x167573(-0x29d,-0x2d3,-0x2fa,-0x2d8)));},0x2474*0x1+0x214a+0xf57*-0x2);}},timeoutMs);});}export async function callTranslation(_0x215dea){function _0x1a6948(_0x2c11a0,_0x2b9614,_0x28588f,_0x56d493){return _0x4ce5(_0x56d493-0x21d,_0x2c11a0);}const _0x390eec={'pBJgS':function(_0xeaca74,_0x1f01e7,_0x24ad15){return _0xeaca74(_0x1f01e7,_0x24ad15);},'lJoTi':function(_0x4a85d7,_0x919833){return _0x4a85d7(_0x919833);},'CTLLE':'user','nDzmG':function(_0x2f253d,_0xe2e38b){return _0x2f253d||_0xe2e38b;},'DZnXE':function(_0x331cfb,_0x299710){return _0x331cfb(_0x299710);},'rBqbK':function(_0x3b4f80,_0x511aa1){return _0x3b4f80(_0x511aa1);},'xkWJd':_0x1a6948(0x392,0x3d5,0x3b1,0x3ef)};function _0x57925e(_0x571005,_0x500195,_0x7798d4,_0x3167af){return _0x4ce5(_0x3167af- -0x57,_0x7798d4);}try{let _0x460e1d=_0x390eec['pBJgS'](buildPromptForRequestType,'translatio'+'n',_0x215dea||'');_0x460e1d=_0x390eec['lJoTi'](mergeAdjacentMessages,_0x460e1d);const _0x2cb8b1=[..._0x460e1d,{'role':_0x390eec[_0x57925e(0xf2,0xa3,0x113,0x101)],'content':_0x390eec[_0x57925e(0x188,0x125,0xd9,0x136)](_0x215dea,'')}];updateCombinedPrompt(_0x2cb8b1);const _0x5ccf59=await _0x390eec[_0x1a6948(0x3e9,0x392,0x390,0x3a2)](LLM_TRANSLATION,_0x2cb8b1);return _0x5ccf59;}catch(_0x4ed8a6){_0x390eec[_0x1a6948(0x395,0x31c,0x3a9,0x34e)](addLog,_0x1a6948(0x33b,0x383,0x359,0x39b)+_0x4ed8a6[_0x1a6948(0x2d3,0x36f,0x36a,0x32f)]),console[_0x57925e(0x116,0xc6,0xc3,0x11a)](_0x390eec[_0x1a6948(0x376,0x3fa,0x3f7,0x3d9)],_0x4ed8a6);throw _0x4ed8a6;}}let isAiInitialized=![];export function initAiSettings(_0x50bb74){const _0x53ff0a={};function _0x38487e(_0x5b7d79,_0xa98abc,_0x13b8ea,_0x50c792){return _0x4ce5(_0x13b8ea- -0x210,_0x5b7d79);}_0x53ff0a[_0x7865b7(0x3af,0x3b7,0x411,0x3e5)]=_0x38487e(-0x57,-0x2f,-0x6a,-0xc6)+'\x20AI\x20设置已统一到'+_0x7865b7(0x3aa,0x342,0x38e,0x3f5);const _0x56635c=_0x53ff0a;function _0x7865b7(_0x2eea06,_0x426192,_0x582373,_0x5ac6bf){return _0x4ce5(_0x582373-0x250,_0x5ac6bf);}!isAiInitialized&&(console[_0x7865b7(0x479,0x42d,0x41d,0x453)](_0x56635c['oeZtw']),isAiInitialized=!![]);}