(function(_0x49351b,_0x100378){function _0x23cecc(_0x1fe844,_0x4c8c86,_0x2b7f24,_0x26bc23){return _0x8410(_0x1fe844- -0x177,_0x2b7f24);}function _0x58b822(_0x576b1c,_0x2d6821,_0x2ca6ec,_0x5158f5){return _0x8410(_0x576b1c- -0x188,_0x2ca6ec);}const _0x4ebdbc=_0x49351b();while(!![]){try{const _0x4fa149=parseInt(_0x23cecc(0xa9,0xe9,0x6f,0x63))/(-0x1e47+0x10e+-0x6*-0x4df)+parseInt(_0x58b822(0x59,0x67,0x4f,0xa7))/(-0x97*0x10+0x24fe+-0x56*0x52)*(-parseInt(_0x58b822(0x52,0x97,0x8d,0x89))/(0x1c51+0x18d*-0x14+-0x15b*-0x2))+parseInt(_0x58b822(0x31,-0x1,-0x1e,0x3d))/(0x2a*0x19+0x1*0x63a+-0xa50)+-parseInt(_0x23cecc(0x53,0x16,0x17,0x92))/(-0x15*0x1cb+0xc6*-0x29+0x4562)*(parseInt(_0x23cecc(0x89,0x5f,0xaa,0x81))/(-0x1b6f*-0x1+0x1*0x1d+0x1b86*-0x1))+parseInt(_0x23cecc(0x8d,0x7c,0x43,0x86))/(-0x1*-0x43f+-0x1*-0x20a2+-0x24da)*(-parseInt(_0x58b822(0x2c,0x49,-0x11,0x63))/(0x901+0x1def+-0x26e8))+-parseInt(_0x23cecc(0x91,0xdd,0xb6,0xa7))/(0x176*0x8+0x2*0x435+0xb*-0x1d3)+parseInt(_0x23cecc(0x9f,0xcc,0xa9,0x7f))/(0x1*-0x26cf+0x18d+0x134*0x1f);if(_0x4fa149===_0x100378)break;else _0x4ebdbc['push'](_0x4ebdbc['shift']());}catch(_0x24cef4){_0x4ebdbc['push'](_0x4ebdbc['shift']());}}}(_0xb11a,-0x69303+-0x1122fe+0x10*0x26749));const _0x564df1=(function(){let _0x10ed7b=!![];return function(_0x2df9d6,_0x3c50d9){const _0x362e97=_0x10ed7b?function(){function _0x38a982(_0x553054,_0x75ab96,_0x43dc4a,_0x4bab4d){return _0x8410(_0x553054- -0x2b4,_0x43dc4a);}if(_0x3c50d9){const _0x5c3715=_0x3c50d9[_0x38a982(-0x9c,-0xe7,-0x8f,-0xd9)](_0x2df9d6,arguments);return _0x3c50d9=null,_0x5c3715;}}:function(){};return _0x10ed7b=![],_0x362e97;};}()),_0x3a7d75=_0x564df1(this,function(){const _0x5a6ba8={};function _0x4fbb3f(_0x13a9dc,_0x51d705,_0x1926e3,_0xd951e1){return _0x8410(_0x13a9dc- -0x1fb,_0x51d705);}_0x5a6ba8[_0x4fbb3f(-0x50,-0x2d,-0x8,-0x88)]=_0x4fbb3f(-0x57,-0x1e,-0x4,-0x21)+'+$';const _0x1169d7=_0x5a6ba8;function _0x4e55fb(_0x348c37,_0x3c0209,_0x3cc14b,_0xc865bc){return _0x8410(_0x348c37- -0x3c3,_0x3cc14b);}return _0x3a7d75[_0x4fbb3f(-0x46,-0x45,-0x4,-0x14)]()[_0x4e55fb(-0x19a,-0x16f,-0x1ce,-0x16d)](_0x1169d7['NcWIF'])[_0x4fbb3f(-0x46,-0x22,-0x69,-0x6)]()[_0x4fbb3f(-0x29,-0x38,-0x30,-0x51)+'r'](_0x3a7d75)[_0x4e55fb(-0x19a,-0x16f,-0x1ba,-0x14e)](_0x1169d7[_0x4e55fb(-0x218,-0x211,-0x1f1,-0x264)]);});_0x3a7d75();import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{mergeAdjacentMessages}from'./promptProcessor.js';let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x24fd69){function _0xf7f2e8(_0x165ea4,_0x10f42a,_0x2610fb,_0x24451a){return _0x8410(_0x24451a- -0x3b4,_0x165ea4);}function _0x27ebe8(_0x16eda8,_0x5ce3f6,_0x25edbc,_0x4bd700){return _0x8410(_0x25edbc- -0x369,_0x16eda8);}return SKIP_PATTERNS[_0xf7f2e8(-0x1ab,-0x17c,-0x1b5,-0x1be)](_0x56b638=>_0x56b638[_0xf7f2e8(-0x18f,-0x1bc,-0x1a0,-0x1a0)](_0x24fd69[_0x27ebe8(-0x194,-0x16a,-0x176,-0x1a8)]()));}export function tagsToJsonString(_0x29a9b2){if(!Array[_0x23b90c(0xb,0x5b,0x38,0x5a)](_0x29a9b2))return'[]';function _0x23b90c(_0x58f8fb,_0x1b7227,_0x56d067,_0x2838fb){return _0x8410(_0x58f8fb- -0x1b4,_0x56d067);}function _0x10fb63(_0x3acc9d,_0x319f44,_0x16264d,_0x2a6697){return _0x8410(_0x2a6697-0x1f8,_0x319f44);}return JSON['stringify'](_0x29a9b2[_0x10fb63(0x3da,0x43f,0x428,0x424)](_0x1faf09=>_0x1faf09&&typeof _0x1faf09===_0x10fb63(0x390,0x3f9,0x392,0x3bc)));}export function preprocessPromptForTranslation(_0x140a50){const _0x27bb3f={'Lpwau':'st-chatu8:'+_0x33d6bf(-0x30,-0x7,-0xc,0x1a)+':','KTAgt':function(_0xae7186,_0x1e2bf9){return _0xae7186===_0x1e2bf9;},'DrTNW':_0x33d6bf(0x90,0x6f,0x4a,0x8),'Tftnz':function(_0x1b9fa7,_0x55875a){return _0x1b9fa7<_0x55875a;},'vgbhU':_0x33d6bf(-0x8,0xa,-0x3,0x42),'iuLSB':function(_0x1bc64f,_0x3c20d4){return _0x1bc64f!==_0x3c20d4;},'ZrTqc':_0x33d6bf(-0x49,-0x39,-0x21,-0x24),'ivFAk':'IaoyH','QwhNz':function(_0x84144,_0x403632){return _0x84144(_0x403632);}};if(!_0x140a50||typeof _0x140a50!==_0x27bb3f[_0x13fe0b(0x32b,0x342,0x33f,0x319)])return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};const _0xc637b9=_0x861a83=>{function _0x5dfae5(_0x305681,_0x843910,_0x2bdad9,_0x4a4882){return _0x33d6bf(_0x305681-0x61,_0x843910-0x1b5,_0x843910- -0x4e,_0x2bdad9);}function _0x315251(_0x2c770b,_0x42642c,_0x2b892f,_0x42b4e5){return _0x33d6bf(_0x2c770b-0x36,_0x42642c-0xea,_0x2c770b-0x406,_0x42642c);}if(_0x27bb3f[_0x315251(0x3dc,0x412,0x3a8,0x3e7)](_0x27bb3f[_0x5dfae5(0x20,0x9,-0x26,0x42)],_0x315251(0x44b,0x49b,0x407,0x438))){_0x19e54c[_0x315251(0x47f,0x490,0x499,0x4c4)](_0x27bb3f['Lpwau'],_0x6203db);throw _0x46fbc0;}else{const _0x5c74ba=[];let _0x40f003='',_0x5dfab7=![];for(let _0x123535=-0x1284+-0x12b*0x1e+0x358e;_0x27bb3f[_0x315251(0x464,0x4a8,0x433,0x45d)](_0x123535,_0x861a83[_0x5dfae5(0x59,0xa,0x16,-0x2)]);_0x123535++){const _0xaa043e=_0x861a83[_0x123535];if(_0xaa043e==='$')_0x5dfab7=!_0x5dfab7,_0x40f003+=_0xaa043e;else{if((_0x27bb3f[_0x315251(0x3dc,0x3a9,0x3d9,0x41c)](_0xaa043e,',')||_0x27bb3f[_0x315251(0x3dc,0x416,0x3a8,0x411)](_0xaa043e,'，'))&&!_0x5dfab7){const _0x264ab5=_0x40f003[_0x5dfae5(0x13,-0x22,-0x19,0x22)]();if(_0x264ab5)_0x5c74ba[_0x5dfae5(0x3a,0x1a,-0x21,0x2d)](_0x264ab5);_0x40f003='';}else _0x40f003+=_0xaa043e;}}if(_0x40f003['trim']())_0x5c74ba[_0x315251(0x46e,0x451,0x48e,0x4a6)](_0x40f003[_0x5dfae5(-0x47,-0x22,0x11,-0x1c)]());return _0x5c74ba;}},_0x12e56f=_0xc637b9(_0x140a50),_0x38ecc8=[],_0x3ebb53=[];function _0x13fe0b(_0x50a5e3,_0x33e3b4,_0x4d30f3,_0x53416e){return _0x8410(_0x50a5e3-0xfe,_0x33e3b4);}function _0x33d6bf(_0x5a5d21,_0x8c5ba2,_0x2333aa,_0x14ea48){return _0x8410(_0x2333aa- -0x1c7,_0x14ea48);}const _0x3531f8=new Map();for(const _0x1518a1 of _0x12e56f){const _0x10108e=_0x1518a1[_0x33d6bf(-0x1b,-0x21,0x15,0x2f)](SD_SYMBOL_PATTERN);if(_0x10108e){const _0x1d0c2a=_0x10108e[0x187d+-0x941*-0x4+-0x3d80]||'',_0x43b511=(_0x10108e[0x1*-0x1165+-0xc5*-0x29+-0x1*0xe26]||'')[_0x33d6bf(0x1c,0x68,0x2c,0x5a)](),_0xfe1d2=_0x10108e[-0x726+-0x986+0x10af]||'',_0x1c3554=_0x10108e[-0xc*0x12c+-0x20f1+0x2f05]||'',_0x1d1937={'original':_0x1518a1,'cleaned':_0x43b511,'prefix':_0x1d0c2a,'suffix':_0xfe1d2,'weight':_0x1c3554,'skip':shouldSkipTranslation(_0x1518a1)||shouldSkipTranslation(_0x43b511)};_0x38ecc8[_0x13fe0b(0x32d,0x358,0x32d,0x356)](_0x1d1937);if(!_0x1d1937[_0x33d6bf(-0x11,0x24,-0x14,-0x4c)]&&_0x43b511){if(_0x27bb3f[_0x13fe0b(0x339,0x2f6,0x2e8,0x36f)](_0x27bb3f[_0x13fe0b(0x2f8,0x2e4,0x330,0x2cd)],_0x27bb3f['ZrTqc']))return _0x56bbb1[_0x33d6bf(0x60,-0x23,0x2f,0x78)](_0x33c681=>_0x33c681['test'](_0x4f2620[_0x33d6bf(0x0,0x41,0x2c,0x4e)]()));else _0x3ebb53[_0x13fe0b(0x32d,0x321,0x2ef,0x350)](_0x43b511),_0x3531f8['set'](_0x43b511[_0x33d6bf(-0x3e,0x27,0x4,0x49)+'e'](),_0x1d1937);}}else{if(_0x13fe0b(0x2bf,0x2f5,0x294,0x288)!==_0x27bb3f['ivFAk'])_0x59d7f9=!_0x4cb921,_0x5d6020+=_0x55fbcd;else{const _0x4acb45={'original':_0x1518a1,'cleaned':_0x1518a1,'prefix':'','suffix':'','weight':'','skip':shouldSkipTranslation(_0x1518a1)};_0x38ecc8[_0x33d6bf(0x46,0x62,0x68,0x8d)](_0x4acb45),!_0x4acb45[_0x33d6bf(0x12,-0x23,-0x14,0x8)]&&_0x1518a1&&(_0x3ebb53[_0x33d6bf(0x24,0x93,0x68,0x35)](_0x1518a1),_0x3531f8['set'](_0x1518a1[_0x33d6bf(-0x23,-0x4,0x4,-0x11)+'e'](),_0x4acb45));}}}return{'originalTags':_0x38ecc8,'cleanedTags':_0x3ebb53,'cleanedText':_0x27bb3f[_0x13fe0b(0x2be,0x2ea,0x29a,0x2e9)](tagsToJsonString,_0x3ebb53),'tagMap':_0x3531f8};}export function combineTranslationResult(_0x2c8381,_0x5f30a6){const _0x28447a={};_0x28447a[_0x4ced86(-0x52,-0x8,-0x94,-0x63)]=function(_0x65a4a0,_0xb22f3e){return _0x65a4a0+_0xb22f3e;},_0x28447a['EWBHq']=function(_0x105c4c,_0x53f0e8){return _0x105c4c===_0x53f0e8;},_0x28447a[_0x3d95bb(0x29b,0x2c2,0x28c,0x262)]='vpcLX',_0x28447a[_0x3d95bb(0x2cc,0x311,0x297,0x2e2)]=function(_0x1832d6,_0x515b21){return _0x1832d6===_0x515b21;},_0x28447a[_0x3d95bb(0x28c,0x2b4,0x254,0x2b3)]=_0x3d95bb(0x2d3,0x2a6,0x294,0x28f);function _0x4ced86(_0x1705b5,_0xebb5ca,_0x599ed8,_0x1af674){return _0x8410(_0x1705b5- -0x20f,_0x1af674);}function _0x3d95bb(_0x4703ad,_0x382538,_0x2aa929,_0x5bcb0c){return _0x8410(_0x4703ad-0xbc,_0x5bcb0c);}_0x28447a[_0x4ced86(-0x70,-0x63,-0x69,-0xb4)]=_0x4ced86(-0x38,0x17,0xd,-0x1e);const _0x2f5437=_0x28447a;if(!_0x2c8381||!Array['isArray'](_0x2c8381))return[];const _0x52c321={};if(_0x5f30a6&&_0x2f5437[_0x4ced86(0x1,0x1,-0x25,-0x4)](typeof _0x5f30a6,_0x2f5437[_0x3d95bb(0x28c,0x253,0x2d1,0x2d6)]))for(const [_0x387d5d,_0x169565]of Object['entries'](_0x5f30a6)){if(_0x2f5437['jPjyx']===_0x2f5437[_0x3d95bb(0x25b,0x23a,0x231,0x280)])_0x52c321[_0x387d5d[_0x4ced86(-0x44,-0x88,-0x1d,-0xe)+'e']()]=_0x169565;else{if(_0x1bd85c&&_0x4614ff[_0x4ced86(-0x27,-0x3f,-0x36,0x1e)])return _0x1df004[_0x3d95bb(0x2a4,0x2cc,0x2b9,0x266)]();return _0x2f5437[_0x3d95bb(0x279,0x277,0x232,0x296)](_0x25efa9['now']()['toString'](0x7b*-0x29+0x1dc8+-0x9f1),_0x2c4d7d[_0x3d95bb(0x2b4,0x275,0x2b5,0x2b3)]()[_0x3d95bb(0x271,0x264,0x2bb,0x280)](-0x2e7*0x4+-0x159a+0x215a)[_0x4ced86(-0x28,0x5,-0x58,-0x1c)](0x2*0x116b+0xcbb+-0x983*0x5));}}return _0x2c8381[_0x4ced86(-0x67,-0x6f,-0xa7,-0x8e)](_0x1989d3=>{function _0x492cac(_0x455b1a,_0x4b1c79,_0x5e29ce,_0x1624cc){return _0x3d95bb(_0x5e29ce- -0x18d,_0x4b1c79-0x1,_0x5e29ce-0x4d,_0x4b1c79);}const _0x15eb40={'XLNay':function(_0x1441f4,_0x33a86e){return _0x1441f4(_0x33a86e);}};function _0x41f425(_0x184f89,_0x5494b4,_0x147e86,_0x349867){return _0x3d95bb(_0x349867- -0x3f0,_0x5494b4-0x8d,_0x147e86-0x160,_0x184f89);}if(_0x2f5437['EWBHq'](_0x41f425(-0x139,-0x13b,-0xd2,-0xf6),_0x2f5437['ObpKm'])){const {original:_0x5868be,cleaned:_0x493d3c,skip:_0x3f1135}=_0x1989d3;if(_0x3f1135){const _0x14f92a={};return _0x14f92a[_0x492cac(0x11b,0x109,0x11d,0x125)]=_0x5868be,_0x14f92a[_0x41f425(-0x151,-0x12a,-0xe9,-0xff)+'n']='',_0x14f92a[_0x492cac(0x14a,0x148,0x103,0x11f)]=_0x493d3c,_0x14f92a[_0x41f425(-0x145,-0x102,-0x145,-0x151)]=!![],_0x14f92a;}const _0x178131=_0x52c321[_0x493d3c[_0x492cac(0x125,0x11d,0xfa,0x143)+'e']()]||'',_0x58dc17={};return _0x58dc17[_0x41f425(-0x18e,-0x194,-0x13d,-0x146)]=_0x5868be,_0x58dc17[_0x41f425(-0xc9,-0xca,-0x133,-0xff)+'n']=_0x178131,_0x58dc17[_0x41f425(-0x12b,-0x191,-0x17b,-0x160)]=_0x493d3c,_0x58dc17['skipped']=![],_0x58dc17;}else _0x15eb40[_0x41f425(-0x189,-0x168,-0x1bc,-0x193)](_0x2ad7eb,_0x5cd7f1[_0x41f425(-0xed,-0x12d,-0x13b,-0x106)]);});}export function formatTranslationDisplay(_0x2d9186,_0x4e9cc9={}){const _0x5ec7bf={};_0x5ec7bf[_0x29d9c5(0x38d,0x38f,0x351,0x3c5)]='st-chatu8:'+_0x29d9c5(0x3fd,0x3fc,0x433,0x3fc)+_0x26d18d(0x68,0x60,0x8f,0xc8),_0x5ec7bf[_0x26d18d(0x128,0x95,0xda,0x102)]=function(_0xb3512f,_0x4204c7){return _0xb3512f+_0x4204c7;},_0x5ec7bf[_0x26d18d(0xc2,0x99,0xd5,0x116)]=function(_0x47719f,_0x24bb2a){return _0x47719f!==_0x24bb2a;},_0x5ec7bf[_0x26d18d(0xcf,0x9d,0xd7,0x9a)]=_0x26d18d(0x5c,0x77,0xae,0x78),_0x5ec7bf[_0x29d9c5(0x392,0x3d5,0x378,0x36b)]=function(_0x333ae1,_0x4574df){return _0x333ae1===_0x4574df;},_0x5ec7bf[_0x26d18d(0x96,0xa8,0xb9,0xcb)]='qItbj',_0x5ec7bf['ThWsj']=function(_0x7f13dd,_0x3d1b39){return _0x7f13dd!==_0x3d1b39;},_0x5ec7bf[_0x29d9c5(0x40b,0x3d8,0x3f3,0x435)]=_0x26d18d(0xb9,0xa3,0xc1,0x73);const _0x502bcb=_0x5ec7bf,{separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0x4e9cc9;function _0x29d9c5(_0x10684f,_0x298770,_0x15d915,_0x538764){return _0x8410(_0x10684f-0x1e3,_0x298770);}if(!_0x2d9186||!Array['isArray'](_0x2d9186))return'';function _0x26d18d(_0x45dc65,_0x843394,_0x225eb1,_0x1ea1e9){return _0x8410(_0x225eb1- -0x11a,_0x1ea1e9);}return _0x2d9186['map'](_0x5c2a35=>{function _0x2fa00a(_0x2ff75a,_0x1ead98,_0x5efe96,_0x2fbd4c){return _0x29d9c5(_0x2fbd4c- -0x59f,_0x5efe96,_0x5efe96-0x105,_0x2fbd4c-0x113);}function _0x38ab43(_0xe2f40a,_0x40a854,_0x77194b,_0x5b5642){return _0x29d9c5(_0x5b5642-0x184,_0xe2f40a,_0x77194b-0x1c0,_0x5b5642-0x138);}if(_0x502bcb['AqyIP'](_0x502bcb['iqBKo'],_0x2fa00a(-0x1f9,-0x21f,-0x23b,-0x1f4)))_0x128fcc[_0x2fa00a(-0x226,-0x1f5,-0x1d2,-0x217)](_0x502bcb['midJn']),_0x3451a0=!![];else{if(_0x5c2a35[_0x38ab43(0x511,0x576,0x54d,0x54a)]){if(_0x502bcb[_0x38ab43(0x533,0x4d1,0x555,0x516)](_0x502bcb[_0x38ab43(0x54e,0x565,0x550,0x53a)],_0x2fa00a(-0x167,-0x19b,-0x1cc,-0x1af)))return showOriginal?_0x5c2a35['original']:'';else{if(_0x274df['skipped'])return _0x1037d6?_0x2f9285[_0x2fa00a(-0x215,-0x200,-0x1bb,-0x1ce)]:'';const _0x231cd1=[];if(_0x235eb7)_0x231cd1['push'](_0x41741d[_0x2fa00a(-0x1a1,-0x1e9,-0x1e7,-0x1ce)]);return _0x308331&&_0x4e7b7b[_0x38ab43(0x5a0,0x583,0x5a5,0x59c)+'n']&&_0x231cd1['push']('('+_0x1cf4ea[_0x38ab43(0x585,0x56a,0x5da,0x59c)+'n']+')'),_0x231cd1[_0x38ab43(0x553,0x566,0x543,0x534)]('\x20');}}const _0x58eedc=[];if(showOriginal)_0x58eedc[_0x38ab43(0x593,0x57a,0x591,0x596)](_0x5c2a35['original']);if(showTranslation&&_0x5c2a35[_0x2fa00a(-0x161,-0x188,-0x152,-0x187)+'n']){if(_0x502bcb[_0x38ab43(0x538,0x5a5,0x553,0x58b)](_0x2fa00a(-0x20b,-0x1db,-0x20d,-0x220),_0x502bcb[_0x38ab43(0x578,0x599,0x5be,0x58f)]))_0x58eedc['push']('('+_0x5c2a35[_0x38ab43(0x565,0x5b6,0x55d,0x59c)+'n']+')');else{const _0x12e4dc=_0x1940e5[_0x2fa00a(-0x21c,-0x22b,-0x25e,-0x21e)](-0x1b39+0x1*-0x1a74+0x35ad*0x1,_0x2eec51)[_0x38ab43(0x582,0x56b,0x59f,0x55a)](),_0x23699f=_0x274cb2[_0x2fa00a(-0x1df,-0x1fd,-0x1fd,-0x21e)](_0x502bcb[_0x2fa00a(-0x1ff,-0x1b8,-0x20b,-0x1c8)](_0x99edf,0xa9b+-0xf0c+0x472))['trim']();if(_0x12e4dc)_0x4ee110[_0x12e4dc]=_0x23699f;}}return _0x58eedc['join']('\x20');}})[_0x29d9c5(0x40f,0x421,0x3f8,0x40a)](Boolean)['join'](separator);}export async function translatePromptTags(_0xf466d4){function _0x17265b(_0x2927a8,_0x33de71,_0xf9f72e,_0x5e6293){return _0x8410(_0x33de71-0x238,_0x2927a8);}function _0x1b9aa0(_0x110b21,_0x273279,_0x586aaf,_0x55a8db){return _0x8410(_0x586aaf-0x337,_0x110b21);}const _0x13f0d4={'gjMWg':function(_0x517c58,_0x16ec6f){return _0x517c58(_0x16ec6f);}},{originalTags:_0x45c2e8,cleanedText:_0x47a4a0}=_0x13f0d4['gjMWg'](preprocessPromptForTranslation,_0xf466d4);if(!_0x47a4a0){const _0x486e9e={};return _0x486e9e[_0x1b9aa0(0x561,0x5b1,0x55e,0x537)]=[],_0x486e9e[_0x1b9aa0(0x553,0x53f,0x549,0x55f)+'t']='',_0x486e9e[_0x17265b(0x44d,0x453,0x468,0x43c)+'gs']=[],_0x486e9e;}try{const _0x568085=await _0x13f0d4[_0x17265b(0x4a8,0x45a,0x40d,0x46f)](callTranslation,_0x47a4a0),_0x58ab31=parseTranslationResult(_0x568085),_0x1aeb96=combineTranslationResult(_0x45c2e8,_0x58ab31),_0x579f03=_0x13f0d4[_0x1b9aa0(0x557,0x506,0x559,0x563)](formatTranslationDisplay,_0x1aeb96),_0x393654={};return _0x393654[_0x17265b(0x421,0x45f,0x412,0x490)]=_0x1aeb96,_0x393654[_0x17265b(0x43c,0x44a,0x477,0x429)+'t']=_0x579f03,_0x393654[_0x1b9aa0(0x54d,0x532,0x552,0x59a)+'gs']=_0x45c2e8,_0x393654;}catch(_0x1ef8ae){console[_0x17265b(0x467,0x478,0x4a6,0x470)](_0x1b9aa0(0x567,0x574,0x535,0x4e9)+_0x17265b(0x3d4,0x3f3,0x3d5,0x42f)+':',_0x1ef8ae);throw _0x1ef8ae;}}export function parseTranslationResult(_0x4583b7){const _0x4d1331={'JbSpZ':function(_0x9b45b3,_0x23233d){return _0x9b45b3(_0x23233d);},'kUGPK':function(_0x52a5aa,_0x4879bf){return _0x52a5aa===_0x4879bf;},'lWWOa':_0x408f5b(0x1c6,0x209,0x1dc,0x20d),'tZXKu':function(_0x30223e,_0xd0b57e){return _0x30223e!==_0xd0b57e;},'eNsOw':function(_0x3515a6,_0x57886f){return _0x3515a6!==_0x57886f;},'dChrq':'st-chatu8:'+_0x2ff46(0x116,0x11a,0x159,0x142)+_0x2ff46(0xca,0x106,0xb7,0x10a),'mUPxc':function(_0x9941fd,_0x1c54ed){return _0x9941fd(_0x1c54ed);},'cnjQp':function(_0x5b50b0,_0x2814ca){return _0x5b50b0===_0x2814ca;},'JLAlM':_0x408f5b(0x1ae,0x1ef,0x1c8,0x1b4),'epgdl':function(_0x47254c,_0x93e05e){return _0x47254c>_0x93e05e;},'BROiu':function(_0x316042,_0x520674){return _0x316042+_0x520674;}};if(!_0x4583b7)return{};try{const _0x2abdea=_0x4583b7[_0x408f5b(0x18b,0x15a,0x138,0x1b1)](/\{[\s\S]*\}/);if(_0x2abdea){const _0x593f5a=JSON[_0x2ff46(0x9e,0xb7,0xe5,0xed)](_0x2abdea[-0x235d+0x1eaf+0x2*0x257]);if(_0x4d1331['kUGPK'](typeof _0x593f5a,_0x4d1331['lWWOa'])&&_0x4d1331[_0x2ff46(0xf1,0xdd,0xdc,0xe1)](_0x593f5a,null))return _0x593f5a;}}catch(_0x3a37d9){if(_0x4d1331[_0x408f5b(0x1b8,0x1ef,0x1a4,0x16d)](_0x2ff46(0x162,0x14c,0x135,0x198),'oTybx')){const _0x4dda4f=_0x225fad[0x12e3+-0x1620*0x1+-0x53*-0xa]||'',_0xc2631=(_0x1bb914[0x1*-0xeb5+0x2c4+0xbf3]||'')[_0x408f5b(0x1a2,0x1c5,0x170,0x19f)](),_0x1351ab=_0x288c5e[0x1*0x259d+-0x15ff*0x1+-0xf9b]||'',_0x66de36=_0x52480d[-0x230c+0x1b4e+0x7c2]||'',_0x1de930={'original':_0x4ad64e,'cleaned':_0xc2631,'prefix':_0x4dda4f,'suffix':_0x1351ab,'weight':_0x66de36,'skip':_0x4d1331[_0x2ff46(0x141,0x110,0x134,0xef)](_0xca502e,_0x2b1fa1)||_0x2979f3(_0xc2631)};_0x5045a3[_0x2ff46(0x17f,0x143,0x168,0x10f)](_0x1de930),!_0x1de930['skip']&&_0xc2631&&(_0x4de0e1['push'](_0xc2631),_0x3d2fc0['set'](_0xc2631[_0x2ff46(0xe9,0xdf,0x12f,0x95)+'e'](),_0x1de930));}else console[_0x2ff46(0x110,0x153,0x129,0x14a)](_0x4d1331[_0x2ff46(0xb0,0xd7,0x106,0xd4)],_0x3a37d9[_0x2ff46(0xb9,0xda,0xde,0xac)]);}const _0x330e2e=_0x4d1331[_0x2ff46(0x15a,0x12d,0xe1,0x16d)](String,_0x4583b7)[_0x2ff46(0xec,0xca,0xf4,0xc0)](/[\r\n]+/g,'\x20')[_0x408f5b(0x165,0x19d,0x183,0x18c)](/^[\s"'`]+|[\s"'`]+$/g,'')[_0x408f5b(0x1a2,0x164,0x1a5,0x1b1)]();function _0x408f5b(_0x37977c,_0x57855b,_0x4193f5,_0x475a4c){return _0x8410(_0x37977c- -0x51,_0x57855b);}const _0x4ff941=_0x330e2e[_0x408f5b(0x166,0x197,0x193,0x124)](/[,，]/)['map'](_0x50482f=>_0x50482f['trim']())[_0x2ff46(0x162,0x140,0x15a,0x115)](Boolean),_0x20cf0b={};function _0x2ff46(_0x12f40a,_0x251753,_0x5efcbb,_0x4d3f2b){return _0x8410(_0x251753- -0xec,_0x5efcbb);}for(const _0x4f4950 of _0x4ff941){if(_0x4d1331[_0x408f5b(0x199,0x15d,0x1b8,0x186)](_0x4d1331[_0x2ff46(0x149,0x116,0x100,0xca)],_0x4d1331[_0x408f5b(0x1b1,0x1f5,0x1e1,0x170)])){const _0x5e050e=_0x4f4950[_0x408f5b(0x1d0,0x1e3,0x1d3,0x20a)]('\x5c');if(_0x4d1331['epgdl'](_0x5e050e,0x9*0x16c+0x270e+0x2*-0x19ed)){const _0x21ae86=_0x4f4950[_0x2ff46(0xb8,0xb2,0x100,0x84)](-0xcff+0x1b*0x14f+-0x1656,_0x5e050e)[_0x408f5b(0x1a2,0x14f,0x1a6,0x1e6)](),_0x2e4632=_0x4f4950[_0x408f5b(0x14d,0x146,0x119,0x110)](_0x4d1331[_0x408f5b(0x1e1,0x196,0x231,0x22d)](_0x5e050e,-0x3*0x648+0x1*0x142+0x39*0x4f))[_0x2ff46(0xf7,0x107,0x134,0x113)]();if(_0x21ae86)_0x20cf0b[_0x21ae86]=_0x2e4632;}}else return _0x4ca15f?_0x4acafd[_0x2ff46(0xe8,0x102,0x120,0x142)]:'';}return _0x20cf0b;}function generateRequestId(){function _0x549c80(_0x40e98a,_0x5ac51e,_0x2348a2,_0x59b50f){return _0x8410(_0x2348a2-0x300,_0x40e98a);}const _0x22dd97={};function _0x20d72a(_0xf086c1,_0xa74341,_0x241cd3,_0x16bf20){return _0x8410(_0xf086c1-0x2e1,_0x241cd3);}_0x22dd97['CSaDw']=function(_0xbb4ba0,_0xed89){return _0xbb4ba0+_0xed89;};const _0xa8fa18=_0x22dd97;if(crypto&&crypto[_0x20d72a(0x4c9,0x4a2,0x48a,0x4ae)])return crypto[_0x20d72a(0x4c9,0x4d4,0x49e,0x4b4)]();return _0xa8fa18[_0x549c80(0x4c3,0x539,0x4e9,0x511)](Date[_0x20d72a(0x4ad,0x4df,0x4ca,0x47b)]()[_0x549c80(0x499,0x47a,0x4b5,0x477)](-0x482+-0x1366+0xab*0x24),Math[_0x549c80(0x50b,0x515,0x4f8,0x50a)]()[_0x20d72a(0x496,0x460,0x46b,0x450)](0x3b+-0x1*-0x812+0x829*-0x1)['substring'](-0x1886*0x1+-0x119*0x21+0x3cc1));}function _0xb11a(){const _0x3d4a53=['yxbWBhK','BvvqEgm','iefjioIUVUE9RUw3SUE7N+s4GowiSa','B3jPz2LUywXuyq','zw5LCG','DxD1sfK','rhjutLC','BgvUz3rO','mtKWodu1nMLTEuDtsG','Aw5KzxHpzG','z2Pnv2C','ufjptvbux1jfuq','vgHxC2O','vgz0BNO','iow3SUAuTUwiSoE/U+IVKsbmte0','CMvZDwX0CW','v1nTEwO','C2vHCMnO','ioIVT+AXGUE/U+IVKsbmte0G','rvnu','zMLSDgvY','DMDIAfu','CMvZDwX0','ChvZAa','DgrPyxa','vuvtva','qLjpAxu','Egn2s04','ug9fDNq','DhjHBNnSyxrPBW','ue9ou0u','u3Lvv0e','B1r5yNG','keLeoIa','sKfPALG','Axvmu0i','CMvTB3zLtgLZDa','57+76k+r5AsX6lsLoIa','DNbJtfG','D2fYBG','zxjYB3i','DLPgqMG','s1rbz3q','C2XPy2u','ALbQExG','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','weXoyxK','uhjTDxy','CgfYC2u','kcGOlISPkYKRkq','Bg9N','txjUEfC','BMfTzq','BwfW','ieXmtsdORR7NVA7POBxPNAi','BwLKsM4','tMnxsuy','C2rxBNG','qvrjt05Fr0vuxW','sxzYD00','Bvf4sg8','BfzStxe','z2T5AKi','57+76k+rieXmtsdMIAFOOyZOTOu','C2TPCa','nJeWodHmrgn5Euy','Dg9tDhjPBMC','CMvWBgfJzq','C3bSAxq','ufj0Dfq','ntGZntK1nKLMyMTWuW','qvfOyw0','ioE/U+IVKEApKoEKUUIVJEAGH+ETVUwKSEI0Pq','BxpVViK','u2H3wvy','uLjKAhm','AxnbCNjHEq','uxDOtNO','swfVEuG','D2Lwwwi','zenOCNe','C3rYAw5N','uuLzvKW','BwvZC2fNzq','sMjfrMC','BM95v0C','DfPys3u','nwftA1zUBW','Dg9mB3DLCKnHCW','BM93','AM9PBG','y29UDgvUDa','zMfxsvq','tfryveG','Aw5HtuO','y29UC3rYDwn0BW','teDuAvi','y2XLyw5Lza','CfP1uMi','A2H4CuW','rhrREvu','A1vPqxC','wgH3seq','m3PozM91sq','AhnRthG','Bwf0y2G','B1zIr1K','wMHXwMS','t2jWs20','qvrjt05FuKvtua','ode0mdq2CNLWtK1I','rw5SDeq','C2TPChbLza','wwLTAKm','CM9Szq','tgzZEha','C3vIC3rYAw5N','CMfUzg9Tvvvjra','q1nHrhC','y25Quxa','tMzQAwq','uxPjEfm','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','B3jPz2LUywW','qxf5sva','s3rIzfi','Axfcs28','5BcD6k+v5PEN5Qc85BYpoG','DhjPBq','Dg53qvi','zuTrrfm','C29Tzq','z1jIANm','CMfUzg9T','teXnx1rsqu5tta','wNjuCwm','DhDdtuO','sMjtCfO','ExjSuhi','C3qTy2HHDhu4oG','svfuELO','otqZota5oeLpqM9LAa','C3vJy2vZCW','sKXbBe0','t05trq','mtC1n2ncww5Hqq','qwjVCNrfCNjVCG','iePtt07OP6pMNPdLPlhOTkxVViW','ufjptvbux1jfuW','otKXnZKXowf5twTnrq','zu5Zt3C','ww91CuS','tLbPsLa','wwfHq20','CuL0yMO','zw1PDa','tg5drg4','rxr2Cem','DNnjEuq','zgLZCgXHEvrLEa','tfzjEwO','DgvZDa','zeveAuC','mJu5nZu3ntbQs2HlyLm','B2jQzwn0'];_0xb11a=function(){return _0x3d4a53;};return _0xb11a();}export function LLM_TRANSLATION_GET_PROMPT(){function _0x402565(_0xd72854,_0x568a41,_0x37bc78,_0x473a13){return _0x8410(_0xd72854- -0xb3,_0x37bc78);}const _0x23f2ea={'YimjC':function(_0x396702,_0x31d813){return _0x396702===_0x31d813;},'KtbdR':_0x402565(0x10b,0x133,0xeb,0x104),'QzIxS':_0x402565(0x142,0xf7,0x192,0x14e),'gRbjs':function(_0x5096c9,_0x297739){return _0x5096c9!==_0x297739;},'AQham':function(_0x2b50b8,_0x812cf4){return _0x2b50b8(_0x812cf4);},'khxqL':function(_0x55efef,_0x1cec19){return _0x55efef!==_0x1cec19;},'XScaB':function(_0x32bba1,_0x255690){return _0x32bba1!==_0x255690;},'Nfjid':_0x442e33(0x566,0x556,0x5b4,0x52c),'dEDiG':'获取翻译提示词超时','PoEvt':function(_0x27161f){return _0x27161f();},'uwuHY':function(_0xd4b541,_0x6068ce,_0x42d9f8){return _0xd4b541(_0x6068ce,_0x42d9f8);}};function _0x442e33(_0x407058,_0xdae39f,_0x456a80,_0x2d1494){return _0x8410(_0x407058-0x38d,_0xdae39f);}return new Promise((_0x566cb9,_0x5c045d)=>{const _0x5ea041={'YouqK':function(_0x347009,_0x469d66){function _0x439d57(_0x44e266,_0x417b58,_0x1395f3,_0x58453e){return _0x8410(_0x417b58-0x3a7,_0x1395f3);}return _0x23f2ea[_0x439d57(0x5a5,0x57d,0x552,0x552)](_0x347009,_0x469d66);},'inaMJ':function(_0x51355d,_0x599371){return _0x23f2ea['XScaB'](_0x51355d,_0x599371);},'sbhLN':_0x23f2ea[_0x1642b8(0x16c,0x128,0x131,0x1aa)],'IvrwM':function(_0x23595e,_0x24f130){return _0x23595e(_0x24f130);},'kUiAw':_0x23f2ea[_0x2c2209(0x188,0x16e,0x15f,0x178)]},_0x338aeb=_0x23f2ea[_0x1642b8(0x1b5,0x1a7,0x1a9,0x1fe)](generateRequestId);console[_0x1642b8(0x126,0xff,0xdc,0x103)](_0x2c2209(0x171,0x141,0x14e,0x12c)+_0x2c2209(0x113,0x159,0xc6,0xfc)+'\x20(ID:\x20'+_0x338aeb+')');const _0x1226d7=_0x10a1ba=>{function _0x2ce8fa(_0x5c6081,_0x1006fb,_0x1f0560,_0x2276de){return _0x1642b8(_0x2276de-0x57,_0x1f0560,_0x1f0560-0x165,_0x2276de-0xf0);}function _0x309050(_0x19d29e,_0xe2757e,_0x438d81,_0x4b852b){return _0x1642b8(_0x438d81- -0x176,_0x19d29e,_0x438d81-0x1a4,_0x4b852b-0xff);}if(_0x23f2ea[_0x309050(-0x29,0x14,-0x11,0x6)](_0x23f2ea[_0x309050(-0x1b,-0x6,-0x5,0xb)],_0x23f2ea[_0x2ce8fa(0x1f1,0x1ac,0x1c7,0x1c4)])){const _0x46fb31=_0x5cae6f[_0x2ce8fa(0x1f7,0x176,0x1d3,0x1b4)](/\{[\s\S]*\}/);if(_0x46fb31){const _0xe88256=_0x1410fd[_0x309050(-0xa0,-0x69,-0x52,-0x16)](_0x46fb31[-0x1*-0x1929+0x1*-0x13b5+-0x574]);if(typeof _0xe88256==='object'&&_0x5ea041[_0x309050(-0x34,-0x15,0x15,0x7)](_0xe88256,null))return _0xe88256;}}else{if(_0x23f2ea[_0x2ce8fa(0x1f8,0x204,0x220,0x1cf)](_0x10a1ba['id'],_0x338aeb))return;eventSource[_0x2ce8fa(0x25b,0x259,0x1f6,0x214)+_0x309050(-0x12,0x20,0x27,-0x26)](eventNames[_0x309050(-0x35,0x48,0x4,-0x38)+_0x309050(-0x47,-0x48,-0x48,0x9)+_0x2ce8fa(0x223,0x222,0x20b,0x1df)+_0x309050(0x21,0x27,0x41,0x50)],_0x1226d7);const {prompt:_0x176b37}=_0x10a1ba;console[_0x309050(-0x5,-0x1,-0x50,-0x6d)](_0x309050(0x44,0x12,0x9,0x58)+_0x2ce8fa(0x17c,0x189,0x1d2,0x1c5)+_0x309050(0x2a,0xb,0x44,0x4a)+_0x338aeb+'):',_0x176b37),_0x23f2ea[_0x309050(0xe,-0x59,-0x3b,-0x86)](_0x566cb9,_0x176b37);}};function _0x2c2209(_0x32e5a3,_0x57ecf0,_0x40ecaa,_0x4bad01){return _0x442e33(_0x32e5a3- -0x41a,_0x4bad01,_0x40ecaa-0x137,_0x4bad01-0x35);}eventSource['on'](eventNames['LLM_TRANSL'+_0x1642b8(0x12e,0xf9,0x15e,0xdc)+_0x2c2209(0x17a,0x131,0x175,0x176)+'PONSE'],_0x1226d7);function _0x1642b8(_0x3d02b8,_0x29e6a3,_0x5c7d2d,_0x136a0a){return _0x442e33(_0x3d02b8- -0x40c,_0x29e6a3,_0x5c7d2d-0xa2,_0x136a0a-0x1df);}const _0x126cc4={};_0x126cc4['id']=_0x338aeb,eventSource['emit'](eventNames['LLM_TRANSL'+_0x1642b8(0x12e,0x176,0x171,0xf9)+_0x2c2209(0x196,0x152,0x14e,0x1b3)+_0x2c2209(0x1a4,0x1d7,0x1d1,0x15a)],_0x126cc4),_0x23f2ea[_0x2c2209(0x190,0x1b3,0x1b7,0x18c)](setTimeout,()=>{function _0x1ee32a(_0x1caaca,_0x3bd9e0,_0x55e236,_0x3a3082){return _0x1642b8(_0x3bd9e0-0x86,_0x3a3082,_0x55e236-0xbe,_0x3a3082-0x7d);}function _0xc24d67(_0x2a4572,_0x49a8bc,_0x362d83,_0x1f6ef1){return _0x1642b8(_0x362d83-0xc1,_0x1f6ef1,_0x362d83-0x105,_0x1f6ef1-0x95);}if(_0x5ea041[_0x1ee32a(0x21b,0x1d8,0x1ec,0x208)](_0x5ea041['sbhLN'],'gXYEp'))eventSource[_0xc24d67(0x2c1,0x261,0x27e,0x258)+_0xc24d67(0x2b1,0x249,0x25e,0x2a4)](eventNames[_0xc24d67(0x208,0x251,0x23b,0x285)+_0x1ee32a(0x191,0x1b4,0x1a1,0x18b)+_0x1ee32a(0x202,0x20e,0x1cf,0x213)+_0x1ee32a(0x280,0x23d,0x282,0x262)],_0x1226d7),_0x5ea041[_0xc24d67(0x1dc,0x1b7,0x1f0,0x1d9)](_0x5c045d,new Error(_0x5ea041[_0x1ee32a(0x1b3,0x1df,0x1ec,0x1ff)]));else{const _0x3c6644=_0x50255d['indexOf']('\x5c');if(_0x3c6644>-0x147d+0x2*0xf5d+-0xa3d){const _0x3da232=_0x595945[_0x1ee32a(0x1d5,0x1a5,0x178,0x1f5)](-0x7b5+0xd10+-0x55b,_0x3c6644)['trim'](),_0x4deedb=_0x1b8ab2[_0x1ee32a(0x16a,0x1a5,0x1ac,0x19b)](_0x3c6644+(0x2f*0x79+-0x2*0x10a9+0xb1c))[_0x1ee32a(0x1eb,0x1fa,0x22c,0x1df)]();if(_0x3da232)_0x265912[_0x3da232]=_0x4deedb;}}},-0x8e6+0x2509+0xaed);});}export function LLM_TRANSLATION(_0x444b1f,{timeoutMs:timeoutMs=-0x1b8af+0xa3*0x1ab+-0x1932e*-0x1}={}){function _0x3de9b9(_0x9bced2,_0x5fd2a0,_0x2849a8,_0x2ed92a){return _0x8410(_0x2849a8-0x341,_0x2ed92a);}function _0x531153(_0x4a65a5,_0x5733b2,_0xbcbe5d,_0x42329b){return _0x8410(_0x5733b2-0x343,_0x42329b);}const _0x54cfe9={'TybPT':'(((.+)+)+)'+'+$','LnCDn':function(_0x1dcbd9,_0x772992){return _0x1dcbd9!==_0x772992;},'EnltD':_0x3de9b9(0x4f6,0x522,0x516,0x4ff),'PRttT':function(_0x1d3523,_0x578fa9){return _0x1d3523(_0x578fa9);},'sdWnx':function(_0xdaec98,_0x56d1f8){return _0xdaec98!==_0x56d1f8;},'lVlMq':function(_0x42829a){return _0x42829a();},'tdiap':_0x531153(0x55f,0x548,0x59a,0x505),'SyUWA':function(_0x32ec15,_0x1d5e19){return _0x32ec15===_0x1d5e19;},'KIUWx':_0x531153(0x559,0x50a,0x53d,0x4f5),'ujTiv':_0x531153(0x52c,0x512,0x565,0x4cd),'LVIyj':function(_0x2cd54b){return _0x2cd54b();},'twCMJ':function(_0x2bf1d2,_0x2066fc,_0x8b4b28){return _0x2bf1d2(_0x2066fc,_0x8b4b28);}};return new Promise((_0x422df3,_0x31d78f)=>{function _0x5b6748(_0xe99ba8,_0x3168f5,_0x322468,_0x302fe5){return _0x531153(_0xe99ba8-0x7f,_0x302fe5- -0x3cf,_0x322468-0x4d,_0xe99ba8);}const _0x11a627={'yrlPr':function(_0x4f4e90,_0x3fa17f){return _0x54cfe9['PRttT'](_0x4f4e90,_0x3fa17f);}};function _0x5c4868(_0x2f01d5,_0x39e9f6,_0x30c720,_0x2c596e){return _0x3de9b9(_0x2f01d5-0x19b,_0x39e9f6-0x2,_0x2f01d5- -0x645,_0x30c720);}if(_0x54cfe9[_0x5c4868(-0xcd,-0xdb,-0xe7,-0xe4)](_0x54cfe9['KIUWx'],_0x54cfe9['ujTiv']))return _0x41031c[_0x5b6748(0x17a,0x104,0x122,0x129)]()[_0x5c4868(-0xdb,-0x12d,-0xb8,-0xfe)](YljgHk['TybPT'])[_0x5b6748(0x110,0x171,0x105,0x129)]()[_0x5c4868(-0x132,-0x179,-0x169,-0x13a)+'r'](_0x1f8fb9)[_0x5b6748(0x1aa,0x1c6,0x197,0x19d)](YljgHk['TybPT']);else{const _0x2bb175=_0x54cfe9[_0x5c4868(-0xf1,-0xec,-0xb2,-0xea)](generateRequestId);console[_0x5b6748(0xd4,0x137,0x138,0x119)](_0x5c4868(-0x106,-0xeb,-0xc3,-0x14f)+_0x5b6748(0x1bd,0x1a0,0x1dc,0x19e)+_0x5b6748(0x1a7,0x187,0x1e0,0x1ad)+_0x2bb175+')');let _0x4ba2d3=null;const _0x201568=()=>{function _0x38f303(_0x4c6f2c,_0x766ac2,_0x1b0a6a,_0x547218){return _0x5c4868(_0x766ac2-0x414,_0x766ac2-0x6d,_0x4c6f2c,_0x547218-0x74);}function _0x21dc94(_0x3f921e,_0x58db19,_0x469fe5,_0x34ae09){return _0x5b6748(_0x58db19,_0x58db19-0xc,_0x469fe5-0x113,_0x469fe5-0x1d4);}if(_0x54cfe9[_0x21dc94(0x354,0x382,0x357,0x34a)](_0x54cfe9[_0x38f303(0x2de,0x2f2,0x2b1,0x2bd)],_0x54cfe9['EnltD']))_0x1d97e8(),_0x11a627[_0x21dc94(0x342,0x30e,0x345,0x35a)](_0x2d0159,new _0x18d0e9('翻译\x20LLM\x20执行超'+'时（'+_0x591d20+_0x21dc94(0x351,0x2c9,0x304,0x337)));else{eventSource[_0x21dc94(0x37f,0x382,0x384,0x34f)+'ener'](eventNames[_0x21dc94(0x33c,0x37b,0x341,0x362)+'ATION_RESP'+_0x21dc94(0x378,0x346,0x34b,0x382)],_0x24302f);if(_0x4ba2d3)_0x54cfe9[_0x21dc94(0x31f,0x313,0x300,0x2ff)](clearTimeout,_0x4ba2d3);}},_0x24302f=_0x5b024c=>{if(_0x54cfe9[_0x39c24d(-0x165,-0x162,-0x193,-0x14a)](_0x5b024c['id'],_0x2bb175))return;_0x54cfe9[_0x39c24d(-0x198,-0x15e,-0x131,-0x165)](_0x201568);function _0x39c24d(_0x346476,_0x18faa5,_0x2e536a,_0x18bb15){return _0x5b6748(_0x18bb15,_0x18faa5-0x2c,_0x2e536a-0x179,_0x18faa5- -0x282);}console[_0x39c24d(-0x1b7,-0x169,-0x1bb,-0x18c)](_0x26474f(0x580,0x5ba,0x5d3,0x60a)+_0x39c24d(-0xe4,-0xe8,-0xc6,-0xd0)+'\x20执行结果\x20(ID:'+'\x20'+_0x2bb175+'):',_0x5b024c);function _0x26474f(_0x2628f9,_0x28b101,_0x27868b,_0x5e9e89){return _0x5c4868(_0x28b101-0x6c0,_0x28b101-0x122,_0x27868b,_0x5e9e89-0xda);}if(_0x5b024c[_0x26474f(0x5f9,0x5bd,0x5d5,0x606)])_0x54cfe9['PRttT'](_0x422df3,_0x5b024c[_0x39c24d(-0x9b,-0xe0,-0x128,-0x91)]);else{if(_0x5b024c[_0x26474f(0x638,0x5fc,0x615,0x5c7)]&&_0x5b024c[_0x26474f(0x5db,0x5fc,0x5d7,0x607)][_0x39c24d(-0x15f,-0x167,-0x175,-0x131)]===_0x54cfe9[_0x39c24d(-0xa6,-0xde,-0x100,-0x120)]){const _0x398c3=new Error(_0x5b024c[_0x26474f(0x5ec,0x5fc,0x638,0x5d5)][_0x26474f(0x555,0x582,0x547,0x574)]);_0x398c3[_0x26474f(0x53b,0x563,0x581,0x531)]=_0x54cfe9[_0x26474f(0x5cd,0x5ec,0x5ba,0x5a4)],_0x54cfe9[_0x26474f(0x56c,0x574,0x542,0x562)](_0x31d78f,_0x398c3);}else _0x31d78f(new Error(_0x5b024c[_0x26474f(0x5f6,0x5ea,0x5c0,0x5a4)]));}};eventSource['on'](eventNames['LLM_TRANSL'+_0x5b6748(0x104,0x18d,0x16e,0x154)+_0x5b6748(0x191,0x185,0x172,0x177)],_0x24302f);const _0x187070={};_0x187070['prompt']=_0x444b1f,_0x187070['id']=_0x2bb175,eventSource[_0x5c4868(-0xf6,-0xa7,-0xbd,-0x13b)](eventNames[_0x5c4868(-0x10b,-0xfa,-0x144,-0x15b)+'ATION_REQU'+_0x5c4868(-0xd9,-0xc4,-0xbd,-0x10f)],_0x187070),_0x4ba2d3=_0x54cfe9[_0x5b6748(0x182,0x1b9,0x135,0x16f)](setTimeout,()=>{function _0x13346b(_0x32f4b6,_0x57365b,_0x3a684d,_0x212c12){return _0x5b6748(_0x3a684d,_0x57365b-0x115,_0x3a684d-0xda,_0x32f4b6- -0x17);}function _0x4902c0(_0x36cfba,_0x510b44,_0x15a30f,_0x59278e){return _0x5b6748(_0x59278e,_0x510b44-0xb4,_0x15a30f-0x12b,_0x15a30f-0x82);}_0x54cfe9[_0x13346b(0x10d,0xeb,0x15c,0x14a)](_0x201568),_0x31d78f(new Error(_0x4902c0(0x1b7,0x1d4,0x1a8,0x194)+'时（'+timeoutMs+_0x13346b(0x119,0x168,0x137,0x12d)));},timeoutMs);}});}function _0x8410(_0xdf6e1f,_0x9dade0){_0xdf6e1f=_0xdf6e1f-(0x1*0x1aaa+-0x110*0xa+-0xe6e);const _0x2392be=_0xb11a();let _0x440ec3=_0x2392be[_0xdf6e1f];if(_0x8410['RhfMMT']===undefined){var _0x46a93d=function(_0x549b98){const _0x1fb2e7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4f81c8='',_0x6d7028='',_0x5717ff=_0x4f81c8+_0x46a93d;for(let _0x5c7a72=0x1b4b+-0x22e5+0x8b*0xe,_0x3497c7,_0x528512,_0x8c8191=0x1d*0xd3+0x55*-0x56+-0x18d*-0x3;_0x528512=_0x549b98['charAt'](_0x8c8191++);~_0x528512&&(_0x3497c7=_0x5c7a72%(0x1*0x1403+0xd2a+-0x2129*0x1)?_0x3497c7*(0x90*-0x45+-0x2049+0x4759)+_0x528512:_0x528512,_0x5c7a72++%(0x775*0x2+-0x18*0x172+0x13ca))?_0x4f81c8+=_0x5717ff['charCodeAt'](_0x8c8191+(0x108d+-0x14a9+0x426))-(0x2209+-0x10fa*-0x2+-0x43f3)!==-0x1736+-0x16*-0x66+0x56*0x2b?String['fromCharCode'](0x13*0x1af+0x1c7c+-0x2*0x1dbd&_0x3497c7>>(-(0x2261*0x1+-0x86*0x47+0x2cb)*_0x5c7a72&0x8*0x6b+0x1f46*0x1+-0x2298)):_0x5c7a72:0x85+-0x2611+0x258c){_0x528512=_0x1fb2e7['indexOf'](_0x528512);}for(let _0x212a25=-0x712+0xb1a*0x1+-0x2b*0x18,_0x2b5944=_0x4f81c8['length'];_0x212a25<_0x2b5944;_0x212a25++){_0x6d7028+='%'+('00'+_0x4f81c8['charCodeAt'](_0x212a25)['toString'](0x1*0x1d83+-0x17ff+0x15d*-0x4))['slice'](-(-0x1f63+-0xa35+0x1*0x299a));}return decodeURIComponent(_0x6d7028);};_0x8410['JreEnC']=_0x46a93d,_0x8410['JQgkxj']={},_0x8410['RhfMMT']=!![];}const _0x259105=_0x2392be[0x7f*0x23+0xf7f*0x1+-0x20dc],_0x464b82=_0xdf6e1f+_0x259105,_0x4028d1=_0x8410['JQgkxj'][_0x464b82];if(!_0x4028d1){const _0x184e8e=function(_0x458420){this['Kzgadv']=_0x458420,this['xRLgoQ']=[-0x18b2+0x1357*-0x1+0x2*0x1605,0x1*0x8e5+-0x1*0x23d+-0x6a8,-0xbf2*0x2+0x683+-0x5cb*-0x3],this['DhEuuA']=function(){return'newState';},this['FVdmEw']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['zdOzrb']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x184e8e['prototype']['QNGVHq']=function(){const _0x1b0956=new RegExp(this['FVdmEw']+this['zdOzrb']),_0x15fcf3=_0x1b0956['test'](this['DhEuuA']['toString']())?--this['xRLgoQ'][-0xae9+-0x82e*0x2+0x1b46]:--this['xRLgoQ'][-0x1*0x3bd+0x517*-0x1+-0x2*-0x46a];return this['iaCnHi'](_0x15fcf3);},_0x184e8e['prototype']['iaCnHi']=function(_0x5d3f8c){if(!Boolean(~_0x5d3f8c))return _0x5d3f8c;return this['HUhgcn'](this['Kzgadv']);},_0x184e8e['prototype']['HUhgcn']=function(_0x458485){for(let _0x20e403=0xc93+-0x1*-0xb51+-0x17e4,_0x3088a9=this['xRLgoQ']['length'];_0x20e403<_0x3088a9;_0x20e403++){this['xRLgoQ']['push'](Math['round'](Math['random']())),_0x3088a9=this['xRLgoQ']['length'];}return _0x458485(this['xRLgoQ'][0x4*-0x12f+0x1f5f+0x8e1*-0x3]);},new _0x184e8e(_0x8410)['QNGVHq'](),_0x440ec3=_0x8410['JreEnC'](_0x440ec3),_0x8410['JQgkxj'][_0x464b82]=_0x440ec3;}else _0x440ec3=_0x4028d1;return _0x440ec3;}export async function callTranslation(_0x19d1ab){const _0x468e17={'JAijX':function(_0x4f6c53,_0x17b92e){return _0x4f6c53!==_0x17b92e;},'ZhqZk':_0x4d9020(0x229,0x243,0x1e7,0x21f),'oVbGY':function(_0x31bff2,_0x5a93c8,_0x3df85c){return _0x31bff2(_0x5a93c8,_0x3df85c);},'Prmuv':_0x4d9020(0x2d6,0x2b6,0x2b8,0x292)+'n','NPiJP':function(_0x5dd20f,_0x5193dd){return _0x5dd20f||_0x5193dd;},'QIYVL':'user','Lfsxp':function(_0x47f416,_0x2fb922){return _0x47f416(_0x2fb922);},'xkuDP':function(_0x399ffb,_0x1567ae){return _0x399ffb(_0x1567ae);},'xcvKN':'翻译失败:'};function _0x4d9020(_0x151b87,_0x268dd3,_0x6a6608,_0x3cd82e){return _0x8410(_0x3cd82e-0x5d,_0x151b87);}function _0x4beab1(_0x270fd9,_0x309665,_0x138df3,_0x11ddac){return _0x8410(_0x309665- -0x287,_0x138df3);}try{if(_0x468e17[_0x4d9020(0x26d,0x28b,0x2cc,0x297)](_0x468e17['ZhqZk'],_0x468e17[_0x4beab1(-0x6b,-0xa9,-0x8c,-0x63)])){const _0x38a748=_0x505240[_0x4d9020(0x260,0x202,0x253,0x250)]();if(_0x38a748)_0x5b7969['push'](_0x38a748);_0x51df35='';}else{let _0x49484d=_0x468e17[_0x4beab1(-0xc2,-0xaa,-0x87,-0xf1)](buildPromptForRequestType,_0x468e17[_0x4d9020(0x1ff,0x1fd,0x1e4,0x1ff)],_0x468e17[_0x4d9020(0x284,0x288,0x254,0x268)](_0x19d1ab,''));_0x49484d=mergeAdjacentMessages(_0x49484d);const _0x55ce1a={};_0x55ce1a[_0x4d9020(0x26c,0x1f7,0x290,0x242)]=_0x468e17[_0x4d9020(0x242,0x215,0x24b,0x222)],_0x55ce1a[_0x4d9020(0x252,0x24b,0x208,0x22b)]=_0x19d1ab||'';const _0x100721=[..._0x49484d,_0x55ce1a];_0x468e17['Lfsxp'](updateCombinedPrompt,_0x100721);const _0x2e82d7=await _0x468e17['xkuDP'](LLM_TRANSLATION,_0x100721);return _0x2e82d7;}}catch(_0xf493e3){_0x468e17[_0x4beab1(-0x93,-0xa1,-0xb3,-0xbe)](addLog,_0x4d9020(0x2e7,0x248,0x2ea,0x29a)+_0xf493e3[_0x4beab1(-0xc9,-0xc1,-0x10b,-0x91)]),console[_0x4d9020(0x254,0x2db,0x2d6,0x29d)](_0x468e17[_0x4d9020(0x2a7,0x2aa,0x2be,0x290)],_0xf493e3);throw _0xf493e3;}}let isAiInitialized=![];export function initAiSettings(_0x372f3c){const _0x169d87={};_0x169d87[_0x1e2e8a(-0x16c,-0x14e,-0x126,-0x132)]=_0x1e2e8a(-0x128,-0x9e,-0xd9,-0x92)+_0x3f4e58(0x1c6,0x1aa,0x1f0,0x1f0)+_0x3f4e58(0x16f,0x139,0xfc,0x120);function _0x1e2e8a(_0x565eb5,_0x36dcf4,_0x1dcb0d,_0x4e0f21){return _0x8410(_0x1dcb0d- -0x2d7,_0x4e0f21);}function _0x3f4e58(_0x14f2e8,_0x5627ba,_0xc8f68e,_0x199726){return _0x8410(_0x5627ba- -0x70,_0x199726);}const _0x407157=_0x169d87;!isAiInitialized&&(console[_0x3f4e58(0x14f,0x135,0xf1,0x143)](_0x407157[_0x3f4e58(0x184,0x141,0x13c,0x144)]),isAiInitialized=!![]);}