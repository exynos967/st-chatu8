(function(_0x18e4e2,_0x25b082){function _0x5b3e85(_0x105aba,_0x273304,_0x37b51f,_0x4e0151){return _0x5aa7(_0x273304-0x3ad,_0x105aba);}function _0xc593bf(_0x4c36ed,_0x50f668,_0x2f576b,_0x1d74c6){return _0x5aa7(_0x2f576b-0x6,_0x4c36ed);}const _0x1af0bc=_0x18e4e2();while(!![]){try{const _0x534250=-parseInt(_0xc593bf(0x18a,0x226,0x1dd,0x1ca))/(-0x17d*-0x5+0xa02+-0x1172)+-parseInt(_0x5b3e85(0x54a,0x592,0x564,0x5a2))/(0x1*-0x23e1+0x1188+0x125b)+parseInt(_0x5b3e85(0x545,0x558,0x56e,0x578))/(-0x1b07+-0x1980+0x348a)*(-parseInt(_0x5b3e85(0x5c1,0x58b,0x53e,0x5c7))/(0x42*-0x2b+0x1e8b*-0x1+0x29a5))+parseInt(_0x5b3e85(0x540,0x57a,0x574,0x559))/(0x1eb7+0x2*0x71+-0x1*0x1f94)*(parseInt(_0x5b3e85(0x5a7,0x56f,0x548,0x538))/(-0x21aa+-0x9*0x43c+0x47cc))+parseInt(_0xc593bf(0x1e9,0x1d9,0x1f4,0x226))/(0x31f+-0x9dd+0x6c5)*(parseInt(_0xc593bf(0x190,0x1e6,0x1d5,0x1ee))/(-0x3ea+-0xe7f*0x1+-0x1271*-0x1))+parseInt(_0xc593bf(0x17f,0x17f,0x1b2,0x1a5))/(-0x1*0x23bd+0xa87+0x193f)+parseInt(_0xc593bf(0x157,0x16c,0x189,0x187))/(-0x137a+-0x1b64+-0x5dd*-0x8);if(_0x534250===_0x25b082)break;else _0x1af0bc['push'](_0x1af0bc['shift']());}catch(_0x35ac31){_0x1af0bc['push'](_0x1af0bc['shift']());}}}(_0x8c26,0x29*-0x161+0x1*0xa8ae3+-0x3*0x2ebe));const _0x44153d=(function(){function _0x568dbe(_0x517fe5,_0x142ba2,_0x42789f,_0x3cdf2c){return _0x5aa7(_0x3cdf2c- -0xf2,_0x142ba2);}function _0x3c3598(_0x4c275a,_0x2083a0,_0x25f57c,_0x3dacfe){return _0x5aa7(_0x3dacfe- -0x26f,_0x4c275a);}const _0x3db448={'DpsNZ':_0x568dbe(0xec,0x69,0x79,0xb6),'lqtML':function(_0x4998e9,_0x4e37df){return _0x4998e9(_0x4e37df);},'gtCjt':_0x3c3598(-0xc7,-0x75,-0x6e,-0x93)+_0x3c3598(-0x123,-0xb7,-0x13e,-0x101)+':','eXKFl':'YqwDQ','RqAZo':_0x568dbe(0xdc,0xcf,0xca,0xee),'usaug':function(_0x4f8841,_0x1ae6b6){return _0x4f8841===_0x1ae6b6;},'LxNMd':_0x568dbe(0x72,0x3c,0x6a,0x7d)};let _0x2473dc=!![];return function(_0x29c367,_0x1d330f){const _0xf396d9={};_0xf396d9[_0x362a03(0x303,0x2f1,0x322,0x33d)]=_0x3db448[_0x56039d(-0x22,0x20,-0x9,-0x74)],_0xf396d9[_0x362a03(0x36f,0x394,0x372,0x335)]=function(_0x130c43,_0x3751cf){return _0x130c43===_0x3751cf;},_0xf396d9[_0x56039d(-0xa6,-0xe7,-0xd1,-0xf7)]=_0x3db448['eXKFl'],_0xf396d9['IrIFi']=_0x3db448['RqAZo'];const _0x34301a=_0xf396d9;function _0x362a03(_0x492d25,_0x39c440,_0x4ba8bb,_0x4371c1){return _0x3c3598(_0x4371c1,_0x39c440-0x8f,_0x4ba8bb-0x40,_0x4ba8bb-0x43a);}function _0x56039d(_0xcafe88,_0x2b1af2,_0x3e21ef,_0x5bc770){return _0x568dbe(_0xcafe88-0x1c2,_0x5bc770,_0x3e21ef-0x15f,_0xcafe88- -0x113);}if(_0x3db448[_0x362a03(0x3d3,0x36d,0x3b1,0x3d7)](_0x56039d(-0xb6,-0x63,-0xdc,-0xed),_0x3db448[_0x362a03(0x3a8,0x394,0x38a,0x3a3)])){if(_0x22c1e0[_0x362a03(0x368,0x2e1,0x32f,0x341)]&&_0x8faa29['error']['name']===_0x3db448['DpsNZ']){const _0x5d2fab=new _0x1a5db5(_0x4174cf[_0x362a03(0x30b,0x2f6,0x32f,0x331)]['message']);_0x5d2fab['name']=_0x3db448[_0x362a03(0x414,0x36b,0x3bf,0x374)],_0x3db448[_0x362a03(0x34f,0x336,0x33e,0x37e)](_0x1b5eb7,_0x5d2fab);}else _0x39de73(new _0x5319f7(_0x6f2e38[_0x362a03(0x321,0x354,0x34f,0x391)]));}else{const _0x5261d5=_0x2473dc?function(){function _0x39f37c(_0x4f5af7,_0x58b316,_0x5ac15e,_0x24388b){return _0x56039d(_0x58b316-0x21d,_0x58b316-0x1c5,_0x5ac15e-0x1d8,_0x24388b);}function _0x1972ac(_0x17fe20,_0x2c11e3,_0xc93134,_0x2d79ed){return _0x56039d(_0xc93134-0x534,_0x2c11e3-0x1c2,_0xc93134-0x18e,_0x2c11e3);}if(_0x34301a[_0x39f37c(0x211,0x1bf,0x1cd,0x1ba)](_0x34301a[_0x1972ac(0x4c6,0x466,0x48e,0x48c)],_0x34301a[_0x39f37c(0x1ec,0x1ec,0x1e1,0x1e7)])){_0x3278e0['error'](_0x34301a[_0x39f37c(0x146,0x16f,0x124,0x16c)],_0x5499f7);throw _0x49f1c2;}else{if(_0x1d330f){const _0x2a2892=_0x1d330f[_0x39f37c(0x1e6,0x1d5,0x1b2,0x1a3)](_0x29c367,arguments);return _0x1d330f=null,_0x2a2892;}}}:function(){};return _0x2473dc=![],_0x5261d5;}};}()),_0x3f338e=_0x44153d(this,function(){function _0x20053d(_0x37f09d,_0x3e1898,_0x4fc9db,_0x4a9e30){return _0x5aa7(_0x4a9e30- -0x1dd,_0x4fc9db);}const _0xa5471d={};_0xa5471d['ahdND']=_0x322052(-0x1b3,-0x1a8,-0x205,-0x201)+'+$';function _0x322052(_0xa9f64a,_0x3cf05c,_0x3d5d04,_0x56534a){return _0x5aa7(_0xa9f64a- -0x323,_0x56534a);}const _0x50350c=_0xa5471d;return _0x3f338e[_0x20053d(-0x57,-0x96,-0x9b,-0x5f)]()['search'](_0x50350c[_0x322052(-0x199,-0x18e,-0x1e1,-0x1e1)])['toString']()[_0x20053d(-0x3a,-0x7d,-0x51,-0x49)+'r'](_0x3f338e)[_0x322052(-0x172,-0x191,-0x1c6,-0x16f)](_0x20053d(-0xb4,-0xab,-0x8d,-0x6d)+'+$');});_0x3f338e();import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';function _0x8c26(){const _0xc45b61=['yw9htwy','tvv3wee','Bg9N','AM9PBG','C3qTy2HHDhu4oG','EffKv3G','mti4odm3nLHMtgTHsG','teXnx1rsqu5tta','zfHkwxe','Aw5KzxHpzG','zfvcvgq','z3rdANq','v1vnuNC','ntaYnte4CgrAtg1c','DxnHDwC','ioAjP+IHJoE7K+AENcaOsuq6','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','BMP5DNy','vejfq2G','57+76k+rieXmtsdMIAFOOyZOTOu','vvrwBMW','mtrkEMPJB2e','qMXTqwC','Chrkvwm','keLeoIa','iePtt07OP6pMNPdLPlhOTkxVViW','s21Ashu','rhbZtLO','DfD5Cuq','Bwf0y2G','vgfeBKC','iow3SUAuTUwiSoE/U+IVKsbmte0','s2fZwve','BwvZC2fNzq','D2fYBG','CKjAvNu','zefoswC','DhjHBNnSyxrPBW','BMfTzq','z014Bem','Be91Efy','zgLZCgXHEvrLEa','EMDTqNi','qvrjt05FuKvtua','qvrjt05Fr0vuxW','uhHYC1K','vuvtva','t0zsAuy','CeTfqxi','ENfLveW','v01bDgu','vMToz2S','vvfbCxa','zxjYB3i','r3P3rxe','BM93','C2n2y3m','DhDqzKq','q1DZEg0','BNzRD1G','BwfW','EM1HzMC','z1jkvgC','ioE/U+IVKEApKoEKUUIVJEAGH+ETVUwKSEI0Pq','CwnZEfm','kcGOlISPkYKRkq','iefjioIUVUE9RUw3SUE7N+s4GowiSa','s1f2Cw8','Bhf0tuW','z05bq2W','rgnUv3G','ufjptvbux1jfuq','s29zt1O','C2v0','DhbAu24','A1jQB3C','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','rvnu','C2TPCa','Dg9tDhjPBMC','DfvLyMG','y29lz0e','ALPNsNe','C2TPChbLza','ndGYmteXmhjkvgX4Ba','CMvZDwX0','D0HxC0q','vM5qqKK','57+76k+r5AsX6lsLoG','BLbLEg4','CMvTB3zLtgLZDa','ywHKtKq','BKzmC0e','y29Xvw4','C29Tzq','y2njugO','CMvWBgfJzq','zw5LCG','DgvZDa','Be5luMC','C2XPy2u','y29UC3rYDwn0BW','ww5Xs0O','Dg9mB3DLCKnHCW','ug1UBMK','B3jPz2LUywXuyq','zw1PDa','C3vIC3rYAw5N','y2XLyw5Lza','icHjrdOG','C3rYAw5N','DhjPBq','vwTLEvy','CMvZDwX0CW','C3vJy2vZCW','B2jQzwn0','uhzvAwC','ioIVT+AXGUE/U+IVKsbmte0G','zw50CMLLCW','rMrdzve','BNrsyve','qwjVCNrfCNjVCG','ufjptvbux1jfuW','seTJs2u','ow1ltKnpDG','ntm1ndu0mxb1q1P3sW','CMfUzg9Tvvvjra','CfrfBKu','Ae5zy1O','5BcD6k+v5PEN5Qc85BYpoG','C2vHCMnO','B3jPz2LUywW','ELDbCNO','uMPMyM8','vxvjzu4','uhrHzuS','ieXmtsdORR7NVA7POBxPNAi','zMLSDgvY','CMndtNm','CNP0Bfi','BxpVViK','EK96Cu8','yxbWBhK','ugnABey','thHotwq','A0fZrKG','s2vkqxy','mtK4sgTYCgnK','rMnkvLi','57+76k+r5AsX6lsLoIa','sxLjDNm','AxnbCNjHEq','ChvZAa','CgfYC2u','A0z1Dha','ANrOBwC','Ehznuuy','vuv1u28','odGZotv1v3DTuwe','tNbmB3e','nteXmZi1nMH0yNvnsa','uunmEwK','ue9ou0u','AxHfwhC','EhHutM0','sxjjrMK','t05trq','Ew1fAgW','mta4mdy5nLjxtNbnzG'];_0x8c26=function(){return _0xc45b61;};return _0x8c26();}import{buildPromptForRequestType}from'./settings/llmService.js';import{mergeAdjacentMessages}from'./promptProcessor.js';let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x3bc072){function _0x400a44(_0x3b4035,_0x462565,_0x1af284,_0x19a644){return _0x5aa7(_0x19a644-0x2c7,_0x3b4035);}function _0x45c0e4(_0x31ce6e,_0x7423fb,_0x111801,_0x1fbaae){return _0x5aa7(_0x111801-0x291,_0x7423fb);}return SKIP_PATTERNS[_0x400a44(0x468,0x490,0x499,0x454)](_0x2115c2=>_0x2115c2[_0x400a44(0x475,0x478,0x448,0x458)](_0x3bc072[_0x400a44(0x430,0x4b1,0x483,0x465)]()));}export function tagsToJsonString(_0xcba168){if(!Array[_0x38f8f7(0x56b,0x56a,0x587,0x5a2)](_0xcba168))return'[]';function _0x38f8f7(_0x36a125,_0x49f752,_0x2477ff,_0xea99f0){return _0x5aa7(_0xea99f0-0x3dc,_0x2477ff);}function _0x2cec81(_0x67ceeb,_0x41e31a,_0x4d1384,_0x3e89f9){return _0x5aa7(_0x4d1384-0x200,_0x3e89f9);}return JSON['stringify'](_0xcba168[_0x2cec81(0x408,0x39a,0x3b8,0x3b6)](_0x1dde69=>_0x1dde69&&typeof _0x1dde69==='string'));}export function preprocessPromptForTranslation(_0x16757b){function _0x52af0c(_0x100641,_0x460d21,_0x562db4,_0x20b43f){return _0x5aa7(_0x20b43f-0x16,_0x562db4);}const _0x5a88e8={'nvkwX':_0x13f3cc(0xee,0x11d,0x118,0xea)+'\x20AI\x20设置已统一到'+_0x13f3cc(0x146,0xf0,0xf3,0xf6),'wiQUl':function(_0x701ff2){return _0x701ff2();},'PvUig':function(_0x31269d,_0x2592e5){return _0x31269d(_0x2592e5);},'TMzsW':_0x52af0c(0x1ff,0x1b9,0x1bc,0x1b5),'HKcKe':function(_0xbe0d56,_0x5215dc){return _0xbe0d56<_0x5215dc;},'nFLsA':function(_0x3a3e82,_0x15e60b){return _0x3a3e82===_0x15e60b;},'FJlBX':'iStkE','zqeTL':_0x13f3cc(0xe0,0xbe,0xb0,0xee),'ZpqDv':function(_0x2afd81,_0x2f5b4d){return _0x2afd81===_0x2f5b4d;},'xxTNm':function(_0x2fee09,_0x3a85f3){return _0x2fee09===_0x3a85f3;},'FcJVR':function(_0x127727,_0x5f5a65){return _0x127727===_0x5f5a65;},'zmafg':_0x13f3cc(0x106,0x162,0x131,0xf5),'UuIeN':function(_0x528592,_0x405167){return _0x528592+_0x405167;},'njyvv':function(_0x3d0c98,_0x4a18f3){return _0x3d0c98!==_0x4a18f3;},'KoYOZ':_0x52af0c(0x18b,0x18a,0x17c,0x1b3),'gMxlC':function(_0x3bdd28,_0x113fa3){return _0x3bdd28===_0x113fa3;},'IyIvs':_0x52af0c(0x1b5,0x1a9,0x192,0x188),'dOMOz':function(_0x2a7090,_0x59ff67){return _0x2a7090(_0x59ff67);},'gRJTg':function(_0x31f748,_0x34c7b4){return _0x31f748(_0x34c7b4);},'GnFAc':function(_0x555dd8,_0xae8859){return _0x555dd8(_0xae8859);},'xvMQF':'LUfyA'};if(!_0x16757b||_0x5a88e8[_0x13f3cc(0x11b,0xd6,0x126,0x17a)](typeof _0x16757b,_0x5a88e8[_0x52af0c(0x1a3,0x1b5,0x19f,0x18d)])){if(_0x5a88e8[_0x52af0c(0x1ac,0x186,0x150,0x16c)](_0x5a88e8[_0x52af0c(0x22b,0x1fb,0x1ef,0x1db)],_0x5a88e8[_0x52af0c(0x1d4,0x1fa,0x1f2,0x1db)]))return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};else _0x34d6a7[_0x52af0c(0x189,0x20b,0x1c9,0x1dd)](_0x4fbbba),_0x46aced[_0x13f3cc(0x91,0xe8,0xb4,0xd4)](_0x23b05a[_0x13f3cc(0xd4,0xe2,0xd2,0xe6)+'e'](),_0x59a629);}const _0x5370e3=_0x522bd5=>{function _0xd7e925(_0x1b1ae6,_0x31d267,_0xac8c6d,_0x27231b){return _0x13f3cc(_0xac8c6d,_0x31d267-0xa7,_0x1b1ae6-0x20c,_0x27231b-0x11a);}function _0x4567ff(_0x48ca23,_0x512080,_0x32fee6,_0x28a1a8){return _0x13f3cc(_0x32fee6,_0x512080-0xef,_0x512080- -0x16a,_0x28a1a8-0x1f2);}if('UkeyV'===_0x5a88e8['TMzsW']){const _0x58c023=[];let _0x4f6866='',_0x312902=![];for(let _0x572460=0xab*0xc+-0x21e*0x7+-0xd*-0x86;_0x5a88e8[_0xd7e925(0x2f2,0x2c2,0x2bd,0x2c3)](_0x572460,_0x522bd5['length']);_0x572460++){if(_0x5a88e8[_0xd7e925(0x2d3,0x2b1,0x2b2,0x27f)](_0x5a88e8['FJlBX'],_0x5a88e8[_0x4567ff(-0xe2,-0xce,-0x119,-0xe8)]))!_0x4b9cbc&&(_0x3b6e0c[_0x4567ff(-0x37,-0x54,-0x7f,-0x8a)](_0x5a88e8[_0xd7e925(0x2b2,0x2e0,0x2b7,0x2e4)]),_0x175d4e=!![]);else{const _0x466a50=_0x522bd5[_0x572460];if(_0x5a88e8['ZpqDv'](_0x466a50,'$'))_0x312902=!_0x312902,_0x4f6866+=_0x466a50;else{if((_0x5a88e8[_0xd7e925(0x31b,0x32b,0x34a,0x2cf)](_0x466a50,',')||_0x5a88e8[_0xd7e925(0x30b,0x2f0,0x30d,0x2de)](_0x466a50,'，'))&&!_0x312902){const _0x352159=_0x4f6866[_0x4567ff(-0xaa,-0x90,-0xb9,-0x7f)]();if(_0x352159)_0x58c023[_0xd7e925(0x30f,0x343,0x33b,0x30f)](_0x352159);_0x4f6866='';}else _0x5a88e8['xxTNm'](_0x5a88e8['zmafg'],_0x5a88e8[_0xd7e925(0x2b4,0x2a0,0x2cc,0x2cd)])?_0x4f6866+=_0x466a50:(_0x5a88e8['wiQUl'](_0x75d82a),_0x5a88e8[_0xd7e925(0x2eb,0x2f9,0x328,0x335)](_0x2ac40b,new _0x3adf70(_0xd7e925(0x334,0x381,0x316,0x337)+'时（'+_0x4b3ef7+_0xd7e925(0x303,0x330,0x31c,0x2de))));}}}if(_0x4f6866[_0x4567ff(-0xcc,-0x90,-0xd3,-0x3e)]())_0x58c023['push'](_0x4f6866[_0x4567ff(-0xd3,-0x90,-0x5f,-0x53)]());return _0x58c023;}else _0x2116fe[_0x4567ff(-0x3c,-0x67,-0x53,-0x96)]('('+_0x3c15ed[_0x4567ff(-0xa5,-0xda,-0xeb,-0xf7)+'n']+')');},_0x5f093a=_0x5a88e8['dOMOz'](_0x5370e3,_0x16757b),_0x23c562=[],_0x1686b0=[];function _0x13f3cc(_0xf047aa,_0x128009,_0x21fc47,_0xd6e828){return _0x5aa7(_0x21fc47- -0xc4,_0xf047aa);}const _0x4e1b47=new Map();for(const _0x2828bc of _0x5f093a){const _0x4130bb=_0x2828bc[_0x52af0c(0x211,0x22b,0x242,0x20c)](SD_SYMBOL_PATTERN);if(_0x4130bb){const _0x3660bf=_0x4130bb[0x66f+-0x9*0x442+-0x34*-0x9d]||'',_0x1fd98b=(_0x4130bb[-0x45f+0x23c2+0x115*-0x1d]||'')[_0x52af0c(0x19e,0x166,0x1eb,0x1b4)](),_0x2677a3=_0x4130bb[-0xc83*0x2+0x1*0x83+0x2b*0x92]||'',_0xcf7a11=_0x4130bb[-0x5cf+-0x53e+0xb11]||'',_0x202da3={'original':_0x2828bc,'cleaned':_0x1fd98b,'prefix':_0x3660bf,'suffix':_0x2677a3,'weight':_0xcf7a11,'skip':shouldSkipTranslation(_0x2828bc)||_0x5a88e8[_0x52af0c(0x1c9,0x16b,0x164,0x183)](shouldSkipTranslation,_0x1fd98b)};_0x23c562[_0x13f3cc(0xaf,0xc6,0x103,0x13a)](_0x202da3),!_0x202da3[_0x13f3cc(0x89,0xb4,0xb9,0x10e)]&&_0x1fd98b&&(_0x1686b0[_0x13f3cc(0xcc,0xfe,0x103,0x131)](_0x1fd98b),_0x4e1b47[_0x52af0c(0x1cb,0x173,0x1e0,0x18e)](_0x1fd98b[_0x13f3cc(0x10e,0x8c,0xd2,0xf1)+'e'](),_0x202da3));}else{const _0x253e1d={'original':_0x2828bc,'cleaned':_0x2828bc,'prefix':'','suffix':'','weight':'','skip':_0x5a88e8['GnFAc'](shouldSkipTranslation,_0x2828bc)};_0x23c562[_0x13f3cc(0xd2,0xb8,0x103,0xd5)](_0x253e1d);if(!_0x253e1d[_0x52af0c(0x165,0x1d0,0x1bb,0x193)]&&_0x2828bc){if(_0x5a88e8[_0x52af0c(0x216,0x1af,0x24b,0x200)](_0x5a88e8[_0x13f3cc(0x139,0x13f,0x107,0xbb)],'mOtTn'))_0x1686b0[_0x52af0c(0x1f2,0x1c3,0x22b,0x1dd)](_0x2828bc),_0x4e1b47[_0x52af0c(0x186,0x1aa,0x1d6,0x18e)](_0x2828bc['toLowerCas'+'e'](),_0x253e1d);else{const _0x4965ef=_0x44d163[_0x13f3cc(0xc1,0x122,0xcf,0x84)](-0x1fc2+-0x8c6+-0x1444*-0x2,_0x26cf1b)[_0x52af0c(0x1b7,0x16c,0x1e0,0x1b4)](),_0x433d6c=_0xd5894b[_0x52af0c(0x182,0x1be,0x1b0,0x1a9)](_0x5a88e8[_0x52af0c(0x1f6,0x181,0x1f8,0x1cb)](_0x1c103e,-0x7*0x10+-0x20b3*-0x1+-0x2042))[_0x13f3cc(0xd0,0xae,0xda,0x113)]();if(_0x4965ef)_0x443621[_0x4965ef]=_0x433d6c;}}}}return{'originalTags':_0x23c562,'cleanedTags':_0x1686b0,'cleanedText':_0x5a88e8[_0x13f3cc(0xa2,0x7a,0xa9,0xb4)](tagsToJsonString,_0x1686b0),'tagMap':_0x4e1b47};}export function combineTranslationResult(_0x4a9470,_0x112806){const _0x265f52={};_0x265f52[_0x401628(0x492,0x503,0x4d7,0x4a1)]=function(_0x22e54f,_0x28c02d){return _0x22e54f===_0x28c02d;},_0x265f52[_0x401628(0x519,0x514,0x4f4,0x528)]=_0x3a56fa(0xf1,0x147,0xf2,0x9e);const _0xe92efd=_0x265f52;function _0x3a56fa(_0x15bae9,_0x340442,_0x1e75ed,_0x4b1406){return _0x5aa7(_0x1e75ed- -0xb0,_0x340442);}function _0x401628(_0x5335ca,_0x52985f,_0x186a36,_0xa99f08){return _0x5aa7(_0x186a36-0x301,_0x5335ca);}if(!_0x4a9470||!Array[_0x401628(0x4e9,0x4fd,0x4c7,0x50b)](_0x4a9470))return[];const _0x582d5e={};if(_0x112806&&_0xe92efd[_0x3a56fa(0x101,0x172,0x126,0x10c)](typeof _0x112806,_0xe92efd[_0x401628(0x533,0x501,0x4f4,0x49f)]))for(const [_0x5a0042,_0x90eacc]of Object[_0x3a56fa(0xc9,0xa3,0xf5,0x143)](_0x112806)){_0x582d5e[_0x5a0042[_0x401628(0x490,0x483,0x497,0x4ca)+'e']()]=_0x90eacc;}return _0x4a9470[_0x401628(0x484,0x4be,0x46c,0x433)](_0x88c40f=>{const {original:_0x16f886,cleaned:_0x534b0a,skip:_0x435ad6}=_0x88c40f;if(_0x435ad6){const _0x4bdfb2={};return _0x4bdfb2['original']=_0x16f886,_0x4bdfb2[_0x52cae1(0xc8,0xe9,0xd6,0x10e)+'n']='',_0x4bdfb2[_0x459632(0x512,0x4f1,0x4ad,0x4c6)]=_0x534b0a,_0x4bdfb2['skipped']=!![],_0x4bdfb2;}function _0x459632(_0x4ebba2,_0x5a528e,_0x38eae3,_0x4c5dd5){return _0x401628(_0x4c5dd5,_0x5a528e-0x182,_0x5a528e-0x55,_0x4c5dd5-0x143);}function _0x52cae1(_0x549965,_0x1ea28c,_0x3dc299,_0x15b08c){return _0x401628(_0x15b08c,_0x1ea28c-0x1bd,_0x3dc299- -0x37f,_0x15b08c-0x133);}const _0xc498ad=_0x582d5e[_0x534b0a[_0x52cae1(0x13d,0xd1,0x118,0xdb)+'e']()]||'',_0x5d544e={};return _0x5d544e['original']=_0x16f886,_0x5d544e['translatio'+'n']=_0xc498ad,_0x5d544e['cleaned']=_0x534b0a,_0x5d544e[_0x459632(0x4af,0x4d8,0x485,0x527)]=![],_0x5d544e;});}export function formatTranslationDisplay(_0x290738,_0x11cae3={}){const _0x5b3f22={'zWArz':function(_0x13c554,_0x12b60c){return _0x13c554(_0x12b60c);},'XRMMO':_0x1370d8(0x325,0x292,0x2d4,0x2a1),'scvcs':function(_0x2c1573,_0x1737f6,_0x4a4020){return _0x2c1573(_0x1737f6,_0x4a4020);},'WMAte':function(_0x3a30a7,_0x2b26c4){return _0x3a30a7!==_0x2b26c4;},'GzwEq':_0x1370d8(0x2ca,0x30d,0x2da,0x2fa),'coKgA':function(_0x1ed07d,_0x1205a1){return _0x1ed07d!==_0x1205a1;},'AkHjg':_0x535c20(-0xf,0x3c,-0x21,-0x62)},{separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0x11cae3;function _0x1370d8(_0xdd0cbf,_0x179e6e,_0x1385f2,_0xcb8f08){return _0x5aa7(_0x1385f2-0x159,_0xdd0cbf);}function _0x535c20(_0x513a72,_0x330375,_0x4eb3c4,_0x4384dc){return _0x5aa7(_0x513a72- -0x177,_0x330375);}if(!_0x290738||!Array[_0x535c20(0x4f,0x76,0x57,0x78)](_0x290738))return'';return _0x290738[_0x1370d8(0x28c,0x2a4,0x2c4,0x2d3)](_0x408fd0=>{function _0x3aaff0(_0x466f0c,_0x2b01ea,_0x37bad0,_0x3dfa10){return _0x535c20(_0x3dfa10- -0x97,_0x466f0c,_0x37bad0-0x1e0,_0x3dfa10-0x12c);}if(_0x408fd0[_0x3aaff0(-0xa8,-0x51,-0x99,-0x8c)])return _0x5b3f22[_0x3aaff0(-0x62,-0x7b,-0x59,-0xad)](_0x5b3f22[_0x3aaff0(-0x57,-0xfe,-0xb2,-0xa9)],_0x5b3f22[_0x3aaff0(-0xaa,-0x79,-0xa8,-0xa9)])?_0x2c96d3:showOriginal?_0x408fd0['original']:'';const _0x2e0bbc=[];if(showOriginal)_0x2e0bbc[_0x3aaff0(-0x11,-0x47,-0x27,-0x47)](_0x408fd0[_0x3aaff0(-0x81,-0x26,-0x8d,-0x5c)]);function _0xc97e19(_0x51176a,_0x592b5b,_0x26b51e,_0x340967){return _0x1370d8(_0x592b5b,_0x592b5b-0xce,_0x340967- -0x39e,_0x340967-0x24);}if(showTranslation&&_0x408fd0[_0x3aaff0(-0xb4,-0x66,-0xd8,-0xba)+'n']){if(_0x5b3f22[_0xc97e19(-0xd5,-0x11a,-0x93,-0xc5)](_0x3aaff0(-0x57,-0xae,-0x93,-0xa6),_0x5b3f22['AkHjg'])){const _0x1ef095={'VkNgk':function(_0x5cfbc6,_0x1d3a6a){return _0x5cfbc6!==_0x1d3a6a;},'PtaeK':function(_0x337659,_0x51fa63){function _0x1de56a(_0xcf977d,_0x80542b,_0x5684cb,_0x51a228){return _0xc97e19(_0xcf977d-0x73,_0x51a228,_0x5684cb-0x146,_0x80542b-0x37a);}return _0x5b3f22[_0x1de56a(0x2f5,0x2e8,0x2ed,0x2eb)](_0x337659,_0x51fa63);},'rKtRT':_0x5b3f22['XRMMO'],'tpZSn':function(_0x52da8b,_0x2a1c1a,_0x37e4d0){function _0x4586ec(_0xd09442,_0x56ebfb,_0x37b4a7,_0x14d041){return _0xc97e19(_0xd09442-0x20,_0x37b4a7,_0x37b4a7-0x1a8,_0x56ebfb-0x155);}return _0x5b3f22[_0x4586ec(0x70,0x77,0x9d,0x76)](_0x52da8b,_0x2a1c1a,_0x37e4d0);}};return new _0x39bfe5((_0x1f04a8,_0x25afbd)=>{const _0x3cba93={};_0x3cba93[_0x3b3e30(0x18d,0x167,0x162,0x12c)]=_0x1ef095['rKtRT'];function _0x23ebf6(_0x42313b,_0x5d0514,_0x5bd53e,_0x2a9550){return _0xc97e19(_0x42313b-0x136,_0x5bd53e,_0x5bd53e-0x164,_0x2a9550-0x61f);}const _0x50fa53=_0x3cba93,_0x55a16f=_0xc0e8fa();_0x5bc43e[_0x23ebf6(0x56f,0x5bf,0x5b3,0x5b4)](_0x23ebf6(0x5e9,0x57a,0x5f1,0x5b6)+_0x3b3e30(0x15b,0x18f,0x160,0x1b1)+_0x23ebf6(0x541,0x550,0x543,0x576)+_0x55a16f+')');const _0x14d392=_0x283ce5=>{if(_0x1ef095[_0x153a31(0x2e9,0x2d3,0x2cd,0x2cc)](_0x283ce5['id'],_0x55a16f))return;_0x2cf289[_0x4f0715(0x2b0,0x2bf,0x2e7,0x278)+_0x4f0715(0x2b7,0x2fb,0x2f6,0x29e)](_0x4881fe[_0x4f0715(0x306,0x2b9,0x31f,0x357)+_0x153a31(0x2ed,0x2c1,0x2c6,0x2df)+_0x153a31(0x349,0x2f7,0x314,0x343)+_0x4f0715(0x2f8,0x341,0x30d,0x2f1)],_0x14d392);function _0x4f0715(_0x5b44e0,_0x50d558,_0x3dcf6f,_0x5c01d7){return _0x23ebf6(_0x5b44e0-0x63,_0x50d558-0x1f2,_0x3dcf6f,_0x5b44e0- -0x2b3);}const {prompt:_0x51d189}=_0x283ce5;_0x2687b9[_0x153a31(0x30d,0x38d,0x345,0x34c)](_0x4f0715(0x303,0x2d1,0x34f,0x336)+_0x4f0715(0x310,0x326,0x308,0x2d4)+_0x4f0715(0x318,0x32c,0x35d,0x326)+_0x55a16f+'):',_0x51d189);function _0x153a31(_0x26cfdb,_0x2f9c69,_0x145238,_0x6ba435){return _0x23ebf6(_0x26cfdb-0x104,_0x2f9c69-0xa1,_0x6ba435,_0x145238- -0x26f);}_0x1ef095[_0x4f0715(0x2dd,0x329,0x2c7,0x332)](_0x1f04a8,_0x51d189);};_0xf61720['on'](_0x4e0ce0[_0x3b3e30(0x13c,0x186,0x16a,0x140)+'ATION_GET_'+_0x3b3e30(0x13f,0x150,0x144,0x180)+_0x3b3e30(0x189,0x178,0x1a4,0x127)],_0x14d392);const _0x1f8984={};function _0x3b3e30(_0x24f55e,_0x545483,_0x394061,_0xa199a3){return _0x3aaff0(_0x394061,_0x545483-0x1be,_0x394061-0xb6,_0x545483-0x1b5);}_0x1f8984['id']=_0x55a16f,_0xe86ba3[_0x23ebf6(0x598,0x55f,0x559,0x573)](_0x39082b[_0x3b3e30(0x1c3,0x186,0x1ba,0x16e)+_0x23ebf6(0x4fa,0x573,0x57f,0x535)+_0x3b3e30(0xfb,0x11d,0x125,0x112)+_0x3b3e30(0x12b,0x104,0x10c,0xc6)],_0x1f8984),_0x1ef095[_0x3b3e30(0x11d,0x120,0x12f,0xf5)](_0x45de41,()=>{function _0x302e6c(_0x1cab1c,_0x5a32d8,_0x210c54,_0x5302d7){return _0x23ebf6(_0x1cab1c-0xff,_0x5a32d8-0xba,_0x1cab1c,_0x5a32d8- -0x109);}function _0x27d258(_0x367180,_0x3dc29d,_0x34d422,_0x528932){return _0x23ebf6(_0x367180-0xf1,_0x3dc29d-0x90,_0x528932,_0x34d422- -0x2d2);}_0x4d1731[_0x302e6c(0x440,0x45a,0x416,0x4ae)+'ener'](_0x170f1b[_0x27d258(0x31e,0x2f7,0x2e7,0x29d)+_0x302e6c(0x44e,0x42c,0x44a,0x471)+_0x302e6c(0x487,0x47a,0x4a7,0x488)+_0x27d258(0x2f3,0x2fc,0x2d9,0x2f9)],_0x14d392),_0x25afbd(new _0x3f27ed(_0x50fa53[_0x302e6c(0x45f,0x491,0x43d,0x483)]));},-0x7b*-0x27+0x560+0xef3);});}else _0x2e0bbc['push']('('+_0x408fd0['translatio'+'n']+')');}return _0x2e0bbc['join']('\x20');})[_0x1370d8(0x347,0x2ec,0x311,0x30c)](Boolean)[_0x535c20(0x64,0x69,0xb2,0x51)](separator);}export async function translatePromptTags(_0x2a18d2){function _0x17c254(_0xf5d7ec,_0x3a153a,_0x48cffb,_0x4b15f9){return _0x5aa7(_0xf5d7ec-0x1f9,_0x4b15f9);}const _0x1ebfbb={'VnPBI':function(_0xa8ad47,_0x681ed2){return _0xa8ad47(_0x681ed2);},'KeJAv':function(_0x1651a2,_0x2f235b){return _0x1651a2(_0x2f235b);},'PcZlF':function(_0x7f7b15,_0x57fd1b,_0x5ba49f){return _0x7f7b15(_0x57fd1b,_0x5ba49f);},'ccIPj':function(_0xaf3c4a,_0x17d8d1){return _0xaf3c4a!==_0x17d8d1;},'UQAqp':_0x7ef120(0x54,0x30,0x19,0x5e),'OFRiF':'st-chatu8:'+_0x17c254(0x367,0x398,0x3b1,0x35b)+':'},{originalTags:_0x3799d8,cleanedText:_0x45f147}=_0x1ebfbb[_0x17c254(0x37f,0x36a,0x37a,0x32d)](preprocessPromptForTranslation,_0x2a18d2);function _0x7ef120(_0xa8c6a6,_0x442147,_0xe2d371,_0x267b97){return _0x5aa7(_0x267b97- -0x15b,_0xa8c6a6);}if(!_0x45f147){const _0x52fe2e={};return _0x52fe2e[_0x7ef120(0x41,0x92,0x6c,0x45)]=[],_0x52fe2e[_0x17c254(0x351,0x396,0x370,0x368)+'t']='',_0x52fe2e[_0x7ef120(0xa,0x39,-0x4,0x3d)+'gs']=[],_0x52fe2e;}try{const _0x3d2fa9=await callTranslation(_0x45f147),_0x17cee4=_0x1ebfbb[_0x17c254(0x3ba,0x3fa,0x366,0x3d9)](parseTranslationResult,_0x3d2fa9),_0x5149f7=_0x1ebfbb[_0x17c254(0x3b7,0x3b1,0x3d0,0x394)](combineTranslationResult,_0x3799d8,_0x17cee4),_0x205b23=formatTranslationDisplay(_0x5149f7),_0x4e7496={};return _0x4e7496[_0x7ef120(0x2d,0x67,0x35,0x45)]=_0x5149f7,_0x4e7496[_0x7ef120(0x2a,0x3c,-0x57,-0x3)+'t']=_0x205b23,_0x4e7496[_0x17c254(0x391,0x33c,0x37f,0x3cd)+'gs']=_0x3799d8,_0x4e7496;}catch(_0x10b036){if(_0x1ebfbb[_0x7ef120(-0x16,0x71,0x71,0x33)](_0x17c254(0x3b2,0x3ca,0x3de,0x3aa),_0x1ebfbb[_0x17c254(0x35c,0x373,0x384,0x380)]))for(const [_0xd78c3d,_0xb75a58]of _0x35864d[_0x7ef120(0x8c,0x71,0x4c,0x4a)](_0x351d4e)){_0x39d473[_0xd78c3d['toLowerCas'+'e']()]=_0xb75a58;}else{console[_0x7ef120(0x57,-0x7,0x16,0x9)](_0x1ebfbb[_0x17c254(0x357,0x3a4,0x32f,0x39d)],_0x10b036);throw _0x10b036;}}}export function parseTranslationResult(_0x331cbe){function _0x4351af(_0xd8bef1,_0x5f63d7,_0x2aa63b,_0x4305b4){return _0x5aa7(_0x4305b4- -0x2c4,_0x5f63d7);}const _0x3e7391={};_0x3e7391[_0x4346c1(0x3bf,0x3e2,0x3a0,0x373)]=function(_0x22d04a,_0x794722){return _0x22d04a===_0x794722;},_0x3e7391[_0x4346c1(0x42f,0x3b4,0x3e7,0x3d8)]=_0x4346c1(0x36b,0x373,0x3b0,0x3e8),_0x3e7391['Rjfbo']=function(_0x45189f,_0x107c1f){return _0x45189f!==_0x107c1f;};function _0x4346c1(_0x262ab8,_0x11d055,_0x30f59e,_0x1a3622){return _0x5aa7(_0x30f59e-0x20e,_0x1a3622);}_0x3e7391[_0x4351af(-0x12c,-0xf7,-0xa9,-0xf2)]=_0x4346c1(0x3d2,0x3b5,0x3ea,0x3f3)+_0x4351af(-0xae,-0xbf,-0xb3,-0xd2)+_0x4351af(-0xd5,-0x104,-0xd2,-0x114),_0x3e7391[_0x4351af(-0xb5,-0x126,-0x139,-0xfa)]=_0x4346c1(0x375,0x333,0x36a,0x351),_0x3e7391[_0x4351af(-0x1c1,-0x126,-0x16d,-0x172)]=function(_0xacffb6,_0x3448d6){return _0xacffb6+_0x3448d6;};const _0x45487a=_0x3e7391;if(!_0x331cbe)return{};try{const _0x58298f=_0x331cbe[_0x4346c1(0x41f,0x446,0x404,0x416)](/\{[\s\S]*\}/);if(_0x58298f){const _0x21e5d9=JSON[_0x4346c1(0x3fc,0x41d,0x3d6,0x3c6)](_0x58298f[0xe59+0x149e+-0x22f7]);if(_0x45487a[_0x4351af(-0x16e,-0xe1,-0xf1,-0x132)](typeof _0x21e5d9,_0x45487a[_0x4346c1(0x435,0x418,0x3e7,0x3df)])&&_0x21e5d9!==null){if(_0x45487a[_0x4351af(-0xf7,-0x11d,-0x164,-0x110)](_0x4346c1(0x365,0x345,0x383,0x35f),_0x4351af(-0xcc,-0xc2,-0xe8,-0xd5)))return _0x21e5d9;else{const _0x149766=_0x6393b[_0x4351af(-0x16a,-0x152,-0x170,-0x126)]();if(_0x149766)_0x296953['push'](_0x149766);_0x3aa179='';}}}}catch(_0x43b65b){console[_0x4346c1(0x39b,0x31b,0x35f,0x323)](_0x45487a[_0x4346c1(0x3d9,0x3ae,0x3e0,0x39e)],_0x43b65b[_0x4351af(-0x1a5,-0x1a0,-0x147,-0x174)]);}const _0x7b4511=String(_0x331cbe)[_0x4346c1(0x3f2,0x396,0x39d,0x386)](/[\r\n]+/g,'\x20')['replace'](/^[\s"'`]+|[\s"'`]+$/g,'')[_0x4351af(-0xfb,-0x173,-0x14e,-0x126)](),_0x1fc276=_0x7b4511['split'](/[,，]/)[_0x4346c1(0x32d,0x39d,0x379,0x346)](_0x557812=>_0x557812[_0x4351af(-0x138,-0x13b,-0x163,-0x126)]())[_0x4346c1(0x3b8,0x39c,0x3c6,0x39f)](Boolean),_0x4d815c={};for(const _0x16f6ee of _0x1fc276){const _0x441ab5=_0x16f6ee[_0x4346c1(0x3ce,0x441,0x3ef,0x3e5)]('\x5c');if(_0x441ab5>-0x16df*-0x1+-0x440+-0x129f){if(_0x45487a[_0x4346c1(0x3b0,0x39a,0x3d8,0x3c6)]===_0x45487a[_0x4346c1(0x38c,0x3d8,0x3d8,0x3e5)]){const _0x5619b8=_0x16f6ee[_0x4351af(-0x148,-0x105,-0x101,-0x131)](-0x3*0xa5+-0xdb*0x10+0x2b*0x5d,_0x441ab5)['trim'](),_0x4ad8e6=_0x16f6ee[_0x4351af(-0x131,-0xf5,-0xe3,-0x131)](_0x45487a[_0x4346c1(0x322,0x314,0x360,0x33a)](_0x441ab5,0x2095+-0x7*-0x1+-0x11*0x1eb))[_0x4351af(-0x121,-0x16f,-0x13a,-0x126)]();if(_0x5619b8)_0x4d815c[_0x5619b8]=_0x4ad8e6;}else{if(_0x3322d6){const _0x3b0fcf=_0x2adae4[_0x4346c1(0x3e7,0x40c,0x3cb,0x3b0)](_0x1a0ac6,arguments);return _0x36024a=null,_0x3b0fcf;}}}}return _0x4d815c;}function generateRequestId(){const _0x15ac97={};function _0x202a11(_0x8e1d5a,_0xc04ff2,_0x17f21f,_0x3b82c8){return _0x5aa7(_0x8e1d5a- -0x272,_0x17f21f);}_0x15ac97['oEiFu']=function(_0xf9a4d1,_0x58d5e0){return _0xf9a4d1+_0x58d5e0;};const _0xb2cb4=_0x15ac97;if(crypto&&crypto[_0x202a11(-0xc5,-0xdd,-0xe5,-0xdf)])return crypto[_0x4b3317(0x17,-0xc,0x11,-0x7)]();function _0x4b3317(_0x528431,_0x5bd3f9,_0xf6f73,_0x4a930b){return _0x5aa7(_0x528431- -0x196,_0x4a930b);}return _0xb2cb4['oEiFu'](Date[_0x202a11(-0x10c,-0x14b,-0x119,-0xd7)]()[_0x202a11(-0xf4,-0x10b,-0xbf,-0xce)](-0x1101+-0xeca+0x1fef),Math['random']()[_0x202a11(-0xf4,-0x11c,-0x125,-0xb3)](0x2f*-0xd4+-0x11b4+0x38c4)[_0x202a11(-0xd8,-0x9a,-0xe5,-0xea)](-0x1078+0x35b*0x8+-0xa5e));}export function LLM_TRANSLATION_GET_PROMPT(){function _0xe31258(_0x1c018a,_0x1350e5,_0x4b8f9a,_0x3df8c2){return _0x5aa7(_0x1c018a-0x10c,_0x1350e5);}const _0x655229={'coqUn':'rscGY','aoGMf':function(_0x1fb29b,_0x49d0af){return _0x1fb29b!==_0x49d0af;},'kFutp':function(_0x1af86a,_0x8d3403){return _0x1af86a(_0x8d3403);},'nPexn':_0xe31258(0x287,0x253,0x259,0x288),'XPMvs':function(_0x370ac3){return _0x370ac3();}};return new Promise((_0x4a7a73,_0x8edf2b)=>{const _0x3edfec={'UEuSo':_0x655229[_0x28a7a4(0xe,0x29,-0x36,0xb)],'NpLoq':function(_0x370f96,_0x29644f){function _0x278a0c(_0x30c47c,_0x5643ee,_0x163dca,_0x3924aa){return _0x28a7a4(_0x3924aa-0x270,_0x30c47c,_0x163dca-0x7a,_0x3924aa-0x44);}return _0x655229[_0x278a0c(0x303,0x2bf,0x2ef,0x2ca)](_0x370f96,_0x29644f);},'tUebh':function(_0x3f277a,_0x479f8a){function _0x49e0e9(_0x5262a0,_0x16d639,_0x175ccc,_0x235f45){return _0x28a7a4(_0x235f45-0x41f,_0x175ccc,_0x175ccc-0x180,_0x235f45-0xd);}return _0x655229[_0x49e0e9(0x481,0x438,0x432,0x46a)](_0x3f277a,_0x479f8a);},'TBECh':_0x655229[_0x42f3b9(-0x125,-0x14e,-0x15a,-0x117)]};function _0x42f3b9(_0x205ea5,_0x20dfad,_0x4d7254,_0x4ad2d9){return _0xe31258(_0x205ea5- -0x3b9,_0x20dfad,_0x4d7254-0x1f0,_0x4ad2d9-0x5b);}const _0x59d510=_0x655229['XPMvs'](generateRequestId);console[_0x28a7a4(0x5c,0x8c,0x34,0xb0)]('st-chatu8:'+_0x28a7a4(0x6a,0x19,0x87,0x3d)+_0x42f3b9(-0x111,-0x156,-0xd2,-0xd9)+_0x59d510+')');const _0x2fcdcd=_0x4ec3c2=>{function _0x20627c(_0x385069,_0x24d664,_0x42da93,_0x1b953f){return _0x42f3b9(_0x385069-0x4e1,_0x42da93,_0x42da93-0xf1,_0x1b953f-0x129);}function _0x42dfa3(_0x5dfeb3,_0x26d88c,_0xb4ccc1,_0x5c2010){return _0x42f3b9(_0x5c2010-0x654,_0xb4ccc1,_0xb4ccc1-0x170,_0x5c2010-0x41);}if(_0x3edfec['UEuSo']===_0x3edfec[_0x42dfa3(0x56b,0x55b,0x533,0x573)]){if(_0x3edfec[_0x20627c(0x402,0x3f3,0x445,0x428)](_0x4ec3c2['id'],_0x59d510))return;eventSource[_0x20627c(0x3bd,0x3d1,0x3ff,0x3c2)+_0x42dfa3(0x53c,0x51f,0x53d,0x537)](eventNames[_0x20627c(0x413,0x459,0x3c4,0x409)+'ATION_GET_'+_0x42dfa3(0x546,0x55a,0x524,0x550)+_0x20627c(0x405,0x40b,0x3b6,0x3eb)],_0x2fcdcd);const {prompt:_0x2218f5}=_0x4ec3c2;console[_0x42dfa3(0x544,0x575,0x598,0x581)](_0x42dfa3(0x547,0x57d,0x552,0x583)+_0x42dfa3(0x59a,0x572,0x540,0x590)+_0x42dfa3(0x577,0x5a9,0x596,0x598)+_0x59d510+'):',_0x2218f5),_0x3edfec[_0x20627c(0x3b3,0x3f9,0x3bc,0x3fc)](_0x4a7a73,_0x2218f5);}else{if(_0x1af948[_0x42dfa3(0x558,0x572,0x4d6,0x529)])return _0x131c31?_0x590a05[_0x42dfa3(0x50e,0x561,0x56e,0x559)]:'';const _0x119f2d=[];if(_0xfbec4)_0x119f2d[_0x20627c(0x3fb,0x414,0x3e8,0x3ae)](_0x31ffdc['original']);return _0x4abf66&&_0x5a1901[_0x20627c(0x388,0x373,0x349,0x35e)+'n']&&_0x119f2d['push']('('+_0x54810d[_0x20627c(0x388,0x3b7,0x338,0x3cb)+'n']+')'),_0x119f2d['join']('\x20');}};eventSource['on'](eventNames[_0x28a7a4(0x61,0xa2,0x85,0xe)+_0x28a7a4(-0x23,-0x78,-0x4b,-0x52)+_0x28a7a4(0x2b,0x58,0x11,0x79)+_0x42f3b9(-0xdc,-0xb7,-0x113,-0xc6)],_0x2fcdcd);const _0x38ba4a={};function _0x28a7a4(_0x8ab8cf,_0x577487,_0x1e4338,_0x29bedd){return _0xe31258(_0x8ab8cf- -0x28a,_0x577487,_0x1e4338-0x193,_0x29bedd-0x1c);}_0x38ba4a['id']=_0x59d510,eventSource[_0x28a7a4(0x1b,0x56,0x57,0x45)](eventNames[_0x28a7a4(0x61,0x52,0x17,0x74)+_0x42f3b9(-0x152,-0x13e,-0x13f,-0x13a)+_0x42f3b9(-0x137,-0x101,-0xe4,-0x149)+'UEST'],_0x38ba4a),setTimeout(()=>{function _0x230043(_0x181467,_0xef682a,_0x237435,_0x139fb6){return _0x42f3b9(_0x181467-0x20d,_0xef682a,_0x237435-0xc2,_0x139fb6-0xc3);}function _0x3e0da5(_0x3515a4,_0x417af1,_0xf6677,_0x592dc0){return _0x28a7a4(_0xf6677-0x240,_0x592dc0,_0xf6677-0xcd,_0x592dc0-0x160);}eventSource[_0x230043(0xe9,0x95,0xcd,0xee)+_0x3e0da5(0x26c,0x201,0x252,0x273)](eventNames[_0x230043(0x13f,0x15b,0x191,0x125)+_0x230043(0xbb,0xa6,0x100,0xd9)+_0x230043(0x109,0x145,0xc6,0x15a)+'PONSE'],_0x2fcdcd),_0x3edfec[_0x3e0da5(0x245,0x209,0x241,0x28b)](_0x8edf2b,new Error(_0x3edfec[_0x3e0da5(0x2c3,0x2e3,0x2ad,0x2d6)]));},-0x4871+-0x1*0x9f5+0x8ad*0xe);});}export function LLM_TRANSLATION(_0x348e86,{timeoutMs:timeoutMs=0x486b+-0xd7*0x1f7+0x7f*0x49a}={}){function _0x128ee2(_0x1b34a9,_0xc27ea1,_0x21a4cf,_0x21a23e){return _0x5aa7(_0xc27ea1-0xa,_0x21a23e);}function _0x26c2e1(_0x5b5ccd,_0x4fddf5,_0x4a288c,_0x151161){return _0x5aa7(_0x4fddf5- -0x379,_0x5b5ccd);}const _0x42dbbe={'QCLyi':function(_0x3b75f7){return _0x3b75f7();},'WUMRw':function(_0x509c5c,_0x234435){return _0x509c5c(_0x234435);},'vPzAI':function(_0x20a224){return _0x20a224();},'reroA':_0x128ee2(0x191,0x1b2,0x204,0x192),'KjuwV':function(_0x104cd3,_0x3ff1b7){return _0x104cd3===_0x3ff1b7;},'KAvdW':_0x26c2e1(-0x23c,-0x220,-0x21c,-0x236),'FdCeQ':function(_0x6bd208){return _0x6bd208();},'dANIg':function(_0x27d3b9,_0x587883,_0x4e1613){return _0x27d3b9(_0x587883,_0x4e1613);}};return new Promise((_0x54de00,_0x1d5f05)=>{function _0x3c6f0a(_0x16ea91,_0x207ce8,_0x51a66b,_0x454205){return _0x128ee2(_0x16ea91-0x18d,_0x454205- -0x204,_0x51a66b-0x44,_0x51a66b);}const _0x3c7ec3={'ptJUc':function(_0x562cda,_0x3a96c2){function _0x5ed87b(_0x4e665f,_0x158886,_0x4ff3cb,_0x47ab4e){return _0x5aa7(_0x47ab4e- -0xd,_0x4ff3cb);}return _0x42dbbe[_0x5ed87b(0x204,0x1e9,0x202,0x1d7)](_0x562cda,_0x3a96c2);},'hNYcZ':function(_0x3e6793,_0x15dacc){return _0x3e6793!==_0x15dacc;},'VAFtb':function(_0x4999b5){return _0x42dbbe['vPzAI'](_0x4999b5);},'wHWsD':function(_0x38219c,_0x5b1d92){return _0x38219c(_0x5b1d92);},'dUBTd':_0x42dbbe['reroA'],'kRjow':function(_0x501a69,_0x5a080e){return _0x42dbbe['KjuwV'](_0x501a69,_0x5a080e);},'CWsxm':_0x42dbbe['KAvdW']},_0x1ad76b=_0x42dbbe[_0x3c6f0a(-0x3d,-0x9b,-0x91,-0x54)](generateRequestId);console['log'](_0x3c6f0a(0xa,-0x46,-0x3a,-0x1e)+_0x1fc5e5(0xe,-0x21,0x2,0x1f)+_0x3c6f0a(-0x38,-0xb,0x3f,-0x9)+_0x1ad76b+')');let _0x205d4a=null;const _0x2023ef=()=>{eventSource[_0x2c62cd(0x137,0x15d,0x17d,0x13c)+_0x2c62cd(0x14d,0x164,0x134,0x1b9)](eventNames['LLM_TRANSL'+_0x2c62cd(0x167,0x12e,0x180,0x159)+_0x2c62cd(0x18c,0x1a9,0x1c3,0x1ac)],_0x4da8a6);function _0x125117(_0x5bb820,_0x570f63,_0x2a512e,_0x2169ae){return _0x1fc5e5(_0x2a512e-0x3fd,_0x570f63-0x19e,_0x2a512e-0x18c,_0x2169ae);}function _0x2c62cd(_0x274e06,_0x30b228,_0x59e521,_0x5e00fe){return _0x1fc5e5(_0x30b228-0x16a,_0x30b228-0x86,_0x59e521-0x3,_0x59e521);}if(_0x205d4a)_0x3c7ec3[_0x125117(0x464,0x47c,0x457,0x47b)](clearTimeout,_0x205d4a);};function _0x1fc5e5(_0x4778e3,_0x13b7f1,_0x593d2a,_0x1b82aa){return _0x128ee2(_0x4778e3-0x90,_0x4778e3- -0x1a0,_0x593d2a-0x10b,_0x1b82aa);}const _0x4da8a6=_0x250d75=>{function _0x25756e(_0x470734,_0x51b27b,_0x457ae9,_0x55a0d4){return _0x1fc5e5(_0x470734-0x0,_0x51b27b-0xff,_0x457ae9-0x43,_0x55a0d4);}if(_0x3c7ec3[_0x25756e(0x19,-0xa,0x59,-0x2a)](_0x250d75['id'],_0x1ad76b))return;function _0x4627f2(_0x4634c1,_0x58e7ac,_0x54a34d,_0x46aeaa){return _0x1fc5e5(_0x4634c1-0x2c3,_0x58e7ac-0x141,_0x54a34d-0x127,_0x54a34d);}_0x3c7ec3['VAFtb'](_0x2023ef),console[_0x25756e(0x44,0x22,0x4e,0x60)](_0x4627f2(0x309,0x2da,0x2cf,0x2c8)+_0x25756e(-0x48,-0x56,-0x19,-0x84)+_0x4627f2(0x314,0x319,0x322,0x2d9)+'\x20'+_0x1ad76b+'):',_0x250d75);if(_0x250d75[_0x4627f2(0x2ce,0x27c,0x2ef,0x2d8)])_0x3c7ec3[_0x25756e(-0x11,-0x15,-0x12,-0x65)](_0x54de00,_0x250d75[_0x25756e(-0x12,-0x59,0x2c,0x2b)]);else{if(_0x250d75[_0x4627f2(0x291,0x260,0x255,0x264)]&&_0x250d75[_0x4627f2(0x291,0x272,0x271,0x2ac)][_0x25756e(-0x41,-0x29,-0x1b,-0xf)]===_0x3c7ec3[_0x4627f2(0x30f,0x2c8,0x2e7,0x314)]){const _0x2a2b52=new Error(_0x250d75[_0x25756e(-0x32,-0x2a,-0x61,0x5)][_0x25756e(-0x46,-0x14,-0x37,-0x55)]);_0x2a2b52['name']='AbortError',_0x3c7ec3['ptJUc'](_0x1d5f05,_0x2a2b52);}else{if(_0x3c7ec3[_0x25756e(-0x1c,-0x65,-0x53,-0x37)](_0x3c7ec3[_0x25756e(-0x2d,0x9,-0x26,-0x3e)],_0x3c7ec3[_0x25756e(-0x2d,0x20,-0x2c,-0x7c)]))_0x3c7ec3['ptJUc'](_0x1d5f05,new Error(_0x250d75[_0x25756e(-0x12,-0x4c,-0x2f,0x31)]));else{const _0x1bc775={};return _0x1bc775['results']=[],_0x1bc775[_0x4627f2(0x285,0x272,0x24a,0x2b0)+'t']='',_0x1bc775[_0x4627f2(0x2c5,0x2c1,0x2f3,0x289)+'gs']=[],_0x1bc775;}}}};eventSource['on'](eventNames[_0x3c6f0a(-0x53,0x2d,0x38,-0x1b)+_0x3c6f0a(-0x8e,-0xe4,-0x55,-0xa0)+'ONSE'],_0x4da8a6);const _0x27c00b={};_0x27c00b['prompt']=_0x348e86,_0x27c00b['id']=_0x1ad76b,eventSource[_0x1fc5e5(0x3,-0x29,0x55,0x58)](eventNames[_0x3c6f0a(-0x28,-0x7,-0x31,-0x1b)+'ATION_REQU'+_0x3c6f0a(-0x71,-0x59,-0x71,-0x7e)],_0x27c00b),_0x205d4a=_0x42dbbe[_0x3c6f0a(-0x91,-0x9c,-0xd4,-0xa7)](setTimeout,()=>{_0x42dbbe[_0x3abc1a(0x32f,0x349,0x318,0x391)](_0x2023ef);function _0x3abc1a(_0x1daad4,_0x25af0b,_0x4b8306,_0x4ebedf){return _0x1fc5e5(_0x25af0b-0x30f,_0x25af0b-0x1c3,_0x4b8306-0xcb,_0x4ebedf);}function _0x3803fd(_0x4fd565,_0x45c7af,_0x589ef3,_0x541b6d){return _0x1fc5e5(_0x589ef3-0x4a0,_0x45c7af-0x194,_0x589ef3-0x1,_0x541b6d);}_0x42dbbe[_0x3abc1a(0x39d,0x35d,0x310,0x376)](_0x1d5f05,new Error(_0x3abc1a(0x368,0x365,0x3a9,0x39e)+'时（'+timeoutMs+_0x3abc1a(0x368,0x334,0x304,0x31e)));},timeoutMs);});}export async function callTranslation(_0x58f59a){function _0x3e6a6a(_0x1b67ca,_0x5b1b21,_0x13b535,_0x55a28b){return _0x5aa7(_0x1b67ca- -0xc7,_0x5b1b21);}function _0x32ec7c(_0x6c09a5,_0x21edea,_0x452d5b,_0x46e99e){return _0x5aa7(_0x6c09a5-0x136,_0x21edea);}const _0x262e68={'UTVnl':function(_0x5f2f4d,_0x104a64){return _0x5f2f4d(_0x104a64);},'YnqKJ':function(_0x2ed5a6,_0x54868b){return _0x2ed5a6===_0x54868b;},'Pmnni':_0x3e6a6a(0xf3,0x141,0x12d,0xc8),'TaDnG':function(_0x54d42e,_0x402d7e,_0x250f2e){return _0x54d42e(_0x402d7e,_0x250f2e);},'MuDKe':'translatio'+'n','zOzqO':'user','pTEnE':function(_0x482601,_0x44265d){return _0x482601||_0x44265d;},'xQdWx':function(_0xb65aab,_0x201b52){return _0xb65aab(_0x201b52);}};try{if(_0x262e68[_0x3e6a6a(0xce,0xcc,0x93,0xc3)](_0x262e68[_0x32ec7c(0x2cd,0x2c2,0x2f9,0x2b7)],_0x262e68[_0x3e6a6a(0xd0,0x7e,0x10b,0x92)])){let _0x1fa488=_0x262e68[_0x3e6a6a(0x86,0xcb,0xa7,0xac)](buildPromptForRequestType,_0x262e68['MuDKe'],_0x58f59a||'');_0x1fa488=_0x262e68[_0x3e6a6a(0x126,0x162,0xfe,0x147)](mergeAdjacentMessages,_0x1fa488);const _0x4a818b=[..._0x1fa488,{'role':_0x262e68[_0x3e6a6a(0xf5,0xf9,0xbf,0xf1)],'content':_0x262e68[_0x32ec7c(0x2e4,0x2aa,0x28f,0x2ee)](_0x58f59a,'')}];_0x262e68['xQdWx'](updateCombinedPrompt,_0x4a818b);const _0x1a84ee=await _0x262e68[_0x32ec7c(0x313,0x312,0x347,0x34a)](LLM_TRANSLATION,_0x4a818b);return _0x1a84ee;}else{_0x3a8c55[_0x3e6a6a(0xc2,0x9c,0xc2,0x105)+_0x3e6a6a(0xc9,0x9f,0xda,0xee)](_0xec769a['LLM_TRANSL'+'ATION_RESP'+_0x3e6a6a(0x10e,0x10f,0x163,0xbf)],_0x1ca8f4);if(_0x11253f)_0x262e68[_0x3e6a6a(0x126,0x162,0x113,0xd3)](_0x9f657b,_0x301f55);}}catch(_0x1e90ec){_0x262e68[_0x3e6a6a(0x126,0x11c,0x152,0x176)](addLog,_0x3e6a6a(0xfd,0x143,0xae,0x122)+_0x1e90ec[_0x32ec7c(0x286,0x250,0x28b,0x23a)]),console['error'](_0x3e6a6a(0xc0,0xef,0xa7,0xd0),_0x1e90ec);throw _0x1e90ec;}}let isAiInitialized=![];function _0x5aa7(_0x34d6a7,_0x4fbbba){_0x34d6a7=_0x34d6a7-(0x2*-0x94d+0x184d+-0x466);const _0x46aced=_0x8c26();let _0x23b05a=_0x46aced[_0x34d6a7];if(_0x5aa7['vnVynr']===undefined){var _0x59a629=function(_0x4aa49f){const _0x583559='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3f6b3d='',_0x96eec6='',_0x11892e=_0x3f6b3d+_0x59a629;for(let _0x8c2e25=0x1*0x2334+-0x1b*0x163+0x23d,_0xf68090,_0x581b46,_0x2135e6=0x1*0x11d7+0x2356*0x1+-0x352d*0x1;_0x581b46=_0x4aa49f['charAt'](_0x2135e6++);~_0x581b46&&(_0xf68090=_0x8c2e25%(-0x277+-0xf07+-0x8c1*-0x2)?_0xf68090*(0x239*0x9+-0xae7+0xce*-0xb)+_0x581b46:_0x581b46,_0x8c2e25++%(0x1a5*0x11+0x17*0xa6+-0x2adb))?_0x3f6b3d+=_0x11892e['charCodeAt'](_0x2135e6+(0x29f+0x152*-0x3+0x161))-(0x790+0x137*0x10+-0x1af6)!==0x2*0x641+-0x647*0x1+-0x1d*0x37?String['fromCharCode'](-0x5d1*-0x2+0x125f+-0x4f*0x5e&_0xf68090>>(-(0x78d*-0x1+-0x1f6b+0xcfe*0x3)*_0x8c2e25&-0x262+-0xd*0xb0+-0x1*-0xb58)):_0x8c2e25:-0x7*0x339+-0x13e0+0x2a6f){_0x581b46=_0x583559['indexOf'](_0x581b46);}for(let _0x240816=0x3a8+-0x1*0xadb+0x61*0x13,_0x555c0d=_0x3f6b3d['length'];_0x240816<_0x555c0d;_0x240816++){_0x96eec6+='%'+('00'+_0x3f6b3d['charCodeAt'](_0x240816)['toString'](-0x102b+0x19e9+-0x9ae))['slice'](-(-0x23f2+-0x3*-0xad+-0x6c9*-0x5));}return decodeURIComponent(_0x96eec6);};_0x5aa7['oENNqn']=_0x59a629,_0x5aa7['MGUZwP']={},_0x5aa7['vnVynr']=!![];}const _0x4b6cf2=_0x46aced[0x2474+-0x1775+-0x1*0xcff],_0x1ee794=_0x34d6a7+_0x4b6cf2,_0x2cbc60=_0x5aa7['MGUZwP'][_0x1ee794];if(!_0x2cbc60){const _0xea84b=function(_0x4612f5){this['ZLyRIt']=_0x4612f5,this['lSJMUq']=[0x1648+-0xceb*0x3+0x107a,-0x1*0x10a5+-0xb2b+0x1bd0,0x2b8+-0x1*0x22db+0x2023],this['OAGTGE']=function(){return'newState';},this['FpUDSD']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['yeOHPC']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xea84b['prototype']['OacSOc']=function(){const _0x476b7e=new RegExp(this['FpUDSD']+this['yeOHPC']),_0x4ffdaa=_0x476b7e['test'](this['OAGTGE']['toString']())?--this['lSJMUq'][0x6*0x660+0x1*0xe3c+-0x347b]:--this['lSJMUq'][0x2f*0x42+0x19a7+-0x25c5];return this['dpTsxE'](_0x4ffdaa);},_0xea84b['prototype']['dpTsxE']=function(_0x12b100){if(!Boolean(~_0x12b100))return _0x12b100;return this['XIJCuB'](this['ZLyRIt']);},_0xea84b['prototype']['XIJCuB']=function(_0x490f3d){for(let _0x179f6e=-0x231+-0x219d*0x1+0x23ce,_0x1fa36a=this['lSJMUq']['length'];_0x179f6e<_0x1fa36a;_0x179f6e++){this['lSJMUq']['push'](Math['round'](Math['random']())),_0x1fa36a=this['lSJMUq']['length'];}return _0x490f3d(this['lSJMUq'][0x2d*-0x58+-0x1fd0+0x2f48]);},new _0xea84b(_0x5aa7)['OacSOc'](),_0x23b05a=_0x5aa7['oENNqn'](_0x23b05a),_0x5aa7['MGUZwP'][_0x1ee794]=_0x23b05a;}else _0x23b05a=_0x2cbc60;return _0x23b05a;}export function initAiSettings(_0x283ebc){function _0x568c78(_0x4461c2,_0x48bc75,_0x51767f,_0x414d50){return _0x5aa7(_0x48bc75- -0x68,_0x414d50);}!isAiInitialized&&(console['log']('st-chatu8:'+_0x568c78(0x10d,0x109,0x137,0x10c)+'\x20LLM\x20设置页面'),isAiInitialized=!![]);}