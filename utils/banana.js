(function(_0x3e425e,_0x4fbf7e){function _0x1bb78e(_0x15f41b,_0x463830,_0x20a442,_0x40fbf2){return _0x5102(_0x463830- -0x1b9,_0x20a442);}const _0xf49211=_0x3e425e();function _0xf23bfa(_0xa09c96,_0x376d23,_0x4b0f10,_0x4699bd){return _0x5102(_0xa09c96-0x26f,_0x4b0f10);}while(!![]){try{const _0x369f41=-parseInt(_0x1bb78e(0x95,0x5e,0x6,0xa5))/(0xd15*-0x2+0x7a4+-0x1f*-0x99)*(parseInt(_0x1bb78e(0x117,0xa6,0xd0,0x35))/(0x3a5*-0x2+0x7df+-0x93))+-parseInt(_0x1bb78e(-0x5,0x3c,-0x41,0x12))/(0x13da+0x1*0x24ed+-0x38c4)*(parseInt(_0x1bb78e(0xbd,0x53,0x1d,0x13))/(-0x1c00+-0x12fc+0x2f00))+parseInt(_0xf23bfa(0x496,0x504,0x4e3,0x465))/(0x1b81+-0x11cb*0x1+-0x9b1)+parseInt(_0xf23bfa(0x4ca,0x4a1,0x529,0x547))/(-0x2e9*-0x9+-0x4+-0x1a27)*(-parseInt(_0x1bb78e(0x127,0x9b,0xc6,0xd3))/(-0x661*-0x1+0xae4+-0x113e))+parseInt(_0xf23bfa(0x516,0x50d,0x58e,0x56b))/(-0x1c38+0x1f19+-0x51*0x9)+-parseInt(_0x1bb78e(0x20,0xaa,0xd7,0x9b))/(-0x698+-0x1*0x63+0x704)+-parseInt(_0x1bb78e(0x101,0x6a,0xa5,-0x29))/(0x726+-0x2*-0x4a5+-0x2*0x833)*(-parseInt(_0xf23bfa(0x555,0x4e1,0x4c8,0x5b0))/(-0x670+0xfbc*-0x2+-0x797*-0x5));if(_0x369f41===_0x4fbf7e)break;else _0xf49211['push'](_0xf49211['shift']());}catch(_0x2067d2){_0xf49211['push'](_0xf49211['shift']());}}}(_0x3724,0x1*-0x1597e+0x1*0xe8b4b+0x16e8d*-0x1));const _0x57ede3=(function(){function _0x36047e(_0x456445,_0x58cc2a,_0x355a1c,_0x2b4646){return _0x5102(_0x456445-0x22d,_0x58cc2a);}const _0x427e35={'ewcDS':function(_0x3bebe2,_0x5867f9){return _0x3bebe2===_0x5867f9;},'uUBTV':_0x36047e(0x4c8,0x517,0x4e1,0x454),'Snjrs':function(_0x749d23,_0x4e2e86){return _0x749d23(_0x4e2e86);},'rPFeW':_0x53aa8b(0x3c1,0x3a0,0x40c,0x36b)+'中的\x20prompt。','ElyYZ':function(_0x111217,_0x12da1e){return _0x111217!==_0x12da1e;},'eAbYR':_0x36047e(0x440,0x495,0x47b,0x432)};function _0x53aa8b(_0x4c65cc,_0x3e76b9,_0x28b979,_0x35ece7){return _0x5102(_0x4c65cc-0x189,_0x3e76b9);}let _0x100fc0=!![];return function(_0x1b87bd,_0x24026){function _0x3085fe(_0x2fc418,_0x5f0751,_0x59cd4b,_0x3d5038){return _0x36047e(_0x3d5038- -0x5c7,_0x5f0751,_0x59cd4b-0x5c,_0x3d5038-0xff);}function _0x4c97c7(_0x3b28dd,_0x3c8690,_0x3c6a18,_0x223092){return _0x53aa8b(_0x223092- -0x2c2,_0x3c8690,_0x3c6a18-0x13a,_0x223092-0x44);}const _0x48f327={'jhgmL':function(_0x5e282c,_0x42419b){function _0x46b6d3(_0x3d845e,_0x46c0c5,_0x1f6c1c,_0x472100){return _0x5102(_0x46c0c5-0x84,_0x1f6c1c);}return _0x427e35[_0x46b6d3(0x339,0x367,0x316,0x3a6)](_0x5e282c,_0x42419b);},'zuwiR':_0x427e35[_0x3085fe(-0x23a,-0x1f3,-0x23c,-0x1d5)]};if(_0x427e35['ElyYZ'](_0x3085fe(-0x10e,-0x11b,-0x172,-0x187),_0x427e35[_0x3085fe(-0x11a,-0x17d,-0x19e,-0x1a3)]))_0x2ba2fe=!![];else{const _0x554548=_0x100fc0?function(){function _0xc3dc87(_0x2ea411,_0x3092b,_0xa298ec,_0x2f9a9e){return _0x4c97c7(_0x2ea411-0x70,_0x2ea411,_0xa298ec-0x1df,_0x3092b-0x1e8);}function _0x48048b(_0x2966bc,_0xbd5f7e,_0x54dc92,_0x59a34b){return _0x3085fe(_0x2966bc-0xd3,_0x54dc92,_0x54dc92-0x1b2,_0x59a34b-0x38);}if(_0x24026){if(_0x427e35[_0x48048b(-0xa0,-0x52,-0x1b,-0x89)](_0x427e35[_0xc3dc87(0x2ad,0x2e6,0x2f9,0x2c4)],_0x48048b(-0x100,-0x1a9,-0x183,-0x199)))_0x48f327[_0xc3dc87(0x2e6,0x2eb,0x2db,0x2c0)](_0x1c3c7c,_0x48f327[_0xc3dc87(0x325,0x34c,0x2be,0x371)]),_0x5ceab6=_0x5d3891;else{const _0x22cd9a=_0x24026['apply'](_0x1b87bd,arguments);return _0x24026=null,_0x22cd9a;}}}:function(){};return _0x100fc0=![],_0x554548;}};}()),_0x598b8c=_0x57ede3(this,function(){const _0x553f93={};function _0x24a8c6(_0x4ff6f4,_0x14b8e1,_0x192000,_0x4fb84f){return _0x5102(_0x192000-0x1a8,_0x4fb84f);}_0x553f93['uCJhw']='(((.+)+)+)'+'+$';function _0x4dd55a(_0x5ce52d,_0x117a00,_0x227758,_0x2f806d){return _0x5102(_0x117a00-0x283,_0x2f806d);}const _0x112fb5=_0x553f93;return _0x598b8c[_0x24a8c6(0x429,0x411,0x3e9,0x3c1)]()['search'](_0x112fb5[_0x24a8c6(0x3c9,0x429,0x404,0x39f)])[_0x24a8c6(0x42d,0x389,0x3e9,0x3aa)]()['constructo'+'r'](_0x598b8c)[_0x24a8c6(0x41b,0x445,0x406,0x45c)](_0x112fb5['uCJhw']);});_0x598b8c();import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';function _0x5102(_0x589bbf,_0x16b9fa){_0x589bbf=_0x589bbf-(0x15fc+0x5b8*0x4+0x4cc*-0x9);const _0x4b0d07=_0x3724();let _0x554809=_0x4b0d07[_0x589bbf];if(_0x5102['ydStHO']===undefined){var _0x8b52f7=function(_0x133ba0){const _0x3ca6fe='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4bee6c='',_0x50b98c='',_0x15d2f6=_0x4bee6c+_0x8b52f7;for(let _0x21e5ea=0xa60+-0x1e77*0x1+-0x8b*-0x25,_0x249532,_0x43cf82,_0x1817f5=-0x19*-0x109+0x1*0x25a6+-0x3*0x152d;_0x43cf82=_0x133ba0['charAt'](_0x1817f5++);~_0x43cf82&&(_0x249532=_0x21e5ea%(-0x1db7*0x1+-0x19b3+0x376e)?_0x249532*(-0x1e89*-0x1+0x1775+-0x35be)+_0x43cf82:_0x43cf82,_0x21e5ea++%(0x2*0x33e+0xfe*0xb+-0x1162))?_0x4bee6c+=_0x15d2f6['charCodeAt'](_0x1817f5+(-0x1a8d+-0x6*-0x36d+0x1*0x609))-(-0xc62+0x710*0x2+0x1*-0x1b4)!==-0x61*-0x36+-0xd62+-0x714?String['fromCharCode'](0x381+-0x5*-0x4f6+-0x1b50&_0x249532>>(-(-0x1*-0x1602+0x1*0x15c7+-0x2bc7)*_0x21e5ea&-0x24b*0xf+0xacb+0x17a0)):_0x21e5ea:-0x1c4c+0x299*0x1+0x19b3){_0x43cf82=_0x3ca6fe['indexOf'](_0x43cf82);}for(let _0x2e55db=0x15f2+0x147e+-0xe*0x308,_0x54402c=_0x4bee6c['length'];_0x2e55db<_0x54402c;_0x2e55db++){_0x50b98c+='%'+('00'+_0x4bee6c['charCodeAt'](_0x2e55db)['toString'](0x964+0x215+-0xb69))['slice'](-(-0xb62+-0xb*-0x2f6+-0x152e));}return decodeURIComponent(_0x50b98c);};_0x5102['EAPFtG']=_0x8b52f7,_0x5102['DtVPJO']={},_0x5102['ydStHO']=!![];}const _0x2a63aa=_0x4b0d07[0x178a+-0x1*-0x1246+-0x29d0],_0x4f7bb6=_0x589bbf+_0x2a63aa,_0x3b0c0a=_0x5102['DtVPJO'][_0x4f7bb6];if(!_0x3b0c0a){const _0x4c9971=function(_0x42df4e){this['bMwmAT']=_0x42df4e,this['UoSjym']=[-0x1*0xab0+-0x1*-0x305+0x7ac,0x247d+-0x22*-0xa7+0x3aab*-0x1,0xf6f+-0x1ea3+0xf34],this['vLDHVm']=function(){return'newState';},this['KwxsMM']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['eKCVgY']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4c9971['prototype']['RyPyZK']=function(){const _0x133940=new RegExp(this['KwxsMM']+this['eKCVgY']),_0xd8c0e5=_0x133940['test'](this['vLDHVm']['toString']())?--this['UoSjym'][0x21*0xa4+-0x2461+0xf3e]:--this['UoSjym'][-0x7a8+0x3*0x271+0x55];return this['lxlpSr'](_0xd8c0e5);},_0x4c9971['prototype']['lxlpSr']=function(_0x3925e8){if(!Boolean(~_0x3925e8))return _0x3925e8;return this['OtrcZJ'](this['bMwmAT']);},_0x4c9971['prototype']['OtrcZJ']=function(_0x8f45f4){for(let _0x10e8c9=-0x16c+0x20dd+-0x1f71,_0x152c7d=this['UoSjym']['length'];_0x10e8c9<_0x152c7d;_0x10e8c9++){this['UoSjym']['push'](Math['round'](Math['random']())),_0x152c7d=this['UoSjym']['length'];}return _0x8f45f4(this['UoSjym'][0x222d+-0x215*0x11+0x138]);},new _0x4c9971(_0x5102)['RyPyZK'](),_0x554809=_0x5102['EAPFtG'](_0x554809),_0x5102['DtVPJO'][_0x4f7bb6]=_0x554809;}else _0x554809=_0x3b0c0a;return _0x554809;}async function getImageFromTurnData(_0x370c49){function _0x45951d(_0x5a79a5,_0x3b711e,_0x3e1792,_0xa6e4ca){return _0x5102(_0xa6e4ca-0x36c,_0x5a79a5);}const _0x171d2d={'QUTbo':function(_0x160fc7,_0x24d6d3){return _0x160fc7(_0x24d6d3);}};if(!_0x370c49)return'';if(_0x370c49['imageId']&&_0x370c49['imageId']['startsWith'](_0x45951d(0x501,0x50d,0x583,0x59d))){const _0xf12932=await _0x171d2d['QUTbo'](getConfigImage,_0x370c49[_0x45951d(0x5c8,0x5a1,0x5f5,0x58a)]);return _0xf12932||'';}if(_0x370c49['image']&&_0x370c49[_0x506970(-0x101,-0xdc,-0x10b,-0x143)]['startsWith'](_0x506970(-0x176,-0x129,-0xfc,-0x6f)))return _0x370c49['image'];function _0x506970(_0x1853d2,_0x108695,_0x2b68e6,_0x681a5f){return _0x5102(_0x2b68e6- -0x337,_0x681a5f);}return'';}async function generateBananaImage({prompt:_0x3098c6,width:_0x604621,height:_0x496e85,change:_0x13ac2f,retouchPrompt:_0x2242b7,retouchImage:_0x5248c1}){const _0x3c77f8={'syBVH':'user','IwdGd':_0x4d6b56(0x338,0x31f,0x28b,0x2be)+'+$','jwaSE':function(_0x4fbb02,_0x1e8d84){return _0x4fbb02(_0x1e8d84);},'ulfQJ':_0x3b2c03(0x3f,0xab,0xc4,0x89)+_0x3b2c03(0xa2,0xf5,0x154,0xe4),'tHYqP':function(_0x23e722,_0x1c1056){return _0x23e722<=_0x1c1056;},'pqiKU':function(_0x1296c2,_0x524e8b){return _0x1296c2+_0x524e8b;},'KWEyg':_0x3b2c03(0xda,0xfc,0xd5,0x13a),'kxiKz':_0x4d6b56(0x2a3,0x2d1,0x25d,0x249)+_0x3b2c03(0x8a,-0x66,-0x64,0x20)+':','dSgra':'[Banana]\x20生'+_0x3b2c03(0xef,0xa6,0xd3,0xda),'hzrTg':function(_0x502992,_0xf78d88){return _0x502992!==_0xf78d88;},'wYwwv':_0x3b2c03(0x115,0xc5,0xaa,0xa6),'HdafB':_0x4d6b56(0x2bc,0x29a,0x2ee,0x2f9)+_0x4d6b56(0x267,0x254,0x208,0x260),'eIKae':function(_0x406ff3,_0x2e3726){return _0x406ff3(_0x2e3726);},'wmysu':function(_0x146c0b,_0x1467d){return _0x146c0b(_0x1467d);},'NcFnz':function(_0x3bf527,_0x41fe12){return _0x3bf527(_0x41fe12);},'wYMlB':function(_0x3d80f2,_0x4e95d2){return _0x3d80f2(_0x4e95d2);},'haQec':function(_0xaf9e49,_0x12a77d){return _0xaf9e49||_0x12a77d;},'eLyJx':function(_0x2bd6c,_0x3a0c43){return _0x2bd6c!==_0x3a0c43;},'iZfrP':_0x3b2c03(-0x3b,-0x3a,0x37,0x30)+_0x3b2c03(0x16,-0xe,0x21,0x72),'ScKwm':function(_0x5ea900,_0x20b1d9){return _0x5ea900(_0x20b1d9);},'XVhky':function(_0x46393b,_0x2debf7){return _0x46393b===_0x2debf7;},'ntQUu':_0x4d6b56(0x2f8,0x30e,0x311,0x33b),'EObrC':function(_0x9cf1bc,_0x1cbad1){return _0x9cf1bc(_0x1cbad1);},'yZfsF':_0x4d6b56(0x260,0x27a,0x2cf,0x250)+_0x4d6b56(0x2c1,0x26a,0x307,0x23d),'JYyVe':function(_0x1d420b,_0x207175,_0x3210a3){return _0x1d420b(_0x207175,_0x3210a3);},'rXcbR':function(_0x239dab,_0x1eb10d){return _0x239dab!==_0x1eb10d;},'QsyEB':_0x3b2c03(0x6b,-0x5c,-0x4,0x29),'CHEBf':_0x4d6b56(0x29c,0x2b8,0x2ba,0x348),'klXrI':function(_0x3ec9b2,_0x16a588){return _0x3ec9b2+_0x16a588;},'rwlZT':'\x20|\x20','Kglav':function(_0x7bd8ce,_0x4556f8){return _0x7bd8ce===_0x4556f8;},'NQHiM':_0x4d6b56(0x2a0,0x2af,0x212,0x27c),'uEHWP':_0x3b2c03(0xa7,0x1a6,0xee,0x11c),'gifhd':_0x3b2c03(0x109,0xa7,0x8a,0xca),'YKgnQ':_0x4d6b56(0x313,0x2cc,0x26b,0x2a0),'BRzDE':_0x3b2c03(0x15d,0x16d,0x185,0x129),'bsGjT':_0x3b2c03(-0x39,0x7,0xba,0x28),'tjbwL':function(_0x5e1ad8,_0x50420a){return _0x5e1ad8(_0x50420a);},'wHipk':_0x3b2c03(0xca,0x51,0x45,0x9d),'eyBkN':_0x3b2c03(0x17e,0x1a5,0x143,0x114),'iiUOK':_0x4d6b56(0x2b3,0x24a,0x23e,0x1bf),'bQoEw':_0x4d6b56(0x284,0x268,0x2cf,0x2b5),'yKGQj':function(_0xcac137,_0x2f4eac){return _0xcac137(_0x2f4eac);},'KDdGd':_0x4d6b56(0x1fe,0x25d,0x1ee,0x29b)+_0x4d6b56(0x321,0x2f2,0x31c,0x36c)+'。','hgygS':function(_0x42e68b,_0x5952f9){return _0x42e68b||_0x5952f9;},'KGxyL':_0x3b2c03(0x12f,0x16c,0x84,0x10c),'ItPWu':function(_0x5161d3,_0x45f229){return _0x5161d3(_0x45f229);},'QohvF':function(_0x38bf79,_0x48095e){return _0x38bf79===_0x48095e;},'rUeqh':'CzZOb','UAJII':_0x3b2c03(0x122,0x18f,0xf2,0x101),'IdoBa':function(_0x4f7cee,_0xce47b7){return _0x4f7cee(_0xce47b7);},'NUsja':_0x4d6b56(0x179,0x1f4,0x210,0x253),'GoYal':function(_0x1f0aa4,_0x4d9420){return _0x1f0aa4===_0x4d9420;},'GLeHJ':_0x3b2c03(0xee,0x33,0x88,0x62),'wfCjU':function(_0x26b01d,_0x1490bc){return _0x26b01d!==_0x1490bc;},'TuPiB':function(_0x2541ab,_0x36bd09){return _0x2541ab>_0x36bd09;},'fmkKY':function(_0x4304af,_0xc5f280){return _0x4304af>_0xc5f280;},'lyEPN':function(_0xd5d975,_0x3dd181){return _0xd5d975||_0x3dd181;},'ONUKY':function(_0x54c3da,_0x1d9bd6){return _0x54c3da(_0x1d9bd6);},'HzaKx':function(_0x5401bc,_0x34cefa){return _0x5401bc(_0x34cefa);},'krHEB':_0x4d6b56(0x228,0x28e,0x2f8,0x28b),'QanRH':'/v1/','dycEY':function(_0x45851b,_0xed733){return _0x45851b+_0xed733;},'woGvr':function(_0x4a5557,_0x5aa3ff){return _0x4a5557(_0x5aa3ff);},'YGVZs':_0x3b2c03(0xf5,0x1a5,0x102,0x11b),'NbQTc':_0x4d6b56(0x2c3,0x307,0x2c9,0x2a5),'rovIR':_0x3b2c03(-0x4f,0x82,0xc0,0x4f),'MQMyY':_0x3b2c03(0x145,0x156,0x7c,0xf0),'hOTgf':function(_0x5b0086,_0x2cd412){return _0x5b0086===_0x2cd412;},'jGJCD':_0x3b2c03(0x3f,0x69,0x48,0x3a),'KRlgI':'[Banana]\x20D'+_0x4d6b56(0x20e,0x2a7,0x324,0x28d)+_0x4d6b56(0x1ae,0x227,0x19a,0x218)+'ge\x20format,'+_0x4d6b56(0x326,0x28b,0x2fb,0x227)+_0x3b2c03(0x84,-0x1e,0x8,0x4c),'gaBFv':function(_0x16723b,_0x5be65d){return _0x16723b(_0x5be65d);},'jYekq':function(_0x4246a7,_0x25b473){return _0x4246a7(_0x25b473);},'RmzWS':_0x3b2c03(0x124,0x27,0x116,0xa9)+_0x4d6b56(0x266,0x286,0x223,0x219)+'y\x20converte'+'d\x20Markdown'+_0x3b2c03(0x113,0x76,0x93,0xbe)+_0x4d6b56(0x37b,0x2ed,0x276,0x37b),'Prqgw':function(_0x2de47f,_0xd477af){return _0x2de47f(_0xd477af);},'DEebr':'[Banana]\x20U'+_0x4d6b56(0x2db,0x30f,0x365,0x33f)+_0x3b2c03(0x1f,0x116,0xeb,0x80)+'allback.','JGIsW':_0x3b2c03(0x9c,0xc8,-0x32,0x51),'zWAkT':_0x3b2c03(-0x19,0x2d,0x9,0x5e)+_0x4d6b56(0x25e,0x291,0x25b,0x27b)+_0x4d6b56(0x2b3,0x251,0x2ee,0x2b2)+_0x3b2c03(0x151,0xa6,0xa5,0xdf)+_0x3b2c03(-0x35,0xe0,-0xa,0x42),'uPmvH':_0x4d6b56(0x2ac,0x20f,0x285,0x254),'tXrsy':function(_0x20f39d,_0x354457){return _0x20f39d(_0x354457);},'lIiJl':_0x4d6b56(0x19f,0x1f3,0x154,0x266)+_0x4d6b56(0x2e2,0x27f,0x207,0x20a)+'ated\x20succe'+_0x3b2c03(0x144,0x14c,0x115,0x12e),'kPlrX':function(_0x12ac33,_0x2458d2){return _0x12ac33(_0x2458d2);}};_0x3098c6=_0x3c77f8['wmysu'](processCharacterPrompt,_0x3098c6),_0x3098c6=await _0x3c77f8['NcFnz'](stripChineseAnnotations,_0x3098c6);let _0x138219=_0x13ac2f;_0x13ac2f=processCharacterPrompt(_0x13ac2f),_0x13ac2f=await stripChineseAnnotations(_0x13ac2f),_0x3c77f8[_0x4d6b56(0x32e,0x305,0x323,0x30a)](addLog,'开始\x20Banana生'+_0x4d6b56(0x291,0x26c,0x2a4,0x30b)+extension_settings[extensionName][_0x4d6b56(0x37c,0x302,0x27e,0x384)]),_0x3c77f8[_0x4d6b56(0x2f6,0x2de,0x2d5,0x360)](addLog,_0x4d6b56(0x1b7,0x225,0x2c2,0x22c)+'\x20'+(_0x604621||'默认')+_0x3b2c03(0xf8,0xcf,0x169,0xd2)+_0x3c77f8[_0x4d6b56(0x353,0x329,0x2b6,0x2b4)](_0x496e85,'默认')),_0x3098c6=_0x13ac2f&&_0x3c77f8[_0x3b2c03(0x92,0x35,0x44,0x47)](_0x13ac2f[_0x3b2c03(0x12a,0x101,0x70,0xf1)](),'')?_0x13ac2f:_0x3098c6,_0x3c77f8[_0x3b2c03(0x8e,-0x2e,0x9e,0x5b)](addLog,_0x4d6b56(0x228,0x20a,0x194,0x254)+_0x3098c6);let _0x192582=![];_0x3098c6['includes'](_0x3c77f8[_0x4d6b56(0x209,0x263,0x263,0x2ea)])&&(_0x192582=!![]);function _0x4d6b56(_0x257114,_0x2506c7,_0x1ab974,_0x10b58c){return _0x5102(_0x2506c7-0x42,_0x257114);}_0x3c77f8['eIKae'](addLog,_0x3b2c03(0x181,0xa9,0x194,0x13c)+_0x3b2c03(0x25,0x93,0x24,0x24)+_0x4d6b56(0x294,0x2c2,0x33f,0x2d9)+_0x192582);let _0x257250={},_0x12bb1a='',_0x19234f='';if(_0x192582){_0x3c77f8['ScKwm'](addLog,_0x3c77f8[_0x3b2c03(0xd9,0xe6,0x2a,0x82)]),_0x257250=_0x3c77f8[_0x3b2c03(0x73,0xfe,0xcd,0xae)](parsePromptStringWithCoordinates,_0x3098c6),_0x12bb1a=_0x257250['Scene\x20Comp'+_0x4d6b56(0x28e,0x256,0x248,0x295)];for(let _0x598980=-0x9*0x10d+-0x1c87*0x1+-0x19*-0x185;_0x3c77f8['tHYqP'](_0x598980,0x1*-0x25ec+-0x1*0x289+0x2879);_0x598980++){_0x257250['Character\x20'+_0x598980+_0x3b2c03(0x9e,-0x11,0xa4,0x14)]&&(_0x19234f=_0x3c77f8[_0x4d6b56(0x379,0x2e2,0x35f,0x37d)](_0x3c77f8['pqiKU'](_0x19234f,',\x20'),_0x257250[_0x4d6b56(0x260,0x270,0x238,0x1ef)+_0x598980+_0x3b2c03(-0x70,-0x74,-0x59,0x14)]));}}else{if(_0x3c77f8['XVhky']('wogEu',_0x3c77f8[_0x4d6b56(0x299,0x278,0x2bf,0x27e)]))_0x3c77f8[_0x4d6b56(0x167,0x1f2,0x1c2,0x163)](addLog,_0x3c77f8['yZfsF']),_0x12bb1a=_0x3098c6;else{const _0x2d506a={};_0x2d506a[_0x3b2c03(0x95,0xbe,0x82,0xf7)]=_0x3c77f8[_0x3b2c03(0x147,0xcb,0xd6,0xeb)],_0x2d506a[_0x3b2c03(0xd2,0xd5,0x17c,0x11d)]=_0x415778,_0x50ddcf[_0x3b2c03(0x14c,0xf7,0x4d,0xc4)](_0x2d506a);}}let {modifiedPrompt:_0x1a8283,insertions:_0x412515}=await _0x3c77f8['JYyVe'](prompt_replace,_0x12bb1a,_0x19234f);if(_0x192582){if(_0x3c77f8[_0x4d6b56(0x24c,0x252,0x2c6,0x1cc)](_0x3c77f8[_0x4d6b56(0x2ca,0x2b2,0x335,0x2ed)],_0x3c77f8[_0x3b2c03(0x153,0x81,0x57,0xce)])){const _0x375ed7=new _0x3073b0();_0x375ed7[_0x3b2c03(0xf9,0xeb,0x12b,0xfd)]=()=>_0x50555c(_0x375ed7[_0x3b2c03(0x5e,-0x1d,0xd1,0x54)]),_0x375ed7[_0x3b2c03(0x98,0x17,0x11e,0x93)]=_0x506725,_0x375ed7[_0x3b2c03(0xfe,0x125,0x126,0xdb)+'URL'](_0x4e37ba);}else for(let _0x430080=-0x5b7*-0x5+0x182d+0x3*-0x1195;_0x3c77f8[_0x3b2c03(0x88,-0x20,-0x46,0x1e)](_0x430080,0xfaf+0x1*0xdf3+-0x2*0xecf);_0x430080++){if(_0x3c77f8['CHEBf']===_0x3b2c03(0x14f,0x133,0x14f,0x110))return _0x48a92a['toString']()[_0x3b2c03(0xeb,0x7a,0x82,0xbc)](Rwzrox[_0x3b2c03(0xb8,0x9d,0x69,0x4b)])[_0x4d6b56(0x302,0x283,0x211,0x2b8)]()[_0x4d6b56(0x2af,0x29c,0x20d,0x276)+'r'](_0x1f5ae2)[_0x4d6b56(0x2fc,0x2a0,0x2f8,0x31b)](Rwzrox[_0x4d6b56(0x1d0,0x22f,0x2b0,0x1e5)]);else _0x257250[_0x4d6b56(0x22d,0x270,0x2c8,0x281)+_0x430080+'\x20Prompt']&&(_0x1a8283=_0x3c77f8[_0x3b2c03(0x7c,0x15d,0xb5,0xfe)](_0x3c77f8[_0x3b2c03(0x7,0x65,0xd0,0x38)](_0x1a8283,_0x3c77f8['rwlZT']),_0x3c77f8[_0x3b2c03(0x116,0x138,0xa0,0x11a)](prompt_replace_for_character,_0x257250[_0x4d6b56(0x20d,0x270,0x287,0x1e6)+_0x430080+'\x20Prompt'])));}}const _0x3e8f12=extension_settings[extensionName][_0x3b2c03(0x171,0x8b,0x163,0xe9)],{model:_0xeeadde,apiUrl:_0x428ef7,apiKey:_0x335779,conversationPresets:_0x2d13fb,conversationPresetId:_0x331278,editPresetId:_0x4128f3,aspectRatio:_0x130342}=_0x3e8f12;_0x3c77f8[_0x4d6b56(0x2c5,0x23f,0x285,0x1f3)](addLog,_0x3b2c03(0xd,0x75,0x19,0xa9)+_0x3b2c03(0x16d,0x16c,0x56,0xee)+_0x3b2c03(0x4f,0xde,0x8c,0xd6)+_0x3b2c03(-0x11,0x75,0xd4,0x44)+_0x4d6b56(0x365,0x2f9,0x29f,0x2f6)+_0xeeadde);let _0x18e8a8,_0x55b7cc;if(_0xeeadde[_0x4d6b56(0x234,0x2c0,0x323,0x26b)](_0x4d6b56(0x256,0x2a9,0x327,0x21a))){if(_0x3c77f8['Kglav'](_0x3c77f8[_0x4d6b56(0x349,0x2aa,0x2a8,0x2b8)],_0x3c77f8[_0x3b2c03(0x2c,0x81,0x4e,0x3c)])){_0x3c77f8[_0x3b2c03(0xbb,0x50,-0x35,0x5b)](_0x33dc79,_0x3c77f8[_0x4d6b56(0x282,0x266,0x1f8,0x280)]),_0x3405ba=_0x3c77f8[_0x4d6b56(0x24c,0x23f,0x2a3,0x1ec)](_0x299148,_0x5b5179),_0x3cdc02=_0x4f66a9[_0x3b2c03(-0x38,-0x1d,0x81,0x30)+_0x4d6b56(0x1d1,0x256,0x1f2,0x1ba)];for(let _0x40bceb=0x1108+0x1*0x617+0x21a*-0xb;_0x3c77f8['tHYqP'](_0x40bceb,-0x4*-0x541+0x12a0+0x27a0*-0x1);_0x40bceb++){_0x25d480['Character\x20'+_0x40bceb+_0x3b2c03(0x5,-0x63,-0x33,0x14)]&&(_0x173f17=_0x3c77f8[_0x4d6b56(0x2bf,0x2e2,0x2c7,0x2b2)](_0x58c4a4+',\x20',_0x21f772['Character\x20'+_0x40bceb+_0x4d6b56(0x270,0x1f8,0x19d,0x19b)]));}}else{_0x18e8a8=_0x4d6b56(0x282,0x1ff,0x226,0x27a)+_0x4d6b56(0x21a,0x1fc,0x257,0x1f8)+_0xeeadde;const _0x407ef2={};_0x407ef2['fixedPromp'+'t']='';const _0x30f3f6=_0x2d13fb[_0x331278]||_0x407ef2,_0x168550=[_0x30f3f6[_0x3b2c03(0x7b,0x35,0x51,0x46)+'t'],_0x412515['前置前'],_0x412515[_0x3c77f8[_0x4d6b56(0x2d7,0x258,0x20f,0x26d)]],_0x1a8283,_0x412515[_0x3c77f8[_0x3b2c03(0x75,0xad,0x92,0x9e)]],_0x412515[_0x3c77f8[_0x3b2c03(0x12,0xb0,0xe0,0x68)]],_0x30f3f6['postfixPro'+_0x3b2c03(0x23,0xb7,0x113,0x7b)],_0x412515[_0x3c77f8[_0x4d6b56(0x34a,0x32a,0x38f,0x2c1)]]]['filter'](Boolean)['join'](',\x20');_0x3c77f8[_0x4d6b56(0x372,0x2f7,0x2f7,0x325)](addLog,_0x3b2c03(0x150,0xef,0x121,0x10d)+_0x168550);const _0x51d937={};_0x51d937[_0x3b2c03(0x5b,0x13f,0x12d,0xf5)]=_0x168550;const _0x3d7021={};_0x3d7021[_0x4d6b56(0x288,0x31c,0x32d,0x325)+'t']=0x1,_0x3d7021[_0x4d6b56(0x1a9,0x22c,0x26f,0x245)+'o']=_0x130342;const _0x34b467={};_0x34b467['instances']=[_0x51d937],_0x34b467[_0x4d6b56(0x286,0x30b,0x2cc,0x35d)]=_0x3d7021,_0x55b7cc=_0x34b467,addLog(_0x4d6b56(0x26a,0x2b9,0x2ab,0x256)+_0x3b2c03(0xb6,0x22,0x6e,0x58)+_0x4d6b56(0x1d5,0x249,0x1f2,0x1e5)+_0x3b2c03(0x7a,0xa0,0xf6,0xd8)+_0x4d6b56(0x24d,0x21f,0x244,0x207)+_0x168550);}}else{if(_0x3c77f8['wHipk']!=='UOWCM')!_0x218055[_0x3b2c03(0x8b,-0x60,0x6d,0x1f)+_0x3b2c03(-0x3b,-0x40,-0x59,0x31)+'ener']&&(_0x4520be[_0x3b2c03(0x31,-0x65,0x89,0x1f)+'BananaList'+_0x3b2c03(0xd5,0x13a,0xb1,0xc9)]=!![],_0xc483a2()),_0x461072();else{_0x18e8a8=_0x3b2c03(0x1a7,0x162,0x1a9,0x136)+_0x4d6b56(0x246,0x23d,0x1bd,0x2a4);let _0x1d39a2;if(_0x13ac2f[_0x3b2c03(0xc8,0xe9,0x9b,0x132)](_0x3c77f8['eyBkN'])){if(_0x3c77f8[_0x4d6b56(0x299,0x297,0x314,0x254)](_0x3c77f8[_0x4d6b56(0x28d,0x253,0x216,0x1f3)],_0x3c77f8['bQoEw'])){_0x3c77f8[_0x3b2c03(0x2e,0x98,0x13,0x4d)](addLog,_0x3c77f8['KDdGd']);const _0x3be110=_0x3c77f8[_0x4d6b56(0x231,0x2c4,0x234,0x23b)](_0x4128f3,'默认'),_0x14823e={};_0x14823e[_0x4d6b56(0x2aa,0x25a,0x26a,0x2b0)+'on']=[],_0x14823e[_0x4d6b56(0x289,0x22a,0x231,0x1f0)+'t']='',_0x1d39a2=_0x2d13fb[_0x3be110]||_0x14823e,addLog(_0x4d6b56(0x2b2,0x244,0x1e2,0x221)+_0x4d6b56(0x2b3,0x267,0x2bf,0x1f9)+_0x3be110+'\x22');}else _0x491e56('缓存设置为不存入数据'+'库');}else{const _0x5e2f3c={};_0x5e2f3c['conversati'+'on']=[],_0x5e2f3c[_0x4d6b56(0x29a,0x22a,0x1f3,0x253)+'t']='',_0x1d39a2=_0x2d13fb[_0x331278]||_0x5e2f3c;}const _0x4399c6=[_0x1d39a2[_0x4d6b56(0x251,0x22a,0x272,0x237)+'t'],_0x412515[_0x3c77f8[_0x3b2c03(0x30,0xca,0x8b,0xc2)]],_0x412515[_0x3b2c03(0x6a,0x5a,0xf9,0xca)],_0x1a8283,_0x412515[_0x3c77f8[_0x3b2c03(0x7d,0x13c,0xe1,0x9e)]],_0x412515[_0x3c77f8[_0x3b2c03(0x81,0xb9,0x8b,0x68)]],_0x1d39a2[_0x3b2c03(-0x31,0x5,0xa9,0x12)+_0x3b2c03(0x64,0x115,0x29,0x7b)],_0x412515[_0x3c77f8['bsGjT']]][_0x4d6b56(0x2b0,0x303,0x2d6,0x2e2)](Boolean)[_0x4d6b56(0x2c2,0x32b,0x327,0x33b)](',\x20');_0x3c77f8['ItPWu'](addLog,_0x4d6b56(0x25a,0x2f1,0x34f,0x258)+_0x4399c6);const _0x6429ba={};_0x6429ba[_0x4d6b56(0x375,0x2db,0x2b4,0x30b)]='user',_0x6429ba[_0x3b2c03(0x151,0x156,0x9e,0x11d)]=[];const _0x6ea470={};_0x6ea470[_0x3b2c03(0x15a,0x15e,0xac,0xf7)]=_0x4d6b56(0x2e8,0x31e,0x2b9,0x389),_0x6ea470[_0x3b2c03(0x147,0xb3,0x15d,0x11d)]=[];const _0x4f9ab2=_0x1d39a2[_0x4d6b56(0x1e0,0x25a,0x23c,0x2cb)+'on'][_0x3b2c03(0x8f,-0x56,0x4e,0x1a)](_0x15ee61=>[_0x6429ba,_0x6ea470])['flat']();let _0x1f02ff=0x2*-0x925+-0x7da+0x1a24;for(const _0x15775f of _0x1d39a2['conversati'+'on']){if(_0x3c77f8[_0x4d6b56(0x29e,0x240,0x1ac,0x233)](_0x4d6b56(0x2f0,0x309,0x381,0x2ab),_0x3c77f8[_0x4d6b56(0x2b8,0x314,0x2a5,0x2a6)])){if(_0x15775f[_0x4d6b56(0x3c0,0x32c,0x359,0x2d1)]?.[_0x3b2c03(0x68,0x179,0x88,0x101)])_0x4f9ab2[_0x1f02ff]['content'][_0x3b2c03(0x37,0x110,0x76,0xc4)]({'type':_0x3c77f8['UAJII'],'text':_0x15775f[_0x4d6b56(0x2c7,0x32c,0x2dd,0x291)][_0x3b2c03(0x122,0x17e,0xe7,0x101)]});const _0x7a4c2=await _0x3c77f8[_0x4d6b56(0x2d8,0x2c7,0x25d,0x22d)](getImageFromTurnData,_0x15775f[_0x4d6b56(0x2ec,0x32c,0x3be,0x364)]);if(_0x7a4c2)_0x4f9ab2[_0x1f02ff][_0x3b2c03(0x158,0x103,0xdd,0x11d)]['push']({'type':_0x3c77f8['NUsja'],'image_url':{'url':_0x7a4c2}});_0x1f02ff++;if(_0x15775f[_0x3b2c03(0xf8,0xa0,0x150,0xe5)]?.[_0x4d6b56(0x2c5,0x2e5,0x2ef,0x2c3)])_0x4f9ab2[_0x1f02ff][_0x4d6b56(0x35d,0x301,0x33c,0x2d1)]['push']({'type':_0x3c77f8[_0x3b2c03(0x48,0x19,0x7e,0xa5)],'text':_0x15775f['model'][_0x4d6b56(0x26b,0x2e5,0x273,0x311)]});const _0x168ce4=await _0x3c77f8[_0x4d6b56(0x215,0x262,0x263,0x2dd)](getImageFromTurnData,_0x15775f[_0x3b2c03(0x84,0xa3,0xe7,0xe5)]);if(_0x168ce4)_0x4f9ab2[_0x1f02ff][_0x4d6b56(0x270,0x301,0x2da,0x361)][_0x3b2c03(0x11b,0x107,0xe5,0xc4)]({'type':_0x3c77f8[_0x3b2c03(0xe0,0x3d,0x78,0x78)],'image_url':{'url':_0x168ce4}});_0x1f02ff++;}else{const _0x3a2048=_0x3b2c03(0x182,0x192,0x149,0xfc)+_0x4d6b56(0x2d1,0x243,0x2e2,0x276)+_0x3b2c03(0x48,-0x58,0x60,0x2e)+_0x3b2c03(0xa7,0x15d,0x55,0xbf)+_0x2232d5+':\x20'+_0x3b15c2['message'];_0xc2004a(_0x3a2048),_0x69ea59['error'](_0x3a2048);const _0x1dd881={};_0x1dd881['id']=_0x118a40,_0x1dd881[_0x4d6b56(0x2e2,0x293,0x21b,0x216)]=![],_0x1dd881[_0x4d6b56(0x253,0x236,0x1b0,0x28e)]=_0xc8b806[_0x3b2c03(0x1c,-0x33,0x63,0x37)],_0x1dd881['prompt']=_0x1e6d18,_0x5da715[_0x4d6b56(0x345,0x2dc,0x375,0x2b4)](_0x4fa4dc[_0x3b2c03(0x4a,0xd2,-0x41,0x4e)+_0x4d6b56(0x2f5,0x257,0x1d8,0x1e8)+'NSE'],_0x1dd881),_0x3c77f8[_0x3b2c03(-0x9,0xd6,0xa6,0x5b)](_0x48556a,_0x4d6b56(0x2ad,0x2d8,0x331,0x30d)+'mitted\x20fai'+_0x3b2c03(0x16,0xc3,0xc1,0x87)+'nse\x20for\x20ID'+':\x20'+_0x4d60d1);}}if(!_0x13ac2f[_0x3b2c03(0xb1,0x130,0x12c,0x132)](_0x3c77f8['eyBkN'])){const _0x48d2fa=extension_settings[extensionName]['bananaChar'+_0x3b2c03(0xa7,0x19e,0xcd,0x124)+'ts']||{};for(const _0x295aa4 in _0x48d2fa){const _0x4c619b=_0x48d2fa[_0x295aa4],_0xad75cd=(_0x4c619b[_0x4d6b56(0x2f8,0x2c5,0x253,0x33e)]||'')[_0x3b2c03(0xd0,0xd0,0xf5,0xc8)]('|')[_0x3b2c03(0x19a,0x175,0x11a,0x11f)](_0x5f2af3=>_0x5f2af3[_0x3b2c03(0x6d,0x85,0x59,0xf1)]()!=='');for(const _0x409027 of _0xad75cd){if(_0x3c77f8[_0x4d6b56(0x229,0x221,0x274,0x2ab)](_0x3c77f8[_0x3b2c03(0xbd,-0x29,0x11,0x3f)],_0x3c77f8[_0x4d6b56(0x296,0x223,0x192,0x25d)])){if(_0x4399c6['toLowerCas'+'e']()[_0x4d6b56(0x2b8,0x316,0x3a1,0x32e)](_0x409027[_0x4d6b56(0x24c,0x241,0x218,0x29c)+'e']())){_0x3c77f8[_0x4d6b56(0x2be,0x2fe,0x384,0x2d5)](addLog,'[Banana]\x20F'+_0x3b2c03(0xfd,0x18b,0x196,0x134)+'ing\x20trigge'+_0x3b2c03(0x29,0xbd,0x142,0xb5)+_0x409027+(_0x4d6b56(0x2fb,0x25e,0x212,0x2e2)+_0x4d6b56(0x338,0x304,0x317,0x26d))+_0x295aa4+'\x22.');const _0x2ac50c=_0x4c619b[_0x3b2c03(0x1b,0xca,0xe7,0x76)+'on'];if(_0x2ac50c){if(_0x3c77f8[_0x3b2c03(0xba,0x197,0xd3,0x13e)](_0x4d6b56(0x27b,0x311,0x2ff,0x327),_0x3b2c03(0x133,0x86,0x93,0x100))){const _0xe6b0c9=[];if(_0x2ac50c[_0x4d6b56(0x38f,0x32c,0x3b1,0x2eb)]&&_0x2ac50c['user'][_0x3b2c03(0x114,0xb2,0x15c,0x101)])_0xe6b0c9[_0x4d6b56(0x263,0x2a8,0x253,0x230)]({'type':'text','text':_0x2ac50c[_0x3b2c03(0x11d,0x1b4,0xe0,0x148)][_0x3b2c03(0x9d,0x15d,0x111,0x101)]});const _0x7524ae=await _0x3c77f8['ScKwm'](getImageFromTurnData,_0x2ac50c[_0x4d6b56(0x2fa,0x32c,0x394,0x308)]);if(_0x7524ae)_0xe6b0c9[_0x3b2c03(0x122,0xfa,0x112,0xc4)]({'type':_0x3c77f8['NUsja'],'image_url':{'url':_0x7524ae}});if(_0x3c77f8[_0x4d6b56(0x2ae,0x30a,0x379,0x2e4)](_0xe6b0c9[_0x4d6b56(0x2b8,0x2f5,0x328,0x2e3)],-0x355+0x13ed*-0x1+0x1742)){const _0x1ae140={};_0x1ae140[_0x3b2c03(0x84,0xac,0x12b,0xf7)]=_0x3c77f8[_0x4d6b56(0x360,0x2cf,0x301,0x2b8)],_0x1ae140[_0x4d6b56(0x27a,0x301,0x360,0x346)]=_0xe6b0c9,_0x4f9ab2[_0x3b2c03(0x44,0xcf,0x6b,0xc4)](_0x1ae140);}const _0x2ca0d4=[];if(_0x2ac50c['model']&&_0x2ac50c[_0x4d6b56(0x291,0x2c9,0x2fc,0x2e7)]['text'])_0x2ca0d4['push']({'type':_0x3c77f8['UAJII'],'text':_0x2ac50c['model'][_0x4d6b56(0x336,0x2e5,0x2d2,0x2ba)]});const _0x1ed92f=await getImageFromTurnData(_0x2ac50c[_0x4d6b56(0x2d6,0x2c9,0x316,0x22b)]);if(_0x1ed92f)_0x2ca0d4['push']({'type':_0x3c77f8[_0x4d6b56(0x298,0x25c,0x234,0x215)],'image_url':{'url':_0x1ed92f}});if(_0x3c77f8[_0x4d6b56(0x2a0,0x222,0x1fa,0x1a4)](_0x2ca0d4[_0x4d6b56(0x257,0x2f5,0x32e,0x31f)],-0x1930+-0x1a78+0x33a8)){const _0x146d8e={};_0x146d8e[_0x4d6b56(0x301,0x2db,0x29f,0x368)]=_0x3c77f8['KWEyg'],_0x146d8e[_0x4d6b56(0x332,0x301,0x324,0x325)]=_0x2ca0d4,_0x4f9ab2[_0x4d6b56(0x31b,0x2a8,0x20a,0x328)](_0x146d8e);}}else{const _0x51a321={};_0x51a321[_0x4d6b56(0x243,0x2db,0x2bf,0x2fa)]=_0x3c77f8[_0x3b2c03(0x48,0x61,0x6d,0x8b)],_0x51a321['content']=_0x3170a4,_0x51c085[_0x4d6b56(0x323,0x2a8,0x322,0x258)](_0x51a321);}}break;}}else{_0x3c77f8['jwaSE'](_0x1efe81,_0x4d6b56(0x342,0x2d1,0x323,0x289)+_0x3b2c03(0x23,0x43,-0x3e,0x20)+':\x20'+_0x13161d['message']),_0x5566bb[_0x3b2c03(0x86,-0x2f,0x8f,0x52)](_0x3c77f8[_0x4d6b56(0x2af,0x2b4,0x277,0x338)],_0x947462);throw _0x135cc0;}}}}if(!_0x13ac2f[_0x3b2c03(0x115,0x16b,0x14d,0x132)](_0x3c77f8[_0x4d6b56(0x2a3,0x2f6,0x373,0x2fc)])){const _0x546486={};_0x546486[_0x4d6b56(0x29d,0x2db,0x278,0x2fe)]=_0x3c77f8[_0x3b2c03(0x12e,0x179,0x13a,0xeb)],_0x546486['content']=[{'type':_0x3c77f8[_0x4d6b56(0x2f4,0x289,0x249,0x237)],'text':_0x4399c6}],_0x4f9ab2[_0x4d6b56(0x29d,0x2a8,0x243,0x218)](_0x546486);}else{const _0x4be8d8=[],_0x4bb5b6=_0x3c77f8[_0x3b2c03(0xa,0x2d,-0x3d,0x34)](_0x2242b7,_0x4399c6),_0x300c5a=[_0x1d39a2[_0x3b2c03(0x3e,0x6b,0xb3,0x46)+'t'],_0x4bb5b6,_0x1d39a2['postfixPro'+_0x4d6b56(0x280,0x25f,0x29c,0x25a)]][_0x4d6b56(0x332,0x303,0x2c0,0x2ba)](Boolean)['join'](',\x20'),_0x3aeb1c={};_0x3aeb1c[_0x3b2c03(0x13a,0x131,0xfd,0xd7)]=_0x4d6b56(0x33c,0x2e5,0x31b,0x2f5),_0x3aeb1c[_0x3b2c03(0x9e,0x146,0x19a,0x101)]=_0x300c5a,_0x4be8d8[_0x3b2c03(0x134,0x12a,0xfd,0xc4)](_0x3aeb1c);if(_0x5248c1){const _0x254395={};_0x254395[_0x3b2c03(0x24,0xb8,-0x65,0x19)]=_0x5248c1;const _0x5cadff={};_0x5cadff['type']=_0x3b2c03(-0x67,0x95,-0x63,0x10),_0x5cadff[_0x4d6b56(0x175,0x1f4,0x1d0,0x215)]=_0x254395,_0x4be8d8['push'](_0x5cadff),_0x3c77f8['ONUKY'](addLog,_0x3b2c03(0x2a,0x11c,0x100,0xb7)+_0x4d6b56(0x2e1,0x27c,0x25c,0x244)+_0x3b2c03(0x81,0xf4,0x19f,0x10b));}const _0xe78acf={};_0xe78acf['role']=_0x3c77f8[_0x4d6b56(0x28e,0x2cf,0x331,0x317)],_0xe78acf['content']=_0x4be8d8,_0x4f9ab2[_0x4d6b56(0x304,0x2a8,0x25e,0x213)](_0xe78acf),_0x3c77f8[_0x4d6b56(0x328,0x29f,0x221,0x244)](addLog,_0x4d6b56(0x215,0x29b,0x25f,0x31b)+_0x4d6b56(0x2c0,0x2e7,0x324,0x2f7)+_0x300c5a);}const _0x26951e={};_0x26951e['aspectRati'+'o']=_0x130342;const _0x5ab314={};_0x5ab314[_0x3b2c03(0xfb,0xd,0x141,0xa8)+'g']=_0x26951e,_0x55b7cc={'model':_0xeeadde,'messages':_0x4f9ab2[_0x4d6b56(0x2bb,0x303,0x38b,0x36c)](_0x47f8a2=>_0x47f8a2['content'][_0x4d6b56(0x363,0x2f5,0x2b3,0x29e)]>-0x6b+0x18ce+-0x3*0x821),'config':_0x5ab314},_0x3c77f8[_0x4d6b56(0x305,0x292,0x294,0x2d2)](addLog,'[Banana]\x20B'+'uilt\x20multi'+_0x4d6b56(0x283,0x22d,0x1ea,0x1e6)+_0x3b2c03(0xf6,0xb1,0xbb,0xe7)+_0x55b7cc[_0x3b2c03(0x27,0x41,0xd0,0x90)][_0x4d6b56(0x280,0x2f5,0x313,0x32f)]+_0x4d6b56(0x2f5,0x2fb,0x282,0x31b));}}let _0x5a4200=_0x428ef7[_0x3b2c03(0x12e,0x4c,0x122,0xa1)](/\/$/,''),_0x517c8b;function _0x3b2c03(_0x5c7c5c,_0x5a44c4,_0x2deb23,_0x1d29ac){return _0x5102(_0x1d29ac- -0x1a2,_0x5c7c5c);}_0x5a4200['endsWith'](_0x3c77f8['krHEB'])||_0x5a4200[_0x3b2c03(0x197,0x19e,0x128,0x132)](_0x3c77f8[_0x3b2c03(0xf5,0x120,0xd8,0x8d)])?_0x517c8b=_0x3c77f8[_0x4d6b56(0x28e,0x2e2,0x2b7,0x33f)](_0x5a4200,_0x18e8a8):_0x517c8b=_0x3c77f8['dycEY'](_0x5a4200+_0x3c77f8[_0x4d6b56(0x2e8,0x323,0x39f,0x2a2)],_0x18e8a8);_0x517c8b=_0x517c8b[_0x3b2c03(0x35,0xbb,0x31,0xa1)](/\/v1\/v1\//g,_0x3c77f8[_0x4d6b56(0x25e,0x271,0x2aa,0x249)]),_0x3c77f8['wYMlB'](addLog,_0x3b2c03(0x3a,0xe8,0x12c,0xa9)+_0x3b2c03(0xd2,-0x2a,0xb3,0x67)+_0x4d6b56(0x366,0x32e,0x3b8,0x399)+_0x517c8b),_0x3c77f8[_0x4d6b56(0x2c8,0x261,0x241,0x22c)](addLog,'[Banana]\x20P'+_0x4d6b56(0x1e7,0x1f5,0x207,0x1d4)+JSON[_0x3b2c03(0x97,0xa7,0x88,0x118)](_0x55b7cc,null,0x34f*0xb+-0x233d+-0x126));try{if(_0x3c77f8[_0x4d6b56(0x310,0x297,0x20c,0x2a7)](_0x3c77f8['YGVZs'],_0x3c77f8['NbQTc'])){const _0x155109={};_0x155109[_0x4d6b56(0x1ce,0x20e,0x26d,0x180)+'pe']=_0x4d6b56(0x38c,0x32f,0x2ae,0x2fb)+_0x4d6b56(0x2a7,0x219,0x19d,0x23d),_0x155109[_0x3b2c03(0x175,0x14c,0x14e,0x139)+'ion']=_0x3b2c03(0x16b,0x113,0x9c,0xf2)+_0x335779;const _0x260b38=await _0x3c77f8[_0x3b2c03(0xf5,0x139,0x124,0xa0)](fetch,_0x517c8b,{'method':_0x3c77f8[_0x3b2c03(0x95,0x18f,0x159,0xff)],'headers':_0x155109,'body':JSON['stringify'](_0x55b7cc)});if(!_0x260b38['ok']){const _0x138f11=await _0x260b38[_0x3b2c03(0xd3,0x68,0x115,0x101)]();throw new Error(_0x3b2c03(0x138,0xaa,0x17d,0x12c)+'t\x20failed\x20w'+_0x4d6b56(0x19f,0x1f7,0x19e,0x1ed)+'\x20'+_0x260b38[_0x4d6b56(0x1a6,0x21d,0x1c2,0x1b5)]+':\x20'+_0x138f11);}const _0x166334=await _0x260b38[_0x3b2c03(0xa3,0x41,0x33,0x40)]();let _0x192ca9='';const _0x4c319d=_0x166334[_0x3b2c03(0x17f,0xdd,0xea,0x131)];if(_0x4c319d&&_0x4c319d[_0x4d6b56(0x2e6,0x2f5,0x266,0x392)]>-0x1f09+-0xc92*0x1+0x2b9b){const _0x1118c1=_0x4c319d[0x5*0x3c1+0x1aaa+-0x2d6f]['message']?.[_0x3b2c03(0x129,0x134,0xf9,0x11d)];if(Array['isArray'](_0x1118c1)){if(_0x3c77f8['MQMyY']===_0x4d6b56(0x258,0x2d4,0x33a,0x36b))for(const _0x4164d6 of _0x1118c1){if(_0x3c77f8[_0x3b2c03(0x9f,-0x1f,0x3d,0x3d)](_0x4164d6[_0x3b2c03(0x60,0xb6,0x84,0xd7)],_0x3c77f8[_0x4d6b56(0x201,0x25c,0x245,0x1bf)])&&_0x4164d6['image_url']?.['url']){_0x192ca9=_0x4164d6['image_url'][_0x4d6b56(0x290,0x1fd,0x1a8,0x1cf)];break;}}else _0x51b1a6[_0x4d6b56(0x312,0x2ea,0x302,0x2b9)+'ener'](_0xb286e8['GENERATE_I'+_0x4d6b56(0x287,0x2b0,0x293,0x274)+'ST'],_0x415b28),_0x3a6e4d['forEach'](_0x3da9a2=>{function _0x630257(_0xaf7bc2,_0x1c9e6a,_0x3a8b5c,_0x395a71){return _0x4d6b56(_0x3a8b5c,_0x1c9e6a- -0x3aa,_0x3a8b5c-0xaf,_0x395a71-0x27);}_0x3c725b['removeList'+_0x630257(-0x181,-0xfd,-0x6a,-0x127)](_0x3da9a2,_0x4c0051);}),_0x13c214[_0x3b2c03(0x30,0x2a,-0x4d,0x1f)+_0x3b2c03(0xb5,0x36,-0x2e,0x31)+_0x4d6b56(0x2dd,0x2ad,0x2a1,0x2bc)]=![],_0x3d0374(_0x3c77f8[_0x4d6b56(0x327,0x2f3,0x26f,0x28d)]);}else{if(_0x3c77f8[_0x3b2c03(0x3c,0x99,0xdc,0x6b)](typeof _0x1118c1,_0x3c77f8['jGJCD'])){const _0x3d94f5=/!\[.*?\]\((https?:\/\/[^\s\)]+)\)/,_0xc80920=_0x1118c1[_0x4d6b56(0x226,0x288,0x204,0x22e)](_0x3d94f5);if(_0xc80920&&_0xc80920[-0x2069+0x19e8+0x1*0x682]){_0x3c77f8[_0x4d6b56(0x24e,0x262,0x1f5,0x289)](addLog,_0x3c77f8[_0x3b2c03(0x99,0xb5,-0x35,0x2d)]);const _0x4115f8=_0xc80920[-0xbe7+-0x268c+0x3274];_0x3c77f8['tjbwL'](addLog,_0x4d6b56(0x389,0x2fa,0x32d,0x390)+_0x3b2c03(0x47,0xd8,0x147,0xb4)+_0x3b2c03(0xc6,0x15c,0xb5,0xcd)+_0x4115f8);try{const _0x1b1f29=await _0x3c77f8['gaBFv'](fetch,_0x4115f8);if(!_0x1b1f29['ok'])throw new Error(_0x4d6b56(0x321,0x2b5,0x27d,0x2dd)+_0x3b2c03(0xdd,0xf7,0x9c,0x91)+_0x4d6b56(0x274,0x27b,0x2c5,0x252)+_0x1b1f29[_0x3b2c03(0x64,0xcc,0x19,0x39)]);const _0x327992=await _0x1b1f29[_0x3b2c03(0xf1,0xee,0x147,0xb1)](),_0x1b8686=await new Promise((_0x4c2ef8,_0x855656)=>{function _0x18ac81(_0x1b64a0,_0x50b3bb,_0x575e8c,_0x1cbadc){return _0x3b2c03(_0x1cbadc,_0x50b3bb-0xa8,_0x575e8c-0x100,_0x1b64a0-0x53f);}function _0x1ee026(_0x25117a,_0x4c67fd,_0x1a6a85,_0x3b4ba8){return _0x3b2c03(_0x3b4ba8,_0x4c67fd-0xce,_0x1a6a85-0x1bd,_0x4c67fd-0x3d8);}if(_0x3c77f8[_0x18ac81(0x5f2,0x5c2,0x55a,0x5e8)](_0x18ac81(0x667,0x5d1,0x6b3,0x5d1),_0x3c77f8[_0x1ee026(0x483,0x4df,0x512,0x4b7)])){const _0x58a57f=new FileReader();_0x58a57f[_0x1ee026(0x490,0x4d5,0x4f7,0x4ae)]=()=>_0x4c2ef8(_0x58a57f['result']),_0x58a57f[_0x18ac81(0x5d2,0x608,0x5b5,0x56d)]=_0x855656,_0x58a57f['readAsData'+_0x1ee026(0x39a,0x407,0x454,0x434)](_0x327992);}else return _0x175695[_0x18ac81(0x5c9,0x63d,0x553,0x58c)];});_0x192ca9=_0x1b8686,_0x3c77f8[_0x4d6b56(0x197,0x200,0x171,0x1ec)](addLog,_0x3c77f8[_0x4d6b56(0x3a7,0x313,0x2aa,0x2c7)]);}catch(_0x127660){_0x3c77f8['ONUKY'](addLog,'[Banana]\x20F'+_0x4d6b56(0x277,0x23a,0x1f1,0x2b5)+_0x3b2c03(0x53,0x161,0xd2,0xdd)+_0x3b2c03(0x115,0xc8,0x17d,0xf6)+'\x20'+_0x127660['message']),_0x192ca9=_0x4115f8,_0x3c77f8[_0x3b2c03(0x187,0x7c,0x115,0x102)](addLog,_0x3c77f8[_0x4d6b56(0x1b8,0x205,0x1c3,0x295)]);}}else _0x3c77f8[_0x4d6b56(0x282,0x221,0x200,0x1e4)]('lxCYm',_0x3c77f8[_0x4d6b56(0x290,0x1fa,0x27e,0x19d)])?_0x3c77f8['ScKwm'](addLog,_0x3c77f8['zWAkT']):(_0x2adf21['on'](_0x47812a[_0x4d6b56(0x21e,0x232,0x26e,0x26d)+_0x3b2c03(0x12c,0xd4,0x62,0xcc)+'ST'],_0x1108e4),_0x2da014(_0x3c77f8['HdafB']));}}}if(!_0x192ca9){if(_0x3c77f8[_0x3b2c03(-0x72,-0x13,0x84,0x17)](_0x3c77f8[_0x3b2c03(0x1af,0x15c,0x94,0x122)],_0x3c77f8['uPmvH']))throw new Error(_0x3b2c03(0x2d,0x2f,0xa3,0x32)+_0x3b2c03(-0x28,-0x1f,0x73,0x4a)+_0x4d6b56(0x311,0x32d,0x3c0,0x304)+'mage\x20in\x20Op'+_0x4d6b56(0x33b,0x2ee,0x28a,0x2be)+'t');else _0x4a9a9b[_0x21a004][_0x3b2c03(0x131,0x14a,0x146,0xe9)][_0x3b2c03(0x3d,-0x2,-0xc,0x77)]=-0x2*0x838+-0x10c3+0x2134,_0x3c77f8['eIKae'](_0x413603,_0x4d6b56(0x1e9,0x210,0x213,0x286)+'r\x20prompt:\x20'+_0xd9193f[_0x1b1132][_0x4d6b56(0x305,0x2cd,0x2ea,0x32f)][_0x4d6b56(0x240,0x25b,0x2c6,0x282)]);}return _0x3c77f8[_0x3b2c03(0xcf,0x195,0x168,0x108)](addLog,_0x3c77f8[_0x4d6b56(0x244,0x280,0x2d4,0x243)]),{'image':_0x192ca9,'change':_0x3c77f8[_0x4d6b56(0x190,0x218,0x1fc,0x25a)](_0x138219,'')};}else _0x4597f0=_0x3c77f8[_0x4d6b56(0x309,0x2e2,0x34b,0x2f2)](_0xab2790,_0x3f1410);}catch(_0x87dcf3){_0x3c77f8[_0x4d6b56(0x291,0x23e,0x1b5,0x25a)](addLog,'[Banana]\x20F'+_0x4d6b56(0x22f,0x204,0x2a3,0x229)+':\x20'+_0x87dcf3[_0x4d6b56(0x1bf,0x21b,0x1c3,0x288)]),console[_0x3b2c03(0x7c,-0x41,0xda,0x52)](_0x3c77f8[_0x4d6b56(0x287,0x2b4,0x2af,0x28e)],_0x87dcf3);throw _0x87dcf3;}}export async function bananaGenerate(_0xd1acea){const _0x335d51={'QUVbf':function(_0x204b90){return _0x204b90();},'eXtuS':function(_0x44ac28,_0x430b74){return _0x44ac28(_0x430b74);},'CDTaV':function(_0x2c056c,_0x59cd42){return _0x2c056c===_0x59cd42;},'ZRfIb':_0x2599ae(0x387,0x3e5,0x351,0x3cb),'utDyW':'QHThp','PKqCn':_0x5f0688(-0x10b,-0xbc,-0x124,-0x13b),'qjivh':function(_0x839f6a,_0x7baf51){return _0x839f6a!=_0x7baf51;},'BfNSo':function(_0x549e7b,_0x2effbd,_0x175692,_0x26bff8){return _0x549e7b(_0x2effbd,_0x175692,_0x26bff8);},'IigTq':function(_0x1d5601,_0x488d9a){return _0x1d5601(_0x488d9a);},'EZoNZ':function(_0x388467,_0x44c33){return _0x388467+_0x44c33;},'GWTZd':function(_0x56da22,_0x571f82){return _0x56da22(_0x571f82);},'XYfHC':_0x5f0688(-0x18a,-0x121,-0x15f,-0x171)};clearLog();let {id:_0x23b002,prompt:_0x2fb0b4,width:_0x2000a7,height:_0x49cd27,change:_0x44f14e,retouchPrompt:_0x1f4e1d,retouchImage:_0x93df25}=_0xd1acea;_0x335d51[_0x5f0688(-0x1ef,-0x1d5,-0x188,-0x18d)](addLog,_0x5f0688(-0x256,-0x1fa,-0x1da,-0x1dd)+_0x5f0688(-0x1a5,-0x154,-0x14c,-0x136)+_0x2599ae(0x453,0x4b5,0x40f,0x46e)+'tion\x20reque'+_0x2599ae(0x3fe,0x48d,0x4f7,0x482)+_0x23b002+')');let _0x1f35f9='';_0x44f14e?_0x335d51['CDTaV'](_0x335d51[_0x2599ae(0x440,0x436,0x41a,0x3f9)],_0x335d51[_0x2599ae(0x472,0x3fc,0x487,0x404)])?(_0x1a20c6[_0x2599ae(0x34d,0x381,0x43e,0x3b7)+'BananaList'+'ener']=!![],_0x335d51[_0x5f0688(-0x227,-0x226,-0x223,-0x213)](_0xe8aabe)):_0x1f35f9=_0x44f14e[_0x2599ae(0x505,0x41c,0x44a,0x46b)](_0x335d51[_0x2599ae(0x447,0x561,0x484,0x4db)],''):_0x1f35f9=_0x2fb0b4;if(_0x44f14e&&_0x44f14e[_0x2599ae(0x4a4,0x536,0x4bb,0x4ca)](_0x335d51[_0x2599ae(0x4b0,0x569,0x492,0x4db)])){_0x335d51[_0x5f0688(-0x106,-0x154,-0x188,-0x17d)](addLog,_0x5f0688(-0x1ce,-0x15b,-0x171,-0x12c)+'启动');if(_0x1f4e1d)addLog(_0x2599ae(0x539,0x55e,0x4e4,0x4cb)+_0x1f4e1d);if(_0x93df25)_0x335d51[_0x2599ae(0x3d1,0x415,0x484,0x448)](addLog,_0x5f0688(-0x9d,-0x1b2,-0x11f,-0xd9)+']');}function _0x5f0688(_0x598993,_0x4c30bc,_0x4a0323,_0xf0a7c){return _0x5102(_0x4a0323- -0x3da,_0xf0a7c);}function _0x2599ae(_0x280ac2,_0x289bee,_0x5d6506,_0x2b4376){return _0x5102(_0x2b4376-0x1f6,_0x5d6506);}try{const {image:_0x106183,change:_0x20a2d7}=await _0x335d51['eXtuS'](generateBananaImage,{'prompt':_0x2fb0b4,'width':_0x2000a7,'height':_0x49cd27,'change':_0x44f14e,'retouchPrompt':_0x1f4e1d,'retouchImage':_0x93df25});if(_0x335d51[_0x5f0688(-0x19a,-0x1d7,-0x169,-0x1da)](extension_settings[extensionName]['cache'],'0')){const _0xe1961e={};_0xe1961e[_0x2599ae(0x40d,0x412,0x4c5,0x426)]=_0x1f35f9,await _0x335d51['BfNSo'](setItemImg,_0x2fb0b4,_0x106183,_0xe1961e),_0x335d51['IigTq'](addLog,_0x5f0688(-0x172,-0x7b,-0x103,-0xaf)+_0x2599ae(0x410,0x49e,0x416,0x48b)+'\x20'+_0x2fb0b4),extension_settings[extensionName][_0x2599ae(0x4e3,0x486,0x409,0x481)]['cishu']?(extension_settings[extensionName][_0x2599ae(0x485,0x4f4,0x457,0x481)][_0x5f0688(-0x15b,-0x211,-0x1c1,-0x1c7)]=_0x335d51[_0x5f0688(-0x1e6,-0x207,-0x216,-0x26f)](extension_settings[extensionName]['banana']['cishu'],0x234f+0x20*0x19+-0x266e),addLog(_0x2599ae(0x3da,0x3ed,0x355,0x3c4)+_0x5f0688(-0x15c,-0x214,-0x18d,-0x11c)+extension_settings[extensionName][_0x5f0688(-0x151,-0xfe,-0x14f,-0x164)][_0x5f0688(-0x1a7,-0x21a,-0x1c1,-0x1be)])):(extension_settings[extensionName]['banana']['cishu']=-0x1f1c+-0x5*-0x6cc+-0x2df,addLog(_0x2599ae(0x3c0,0x3c6,0x3af,0x3c4)+'r\x20prompt:\x20'+extension_settings[extensionName][_0x5f0688(-0xe6,-0x18e,-0x14f,-0x114)]['cishu']));}else addLog('缓存设置为不存入数据'+'库');const _0x362c4a={};_0x362c4a['id']=_0x23b002,_0x362c4a[_0x2599ae(0x420,0x3ca,0x406,0x447)]=!![],_0x362c4a['imageData']=_0x106183,_0x362c4a[_0x5f0688(-0x1a8,-0x103,-0x143,-0x1a6)]=_0x2fb0b4,_0x362c4a[_0x2599ae(0x3da,0x412,0x398,0x426)]=_0x1f35f9,eventSource[_0x2599ae(0x509,0x51b,0x4a5,0x490)](EventType['GENERATE_I'+_0x2599ae(0x487,0x3f2,0x425,0x40b)+_0x2599ae(0x3b6,0x3d8,0x43e,0x3fc)],_0x362c4a),_0x335d51['GWTZd'](addLog,_0x2599ae(0x435,0x403,0x4c8,0x48c)+_0x5f0688(-0x19c,-0x1c9,-0x202,-0x223)+_0x2599ae(0x4b3,0x43d,0x48c,0x47a)+_0x5f0688(-0x185,-0x1e4,-0x1f3,-0x19d)+':\x20'+_0x23b002);}catch(_0x17df0c){if(_0x335d51[_0x5f0688(-0x170,-0x17d,-0x178,-0x10d)]===_0x335d51[_0x2599ae(0x47f,0x426,0x497,0x458)]){const _0x1491f0=_0x5f0688(-0x183,-0x105,-0x13c,-0x180)+_0x2599ae(0x3fe,0x3a4,0x35e,0x3f7)+_0x2599ae(0x3a1,0x364,0x3e8,0x3c6)+_0x2599ae(0x433,0x3fb,0x4d2,0x457)+_0x23b002+':\x20'+_0x17df0c['message'];addLog(_0x1491f0),console['error'](_0x1491f0);const _0x5b6015={};_0x5b6015['id']=_0x23b002,_0x5b6015['success']=![],_0x5b6015['error']=_0x17df0c[_0x2599ae(0x406,0x378,0x330,0x3cf)],_0x5b6015['prompt']=_0x2fb0b4,eventSource[_0x2599ae(0x4b8,0x440,0x414,0x490)](EventType[_0x5f0688(-0x1f7,-0x218,-0x1ea,-0x1dc)+_0x5f0688(-0x215,-0x19a,-0x1c5,-0x19b)+'NSE'],_0x5b6015),addLog(_0x5f0688(-0x109,-0x16e,-0x144,-0x13a)+_0x5f0688(-0x172,-0x199,-0x1e8,-0x222)+'lure\x20respo'+_0x2599ae(0x371,0x476,0x3d0,0x3dd)+':\x20'+_0x23b002);}else _0x37c21a['initialize'+_0x2599ae(0x461,0x34e,0x436,0x3c9)+_0x2599ae(0x485,0x414,0x432,0x461)]&&(_0x105935[_0x5f0688(-0xc8,-0x1b5,-0x132,-0xa8)+_0x5f0688(-0x200,-0xf6,-0x16f,-0x1ac)](_0x586b17['GENERATE_I'+_0x2599ae(0x48f,0x3ee,0x3f6,0x464)+'ST'],_0x1c4f24),_0x29c5e7['forEach'](_0x11b4a7=>{function _0x53961c(_0x2177f9,_0x3ff5b9,_0x454f82,_0x34e950){return _0x5f0688(_0x2177f9-0x19,_0x3ff5b9-0x30,_0x34e950-0x199,_0x3ff5b9);}function _0x4f2e80(_0x4c60b7,_0x182d92,_0x3ecae9,_0x1082ae){return _0x5f0688(_0x4c60b7-0x198,_0x182d92-0x1e,_0x3ecae9-0x78,_0x4c60b7);}_0x21a0aa[_0x53961c(-0x11,-0x13,0x25,0x67)+_0x53961c(0x8f,0x7b,0x5,0x2a)](_0x11b4a7,_0x1714a7);}),_0x16eda2[_0x2599ae(0x3fe,0x339,0x31e,0x3b7)+_0x5f0688(-0x1e3,-0x1e3,-0x207,-0x17e)+_0x5f0688(-0x1e8,-0x158,-0x16f,-0x1a1)]=![],_0x5f11d0(_0x5f0688(-0xe2,-0x95,-0xf8,-0x191)+_0x5f0688(-0x108,-0x1da,-0x15e,-0x110)));}}function _0x3724(){const _0xc113e7=['5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','EMzOEKK','B3nPDgLVBG','tufhrv9srvnqtW','z2LMAgq','oty1oteXEuTXvwPP','y29UDMvYC2f0Aq','y2LZAhu','tLvZAMe','w0jHBMfUyv0G5zcV','iIbMCM9TihbYzq','Bxb0','Aw1Hz2vjza','D29hDNi','zuLlywu','AvPMCLa','DcbvuKWGyxmGzG','odCWntm5merMCvnSsW','DwXMuuO','55sO5l+U5zU+6Ake6k6+oIaI','rwHQwui','mZiZndy3mfPgzvf5zq','5lIT55QeihbYB21WDooaGG','BhvYzsbYzxnWBW','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','Aw1Hz2u','s1DfEwC','q2HHCMfJDgvYia','uwfUuKG','y2HHBMDL','y2zNAw1NxW','BwvZC2fNzxm','zMv0y2GGAw1HzW','ChLNu1m','B25LCNjVCG','BNrrvxu','Dvvcvfy','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','ztOG','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','zgf0ytPPBwfNzq','AMHNBuW','BwfNzsbNzw5LCG','BeLPsMW','vu9xq00','wuTNBLe','Dg9tDhjPBMC','sLL5vMu','CMvWBgfJzq','DwnJzxnZzNvSBa','qLfZBeS','Bwf0y2G','vufksuK','vuvurhi','igv4DhjHy3rPBG','Aw1Hz2vdB25MAq','w0jHBMfUyv0GuW','l3yX','CIbWCM9TChq6ia','ihWG','zxnWB25ZzsbJBW','tMngBNO','C3vJy2vZCW','zvH0Dvm','yMXVyG','mJG0ndHpuhnfDMy','AhPYvgC','yxjRzg93BIbPBq','CIaI','yMfUyw5HioEuN+wBVUs6IW','w0jHBMfUyv0G5l+U','y29UC3rYDwn0BW','mtiXoevcsNbSra','DunkAhC','shPHs3G','C2vHCMnO','mKzHEvP5CG','igLTywDLihrVia','ieLeia','wfLMsem','nJaWnJG2mwvQvxz4qq','s0D4EuW','zxrLy3rLzcbnyq','ChvZAa','Aw1Hz2vU','tLfiAu0','qMfUyw5H5l+U5zU+5QIH5BYp','C3bSAxq','zw5LCG','5yMn572U5zco','suHkwM4','tufhrv9srvfvrq','ywDLifvstdOG','uxn5rui','CwPPDMG','A3HPs3O','rMfPBgvKihrVia','lcdPQ5JLUQyGlsa','CMvWBgfJzufSBa','vKHmt3K','w0jHBMfUyv0GqG','ywDLigDLBMvYyq','DhLWzq','D2L0AcbWCM9TCa','Cuv2BxK','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','CMvHzefZrgf0yq','C3rHCNrZv2L0Aa','zxrJAcbnyxjRza','BgvZktOG','DcbVBMX5lcbUBW','AgD5z1m','DhjPz2DLCNm','y2vZCYbYzxnWBW','swrVqMe','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','Bw9KzwW','shjmv1a','B2fKihDPDgGG','5zco572U5yMn','yMfUyw5H','C3qGkeLeoIa','C3LcvKG','zwnLAxzLzcbPBq','w0jHBMfUyv0GrG','DgfYDgLUzYbPBq','s0Tju20','A0neuKy','DhjPBq','qMvHCMvYia','B3iGChjVBxb0oG','w0jHBMfUyv0Grq','ChjVBxb0','B3DUigLTywDLoG','CM9Szq','zw1PDa','B3LMuvq','D215C3u','ENv3Avi','w0jHBMfUyv0GrW','B25SB2fKzw5K','ChfPs1u','CM92svi','CvnqsKi','Dgv4Da','uhjXz3C','5zU+5QIH5BYp77YA5OYh5lUKid0G','Bw9Kzq','nda4otG0r3bNsfH3','CMvTB3zLtgLZDa','D1L3D3y','DfHYC3K','yMfZzty0lG','zw5bssbMB3jTyq','55Qe5zU+54Mh','5yMn572U5yMn','5Q2J6z2I5O+q56s66k+noIa','55sO5lQgihVKV67LM759ioAGH+IVHG','zfnNCMe','B2n2tKm','BgvUz3rO','zxLcA04','DgPID0W','E+s/RUwBVN0','Bw9KzwW6ia','w0jHBMfUyv0Gtq','ig1LC3nHz2vZlG','C3rYAw5NAwz5','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','u2nlD20','z0zbEMO','DxL5q3i','y29UDgvUDa','y2XPzw50','zMLSDgvY','C2v0ici','D1LnBei','DvbTDKG','r1vcwgy','ywn0zxjqCMvZzq','q3PAt2i','vhvqAui','CgfYyw1LDgvYCW','rNbitva','5zco572U5zco','D29Nrxu','C2LUzYbKAxjLyW','qvbjihjLCxvLCW','DhrYDM0','C3nMDwXSEs4','uM16v1m','CLvLCwG','y2HVAwnLCW','Aw5JBhvKzxm','5l+U5zU+5OYh5lUKoIa','B3vUzcbTyxrJAa','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','l3yXl2nOyxqVyW','zxDJrfm','C2fTCgXLq291BG','qxv0Ag9YAxPHDa','yxnZAxn0yw50','kcGOlISPkYKRkq','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','ywTbtLi','D2zdALu','A3jirui','w0jHBMfUyv0G55sF','u25QCNm','DwzJCwq','ueTXq24','mZntzgv5y0K','Agfrzwm','yNnhALq','AM9PBG','DxnLCG','ignVBNrHAw4GAq','DwvZDcb0BZOG','yxbWBgLJyxrPBW','ru9ICKm','w0jHBMfUyv0Gsq','Aw1Hz2vFDxjS','yxLSB2fKoIa','Cg9ZDgzPEfbYBW','AxrOihn0yxr1CW','ifbYB21WDa','uvvwyMy','sKDjC1C','s2DSyxy','zgvSCY8','DxjS','BwfW','l3yXyMv0ys9TBW','ALLLA3e','sfnAzLG','DeHzCva','Aw5PDgLHBgL6zq','zxrJAcbLCNjVCG','revLyNi','rvPVtLO','CLbgzvC','kerPDMLKzv9YBW','y2rQAfm','55sO5lQo55sF5OIq55QevgfNoIa','wNPKDui','5PYa5zco572U','D2fdvNC','q29UDgvUDc1uEq','y2z6EK4','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','s1jSz0K','zMfPBgvKigzVCG','vvjm','u2nLBMuGq29TCa','qMfUyw5HtgLZDa','qvbjihjLC3bVBG','qK1js2G','BhLfue4','BI9QC29U','BwL0DgvKihn1yW','BwvZC2fNzq','A2XyCKK','C3rHDhvZ','C3rYAw5N','DdOG','Duviv1a','r29zywW','zM1Rs1K','r0XLseO','ANnVBG','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','igLTywDLlG','CMTKB3DUigLTyq','DgLVBIb3AxrOia','BNnLigzVCIbjra','zML4zwrqCM9TCa','zuX5sNG','yxnWzwn0uMf0Aq','Bw9KywWGCgf5Ba','C2uGzgLKig5VDa','sxDKr2q','zYbvuKWUlI4','EuThuwO','r0vorvjbvevFsq','ue9tva','BwL0DgvKigzHAq','BhHdww0','zxjYB3i','m2T6qMTbrG','CMvZDwX0','zufIwvi','ywLSzwqGDg8GzG','Du5rrwq','DwLSDcbjBwfNzq','B21WBgv0Aw9UCW','A1bSCLG','ANDHu0u','uw9ODKy','Dg9mB3DLCKnHCW','w0jHBMfUyv0GuG','zw5LCMf0Aw9Uia','w0jHBMfUyv0G5l2/','wLjMswi','z3H4vgK','zM9YrwfJAa','tLnf','BIbWyxLSB2fKia','yLzsr3e','zw5KAw5NihjLCq','qLj6reu','C1vbrfa','mZiXodq4sKzYsLjA','Ae9uz2y','DxreEvC','BNrHAw5ZihrLEa','CLHJyLi','AwLvt0S'];_0x3724=function(){return _0xc113e7;};return _0x3724();}function initializeBananaListener(){function _0x225097(_0x7a534a,_0x2430bb,_0x2c1bff,_0x5d8cf7){return _0x5102(_0x7a534a- -0x26a,_0x5d8cf7);}const _0x3bf498={'uNQEd':function(_0x1c9360,_0x404105){return _0x1c9360(_0x404105);},'cdjhS':_0x3011fc(0x305,0x316,0x32b,0x2a1)+_0x3011fc(0x1c8,0x231,0x1e9,0x25b)};function _0x3011fc(_0x2b8af9,_0xfb8d85,_0x146bb7,_0xaa9236){return _0x5102(_0xaa9236-0x49,_0x146bb7);}eventSource['on'](EventType[_0x225097(-0x7a,-0xb1,-0xda,-0xbc)+_0x225097(0x4,-0x6e,0x75,-0x3c)+'ST'],bananaGenerate),_0x3bf498[_0x3011fc(0x264,0x1ab,0x271,0x242)](addLog,_0x3bf498[_0x225097(-0xa3,-0x3d,-0x2e,-0x47)]);}export async function replaceWithBanana(){function _0x34127c(_0x550408,_0x3b133b,_0x452d66,_0x6398a5){return _0x5102(_0x452d66-0x312,_0x3b133b);}const _0xd50b53={'ufcqd':function(_0xc68e9b,_0x4a0bf9){return _0xc68e9b<=_0x4a0bf9;},'pygSS':function(_0x15d3b2,_0x2f917d){return _0x15d3b2+_0x2f917d;},'akANR':_0x51db3a(-0xf0,-0x11d,-0x123,-0xa6),'HrLWP':function(_0x11952c,_0x455469){return _0x11952c==_0x455469;},'rPMLP':_0x34127c(0x540,0x51c,0x59d,0x528),'sUADP':function(_0x43178e,_0x5b9855){return _0x43178e===_0x5b9855;},'ONKpx':function(_0x14faee,_0x342265){return _0x14faee(_0x342265);},'KKISm':'[Banana]\x20生'+_0x51db3a(-0xc2,-0xa0,-0x2b,-0x43)};function _0x51db3a(_0x2bcd68,_0x467784,_0x30b8a4,_0x377afc){return _0x5102(_0x2bcd68- -0x33e,_0x377afc);}if(_0xd50b53[_0x51db3a(-0xb6,-0x46,-0xa9,-0x89)](extension_settings[extensionName][_0x34127c(0x551,0x5fa,0x5b8,0x5d5)],_0xd50b53['rPMLP']))!window[_0x51db3a(-0x17d,-0x11a,-0x1a3,-0x189)+'BananaList'+'ener']&&(window[_0x51db3a(-0x17d,-0x170,-0x14b,-0x1ee)+_0x51db3a(-0x16b,-0x11e,-0x1f5,-0xe7)+_0x34127c(0x596,0x566,0x57d,0x5ce)]=!![],initializeBananaListener()),initializeImageProcessing();else{if(_0xd50b53[_0x51db3a(-0x133,-0x112,-0xe7,-0x12f)](_0x51db3a(-0xf9,-0x10c,-0xea,-0x7e),_0x34127c(0x4a9,0x4c9,0x4d1,0x4a0)))for(let _0x591576=0x9b5+-0x170+-0x844;_0xd50b53[_0x34127c(0x631,0x5a4,0x5f6,0x5d8)](_0x591576,0x117b+-0xcb5+-0x3*0x196);_0x591576++){_0x351c42[_0x51db3a(-0x110,-0x136,-0x12f,-0xeb)+_0x591576+_0x51db3a(-0x188,-0x167,-0x1bd,-0x18e)]&&(_0x284d7c=_0xd50b53[_0x34127c(0x5d2,0x57e,0x546,0x4c0)](_0x118a75+_0xd50b53[_0x34127c(0x666,0x59c,0x5f1,0x5e2)],_0x59661e(_0x47d58e['Character\x20'+_0x591576+_0x34127c(0x543,0x565,0x4c8,0x43a)])));}else window[_0x51db3a(-0x17d,-0xe9,-0x1ef,-0x158)+_0x51db3a(-0x16b,-0x1ab,-0x1f2,-0x1e4)+_0x51db3a(-0xd3,-0x7e,-0xc6,-0x63)]&&(eventSource['removeList'+'ener'](EventType['GENERATE_I'+'MAGE_REQUE'+'ST'],bananaGenerate),LEGACY_EVENT_NAMES[_0x51db3a(-0x139,-0x190,-0x169,-0x154)](_0x50f8a3=>{function _0x238c5d(_0x3b568a,_0x28079d,_0x32ad6c,_0x45bab2){return _0x34127c(_0x3b568a-0x22,_0x45bab2,_0x32ad6c- -0x61,_0x45bab2-0x19);}function _0x53655b(_0x1a9cd1,_0x14f197,_0x480725,_0x2213f9){return _0x51db3a(_0x1a9cd1-0x308,_0x14f197-0x34,_0x480725-0x24,_0x480725);}eventSource[_0x238c5d(0x59d,0x524,0x559,0x512)+_0x53655b(0x235,0x267,0x1e8,0x1b8)](_0x50f8a3,bananaGenerate);}),window['initialize'+_0x34127c(0x574,0x4ce,0x4e5,0x4fc)+'ener']=![],_0xd50b53['ONKpx'](addLog,_0xd50b53[_0x34127c(0x5db,0x58e,0x5a3,0x519)]));}}