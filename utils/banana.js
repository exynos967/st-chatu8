function _0x2642b7(_0xb30137,_0xce872e,_0x2ac8fd,_0x5656af){return _0x5939(_0x5656af- -0x339,_0xb30137);}(function(_0x36ada3,_0x2040da){function _0x3769fd(_0x48fe23,_0xfb8b4f,_0x146150,_0x1b807c){return _0x5939(_0x146150- -0x3c,_0xfb8b4f);}function _0x55a97e(_0x372c25,_0x3e641d,_0x510aca,_0x25db31){return _0x5939(_0x25db31- -0x3b4,_0x372c25);}const _0x156ed6=_0x36ada3();while(!![]){try{const _0x35964c=parseInt(_0x3769fd(0x232,0x1f0,0x1cd,0x180))/(-0x1eec+0x24ad+-0x5c0)+-parseInt(_0x3769fd(0x240,0x1d7,0x243,0x2bf))/(-0x558+0x12cf+0x109*-0xd)+-parseInt(_0x3769fd(0x24d,0x2f2,0x2a1,0x30d))/(-0xd03*-0x3+0x6*0x3fa+-0x3ee2)*(parseInt(_0x3769fd(0x1dc,0x226,0x1c2,0x1bc))/(0x1e33+0x59b*0x1+-0x6*0x5f7))+parseInt(_0x3769fd(0x250,0x2a6,0x29a,0x207))/(-0x1d25+-0x11ae+0x2ed8)+parseInt(_0x55a97e(-0x144,-0x1e0,-0x170,-0x195))/(-0x180c+-0x5*-0x795+-0x49d*0x3)*(parseInt(_0x55a97e(-0x25a,-0x1cf,-0x160,-0x1df))/(0x6*0x12a+-0x18e0*0x1+-0x11eb*-0x1))+-parseInt(_0x3769fd(0x218,0x180,0x202,0x1f5))/(-0x8b*0xa+0x1*0xbd7+-0x661)*(parseInt(_0x55a97e(-0x123,-0x131,-0x83,-0x104))/(0x144f+0x15fb+-0x1d*0x175))+-parseInt(_0x3769fd(0x274,0x262,0x277,0x29f))/(-0xd*-0xa9+-0x22b0+-0x61*-0x45)*(-parseInt(_0x3769fd(0x297,0x257,0x232,0x203))/(-0x1*0x5a7+0x917+-0x4f*0xb));if(_0x35964c===_0x2040da)break;else _0x156ed6['push'](_0x156ed6['shift']());}catch(_0x2c5b46){_0x156ed6['push'](_0x156ed6['shift']());}}}(_0x423a,0x204*-0x493+0x5d*0x843+-0x3*-0x49cbf));const _0x4afd8f=(function(){const _0x530779={};function _0x4eff90(_0x36b1e3,_0x229abf,_0x23d5a9,_0x240e9e){return _0x5939(_0x36b1e3-0x2de,_0x23d5a9);}_0x530779[_0x2b6143(0x429,0x399,0x46e,0x3e4)]=function(_0x2a2905,_0x33548e){return _0x2a2905===_0x33548e;},_0x530779[_0x4eff90(0x54d,0x562,0x4cf,0x593)]='vmrnr';const _0x160bfa=_0x530779;let _0x20d8c1=!![];function _0x2b6143(_0x442547,_0x46d40f,_0x2b5c00,_0x26dc47){return _0x5939(_0x442547-0x166,_0x26dc47);}return function(_0xf9bb42,_0x5ed722){const _0x1cdee8={'XNkwN':function(_0x460e66,_0x3e7252){function _0x2d485b(_0x53c8fe,_0x22c413,_0x169329,_0x35b827){return _0x5939(_0x35b827- -0x252,_0x169329);}return _0x160bfa[_0x2d485b(0xa4,0x3c,0x11,0x71)](_0x460e66,_0x3e7252);},'WUxOS':_0x160bfa[_0x27f244(-0x14e,-0x107,-0x101,-0xb5)]},_0xa59194=_0x20d8c1?function(){function _0x4f909c(_0x23b6ad,_0xfcb269,_0x5b4c2a,_0x483d78){return _0x27f244(_0x23b6ad-0xa6,_0xfcb269-0x126,_0xfcb269-0x1ec,_0x483d78);}function _0x2e8505(_0x18df6a,_0x5333b2,_0x4a30fa,_0x3bd103){return _0x27f244(_0x18df6a-0x54,_0x5333b2-0x16f,_0x4a30fa-0x73d,_0x3bd103);}if(_0x1cdee8[_0x2e8505(0x5d9,0x5f3,0x5c1,0x656)](_0x1cdee8[_0x4f909c(0x14c,0x14e,0x10e,0x15a)],_0x1cdee8[_0x2e8505(0x618,0x644,0x69f,0x6b4)])){if(_0x5ed722){const _0x2c23ad=_0x5ed722[_0x2e8505(0x5cb,0x5f1,0x648,0x677)](_0xf9bb42,arguments);return _0x5ed722=null,_0x2c23ad;}}else _0x81aaa0['on'](_0x395607,_0x52572c);}:function(){};function _0x27f244(_0x3bb14e,_0xc1abe9,_0x12ddbb,_0x226d11){return _0x4eff90(_0x12ddbb- -0x64e,_0xc1abe9-0x3a,_0x226d11,_0x226d11-0xd4);}return _0x20d8c1=![],_0xa59194;};}()),_0x2aab67=_0x4afd8f(this,function(){const _0x284430={};_0x284430['zMihx']=_0x3275db(-0xb0,-0x3a,0x32,-0x25)+'+$';function _0x3275db(_0x3093dd,_0x11692b,_0x57bee3,_0xe6e975){return _0x5939(_0xe6e975- -0x1ee,_0x11692b);}function _0x58b355(_0x5cbc75,_0x5cc4c8,_0x5ee452,_0x4d4cb3){return _0x5939(_0x4d4cb3-0x3b8,_0x5ee452);}const _0x217b20=_0x284430;return _0x2aab67['toString']()['search'](_0x217b20[_0x58b355(0x5d8,0x5ad,0x66c,0x5fa)])[_0x3275db(-0x6a,-0x64,-0xa9,-0x2a)]()[_0x3275db(0x34,0x14,-0x16,-0x38)+'r'](_0x2aab67)['search'](_0x217b20[_0x3275db(0x14,0xa8,-0x26,0x54)]);});_0x2aab67();function _0x423a(){const _0x4885e2=['5BYa5AEliejHBMfUyEEuNW','CeHIt3O','zNLyEhi','tLnf','wKTcq1y','s0nSuMq','B2fKihDPDgGG','B21WBgv0Aw9UCW','55sO5l+U5zU+6Ake6k6+oIaI','y2zNAw1NxW','l3yX','zMXHDa','zxjYB3i','thLeEvm','BuTSBg8','B3bgvve','D2L0AcbWCM9TCa','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','s294u1u','oe9SyKLvzq','DfLTrwe','D2rhB0e','C3nMDwXSEs4','EK1PAhG','tK5ZqxK','w0jHBMfUyv0G55sF','sfvNt2O','kerPDMLKzv9YBW','uezpAvC','AfnQvuW','Du5oCgq','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','y2HHBMDL','y1nmrMy','y2fJAgu','wLH4DgG','5zU+5QIH5BYp77YA5OYh5lUKid0G','wLLMueO','BIbWyxLSB2fKia','C3bSAxq','Bw9KywWGCgf5Ba','uhbqvNy','C2v0ici','DhjPBq','ig1LC3nHz2vZlG','yxnWzwn0uMf0Aq','vK5xALO','u2nLBMuGq29TCa','D2rmsNG','Cg9ZDgzPEfbYBW','zNDywgy','Aw5NihrYAwDNzq','r3rNtKK','w0jHBMfUyv0G5zcV','z3fovhi','t2nez0W','Bxb0','w0jHBMfUyv0GrW','Aw1Hz2u','B2nQswm','55Qe5zU+54Mh','AxrOihn0yxr1CW','EgjwAey','BwvZC2fNzq','DxnLCG','z2vUzxjHDguTAq','AuritMi','odq2odi0vufxEhnN','rvDsy28','C3rYAw5N','C2uGzgLKig5VDa','qMfUyw5H5l+U5zU+5QIH5BYp','rLfYzwG','Aw5JBhvKzxm','C3PfyKG','Bw9KzwW','DwLSDcbjBwfNzq','vwvXse4','yM9nsMW','D3LpCwu','yxbWBhK','zw5LCG','sLzeBNa','w0jHBMfUyv0G5l+U','mtiYmdu1mKHfswXVyq','y29UDMvYC2f0Aq','BgvUz3rO','ywn0zxjqCMvZzq','D3fQwxG','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','ChzKrLG','yxrLzcbZDwnJzq','igLTywDLlG','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','5l+U5zU+5OYh5lUKoIa','zgvSCY8','zNnVB0C','Egf3D3K','DeDMDeO','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','Aw5PDgLHBgL6zq','DMfkCfK','C2fTCgXLq291BG','5yMn572U5yMn','t3DXqNO','AeLxsxG','tKPUt0O','thnQseC','w0jHBMfUyv0GrG','wwXgBMW','BwfNzs1Yzxf1zq','y2XPzw50','CIaI','yxnZAxn0yw50','yxLSB2fKoIa','5yMn572U5zco','w0jHBMfUyv0GuG','yMHWqLe','EKLjBeS','EwzqDwK','BwfNzv9Yzxf1zq','55sO5lQgihVKV67LM759ioAGH+IVHG','sMz5ufa','zMTSB3K','r0vorvjbvevFsq','sgPTAge','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','DhjPz2DLCNm','ruXtrve','y2TZAuu','C1vtEuG','tufhrv9srvnqtW','z0Deu3m','nZuWmJy0m3rTwMfSBG','AxnbCNjHEq','CfrkAvK','nJbkv3vvrMK','ChjVBxb0','vwTtrue','5lIT55QeihbYB21WDooaGG','AxnuzgK','C3z2suW','w0jHBMfUyv0Gsq','ze9dC0C','DgLVBIb3AxrOia','CNzyAxO','w0jHBMfUyv0G5l2/','5PYa5zco572U','thHVENO','z2vUzxjHDgvFAq','B0rMy0O','DgLVBIbYzxf1zq','EMvAD3u','qMfUyw5HtgLZDa','l3yXlW','ignVBNrHAw4GAq','C2vwwwS','zML4zwrqCM9TCa','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','q2HHCMfJDgvYia','zMLSDgvY','ChvZAa','l3yXl2nOyxqVyW','y2HVAwnLCW','Dg9mB3DLCKnHCW','yLHztfi','5Q2J6z2I5O+q56s66k+noIa','v1v4t1m','BI9QC29U','rurPyLG','wLfgExK','mtCYmti1DxPIthnH','zLD4ALO','uvPpr0K','DxrHBhG','AM9PBG','Aw5ZDgfUy2vZ','CMXqA0y','nZiWntDmvKD4Dwm','y29UDgvUDa','Bw9KzwW6ia','CLfAAvu','tfzxwxO','y29UC3rYDwn0BW','zxrJAcbLCNjVCG','E+s/RUwBVN0','C3rHDhvZ','qKP0sKe','rgPhrhy','DxjS','DhLWzq','uMfTD1y','Aw1Hz2vjza','BgvZktOG','CfPADw0','yuXZqM4','tufhrv9srvfvrq','Dg9tDhjPBMC','ihWG','DLPeve0','CMvTB3zLtgLZDa','5zco572U5zco','kcGOlISPkYKRkq','tM9uvfC','zuTZBe0','55sO5lQo55sF5OIq55QevgfNoIa','AujsEfm','Aw1Hz2veyxrH','w0jHBMfUyv0GqG','BNrHAw5ZihrLEa','ALb1wei','y2PKEvy','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','u2Twq20','mtrywK1JrLm','zMfPBgvKigzVCG','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','zM9YrwfJAa','D1zVEuG','BwfW','ue9tva','w0jHBMfUyv0Gua','yxbWBgLJyxrPBW','teDosMW','wfjwr1e','qvbjihjLCxvLCW','ELvbqxO','CevoA2q','yuHorvK','ze5zB0S','y2zpq2K','C3qGkeLeoIa','BwfNzsbPBIbpCa','rwz0Dxy','zw5KAw5NihjLCq','Dgv4Da','yLbAtKu','C3vJy2vZCW','y2LZAhu','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','zw5bssbMB3jTyq','Aw1Hz2vFDxjS','B3nPDgLVBG','z3Pusfe','CMvWBgfJzq','we5RD04','C3rHCNrZv2L0Aa','DgfYDgLUzYbPBq','s3Lmvva','yMfUyw5HioEuN+wBVUs6IW','CgfYyw1LDgvYCW','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','Avvvz1C','yMfUyw5H','DwvZDcb0BZOG','nJHtv3b5Bw4','D3DXqwO','DcbVBMX5lcbUBW','ieLeia','ifbYB21WDa','l3yXyMv0ys9TBW','q1jqCxK','w0jHBMfUyv0Grq','DKrVyvC','w0jHBMfUyv0GuW','BNnLigzVCIbjra','otqYmde5zfnIA1zn','DcbMywLSzwqGDW','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','AKnZu0y','zw5LCMf0Aw9Uia','weTXq2C','D2vTsgy','uLLRqLC','A2j1s3K','lcdPQ5JLUQyGlsa','C3rYAw5NAwz5','5zco572U5yMn','CM9Szq','t2nAzuy','CKDQuwy','A3Pqwge','DdOG','y2vZCYbYzxnWBW','zw5KC1DPDgG','AhrdC0G','EenOBxi','BhvYzsbYzxnWBW','mJCZotq1mffKyNjTqq','CIbWCM9TChq6ia','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','yMfUyw5Hq2HHCG','BwL0DgvKihn1yW','zw1PDa','vhbdq2y','qvbjihjLC3bVBG','zwnLAxzLzcbPBq','zxLQBve','Bvj0qwG','DxLdz2u'];_0x423a=function(){return _0x4885e2;};return _0x423a();}import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,waitForLock,releaseLock,acquireLock}from'./utils.js';function _0x37e8c7(_0x5ddd7a,_0x39e1db,_0xae44e5,_0xac5366){return _0x5939(_0x5ddd7a-0x251,_0x39e1db);}import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';async function getImageFromTurnData(_0x2ce77e){const _0x1e996a={'szEbH':function(_0x409fdb,_0x599d71){return _0x409fdb(_0x599d71);},'bPZNE':_0xcbf8b3(-0x1a5,-0x20f,-0x197,-0x1f4)+_0xcbf8b3(-0x18a,-0x12e,-0x132,-0x196),'xbVhF':function(_0x3c6381,_0x116d3c){return _0x3c6381(_0x116d3c);},'KoxSU':function(_0x117393,_0x5a49f4){return _0x117393!==_0x5a49f4;},'PFOiW':_0x60d951(0x459,0x4f1,0x4aa,0x4b8),'aQIWz':_0x60d951(0x5bc,0x4fe,0x528,0x50c),'loFsi':function(_0x5832ff,_0x297816){return _0x5832ff||_0x297816;},'fyXxr':function(_0xbb0118,_0x47600d){return _0xbb0118===_0x47600d;},'ZKBCV':'PwxKX'};function _0xcbf8b3(_0x117e62,_0x16e710,_0x14fefe,_0x43bd7a){return _0x5939(_0x14fefe- -0x3db,_0x117e62);}function _0x60d951(_0x1d360a,_0x328506,_0x2fd943,_0x14d7e9){return _0x5939(_0x2fd943-0x248,_0x1d360a);}if(!_0x2ce77e)return'';if(_0x2ce77e['imageId']&&_0x2ce77e[_0x60d951(0x3d1,0x3d3,0x407,0x3ef)][_0xcbf8b3(-0x183,-0x277,-0x1e6,-0x235)](_0xcbf8b3(-0x1e2,-0x233,-0x1a7,-0x160))){if(_0x1e996a[_0x60d951(0x463,0x414,0x485,0x4af)](_0x1e996a[_0xcbf8b3(-0x19a,-0x1c6,-0x194,-0x121)],_0x1e996a['aQIWz'])){const _0x31ef3d=await _0x1e996a[_0x60d951(0x436,0x4b7,0x4b1,0x421)](getConfigImage,_0x2ce77e[_0xcbf8b3(-0x228,-0x252,-0x21c,-0x248)]);return _0x1e996a['loFsi'](_0x31ef3d,'');}else _0x33e8fb[_0x60d951(0x522,0x46f,0x4d7,0x55a)+_0xcbf8b3(-0x14e,-0x157,-0x117,-0x169)+'ener']&&(_0x4cb560[_0xcbf8b3(-0x250,-0x1f5,-0x214,-0x279)+_0x60d951(0x540,0x4f7,0x4c4,0x4f1)](_0x39e3ae[_0xcbf8b3(-0x168,-0xaa,-0x134,-0x17f)+_0xcbf8b3(-0x1b8,-0x23b,-0x218,-0x199)+'ST'],_0x385fd2),_0x2924bb[_0xcbf8b3(-0x204,-0x221,-0x203,-0x280)](_0x260739=>{function _0x47dc2c(_0x55510c,_0x1a410b,_0x11a943,_0x538c24){return _0x60d951(_0x538c24,_0x1a410b-0xbb,_0x1a410b- -0xb0,_0x538c24-0x1bf);}function _0x1f6ea6(_0xfdb93,_0x4ad320,_0x12fd9a,_0x2a116a){return _0x60d951(_0x4ad320,_0x4ad320-0x187,_0x12fd9a- -0x199,_0x2a116a-0x13f);}_0x38aeda[_0x47dc2c(0x3a7,0x35f,0x3e9,0x396)+_0x1f6ea6(0x31b,0x32c,0x32b,0x327)](_0x260739,_0x16f711);}),_0x445b92[_0x60d951(0x500,0x466,0x4d7,0x52b)+'BananaList'+'ener']=![],_0x1e996a[_0xcbf8b3(-0x170,-0x1fb,-0x166,-0x169)](_0x31c1f9,_0x1e996a[_0x60d951(0x4c9,0x448,0x433,0x455)]));}if(_0x2ce77e[_0x60d951(0x479,0x4ec,0x4ad,0x51d)]&&_0x2ce77e['image'][_0x60d951(0x3f9,0x41d,0x43d,0x3cd)]('data:image')){if(_0x1e996a[_0x60d951(0x40d,0x3df,0x475,0x3f9)](_0x1e996a[_0xcbf8b3(-0x1c9,-0x1bd,-0x1ac,-0x1c7)],_0x1e996a['ZKBCV']))return _0x2ce77e[_0xcbf8b3(-0x183,-0x1ca,-0x176,-0x18a)];else{_0xf87d86(_0x60d951(0x4bc,0x4bb,0x4ba,0x46f)+'启动');if(_0x5e5113)_0x1e996a[_0xcbf8b3(-0x112,-0x174,-0x172,-0x146)](_0xb28b50,_0xcbf8b3(-0x101,-0xe6,-0x152,-0x104)+_0x53c13a);if(_0x3afb4f)_0x1e996a[_0xcbf8b3(-0x185,-0x105,-0x172,-0x1d6)](_0x1115cf,_0x60d951(0x3df,0x436,0x442,0x3f5)+']');}}return'';}async function generateBananaImage({prompt:_0x5cb163,width:_0x2a674e,height:_0x5928cd,change:_0x437784,retouchPrompt:_0x25f3a6,retouchImage:_0x4d8eb7}){const _0x643321={'HUgOj':'image_url','Lxozz':function(_0x2b675f,_0x363285){return _0x2b675f(_0x363285);},'rlPkF':function(_0x5e9a3a,_0x3ceef5){return _0x5e9a3a<=_0x3ceef5;},'wdGoA':function(_0x41fefa,_0x41e85b){return _0x41fefa+_0x41e85b;},'iUUgW':_0x5d1f66(-0x15e,-0x210,-0x1ab,-0x17e),'wwqAj':function(_0x3939eb){return _0x3939eb();},'isTdi':_0x5d1f66(-0x119,-0x8b,-0xd9,-0x13b)+_0x5d1f66(-0x194,-0x1bd,-0x1b9,-0x235)+':','RYkBW':function(_0x3c6a97,_0x153355){return _0x3c6a97+_0x153355;},'pENkd':function(_0x5d6011,_0x39b191){return _0x5d6011+_0x39b191;},'OcZeF':_0x5d1f66(-0x1bf,-0x148,-0x13b,-0x17c),'seVYk':function(_0xe10a4e,_0x10fdd7){return _0xe10a4e(_0x10fdd7);},'abUCn':_0x5d1f66(-0x9a,-0xc6,-0x12c,-0xf6)+_0x30b66b(0x10b,0x100,0x158,0x8f),'UeqHN':function(_0x27ede9,_0xe6fbad){return _0x27ede9||_0xe6fbad;},'PpPVv':function(_0x3b58e1,_0x49a1b3){return _0x3b58e1!==_0x49a1b3;},'bhpBQ':function(_0x392e1e,_0x3293a8){return _0x392e1e(_0x3293a8);},'fWxjZ':_0x5d1f66(-0xb0,-0x19c,-0x116,-0x130)+_0x5d1f66(-0x1f2,-0x1a3,-0x17f,-0x126),'tYmEa':function(_0x31cad4,_0x4d1cd1){return _0x31cad4===_0x4d1cd1;},'GtgNI':_0x5d1f66(-0xbe,-0xb7,-0x120,-0x15f),'pvdFX':function(_0x3b32fd,_0x588822){return _0x3b32fd(_0x588822);},'JfyPP':function(_0x4b7846,_0xa7eabf){return _0x4b7846!==_0xa7eabf;},'ODChz':_0x5d1f66(-0x16e,-0x1a9,-0x18d,-0x17f),'RamwV':_0x5d1f66(-0xca,-0x16a,-0xec,-0xf6)+_0x30b66b(0x6d,-0xf,0x48,0xbf),'hIWIx':'lvjgR','cjdyV':_0x30b66b(0x12b,0xd4,0xcf,0x14b)+_0x30b66b(0x118,0xee,0xd0,0x189),'gzTHQ':function(_0x5b24c7,_0x5a182a,_0xe518d2){return _0x5b24c7(_0x5a182a,_0xe518d2);},'ZoAjV':'imagen','kzPXa':'yvASc','tGftJ':_0x5d1f66(-0x68,-0x4e,-0xd2,-0x141),'vaJpY':'后置前','dOCsG':'后置后','NoTTW':_0x5d1f66(-0x67,-0xbf,-0xb2,-0x126),'FQreh':function(_0x1b943f,_0x185fe0){return _0x1b943f(_0x185fe0);},'eyjmQ':_0x5d1f66(-0x168,-0x1d5,-0x1b8,-0x128),'opFUQ':_0x30b66b(0x2f,-0x57,0x1d,-0x26),'boMJl':function(_0x43ca23,_0x6b2074){return _0x43ca23(_0x6b2074);},'RwFiz':_0x30b66b(0xc2,0x36,0x10b,0x127)+_0x5d1f66(-0x148,-0x78,-0xcc,-0xc0)+'。','iDHNb':function(_0xaa1cde,_0x5bf4c9){return _0xaa1cde||_0x5bf4c9;},'fkloy':_0x5d1f66(-0x114,-0x1c4,-0x144,-0x186),'xChmr':'前置前','uyCge':function(_0xf22400,_0x47b503){return _0xf22400(_0x47b503);},'xawwy':function(_0x460aeb,_0x1cc90c){return _0x460aeb===_0x1cc90c;},'cfOCi':_0x5d1f66(-0x78,-0xa9,-0xce,-0x6f),'EDibX':_0x5d1f66(-0xe1,-0x163,-0x16a,-0x1f9),'eKslM':_0x5d1f66(-0x144,-0x206,-0x186,-0x1f5),'Eftuv':function(_0x5be7a1,_0x5255aa){return _0x5be7a1(_0x5255aa);},'wyOqe':function(_0x1012cd,_0x354ed8){return _0x1012cd(_0x354ed8);},'bXYLR':function(_0x43aa10,_0x3a8b51){return _0x43aa10>_0x3a8b51;},'rvXiz':'user','RGTlk':function(_0x333414,_0x3c1a00){return _0x333414(_0x3c1a00);},'ELSEQ':function(_0x1c9e2c,_0x40f58a){return _0x1c9e2c>_0x40f58a;},'cksiE':_0x5d1f66(-0xaf,-0x11a,-0xd4,-0x150),'hSjUL':_0x5d1f66(-0x13c,-0x75,-0xab,-0x56),'pTJiY':_0x30b66b(0x3d,-0x52,0x21,0x3d),'wemHf':_0x5d1f66(-0x199,-0x225,-0x193,-0x1df)+_0x5d1f66(-0xe4,-0xeb,-0x9d,-0x104),'NJnOJ':function(_0x2b9c32,_0x206f8c){return _0x2b9c32!==_0x206f8c;},'rGjQf':_0x30b66b(0xe5,0xcd,0x67,0x142),'wdLJx':_0x30b66b(0x43,0x5c,0x46,0x8),'utalx':function(_0x12604f,_0x10c3ce){return _0x12604f===_0x10c3ce;},'LyDyS':_0x5d1f66(-0x111,-0x14a,-0x197,-0x1aa),'zIIlK':_0x5d1f66(-0x18e,-0x132,-0x162,-0x159),'VNWjZ':function(_0x50c674,_0x1453da){return _0x50c674===_0x1453da;},'qaqcN':function(_0x47aea2,_0x4ee583){return _0x47aea2===_0x4ee583;},'CRPqy':'JbzXQ','fsooG':_0x5d1f66(-0xb4,-0x10d,-0x14a,-0x16c)+_0x30b66b(0xd3,0xa6,0xfd,0xda)+_0x30b66b(0x128,0x19d,0xe4,0x120)+_0x5d1f66(-0x1e3,-0x20b,-0x189,-0x209)+_0x30b66b(0x51,-0x2d,0x4c,0x3)+'t','SkVCm':function(_0x4e7db0){return _0x4e7db0();},'ocjIc':function(_0xa3a27e,_0x3cdb55){return _0xa3a27e(_0x3cdb55);},'BJtJA':'ZUTDJ','LVWYz':function(_0xee9318,_0x487859){return _0xee9318(_0x487859);}};_0x5cb163=_0x643321[_0x5d1f66(-0x126,-0xc6,-0xa9,-0x13d)](processCharacterPrompt,_0x5cb163),_0x5cb163=await _0x643321['Lxozz'](stripChineseAnnotations,_0x5cb163);let _0x11486a=_0x437784;_0x437784=processCharacterPrompt(_0x437784),_0x437784=await stripChineseAnnotations(_0x437784),addLog(_0x5d1f66(-0xfd,-0x19a,-0x145,-0xbe)+_0x30b66b(0xea,0x61,0xf7,0x134)+extension_settings[extensionName][_0x30b66b(0xfc,0x6c,0xbf,0x11f)]),_0x643321[_0x5d1f66(-0x84,-0x59,-0xa9,-0x43)](addLog,_0x5d1f66(-0xf6,-0x119,-0x182,-0x10f)+'\x20'+_0x643321[_0x30b66b(0xda,0x99,0xa2,0x114)](_0x2a674e,'默认')+_0x30b66b(0x74,0x78,0x5f,0xad)+_0x643321[_0x30b66b(0xda,0xd9,0x149,0x14e)](_0x5928cd,'默认')),_0x5cb163=_0x437784&&_0x643321['PpPVv'](_0x437784[_0x5d1f66(-0x182,-0xae,-0x11a,-0xf5)](),'')?_0x437784:_0x5cb163,_0x643321['bhpBQ'](addLog,_0x30b66b(0x2e,-0x5b,-0x1a,-0x54)+_0x5cb163);let _0x4f2149=![];if(_0x5cb163['includes'](_0x643321[_0x30b66b(0x139,0x1a0,0x1a5,0xf3)])){if(_0x643321[_0x5d1f66(-0x1bf,-0x19c,-0x131,-0xc4)](_0x643321['GtgNI'],_0x643321[_0x5d1f66(-0x146,-0x182,-0x111,-0xd1)]))_0x4f2149=!![];else{const _0x58fc9=[],_0x5a70a2=_0x428220||_0x4742de,_0xa8438e=[_0x334870[_0x5d1f66(-0x11d,-0x6f,-0xa8,-0x90)+'t'],_0x5a70a2,_0x44fcfb['postfixPro'+_0x5d1f66(-0xa0,-0xfa,-0x10d,-0x146)]][_0x30b66b(0x12d,0x178,0x151,0xc1)](_0x5b24b2)[_0x5d1f66(-0x9,-0x3a,-0x96,-0xd)](',\x20'),_0xa474c7={};_0xa474c7['type']=_0x30b66b(0x4c,0x47,0x90,0x75),_0xa474c7['text']=_0xa8438e,_0x58fc9[_0x30b66b(0x12e,0x15d,0x11a,0xd0)](_0xa474c7);if(_0x57805e){const _0x332199={};_0x332199['url']=_0x5a6ecc;const _0x296f21={};_0x296f21['type']=_0x643321['HUgOj'],_0x296f21['image_url']=_0x332199,_0x58fc9['push'](_0x296f21),_0x643321[_0x5d1f66(-0xb1,-0xde,-0xb1,-0xb9)](_0x3ec2d6,_0x5d1f66(-0x147,-0x7a,-0xf2,-0x134)+_0x30b66b(0x9e,0x116,0xfb,0x95)+_0x30b66b(0xc9,0x6b,0x90,0x94));}const _0x47a501={};_0x47a501[_0x30b66b(0x77,0xb3,0x92,0xb6)]=_0x5d1f66(-0xff,-0x88,-0x105,-0x76),_0x47a501[_0x30b66b(0x140,0x135,0xf2,0x177)]=_0x58fc9,_0x58eb1b[_0x5d1f66(-0x7f,-0x1c,-0xa4,-0x37)](_0x47a501),_0x643321[_0x30b66b(0x121,0xd9,0x109,0x1b4)](_0x3a92f8,_0x5d1f66(-0x173,-0xab,-0xf2,-0xb3)+_0x5d1f66(-0xff,-0x198,-0x121,-0xcd)+_0xa8438e);}}_0x643321[_0x30b66b(0xe7,0x73,0xcc,0x5f)](addLog,_0x30b66b(0xf0,0x8b,0x13c,0x110)+_0x5d1f66(-0xc9,-0x175,-0x12a,-0x14b)+_0x30b66b(0x22,0xa0,0x9,0x81)+_0x4f2149);let _0x41c49e={},_0xa32c80='',_0x5656e9='';if(_0x4f2149){if(_0x643321[_0x5d1f66(-0x160,-0x155,-0xcb,-0x91)](_0x5d1f66(-0xe6,-0x152,-0xc3,-0x144),_0x643321['ODChz'])){_0x643321[_0x5d1f66(-0x134,-0xea,-0xb1,-0x129)](addLog,_0x643321[_0x30b66b(0x20,0x18,0x46,0x92)]),_0x41c49e=_0x643321['pvdFX'](parsePromptStringWithCoordinates,_0x5cb163),_0xa32c80=_0x41c49e[_0x643321['fWxjZ']];for(let _0xc36d0c=0x7de+-0x1*0x209b+-0x1*-0x18be;_0xc36d0c<=-0xc26+-0x1dc2+0x29ec;_0xc36d0c++){_0x643321[_0x30b66b(0xa1,0x5f,0xa0,0x9e)](_0x643321[_0x5d1f66(-0xfc,-0x13a,-0xdc,-0x15e)],_0x643321[_0x5d1f66(-0x66,-0x48,-0xdc,-0x157)])?_0x41c49e['Character\x20'+_0xc36d0c+_0x5d1f66(-0x128,-0x188,-0x16e,-0x19f)]&&(_0x5656e9=_0x643321[_0x5d1f66(-0x181,-0x186,-0x160,-0x1ae)](_0x643321[_0x5d1f66(-0x1cb,-0x16a,-0x18e,-0x224)](_0x5656e9,',\x20'),_0x41c49e[_0x30b66b(0x12c,0x125,0xf5,0xff)+_0xc36d0c+_0x30b66b(0x64,0x92,0x4b,0x35)])):_0x1b67e4[_0x5d1f66(-0x1dd,-0x199,-0x1a9,-0x14a)+_0x30b66b(0xde,0x49,0x173,0x57)](_0x1766ae,_0x36d4c0);}}else for(let _0x5d7cdc=-0x1714+0x1b25+0x410*-0x1;_0x643321[_0x5d1f66(-0x1d,-0xe5,-0x94,-0x4e)](_0x5d7cdc,0x1051+-0x1b91+0xb44);_0x5d7cdc++){_0x5674e7[_0x5d1f66(-0x40,-0x31,-0xa6,-0x64)+_0x5d7cdc+_0x30b66b(0x64,0x6c,0x9c,0xe2)]&&(_0xe27877=_0x643321[_0x30b66b(0xa2,0x131,0xcd,0x92)](_0x4f4987,_0x643321[_0x30b66b(0x5d,0x5f,0x87,0x58)])+_0x18cb8e(_0x87d06e[_0x30b66b(0x12c,0xf8,0x124,0xf7)+_0x5d7cdc+_0x5d1f66(-0x189,-0xe9,-0x16e,-0x19d)]));}}else _0x643321[_0x30b66b(0x129,0x161,0x1af,0x11f)](addLog,_0x643321[_0x30b66b(0x34,-0x55,0x22,0xb8)]),_0xa32c80=_0x5cb163;let {modifiedPrompt:_0x484bb3,insertions:_0x10eeb9}=await _0x643321[_0x5d1f66(-0x1b0,-0x1f0,-0x17e,-0x148)](prompt_replace,_0xa32c80,_0x5656e9);if(_0x4f2149)for(let _0x192fa0=0x4d*0x1a+0x1980+-0x2151*0x1;_0x643321[_0x30b66b(0x13e,0xcd,0x156,0x124)](_0x192fa0,-0x1*-0x1971+-0x887+-0x1*0x10e6);_0x192fa0++){_0x41c49e[_0x30b66b(0x12c,0x17d,0xb7,0xc8)+_0x192fa0+_0x5d1f66(-0x141,-0xfc,-0x16e,-0x110)]&&(_0x484bb3=_0x643321['RYkBW'](_0x643321[_0x30b66b(0x44,0x15,-0x33,0xac)](_0x484bb3,_0x643321[_0x5d1f66(-0x14c,-0xe1,-0x175,-0x10f)]),prompt_replace_for_character(_0x41c49e[_0x5d1f66(-0x48,-0x34,-0xa6,-0xa2)+_0x192fa0+_0x30b66b(0x64,0xa9,0xd8,0x5b)])));}const _0x5bd44b=extension_settings[extensionName]['banana'];function _0x30b66b(_0x3d66d6,_0x184508,_0x3ff75d,_0x2604b2){return _0x5939(_0x3d66d6- -0x19e,_0x184508);}const {model:_0x191484,apiUrl:_0x15bd13,apiKey:_0x595307,conversationPresets:_0x50fe05,conversationPresetId:_0x565446,editPresetId:_0x53dfa8,aspectRatio:_0x4312c5}=_0x5bd44b;function _0x5d1f66(_0x583d30,_0xb0fa06,_0x25c1b4,_0x2e1f76){return _0x5939(_0x25c1b4- -0x370,_0xb0fa06);}_0x643321[_0x5d1f66(-0x78,-0x4e,-0xd0,-0x96)](addLog,'[Banana]\x20S'+_0x5d1f66(-0x140,-0x20f,-0x17a,-0x14b)+'age\x20genera'+_0x5d1f66(-0x13c,-0x9d,-0xb5,-0x11a)+_0x5d1f66(-0x43,0x0,-0x91,-0xe4)+_0x191484);let _0xe21490,_0x5ac4d4;if(_0x191484['startsWith'](_0x643321['ZoAjV'])){if(_0x643321[_0x30b66b(0xb6,0x69,0x8f,0x59)](_0x643321[_0x30b66b(0x7a,0xd4,0xd2,0x7d)],_0x643321[_0x5d1f66(-0x160,-0x1a0,-0x158,-0x1bf)]))_0x2252b4['Character\x20'+_0x51e339+_0x5d1f66(-0x195,-0x1b3,-0x16e,-0x14d)]&&(_0xe69f14=_0x643321[_0x5d1f66(-0x139,-0x194,-0x130,-0x196)](_0x643321['wdGoA'](_0x221759,',\x20'),_0x3a4fda[_0x30b66b(0x12c,0x1be,0xcf,0x198)+_0x4e0659+_0x5d1f66(-0x1ec,-0x14c,-0x16e,-0x1b9)]));else{_0xe21490=_0x5d1f66(-0x11d,-0x17a,-0x16d,-0x121)+'dels/'+_0x191484;const _0x2ee752={};_0x2ee752[_0x30b66b(0x12a,0x9e,0x9b,0x14a)+'t']='';const _0x1c58c8=_0x50fe05[_0x565446]||_0x2ee752,_0xea75e9=[_0x1c58c8[_0x5d1f66(-0x6d,-0x52,-0xa8,-0x33)+'t'],_0x10eeb9[_0x30b66b(0xf4,0x13b,0xb7,0x162)],_0x10eeb9[_0x643321[_0x30b66b(0xef,0x108,0x147,0x179)]],_0x484bb3,_0x10eeb9[_0x643321[_0x30b66b(0xf2,0x7d,0xb9,0x116)]],_0x10eeb9[_0x643321[_0x30b66b(0x11c,0xa3,0xd6,0x1ad)]],_0x1c58c8['postfixPro'+_0x30b66b(0xc5,0x61,0xec,0x154)],_0x10eeb9[_0x643321[_0x30b66b(0x2c,0x9c,0x18,0x8c)]]]['filter'](Boolean)[_0x5d1f66(-0xbe,-0x103,-0x96,-0xbb)](',\x20');_0x643321[_0x30b66b(0xd5,0x9c,0x70,0xe7)](addLog,_0x5d1f66(-0x12b,-0x12e,-0x9f,-0x49)+_0xea75e9);const _0x3980d8={};_0x3980d8['prompt']=_0xea75e9;const _0x16dac3={};_0x16dac3[_0x30b66b(0xf3,0x14c,0x13a,0xf9)+'t']=0x1,_0x16dac3['aspectRati'+'o']=_0x4312c5;const _0x22bd86={};_0x22bd86[_0x5d1f66(-0x112,-0xc6,-0x95,-0xc4)]=[_0x3980d8],_0x22bd86[_0x5d1f66(-0x196,-0x19f,-0x177,-0x194)]=_0x16dac3,_0x5ac4d4=_0x22bd86,_0x643321[_0x30b66b(0x129,0xc9,0x143,0x185)](addLog,_0x30b66b(0x31,-0x40,-0x3,-0x3)+_0x5d1f66(-0x175,-0xaa,-0xf9,-0xc4)+_0x5d1f66(-0x14b,-0xc7,-0x11f,-0x13c)+_0x30b66b(0x9d,0x94,0xba,0x5d)+_0x5d1f66(-0xc9,-0x149,-0x157,-0x1e7)+_0xea75e9);}}else{_0xe21490=_0x30b66b(0x12f,0xee,0xac,0x1b9)+_0x30b66b(0x94,0xc0,0x99,0x3e);let _0x47c7cc;if(_0x437784[_0x30b66b(0xd6,0x168,0x72,0x166)](_0x643321[_0x30b66b(0x8a,0x89,0x50,0xd6)])){if(_0x643321['tYmEa'](_0x643321[_0x5d1f66(-0x11a,-0x18f,-0x136,-0x118)],_0x643321[_0x30b66b(0x9c,0xa2,0xd6,0x68)])){_0x643321[_0x30b66b(0xdb,0xc4,0x81,0x91)](addLog,_0x643321['RwFiz']);const _0x347a3e=_0x643321[_0x30b66b(0xcf,0x4d,0x45,0xe8)](_0x53dfa8,'默认'),_0x49a457={};_0x49a457[_0x30b66b(0xe2,0x147,0x80,0x60)+'on']=[],_0x49a457['fixedPromp'+'t']='',_0x47c7cc=_0x50fe05[_0x347a3e]||_0x49a457,addLog(_0x5d1f66(-0x103,-0x87,-0xb3,-0xe6)+_0x5d1f66(-0x172,-0x122,-0x13d,-0x16b)+_0x347a3e+'\x22');}else _0x544876=_0x1e7021+',\x20'+_0x5b555a['Character\x20'+_0x3573e9+_0x30b66b(0x64,0xe7,0xf7,0xad)];}else{if(_0x643321[_0x5d1f66(-0x163,-0x1be,-0x131,-0xcb)](_0x643321[_0x5d1f66(-0x100,-0x90,-0xca,-0x36)],'pHbOz')){const _0xd9c1e8={};_0xd9c1e8['conversati'+'on']=[],_0xd9c1e8[_0x30b66b(0x12a,0x158,0xdb,0x196)+'t']='',_0x47c7cc=_0x50fe05[_0x565446]||_0xd9c1e8;}else{_0x643321['wwqAj'](_0x160bfd),_0x39e470('[Banana]\x20F'+'etch\x20error'+':\x20'+_0x12039e[_0x30b66b(0xcc,0x158,0x151,0x151)]),_0x3d875c[_0x30b66b(0x99,0x5d,0x116,0x30)](_0x643321[_0x5d1f66(-0x6a,-0x120,-0xb9,-0x121)],_0x44be1e);throw _0x44aeba;}}const _0x5ea978=[_0x47c7cc[_0x5d1f66(-0x11d,-0x78,-0xa8,-0x48)+'t'],_0x10eeb9[_0x643321[_0x30b66b(0x7f,-0x5,0x113,0x14)]],_0x10eeb9['前置后'],_0x484bb3,_0x10eeb9[_0x5d1f66(-0x164,-0x18f,-0x15c,-0x128)],_0x10eeb9[_0x643321[_0x30b66b(0x11c,0x143,0x14b,0x171)]],_0x47c7cc['postfixPro'+_0x30b66b(0xc5,0x8e,0xf3,0xf1)],_0x10eeb9[_0x643321[_0x30b66b(0x2c,0xa1,0xbb,0x4b)]]][_0x30b66b(0x12d,0xa0,0x129,0x185)](Boolean)[_0x5d1f66(-0xf2,-0xb5,-0x96,-0xcf)](',\x20');_0x643321[_0x30b66b(0x8c,0x54,0x118,0x43)](addLog,_0x5d1f66(-0x2b,-0x96,-0x9f,-0xb2)+_0x5ea978);const _0x47c44b={};_0x47c44b[_0x30b66b(0x77,0x9,0xca,0xd0)]=_0x5d1f66(-0xe8,-0x8a,-0x105,-0xb9),_0x47c44b['content']=[];const _0x406d82={};_0x406d82['role']='assistant',_0x406d82[_0x30b66b(0x140,0x182,0xd8,0x1ae)]=[];const _0x2a835a=_0x47c7cc[_0x30b66b(0xe2,0x177,0x140,0x7d)+'on'][_0x30b66b(0x3c,0xb1,-0x27,0xcd)](_0x4a1be3=>[_0x47c44b,_0x406d82])[_0x30b66b(0x98,0xdc,0xaa,0x12a)]();let _0x796c96=0x130c*0x1+0xb1f+-0x1e2b;for(const _0x1bb0ba of _0x47c7cc[_0x30b66b(0xe2,0x12e,0x50,0x139)+'on']){if(_0x643321[_0x30b66b(0xee,0x110,0xa7,0x14a)](_0x643321[_0x5d1f66(-0x103,-0x161,-0x18b,-0x121)],_0x643321[_0x30b66b(0x136,0xd9,0x147,0x17f)]))_0x120095=_0x643321[_0x30b66b(0x72,0x103,0x96,0x90)](_0x6dc16b,_0x30b66b(0x27,0x77,0x30,0xa3))+_0x643321[_0x5d1f66(-0x22,-0x96,-0xb1,-0x8d)](_0x5451aa,_0x23f181['Character\x20'+_0x18d6da+'\x20Prompt']);else{if(_0x1bb0ba[_0x5d1f66(-0x76,-0x157,-0x105,-0xee)]?.[_0x30b66b(0x4c,0x4c,0xa7,-0x12)])_0x2a835a[_0x796c96][_0x30b66b(0x140,0x1a3,0xf8,0x1a3)][_0x30b66b(0x12e,0x153,0xad,0x11e)]({'type':_0x643321['eKslM'],'text':_0x1bb0ba[_0x5d1f66(-0x12b,-0x18c,-0x105,-0x173)][_0x5d1f66(-0x13e,-0x1ca,-0x186,-0x178)]});const _0x39c0cf=await _0x643321['bhpBQ'](getImageFromTurnData,_0x1bb0ba[_0x5d1f66(-0x184,-0x18d,-0x105,-0x17b)]);if(_0x39c0cf)_0x2a835a[_0x796c96][_0x30b66b(0x140,0x160,0x104,0xbe)][_0x5d1f66(-0x60,-0x2a,-0xa4,-0x101)]({'type':_0x643321['HUgOj'],'image_url':{'url':_0x39c0cf}});_0x796c96++;if(_0x1bb0ba['model']?.['text'])_0x2a835a[_0x796c96][_0x5d1f66(-0x5f,-0x91,-0x92,-0x60)]['push']({'type':_0x643321[_0x30b66b(0x2d,0xc0,0x83,0x48)],'text':_0x1bb0ba['model'][_0x5d1f66(-0x1d3,-0xff,-0x186,-0x1ce)]});const _0x4f23a1=await _0x643321['seVYk'](getImageFromTurnData,_0x1bb0ba[_0x30b66b(0xd8,0x8f,0x5e,0x14e)]);if(_0x4f23a1)_0x2a835a[_0x796c96][_0x30b66b(0x140,0xc5,0xec,0x16f)][_0x5d1f66(-0x7b,-0x2d,-0xa4,-0x74)]({'type':_0x643321[_0x30b66b(0xa7,0x13b,0x64,0xb7)],'image_url':{'url':_0x4f23a1}});_0x796c96++;}}if(!_0x437784[_0x30b66b(0xd6,0x163,0xa4,0xd2)](_0x5d1f66(-0x123,-0x170,-0x1b8,-0x210))){const _0x1eff57=extension_settings[extensionName][_0x5d1f66(-0x178,-0x18c,-0x14e,-0x144)+_0x30b66b(0xe4,0xdd,0x8e,0x91)+'ts']||{};for(const _0x200f22 in _0x1eff57){const _0x5af334=_0x1eff57[_0x200f22],_0x5216c7=(_0x5af334[_0x30b66b(0x10c,0x129,0xf6,0xfa)]||'')[_0x5d1f66(-0x89,-0xb3,-0x11e,-0xad)]('|')['filter'](_0x41ac28=>_0x41ac28[_0x5d1f66(-0x179,-0x161,-0x11a,-0x154)]()!=='');for(const _0x127b89 of _0x5216c7){if(_0x5ea978['toLowerCas'+'e']()[_0x30b66b(0xd6,0x42,0x145,0x120)](_0x127b89[_0x30b66b(0x131,0x1a4,0x173,0xd7)+'e']())){_0x643321[_0x5d1f66(-0x1de,-0x1ae,-0x188,-0x136)](addLog,'[Banana]\x20F'+'ound\x20match'+_0x30b66b(0xc0,0xd3,0xc2,0x113)+_0x5d1f66(-0x52,-0xc7,-0xd5,-0xad)+_0x127b89+('\x22\x20from\x20pre'+_0x5d1f66(-0x11f,-0xfe,-0x11b,-0xf5))+_0x200f22+'\x22.');const _0x3b04fd=_0x5af334[_0x30b66b(0xe2,0xd1,0xb2,0x11f)+'on'];if(_0x3b04fd){const _0x3a22ba=[];if(_0x3b04fd[_0x30b66b(0xcd,0xee,0x150,0x14a)]&&_0x3b04fd['user']['text'])_0x3a22ba[_0x30b66b(0x12e,0x1bf,0xbf,0x183)]({'type':_0x643321[_0x30b66b(0x2d,-0x45,0x57,0x5)],'text':_0x3b04fd[_0x30b66b(0xcd,0x11d,0x7b,0xd0)][_0x5d1f66(-0x1e2,-0x1ba,-0x186,-0x111)]});const _0x4b1b9b=await _0x643321[_0x5d1f66(-0xf0,-0x144,-0xf6,-0xe0)](getImageFromTurnData,_0x3b04fd['user']);if(_0x4b1b9b)_0x3a22ba['push']({'type':_0x643321[_0x5d1f66(-0xb3,-0x12a,-0x12b,-0x12c)],'image_url':{'url':_0x4b1b9b}});if(_0x643321[_0x30b66b(0x132,0x1c2,0xd1,0xd0)](_0x3a22ba[_0x5d1f66(-0x108,-0x13a,-0xef,-0xa0)],-0x1c16+-0x29*-0x71+0x9fd)){const _0x290bfa={};_0x290bfa[_0x30b66b(0x77,0x70,0x36,-0x15)]=_0x643321[_0x5d1f66(-0x32,-0xcc,-0xb4,-0x36)],_0x290bfa[_0x30b66b(0x140,0x12e,0x191,0x167)]=_0x3a22ba,_0x2a835a[_0x5d1f66(-0xcc,-0x102,-0xa4,-0xa2)](_0x290bfa);}const _0x5b6a98=[];if(_0x3b04fd[_0x30b66b(0xd8,0x100,0x11e,0x146)]&&_0x3b04fd[_0x30b66b(0xd8,0xc9,0x152,0x5c)][_0x5d1f66(-0x18d,-0x11a,-0x186,-0x184)])_0x5b6a98[_0x30b66b(0x12e,0x166,0xb4,0xf1)]({'type':_0x30b66b(0x4c,0x5,0x87,0x4c),'text':_0x3b04fd[_0x30b66b(0xd8,0x120,0x6f,0x57)][_0x5d1f66(-0xf1,-0x1e5,-0x186,-0x203)]});const _0x41b731=await _0x643321['RGTlk'](getImageFromTurnData,_0x3b04fd[_0x30b66b(0xd8,0x15c,0x153,0x127)]);if(_0x41b731)_0x5b6a98[_0x5d1f66(-0x20,-0x6d,-0xa4,-0x41)]({'type':_0x643321[_0x30b66b(0xa7,0xca,0x121,0x61)],'image_url':{'url':_0x41b731}});if(_0x643321[_0x5d1f66(-0x135,-0x9b,-0xc5,-0x6e)](_0x5b6a98['length'],-0x9*0x109+-0x1e28+0x2b*0xeb)){const _0x5bf7a6={};_0x5bf7a6[_0x5d1f66(-0x192,-0x18e,-0x15b,-0x1eb)]=_0x643321[_0x5d1f66(-0xd0,-0x50,-0xc4,-0xbd)],_0x5bf7a6[_0x5d1f66(-0x61,-0x9,-0x92,-0xb0)]=_0x5b6a98,_0x2a835a[_0x30b66b(0x12e,0x103,0x1ac,0x112)](_0x5bf7a6);}}break;}}}}if(!_0x437784[_0x30b66b(0xd6,0xf5,0x167,0x167)](_0x643321[_0x5d1f66(-0x172,-0x1c6,-0x148,-0x12f)])){const _0x187aa9={};_0x187aa9[_0x30b66b(0x77,0xdb,0x2,0x46)]=_0x643321[_0x5d1f66(-0x81,-0x93,-0xb4,-0xc8)],_0x187aa9['content']=[{'type':_0x643321[_0x5d1f66(-0x1c4,-0x175,-0x1a5,-0x218)],'text':_0x5ea978}],_0x2a835a[_0x30b66b(0x12e,0x19e,0x194,0x193)](_0x187aa9);}else{const _0x207024=[],_0x591636=_0x643321[_0x5d1f66(-0xb0,-0xfc,-0x103,-0x143)](_0x25f3a6,_0x5ea978),_0x33a4f1=[_0x47c7cc[_0x30b66b(0x12a,0x13d,0x15b,0xc6)+'t'],_0x591636,_0x47c7cc[_0x5d1f66(-0xeb,-0xe8,-0x114,-0x115)+_0x5d1f66(-0x17c,-0x144,-0x10d,-0xc1)]][_0x30b66b(0x12d,0xbe,0x101,0x13e)](Boolean)[_0x30b66b(0x13c,0xf8,0x185,0x1c2)](',\x20'),_0x22636f={};_0x22636f[_0x30b66b(0x1f,0x5a,0x4f,0x8a)]=_0x643321['eKslM'],_0x22636f[_0x30b66b(0x4c,0xa5,0x13,-0x40)]=_0x33a4f1,_0x207024[_0x30b66b(0x12e,0x119,0x12f,0x1a5)](_0x22636f);if(_0x4d8eb7){const _0x2664cb={};_0x2664cb[_0x5d1f66(-0x15c,-0x159,-0x1b4,-0x23f)]=_0x4d8eb7;const _0x1c3c19={};_0x1c3c19[_0x5d1f66(-0x1c9,-0x1fc,-0x1b3,-0x124)]=_0x643321['HUgOj'],_0x1c3c19[_0x30b66b(0x52,-0x3f,0x44,-0x31)]=_0x2664cb,_0x207024[_0x5d1f66(-0x2b,-0x17,-0xa4,-0xba)](_0x1c3c19),addLog('[Banana]\x20修'+_0x5d1f66(-0xa0,-0x1be,-0x134,-0x1b3)+_0x30b66b(0xc9,0x112,0x42,0x90));}const _0x357279={};_0x357279[_0x30b66b(0x77,0xe3,0x3a,0x10c)]=_0x643321[_0x5d1f66(-0x63,-0xcb,-0xb4,-0x101)],_0x357279['content']=_0x207024,_0x2a835a[_0x5d1f66(-0xa8,-0x8a,-0xa4,-0x53)](_0x357279),_0x643321[_0x30b66b(0x121,0x18e,0x1ad,0x163)](addLog,'[Banana]\x20修'+_0x30b66b(0xb1,0xa4,0x131,0xe9)+_0x33a4f1);}const _0x2acc5a={};_0x2acc5a['aspectRati'+'o']=_0x4312c5;const _0x56ec34={};_0x56ec34['imageConfi'+'g']=_0x2acc5a,_0x5ac4d4={'model':_0x191484,'messages':_0x2a835a[_0x30b66b(0x12d,0x15d,0xb0,0x9c)](_0x159fcf=>_0x159fcf[_0x5d1f66(-0x45,-0x98,-0x92,-0x29)][_0x5d1f66(-0x14e,-0x154,-0xef,-0x15a)]>0x13e*-0x1c+0x1451+0xe77),'config':_0x56ec34},_0x643321['seVYk'](addLog,'[Banana]\x20B'+'uilt\x20multi'+_0x5d1f66(-0xbb,-0x155,-0x11d,-0x124)+_0x5d1f66(-0x1d3,-0x101,-0x13f,-0x16c)+_0x5ac4d4['messages'][_0x5d1f66(-0x100,-0x142,-0xef,-0x7e)]+_0x30b66b(0xb9,0xd1,0x7a,0x139));}let _0x5660fe=_0x15bd13[_0x30b66b(0x55,0x6a,0xc6,0x9b)](/\/$/,''),_0x244e8f;_0x5660fe[_0x30b66b(0x7d,0x5e,0x33,0x3a)](_0x643321['OcZeF'])||_0x5660fe['includes'](_0x643321[_0x30b66b(0xaa,0x123,0x92,0xdf)])?_0x244e8f=_0x5660fe+_0xe21490:_0x244e8f=_0x643321[_0x5d1f66(-0x19d,-0xc1,-0x130,-0x18f)](_0x5660fe+_0x643321[_0x30b66b(0x78,0x2c,0x9b,0x6c)],_0xe21490);_0x244e8f=_0x244e8f[_0x30b66b(0x55,0x1,0x71,-0x7)](/\/v1\/v1\//g,_0x643321[_0x5d1f66(-0xa2,-0x1b3,-0x128,-0x121)]),addLog(_0x30b66b(0x69,0xcc,0xe8,0x9c)+_0x5d1f66(-0xfa,-0x18a,-0x187,-0x123)+_0x5d1f66(-0xf8,-0x167,-0x173,-0x1f2)+_0x244e8f),addLog(_0x30b66b(0x3e,0xca,0x9c,0xd)+_0x5d1f66(-0x4d,-0xec,-0xd3,-0x86)+JSON[_0x30b66b(0x75,0x11,0xe3,0xed)](_0x5ac4d4,null,-0xd*0x1bb+0x1*0x1753+-0x6*0x23));try{await _0x643321[_0x30b66b(0x61,0x16,-0x1b,0x56)](waitForLock),_0x643321['wwqAj'](acquireLock);const _0x65dafc=await _0x643321[_0x5d1f66(-0x1c1,-0x1e3,-0x17e,-0x1d2)](fetch,_0x244e8f,{'method':_0x643321[_0x5d1f66(-0x64,-0xc5,-0xbe,-0x72)],'headers':{'Content-Type':_0x643321[_0x30b66b(0x71,0x3c,0x1a,0x102)],'Authorization':'Bearer\x20'+_0x595307},'body':JSON[_0x5d1f66(-0x12f,-0x17f,-0x15d,-0x1b4)](_0x5ac4d4)});if(!_0x65dafc['ok']){if(_0x643321[_0x5d1f66(-0x5b,-0x113,-0xdb,-0x153)](_0x643321[_0x5d1f66(-0x1c4,-0xd8,-0x159,-0x1c9)],_0x643321[_0x30b66b(0xbd,0x3a,0x55,0x86)])){const _0xee385b=await _0x65dafc[_0x30b66b(0x4c,0xc4,0x19,0x1f)]();throw new Error(_0x5d1f66(-0x167,-0x12c,-0x190,-0x16d)+_0x5d1f66(-0x182,-0x139,-0x166,-0x191)+_0x5d1f66(-0xdb,-0x13b,-0x108,-0x9b)+'\x20'+_0x65dafc[_0x5d1f66(-0x16e,-0x168,-0x1b7,-0x16d)]+':\x20'+_0xee385b);}else _0x1af235=_0x643321[_0x5d1f66(-0x204,-0x178,-0x18e,-0x15a)](_0x2cbad5,_0x643321[_0x30b66b(0x78,0x51,0x9c,0xb1)])+_0x4ccd03;}const _0x5d46a0=await _0x65dafc['json']();let _0x375dff='';const _0x586951=_0x5d46a0[_0x5d1f66(-0x8b,-0x2d,-0xa2,-0xc7)];if(_0x586951&&_0x643321['bXYLR'](_0x586951[_0x30b66b(0xe3,0x68,0x56,0x7d)],-0x2595+-0x33e+0x28d3)){const _0x3893ae=_0x586951[0x1*-0x166f+0x1b2c+-0x4bd]['message']?.[_0x30b66b(0x140,0xcc,0x1a2,0x19f)];if(Array[_0x30b66b(0x113,0x18d,0x111,0xab)](_0x3893ae)){if(_0x643321['utalx'](_0x643321[_0x5d1f66(-0xf3,-0x148,-0x138,-0xbd)],_0x643321[_0x5d1f66(-0x150,-0x3f,-0xcf,-0xda)]))_0x5881bb[_0x3fb09e][_0x5d1f66(-0x200,-0x1bb,-0x174,-0x173)][_0x30b66b(0x4f,0x29,0xcc,0x9d)]=0x18e3+-0x5*-0x149+-0x1*0x1f4f,_0x643321[_0x30b66b(0x121,0xdb,0x17b,0x18d)](_0x28a8e6,_0x30b66b(0x83,-0xf,0x34,0x56)+_0x5d1f66(-0x18f,-0x102,-0x150,-0x12f)+_0x4b9176[_0x761a83]['banana'][_0x30b66b(0x4f,0xb0,-0x18,0xb4)]);else for(const _0x4da8c3 of _0x3893ae){if(_0x643321[_0x30b66b(0xbb,0x14e,0xb1,0x47)](_0x4da8c3[_0x5d1f66(-0x1f4,-0x1e2,-0x1b3,-0x231)],_0x643321[_0x30b66b(0xa7,0xb1,0xb4,0x1a)])&&_0x4da8c3['image_url']?.[_0x30b66b(0x1e,0x14,-0x63,0xb3)]){_0x375dff=_0x4da8c3['image_url']['url'];break;}}}else _0x643321[_0x5d1f66(-0x6,-0xaf,-0x97,-0x8)](typeof _0x3893ae,_0x30b66b(0xd2,0x80,0x53,0x66))&&(_0x643321['qaqcN'](_0x643321[_0x5d1f66(-0x1c6,-0x197,-0x16c,-0x138)],_0x643321[_0x30b66b(0x66,-0x28,0xcd,0xde)])?_0x643321['bhpBQ'](addLog,_0x30b66b(0x101,0x15f,0x129,0x79)+'esponse\x20co'+_0x30b66b(0x32,-0x49,-0x47,0x51)+_0x5d1f66(-0x1bf,-0x1cd,-0x170,-0x186)+_0x30b66b(0xe9,0xc1,0x13e,0x148)):(_0x30514c[_0x5d1f66(-0x129,-0x230,-0x1a9,-0x177)+'ener'](_0x29faf3['GENERATE_I'+_0x5d1f66(-0x132,-0x1d8,-0x1ad,-0x174)+'ST'],_0x4d51a2),_0x59a228[_0x30b66b(0x3a,0x19,0x7b,0x75)](_0x7300c7=>{function _0x4a5deb(_0x50d291,_0x38e12f,_0x16e048,_0x2a7a09){return _0x30b66b(_0x16e048-0x316,_0x50d291,_0x16e048-0x18c,_0x2a7a09-0x7e);}function _0x28e416(_0x5243db,_0x1edbd2,_0x304ca0,_0x1e2112){return _0x30b66b(_0x304ca0- -0x239,_0x1e2112,_0x304ca0-0x106,_0x1e2112-0x183);}_0x12a1b2[_0x4a5deb(0x329,0x31a,0x33f,0x311)+_0x28e416(-0x12d,-0x1a1,-0x15b,-0x1ac)](_0x7300c7,_0x37fe31);}),_0xa524ab[_0x30b66b(0xf1,0xa1,0x9d,0xba)+_0x5d1f66(-0xb4,-0x3c,-0xac,-0x109)+'ener']=![],_0x643321['seVYk'](_0x28b98a,_0x643321['abUCn'])));}if(!_0x375dff)throw new Error(_0x643321[_0x30b66b(0xed,0xa3,0xd9,0x13f)]);_0x643321[_0x30b66b(0x36,0x16,-0x4b,0x58)](releaseLock),_0x643321[_0x5d1f66(-0xcd,-0xf3,-0x10a,-0xc3)](addLog,_0x5d1f66(-0x12c,-0x91,-0xb7,-0x11d)+'mage\x20gener'+_0x30b66b(0xe8,0xbd,0x135,0xf0)+_0x30b66b(0xa3,0xdb,0x12,0x21));const _0x244969={};return _0x244969[_0x5d1f66(-0x12b,-0xcb,-0x10b,-0x185)]=_0x375dff,_0x244969[_0x30b66b(0xad,0x2a,0x42,0x132)]=_0x11486a||'',_0x244969;}catch(_0x14c584){if(_0x643321[_0x5d1f66(-0xa0,-0x141,-0x117,-0x142)]('ZUTDJ',_0x643321[_0x30b66b(0x1c,0x3e,-0x4,-0xf)])){_0x643321[_0x30b66b(0x61,0x8b,0xc3,0x5a)](releaseLock),_0x643321[_0x5d1f66(-0x146,-0x163,-0x1bb,-0x1bd)](addLog,_0x5d1f66(-0x69,-0x10a,-0xd9,-0x49)+_0x30b66b(0x19,0x9b,-0x6c,-0x5f)+':\x20'+_0x14c584['message']),console[_0x30b66b(0x99,0x10b,0x5,0x8f)](_0x643321['isTdi'],_0x14c584);throw _0x14c584;}else return _0x2e9681['image'];}}export async function bananaGenerate(_0x339782){function _0x1764dc(_0x592dde,_0x269139,_0x594d6c,_0x14016b){return _0x5939(_0x269139-0x26,_0x592dde);}const _0x2e647b={'XRVGQ':_0x1764dc(0x348,0x2b8,0x245,0x342),'mRtAh':_0x1764dc(0x2d5,0x2c4,0x24a,0x336),'gGDSs':_0x57f59c(0x178,0x1b3,0x140,0x129),'UkSEA':'最后置','pZZum':function(_0x3e4fe1,_0x2b8602){return _0x3e4fe1(_0x2b8602);},'fwXXf':_0x57f59c(0x214,0x12d,0x1b9,0x199)+_0x1764dc(0x239,0x231,0x27e,0x1a7),'cSLFf':_0x57f59c(0x1e5,0x146,0x150,0x16f)+_0x57f59c(0x18a,0x15b,0x7a,0x106),'mKllo':function(_0x338278,_0x20c3b4){return _0x338278<=_0x20c3b4;},'kbuKy':function(_0x563255,_0x59fcb6){return _0x563255+_0x59fcb6;},'TpCCf':function(_0x5426b9){return _0x5426b9();},'YlFnl':function(_0x3094eb,_0x28991c){return _0x3094eb(_0x28991c);},'ZXxth':function(_0x503ab4,_0x27f646){return _0x503ab4!==_0x27f646;},'aLsBn':'lxWkt','jCsSF':'{修图}','dNYoK':_0x57f59c(0x1ec,0x1af,0x132,0x1ab),'QZOGI':function(_0x3a8b29,_0x3b1c3a){return _0x3a8b29(_0x3b1c3a);},'jPuXB':function(_0x1f932a,_0x14fe50){return _0x1f932a!=_0x14fe50;},'OwqBz':function(_0x35ef3e,_0x3b3c0d,_0x439fa1,_0xc4a756){return _0x35ef3e(_0x3b3c0d,_0x439fa1,_0xc4a756);},'NNsAy':function(_0x5a2b35,_0xef2ab0){return _0x5a2b35(_0xef2ab0);},'JHlNT':function(_0xeea570,_0x2c8b10){return _0xeea570!==_0x2c8b10;},'KyLUP':_0x1764dc(0x2c2,0x2fb,0x2a4,0x33e),'Hjmha':function(_0x20733a,_0x559ebf){return _0x20733a(_0x559ebf);},'ffxix':_0x1764dc(0x23e,0x1e1,0x233,0x1b5),'uDICc':function(_0xabed3e,_0x5cb426){return _0xabed3e(_0x5cb426);},'KClRd':function(_0x3c0ccf,_0x492cbd){return _0x3c0ccf(_0x492cbd);}};_0x2e647b[_0x1764dc(0x2ba,0x24b,0x2bc,0x25a)](clearLog);let {id:_0x24bafb,prompt:_0x4ea070,width:_0x542f46,height:_0x249fe9,change:_0xa151ba,retouchPrompt:_0x5465c2,retouchImage:_0x1911e5}=_0x339782;_0x2e647b['YlFnl'](addLog,_0x57f59c(0x1d2,0x246,0x165,0x1b4)+_0x1764dc(0x1fd,0x24d,0x29b,0x2df)+'age\x20genera'+_0x57f59c(0x228,0x182,0x14e,0x1d7)+_0x1764dc(0x22c,0x20c,0x210,0x1e7)+_0x24bafb+')');let _0x165e9d='';function _0x57f59c(_0x154808,_0x498fe0,_0x1d3b48,_0x7d2f7d){return _0x5939(_0x7d2f7d- -0xeb,_0x154808);}if(_0xa151ba){if(_0x2e647b[_0x57f59c(0x1c9,0x103,0x10f,0x163)](_0x2e647b[_0x57f59c(0x10b,0x99,0x107,0xd7)],_0x2e647b[_0x1764dc(0x196,0x1e8,0x279,0x158)])){_0x2c1a58=_0x57f59c(0x1a8,0x175,0x184,0x118)+_0x57f59c(0x1f3,0x123,0x18b,0x19f)+_0x29463e;const _0x33cc39={};_0x33cc39[_0x1764dc(0x2d9,0x2ee,0x2ad,0x2fb)+'t']='';const _0x4aa5ea=_0x137896[_0x3c5453]||_0x33cc39,_0x4d9332=[_0x4aa5ea[_0x1764dc(0x2d3,0x2ee,0x352,0x37c)+'t'],_0x1ff0c4[_0x2e647b[_0x1764dc(0x29b,0x205,0x1e9,0x1c4)]],_0x161bad[_0x2e647b[_0x1764dc(0x234,0x24f,0x1d6,0x292)]],_0x8308ba,_0x28f0c3[_0x2e647b[_0x1764dc(0x2c5,0x2d5,0x343,0x256)]],_0x575aba[_0x57f59c(0x122,0x58,0x154,0xdd)],_0x4aa5ea[_0x57f59c(0x13e,0x194,0xde,0x171)+'mpt'],_0x4a5bf3[_0x2e647b[_0x57f59c(0x202,0x22f,0x1a1,0x1ca)]]][_0x1764dc(0x274,0x2f1,0x373,0x34b)](_0xf9e44a)[_0x1764dc(0x27d,0x300,0x35e,0x320)](',\x20');_0x2e647b[_0x1764dc(0x278,0x1e7,0x1e6,0x21d)](_0x529cfd,_0x57f59c(0x1b3,0x15e,0x1e2,0x1e6)+_0x4d9332);const _0x267358={};_0x267358['prompt']=_0x4d9332;const _0x2ed93b={};_0x2ed93b[_0x1764dc(0x2e8,0x2b7,0x280,0x2d2)+'t']=0x1,_0x2ed93b[_0x1764dc(0x26c,0x27e,0x1fd,0x285)+'o']=_0x2fe9be;const _0x321e7d={};_0x321e7d['instances']=[_0x267358],_0x321e7d[_0x57f59c(0x10a,0x10a,0x129,0x10e)]=_0x2ed93b,_0x23f159=_0x321e7d,_0x3cee8b('[Banana]\x20B'+'uilt\x20Image'+_0x57f59c(0x114,0x197,0x10d,0x166)+_0x1764dc(0x28c,0x261,0x213,0x20b)+'t:\x20'+_0x4d9332);}else _0x165e9d=_0xa151ba['replaceAll'](_0x2e647b[_0x57f59c(0x13d,0xec,0x97,0x121)],'');}else _0x165e9d=_0x4ea070;if(_0xa151ba&&_0xa151ba['includes'](_0x2e647b[_0x1764dc(0x2ae,0x232,0x24f,0x1f7)])){if(_0x2e647b['ZXxth'](_0x2e647b[_0x1764dc(0x295,0x20a,0x258,0x28d)],_0x2e647b[_0x57f59c(0x135,0x168,0x11b,0xf9)])){_0x56ff46(_0x2e647b[_0x1764dc(0x2a5,0x283,0x217,0x2bb)]),_0x2dd65b=_0x2e647b[_0x57f59c(0x95,0x96,0xf3,0xd6)](_0x2f6c00,_0x2fefc5),_0xfc57a9=_0x1642aa[_0x2e647b[_0x57f59c(0xe1,0xf7,0x1ac,0x161)]];for(let _0x22b1d0=-0x2*0xc75+-0x108f*0x2+-0x53*-0xb3;_0x2e647b[_0x57f59c(0xdd,0x18d,0xe8,0x14e)](_0x22b1d0,-0xa3*-0x3d+0xc7f+-0x3352);_0x22b1d0++){_0x4dc4f1['Character\x20'+_0x22b1d0+_0x57f59c(0x191,0xb2,0xbf,0x117)]&&(_0x18ac2e=_0x2e647b[_0x57f59c(0x93,0x126,0x99,0x126)](_0x2e647b[_0x57f59c(0xb9,0x14c,0xca,0x126)](_0x1e190f,',\x20'),_0x1f097b[_0x1764dc(0x32b,0x2f0,0x330,0x2a9)+_0x22b1d0+_0x57f59c(0x191,0xa5,0xfd,0x117)]));}}else{addLog(_0x57f59c(0x1e6,0x1d4,0x1b1,0x187)+'启动');if(_0x5465c2)addLog(_0x57f59c(0x157,0x21b,0x19f,0x19e)+_0x5465c2);if(_0x1911e5)_0x2e647b[_0x57f59c(0x193,0x232,0x247,0x1ed)](addLog,_0x1764dc(0x212,0x220,0x233,0x1f7)+']');}}try{const {image:_0x70f757,change:_0x213065}=await _0x2e647b[_0x57f59c(0x135,0x12a,0x223,0x1ad)](generateBananaImage,{'prompt':_0x4ea070,'width':_0x542f46,'height':_0x249fe9,'change':_0xa151ba,'retouchPrompt':_0x5465c2,'retouchImage':_0x1911e5});if(_0x2e647b[_0x57f59c(0x115,0x13f,0x11a,0xe6)](extension_settings[extensionName][_0x57f59c(0x1f5,0x120,0x170,0x162)],'0')){const _0x400511={};_0x400511[_0x57f59c(0xe0,0x116,0x197,0x160)]=_0x165e9d,await _0x2e647b[_0x57f59c(0x1b7,0x1e0,0x159,0x1a8)](setItemImg,_0x4ea070,_0x70f757,_0x400511),addLog(_0x1764dc(0x290,0x1fd,0x194,0x250)+'or\x20prompt:'+'\x20'+_0x4ea070),extension_settings[extensionName][_0x1764dc(0x26b,0x222,0x27c,0x1e0)][_0x57f59c(0x12c,0x188,0xc6,0x102)]?(extension_settings[extensionName]['banana'][_0x57f59c(0x97,0xa7,0x82,0x102)]=_0x2e647b['kbuKy'](extension_settings[extensionName]['banana'][_0x1764dc(0x24f,0x213,0x18a,0x1bd)],0xd3f+-0x1835+0xaf7),_0x2e647b[_0x57f59c(0x1ac,0x166,0xd2,0x158)](addLog,_0x1764dc(0x201,0x247,0x20b,0x2cf)+_0x57f59c(0xf9,0x122,0x116,0x135)+extension_settings[extensionName][_0x57f59c(0x12d,0xee,0x19a,0x111)]['cishu'])):_0x2e647b['JHlNT'](_0x2e647b[_0x57f59c(0xe4,0xa6,0xe6,0x10c)],_0x1764dc(0x28b,0x204,0x212,0x1e2))?(extension_settings[extensionName][_0x57f59c(0x13c,0x122,0xe5,0x111)][_0x57f59c(0xcf,0x12e,0x73,0x102)]=0x1c5e+0x2ec*-0xd+0x99f,_0x2e647b[_0x57f59c(0x198,0x1fe,0x1c5,0x1bd)](addLog,_0x1764dc(0x1bf,0x247,0x254,0x24c)+_0x1764dc(0x2b0,0x246,0x2d4,0x24e)+extension_settings[extensionName]['banana'][_0x57f59c(0xb0,0xbf,0x9d,0x102)])):(_0x901d33['on'](_0x3760bf['GENERATE_I'+_0x57f59c(0xd0,0x104,0x130,0xd8)+'ST'],_0x50afb9),_0x324fe8['forEach'](_0x1fa923=>{_0x4500c4['on'](_0x1fa923,_0x4817ea);}),_0x392611(_0x57f59c(0xa7,0xd0,0x77,0x10d)+_0x1764dc(0x180,0x1f9,0x20c,0x266)));}else _0x2e647b['JHlNT'](_0x1764dc(0x229,0x1e1,0x1cb,0x205),_0x2e647b['ffxix'])?_0xf77a06=!![]:addLog(_0x1764dc(0x2c5,0x270,0x22f,0x2c9)+'库');const _0x2692ed={};_0x2692ed['id']=_0x24bafb,_0x2692ed['success']=!![],_0x2692ed[_0x57f59c(0xb1,0xdb,0xc5,0xe3)]=_0x70f757,_0x2692ed[_0x1764dc(0x32c,0x2da,0x283,0x335)]=_0x4ea070,_0x2692ed['change']=_0x165e9d,eventSource[_0x1764dc(0x22b,0x24a,0x2a7,0x29f)](EventType['GENERATE_I'+_0x57f59c(0x226,0x170,0x1c4,0x1c3)+_0x57f59c(0x174,0x1bd,0x18c,0x143)],_0x2692ed),_0x2e647b['uDICc'](addLog,_0x1764dc(0x2ad,0x22b,0x1e8,0x1c8)+_0x57f59c(0x184,0x1b8,0x186,0x138)+_0x1764dc(0x2b9,0x240,0x252,0x1cb)+_0x1764dc(0x1ab,0x22e,0x1eb,0x1a4)+':\x20'+_0x24bafb);}catch(_0x783feb){const _0x610165=_0x1764dc(0x2b0,0x28a,0x2d8,0x207)+_0x1764dc(0x222,0x233,0x1bd,0x1a9)+_0x57f59c(0x61,0xa3,0x14a,0xeb)+_0x1764dc(0x220,0x227,0x240,0x1ad)+_0x24bafb+':\x20'+_0x783feb[_0x1764dc(0x312,0x290,0x211,0x29e)];_0x2e647b[_0x57f59c(0xc2,0xba,0x13d,0x145)](addLog,_0x610165),console[_0x1764dc(0x2e0,0x25d,0x280,0x249)](_0x610165);const _0x1b8d06={};_0x1b8d06['id']=_0x24bafb,_0x1b8d06[_0x57f59c(0x72,0x162,0x147,0x101)]=![],_0x1b8d06[_0x57f59c(0x133,0x1db,0x1d3,0x14c)]=_0x783feb[_0x1764dc(0x26b,0x290,0x2c9,0x20d)],_0x1b8d06['prompt']=_0x4ea070,eventSource[_0x57f59c(0xbd,0xae,0x105,0x139)](EventType[_0x57f59c(0x144,0x13e,0x208,0x1bc)+_0x1764dc(0x2d6,0x2d4,0x248,0x2dd)+_0x57f59c(0x16c,0x190,0x137,0x143)],_0x1b8d06),_0x2e647b[_0x57f59c(0xcc,0x18d,0xd6,0x145)](addLog,_0x57f59c(0x192,0xb3,0x12b,0x11a)+'mitted\x20fai'+_0x57f59c(0xbe,0x1c7,0xea,0x133)+_0x1764dc(0x2c3,0x22e,0x242,0x201)+':\x20'+_0x24bafb);}}function _0x5939(_0x3a80cb,_0x1b87a9){_0x3a80cb=_0x3a80cb-(0xe0c+0x195a+0x1*-0x25b1);const _0x56ee2e=_0x423a();let _0x44cdf7=_0x56ee2e[_0x3a80cb];if(_0x5939['nvxqFH']===undefined){var _0x2b691e=function(_0x384e90){const _0x3d8742='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4d8234='',_0x2a87cc='',_0x42df3c=_0x4d8234+_0x2b691e;for(let _0x4784b0=0x2208+-0x2605*-0x1+0x43d*-0x11,_0x34c2fc,_0x1cdd95,_0x482705=-0xcd4+0x4*0x74d+-0x2*0x830;_0x1cdd95=_0x384e90['charAt'](_0x482705++);~_0x1cdd95&&(_0x34c2fc=_0x4784b0%(-0x159f+0x1b62+0x1*-0x5bf)?_0x34c2fc*(-0x19a+-0x4e*-0x4f+0x4f*-0x48)+_0x1cdd95:_0x1cdd95,_0x4784b0++%(-0x215d+0x11ce+-0x531*-0x3))?_0x4d8234+=_0x42df3c['charCodeAt'](_0x482705+(-0x1017+-0xbe*-0x7+-0xaef*-0x1))-(-0x17bf*0x1+-0x2*-0x125d+-0xcf1)!==0x16b+0x17f9+-0x1964?String['fromCharCode'](-0xe7+-0xe26+0x100c&_0x34c2fc>>(-(0x16*0x80+0x3*0x7cf+0xb79*-0x3)*_0x4784b0&0x2035+-0xc2*0x2+-0x1eab)):_0x4784b0:0x171+-0x52*0x4c+0xd*0x1c3){_0x1cdd95=_0x3d8742['indexOf'](_0x1cdd95);}for(let _0xf77cf9=0x142+0x18a5+-0x19e7,_0x3c4a4c=_0x4d8234['length'];_0xf77cf9<_0x3c4a4c;_0xf77cf9++){_0x2a87cc+='%'+('00'+_0x4d8234['charCodeAt'](_0xf77cf9)['toString'](-0x12dc+-0xe6a+-0x2*-0x10ab))['slice'](-(-0x5c0+0x114c+-0xb8a));}return decodeURIComponent(_0x2a87cc);};_0x5939['ZsQCtp']=_0x2b691e,_0x5939['mxfWwg']={},_0x5939['nvxqFH']=!![];}const _0x405f32=_0x56ee2e[-0x1c05*-0x1+0xdba+-0x29bf],_0x3d3dd6=_0x3a80cb+_0x405f32,_0x4380f5=_0x5939['mxfWwg'][_0x3d3dd6];if(!_0x4380f5){const _0x1a5341=function(_0x398287){this['rZuUyZ']=_0x398287,this['yueZcm']=[0x2c9*-0x4+0x8b4+0x5*0x7d,0x2*0xefe+-0x2583+-0x29*-0x2f,0x1d35+-0x147+-0x1bee],this['iMAWcc']=function(){return'newState';},this['FuaIjU']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['nXjWtr']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1a5341['prototype']['EPUSyS']=function(){const _0x122548=new RegExp(this['FuaIjU']+this['nXjWtr']),_0xad551d=_0x122548['test'](this['iMAWcc']['toString']())?--this['yueZcm'][-0x1c0c+-0x1ff+0x1e0c]:--this['yueZcm'][-0x1d*-0x71+0x1dfc+-0x2ac9];return this['FDiUyp'](_0xad551d);},_0x1a5341['prototype']['FDiUyp']=function(_0x120095){if(!Boolean(~_0x120095))return _0x120095;return this['VQuwFK'](this['rZuUyZ']);},_0x1a5341['prototype']['VQuwFK']=function(_0x6dc16b){for(let _0x5451aa=0x35*-0x73+0x2649+-0xe7a*0x1,_0x23f181=this['yueZcm']['length'];_0x5451aa<_0x23f181;_0x5451aa++){this['yueZcm']['push'](Math['round'](Math['random']())),_0x23f181=this['yueZcm']['length'];}return _0x6dc16b(this['yueZcm'][-0x1b7a+0x19e4+-0x1d*-0xe]);},new _0x1a5341(_0x5939)['EPUSyS'](),_0x44cdf7=_0x5939['ZsQCtp'](_0x44cdf7),_0x5939['mxfWwg'][_0x3d3dd6]=_0x44cdf7;}else _0x44cdf7=_0x4380f5;return _0x44cdf7;}const LEGACY_EVENT_NAMES=[_0x2642b7(-0x14c,-0xe2,-0xd2,-0xcd)+_0x2642b7(-0x53,-0x11,-0xc9,-0xa0)+'st',_0x2642b7(-0xff,-0x53,-0xee,-0x79)+_0x2642b7(-0x56,-0x10b,-0x5b,-0x96)+'st'];function initializeBananaListener(){const _0x2f4fe9={'JVDnp':function(_0x1bf91d,_0x28cc1e){return _0x1bf91d(_0x28cc1e);},'oDfcJ':'banana\x20生图事'+'件监听器已初始化。'};function _0x45db2e(_0x432784,_0x3c9a5a,_0x5dc88b,_0x12703a){return _0x37e8c7(_0x5dc88b-0x14d,_0x432784,_0x5dc88b-0x10e,_0x12703a-0x13f);}eventSource['on'](EventType[_0x45db2e(0x634,0x6c9,0x645,0x6ca)+_0x5e74d8(0x53,0xcb,0xa7,0xf2)+'ST'],bananaGenerate);function _0x5e74d8(_0x3ced2c,_0x777725,_0x157d41,_0x14d63c){return _0x37e8c7(_0x157d41- -0x36d,_0x14d63c,_0x157d41-0x14,_0x14d63c-0x15c);}LEGACY_EVENT_NAMES[_0x45db2e(0x532,0x565,0x576,0x540)](_0xa8b33=>{eventSource['on'](_0xa8b33,bananaGenerate);}),_0x2f4fe9[_0x5e74d8(0x1a6,0x19d,0x161,0xfa)](addLog,_0x2f4fe9[_0x45db2e(0x627,0x663,0x65f,0x648)]);}export async function replaceWithBanana(){function _0x242964(_0x17eb8a,_0x196a6b,_0xde893,_0x44f4e2){return _0x2642b7(_0x44f4e2,_0x196a6b-0x181,_0xde893-0x1bd,_0xde893-0x2d7);}function _0x3b3998(_0x10b63b,_0x4cab18,_0x1abc6a,_0x4224fb){return _0x2642b7(_0x4cab18,_0x4cab18-0x81,_0x1abc6a-0x1b4,_0x4224fb-0x7f);}const _0xf56c53={'vZDTM':'banana','uNNpd':function(_0x241a6e,_0x5b2a6a){return _0x241a6e===_0x5b2a6a;},'svvIL':'Mzsww','htCsH':function(_0x14ad8d){return _0x14ad8d();},'gqNTr':function(_0x1bdae1,_0x11b654){return _0x1bdae1(_0x11b654);}};if(extension_settings[extensionName]['mode']==_0xf56c53[_0x3b3998(-0x12a,-0x15f,-0x92,-0xf4)]){if(!window[_0x242964(0x2c2,0x1fd,0x22d,0x21f)+_0x242964(0x227,0x28d,0x262,0x29c)+_0x3b3998(-0x78,-0x3e,-0x50,-0x3e)]){if(_0xf56c53[_0x3b3998(-0x103,-0xa6,-0x78,-0x71)](_0xf56c53[_0x242964(0x2cb,0x246,0x256,0x2d7)],_0xf56c53[_0x242964(0x1e4,0x25f,0x256,0x221)]))window[_0x242964(0x2a8,0x20d,0x22d,0x1f8)+'BananaList'+_0x3b3998(0x13,0x29,-0x7b,-0x3e)]=!![],_0xf56c53[_0x3b3998(-0x6f,-0xcc,-0xdd,-0x9e)](initializeBananaListener);else{const _0x495ffe=_0x295f4c?function(){if(_0x3a6efe){const _0x485ad9=_0x343fcd['apply'](_0x189ae4,arguments);return _0x3a8e46=null,_0x485ad9;}}:function(){};return _0x388bd6=![],_0x495ffe;}}_0xf56c53[_0x242964(0x23e,0x157,0x1ba,0x24a)](initializeImageProcessing);}else window[_0x3b3998(-0xd,0x3d,0x3,-0x2b)+_0x3b3998(-0x40,-0x5c,0x8f,0xa)+'ener']&&(eventSource['removeList'+'ener'](EventType[_0x3b3998(0x2c,-0x57,0x2d,-0x13)+_0x242964(0xe6,0x109,0x161,0x194)+'ST'],bananaGenerate),LEGACY_EVENT_NAMES['forEach'](_0x3a9f5d=>{function _0x2c7e36(_0x2f95df,_0x1456e3,_0x21514f,_0x4ee0cb){return _0x3b3998(_0x2f95df-0xe9,_0x21514f,_0x21514f-0x1cf,_0x4ee0cb-0x67f);}eventSource[_0x2c7e36(0x5a6,0x526,0x51f,0x58c)+'ener'](_0x3a9f5d,bananaGenerate);}),window[_0x242964(0x256,0x1f2,0x22d,0x212)+'BananaList'+_0x3b3998(-0x2f,0x17,0x28,-0x3e)]=![],_0xf56c53[_0x3b3998(-0x2d,-0xe6,-0xcf,-0x59)](addLog,_0x242964(0x1af,0x170,0x1e2,0x21c)+_0x242964(0x209,0x2c3,0x247,0x1e8)));}