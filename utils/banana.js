(function(_0x240c65,_0x35a20f){function _0x598430(_0x2928bb,_0x3898cd,_0x4e35a8,_0x5bb8c6){return _0x4e5d(_0x5bb8c6-0x366,_0x2928bb);}function _0x3e3281(_0x3d2cf0,_0x1d29f2,_0x4a1443,_0x522f65){return _0x4e5d(_0x4a1443-0xee,_0x522f65);}const _0x54153b=_0x240c65();while(!![]){try{const _0x2e1842=parseInt(_0x3e3281(0x315,0x39b,0x38d,0x383))/(0xa3d+-0x1eca+0x148e)+-parseInt(_0x3e3281(0x366,0x2ed,0x379,0x2f6))/(0x133c+0x394+-0x16ce)*(parseInt(_0x598430(0x515,0x4da,0x56c,0x54a))/(0x363+-0x245e+0x20fe))+parseInt(_0x598430(0x57e,0x489,0x457,0x4db))/(-0x870+-0x1917+0x218b)+parseInt(_0x3e3281(0x386,0x2f3,0x396,0x394))/(0x1ca5+0x8ce+-0x3*0xc7a)*(parseInt(_0x598430(0x514,0x4f1,0x599,0x522))/(0x6*0xc9+0x1d78*0x1+0x2*-0x1114))+parseInt(_0x598430(0x57a,0x576,0x665,0x600))/(-0x1f1e+0x8f9*0x3+0x1*0x43a)*(parseInt(_0x598430(0x56d,0x62e,0x51a,0x5a8))/(-0x23b*-0x7+0x219*-0x1+-0xd7c))+parseInt(_0x598430(0x4c0,0x53e,0x46f,0x4e2))/(0x5f6+-0x1*-0x1963+-0x7d4*0x4)*(-parseInt(_0x3e3281(0x2e0,0x3d9,0x361,0x379))/(0x1130+-0x6a7*0x5+-0x177*-0xb))+-parseInt(_0x3e3281(0x2f4,0x2cf,0x35b,0x357))/(-0x5*0x295+0x4*0x338+0x14);if(_0x2e1842===_0x35a20f)break;else _0x54153b['push'](_0x54153b['shift']());}catch(_0x4afe0f){_0x54153b['push'](_0x54153b['shift']());}}}(_0x1786,-0x38893+0x4d0ac+0x17a67*0x1));const _0x16d7de=(function(){const _0x379858={};_0x379858[_0x4add92(-0x174,-0x1dd,-0x171,-0x155)]=function(_0x48e20e,_0x1f2ee6){return _0x48e20e+_0x1f2ee6;},_0x379858[_0x4add92(-0x15c,-0x17c,-0x12e,-0x130)]=function(_0x400997,_0x4add26){return _0x400997===_0x4add26;},_0x379858[_0x3bc9d0(0x285,0x286,0x255,0x251)]=_0x3bc9d0(0x290,0x2c2,0x26e,0x2ad);const _0x436544=_0x379858;function _0x4add92(_0x1384e7,_0x25c3fe,_0x5d787a,_0x5bf876){return _0x4e5d(_0x5bf876- -0x33a,_0x1384e7);}let _0x54d92a=!![];function _0x3bc9d0(_0x444110,_0x3e5f3a,_0x1505fa,_0xdba667){return _0x4e5d(_0x3e5f3a-0x3,_0x444110);}return function(_0x1e6975,_0x107bd9){const _0x10a12d=_0x54d92a?function(){function _0x2fc512(_0x3844b4,_0x73b5d9,_0x599373,_0x33ad64){return _0x4e5d(_0x3844b4- -0xdb,_0x73b5d9);}const _0x443e49={'mDyiA':function(_0x2f72b1,_0x53f68d){function _0x5a538f(_0x1b93f4,_0x3ed588,_0x31fa0a,_0x426bee){return _0x4e5d(_0x31fa0a-0x215,_0x426bee);}return _0x436544[_0x5a538f(0x39d,0x3b5,0x3fa,0x3cd)](_0x2f72b1,_0x53f68d);},'bbDwR':function(_0x4706c9,_0x11ce8b){function _0x1043c2(_0xa02548,_0x3e8da9,_0x323465,_0x40c226){return _0x4e5d(_0xa02548-0x2b2,_0x323465);}return _0x436544[_0x1043c2(0x497,0x3f3,0x4a0,0x4c1)](_0x4706c9,_0x11ce8b);}};function _0x43d538(_0x486d44,_0x21b9a0,_0x3b3c89,_0x424033){return _0x4e5d(_0x21b9a0-0x375,_0x3b3c89);}if(_0x436544[_0x2fc512(0x12f,0x125,0x14d,0x1c8)]('SXiye',_0x436544[_0x43d538(0x675,0x5f8,0x574,0x611)])){if(_0x107bd9){const _0xb31bca=_0x107bd9[_0x2fc512(0x16e,0x130,0x182,0x190)](_0x1e6975,arguments);return _0x107bd9=null,_0xb31bca;}}else _0x325c75=_0x443e49[_0x43d538(0x53b,0x572,0x59a,0x60a)](_0x443e49[_0x43d538(0x4c4,0x56a,0x526,0x4e9)](_0x50694c,',\x20'),_0x2ceda['Character\x20'+_0x12e8df+_0x43d538(0x4b9,0x514,0x4d7,0x48e)]);}:function(){};return _0x54d92a=![],_0x10a12d;};}()),_0x12cdd4=_0x16d7de(this,function(){function _0x8a1736(_0x262051,_0x15d78e,_0x5d2f8e,_0x262482){return _0x4e5d(_0x262482- -0x4c,_0x15d78e);}function _0x5cbfdd(_0x3ce315,_0x184d05,_0x32964a,_0x2e4696){return _0x4e5d(_0x3ce315-0xa3,_0x32964a);}const _0x30bb4c={};_0x30bb4c[_0x5cbfdd(0x271,0x1e3,0x239,0x2a6)]=_0x5cbfdd(0x2e3,0x2e7,0x259,0x328)+'+$';const _0x4f0efa=_0x30bb4c;return _0x12cdd4[_0x8a1736(0xef,0x1cc,0x155,0x16e)]()[_0x5cbfdd(0x2dd,0x26f,0x2d9,0x240)](_0x4f0efa[_0x5cbfdd(0x271,0x2ab,0x1f3,0x1e7)])[_0x8a1736(0x129,0x1fd,0xfb,0x16e)]()[_0x8a1736(0x252,0x27c,0x2bc,0x22e)+'r'](_0x12cdd4)[_0x8a1736(0x1de,0x1e8,0x1f1,0x1ee)](_0x4f0efa[_0x5cbfdd(0x271,0x2cf,0x262,0x2e6)]);});_0x12cdd4();import{extension_settings}from'../../../../extensions.js';function _0x4e5d(_0x33b37f,_0x4e088c){_0x33b37f=_0x33b37f-(0x1589+0x22d1+-0x36e7);const _0x1de1b3=_0x1786();let _0x35297d=_0x1de1b3[_0x33b37f];if(_0x4e5d['tXdRLj']===undefined){var _0xde13ae=function(_0x30c0f3){const _0x90ba94='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2398d4='',_0x1acbe5='',_0x464c14=_0x2398d4+_0xde13ae;for(let _0x1ac1e8=-0x13cc*0x1+-0xc3*-0x21+-0x557,_0x180336,_0x4479c1,_0x555bc7=0x1*0xc3f+0x1935+-0x2574;_0x4479c1=_0x30c0f3['charAt'](_0x555bc7++);~_0x4479c1&&(_0x180336=_0x1ac1e8%(0xdaa+0xacf*0x2+-0x25*0xf4)?_0x180336*(-0x1f1f+-0x7db*0x1+-0x139d*-0x2)+_0x4479c1:_0x4479c1,_0x1ac1e8++%(0x31*-0x4f+-0x1*-0x461+-0x1cb*-0x6))?_0x2398d4+=_0x464c14['charCodeAt'](_0x555bc7+(0x26b2+0x189d+-0x3f45))-(-0x1*-0x24b+-0x18b5+0xb3a*0x2)!==0x2414+-0x1*0xc05+-0x180f?String['fromCharCode'](0x6*-0x236+0x29*0x9+-0x6*-0x223&_0x180336>>(-(0x149a+-0x427*0x7+0x879)*_0x1ac1e8&0x9*0x452+0x2*0x647+-0x336a)):_0x1ac1e8:0x25d6+-0x26*0x2+0x136*-0x1f){_0x4479c1=_0x90ba94['indexOf'](_0x4479c1);}for(let _0x764517=0xb*-0x188+0x1d75+-0xc9d,_0x1dd436=_0x2398d4['length'];_0x764517<_0x1dd436;_0x764517++){_0x1acbe5+='%'+('00'+_0x2398d4['charCodeAt'](_0x764517)['toString'](-0x19f9+-0x1*0x12ee+-0xefd*-0x3))['slice'](-(0xcf*0x11+-0x1*0x18f5+0x8*0x167));}return decodeURIComponent(_0x1acbe5);};_0x4e5d['CERTiA']=_0xde13ae,_0x4e5d['dznYcU']={},_0x4e5d['tXdRLj']=!![];}const _0x5849ce=_0x1de1b3[0x1387+0x2*0xa81+-0x2889],_0x59a200=_0x33b37f+_0x5849ce,_0xdc6dd5=_0x4e5d['dznYcU'][_0x59a200];if(!_0xdc6dd5){const _0x2797ae=function(_0x86cd59){this['VuUouQ']=_0x86cd59,this['RpTrYS']=[0x231+0x1ad0+-0x1d00,-0x26aa+-0x2366+0x10*0x4a1,0x23b*-0x7+0x266c*-0x1+0x3609],this['BCnRgX']=function(){return'newState';},this['QwUXge']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['YozEaT']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2797ae['prototype']['FZsSfa']=function(){const _0x4ec12e=new RegExp(this['QwUXge']+this['YozEaT']),_0x5db706=_0x4ec12e['test'](this['BCnRgX']['toString']())?--this['RpTrYS'][0x280*0x8+-0x1*-0x79f+-0xdcf*0x2]:--this['RpTrYS'][0x2*0xb5c+-0x8*0x24f+-0x11*0x40];return this['DboZVz'](_0x5db706);},_0x2797ae['prototype']['DboZVz']=function(_0x262584){if(!Boolean(~_0x262584))return _0x262584;return this['KgDLYP'](this['VuUouQ']);},_0x2797ae['prototype']['KgDLYP']=function(_0x2a19bd){for(let _0x590f7c=-0x1d*-0x8a+0x8db*-0x3+0x137*0x9,_0xb5700=this['RpTrYS']['length'];_0x590f7c<_0xb5700;_0x590f7c++){this['RpTrYS']['push'](Math['round'](Math['random']())),_0xb5700=this['RpTrYS']['length'];}return _0x2a19bd(this['RpTrYS'][0x3*0x57+0xa46+-0xb4b]);},new _0x2797ae(_0x4e5d)['FZsSfa'](),_0x35297d=_0x4e5d['CERTiA'](_0x35297d),_0x4e5d['dznYcU'][_0x59a200]=_0x35297d;}else _0x35297d=_0xdc6dd5;return _0x35297d;}import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';import{taskQueue,TaskType}from'./taskQueue.js';async function getImageFromTurnData(_0x5001db){function _0xbcc7ad(_0x44d80c,_0x2ef18d,_0x4ef491,_0x4422cf){return _0x4e5d(_0x4422cf- -0x2a2,_0x4ef491);}const _0x3d2fb2={'SwKaB':_0xbcc7ad(0x10,0x37,0x23,-0x24),'wKOsc':function(_0x2aeeb2,_0x4b96d7){return _0x2aeeb2(_0x4b96d7);},'AITWM':function(_0x4e500d,_0x4c27f3){return _0x4e500d||_0x4c27f3;},'WpCYn':_0x7eca41(0xb6,0xd8,0x120,0x88)};if(!_0x5001db)return'';if(_0x5001db['imageId']&&_0x5001db[_0x7eca41(0x1e4,0x1bc,0x180,0x18e)][_0x7eca41(0xda,0x13d,0xd7,0x186)](_0x3d2fb2[_0x7eca41(0x25e,0x1bb,0x1df,0x251)])){const _0x4430db=await _0x3d2fb2[_0xbcc7ad(-0xaa,-0x129,-0xba,-0x11d)](getConfigImage,_0x5001db[_0x7eca41(0x1d6,0x1bc,0x120,0x11f)]);return _0x3d2fb2[_0xbcc7ad(0x91,-0x51,0x24,-0x4)](_0x4430db,'');}function _0x7eca41(_0x4ee190,_0x4f0372,_0x280a53,_0x2bbcd9){return _0x4e5d(_0x4f0372- -0xa0,_0x4ee190);}if(_0x5001db[_0x7eca41(0x248,0x1f6,0x254,0x212)]&&_0x5001db[_0x7eca41(0x189,0x1f6,0x1bb,0x152)][_0xbcc7ad(-0x95,-0x157,-0x10d,-0xc5)](_0x3d2fb2[_0xbcc7ad(-0x8d,-0x8b,0x4d,0x0)]))return _0x5001db[_0x7eca41(0x16c,0x1f6,0x203,0x213)];return'';}async function generateBananaImage({prompt:_0x5da2c8,width:_0x16f490,height:_0x2d07a7,change:_0x43d380,retouchPrompt:_0x30f460,retouchImage:_0x34b9bb}){const _0x217400={'YvOiq':function(_0x6a577f,_0x5b5890){return _0x6a577f(_0x5b5890);},'MyrRB':function(_0x59e14c,_0x484b64){return _0x59e14c(_0x484b64);},'ngEQo':_0x470883(0x274,0x217,0x233,0x244)+_0x176db9(0x2a9,0x207,0x21f,0x254),'Crwar':_0x176db9(0x269,0x2f5,0x207,0x2b7),'sZyuB':function(_0xc3af38,_0x1972a9){return _0xc3af38(_0x1972a9);},'RqAEt':function(_0x39002f,_0x168530){return _0x39002f(_0x168530);},'UNxiE':_0x470883(0x198,0x16d,0x294,0x1fd)+'图事件监听器已关闭。','tTscV':function(_0x3db319,_0x49475e){return _0x3db319(_0x49475e);},'DMhLw':function(_0x10419d,_0x2c93d2){return _0x10419d(_0x2c93d2);},'mPIan':function(_0x212177,_0x2abcb0){return _0x212177+_0x2abcb0;},'KYhpl':_0x176db9(0x1fb,0x238,0x17b,0x1a1),'FQrFz':function(_0x1ac8f1){return _0x1ac8f1();},'oVLXx':function(_0x350cb7,_0x2e6a0e){return _0x350cb7>_0x2e6a0e;},'VdEbj':_0x470883(0x189,0x18b,0x131,0x16f),'pIktP':function(_0x481e68,_0x243d32){return _0x481e68(_0x243d32);},'rSiMp':function(_0x274409,_0x41d6c7){return _0x274409||_0x41d6c7;},'KLHTD':function(_0x15c375,_0x907e5f){return _0x15c375||_0x907e5f;},'GWQja':function(_0x462509,_0x156520){return _0x462509!==_0x156520;},'hmXOU':function(_0x83bbf3,_0x32813c){return _0x83bbf3(_0x32813c);},'mVuSo':_0x470883(0x142,0x1d4,0x187,0x1bd)+_0x470883(0x1bb,0x224,0x1b8,0x211),'qClMZ':function(_0x468fd5,_0x29eac3){return _0x468fd5===_0x29eac3;},'Kmsir':_0x176db9(0x2e6,0x319,0x265,0x2cb),'qZFwI':_0x176db9(0x213,0x213,0x257,0x285),'sPqYf':function(_0x38a2ed,_0x42e766){return _0x38a2ed(_0x42e766);},'IdVDr':'分角色模式:\x20解析带'+_0x470883(0x17f,0x218,0x119,0x190),'rTEZd':function(_0x1ed087,_0x2a4670){return _0x1ed087(_0x2a4670);},'Fnrck':function(_0x444c79,_0x2ee7b0){return _0x444c79<=_0x2ee7b0;},'EDxnc':'iCNQh','AcWXK':_0x176db9(0x2d7,0x360,0x247,0x2b1),'qAiIT':function(_0xbf5ff8,_0x183d92,_0x4def4a){return _0xbf5ff8(_0x183d92,_0x4def4a);},'Glicn':function(_0x243bd8,_0x4a60c0){return _0x243bd8<=_0x4a60c0;},'HAYYp':function(_0x36577d,_0x1a4d55){return _0x36577d!==_0x1a4d55;},'MEBqn':'ohPum','hsJEX':function(_0x285adf,_0x4f9035){return _0x285adf+_0x4f9035;},'YXWAY':function(_0x225ae0,_0x4652b3){return _0x225ae0(_0x4652b3);},'UpNMv':'Mzsyl','aOdIf':_0x470883(0x275,0x1e0,0x2c1,0x222),'fEegb':_0x470883(0x190,0x1fc,0x1fb,0x1ed),'IgLUn':function(_0x442c00,_0x51831e){return _0x442c00(_0x51831e);},'ObwYk':_0x470883(0x1c7,0x13d,0xc0,0x12b),'qiXXf':_0x176db9(0x33d,0x3ab,0x300,0x2e4),'FMwgZ':_0x176db9(0x20c,0x24c,0x1e5,0x1cc)+'用了\x20{修图}\x20标识'+'。','WfKXO':_0x470883(0x18e,0x15c,0x188,0x175),'DBJle':_0x470883(0x1f5,0x1d2,0x14e,0x17e),'dvSlz':_0x470883(0x19d,0x1f9,0x18c,0x21c),'tczoB':function(_0x104f66,_0x120970){return _0x104f66(_0x120970);},'rxDch':_0x470883(0x17d,0x102,0xa0,0x13b),'LtTip':_0x176db9(0x283,0x27d,0x2ba,0x21f),'otIsj':function(_0x5a896b,_0x1f2da1){return _0x5a896b(_0x1f2da1);},'XODpu':function(_0x4dc16d,_0x1e0b19){return _0x4dc16d>_0x1e0b19;},'hpeXn':_0x470883(0x1f8,0x1ed,0x1e9,0x169),'rpcSx':_0x470883(0x146,0x1bf,0x226,0x1b4),'BhADk':function(_0x29d6af,_0xae4cf8){return _0x29d6af||_0xae4cf8;},'RTheA':function(_0x532de4,_0x2b4b79){return _0x532de4(_0x2b4b79);},'eiSBy':function(_0x4dbb72,_0x3b3fe7){return _0x4dbb72(_0x3b3fe7);},'MRDqn':_0x470883(0x11a,0x109,0x179,0x127),'ExYOQ':_0x176db9(0x1f3,0x1a2,0x17d,0x157),'cQawE':function(_0x4cba34,_0x429cf3){return _0x4cba34(_0x429cf3);},'rCkjO':function(_0x88885e,_0x364637){return _0x88885e(_0x364637);},'YqSUr':function(_0x29bae1,_0x224b5a){return _0x29bae1===_0x224b5a;},'SabdD':'pnETp','dqGBe':_0x176db9(0x219,0x247,0x27b,0x2b2),'GzaVh':'running','ZbkEA':function(_0x1d5146,_0x51d0e4,_0x569b41){return _0x1d5146(_0x51d0e4,_0x569b41);},'QpWai':_0x470883(0x1b2,0xb4,0x110,0x144),'PTTlC':'applicatio'+_0x470883(0x182,0x21b,0x193,0x193),'KJmFp':function(_0x397103,_0x12647d){return _0x397103>_0x12647d;},'jSRdV':function(_0x39cab4,_0x368aa8){return _0x39cab4===_0x368aa8;},'EgSPO':_0x176db9(0x2e4,0x270,0x317,0x2a0),'ZZAVE':_0x470883(0x1d6,0x20a,0x155,0x180),'FgMjQ':_0x176db9(0x2ef,0x36b,0x2ef,0x27b),'qMZNE':_0x470883(0x23b,0x1fd,0x1d4,0x1bf),'qYCBo':function(_0x2d8335,_0x4d5630){return _0x2d8335(_0x4d5630);},'jNLye':'[Banana]\x20D'+_0x176db9(0x314,0x37e,0x291,0x273)+_0x470883(0x24a,0x247,0x1a1,0x1b8)+_0x470883(0xe8,0xdc,0xeb,0x145)+_0x470883(0x1ca,0xce,0x177,0x15d)+'g\x20URL...','OGMES':function(_0xe6404c,_0x1c73d4){return _0xe6404c(_0x1c73d4);},'YIXok':function(_0x309fab,_0x21ac4d){return _0x309fab===_0x21ac4d;},'QVhLN':_0x470883(0x1fa,0x1a9,0x1e3,0x156),'keGQN':function(_0x5e0ba6,_0x1374c4){return _0x5e0ba6(_0x1374c4);},'wLjCz':_0x176db9(0x2d6,0x32d,0x37a,0x2df)+'uccessfull'+_0x470883(0x1a5,0x134,0x1a8,0x126)+_0x470883(0x16e,0x11e,0x126,0x187)+_0x470883(0x194,0x17d,0x11e,0x1ba)+_0x470883(0x15f,0x167,0x262,0x1fb),'xdOsu':function(_0x4164eb,_0x33cf4b){return _0x4164eb===_0x33cf4b;},'bRyup':'qGnoX','HKPcZ':function(_0x103ca3,_0x5b4402){return _0x103ca3(_0x5b4402);},'QcJos':_0x470883(0x2b9,0x247,0x1fd,0x250)+'sing\x20direc'+_0x470883(0xd6,0xc0,0x16a,0x155)+_0x176db9(0x2ee,0x303,0x24a,0x390),'pwNtq':_0x176db9(0x31b,0x325,0x2b5,0x2c6),'CEZnq':_0x470883(0x1b1,0x2bf,0x221,0x247)+_0x470883(0x1f0,0xe4,0xb9,0x14b)+'ntains\x20tex'+'t\x20only,\x20no'+_0x470883(0x124,0x9b,0xaa,0x11e),'QEDTk':'fKeZN','iXKfP':_0x470883(0x13f,0x85,0x145,0x117),'FAhZT':_0x176db9(0x332,0x2c6,0x2c7,0x317)+_0x176db9(0x241,0x1cb,0x19b,0x2a5)+_0x470883(0x1dc,0x22d,0x172,0x1e5)+_0x176db9(0x23f,0x1da,0x29b,0x205),'FuPTT':_0x176db9(0x32c,0x2d6,0x321,0x3c5)+'etch\x20error'+':'};_0x217400[_0x470883(0x17f,0x24f,0x244,0x1ca)](clearLog);const _0x39d364=taskQueue[_0x176db9(0x21c,0x280,0x1ff,0x19e)]({'name':(_0x5da2c8||'')[_0x470883(0x22f,0x16a,0x12d,0x18a)](-0x81d+0x994+-0x177,0x90e*-0x3+0x9fd*-0x3+0x393f)+(_0x5da2c8&&_0x217400[_0x470883(0x17f,0x88,0x122,0x121)](_0x5da2c8[_0x176db9(0x202,0x18d,0x1d8,0x236)],0x1*0x1951+-0x2dd*-0x6+-0x2a61)?_0x217400[_0x176db9(0x25e,0x2db,0x2af,0x2f9)]:''),'type':TaskType[_0x176db9(0x1f4,0x297,0x19f,0x1b0)],'prompt':_0x5da2c8});_0x5da2c8=processCharacterPrompt(_0x5da2c8),_0x5da2c8=await stripChineseAnnotations(_0x5da2c8);let _0x192c38=_0x43d380;_0x43d380=processCharacterPrompt(_0x43d380),_0x43d380=await _0x217400[_0x176db9(0x321,0x2af,0x2d3,0x2b9)](stripChineseAnnotations,_0x43d380),_0x217400[_0x176db9(0x306,0x2f9,0x30c,0x335)](addLog,_0x470883(0xbe,0xd1,0x19d,0x12c)+'图流程。客户端为'+extension_settings[extensionName][_0x176db9(0x2f5,0x27b,0x303,0x2d8)]),addLog(_0x176db9(0x31d,0x284,0x3ad,0x2af)+'\x20'+_0x217400['rSiMp'](_0x16f490,'默认')+_0x176db9(0x22b,0x18b,0x1c8,0x1f7)+_0x217400[_0x470883(0x27c,0x242,0x1ec,0x20d)](_0x2d07a7,'默认')),_0x5da2c8=_0x43d380&&_0x217400[_0x176db9(0x2b1,0x252,0x312,0x284)](_0x43d380[_0x470883(0x18b,0x12b,0x188,0x1d0)](),'')?_0x43d380:_0x5da2c8,_0x217400[_0x176db9(0x225,0x1b0,0x261,0x200)](addLog,_0x470883(0xf1,0x1e6,0x201,0x183)+_0x5da2c8);let _0x57580f=![];_0x5da2c8[_0x470883(0x184,0x118,0x10a,0x168)](_0x217400[_0x470883(0x217,0x145,0x1ca,0x1cb)])&&(_0x57580f=!![]);addLog('是否启用分角色模式\x20'+_0x176db9(0x254,0x26c,0x269,0x299)+'les):\x20'+_0x57580f);function _0x470883(_0x8aff49,_0x201806,_0x5b7f35,_0x1dd7f4){return _0x4e5d(_0x1dd7f4- -0x63,_0x8aff49);}let _0x4ef379={},_0xe9d709='',_0x1ae7bf='';if(_0x57580f){if(_0x217400['qClMZ'](_0x217400['Kmsir'],_0x217400[_0x176db9(0x248,0x2df,0x279,0x1e1)]))_0x217400['YvOiq'](_0x45d884,'[Banana]\x20F'+'ailed\x20to\x20f'+_0x176db9(0x2df,0x2cf,0x2a6,0x356)+_0x470883(0x2d3,0x270,0x21e,0x24b)+'\x20'+_0x2256e1[_0x470883(0x1d7,0x127,0x210,0x1b7)]),_0x3173e=_0x5209c3,_0x217400[_0x176db9(0x2a4,0x272,0x311,0x2dd)](_0x26f927,'[Banana]\x20U'+_0x470883(0x1f2,0x233,0x243,0x1ae)+_0x176db9(0x238,0x284,0x19c,0x2a8)+_0x176db9(0x2ee,0x382,0x2a0,0x369));else{_0x217400[_0x176db9(0x214,0x187,0x207,0x209)](addLog,_0x217400[_0x470883(0x1ae,0x1a1,0x1ae,0x1b2)]),_0x4ef379=_0x217400[_0x176db9(0x309,0x387,0x368,0x2f2)](parsePromptStringWithCoordinates,_0x5da2c8),_0xe9d709=_0x4ef379[_0x176db9(0x2a0,0x2eb,0x2d2,0x32d)+_0x470883(0x1fa,0x1d2,0x263,0x211)];for(let _0x268a9e=0x4*0x421+0xa98+-0x1b1b;_0x217400[_0x470883(0x1e1,0x299,0x1d6,0x21e)](_0x268a9e,0x575+-0x17a7+0x1236);_0x268a9e++){_0x4ef379[_0x470883(0x270,0x231,0x295,0x1f5)+_0x268a9e+'\x20Prompt']&&(_0x217400[_0x176db9(0x2b4,0x2c2,0x2f6,0x234)](_0x217400[_0x470883(0x167,0x159,0x189,0x196)],_0x217400[_0x176db9(0x2dd,0x2af,0x2cc,0x2e1)])?(_0x3e3863['on'](_0x92dc1e[_0x470883(0x236,0x1c5,0x25b,0x20f)+_0x470883(0x1ab,0x2d2,0x2bc,0x242)+'ST'],_0x412cad),_0x217400[_0x176db9(0x256,0x25a,0x1ee,0x1fd)](_0x48dbfc,_0x217400[_0x470883(0x234,0x1d8,0x1e5,0x1a8)])):_0x1ae7bf=_0x217400['mPIan'](_0x1ae7bf,',\x20')+_0x4ef379[_0x470883(0x27a,0x1ac,0x1a5,0x1f5)+_0x268a9e+_0x176db9(0x21f,0x256,0x184,0x260)]);}}}else _0x217400[_0x176db9(0x2b8,0x245,0x254,0x359)](addLog,'标准模式:\x20使用请求'+_0x470883(0x28f,0x1a3,0x222,0x1ee)),_0xe9d709=_0x5da2c8;let {modifiedPrompt:_0x416084,insertions:_0x414a14}=await _0x217400['qAiIT'](prompt_replace,_0xe9d709,_0x1ae7bf);if(_0x57580f)for(let _0x51d0c2=0x1*0xf91+-0x16*-0x71+0x5*-0x50e;_0x217400['Glicn'](_0x51d0c2,0x2f*-0x98+0xad*0x2b+-0x123);_0x51d0c2++){if(_0x217400[_0x470883(0xfd,0x1d8,0x116,0x170)](_0x217400[_0x176db9(0x242,0x1e7,0x1db,0x2d7)],_0x217400[_0x176db9(0x242,0x25f,0x24f,0x221)])){const _0x4e6ee7={};_0x4e6ee7[_0x470883(0x245,0x2cd,0x277,0x22d)]='text',_0x4e6ee7[_0x470883(0x295,0x23e,0x1a7,0x21c)]=_0x3d3743;const _0x265edd={};_0x265edd[_0x470883(0x1df,0x2b9,0x2de,0x258)]=_0x217400[_0x470883(0x9b,0x1ac,0x1d1,0x12e)],_0x265edd[_0x176db9(0x2cd,0x36b,0x335,0x34a)]=[_0x4e6ee7],_0x3020b5[_0x470883(0x18d,0x1b9,0x234,0x22f)](_0x265edd);}else _0x4ef379[_0x470883(0x1d6,0x257,0x17a,0x1f5)+_0x51d0c2+'\x20Prompt']&&(_0x416084=_0x217400['hsJEX'](_0x217400[_0x176db9(0x30d,0x2dd,0x2eb,0x37a)](_0x416084,_0x217400['KYhpl']),prompt_replace_for_character(_0x4ef379[_0x176db9(0x2d8,0x2fa,0x247,0x324)+_0x51d0c2+_0x176db9(0x21f,0x1d2,0x222,0x211)])));}const _0x447bfd=extension_settings[extensionName][_0x470883(0x18d,0x1c5,0x1e0,0x232)],{model:_0x576886,apiUrl:_0x1ef66e,apiKey:_0xad1409,conversationPresets:_0x78cc52,conversationPresetId:_0x5cfd9c,editPresetId:_0xa17e90,aspectRatio:_0x5b63bf}=_0x447bfd;_0x217400['YXWAY'](addLog,_0x470883(0x27b,0x27c,0x1ad,0x1f3)+_0x176db9(0x296,0x25f,0x283,0x2fe)+_0x176db9(0x2c7,0x343,0x2ff,0x2bb)+_0x470883(0x19a,0x232,0x229,0x218)+_0x470883(0xf9,0x107,0x19e,0x185)+_0x576886);let _0x8333cf,_0x42508d;if(_0x576886[_0x176db9(0x25d,0x294,0x23a,0x302)](_0x470883(0x1e5,0x24e,0x19a,0x1c8))){if(_0x217400[_0x176db9(0x253,0x1c2,0x2cf,0x203)](_0x217400[_0x176db9(0x2d3,0x2cc,0x281,0x23f)],_0x217400[_0x176db9(0x2d3,0x28d,0x335,0x355)]))throw new _0x2e1b75(_0x470883(0x1d5,0x214,0x25f,0x257)+_0x470883(0x1ad,0x14a,0x163,0x1a6)+'e:\x20'+_0x418c66[_0x470883(0x1cf,0xdf,0x210,0x17d)]);else{_0x8333cf=_0x176db9(0x229,0x29c,0x207,0x1a8)+_0x470883(0x24e,0x159,0x1ff,0x1cc)+_0x576886;const _0x27a0dc={};_0x27a0dc[_0x470883(0xfa,0xee,0xb1,0x13a)+'t']='';const _0x3a7b28=_0x78cc52[_0x5cfd9c]||_0x27a0dc,_0x4bb21e=[_0x3a7b28['fixedPromp'+'t'],_0x414a14['前置前'],_0x414a14[_0x217400['aOdIf']],_0x416084,_0x414a14['后置前'],_0x414a14[_0x217400[_0x176db9(0x2f9,0x35d,0x369,0x307)]],_0x3a7b28[_0x470883(0x1dd,0x293,0x25a,0x255)+_0x470883(0x13a,0x181,0x246,0x1a2)],_0x414a14['最后置']][_0x470883(0xfd,0x146,0x187,0x162)](Boolean)[_0x470883(0xf9,0x23e,0x19f,0x19b)](',\x20');_0x217400[_0x470883(0x13a,0x215,0x174,0x1c1)](addLog,_0x470883(0x251,0x1d7,0x164,0x1f1)+_0x4bb21e);const _0x1bf332={};_0x1bf332[_0x176db9(0x29c,0x281,0x321,0x302)]=_0x4bb21e;const _0x5b8f90={};_0x5b8f90[_0x176db9(0x2bb,0x216,0x251,0x224)+'t']=0x1,_0x5b8f90[_0x470883(0x1f6,0x180,0x1c0,0x17c)+'o']=_0x5b63bf;const _0x16fa21={};_0x16fa21[_0x470883(0x1e5,0x261,0x1cd,0x252)]=[_0x1bf332],_0x16fa21[_0x176db9(0x26b,0x293,0x268,0x248)]=_0x5b8f90,_0x42508d=_0x16fa21,_0x217400['IgLUn'](addLog,'[Banana]\x20B'+_0x176db9(0x2b5,0x282,0x31d,0x2f3)+_0x176db9(0x27c,0x255,0x25c,0x2ab)+_0x470883(0x91,0x17e,0xef,0x128)+'t:\x20'+_0x4bb21e);}}else{if(_0x217400['HAYYp'](_0x217400[_0x470883(0x19c,0x1b0,0x18c,0x13d)],_0x217400[_0x176db9(0x220,0x1ce,0x202,0x212)]))_0x217400[_0x176db9(0x282,0x21a,0x1e7,0x1fb)](_0x29bfad,'[Banana]\x20R'+_0x470883(0xc7,0x10e,0x1db,0x14b)+_0x176db9(0x30e,0x2f8,0x34c,0x324)+_0x470883(0x1f1,0x1c9,0x1b1,0x1eb)+_0x470883(0x12a,0x119,0x1c5,0x11e));else{_0x8333cf='/v1/chat/c'+'ompletions';let _0x344143;if(_0x43d380[_0x176db9(0x24b,0x2dd,0x29b,0x223)](_0x217400['qiXXf'])){_0x217400[_0x176db9(0x29f,0x289,0x22c,0x303)](addLog,_0x217400[_0x470883(0x1bf,0x215,0x1fc,0x213)]);const _0x5b89dc=_0xa17e90||'默认',_0x314fa5={};_0x314fa5[_0x470883(0x19a,0x21e,0x272,0x1f7)+'on']=[],_0x314fa5['fixedPromp'+'t']='',_0x344143=_0x78cc52[_0x5b89dc]||_0x314fa5,_0x217400[_0x470883(0x2b9,0x295,0x18e,0x226)](addLog,'[Banana]\x20使'+_0x470883(0x150,0x1dc,0x1fc,0x18d)+_0x5b89dc+'\x22');}else{const _0x431612={};_0x431612[_0x176db9(0x2da,0x299,0x2e3,0x27c)+'on']=[],_0x431612[_0x176db9(0x21d,0x2a9,0x1d5,0x1d1)+'t']='',_0x344143=_0x78cc52[_0x5cfd9c]||_0x431612;}const _0x5762e8=[_0x344143[_0x176db9(0x21d,0x259,0x176,0x225)+'t'],_0x414a14[_0x217400['WfKXO']],_0x414a14[_0x217400[_0x470883(0x284,0x232,0x1d1,0x1f2)]],_0x416084,_0x414a14['后置前'],_0x414a14[_0x217400[_0x470883(0x1cb,0x190,0x19b,0x216)]],_0x344143[_0x176db9(0x338,0x349,0x2b0,0x383)+_0x470883(0x122,0x22a,0x237,0x1a2)],_0x414a14[_0x470883(0x178,0x1cb,0x1e2,0x1e0)]][_0x470883(0x11d,0x185,0xd0,0x162)](Boolean)['join'](',\x20');addLog(_0x470883(0x1b2,0x245,0x1ae,0x1f1)+_0x5762e8);const _0x38612f={};_0x38612f[_0x176db9(0x33b,0x340,0x349,0x325)]=_0x176db9(0x269,0x293,0x25f,0x28a),_0x38612f[_0x470883(0x15a,0x1ee,0x238,0x1ea)]=[];const _0x5de7e1={};_0x5de7e1[_0x176db9(0x33b,0x3c2,0x2af,0x2ac)]=_0x176db9(0x24c,0x248,0x25c,0x262),_0x5de7e1[_0x470883(0x236,0x1a7,0x23a,0x1ea)]=[];const _0xe8b98f=_0x344143[_0x470883(0x192,0x157,0x197,0x1f7)+'on']['map'](_0xd911cd=>[_0x38612f,_0x5de7e1])['flat']();let _0x147040=-0x6*-0x341+-0x1*-0x19ef+-0x2d75;for(const _0x104925 of _0x344143[_0x176db9(0x2da,0x2d5,0x37f,0x34d)+'on']){if(_0x217400['qClMZ'](_0x217400['DBJle'],_0x176db9(0x261,0x2f4,0x2dc,0x2ad))){if(_0x104925[_0x470883(0x1f5,0x162,0x20f,0x186)]?.[_0x470883(0x1fc,0x2a5,0x177,0x21c)])_0xe8b98f[_0x147040]['content'][_0x176db9(0x312,0x337,0x26f,0x357)]({'type':_0x217400[_0x176db9(0x232,0x18e,0x210,0x200)],'text':_0x104925[_0x470883(0x12a,0xfc,0x168,0x186)][_0x470883(0x27f,0x2b7,0x278,0x21c)]});const _0x4eb5a1=await _0x217400[_0x470883(0x23a,0x1f2,0x240,0x1c5)](getImageFromTurnData,_0x104925[_0x176db9(0x269,0x303,0x2bc,0x2d4)]);if(_0x4eb5a1)_0xe8b98f[_0x147040][_0x470883(0x1b6,0x21a,0x174,0x1ea)][_0x176db9(0x312,0x329,0x370,0x294)]({'type':_0x217400[_0x176db9(0x29e,0x2c4,0x248,0x2ab)],'image_url':{'url':_0x4eb5a1}});_0x147040++;if(_0x104925['model']?.[_0x176db9(0x2ff,0x317,0x286,0x25b)])_0xe8b98f[_0x147040]['content']['push']({'type':_0x217400[_0x176db9(0x232,0x214,0x241,0x23e)],'text':_0x104925[_0x176db9(0x2cf,0x321,0x303,0x251)][_0x470883(0x187,0x1bf,0x21d,0x21c)]});const _0x4dda56=await _0x217400[_0x470883(0x238,0x214,0x1ff,0x1bc)](getImageFromTurnData,_0x104925[_0x470883(0x257,0x253,0x18e,0x1ec)]);if(_0x4dda56)_0xe8b98f[_0x147040][_0x470883(0x21c,0x15a,0x184,0x1ea)][_0x470883(0x1de,0x279,0x2c1,0x22f)]({'type':_0x217400[_0x470883(0x1e7,0x231,0x1ec,0x1bb)],'image_url':{'url':_0x4dda56}});_0x147040++;}else _0x35f84c[_0x176db9(0x287,0x2c6,0x236,0x32a)+'BananaList'+_0x176db9(0x2fd,0x283,0x36a,0x2c0)]&&(_0x35a00e[_0x470883(0x1ed,0x201,0x203,0x1c4)+_0x470883(0x2b3,0x298,0x2b4,0x21a)](_0x33ca3d[_0x470883(0x231,0x185,0x244,0x20f)+_0x176db9(0x325,0x354,0x33d,0x2f6)+'ST'],_0x41348f),_0x30970b[_0x176db9(0x304,0x399,0x337,0x2ba)](_0x1aad81=>{function _0x17c3bf(_0x10346f,_0x4c755c,_0x56f0ea,_0x2fda69){return _0x470883(_0x4c755c,_0x4c755c-0x1d4,_0x56f0ea-0x3d,_0x10346f-0x194);}_0x323942['removeList'+_0x17c3bf(0x3ae,0x37b,0x355,0x42d)](_0x1aad81,_0x4c4d55);}),_0x2187b3[_0x176db9(0x287,0x2be,0x302,0x2b7)+_0x470883(0x1b6,0xf9,0xe4,0x116)+_0x470883(0x196,0x287,0x2a8,0x21a)]=![],_0x217400[_0x176db9(0x2b8,0x2b4,0x224,0x341)](_0x25020a,_0x217400[_0x470883(0x12c,0x14d,0x133,0x151)]));}if(!_0x43d380[_0x176db9(0x24b,0x1cd,0x221,0x26d)](_0x217400[_0x470883(0x170,0xb8,0xcf,0x158)])){const _0x66d6c4=extension_settings[extensionName][_0x470883(0x11a,0x1fe,0x18f,0x174)+_0x470883(0x176,0x162,0x84,0x11d)+'ts']||{};for(const _0xd5c304 in _0x66d6c4){const _0x47a5de=_0x66d6c4[_0xd5c304],_0xdeac93=(_0x47a5de[_0x176db9(0x274,0x2e7,0x2b6,0x2d4)]||'')[_0x470883(0x10c,0x152,0x17c,0x125)]('|')[_0x176db9(0x245,0x1da,0x1ab,0x2b6)](_0x28b52b=>_0x28b52b[_0x470883(0x215,0x23f,0x20a,0x1d0)]()!=='');for(const _0x4b2d41 of _0xdeac93){if(_0x5762e8['toLowerCas'+'e']()[_0x176db9(0x24b,0x235,0x1cc,0x230)](_0x4b2d41[_0x176db9(0x216,0x283,0x272,0x226)+'e']())){if(_0x217400[_0x470883(0x10a,0xf6,0x119,0x138)]!==_0x176db9(0x283,0x1fb,0x200,0x240))_0x217400[_0x176db9(0x2b8,0x2a7,0x309,0x281)](_0x5d5a78,_0x470883(0x18e,0xfa,0x80,0x124)+'库');else{_0x217400[_0x176db9(0x284,0x2ce,0x27c,0x243)](addLog,_0x470883(0x1ba,0x25b,0x2d5,0x249)+_0x176db9(0x30c,0x34f,0x344,0x35c)+_0x176db9(0x337,0x2d1,0x2d0,0x2b9)+_0x470883(0x252,0x21b,0x212,0x24c)+_0x4b2d41+(_0x176db9(0x290,0x241,0x2e4,0x299)+_0x470883(0x1c7,0x217,0x219,0x1be))+_0xd5c304+'\x22.');const _0x43b9a1=_0x47a5de[_0x470883(0x1a5,0x20b,0x19e,0x1f7)+'on'];if(_0x43b9a1){const _0x18f34e=[];if(_0x43b9a1[_0x176db9(0x269,0x1d2,0x2ef,0x293)]&&_0x43b9a1[_0x176db9(0x269,0x28b,0x259,0x2f7)][_0x470883(0x294,0x23a,0x1d0,0x21c)])_0x18f34e[_0x470883(0x248,0x20b,0x2a5,0x22f)]({'type':_0x217400['dvSlz'],'text':_0x43b9a1['user'][_0x470883(0x21b,0x198,0x2a6,0x21c)]});const _0x29605d=await getImageFromTurnData(_0x43b9a1[_0x470883(0x21b,0x100,0x1f5,0x186)]);if(_0x29605d)_0x18f34e[_0x176db9(0x312,0x27c,0x2ae,0x39b)]({'type':_0x217400[_0x176db9(0x29e,0x20d,0x2a1,0x300)],'image_url':{'url':_0x29605d}});if(_0x217400[_0x470883(0xa9,0x111,0x185,0x121)](_0x18f34e[_0x176db9(0x202,0x263,0x21e,0x216)],-0x117f+0x2042*0x1+-0x1*0xec3)){const _0x3b5c5e={};_0x3b5c5e[_0x470883(0x206,0x270,0x276,0x258)]=_0x470883(0x14a,0x140,0x11c,0x186),_0x3b5c5e['content']=_0x18f34e,_0xe8b98f[_0x176db9(0x312,0x2d0,0x2dc,0x284)](_0x3b5c5e);}const _0x575143=[];if(_0x43b9a1['model']&&_0x43b9a1[_0x470883(0x24d,0x1f9,0x288,0x1ec)]['text'])_0x575143[_0x470883(0x1c9,0x2cb,0x28e,0x22f)]({'type':_0x470883(0x297,0x299,0x243,0x21c),'text':_0x43b9a1[_0x470883(0x165,0x23a,0x247,0x1ec)]['text']});const _0x1c99cc=await _0x217400['hmXOU'](getImageFromTurnData,_0x43b9a1[_0x470883(0x15e,0x1e7,0x147,0x1ec)]);if(_0x1c99cc)_0x575143['push']({'type':'image_url','image_url':{'url':_0x1c99cc}});if(_0x217400[_0x470883(0xc3,0x105,0x116,0x161)](_0x575143[_0x176db9(0x202,0x205,0x193,0x243)],0x2509*-0x1+0x18bd+-0x4*-0x313)){const _0x1210df={};_0x1210df[_0x176db9(0x33b,0x2bc,0x36b,0x300)]=_0x217400[_0x176db9(0x2c4,0x294,0x291,0x290)],_0x1210df[_0x176db9(0x2cd,0x304,0x321,0x284)]=_0x575143,_0xe8b98f[_0x176db9(0x312,0x295,0x3a9,0x2f0)](_0x1210df);}}break;}}}}}if(!_0x43d380['includes'](_0x470883(0x23e,0x211,0x2da,0x25a))){if(_0x217400['qClMZ'](_0x217400[_0x470883(0x1c8,0x113,0x100,0x179)],_0x217400[_0x470883(0x163,0x128,0x144,0x179)])){const _0x3d1b25={};_0x3d1b25[_0x176db9(0x310,0x394,0x2b1,0x371)]=_0x176db9(0x2ff,0x35e,0x38d,0x266),_0x3d1b25[_0x470883(0x23a,0x271,0x1ef,0x21c)]=_0x5762e8;const _0x13f1c8={};_0x13f1c8[_0x470883(0x2f9,0x2b2,0x2d3,0x258)]=_0x217400[_0x470883(0x180,0x18a,0x124,0x12e)],_0x13f1c8[_0x470883(0x20c,0x173,0x260,0x1ea)]=[_0x3d1b25],_0xe8b98f[_0x470883(0x2ac,0x26e,0x281,0x22f)](_0x13f1c8);}else{_0x217400[_0x176db9(0x256,0x1ba,0x1c6,0x2ec)](_0x4ab273,_0x176db9(0x20c,0x260,0x191,0x1ac)+_0x470883(0x1f3,0x21f,0x138,0x1b1)+'。');const _0x354749=_0x2f3bb8||'默认',_0x49d8dc={};_0x49d8dc[_0x176db9(0x2da,0x2b5,0x25c,0x2fb)+'on']=[],_0x49d8dc[_0x470883(0x18a,0x1c8,0x9d,0x13a)+'t']='',_0x534db1=_0x355cc4[_0x354749]||_0x49d8dc,_0x217400[_0x470883(0x22e,0x264,0x153,0x1d4)](_0x4e13bc,_0x470883(0x2b8,0x1cc,0x236,0x241)+'用修图预设:\x20\x22'+_0x354749+'\x22');}}else{const _0x4051e6=[],_0x4710aa=_0x217400[_0x470883(0x15e,0x13e,0x135,0x19d)](_0x30f460,_0x5762e8),_0x42b527=[_0x344143['fixedPromp'+'t'],_0x4710aa,_0x344143[_0x176db9(0x338,0x389,0x323,0x300)+_0x470883(0x1c1,0x20f,0x243,0x1a2)]][_0x470883(0xf9,0xe8,0x1e8,0x162)](Boolean)[_0x176db9(0x27e,0x250,0x312,0x1ee)](',\x20'),_0x39bfde={};_0x39bfde['type']=_0x217400[_0x470883(0x1df,0x166,0x191,0x14f)],_0x39bfde['text']=_0x42b527,_0x4051e6[_0x470883(0x23b,0x1fd,0x197,0x22f)](_0x39bfde);if(_0x34b9bb){const _0x58d2d7={};_0x58d2d7[_0x176db9(0x298,0x299,0x31f,0x308)]=_0x34b9bb;const _0x529262={};_0x529262[_0x470883(0x262,0x188,0x271,0x22d)]=_0x217400['rxDch'],_0x529262[_0x176db9(0x21e,0x28e,0x193,0x212)]=_0x58d2d7,_0x4051e6[_0x470883(0x291,0x248,0x22e,0x22f)](_0x529262),_0x217400[_0x470883(0x10b,0x19e,0x18e,0x135)](addLog,_0x470883(0x1a9,0x280,0x23e,0x225)+_0x176db9(0x23e,0x2ba,0x1d2,0x1fd)+'的图片');}const _0x52f281={};_0x52f281[_0x176db9(0x33b,0x306,0x319,0x3bb)]=_0x217400[_0x176db9(0x211,0x192,0x1e3,0x273)],_0x52f281[_0x470883(0x253,0x22c,0x175,0x1ea)]=_0x4051e6,_0xe8b98f['push'](_0x52f281),_0x217400[_0x176db9(0x32b,0x293,0x2bc,0x2c1)](addLog,'[Banana]\x20修'+_0x470883(0x17f,0x1af,0x1f2,0x214)+_0x42b527);}const _0x492a15={};_0x492a15[_0x176db9(0x25f,0x1cc,0x22a,0x1f4)+'o']=_0x5b63bf;const _0x47dc3e={};_0x47dc3e[_0x176db9(0x2e5,0x340,0x2d9,0x2ee)+'g']=_0x492a15,_0x42508d={'model':_0x576886,'messages':_0xe8b98f[_0x176db9(0x245,0x298,0x247,0x244)](_0x51d4ee=>_0x51d4ee['content']['length']>0x8b*0x9+-0x17f5+0x1312),'config':_0x47dc3e},addLog(_0x176db9(0x2ea,0x280,0x26e,0x2c7)+'uilt\x20multi'+_0x176db9(0x2e8,0x26c,0x2c7,0x31a)+_0x470883(0x149,0x17a,0x12d,0x14a)+_0x42508d[_0x470883(0x205,0x205,0x1ef,0x253)][_0x470883(0x148,0x123,0x7f,0x11f)]+'\x20messages.');}}let _0x5af47c=_0x1ef66e['replace'](/\/$/,''),_0x367c81;_0x5af47c[_0x176db9(0x21a,0x1a7,0x22c,0x291)](_0x217400[_0x470883(0x18b,0x181,0x136,0x18b)])||_0x5af47c[_0x470883(0x1a5,0x1d0,0xeb,0x168)](_0x217400[_0x470883(0x16e,0x24b,0x17b,0x1b6)])?_0x367c81=_0x5af47c+_0x8333cf:_0x367c81=_0x217400['hsJEX'](_0x217400[_0x176db9(0x230,0x1ff,0x254,0x2bd)](_0x5af47c,_0x217400[_0x470883(0x17b,0x192,0x14a,0x18b)]),_0x8333cf);_0x367c81=_0x367c81['replace'](/\/v1\/v1\//g,_0x217400[_0x176db9(0x299,0x306,0x22e,0x288)]),_0x217400[_0x470883(0x163,0x184,0x13e,0x167)](addLog,_0x470883(0x184,0x164,0x1a2,0x1f3)+_0x176db9(0x267,0x2e2,0x203,0x29b)+_0x470883(0x166,0x159,0x163,0x176)+_0x367c81);function _0x176db9(_0x422eb9,_0x5a3c91,_0x328b4a,_0x363671){return _0x4e5d(_0x422eb9-0x80,_0x328b4a);}_0x217400[_0x470883(0x10c,0x13c,0x151,0x163)](addLog,_0x470883(0x1ca,0x108,0x206,0x166)+_0x470883(0xd1,0xb4,0x144,0x153)+JSON[_0x176db9(0x278,0x2c4,0x260,0x2f2)](_0x42508d,null,0x9ad*0x2+0x6a6+0x455*-0x6));try{if(_0x217400['YqSUr'](_0x217400['SabdD'],_0x217400[_0x470883(0x18d,0x258,0x23f,0x1e9)]))_0x178c46['removeList'+_0x470883(0x249,0x2a6,0x1b4,0x21a)](_0x503709,_0x5951f0);else{taskQueue[_0x176db9(0x255,0x2ba,0x2b2,0x1b7)+'us'](_0x39d364,_0x217400[_0x176db9(0x2c1,0x22b,0x282,0x2fd)]);const _0x1a19f2=await _0x217400[_0x176db9(0x281,0x2d6,0x1df,0x2c9)](fetch,_0x367c81,{'method':_0x217400[_0x176db9(0x20d,0x1db,0x277,0x273)],'headers':{'Content-Type':_0x217400[_0x470883(0x127,0x228,0x1b8,0x19c)],'Authorization':_0x176db9(0x2e2,0x333,0x2f9,0x335)+_0xad1409},'body':JSON[_0x176db9(0x278,0x285,0x21e,0x203)](_0x42508d)});if(!_0x1a19f2['ok']){const _0x15f6a6=await _0x1a19f2['text']();throw new Error('API\x20reques'+_0x176db9(0x329,0x322,0x3c3,0x353)+'ith\x20status'+'\x20'+_0x1a19f2[_0x176db9(0x260,0x22c,0x216,0x2ca)]+':\x20'+_0x15f6a6);}const _0x2cbffb=await _0x1a19f2[_0x176db9(0x1f7,0x1c2,0x25d,0x223)]();let _0x398755='';const _0x1b7d1f=_0x2cbffb[_0x176db9(0x2ec,0x2db,0x30c,0x320)];if(_0x1b7d1f&&_0x217400[_0x470883(0x1bc,0x1c3,0x27f,0x219)](_0x1b7d1f[_0x176db9(0x202,0x1ac,0x274,0x216)],0x1*-0x1f93+0x1f0e+0x85)){const _0x1bd982=_0x1b7d1f[0x4a7*-0x3+0x9fb+0x3fa][_0x470883(0x15b,0x1da,0x217,0x1b7)]?.['content'];if(Array['isArray'](_0x1bd982))for(const _0x57b8d8 of _0x1bd982){if(_0x217400[_0x470883(0x2a4,0x288,0x1a1,0x230)](_0x57b8d8[_0x470883(0x1e5,0x2b1,0x1e7,0x22d)],_0x217400[_0x176db9(0x29e,0x209,0x268,0x335)])&&_0x57b8d8['image_url']?.[_0x470883(0x123,0x17a,0x110,0x1b5)]){_0x398755=_0x57b8d8[_0x176db9(0x21e,0x2c2,0x231,0x25a)]['url'];break;}}else{if(_0x217400[_0x176db9(0x313,0x2a8,0x29c,0x3a6)](typeof _0x1bd982,_0x217400[_0x470883(0x14c,0x87,0xf1,0x123)])){if(_0x217400[_0x176db9(0x2b4,0x255,0x224,0x263)](_0x470883(0x103,0x14d,0x14f,0x180),_0x217400['ZZAVE'])){const _0x368ce8=/!\[.*?\]\((https?:\/\/[^\s\)]+)\)/,_0x214219=_0x1bd982[_0x176db9(0x1fe,0x1fa,0x1a7,0x16f)](_0x368ce8);if(_0x214219&&_0x214219[0x1628+-0x1eb1+0x88a]){if(_0x217400['FgMjQ']===_0x217400[_0x176db9(0x1fd,0x243,0x198,0x186)])_0x27d7aa[_0x6b1adc][_0x176db9(0x315,0x307,0x297,0x335)][_0x176db9(0x317,0x2c5,0x2a0,0x30d)]=-0xc9a+-0x1d91+-0x1*-0x2a2c,_0x217400['DMhLw'](_0x54904a,_0x176db9(0x2f1,0x2b2,0x293,0x27c)+_0x470883(0x1f3,0x18e,0x187,0x206)+_0x44929e[_0x43794c][_0x176db9(0x315,0x3b0,0x275,0x32b)][_0x470883(0x2b1,0x1fd,0x1ef,0x234)]);else{_0x217400[_0x176db9(0x203,0x22c,0x1ca,0x18c)](addLog,_0x217400[_0x470883(0x1f9,0x2ca,0x295,0x243)]);const _0x555d69=_0x214219[0x23f3*-0x1+-0x1*0x575+0x1*0x2969];_0x217400[_0x176db9(0x306,0x3a1,0x281,0x2d4)](addLog,_0x470883(0x2b3,0x280,0x23d,0x236)+_0x176db9(0x2aa,0x2a3,0x238,0x27b)+_0x470883(0x287,0x2d0,0x225,0x22c)+_0x555d69);try{const _0xeddefb=await _0x217400[_0x470883(0x182,0x147,0x15e,0x178)](fetch,_0x555d69);if(!_0xeddefb['ok']){if(_0x217400[_0x470883(0xf0,0x1fc,0x183,0x16d)](_0x470883(0x1e1,0xea,0x165,0x156),_0x217400[_0x470883(0x212,0x248,0x16b,0x1d6)]))throw new Error('Failed\x20to\x20'+_0x176db9(0x289,0x1ec,0x214,0x1ef)+'e:\x20'+_0xeddefb[_0x176db9(0x260,0x2ee,0x29d,0x234)]);else{if(_0x5c446e){const _0x122569=_0x1128e1[_0x176db9(0x2c9,0x259,0x22e,0x259)](_0x1b005d,arguments);return _0x2cc2ab=null,_0x122569;}}}const _0x3dc1fb=await _0xeddefb['blob'](),_0x2f4e6b=await new Promise((_0x4330c9,_0x3c9ac1)=>{const _0x9b2b16=new FileReader();_0x9b2b16[_0x1761e7(-0xa5,-0x1a4,-0x19b,-0x101)]=()=>_0x4330c9(_0x9b2b16[_0x1761e7(-0x80,-0xb9,0x36,-0x61)]);function _0x5d4e95(_0x3393f5,_0x30402e,_0x433230,_0x262394){return _0x176db9(_0x30402e- -0xbb,_0x30402e-0x1ec,_0x262394,_0x262394-0x1e1);}function _0x1761e7(_0x549a58,_0x21e6a9,_0x2d3de5,_0x5c14eb){return _0x176db9(_0x5c14eb- -0x32b,_0x21e6a9-0x8c,_0x2d3de5,_0x5c14eb-0xd2);}_0x9b2b16[_0x5d4e95(0x18f,0x1a7,0x13c,0x1ca)]=_0x3c9ac1,_0x9b2b16[_0x5d4e95(0x200,0x21e,0x28f,0x20f)+_0x5d4e95(0x223,0x1d3,0x1c0,0x12d)](_0x3dc1fb);});_0x398755=_0x2f4e6b,_0x217400[_0x176db9(0x2a6,0x238,0x2f0,0x2f0)](addLog,_0x217400[_0x176db9(0x243,0x29a,0x222,0x26d)]);}catch(_0x32d0d9){_0x217400[_0x470883(0x12c,0x8d,0xa4,0x12f)](_0x217400['bRyup'],_0x217400[_0x470883(0x191,0x1a5,0x1e6,0x164)])?(_0x217400[_0x176db9(0x331,0x322,0x2f2,0x305)](addLog,_0x176db9(0x32c,0x367,0x32f,0x2d4)+_0x176db9(0x2ac,0x20e,0x2a3,0x255)+'etch\x20Markd'+_0x470883(0x2c7,0x1ff,0x1a7,0x24b)+'\x20'+_0x32d0d9['message']),_0x398755=_0x555d69,_0x217400['qYCBo'](addLog,_0x217400[_0x176db9(0x222,0x22b,0x1e3,0x26f)])):_0x1acbe5=_0x217400[_0x176db9(0x230,0x199,0x23d,0x205)](_0x464c14+_0x217400[_0x176db9(0x2b6,0x2a6,0x24b,0x2e9)],_0x217400[_0x470883(0x1ea,0x1f5,0x14a,0x173)](_0x1ac1e8,_0x180336[_0x176db9(0x2d8,0x241,0x26c,0x319)+_0x4479c1+_0x176db9(0x21f,0x215,0x188,0x186)]));}}}else _0x217400[_0x470883(0x142,0xe0,0xba,0x14c)]===_0x176db9(0x318,0x288,0x395,0x382)?_0x2ccd71=_0x3cff9b[_0x176db9(0x27b,0x234,0x30f,0x2f5)]('{修图}',''):_0x217400[_0x176db9(0x246,0x1e3,0x276,0x1e8)](addLog,_0x217400[_0x176db9(0x27a,0x2ab,0x2d8,0x2ad)]);}else{const _0x4ca878={};_0x4ca878[_0x470883(0x27d,0x226,0x2da,0x258)]=_0x470883(0x124,0x210,0xf9,0x169),_0x4ca878[_0x470883(0x28c,0x247,0x1e5,0x1ea)]=_0x124a68,_0x46728b[_0x176db9(0x312,0x2da,0x2a7,0x2f6)](_0x4ca878);}}}}if(!_0x398755){if(_0x217400[_0x470883(0x231,0x168,0x1d9,0x1fe)]!==_0x217400[_0x470883(0x1d6,0x143,0x187,0x1c0)])throw new Error(_0x176db9(0x2cb,0x307,0x285,0x2d5)+'se\x20did\x20not'+_0x176db9(0x30a,0x2a9,0x342,0x289)+_0x176db9(0x271,0x226,0x2ff,0x218)+_0x176db9(0x2b0,0x347,0x30a,0x34d)+'t');else return _0x1f7f22['image'];}addLog(_0x217400['FAhZT']),taskQueue['completeTa'+'sk'](_0x39d364,!![]);const _0x202e7c={};return _0x202e7c['image']=_0x398755,_0x202e7c[_0x176db9(0x2e7,0x32c,0x26b,0x36b)]=_0x192c38||'',_0x202e7c;}}catch(_0x3ab486){addLog(_0x176db9(0x32c,0x294,0x399,0x35b)+_0x176db9(0x302,0x26a,0x26b,0x37e)+':\x20'+_0x3ab486['message']),console['error'](_0x217400[_0x176db9(0x223,0x184,0x1ef,0x278)],_0x3ab486),taskQueue[_0x176db9(0x28c,0x27a,0x2e3,0x25d)+'sk'](_0x39d364,![]);throw _0x3ab486;}}function _0x1786(){const _0x5c7b2e=['rwDtue8','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','C3bSAxq','EsbJB252zxj0zq','l3yX','D2L0AcbWCM9TCa','w0jHBMfUyv0G5zcV','uxbxywK','y2vor2O','5BYa5AEliejHBMfUyEEuNW','A0jwzvu','q3j3yxi','EgrpC3u','DLj5tgS','C1bXwwy','BNnLigzVCIbjra','Dg9mB3DLCKnHCW','qKTsvMW','uLrOzue','CgjxBhy','zw5KC1DPDgG','thruAxa','ywrKvgfZAW','zML4zwrqCM9TCa','Aw1Hz2vFDxjS','ifbYB21WDa','t2j3wwS','uejuwNu','uwnkB3m','rNvqvfq','rvvfwLq','Ag1yt1u','CeH4tei','ue9tva','z2uGzM9YBwf0la','l3yXyMv0ys9TBW','B25SB2fKzw5K','lcdPQ5JLUQyGlsa','D0DvDhu','B2fKihDPDgGG','zxnWB25ZzsbJBW','ChDoDhe','Bvbjyw4','BvHyquu','zhztBhO','sgrlDK0','vu54Auu','C3qGkeLeoIa','yxLSB2fKoIa','qLLkrwO','DcbvuKWGyxmGzG','Ew9Xu1y','Dg9tDhjPBMC','CwLywgy','mtjOD0LOvgO','zw1PDa','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','C3nMDwXSEs4','igv4DhjHy3rPBG','BwfNzsbNzw5LCG','tuvcCw4','D0XQq3O','we9eChu','zMLSDgvY','CKnRAK8','yLj5Dxa','CvPgD0K','w0jHBMfUyv0Gua','y1fHD0u','Aw5JBhvKzxm','yxnZAxn0yw50','r0H4ufG','DLDIrNy','AwDJtgG','wuLyB2S','ELfTDNO','lI4U','sefzwxa','kerPDMLKzv9YBW','DxbKyxrLu3rHDa','txLYuKi','yMfUyw5Hq2HHCG','5yMn572U5yMn','DwvZDcb0BZOG','qMfUyw5H5l+U5zU+5QIH5BYp','t0Dnrvm','CNbJu3G','C3rHCNrZv2L0Aa','vMrfyMO','yxnWzwn0uMf0Aq','C3rHDhvZ','EwLXzKu','B25LCNjVCG','EMTtExC','mJmXseXyzuHO','A3fKC2q','55sO5lQo55sF5OIq55QevgfNoIa','zw5KAw5NihjLCq','Bw9KzwW6ia','DxnLCG','zcbnyxjRzg93BG','CgfYyw1LDgvYCW','AK12DNi','C3vIC3rYAw5N','tvjeCw4','zgn6ALi','55sO5l+U5zU+6Ake6k6+oIaI','BwfNzsbPBIbpCa','CgnOz00','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','DhjPz2DLCNm','yMjeD1i','BI9QC29U','B3iGChjVBxb0oG','C3rYAw5NAwz5','rur4BMm','q0vABNe','CMvWBgfJzufSBa','BIbWyxLSB2fKia','Bur5Aue','AM9PBG','ufruBem','qMHbrgS','wMjRrue','C1P5Dui','uNzWCuq','B3rjC2O','Bxb0','r09sCgm','Aw5PDgLHBgL6zq','zw5LCMf0Aw9Uia','zMv0y2GGAw1HzW','C3z4tNe','BMDfuw8','y29TCgXLDgvuyq','u1LYz3q','vvjm','5l+U5zU+5OYh5lUKoIa','iIbMCM9TihbYzq','C2LUzYbKAxjLyW','zxjYB3i','shHws24','55sO5lQgihVKV67LM759ioAGH+IVHG','swrwrhi','DgfYDgLUzYbPBq','yvvwu3m','DxjS','rxHzt1e','BwvZC2fNzq','CMTKB3DUigLTyq','ChjVBxb0','igLTywDLihrVia','CNHey2G','wvHxqvK','u2nLBMuGq29TCa','C2v0ici','Dw1uzfK','AvHlzLa','wxzpAxe','Aw1Hz2veyxrH','A2vhuu4','CMvTB3zLtgLZDa','Dgn6B0i','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','yxjRzg93BIbPBq','Aw1Hz2vU','ywLSzwqGDg8GzG','rLfYrNO','Bvz1u28','zgvSCY8','zw5bssbMB3jTyq','r1DrAMe','tufhrv9srvnqtW','DhjPBq','CunStvO','DwLSDcbjBwfNzq','s1LOCgW','DfrZy1y','uNfbrxq','uvzOte4','C2vHCMnO','C2fTCgXLq291BG','EvzOuvC','wMDutLy','Ee5bwxa','C3vJy2vZCW','kcGOlISPkYKRkq','r3PHvMG','mJGWndCWnen6v3HMBq','5PYa5zco572U','AhbLwg4','ieLeia','BwL0DgvKihn1yW','ywDLigDLBMvYyq','yxrLzcbZDwnJzq','yxbWBhK','CMvZDwX0','qvbjihjLC3bVBG','zhfhqMu','y29UDgvUDa','DcbVBMX5lcbUBW','Bw9KzwW','5zco572U5zco','5lIT55QeihbYB21WDooaGG','rfLxr0m','vxbotxy','5Q2J6z2I5O+q56s66k+noIa','yu9Kswy','w0jHBMfUyv0GuW','CKLXsgO','q2HHCMfJDgvYia','CMvHzefZrgf0yq','y29UDMvYC2f0Aq','u3Dlyui','Aw1Hz2vjza','qwnxweS','yMfZzty0lG','zxrJAcbnyxjRza','w0jHBMfUyv0G55sF','uuvevgS','qMvHCMvYia','zwnLAxzLzcbPBq','C3rYAw5N','Aw1Hz2vdB25MAq','wxfmDfu','y2HHBMDL','Bw9KywWGCgf5Ba','CIbWCM9TChq6ia','w0jHBMfUyv0GqG','DgLVBIbYzxf1zq','y2HVAwnLCW','ntm5mZaWm2vbrLnwAG','ywXSyMfJAY4','y1HZyMO','s0Xiveq','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','r0vorvjbvevFsq','mtbcEhj2qvO','B3nPDgLVBG','y2XPzw50','rK13z1O','5zU+5QIH5BYp77YA5OYh5lUKid0G','z2PxCgy','zKvLz2i','y29UC3rYDwn0BW','DgLVBIb3AxrOia','s0PTrNa','zw5LCG','y2zNAw1NxW','Dgv4Da','vNf3CfC','rM5Yy2S','zxrJAcbLCNjVCG','vgr6t2u','zM9YrwfJAa','5yMn572U5zco','re1OthC','BNDvEwC','w0jHBMfUyv0G5l+U','CLrfwMq','ignVBNrHAw4GAq','nZqWme5fwxnUEG','B3vUzcbTyxrJAa','AhnkrvG','BNrHAw5ZihrLEa','ywDLifvstdOG','DhLWzq','Bw9Kzq','ChvZAa','ALnszfy','zxrLy3rLzcbnyq','yMfUyw5H','Aw1Hz2u','y2LZAhu','txzcCvy','w0jHBMfUyv0Gtq','n2nMt3H0Ca','sgPZDxi','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','quLuv00','mJC4ndi0y1LOCNP0','vejpsxa','CeLRDfa','v3bdww4','zvHpAgi','w0jHBMfUyv0G5l2/','tufhrv9srvfvrq','AK5mEwu','yMfUyw5HioEuN+wBVUs6IW','nti1mtu1wxjsDhfj','DcbMywLSzwqGDW','w0jHBMfUyv0GuG','zwLtqNK','w0jHBMfUyv0GrG','yMvkC0O','B3DUigLTywDLoG','CIaI','y2fJAgu','seTqy1O','w0jHBMfUyv0Gsq','w0jHBMfUyv0Gvq','wezlBwO','Aw5ZDgfUy2vZ','BwvZC2fNzxm','Aw5NihrYAwDNzq','Cg9ZDgzPEfbYBW','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','rMfPBgvKihrVia','CM9Szq','qLPSDeG','E+s/RUwBVN0','tLnf','u1HPEwu','l3yXlW','qKfoqu5b','ode2ody4sLLotMfR','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','ANnVBG','zgf0ytPPBwfNzq','qMfUyw5HtgLZDa','AKXyC3a','ihWG','nZG1mJG2tgrdsM9k','Cu1AtKu','Bwf0y2G','y2vZCYbYzxnWBW','ywn0zxjqCMvZzq','igLTywDLlG','BgvUz3rO','CvLdqM8','B1zmwhG','D0TpC2m'];_0x1786=function(){return _0x5c7b2e;};return _0x1786();}export async function bananaGenerate(_0x155ffe){const _0x40b4d5={'HdKvM':function(_0x1d52a4,_0x49ad26){return _0x1d52a4+_0x49ad26;},'DYWGC':'(((.+)+)+)'+'+$','PAVQl':function(_0x1a82c3,_0x17a4e3){return _0x1a82c3(_0x17a4e3);},'gjWpf':function(_0x358cc1,_0x175ac4){return _0x358cc1+_0x175ac4;},'HxVKn':function(_0x4a730f,_0xfae3fe){return _0x4a730f(_0xfae3fe);},'hJmIK':_0x21ba28(0x556,0x4cc,0x4d4,0x5ab)+_0x195f79(-0x1ae,-0x159,-0x179,-0x23e),'BYJEj':_0x21ba28(0x4da,0x551,0x53b,0x55e)+_0x21ba28(0x52e,0x52f,0x4e3,0x5c5),'eXOhb':function(_0x3a696e,_0x40610){return _0x3a696e+_0x40610;},'GHxPX':function(_0x35adf6){return _0x35adf6();},'pHxLB':function(_0x330d01,_0x2e539a){return _0x330d01(_0x2e539a);},'VqwpW':'VITlt','EUEZT':'CRqCJ','wGUtu':'{修图}','QLcsN':function(_0x7c1a31,_0x2d10a3){return _0x7c1a31!==_0x2d10a3;},'ynpyi':_0x21ba28(0x44a,0x3c7,0x46c,0x499),'PBTZu':_0x195f79(-0x1af,-0x256,-0x1cb,-0x1f5),'TPxaj':function(_0x10237b,_0x1ca736){return _0x10237b(_0x1ca736);},'BZltH':function(_0x1e1412,_0x33ccd9){return _0x1e1412!=_0x33ccd9;},'ZgTNV':function(_0x1e064c,_0x2ff62a){return _0x1e064c===_0x2ff62a;},'XFKmj':_0x21ba28(0x4c7,0x475,0x4b4,0x432),'BKRVl':function(_0x138019,_0x4460d3,_0x1228ba,_0x23879b){return _0x138019(_0x4460d3,_0x1228ba,_0x23879b);},'GORpc':function(_0x5a6cad,_0x452d1a){return _0x5a6cad(_0x452d1a);},'igcLh':function(_0x3e35e2,_0x539dbd){return _0x3e35e2+_0x539dbd;},'dczjR':function(_0x341e9f,_0x4d6352){return _0x341e9f(_0x4d6352);},'tzKou':function(_0x3d30d5,_0x174254){return _0x3d30d5(_0x174254);},'TBOIp':'aLcXy','nwUyg':function(_0x445201,_0x1ca4bc){return _0x445201!==_0x1ca4bc;},'GMaTI':'CBxLO','xNAYp':'YEEEX','jMvvr':function(_0x5dc29f,_0x4a50e3){return _0x5dc29f(_0x4a50e3);}};_0x40b4d5[_0x195f79(-0x1d4,-0x213,-0x1fd,-0x207)](clearLog);function _0x21ba28(_0x39b283,_0xc2fafa,_0x47fc10,_0x56e7fe){return _0x4e5d(_0x39b283-0x2ba,_0x56e7fe);}let {id:_0x557558,prompt:_0x41d2a0,width:_0x38c154,height:_0x5007dc,change:_0x5eea63,retouchPrompt:_0x324996,retouchImage:_0x37d8f2}=_0x155ffe;_0x40b4d5[_0x195f79(-0x1fb,-0x1b6,-0x1cb,-0x197)](addLog,_0x21ba28(0x564,0x5dd,0x578,0x55a)+_0x21ba28(0x51d,0x549,0x5c3,0x51b)+_0x21ba28(0x501,0x4db,0x595,0x52b)+_0x21ba28(0x525,0x4e9,0x4e4,0x4a4)+_0x21ba28(0x46f,0x506,0x49e,0x4a0)+_0x557558+')');let _0x3380c2='';_0x5eea63?_0x40b4d5[_0x195f79(-0x121,-0x96,-0x119,-0x1a3)]!==_0x40b4d5[_0x21ba28(0x45e,0x3e8,0x44e,0x433)]?_0x3380c2=_0x5eea63[_0x195f79(-0x1a6,-0x243,-0x139,-0x22d)](_0x40b4d5[_0x21ba28(0x466,0x466,0x41b,0x415)],''):_0x457b41=_0x40b4d5[_0x21ba28(0x46d,0x3e1,0x487,0x3da)](_0x5246b7,_0x5b861a):_0x3380c2=_0x41d2a0;if(_0x5eea63&&_0x5eea63['includes'](_0x40b4d5['wGUtu'])){if(_0x40b4d5['QLcsN'](_0x40b4d5['ynpyi'],_0x40b4d5[_0x21ba28(0x45b,0x3e3,0x49e,0x498)])){addLog(_0x195f79(-0x1c7,-0x250,-0x1a6,-0x267)+'启动');if(_0x324996)addLog(_0x21ba28(0x4c9,0x4da,0x4e0,0x4fe)+_0x324996);if(_0x37d8f2)_0x40b4d5['TPxaj'](addLog,'修图图片:\x20[已提供'+']');}else return _0x4e8a30[_0x195f79(-0x1e7,-0x210,-0x277,-0x197)]()[_0x195f79(-0x167,-0x151,-0xda,-0x13e)](kNAeug[_0x195f79(-0x14f,-0x1ef,-0x128,-0x160)])['toString']()[_0x21ba28(0x534,0x5d0,0x567,0x48f)+'r'](_0x281d18)[_0x195f79(-0x167,-0x1cd,-0x1fd,-0x106)](kNAeug[_0x21ba28(0x50c,0x53c,0x4de,0x559)]);}function _0x195f79(_0x520a77,_0x5b93be,_0x457272,_0x329068){return _0x4e5d(_0x520a77- -0x3a1,_0x329068);}try{const {image:_0x4297af,change:_0x4504ea}=await generateBananaImage({'prompt':_0x41d2a0,'width':_0x38c154,'height':_0x5007dc,'change':_0x5eea63,'retouchPrompt':_0x324996,'retouchImage':_0x37d8f2});if(_0x40b4d5[_0x195f79(-0xe5,-0xe2,-0x16f,-0x154)](extension_settings[extensionName][_0x195f79(-0xf1,-0x126,-0x168,-0x178)],'0')){if(_0x40b4d5[_0x21ba28(0x4f7,0x588,0x4be,0x482)](_0x40b4d5[_0x21ba28(0x56e,0x54b,0x5f2,0x54d)],_0x195f79(-0x194,-0x154,-0xf2,-0x1ac))){const _0x57c661={};_0x57c661['change']=_0x3380c2,await _0x40b4d5[_0x21ba28(0x451,0x4cf,0x424,0x3e6)](setItemImg,_0x41d2a0,_0x4297af,_0x57c661),_0x40b4d5[_0x21ba28(0x4c0,0x498,0x420,0x4f6)](addLog,'图像已存入数据库\x20f'+_0x21ba28(0x4b1,0x41a,0x513,0x505)+'\x20'+_0x41d2a0),extension_settings[extensionName][_0x21ba28(0x54f,0x4ba,0x500,0x4f3)]['cishu']?(extension_settings[extensionName][_0x21ba28(0x54f,0x555,0x515,0x4b9)][_0x195f79(-0x10a,-0xe2,-0x164,-0xf8)]=_0x40b4d5[_0x195f79(-0x1d2,-0x1cc,-0x209,-0x258)](extension_settings[extensionName][_0x21ba28(0x54f,0x511,0x5eb,0x562)]['cishu'],0x1dab+-0xd4a+-0x1060),_0x40b4d5[_0x195f79(-0x1b2,-0x131,-0x257,-0x216)](addLog,_0x21ba28(0x52b,0x4f0,0x4d8,0x5cb)+'r\x20prompt:\x20'+extension_settings[extensionName]['banana'][_0x195f79(-0x10a,-0x1ab,-0x173,-0xe7)])):(extension_settings[extensionName][_0x21ba28(0x54f,0x530,0x4c2,0x55b)][_0x195f79(-0x10a,-0xae,-0xa0,-0xe7)]=0xdce+0x10a5+-0x1e72,_0x40b4d5['tzKou'](addLog,_0x195f79(-0x130,-0xcc,-0x1af,-0xf1)+_0x21ba28(0x523,0x49e,0x4f2,0x56e)+extension_settings[extensionName][_0x21ba28(0x54f,0x57a,0x542,0x522)][_0x195f79(-0x10a,-0x172,-0xca,-0xa4)]));}else _0x40b4d5['PAVQl'](_0xcc2189,_0x195f79(-0xe8,-0xae,-0x16e,-0xec)+_0x195f79(-0x150,-0xdc,-0xdb,-0xd9)),_0xc6b9c4=_0x315af8;}else _0x40b4d5['ZgTNV'](_0x195f79(-0x1f0,-0x18d,-0x1d1,-0x237),_0x40b4d5[_0x21ba28(0x55a,0x4cc,0x58e,0x5de)])?_0x165ed0=_0x40b4d5[_0x21ba28(0x46d,0x459,0x4c0,0x422)](_0x40b4d5[_0x195f79(-0x129,-0xa7,-0x1ce,-0x98)](_0x3daad0,_0x21ba28(0x444,0x3d8,0x3b3,0x483)),_0x1a5f9a):_0x40b4d5[_0x21ba28(0x4cd,0x42f,0x483,0x51c)](addLog,_0x21ba28(0x441,0x3ce,0x4cc,0x43e)+'库');const _0x3a1058={};_0x3a1058['id']=_0x557558,_0x3a1058['success']=!![],_0x3a1058[_0x195f79(-0x17c,-0x1fa,-0x1e1,-0x1da)]=_0x4297af,_0x3a1058[_0x195f79(-0x185,-0x1da,-0x1ba,-0xec)]=_0x41d2a0,_0x3a1058[_0x195f79(-0x13a,-0xd2,-0x18a,-0xb4)]=_0x3380c2,eventSource[_0x195f79(-0x1e4,-0x1c1,-0x20e,-0x206)](EventType['GENERATE_I'+_0x21ba28(0x4ec,0x4b8,0x518,0x4a0)+_0x195f79(-0xe3,-0x16e,-0x3d,-0xb1)],_0x3a1058),addLog('[Banana]\x20E'+_0x21ba28(0x500,0x55d,0x580,0x47f)+_0x21ba28(0x439,0x3c1,0x4d6,0x4a1)+'nse\x20for\x20ID'+':\x20'+_0x557558);}catch(_0x36f15d){if(_0x40b4d5[_0x21ba28(0x541,0x522,0x4d1,0x4fa)](_0x40b4d5['GMaTI'],_0x40b4d5[_0x195f79(-0x163,-0x207,-0x13f,-0x1fd)])){const _0x5cd947='[Banana]\x20G'+_0x195f79(-0x199,-0x135,-0x111,-0x1d4)+'failed\x20for'+_0x195f79(-0x15c,-0xea,-0x1ea,-0x11d)+_0x557558+':\x20'+_0x36f15d[_0x21ba28(0x4d4,0x52c,0x45c,0x452)];_0x40b4d5[_0x21ba28(0x4a6,0x463,0x4c0,0x52b)](addLog,_0x5cd947),console['error'](_0x5cd947);const _0x106b54={};_0x106b54['id']=_0x557558,_0x106b54[_0x21ba28(0x4f9,0x4a7,0x487,0x466)]=![],_0x106b54[_0x21ba28(0x4cc,0x4de,0x53c,0x46f)]=_0x36f15d[_0x195f79(-0x187,-0x1f5,-0x1aa,-0x139)],_0x106b54[_0x195f79(-0x185,-0x20b,-0x17e,-0x102)]=_0x41d2a0,eventSource[_0x195f79(-0x1e4,-0x277,-0x145,-0x223)](EventType[_0x195f79(-0x12f,-0x1b0,-0x1ac,-0xca)+_0x195f79(-0x16f,-0x1ff,-0x137,-0x1a2)+'NSE'],_0x106b54),_0x40b4d5[_0x21ba28(0x4c0,0x4bb,0x46e,0x518)](addLog,'[Banana]\x20E'+'mitted\x20fai'+'lure\x20respo'+_0x195f79(-0x20c,-0x2a4,-0x250,-0x18f)+':\x20'+_0x557558);}else{_0x40b4d5['HxVKn'](_0x2bb4b2,_0x40b4d5['hJmIK']),_0x5f2555=_0x3f0352(_0x475aa5),_0x39eeac=_0x2fdebf[_0x40b4d5[_0x195f79(-0x1ea,-0x177,-0x208,-0x1b7)]];for(let _0x526ea1=-0x1*-0x2144+0x718*0x1+0x1*-0x285b;_0x526ea1<=0x5*-0x199+0x1*-0x1268+0x1*0x1a69;_0x526ea1++){_0x4e22a0['Character\x20'+_0x526ea1+_0x21ba28(0x459,0x3d2,0x43f,0x48b)]&&(_0x3b9323=_0x40b4d5[_0x21ba28(0x55d,0x5eb,0x54c,0x5cf)](_0x20cef8,',\x20')+_0x1e4aff[_0x195f79(-0x149,-0x18b,-0xd0,-0xdf)+_0x526ea1+_0x21ba28(0x459,0x4cd,0x469,0x4f8)]);}}}}function initializeBananaListener(){const _0x565b61={'UCkDk':function(_0x5d4e73,_0x195992){return _0x5d4e73(_0x195992);}};eventSource['on'](EventType['GENERATE_I'+_0x5d2898(0x27a,0x307,0x2c0,0x2e2)+'ST'],bananaGenerate);function _0x5ec416(_0x286b92,_0x16e5ca,_0x3a83bb,_0x329110){return _0x4e5d(_0x329110-0x88,_0x3a83bb);}function _0x5d2898(_0x134fee,_0x28d809,_0x5ede7d,_0x78c308){return _0x4e5d(_0x5ede7d-0x1b,_0x134fee);}_0x565b61['UCkDk'](addLog,_0x5d2898(0x2f7,0x30a,0x2c2,0x28d)+'件监听器已初始化。');}export async function replaceWithBanana(){function _0x30edf3(_0x2a145c,_0xc91479,_0x2bd66c,_0x5f4e25){return _0x4e5d(_0x5f4e25-0x267,_0xc91479);}const _0x5c1cc3={'FuMsi':function(_0x3a68c2,_0x2012c0){return _0x3a68c2==_0x2012c0;},'beJsJ':_0x30edf3(0x4da,0x4b3,0x55a,0x4fc),'zQmvz':function(_0x1f6743){return _0x1f6743();},'yVhQW':function(_0x3ca46c,_0xd7cec6){return _0x3ca46c(_0xd7cec6);}};function _0x1fe1e5(_0x485a47,_0x39e4ae,_0x1531c1,_0x17380c){return _0x4e5d(_0x39e4ae-0x2e0,_0x17380c);}_0x5c1cc3['FuMsi'](extension_settings[extensionName][_0x1fe1e5(0x50c,0x571,0x574,0x55f)],_0x5c1cc3[_0x30edf3(0x489,0x56b,0x595,0x514)])?(!window[_0x1fe1e5(0x516,0x4e7,0x561,0x467)+'BananaList'+'ener']&&(window[_0x30edf3(0x3fc,0x43f,0x3f9,0x46e)+'BananaList'+'ener']=!![],initializeBananaListener()),_0x5c1cc3[_0x1fe1e5(0x4fb,0x4b1,0x449,0x483)](initializeImageProcessing)):window[_0x30edf3(0x3eb,0x4f7,0x4d9,0x46e)+'BananaList'+_0x1fe1e5(0x56c,0x55d,0x5e2,0x55e)]&&(eventSource[_0x1fe1e5(0x472,0x507,0x469,0x4a0)+_0x30edf3(0x49b,0x533,0x585,0x4e4)](EventType[_0x1fe1e5(0x515,0x552,0x562,0x53a)+_0x30edf3(0x4d8,0x540,0x47a,0x50c)+'ST'],bananaGenerate),LEGACY_EVENT_NAMES['forEach'](_0x38e130=>{function _0x4f689f(_0x5639cd,_0x4d0840,_0x2b39a1,_0x372b48){return _0x30edf3(_0x5639cd-0xe1,_0x4d0840,_0x2b39a1-0x136,_0x372b48- -0x9f);}function _0x239409(_0x3ced95,_0x1aa1df,_0x15cc86,_0x2d3424){return _0x1fe1e5(_0x3ced95-0x1d9,_0x15cc86- -0x636,_0x15cc86-0x9b,_0x1aa1df);}eventSource[_0x4f689f(0x367,0x36e,0x359,0x3ef)+_0x239409(-0x149,-0x91,-0xd9,-0xd5)](_0x38e130,bananaGenerate);}),window['initialize'+_0x1fe1e5(0x4d3,0x459,0x3b2,0x4f3)+_0x30edf3(0x567,0x569,0x577,0x4e4)]=![],_0x5c1cc3[_0x1fe1e5(0x4f0,0x51c,0x47a,0x48d)](addLog,'[Banana]\x20生'+_0x30edf3(0x354,0x483,0x368,0x3dd)));}