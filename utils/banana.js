function _0x4ff7(_0xdd2078,_0x51b7c4){_0xdd2078=_0xdd2078-(0xf8e+0xb49*0x3+-0x3012);const _0xe381af=_0x2f37();let _0x1e88d4=_0xe381af[_0xdd2078];if(_0x4ff7['jGuzCz']===undefined){var _0x44f244=function(_0x145987){const _0x36f623='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xd0ef61='',_0x52dce3='',_0x47e14d=_0xd0ef61+_0x44f244;for(let _0x36d3a9=0xd39*0x2+0x1*-0xbdf+-0xe93*0x1,_0x599e4f,_0x4d5496,_0x3fcb53=-0xa2f+0x1b49+-0x16*0xc7;_0x4d5496=_0x145987['charAt'](_0x3fcb53++);~_0x4d5496&&(_0x599e4f=_0x36d3a9%(0x3b*-0x8b+-0x571*-0x6+0x1*-0x99)?_0x599e4f*(-0x315+0x1486+-0x1131)+_0x4d5496:_0x4d5496,_0x36d3a9++%(-0x1d*-0xd6+0x24d3+0x3d0d*-0x1))?_0xd0ef61+=_0x47e14d['charCodeAt'](_0x3fcb53+(-0x7fb+0xb0b*0x1+0x81*-0x6))-(0x17a0+-0xb*-0x56+0x184*-0x12)!==-0xc70+-0x1*0x2384+0x2ff4?String['fromCharCode'](0x1680+0x394+-0x1915&_0x599e4f>>(-(-0x13d8+0x1*-0xaf3+0x1ecd)*_0x36d3a9&0x1a76+0x177d+-0x1*0x31ed)):_0x36d3a9:0x2187+0x1788+-0x390f){_0x4d5496=_0x36f623['indexOf'](_0x4d5496);}for(let _0x72f405=0x3*0x4b8+0x1fe6+-0x2e0e,_0x1712e0=_0xd0ef61['length'];_0x72f405<_0x1712e0;_0x72f405++){_0x52dce3+='%'+('00'+_0xd0ef61['charCodeAt'](_0x72f405)['toString'](-0x29*0xbb+-0x10e8+0x1*0x2eeb))['slice'](-(0x1d53+0x15bd+0x1*-0x330e));}return decodeURIComponent(_0x52dce3);};_0x4ff7['DJWCwf']=_0x44f244,_0x4ff7['BhTnSX']={},_0x4ff7['jGuzCz']=!![];}const _0x2e4842=_0xe381af[-0x1*-0x634+0xaba+0x16*-0xc5],_0x43cce3=_0xdd2078+_0x2e4842,_0x5d6e8=_0x4ff7['BhTnSX'][_0x43cce3];if(!_0x5d6e8){const _0x4af4b9=function(_0x4861a9){this['PFfhaP']=_0x4861a9,this['rOKLki']=[-0x19b*0x8+0x1e*0xe+0xb35,-0x1*-0x26ba+-0xa5b+0x10d*-0x1b,0x1*0x1381+0x1fe0+0x3361*-0x1],this['uaJILc']=function(){return'newState';},this['juhdsr']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['smMzvC']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4af4b9['prototype']['KorsNP']=function(){const _0x51ee8c=new RegExp(this['juhdsr']+this['smMzvC']),_0x29da46=_0x51ee8c['test'](this['uaJILc']['toString']())?--this['rOKLki'][0x33d+0x12eb+-0x1627*0x1]:--this['rOKLki'][-0x1cd1+-0x379*-0x3+0x1266];return this['NBaiVu'](_0x29da46);},_0x4af4b9['prototype']['NBaiVu']=function(_0x1f4089){if(!Boolean(~_0x1f4089))return _0x1f4089;return this['YHeRyV'](this['PFfhaP']);},_0x4af4b9['prototype']['YHeRyV']=function(_0x332a03){for(let _0x183ee9=-0x63*-0xb+-0x22dd+0x1e9c,_0x150883=this['rOKLki']['length'];_0x183ee9<_0x150883;_0x183ee9++){this['rOKLki']['push'](Math['round'](Math['random']())),_0x150883=this['rOKLki']['length'];}return _0x332a03(this['rOKLki'][0x9b*-0x30+0xc*-0x242+-0x18*-0x257]);},new _0x4af4b9(_0x4ff7)['KorsNP'](),_0x1e88d4=_0x4ff7['DJWCwf'](_0x1e88d4),_0x4ff7['BhTnSX'][_0x43cce3]=_0x1e88d4;}else _0x1e88d4=_0x5d6e8;return _0x1e88d4;}(function(_0x6b8a6f,_0x32dc34){function _0x59d06d(_0x4040a4,_0x11b954,_0x2f70e9,_0x21e098){return _0x4ff7(_0x4040a4-0x70,_0x11b954);}const _0x197ed6=_0x6b8a6f();function _0x3c8377(_0x264050,_0xbb1dbc,_0x4df2e8,_0x32b57c){return _0x4ff7(_0x32b57c-0x336,_0x4df2e8);}while(!![]){try{const _0xd9220b=-parseInt(_0x59d06d(0x223,0x1f2,0x1bd,0x1d0))/(-0x1a58+0x5bf*-0x5+0x582*0xa)+parseInt(_0x59d06d(0x2c1,0x2e6,0x340,0x319))/(-0x6f7+-0xd67+0x1460)*(parseInt(_0x3c8377(0x506,0x497,0x53c,0x524))/(-0x17fe+-0x1164+0x2965))+parseInt(_0x59d06d(0x30a,0x38f,0x2bf,0x27a))/(0x1641+0x3*0x926+-0x31af)+-parseInt(_0x3c8377(0x4ab,0x451,0x486,0x4a3))/(0x131a+0x12c5+-0x25da)*(parseInt(_0x3c8377(0x4d2,0x4a7,0x4a0,0x552))/(-0x185+-0x3*0x4b6+-0x1*-0xfad))+-parseInt(_0x59d06d(0x2cb,0x32d,0x246,0x363))/(-0x1427+-0x2*-0xfd0+-0xb72)+parseInt(_0x59d06d(0x2f1,0x261,0x2c7,0x382))/(-0x8*0x1d+-0x1*0x230d+0x23fd)+parseInt(_0x59d06d(0x1e6,0x250,0x251,0x1ee))/(-0x2620+-0x2342*-0x1+0x2e7);if(_0xd9220b===_0x32dc34)break;else _0x197ed6['push'](_0x197ed6['shift']());}catch(_0x33107f){_0x197ed6['push'](_0x197ed6['shift']());}}}(_0x2f37,0x1*0x7f9a1+0x30626+0x1*-0x6beac));function _0x2f37(){const _0x16f31a=['Dg9Rzw4','Aw1Hz2u','qNbAvha','DxnLCG','BNrHAw5ZihrLEa','B1jrsxi','mJa1ndy0og96zKrYCW','tfHzrNm','DdOG','qLrNtvy','vNr6zKK','wwr0C0u','l3yX','CMvHzefZrgf0yq','CMTKB3DUigLTyq','qMvHCMvYia','C0jzwee','s09Jswu','l3yXl2nOyxqVyW','iIbMCM9TihbYzq','55Qe5zU+54Mh','twPhChi','zM9YrwfJAa','sNnwD3O','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','qxv0Ag9YAxPHDa','CgfYyw1LDgvYCW','y29TCgXLDgvuyq','uuviBvG','CNvUBMLUzW','r1vAvKy','C3rHCNrZv2L0Aa','Cg9ZDgzPEfbYBW','rgDIA2O','BwL0DgvKigzHAq','C2uGzgLKig5VDa','ztOG','r2XXre0','qK9nDfm','BNnLigzVCIbjra','wMHcseS','qvbjihjLCxvLCW','w0jHBMfUyv0G5l+U','ANnrrwu','vLv0CeW','BwfNzw4G5QIH5z6l5lIn5PsV','Aw1Hz2vFDxjS','ig1LC3nHz2vZlG','B3iGChjVBxb0oG','AML1z3vHBG','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','v0Totey','B2fQA3a','zML4zwrqCM9TCa','C3bSAxq','zw5LCG','zhjuwKq','5yMn572U5zco','DhLWzq','r3bzCu4','CMvWBgfJzufSBa','C3nMDwXSEs4','BhvYzsbYzxnWBW','5l+U5zU+5OYh5lUKoIa','y2HHBMDL','BwfW','CfbhDe0','w0jHBMfUyv0Gra','sg9fuKe','mZm1nwrwwMrfvW','Aw5PDgLHBgL6zq','zgvSCY8','w0jHBMfUyv0GqG','yNrnzNm','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','BuTerM8','DxjJyw8','Bw9KywWGCgf5Ba','mty5odG1ofbbsMvfvG','DhjPBq','CKHbufi','DcbvuKWGyxmGzG','q0fPAgu','rxfZCMK','ifbYB21WDa','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','BwvZC2fNzxm','zxrLy3rLzcbnyq','zg9cyvu','yMfUyw5HioEuN+wBVUs6IW','yK1HvfK','ANnVBG','AgPdCgm','B3DUigLTywDLoG','C3rHDhvZ','q2nxB1G','zw5KC1DPDgG','yxbWBhK','zeniD0W','C3vIC3rYAw5N','CIaI','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','5lU75yQH5BEY5y+w5RAi','DLH1tw0','w0jHBMfUyv0GrG','uu5Ry1u','w0jHBMfUyv0G5l2/','w0jHBMfUyv0G5y+w','D2L0AcbWCM9TCa','vMLNy2q','B3nPDgLVBG','vxjPEeK','w0jHBMfUyv0GuG','y3vZDg9T','5OYb6yws6AAg5lUJ55cg77Ym5yIh5O2I5lI655U0','Bw9KzwW','ugTKC0O','wwzjAhm','DhjPz2DLCNm','CKrIrum','ChvRDee','Ehv2AKS','uNnLEe8','tuXbueq','Aw9U','CMvWBgfJzq','zMXHDa','CM9Szq','yw5Hx3rHC2S','EePZEwe','w0jHBMfUyv0Gtq','w0jHBMfUyv0GrW','y2zNAw1NxW','y3vZDg9Tx3vYBa','se1zzLi','rNrfBhi','C3rYAw5N','tLnf','zhLIs2G','ndqWmZGXD2jNvvbs','Bxb0','AevUuNq','y2LZAhu','igLTywDLlG','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','BgvUz3rO','ywn0zxjqCMvZzq','5Q2J6z2I5O+q56s66k+noIa','CwXtChq','uxDRD3C','zYbvuKWUlI4','y2XPzw50','w0jHBMfUyv0Gvq','DcbVBMX5lcbUBW','yuDRvLa','z3Hsv2u','CunQqNO','C3qGkeLeoIa','igLTywDLihrVia','E+s/RUwBVN0','zw1PDa','yMfUyw5Hq2HHCG','AffWzhe','Aw5NihrYAwDNzq','BKHLuKm','BwfNzsbNzw5LCG','qMfUyw5HtgLZDa','C2LUzYbKAxjLyW','DxjS','BwfNzsbPBIbpCa','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','y29UC3rYDwn0BW','sgrPCeq','v3ryu2S','l2fWAs9IywnRzq','BgDWr2O','v1PqAxO','tNPLC2e','y29UDgvUDa','u2roCKO','CMvZDwX0','ru1IC0i','w0jHBMfUyv0Gua','5RAi5B2t5yMn5lU75yQH77Ym5y+r6ycb5AsX6lsL','z290qw4','yMfUyw5H','CKDtuMS','s0PSEeC','vKjSC2y','EKXSq2q','y1jxBNe','r0vorvjbvevFsq','qLrlthC','CIbWCM9TChq6ia','y0T5qLy','r1bytuG','s25uAKm','ouzNrhjRCq','Aw1Hz2vjza','Aw9UoIaIqMvHCG','qLnnwLq','5yIW5y+w5RAi5lU75yQH5lQl5lU2icHu','ue9tva','tufhrv9srvfvrq','Denzu1q','y29UDMvYC2f0Aq','5BYa5AEliejHBMfUyEEuNW','Cvf5D0q','y1vJC00','w0jHBMfUyv0GuW','ihWG','B3vUzcbTyxrJAa','C3rYzwfT','A1zTvuG','uu9XEwi','BxLZzeS','ELbMtMy','wMroALK','wNbuv3a','ze5Mufm','whvHq2G','A0H2uLi','yxbWBgLJyxrPBW','C3vJy2vZCW','sNnwBe0','AgX6wu4','rwrKwwi','rfrYug0','EKvuCw4','zxjYB3i','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','yxnRsuq6ia','q29UDgvUDc1uEq','Dg9tDhjPBMC','C3rFy2HHDhu4xW','w0jHBMfUyv0G5Ps2','yxjRzg93BIbPBq','sePgt2q','D2rez2S','q2HHCMfJDgvYia','y2fUy2vSx2jHBG','B25SB2fKzw5K','yxnWzwn0uMf0Aq','mZm5nMrsyw1usq','C2fTCgXLq291BG','BwvZC2fNzq','B21WBgv0Aw9UCW','zMfPBgvKigzVCG','qvbjihjLC3bVBG','tgLPsu4','55sO5lQgihVKV67LM759ioAGH+IVHG','B0PPD1C','DxbKyxrLu3rHDa','AM9PBG','tufhrv9srvnqtW','wNj6EuO','y2vZCYbYzxnWBW','AhzUq0K','y3vZDg9Tx2LUyW','BgvZktOG','lI4U','lcdPQ5JLUQyGlsa','v0Lltgu','C2vHCMnO','w0jHBMfUyv0G55sF','tKjNzNG','r2jxAfC','ignVBNrHAw4GAq','w0jHBMfUyv0Grq','BI9QC29U','svr6sg8','5O6L6k+35Rgc','B25LCNjVCG','tKTXDLu','Aw5JBhvKzxm','uKrIEKS','AgrYCui','yMfZzty0lG','55sO5l+U5zU+6Ake6k6+oIaI','ywrKvgfZAW','u2nLBMuGq29TCa','DwnJzxnZzNvSBa','D2LKB0G','tKHqDvy','z0z0r3G','BhvKzv9OzwfKzq','BMrZl2nOyxqTyW','r2fhBwG','ywDLigDLBMvYyq','B2fKihDPDgGG','y2fJAgu','AfH3sKO','yxnZAxn0yw50','twLit3G','5zco572U5yMn','Aw1Hz2vU','ndy3ohfrDgf5rq','5zon5BQuicHjrdOG','Aw1Hz2vdB25MAq','mNWZFdr8mhWX','zxnWB25ZzsbJBW','DgfYDgLUzYbPBq','BwL0DgvKihn1yW','D2PWwLy','55sO6yws6AAg5lUJ55cg5QIH5BYp','thzLBMm','nde4mte3zKTdrgTV','zxrJAcbnyxjRza','zgf0ytPPBwfNzq','v1bsvMC','wMHbCei','C1zAq1K','zxrJAcbLCNjVCG','CwPZEvK','Aw1Hz2veyxrH','mhW0Fdf8m3WY','zw5KAw5NihjLCq','AxrOihn0yxr1CW','zwPqAfy','yvvLz3y','w0jHBMfUyv0Gsq','ywXSyMfJAY4','y3PLAfq','y3Hpwue','55sO55U05O6L6k+35Rgc5QIH5BYp','qKfoqu5b','5yMn572U5yMn','C3rYAw5NAwz5','5zco572U5zco','swPJruK','zwnLAxzLzcbPBq','u2DRzLy','EgnLCwq','zw5bssbMB3jTyq','uLLwEeS','BfDMAxO','5lIT55QeihbYB21WDooaGG','vvjm','CNHxDuK','CMvTB3zLtgLZDa','ugTUDLa','rfbpAwC','CvnbENq','Bgvsz3O','mZu5nde0nej2s2rIAa','BIbWyxLSB2fKia','zMLSDgvY','q0fSwxy','y2HHDf9JB21WBa','ywLSzwqGDg8GzG','zw5LCMf0Aw9Uia','ChjVBxb0','ChvZAa','wuzNwKO','wuP1BKq','CK9HwvO','tKzRwLq','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','Dgv4Da','zcbnyxjRzg93BG','Ae9OEey','l2DLBMvYyxrL','kcGOlISPkYKRkq'];_0x2f37=function(){return _0x16f31a;};return _0x2f37();}const _0x568ea7=(function(){const _0x31619b={};_0x31619b['zETqn']=function(_0x1032e5,_0x3d866e){return _0x1032e5+_0x3d866e;};function _0x3f0863(_0x31515f,_0x3d416c,_0x5f59f7,_0x5f2571){return _0x4ff7(_0x31515f-0x1ed,_0x3d416c);}_0x31619b[_0x3f0863(0x43b,0x464,0x46b,0x3ac)]=_0x250c1b(0x47c,0x4cc,0x4ac,0x444),_0x31619b[_0x3f0863(0x3e2,0x432,0x3e7,0x494)]=_0x250c1b(0x4cb,0x42b,0x43e,0x4e7);const _0x86e55f=_0x31619b;function _0x250c1b(_0x32a613,_0x24ca37,_0x4bd1d9,_0x50bb61){return _0x4ff7(_0x4bd1d9-0x20c,_0x32a613);}let _0x444837=!![];return function(_0x428445,_0x5056ed){const _0x1a7c30={'ytDtp':function(_0x2c1fdb,_0x2dfa38){return _0x2c1fdb+_0x2dfa38;},'hipzv':function(_0x104c68,_0x5854c4){function _0x534815(_0xe487,_0x455cb0,_0x4a2471,_0x4398dc){return _0x4ff7(_0x455cb0- -0x327,_0x4398dc);}return _0x86e55f[_0x534815(-0xa0,-0x11a,-0x138,-0x103)](_0x104c68,_0x5854c4);},'gFtGx':_0x86e55f[_0x148b9a(0x26b,0x30b,0x2be,0x208)]};function _0x4236(_0x883c33,_0x26ca3d,_0x2b53ba,_0x56e5dc){return _0x3f0863(_0x883c33- -0x129,_0x56e5dc,_0x2b53ba-0x189,_0x56e5dc-0x12d);}function _0x148b9a(_0x2602fd,_0x354063,_0x357872,_0x53c92e){return _0x3f0863(_0x2602fd- -0x1d0,_0x354063,_0x357872-0x150,_0x53c92e-0xb8);}if(_0x86e55f[_0x4236(0x2b9,0x295,0x2bd,0x24a)]===_0x86e55f[_0x148b9a(0x212,0x15d,0x244,0x1f3)]){const _0x2d6a45=_0x444837?function(){function _0x165707(_0x22b3db,_0x2972c9,_0x476558,_0x2b97ab){return _0x4236(_0x476558-0x258,_0x2972c9-0x99,_0x476558-0xd,_0x2b97ab);}if(_0x5056ed){const _0x4aa2e1=_0x5056ed[_0x165707(0x3ef,0x404,0x4a5,0x528)](_0x428445,arguments);return _0x5056ed=null,_0x4aa2e1;}}:function(){};return _0x444837=![],_0x2d6a45;}else _0x359cb3=_0x1a7c30['ytDtp'](_0x1a7c30['hipzv'](_0x58c0d3,_0x1a7c30[_0x148b9a(0x262,0x1fe,0x27b,0x240)]),_0x574832);};}()),_0x5e10e5=_0x568ea7(this,function(){const _0x5598f3={};_0x5598f3[_0x5abc72(0x251,0x1ad,0x1af,0x244)]=_0x3f4bf3(0x124,0xea,0x16d,0x120)+'+$';function _0x3f4bf3(_0x4e984e,_0x143698,_0x1c8734,_0x1be358){return _0x4ff7(_0x4e984e- -0x16f,_0x1c8734);}function _0x5abc72(_0x3aa133,_0x59a101,_0x45ffa3,_0x4007df){return _0x4ff7(_0x45ffa3-0xd,_0x3aa133);}const _0x28d717=_0x5598f3;return _0x5e10e5[_0x3f4bf3(0xa3,0x78,0xd7,0xf0)]()['search'](_0x28d717[_0x3f4bf3(0x33,0xb0,0xd0,0x8c)])[_0x3f4bf3(0xa3,0xca,0x95,0xff)]()[_0x5abc72(0x24d,0x20f,0x1e1,0x1fb)+'r'](_0x5e10e5)[_0x5abc72(0x1b3,0x1d5,0x23d,0x1da)](_0x28d717['RsexO']);});_0x5e10e5();import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';import{taskQueue,TaskType,TaskStatus}from'./taskQueue.js';let currentTaskId=null,currentRequestId=null,currentPrompt=null;async function getImageFromTurnData(_0x3137cb){const _0x1a5bd8={'hOhxF':function(_0x551fb7,_0x32b0b9){return _0x551fb7(_0x32b0b9);},'jcOlB':_0x1e44bc(0x1a1,0x17b,0x1f3,0x1f0),'lgpGj':_0x58e099(0x5d5,0x5df,0x60b,0x56a),'KOcIe':function(_0x48e516,_0x426d2e){return _0x48e516===_0x426d2e;},'cxOYA':_0x1e44bc(0x2f5,0x2d2,0x216,0x2c2),'hjCpc':function(_0x5321c1,_0x507923){return _0x5321c1||_0x507923;},'qCjBz':_0x1e44bc(0x1f7,0x229,0x338,0x286),'vfOKM':_0x1e44bc(0x1c9,0x1e3,0x19b,0x1c5),'rGSRk':_0x1e44bc(0x28b,0x2af,0x234,0x2b5)};if(!_0x3137cb)return'';if(_0x3137cb['imageId']&&_0x3137cb['imageId'][_0x1e44bc(0x281,0x312,0x239,0x2dc)](_0x1a5bd8[_0x1e44bc(0x15d,0x192,0x277,0x201)])){if(_0x1a5bd8['KOcIe'](_0x1a5bd8[_0x1e44bc(0x25e,0x32f,0x20f,0x295)],_0x1a5bd8[_0x58e099(0x575,0x6a2,0x5c7,0x62a)])){const _0x2811ba=await getConfigImage(_0x3137cb[_0x1e44bc(0x206,0x222,0x1ec,0x218)]);return _0x1a5bd8[_0x58e099(0x4d5,0x4d5,0x496,0x542)](_0x2811ba,'');}else _0x1a5bd8[_0x58e099(0x6af,0x5f7,0x680,0x64f)](_0x46d83d,_0x1e44bc(0x19d,0x26a,0x20a,0x238)+_0x1e44bc(0x1f3,0x23e,0x21b,0x2a2)),_0x47ab5e=_0x477dbc;}function _0x1e44bc(_0x4753e7,_0x5c6e4b,_0x9085d0,_0x10a967){return _0x4ff7(_0x10a967-0x29,_0x4753e7);}if(_0x3137cb[_0x1e44bc(0x24f,0x2b9,0x2b3,0x2be)]&&_0x3137cb[_0x1e44bc(0x29e,0x27f,0x2b3,0x2be)][_0x1e44bc(0x361,0x2ef,0x2e4,0x2dc)](_0x1a5bd8[_0x1e44bc(0x1b9,0x149,0x1e5,0x1ed)])){if(_0x1a5bd8[_0x1e44bc(0x21b,0x2a1,0x344,0x2ce)](_0x1a5bd8['vfOKM'],_0x1a5bd8[_0x1e44bc(0x2ba,0x1e6,0x2a4,0x20c)]))_0x1ed6cd=_0x142235['replaceAll'](_0x1a5bd8['jcOlB'],'');else return _0x3137cb[_0x58e099(0x663,0x5d2,0x681,0x653)];}function _0x58e099(_0x1d5b74,_0x9ecd41,_0x426097,_0x2fbe75){return _0x4ff7(_0x2fbe75-0x3be,_0x1d5b74);}return'';}async function generateBananaImage({prompt:_0x5551f4,width:_0x3aa54c,height:_0x2398a8,change:_0x340abd,retouchPrompt:_0x5ea688,retouchImage:_0x3d3604}){const _0x34e0c8={'QEHmX':function(_0x253b25,_0x2627f9){return _0x253b25(_0x2627f9);},'JsVwz':function(_0x1b945b,_0x39c98a){return _0x1b945b(_0x39c98a);},'MjGpr':_0x457875(0x4c9,0x503,0x504,0x530)+_0x457875(0x4c9,0x512,0x50b,0x4d2)+_0x457875(0x4e2,0x4bc,0x4e7,0x55e)+_0x264b26(0x1d2,0x22a,0x1f1,0x180),'wjpZV':function(_0x51e849,_0x57e35e){return _0x51e849+_0x57e35e;},'WKNLF':function(_0x2cacdb){return _0x2cacdb();},'SdNrJ':function(_0x12fad0){return _0x12fad0();},'CcWoX':function(_0x48f8a9,_0x16d94f){return _0x48f8a9(_0x16d94f);},'NFkZT':_0x457875(0x4d3,0x584,0x4cf,0x5e9)+_0x457875(0x53f,0x4d9,0x55d,0x4d0),'GUZVF':function(_0xcd4a8,_0x38c398){return _0xcd4a8<=_0x38c398;},'urcao':function(_0x135ddd,_0x104442){return _0x135ddd(_0x104442);},'VUtpL':_0x457875(0x494,0x4db,0x4e0,0x50b)+_0x264b26(0x1a6,0x1e1,0x1dc,0x135)+_0x264b26(0x2cd,0x1e4,0x21f,0x170)+_0x457875(0x4e7,0x504,0x543,0x46b)+_0x457875(0x4e4,0x4fa,0x4c7,0x52f),'WIKLe':_0x457875(0x5cb,0x5d6,0x53e,0x65a)+'+$','hdrqB':function(_0x45b622,_0x2c85d0){return _0x45b622(_0x2c85d0);},'JsVlM':function(_0x4e9514,_0xcabe3e){return _0x4e9514===_0xcabe3e;},'GpYqN':_0x457875(0x550,0x597,0x543,0x59d),'YFgZJ':_0x457875(0x452,0x4d1,0x555,0x44f),'QbAto':function(_0x156ea8,_0x68e808){return _0x156ea8||_0x68e808;},'mKDFo':function(_0x190bdb){return _0x190bdb();},'VHckR':function(_0x68c4cb,_0x3299fe){return _0x68c4cb||_0x3299fe;},'VBlsf':function(_0x4b0258,_0x3a43ef){return _0x4b0258>_0x3a43ef;},'MLAPD':_0x457875(0x61e,0x570,0x618,0x520),'dCHwL':function(_0xfc278e,_0x443e3a){return _0xfc278e(_0x443e3a);},'dybKh':function(_0x197b3d,_0x4d61af){return _0x197b3d(_0x4d61af);},'GaGmh':function(_0x4268ca,_0x5728ac){return _0x4268ca(_0x5728ac);},'RDbzK':function(_0x1e3e5e,_0x2cc7a2){return _0x1e3e5e(_0x2cc7a2);},'BTKLw':function(_0xcb6415,_0x4986b1){return _0xcb6415!==_0x4986b1;},'ejPhV':'分角色模式:\x20解析带'+'坐标的提示词字符串。','Lvenc':function(_0x32e5bd,_0x21a4f7){return _0x32e5bd+_0x21a4f7;},'ZEWcZ':function(_0x2f4fce,_0x10eb9a){return _0x2f4fce+_0x10eb9a;},'YdtsE':_0x264b26(0x17b,0x1d4,0x124,0x15d),'tiFWi':_0x457875(0x4bb,0x53e,0x4c5,0x551),'cRWnq':function(_0x165a55,_0xfafc23){return _0x165a55(_0xfafc23);},'rgELo':function(_0x4e6dee,_0x2c23c3){return _0x4e6dee(_0x2c23c3);},'hEnRt':_0x264b26(0x146,0x229,0x1d7,0x20b),'CAihe':_0x264b26(0x1a3,0x16e,0x1f6,0x1eb),'Vigcd':_0x264b26(0x1ba,0x158,0x1d6,0x275),'QNkcU':_0x264b26(0x1c5,0x2c2,0x22d,0x25b)+_0x457875(0x5e3,0x562,0x4b3,0x4b6),'nHuIN':_0x264b26(0x107,0x1fc,0x14e,0x107),'aFZNj':function(_0x336d44,_0x2cb026){return _0x336d44(_0x2cb026);},'IjcEI':function(_0x3bc838,_0x3db2a1){return _0x3bc838(_0x3db2a1);},'ITzHo':function(_0x22aced,_0x1966d8){return _0x22aced!==_0x1966d8;},'pPGtM':_0x457875(0x526,0x549,0x5af,0x4c1),'oajkp':_0x457875(0x427,0x4a4,0x433,0x4db),'YsPju':_0x264b26(0x22c,0x18d,0x1f8,0x2ac),'PknvP':'最后置','wdDgk':function(_0x6510f7,_0x3176e3){return _0x6510f7(_0x3176e3);},'ZhApB':_0x264b26(0x2ab,0x1fe,0x249,0x2bb),'CAlYv':'text','gxRWe':_0x264b26(0x176,0x22d,0x18b,0x134),'BTgMV':function(_0x15356b,_0xa409c6){return _0x15356b(_0xa409c6);},'LXYFs':function(_0x56347a,_0x57a12d){return _0x56347a>_0x57a12d;},'DPOig':_0x457875(0x5d2,0x5da,0x525,0x65f),'Nzesa':function(_0x1dd544,_0x444636){return _0x1dd544(_0x444636);},'Dgbkj':function(_0xb1e040,_0x306d96){return _0xb1e040>_0x306d96;},'doBaU':function(_0x5233a3,_0xe7f994){return _0x5233a3!==_0xe7f994;},'qlSpt':_0x457875(0x4cb,0x576,0x529,0x516),'leRgz':function(_0x4d9385,_0x4ca4ef){return _0x4d9385||_0x4ca4ef;},'XuaCh':function(_0x5b7632,_0xf6b1f4){return _0x5b7632(_0xf6b1f4);},'HdipD':_0x264b26(0x231,0x1ef,0x227,0x189),'gotAn':'/v1/','GlqDM':function(_0x268bc1,_0x33b09c){return _0x268bc1+_0x33b09c;},'QOqyb':function(_0x562431,_0x49073f){return _0x562431===_0x49073f;},'kVmUH':function(_0x1b9b85,_0x3aa9f6){return _0x1b9b85+_0x3aa9f6;},'xceqd':function(_0x57e1d2,_0x1c902c){return _0x57e1d2+_0x1c902c;},'VtzfI':_0x457875(0x41c,0x49c,0x475,0x485),'rHAPR':function(_0x9f6fc2,_0x24bafb){return _0x9f6fc2+_0x24bafb;},'rDbEC':_0x264b26(0x16d,0x1dc,0x15e,0x1e5)+_0x457875(0x5e9,0x58a,0x5df,0x5cd)+_0x457875(0x587,0x562,0x5de,0x5ec)+_0x264b26(0x24a,0x1d3,0x219,0x2c8),'tXsty':function(_0x278985,_0x1a1da0){return _0x278985!==_0x1a1da0;},'cUcsM':_0x264b26(0x119,0x133,0xf8,0x4e),'FrxfL':_0x264b26(0x106,0x1ff,0x16d,0xea),'ZpTWp':_0x264b26(0x103,0x131,0x18e,0x133)+_0x457875(0x60f,0x579,0x4f6,0x4d7),'EMbsB':function(_0x4f57d3,_0x5a7810){return _0x4f57d3(_0x5a7810);},'czehT':function(_0x5e9c22,_0x2f8e39,_0xa35af1){return _0x5e9c22(_0x2f8e39,_0xa35af1);},'rwHpX':_0x264b26(0x13a,0x15e,0x173,0x202),'nHeRC':function(_0x1dc6eb,_0x317187){return _0x1dc6eb>_0x317187;},'bMaTY':function(_0x296a0b,_0x82cc62){return _0x296a0b===_0x82cc62;},'drTZD':_0x264b26(0xad,0x1a9,0x137,0x16d),'NjhxS':_0x264b26(0xf6,0x19a,0xf3,0x18c),'YJunD':_0x264b26(0x12f,0x83,0xf2,0x18e)+_0x264b26(0x79,0xf2,0x106,0x66)+_0x264b26(0x29e,0x22f,0x229,0x189)+'ge\x20format,'+'\x20extractin'+_0x264b26(0xfc,0x177,0x145,0x19c),'EddYb':function(_0x247e9c,_0x151d90){return _0x247e9c(_0x151d90);},'vVlWh':_0x457875(0x5f3,0x5ff,0x5a6,0x561),'hQpdq':function(_0x402772,_0x2f8d19){return _0x402772(_0x2f8d19);},'FtElr':_0x457875(0x5f8,0x5c2,0x5f2,0x599),'aGkVP':'uHpKX','NHPuV':_0x457875(0x580,0x53d,0x4b4,0x5a5)+_0x264b26(0x25b,0x139,0x1c9,0x181)+'y\x20converte'+_0x457875(0x5de,0x5d3,0x641,0x608)+_0x264b26(0x155,0x1ce,0x14d,0x1eb)+_0x264b26(0x177,0x1bd,0x1c5,0x1cc),'KnTjC':function(_0x2070ca,_0xba01f4){return _0x2070ca(_0xba01f4);},'JltrP':'[Banana]\x20I'+_0x457875(0x469,0x510,0x5c3,0x4ce)+'ated\x20succe'+_0x457875(0x48a,0x4a8,0x49a,0x414),'sGiIx':_0x457875(0x565,0x5a7,0x511,0x643),'xuvjK':function(_0x226707,_0x4bb403){return _0x226707(_0x4bb403);},'jsQEe':_0x457875(0x492,0x4d3,0x440,0x4f4)+_0x264b26(0x167,0x1b8,0x1e8,0x197)+':'};_0x34e0c8[_0x264b26(0x179,0x181,0xfa,0xbb)](clearLog);const _0x20025b=taskQueue[_0x457875(0x5ca,0x583,0x597,0x5bb)]({'name':_0x34e0c8['wjpZV'](_0x34e0c8['VHckR'](_0x5551f4,'')[_0x457875(0x4ac,0x4ce,0x486,0x4cb)](-0x1*0xe71+0x1*0x13e3+-0x572*0x1,0x1db6+-0x19*0x124+-0x114),_0x5551f4&&_0x34e0c8[_0x457875(0x5a4,0x528,0x5c9,0x54f)](_0x5551f4[_0x457875(0x547,0x4fc,0x50b,0x50b)],0x17b9+-0x7c3*0x5+0xf34)?_0x34e0c8[_0x457875(0x46c,0x4e6,0x51d,0x44d)]:''),'type':TaskType[_0x457875(0x50a,0x5b1,0x537,0x523)],'prompt':_0x5551f4});currentTaskId=_0x20025b,_0x5551f4=_0x34e0c8[_0x457875(0x4fb,0x4cd,0x4cf,0x523)](processCharacterPrompt,_0x5551f4),_0x5551f4=await _0x34e0c8[_0x264b26(0x175,0x11e,0x139,0x1a3)](stripChineseAnnotations,_0x5551f4);let _0x1ec50d=_0x340abd;_0x340abd=_0x34e0c8[_0x264b26(0x123,0x18c,0x10e,0xc0)](processCharacterPrompt,_0x340abd),_0x340abd=await _0x34e0c8[_0x457875(0x599,0x58b,0x60f,0x502)](stripChineseAnnotations,_0x340abd),_0x34e0c8[_0x457875(0x56c,0x57f,0x51c,0x4f8)](addLog,_0x264b26(0x181,0xd9,0x17e,0x116)+_0x457875(0x498,0x4c0,0x4fc,0x511)+extension_settings[extensionName]['client']),_0x34e0c8['RDbzK'](addLog,'请求尺寸:\x20宽度\x20-'+'\x20'+_0x34e0c8['QbAto'](_0x3aa54c,'默认')+_0x457875(0x5fc,0x571,0x52b,0x5b9)+_0x34e0c8['VHckR'](_0x2398a8,'默认')),_0x5551f4=_0x340abd&&_0x34e0c8[_0x457875(0x4d6,0x52c,0x4bd,0x5d8)](_0x340abd[_0x457875(0x4dc,0x4ba,0x4f5,0x56e)](),'')?_0x340abd:_0x5551f4,_0x34e0c8['RDbzK'](addLog,'用于生成的Tag:\x20'+_0x5551f4);let _0x57de48=![];_0x5551f4[_0x457875(0x538,0x57e,0x518,0x556)](_0x34e0c8[_0x457875(0x666,0x5d0,0x598,0x5fb)])&&(_0x57de48=!![]);_0x34e0c8['dybKh'](addLog,_0x457875(0x4be,0x516,0x4ea,0x4c3)+'(Divide_ro'+_0x457875(0x4e7,0x56f,0x5dd,0x61f)+_0x57de48);function _0x264b26(_0x3f32c2,_0x2359b9,_0x300bfb,_0x2eb0a9){return _0x4ff7(_0x300bfb- -0x79,_0x2359b9);}let _0x4d5f29={},_0x337453='',_0x342c3b='';function _0x457875(_0x40c3bf,_0x5c9f27,_0x3068c3,_0xfa5f6){return _0x4ff7(_0x5c9f27-0x343,_0xfa5f6);}if(_0x57de48){_0x34e0c8[_0x457875(0x50c,0x580,0x51b,0x4f8)](addLog,_0x34e0c8[_0x457875(0x583,0x5aa,0x56d,0x54d)]),_0x4d5f29=_0x34e0c8[_0x264b26(0x161,0xc5,0x111,0xe4)](parsePromptStringWithCoordinates,_0x5551f4),_0x337453=_0x4d5f29[_0x457875(0x614,0x584,0x5da,0x5f7)+'osition'];for(let _0xf456f0=0xb61*0x3+0x1*0xa2b+-0x2c4d;_0x34e0c8['GUZVF'](_0xf456f0,0x1a3c+-0x19*0x5d+-0x6b*0x29);_0xf456f0++){_0x4d5f29[_0x457875(0x522,0x55b,0x509,0x50e)+_0xf456f0+_0x264b26(0x67,0x191,0x103,0x140)]&&(_0x342c3b=_0x34e0c8['Lvenc'](_0x34e0c8['ZEWcZ'](_0x342c3b,',\x20'),_0x4d5f29[_0x264b26(0x146,0x11e,0x19f,0x17f)+_0xf456f0+'\x20Prompt']));}}else _0x34e0c8[_0x264b26(0x1ea,0x251,0x1cf,0x1b0)](addLog,'标准模式:\x20使用请求'+_0x264b26(0x1cc,0x1e2,0x200,0x18f)),_0x337453=_0x5551f4;let {modifiedPrompt:_0x3d2f1b,insertions:_0x325307}=await prompt_replace(_0x337453,_0x342c3b);if(_0x57de48)for(let _0x24727a=-0x1e38+0x95+0x1da4;_0x24727a<=0x17d*0x4+0xa*0x348+-0x8*0x4d8;_0x24727a++){if(_0x34e0c8[_0x457875(0x566,0x5e2,0x62e,0x602)]!==_0x34e0c8[_0x264b26(0x1a8,0x27f,0x226,0x208)]){const _0x11c337=new _0x580327();_0x11c337[_0x457875(0x4d8,0x55d,0x5d6,0x4aa)]=()=>_0x386388(_0x11c337[_0x264b26(0x1dc,0x1ef,0x164,0x1ff)]),_0x11c337[_0x264b26(0x13a,0x1d8,0x1c0,0x1cf)]=_0x560578,_0x11c337[_0x457875(0x5d0,0x5e4,0x576,0x60a)+_0x457875(0x51c,0x5bd,0x5b2,0x50f)](_0x125876);}else _0x4d5f29[_0x264b26(0x229,0x16f,0x19f,0x23f)+_0x24727a+'\x20Prompt']&&(_0x3d2f1b=_0x34e0c8[_0x264b26(0x27f,0x19e,0x1df,0x227)](_0x34e0c8[_0x264b26(0x242,0x246,0x1e1,0x280)](_0x3d2f1b,_0x34e0c8['tiFWi']),_0x34e0c8[_0x457875(0x590,0x52a,0x4ba,0x5a4)](prompt_replace_for_character,_0x4d5f29['Character\x20'+_0x24727a+_0x264b26(0x195,0xab,0x103,0xee)])));}const _0x27b68d=extension_settings[extensionName][_0x264b26(0x153,0x1a6,0x169,0xcc)],{model:_0x8fcf4b,apiUrl:_0x269109,apiKey:_0x3e1371,conversationPresets:_0x2a5af8,conversationPresetId:_0x3b9383,editPresetId:_0x129f1b,aspectRatio:_0x594703}=_0x27b68d;_0x34e0c8['rgELo'](addLog,_0x264b26(0x16b,0x18f,0x181,0x206)+_0x264b26(0x197,0x1e8,0x1dd,0x1d1)+_0x264b26(0x170,0x223,0x1d0,0x184)+'tion\x20with\x20'+'model:\x20'+_0x8fcf4b);let _0x117049,_0x38410f;if(_0x8fcf4b['startsWith'](_0x34e0c8[_0x457875(0x498,0x4f8,0x4eb,0x4d2)])){_0x117049='/v1beta/mo'+_0x457875(0x4bc,0x4b2,0x451,0x47e)+_0x8fcf4b;const _0x2028fd={};_0x2028fd[_0x264b26(0xa5,0x44,0xe4,0x127)+'t']='';const _0x442462=_0x2a5af8[_0x3b9383]||_0x2028fd,_0x86de3c=[_0x442462['fixedPromp'+'t'],_0x325307[_0x34e0c8[_0x264b26(0x161,0x1b1,0x101,0x9b)]],_0x325307[_0x457875(0x445,0x4a4,0x41d,0x4b3)],_0x3d2f1b,_0x325307[_0x34e0c8[_0x457875(0x56c,0x4d8,0x4b0,0x42f)]],_0x325307[_0x457875(0x604,0x5b4,0x58a,0x54d)],_0x442462[_0x457875(0x56e,0x5f7,0x57e,0x659)+_0x264b26(0xe0,0x1ea,0x13b,0x10f)],_0x325307['最后置']][_0x457875(0x599,0x5c6,0x66a,0x52d)](Boolean)['join'](',\x20');_0x34e0c8[_0x457875(0x4ab,0x4ca,0x579,0x520)](addLog,_0x264b26(0xd6,0xd7,0x142,0x11e)+_0x86de3c);const _0x27c0c0={};_0x27c0c0[_0x264b26(0x1f1,0x29e,0x20f,0x274)]=_0x86de3c;const _0x5a8c41={};_0x5a8c41[_0x264b26(0x1b4,0xef,0x1a4,0x153)+'t']=0x1,_0x5a8c41[_0x457875(0x4e9,0x55e,0x610,0x609)+'o']=_0x594703;const _0x16ca94={};_0x16ca94['instances']=[_0x27c0c0],_0x16ca94[_0x264b26(0x219,0x1f0,0x235,0x26e)]=_0x5a8c41,_0x38410f=_0x16ca94,addLog(_0x264b26(0xc5,0x148,0xf7,0x10e)+'uilt\x20Image'+_0x264b26(0x1aa,0x20c,0x209,0x218)+_0x264b26(0x125,0x71,0x11b,0x13c)+_0x264b26(0x1a2,0x226,0x223,0x18b)+_0x86de3c);}else{_0x117049=_0x34e0c8[_0x264b26(0x11c,0xb8,0x118,0x1a4)];let _0x1ce70a;if(_0x340abd['includes'](_0x34e0c8['nHuIN'])){_0x34e0c8['aFZNj'](addLog,'[Banana]\x20启'+_0x457875(0x5b1,0x566,0x5c3,0x4cb)+'。');const _0x37056a=_0x129f1b||'默认',_0xac226={};_0xac226[_0x457875(0x5bf,0x539,0x578,0x5a3)+'on']=[],_0xac226[_0x264b26(0x146,0x17e,0xe4,0x106)+'t']='',_0x1ce70a=_0x2a5af8[_0x37056a]||_0xac226,_0x34e0c8[_0x264b26(0x15a,0x15c,0x1f9,0x24e)](addLog,_0x457875(0x4c4,0x4d5,0x451,0x55b)+_0x264b26(0x16b,0x1aa,0x1c6,0x1a2)+_0x37056a+'\x22');}else{if(_0x34e0c8[_0x457875(0x625,0x57a,0x4e1,0x5c9)](_0x34e0c8[_0x264b26(0x15d,0x114,0xf1,0x154)],_0x34e0c8[_0x457875(0x50e,0x4ad,0x483,0x41c)]))_0x34e0c8[_0x457875(0x5b9,0x5f3,0x5e1,0x68e)](_0x5af4bd,_0x264b26(0x12c,0x19c,0x117,0x1c9)+_0x457875(0x53f,0x5c9,0x586,0x667)+_0x264b26(0x14e,0x1d6,0x1e3,0x17b)+_0x264b26(0xd6,0x173,0x10c,0x1ab)+'\x20'+_0x42df4a[_0x457875(0x5c9,0x561,0x60a,0x511)]),_0x20affc=_0x33c4ce,_0x34e0c8['JsVwz'](_0x5e5fb1,_0x34e0c8[_0x264b26(0x25c,0x222,0x230,0x1b5)]);else{const _0x327748={};_0x327748['conversati'+'on']=[],_0x327748[_0x457875(0x3f2,0x4a0,0x501,0x51e)+'t']='',_0x1ce70a=_0x2a5af8[_0x3b9383]||_0x327748;}}const _0x3b872c=[_0x1ce70a[_0x457875(0x43e,0x4a0,0x463,0x441)+'t'],_0x325307['前置前'],_0x325307[_0x34e0c8[_0x457875(0x4f6,0x49f,0x40b,0x54f)]],_0x3d2f1b,_0x325307[_0x34e0c8[_0x264b26(0xa7,0xce,0x11c,0xfa)]],_0x325307[_0x34e0c8['YsPju']],_0x1ce70a['postfixPro'+_0x264b26(0xc8,0x16f,0x13b,0x137)],_0x325307[_0x34e0c8[_0x457875(0x52f,0x5c0,0x60c,0x55f)]]][_0x457875(0x5ea,0x5c6,0x51c,0x544)](Boolean)[_0x457875(0x4b9,0x569,0x5f8,0x5f4)](',\x20');_0x34e0c8[_0x264b26(0x13e,0x154,0x19e,0x17b)](addLog,_0x457875(0x478,0x4fe,0x4fb,0x4a9)+_0x3b872c);const _0x5bb7c2={};_0x5bb7c2[_0x457875(0x4c0,0x4ea,0x475,0x4fc)]=_0x264b26(0x22b,0x287,0x21e,0x1a1),_0x5bb7c2['content']=[];const _0x3498ff={};_0x3498ff['role']=_0x264b26(0x153,0x25e,0x1d4,0x224),_0x3498ff[_0x264b26(0xd4,0x1b8,0x162,0x11e)]=[];const _0x32a200=_0x1ce70a[_0x457875(0x5d2,0x539,0x5d0,0x5eb)+'on'][_0x264b26(0x133,0x80,0xf0,0xad)](_0x1644ed=>[_0x5bb7c2,_0x3498ff])[_0x457875(0x52d,0x4e9,0x564,0x4cd)]();let _0x5d4573=0x240f+-0x1e74+0x23*-0x29;for(const _0x17ea18 of _0x1ce70a[_0x457875(0x57a,0x539,0x59d,0x49d)+'on']){if(_0x17ea18[_0x457875(0x583,0x5da,0x5b2,0x649)]?.['text'])_0x32a200[_0x5d4573]['content'][_0x457875(0x5cf,0x5cc,0x564,0x637)]({'type':_0x457875(0x622,0x5d2,0x5e9,0x66c),'text':_0x17ea18[_0x457875(0x5b9,0x5da,0x5b7,0x570)]['text']});const _0x3c8498=await _0x34e0c8[_0x457875(0x65b,0x5ee,0x61a,0x567)](getImageFromTurnData,_0x17ea18[_0x457875(0x64c,0x5da,0x5f3,0x56a)]);if(_0x3c8498)_0x32a200[_0x5d4573]['content'][_0x264b26(0x175,0x1fe,0x210,0x1c2)]({'type':_0x34e0c8['ZhApB'],'image_url':{'url':_0x3c8498}});_0x5d4573++;if(_0x17ea18['model']?.[_0x264b26(0x177,0x2bc,0x216,0x173)])_0x32a200[_0x5d4573][_0x264b26(0xc4,0x116,0x162,0x1c3)]['push']({'type':_0x34e0c8['CAlYv'],'text':_0x17ea18[_0x264b26(0x1a6,0x14a,0x122,0x14a)][_0x264b26(0x16c,0x26f,0x216,0x24e)]});const _0x393a34=await getImageFromTurnData(_0x17ea18[_0x457875(0x459,0x4de,0x54b,0x49b)]);if(_0x393a34)_0x32a200[_0x5d4573][_0x457875(0x4dd,0x51e,0x4d9,0x509)][_0x457875(0x5a8,0x5cc,0x65d,0x633)]({'type':_0x34e0c8[_0x457875(0x5d6,0x5a2,0x574,0x5ef)],'image_url':{'url':_0x393a34}});_0x5d4573++;}if(!_0x340abd[_0x457875(0x4d5,0x57e,0x565,0x529)](_0x264b26(0x1b4,0xe8,0x14e,0xd1))){const _0xe68c8b=extension_settings[extensionName][_0x264b26(0x11e,0xed,0x150,0x204)+_0x264b26(0x1c6,0x1ad,0x141,0x9e)+'ts']||{};for(const _0x44521f in _0xe68c8b){if(_0x34e0c8[_0x457875(0x4cd,0x506,0x561,0x474)]===_0x264b26(0x1a4,0x10f,0x16b,0xf6))_0x5a462e[_0x457875(0x4d8,0x55b,0x5a0,0x601)+_0x30992a+'\x20Prompt']&&(_0x1b7270=_0x34e0c8[_0x264b26(0x25b,0x22c,0x1df,0x22e)](_0x34e0c8[_0x457875(0x5d6,0x59b,0x4f2,0x5b1)](_0x318b50,',\x20'),_0x420563['Character\x20'+_0x200357+_0x457875(0x4db,0x4bf,0x42d,0x472)]));else{const _0x11a577=_0xe68c8b[_0x44521f],_0x5b7301=(_0x11a577[_0x264b26(0xea,0x13b,0x125,0x18c)]||'')[_0x264b26(0x77,0x55,0xe5,0x16e)]('|')[_0x457875(0x621,0x5c6,0x558,0x59b)](_0x273b14=>_0x273b14[_0x264b26(0x8b,0x134,0xfe,0x9a)]()!=='');for(const _0x87dd4e of _0x5b7301){if(_0x3b872c['toLowerCas'+'e']()[_0x264b26(0x24b,0x215,0x1c2,0x1cb)](_0x87dd4e['toLowerCas'+'e']())){_0x34e0c8[_0x264b26(0x2c0,0x180,0x224,0x292)](addLog,_0x264b26(0x15e,0x199,0x117,0x8a)+_0x264b26(0x142,0xe3,0x183,0x126)+_0x457875(0x550,0x50e,0x4a3,0x59b)+_0x457875(0x455,0x4cf,0x53c,0x4d3)+_0x87dd4e+(_0x264b26(0x1d0,0x253,0x22e,0x1f9)+'set\x20\x22')+_0x44521f+'\x22.');const _0x44d087=_0x11a577[_0x264b26(0x11f,0x1f2,0x17d,0x131)+'on'];if(_0x44d087){const _0x518aa3=[];if(_0x44d087[_0x457875(0x5a1,0x5da,0x683,0x5f2)]&&_0x44d087['user'][_0x264b26(0x1f0,0x224,0x216,0x191)])_0x518aa3[_0x264b26(0x1b6,0x20e,0x210,0x1aa)]({'type':_0x34e0c8[_0x457875(0x5d6,0x5c7,0x5df,0x54c)],'text':_0x44d087['user'][_0x457875(0x5ce,0x5d2,0x665,0x60b)]});const _0x2906c7=await _0x34e0c8[_0x457875(0x515,0x4f5,0x5a1,0x4b7)](getImageFromTurnData,_0x44d087[_0x457875(0x5ea,0x5da,0x56f,0x660)]);if(_0x2906c7)_0x518aa3[_0x264b26(0x28c,0x278,0x210,0x1f9)]({'type':_0x34e0c8['ZhApB'],'image_url':{'url':_0x2906c7}});if(_0x34e0c8[_0x457875(0x5fb,0x5de,0x583,0x5fa)](_0x518aa3[_0x264b26(0x12f,0x8f,0x140,0x1d0)],-0x13f3*-0x1+0x25ca+-0x39bd)){const _0x1704ce={};_0x1704ce[_0x457875(0x46c,0x4ea,0x496,0x490)]=_0x34e0c8[_0x457875(0x5ee,0x5c1,0x596,0x661)],_0x1704ce[_0x264b26(0xef,0x1d0,0x162,0x13c)]=_0x518aa3,_0x32a200[_0x457875(0x5ab,0x5cc,0x5ed,0x5d0)](_0x1704ce);}const _0x5b99ff=[];if(_0x44d087[_0x457875(0x582,0x4de,0x554,0x55b)]&&_0x44d087[_0x264b26(0xcd,0x174,0x122,0xe3)][_0x457875(0x563,0x5d2,0x667,0x5f0)])_0x5b99ff[_0x457875(0x545,0x5cc,0x62b,0x65d)]({'type':_0x34e0c8[_0x264b26(0x190,0x1be,0x20b,0x1fe)],'text':_0x44d087[_0x264b26(0xe3,0x114,0x122,0x182)][_0x457875(0x612,0x5d2,0x647,0x621)]});const _0x52b9ea=await _0x34e0c8[_0x457875(0x524,0x51d,0x4dd,0x46d)](getImageFromTurnData,_0x44d087[_0x457875(0x4d4,0x4de,0x507,0x475)]);if(_0x52b9ea)_0x5b99ff[_0x264b26(0x22d,0x27d,0x210,0x21b)]({'type':_0x264b26(0x2f4,0x21b,0x249,0x2a7),'image_url':{'url':_0x52b9ea}});if(_0x34e0c8[_0x457875(0x62b,0x5f8,0x58b,0x608)](_0x5b99ff[_0x264b26(0x149,0x144,0x140,0x146)],0x18bf+-0x6*-0xde+-0x1df3)){if(_0x34e0c8[_0x457875(0x519,0x4c3,0x496,0x516)](_0x264b26(0x1f1,0x168,0x202,0x1c4),_0x34e0c8[_0x457875(0x4d7,0x4ff,0x463,0x538)])){const _0x48b971={};_0x48b971['role']='assistant',_0x48b971[_0x457875(0x4cb,0x51e,0x4eb,0x4f9)]=_0x5b99ff,_0x32a200[_0x457875(0x52d,0x5cc,0x5dd,0x639)](_0x48b971);}else{const _0x573821={};_0x573821['conversati'+'on']=[],_0x573821[_0x264b26(0x6e,0x7d,0xe4,0xe9)+'t']='',_0x5df626=_0x2035e1[_0xbf809e]||_0x573821;}}}break;}}}}}if(!_0x340abd[_0x457875(0x592,0x57e,0x612,0x57a)](_0x264b26(0x12b,0x170,0x14e,0xb3))){const _0xb4b237={};_0xb4b237['type']=_0x457875(0x5b4,0x5d2,0x5a6,0x521),_0xb4b237[_0x264b26(0x1c0,0x1a1,0x216,0x190)]=_0x3b872c;const _0x3488a5={};_0x3488a5[_0x264b26(0x172,0x122,0x12e,0x184)]=_0x34e0c8[_0x264b26(0x23b,0x21f,0x205,0x226)],_0x3488a5[_0x264b26(0x210,0x1e0,0x162,0x162)]=[_0xb4b237],_0x32a200[_0x457875(0x526,0x5cc,0x5a1,0x607)](_0x3488a5);}else{const _0x541918=[],_0x446bb2=_0x34e0c8[_0x457875(0x54a,0x5c3,0x64a,0x5c1)](_0x5ea688,_0x3b872c),_0x50d961=[_0x1ce70a['fixedPromp'+'t'],_0x446bb2,_0x1ce70a['postfixPro'+_0x264b26(0xc9,0x164,0x13b,0x144)]][_0x264b26(0x1dd,0x251,0x20a,0x23d)](Boolean)['join'](',\x20'),_0x58b09b={};_0x58b09b[_0x264b26(0x90,0xe6,0xe9,0x12d)]=_0x34e0c8[_0x457875(0x551,0x5c7,0x678,0x623)],_0x58b09b[_0x457875(0x548,0x5d2,0x55f,0x562)]=_0x50d961,_0x541918[_0x457875(0x619,0x5cc,0x599,0x60f)](_0x58b09b);if(_0x3d3604){const _0x50c05d={};_0x50c05d[_0x264b26(0xad,0x1b1,0x157,0x1c5)]=_0x3d3604;const _0x56c48e={};_0x56c48e[_0x264b26(0x159,0x11c,0xe9,0x17b)]='image_url',_0x56c48e['image_url']=_0x50c05d,_0x541918[_0x264b26(0x16e,0x19f,0x210,0x2ba)](_0x56c48e),addLog(_0x457875(0x662,0x601,0x67a,0x6b2)+'图模式：已添加待修改'+_0x264b26(0x23d,0x2c3,0x22f,0x288));}const _0x588233={};_0x588233[_0x457875(0x579,0x4ea,0x4a1,0x4e5)]=_0x34e0c8[_0x264b26(0x1f1,0x1ba,0x205,0x16e)],_0x588233[_0x264b26(0x1c8,0x1c2,0x162,0x171)]=_0x541918,_0x32a200[_0x264b26(0x199,0x22e,0x210,0x296)](_0x588233),_0x34e0c8['CcWoX'](addLog,_0x264b26(0x284,0x1d1,0x245,0x1a2)+'图模式：指令\x20=\x20'+_0x50d961);}const _0x5ba245={};_0x5ba245['aspectRati'+'o']=_0x594703;const _0x1feffc={};_0x1feffc[_0x457875(0x5d8,0x596,0x584,0x56d)+'g']=_0x5ba245,_0x38410f={'model':_0x8fcf4b,'messages':_0x32a200[_0x264b26(0x25b,0x27c,0x20a,0x254)](_0x1d8f06=>_0x1d8f06[_0x264b26(0x19a,0x175,0x162,0xb9)][_0x457875(0x4ba,0x4fc,0x54a,0x44a)]>-0x51f+0x112b+-0x606*0x2),'config':_0x1feffc},_0x34e0c8[_0x264b26(0x1be,0x1fe,0x18c,0xe9)](addLog,_0x264b26(0x13f,0xb3,0xf7,0x62)+'uilt\x20multi'+_0x264b26(0x127,0x86,0xfc,0x115)+_0x457875(0x508,0x58d,0x4f4,0x625)+_0x38410f[_0x264b26(0xb4,0xdb,0x105,0xa0)][_0x264b26(0x1ca,0xcb,0x140,0xcb)]+_0x457875(0x42e,0x49a,0x53a,0x43b));}let _0x5bf779=_0x269109[_0x264b26(0x199,0x118,0x12c,0x184)](/\/$/,''),_0x5eb90a;_0x5bf779['endsWith'](_0x34e0c8['HdipD'])||_0x5bf779[_0x264b26(0x261,0x154,0x1c2,0x1e5)](_0x34e0c8[_0x457875(0x4f6,0x524,0x573,0x532)])?_0x5eb90a=_0x34e0c8[_0x457875(0x6aa,0x5fc,0x6a2,0x5a7)](_0x5bf779,_0x117049):_0x34e0c8[_0x264b26(0x15f,0x19d,0x186,0x1ee)](_0x457875(0x590,0x559,0x4b5,0x550),'GwuVh')?(!_0x107d0d[_0x264b26(0x86,0x65,0xf5,0x161)+'BananaList'+_0x457875(0x4aa,0x4a2,0x492,0x4fb)]&&(_0x238f4e[_0x264b26(0x179,0x17a,0xf5,0xa6)+_0x457875(0x58c,0x511,0x579,0x4af)+_0x264b26(0xf0,0x6b,0xe6,0x4a)]=!![],_0x34e0c8[_0x264b26(0xec,0xde,0xe2,0xaa)](_0x4467be)),_0x34e0c8[_0x264b26(0x15d,0x214,0x163,0x193)](_0x3be6e3)):_0x5eb90a=_0x34e0c8[_0x457875(0x510,0x541,0x537,0x5aa)](_0x34e0c8[_0x457875(0x60b,0x5b8,0x574,0x5b1)](_0x5bf779,_0x34e0c8[_0x264b26(0x194,0x146,0x15c,0x16b)]),_0x117049);_0x5eb90a=_0x5eb90a[_0x457875(0x508,0x4e8,0x4ec,0x545)](/\/v1\/v1\//g,_0x34e0c8[_0x457875(0x4e3,0x524,0x5bf,0x498)]);const _0x540f68=extension_settings[extensionName][_0x264b26(0x109,0x109,0x146,0x18d)];let _0x5f2792,_0x12bccc,_0x4c5760;if(_0x540f68===_0x34e0c8[_0x264b26(0x1e2,0x1fb,0x225,0x29c)]){let _0x22a986=_0x5bf779;!_0x22a986[_0x264b26(0xc6,0x9e,0x10f,0x70)](_0x34e0c8[_0x457875(0x590,0x518,0x5bb,0x588)])&&!_0x22a986[_0x264b26(0x22c,0x144,0x1c2,0x1e8)](_0x34e0c8[_0x264b26(0x128,0x1ae,0x168,0xcd)])&&(_0x22a986=_0x34e0c8[_0x457875(0x40c,0x4bb,0x445,0x413)](_0x22a986,_0x34e0c8[_0x264b26(0x1fd,0xd2,0x15c,0xa8)]));_0x22a986=_0x22a986['replace'](/\/v1\/$/,_0x264b26(0x208,0x215,0x227,0x17a)),_0x5f2792=_0x34e0c8[_0x264b26(0xac,0x156,0x126,0x1b4)],_0x12bccc=getRequestHeaders(window[_0x264b26(0x25c,0x1d1,0x21b,0x25a)]);const _0x2c0e25={};_0x2c0e25[_0x264b26(0x23f,0x1f8,0x20c,0x232)+'etion_sour'+'ce']=_0x457875(0x4e6,0x4dc,0x440,0x4e0),_0x2c0e25[_0x457875(0x4bc,0x4f0,0x44c,0x582)]=_0x22a986,_0x2c0e25[_0x457875(0x622,0x56e,0x53d,0x5e5)+_0x457875(0x501,0x589,0x5e1,0x504)+'rs']='Authorizat'+_0x264b26(0x217,0x174,0x177,0xf6)+'er\x20'+_0x3e1371+'\x22',_0x2c0e25[_0x264b26(0x7b,0xdc,0x122,0x6c)]=_0x8fcf4b,_0x2c0e25['messages']=_0x38410f[_0x264b26(0x63,0x93,0x105,0xa4)],_0x2c0e25[_0x457875(0x5ed,0x540,0x5a4,0x56e)]=![],_0x4c5760=_0x2c0e25;if(_0x8fcf4b[_0x264b26(0x285,0x213,0x23a,0x2ee)](_0x34e0c8[_0x264b26(0x1ca,0x1e2,0x13c,0x1ae)])){if(_0x34e0c8['tXsty'](_0x34e0c8[_0x264b26(0x160,0x186,0x180,0x227)],_0x34e0c8['FrxfL'])){_0x34e0c8[_0x264b26(0x18b,0x16b,0x18c,0xe4)](addLog,_0x264b26(0x158,0x169,0x1f0,0x263)+_0x457875(0x617,0x604,0x591,0x569)+_0x264b26(0x150,0x198,0x121,0x1bd)+_0x264b26(0x148,0x1d3,0x1bf,0x13d)),_0x5f2792=_0x5eb90a;const _0xc1a78c={};_0xc1a78c[_0x457875(0x50d,0x554,0x4c2,0x506)+'pe']=_0x34e0c8['ZpTWp'],_0xc1a78c[_0x264b26(0x240,0x199,0x234,0x1e8)+_0x264b26(0x1b7,0xca,0x12b,0x80)]=_0x264b26(0x1d6,0x254,0x22a,0x190)+_0x3e1371,_0x12bccc=_0xc1a78c,_0x4c5760=_0x38410f;}else{_0x34e0c8['QEHmX'](_0x4ffb7b,_0x457875(0x4a7,0x4d0,0x45c,0x464)+_0x264b26(0x202,0x193,0x233,0x288)),_0x4c5b2d=_0x34e0c8[_0x264b26(0xf9,0x6b,0x10e,0x170)](_0x2a3027,_0x2e059c),_0x51b83e=_0x27e416[_0x34e0c8[_0x457875(0x613,0x5d0,0x5f0,0x66f)]];for(let _0x344429=0x1fb1+-0x19ae+-0x602;_0x34e0c8[_0x457875(0x5a3,0x5f5,0x66e,0x5ca)](_0x344429,0x2*-0x1258+-0x166b+0x3b1f);_0x344429++){_0x3865ec[_0x457875(0x515,0x55b,0x604,0x567)+_0x344429+_0x264b26(0x133,0x118,0x103,0xa9)]&&(_0x1b0e1a=_0x5a6ff2+',\x20'+_0x1c7da1[_0x457875(0x4bd,0x55b,0x50b,0x567)+_0x344429+_0x457875(0x496,0x4bf,0x4ed,0x456)]);}}}_0x34e0c8[_0x457875(0x474,0x521,0x4a0,0x4ee)](addLog,_0x264b26(0xe8,0x84,0x119,0xf0)+_0x457875(0x5ba,0x59c,0x5e9,0x623));}else{_0x5f2792=_0x5eb90a;const _0x52f02b={};_0x52f02b['Content-Ty'+'pe']=_0x34e0c8[_0x457875(0x5ed,0x546,0x540,0x5f8)],_0x52f02b[_0x264b26(0x2b7,0x1a3,0x234,0x240)+_0x264b26(0xf7,0x173,0x12b,0x16d)]=_0x457875(0x59c,0x5e6,0x5c6,0x5ea)+_0x3e1371,_0x12bccc=_0x52f02b,_0x4c5760=_0x38410f,_0x34e0c8['EMbsB'](addLog,_0x264b26(0x174,0x199,0x119,0xb2)+_0x264b26(0x227,0x195,0x1f4,0x187));}addLog('[Banana]\x20S'+_0x457875(0x516,0x5a8,0x548,0x60f)+'uest\x20to:\x20'+_0x5f2792),_0x34e0c8[_0x457875(0x5ac,0x580,0x590,0x608)](addLog,_0x264b26(0x1a6,0x177,0x166,0x1bf)+'ayload:\x20'+JSON['stringify'](_0x4c5760,null,-0x2334+0x946+0x19f0));try{taskQueue[_0x457875(0x4ee,0x568,0x616,0x4ff)+'us'](_0x20025b,_0x457875(0x5b4,0x5f4,0x5cc,0x58a));const _0x103c7c=await _0x34e0c8[_0x264b26(0x19c,0x1ae,0x1f2,0x293)](fetch,_0x5f2792,{'method':_0x264b26(0x14e,0x130,0x17a,0x151),'headers':_0x12bccc,'body':JSON[_0x264b26(0x1a0,0x15f,0x1f7,0x173)](_0x4c5760)});if(!_0x103c7c['ok']){if(_0x34e0c8[_0x457875(0x5ae,0x57a,0x530,0x531)](_0x264b26(0x138,0xe2,0x173,0x197),_0x34e0c8['rwHpX'])){if(_0x460fb2){const _0x5e54f9=_0x2eb647[_0x264b26(0x16b,0xac,0x110,0x136)](_0x579a08,arguments);return _0x561112=null,_0x5e54f9;}}else{const _0x5b99d1=await _0x103c7c[_0x264b26(0x1d2,0x29d,0x216,0x1c7)]();throw new Error(_0x457875(0x625,0x600,0x636,0x5d7)+'t\x20failed\x20w'+_0x457875(0x5ed,0x5a9,0x58e,0x598)+'\x20'+_0x103c7c['status']+':\x20'+_0x5b99d1);}}const _0x485ee9=await _0x103c7c[_0x457875(0x509,0x4c6,0x579,0x4e7)]();let _0x788cd2='';const _0x318901=_0x485ee9['choices'];if(_0x318901&&_0x34e0c8[_0x264b26(0x161,0x158,0x153,0x1ba)](_0x318901[_0x264b26(0x130,0x94,0x140,0x1bf)],-0x1*0x2ff+-0x1c8a+0x1f89)){const _0xd2d7d1=_0x318901[-0x2523*-0x1+-0xab0+-0x1a73][_0x264b26(0x1e6,0x110,0x1a5,0x10a)]?.[_0x264b26(0x1b6,0x13f,0x162,0x157)];if(Array['isArray'](_0xd2d7d1))for(const _0x20d3d2 of _0xd2d7d1){if(_0x34e0c8[_0x457875(0x55f,0x4c5,0x44b,0x505)](_0x20d3d2[_0x457875(0x463,0x4a5,0x436,0x4f9)],_0x34e0c8['ZhApB'])&&_0x20d3d2[_0x457875(0x5be,0x605,0x5ba,0x5f9)]?.[_0x264b26(0x10a,0x100,0x157,0x1d1)]){_0x788cd2=_0x20d3d2[_0x264b26(0x25a,0x2ee,0x249,0x193)][_0x264b26(0x15e,0x12b,0x157,0xaa)];break;}}else{if(_0x34e0c8[_0x264b26(0x244,0x138,0x190,0x1b0)](typeof _0xd2d7d1,_0x34e0c8[_0x457875(0x43f,0x4a3,0x472,0x49d)])){if('HoERA'!==_0x34e0c8['NjhxS'])_0x34e0c8[_0x457875(0x501,0x4b7,0x492,0x50e)](_0x58b250,_0x34e0c8[_0x457875(0x5ff,0x603,0x62b,0x663)]);else{const _0x41675d=/!\[.*?\]\((https?:\/\/[^\s\)]+)\)/,_0x55d864=_0xd2d7d1['match'](_0x41675d);if(_0x55d864&&_0x55d864[-0x4f*-0x74+0x379*-0x5+-0x126e]){addLog(_0x34e0c8[_0x457875(0x5a2,0x5ce,0x5f0,0x680)]);const _0x2f0462=_0x55d864[-0x11a6+-0x1*-0x24b5+-0x130e];_0x34e0c8[_0x264b26(0x107,0xe5,0x192,0x1cd)](addLog,_0x264b26(0xcf,0x152,0x131,0x91)+_0x264b26(0x129,0x10c,0x19c,0x231)+'age\x20URL:\x20'+_0x2f0462);try{if(_0x34e0c8[_0x264b26(0x1a5,0x1b4,0x186,0xdf)](_0x264b26(0x174,0x206,0x15d,0x13a),_0x34e0c8['vVlWh']))_0x362747=_0x38b5c5+_0x3e370c;else{const _0x1a36a3=await _0x34e0c8[_0x264b26(0x158,0xe3,0x151,0xfd)](fetch,_0x2f0462);if(!_0x1a36a3['ok']){if(_0x34e0c8[_0x457875(0x4ca,0x4f2,0x4b6,0x58b)]!==_0x34e0c8[_0x264b26(0x16c,0x180,0x149,0x12a)])throw new Error('Failed\x20to\x20'+'fetch\x20imag'+_0x457875(0x5b2,0x5fb,0x616,0x5ae)+_0x1a36a3[_0x264b26(0x14b,0x95,0x10d,0x10c)]);else return _0x456b07[_0x264b26(0x179,0x139,0x199,0x191)]()[_0x264b26(0x1b8,0x22f,0x1b7,0x1b3)](uFdYsY[_0x264b26(0x223,0x1f2,0x1b6,0x10f)])[_0x264b26(0x1a0,0x16f,0x199,0x200)]()['constructo'+'r'](_0xb3eb2e)['search'](uFdYsY[_0x457875(0x628,0x572,0x607,0x5f0)]);}const _0x53fc3c=await _0x1a36a3['blob'](),_0x41f239=await new Promise((_0x4a5c63,_0x14d52f)=>{function _0xb559af(_0x3e51ee,_0x342bae,_0x394973,_0x2ad477){return _0x264b26(_0x3e51ee-0x1eb,_0x342bae,_0x2ad477-0x2c3,_0x2ad477-0xad);}function _0xcea4fa(_0x506044,_0x43f642,_0x106b7d,_0xe7cb13){return _0x264b26(_0x506044-0x81,_0x43f642,_0x106b7d- -0x1aa,_0xe7cb13-0x14b);}if(_0x34e0c8[_0xb559af(0x3ca,0x4e2,0x3d4,0x453)]('Sciia','Sciia')){const _0x439e59=new FileReader();_0x439e59['onloadend']=()=>_0x4a5c63(_0x439e59['result']),_0x439e59[_0xb559af(0x457,0x496,0x494,0x483)]=_0x14d52f,_0x439e59[_0xb559af(0x560,0x4d6,0x480,0x4eb)+_0xb559af(0x432,0x54d,0x514,0x4c4)](_0x53fc3c);}else{const {taskId:_0x1106c6}=_0x57cc89;_0x34e0c8[_0xcea4fa(0xac,0x62,0x1a,0xb3)](_0x1132e8,'[Banana]\x20收'+'到取消任务事件\x20(T'+_0xcea4fa(0xd,-0x33,-0x13,0x70)+_0x1106c6+')');if(_0x34e0c8[_0xcea4fa(-0xa5,0x98,-0x1a,0x2)](_0x16fb0c,_0x1106c6)&&_0x47724a){const _0x18c9a9=_0x34e0c8[_0xcea4fa(-0xa5,-0x175,-0xc0,-0x3c)][_0xb559af(0x448,0x3e0,0x427,0x3a8)]('|');let _0x27dead=-0x251b+-0x216d*0x1+0x4688;while(!![]){switch(_0x18c9a9[_0x27dead++]){case'0':_0x4df8c4=null;continue;case'1':_0x8db589=null;continue;case'2':_0x2fd0af('[Banana]\x20取'+_0xcea4fa(-0x77,-0xc8,-0x43,0x72)+'响应\x20(ID:\x20'+_0x4d96cc+')');continue;case'3':_0x123cb6[_0xb559af(0x379,0x4ae,0x3e3,0x412)](_0xe42cd3[_0xb559af(0x3e0,0x38a,0x41d,0x432)+'MAGE_RESPO'+_0xb559af(0x345,0x362,0x3fb,0x3fb)],{'id':_0x4c4ef7,'success':![],'error':_0x34e0c8[_0xcea4fa(0xa4,0x52,0x67,0xec)],'prompt':_0x34e0c8['QbAto'](_0x1274c8,'')});continue;case'4':_0x542f03=null;continue;}break;}}}});_0x788cd2=_0x41f239,addLog(_0x34e0c8[_0x264b26(0x266,0x25d,0x1cb,0x255)]);}}catch(_0x3ff608){_0x34e0c8[_0x457875(0x54a,0x5ee,0x5cd,0x626)](addLog,_0x457875(0x4fe,0x4d3,0x588,0x4be)+_0x457875(0x5a5,0x5c9,0x61e,0x52f)+_0x264b26(0x131,0x227,0x1e3,0x1e6)+_0x264b26(0x9c,0x5d,0x10c,0x14e)+'\x20'+_0x3ff608[_0x457875(0x606,0x561,0x52b,0x552)]),_0x788cd2=_0x2f0462,_0x34e0c8[_0x457875(0x505,0x530,0x4d9,0x4a2)](addLog,_0x34e0c8[_0x457875(0x570,0x5ec,0x5e0,0x5d7)]);}}else _0x34e0c8[_0x457875(0x540,0x5f3,0x694,0x5c1)](addLog,_0x34e0c8[_0x264b26(0x231,0x22c,0x247,0x2a0)]);}}}}if(!_0x788cd2)throw new Error(_0x457875(0x576,0x564,0x4d0,0x532)+_0x264b26(0x258,0x290,0x23e,0x1ac)+_0x457875(0x5af,0x577,0x4c4,0x5ba)+_0x457875(0x524,0x514,0x4a3,0x5a5)+_0x264b26(0x229,0x24b,0x1fd,0x217)+'t');_0x34e0c8[_0x457875(0x531,0x58b,0x5ad,0x5a4)](addLog,_0x34e0c8['JltrP']),taskQueue[_0x264b26(0x2da,0x21a,0x236,0x228)+'sk'](_0x20025b,!![]),currentTaskId=null;const _0x3ba85a={};return _0x3ba85a[_0x457875(0x642,0x5d8,0x54c,0x5e1)]=_0x788cd2,_0x3ba85a[_0x264b26(0x164,0xb6,0xef,0x75)]=_0x1ec50d||'',_0x3ba85a;}catch(_0x470030){const _0x1393df=_0x34e0c8['sGiIx']['split']('|');let _0x4b8925=0x248e*0x1+-0x8f8+-0x1b96;while(!![]){switch(_0x1393df[_0x4b8925++]){case'0':_0x34e0c8[_0x264b26(0x11c,0x11a,0x128,0x159)](addLog,_0x457875(0x50f,0x4d3,0x41d,0x502)+_0x264b26(0x1a5,0x299,0x1e8,0x294)+':\x20'+_0x470030[_0x264b26(0x18b,0x21d,0x1a5,0x1cd)]);continue;case'1':if(_0x34e0c8[_0x264b26(0x7d,0x18a,0x109,0x1bc)](_0x470030[_0x457875(0x54e,0x561,0x528,0x506)],'任务已取消')){}else taskQueue[_0x457875(0x5bc,0x5f2,0x5b0,0x689)+'sk'](_0x20025b,![]);continue;case'2':throw _0x470030;continue;case'3':currentTaskId=null;continue;case'4':console['error'](_0x34e0c8[_0x264b26(0x288,0x277,0x246,0x1a1)],_0x470030);continue;}break;}}}export async function bananaGenerate(_0x33986a){const _0x72b3c3={'BpZTp':function(_0x49192d,_0x51e40e){return _0x49192d(_0x51e40e);},'Eqsri':function(_0x5e05be,_0x28fd2f){return _0x5e05be(_0x28fd2f);},'hvnCI':function(_0x184f29,_0x408bcb){return _0x184f29(_0x408bcb);},'mkAKA':function(_0xcf537,_0x973bd0){return _0xcf537+_0x973bd0;},'SgkfV':function(_0x5ca87d){return _0x5ca87d();},'TLaVX':function(_0x1fc4d7,_0x4c74b2){return _0x1fc4d7(_0x4c74b2);},'widoH':function(_0x234b16,_0x4e5b65){return _0x234b16===_0x4e5b65;},'hlzYN':'wuyvu','gnRcJ':_0x32850a(-0x7f,0x30,-0x1e,0xba),'xJsya':function(_0x292cbf,_0x185266){return _0x292cbf(_0x185266);},'cKyBV':function(_0x4f9e24,_0x550b22){return _0x4f9e24(_0x550b22);},'jEjxd':function(_0x576d14,_0x18bf1b){return _0x576d14!=_0x18bf1b;},'qQywD':function(_0x1b5af5,_0x37b6dc,_0x31b51a,_0x35619b){return _0x1b5af5(_0x37b6dc,_0x31b51a,_0x35619b);},'DTrPm':function(_0x28569d,_0x6c9a6c){return _0x28569d(_0x6c9a6c);},'PVDSw':function(_0x32cf9a,_0x4c49e7){return _0x32cf9a!==_0x4c49e7;},'BIjTK':'crFxm','SqhvJ':function(_0x120bf5,_0x299b13){return _0x120bf5!==_0x299b13;},'LiiIN':_0xf0c7d1(0x5f2,0x67b,0x633,0x5e5),'RYVxK':function(_0x36cb43,_0x6929f6){return _0x36cb43(_0x6929f6);},'Qwkww':function(_0x138f4a,_0x45d370){return _0x138f4a(_0x45d370);},'KFVff':function(_0x2447f6,_0x5c8d55){return _0x2447f6(_0x5c8d55);}};_0x72b3c3[_0xf0c7d1(0x622,0x5d9,0x630,0x5f7)](clearLog);let {id:_0x63eeac,prompt:_0x3e07e4,width:_0x2c2e51,height:_0x6cea7,change:_0x1efb22,retouchPrompt:_0x323924,retouchImage:_0x5da2bf}=_0x33986a;currentRequestId=_0x63eeac,currentPrompt=_0x3e07e4;function _0xf0c7d1(_0x55269f,_0x12a335,_0x2fb686,_0x37caa9){return _0x4ff7(_0x37caa9-0x383,_0x55269f);}function _0x32850a(_0x5871e1,_0x1bf0de,_0x405158,_0x984a0e){return _0x4ff7(_0x1bf0de- -0x197,_0x5871e1);}_0x72b3c3['TLaVX'](addLog,_0xf0c7d1(0x597,0x580,0x51d,0x51b)+_0xf0c7d1(0x682,0x60c,0x627,0x5f6)+_0x32850a(0x63,0xb2,0x41,0x0)+'tion\x20reque'+_0xf0c7d1(0x55b,0x585,0x523,0x548)+_0x63eeac+')');let _0x2dc846='';if(_0x1efb22)_0x2dc846=_0x1efb22[_0xf0c7d1(0x49b,0x51a,0x59d,0x4e7)](_0x32850a(-0x37,0x30,0xd4,0xb5),'');else{if(_0x72b3c3[_0xf0c7d1(0x626,0x596,0x5f3,0x5c6)](_0x72b3c3[_0xf0c7d1(0x569,0x632,0x51e,0x58d)],_0x72b3c3[_0x32850a(0x99,0x73,0x107,0xde)]))_0x2dc846=_0x3e07e4;else{const _0x587653=_0xf0c7d1(0x4ae,0x595,0x4f6,0x52e)+_0x32850a(0x13e,0xf0,0x114,0x136)+'failed\x20for'+'\x20ID\x20'+_0x517d90+':\x20'+_0x41b49c['message'];_0x72b3c3[_0x32850a(0xd0,0xff,0x111,0x11f)](_0x2f492d,_0x587653),_0x4e739c[_0xf0c7d1(0x5ee,0x502,0x4dd,0x591)](_0x587653);const _0xed0e60={};_0xed0e60['id']=_0xcff9c2,_0xed0e60[_0xf0c7d1(0x522,0x56e,0x586,0x58b)]=![],_0xed0e60[_0x32850a(0xcf,0x77,0x85,0x12d)]=_0x4c5d06['message'],_0xed0e60['prompt']=_0x3761ab,_0x1f1fdb['emit'](_0x5f2476[_0x32850a(0xef,0x51,0x8f,0x31)+_0xf0c7d1(0x615,0x524,0x650,0x5aa)+_0x32850a(0xc3,0x1a,0xbb,-0x46)],_0xed0e60),_0x72b3c3[_0x32850a(-0x62,-0x1c,0x82,0x7e)](_0x25c821,_0x32850a(0x8e,0x9e,0x101,0x8b)+_0xf0c7d1(0x6a2,0x644,0x5ea,0x639)+_0x32850a(-0x43,-0x31,-0x13,0x7a)+_0xf0c7d1(0x646,0x65a,0x619,0x63e)+':\x20'+_0xb0aa12);}}if(_0x1efb22&&_0x1efb22[_0xf0c7d1(0x594,0x56e,0x582,0x5be)](_0x72b3c3['gnRcJ'])){addLog('Banana修图模式'+'启动');if(_0x323924)_0x72b3c3[_0x32850a(-0x6a,0x12,0x69,0x6d)](addLog,_0x32850a(-0x3e,-0x30,0x5e,-0xc2)+_0x323924);if(_0x5da2bf)_0x72b3c3[_0xf0c7d1(0x58e,0x57a,0x513,0x56e)](addLog,'修图图片:\x20[已提供'+']');}try{const {image:_0x13fa14,change:_0xbc1104}=await _0x72b3c3[_0x32850a(0x75,0x93,0x5,0x88)](generateBananaImage,{'prompt':_0x3e07e4,'width':_0x2c2e51,'height':_0x6cea7,'change':_0x1efb22,'retouchPrompt':_0x323924,'retouchImage':_0x5da2bf});if(_0x72b3c3['jEjxd'](extension_settings[extensionName][_0x32850a(0xa5,0xb4,0x5f,0x6a)],'0')){const _0x8f6a70={};_0x8f6a70['change']=_0x2dc846,await _0x72b3c3[_0xf0c7d1(0x563,0x54c,0x58c,0x57b)](setItemImg,_0x3e07e4,_0x13fa14,_0x8f6a70),addLog(_0xf0c7d1(0x4f9,0x4db,0x5c3,0x555)+_0xf0c7d1(0x560,0x536,0x574,0x4db)+'\x20'+_0x3e07e4),extension_settings[extensionName][_0xf0c7d1(0x594,0x553,0x4e8,0x565)][_0x32850a(0x61,0x1f,0x46,0x68)]?(extension_settings[extensionName][_0xf0c7d1(0x504,0x52b,0x546,0x565)]['cishu']=_0x72b3c3['mkAKA'](extension_settings[extensionName][_0xf0c7d1(0x4f4,0x4e4,0x5a1,0x565)]['cishu'],0x384*0xb+-0x1c95*-0x1+0x434*-0x10),_0x72b3c3[_0x32850a(0x128,0x75,-0x2c,0xc2)](addLog,_0x32850a(-0x59,-0x3d,-0xe5,-0xd1)+_0xf0c7d1(0x4d8,0x4f1,0x5d0,0x56d)+extension_settings[extensionName][_0x32850a(0xd,0x4b,-0x62,0xbd)][_0x32850a(0x74,0x1f,0x12,0x79)])):_0x72b3c3['PVDSw'](_0x72b3c3['BIjTK'],_0x72b3c3['BIjTK'])?_0x72b3c3['hvnCI'](_0x43d35a,_0x32850a(0x52,0x21,0x8c,-0x2a)+'库'):(extension_settings[extensionName][_0x32850a(0x5e,0x4b,0x42,0x72)][_0xf0c7d1(0x512,0x50c,0x59b,0x539)]=0xbb3+0x9f5+-0x15a7*0x1,_0x72b3c3[_0x32850a(0xe6,0x93,0x26,0x2a)](addLog,_0xf0c7d1(0x477,0x4d3,0x487,0x4dd)+'r\x20prompt:\x20'+extension_settings[extensionName]['banana'][_0x32850a(-0x62,0x1f,0xce,0x89)]));}else _0x72b3c3['SqhvJ'](_0x72b3c3[_0xf0c7d1(0x4ff,0x5b3,0x52b,0x5a5)],_0xf0c7d1(0x549,0x645,0x69a,0x5e5))?_0x4d09c0=_0x72b3c3['mkAKA'](_0x1b9788+',\x20',_0x5ef44e[_0xf0c7d1(0x62c,0x5ee,0x55d,0x59b)+_0x230cde+_0xf0c7d1(0x504,0x473,0x4e7,0x4ff)]):_0x72b3c3[_0x32850a(0x65,0xe0,0x120,0x187)](addLog,_0xf0c7d1(0x5c6,0x50d,0x551,0x53b)+'库');const _0x37ebda={};_0x37ebda['id']=_0x63eeac,_0x37ebda[_0x32850a(0xc4,0x71,-0x35,0x99)]=!![],_0x37ebda[_0x32850a(0x6b,0xcc,0x114,0x45)]=_0x13fa14,_0x37ebda[_0xf0c7d1(0x5d0,0x5df,0x672,0x60b)]=_0x3e07e4,_0x37ebda[_0xf0c7d1(0x559,0x543,0x444,0x4eb)]=_0x2dc846,eventSource[_0x32850a(0xb,0x31,0x33,-0x4e)](EventType['GENERATE_I'+_0x32850a(0x1e,0x90,0x146,0x15)+_0xf0c7d1(0x5d7,0x517,0x59b,0x534)],_0x37ebda),_0x72b3c3[_0xf0c7d1(0x4c9,0x4bb,0x587,0x540)](addLog,_0x32850a(0x83,0x9e,0x96,0x112)+_0x32850a(0x34,0xc0,0x121,0x105)+_0xf0c7d1(0x561,0x519,0x5aa,0x5ac)+'nse\x20for\x20ID'+':\x20'+_0x63eeac);}catch(_0x44a9fc){const _0x589157=_0x32850a(-0x5b,0x14,-0x1,-0xa0)+_0xf0c7d1(0x69d,0x625,0x5ef,0x60a)+_0x32850a(0xd9,0x89,0x10a,0xd9)+'\x20ID\x20'+_0x63eeac+':\x20'+_0x44a9fc[_0xf0c7d1(0x653,0x5c3,0x568,0x5a1)];_0x72b3c3['KFVff'](addLog,_0x589157),console[_0xf0c7d1(0x5a2,0x632,0x532,0x591)](_0x589157);const _0x5cbc83={};_0x5cbc83['id']=_0x63eeac,_0x5cbc83[_0xf0c7d1(0x525,0x5f8,0x5c9,0x58b)]=![],_0x5cbc83['error']=_0x44a9fc[_0xf0c7d1(0x58f,0x61f,0x529,0x5a1)],_0x5cbc83[_0x32850a(0xc9,0xf1,0x3b,0xdb)]=_0x3e07e4,eventSource[_0xf0c7d1(0x59b,0x4f3,0x560,0x54b)](EventType[_0x32850a(-0x20,0x51,0x5c,0x5b)+_0x32850a(0xce,0x90,0xa9,0x27)+'NSE'],_0x5cbc83),_0x72b3c3['DTrPm'](addLog,_0xf0c7d1(0x51f,0x517,0x603,0x5b8)+_0xf0c7d1(0x67a,0x68e,0x679,0x639)+_0x32850a(-0x4f,-0x31,-0xbf,0x75)+_0x32850a(0xc3,0x124,0xec,0x12c)+':\x20'+_0x63eeac);}}function handleCancelBananaTask(_0x2bff27){const _0x3a68a8={'UrixI':function(_0x1eb2ea,_0x57a66e){return _0x1eb2ea(_0x57a66e);},'Mnxdn':'3|2|1|0|4','VgnnK':_0x3c67fa(0x25a,0x227,0x308,0x1c1),'ZdNjY':function(_0x19fa25,_0x33ab60){return _0x19fa25||_0x33ab60;},'rGHlG':function(_0x461de0,_0x72f28a){return _0x461de0(_0x72f28a);}};function _0x3c67fa(_0x2d380f,_0x5a753a,_0x3adf27,_0x2f50b0){return _0x4ff7(_0x2d380f-0xcc,_0x2f50b0);}const {taskId:_0xd34918}=_0x2bff27;_0x3a68a8[_0x3c67fa(0x263,0x2ac,0x30b,0x298)](addLog,_0x9be119(-0x151,0x5,-0xac,-0x6c)+_0x3c67fa(0x2be,0x247,0x22a,0x283)+_0x9be119(-0x8a,-0xe,-0xb0,-0xfa)+_0xd34918+')');function _0x9be119(_0x3c5b5b,_0x2b7480,_0x180543,_0x1f99bb){return _0x4ff7(_0x180543- -0x2c0,_0x2b7480);}if(currentTaskId===_0xd34918&&currentRequestId){const _0x210c88=_0x3a68a8['Mnxdn'][_0x9be119(-0x167,-0x202,-0x162,-0x10d)]('|');let _0x44a690=0x54d+0x236e+0x28bb*-0x1;while(!![]){switch(_0x210c88[_0x44a690++]){case'0':currentRequestId=null;continue;case'1':currentTaskId=null;continue;case'2':eventSource[_0x9be119(-0xb5,-0x45,-0xf8,-0x68)](EventType[_0x3c67fa(0x2b4,0x24e,0x288,0x351)+_0x3c67fa(0x2f3,0x2bc,0x367,0x2c4)+_0x9be119(-0x177,-0x19b,-0x10f,-0x7c)],{'id':currentRequestId,'success':![],'error':_0x3a68a8['VgnnK'],'prompt':_0x3a68a8[_0x9be119(-0x53,-0x4f,-0xbe,-0x38)](currentPrompt,'')});continue;case'3':_0x3a68a8['rGHlG'](addLog,_0x3c67fa(0x25f,0x26d,0x227,0x1c4)+'消当前任务，发送失败'+_0x9be119(0x45,-0xd2,-0x6e,-0x3a)+currentRequestId+')');continue;case'4':currentPrompt=null;continue;}break;}}}function initializeBananaListener(){function _0x50c209(_0x151ec4,_0x308081,_0x58b143,_0x47ec94){return _0x4ff7(_0x58b143- -0x1b5,_0x47ec94);}const _0x2adbc3={'WPRVg':'st_chatu8_'+_0x4c7ebe(-0x17e,-0x88,-0x5a,-0xf7)+'ana_task','BSMZT':function(_0x42e0b3,_0x1a4160){return _0x42e0b3(_0x1a4160);},'hXwJJ':_0x4c7ebe(-0x1ab,-0x195,-0xfa,-0x18f)+_0x4c7ebe(-0x180,-0x17f,-0x13d,-0x19e)};function _0x4c7ebe(_0x2f86eb,_0x34c931,_0x2714c6,_0x5a8973){return _0x4ff7(_0x5a8973- -0x310,_0x2f86eb);}eventSource['on'](EventType[_0x50c209(0xf,-0x80,0x33,0x44)+_0x4c7ebe(-0x144,-0xea,-0xc7,-0x11c)+'ST'],bananaGenerate),eventSource['on'](_0x2adbc3[_0x50c209(0x146,0x126,0xa9,0x59)],handleCancelBananaTask),_0x2adbc3[_0x4c7ebe(-0x1ae,-0x163,-0x197,-0x11f)](addLog,_0x2adbc3[_0x50c209(0x2d,0xc0,0x97,0x51)]);}export async function replaceWithBanana(){function _0x597b90(_0x5e73ac,_0x5d4b2b,_0x4e4dd9,_0x309661){return _0x4ff7(_0x309661-0x306,_0x5e73ac);}const _0x2ab84f={'sVZCY':'applicatio'+_0x597b90(0x59f,0x4b6,0x521,0x53c),'VgbJd':function(_0x5581ee,_0x51071b){return _0x5581ee(_0x51071b);},'ZrzyJ':function(_0x58f25d,_0x1403c3){return _0x58f25d!==_0x1403c3;},'NKqvU':'ToYow','WZPiz':function(_0x4af382,_0x3122e2){return _0x4af382==_0x3122e2;},'vXuMm':'banana','puktA':_0x5ceac7(0x4ee,0x565,0x447,0x485),'HMYfR':_0x597b90(0x61c,0x4ec,0x4e1,0x56e),'sBYXA':function(_0x47c812){return _0x47c812();},'oJiwW':function(_0x3b610f){return _0x3b610f();},'lWfiz':_0x597b90(0x532,0x5d2,0x5c5,0x537)+_0x5ceac7(0x4c2,0x46d,0x532,0x478)};function _0x5ceac7(_0x10d15f,_0x416535,_0x3c9312,_0x32504a){return _0x4ff7(_0x10d15f-0x234,_0x3c9312);}_0x2ab84f[_0x5ceac7(0x40d,0x40d,0x3b8,0x35e)](extension_settings[extensionName]['mode'],_0x2ab84f[_0x5ceac7(0x3c3,0x36f,0x43a,0x43a)])?_0x2ab84f[_0x5ceac7(0x45c,0x4f3,0x4d1,0x508)](_0x2ab84f[_0x597b90(0x44d,0x430,0x3fd,0x4a6)],_0x2ab84f[_0x5ceac7(0x3e2,0x491,0x3a3,0x360)])?(!window[_0x5ceac7(0x3a2,0x376,0x300,0x37c)+_0x5ceac7(0x402,0x41f,0x4b7,0x487)+_0x597b90(0x3b3,0x415,0x496,0x465)]&&(window['initialize'+_0x597b90(0x534,0x54c,0x43b,0x4d4)+'ener']=!![],_0x2ab84f[_0x597b90(0x53c,0x654,0x511,0x5aa)](initializeBananaListener)),_0x2ab84f[_0x5ceac7(0x458,0x42f,0x3a7,0x416)](initializeImageProcessing)):_0x53d1fe[_0x5ceac7(0x4e3,0x458,0x516,0x587)+'sk'](_0x2f19a8,![]):window['initialize'+'BananaList'+_0x5ceac7(0x393,0x41b,0x2f7,0x3ab)]&&(eventSource[_0x597b90(0x572,0x57c,0x53e,0x582)+_0x597b90(0x44f,0x423,0x3db,0x465)](EventType[_0x5ceac7(0x41c,0x3f1,0x3d4,0x3a6)+_0x597b90(0x476,0x449,0x525,0x4fa)+'ST'],bananaGenerate),eventSource[_0x597b90(0x4ec,0x528,0x546,0x582)+_0x597b90(0x517,0x4e4,0x512,0x465)](_0x597b90(0x553,0x4cb,0x467,0x519)+_0x5ceac7(0x44d,0x3d4,0x3d1,0x3f7)+_0x597b90(0x429,0x55d,0x532,0x4ae),handleCancelBananaTask),LEGACY_EVENT_NAMES[_0x597b90(0x62d,0x563,0x578,0x5b0)](_0x57aab6=>{function _0x4ade54(_0x3313f6,_0x15db17,_0x4de90d,_0x1c9086){return _0x597b90(_0x4de90d,_0x15db17-0x153,_0x4de90d-0x76,_0x3313f6-0x7);}function _0x55aa55(_0x55027e,_0x1790dc,_0x15296d,_0x11f475){return _0x597b90(_0x11f475,_0x1790dc-0x12f,_0x15296d-0x99,_0x1790dc- -0x5ed);}const _0x580982={'zPfNf':_0x2ab84f[_0x55aa55(-0xaf,-0x87,-0x46,-0x20)],'aTDZs':function(_0x91f6fe,_0x434ba9){return _0x2ab84f['VgbJd'](_0x91f6fe,_0x434ba9);}};if(_0x2ab84f['ZrzyJ'](_0x55aa55(-0x8e,-0xe7,-0x174,-0xd2),_0x2ab84f[_0x4ade54(0x547,0x5d8,0x4a5,0x4c3)]))eventSource[_0x55aa55(-0xa4,-0x6b,-0xed,-0xba)+_0x55aa55(-0x141,-0x188,-0x169,-0x10e)](_0x57aab6,bananaGenerate);else{_0x2ef15b=_0x10c24a;const _0x42ffe0={};_0x42ffe0[_0x55aa55(-0x115,-0xd6,-0xbf,-0x43)+'pe']=_0x580982[_0x4ade54(0x50e,0x512,0x578,0x512)],_0x42ffe0[_0x55aa55(-0x25,-0x3a,0x4f,-0x1d)+'ion']=_0x55aa55(-0xb4,-0x44,-0xc,-0xa2)+_0x4c2b8a,_0x51c15b=_0x42ffe0,_0x1cc20c=_0x228088,_0x580982['aTDZs'](_0x2d3898,'[Banana]\x20使'+_0x55aa55(-0x54,-0x7a,-0x122,0x2f));}}),window[_0x597b90(0x4c4,0x40f,0x483,0x474)+_0x5ceac7(0x402,0x368,0x35d,0x3e1)+_0x597b90(0x40d,0x428,0x462,0x465)]=![],_0x2ab84f['VgbJd'](addLog,_0x2ab84f[_0x597b90(0x556,0x542,0x5cb,0x57e)]));}