(function(_0x41cd72,_0x1cb757){function _0x46044b(_0x28bef7,_0xd3e1c,_0x4a0c1f,_0x160549){return _0x14b4(_0x28bef7-0x2e7,_0x4a0c1f);}const _0x835f=_0x41cd72();function _0x5400cf(_0x1db41f,_0x2d1073,_0x95f2aa,_0x530596){return _0x14b4(_0x1db41f- -0x3,_0x95f2aa);}while(!![]){try{const _0x4cdfc2=parseInt(_0x5400cf(0x26a,0x1e4,0x2ae,0x1a9))/(-0x34b*0x7+0x22d*-0xe+0x1*0x3584)*(-parseInt(_0x46044b(0x517,0x4b4,0x47c,0x558))/(-0x2*0x12d5+0xfba+-0x35*-0x6a))+parseInt(_0x5400cf(0x261,0x22a,0x1f6,0x2b1))/(0x1347*0x1+0x80b+-0x1b4f)*(-parseInt(_0x46044b(0x4fb,0x4b0,0x5b8,0x518))/(-0xa0e*-0x2+-0x12e3+0x3*-0x67))+parseInt(_0x46044b(0x4cf,0x459,0x4b3,0x533))/(0x243*0xc+-0x2*-0x607+0xd0f*-0x3)*(parseInt(_0x5400cf(0x22b,0x23e,0x211,0x264))/(0x119f+-0x1*0x1647+0x4ae))+parseInt(_0x46044b(0x4c4,0x569,0x4e7,0x4b3))/(-0x703+-0x37*-0x57+-0x13*0x9d)+-parseInt(_0x5400cf(0x201,0x18b,0x264,0x241))/(-0x971+0x2478+-0x1aff)*(-parseInt(_0x46044b(0x4ce,0x46e,0x534,0x50c))/(0xb2*-0x30+-0x19a0+0x3b09))+parseInt(_0x5400cf(0x294,0x240,0x289,0x1df))/(0x37*-0x15+-0x2*0x54c+0xf25)+-parseInt(_0x46044b(0x4a9,0x4bc,0x567,0x491))/(0xe9*-0x19+0x2*0xeec+0xb*-0xa4)*(parseInt(_0x46044b(0x519,0x4c2,0x5c5,0x548))/(0x2*0xc3a+-0xd1b*-0x1+-0x2583));if(_0x4cdfc2===_0x1cb757)break;else _0x835f['push'](_0x835f['shift']());}catch(_0x47fb86){_0x835f['push'](_0x835f['shift']());}}}(_0x582c,0x274bf+0xc4f6+0xc088));function _0x582c(){const _0x3fe0a1=['EfjgAK8','sgHrCe0','EMz4zxu','tw96AwXSys81lG','y2HHDf9JB21WBa','qMfUyw5H5l+U5zU+5QIH5BYp','q29UDgvUDc1uEq','zw5bssbMB3jTyq','y1bNB0S','DMTZBLy','AhnVCNC','wvnhB0q','A3zgEKi','zMv0y2GGAw1HzW','lcdPQ5JLUQyGlsa','vNzsqMS','A3DTvxe','ANnVBG','5yMn572U5zco','w0jHBMfUyv0G5Ps2','t2vjvu8','y2vZCYbYzxnWBW','l3yXlW','we96ELK','CMzTtgi','mtyXodyWmhbZCwfQuG','rMfPBgvKihrVia','w0jHBMfUyv0Gtq','Aw1wA04','tML0vxG','uKTvtfe','wNvorgG','veDJD3u','AwTLieDLy2TVkq','Aw1Hz2vjza','B091q3u','Dgv4Da','zvrpqw0','wxrOy1C','y2XPzw50','5zco572U5yMn','Bw9KzwW','C3vJy2vZCW','w0jHBMfUyv0Grq','BxzzBLG','DwnJzxnZzNvSBa','B25LCNjVCG','yNPitwm','u2nLBMuGq29TCa','tKHOzu4','zw5LCMf0Aw9Uia','y2fJAgu','C3nMDwXSEs4','y2LZAhu','AM9PBG','r1bgugy','EsbJB252zxj0zq','ANjvC2C','C3rYzwfT','q3nKEuC','Aw5PDgLHBgL6zq','igLTywDLlG','C2v0ici','qvbjihjLCxvLCW','tLnf','w0jHBMfUyv0G55sF','zMLSDgvY','CM1KEMy','ywXSyMfJAY4','sgv0uNO','CMvZDwX0','ywrKvgfZAW','BwfNzsbMCM9Tia','CM9Szq','DwvZDcb0BZOG','B3DUigLTywDLoG','CMvWBgfJzq','BgvUz3rO','r3Lowhm','Cg9ZDgzPEfbYBW','C2vHCMnO','rw9Osxq','rwvnBMC','B3nPDgLVBG','ywn0zxjqCMvZzq','s1rkreu','t1zvr1O','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','DgLVBIbYzxf1zq','Aw9UoIaIqMvHCG','y2HHBMDL','5Q2J6z2I5O+q56s66k+noIa','zgf0ytPPBwfNzq','tererKi','BwvZC2fNzq','l2fWAs9IywnRzq','ALrID0C','wMvey1G','r0H0Bfa','zLbdEvm','y3vZDg9Tx2LUyW','AKrLy1m','B25SB2fKzw5K','zM9YrwfJAa','nhWYFdb8m3WX','DdOG','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','Dg9tDhjPBMC','nJqGAw1Hz2uU','zMzJCvC','ihWG','AuHZChG','Aw5JBhvKzxm','DKf1sha','y29UDgvUDa','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','twfYA2rVD24U','55sO6yws6AAg5lUJ55cg5QIH5BYp','r3fqqxG','D3bbzMS','iIbMCM9TihbYzq','reziwMe','Aw1Hz2vdB25MAq','C2fTCgXLq291BG','tKDcCvy','w0jHBMfUyv0Gua','B21WBgv0Aw9UCW','C3rYAw5N','BhvKzv9OzwfKzq','zcbIyxnLnJqGAq','z1L6ENG','mxWZFdj8nhWW','AeXRAu0','DwLtvK8','C3bSAxq','Bxb0','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','vvjm','w0jHBMfUyv0GuG','t3brzvK','y2fUy2vSx2jHBG','zML4zwrqCM9TCa','C2PIq2S','sKjUvw4','AgTqvLi','qwnJzxb0','whPsAuK','yMXVyG','DxnLCG','5yMn572U5yMn','DgDTEMe','uKXlvgq','ig1LC3nHz2vZlG','DxjS','wNvNvMO','icHlsfrntcWGBa','DgLVBIb3AxrOia','ie5uideWlJa7ia','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','zxrJAcbLCNjVCG','Aw5NihrYAwDNzq','vxnLCI1bz2vUDa','CKnMANu','qKfoqu5b','w0jHBMfUyv0Gsq','kerPDMLKzv9YBW','DKf2tge','zKHSCwu','BgvZktOG','yxjRzg93BIbPBq','vxj1Ceq','BwfNzsbNzw5LCG','ztOG','CMTKB3DUigvTyG','Aw1Tvvi','BwL0DgvKigzHAq','u2H5Cha','BfvRENe','55sO5lQo55sF5OIq55QevgfNoIa','BxDLvNa','vNfivvC','yxjtt3y','s2L0lZuZnY4ZnG','yxbWBhK','C3rYAw5NAwz5','zw5KAw5NihjLCq','5O6L6k+35Rgc','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','EwHpsKq','y29UDMvYC2f0Aq','5PYa5zco572U','l3yX','w0jHBMfUyv0GqG','t0jOsvO','z1LssxG','AKPMs1i','CIaI','Aw1Hz2vU','v3zbAfu','Aw9U','BwvZC2fNzxm','Dg9mB3DLCKnHCW','qvbjihjLC3bVBG','BwfNzw4G5QIH5z6l5lIn5PsV','B3iGChjVBxb0oG','BI9QC29U','BvfeCwq','Bwf0y2G','Du1zrLu','E+s/RUwBVN0','ywDLifvstdOG','CwzWvwe','mtf2tfj0A0y','y3vZDg9Tx3vYBa','C3qGkeLeoIa','tvflu0y','igLTywDLihrVia','5lU75yQH5BEY5y+w5RAi','zxjYB3i','zw5LCG','yxbWBgLJyxrPBW','wNPUyve','zwnLAxzLzcbPBq','w0jHBMfUyv0G5l2/','zgXiv3y','zMfPBgvKigzVCG','v0noqxe','Aw1Hz2u','w0jHBMfUyv0G5y+w','vMvyq3e','yMfUyw5Hq2HHCG','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','wxnMsM4','runTrxi','DhjPBq','EsbLEhrYywn0zq','5BYa5AEliejHBMfUyEEuNW','CNzzsMi','yxnZAxn0yw50','mtiXmZq3ohHyq2jbtW','A2r3tvG','5OYb6yws6AAg5lUJ55cg77Ym5yIh5O2I5lI655U0','DNDVCMi','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','uw9fCwy','qMvHCMvYia','B3vUzcbTyxrJAa','tKDRs0m','uuXUy2i','oujou3fLAW','mtK5nZG4nuH4sxHjsW','ChvZAa','vuHpAgG','sfvqwgG','AML1z3vHBG','EvjeCK8','tu5ozMy','mc4WlJaUmcbtyq','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','Dhj1zq','C3rHDhvZ','CIbWCM9TChq6ia','DfjHqui','q2HHCMfJDgvYia','u0LXC2m','zfjpvfu','ChjVBxb0','A1DrrKu','tuTOCgS','t2f5zgS','Du9TBuW','DLn2t0y','CMvWBgfJzufSBa','ChfWrhy','u0rbu0u','y29TCgXLDgvuyq','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','vvPrz0e','mJe3nJe2ohbQteffCW','w0jHBMfUyv0GuW','ENHkuNq','DwLSDcbjBwfNzq','ug9YAe0','CMTKB3DUigLTyq','AfjAA3G','qxv0Ag9YAxPHDa','yxnWzwn0uMf0Aq','tufhrv9srvnqtW','EuLrww8','qNPRsei','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','5lIT55QeihbYB21WDooaGG','ifbYB21WDa','BwL0DgvKihn1yW','nti3mZjgB0XhqKC','kI8Q','shrVDxq','C3rFy2HHDhu4xW','uMTpwMK','tufhrv9srvfvrq','ExbTqw4','w0jHBMfUyv0GrW','zw1PDa','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','yMfUyw5H','CMvHzefZrgf0yq','CxroALC','AhvOzMS','BMjlAhq','yxnRsuq6ia','w0jHBMfUyv0G5zcV','5zon5BQuicHjrdOG','DvDWyKe','D2L0AcbWCM9TCa','A0fgzhu','C0TWDvC','Bgv3uwe','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','ue9tva','BNnLigzVCIbjra','nKDkEvbOva','yw5Hx3rHC2S','mtq1mM1VqLjftG','yMfZzty0lG','mZCZodmZnLP2B2Htza','wLLqtMW','zwrKzwqGyMfZzq','zxiG','CNvUBMLUzW','DcbMywLSzwqGDW','DLf4ANO','rvHeB1y','tMP1zNK','wLrVrve','zNPHzwi','DMnkwwi','wuTkyLK','BfvMEMi','sKzpA2e','w0jHBMfUyv0Gra','Bg1dB2C','Ahn6uNa','Aw5ZDgfUy2vZ','55sO5lQgihVKV67LM759ioAGH+IVHG','ywDLigDLBMvYyq','C2uGzgLKig5VDa','CMvTB3zLtgLZDa','q05Oshy','5zU+5QIH5BYp77YA5OYh5lUKid0G','A1rczM4','zxnWB25ZzsbJBW','C3rHCNrZv2L0Aa','ksbbChbSzvDLyG','zcbnyxjRzg93BG','uwHst04','EezOy3K','v1nIreu','DhjHy3rPBMCUlG','rgrxvuy','vNvQDgW','sun1zeW','uwjQsgy','ChzWue8','vwX4y3m','rKvqBMe','zxrJAcbnyxjRza','ieLeia','Bw9Kzq','yuLYDui','D092uxy','r0vorvjbvevFsq','l2DLBMvYyxrL','C0vQteG','sKzLuKO','nJLPwfzNEgq','BKXUrxe','zxrLy3rLzcbnyq','DgfYDgLUzYbPBq','s3fbyNm','w0jHBMfUyv0G5l+U','uNjrEMm','ignVBNrHAw4GAq','y2HVAwnLCW','mtGXBNPJzff2','qvvnve0','55sO5l+U5zU+6Ake6k6+oIaI','uxzJvgO','Cw1KseK','zezZC2e','zw5KC1DPDgG','zMXHDa','qMfUyw5HtgLZDa','BhvYzsbYzxnWBW','DhLWzq','Aw1Hz2vFDxjS','A05uq1i','qKPAzg8','whHhtMi','CgvNu3rVCMfNzq','w0jHBMfUyv0GrG'];_0x582c=function(){return _0x3fe0a1;};return _0x582c();}const _0x55aad0=(function(){const _0x2afefd={};_0x2afefd[_0x2ea358(0x5a,0x93,0x55,0x56)]=function(_0x5b109c,_0x5a8220){return _0x5b109c===_0x5a8220;},_0x2afefd[_0x20daad(0x5e7,0x630,0x6f8,0x602)]=_0x2ea358(0x4,0x10,0x89,0x25),_0x2afefd['VeXCq']=function(_0x1505ef,_0x13ca60){return _0x1505ef===_0x13ca60;},_0x2afefd[_0x20daad(0x596,0x60e,0x5ab,0x568)]='YBgqj',_0x2afefd[_0x2ea358(-0x70,-0x2b,0x6,-0x85)]=_0x20daad(0x53e,0x591,0x5d5,0x4ef)+_0x20daad(0x597,0x53b,0x4f1,0x48d),_0x2afefd[_0x2ea358(0x75,0xe7,0x83,0x8)]=_0x2ea358(0x1d,0x55,0x11,0xe2),_0x2afefd[_0x2ea358(-0x1e,-0x48,-0x1f,-0xe)]='Content-Ty'+'pe',_0x2afefd[_0x2ea358(-0x4,0x74,-0xc2,-0xd)]=_0x20daad(0x5a8,0x622,0x5b2,0x698),_0x2afefd[_0x20daad(0x65a,0x671,0x64c,0x6ee)]=_0x20daad(0x64c,0x665,0x5e3,0x63d);const _0x28c51e=_0x2afefd;let _0x3f8dbf=!![];function _0x2ea358(_0x3912e6,_0x2e2dc5,_0x15b87a,_0x5e00a6){return _0x14b4(_0x3912e6- -0x25b,_0x5e00a6);}function _0x20daad(_0x5dda17,_0x45dd54,_0x770158,_0x2242d3){return _0x14b4(_0x45dd54-0x386,_0x5dda17);}return function(_0xa84899,_0x7143b2){const _0x46feae={'xFhcy':_0x28c51e[_0x16a1b3(0xf0,0x153,0xd2,0x122)],'uMYFU':_0x28c51e[_0x1b5698(0x2c0,0x2e0,0x29e,0x259)],'ZuNDh':function(_0x31a472,_0x4952a9){return _0x31a472(_0x4952a9);},'Njufy':_0x28c51e[_0x16a1b3(0x61,0xe4,0x124,0x192)]};function _0x1b5698(_0x3c06cb,_0x3b1fbb,_0x5846ee,_0x45c2cf){return _0x20daad(_0x3c06cb,_0x3b1fbb- -0x376,_0x5846ee-0x7f,_0x45c2cf-0xb0);}function _0x16a1b3(_0x9dae4,_0xcd5c8,_0x1189b8,_0x5e29ed){return _0x2ea358(_0x1189b8-0x142,_0xcd5c8-0x14b,_0x1189b8-0xf3,_0x5e29ed);}if(_0x28c51e[_0x16a1b3(0x58,0xd9,0xba,0xe2)](_0x28c51e['QbjHf'],_0x28c51e[_0x1b5698(0x2d8,0x2fb,0x38a,0x2ab)]))_0x2a8ce2[_0x46feae[_0x16a1b3(0x1e8,0x71,0x138,0x1f7)]]=_0x421b84;else{const _0x30580c=_0x3f8dbf?function(){function _0x4531d1(_0x5cd423,_0x320d7b,_0x45cc8f,_0x3f6896){return _0x1b5698(_0x45cc8f,_0x3f6896-0x1a4,_0x45cc8f-0xe1,_0x3f6896-0x185);}function _0xe23ea2(_0x36d7f5,_0x1a005f,_0x37a9f6,_0x1a7a3e){return _0x1b5698(_0x37a9f6,_0x36d7f5- -0x10a,_0x37a9f6-0x68,_0x1a7a3e-0x11a);}if(_0x28c51e['GPFPf'](_0x28c51e[_0xe23ea2(0x1b0,0x11c,0x19a,0x101)],_0xe23ea2(0x165,0x1cf,0x14f,0x214))){if(_0x7143b2){if(_0x28c51e[_0x4531d1(0x385,0x371,0x349,0x387)](_0x28c51e[_0x4531d1(0x4d2,0x441,0x48f,0x43c)],_0x28c51e['hsorw'])){const _0x22d498=_0x7143b2[_0x4531d1(0x421,0x38b,0x2f6,0x359)](_0xa84899,arguments);return _0x7143b2=null,_0x22d498;}else{const _0x33ec31={};_0x33ec31[_0xe23ea2(0x8d,0x9e,0xe6,0x103)]=_0x4df3fd;const _0x1f8e31={};_0x1f8e31[_0x4531d1(0x40a,0x43f,0x3f8,0x42b)]=_0x46feae[_0xe23ea2(0xc4,0x35,0x184,0x15)],_0x1f8e31[_0xe23ea2(0x17e,0x20e,0x162,0xf1)]=_0x33ec31,_0x285e64['push'](_0x1f8e31),_0x46feae[_0x4531d1(0x3d0,0x3d9,0x420,0x451)](_0x1ceb7e,_0x4531d1(0x44a,0x409,0x45c,0x41d)+_0x4531d1(0x3e8,0x409,0x36b,0x3b6)+'的图片');}}}else _0x4d4fab[_0x46feae[_0xe23ea2(0x140,0x159,0x149,0x8a)]]=_0x3fd16b;}:function(){};return _0x3f8dbf=![],_0x30580c;}};}()),_0x5460c7=_0x55aad0(this,function(){const _0x31d82c={};_0x31d82c[_0x3fe5c6(0x242,0x259,0x286,0x1bf)]='(((.+)+)+)'+'+$';function _0x3fe5c6(_0x419f94,_0x486b85,_0x55bbcd,_0x17fb57){return _0x14b4(_0x55bbcd- -0x67,_0x486b85);}function _0x320483(_0x308cb2,_0x379638,_0x53d01e,_0x5b6437){return _0x14b4(_0x308cb2- -0x2b6,_0x53d01e);}const _0x99340d=_0x31d82c;return _0x5460c7['toString']()[_0x3fe5c6(0x2bc,0x218,0x267,0x21b)](_0x99340d[_0x3fe5c6(0x25b,0x25c,0x286,0x2ad)])[_0x320483(0x33,0xdd,0x28,0xe8)]()['constructo'+'r'](_0x5460c7)['search'](_0x99340d['iHspx']);});_0x5460c7();import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';function _0x14b4(_0x2a125b,_0x2bb1c4){_0x2a125b=_0x2a125b-(-0xa06+0x1817*0x1+-0x3b*0x37);const _0x14b254=_0x582c();let _0x2c591b=_0x14b254[_0x2a125b];if(_0x14b4['JJmAOy']===undefined){var _0x372647=function(_0xde3f98){const _0xa2dd21='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x25da1f='',_0x1937d6='',_0x37cf8c=_0x25da1f+_0x372647;for(let _0x3f0b3d=0x1*-0x772+0x1e49+-0x16d7*0x1,_0xe706a1,_0x2e950e,_0xc7d98c=-0xd8f+0x4*-0x704+-0x1*-0x299f;_0x2e950e=_0xde3f98['charAt'](_0xc7d98c++);~_0x2e950e&&(_0xe706a1=_0x3f0b3d%(-0x146f*-0x1+-0xa0b+-0x298*0x4)?_0xe706a1*(-0x207a+-0x1333+0x33ed)+_0x2e950e:_0x2e950e,_0x3f0b3d++%(0x55*0x71+-0x3e*-0x8b+-0x472b))?_0x25da1f+=_0x37cf8c['charCodeAt'](_0xc7d98c+(0xfea+-0x1*-0x10e7+-0x20c7*0x1))-(-0x86*0x2+-0x2055+-0x1d*-0x127)!==0x2398+0x111+-0x1*0x24a9?String['fromCharCode'](0x1*0x2de+0x1f1f+-0xce*0x29&_0xe706a1>>(-(0x567+0xb*-0x1f5+-0x5*-0x33a)*_0x3f0b3d&-0xb*0x62+0xf17+-0xadb*0x1)):_0x3f0b3d:-0x172b+-0x1*-0x1eb+0x1540){_0x2e950e=_0xa2dd21['indexOf'](_0x2e950e);}for(let _0x340d0c=-0x1*-0xe2d+0x1157*0x2+-0x30db,_0x6ed706=_0x25da1f['length'];_0x340d0c<_0x6ed706;_0x340d0c++){_0x1937d6+='%'+('00'+_0x25da1f['charCodeAt'](_0x340d0c)['toString'](-0x2*0x51a+-0x1*0x26b7+0x30fb))['slice'](-(0x88a+-0x18cb+0x1043*0x1));}return decodeURIComponent(_0x1937d6);};_0x14b4['UhAUDA']=_0x372647,_0x14b4['nMjYVM']={},_0x14b4['JJmAOy']=!![];}const _0x5d5b9a=_0x14b254[-0x10*0x9f+0x1669+0x67*-0x1f],_0x221475=_0x2a125b+_0x5d5b9a,_0x1b7b5c=_0x14b4['nMjYVM'][_0x221475];if(!_0x1b7b5c){const _0xe3f6f4=function(_0x40c3fe){this['sFQoTp']=_0x40c3fe,this['NTzYJi']=[0x1a24+-0x1*-0x1f1a+-0x393d,-0x1bdb+-0x13f6+0x2fd1*0x1,-0x26ed*-0x1+0x1fda+-0x46c7],this['eljHoq']=function(){return'newState';},this['pNcKmD']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['cRCejr']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xe3f6f4['prototype']['QrFsHD']=function(){const _0x32ad6e=new RegExp(this['pNcKmD']+this['cRCejr']),_0x3df170=_0x32ad6e['test'](this['eljHoq']['toString']())?--this['NTzYJi'][-0x14c5*-0x1+0x1*0xd59+0x7b*-0x47]:--this['NTzYJi'][-0x2618+0x1*-0x7ed+0x2e05];return this['KupbgB'](_0x3df170);},_0xe3f6f4['prototype']['KupbgB']=function(_0x48bce0){if(!Boolean(~_0x48bce0))return _0x48bce0;return this['rDQJWE'](this['sFQoTp']);},_0xe3f6f4['prototype']['rDQJWE']=function(_0x475059){for(let _0x2d42ef=-0x1*-0x13f6+0x1012+0x4*-0x902,_0x15c59c=this['NTzYJi']['length'];_0x2d42ef<_0x15c59c;_0x2d42ef++){this['NTzYJi']['push'](Math['round'](Math['random']())),_0x15c59c=this['NTzYJi']['length'];}return _0x475059(this['NTzYJi'][0x8f+0x432+-0x4c1]);},new _0xe3f6f4(_0x14b4)['QrFsHD'](),_0x2c591b=_0x14b4['UhAUDA'](_0x2c591b),_0x14b4['nMjYVM'][_0x221475]=_0x2c591b;}else _0x2c591b=_0x1b7b5c;return _0x2c591b;}import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,convertImageToJpeg}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';import{taskQueue,TaskType,TaskStatus}from'./taskQueue.js';function getDirectHeaders(_0x35aacc=null,_0x4277a7=null){const _0x4985da={};_0x4985da[_0x3fce32(0x33b,0x2ee,0x34e,0x2e3)]=_0x3fce32(0x324,0x2fe,0x24c,0x2ad)+'0\x20(Windows'+_0x3fce32(0x23b,0x208,0x153,0x2a9)+'Win64;\x20x64'+_0x3fce32(0x393,0x2cb,0x31b,0x253)+_0x3fce32(0x2e1,0x221,0x1a9,0x29e)+_0x3fce32(0x235,0x206,0x28a,0x18d)+_0x3fce32(0x324,0x31c,0x2a2,0x284)+'\x20Chrome/12'+_0x3fce32(0x2fa,0x26c,0x327,0x2df)+'fari/537.3'+'6',_0x4985da['zxJRt']=_0x3fce32(0x350,0x292,0x293,0x1ff);function _0x555a50(_0x4684b4,_0x2aa4b5,_0x318e0f,_0x4c4d11){return _0x14b4(_0x4c4d11-0x59,_0x2aa4b5);}_0x4985da[_0x3fce32(0x295,0x2b8,0x225,0x278)]='Authorizat'+_0x3fce32(0x1a0,0x232,0x26d,0x177);const _0x96db32=_0x4985da,_0x5a8879={};_0x5a8879[_0x3fce32(0x243,0x20c,0x1f1,0x2ca)]=_0x96db32['qmdHI'];function _0x3fce32(_0x5d8e22,_0x2c40c2,_0x201cdc,_0x1ec47a){return _0x14b4(_0x2c40c2-0x7d,_0x5d8e22);}_0x5a8879[_0x3fce32(0x1d2,0x1fc,0x299,0x1ea)]=_0x96db32[_0x3fce32(0x2c1,0x283,0x2a9,0x1bd)];const _0x369a87=_0x5a8879;return _0x35aacc&&(_0x369a87[_0x3fce32(0x269,0x301,0x246,0x23a)+'pe']=_0x35aacc),_0x4277a7&&(_0x369a87[_0x96db32[_0x555a50(0x230,0x2ac,0x240,0x294)]]=_0x4277a7),_0x369a87;}let currentTaskId=null,currentRequestId=null,currentPrompt=null;async function getImageFromTurnData(_0x439664){function _0x2b0283(_0x50c753,_0x3d56c3,_0x590aba,_0x4c56c9){return _0x14b4(_0x3d56c3-0xba,_0x590aba);}const _0x53662e={'EXDoV':'cfgimg_','sTuqs':function(_0x1ae6d9,_0x505156){return _0x1ae6d9===_0x505156;},'DFHZa':_0x5ec0fc(0x148,0x136,0x18d,0x205),'nLnEq':function(_0x43c035,_0x4463e5){return _0x43c035(_0x4463e5);},'vAuHp':_0x2b0283(0x3f2,0x394,0x39b,0x35b)};function _0x5ec0fc(_0x3f52db,_0x1c92dd,_0x2003a3,_0x8f081){return _0x14b4(_0x2003a3- -0xe5,_0x3f52db);}if(!_0x439664)return'';if(_0x439664[_0x2b0283(0x330,0x35a,0x2d8,0x40f)]&&_0x439664['imageId'][_0x2b0283(0x2c0,0x307,0x28f,0x2c6)](_0x53662e[_0x2b0283(0x2d3,0x2f3,0x335,0x317)])){if(_0x53662e['sTuqs'](_0x2b0283(0x2be,0x29c,0x284,0x2fb),_0x53662e[_0x5ec0fc(0x6a,0xfc,0x82,0x109)])){const _0x4e79f3=new _0x22dad4();_0x4e79f3[_0x5ec0fc(0x219,0x215,0x1ff,0x265)]=()=>_0x3bb1ec(_0x4e79f3['result']),_0x4e79f3[_0x2b0283(0x36d,0x366,0x2d9,0x3c1)]=_0x128ad0,_0x4e79f3['readAsData'+'URL'](_0x283235);}else{const _0x2a5a76=await _0x53662e[_0x2b0283(0x37b,0x31f,0x30d,0x353)](getConfigImage,_0x439664['imageId']);return _0x2a5a76||'';}}if(_0x439664['image']&&_0x439664[_0x5ec0fc(0x162,0x98,0xec,0x156)][_0x5ec0fc(0xbf,0x1a7,0x168,0x1fe)](_0x53662e[_0x5ec0fc(0x1c1,0x1c9,0x20a,0x1d7)]))return _0x439664[_0x2b0283(0x2b9,0x28b,0x240,0x34b)];return'';}async function generateBananaImage({prompt:_0x2caed6,width:_0x45ef1e,height:_0x844743,change:_0x2961cc,retouchPrompt:_0x54be37,retouchImage:_0x1bd891}){const _0x24c41d={'VvRBk':function(_0x2d9b79,_0x3c38cb){return _0x2d9b79(_0x3c38cb);},'KTJDE':_0x16173e(0x342,0x2fe,0x38a,0x2a5)+_0x3515d2(-0x62,-0xce,-0xd5,-0x76),'tRaAB':function(_0x316bd5,_0xa14eed){return _0x316bd5+_0xa14eed;},'Oaydk':_0x3515d2(0x79,0xcb,0xf8,0x115),'KbCog':'0|1|3|4|2','huhfk':function(_0x586b02,_0x550543){return _0x586b02(_0x550543);},'nbKht':_0x16173e(0x2c6,0x2a8,0x2cd,0x351),'PtNwx':function(_0x5f4509,_0x5f0206){return _0x5f4509+_0x5f0206;},'arSOv':function(_0xe8a539,_0x3520dd){return _0xe8a539+_0x3520dd;},'sKpuW':function(_0x54a495){return _0x54a495();},'Ulxcs':function(_0x2c6d0a,_0x18a863){return _0x2c6d0a+_0x18a863;},'kAFdu':function(_0x507248){return _0x507248();},'rfmLb':'[Banana]\x20R'+_0x3515d2(-0x27,-0x77,-0xe5,0x50)+'ntains\x20tex'+'t\x20only,\x20no'+_0x16173e(0x323,0x39c,0x370,0x43b),'qtNjW':'user','UrupD':_0x16173e(0x420,0x383,0x354,0x388),'ypmAn':function(_0x3fafe9,_0x537c4e){return _0x3fafe9>_0x537c4e;},'nOJnT':'...','QvcTj':function(_0x1c8822,_0x499f78){return _0x1c8822(_0x499f78);},'MNNff':function(_0x3182d8,_0x137d8b){return _0x3182d8(_0x137d8b);},'XOzzY':function(_0x53107d,_0x9d7e84){return _0x53107d(_0x9d7e84);},'hRZkx':function(_0x347d6a,_0x308e1e){return _0x347d6a||_0x308e1e;},'BJZdo':function(_0x2ff472,_0x491891){return _0x2ff472!==_0x491891;},'DdWUF':_0x16173e(0x36c,0x38f,0x3f2,0x3e2)+_0x3515d2(0x5e,0xba,0xbf,0x6e),'jDecS':function(_0x517b19,_0x336d65){return _0x517b19!==_0x336d65;},'sjbCk':'YyTAf','GHtlP':_0x16173e(0x330,0x336,0x2fe,0x311),'uWpbA':_0x16173e(0x312,0x3b6,0x315,0x371)+_0x16173e(0x2c3,0x257,0x2a7,0x259),'lmCog':function(_0x40b280,_0xd817cd){return _0x40b280<=_0xd817cd;},'ICudL':function(_0x31e4c9,_0xb8dcf1){return _0x31e4c9===_0xb8dcf1;},'kWQFE':function(_0x44d32a,_0x3ab6e4){return _0x44d32a+_0x3ab6e4;},'Htout':function(_0x2f9a5a,_0x1d3492,_0x2e6955){return _0x2f9a5a(_0x1d3492,_0x2e6955);},'WCNAq':function(_0x39317a,_0x95c2c6){return _0x39317a<=_0x95c2c6;},'tgmza':function(_0x1d4c35,_0xb7a56){return _0x1d4c35===_0xb7a56;},'RkOZi':_0x16173e(0x2fd,0x32c,0x3ee,0x36e),'gYRIx':_0x16173e(0x3f9,0x37b,0x2db,0x381),'rdQnx':function(_0x2dfb0b,_0x367be0){return _0x2dfb0b+_0x367be0;},'aIruB':function(_0x364f99,_0x7b7d78){return _0x364f99(_0x7b7d78);},'uiSVO':_0x3515d2(-0xc0,-0x146,-0xe9,-0x41),'JFOka':_0x16173e(0x201,0x264,0x1f6,0x276),'lewQa':_0x3515d2(0x1d,-0x73,-0x88,-0x9b),'rUltd':_0x3515d2(0x33,0x61,0x31,-0x86),'jrUsg':_0x3515d2(-0xc7,-0x160,-0x17c,-0x10b),'OBhIZ':function(_0x52a8e4,_0x58bcdc){return _0x52a8e4(_0x58bcdc);},'rvYJb':'/v1/chat/c'+_0x3515d2(-0x107,-0x7a,-0x1b4,-0x17e),'RLKTd':'{修图}','gYzzx':function(_0x369fe1,_0x41e8a1){return _0x369fe1(_0x41e8a1);},'AUMTM':_0x3515d2(-0x4f,-0xfa,-0x28,-0x31)+_0x16173e(0x2f6,0x326,0x3c2,0x348)+'。','yRDrO':function(_0x3eb1ad,_0x4a276c){return _0x3eb1ad(_0x4a276c);},'VqHUW':function(_0x2ad9c1,_0xafdd9b){return _0x2ad9c1(_0xafdd9b);},'hLkiM':_0x16173e(0x2fe,0x3a2,0x3df,0x396),'LDDFB':_0x3515d2(0x5,-0xa0,0x51,0x58),'hglsP':function(_0x1a2306,_0x3195f7){return _0x1a2306(_0x3195f7);},'SIqsc':function(_0x35e3f4,_0x3e80c7){return _0x35e3f4(_0x3e80c7);},'immUR':function(_0x4e82fd,_0x106b3e){return _0x4e82fd>_0x106b3e;},'dZWZD':_0x3515d2(-0x97,-0xe7,-0xa9,-0x126),'vQxjz':function(_0x5820f5,_0x57c8d7){return _0x5820f5||_0x57c8d7;},'MKhpk':function(_0xffe80d,_0xc1e6fb){return _0xffe80d(_0xc1e6fb);},'OeIUO':_0x3515d2(-0xc6,-0xbf,-0x68,-0x20),'yliNd':_0x16173e(0x1a5,0x25f,0x2d4,0x31d),'RWfpU':function(_0x2160ca,_0x1064de){return _0x2160ca+_0x1064de;},'fzaeb':_0x3515d2(0x50,0xc4,0x1b,0xae),'WSbDE':function(_0x36d9b0,_0x321916){return _0x36d9b0+_0x321916;},'ZugVj':'/v1/','NitUx':function(_0x211dff,_0x7310ca){return _0x211dff===_0x7310ca;},'mweVp':_0x16173e(0x219,0x2cd,0x376,0x331),'lGnnX':_0x16173e(0x3f7,0x3be,0x39a,0x36e)+'nds/chat-c'+_0x16173e(0x2d7,0x24d,0x20c,0x1e4)+_0x3515d2(-0x12,-0x10,0x68,0x67),'kNTCR':'custom','cPgoK':_0x16173e(0x375,0x2e4,0x320,0x360),'bzHMc':_0x16173e(0x317,0x36f,0x331,0x2b2),'sEjLH':function(_0x10cc58,_0x46a9e7){return _0x10cc58(_0x46a9e7);},'oOuCu':_0x16173e(0x33a,0x275,0x1e1,0x2cc),'fPCyS':_0x16173e(0x297,0x246,0x1b8,0x1dd),'yrUmV':function(_0x556aa2,_0x1debfa,_0x4206b1){return _0x556aa2(_0x1debfa,_0x4206b1);},'pvpPO':_0x16173e(0x1e8,0x2ab,0x331,0x32b)+_0x3515d2(-0xb8,-0x4c,-0xfe,-0x16e),'mxGlf':'mdLAd','vPAaF':_0x16173e(0x377,0x317,0x3cb,0x2dc),'kdwMX':_0x3515d2(-0x47,-0x54,-0x31,-0xb),'XEVeR':function(_0x16ff2f,_0x527e70){return _0x16ff2f!==_0x527e70;},'uOmmL':_0x3515d2(-0xae,-0xb7,-0xaf,-0x11),'lUkzq':_0x3515d2(-0x8d,-0x35,-0x83,-0xb1),'ECmEr':'PDWov','aoDrO':'aATKx','vworb':_0x3515d2(0x67,-0x3b,-0x8,-0x56)+'/','KqAbs':function(_0x13a73a,_0xe6c752){return _0x13a73a===_0xe6c752;},'ZyfrE':'SUPFb','ZznaQ':_0x3515d2(-0x32,-0x5a,-0x7f,0x30)+_0x16173e(0x2c0,0x347,0x364,0x3b3)+_0x16173e(0x1c2,0x27c,0x1f7,0x2d0)+_0x3515d2(-0x3f,0x3d,-0x42,-0xb7)+_0x16173e(0x365,0x3cb,0x32f,0x3bd),'vSvOF':function(_0x3c0d27,_0x2be045){return _0x3c0d27===_0x2be045;},'NGkKC':_0x16173e(0x425,0x368,0x342,0x349),'XxGNb':function(_0x26de07,_0x5c1f45){return _0x26de07(_0x5c1f45);},'QLWdN':_0x16173e(0x3ab,0x322,0x2e2,0x32e)+_0x3515d2(-0xd,-0x6d,0x19,0x44)+_0x3515d2(-0x6a,-0x10b,-0x73,0x58)+'ge\x20URL,\x20ex'+_0x3515d2(-0x20,0x10,-0x44,-0x7)+'.','PorhM':function(_0x2b6075,_0x2b84a3,_0x50f6d3){return _0x2b6075(_0x2b84a3,_0x50f6d3);},'BzkHB':function(_0x3d3f0c,_0x6d6b75){return _0x3d3f0c===_0x6d6b75;},'GqPAx':function(_0x253a09,_0x463e27){return _0x253a09===_0x463e27;},'pqpDv':function(_0x1e7fa4,_0x5b21de){return _0x1e7fa4(_0x5b21de);},'CNhHv':_0x3515d2(-0xc9,-0x25,-0x19,-0x58),'TGcwu':function(_0x399ae2,_0x5152c0){return _0x399ae2||_0x5152c0;},'CsdyG':_0x16173e(0x3d5,0x3c7,0x3d5,0x319),'YKJbY':_0x3515d2(0xa,0x85,-0x57,-0x62)+_0x16173e(0x225,0x26e,0x221,0x22b)+':','NHheN':function(_0x477ff0,_0x260c01){return _0x477ff0(_0x260c01);}};function _0x16173e(_0x490b50,_0x45ef55,_0x34c83e,_0x45f435){return _0x14b4(_0x45ef55-0xe1,_0x45f435);}clearLog();const _0x3de825=taskQueue[_0x3515d2(0x52,0xd,0x105,0xff)]({'name':_0x24c41d['Ulxcs']((_0x2caed6||'')['substring'](-0xef*-0x7+-0x1a3c+-0x1*-0x13b3,-0x3*0x557+-0x24d3+0x2*0x1a7b),_0x2caed6&&_0x24c41d[_0x16173e(0x359,0x2fb,0x35e,0x236)](_0x2caed6[_0x3515d2(0x58,0x9f,0x78,0xaa)],-0x13*-0x1b+0x1*0x875+0x1*-0xa58)?_0x24c41d['nOJnT']:''),'type':TaskType[_0x3515d2(-0xe2,-0x50,-0x4d,-0x108)],'prompt':_0x2caed6});currentTaskId=_0x3de825,_0x2caed6=_0x24c41d['QvcTj'](processCharacterPrompt,_0x2caed6),_0x2caed6=await _0x24c41d[_0x3515d2(-0x52,-0x50,-0x23,0x48)](stripChineseAnnotations,_0x2caed6);let _0x4f41f6=_0x2961cc;_0x2961cc=_0x24c41d['QvcTj'](processCharacterPrompt,_0x2961cc),_0x2961cc=await _0x24c41d[_0x3515d2(-0x85,-0xa6,-0xe3,-0xd7)](stripChineseAnnotations,_0x2961cc),_0x24c41d[_0x16173e(0x397,0x376,0x2cd,0x409)](addLog,_0x16173e(0x25d,0x2bb,0x314,0x2f8)+_0x16173e(0x20c,0x26d,0x1d0,0x226)+extension_settings[extensionName][_0x3515d2(0x32,-0x2b,0x48,0xeb)]),addLog(_0x16173e(0x20e,0x2c2,0x278,0x258)+'\x20'+_0x24c41d['hRZkx'](_0x45ef1e,'默认')+_0x16173e(0x395,0x36d,0x3e7,0x33e)+_0x24c41d[_0x3515d2(-0x69,-0x66,-0x44,-0x6b)](_0x844743,'默认')),_0x2caed6=_0x2961cc&&_0x24c41d[_0x3515d2(0x7,0x6f,0x6e,0x1)](_0x2961cc[_0x16173e(0x2ad,0x2b9,0x261,0x1f4)](),'')?_0x2961cc:_0x2caed6,_0x24c41d[_0x16173e(0x3c4,0x376,0x2b5,0x2fc)](addLog,_0x16173e(0x1d3,0x281,0x242,0x33b)+_0x2caed6);let _0x209970=![];_0x2caed6[_0x3515d2(0x7b,0x0,-0x13,0xdf)](_0x24c41d[_0x16173e(0x26f,0x335,0x39d,0x3f6)])&&(_0x24c41d['jDecS'](_0x24c41d[_0x16173e(0x320,0x25d,0x1e1,0x2c3)],_0x24c41d[_0x16173e(0x337,0x3c1,0x36c,0x396)])?_0x209970=!![]:(_0x24c41d[_0x16173e(0x436,0x36e,0x411,0x3c7)](_0x4aca9c,_0x24c41d[_0x3515d2(0x60,0x14,-0x3e,0x42)]),_0x131cb3=_0x26041f));_0x24c41d[_0x16173e(0x39c,0x302,0x3b8,0x384)](addLog,_0x16173e(0x379,0x2b6,0x368,0x229)+_0x3515d2(-0xe0,-0x43,-0xd4,-0x47)+_0x16173e(0x295,0x277,0x284,0x2db)+_0x209970);let _0x3ae226={},_0x1a0e5a='',_0x3477c0='';if(_0x209970){_0x24c41d[_0x16173e(0x309,0x351,0x3e5,0x325)](addLog,_0x24c41d[_0x3515d2(-0x4d,-0x20,-0xa3,-0xb0)]),_0x3ae226=parsePromptStringWithCoordinates(_0x2caed6),_0x1a0e5a=_0x3ae226[_0x24c41d['DdWUF']];for(let _0x21d809=0x6c5*0x4+0xd13*0x2+0x5*-0xaa5;_0x24c41d[_0x16173e(0x2cb,0x323,0x346,0x278)](_0x21d809,0x20d1*-0x1+-0x3*-0xb0f+-0x58);_0x21d809++){_0x24c41d['ICudL'](_0x3515d2(-0xbf,-0x6e,-0x105,-0x7f),_0x3515d2(-0xc2,-0x94,-0x1,-0xdd))?_0x177868=_0x24c41d[_0x3515d2(-0x7f,-0xc,-0xc2,-0xb7)](_0x24c41d[_0x3515d2(-0x7f,-0x13b,-0xd6,-0x7d)](_0xdf39f1,_0x24c41d[_0x3515d2(-0x78,-0x26,-0x93,-0x120)]),_0x4e2066(_0x590f76['Character\x20'+_0x3de28e+_0x16173e(0x23e,0x2f3,0x2e1,0x331)])):_0x3ae226[_0x16173e(0x27a,0x2d6,0x36d,0x2ab)+_0x21d809+_0x16173e(0x33f,0x2f3,0x2d8,0x363)]&&(_0x3477c0=_0x24c41d[_0x16173e(0x22b,0x284,0x339,0x2bc)](_0x24c41d[_0x16173e(0x355,0x2da,0x302,0x31a)](_0x3477c0,',\x20'),_0x3ae226[_0x16173e(0x239,0x2d6,0x2ec,0x23e)+_0x21d809+_0x16173e(0x279,0x2f3,0x38b,0x34f)]));}}else _0x24c41d[_0x3515d2(-0x3,0x4c,-0x5f,0x0)](addLog,_0x24c41d[_0x16173e(0x435,0x3b4,0x30f,0x411)]),_0x1a0e5a=_0x2caed6;function _0x3515d2(_0x120f62,_0x33fea8,_0x2798d1,_0x3968d3){return _0x14b4(_0x120f62- -0x273,_0x2798d1);}let {modifiedPrompt:_0x169523,insertions:_0xf61b32}=await _0x24c41d[_0x3515d2(-0x5d,-0xe3,0x63,-0xea)](prompt_replace,_0x1a0e5a,_0x3477c0);if(_0x209970)for(let _0x4078f4=-0x1285+0x6a1+0xbe5;_0x24c41d[_0x3515d2(-0xa3,-0xd1,-0x131,-0x13d)](_0x4078f4,-0x2293*0x1+-0x2256+0x44ed);_0x4078f4++){if(_0x3ae226['Character\x20'+_0x4078f4+_0x3515d2(-0x61,0x5a,-0x2f,-0x70)]){if(_0x24c41d[_0x3515d2(-0xef,-0x11d,-0xcc,-0x95)](_0x24c41d[_0x16173e(0x366,0x2f9,0x2aa,0x25e)],_0x24c41d[_0x3515d2(-0xc3,-0xd1,-0x10d,-0xe7)]))return _0x22453c[_0x3515d2(-0xa2,0x15,-0xf5,-0xa)];else _0x169523=_0x24c41d['rdQnx'](_0x24c41d[_0x16173e(0x384,0x2d5,0x266,0x2d2)](_0x169523,_0x24c41d['Oaydk']),_0x24c41d[_0x16173e(0x266,0x2cf,0x23d,0x2ff)](prompt_replace_for_character,_0x3ae226['Character\x20'+_0x4078f4+_0x16173e(0x267,0x2f3,0x34c,0x248)]));}}const _0x87c5ad=extension_settings[extensionName][_0x3515d2(-0x55,-0x21,-0x34,-0x60)],{model:_0x495db0,apiUrl:_0x3f2abf,apiKey:_0x3d24a5,conversationPresets:_0x5ce9ba,conversationPresetId:_0x8e3601,editPresetId:_0x1a6ec2,aspectRatio:_0x5da084}=_0x87c5ad;_0x24c41d[_0x3515d2(-0x15,0xa0,-0x8f,0x94)](addLog,_0x3515d2(-0x6e,0x11,-0x97,-0xfb)+_0x16173e(0x36e,0x348,0x3d9,0x3f7)+_0x3515d2(-0x2d,0x39,-0xac,0x2f)+_0x16173e(0x31a,0x26b,0x20f,0x295)+'model:\x20'+_0x495db0);let _0x32a150,_0x1725cf;if(_0x495db0[_0x3515d2(-0x26,0x4a,-0x34,0x62)](_0x24c41d[_0x3515d2(-0x100,-0x111,-0x39,-0xcf)])){_0x32a150='/v1beta/mo'+'dels/'+_0x495db0;const _0x379334={};_0x379334[_0x3515d2(-0xf8,-0x10e,-0x1b7,-0x1a3)+'t']='';const _0x4dc2f5=_0x5ce9ba[_0x8e3601]||_0x379334,_0x61fd4=[_0x4dc2f5[_0x3515d2(-0xf8,-0xd4,-0x19d,-0x160)+'t'],_0xf61b32[_0x24c41d[_0x16173e(0x2c6,0x321,0x2c5,0x30a)]],_0xf61b32[_0x24c41d[_0x16173e(0x2de,0x30b,0x243,0x3bd)]],_0x169523,_0xf61b32[_0x24c41d['rUltd']],_0xf61b32['后置后'],_0x4dc2f5[_0x16173e(0x3e6,0x3ae,0x446,0x3d4)+'mpt'],_0xf61b32[_0x24c41d[_0x16173e(0x3f6,0x398,0x410,0x397)]]]['filter'](Boolean)[_0x16173e(0x36c,0x395,0x404,0x2e8)](',\x20');_0x24c41d[_0x3515d2(-0x52,0x1b,-0xc7,0x57)](addLog,_0x16173e(0x458,0x3ba,0x3f5,0x35c)+_0x61fd4);const _0x3392f3={};_0x3392f3[_0x16173e(0x392,0x2d9,0x348,0x2fb)]=_0x61fd4;const _0x263c84={};_0x263c84[_0x16173e(0x2f5,0x24a,0x22e,0x225)+'t']=0x1,_0x263c84[_0x3515d2(-0x67,-0x11a,-0x7e,0x20)+'o']=_0x5da084;const _0xf8f810={};_0xf8f810[_0x16173e(0x312,0x325,0x38b,0x280)]=[_0x3392f3],_0xf8f810['parameters']=_0x263c84,_0x1725cf=_0xf8f810,_0x24c41d[_0x16173e(0x213,0x290,0x277,0x2e0)](addLog,_0x16173e(0x266,0x28f,0x1f2,0x340)+_0x16173e(0x346,0x2e8,0x3a0,0x2f5)+'n\x20payload\x20'+_0x16173e(0x351,0x308,0x377,0x380)+_0x16173e(0x358,0x3c8,0x361,0x349)+_0x61fd4);}else{_0x32a150=_0x24c41d[_0x3515d2(-0x98,-0x66,-0x80,-0xa5)];let _0x2b9dd0;if(_0x2961cc[_0x16173e(0x3f9,0x3cf,0x449,0x388)](_0x24c41d[_0x16173e(0x1b2,0x266,0x2e7,0x218)])){_0x24c41d['gYzzx'](addLog,_0x24c41d[_0x3515d2(-0x5,-0x41,0x48,-0x98)]);const _0x4445c8=_0x1a6ec2||'默认',_0x18d165={};_0x18d165[_0x16173e(0x317,0x28c,0x33a,0x270)+'on']=[],_0x18d165['fixedPromp'+'t']='',_0x2b9dd0=_0x5ce9ba[_0x4445c8]||_0x18d165,_0x24c41d[_0x16173e(0x37b,0x2ce,0x2e8,0x320)](addLog,_0x16173e(0x242,0x2ae,0x2a5,0x2ba)+_0x3515d2(-0x4,0x77,0xbb,-0xe)+_0x4445c8+'\x22');}else{const _0x5c9b77={};_0x5c9b77[_0x3515d2(-0xc8,-0xc0,-0x15c,-0xc8)+'on']=[],_0x5c9b77[_0x3515d2(-0xf8,-0x164,-0x56,-0x185)+'t']='',_0x2b9dd0=_0x5ce9ba[_0x8e3601]||_0x5c9b77;}const _0x2ccf4f=[_0x2b9dd0[_0x3515d2(-0xf8,-0xeb,-0x138,-0x43)+'t'],_0xf61b32['前置前'],_0xf61b32[_0x24c41d[_0x3515d2(-0x49,-0x88,-0xf5,0x7b)]],_0x169523,_0xf61b32[_0x24c41d['rUltd']],_0xf61b32['后置后'],_0x2b9dd0[_0x16173e(0x452,0x3ae,0x44c,0x41c)+_0x16173e(0x1fc,0x256,0x26e,0x288)],_0xf61b32[_0x24c41d[_0x3515d2(0x44,0x73,0x2a,0xf3)]]][_0x16173e(0x308,0x3a1,0x378,0x3e9)](Boolean)[_0x3515d2(0x41,0x5,-0x4,-0x36)](',\x20');_0x24c41d[_0x3515d2(-0xd1,-0xa1,-0xf4,-0xbc)](addLog,_0x16173e(0x3a1,0x3ba,0x3a1,0x465)+_0x2ccf4f);const _0x29c7b8={};_0x29c7b8[_0x16173e(0x2e4,0x3a8,0x3f3,0x2ee)]=_0x16173e(0x1fb,0x263,0x1be,0x1d7),_0x29c7b8[_0x16173e(0x48f,0x3d1,0x498,0x490)]=[];const _0x41fb1d={};_0x41fb1d[_0x16173e(0x380,0x3a8,0x38b,0x347)]='assistant',_0x41fb1d[_0x3515d2(0x7d,0x9b,0xd8,0xbe)]=[];const _0x45a6dd=_0x2b9dd0[_0x16173e(0x25d,0x28c,0x23a,0x1d1)+'on']['map'](_0x38a3c0=>[_0x29c7b8,_0x41fb1d])[_0x16173e(0x362,0x355,0x352,0x391)]();let _0x46537f=0x1fd*0x1+-0x191*-0xd+0x165a*-0x1;for(const _0x49baf3 of _0x2b9dd0[_0x16173e(0x2d5,0x28c,0x333,0x27e)+'on']){if(_0x24c41d[_0x16173e(0x313,0x265,0x2c6,0x24c)](_0x24c41d['hLkiM'],_0x24c41d[_0x16173e(0x225,0x253,0x20b,0x222)])){if(_0x49baf3[_0x3515d2(-0xf1,-0x8e,-0x3f,-0x19e)]?.['text'])_0x45a6dd[_0x46537f][_0x16173e(0x366,0x3d1,0x392,0x3f4)][_0x3515d2(-0x8a,0x18,-0x10c,-0x65)]({'type':_0x24c41d['UrupD'],'text':_0x49baf3[_0x3515d2(-0xf1,-0xa7,-0xf8,-0x1a5)][_0x16173e(0x2d3,0x383,0x31c,0x2e3)]});const _0x2084be=await getImageFromTurnData(_0x49baf3[_0x16173e(0x290,0x263,0x2c4,0x277)]);if(_0x2084be)_0x45a6dd[_0x46537f]['content'][_0x3515d2(-0x8a,0x3a,-0x107,-0x140)]({'type':_0x24c41d[_0x16173e(0x3d0,0x3bc,0x38e,0x404)],'image_url':{'url':_0x2084be}});_0x46537f++;if(_0x49baf3['model']?.['text'])_0x45a6dd[_0x46537f][_0x16173e(0x359,0x3d1,0x310,0x376)][_0x3515d2(-0x8a,-0x44,-0x73,-0x23)]({'type':_0x24c41d[_0x3515d2(-0xdb,-0x17f,-0x9d,-0xd3)],'text':_0x49baf3['model'][_0x16173e(0x3fd,0x383,0x38c,0x3ca)]});const _0x7bd517=await getImageFromTurnData(_0x49baf3['model']);if(_0x7bd517)_0x45a6dd[_0x46537f]['content'][_0x3515d2(-0x8a,-0x23,-0xad,-0xdf)]({'type':_0x16173e(0x30f,0x359,0x394,0x3b1),'image_url':{'url':_0x7bd517}});_0x46537f++;}else{const _0xce59d2=_0x24c41d['KbCog'][_0x3515d2(-0xff,-0xa5,-0x8c,-0x10e)]('|');let _0x1fa3ba=0x1aac+-0x1eb*-0x14+-0x4108;while(!![]){switch(_0xce59d2[_0x1fa3ba++]){case'0':_0x24c41d[_0x16173e(0x313,0x302,0x2ab,0x2b0)](_0x5d64c7,_0x16173e(0x401,0x35e,0x2ca,0x296)+'etch\x20error'+':\x20'+_0x414aaa[_0x3515d2(0x69,0x78,0xa4,0xcd)]);continue;case'1':_0x42e6f2[_0x16173e(0x243,0x2a9,0x290,0x223)]('[Banana]\x20F'+_0x3515d2(-0xe6,-0x120,-0x19a,-0x16d)+':',_0x4dcfb8);continue;case'2':throw _0x62465b;continue;case'3':if(_0x5af370[_0x16173e(0x407,0x3bd,0x387,0x3d1)]===_0x24c41d[_0x3515d2(-0x51,0x26,0x35,-0x36)]){}else _0x275900[_0x3515d2(-0x72,-0x7,-0xe2,-0x47)+'sk'](_0x35f319,![]);continue;case'4':_0x1d7358=null;continue;}break;}}}if(!_0x2961cc[_0x16173e(0x3b7,0x3cf,0x3f2,0x387)](_0x24c41d[_0x3515d2(-0xee,-0xe9,-0x14f,-0x160)])){const _0x25383f=extension_settings[extensionName][_0x16173e(0x301,0x2b5,0x371,0x2e3)+_0x16173e(0x2ee,0x3b3,0x416,0x42e)+'ts']||{};for(const _0x47587b in _0x25383f){const _0x51a623=_0x25383f[_0x47587b],_0x1cef53=(_0x51a623['triggers']||'')[_0x3515d2(-0xff,-0xf0,-0x9b,-0xb3)]('|')[_0x3515d2(0x4d,0x8d,0x34,0x11)](_0x55d364=>_0x55d364['trim']()!=='');for(const _0x5dc0d8 of _0x1cef53){if('XJluf'!==_0x3515d2(0xb,0x68,-0x8d,-0x18)){if(_0x2ccf4f[_0x16173e(0x241,0x298,0x341,0x2ca)+'e']()[_0x3515d2(0x7b,0x81,0x132,0x1c)](_0x5dc0d8['toLowerCas'+'e']())){_0x24c41d['hglsP'](addLog,'[Banana]\x20F'+_0x16173e(0x261,0x2c5,0x234,0x350)+_0x3515d2(-0xe5,-0x11e,-0x163,-0x51)+_0x3515d2(-0xc1,-0x114,-0x121,-0x64)+_0x5dc0d8+(_0x3515d2(-0x10d,-0x98,-0x5f,-0x71)+_0x3515d2(0x49,0x6b,-0x36,-0x1b))+_0x47587b+'\x22.');const _0x51bfa7=_0x51a623[_0x3515d2(-0xc8,-0xcf,-0x2a,-0x9)+'on'];if(_0x51bfa7){const _0x2dbe6d=[];if(_0x51bfa7[_0x16173e(0x1dc,0x263,0x243,0x1f6)]&&_0x51bfa7[_0x16173e(0x22c,0x263,0x2f3,0x2e8)][_0x16173e(0x35b,0x383,0x3ad,0x448)])_0x2dbe6d[_0x3515d2(-0x8a,-0x105,-0x68,-0xe6)]({'type':_0x24c41d[_0x16173e(0x31b,0x279,0x2f3,0x27d)],'text':_0x51bfa7[_0x3515d2(-0xf1,-0x3a,-0x197,-0x146)][_0x16173e(0x388,0x383,0x2f7,0x31c)]});const _0x2deec8=await _0x24c41d[_0x16173e(0x35f,0x2d7,0x2da,0x28e)](getImageFromTurnData,_0x51bfa7['user']);if(_0x2deec8)_0x2dbe6d[_0x16173e(0x2f7,0x2ca,0x2fb,0x2ff)]({'type':'image_url','image_url':{'url':_0x2deec8}});if(_0x24c41d[_0x3515d2(-0xd7,-0x19f,-0x178,-0xb3)](_0x2dbe6d[_0x3515d2(0x58,0x12,0x7c,0x3c)],0x2f*0x89+-0x3*0xf6+-0x1*0x1645)){const _0x2604b1={};_0x2604b1[_0x3515d2(0x54,0x64,0x1a,0xc4)]=_0x16173e(0x2ec,0x263,0x24d,0x1ef),_0x2604b1[_0x16173e(0x30e,0x3d1,0x47d,0x45d)]=_0x2dbe6d,_0x45a6dd['push'](_0x2604b1);}const _0x363d97=[];if(_0x51bfa7[_0x16173e(0x40d,0x388,0x315,0x36b)]&&_0x51bfa7[_0x3515d2(0x34,-0x52,0x5b,0xc2)][_0x16173e(0x309,0x383,0x2cc,0x306)])_0x363d97[_0x3515d2(-0x8a,-0x14f,-0x3c,-0x8a)]({'type':'text','text':_0x51bfa7[_0x16173e(0x3e4,0x388,0x31a,0x415)]['text']});const _0x15b3d9=await getImageFromTurnData(_0x51bfa7[_0x16173e(0x399,0x388,0x405,0x2f7)]);if(_0x15b3d9)_0x363d97['push']({'type':_0x24c41d['LDDFB'],'image_url':{'url':_0x15b3d9}});if(_0x363d97[_0x3515d2(0x58,-0x4e,-0x6c,0x104)]>-0x2126+0x1757+-0x117*-0x9){const _0x1a671d={};_0x1a671d[_0x3515d2(0x54,0x90,-0x5f,0x113)]=_0x24c41d['dZWZD'],_0x1a671d[_0x3515d2(0x7d,0x104,0x37,0x5e)]=_0x363d97,_0x45a6dd['push'](_0x1a671d);}}break;}}else _0x25f624['removeList'+_0x3515d2(-0xaa,-0x49,-0x48,-0xfc)](_0x19f80a,_0x167d28);}}}if(!_0x2961cc[_0x16173e(0x382,0x3cf,0x45b,0x371)](_0x24c41d[_0x16173e(0x2e7,0x266,0x1fd,0x22b)])){const _0x53b619={};_0x53b619[_0x3515d2(0x54,-0xb,0x19,0xfb)]=_0x24c41d[_0x3515d2(-0x53,0x18,-0x74,0x39)],_0x53b619[_0x16173e(0x3c5,0x3d1,0x349,0x347)]=[{'type':_0x24c41d[_0x16173e(0x29b,0x279,0x2df,0x2e4)],'text':_0x2ccf4f}],_0x45a6dd['push'](_0x53b619);}else{const _0x5cecf2=[],_0x193b59=_0x24c41d[_0x3515d2(-0x3b,0x1b,-0xfa,-0xd5)](_0x54be37,_0x2ccf4f),_0x3fadd6=[_0x2b9dd0['fixedPromp'+'t'],_0x193b59,_0x2b9dd0[_0x16173e(0x335,0x3ae,0x36a,0x34a)+_0x16173e(0x245,0x256,0x217,0x2e3)]][_0x16173e(0x36c,0x3a1,0x392,0x366)](Boolean)[_0x16173e(0x2ee,0x395,0x40c,0x45b)](',\x20'),_0x12cbaf={};_0x12cbaf['type']=_0x24c41d[_0x3515d2(-0xdb,-0x21,-0x26,-0x7f)],_0x12cbaf['text']=_0x3fadd6,_0x5cecf2[_0x3515d2(-0x8a,0x1a,-0xa3,-0xc7)](_0x12cbaf);if(_0x1bd891){const _0x10ba55={};_0x10ba55[_0x16173e(0x264,0x268,0x312,0x2b5)]=_0x1bd891;const _0x27e8f2={};_0x27e8f2[_0x3515d2(0x4,-0xc2,-0xa9,-0x9c)]=_0x24c41d[_0x16173e(0x465,0x3bc,0x3a0,0x45c)],_0x27e8f2['image_url']=_0x10ba55,_0x5cecf2[_0x16173e(0x244,0x2ca,0x310,0x29e)](_0x27e8f2),_0x24c41d[_0x3515d2(-0x3,0xc4,0xb0,0x2a)](addLog,_0x3515d2(-0xa,-0x8b,-0xc6,-0xc2)+_0x16173e(0x325,0x2e3,0x2ee,0x26b)+'的图片');}const _0x1f594d={};_0x1f594d[_0x3515d2(0x54,0x63,0x31,-0x3)]=_0x24c41d['qtNjW'],_0x1f594d['content']=_0x5cecf2,_0x45a6dd['push'](_0x1f594d),_0x24c41d[_0x3515d2(-0x79,-0x11f,-0x7c,-0x141)](addLog,_0x3515d2(-0xa,0x59,0x54,0x41)+_0x3515d2(-0x29,-0xb,0x75,0x1f)+_0x3fadd6);}const _0x3c4d02={};_0x3c4d02[_0x16173e(0x349,0x2ed,0x270,0x275)+'o']=_0x5da084;const _0xe787e3={};_0xe787e3[_0x3515d2(-0x10b,-0xa0,-0x164,-0xd6)+'g']=_0x3c4d02,_0x1725cf={'model':_0x495db0,'messages':_0x45a6dd['filter'](_0x5a5f93=>_0x5a5f93[_0x16173e(0x418,0x3d1,0x465,0x451)][_0x16173e(0x359,0x3ac,0x46e,0x2e5)]>-0x24b4+-0x154e+0x3a02),'config':_0xe787e3},_0x24c41d['hglsP'](addLog,'[Banana]\x20B'+'uilt\x20multi'+'modal\x20payl'+'oad\x20with\x20'+_0x1725cf[_0x3515d2(-0xbd,-0x152,-0xf4,-0x5b)][_0x3515d2(0x58,0x9c,-0x2,0x89)]+_0x3515d2(-0xed,-0x69,-0x16b,-0x75));}let _0x2b8913=_0x3f2abf[_0x3515d2(0x57,-0x2f,0x8a,0x4b)](/\/$/,''),_0x3d9419;_0x2b8913[_0x16173e(0x38a,0x354,0x3bb,0x3d8)](_0x24c41d[_0x3515d2(0x1f,-0x13,-0x39,0xdf)])||_0x2b8913[_0x3515d2(0x7b,0x114,0x75,0x45)](_0x3515d2(0x21,0x76,0xd7,0xb4))?_0x24c41d[_0x3515d2(-0xef,-0x101,-0x46,-0x183)](_0x24c41d['yliNd'],_0x16173e(0x275,0x25f,0x2e5,0x276))?_0x3d9419=_0x24c41d['RWfpU'](_0x2b8913,_0x32a150):_0x4909a7=_0x24c41d['PtNwx'](_0x3ffb08,',\x20')+_0x40208a['Character\x20'+_0x196d56+_0x3515d2(-0x61,-0xc7,-0x26,-0x103)]:_0x24c41d[_0x3515d2(-0x37,0x53,-0x59,-0xb6)]!==_0x24c41d['fzaeb']?_0x2c20c8[_0x16173e(0x2d4,0x2d6,0x2ed,0x310)+_0xfd5aa4+'\x20Prompt']&&(_0x3e34c9=_0x24c41d[_0x16173e(0x22d,0x284,0x2fb,0x243)](_0x5d58b1+',\x20',_0x5f32fe[_0x3515d2(-0x7e,-0x129,0x3f,-0xcc)+_0x569062+_0x3515d2(-0x61,-0x126,0x59,-0x9)])):_0x3d9419=_0x24c41d[_0x3515d2(-0x21,0x8d,-0xa5,-0x61)](_0x24c41d[_0x3515d2(-0x1a,-0xd,0x41,-0x19)](_0x2b8913,_0x24c41d[_0x16173e(0x2c5,0x373,0x344,0x385)]),_0x32a150);_0x3d9419=_0x3d9419['replace'](/\/v1\/v1\//g,_0x24c41d[_0x16173e(0x204,0x269,0x32b,0x2e7)]);const _0x42635c=extension_settings[extensionName]['client'];let _0xcd1f3e,_0x262035,_0x2f0c30;if(_0x24c41d[_0x3515d2(0x28,0xf,0xb7,0x52)](_0x42635c,_0x24c41d[_0x16173e(0x297,0x282,0x1ff,0x331)])){let _0x897de3=_0x2b8913;!_0x897de3[_0x3515d2(0x0,-0x8e,0x97,-0x8c)](_0x24c41d[_0x16173e(0x394,0x373,0x398,0x2b5)])&&!_0x897de3['includes'](_0x24c41d[_0x16173e(0x1de,0x269,0x214,0x216)])&&(_0x897de3=_0x24c41d[_0x3515d2(-0xd0,-0x15a,-0x64,-0x64)](_0x897de3,_0x24c41d[_0x3515d2(0x1f,0x5,-0x35,-0x1c)]));_0x897de3=_0x897de3['replace'](/\/v1\/$/,_0x24c41d['OeIUO']),_0xcd1f3e=_0x24c41d['lGnnX'],_0x262035=getRequestHeaders(window['token']);const _0x1f3289={};_0x1f3289[_0x16173e(0x372,0x363,0x2f2,0x30d)+'etion_sour'+'ce']=_0x24c41d[_0x16173e(0x3ad,0x35a,0x30a,0x2af)],_0x1f3289[_0x16173e(0x237,0x2a4,0x214,0x1ee)]=_0x897de3,_0x1f3289[_0x16173e(0x36e,0x3c3,0x470,0x3a1)+_0x3515d2(-0x105,-0x184,-0x8c,-0xd9)+'rs']=_0x3515d2(-0x68,-0xc0,-0x90,-0x8f)+_0x16173e(0x393,0x3b8,0x3bc,0x358)+_0x3515d2(-0x3e,-0x24,0x72,-0x5b)+_0x3d24a5+'\x22',_0x1f3289[_0x3515d2(0x34,0x55,0x2d,0xc5)]=_0x495db0,_0x1f3289[_0x3515d2(-0xbd,-0x183,-0x11e,-0xec)]=_0x1725cf[_0x16173e(0x2ed,0x297,0x304,0x28a)],_0x1f3289[_0x16173e(0x2e4,0x399,0x435,0x44f)]=![],_0x2f0c30=_0x1f3289;if(_0x495db0[_0x3515d2(-0x26,-0xc0,-0xd5,0x49)](_0x24c41d[_0x3515d2(-0x100,-0x9d,-0x3e,-0x9a)])){if(_0x24c41d['tgmza'](_0x24c41d[_0x3515d2(0x13,0xce,-0x9b,-0x68)],_0x24c41d[_0x3515d2(0x3a,0x25,0xf4,0x7e)]))!_0x4953d6[_0x16173e(0x347,0x39b,0x30b,0x40a)+'BananaList'+'ener']&&(_0x1bafec[_0x3515d2(0x47,0xde,-0x2,0x13)+'BananaList'+_0x3515d2(-0xaa,-0x16f,-0x10f,-0xed)]=!![],_0x216812()),_0x24c41d[_0x16173e(0x3c4,0x30a,0x247,0x386)](_0x282f9d);else{_0x24c41d[_0x16173e(0x3a9,0x343,0x2e3,0x3bb)](addLog,_0x3515d2(-0xe1,-0x40,-0xdf,-0x3f)+'magen\x20模型不支'+_0x3515d2(-0x94,-0x4b,0x0,-0xb9)+'接请求'),_0xcd1f3e=_0x3d9419;const _0x1f8a7a={};_0x1f8a7a['Content-Ty'+'pe']=_0x16173e(0x2f6,0x2ab,0x1e9,0x362)+_0x3515d2(-0xb8,-0x172,-0x119,-0xe0),_0x1f8a7a[_0x3515d2(-0x68,0x3d,-0x24,0x4c)+'ion']=_0x16173e(0x2d1,0x2c4,0x262,0x2f3)+_0x3d24a5,_0x262035=_0x1f8a7a,_0x2f0c30=_0x1725cf;}}_0x24c41d[_0x16173e(0x3af,0x33f,0x342,0x3bd)](addLog,_0x3515d2(-0xa6,0x1,-0x92,-0x106)+_0x16173e(0x3d0,0x3d4,0x38f,0x413));}else _0x24c41d[_0x16173e(0x328,0x3c4,0x482,0x3bd)](_0x24c41d[_0x3515d2(0x2e,0xce,-0x3f,-0x1b)],_0x24c41d[_0x16173e(0x3ac,0x3c2,0x31b,0x478)])?(_0xcd1f3e=_0x3d9419,_0x262035=_0x24c41d['yrUmV'](getDirectHeaders,_0x24c41d[_0x16173e(0x2d3,0x339,0x3d2,0x3da)],_0x16173e(0x387,0x2c4,0x2ce,0x297)+_0x3d24a5),_0x2f0c30=_0x1725cf,_0x24c41d[_0x16173e(0x439,0x376,0x2d7,0x2e2)](addLog,_0x3515d2(-0xa6,-0x29,-0x121,-0x30)+'用直接请求模式')):_0x454735=_0x24c41d[_0x3515d2(-0x1a,-0x13,0x40,-0x3e)](_0x428a71,'/v1');addLog(_0x16173e(0x372,0x2e6,0x292,0x2a2)+_0x16173e(0x1fe,0x288,0x202,0x235)+_0x3515d2(0x55,0x5f,0x5c,-0x5f)+_0xcd1f3e),addLog(_0x3515d2(-0x108,-0x9e,-0x1b8,-0x188)+'ayload:\x20'+JSON['stringify'](_0x2f0c30,null,-0x1238+0x3*0x3c3+-0x6f1*-0x1));try{if(_0x24c41d['mxGlf']===_0x16173e(0x3fa,0x36b,0x3d6,0x41c))_0x32c9b7[_0x16173e(0x2d8,0x39b,0x3b8,0x307)+_0x3515d2(0x2,0xa5,-0x8b,0x11)+_0x16173e(0x364,0x2aa,0x26a,0x365)]=!![],_0x24c41d[_0x3515d2(-0x4b,-0xa4,-0x4,0x49)](_0x5d399e);else{taskQueue['updateStat'+'us'](_0x3de825,_0x24c41d['vPAaF']);const _0x3d1ef1=await fetch(_0xcd1f3e,{'method':_0x24c41d[_0x16173e(0x2f6,0x2bf,0x368,0x247)],'headers':_0x262035,'body':JSON[_0x3515d2(-0xcd,-0x56,-0xba,-0x3b)](_0x2f0c30)});if(!_0x3d1ef1['ok']){const _0x45754b=await _0x3d1ef1[_0x16173e(0x3cc,0x383,0x3eb,0x394)]();throw new Error(_0x16173e(0x2e7,0x39e,0x452,0x44c)+_0x3515d2(-0x3c,-0xfc,0x27,-0xd2)+'ith\x20status'+'\x20'+_0x3d1ef1[_0x16173e(0x2ee,0x2d3,0x33b,0x39a)]+':\x20'+_0x45754b);}const _0x5b0b2e=await _0x3d1ef1[_0x16173e(0x3e3,0x370,0x2d2,0x2b0)]();let _0x4177bc='';const _0x21a12e=_0x5b0b2e?.data;if(Array['isArray'](_0x21a12e)&&_0x21a12e['length']>0x0){const _0x3f695f=_0x21a12e[0x0];if(typeof _0x3f695f?.b64_json==='string'&&_0x3f695f['b64_json'])_0x4177bc='data:image/png;base64,'+_0x3f695f['b64_json'];else typeof _0x3f695f?.url==='string'&&_0x3f695f['url']&&(_0x4177bc=_0x3f695f['url']);}const _0x585cb7=_0x5b0b2e[_0x3515d2(-0x7,-0x78,0x91,0x1e)];if(!_0x4177bc&&_0x585cb7&&_0x585cb7[_0x3515d2(0x58,0xef,0x9d,0x10b)]>-0x1*-0x1475+0x5*-0x78a+0x5bf*0x3){const _0x27ec3e=_0x585cb7[-0xf9*-0x1+-0x1*0x47c+0x383][_0x16173e(0x47a,0x3bd,0x331,0x3a9)]?.[_0x16173e(0x3ed,0x3d1,0x39d,0x46b)];if(Array['isArray'](_0x27ec3e)){if(_0x24c41d['XEVeR'](_0x24c41d[_0x16173e(0x262,0x2dd,0x32f,0x35f)],_0x24c41d[_0x16173e(0x2af,0x2dd,0x229,0x304)])){const _0x2489d8={};_0x2489d8[_0x16173e(0x2cb,0x28c,0x288,0x323)+'on']=[],_0x2489d8['fixedPromp'+'t']='',_0x6857f1=_0x5d21d4[_0x280f6f]||_0x2489d8;}else for(const _0x403374 of _0x27ec3e){if(_0x24c41d[_0x3515d2(-0xd4,-0x177,-0x13,-0xfb)]!==_0x24c41d[_0x16173e(0x2f3,0x2b8,0x362,0x210)]){if(_0x24c41d[_0x16173e(0x2d3,0x265,0x1e4,0x28c)](_0x403374[_0x16173e(0x2e8,0x358,0x2cb,0x2d2)],_0x24c41d['LDDFB'])&&_0x403374[_0x16173e(0x365,0x359,0x3fe,0x3cc)]?.[_0x16173e(0x281,0x268,0x318,0x2b2)]){_0x4177bc=_0x403374[_0x3515d2(0x5,-0x4f,-0xab,-0x70)]['url'];break;}const _0x5090db=typeof _0x403374?.text==='string'?_0x403374['text']:'';if(_0x5090db){const _0x1f4dd6=_0x5090db['match'](/!\[.*?\]\(((?:https?:\/\/|data:image\/[^;]+;base64,)[^\s\)]+)\)/);if(_0x1f4dd6&&_0x1f4dd6[0x1]){_0x4177bc=_0x1f4dd6[0x1];break;}const _0x2d2f4e=_0x5090db['match'](/(?:https?:\/\/|data:image\/[^;]+;base64,)[^\s\)\]\"]+/);if(_0x2d2f4e&&_0x2d2f4e[0x0]){_0x4177bc=_0x2d2f4e[0x0];break;}}}else _0x3cacac[_0x32cfe0][_0x16173e(0x37f,0x2ff,0x2dd,0x3b8)]['cishu']=_0x1dd79f[_0x4077fb][_0x3515d2(-0x55,-0x74,-0x6f,0x67)][_0x16173e(0x323,0x394,0x2d2,0x2f1)]+(-0x1008*-0x2+0x1eea*-0x1+-0x125),_0x13fbd3(_0x3515d2(-0x63,-0x6b,-0x89,-0x62)+_0x16173e(0x23d,0x2d4,0x317,0x2d8)+_0x54229a[_0x80afcc][_0x16173e(0x328,0x2ff,0x320,0x303)]['cishu']);}}else{if(_0x24c41d[_0x16173e(0x1e0,0x265,0x1c4,0x2f5)](typeof _0x27ec3e,_0x3515d2(-0x106,-0xa0,-0xc5,-0x5e))){const _0x5da618=/!\[.*?\]\(((?:https?:\/\/|data:image\/[^;]+;base64,)[^\s\)]+)\)/,_0x3094da=_0x27ec3e[_0x16173e(0x293,0x29e,0x2e2,0x28e)](_0x5da618),_0x2b7f7c=_0x27ec3e[_0x16173e(0x293,0x29e,0x2e2,0x28e)](/(?:https?:\/\/|data:image\/[^;]+;base64,)[^\s\)\]\"]+/);if(!_0x3094da&&_0x2b7f7c&&_0x2b7f7c[0x0])_0x4177bc=_0x2b7f7c[0x0];if(!_0x4177bc&&_0x3094da&&_0x3094da[-0xa76+0x10*-0xf6+-0x19d7*-0x1]){if(_0x24c41d[_0x16173e(0x2ad,0x35b,0x2dc,0x2de)](_0x24c41d['aoDrO'],'FYfOf')){const _0x34349c=_0x3094da[0x95f*-0x1+-0x11*0xbc+0x15dc];if(_0x34349c['startsWith'](_0x24c41d[_0x3515d2(-0x93,-0x63,0x17,-0x116)])){if(_0x24c41d[_0x3515d2(-0xb,0xb,0x93,0x30)](_0x24c41d['ZyfrE'],_0x16173e(0x2d7,0x361,0x35b,0x32a))){_0x24c41d['VvRBk'](_0x4035d8,_0x3515d2(-0xe1,-0x160,-0x1a6,-0x183)+_0x3515d2(-0xba,-0x61,-0x10e,-0x176)+_0x16173e(0x337,0x2c0,0x24d,0x32c)+_0x16173e(0x241,0x289,0x276,0x2fa)),_0x2e828e=_0x506255;const _0x2eb7af={};_0x2eb7af[_0x3515d2(0x11,-0x73,-0xa9,0xd6)+'pe']=_0x3515d2(-0xa9,-0x145,-0x1,-0x9f)+_0x16173e(0x215,0x29c,0x279,0x35c),_0x2eb7af[_0x3515d2(-0x68,0x41,-0x11c,-0x67)+_0x3515d2(-0xbe,-0x180,-0x11,-0x89)]=_0x3515d2(-0x90,-0x60,-0xdf,-0x5a)+_0x5634d0,_0x5f6fbb=_0x2eb7af,_0x9a7f51=_0xa99a1f;}else _0x24c41d[_0x3515d2(-0x15,-0xc1,0x3f,-0x4c)](addLog,_0x24c41d[_0x16173e(0x296,0x2ac,0x348,0x35b)]),_0x4177bc=_0x34349c,addLog('[Banana]\x20S'+_0x16173e(0x320,0x38c,0x401,0x30b)+_0x16173e(0x2ec,0x2ba,0x23f,0x221)+_0x3515d2(-0x104,-0x1c8,-0x86,-0x11e)+_0x3515d2(0x53,-0x5e,0xde,0xaa)+_0x16173e(0x413,0x3d3,0x416,0x42f));}else{if(_0x24c41d[_0x16173e(0x370,0x2de,0x23a,0x28b)](_0x24c41d[_0x16173e(0x222,0x2c6,0x322,0x2b7)],_0x24c41d[_0x16173e(0x280,0x2c6,0x2b2,0x324)])){_0x24c41d[_0x16173e(0x402,0x35c,0x2f4,0x3e0)](addLog,_0x24c41d['QLWdN']),addLog(_0x3515d2(0x26,-0x26,0x8c,0x55)+_0x16173e(0x2f6,0x278,0x1ea,0x259)+_0x16173e(0x26c,0x2a1,0x232,0x22c)+_0x34349c);try{const _0x4da9b0=await _0x24c41d[_0x3515d2(-0x6b,0x27,-0x49,-0xd3)](fetch,_0x34349c,{'headers':getDirectHeaders()});if(!_0x4da9b0['ok'])throw new Error('Failed\x20to\x20'+_0x3515d2(0x18,0xb0,0xd6,0x93)+_0x3515d2(-0xd9,-0x7f,-0x10f,-0x74)+_0x4da9b0[_0x3515d2(-0x81,-0x40,-0x98,-0x13e)]);const _0x59fc6d=await _0x4da9b0[_0x16173e(0x27a,0x262,0x2a7,0x224)](),_0x3a9f62=await new Promise((_0x1bc3fd,_0x306b35)=>{function _0x5db623(_0x1eb36c,_0x2c2afc,_0x66267b,_0x217556){return _0x3515d2(_0x1eb36c-0x28e,_0x2c2afc-0x110,_0x2c2afc,_0x217556-0x1e7);}function _0x1b6498(_0x2e783b,_0x2b0f4e,_0x13ff7d,_0x182f4c){return _0x3515d2(_0x2b0f4e-0x52,_0x2b0f4e-0x170,_0x182f4c,_0x182f4c-0x2e);}const _0x246053=new FileReader();_0x246053[_0x1b6498(0x9d,0xc3,0xf4,0x90)]=()=>_0x1bc3fd(_0x246053[_0x5db623(0x2df,0x271,0x305,0x27e)]),_0x246053[_0x1b6498(0x41,0x8b,0x6e,0x6d)]=_0x306b35,_0x246053[_0x5db623(0x23a,0x204,0x2c9,0x234)+_0x5db623(0x192,0x1f4,0x1be,0x1c0)](_0x59fc6d);});_0x4177bc=_0x3a9f62,_0x24c41d[_0x3515d2(-0x64,-0x6e,-0xd,-0x57)](_0x24c41d[_0x3515d2(-0x7d,-0x8e,-0x120,-0x10f)](String,extension_settings[extensionName]['convertToJ'+_0x16173e(0x41c,0x35d,0x2f9,0x356)]),_0x16173e(0x238,0x2d2,0x2d1,0x2b7))&&(_0x4177bc=await convertImageToJpeg(_0x4177bc)),_0x24c41d['huhfk'](addLog,_0x3515d2(-0x6e,-0x40,-0x15,-0x85)+_0x3515d2(0x38,0x46,-0x19,0x12)+_0x16173e(0x3de,0x397,0x315,0x357)+_0x3515d2(-0x24,0x59,-0x3a,0x6b)+_0x3515d2(-0xad,-0x106,-0xce,0x14)+_0x3515d2(-0x42,-0x3e,-0xeb,-0xef));}catch(_0x3b31a8){_0x24c41d[_0x16173e(0x2ec,0x245,0x2f7,0x2f8)]('kaSxc',_0x3515d2(-0xb7,-0xf8,-0xf1,-0x8f))?_0x24c41d[_0x3515d2(0x1a,-0x65,0x78,0xb2)](_0x56b0df,_0x24c41d[_0x16173e(0x30d,0x377,0x31a,0x3b5)]):(_0x24c41d[_0x16173e(0x266,0x2e0,0x2e5,0x38f)](addLog,_0x3515d2(0xa,0x37,0x94,-0x22)+'ailed\x20to\x20f'+_0x16173e(0x275,0x33c,0x31c,0x3bd)+_0x16173e(0x3c7,0x3aa,0x369,0x2fc)+'\x20'+_0x3b31a8[_0x16173e(0x38e,0x3bd,0x3c6,0x421)]),_0x4177bc=_0x34349c,_0x24c41d[_0x3515d2(-0x15,0x8d,-0xda,-0xb)](addLog,'[Banana]\x20U'+'sing\x20direc'+'t\x20URL\x20as\x20f'+_0x3515d2(0x4f,0x5a,-0x71,0xd5)));}}else throw new _0x550bd0(_0x16173e(0x43a,0x379,0x33e,0x2f1)+_0x16173e(0x321,0x36c,0x2db,0x2a6)+_0x16173e(0x1e9,0x27b,0x30a,0x1dd)+_0x3b9956[_0x3515d2(-0x81,-0xaa,0x2f,-0x103)]);}}else{const _0x1c5a50={};_0x1c5a50[_0x3515d2(0x54,0xaf,0x9e,0x77)]=_0x24c41d['qtNjW'],_0x1c5a50['content']=[{'type':_0x24c41d['UrupD'],'text':_0x500829}],_0x1c208c['push'](_0x1c5a50);}}else _0x24c41d[_0x16173e(0x254,0x251,0x1ca,0x22d)](addLog,_0x24c41d[_0x3515d2(0x23,0xc0,0x9d,0x2d)]);}}}if(!_0x4177bc){if(_0x24c41d['jDecS']('VWkVZ',_0x24c41d[_0x16173e(0x30e,0x32a,0x3c4,0x3a2)]))throw new Error(_0x3515d2(-0xbb,-0x169,-0x35,-0x149)+_0x3515d2(-0x2c,0x0,-0xbf,0x4)+_0x16173e(0x37e,0x34c,0x2df,0x295)+'mage\x20in\x20Op'+_0x3515d2(0x12,-0x44,-0x71,0x35)+'t');else{if(_0x19ab8c){const _0x4a400d=_0x30fbe6[_0x16173e(0x259,0x286,0x30f,0x23e)](_0x4c42a1,arguments);return _0x195bb9=null,_0x4a400d;}}}return _0x24c41d[_0x3515d2(-0x52,-0xfd,-0x79,0x26)](addLog,'[Banana]\x20I'+_0x3515d2(-0xda,-0x109,-0xd5,-0x32)+'ated\x20succe'+_0x3515d2(0x3f,0x84,0x33,-0x3d)),taskQueue[_0x16173e(0x238,0x2e2,0x234,0x30c)+'sk'](_0x3de825,!![]),currentTaskId=null,{'image':_0x4177bc,'change':_0x24c41d[_0x3515d2(0x2b,-0x3b,0x36,0xc9)](_0x4f41f6,'')};}}catch(_0x53ab32){const _0xfc9dac=_0x24c41d[_0x3515d2(0x46,0x7b,-0x6,-0x61)][_0x3515d2(-0xff,-0x114,-0x12b,-0x145)]('|');let _0x5d0503=0x2*0xf0d+0x18a5+-0x36bf;while(!![]){switch(_0xfc9dac[_0x5d0503++]){case'0':if(_0x24c41d[_0x16173e(0x2a7,0x337,0x3eb,0x3c7)](_0x53ab32[_0x3515d2(0x69,-0xb,-0x47,0xfb)],_0x24c41d[_0x3515d2(-0x51,0x6d,-0xae,0x3d)])){}else taskQueue['completeTa'+'sk'](_0x3de825,![]);continue;case'1':throw _0x53ab32;continue;case'2':console[_0x3515d2(-0xab,-0x10b,0xe,-0x154)](_0x24c41d[_0x16173e(0x3bd,0x31f,0x35c,0x277)],_0x53ab32);continue;case'3':currentTaskId=null;continue;case'4':_0x24c41d[_0x16173e(0x407,0x390,0x348,0x307)](addLog,_0x3515d2(0xa,-0x35,0xb5,0x8)+_0x16173e(0x1be,0x26e,0x207,0x2c8)+':\x20'+_0x53ab32['message']);continue;}break;}}}export async function bananaGenerate(_0x1d9f81){const _0x469b2e={'FEPna':function(_0x5e8f90,_0x35c288){return _0x5e8f90(_0x35c288);},'JBnUn':function(_0xc7b99d){return _0xc7b99d();},'dROTU':_0x5711d1(-0xc7,-0xf8,-0x49,-0xc4),'yIQYo':function(_0x23519c,_0x1a2f24){return _0x23519c(_0x1a2f24);},'QhRON':function(_0x5db582,_0x14bef2,_0x2ea7d6,_0x4a31e1){return _0x5db582(_0x14bef2,_0x2ea7d6,_0x4a31e1);},'hszRp':function(_0x225a89,_0x16d1b7){return _0x225a89+_0x16d1b7;},'dlHWv':function(_0x4d7e96,_0x509402){return _0x4d7e96(_0x509402);}};_0x469b2e[_0x5711d1(-0x1b4,-0x108,-0x26e,-0x181)](clearLog);function _0x5711d1(_0x29499b,_0x3a45dd,_0x4f6a57,_0x562aeb){return _0x14b4(_0x29499b- -0x331,_0x4f6a57);}let {id:_0xaa220b,prompt:_0x3c52d0,width:_0x5f1399,height:_0xc3c748,change:_0x2edae7,retouchPrompt:_0x26fbb4,retouchImage:_0x147b6e}=_0x1d9f81;currentRequestId=_0xaa220b;function _0x5d690a(_0x435cbf,_0x5bb606,_0x17458e,_0x4e5150){return _0x14b4(_0x435cbf-0x66,_0x5bb606);}currentPrompt=_0x3c52d0,addLog(_0x5d690a(0x1de,0x1aa,0x1fe,0x23c)+_0x5d690a(0x232,0x236,0x1c9,0x178)+_0x5d690a(0x2ac,0x256,0x223,0x30c)+_0x5711d1(-0x5b,0x3d,-0x102,-0x11a)+_0x5d690a(0x22a,0x293,0x236,0x2eb)+_0xaa220b+')');let _0x2b7625='';_0x2edae7?_0x2b7625=_0x2edae7['replaceAll'](_0x5d690a(0x225,0x28f,0x265,0x29a),''):_0x2b7625=_0x3c52d0;if(_0x2edae7&&_0x2edae7[_0x5d690a(0x354,0x2c7,0x30c,0x418)](_0x5711d1(-0x172,-0x1b6,-0x1c9,-0x128))){if(_0x469b2e[_0x5d690a(0x25d,0x2e6,0x240,0x2dc)]!==_0x469b2e['dROTU'])_0xeecfaf[_0x381713][_0x5d690a(0x284,0x2d7,0x25f,0x22f)][_0x5711d1(-0x7e,-0xd9,-0x144,-0x72)]=-0x1*-0x248b+-0x464*0x2+-0x1bc2,_0x469b2e['FEPna'](_0x316e6a,_0x5d690a(0x276,0x2e7,0x2f1,0x310)+_0x5d690a(0x259,0x1bd,0x28e,0x21a)+_0x55f2a6[_0x50870b][_0x5d690a(0x284,0x2f0,0x2a4,0x1db)][_0x5711d1(-0x7e,-0xd6,-0xed,-0x40)]);else{_0x469b2e['yIQYo'](addLog,_0x5d690a(0x2e9,0x22f,0x24c,0x337)+'启动');if(_0x26fbb4)_0x469b2e['yIQYo'](addLog,'修图指令:\x20'+_0x26fbb4);if(_0x147b6e)addLog(_0x5711d1(-0x106,-0x59,-0x6a,-0x5f)+']');}}try{const {image:_0x516d46,change:_0x5de0c0}=await _0x469b2e[_0x5711d1(-0xd7,-0xb5,-0xce,-0x91)](generateBananaImage,{'prompt':_0x3c52d0,'width':_0x5f1399,'height':_0xc3c748,'change':_0x2edae7,'retouchPrompt':_0x26fbb4,'retouchImage':_0x147b6e});if(extension_settings[extensionName][_0x5d690a(0x317,0x2a0,0x380,0x2fe)]!='0'){const _0x4f62d1={};_0x4f62d1[_0x5711d1(-0x59,-0xe7,-0x4,-0x8c)]=_0x2b7625,await _0x469b2e[_0x5d690a(0x2b6,0x203,0x216,0x26e)](setItemImg,_0x3c52d0,_0x516d46,_0x4f62d1),_0x469b2e['yIQYo'](addLog,_0x5711d1(-0x141,-0xcf,-0x187,-0xdf)+_0x5d690a(0x220,0x174,0x259,0x197)+'\x20'+_0x3c52d0),extension_settings[extensionName][_0x5711d1(-0x113,-0xf8,-0xf1,-0xa3)][_0x5d690a(0x319,0x2f6,0x3a5,0x366)]?(extension_settings[extensionName][_0x5711d1(-0x113,-0x63,-0x15b,-0x187)][_0x5711d1(-0x7e,0x49,-0xe4,-0xce)]=_0x469b2e[_0x5711d1(-0xee,-0x137,-0x14a,-0x1aa)](extension_settings[extensionName][_0x5d690a(0x284,0x2e1,0x1dd,0x23b)][_0x5711d1(-0x7e,-0x10,-0xff,-0xc7)],-0x2*-0xcfe+0x1bc1+-0x35bc),addLog(_0x5711d1(-0x121,-0x127,-0xf9,-0x96)+_0x5711d1(-0x13e,-0x120,-0xa3,-0xf0)+extension_settings[extensionName][_0x5711d1(-0x113,-0x4f,-0x4e,-0x124)][_0x5711d1(-0x7e,-0x4b,-0xd6,-0x118)])):(extension_settings[extensionName][_0x5711d1(-0x113,-0x11b,-0x7e,-0x1a2)]['cishu']=-0xc7*-0x1c+0x1*-0x24c5+0xf02,_0x469b2e[_0x5711d1(-0x123,-0xda,-0x162,-0x8e)](addLog,_0x5711d1(-0x121,-0x1d4,-0x65,-0x1c6)+'r\x20prompt:\x20'+extension_settings[extensionName]['banana'][_0x5711d1(-0x7e,-0x12a,-0x92,-0x1e)]));}else addLog(_0x5d690a(0x357,0x3c5,0x313,0x389)+'库');const _0x20a184={};_0x20a184['id']=_0xaa220b,_0x20a184['success']=!![],_0x20a184['imageData']=_0x516d46,_0x20a184[_0x5d690a(0x25e,0x296,0x1ca,0x240)]=_0x3c52d0,_0x20a184[_0x5711d1(-0x59,0x28,-0xff,-0x97)]=_0x2b7625,eventSource[_0x5711d1(-0x115,-0xb2,-0xaf,-0x8c)](EventType[_0x5711d1(-0xd1,-0xff,-0xcf,-0xe1)+_0x5d690a(0x273,0x2a9,0x299,0x26a)+_0x5711d1(-0x73,-0xeb,-0xbc,0x13)],_0x20a184),_0x469b2e[_0x5711d1(-0x163,-0x219,-0x105,-0x21d)](addLog,'[Banana]\x20E'+_0x5711d1(-0x11e,-0x95,-0x1cf,-0x1d1)+_0x5d690a(0x2f9,0x320,0x382,0x2e5)+'nse\x20for\x20ID'+':\x20'+_0xaa220b);}catch(_0x5bec6d){const _0x3da01d='[Banana]\x20G'+_0x5711d1(-0x81,-0x98,-0x5c,-0xd1)+_0x5711d1(-0x162,-0x21b,-0x173,-0x20e)+_0x5d690a(0x2c2,0x30f,0x317,0x385)+_0xaa220b+':\x20'+_0x5bec6d[_0x5711d1(-0x55,-0xb,-0x96,-0x117)];_0x469b2e[_0x5d690a(0x2c0,0x20e,0x22e,0x253)](addLog,_0x3da01d),console[_0x5711d1(-0x169,-0x141,-0x1dd,-0x16b)](_0x3da01d);const _0x4b73d9={};_0x4b73d9['id']=_0xaa220b,_0x4b73d9['success']=![],_0x4b73d9[_0x5d690a(0x22e,0x2a5,0x1e5,0x23d)]=_0x5bec6d[_0x5711d1(-0x55,-0x31,0x73,-0x57)],_0x4b73d9[_0x5d690a(0x25e,0x2e6,0x2af,0x20e)]=_0x3c52d0,eventSource[_0x5d690a(0x282,0x234,0x345,0x33a)](EventType[_0x5711d1(-0xd1,-0x8d,-0x68,-0x198)+_0x5711d1(-0x124,-0x10f,-0x1ab,-0x12f)+'NSE'],_0x4b73d9),_0x469b2e[_0x5d690a(0x234,0x1e2,0x272,0x25c)](addLog,_0x5711d1(-0x88,-0x102,-0xc4,-0x128)+_0x5d690a(0x203,0x2b8,0x252,0x215)+_0x5d690a(0x2dc,0x223,0x329,0x361)+_0x5d690a(0x293,0x209,0x2de,0x358)+':\x20'+_0xaa220b);}}function handleCancelBananaTask(_0x5cb241){const _0x3f8251={'SDASE':function(_0xd34701,_0x57feac){return _0xd34701(_0x57feac);},'fHQJz':function(_0x1b5c57,_0x2f4d7f){return _0x1b5c57(_0x2f4d7f);},'ZYPNl':function(_0x493a21,_0x3c6dd8){return _0x493a21(_0x3c6dd8);},'SSGkU':function(_0x4c374d,_0x114150){return _0x4c374d===_0x114150;},'YsfJn':_0x2fbf75(0x421,0x358,0x3aa,0x30f),'fHlqe':_0x2fbf75(0x2c0,0x370,0x2dc,0x243),'Shypp':_0x436c65(-0x1e3,-0x1fc,-0x185,-0x153),'HhQpM':function(_0x2ceedf,_0x1da42a){return _0x2ceedf||_0x1da42a;}},{taskId:_0x4baaa1}=_0x5cb241;function _0x436c65(_0x12093d,_0x33a355,_0x380e5f,_0x3dd322){return _0x14b4(_0x380e5f- -0x34c,_0x3dd322);}function _0x2fbf75(_0x5942de,_0x2fe6f9,_0x2211b7,_0x6815b5){return _0x14b4(_0x2211b7-0x16b,_0x6815b5);}_0x3f8251[_0x2fbf75(0x32b,0x3af,0x39e,0x32d)](addLog,_0x2fbf75(0x435,0x45f,0x3fc,0x3c4)+'到取消任务事件\x20(T'+_0x2fbf75(0x438,0x31d,0x38e,0x2d8)+_0x4baaa1+')');if(_0x3f8251['SSGkU'](currentTaskId,_0x4baaa1)&&currentRequestId){if(_0x3f8251[_0x436c65(-0x216,-0x15a,-0x176,-0x105)]!==_0x436c65(-0x1a5,-0x56,-0x10d,-0x136)){const _0x52dac3=_0x436c65(-0x1d2,-0x1f1,-0x131,-0x18d)+_0x436c65(-0x28,-0x53,-0x9c,-0x10c)+_0x2fbf75(0x37e,0x339,0x33a,0x3df)+'\x20ID\x20'+_0x4b1cd4+':\x20'+_0x4ce9e7['message'];_0x3f8251[_0x436c65(-0xa7,-0x15a,-0x14c,-0xdc)](_0x5bb993,_0x52dac3),_0x46270d[_0x436c65(-0xc2,-0x12a,-0x184,-0x131)](_0x52dac3);const _0x58a645={};_0x58a645['id']=_0x3e987d,_0x58a645[_0x2fbf75(0x3bd,0x4b5,0x413,0x43a)]=![],_0x58a645[_0x436c65(-0x1a4,-0x232,-0x184,-0x12b)]=_0x92b764[_0x2fbf75(0x3cb,0x426,0x447,0x3fe)],_0x58a645[_0x436c65(-0xd6,-0xaa,-0x154,-0xaf)]=_0x10c5e5,_0x118d5c['emit'](_0x5ebc37[_0x436c65(-0x3e,-0xd2,-0xec,-0x33)+_0x436c65(-0xe0,-0xf5,-0x13f,-0x1c1)+_0x2fbf75(0x4a0,0x46c,0x429,0x421)],_0x58a645),_0x3f8251['fHQJz'](_0x10f9b2,_0x436c65(-0x16,-0x157,-0xa3,-0xe9)+'mitted\x20fai'+'lure\x20respo'+'nse\x20for\x20ID'+':\x20'+_0x49ffc3);}else{const _0xc3a40a=_0x3f8251[_0x2fbf75(0x324,0x3b9,0x300,0x23f)][_0x2fbf75(0x217,0x30e,0x2df,0x33b)]('|');let _0x50afc3=-0x21ae+0xcd2+0x14dc;while(!![]){switch(_0xc3a40a[_0x50afc3++]){case'0':currentPrompt=null;continue;case'1':_0x3f8251[_0x2fbf75(0x3ac,0x42e,0x39e,0x441)](addLog,_0x436c65(-0x159,-0x101,-0x17a,-0x108)+'消当前任务，发送失败'+_0x436c65(-0x1e9,-0x185,-0x127,-0xa7)+currentRequestId+')');continue;case'2':currentTaskId=null;continue;case'3':eventSource[_0x436c65(-0xfa,-0x16c,-0x130,-0xcf)](EventType[_0x2fbf75(0x379,0x324,0x3cb,0x473)+'MAGE_RESPO'+'NSE'],{'id':currentRequestId,'success':![],'error':_0x3f8251[_0x2fbf75(0x3b3,0x25e,0x309,0x2ad)],'prompt':_0x3f8251[_0x2fbf75(0x3fe,0x35e,0x3ea,0x3fa)](currentPrompt,'')});continue;case'4':currentRequestId=null;continue;}break;}}}}function initializeBananaListener(){function _0xcba296(_0x5ce6a0,_0x428689,_0x3e9ecb,_0x283e2d){return _0x14b4(_0x428689- -0x356,_0x3e9ecb);}const _0x2ea2e4={'hrQYB':function(_0x349c33,_0x3f640a){return _0x349c33(_0x3f640a);},'jTbwG':'banana\x20生图事'+_0x3bcbae(0x426,0x3bc,0x360,0x45a)};eventSource['on'](EventType[_0x3bcbae(0x286,0x334,0x350,0x339)+_0xcba296(-0x124,-0x13d,-0x1c9,-0x1f7)+'ST'],bananaGenerate),eventSource['on']('st_chatu8_'+_0xcba296(-0x227,-0x1dc,-0x163,-0x176)+_0xcba296(-0x85,-0x127,-0xaf,-0x1e2),handleCancelBananaTask);function _0x3bcbae(_0x34165c,_0x4ecfc5,_0x20e7e6,_0x15dda9){return _0x14b4(_0x4ecfc5-0xd4,_0x34165c);}_0x2ea2e4['hrQYB'](addLog,_0x2ea2e4[_0x3bcbae(0x37e,0x3b2,0x351,0x455)]);}export async function replaceWithBanana(){const _0x535fe5={'YthcW':'{修图}','EohIt':function(_0x1debd8,_0x3f7fea){return _0x1debd8<=_0x3f7fea;},'OVUGZ':function(_0x2a0871,_0x2a8ece){return _0x2a0871+_0x2a8ece;},'UHOhh':_0x3b3a11(0xc,-0x66,0x4a,-0x77),'YSGoD':function(_0x10205c,_0x3b6a7a){return _0x10205c(_0x3b6a7a);},'fIiXM':function(_0x1d4eb6,_0x1681cb){return _0x1d4eb6!==_0x1681cb;},'qfpUa':_0x3b3a11(-0x13b,-0x86,-0x113,-0x118),'XPCPp':_0x8cd7e(0x47c,0x507,0x44b,0x594),'XzRiI':_0x3b3a11(-0x1e1,-0x1c2,-0x1bb,-0x17f),'JFeRJ':'iGJno','NGBqV':_0x8cd7e(0x47a,0x462,0x3da,0x4ef),'eTOAm':function(_0x5ee3c5){return _0x5ee3c5();},'fcoLw':_0x8cd7e(0x5bb,0x500,0x5ae,0x4ca)+_0x8cd7e(0x527,0x463,0x4ae,0x43a)+_0x3b3a11(-0x1a0,-0x123,-0x72,-0x9b)};function _0x8cd7e(_0x398e99,_0x4d0d2f,_0x1e366e,_0x1bb701){return _0x14b4(_0x4d0d2f-0x2e9,_0x1bb701);}function _0x3b3a11(_0x590df6,_0x5c854a,_0x41a752,_0x262738){return _0x14b4(_0x5c854a- -0x352,_0x590df6);}if(extension_settings[extensionName][_0x8cd7e(0x50e,0x546,0x49c,0x500)]==_0x535fe5['XPCPp']){if(_0x535fe5[_0x8cd7e(0x430,0x469,0x40b,0x490)]===_0x535fe5['XzRiI'])!window[_0x8cd7e(0x65b,0x5a3,0x611,0x4e9)+_0x3b3a11(-0x174,-0xdd,-0xb6,-0x164)+_0x3b3a11(-0x22f,-0x189,-0x15b,-0x190)]&&(_0x535fe5[_0x8cd7e(0x5de,0x54c,0x5c2,0x601)]===_0x535fe5[_0x3b3a11(-0x2a0,-0x1e8,-0x1a5,-0x210)]?_0xfec0d3=_0x39e8e1[_0x3b3a11(-0xf6,-0x154,-0x187,-0x156)](_0x535fe5[_0x8cd7e(0x4f5,0x58d,0x591,0x4ea)],''):(window[_0x8cd7e(0x55e,0x5a3,0x501,0x643)+_0x8cd7e(0x58c,0x55e,0x577,0x4ba)+'ener']=!![],_0x535fe5[_0x3b3a11(-0xd6,-0xaf,-0x81,-0x171)](initializeBananaListener))),_0x535fe5[_0x8cd7e(0x519,0x58c,0x5ed,0x597)](initializeImageProcessing);else for(let _0x2081c3=-0x173e+0xd*-0x10f+-0x2502*-0x1;_0x535fe5[_0x8cd7e(0x628,0x5b8,0x5fc,0x52d)](_0x2081c3,-0x1*0x2206+0x8*-0x4c5+0x4832);_0x2081c3++){_0xa7828b['Character\x20'+_0x2081c3+_0x8cd7e(0x49f,0x4fb,0x598,0x48b)]&&(_0x372647=_0x535fe5[_0x3b3a11(-0x1d,-0x7e,0x15,-0x96)](_0x535fe5[_0x3b3a11(0x10,-0x7e,-0x8e,-0x43)](_0x5d5b9a,_0x535fe5[_0x8cd7e(0x4a9,0x4d3,0x507,0x4a6)]),_0x535fe5[_0x3b3a11(-0x17c,-0xc9,-0x173,-0xe7)](_0x221475,_0x1b7b5c[_0x8cd7e(0x51d,0x4de,0x55b,0x599)+_0x2081c3+'\x20Prompt'])));}}else window['initialize'+_0x8cd7e(0x56c,0x55e,0x55b,0x4b3)+_0x3b3a11(-0x181,-0x189,-0x16c,-0x17b)]&&(eventSource[_0x8cd7e(0x544,0x531,0x583,0x534)+_0x3b3a11(-0xd9,-0x189,-0xe3,-0xff)](EventType[_0x8cd7e(0x4ed,0x549,0x54c,0x56e)+_0x3b3a11(-0x1fa,-0x139,-0x1ae,-0x1a5)+'ST'],bananaGenerate),eventSource[_0x3b3a11(-0x1bf,-0x10a,-0x8e,-0xe2)+_0x8cd7e(0x4f1,0x4b2,0x55b,0x404)](_0x535fe5['fcoLw'],handleCancelBananaTask),LEGACY_EVENT_NAMES[_0x3b3a11(-0x10e,-0x6d,-0x101,-0x87)](_0x457b1b=>{function _0x15f6bc(_0x1f595b,_0x23b8f8,_0x3bc4ce,_0x1ee078){return _0x3b3a11(_0x1f595b,_0x23b8f8-0x212,_0x3bc4ce-0xf1,_0x1ee078-0x109);}function _0x5507da(_0x368e8d,_0x2fdee2,_0x186583,_0x140465){return _0x8cd7e(_0x368e8d-0x9c,_0x140465- -0x107,_0x186583-0x26,_0x368e8d);}_0x535fe5['fIiXM'](_0x15f6bc(0xc9,0x18c,0x1e2,0x123),_0x535fe5[_0x15f6bc(0x6a,0x81,0xcd,0x18)])?_0x4e45f0=!![]:eventSource[_0x5507da(0x439,0x4e8,0x429,0x42a)+_0x15f6bc(-0x17,0x89,0xcd,0x8c)](_0x457b1b,bananaGenerate);}),window[_0x3b3a11(-0x1,-0x98,-0x131,-0x42)+_0x3b3a11(-0x150,-0xdd,-0x72,-0x15b)+_0x3b3a11(-0x21a,-0x189,-0x235,-0x103)]=![],_0x535fe5['YSGoD'](addLog,_0x8cd7e(0x643,0x5a8,0x59e,0x631)+_0x3b3a11(-0xe7,-0x1a9,-0x1a3,-0x213)));}