(function(_0x4e6bfd,_0x56b3a7){function _0x513c25(_0x43681c,_0x35a378,_0x294b04,_0x53962b){return _0x55bf(_0x53962b-0x248,_0x294b04);}const _0x133acf=_0x4e6bfd();function _0x1ed075(_0x565322,_0x4d3ed5,_0x2cc410,_0x41e1e2){return _0x55bf(_0x2cc410-0xbc,_0x565322);}while(!![]){try{const _0x4df947=-parseInt(_0x1ed075(0x365,0x3f5,0x3d1,0x3c8))/(0x1ea9+-0xbdb+-0x12cd)+-parseInt(_0x513c25(0x509,0x4e7,0x3f2,0x464))/(-0x775+0xd76+0x5*-0x133)+-parseInt(_0x513c25(0x58b,0x651,0x539,0x5a1))/(0x1*0x124a+0x9*-0x1bd+-0x2a2)+parseInt(_0x1ed075(0x364,0x2e9,0x2d9,0x279))/(0x205a+-0x1057+-0xfff)*(parseInt(_0x513c25(0x4b7,0x476,0x4e5,0x500))/(0x940+0x27*-0x85+0x2*0x584))+parseInt(_0x1ed075(0x33b,0x36e,0x3e7,0x3e3))/(-0x248d+-0x12bb+0x374e)*(-parseInt(_0x1ed075(0x43c,0x331,0x3da,0x486))/(-0x62*0x2f+0x19c2+-0x7bd))+parseInt(_0x1ed075(0x3f5,0x326,0x38d,0x3fc))/(-0x126b*0x1+-0x25*-0x94+-0x1*0x2f1)*(parseInt(_0x1ed075(0x250,0x313,0x2ed,0x392))/(0x528+0x1bf1*-0x1+-0xb69*-0x2))+parseInt(_0x513c25(0x5cb,0x484,0x570,0x518))/(-0x6*0x9e+-0x2*-0x705+-0xa4c);if(_0x4df947===_0x56b3a7)break;else _0x133acf['push'](_0x133acf['shift']());}catch(_0x5b6c90){_0x133acf['push'](_0x133acf['shift']());}}}(_0x6d01,0x25*0xa22+-0xbc305+0x2d*0x6266));const _0x40b730=(function(){const _0x34d18b={'bEaiD':function(_0x421d2,_0x4f82f5,_0x50ed2f){return _0x421d2(_0x4f82f5,_0x50ed2f);},'xWdha':function(_0x286d86,_0x185d58){return _0x286d86+_0x185d58;},'LCeRl':_0x49bb0b(-0x10c,-0x128,-0xd9,-0x10f),'oRRdF':_0x49bb0b(-0xfb,-0x178,-0x122,-0x148)+_0x50ff35(-0x10c,-0x95,-0x117,-0xa9)+'item','Lwsys':_0x50ff35(-0x13a,-0x83,-0x138,-0x168),'BDuFg':_0x50ff35(-0x4f,0x53,-0x7e,-0xb9),'bVYfN':_0x50ff35(-0x132,-0x146,-0xbe,-0xd6)+_0x50ff35(-0x10c,-0x10c,-0x6f,-0x12f)+_0x50ff35(-0xeb,-0x80,-0xb9,-0x12a),'qFhBf':function(_0x4aca91,_0x1ada10){return _0x4aca91!==_0x1ada10;},'XJyGB':'wYGIz','KSIfp':_0x50ff35(-0x60,-0x76,0x34,-0x88),'nrYQp':function(_0x591592,_0x27e956){return _0x591592===_0x27e956;},'ibClc':_0x49bb0b(-0xb1,-0x18,-0x55,-0x77)};function _0x49bb0b(_0xd6fec,_0x20087c,_0x2ccd22,_0x339ecc){return _0x55bf(_0x339ecc- -0x341,_0x20087c);}function _0x50ff35(_0x3163f7,_0x18836c,_0x3b4cd9,_0x4caa99){return _0x55bf(_0x3163f7- -0x32b,_0x18836c);}let _0xbe2a58=!![];return function(_0x259fa1,_0x25ec04){const _0x48c29a={'nASgg':function(_0x16eca3,_0x4ea966){function _0x7ba50e(_0x1f4b58,_0x7b5854,_0xf5738f,_0x18e447){return _0x55bf(_0x1f4b58-0x1e2,_0x7b5854);}return _0x34d18b[_0x7ba50e(0x4c3,0x553,0x4b3,0x4b0)](_0x16eca3,_0x4ea966);},'pDrYX':_0x34d18b['LCeRl'],'SqlCI':_0x34d18b[_0x213d5a(-0x147,-0x138,-0x1be,-0x172)],'GAtsh':'st-chatu8-'+'popup-img-'+_0x213d5a(-0x156,-0x1fe,-0x208,-0x1fe),'MYUzw':_0x213d5a(-0x45,0x8,0x30,-0xf6),'NMInp':'button','ZLOZt':_0x5937eb(-0x11,-0x5a,0x70,-0x3)+_0x5937eb(0x15,0xbd,-0x95,0xb0)+_0x213d5a(-0xb5,-0xdd,-0xd,-0x4b),'Iegvi':_0x34d18b['Lwsys'],'zQagt':_0x34d18b[_0x213d5a(-0x78,-0xd0,-0xc1,0x3e)],'wWolL':_0x34d18b[_0x5937eb(0x2f,0x97,-0x6a,-0x64)],'suPHY':function(_0x5a8c02,_0x336a70){function _0x5ddc91(_0xc2a15a,_0x2fae6a,_0x91e464,_0x2fe772){return _0x5937eb(_0x2fe772- -0xae,_0x2fae6a,_0x91e464-0x151,_0x2fe772-0x143);}return _0x34d18b[_0x5ddc91(-0x86,-0x137,-0xe5,-0xb5)](_0x5a8c02,_0x336a70);},'nbDNt':_0x34d18b[_0x5937eb(0x9e,0x16,-0x7,0x2)],'IrjGa':_0x34d18b[_0x5937eb(0x79,0x79,0x108,0xd0)],'jyUVI':function(_0x3b3ef6,_0x4684f4){function _0x30a3af(_0x31de45,_0x5e5400,_0x32ed26,_0x51b78e){return _0x5937eb(_0x32ed26- -0x1d5,_0x51b78e,_0x32ed26-0x2c,_0x51b78e-0x42);}return _0x34d18b[_0x30a3af(-0x23c,-0x1f7,-0x1e2,-0x22a)](_0x3b3ef6,_0x4684f4);}};function _0x5937eb(_0x4101aa,_0x59415d,_0x440c6a,_0x406554){return _0x50ff35(_0x4101aa-0x121,_0x59415d,_0x440c6a-0x1a,_0x406554-0xbe);}function _0x213d5a(_0x5c1fdf,_0x47ff24,_0x11b5ba,_0x12f122){return _0x49bb0b(_0x5c1fdf-0x7f,_0x11b5ba,_0x11b5ba-0x5,_0x5c1fdf- -0x56);}if(_0x34d18b[_0x213d5a(-0x19a,-0x1ca,-0x22d,-0x24a)](_0x34d18b[_0x213d5a(-0x72,-0x23,0x2a,-0x34)],_0x213d5a(-0xcd,-0x44,-0x140,-0xfe))){const _0x1abfe1=_0xbe2a58?function(){function _0x40e3f1(_0x32384d,_0x4b7746,_0x1156f9,_0x45e0ea){return _0x5937eb(_0x45e0ea-0x151,_0x4b7746,_0x1156f9-0x160,_0x45e0ea-0x1bc);}function _0x427465(_0x33783b,_0x14c7a0,_0x47601b,_0x817c0){return _0x213d5a(_0x33783b-0x2,_0x14c7a0-0x13f,_0x817c0,_0x817c0-0xf9);}if(_0x48c29a[_0x427465(-0x3b,-0x3c,-0x67,-0xe9)](_0x48c29a[_0x40e3f1(0x1a9,0xd1,0x11c,0x150)],_0x48c29a['IrjGa'])){if(_0x25ec04){if(_0x48c29a[_0x40e3f1(0x242,0x269,0x229,0x207)](_0x427465(-0xfc,-0x57,-0x199,-0x12b),_0x427465(-0xfc,-0x130,-0x163,-0x193))){const _0x115502=_0x25ec04[_0x40e3f1(0x256,0x2e2,0x291,0x22b)](_0x259fa1,arguments);return _0x25ec04=null,_0x115502;}else{const _0x4c1100=_0x11d40a[_0x427465(-0x45,0x6a,-0xec,0x58)+_0x40e3f1(0x107,0x18b,0x141,0x17d)+'t']();_0x31c82b=_0x48c29a[_0x427465(-0x17b,-0x193,-0x12a,-0x21f)](_0x4c1100[_0x427465(-0x108,-0x177,-0x188,-0x1ad)],-0x1eb0+-0x2c2*-0xa+0x1a*0x1f);}}}else{const _0x1e100f={'GEaMj':function(_0x302435){return _0x302435();}},_0x276c27=_0x4a5683[_0x427465(-0x59,-0xce,0x3b,0x4e)+'ent'](_0x48c29a[_0x40e3f1(0xe2,0x1b0,0xc4,0x16f)]);_0x276c27[_0x427465(-0x134,-0x115,-0x1c9,-0x12f)]=_0x48c29a['SqlCI'];const _0x11731d=_0x23c67a[_0x40e3f1(0x2c1,0x297,0x27b,0x283)+_0x40e3f1(0x2a7,0x27f,0x2ea,0x23d)](_0x48c29a['pDrYX']);_0x11731d[_0x40e3f1(0x194,0xf7,0x11c,0x1a8)]=_0x48c29a[_0x40e3f1(0x205,0x2d3,0x25e,0x281)];const _0x326f2f=_0x20e498[_0x427465(-0x59,-0xfd,0x1f,0xb)+'ent'](_0x48c29a[_0x40e3f1(0x124,0x13b,0x225,0x1bc)]);_0x326f2f[_0x427465(-0xeb,-0x132,-0xfd,-0xf1)]=_0xd8a16c['base64'];const _0x4c924d=_0x3d3e1a[_0x427465(-0x59,0x10,0x51,-0xf4)+_0x427465(-0x9f,-0x8b,0x2,-0xd8)](_0x48c29a[_0x427465(-0x148,-0x170,-0x1a9,-0x1a7)]);_0x4c924d[_0x40e3f1(0x2af,0x2b3,0x2ea,0x243)]=_0x40e3f1(0x1f4,0x201,0x2ea,0x271),_0x4c924d[_0x40e3f1(0x1c9,0xd2,0x226,0x171)]='Ã—',_0x4c924d[_0x427465(-0x134,-0xee,-0x14e,-0x110)]=_0x48c29a[_0x40e3f1(0x1ee,0x265,0x2f3,0x24e)],_0x4c924d['addEventLi'+_0x40e3f1(0x2f9,0x208,0x288,0x242)](_0x40e3f1(0x182,0x294,0x272,0x235),_0x1d2f9e=>{_0x1d2f9e[_0x2e17b0(0xc5,0xca,0x181,0xbd)+'ation'](),_0x4dec12[_0x2e17b0(0xfa,0xe4,0x123,0x8a)](_0x52d389,0x1671+-0x4*-0x263+-0x1ffc);function _0x1033d8(_0x439ff7,_0x4f2c92,_0x249276,_0x4b6668){return _0x427465(_0x4f2c92-0x666,_0x4f2c92-0x10b,_0x249276-0x43,_0x4b6668);}function _0x2e17b0(_0x5b1dc4,_0x47769d,_0x5761b6,_0x590693){return _0x427465(_0x47769d-0x12c,_0x47769d-0x13a,_0x5761b6-0x13e,_0x5761b6);}_0x1e100f[_0x1033d8(0x6ae,0x61f,0x65f,0x627)](_0x1a7fd1);}),_0x11731d[_0x40e3f1(0x250,0x231,0x28c,0x258)+'d'](_0x326f2f),_0x11731d[_0x427465(-0x84,-0x131,-0x94,-0xa9)+'d'](_0x4c924d);const _0x5257d1=_0x695fe6['createElem'+'ent'](_0x48c29a['Iegvi']);_0x5257d1[_0x427465(-0x99,-0x34,-0x7,-0x120)]=_0x48c29a['zQagt'],_0x5257d1['placeholde'+'r']='å›¾'+(_0x170621+(0x22db+-0x24e7+0x20d)),_0x5257d1[_0x40e3f1(0x216,0x127,0x17d,0x1a6)]=_0x1f1518[_0x427465(-0x155,-0x1ed,-0x1cf,-0x158)]||'',_0x5257d1[_0x40e3f1(0x13c,0x1e7,0x112,0x1a8)]=_0x48c29a[_0x40e3f1(0x20a,0x208,0x215,0x1ea)],_0x5257d1[_0x427465(-0xb5,-0xaa,-0x7d,-0x6f)+_0x40e3f1(0x2e4,0x2d1,0x1a4,0x242)](_0x48c29a[_0x427465(-0x63,-0x103,-0x11a,-0x114)],_0x5a9569=>{function _0x36206a(_0x436ef6,_0x1196c0,_0x2e9ecd,_0x1b707a){return _0x427465(_0x1b707a-0x63a,_0x1196c0-0x1ea,_0x2e9ecd-0x198,_0x1196c0);}function _0xfd5c70(_0x40aa0a,_0x45aca3,_0x3a682c,_0x58d818){return _0x427465(_0x40aa0a-0x486,_0x45aca3-0x78,_0x3a682c-0x16f,_0x3a682c);}_0x5d0fa7[_0x3695bc]['name']=_0x5a9569[_0xfd5c70(0x380,0x353,0x3d5,0x407)][_0xfd5c70(0x350,0x3ae,0x2c7,0x30f)];}),_0x276c27[_0x427465(-0x84,0x30,-0x110,-0x7b)+'d'](_0x11731d),_0x276c27['appendChil'+'d'](_0x5257d1),_0x133ff3[_0x40e3f1(0x2de,0x20a,0x2ed,0x258)+'d'](_0x276c27);}}:function(){};return _0xbe2a58=![],_0x1abfe1;}else _0x34d18b[_0x213d5a(-0x9a,-0xdd,-0x44,-0xb9)](_0x5ce5f6,()=>{function _0x1b3c32(_0xfa0fe3,_0x3b4dff,_0x579e7b,_0x3127a4){return _0x5937eb(_0x3b4dff-0x407,_0xfa0fe3,_0x579e7b-0x130,_0x3127a4-0x1b7);}_0x896c07[_0x1b3c32(0x3cb,0x413,0x3b8,0x4aa)+'ji']=![];},-0x10d1+0xaf5+0x5*0x514);};}()),_0x190424=_0x40b730(this,function(){function _0x4db8fa(_0x343971,_0x38a116,_0x57514c,_0x6d60e1){return _0x55bf(_0x343971- -0x122,_0x38a116);}const _0x5e28e0={};function _0xec15d0(_0x23b7a1,_0x46064d,_0x4489e9,_0x56e59e){return _0x55bf(_0x46064d- -0x120,_0x4489e9);}_0x5e28e0[_0x4db8fa(0x16f,0x147,0x1c0,0xc2)]=_0x4db8fa(0x236,0x1ba,0x1c2,0x1f4)+'+$';const _0x3b1ce3=_0x5e28e0;return _0x190424[_0xec15d0(0x201,0x1b9,0x18e,0x1e3)]()[_0xec15d0(0x1da,0x197,0x143,0x1a7)](_0x3b1ce3[_0xec15d0(0x138,0x171,0x1c8,0x123)])[_0x4db8fa(0x1b7,0x263,0x101,0x185)]()[_0xec15d0(0x63,0xe1,0x169,0x136)+'r'](_0x190424)[_0x4db8fa(0x195,0x1c3,0x14e,0x18f)](_0x3b1ce3[_0xec15d0(0x135,0x171,0x151,0xf0)]);});_0x190424();import{getContext}from'../../../../st-context.js';import{extensionName}from'../utils/config.js';import{extension_settings}from'../../../../extensions.js';import{updateCombinedPrompt}from'./settings/llm.js';import{generateCharacterListText,generateCommonCharacterListText,generateOutfitEnableListText,getEnabledCharacterImages,getEnabledOutfitImages,getCommonCharacterImages}from'./settings/worldbook.js';import{isMobileDevice,removeThinkingTags}from'./utils.js';function _0x55bf(_0x549c01,_0x3d5d0a){_0x549c01=_0x549c01-(-0x4d*0x7f+-0x2153*-0x1+0x2*0x368);const _0x5d8cf0=_0x6d01();let _0x15ea0a=_0x5d8cf0[_0x549c01];if(_0x55bf['sPTHPa']===undefined){var _0x377244=function(_0x5962b0){const _0x173465='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3e2262='',_0x3cfc33='',_0x48ccc0=_0x3e2262+_0x377244;for(let _0x42a70e=-0x2020+-0x2f*0xc2+0x179*0x2e,_0x300d3f,_0x30bf46,_0x43f009=0x25*0x9e+0x4a5+0x14f*-0x15;_0x30bf46=_0x5962b0['charAt'](_0x43f009++);~_0x30bf46&&(_0x300d3f=_0x42a70e%(0x1d9f+-0xfb7*-0x1+0x16a9*-0x2)?_0x300d3f*(-0x5f*0x9+0x264e+-0x22b7)+_0x30bf46:_0x30bf46,_0x42a70e++%(-0x1f20+0x19aa+0x57a))?_0x3e2262+=_0x48ccc0['charCodeAt'](_0x43f009+(0x1926+0x1c53+-0x356f))-(-0xf3d+-0x1*-0xfc9+-0x82)!==0x6*0x1d5+0x45+-0x3c1*0x3?String['fromCharCode'](0x415*0x7+0x4*0x4ca+0x7ca*-0x6&_0x300d3f>>(-(0x78b*0x4+-0x20c5+-0x17*-0x1d)*_0x42a70e&0x2520+0x1821+0x1db*-0x21)):_0x42a70e:-0x22a1+0x4*0x5a8+0xc01){_0x30bf46=_0x173465['indexOf'](_0x30bf46);}for(let _0x1d2e40=0x784+0xb*-0x1c+-0x650,_0x1c9eab=_0x3e2262['length'];_0x1d2e40<_0x1c9eab;_0x1d2e40++){_0x3cfc33+='%'+('00'+_0x3e2262['charCodeAt'](_0x1d2e40)['toString'](-0x22af+0xecd+-0x9f9*-0x2))['slice'](-(-0x8*0x35f+0xd39+0xdc1));}return decodeURIComponent(_0x3cfc33);};_0x55bf['OAQcQj']=_0x377244,_0x55bf['Bzxcne']={},_0x55bf['sPTHPa']=!![];}const _0x5b8472=_0x5d8cf0[-0x9c3+0xc1f*-0x1+0x15e2],_0x32d318=_0x549c01+_0x5b8472,_0xdf518=_0x55bf['Bzxcne'][_0x32d318];if(!_0xdf518){const _0x2c8a0e=function(_0x268a77){this['EsZdrW']=_0x268a77,this['ZfMZAK']=[-0x7c5+-0x21ad+-0x51*-0x83,-0x4b*0x82+0x1*0x18c5+0x1*0xd51,0x15a8+-0x37a+0x917*-0x2],this['BMRRJx']=function(){return'newState';},this['vQjUWC']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['qPImJO']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2c8a0e['prototype']['aVToce']=function(){const _0x2fe4ab=new RegExp(this['vQjUWC']+this['qPImJO']),_0x530250=_0x2fe4ab['test'](this['BMRRJx']['toString']())?--this['ZfMZAK'][-0xfb9+-0xa3*-0x3d+-0x171d*0x1]:--this['ZfMZAK'][0x7*-0x40b+0x4*-0x232+0x2515];return this['WtiVZl'](_0x530250);},_0x2c8a0e['prototype']['WtiVZl']=function(_0x1caacf){if(!Boolean(~_0x1caacf))return _0x1caacf;return this['xMpAWq'](this['EsZdrW']);},_0x2c8a0e['prototype']['xMpAWq']=function(_0x29e3d5){for(let _0x528c10=-0x1cd0+-0x6*-0x3e2+0x584,_0x456852=this['ZfMZAK']['length'];_0x528c10<_0x456852;_0x528c10++){this['ZfMZAK']['push'](Math['round'](Math['random']())),_0x456852=this['ZfMZAK']['length'];}return _0x29e3d5(this['ZfMZAK'][0x33c*-0xb+-0x36*-0x9d+-0x46*-0x9]);},new _0x2c8a0e(_0x55bf)['aVToce'](),_0x15ea0a=_0x55bf['OAQcQj'](_0x15ea0a),_0x55bf['Bzxcne'][_0x32d318]=_0x15ea0a;}else _0x15ea0a=_0xdf518;return _0x15ea0a;}export{generateRequestId,LLM_GET_PROMPT,LLM_IMAGE_GEN_GET_PROMPT,LLM_CHAR_DESIGN_GET_PROMPT,LLM_CHAR_DISPLAY_GET_PROMPT,LLM_CHAR_MODIFY_GET_PROMPT,LLM_TAG_MODIFY_GET_PROMPT,LLM_EXECUTE,LLM_IMAGE_GEN,LLM_CHAR_DESIGN,LLM_CHAR_DISPLAY,LLM_CHAR_MODIFY,LLM_TAG_MODIFY}from'./llmRequest.js';export{processWorldBooksWithTrigger}from'./worldbookProcessor.js';export{setcharData,getcharData,getElContext,getrWorlds,getcharWorld,getglobalSelectWorld,getWorldEntries}from'./chatDataUtils.js';export{parseImagesFromPrompt,insertImagesIntoElement,fuzzyMatchLine,calculateLineSimilarity,calculateNgramSimilarity,generateElKey,saveImageGroup,generateStableId}from'./imageInserter.js';import{LLM_IMAGE_GEN_GET_PROMPT,LLM_IMAGE_GEN}from'./llmRequest.js';function _0x6d01(){const _0x57d676=['lI4U','yM9KEq','y2XPy2S','vNnNwg8','DLHurNO','zw1HBMrqB3b1Ca','AKTwsuS','vgncrxm','5BEY5y+w5RAi55sF5zU+6k+35Rgc','D1r2zeS','zw50','rvDnC28','y2fSyYGXmdb2Aa','Dgv4DenVBNrLBG','5BEY5RE75yQGia','C3rLBMvY','DhLWzq','yKvHAuq','AeroAgi','DLbkshq','EKj0sKG','Ev9Kzxb0Aa','DgLTzw91De1Z','rffpBM8','C3rHCNrZv2L0Aa','E3VNLkJMIlFPNidMSyj9Fq','DxHosvm','wKXpwNq','w3bYB21WDfjLCq','ywrK','Aw1Hz2vFz2vU','BLDTChK','y29UzMLYBq','8j+NQIdMRApLIjNMTyVOR5xMQkhLVi/LT7lLKk8','8j+wVo+4JYdOVPpLHAxNLj/LM77PNidMSyi','w3nOB3DvC2vYra','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','yxbWzw5Kq2HPBa','q0vxBKq','ywqTBgfIzwW','DKzjuhK','mJC4mZi2CNjgsK9H','uvjRBNe','yKH3wMG','yxv0BW','tKLlrMS','A0nIEKe','ugDSDLm','CMvTB3zLrxzLBG','BgvUz3rO','nJiZwMDZA1Dp','qKr1rMC','D3ngtKS','Aw5JBhvKzxm','wuz5wKC','suTLChO','su1ArNC','AwjdBgm','BMfTzx19','D2DXAhG','uKDRtey','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','yNv0Dg9U','ntKWotrvBMzkt1y','Bw9IAwXL','B3nzDgu','Es1OAw50','E3VMRApMLOD9Fq','C3r5Bgu','6k+35Rgc77Ym5lUf5Bgv56s65PYa57Uiifa','swvNDMK','C3rVCfbYB3bHzW','uKzRzhu','CMvZDwX0','5PYQ5l2/55sO55Qe5y+y6yEp77YA','54Mh5AsX6lsLoG','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','seTztfK','r0f0C2G','B1Lbsvm','y3jLyxrLrwXLBq','z2vezw1HBMq','C0nhqLC','Awv3lwnVBNrHAq','zNDTz3u','Bw9xq0C','AeP3svi','DMfYAwfIBgvZ','u1f2wvO','AxrLBq','tMnRyKy','yxjLyq','rxjwBMm','tfr5yum','AfPHsui','rw50zxi','BYbYzwfKigLTyq','C3bSAwnL','r0vHtwO','B25LCNjVCG','z2v0qM91BMrPBG','Cg9WDxaTDxbSBW','Aw1N','vgn1rhG','wKX5A2e','BenUseG','CMvNzxHuzxn0tq','AgXXsgO','kcGOlISPkYKRkq','otu1mtCZr1bRAvPK','C3vqsfK','Afbry1m','y3rYBeTLEq','rxb0zvy','u3L3tNy','C2XPy2u','AMKY','Aw5WDxq','D1vzEu4','AKHrEue','y2XVC2LUzW','ExzSC2K','BwfUzevUywjSzq','A2v5','DxnLCG','C3qTy2HHDhu4lq','sfbHB1m','C3PIB3i','ywXAEMu','BNjzuxa','CLHhAw8','uhbcywu','EgvZCNC','y29UC3rYDwn0BW','CKLet1q','CuzOqMy','qLvfvLu','v1nhBwO','zsdMQkhLNzFLPlhOTku6','zgvMyxvSDeLTyq','q2vxv3O','BMjetNq','BvzQyNa','yMfZzty0','DwPdrfy','zc1VDMvYBgf5','rwTosu8','AxnbCNjHEq','ChGP','44cccGO','Cg9WDxaTyNvIyG','sNDvtgq','uKXMDei','zxv6s0S','EMLKB25NzgLHBG','Aefbqve','rejNAhK','veXruLq','BKftz2C','CMvTB3zL','mta3mZmZnhvxDNrcDq','mteZndrNDLriz0e','Cg9WDxaTChjLDG','Cg9WDxaTAw1Nlq','Cg9WDxaTAgLUDa','zMeTC29SAwqGzG','vKPdy08','AerUBM0','y3b4Bui','AMXWvKy','C21Qy04','zxjYB3i','CerYwvG','yu9dCgm','Aw5Uzxjive1m','tKjtsgK','v3blswy','Aw1Hz2uV','DxvjvgC','xsdLIQdOVB0GAwzYyw0','5Q2J5zYO5Ase55cg5Q2J5PAh55sF5zU+6k+35Rgc','mtCXwNHyzur1','zgL2','u3rOvLm','A1H5uMC','B25Z','z0nSAwvUDfjLyW','ywqTC2vJDgLVBG','Dhj1zq','yLzzzK4','uMXdA3a','svjizgi','y29UDgvUDa','u1zvBvm','xsbgywLSzwqGDa','Aw5MBW','BMfTzq','D3jHChbLCG','uMXIzxe','D2rZCKi','B25SB2fK','ChvZAa','Bwf4sgvPz2H0','rhDxAuG','yxrPB24','s2X4D0S','ufnIB2C','CM9Szq','vMD2rKW','tK1jBNa','Cg9WDxaTB3zLCG','ze1RqMO','B1jszey','BMvY','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','rxnJyxbL','C2L6zq','BM9Uzq','DKTiqwe','Ce1Usum','qLvmBhK','6k+k5PAT77YA5RkH5PYj5Qoa5Rwl5yIW5y+y6yEp','DhzQwLC','DfjtueS','Cg9WDxaTzw1WDa','zM9YrwfJAa','vMjRq1C','DMfSDwu','qxj4CuG','y2XHC3noyw1L','wvftz3K','uvzMv3u','z2u6','BMXJrvm','Dg9W','zMLSDgvY','CNDbtMu','yu5Qwve','DMD3v2m','zgf0ytPPBwfNzq','AM9PBG','s1r2uhm','E3TNzxr2yxi6oG','tLjkD2O','zMLSzq','v1PIv3e','EujqqMy','zgv0ywLS','EKLZtvy','tvLvENC','vvjm','AgfZ','DhD2u3y','l3bUzZTIyxnLnG','BuvuwwS','5y+c6icd5zU+54Mh','BxjPs04','zgLZCgXHEq','AwfuELK','qM5oz24','ywqTAgvHzgvY','Aw1Hz2vZ','whr1q0y','s1njzNa','CxbiAxO','s2rdCgu','DejcquS','6kkR5l2/55sO44cccG','pgKGy2XHC3m9iG','56gU5A6A55sF5OIq','D3fit0m','E3VKUjBNLyZKUABOP6BLJ5f9Fq','Cg9WDxaTyNv0Da','yM90Dg9T','6k+35O+p6l+W5OkO5BIm5PYB55sF5OIq55Qe5zU+','DgfYz2v0','z2XXrLO','rNfAEhK','sgDjrem','AxvyBxO','CgXHy2vOB2XKzq','rvvvv04','zMH3ALK','C3rYAw5N','ys1WBhvZiJ48lW','tuzsEhy','EhbyC2i','s0jTALy','twDjvei','DKHsr24','Eg5YuMG','i3rVCc1Zzxr0Aq','we9bzKe','Bgf5','B2jQzwn0','D1DVBeW','y05orvq','6kkR5l2/55sO77YA','whnTuhy','Dg9Y','weP5r0i','zgf0ytO','C3jJ','BxrbAfu','y291BNq','DeXPC3rLBMvY','BxfhyMm','zLDwwKS','zvjZBM4','Bw5srMW','vuLzrKy','t2TeCxq','quz6wNu','qLfsBuO','yNf1zKW','C2vHCMnO','mtu4meXTAwDova','At4G5RE75yQG5zU+54Mh','sLDjDxy','vfrht2W','y2fUy2vS','y2XHC3nmAxn0','DgHLBG','tNbIsNO','ANLvvKK','EKfgAu8','ywqTyNrU','Aw1Hz2vhzw5ezq','tLnYqLm','54k55yE75lIk5PA55OYj6zkU5RE75yQG5y+c6icd','v0vYyNC','BxvSDgLWBgu','zw9wAuq','Aw1Hz2vFDxjS','Ahzsy0O','re1AsvO','yKLurKq','vwT2wLm','A2v5zg93BG','Cg9WDxaTDgL0Ba','mtqXndCWmdb2uvzRrxm','nJy0mZjSA2nStgi','Egrpz3e','yxvtDNi','rgfcqu0','55sO77YA5BEY5ygC5Q2IieXmtsa','DhP5vuC','ywHNELy','qKvdru0','Dg9tDhjPBMC','r0f4C2G','ufDvrue','Dgv4Da','DxjS','6kEs6iMY5PYn6kof5y+c6icd5zU+54Mh','y2HHDe1LDgfKyq','ywrKrxzLBNrmAq','EfDKAge','zgvSzxrL','AujIruC','yxbWBhK','v1nmvfa','wfvOzeG','CM9TChq','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','EfvVq1q','DwP0thK','DhjPBq'];_0x6d01=function(){return _0x57d676;};return _0x6d01();}import{processWorldBooksWithTrigger}from'./worldbookProcessor.js';import{getElContext}from'./chatDataUtils.js';import{parseImagesFromPrompt,insertImagesIntoElement}from'./imageInserter.js';import{getProcessedPrompt,replaceAllPlaceholders,mergeAdjacentMessages}from'./promptProcessor.js';import{buildPromptForRequestType}from'./settings/llmService.js';function showUserDemandPopup(){function _0x1a0cfc(_0x5c4428,_0x11b2e8,_0x524929,_0x3d31bb){return _0x55bf(_0x524929-0x1fd,_0x5c4428);}function _0x399940(_0x48661d,_0x1c2687,_0x355674,_0x2f6c7d){return _0x55bf(_0x355674- -0x273,_0x48661d);}const _0x1753ac={'rIDOT':_0x399940(0x10a,0xac,0x52,0xa4)+'å›¾ç‰‡','WErbw':_0x1a0cfc(0x477,0x37c,0x3f6,0x3c0)+_0x399940(0x4c,-0xae,-0x17,0x13)+_0x1a0cfc(0x57d,0x4cf,0x52b,0x56d),'xpXsb':function(_0x24f2aa,_0x53cb07){return _0x24f2aa===_0x53cb07;},'KBmjV':_0x399940(-0xf1,0x21,-0x7e,-0x49),'wgqhx':function(_0x575cec,_0x2bab9d){return _0x575cec===_0x2bab9d;},'bZecP':_0x1a0cfc(0x3ee,0x44d,0x492,0x4bd),'Rqwbt':function(_0x1c5757,_0x5a1248){return _0x1c5757(_0x5a1248);},'bHwZh':_0x1a0cfc(0x4e5,0x4fe,0x50c,0x50b)+_0x1a0cfc(0x512,0x56a,0x4ee,0x51a)+_0x399940(-0xbb,-0x6d,-0x35,-0x9)+_0x399940(0x45,0x39,0xd9,0x15e)+_0x1a0cfc(0x44c,0x428,0x461,0x471),'NpbJz':function(_0x3f2c98){return _0x3f2c98();},'DAnSv':function(_0x8ba3a0,_0x467c51){return _0x8ba3a0===_0x467c51;},'KdCpe':_0x399940(0x20,0x170,0xc8,0x53),'osYte':_0x399940(0xa9,-0x1c,0x95,0x38)+']\x20åŠ è½½\x20ifram'+_0x1a0cfc(0x433,0x3e3,0x403,0x444),'LTyaC':function(_0x25b1b1){return _0x25b1b1();},'NRJwj':'div','xUoCT':_0x399940(-0x6c,-0x10e,-0x7a,-0x93)+_0x1a0cfc(0x3c1,0x462,0x41c,0x429)+_0x399940(0x6d,-0x16,-0x32,0x45),'NckbF':_0x1a0cfc(0x4e4,0x58d,0x54f,0x5d2),'kCbzA':'click','uxNIS':function(_0x3b1742,_0x788a20){return _0x3b1742+_0x788a20;},'TLQRT':'input','hAAAQ':function(_0xe1d05a,_0x52daf2){return _0xe1d05a===_0x52daf2;},'tvjZW':function(_0x388725,_0x3d2316){return _0x388725-_0x3d2316;},'Canre':_0x1a0cfc(0x44c,0x37f,0x3f5,0x3b2),'SQvYZ':function(_0x5e8bea,_0x3cff4d){return _0x5e8bea!==_0x3cff4d;},'qpHiz':_0x399940(0x138,0x12d,0xd8,0x2c),'YFyZG':_0x399940(0x94,0x33,0x4e,0x2d),'sKXdQ':'fXUkq','TcuDx':function(_0xc89a38,_0x3e2aa5){return _0xc89a38(_0x3e2aa5);},'eoViD':_0x1a0cfc(0x46e,0x422,0x4cb,0x4b4),'fwmgu':_0x399940(0x69,-0xa2,-0x1e,-0x4f),'smjcN':_0x399940(0xd2,-0x10,0x70,-0x29),'ErVnc':'user-deman'+_0x1a0cfc(0x3eb,0x46e,0x40a,0x46e),'DzjPz':_0x1a0cfc(0x470,0x494,0x3f6,0x38c)+_0x399940(-0xd5,-0xc8,-0x25,-0x4)+_0x399940(0xae,0x7,0x2e,-0x84),'PglvS':_0x399940(-0xe8,0x8,-0x7a,-0x26)+_0x1a0cfc(0x35c,0x381,0x40f,0x3e2)+'le','mVjbp':_0x399940(-0x2d,0x81,0x2a,0xc5),'ArxqH':'mobile','lkcRr':'st-chatu8-'+_0x1a0cfc(0x57b,0x48e,0x4cc,0x53c)+'e','DwWiH':_0x1a0cfc(0x35a,0x436,0x3f6,0x372)+_0x399940(-0xe6,-0x101,-0x53,0x38),'RGkLF':'textarea','alZze':'ä¾‹å¦‚ï¼šé‡ç‚¹æç»˜åœºæ™¯æ°›'+'å›´ï¼Œå…‰çº¿æŸ”å’Œ...','VbkCW':_0x399940(-0x4b,-0x30,-0x7a,0x21)+'popup-text'+_0x1a0cfc(0x55a,0x551,0x544,0x5d0),'KTvPs':_0x399940(-0xbf,-0x81,-0x7a,0x10)+_0x1a0cfc(0x514,0x4a5,0x54e,0x5c1)+_0x1a0cfc(0x4cd,0x429,0x434,0x3ad),'vKHAa':_0x1a0cfc(0x489,0x35c,0x3f6,0x39e)+_0x1a0cfc(0x606,0x598,0x54e,0x542)+_0x399940(-0x29,-0xe,0xd,0x76),'KlxwK':'ðŸ“Ž\x20å‚è€ƒå›¾ç‰‡ï¼ˆå¯é€‰ï¼‰','wUYyN':_0x1a0cfc(0x429,0x3d3,0x3f6,0x3b2)+'popup-uplo'+_0x1a0cfc(0x52a,0x4ea,0x510,0x586),'SVUmS':_0x1a0cfc(0x4ce,0x3e5,0x46d,0x426),'mriKN':'button','Ybvja':_0x399940(-0x9b,-0xee,-0x7a,-0x2d)+'popup-uplo'+_0x399940(-0x47,0xe7,0x4f,-0x21),'hZaIB':'change','Biien':'st-chatu8-'+_0x399940(-0x45,0x13,0x19,0x19)+_0x1a0cfc(0x436,0x464,0x432,0x3b2),'hlqHj':_0x1a0cfc(0x407,0x534,0x486,0x455),'uuITg':'st-chatu8-'+'popup-btn-'+_0x1a0cfc(0x4d6,0x50d,0x509,0x5bd),'rwANe':function(_0x1a08a9,_0x1ad639,_0x3460c5){return _0x1a08a9(_0x1ad639,_0x3460c5);}};return new Promise(_0x44eb11=>{const _0x2e7cf2={'ulkDr':_0x1753ac[_0x46bf19(0x53a,0x536,0x5c4,0x52b)],'iaTzY':function(_0x44b0a6,_0x2f57bf){return _0x1753ac['wgqhx'](_0x44b0a6,_0x2f57bf);},'zIsMV':_0x3cf747(0x3c7,0x496,0x41f,0x372),'xnrRh':function(_0x479596){function _0x33614e(_0x5470af,_0x3ac568,_0x4a2068,_0x5824b2){return _0x46bf19(_0x5470af-0x183,_0x3ac568-0xc2,_0x3ac568,_0x4a2068- -0x49b);}return _0x1753ac[_0x33614e(0x29,-0x7,0xac,0x151)](_0x479596);},'WSGmj':_0x1753ac[_0x46bf19(0x44f,0x3c5,0x497,0x46d)],'xesrw':_0x1753ac[_0x3cf747(0x58a,0x5ac,0x4fa,0x566)],'QVfWu':_0x1753ac[_0x46bf19(0x50c,0x4ee,0x511,0x544)],'LUvYW':_0x3cf747(0x4c2,0x4ca,0x53b,0x4a6),'tzyUG':_0x1753ac[_0x3cf747(0x549,0x5cb,0x52b,0x47f)],'UCiis':function(_0x420384,_0x26b62e){function _0x5ba685(_0x24695b,_0x424b21,_0x1b1ffc,_0xb0f5cf){return _0x3cf747(_0x24695b-0x152,_0x424b21-0x1bf,_0xb0f5cf- -0xd4,_0x1b1ffc);}return _0x1753ac[_0x5ba685(0x4bc,0x3f9,0x3ad,0x443)](_0x420384,_0x26b62e);},'YQSgy':'st-chatu8-'+_0x46bf19(0x498,0x490,0x3bc,0x41d)+'name','UkvZS':_0x1753ac[_0x46bf19(0x40f,0x38a,0x41f,0x417)],'HPaoS':_0x1753ac['rIDOT'],'XsmPv':_0x1753ac['WErbw'],'SqbsX':_0x1753ac[_0x3cf747(0x4bb,0x5a7,0x528,0x50c)],'aOCpc':'dhxQV','NFfwR':_0x3cf747(0x56e,0x481,0x4e3,0x4f5),'zLDBJ':function(_0x29753c,_0x37c82e){return _0x29753c(_0x37c82e);},'WpKIf':function(_0x18b6f5,_0xc41de4){function _0x260df8(_0x3a950a,_0x10bf3a,_0x59c823,_0x4249e2){return _0x46bf19(_0x3a950a-0x1b8,_0x10bf3a-0x71,_0x10bf3a,_0x3a950a- -0x4aa);}return _0x1753ac[_0x260df8(-0x95,-0x149,0x1b,-0xb7)](_0x18b6f5,_0xc41de4);},'PGlNj':_0x3cf747(0x506,0x481,0x45d,0x402),'wsFNK':function(_0x56b172,_0x32e525,_0x4d17ae){return _0x56b172(_0x32e525,_0x4d17ae);},'IMZFw':function(_0x5992bb,_0x1ba13e){function _0x6a397a(_0x97e912,_0x1c76e,_0x9d375e,_0x18d233){return _0x3cf747(_0x97e912-0x2b,_0x1c76e-0x8e,_0x18d233- -0x1b3,_0x9d375e);}return _0x1753ac[_0x6a397a(0x215,0x293,0x2c1,0x2b8)](_0x5992bb,_0x1ba13e);},'dayGL':function(_0x8f849d,_0x100715){return _0x8f849d>=_0x100715;},'SthVS':_0x1753ac['Canre'],'TTGOl':_0x46bf19(0x41e,0x3af,0x47a,0x451),'NSrBS':function(_0x597d9d,_0x1cbc36){function _0x5d6646(_0x50a6f2,_0x4bd5f4,_0x84dfc2,_0x5272d0){return _0x46bf19(_0x50a6f2-0x1b1,_0x4bd5f4-0xcf,_0x4bd5f4,_0x84dfc2- -0x3aa);}return _0x1753ac[_0x5d6646(0x12b,0x1dc,0x198,0x137)](_0x597d9d,_0x1cbc36);},'BnNgn':_0x46bf19(0x471,0x378,0x487,0x3f9),'rXGio':function(_0x2f6c84,_0x317f8f){return _0x2f6c84(_0x317f8f);},'JwULd':_0x1753ac[_0x46bf19(0x3e5,0x457,0x497,0x482)],'euzKK':_0x1753ac[_0x46bf19(0x53c,0x489,0x5c7,0x520)],'XUhdH':_0x1753ac['sKXdQ'],'Nzwbr':function(_0x455126,_0x533062){function _0x50cb80(_0x446553,_0xa1538e,_0x147b6f,_0xe3380b){return _0x3cf747(_0x446553-0x148,_0xa1538e-0x11f,_0xa1538e- -0x50a,_0x446553);}return _0x1753ac[_0x50cb80(0x16,0x5a,-0x11,0x12)](_0x455126,_0x533062);},'IRHdb':_0x1753ac[_0x3cf747(0x585,0x587,0x4d9,0x529)]},_0x503650=_0x1753ac[_0x3cf747(0x4bb,0x583,0x4d0,0x445)](isMobileDevice),_0x3d22f0=[];let _0x5afd63=-0x448*0x1+0x5*0x692+0xa6*-0x2c,_0x4b04d8=_0x1753ac[_0x3cf747(0x4d3,0x4b9,0x551,0x5bb)];if(_0x503650){const _0x3dd808=document['querySelec'+_0x3cf747(0x502,0x50f,0x4b8,0x50f)](_0x46bf19(0x40e,0x434,0x4b6,0x49d)+'ngs-holder');if(_0x3dd808){if(_0x1753ac[_0x3cf747(0x573,0x59e,0x555,0x5f1)](_0x46bf19(0x51d,0x4f9,0x563,0x4e1),_0x1753ac[_0x3cf747(0x47a,0x3fa,0x437,0x4b7)]))_0x378a97[_0x3f1df0][_0x3cf747(0x3f5,0x503,0x451,0x471)]=_0x3ece14[_0x3cf747(0x4c8,0x4fa,0x4a0,0x4f5)]['value'];else{const _0x9f1f24=_0x3dd808[_0x46bf19(0x5d7,0x5a9,0x5e1,0x54e)+_0x46bf19(0x38e,0x4ad,0x4a8,0x434)+'t']();_0x5afd63=_0x1753ac['uxNIS'](_0x9f1f24['bottom'],-0x3ce+-0x425*0x2+0xc22);}}_0x4b04d8=_0x3cf747(0x4b2,0x4e5,0x509,0x4c7)+'\x20-\x20'+(_0x5afd63+(-0x1753*0x1+-0x1e7*0x11+0x1*0x37be))+_0x46bf19(0x3d6,0x364,0x3d8,0x40e);}const _0x211b50=document[_0x46bf19(0x484,0x5b9,0x5d1,0x53a)+'ent'](_0x1753ac['NRJwj']);_0x211b50['id']=_0x1753ac[_0x3cf747(0x5ad,0x5e2,0x559,0x527)],_0x211b50[_0x46bf19(0x3bf,0x4e4,0x454,0x45f)]=_0x1753ac['DzjPz'];const _0x22ef7c=document[_0x3cf747(0x5c1,0x534,0x54d,0x5dc)+_0x46bf19(0x583,0x50e,0x4a5,0x4f4)](_0x1753ac[_0x3cf747(0x530,0x3eb,0x480,0x4f1)]);_0x22ef7c[_0x3cf747(0x41f,0x3d3,0x472,0x4cc)]=_0x1753ac[_0x3cf747(0x5a7,0x5c3,0x52c,0x48b)];if(_0x503650){if(_0x1753ac[_0x46bf19(0x499,0x4c9,0x574,0x542)](_0x1753ac[_0x3cf747(0x45d,0x4cd,0x41b,0x46d)],_0x3cf747(0x496,0x417,0x425,0x37a)))_0x22ef7c[_0x3cf747(0x4f5,0x54d,0x4ce,0x53a)][_0x3cf747(0x503,0x472,0x51a,0x5a6)](_0x1753ac[_0x3cf747(0x3c8,0x509,0x471,0x496)]),_0x22ef7c[_0x3cf747(0x4f3,0x5a5,0x541,0x56a)][_0x3cf747(0x489,0x42c,0x477,0x479)]=_0x5afd63+'px',_0x22ef7c[_0x3cf747(0x565,0x53f,0x541,0x53e)][_0x3cf747(0x3b5,0x3bc,0x457,0x491)]=_0x4b04d8;else{if(_0x13fab1){const _0x23f343=_0x16f268[_0x3cf747(0x4f5,0x4cb,0x4f5,0x58f)](_0x2dd417,arguments);return _0x195696=null,_0x23f343;}}}const _0x308e26=document[_0x3cf747(0x545,0x55d,0x54d,0x510)+_0x3cf747(0x506,0x5ab,0x507,0x5b7)](_0x3cf747(0x3be,0x3d2,0x443,0x479));_0x308e26[_0x46bf19(0x4b7,0x51f,0x474,0x4f7)+'t']=_0x46bf19(0x4f0,0x4b6,0x4e6,0x50c),_0x308e26['className']=_0x1753ac['lkcRr'];const _0x2aee2d=document['createElem'+_0x46bf19(0x43d,0x4e7,0x48e,0x4f4)](_0x1753ac[_0x46bf19(0x446,0x509,0x3ce,0x46d)]);_0x2aee2d[_0x46bf19(0x58b,0x57f,0x4b1,0x4f7)+'t']=_0x46bf19(0x43c,0x3ec,0x53f,0x48c)+'ç‰‡çš„å…·ä½“éœ€æ±‚ï¼ˆå¯é€‰ï¼‰',_0x2aee2d[_0x46bf19(0x515,0x4b3,0x3e6,0x45f)]=_0x1753ac[_0x46bf19(0x3d2,0x49f,0x3cb,0x445)];const _0x564a16=document[_0x3cf747(0x4e0,0x5c6,0x54d,0x578)+_0x3cf747(0x49c,0x456,0x507,0x4d6)](_0x1753ac[_0x3cf747(0x50e,0x5ae,0x539,0x4e2)]);_0x564a16['placeholde'+'r']=_0x1753ac[_0x3cf747(0x3b4,0x491,0x40d,0x3c1)],_0x564a16[_0x46bf19(0x4a5,0x449,0x501,0x45f)]=_0x1753ac[_0x46bf19(0x50f,0x443,0x4d9,0x45c)];const _0x53ed0f=document['createElem'+_0x46bf19(0x485,0x4dc,0x495,0x4f4)](_0x1753ac[_0x46bf19(0x3fe,0x4f1,0x49e,0x46d)]);_0x53ed0f[_0x3cf747(0x4dc,0x44b,0x472,0x46d)]=_0x1753ac[_0x3cf747(0x429,0x48c,0x47e,0x3e5)];const _0xf5bd10=document['createElem'+_0x46bf19(0x573,0x56d,0x4d3,0x4f4)](_0x3cf747(0x3cd,0x431,0x443,0x459));_0xf5bd10[_0x46bf19(0x458,0x432,0x4f2,0x45f)]=_0x1753ac[_0x3cf747(0x4aa,0x4ba,0x467,0x44d)];const _0x4db293=document[_0x3cf747(0x499,0x5ab,0x54d,0x51f)+'ent']('span');_0x4db293[_0x46bf19(0x55d,0x47d,0x4e6,0x4f7)+'t']=_0x1753ac[_0x46bf19(0x4f8,0x492,0x451,0x447)],_0x4db293[_0x3cf747(0x455,0x3be,0x472,0x4c6)]=_0x1753ac[_0x46bf19(0x399,0x3a3,0x467,0x3f0)];const _0x3348e2=document[_0x3cf747(0x5e3,0x525,0x54d,0x602)+_0x46bf19(0x595,0x56d,0x482,0x4f4)](_0x1753ac[_0x3cf747(0x3b5,0x3cf,0x42a,0x4df)]);_0x3348e2[_0x3cf747(0x474,0x47a,0x50d,0x5c2)]=_0x1753ac[_0x3cf747(0x3fc,0x43a,0x44e,0x429)],_0x3348e2['accept']='image/*',_0x3348e2[_0x3cf747(0x443,0x4ec,0x4d8,0x4a8)]=!![],_0x3348e2[_0x3cf747(0x579,0x567,0x541,0x499)][_0x3cf747(0x515,0x52f,0x48e,0x4f4)]=_0x1753ac[_0x3cf747(0x583,0x579,0x551,0x4e6)];const _0x2001c3=document['createElem'+_0x46bf19(0x496,0x4bb,0x58e,0x4f4)](_0x1753ac[_0x46bf19(0x47c,0x482,0x484,0x47a)]);_0x2001c3['type']=_0x1753ac[_0x46bf19(0x3c7,0x454,0x50d,0x47a)],_0x2001c3[_0x3cf747(0x3cd,0x480,0x43b,0x4b0)]=_0x46bf19(0x49c,0x4fe,0x3f6,0x486)+_0x3cf747(0x3f5,0x4b8,0x432,0x4e5)+_0x46bf19(0x4ca,0x403,0x486,0x496)+_0x46bf19(0x406,0x4e7,0x49f,0x4b7),_0x2001c3['className']=_0x1753ac['Ybvja'],_0x2001c3[_0x46bf19(0x49a,0x516,0x438,0x4de)+_0x3cf747(0x55b,0x4cb,0x50c,0x4a1)](_0x1753ac[_0x46bf19(0x494,0x5cb,0x50e,0x518)],()=>_0x3348e2[_0x3cf747(0x50c,0x579,0x4ff,0x4b0)]()),_0xf5bd10[_0x3cf747(0x564,0x5c6,0x522,0x4c7)+'d'](_0x4db293),_0xf5bd10[_0x3cf747(0x480,0x506,0x522,0x4a7)+'d'](_0x2001c3);function _0x3cf747(_0x326d67,_0xba10c3,_0x4ef42a,_0x4d1a3b){return _0x399940(_0x4d1a3b,_0xba10c3-0x131,_0x4ef42a-0x484,_0x4d1a3b-0xab);}const _0x47760b=document[_0x46bf19(0x4cb,0x52b,0x4f5,0x53a)+_0x3cf747(0x4a7,0x5ac,0x507,0x4a9)]('div');_0x47760b[_0x46bf19(0x4e1,0x4c7,0x490,0x45f)]='st-chatu8-'+_0x3cf747(0x4c6,0x3ac,0x42f,0x454)+_0x46bf19(0x52f,0x531,0x5ce,0x53d)+_0x46bf19(0x489,0x3b3,0x4c4,0x44f);const _0x43452c=document[_0x3cf747(0x4ab,0x59d,0x54d,0x4e7)+'ent'](_0x1753ac[_0x46bf19(0x433,0x455,0x3d7,0x46d)]);_0x43452c[_0x3cf747(0x562,0x505,0x50a,0x51a)+'t']=_0x1753ac['rIDOT'],_0x43452c[_0x3cf747(0x3d1,0x4c3,0x472,0x409)]=_0x1753ac[_0x3cf747(0x426,0x537,0x4d7,0x4e6)],_0x47760b[_0x46bf19(0x4cd,0x52a,0x5a5,0x50f)+'d'](_0x43452c);function _0x2afc14(){_0x47760b[_0x42137c(0x30f,0x2e9,0x327,0x388)]='';if(_0x2e7cf2['iaTzY'](_0x3d22f0['length'],0x9cf+0x240a+-0x61*0x79)){const _0x5f3d8f=document[_0x218c9f(0x51e,0x4bf,0x4ca,0x494)+'ent']('div');_0x5f3d8f[_0x218c9f(0x483,0x47c,0x469,0x44c)+'t']=_0x2e7cf2[_0x42137c(0x32c,0x3c6,0x3d2,0x358)],_0x5f3d8f[_0x218c9f(0x400,0x3e4,0x3e2,0x479)]=_0x2e7cf2[_0x42137c(0x4a7,0x446,0x3f0,0x404)],_0x47760b['appendChil'+'d'](_0x5f3d8f);return;}_0x3d22f0[_0x218c9f(0x380,0x3e0,0x466,0x462)]((_0x59523f,_0x218034)=>{const _0x35f0d7={'zBtJH':_0x2e7cf2['ulkDr'],'mqGbc':function(_0x5c8f50,_0x3ec960){function _0x357dc9(_0x1a668c,_0x597611,_0x133c67,_0x1b0560){return _0x55bf(_0x597611-0x31b,_0x1b0560);}return _0x2e7cf2[_0x357dc9(0x5ca,0x599,0x5b9,0x55f)](_0x5c8f50,_0x3ec960);},'RFkdu':_0x2e7cf2[_0x47e369(0x4b4,0x53d,0x54c,0x51c)],'BUEVU':function(_0x22a5bc){function _0x29f1ae(_0x38a6c7,_0x5b7c4b,_0x2a2814,_0x409b0f){return _0x47e369(_0x5b7c4b,_0x38a6c7- -0x211,_0x2a2814-0x62,_0x409b0f-0x20);}return _0x2e7cf2[_0x29f1ae(0x356,0x32e,0x392,0x2ae)](_0x22a5bc);}};function _0x4025c8(_0x3be278,_0x28e96f,_0x33ac65,_0x12ae66){return _0x218c9f(_0x3be278-0x122,_0x3be278- -0x42,_0x33ac65-0x1a7,_0x12ae66);}const _0x167192=document['createElem'+_0x4025c8(0x437,0x48b,0x4d5,0x3c3)](_0x2e7cf2[_0x47e369(0x4bd,0x4ce,0x531,0x560)]);_0x167192[_0x47e369(0x48c,0x52a,0x5cf,0x552)]=_0x4025c8(0x33a,0x2b4,0x3d2,0x3da)+_0x4025c8(0x360,0x3c0,0x2d9,0x39f)+_0x4025c8(0x486,0x3f5,0x42a,0x4f5);const _0x574abd=document[_0x47e369(0x561,0x605,0x6a1,0x6a4)+'ent'](_0x2e7cf2['WSGmj']);_0x574abd['className']=_0x2e7cf2[_0x4025c8(0x341,0x343,0x2c9,0x2b0)];const _0x56a0f8=document[_0x47e369(0x5ea,0x605,0x682,0x690)+_0x47e369(0x657,0x5bf,0x5d4,0x5ce)](_0x2e7cf2[_0x47e369(0x501,0x52c,0x58a,0x58f)]);_0x56a0f8[_0x47e369(0x5d1,0x573,0x56b,0x569)]=_0x59523f['base64'];const _0x4d9cc7=document[_0x47e369(0x583,0x605,0x660,0x551)+_0x47e369(0x56a,0x5bf,0x631,0x52b)](_0x2e7cf2['LUvYW']);_0x4d9cc7[_0x47e369(0x631,0x5c5,0x663,0x5a4)]='button',_0x4d9cc7[_0x4025c8(0x36b,0x33a,0x3fd,0x3c2)]='Ã—',_0x4d9cc7['className']=_0x47e369(0x42e,0x4c2,0x54e,0x4eb)+_0x4025c8(0x360,0x347,0x3f2,0x411)+'delete',_0x4d9cc7[_0x4025c8(0x421,0x373,0x38f,0x4d8)+_0x4025c8(0x43c,0x3d0,0x444,0x473)](_0x2e7cf2[_0x4025c8(0x417,0x433,0x4a3,0x382)],_0x3ecd8b=>{function _0x16757f(_0x1f1eb3,_0x2ef20c,_0xe7c1e1,_0x48950a){return _0x47e369(_0x1f1eb3,_0x2ef20c- -0x5d6,_0xe7c1e1-0xa,_0x48950a-0x26);}function _0xa29984(_0x1aab4e,_0x55512d,_0x19dc91,_0x26fa15){return _0x47e369(_0x55512d,_0x26fa15- -0x668,_0x19dc91-0x26,_0x26fa15-0x103);}const _0x49e0b9={};_0x49e0b9[_0x16757f(0x67,-0x32,0x8,-0xb)]=_0x35f0d7[_0x16757f(0x62,-0xd,0x87,-0xf)];const _0x53ea27=_0x49e0b9;_0x35f0d7[_0x16757f(-0xc9,-0x5f,0x0,0x53)](_0x35f0d7[_0x16757f(-0x39,0x27,0x8a,-0x80)],_0x35f0d7[_0xa29984(-0x31,-0xdd,-0x7b,-0x6b)])?(_0x3ecd8b[_0xa29984(-0xf5,-0x113,-0x83,-0x6c)+_0xa29984(-0xb5,-0x1b3,-0x1c2,-0x157)](),_0x3d22f0[_0x16757f(0xb9,0x40,0x12,0xa9)](_0x218034,0x107b*0x1+0xd*-0x2c0+0x1346*0x1),_0x35f0d7[_0x16757f(-0x108,-0x109,-0xdf,-0x11e)](_0x2afc14)):_0x12729d[_0xa29984(-0x199,-0x1ba,-0x13e,-0x178)](_0x53ea27[_0xa29984(-0x98,-0xd6,-0x2c,-0xc4)],_0x409387);}),_0x574abd[_0x4025c8(0x452,0x413,0x509,0x4ef)+'d'](_0x56a0f8),_0x574abd['appendChil'+'d'](_0x4d9cc7);const _0x1ce98a=document[_0x47e369(0x65f,0x605,0x5c4,0x666)+_0x47e369(0x570,0x5bf,0x580,0x580)](_0x4025c8(0x332,0x3c5,0x3e9,0x382));_0x1ce98a['type']=_0x4025c8(0x41d,0x3b2,0x3c0,0x43d),_0x1ce98a[_0x47e369(0x56e,0x55d,0x526,0x59f)+'r']='å›¾'+_0x2e7cf2['UCiis'](_0x218034,-0x1a25*0x1+-0x18f8+-0x1*-0x331e),_0x1ce98a[_0x4025c8(0x3a0,0x2ea,0x405,0x321)]=_0x59523f[_0x4025c8(0x381,0x312,0x31e,0x2e0)]||'',_0x1ce98a['className']=_0x2e7cf2[_0x4025c8(0x3a3,0x426,0x439,0x41f)],_0x1ce98a['addEventLi'+'stener'](_0x2e7cf2[_0x4025c8(0x40e,0x441,0x419,0x492)],_0x23820f=>{function _0x489af9(_0xc5f143,_0x177eda,_0x5e3614,_0x449219){return _0x47e369(_0x449219,_0xc5f143- -0x664,_0x5e3614-0x8,_0x449219-0x88);}function _0x1c92e3(_0x413658,_0x2e0e82,_0x19769e,_0x335338){return _0x47e369(_0x19769e,_0x2e0e82- -0x9,_0x19769e-0x103,_0x335338-0xf2);}_0x3d22f0[_0x218034][_0x489af9(-0x15b,-0x124,-0x1d6,-0x107)]=_0x23820f[_0x1c92e3(0x4b7,0x54f,0x528,0x538)][_0x489af9(-0x13c,-0x1b3,-0x136,-0x110)];}),_0x167192[_0x47e369(0x65e,0x5da,0x609,0x5a1)+'d'](_0x574abd);function _0x47e369(_0x5399f4,_0x44e2e8,_0x3778c0,_0x5bd3c1){return _0x218c9f(_0x5399f4-0xdc,_0x44e2e8-0x146,_0x3778c0-0x140,_0x5399f4);}_0x167192[_0x4025c8(0x452,0x4b5,0x481,0x3ca)+'d'](_0x1ce98a),_0x47760b[_0x4025c8(0x452,0x417,0x3d1,0x48b)+'d'](_0x167192);});function _0x218c9f(_0x587dcb,_0x2b79b6,_0x253f6e,_0x5bff7e){return _0x3cf747(_0x587dcb-0x17b,_0x2b79b6-0x1e5,_0x2b79b6- -0x8e,_0x5bff7e);}function _0x42137c(_0x19e06d,_0x3879a8,_0x5404ed,_0x3f52fd){return _0x3cf747(_0x19e06d-0x10f,_0x3879a8-0x97,_0x3f52fd- -0xb3,_0x3879a8);}const _0x1013d4=document['createElem'+_0x42137c(0x44c,0x4e2,0x3aa,0x454)](_0x2e7cf2[_0x42137c(0x2b3,0x340,0x2c3,0x363)]);_0x1013d4['textConten'+'t']=_0x218c9f(0x4cc,0x47d,0x4d6,0x439)+_0x3d22f0[_0x42137c(0x411,0x503,0x4ee,0x47b)]+'\x20å¼ å›¾ç‰‡',_0x1013d4[_0x42137c(0x3f3,0x3f6,0x334,0x3bf)]=_0x42137c(0x385,0x3b9,0x2b7,0x357)+_0x218c9f(0x45a,0x3a2,0x302,0x3d1)+_0x42137c(0x426,0x3f5,0x40b,0x40a),_0x47760b[_0x218c9f(0x3e2,0x494,0x487,0x531)+'d'](_0x1013d4);}_0x3348e2[_0x46bf19(0x4a4,0x4cc,0x4ad,0x4de)+_0x46bf19(0x53d,0x480,0x4fb,0x4f9)](_0x1753ac[_0x3cf747(0x577,0x4f0,0x55b,0x601)],async _0x2a04a8=>{const _0x33f6c7={};_0x33f6c7[_0x456697(0x4f0,0x455,0x526,0x586)]=_0x1753ac[_0x456697(0x452,0x3ea,0x3a1,0x45a)],_0x33f6c7[_0x3eaccb(0x31c,0x3bd,0x3ae,0x430)]=_0x1753ac[_0x3eaccb(0x3fe,0x3cf,0x3c5,0x45a)];function _0x456697(_0x78a585,_0x184245,_0x2e57a6,_0x4c52d4){return _0x3cf747(_0x78a585-0x1ce,_0x184245-0x1c5,_0x78a585-0x3f,_0x2e57a6);}_0x33f6c7[_0x456697(0x52a,0x51e,0x5ba,0x51c)]=_0x456697(0x52c,0x58a,0x4f9,0x517);const _0x3d0657=_0x33f6c7;function _0x3eaccb(_0x55f59d,_0x47caf8,_0x4f4394,_0x1698bc){return _0x3cf747(_0x55f59d-0xa9,_0x47caf8-0x176,_0x47caf8- -0x108,_0x55f59d);}if(_0x1753ac[_0x456697(0x4ea,0x5a1,0x521,0x438)](_0x1753ac[_0x3eaccb(0x430,0x3a4,0x3c0,0x3b9)],_0x1753ac['KBmjV'])){const _0x3d38bc=_0x2a04a8[_0x456697(0x4df,0x457,0x52e,0x52e)]['files'];if(!_0x3d38bc||_0x3d38bc['length']===-0x123e+0x134a+-0x4*0x43)return;for(const _0x4b362f of _0x3d38bc){if(_0x1753ac[_0x456697(0x577,0x51a,0x57a,0x4e8)](_0x1753ac['bZecP'],_0x3eaccb(0x401,0x39e,0x31c,0x397))){if(!_0x4b362f[_0x3eaccb(0x48b,0x405,0x411,0x430)]['startsWith'](_0x456697(0x47d,0x4a7,0x3d1,0x432)))continue;try{const _0x4e1696=await _0x1753ac['Rqwbt'](_0x2d2bda,_0x4b362f),_0x2762d4={};_0x2762d4[_0x3eaccb(0x385,0x314,0x389,0x350)]=_0x4e1696,_0x2762d4[_0x456697(0x490,0x539,0x4e2,0x50b)]='',_0x3d22f0['push'](_0x2762d4);}catch(_0x4bb769){console[_0x456697(0x477,0x4ab,0x491,0x506)](_0x1753ac[_0x456697(0x567,0x613,0x4cf,0x5b5)],_0x4bb769);}}else{const _0x3986fd=_0x38dc79[_0x3eaccb(0x3c3,0x445,0x479,0x442)+_0x3eaccb(0x374,0x3ff,0x44f,0x3c3)]('div');_0x3986fd['textConten'+'t']=_0x3d0657[_0x3eaccb(0x44e,0x3a9,0x3db,0x45a)],_0x3986fd['className']=_0x3d0657[_0x3eaccb(0x360,0x3bd,0x3e3,0x379)],_0x2e3829[_0x456697(0x561,0x517,0x51f,0x4e3)+'d'](_0x3986fd);return;}}_0x1753ac[_0x3eaccb(0x329,0x3c8,0x36f,0x3e8)](_0x2afc14),_0x3348e2['value']='';}else{const _0x5c2786={};_0x5c2786[_0x456697(0x54c,0x598,0x5cc,0x581)]=_0x3d0657[_0x3eaccb(0x43e,0x3e3,0x429,0x3b1)],_0x5c2786['text']=_0x456697(0x4a2,0x557,0x501,0x4d9)+_0x1d8027['length']+'å¼ '+_0x8358b0+']',_0x45c0b2['push'](_0x5c2786);}});function _0x2d2bda(_0x53341f){function _0x1f2d92(_0x4ede48,_0x43f692,_0xb86e06,_0x15d400){return _0x46bf19(_0x4ede48-0x37,_0x43f692-0xf8,_0x15d400,_0x4ede48- -0x4f6);}function _0x440f5a(_0xce4b88,_0x2baace,_0x2b4a03,_0x54c2d5){return _0x3cf747(_0xce4b88-0x6c,_0x2baace-0x5a,_0x2b4a03- -0x135,_0xce4b88);}if(_0x1753ac['DAnSv'](_0x1753ac[_0x1f2d92(-0x73,-0xee,-0x9d,-0x76)],_0x1753ac[_0x1f2d92(-0x73,0x33,-0x9d,-0x72)]))return new Promise((_0x206e21,_0x103315)=>{const _0x508419=new FileReader();_0x508419[_0x596e9d(0x308,0x1c1,0x219,0x257)]=()=>_0x206e21(_0x508419[_0x4c3035(0x3db,0x3c2,0x47f,0x431)]),_0x508419[_0x4c3035(0x3f5,0x479,0x43c,0x47f)]=_0x103315;function _0x596e9d(_0x26329e,_0x259286,_0x19be36,_0x1e9144){return _0x1f2d92(_0x1e9144-0x30b,_0x259286-0xa8,_0x19be36-0x188,_0x26329e);}function _0x4c3035(_0x4fb491,_0x2dc0af,_0x5d0f14,_0x245b2d){return _0x1f2d92(_0x4fb491-0x39e,_0x2dc0af-0x148,_0x5d0f14-0xc0,_0x245b2d);}_0x508419['readAsData'+_0x596e9d(0x310,0x321,0x2ac,0x289)](_0x53341f);});else _0x87dae3+='æœªä½¿ç”¨çš„å˜é‡ï¼š'+_0x82aea[_0x1f2d92(-0x8c,-0x75,0x0,-0x82)]('ã€')+'\x0a\x0a';}_0x53ed0f[_0x46bf19(0x524,0x45e,0x51e,0x50f)+'d'](_0xf5bd10),_0x53ed0f[_0x46bf19(0x4a2,0x547,0x4cc,0x50f)+'d'](_0x3348e2),_0x53ed0f[_0x3cf747(0x4fb,0x4a8,0x522,0x5a3)+'d'](_0x47760b);const _0x47707f=document['createElem'+_0x46bf19(0x4cf,0x48e,0x537,0x4f4)](_0x1753ac[_0x3cf747(0x4a8,0x3ce,0x480,0x4b2)]);_0x47707f[_0x46bf19(0x458,0x494,0x4ba,0x45f)]=_0x1753ac['Biien'];const _0x5100c2=document[_0x46bf19(0x4d3,0x514,0x4e2,0x53a)+'ent'](_0x1753ac[_0x46bf19(0x3da,0x522,0x3e0,0x47a)]);_0x5100c2[_0x3cf747(0x573,0x547,0x50a,0x4d6)+'t']='å–æ¶ˆ',_0x5100c2[_0x46bf19(0x460,0x499,0x436,0x45f)]='st-chatu8-'+'popup-btn-'+_0x46bf19(0x4bd,0x460,0x49e,0x4ba);const _0x4b9715=document[_0x3cf747(0x4b3,0x5eb,0x54d,0x5ac)+_0x46bf19(0x43d,0x599,0x4ae,0x4f4)](_0x1753ac[_0x3cf747(0x40f,0x47d,0x48d,0x457)]);function _0x46bf19(_0x4a03e3,_0x2cd801,_0x2c88e7,_0xf923ca){return _0x399940(_0x2c88e7,_0x2cd801-0x6d,_0xf923ca-0x471,_0xf923ca-0x72);}_0x4b9715['textConten'+'t']=_0x1753ac[_0x3cf747(0x4f7,0x5be,0x568,0x5f1)],_0x4b9715[_0x46bf19(0x4f7,0x3ad,0x415,0x45f)]=_0x1753ac[_0x3cf747(0x40d,0x4cd,0x43f,0x44d)];const _0x3ee4ba=_0x3ff407=>{function _0x469819(_0x143c25,_0x4a401b,_0x4b102d,_0x2ea3be){return _0x46bf19(_0x143c25-0x1d1,_0x4a401b-0x3a,_0x2ea3be,_0x4a401b- -0x44e);}const _0x3ccbf6={'OkDqt':_0x2e7cf2['SqbsX'],'XtuCF':function(_0x59b957,_0x38fd3e){return _0x59b957!==_0x38fd3e;},'EpteV':_0x2e7cf2[_0x469819(-0x52,-0x27,0x81,0x6e)],'dMkBj':_0x2e7cf2['NFfwR'],'sPcWV':function(_0x30a9e6,_0x3ce847){return _0x2e7cf2['zLDBJ'](_0x30a9e6,_0x3ce847);}};function _0x52e1c1(_0xa4f851,_0x1d3cb9,_0x2425c3,_0x48e82f){return _0x46bf19(_0xa4f851-0x88,_0x1d3cb9-0x2,_0x2425c3,_0x48e82f-0x100);}_0x2e7cf2[_0x52e1c1(0x4ac,0x48e,0x4a2,0x52a)](_0x2e7cf2['PGlNj'],_0x52e1c1(0x625,0x5fd,0x633,0x63f))?_0x1d46df=_0x469819(-0x4c,0x1b,-0x16,0x89)+_0x469819(0x72,0x29,0xd2,0x3a)+'4,'+_0x521f09:(_0x211b50['classList'][_0x52e1c1(0x60c,0x63c,0x5d4,0x607)](_0x52e1c1(0x48e,0x45d,0x59c,0x4f2)),_0x2e7cf2[_0x52e1c1(0x61e,0x59a,0x60a,0x61e)](setTimeout,()=>{function _0x490c65(_0x870e47,_0x1889f6,_0xbe1448,_0x4ce027){return _0x469819(_0x870e47-0x98,_0x4ce027-0x55c,_0xbe1448-0xc8,_0x1889f6);}function _0x7a9b83(_0xfcf884,_0x3f9908,_0x3a249b,_0xb7c138){return _0x52e1c1(_0xfcf884-0x1b9,_0x3f9908-0x90,_0x3a249b,_0xfcf884- -0x520);}_0x3ccbf6[_0x490c65(0x5ca,0x536,0x54a,0x58e)](_0x3ccbf6[_0x490c65(0x5c9,0x656,0x64f,0x669)],_0x3ccbf6[_0x7a9b83(0x2d,0x35,0x3d,0x6f)])?(_0x211b50[_0x490c65(0x584,0x590,0x563,0x527)](),_0x3ccbf6['sPcWV'](_0x44eb11,_0x3ff407)):_0x4c1efa['error'](_0x3ccbf6[_0x7a9b83(0x91,0x6,0x144,0x1)],_0xb72890);},-0x1*0x1a21+-0x117*-0x7+-0x2ba*-0x7));};_0x5100c2[_0x3cf747(0x46b,0x569,0x4f1,0x472)+_0x3cf747(0x4a8,0x4a0,0x50c,0x520)](_0x46bf19(0x528,0x486,0x558,0x4ec),()=>_0x3ee4ba(null)),_0x4b9715[_0x46bf19(0x50b,0x46d,0x561,0x4de)+_0x46bf19(0x59e,0x4aa,0x51d,0x4f9)](_0x1753ac[_0x46bf19(0x5b1,0x479,0x4c0,0x518)],()=>_0x3ee4ba({'text':_0x564a16[_0x3cf747(0x451,0x3c6,0x470,0x405)][_0x46bf19(0x4ed,0x446,0x450,0x4e9)]()||'','images':[..._0x3d22f0]}));const _0x2fb556=_0x1d136f=>{function _0x31ab7b(_0x1a3c2d,_0x29030c,_0x51c010,_0x3204a1){return _0x46bf19(_0x1a3c2d-0x1d,_0x29030c-0x1af,_0x51c010,_0x3204a1- -0x294);}function _0x4982c7(_0x3168c7,_0x248d6b,_0x3eaed8,_0x11b5ce){return _0x3cf747(_0x3168c7-0x12f,_0x248d6b-0xe0,_0x3168c7- -0xfc,_0x11b5ce);}if(_0x2e7cf2['WpKIf'](_0x1d136f[_0x31ab7b(0x101,0xed,0xb5,0x161)],_0x2e7cf2[_0x31ab7b(0x1a9,0x2d8,0x1d0,0x225)])){if(_0x2e7cf2[_0x31ab7b(0x1c8,0x23f,0x232,0x22e)](_0x2e7cf2['BnNgn'],_0x2e7cf2[_0x31ab7b(0x224,0x24f,0x289,0x1e9)])){const _0x34c617=_0x19f7ed?function(){if(_0x3e0a83){const _0x4aa788=_0x2b9c92['apply'](_0x5e708d,arguments);return _0x52704a=null,_0x4aa788;}}:function(){};return _0x1a4fe4=![],_0x34c617;}else _0x2e7cf2[_0x31ab7b(0x18d,0x1d0,0x202,0x168)](_0x3ee4ba,null),document[_0x4982c7(0x431,0x3ea,0x472,0x457)+'tListener'](_0x4982c7(0x3e3,0x457,0x463,0x431),_0x2fb556);}else{if(_0x2e7cf2[_0x4982c7(0x341,0x3c9,0x2ff,0x3ad)](_0x1d136f['key'],_0x2e7cf2[_0x31ab7b(0xec,0x15b,0xdc,0x17d)])&&_0x1d136f[_0x4982c7(0x471,0x4e3,0x3e5,0x49a)]){if(_0x2e7cf2[_0x4982c7(0x3d9,0x427,0x35e,0x3ec)](_0x2e7cf2[_0x4982c7(0x32a,0x36e,0x37d,0x320)],_0x2e7cf2[_0x31ab7b(0x307,0x1ef,0x1db,0x250)]))_0x2e7cf2['Nzwbr'](_0x3ee4ba,{'text':_0x564a16[_0x31ab7b(0x269,0x20c,0x270,0x1c9)][_0x4982c7(0x400,0x3ec,0x422,0x35a)]()||'','images':[..._0x3d22f0]}),document['removeEven'+_0x31ab7b(0x2bb,0x1f8,0x25f,0x217)](_0x2e7cf2[_0x4982c7(0x350,0x35a,0x346,0x2bc)],_0x2fb556);else{for(let _0x16c08f=_0x2e7cf2[_0x4982c7(0x439,0x4d6,0x4b4,0x4aa)](_0x282edb['length'],0x24bb+0xadf+-0x2f99);_0x2e7cf2['dayGL'](_0x16c08f,0x29*0xc7+-0x4*0x2+0xb*-0x2e5);_0x16c08f--){if(_0x1b3407[_0x16c08f][_0x4982c7(0x360,0x2f5,0x2b1,0x328)]===_0x2e7cf2[_0x31ab7b(0x1ed,0x24f,0x1e2,0x19d)])return _0x16c08f;}return-(-0x7a*0x40+0x268e+0x80d*-0x1);}}}};document[_0x46bf19(0x44b,0x48d,0x49e,0x4de)+_0x46bf19(0x45e,0x4cd,0x44f,0x4f9)](_0x1753ac[_0x3cf747(0x50c,0x45b,0x4d9,0x510)],_0x2fb556),_0x47707f['appendChil'+'d'](_0x5100c2),_0x47707f[_0x46bf19(0x547,0x577,0x4af,0x50f)+'d'](_0x4b9715),_0x22ef7c['appendChil'+'d'](_0x308e26),_0x22ef7c[_0x46bf19(0x4b6,0x517,0x53c,0x50f)+'d'](_0x2aee2d),_0x22ef7c['appendChil'+'d'](_0x564a16),_0x22ef7c[_0x46bf19(0x4af,0x50e,0x52f,0x50f)+'d'](_0x53ed0f),_0x22ef7c[_0x3cf747(0x5bb,0x4de,0x522,0x46c)+'d'](_0x47707f),_0x211b50[_0x3cf747(0x55a,0x52b,0x522,0x51a)+'d'](_0x22ef7c),document[_0x46bf19(0x435,0x49b,0x44c,0x4eb)][_0x3cf747(0x4df,0x4a3,0x522,0x589)+'d'](_0x211b50),_0x1753ac[_0x46bf19(0x4c7,0x4a6,0x3f7,0x466)](setTimeout,()=>_0x564a16['focus'](),0x130e*0x1+0x1ec7+0x3*-0x107b);});}export async function handlePromptRequest(_0x463814,_0x1a5700){const _0x2e185d={'pMnIC':_0x9c7387(0x64b,0x6ed,0x6e8,0x676),'ZLyka':function(_0x41d399,_0x487b72){return _0x41d399===_0x487b72;},'vPJHt':_0xd0f166(0x2bc,0x258,0x2dd,0x2f1),'mtAhU':function(_0x2aa937,_0x41bce5){return _0x2aa937===_0x41bce5;},'OdIXy':_0xd0f166(0x256,0x30f,0x2e8,0x23d),'CEWnD':function(_0x26f3fe,_0x28f1ca){return _0x26f3fe+_0x28f1ca;},'QRknq':_0x9c7387(0x5fb,0x599,0x692,0x655),'HgIDC':_0x9c7387(0x5e8,0x598,0x598,0x543),'JEjBP':_0xd0f166(0x393,0x36c,0x35e,0x2d9),'fwvTi':function(_0x10d5bb,_0x504f47){return _0x10d5bb<_0x504f47;},'ujtLy':function(_0x3f9f20,_0x4d89b7){return _0x3f9f20===_0x4d89b7;},'tBBAK':function(_0x497aea,_0x28ada0){return _0x497aea>_0x28ada0;},'VJCcO':function(_0xd9e90a){return _0xd9e90a();},'WSLTP':'NKsDs','cNNET':'oPWXk','vFIPy':function(_0x5b06a7,_0x3bc645){return _0x5b06a7>=_0x3bc645;},'Zbfrp':_0x9c7387(0x517,0x576,0x594,0x46b),'qWJPJ':function(_0x3a1bda,_0x3be871){return _0x3a1bda===_0x3be871;},'uaLSx':_0x9c7387(0x54a,0x5ea,0x541,0x56a),'RlCkp':function(_0x119fc4,_0x5c7133){return _0x119fc4===_0x5c7133;},'ujCDV':function(_0x3262df,_0x4d1722){return _0x3262df!==_0x4d1722;},'ahgzV':_0x9c7387(0x5af,0x616,0x5c4,0x529),'BKzGV':_0x9c7387(0x627,0x5fb,0x622,0x612)+_0xd0f166(0x1fb,0x241,0x275,0x200)+_0xd0f166(0x232,0x295,0x24c,0x2b7),'YkpKH':function(_0x3180a0,_0x3b5651){return _0x3180a0!==_0x3b5651;},'iuXmz':function(_0x51be41,_0x428d2b){return _0x51be41(_0x428d2b);},'VsgXo':_0xd0f166(0x2e5,0x3e6,0x384,0x3af),'bqufL':_0xd0f166(0x1df,0x29e,0x27e,0x1ca),'IqxOR':_0x9c7387(0x5eb,0x60e,0x55b,0x65c),'BQRmJ':_0xd0f166(0x356,0x334,0x338,0x321),'aNjYQ':function(_0x1f0b9a,_0x20c258,_0x175ff6){return _0x1f0b9a(_0x20c258,_0x175ff6);},'wdsrB':'./iframe/i'+'ndex.js','cpxmB':_0xd0f166(0x396,0x31d,0x33a,0x2dd),'wqHOC':_0xd0f166(0x1f5,0x264,0x2ab,0x32b),'maYsV':_0xd0f166(0x1e0,0x255,0x276,0x2ac)+_0x9c7387(0x60b,0x5ab,0x62b,0x5a8),'PpBae':function(_0x1c600c,_0x43d808){return _0x1c600c+_0x43d808;},'mnRFl':function(_0x195047,_0x1f817d){return _0x195047-_0x1f817d;},'hDnnm':function(_0x5dc2ed,_0x23fafa){return _0x5dc2ed>_0x23fafa;},'jHBsi':_0xd0f166(0x2cc,0x280,0x2c0,0x293),'jHQyA':function(_0x4d9308,_0xe8f0c){return _0x4d9308===_0xe8f0c;},'EWMso':_0xd0f166(0x2f4,0x310,0x2b0,0x254),'fhwjY':_0x9c7387(0x5cf,0x586,0x565,0x651),'pKQfs':function(_0x5d8071,_0x17a85e){return _0x5d8071>_0x17a85e;},'jlpVF':function(_0x4facaa,_0x5db402){return _0x4facaa===_0x5db402;},'fWVZK':_0x9c7387(0x5d1,0x635,0x587,0x59a),'tRSPK':function(_0x4e4e54,_0x1998d6,_0x497d06){return _0x4e4e54(_0x1998d6,_0x497d06);},'bZQrI':_0x9c7387(0x629,0x6c2,0x662,0x59f),'NmBcG':'{{ä¸Šä¸‹æ–‡}}','hPQcS':_0xd0f166(0x221,0x30f,0x2b4,0x334)+_0xd0f166(0x33c,0x326,0x36c,0x2ba),'DQOno':_0x9c7387(0x64e,0x6f3,0x5bc,0x616),'wTvdK':_0xd0f166(0x346,0x32f,0x36f,0x3c6),'auSvr':_0x9c7387(0x607,0x640,0x5ca,0x61d)+'}}','DBghy':_0x9c7387(0x62f,0x5e0,0x6d0,0x580)+'}}','CKGGx':_0x9c7387(0x624,0x66a,0x6a2,0x575),'NIKFk':_0xd0f166(0x323,0x23a,0x2c1,0x2a4),'SywNv':function(_0x5d6a69,_0x5dacf7,_0x6036b0,_0x25fd30,_0x199b0e){return _0x5d6a69(_0x5dacf7,_0x6036b0,_0x25fd30,_0x199b0e);},'NNvru':_0x9c7387(0x5fd,0x56c,0x62b,0x5ef),'JWIuv':_0x9c7387(0x627,0x5c8,0x593,0x6bd)+']\x20æ”¶é›†è§’è‰²/æœè£…å›¾'+_0xd0f166(0x32a,0x386,0x37d,0x384),'hDNhb':'NcQBw','CeWWz':_0xd0f166(0x202,0x2ca,0x29f,0x2ad)+'è¢«ä½¿ç”¨ã€‚\x0a','yBPBf':_0xd0f166(0x2bb,0x392,0x353,0x2bb)+_0xd0f166(0x325,0x2b3,0x31b,0x3ac)+_0x9c7387(0x650,0x6d6,0x698,0x5fa)+_0x9c7387(0x606,0x581,0x68d,0x5ff),'BULly':function(_0x51293e,_0x4da112){return _0x51293e(_0x4da112);},'TCFsY':function(_0x2c9ce7,_0xe65dc9){return _0x2c9ce7>_0xe65dc9;},'IKepz':_0xd0f166(0x266,0x235,0x2b7,0x215),'hJwIR':function(_0x4ee1ef,_0x3febba,_0x5be4aa){return _0x4ee1ef(_0x3febba,_0x5be4aa);}},_0x14651c=extension_settings[extensionName]?.[_0x9c7387(0x5e2,0x5c6,0x59a,0x55a)+_0xd0f166(0x29c,0x1fe,0x23c,0x284)+'d']??![];let _0x52e3e9='',_0x54077c=[];if(_0x14651c){const _0xa55226=await showUserDemandPopup();if(_0x2e185d['ZLyka'](_0xa55226,null)){toastr[_0xd0f166(0x269,0x2e8,0x285,0x2c5)](_0x2e185d[_0x9c7387(0x543,0x4ec,0x562,0x4ba)]);return;}_0x52e3e9=_0xa55226[_0xd0f166(0x3ce,0x325,0x322,0x356)]||extension_settings[extensionName]?.[_0xd0f166(0x26d,0x1ce,0x24d,0x19f)+'geDemand']||'',_0x54077c=_0xa55226[_0xd0f166(0x2b3,0x282,0x2c7,0x21b)]||[];}else _0x2e185d['wqHOC']!==_0x2e185d[_0x9c7387(0x5a9,0x515,0x5dc,0x5de)]?(_0x508eaa[_0xd0f166(0x293,0x399,0x303,0x2bb)][_0x9c7387(0x628,0x582,0x5ba,0x636)](_0x2e185d[_0x9c7387(0x576,0x612,0x608,0x527)]),_0x56bdb9[_0xd0f166(0x2e5,0x3b6,0x376,0x2ef)][_0x9c7387(0x585,0x4e8,0x52c,0x5a2)]=_0x4b4d0d+'px',_0x2c5e3f[_0xd0f166(0x401,0x3ab,0x376,0x3e9)][_0xd0f166(0x2c4,0x1ef,0x28c,0x231)]=_0x54ba86):_0x52e3e9=extension_settings[extensionName]?.[_0xd0f166(0x1a7,0x2d5,0x24d,0x206)+_0xd0f166(0x3fd,0x399,0x383,0x3d0)]||'';toastr[_0x9c7387(0x55e,0x501,0x613,0x4f9)](_0x2e185d['maYsV']);let _0x53556b=_0x2e185d[_0xd0f166(0x1c3,0x319,0x268,0x299)](getContext);const _0xfd47a2=_0x2e185d[_0x9c7387(0x51e,0x4a7,0x57a,0x594)](extension_settings[extensionName]?.['llm_histor'+_0x9c7387(0x620,0x621,0x64a,0x5fb)]??-0x47*0x37+0x1*-0x102d+0x1f70,-0x566*-0x4+0x1802+-0x2d99),_0x35ff1b=await getElContext(_0x463814,_0xfd47a2),_0x32e358=_0x35ff1b[_0x2e185d[_0xd0f166(0x362,0x370,0x2f7,0x37e)](_0x35ff1b[_0x9c7387(0x63c,0x691,0x5e1,0x603)],0x58e+0x1839+-0x1dc6)];let _0xf9e26='';if(_0x35ff1b){const _0x201e77=_0x52e3e9?[..._0x35ff1b,_0x52e3e9]:_0x35ff1b;_0xf9e26=await _0x2e185d[_0x9c7387(0x5b2,0x63c,0x574,0x5d9)](processWorldBooksWithTrigger,_0x201e77);if(_0xf9e26){}}let _0x21d653=_0x53556b[_0x9c7387(0x5fe,0x5f2,0x649,0x636)+'ta'][_0xd0f166(0x42d,0x351,0x389,0x397)]||{};const _0x2ff61b=_0x35ff1b&&_0x2e185d[_0xd0f166(0x1d3,0x25b,0x269,0x2a1)](_0x35ff1b['length'],0x1587+0x190+-0x1716)?_0x35ff1b[_0x9c7387(0x67e,0x5f4,0x657,0x617)](-0x7f*-0x44+0x13*0x1e0+-0x455c,-(-0x285*-0x1+0x1a3+-0x427)):[],_0x1a7c6e=[];_0x52e3e9&&('cdGor'!==_0x2e185d['jHBsi']?_0x1a7c6e[_0xd0f166(0x221,0x318,0x28b,0x28f)](_0x52e3e9):_0x52c704=_0xd5a5cb(_0x551afd,_0x2c5739,_0x1c4e8f,_0xd0f166(0x333,0x2be,0x2c1,0x25f)));if(_0x32e358){if(_0x2e185d[_0x9c7387(0x512,0x4d0,0x526,0x493)](_0x2e185d[_0xd0f166(0x3c2,0x2f9,0x33d,0x2fd)],_0x2e185d[_0xd0f166(0x304,0x362,0x2dc,0x306)]))return new _0x44400b((_0x4860ab,_0x3d3633)=>{const _0x46c5a0=new _0x56ed95();function _0x2b94bb(_0x1878ce,_0x4dbf65,_0x5d6489,_0x4e4c00){return _0x9c7387(_0x5d6489- -0x24,_0x4dbf65-0x90,_0x4e4c00,_0x4e4c00-0x61);}_0x46c5a0[_0x3c2483(0x9b,0x71,0xc0,0x163)]=()=>_0x4860ab(_0x46c5a0[_0x2b94bb(0x641,0x6ac,0x630,0x67b)]);function _0x3c2483(_0x43a762,_0x1230d0,_0x4f0ad4,_0x259b97){return _0xd0f166(_0x43a762-0x1c2,_0x1230d0-0x1bc,_0x4f0ad4- -0x1ca,_0x43a762);}_0x46c5a0['onerror']=_0x3d3633,_0x46c5a0['readAsData'+_0x3c2483(0x91,0x186,0xf2,0x13f)](_0x506540);});else _0x1a7c6e[_0x9c7387(0x564,0x610,0x4bd,0x5aa)](_0x32e358);}const _0x37c12d=_0x1a7c6e[_0x9c7387(0x58b,0x556,0x507,0x515)]('\x0a'),_0x1c2ef3=[];_0x52e3e9&&(_0x2e185d[_0x9c7387(0x559,0x59e,0x4f6,0x569)](_0x9c7387(0x60f,0x656,0x62b,0x66c),_0x9c7387(0x561,0x5e6,0x604,0x5c5))?_0x298631[_0x9c7387(0x564,0x51e,0x5e3,0x55f)](_0x209452):_0x1c2ef3[_0x9c7387(0x564,0x522,0x612,0x591)](_0x52e3e9));_0x35ff1b&&_0x2e185d['pKQfs'](_0x35ff1b[_0x9c7387(0x63c,0x65a,0x634,0x592)],0x227d+0x8*0x406+-0x42ad)&&_0x1c2ef3['push'](_0x35ff1b[_0x9c7387(0x58b,0x51f,0x55d,0x572)]('\x0a'));_0xf9e26&&(_0x2e185d[_0xd0f166(0x2e4,0x2f9,0x26b,0x1c2)](_0x2e185d['fWVZK'],_0x2e185d[_0xd0f166(0x2ba,0x2ad,0x2f5,0x2fc)])?_0x1c2ef3[_0xd0f166(0x2de,0x1f8,0x28b,0x23b)](_0xf9e26):_0x594346[_0xd0f166(0x2ff,0x341,0x28b,0x2b1)](_0x58fb2d));const _0x54b513=_0x1c2ef3[_0xd0f166(0x307,0x2af,0x2b2,0x255)]('\x0a');let _0xc32ce1=_0x2e185d[_0xd0f166(0x28a,0x23b,0x2a1,0x221)](buildPromptForRequestType,_0x2e185d['bZQrI'],_0x37c12d);const _0x7ae8d3=_0x2e185d[_0xd0f166(0x25a,0x266,0x2d9,0x383)](generateCharacterListText,_0x54b513),_0x517d5a=_0x2e185d[_0xd0f166(0x1dc,0x2af,0x268,0x22b)](generateOutfitEnableListText),_0x58a9a7=_0x2e185d['VJCcO'](generateCommonCharacterListText),_0x22abed=[_0x2e185d['NmBcG'],_0x9c7387(0x5aa,0x5ce,0x552,0x569),_0x2e185d[_0xd0f166(0x2ea,0x312,0x3a1,0x2fe)],_0x2e185d[_0x9c7387(0x622,0x604,0x615,0x688)],_0x2e185d[_0xd0f166(0x328,0x2d2,0x33b,0x317)],_0x2e185d[_0x9c7387(0x5f2,0x66c,0x576,0x61e)],_0x2e185d[_0x9c7387(0x537,0x559,0x50f,0x499)],_0x2e185d['CKGGx']];_0xc32ce1=_0x2e185d[_0x9c7387(0x5b2,0x58a,0x50b,0x629)](mergeAdjacentMessages,_0xc32ce1);const _0x22a096={'context':_0x2ff61b[_0xd0f166(0x300,0x23a,0x2b2,0x20b)]('\x0a'),'body':_0x32e358,'worldBookContent':_0xf9e26,'variables':_0x21d653,'userDemand':_0x52e3e9,'characterListText':_0x7ae8d3,'outfitEnableListText':_0x517d5a,'commonCharacterListText':_0x58a9a7},{messages:_0x5e3286,replacedVariables:_0x1b7bcf}=replaceAllPlaceholders(_0xc32ce1,_0x22a096);function _0x9c7387(_0x398cee,_0x14f98e,_0xa862cf,_0x5c2afe){return _0x55bf(_0x398cee-0x31f,_0xa862cf);}_0xc32ce1=_0x5e3286;function _0x1b35d1(_0x45ebc7,_0x41a1ee,_0x510c16,_0x41f3b5=_0xd0f166(0x377,0x242,0x2c1,0x2f7)){if(!_0x510c16||_0x510c16[_0x1f973a(0x23f,0x1b1,0x1bc,0x1a6)]===-0x17e1+-0x4*-0x7d5+0x1*-0x773||_0x2e185d['fwvTi'](_0x41a1ee,-0x100d+0x4*0x745+0x1d*-0x73)||_0x41a1ee>=_0x45ebc7[_0x1f973a(0x16e,0x1b1,0x199,0x1c4)])return _0x45ebc7;const _0x4c0f42=[..._0x45ebc7],_0x18b68f=_0x4c0f42[_0x41a1ee],_0x37a6a7=[];if(_0x2e185d[_0x1f973a(0x21a,0x17e,0x189,0x188)](typeof _0x18b68f[_0x9a120c(0xcf,0x4f,0xf8,0x89)],_0x2e185d[_0x9a120c(0x273,0x268,0x1bb,0x268)])){const _0x116b47={};_0x116b47[_0x9a120c(0x260,0x120,0x1b8,0x166)]=_0x2e185d[_0x9a120c(0x13f,0x1da,0x1d2,0x135)],_0x116b47[_0x1f973a(0x115,0x170,0x194,0x169)]=_0x18b68f['content'],_0x37a6a7['push'](_0x116b47);}else Array[_0x9a120c(0x149,0x29,0xcb,0x8c)](_0x18b68f[_0x9a120c(0x94,0x18f,0xf8,0x16a)])&&_0x37a6a7[_0x9a120c(0xe6,0xb6,0x101,0x5b)](..._0x18b68f[_0x9a120c(0x153,0x91,0xf8,0xfc)]);if(_0x2e185d[_0x9a120c(0x92,0x1cd,0x142,0x1d3)](_0x510c16[_0x9a120c(0x16e,0x170,0x1d9,0x1d4)],0x34c+0xfd2*-0x2+-0x38b*-0x8)){const _0x2fbe68={};_0x2fbe68[_0x9a120c(0x135,0x11b,0x1b8,0x16c)]=_0x2e185d['QRknq'],_0x2fbe68['text']=_0x9a120c(0x196,0xc0,0x10e,0x100)+_0x510c16['length']+'å¼ '+_0x41f3b5+']',_0x37a6a7[_0x9a120c(0xe1,0x14f,0x101,0xd7)](_0x2fbe68);}_0x510c16[_0x9a120c(0x1d1,0xc8,0x119,0x1ce)]((_0x28d554,_0x377539)=>{const _0x17feeb=_0x2e185d['ZLyka'](typeof _0x28d554,_0x2e185d[_0x24d28b(0x60b,0x637,0x64f,0x5c1)])?_0x28d554:_0x28d554['base64'],_0x25ee4c=_0x2e185d[_0x26339b(0x573,0x582,0x569,0x5d1)](typeof _0x28d554,_0x2e185d['OdIXy'])&&_0x28d554[_0x24d28b(0x52d,0x55e,0x590,0x55f)]?_0x28d554[_0x26339b(0x508,0x4d3,0x45d,0x4c5)]:''+_0x41f3b5+_0x2e185d[_0x24d28b(0x63b,0x6f3,0x662,0x69a)](_0x377539,-0x86a*-0x3+0xa9f+-0x23dc);function _0x24d28b(_0x217fce,_0x40f5a0,_0x5cb120,_0x19acba){return _0x1f973a(_0x217fce-0x96,_0x5cb120-0x4bc,_0x19acba,_0x19acba-0x11f);}const _0x3241df={};_0x3241df[_0x26339b(0x5c4,0x671,0x65e,0x526)]=_0x2e185d[_0x24d28b(0x65c,0x5d6,0x666,0x6ea)],_0x3241df[_0x26339b(0x5a4,0x556,0x5d3,0x554)]='['+_0x25ee4c+']',_0x37a6a7[_0x24d28b(0x62e,0x4df,0x595,0x619)](_0x3241df);let _0x309d1b=_0x17feeb;!_0x17feeb['startsWith'](_0x26339b(0x571,0x61c,0x571,0x522))&&(_0x309d1b=_0x24d28b(0x5bc,0x57c,0x5bb,0x553)+_0x26339b(0x541,0x544,0x579,0x4b1)+'4,'+_0x17feeb);function _0x26339b(_0x6c63f8,_0x37c2b2,_0x4b5b1a,_0x50c1c9){return _0x1f973a(_0x6c63f8-0x129,_0x6c63f8-0x434,_0x50c1c9,_0x50c1c9-0xb9);}const _0x243705={};_0x243705[_0x24d28b(0x69b,0x616,0x64c,0x638)]=_0x2e185d[_0x24d28b(0x53d,0x5da,0x5e2,0x693)],_0x243705[_0x26339b(0x591,0x4f6,0x528,0x55b)]={},_0x243705[_0x26339b(0x591,0x4f6,0x528,0x55b)][_0x24d28b(0x625,0x6b0,0x62d,0x596)]=_0x309d1b,_0x243705[_0x26339b(0x591,0x4f6,0x528,0x55b)]['detail']=_0x2e185d['JEjBP'],_0x37a6a7['push'](_0x243705);});const _0x6e7529={..._0x18b68f};function _0x9a120c(_0x3bcad5,_0x2d1f28,_0x5711ea,_0xc0ebcb){return _0x9c7387(_0x5711ea- -0x463,_0x2d1f28-0xe8,_0x2d1f28,_0xc0ebcb-0x77);}_0x6e7529[_0x9a120c(0xc3,0x123,0xf8,0x8b)]=_0x37a6a7,_0x4c0f42[_0x41a1ee]=_0x6e7529;function _0x1f973a(_0x2b0647,_0x104b12,_0x34a2b7,_0x595ffe){return _0xd0f166(_0x2b0647-0x2f,_0x104b12-0xca,_0x104b12- -0x1b2,_0x34a2b7);}return _0x4c0f42;}function _0x4de300(_0x5c3000){function _0x222217(_0x10ecc0,_0x4acdcd,_0x2a9469,_0x202511){return _0x9c7387(_0x2a9469- -0x53,_0x4acdcd-0x26,_0x10ecc0,_0x202511-0xa5);}function _0x5934fb(_0x2ad211,_0x2e9511,_0x76e96f,_0x5d1558){return _0x9c7387(_0x5d1558- -0x4a,_0x2e9511-0x109,_0x2e9511,_0x5d1558-0x5);}if(_0x2e185d[_0x5934fb(0x57e,0x67a,0x668,0x629)](_0x2e185d[_0x5934fb(0x615,0x526,0x5c4,0x5ba)],_0x2e185d[_0x5934fb(0x51a,0x59c,0x4ed,0x579)]))_0x578123=_0x222217(0x654,0x6a3,0x604,0x5b2)+'è¢«ä½¿ç”¨ï¼š'+[..._0x10adec][_0x222217(0x5b3,0x5b0,0x538,0x5c5)]('ã€')+'\x0a';else{for(let _0x5cb4b1=_0x5c3000[_0x5934fb(0x6a2,0x594,0x629,0x5f2)]-(-0x9ee+0x1*0x25e5+-0x1bf6);_0x2e185d[_0x5934fb(0x62c,0x648,0x5c5,0x5e9)](_0x5cb4b1,0x12d5+-0x1*-0x4ee+-0x17c3);_0x5cb4b1--){if(_0x2e185d[_0x222217(0x55f,0x5be,0x577,0x5f4)](_0x5c3000[_0x5cb4b1]['role'],_0x2e185d['Zbfrp'])){if(_0x2e185d['qWJPJ'](_0x5934fb(0x4b7,0x54d,0x4c7,0x500),_0x2e185d['uaLSx']))return _0x5cb4b1;else _0x3873b4['stopPropag'+_0x222217(0x55b,0x543,0x514,0x556)](),_0xd9eeff[_0x222217(0x5b8,0x5e5,0x619,0x596)](_0x5a28b8,0x138e+0x17*-0x185+0x1*0xf66),_0x2e185d[_0x5934fb(0x59c,0x50f,0x552,0x4f7)](_0x900006);}}return-(0x3d*-0x3f+0xf09+-0x5);}}const _0x56b1cf=_0x2e185d['iuXmz'](_0x4de300,_0xc32ce1);_0x54077c['length']>-0x375+-0x1118+0x1*0x148d&&_0x56b1cf>=-0x39*0x3e+-0x128*0x8+0x1c6*0xd&&(_0xc32ce1=_0x1b35d1(_0xc32ce1,_0x56b1cf,_0x54077c,_0x2e185d[_0xd0f166(0x3cd,0x334,0x35f,0x30e)]));try{const _0x3648e2=await _0x2e185d[_0x9c7387(0x5b2,0x5e8,0x5b6,0x5ed)](getEnabledCharacterImages,_0x54b513),_0x299e21=await _0x2e185d[_0xd0f166(0x25c,0x266,0x268,0x2f7)](getEnabledOutfitImages),_0x14b16b=await getCommonCharacterImages(),_0x1deaf4=[..._0x3648e2,..._0x299e21,..._0x14b16b];_0x1deaf4[_0xd0f166(0x3a1,0x3bb,0x363,0x338)]>0xcc6+0x4*0x84a+0x1*-0x2dee&&_0x56b1cf>=-0x2234+-0x19fb+-0xd9*-0x47&&(_0xc32ce1=_0x2e185d[_0x9c7387(0x67d,0x67a,0x62b,0x6e1)](_0x1b35d1,_0xc32ce1,_0x56b1cf,_0x1deaf4,_0x2e185d['NNvru']));}catch(_0x1c8ecc){console[_0x9c7387(0x546,0x513,0x5d8,0x569)](_0x2e185d[_0x9c7387(0x5d9,0x58b,0x54a,0x536)],_0x1c8ecc);}let _0x202a88='';if(_0x1b7bcf[_0x9c7387(0x573,0x5d9,0x603,0x5c1)]>-0xf84+-0x4d*0x79+-0x89*-0x61){if(_0x2e185d[_0xd0f166(0x3fc,0x3b2,0x344,0x318)]!==_0x2e185d[_0xd0f166(0x29b,0x2fd,0x344,0x3c6)]){const _0x1526bc=typeof _0x4361f0===_0x2e185d['vPJHt']?_0x2559a8:_0xf749d6['base64'],_0x2ccb35=_0x2e185d[_0xd0f166(0x25b,0x303,0x280,0x2c9)](typeof _0x1d63a0,_0x9c7387(0x5c1,0x632,0x553,0x561))&&_0x474e24[_0xd0f166(0x281,0x2ce,0x286,0x263)]?_0x3c01cf[_0xd0f166(0x24b,0x1ec,0x286,0x2f6)]:''+_0x49e366+_0x2e185d[_0x9c7387(0x631,0x630,0x610,0x6d2)](_0x88b653,0x206b+0x19b2+-0x3a1c),_0xfb3df0={};_0xfb3df0[_0x9c7387(0x61b,0x628,0x5f7,0x6af)]=_0x2e185d['QRknq'],_0xfb3df0['text']='['+_0x2ccb35+']',_0x748bb1[_0xd0f166(0x29c,0x228,0x28b,0x2f3)](_0xfb3df0);let _0x3df093=_0x1526bc;!_0x1526bc[_0x9c7387(0x623,0x655,0x64d,0x5c1)](_0x9c7387(0x5c8,0x65d,0x632,0x65a))&&(_0x3df093='data:image'+_0xd0f166(0x336,0x26b,0x2bf,0x303)+'4,'+_0x1526bc);const _0x20fb45={};_0x20fb45[_0x9c7387(0x5fc,0x662,0x5d7,0x568)]=_0x3df093,_0x20fb45[_0x9c7387(0x592,0x595,0x63c,0x595)]='auto';const _0x4f38b6={};_0x4f38b6[_0x9c7387(0x61b,0x58a,0x6d2,0x607)]=_0x2e185d[_0xd0f166(0x2a2,0x32e,0x2d8,0x321)],_0x4f38b6[_0x9c7387(0x5e8,0x579,0x680,0x667)]=_0x20fb45,_0x322b98[_0x9c7387(0x564,0x5c6,0x5d3,0x4ad)](_0x4f38b6);}else _0x202a88='è¯Šæ–­ï¼šæ£€æµ‹åˆ°ä»¥ä¸‹å˜é‡'+_0xd0f166(0x257,0x2a0,0x2eb,0x2c5)+[..._0x1b7bcf][_0xd0f166(0x21f,0x25c,0x2b2,0x21b)]('ã€')+'\x0a';}else _0x202a88=_0x2e185d[_0xd0f166(0x28c,0x208,0x24e,0x1b2)];const _0x174a9a=_0x22abed[_0xd0f166(0x35f,0x306,0x2ad,0x2af)](_0x3616aa=>!_0x1b7bcf[_0xd0f166(0x369,0x2ad,0x2bd,0x310)](_0x3616aa)&&!_0x3616aa[_0xd0f166(0x2b1,0x38e,0x367,0x2fe)]('::'));_0x2e185d[_0x9c7387(0x5a5,0x5e0,0x62d,0x5b6)](_0x174a9a[_0xd0f166(0x396,0x3ec,0x363,0x2c5)],-0xccd*0x3+-0x1bb1+0x4218)?_0x202a88+=_0xd0f166(0x410,0x413,0x37c,0x33c)+_0x174a9a[_0x9c7387(0x58b,0x603,0x627,0x538)]('ã€')+'\x0a\x0a':_0x202a88+='æ‰€æœ‰åŸºç¡€å˜é‡éƒ½å·²ä½¿ç”¨'+_0xd0f166(0x2d9,0x1f7,0x257,0x30a);_0x2e185d[_0xd0f166(0x2ed,0x2b5,0x2af,0x2d4)](updateCombinedPrompt,_0xc32ce1,_0x202a88);const _0x475280=extension_settings[extensionName]?.[_0xd0f166(0x417,0x39b,0x39c,0x368)+'ode']??![];if(_0x475280){toastr[_0x9c7387(0x55e,0x60f,0x58a,0x4df)](_0x2e185d[_0x9c7387(0x591,0x5aa,0x646,0x5ad)]);return;}const _0x466f4a={};_0x466f4a[_0x9c7387(0x621,0x5d3,0x649,0x67c)]=0x493e0;const _0x4c1712=await LLM_IMAGE_GEN(_0xc32ce1,_0x466f4a);if(_0x4c1712['testMode'])return;const _0x247341=_0x4c1712[_0x9c7387(0x654,0x6e7,0x614,0x6c3)];function _0xd0f166(_0x479ca7,_0x5b34e3,_0x43d460,_0x3f3308){return _0x55bf(_0x43d460-0x46,_0x3f3308);}const _0x5e444c=_0x2e185d[_0xd0f166(0x30e,0x330,0x29e,0x222)](removeThinkingTags,_0x247341),_0x1f2623=parseImagesFromPrompt(_0x5e444c);if(_0x2e185d['TCFsY'](_0x1f2623['length'],0x1299*0x1+-0x9*0x17b+-0x546)&&_0x463814){if(_0x2e185d['IKepz']!==_0x2e185d[_0xd0f166(0x30a,0x3b9,0x369,0x3f1)])return;else{await _0x2e185d[_0xd0f166(0x31b,0x38a,0x388,0x3d8)](insertImagesIntoElement,_0x463814,_0x1f2623);const _0x475116=_0x2e185d[_0x9c7387(0x559,0x520,0x611,0x4f1)](extension_settings[extensionName]?.['zidongdian'+'ji'],_0x2e185d[_0x9c7387(0x5d5,0x53b,0x5bf,0x60f)]);_0x475116&&(window[_0x9c7387(0x535,0x4b8,0x4a6,0x4fe)+'ji']=!![],_0x2e185d[_0x9c7387(0x57a,0x606,0x62e,0x581)](setTimeout,()=>{function _0x433686(_0x5d48cb,_0x42f7bd,_0x4d85e7,_0x22e5d1){return _0xd0f166(_0x5d48cb-0x1b3,_0x42f7bd-0x15,_0x4d85e7-0x13,_0x42f7bd);}function _0x952d11(_0x304dd2,_0x564ad9,_0x135718,_0x1270da){return _0x9c7387(_0x564ad9- -0x2f1,_0x564ad9-0xff,_0x1270da,_0x1270da-0x7f);}const _0xb54d33={'twvSv':function(_0x288ac9,_0x2543f7){return _0x2e185d['YkpKH'](_0x288ac9,_0x2543f7);},'kAvEs':function(_0x4f8d08,_0x780a6e){function _0x306b40(_0x3a8de5,_0x54b121,_0x567cd6,_0x3e08aa){return _0x55bf(_0x54b121- -0x19,_0x567cd6);}return _0x2e185d[_0x306b40(0x282,0x27a,0x22c,0x215)](_0x4f8d08,_0x780a6e);},'kXyRg':_0x2e185d[_0x433686(0x356,0x3fe,0x348,0x339)],'TcBEs':_0x2e185d[_0x433686(0x296,0x3c4,0x30f,0x2e7)],'DaBAM':_0x2e185d['IqxOR'],'lCnHH':_0x2e185d[_0x952d11(0x2ad,0x2e3,0x31f,0x2f3)],'PSbog':function(_0x36711c,_0x3b00fe,_0x44521a){function _0x5c833f(_0x12e63b,_0x384e7c,_0xb798db,_0x1703fe){return _0x433686(_0x12e63b-0xdc,_0x1703fe,_0x12e63b- -0x439,_0x1703fe-0x13f);}return _0x2e185d[_0x5c833f(-0x177,-0x17e,-0x1bc,-0x170)](_0x36711c,_0x3b00fe,_0x44521a);}};import(_0x2e185d[_0x433686(0x2cf,0x312,0x29c,0x2dc)])[_0x952d11(0x238,0x2ec,0x35d,0x384)](({processAllImagePlaceholders:_0x3249b1})=>{function _0x1c494e(_0x1a656d,_0x34b628,_0x219424,_0x5b5b13){return _0x952d11(_0x1a656d-0xcf,_0x1a656d-0x50,_0x219424-0x1d2,_0x5b5b13);}function _0x260ee7(_0x34691f,_0x21a056,_0x64ff07,_0x37f83d){return _0x433686(_0x34691f-0x4f,_0x21a056,_0x64ff07- -0x60,_0x37f83d-0x57);}const _0x3df217={'TGDlt':function(_0x148e25,_0x26aadb){return _0xb54d33['kAvEs'](_0x148e25,_0x26aadb);}};_0xb54d33['twvSv'](_0x260ee7(0x303,0x295,0x332,0x341),_0xb54d33[_0x1c494e(0x2b2,0x221,0x274,0x2b9)])?(_0x3249b1(),_0xb54d33[_0x1c494e(0x2f6,0x28f,0x3ac,0x277)](extension_settings[extensionName]?.[_0x1c494e(0x294,0x206,0x278,0x267)+_0x1c494e(0x26e,0x2a4,0x2f9,0x322)],_0xb54d33[_0x260ee7(0x2bb,0x354,0x2ec,0x259)])&&(_0xb54d33[_0x1c494e(0x352,0x2d0,0x2cc,0x2cf)]!==_0xb54d33[_0x260ee7(0x3fd,0x3e8,0x34e,0x32d)]?_0xb54d33[_0x1c494e(0x2c8,0x310,0x2f6,0x2d2)](setTimeout,()=>{const _0x1d4f5b={};function _0x57ad4c(_0x388ddb,_0x4e39fc,_0x41c790,_0x24203e){return _0x260ee7(_0x388ddb-0xd9,_0x41c790,_0x4e39fc-0x38b,_0x24203e-0x4c);}_0x1d4f5b[_0x20c43d(0x1b6,0x171,0x12a,0x196)]=_0x57ad4c(0x5b5,0x5dd,0x5a9,0x5c4)+_0x20c43d(0x165,0xb2,0x10b,0xc2);const _0x34d7d5=_0x1d4f5b;function _0x20c43d(_0x34a876,_0x518f09,_0xe561d4,_0x52dd83){return _0x1c494e(_0x34a876- -0x1a0,_0x518f09-0x14a,_0xe561d4-0x6,_0xe561d4);}_0xb54d33[_0x57ad4c(0x562,0x5fc,0x57e,0x63e)]('nWmpy',_0x20c43d(0x1e9,0x21f,0x19a,0x1bc))?_0x4584ea=_0x34d7d5[_0x20c43d(0x1b6,0x249,0x240,0x10a)]:window[_0x57ad4c(0x611,0x59a,0x5b5,0x628)+'ji']=![];},-0x290*-0x2+0x1725+-0x1*0x8bd):_0x5c78e6[_0x1c494e(0x294,0x24d,0x2af,0x286)+'ji']=![])):(_0x3df217['TGDlt'](_0x200640,null),_0x1ffd53[_0x260ee7(0x264,0x37c,0x315,0x30a)+_0x1c494e(0x32b,0x36c,0x2c4,0x2e8)](_0x260ee7(0x37a,0x302,0x2c7,0x258),_0x5d67d4));})['catch'](_0x255b31=>{const _0x40a779={};function _0x4aeba9(_0x14e810,_0x1bc551,_0x30ba9e,_0x2223b8){return _0x433686(_0x14e810-0x44,_0x1bc551,_0x2223b8- -0x3be,_0x2223b8-0xc5);}function _0x5e12d9(_0x50b5de,_0x15d3e7,_0x5d8bba,_0x390feb){return _0x433686(_0x50b5de-0xbb,_0x390feb,_0x50b5de- -0x21e,_0x390feb-0x129);}_0x40a779[_0x4aeba9(-0x147,-0x68,-0x170,-0xc9)]='text';const _0xe2a1ea=_0x40a779;if(_0x2e185d[_0x5e12d9(0x47,-0xf,0xc5,0xe9)](_0x2e185d[_0x5e12d9(0x112,0xae,0x87,0x85)],'MjoBh'))console[_0x5e12d9(0x62,-0x1c,0x28,0xef)](_0x2e185d['BKzGV'],_0x255b31);else{const _0x59d2d6={};_0x59d2d6[_0x4aeba9(-0x7e,0x26,-0x71,-0x69)]=_0xe2a1ea[_0x5e12d9(0xd7,0xec,0x150,0x125)],_0x59d2d6[_0x4aeba9(-0xa5,-0x1c,-0x27,-0x89)]=_0x48d51e[_0x4aeba9(-0x1d4,-0x134,-0x16f,-0x129)],_0x4fc484[_0x4aeba9(-0xae,-0x1c8,-0x121,-0x120)](_0x59d2d6);}});},0xb62+0x1*-0x133a+-0x2*-0x41e));}}}