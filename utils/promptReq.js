(function(_0x1b14b6,_0x396ce1){function _0x576f85(_0x2ffb15,_0x5cbf63,_0x54a885,_0x49588b){return _0x3e20(_0x2ffb15-0x3cc,_0x54a885);}function _0x347402(_0x3b86ad,_0x35ad1b,_0x56deae,_0x805459){return _0x3e20(_0x805459-0x318,_0x3b86ad);}const _0x21f1a9=_0x1b14b6();while(!![]){try{const _0x12b1a4=-parseInt(_0x576f85(0x5a8,0x5d8,0x649,0x5c1))/(-0x1abe+-0x863+-0x1*-0x2322)*(parseInt(_0x576f85(0x5eb,0x659,0x62f,0x5bb))/(0x145d*0x1+0x1e52+-0x32ad))+parseInt(_0x576f85(0x580,0x516,0x55a,0x4d3))/(-0x968+-0x4*-0x4b2+0x95d*-0x1)+parseInt(_0x576f85(0x4a8,0x44c,0x4ef,0x548))/(-0x61*0x4e+0x65*-0x23+0x8ad*0x5)+-parseInt(_0x576f85(0x50b,0x585,0x455,0x59c))/(0x6*-0x4fe+-0x144c+0x3245)+parseInt(_0x347402(0x48c,0x4ed,0x4ae,0x4fe))/(0x2*0xe96+-0x16d4+-0x652)*(parseInt(_0x576f85(0x52b,0x47c,0x555,0x5be))/(-0x21ac+-0x1f0d*0x1+0x40c0))+-parseInt(_0x347402(0x312,0x346,0x3eb,0x3b8))/(0xb2d*0x3+0x1*0x160d+-0x5a*0x9e)*(parseInt(_0x347402(0x537,0x4e5,0x4b3,0x4d7))/(-0x1174+0x3*-0x268+0x18b5))+parseInt(_0x576f85(0x585,0x5d4,0x57e,0x623))/(0x2*0xd78+-0x1*-0xcd5+-0x5ad*0x7)*(parseInt(_0x347402(0x40d,0x3e4,0x48d,0x400))/(-0x1b62+-0x12d7+0x2f*0xfc));if(_0x12b1a4===_0x396ce1)break;else _0x21f1a9['push'](_0x21f1a9['shift']());}catch(_0x582f48){_0x21f1a9['push'](_0x21f1a9['shift']());}}}(_0xb9b6,-0x164a9d+-0x174863+0x3c7d6b));const _0x222ff4=(function(){const _0x580549={};_0x580549['rMKUO']=_0x3f261a(0x23f,0x1bd,0x2f0,0x2e6),_0x580549['ObDIU']=function(_0x5e14e6,_0x363c2a){return _0x5e14e6===_0x363c2a;},_0x580549[_0x3f261a(0x144,0xc1,0x1ed,0x1de)]=_0x3f261a(0x139,0x179,0xab,0x15b),_0x580549[_0x41429e(-0x8a,-0x3,-0x3a,-0x29)]=function(_0x43da37,_0x29f4b5){return _0x43da37!==_0x29f4b5;},_0x580549[_0x3f261a(0x293,0x267,0x26d,0x239)]=_0x41429e(-0x3f,-0x4c,0x44,0x31);const _0x24295e=_0x580549;function _0x3f261a(_0x5c4154,_0x5b044b,_0xa765eb,_0x52cd20){return _0x3e20(_0x5c4154-0x83,_0x5b044b);}function _0x41429e(_0x126313,_0x566918,_0x2ea92e,_0x7a65b6){return _0x3e20(_0x2ea92e- -0x132,_0x566918);}let _0xe192bc=!![];return function(_0x1ef35c,_0x51b96c){const _0x19de3a={'HGcXG':_0x24295e[_0x14f09b(0x572,0x514,0x626,0x4ed)],'oDkHz':function(_0xd3a1ed,_0x3f15d5){return _0x24295e['ObDIU'](_0xd3a1ed,_0x3f15d5);},'KCBJh':_0x24295e['LXZrL']};function _0x14f09b(_0x525a57,_0x2be3e9,_0xc5ad13,_0x563b19){return _0x3f261a(_0x525a57-0x2e7,_0x2be3e9,_0xc5ad13-0xd0,_0x563b19-0x10);}function _0x7e03f0(_0x36e7d8,_0xddd2f8,_0x59c659,_0x3bff84){return _0x41429e(_0x36e7d8-0xa2,_0x3bff84,_0xddd2f8- -0x201,_0x3bff84-0x97);}if(_0x24295e['WqdvS'](_0x24295e[_0x7e03f0(-0x181,-0x123,-0xe0,-0xf4)],'jEoCS')){const _0x16c1f8=_0xe192bc?function(){function _0x20bc3c(_0x4c7b56,_0x279239,_0x2d6dd6,_0x2e3131){return _0x7e03f0(_0x4c7b56-0x72,_0x2d6dd6-0x162,_0x2d6dd6-0x1a6,_0x279239);}function _0x1be6be(_0x511b34,_0x546371,_0x5452f5,_0x20c5c3){return _0x14f09b(_0x20c5c3- -0x222,_0x5452f5,_0x5452f5-0x46,_0x20c5c3-0x6a);}if(_0x19de3a[_0x1be6be(0x2b5,0x2f0,0x304,0x28b)]===_0x19de3a['HGcXG']){if(_0x51b96c){if(_0x19de3a[_0x20bc3c(0x15,-0xda,-0x52,-0x57)](_0x19de3a[_0x1be6be(0x396,0x388,0x34f,0x2f0)],_0x19de3a['KCBJh'])){const _0x472556=_0x51b96c[_0x20bc3c(-0x5,-0x4b,-0x88,0x2e)](_0x1ef35c,arguments);return _0x51b96c=null,_0x472556;}else _0x31a694[_0x20bc3c(-0x54,-0x63,0x54,0x36)](_0x446571[_0x1be6be(0x2b7,0x1ee,0x2eb,0x247)]('\x0a'));}}else _0x19ceb7+=_0x20bc3c(-0x89,0x46,-0x20,-0x77)+'。\x0a\x0a';}:function(){};return _0xe192bc=![],_0x16c1f8;}else _0x483a23=_0x7e03f0(-0x28e,-0x26b,-0x27a,-0x325)+_0x7e03f0(-0x268,-0x21a,-0x1b3,-0x2d1)+'4,'+_0x11c5e5;};}()),_0x31ec18=_0x222ff4(this,function(){const _0x237a33={};function _0x5b588b(_0x47c4d6,_0x5e8c5a,_0x19b419,_0xe6cbe7){return _0x3e20(_0xe6cbe7-0x28d,_0x5e8c5a);}_0x237a33[_0x5f21d0(-0xa6,-0x118,-0x159,-0x98)]=_0x5b588b(0x406,0x4e9,0x4bb,0x43f)+'+$';function _0x5f21d0(_0x249608,_0x571815,_0x4a24af,_0x137867){return _0x3e20(_0x137867- -0x1fa,_0x4a24af);}const _0x55f87e=_0x237a33;return _0x31ec18[_0x5b588b(0x53c,0x4e7,0x4ed,0x4ae)]()[_0x5f21d0(-0x8a,-0x82,0xb1,-0x13)](_0x55f87e[_0x5f21d0(-0x71,-0xc4,-0xb1,-0x98)])[_0x5b588b(0x550,0x479,0x3fb,0x4ae)]()[_0x5b588b(0x3ca,0x48c,0x492,0x483)+'r'](_0x31ec18)[_0x5b588b(0x467,0x43d,0x4c2,0x474)](_0x55f87e['biyIJ']);});_0x31ec18();import{getContext}from'../../../../st-context.js';import{extensionName}from'../utils/config.js';import{extension_settings}from'../../../../extensions.js';import{updateCombinedPrompt}from'./settings/llm.js';import{generateCharacterListText,generateCommonCharacterListText,generateOutfitEnableListText,getEnabledCharacterImages,getEnabledOutfitImages,getCommonCharacterImages}from'./settings/worldbook.js';function _0xb9b6(){const _0x120097=['cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','D05TBxm','Cg9WDxaTyNv0Da','C3rLBMvY','s0LlAxu','uxHvwxi','qLD1Agu','AufkDeS','DgfZA0LK','y2HHDe1LDgfKyq','tvvYtfm','mxPNBw5lrW','Bg9N','z2u6','rxvOr2i','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','Dc5QCW','Aw5UzxjizwLNAa','DxbTBe4','Bfb2vue','AenNC3a','mZb2AMrMCMK','C2vHCMnO','B25Z','ios4QUwBVUEjH+AGH+ETVUw+HEwKHoEqHG','BgHpzfe','5zU077Ym5ywj57Q/5P+u5zkmlI4U','Bgf5','yxv0B19JBgLJAW','DLP3wMS','u1r3vhK','sMPhqKC','tKHbrvy','zM9JDxm','runIBNK','D3jHChbLCG','A2P2C1e','y29UC3rYDwn0BW','uKXuA20','rNrKsMe','r3LQDuW','r05Zweq','qwvStM8','wMHgs0q','AMfluxy','ENfJB3e','C3vJy2vZCW','zg5rrfa','y2HHBMDL','CxvLCNLtzwXLyW','C2L6zq','ANzMqui','5PYQ5l2/55sO55Qe5y+y6yEp77YA','BwPXtgW','ANrZwuG','CK1lvu8','8j+tJIdLJ4lOGipLM77NIyFVViJLJ6/PGiNVViK','y2XHC3nmAxn0','ywqTyNrU','Bfriqxq','BwfUzevUywjSzq','CMvTB3zLrxzLBG','44cccGO','BhHtyuy','CLHmq0u','ywTAuva','v256Ew0','ufrcvfm','uhr5u0u','BwLU','zMLSzq','B2v1zfO','Aw5WDxq','we5LsvG','DeLOBuK','Dgv4Da','qNL4rgK','DgLTzw91De1Z','mZqZmZe5mNjnD01ivq','tvHgrgm','Dg9tDhjPBMC','B0LdEu4','ufPUExy','E3VMRApMLOD9Fq','ChvZAa','ywnJzxb0','qNHzBuy','wgThB0W','Dg9Y','lI8UlI9Zy3jPCa','suzut04','CLrzA2O','mtq5odG4yuPjq1L6','BMfTzq','zxvL','DhfpEM8','DMfYAwfIBgvZ','B0zUzNu','zxjYB3i','Cg9WDxaTDgL0Ba','zgf0ytO','uNnwENa','DwPVAKe','vKzWvMK','CwnxB2O','A2v5zg93BG','rNf3Exa','rezOq3a','Aw1Hz2uVkG','Dwvrshy','54k55yE75lIk5PA55OYj6zkU5RE75yQG5y+c6icd','iow8OowBVUEjHW','zfPeu1m','ExHeCuK','DMr6ufG','Aw1Hz2vFDxjS','sLzqz1i','lI4U','y2f0y2G','5Q2J5zYO5Ase55cg5Q2J5PAh55sF5zU+6k+35Rgc','sNffDeK','uwvmzKu','qvbHAMG','v2DmBKS','yMDnzwy','tfHACKW','zM9oywu','6iEQ5yQO5OM56yEp55sF5zU+icG','At4G5RE75yQG5zU+54Mh','r0jozNm','lI4VlI4VlI4VlG','wgrpwvK','zgf0ytPPBwfNzq','6kkR5l2/55sO44cccG','zgvMyxvSDeLTyq','yM9KEq','lI90yxnRuxvLDq','vwXKu0e','whvODfG','CNroCeq','q2TUtw8','6kEs6iMY5PYn6kof5y+c6icd5zU+54Mh','y29UDgvUDa','Cg9WDxaTzw1WDa','B25SB2fK','rMfQrKW','BLP1uLy','wMXeuLy','AxnuyxnRsw5rDq','CMvZDwX0','i3rVCc1Zzxr0Aq','6k+35O+p6l+W5OkO5BIm5PYB55sF5OIq55Qe5zU+','nJu0mZa0oevIs0vuBq','w3bYB21WDfjLCq','tvfIvwS','Cg9WDxaTB3zLCG','ExvOuNC','t3jlq2S','u0HKwxa','DfDXrfa','AvPVD3y','v2TctvO','Cg9WDxaTDxbSBW','CM9TChq','nde5mJG3qvD3C2DL','iow8OcK','y0nxuhy','5BEY5y+w5RAi55sF5zU+6k+35Rgc','uLfyA3e','B2vOrK8','BMDZlwHVBgrLCG','xsdOH6RLIQJNGRNLH7VKU7VLIQhLT7lOOQS','zgvSzxrL','Aw1Hz2uV','5y+c6icd5zU+54Mh','DenABfu','Aw1Hz2vhzw5ezq','yxv0BW','v1HRu1m','uvLrAge','v3fKDLm','B2rL','pgKGy2XHC3m9iG','A0HdEu0','C3rYAw5N','mhW0Fdn8mxWY','C2HsBeq','AM9PBG','zeXIuxm','Aw5Uzxjive1m','C1rHDwW','zgfvrg4','DhLWzq','zez3wLe','8j+NQIdMRApLIjNMTyVOR5xMQkhLVi/LT7lLKk8','tK5pzNu','Dgv4DgfYzwe','DgfYz2v0','vw9YAMi','ywrKrxzLBNrmAq','z2nxzK8','AMKY','C3rFy2HHDhu4xW','wKrlrwK','C3rHCNrZv2L0Aa','CMvTB3zLtgLZDa','ywrzEKG','6kkR5l2/55sO77YA','w3nOB3DvC2vYra','DgvZDe1Vzgu','uwT1DM8','B3rhuLa','8j+wVo+4JYdOVPpLHAxNLj/LM77PNidMSyi','l3bUzZTIyxnLnG','C2XPy2u','zgv0ywLS','zc1VDMvYBgf5','Bxn2rwW','y3jLyxrLrwXLBq','t1DrEwi','Aw1Hz2vFz2vU','Cg9WDxaTyNvIyG','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','Ewnsthm','zs5QCW','DKnOExi','rM5LA2q','Bxv3q20','Bwf4','qwDzy20','BNzTqxq','BKLjyM8','ChPnBwO','D3jbEwK','sfv2r2O','yxrPB24','Aw1N','EKjszMe','DxnLCI1Kzw1HBG','A2v5','yvHfv2y','u0nZEKK','ys1WBhvZiJ48lW','zhjot0e','weD3sfC','BhHJAMu','sLnWENi','Dhj1zq','54Mh55Qe5yw35l2t6zYa5Rgc77Yi5y+V6ycj77Yj','t2z2t24','E3VKUjBNLyZKUABOP6BLJ5f9Fq','ndi5ote0nwfgvffpCq','AgfZ','z2v1DMC','E3VNLkJMIlFPNidMSyj9Fq','seDJweC','C3bHBG','C3r5Bgu','55sO77YA5BEY5ygC5Q2IieXmtsa','BKnvqMy','BM9Uzq','yxbWBhK','s1rID1y','twrdB2m','uLvotKLorW','6k+35Rgc77Ym5lUf5Bgv56s65PYa57Uiifa','u2DAvKy','C3qTy2HHDhu4lq','y291BNq','BgvUz3rO','y2XHC3noyw1L','ywrK','AvLOyMm','qK9MBLa','zgL2','zMLHz28','E3VKUiRKUiVMLOD9Fq','y3rYBeTLEq','Cg9WDxaTyNrUlq','ufrcrNK','BuDsrKO','zw50','DxjS','mJaXmtK0meD5z1DPzG','vNLKwuG','B1Lir0m','yML5suO','yM9QswG','yNfhtuS','yxnRswq','uhHdvwy','z2v0qM91BMrPBG','BYbYzwfKigLTyq','BMrLEc5QCW','5l6l5AAc77YA6yEn54k55O+p57Uy5zY65PMV5RcB','ywLotwe','zMeTC29SAwqGzG','EvfpvNO','A0LKwey','Aw5MBW','yM90Dg9T','vgXUv04','DeLisLi','yNv0Dg9U','wxv1B2q','DhjPBq','BKjqB2G','wuDoDK0','5BEY5RE75yQGia','z0rZz2G','r2vnCxe','AxD3rMK','DLDrDwO','y2XPy2S','Dgv4DenVBNrLBG','B0rRshO','uwf2zhy','AvH5qxa','6k+k5PAT77YA5RkH5PYj5Qoa5Rwl5yIW5y+y6yEp','wMHnr1O','EMLKB25NzgLHBG','Chb1uNC','Dvroqxa','Dg1WsgS','56gU5A6A55sF5OIq','B2jQzwn0','C3rVCfbYB3bHzW','DeXPC3rLBMvY','zMLSDgvY','CM9Szq','yxjLyq','ywqTAgvHzgvY','C3jJ','z2vezw1HBMq','y29TCgXLDgvuyq','Cg9WDxaTDgv4Da','uwPsBw0','D29byK0','sfLLEhK','xsdMLlBPM4BOP5lOIBiV5PYn6kof5zU+','zMLSzxm','wfnNz3a','shzKsui','DMfSDwu','CMvTB3zL','qurwwhO','zePosM0','rvfvv1e','ExP5BhG','D1jqrxe','BfP6uwq','ChjVBxb0','BgXTx2HPC3rVCG','BhDfEfu','CM12BMu','rgLkBMu','s0ncsMG','swzXsNO','C3bSAxq','rxnJyxbL','BMTMt2C','Cg9WDxaTAgLUDa','ELDrD1C','wxvtteq','yMfZzty0','5OMa5PYj5z+656ga5y+y6yEp6yo95BEY5l2/55sO','kcGOlISPkYKRkq','CgXHy2vOB2XKzq','nJi5mZi1tK9Nthrn','BMfTzx19','wKD6Cfi','wNn6Cge','xsbgywLSzwqGDa','ndmWC0PKDfrY','B25LCNjVCG','ywqTBgfIzwW','uLDVBvy','sePIDNu','zw5LCG','nJu3Ee9yy3PX','yxv0B0nSAwnRva','zw1HBMrqB3b1Ca','Cg9WDxaTAw1Nlq','y2XVC2LUzW','C3bSAwnL','DKrst08','uMfiqui','uMjxqMe','u0frqxy','yxbWzw5Kq2HPBa','vMjsufi','z0nSAwvUDfjLyW','uMHVrwS','z3DxwgS','zw9rDxm','sfbdEem','BK9Uz2K'];_0xb9b6=function(){return _0x120097;};return _0xb9b6();}import{isMobileDevice,removeThinkingTags}from'./utils.js';export{generateRequestId,LLM_GET_PROMPT,LLM_IMAGE_GEN_GET_PROMPT,LLM_CHAR_DESIGN_GET_PROMPT,LLM_CHAR_DISPLAY_GET_PROMPT,LLM_CHAR_MODIFY_GET_PROMPT,LLM_TAG_MODIFY_GET_PROMPT,LLM_EXECUTE,LLM_IMAGE_GEN,LLM_CHAR_DESIGN,LLM_CHAR_DISPLAY,LLM_CHAR_MODIFY,LLM_TAG_MODIFY}from'./llmRequest.js';export{processWorldBooksWithTrigger}from'./worldbookProcessor.js';export{setcharData,getcharData,getElContext,getrWorlds,getcharWorld,getglobalSelectWorld,getWorldEntries}from'./chatDataUtils.js';export{parseImagesFromPrompt,insertImagesIntoElement,fuzzyMatchLine,calculateLineSimilarity,calculateNgramSimilarity,generateElKey,saveImageGroup,generateStableId,findTagInImageGroups}from'./imageInserter.js';import{LLM_IMAGE_GEN_GET_PROMPT,LLM_IMAGE_GEN}from'./llmRequest.js';import{processWorldBooksWithTrigger}from'./worldbookProcessor.js';import{getElContext}from'./chatDataUtils.js';import{parseImagesFromPrompt,insertImagesIntoElement}from'./imageInserter.js';function _0x3e20(_0xeeb7d5,_0x5526ae){_0xeeb7d5=_0xeeb7d5-(-0x7dc+-0x7*-0x115+0xe9);const _0x2b38d8=_0xb9b6();let _0x26f77c=_0x2b38d8[_0xeeb7d5];if(_0x3e20['uENeeT']===undefined){var _0x4ea14f=function(_0x58eaad){const _0x1f5e3c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4026fa='',_0xdbf565='',_0x52a1d4=_0x4026fa+_0x4ea14f;for(let _0x4fa3b4=0xbd5+-0x4b*-0x3c+-0x1d69,_0x2669d1,_0x4aab1f,_0x586763=-0x1f33+-0x1106+0x3039;_0x4aab1f=_0x58eaad['charAt'](_0x586763++);~_0x4aab1f&&(_0x2669d1=_0x4fa3b4%(0x17*-0x157+0x44a*0x3+0x11f7)?_0x2669d1*(-0x2234+0x1b7d+0x6f7*0x1)+_0x4aab1f:_0x4aab1f,_0x4fa3b4++%(0x1e5e+-0x40*0x26+-0xa6d*0x2))?_0x4026fa+=_0x52a1d4['charCodeAt'](_0x586763+(0x1*0x783+-0x1929+-0x46c*-0x4))-(-0xe*0x156+0x1975+-0x9*0xbf)!==0x2056+0x8*0x125+0x297e*-0x1?String['fromCharCode'](0x1f7a+0x2c7+-0x2142&_0x2669d1>>(-(-0x1*0xb41+-0x600+0x1143)*_0x4fa3b4&-0xae5+-0x553*0x1+0x103e)):_0x4fa3b4:-0xf1*-0x27+0x1d6d+-0x4224){_0x4aab1f=_0x1f5e3c['indexOf'](_0x4aab1f);}for(let _0x2043da=0x735*0x2+0xc0+-0xf2a,_0x3d9470=_0x4026fa['length'];_0x2043da<_0x3d9470;_0x2043da++){_0xdbf565+='%'+('00'+_0x4026fa['charCodeAt'](_0x2043da)['toString'](-0x7*0x227+0x58*0x22+0x371))['slice'](-(0x1c2+0x48*0x43+0x293*-0x8));}return decodeURIComponent(_0xdbf565);};_0x3e20['YyJPIC']=_0x4ea14f,_0x3e20['LgPJYF']={},_0x3e20['uENeeT']=!![];}const _0x59096f=_0x2b38d8[0x3b*-0x95+0xa58+-0x17ff*-0x1],_0x2bcfd6=_0xeeb7d5+_0x59096f,_0x96f0c0=_0x3e20['LgPJYF'][_0x2bcfd6];if(!_0x96f0c0){const _0x2c19fa=function(_0xaba6a8){this['ViofUp']=_0xaba6a8,this['jzJfok']=[-0x1*-0x7e9+0x1*-0x17c4+0xfdc,-0x1*-0xb17+0xcd+-0x1*0xbe4,-0x17ba*-0x1+-0x47*0x4f+-0x1d1*0x1],this['NtCtsr']=function(){return'newState';},this['EliYBW']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['KcYXgp']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2c19fa['prototype']['YZZKty']=function(){const _0x5963c1=new RegExp(this['EliYBW']+this['KcYXgp']),_0x53443d=_0x5963c1['test'](this['NtCtsr']['toString']())?--this['jzJfok'][0x20*-0x27+0x27c*0xa+-0x10d*0x13]:--this['jzJfok'][-0x2*-0x301+0xf*0xa1+-0x1*0xf71];return this['ephQFL'](_0x53443d);},_0x2c19fa['prototype']['ephQFL']=function(_0x459828){if(!Boolean(~_0x459828))return _0x459828;return this['yuPKHs'](this['ViofUp']);},_0x2c19fa['prototype']['yuPKHs']=function(_0x2c3e4b){for(let _0x209310=0x1219+0x48f+-0x16a8,_0x5cafbf=this['jzJfok']['length'];_0x209310<_0x5cafbf;_0x209310++){this['jzJfok']['push'](Math['round'](Math['random']())),_0x5cafbf=this['jzJfok']['length'];}return _0x2c3e4b(this['jzJfok'][0x122d*0x1+-0xae*0x2+-0x69*0x29]);},new _0x2c19fa(_0x3e20)['YZZKty'](),_0x26f77c=_0x3e20['YyJPIC'](_0x26f77c),_0x3e20['LgPJYF'][_0x2bcfd6]=_0x26f77c;}else _0x26f77c=_0x96f0c0;return _0x26f77c;}import{getProcessedPrompt,replaceAllPlaceholders,mergeAdjacentMessages}from'./promptProcessor.js';import{buildPromptForRequestType}from'./settings/llmService.js';function showUserDemandPopup(){function _0x1e0ee5(_0x2adcca,_0x2fcf65,_0x2222d9,_0x2860c7){return _0x3e20(_0x2860c7-0x10c,_0x2fcf65);}function _0x4f33d2(_0x55d65c,_0x5249ab,_0x25b4d9,_0x56746b){return _0x3e20(_0x55d65c- -0x8d,_0x5249ab);}const _0x229a09={'GNsXD':function(_0x504b9a,_0x38cb07){return _0x504b9a(_0x38cb07);},'kIdXF':_0x1e0ee5(0x31d,0x302,0x212,0x2cf),'CVYMd':function(_0x569fae,_0x439632,_0x10d8e1){return _0x569fae(_0x439632,_0x10d8e1);},'dYWzj':function(_0x106d10,_0x2186a7){return _0x106d10===_0x2186a7;},'zzxUy':function(_0x2a673f,_0x17aed1){return _0x2a673f(_0x17aed1);},'ADVXz':_0x1e0ee5(0x266,0x17e,0x16c,0x1b9),'KJCLT':'Enter','yCZjC':function(_0x279774,_0x1daf7f,_0x3af47b){return _0x279774(_0x1daf7f,_0x3af47b);},'OWQyb':_0x4f33d2(0xc9,0x7f,0xd6,0x84),'muwCm':_0x4f33d2(0xc2,0x7d,0x1d,0xba)+'popup-img-'+'item','PxCUf':_0x4f33d2(0xa3,0x125,0x94,0xf5),'QeLfE':_0x1e0ee5(0x28b,0x310,0x1e4,0x25b)+_0x4f33d2(0x135,0x12b,0x18e,0x197)+_0x1e0ee5(0x290,0x1aa,0x1fd,0x1fc),'gjCUK':function(_0x4f1fdb,_0x354fdb){return _0x4f1fdb+_0x354fdb;},'CdNtx':_0x1e0ee5(0x31f,0x246,0x241,0x303),'eoyfz':_0x1e0ee5(0x349,0x259,0x293,0x2da),'ZGzpR':function(_0x44c8a2,_0x5d4cba){return _0x44c8a2===_0x5d4cba;},'JqEtI':_0x1e0ee5(0x316,0x195,0x306,0x25b)+_0x1e0ee5(0x255,0x21c,0x289,0x1df)+'y-hint','BOfnP':_0x4f33d2(0xc2,0x83,0x173,0x66)+_0x1e0ee5(0x265,0x2ce,0x268,0x2ce)+_0x1e0ee5(0x2f3,0x2d5,0x1e5,0x25c),'nCUBf':function(_0x39639c){return _0x39639c();},'kHCyM':function(_0x45013c,_0x562bcc){return _0x45013c!==_0x562bcc;},'gAqvD':_0x4f33d2(0x13b,0xda,0x191,0x125),'XSggp':_0x1e0ee5(0x29d,0x21d,0x28f,0x229),'tCZlU':_0x4f33d2(0x64,0x3e,0x27,0xaa),'XuhtX':function(_0x5aec74,_0x7ff597){return _0x5aec74===_0x7ff597;},'oYHGC':_0x1e0ee5(0x281,0x291,0x2f7,0x2b5),'uTNAp':_0x1e0ee5(0x245,0x27d,0x1dc,0x238),'ppuRw':_0x4f33d2(0x4d,0xd9,0x102,0x5)+_0x4f33d2(0x61,-0x2a,0x74,0x10e),'FTRCe':'YwWbz','NKGrS':_0x1e0ee5(0x342,0x25c,0x326,0x312),'HvdIB':function(_0xe9ee32,_0x38f6e8){return _0xe9ee32*_0x38f6e8;},'JSpzr':function(_0x2fba62,_0x17405e){return _0x2fba62-_0x17405e;},'iwwFi':function(_0x137bcd,_0x5f5755){return _0x137bcd-_0x5f5755;},'CRneX':_0x4f33d2(0xa5,0x88,0x1d,0x27)+_0x1e0ee5(0x29a,0x1d0,0x1b3,0x228),'Nnnmn':_0x4f33d2(0xc2,0xa7,0x188,0x183)+_0x1e0ee5(0x1fd,0x15e,0x29c,0x1eb)+_0x1e0ee5(0x2d9,0x323,0x257,0x2f8),'SCszI':_0x1e0ee5(0x31c,0x217,0x214,0x25b)+_0x1e0ee5(0x1a2,0x2db,0x2e6,0x22d)+'le','otGRP':'mobile','jaKQv':_0x1e0ee5(0x2a8,0x18b,0x20e,0x224),'WCMsl':_0x1e0ee5(0x1cc,0x288,0x2ca,0x25b)+_0x1e0ee5(0x22d,0x19d,0x126,0x1b3)+'e','VydYH':_0x1e0ee5(0x22b,0x227,0x269,0x1e7)+_0x4f33d2(0xaf,0x102,0x5,0xd3),'SgZVF':_0x4f33d2(0xc2,0xfa,0x134,0x26)+_0x1e0ee5(0x298,0x313,0x283,0x2b9),'rTYkj':_0x4f33d2(0x7b,-0x44,-0x11,0x45),'ZhFKD':_0x4f33d2(0xdd,0x44,0x1c,0x83)+_0x4f33d2(0x15e,0x1e1,0x150,0x160),'BWuhe':_0x4f33d2(0xc2,0xca,0xeb,0x17b)+_0x4f33d2(0x106,0x184,0x7d,0x197)+_0x4f33d2(0x101,0xab,0x122,0x58),'daUDn':_0x4f33d2(0xc2,0x14,0x15b,0xb8)+_0x1e0ee5(0x280,0x1b9,0x2a6,0x1f2)+'ad-section','RQXkq':_0x1e0ee5(0x1c6,0x203,0x1e4,0x250),'EQUWQ':_0x4f33d2(0x17c,0x16d,0x1dc,0x155),'PTBTS':_0x1e0ee5(0x3ad,0x3ab,0x37a,0x325),'foNae':_0x4f33d2(0x23,0xcc,-0x44,-0x18),'lRQCR':'none','XdOYY':_0x4f33d2(0xe6,0x114,0x4a,0x11e),'efQbK':_0x4f33d2(0x6d,0x5e,-0x4c,0x3f)+_0x1e0ee5(0x1ed,0x20b,0x2b1,0x278)+_0x4f33d2(0xa9,0x132,0x17,-0x15)+_0x4f33d2(0x37,-0x1f,-0x83,-0x1),'Zszpa':_0x4f33d2(0xc2,0x138,0x3a,0xf5)+_0x1e0ee5(0x296,0x1bd,0x1f3,0x1f2)+_0x1e0ee5(0x2c9,0x30e,0x357,0x317),'bojIh':'click','QYQha':_0x1e0ee5(0x2db,0x254,0x1ba,0x25b)+'popup-prev'+'iew-contai'+'ner','lPvUA':'点击上方按钮添加参考'+'图片','gcWfO':_0x1e0ee5(0x236,0x1fe,0x1d4,0x25b)+_0x1e0ee5(0x33d,0x2cf,0x21b,0x2df)+_0x4f33d2(0x15b,0x107,0x171,0x18a),'DFhCp':_0x4f33d2(0xc2,0x10e,0xe4,0x152)+_0x1e0ee5(0x1f0,0x1ad,0x320,0x266)+'cancel','pCQjT':_0x4f33d2(0xfb,0x17c,0x17f,0x11b)};return new Promise(_0x15f888=>{const _0x16d1c6={'mfvjB':function(_0x185426,_0x270c04,_0x47f565){return _0x229a09['yCZjC'](_0x185426,_0x270c04,_0x47f565);},'ECbny':_0x229a09['OWQyb'],'fiago':_0x229a09[_0x218a17(0x403,0x49b,0x397,0x3fd)],'drNOA':_0x218a17(0x4ab,0x41a,0x4df,0x425)+'popup-img-'+_0x4d5dc8(0x505,0x55c,0x558,0x4a6),'kjvsQ':_0x229a09[_0x4d5dc8(0x53b,0x568,0x4ca,0x4f6)],'GNisg':_0x229a09[_0x218a17(0x2dc,0x2f4,0x35d,0x393)],'ZhMGZ':_0x4d5dc8(0x617,0x51b,0x57d,0x4b9),'chcvK':_0x218a17(0x4bb,0x514,0x508,0x4f2),'ujojA':function(_0x2d43ee,_0x5c5e90){return _0x229a09['gjCUK'](_0x2d43ee,_0x5c5e90);},'GyjuL':function(_0x4c2cf2){return _0x4c2cf2();},'YuSLD':_0x229a09['CdNtx'],'wrAyi':_0x229a09['eoyfz'],'MUrLS':function(_0x497d51,_0x5a7f0a){function _0x569c22(_0x2e44ea,_0x3c3dbd,_0x11da21,_0xa07f2f){return _0x4d5dc8(_0x2e44ea-0x1e7,_0x2e44ea,_0x11da21- -0x43,_0xa07f2f-0x1a0);}return _0x229a09[_0x569c22(0x542,0x4df,0x4d7,0x41b)](_0x497d51,_0x5a7f0a);},'ycRLs':_0x4d5dc8(0x3c8,0x3b8,0x416,0x35b)+'图片','cjzCf':_0x229a09['JqEtI'],'JVPgR':_0x229a09[_0x218a17(0x4df,0x48a,0x432,0x42b)],'yXwBf':'string','yxDqI':_0x218a17(0x329,0x32f,0x36d,0x3cb),'EuhGb':function(_0x5a5890){function _0x4b607c(_0x34ba95,_0x3c87f0,_0x254291,_0x11fe2f){return _0x4d5dc8(_0x34ba95-0x18,_0x11fe2f,_0x34ba95- -0x54c,_0x11fe2f-0x13d);}return _0x229a09[_0x4b607c(-0xa1,-0x83,-0x112,-0x1a)](_0x5a5890);},'FajFL':_0x4d5dc8(0x5a4,0x5c1,0x539,0x501),'iAJtK':function(_0x4c7f75,_0x33875d){return _0x4c7f75===_0x33875d;},'KTbwV':function(_0xfb84b4,_0x2536a0){function _0x2ff435(_0x45627a,_0x3206a0,_0x4b42bc,_0x15a5f9){return _0x4d5dc8(_0x45627a-0x128,_0x15a5f9,_0x45627a- -0x175,_0x15a5f9-0x144);}return _0x229a09[_0x2ff435(0x2ea,0x385,0x26a,0x3aa)](_0xfb84b4,_0x2536a0);},'HYexy':_0x229a09['gAqvD'],'zBRfa':_0x229a09[_0x4d5dc8(0x52c,0x505,0x4fd,0x5b6)],'MqjUa':_0x229a09[_0x4d5dc8(0x4fd,0x45a,0x457,0x476)],'tIHJR':function(_0x36bd11,_0x57dae6){function _0x35d1f5(_0x5834be,_0x3d8d55,_0x5dab83,_0x1c9829){return _0x218a17(_0x5834be-0xe3,_0x5dab83,_0x5dab83-0x1a,_0x5834be- -0xef);}return _0x229a09[_0x35d1f5(0x2b5,0x2f0,0x223,0x34a)](_0x36bd11,_0x57dae6);},'GBNfs':_0x229a09[_0x4d5dc8(0x557,0x582,0x4c5,0x53e)],'jtsYH':_0x229a09[_0x4d5dc8(0x43c,0x4a1,0x4ea,0x47c)]},_0x4f71b0=_0x229a09[_0x4d5dc8(0x558,0x44d,0x4ab,0x4f7)](isMobileDevice);function _0x218a17(_0x43dd30,_0x242c9,_0x3e89ca,_0x589086){return _0x4f33d2(_0x589086-0x363,_0x242c9,_0x3e89ca-0x186,_0x589086-0x73);}const _0x147112=[];let _0x32c7ca=-0x78b+-0x245+0x1*0x9da,_0x487099=_0x4d5dc8(0x466,0x543,0x4ac,0x56c);if(_0x4f71b0){const _0x377a82=document[_0x4d5dc8(0x580,0x4fe,0x566,0x517)+_0x4d5dc8(0x62e,0x614,0x58d,0x5e5)](_0x229a09[_0x218a17(0x43e,0x3bf,0x4fc,0x45b)]);if(_0x377a82){if(_0x229a09['FTRCe']!==_0x229a09['NKGrS']){const _0x43bbf6=_0x377a82[_0x4d5dc8(0x532,0x57f,0x4cb,0x46d)+_0x4d5dc8(0x4da,0x52f,0x52f,0x48c)+'t']();_0x32c7ca=Math[_0x4d5dc8(0x49f,0x409,0x48c,0x4b7)](0x2*0x693+0x1*0x24f7+-0x10b1*0x3,Math['min'](_0x229a09['gjCUK'](_0x43bbf6[_0x4d5dc8(0x528,0x4cc,0x4d4,0x4c4)],-0x23b+-0x1*0xd31+0xf76),_0x229a09[_0x4d5dc8(0x508,0x477,0x4fe,0x487)](window['innerHeigh'+'t'],-0x2050+0x22cd*0x1+0xd*-0x31+0.5)));}else _0x5ef4ae(()=>{function _0x124662(_0x2df36e,_0x39cd7d,_0x3a963b,_0x50c7f6){return _0x218a17(_0x2df36e-0x6d,_0x50c7f6,_0x3a963b-0x6d,_0x2df36e- -0x40e);}_0x7547b3[_0x124662(0x4c,-0x2,0xb6,0x60)+'ji']=![];},0x3*0x1ca+0x222*-0x5+0x18d4);}const _0x18d028=Math[_0x4d5dc8(0x53d,0x475,0x48c,0x4ab)](-0x1672+-0x1*-0x893+0xea7,_0x229a09[_0x218a17(0x471,0x479,0x469,0x410)](_0x229a09[_0x218a17(0x43e,0x4b4,0x511,0x451)](window[_0x218a17(0x4dd,0x414,0x4f7,0x4b8)+'t'],_0x32c7ca),-0x1*-0x21fb+-0x1115*0x2+0x43));_0x487099=_0x18d028+'px';}const _0x5c443b=document['createElem'+'ent'](_0x229a09[_0x4d5dc8(0x42f,0x4cb,0x483,0x482)]);_0x5c443b['id']=_0x229a09['CRneX'],_0x5c443b[_0x218a17(0x4ad,0x3e3,0x37a,0x428)]=_0x229a09['Nnnmn'];const _0x4ef04a=document[_0x218a17(0x3a2,0x3a2,0x3ea,0x3f4)+_0x218a17(0x49d,0x435,0x4bb,0x433)](_0x229a09[_0x218a17(0x3c2,0x399,0x375,0x3f5)]);_0x4ef04a[_0x4d5dc8(0x41a,0x55c,0x4b6,0x56a)]=_0x229a09[_0x218a17(0x4a4,0x437,0x4cf,0x40b)];_0x4f71b0&&(_0x4ef04a[_0x4d5dc8(0x568,0x587,0x56e,0x543)][_0x218a17(0x400,0x4c0,0x3ed,0x429)](_0x229a09[_0x218a17(0x4ac,0x496,0x382,0x3ed)]),_0x4ef04a[_0x4d5dc8(0x515,0x4cd,0x4a9,0x413)]['top']=_0x32c7ca+'px',_0x4ef04a['style']['maxHeight']=_0x487099);const _0x21bb5d=document['createElem'+'ent'](_0x229a09[_0x4d5dc8(0x474,0x476,0x483,0x4f7)]);_0x21bb5d[_0x4d5dc8(0x428,0x4e8,0x4e2,0x4a5)+'t']=_0x229a09[_0x4d5dc8(0x628,0x4c3,0x561,0x61b)],_0x21bb5d[_0x218a17(0x3e9,0x44c,0x3a2,0x428)]=_0x229a09['WCMsl'];const _0x50c5a2=document['createElem'+_0x218a17(0x435,0x409,0x467,0x433)](_0x229a09[_0x4d5dc8(0x549,0x3ca,0x483,0x468)]);_0x50c5a2['textConten'+'t']=_0x229a09[_0x218a17(0x4ab,0x4c2,0x40c,0x436)],_0x50c5a2[_0x4d5dc8(0x43e,0x52b,0x4b6,0x550)]=_0x229a09[_0x4d5dc8(0x54f,0x45d,0x4b2,0x528)];const _0x253b5c=document[_0x4d5dc8(0x434,0x413,0x482,0x435)+_0x4d5dc8(0x484,0x585,0x4c1,0x560)](_0x229a09[_0x4d5dc8(0x4dc,0x56f,0x590,0x641)]);_0x253b5c[_0x218a17(0x53f,0x3e3,0x513,0x489)+'r']=_0x229a09[_0x4d5dc8(0x5a0,0x518,0x560,0x5e3)],_0x253b5c[_0x218a17(0x4e0,0x389,0x3c5,0x428)]=_0x229a09[_0x218a17(0x4ee,0x43f,0x4fe,0x4ad)];const _0x24e88a=document[_0x4d5dc8(0x3bb,0x40d,0x482,0x477)+_0x218a17(0x39c,0x4bb,0x3a3,0x433)](_0x4d5dc8(0x460,0x4d6,0x4ba,0x4a1));_0x24e88a['className']=_0x229a09[_0x4d5dc8(0x459,0x50a,0x467,0x4ca)];const _0x81124f=document[_0x4d5dc8(0x404,0x4a6,0x482,0x461)+'ent'](_0x229a09['OWQyb']);_0x81124f[_0x218a17(0x3bd,0x48b,0x47a,0x428)]='st-chatu8-'+'popup-uplo'+_0x4d5dc8(0x56a,0x536,0x4f3,0x4a7);const _0x77518f=document[_0x218a17(0x3ec,0x345,0x468,0x3f4)+'ent'](_0x229a09[_0x4d5dc8(0x47d,0x48f,0x450,0x494)]);_0x77518f[_0x4d5dc8(0x45e,0x516,0x4e2,0x534)+'t']=_0x229a09[_0x218a17(0x42c,0x4d2,0x4c3,0x475)],_0x77518f[_0x4d5dc8(0x4d5,0x551,0x4b6,0x4f5)]='st-chatu8-'+_0x4d5dc8(0x3f5,0x495,0x44a,0x3e4)+_0x4d5dc8(0x486,0x53f,0x51f,0x4be);const _0x4fee28=document['createElem'+_0x4d5dc8(0x558,0x548,0x4c1,0x567)](_0x229a09[_0x218a17(0x537,0x4c6,0x50b,0x4ea)]);_0x4fee28[_0x218a17(0x3e0,0x417,0x454,0x3da)]=_0x4d5dc8(0x58d,0x5a5,0x57b,0x5ad),_0x4fee28[_0x4d5dc8(0x519,0x51d,0x58a,0x4ee)]=_0x229a09[_0x4d5dc8(0x3fd,0x439,0x426,0x48b)],_0x4fee28['multiple']=!![],_0x4fee28['style']['display']=_0x229a09['lRQCR'];const _0x307c89=document[_0x4d5dc8(0x3c7,0x430,0x482,0x3fe)+_0x4d5dc8(0x4f7,0x487,0x4c1,0x445)](_0x229a09[_0x218a17(0x37d,0x444,0x3a0,0x39d)]);_0x307c89['type']=_0x229a09[_0x4d5dc8(0x48e,0x454,0x42b,0x427)],_0x307c89['innerHTML']=_0x229a09['efQbK'],_0x307c89['className']=_0x229a09[_0x4d5dc8(0x596,0x4da,0x51b,0x4e7)],_0x307c89[_0x4d5dc8(0x519,0x3b6,0x46f,0x3c8)+_0x218a17(0x450,0x459,0x466,0x4aa)](_0x229a09[_0x4d5dc8(0x45a,0x495,0x4c7,0x489)],()=>_0x4fee28[_0x218a17(0x482,0x50d,0x50a,0x453)]()),_0x81124f['appendChil'+'d'](_0x77518f),_0x81124f[_0x4d5dc8(0x5b2,0x497,0x52d,0x5d9)+'d'](_0x307c89);const _0x520640=document[_0x218a17(0x36b,0x342,0x3c2,0x3f4)+_0x218a17(0x3cd,0x38c,0x3a5,0x433)](_0x229a09['OWQyb']);_0x520640[_0x218a17(0x38d,0x4be,0x4e5,0x428)]=_0x229a09[_0x4d5dc8(0x4ef,0x433,0x45b,0x480)];const _0x1ec947=document['createElem'+'ent'](_0x218a17(0x4ac,0x4a2,0x386,0x42c));_0x1ec947['textConten'+'t']=_0x229a09[_0x4d5dc8(0x58d,0x5b0,0x548,0x4b9)],_0x1ec947[_0x4d5dc8(0x401,0x46a,0x4b6,0x47e)]=_0x229a09[_0x4d5dc8(0x4cd,0x45b,0x420,0x49f)],_0x520640[_0x4d5dc8(0x498,0x583,0x52d,0x5c3)+'d'](_0x1ec947);function _0x35838a(){function _0x261682(_0x5b936b,_0x647707,_0x34083f,_0x58c022){return _0x4d5dc8(_0x5b936b-0x159,_0x5b936b,_0x34083f- -0x28b,_0x58c022-0x185);}function _0x362419(_0x226ff5,_0x302b90,_0x32faed,_0x473d18){return _0x218a17(_0x226ff5-0x133,_0x32faed,_0x32faed-0x5,_0x473d18- -0x2c8);}const _0x14e729={'qlJJh':function(_0x5b53f1,_0x651eed){return _0x5b53f1(_0x651eed);},'FtdJa':function(_0x2478f3){function _0x4696cf(_0x429e27,_0x324997,_0xab8ee0,_0x3ec078){return _0x3e20(_0x429e27-0x115,_0xab8ee0);}return _0x16d1c6[_0x4696cf(0x30e,0x335,0x2c4,0x380)](_0x2478f3);}};if(_0x16d1c6[_0x362419(0xfc,0x22f,0x26d,0x1bd)]===_0x16d1c6[_0x261682(0x1ce,0x1e7,0x206,0x276)])_0xb03dd8[_0x261682(0x2e0,0x32a,0x2e3,0x326)][_0x261682(0x21a,0x1f9,0x22c,0x2ee)](_0x261682(0x243,0x1e7,0x29c,0x2f8)),_0x16d1c6['mfvjB'](_0x15e1ec,()=>{_0x2d8651[_0x3f8358(0x4e6,0x43d,0x4c0,0x455)]();function _0x3f8358(_0x2e15ae,_0x1b4e2b,_0x30abcb,_0x4a835a){return _0x261682(_0x1b4e2b,_0x1b4e2b-0x1e0,_0x30abcb-0x24b,_0x4a835a-0xdb);}_0x14e729['qlJJh'](_0x4d34f3,_0x4713ff);},0x1203+0x2316+-0x3483);else{_0x520640['innerHTML']='';if(_0x16d1c6[_0x362419(0x2a6,0x20b,0x1fb,0x1e9)](_0x147112[_0x362419(0x1a4,0x152,0x12a,0x15f)],0xf3f+0x1*0x2e+0x167*-0xb)){const _0x408417=document[_0x362419(0x74,0x124,0xb8,0x12c)+'ent'](_0x16d1c6[_0x261682(0x323,0x36f,0x2cc,0x2bb)]);_0x408417[_0x362419(0x18a,0x14e,0x197,0x18c)+'t']=_0x16d1c6[_0x261682(0x28d,0x191,0x1fc,0x25d)],_0x408417[_0x362419(0x104,0xe2,0xd3,0x160)]=_0x16d1c6['cjzCf'],_0x520640[_0x261682(0x296,0x252,0x2a2,0x26c)+'d'](_0x408417);return;}_0x147112['forEach']((_0x42380f,_0xa22437)=>{const _0x756b05=document[_0x370082(0xd0,0x130,0x175,0x16a)+_0x370082(0x1c6,0x23a,0x163,0x1a9)](_0x16d1c6[_0x370082(0x2e3,0x269,0x2ab,0x23f)]);function _0x370082(_0x40871c,_0x454019,_0x3dfcd8,_0x55ed63){return _0x261682(_0x454019,_0x454019-0x1bd,_0x55ed63- -0x8d,_0x55ed63-0x1b6);}_0x756b05['className']=_0x16d1c6[_0x370082(0xe0,0x1db,0x1ed,0x1a3)];const _0x2f4de1=document[_0x4ad09e(-0x204,-0x131,-0xb0,-0x157)+_0x370082(0x1d6,0x10a,0x168,0x1a9)](_0x16d1c6[_0x4ad09e(-0x5a,-0x88,-0xdf,-0x82)]);_0x2f4de1[_0x4ad09e(-0x127,-0x17d,-0x79,-0x123)]=_0x16d1c6[_0x4ad09e(-0x154,-0x13d,-0xf3,-0x13e)];const _0x5eec71=document[_0x4ad09e(-0x185,-0x164,-0x1ec,-0x157)+'ent'](_0x16d1c6[_0x370082(0x26a,0x2f5,0x2f7,0x241)]);_0x5eec71[_0x4ad09e(-0xa0,-0x148,-0x18b,-0xe5)]=_0x42380f[_0x4ad09e(-0x164,-0x58,-0x21,-0xc5)];const _0x28f76e=document[_0x4ad09e(-0x208,-0x140,-0x10e,-0x157)+_0x4ad09e(-0xdc,-0xbe,-0x198,-0x118)](_0x4ad09e(-0x5b,-0x1c6,-0x141,-0x102));_0x28f76e[_0x4ad09e(-0x1b1,-0x217,-0x1c9,-0x171)]=_0x370082(0x13d,0x10a,0x13a,0x1bf),_0x28f76e[_0x4ad09e(-0x15e,-0x20e,-0x22f,-0x174)]='×',_0x28f76e[_0x370082(0x23a,0x1da,0xfc,0x19e)]=_0x16d1c6['GNisg'],_0x28f76e[_0x4ad09e(-0xd1,-0x1d0,-0x192,-0x16a)+_0x4ad09e(-0xfc,-0x15,-0x5e,-0xa1)](_0x370082(0x1c0,0x1cf,0x27d,0x1c9),_0x25d970=>{function _0x3e5ab5(_0x52010c,_0x1ae7d3,_0x20efcf,_0x1f829a){return _0x370082(_0x52010c-0x132,_0x20efcf,_0x20efcf-0x1f2,_0x1f829a-0x48);}_0x25d970[_0x3e5ab5(0x206,0x2aa,0x2d5,0x21e)+'ation'](),_0x147112['splice'](_0xa22437,-0x10b*0x1e+-0x907+0xd*0x31a);function _0x5f05a4(_0x40e5ee,_0x41909a,_0x4b760b,_0x13694f){return _0x4ad09e(_0x40e5ee-0x10f,_0x41909a-0x111,_0x4b760b,_0x41909a-0x79);}_0x14e729[_0x3e5ab5(0x2a8,0x203,0x1ea,0x28c)](_0x35838a);}),_0x2f4de1[_0x4ad09e(-0x14,-0xc5,-0x125,-0xac)+'d'](_0x5eec71),_0x2f4de1[_0x370082(0x166,0x1cd,0x1fa,0x215)+'d'](_0x28f76e);const _0x59b673=document[_0x4ad09e(-0x215,-0x125,-0x109,-0x157)+_0x370082(0x129,0x1a4,0x1e3,0x1a9)](_0x16d1c6[_0x4ad09e(-0x12f,-0x96,-0x10c,-0xf2)]);function _0x4ad09e(_0x525dd4,_0x2b5240,_0x15f071,_0x450b62){return _0x362419(_0x525dd4-0x7a,_0x2b5240-0x16b,_0x15f071,_0x450b62- -0x283);}_0x59b673[_0x370082(0x111,0x18f,0x151,0x150)]=_0x16d1c6['chcvK'],_0x59b673[_0x370082(0x146,0x249,0x2b9,0x1ff)+'r']='图'+_0x16d1c6[_0x370082(0xbc,0x185,0x99,0xf6)](_0xa22437,0x5ac+-0x27*-0x2+-0x5f9),_0x59b673['value']=_0x42380f[_0x370082(0x19c,0xe7,0xb2,0xed)]||'',_0x59b673['className']='st-chatu8-'+_0x4ad09e(-0x119,-0x41,-0xb1,-0xb3)+'name',_0x59b673[_0x370082(0x171,0x193,0x191,0x157)+_0x4ad09e(-0xd4,-0xea,-0x2a,-0xa1)](_0x16d1c6[_0x370082(0x20f,0x17b,0x17e,0x1cf)],_0x53200f=>{function _0x248f95(_0xcab0f6,_0xae3a07,_0xa55b20,_0x40bef5){return _0x4ad09e(_0xcab0f6-0x14a,_0xae3a07-0x1c1,_0xa55b20,_0xcab0f6- -0x6b);}function _0x4d2f02(_0xf6a1dd,_0x40c0ee,_0x86f0fe,_0x506495){return _0x370082(_0xf6a1dd-0xaf,_0x86f0fe,_0x86f0fe-0x36,_0x506495- -0x354);}_0x147112[_0xa22437][_0x248f95(-0x23f,-0x232,-0x2eb,-0x2db)]=_0x53200f['target'][_0x4d2f02(-0x1a7,-0xf4,-0x118,-0x16d)];}),_0x756b05[_0x4ad09e(-0xf2,-0xaa,-0x6a,-0xac)+'d'](_0x2f4de1),_0x756b05['appendChil'+'d'](_0x59b673),_0x520640['appendChil'+'d'](_0x756b05);});const _0x585d1f=document[_0x362419(0x8c,0xfc,0x18b,0x12c)+_0x362419(0x1ac,0x11b,0x210,0x16b)](_0x16d1c6[_0x362419(0x1dd,0x1cb,0x18f,0x201)]);_0x585d1f[_0x362419(0x1e4,0x1b0,0x14a,0x18c)+'t']=_0x362419(0x1a3,0x1c8,0x1f9,0x186)+_0x147112[_0x261682(0x28f,0x1da,0x22a,0x297)]+_0x261682(0x169,0x13c,0x18c,0x10c),_0x585d1f[_0x362419(0x114,0x168,0x217,0x160)]=_0x16d1c6[_0x261682(0x1f6,0x1e7,0x191,0x183)],_0x520640['appendChil'+'d'](_0x585d1f);}}_0x4fee28['addEventLi'+_0x4d5dc8(0x504,0x4bc,0x538,0x5e7)](_0x218a17(0x52f,0x511,0x55b,0x4d7),async _0x1688cc=>{const _0x5857a6={'vChyr':function(_0x4acb25,_0x88d080){return _0x4acb25===_0x88d080;},'Qavdv':_0x16d1c6['yXwBf'],'MdCoc':function(_0x4ae265,_0x46e89c){return _0x4ae265===_0x46e89c;},'nkfOg':function(_0x112d0c,_0x33f313){return _0x112d0c+_0x33f313;},'RaHAB':_0x41e63f(0x52f,0x529,0x5b5,0x67a),'cCWPv':_0x55a8e3(-0x262,-0x266,-0x1aa,-0x1cd),'STrRU':_0x16d1c6[_0x55a8e3(-0x201,-0x17a,-0x251,-0x1cf)],'oeudZ':function(_0x63e2ef){function _0x50572b(_0x35642d,_0x1ccd67,_0x3e4947,_0x2e4a4f){return _0x41e63f(_0x35642d-0x198,_0x1ccd67-0x12,_0x3e4947- -0x3df,_0x35642d);}return _0x16d1c6[_0x50572b(0x1e1,0x11d,0x199,0xea)](_0x63e2ef);}};function _0x41e63f(_0x31067c,_0x11d0f5,_0x20202f,_0x120f8b){return _0x218a17(_0x31067c-0x13e,_0x120f8b,_0x20202f-0x111,_0x20202f-0xc3);}function _0x55a8e3(_0x1d2e4e,_0x3979b4,_0x24ffc1,_0x4d1900){return _0x4d5dc8(_0x1d2e4e-0x1a6,_0x3979b4,_0x4d1900- -0x5e8,_0x4d1900-0x64);}if(_0x16d1c6[_0x41e63f(0x567,0x598,0x574,0x4fa)](_0x16d1c6[_0x41e63f(0x464,0x3cb,0x46e,0x50d)],_0x16d1c6[_0x41e63f(0x4c4,0x3fe,0x46e,0x4fb)])){const _0x287303=_0x1688cc[_0x55a8e3(-0x168,-0x1c8,-0x151,-0x17b)][_0x41e63f(0x4e5,0x47b,0x531,0x5ca)];if(!_0x287303||_0x16d1c6[_0x55a8e3(-0x166,-0x150,-0x26,-0xac)](_0x287303[_0x41e63f(0x59d,0x452,0x4ea,0x55e)],0x2205*0x1+0xf16*-0x1+0x12ef*-0x1))return;for(const _0x3d8c50 of _0x287303){if(_0x16d1c6[_0x41e63f(0x4bf,0x44a,0x4e3,0x52a)](_0x16d1c6[_0x55a8e3(-0x183,-0x158,-0x19c,-0xee)],_0x16d1c6[_0x41e63f(0x4f0,0x456,0x4ca,0x40f)])){if(!_0x3d8c50['type']['startsWith'](_0x16d1c6['MqjUa']))continue;try{const _0x597c12=await _0x777371(_0x3d8c50),_0x37cca0={};_0x37cca0[_0x41e63f(0x48b,0x50a,0x549,0x4b0)]=_0x597c12,_0x37cca0[_0x41e63f(0x4c2,0x470,0x43a,0x4cd)]='',_0x147112[_0x55a8e3(-0xd9,-0x8b,-0x124,-0x5f)](_0x37cca0);}catch(_0x56b81f){if(_0x16d1c6[_0x55a8e3(-0x59,-0x65,-0xdf,-0x112)](_0x16d1c6[_0x55a8e3(-0x184,-0x18b,-0xfc,-0x1bf)],_0x16d1c6[_0x41e63f(0x5c7,0x5fc,0x5a0,0x637)])){const _0x364b32=_0x41b065?function(){function _0x441617(_0x38352b,_0x15fb2d,_0x5be5e0,_0x2897af){return _0x41e63f(_0x38352b-0x199,_0x15fb2d-0x6,_0x38352b- -0x2d5,_0x5be5e0);}if(_0x513c87){const _0x136c2e=_0x5f0187[_0x441617(0x20d,0x20c,0x18f,0x2a8)](_0x54c099,arguments);return _0x241805=null,_0x136c2e;}}:function(){};return _0x5f14a5=![],_0x364b32;}else console[_0x41e63f(0x4ee,0x493,0x43f,0x393)]('[showUserD'+_0x41e63f(0x4db,0x4eb,0x55a,0x5cb)+']\x20Failed\x20t'+'o\x20read\x20ima'+'ge:',_0x56b81f);}}else{const _0x210314=_0x5857a6[_0x41e63f(0x56c,0x47d,0x4be,0x410)](typeof _0x215f08,_0x5857a6[_0x55a8e3(-0x109,-0x149,-0x163,-0x104)])?_0x22eec8:_0x3e10d0[_0x55a8e3(-0xd8,-0xb8,-0x191,-0xd4)],_0x2e00dc=_0x5857a6[_0x55a8e3(-0x79,-0x1c5,-0x96,-0x139)](typeof _0x1633d2,_0x55a8e3(-0x1b1,-0xa4,-0x12e,-0xfb))&&_0x61f07b[_0x41e63f(0x3dd,0x48b,0x43a,0x49e)]?_0x54e244[_0x41e63f(0x4c0,0x4f8,0x43a,0x45e)]:''+_0x2607d3+_0x5857a6[_0x55a8e3(-0x124,-0x12c,-0x178,-0xd8)](_0x2d4227,-0xe*0x25b+-0x1298+-0xa3*-0x51),_0x3ec409={};_0x3ec409[_0x55a8e3(-0x166,-0x23c,-0x1ec,-0x180)]=_0x5857a6[_0x55a8e3(-0x82,-0x2a,-0x160,-0xbe)],_0x3ec409['text']='['+_0x2e00dc+']',_0x568b27['push'](_0x3ec409);let _0x233d20=_0x210314;!_0x210314['startsWith'](_0x41e63f(0x3b9,0x3f2,0x441,0x3c7))&&(_0x233d20=_0x41e63f(0x469,0x3f4,0x461,0x50c)+_0x41e63f(0x4f4,0x3fc,0x4b2,0x44a)+'4,'+_0x210314);const _0x24a9d7={};_0x24a9d7[_0x55a8e3(-0x21f,-0x165,-0x1d4,-0x180)]=_0x5857a6[_0x41e63f(0x424,0x3db,0x483,0x402)],_0x24a9d7[_0x41e63f(0x3be,0x468,0x450,0x4d7)]={},_0x24a9d7[_0x41e63f(0x3be,0x468,0x450,0x4d7)]['url']=_0x233d20,_0x24a9d7[_0x41e63f(0x3be,0x468,0x450,0x4d7)][_0x41e63f(0x4ff,0x563,0x4b4,0x554)]=_0x5857a6['STrRU'],_0x1d6647[_0x55a8e3(0x5f,-0x126,-0x49,-0x5f)](_0x24a9d7);}}_0x35838a(),_0x4fee28[_0x41e63f(0x55c,0x5db,0x534,0x50b)]='';}else _0x2e06ea['stopPropag'+_0x55a8e3(-0x1b2,-0x198,-0x9b,-0x155)](),_0x470bf2[_0x55a8e3(-0x8b,-0xcb,-0x32,-0xc0)](_0x5c503a,0xd67+-0x8*-0x301+-0x256e),_0x5857a6[_0x41e63f(0x661,0x54b,0x5b1,0x610)](_0x398715);});function _0x777371(_0x18076f){return new Promise((_0x23271f,_0x3052a3)=>{const _0x15b2a2=new FileReader();function _0x1203fe(_0x442cf6,_0x29bf4a,_0x4bbf44,_0xeac08d){return _0x3e20(_0x442cf6-0x2c5,_0x4bbf44);}_0x15b2a2[_0x4ac9c9(0x3ff,0x348,0x419,0x44d)]=()=>_0x23271f(_0x15b2a2[_0x1203fe(0x39e,0x2ec,0x394,0x3af)]);function _0x4ac9c9(_0x1799ae,_0xd1295b,_0x3f5c4c,_0x4cff1a){return _0x3e20(_0x1799ae-0x32b,_0x3f5c4c);}_0x15b2a2[_0x4ac9c9(0x4e5,0x5a9,0x463,0x53b)]=_0x3052a3,_0x15b2a2['readAsData'+'URL'](_0x18076f);});}_0x24e88a['appendChil'+'d'](_0x81124f),_0x24e88a[_0x218a17(0x50b,0x4a8,0x422,0x49f)+'d'](_0x4fee28),_0x24e88a['appendChil'+'d'](_0x520640);const _0x7169d7=document['createElem'+_0x4d5dc8(0x3fd,0x4c8,0x4c1,0x426)](_0x229a09[_0x4d5dc8(0x408,0x469,0x483,0x478)]);function _0x4d5dc8(_0x77b08d,_0x4b1b74,_0x254aa9,_0x3c81aa){return _0x4f33d2(_0x254aa9-0x3f1,_0x4b1b74,_0x254aa9-0x1dc,_0x3c81aa-0x1a6);}_0x7169d7['className']=_0x229a09[_0x218a17(0x336,0x391,0x417,0x3e2)];const _0x43979e=document[_0x218a17(0x415,0x49d,0x4ba,0x3f4)+_0x218a17(0x40b,0x49d,0x4b6,0x433)](_0x229a09[_0x218a17(0x40e,0x457,0x2d9,0x39d)]);_0x43979e[_0x218a17(0x516,0x46d,0x404,0x454)+'t']='取消',_0x43979e[_0x4d5dc8(0x50a,0x3f0,0x4b6,0x4a1)]=_0x229a09[_0x4d5dc8(0x35f,0x489,0x413,0x4bc)];const _0x2f6938=document['createElem'+_0x218a17(0x3d4,0x3b2,0x410,0x433)](_0x229a09[_0x218a17(0x3c6,0x3a6,0x3f4,0x39d)]);_0x2f6938[_0x4d5dc8(0x4c2,0x449,0x4e2,0x5a5)+'t']=_0x229a09['pCQjT'],_0x2f6938['className']=_0x4d5dc8(0x4b7,0x423,0x4b3,0x4f1)+_0x218a17(0x38d,0x3b9,0x4a0,0x430)+'confirm';const _0x3d5b50=_0x1ed70b=>{function _0x4daa7f(_0x6d9031,_0x55458e,_0x1b8843,_0x386962){return _0x218a17(_0x6d9031-0xbe,_0x386962,_0x1b8843-0x1eb,_0x1b8843- -0x3d6);}function _0x4c3506(_0x317eb0,_0x2017a9,_0x521624,_0x2864b4){return _0x4d5dc8(_0x317eb0-0x157,_0x2017a9,_0x521624-0x48,_0x2864b4-0x1a5);}const _0x5b89eb={'AgYcm':function(_0x1d6f93,_0x1b4795){function _0x3fd3b5(_0x18d03e,_0x51b6ac,_0x36cf87,_0x4cc129){return _0x3e20(_0x51b6ac-0x10e,_0x4cc129);}return _0x229a09[_0x3fd3b5(0x3a5,0x308,0x25a,0x2e1)](_0x1d6f93,_0x1b4795);}};_0x5c443b[_0x4daa7f(0x47,0x5d,0x10a,0xaa)][_0x4c3506(0x4ab,0x5c0,0x4ff,0x4d9)](_0x229a09[_0x4daa7f(0x11d,0xab,0x6e,-0x2a)]),_0x229a09['CVYMd'](setTimeout,()=>{function _0x5d51e5(_0xd5ce7e,_0x47ac71,_0x3cf93e,_0x487dd9){return _0x4daa7f(_0xd5ce7e-0xae,_0x47ac71-0x189,_0x3cf93e-0x4e7,_0x47ac71);}_0x5c443b[_0x1fa70b(0x2b2,0x22d,0x2ba,0x249)]();function _0x1fa70b(_0x4fcef5,_0x520d62,_0xb848f9,_0x2d676e){return _0x4daa7f(_0x4fcef5-0x3f,_0x520d62-0x3c,_0x2d676e-0x1ad,_0x4fcef5);}_0x5b89eb[_0x5d51e5(0x52d,0x48e,0x510,0x594)](_0x15f888,_0x1ed70b);},0x2*0x414+0xa7c+0x1*-0x120e);};_0x43979e[_0x4d5dc8(0x4a4,0x51d,0x46f,0x4aa)+_0x4d5dc8(0x477,0x585,0x538,0x4b2)](_0x229a09[_0x4d5dc8(0x471,0x460,0x4c7,0x58d)],()=>_0x3d5b50(null)),_0x2f6938[_0x4d5dc8(0x452,0x466,0x46f,0x50c)+'stener'](_0x4d5dc8(0x577,0x49e,0x4e1,0x434),()=>_0x3d5b50({'text':_0x253b5c['value'][_0x218a17(0x3d4,0x50f,0x41b,0x44b)]()||'','images':[..._0x147112]}));const _0xd3262c=_0x55739e=>{function _0x5eac19(_0x571f5c,_0x3857cf,_0x4524e2,_0x3e553d){return _0x218a17(_0x571f5c-0xa9,_0x4524e2,_0x4524e2-0xe9,_0x571f5c- -0x3eb);}function _0x2d1961(_0x40af2b,_0x31eebd,_0x16524f,_0x438b6b){return _0x4d5dc8(_0x40af2b-0x1d,_0x438b6b,_0x31eebd- -0x286,_0x438b6b-0x9d);}if(_0x229a09['dYWzj'](_0x55739e['key'],_0x2d1961(0x2c8,0x289,0x289,0x282)))_0x229a09['zzxUy'](_0x3d5b50,null),document['removeEven'+_0x2d1961(0x32d,0x269,0x325,0x256)](_0x229a09[_0x5eac19(0x88,0xe4,0x73,0x4f)],_0xd3262c);else _0x229a09['dYWzj'](_0x55739e[_0x2d1961(0x2d7,0x211,0x2cb,0x207)],_0x229a09['KJCLT'])&&_0x55739e[_0x5eac19(0x44,0x49,0x3,0xf2)]&&(_0x3d5b50({'text':_0x253b5c['value'][_0x2d1961(0x2d1,0x253,0x2e3,0x2b4)]()||'','images':[..._0x147112]}),document[_0x5eac19(0xf9,0x89,0x157,0xaf)+'tListener'](_0x229a09[_0x5eac19(0x88,0xee,0x1,0x63)],_0xd3262c));};document[_0x4d5dc8(0x3a9,0x436,0x46f,0x3fb)+_0x4d5dc8(0x529,0x58a,0x538,0x5c4)](_0x229a09[_0x218a17(0x4a8,0x407,0x3e1,0x473)],_0xd3262c),_0x7169d7[_0x4d5dc8(0x505,0x5f0,0x52d,0x5e9)+'d'](_0x43979e),_0x7169d7[_0x4d5dc8(0x55f,0x4db,0x52d,0x53a)+'d'](_0x2f6938),_0x4ef04a['appendChil'+'d'](_0x21bb5d),_0x4ef04a[_0x4d5dc8(0x540,0x5c0,0x52d,0x55c)+'d'](_0x50c5a2),_0x4ef04a[_0x218a17(0x410,0x55b,0x40c,0x49f)+'d'](_0x253b5c),_0x4ef04a['appendChil'+'d'](_0x24e88a),_0x4ef04a['appendChil'+'d'](_0x7169d7),_0x5c443b[_0x4d5dc8(0x563,0x4f3,0x52d,0x545)+'d'](_0x4ef04a),document[_0x218a17(0x343,0x2e6,0x3da,0x3a1)][_0x218a17(0x491,0x51c,0x4ec,0x49f)+'d'](_0x5c443b),setTimeout(()=>_0x253b5c[_0x4d5dc8(0x59e,0x498,0x556,0x612)](),0x1042+-0xf52+-0x8c);});}export async function handlePromptRequest(_0x57efa7,_0x1427f7){const _0x3d5ce8={'gDsgh':_0x46363d(0x30c,0x395,0x37b,0x38e)+'ngs-holder','UCggl':function(_0x31150d,_0x225c87){return _0x31150d+_0x225c87;},'IFTON':function(_0x1733dc,_0x4cc8f7){return _0x1733dc*_0x4cc8f7;},'Fnekd':function(_0x11588f,_0x3cf241){return _0x11588f-_0x3cf241;},'bqGMK':function(_0x4e98b7,_0x320b70){return _0x4e98b7-_0x320b70;},'tqOzo':function(_0x35dcd7,_0x566516){return _0x35dcd7(_0x566516);},'APajh':_0x46363d(0x339,0x3c9,0x3c9,0x3d5)+_0x56b6b0(0x2e0,0x21d,0x371,0x39d)+'_complete','lhOdQ':function(_0x4ec140,_0x671197){return _0x4ec140!==_0x671197;},'rtNpD':_0x46363d(0x473,0x3f6,0x3b1,0x3ec),'jvfAB':function(_0x45bae9,_0x25a3be,_0x3e3e5b){return _0x45bae9(_0x25a3be,_0x3e3e5b);},'SHdYp':'text','OrKCk':_0x46363d(0x3ca,0x3cf,0x398,0x406)+'emandPopup'+_0x46363d(0x524,0x473,0x525,0x46c)+_0x56b6b0(0x25b,0x2cd,0x2c1,0x1bd)+_0x46363d(0x4a9,0x499,0x512,0x50f),'bZjyl':function(_0x3fc1b7,_0x32f83f){return _0x3fc1b7===_0x32f83f;},'rXLCE':_0x46363d(0x331,0x3b7,0x43f,0x387),'lwExU':function(_0x252bd8,_0x53c365){return _0x252bd8===_0x53c365;},'sTaul':_0x46363d(0x49b,0x444,0x45d,0x3ed),'dnQDP':_0x56b6b0(0x19b,0x13d,0x1de,0x218),'nIIbo':function(_0x198d1b,_0xab6ba5){return _0x198d1b===_0xab6ba5;},'akZQP':_0x46363d(0x370,0x428,0x3ec,0x448),'Qeyeq':_0x56b6b0(0x2b8,0x210,0x300,0x33f),'wNmms':_0x56b6b0(0x1aa,0x1aa,0x11d,0x106),'HUvGj':_0x46363d(0x310,0x3b0,0x3fd,0x3f2),'vWQuj':function(_0x3208f7,_0xfaf24){return _0x3208f7===_0xfaf24;},'dFwZQ':_0x56b6b0(0x295,0x354,0x2eb,0x1f1),'HPCxC':_0x56b6b0(0x2bf,0x317,0x1fb,0x2fc),'dLbQs':function(_0x1bd057,_0x5e2027){return _0x1bd057===_0x5e2027;},'aXEWf':_0x56b6b0(0x1d7,0x272,0x294,0x1c1),'JjGBG':function(_0x3155ce,_0x22798b){return _0x3155ce-_0x22798b;},'dJNJm':function(_0x3e5f38,_0x45308e){return _0x3e5f38>=_0x45308e;},'RbWBa':function(_0x2b5a4e,_0x422b81){return _0x2b5a4e===_0x422b81;},'gwWXk':'user','AelNo':function(_0x1873a9,_0x4ab29d,_0x54fe98){return _0x1873a9(_0x4ab29d,_0x54fe98);},'MXFDc':function(_0x3873d5,_0x37d837){return _0x3873d5(_0x37d837);},'PTBFy':function(_0x534dcf,_0x785997){return _0x534dcf===_0x785997;},'TlnWN':_0x46363d(0x466,0x4de,0x499,0x513),'aiNMa':function(_0x143188,_0x151b18){return _0x143188===_0x151b18;},'UBvgs':_0x56b6b0(0x1c0,0x1e4,0x259,0x1b1),'geuvg':function(_0x269da6,_0x28a374,_0x975d7c,_0x200edf,_0x5c8ced){return _0x269da6(_0x28a374,_0x975d7c,_0x200edf,_0x5c8ced);},'Qkuvo':function(_0x3f0bc5){return _0x3f0bc5();},'tmpHk':_0x46363d(0x2ec,0x398,0x3c5,0x35a)+_0x46363d(0x39b,0x452,0x3a0,0x3ad)+'片失败:','dZDSS':'[promptReq'+']\x20加载\x20ifram'+'e\x20模块失败:','upmlN':_0x46363d(0x478,0x3f3,0x33f,0x334),'Fqwyp':function(_0x2dff27,_0xd3d605){return _0x2dff27===_0xd3d605;},'PtySE':_0x46363d(0x400,0x3b1,0x362,0x46f),'ynjjB':_0x56b6b0(0x1f0,0x170,0x2b3,0x288),'RsVzp':_0x56b6b0(0x1d0,0x24d,0x14e,0x18e)+']\x20自动点击任务已被'+'取消','iYhbc':_0x56b6b0(0x19f,0x14a,0x1f1,0x23d),'qDODv':'GhjzN','BxYmF':function(_0x5115db){return _0x5115db();},'QxUYr':_0x56b6b0(0x26a,0x282,0x320,0x23c),'WgLnK':_0x46363d(0x2f8,0x376,0x37f,0x348)+_0x46363d(0x42a,0x374,0x30a,0x35b),'NHAEV':function(_0x15e2ac,_0x1e976d){return _0x15e2ac===_0x1e976d;},'nvmAt':_0x46363d(0x3fa,0x3c5,0x440,0x41e),'DiJne':function(_0x34ef8f,_0x198b08){return _0x34ef8f(_0x198b08);},'woAbM':function(_0x16b953,_0x1d2af4){return _0x16b953>_0x1d2af4;},'VFpVi':function(_0x4fdefa,_0xb91ff0){return _0x4fdefa===_0xb91ff0;},'tWqDP':_0x56b6b0(0x293,0x241,0x34d,0x243),'shRlD':_0x46363d(0x557,0x4dd,0x419,0x58d),'rmvne':function(_0x3354d9,_0x206eec){return _0x3354d9===_0x206eec;},'NNOfu':'KpkZj','CknMo':'buHbC','Wnzym':'rkrXI','KEzYy':_0x46363d(0x409,0x37b,0x328,0x41c),'vZwZk':function(_0x5b296f,_0x533096){return _0x5b296f(_0x533096);},'MQbUk':_0x56b6b0(0x231,0x186,0x1eb,0x284),'lxcje':'{{getvar::'+_0x56b6b0(0x2a8,0x23e,0x360,0x28e),'zqcoq':_0x56b6b0(0x317,0x2ae,0x2e2,0x3ce),'ZlDRV':'{{角色启用列表}}','hrpkO':_0x46363d(0x3ed,0x3dd,0x36b,0x3ad)+'}}','eBeOg':_0x46363d(0x44e,0x49b,0x482,0x532)+'}}','yuhRw':_0x56b6b0(0x235,0x1c0,0x2cc,0x2df),'ueQHv':function(_0x57ab38,_0x5afceb,_0x40c66e){return _0x57ab38(_0x5afceb,_0x40c66e);},'VbRPR':function(_0x1946e0,_0x5f0341){return _0x1946e0>_0x5f0341;},'Yuuod':function(_0x51254b,_0xfc5625){return _0x51254b===_0xfc5625;},'bhumf':'OmgRE','lHsNz':_0x56b6b0(0x24f,0x2c0,0x2cb,0x264),'GeMqq':function(_0x13698d,_0x2395b8,_0x4ccd6f,_0x18f0cc,_0x5a6ac5){return _0x13698d(_0x2395b8,_0x4ccd6f,_0x18f0cc,_0x5a6ac5);},'bPwYr':_0x46363d(0x416,0x3ad,0x419,0x32e),'WkBMZ':_0x46363d(0x436,0x38c,0x347,0x3e5),'WqPdn':function(_0x5a2dd1,_0xee5fcd){return _0x5a2dd1!==_0xee5fcd;},'STwTy':_0x46363d(0x3c0,0x3f8,0x3f9,0x38c),'ZDKEi':function(_0x41a332,_0x364ece){return _0x41a332>_0x364ece;},'QjRmm':_0x46363d(0x42a,0x43d,0x376,0x502)+_0x56b6b0(0x1bc,0x18d,0x1b3,0x164),'OFpeq':_0x56b6b0(0x1f9,0x206,0x1ac,0x13c)+_0x46363d(0x3d8,0x401,0x47a,0x3af)+_0x46363d(0x459,0x408,0x473,0x41e)+_0x56b6b0(0x1da,0x119,0x24b,0x143),'wRPEq':function(_0x2594bf,_0x536ed0,_0x2b0ee6){return _0x2594bf(_0x536ed0,_0x2b0ee6);},'qpJrF':function(_0x1246f,_0x590ff0){return _0x1246f>_0x590ff0;},'ByxDi':function(_0x36857f,_0x44e32c,_0x59c5fa){return _0x36857f(_0x44e32c,_0x59c5fa);},'MdBuV':function(_0x485773,_0x4530e8){return _0x485773===_0x4530e8;},'sAPbt':_0x46363d(0x36b,0x391,0x447,0x31d),'tIhmI':_0x46363d(0x546,0x4e3,0x5a2,0x444),'lTHAt':_0x56b6b0(0x1b9,0x1d0,0x144,0x244)+_0x56b6b0(0x31d,0x34e,0x314,0x2df)+_0x46363d(0x477,0x49c,0x541,0x425),'xzvbm':function(_0x29329b,_0x58c908,_0x199947){return _0x29329b(_0x58c908,_0x199947);}},_0xe5d936=extension_settings[extensionName]?.[_0x56b6b0(0x1e7,0x1a7,0x1eb,0x1c4)+_0x56b6b0(0x300,0x26d,0x24d,0x29c)+'d']??![];let _0x48b06b='',_0x5eaaeb=[];if(_0xe5d936){if(_0x3d5ce8[_0x46363d(0x493,0x4a5,0x52a,0x404)](_0x3d5ce8[_0x46363d(0x34c,0x40f,0x42c,0x419)],_0x3d5ce8['qDODv'])){const _0x544b26=await _0x3d5ce8[_0x56b6b0(0x31a,0x3c1,0x2f1,0x30f)](showUserDemandPopup);if(_0x3d5ce8['aiNMa'](_0x544b26,null)){if(_0x3d5ce8[_0x46363d(0x446,0x491,0x4fd,0x489)]===_0x46363d(0x377,0x432,0x4e5,0x4e8)){toastr['info'](_0x46363d(0x39f,0x3a6,0x458,0x334));return;}else _0xeeb7d5[_0x5526ae][_0x46363d(0x3ae,0x35c,0x3bc,0x3fa)]=_0x2b38d8['target']['value'];}_0x48b06b=_0x544b26[_0x46363d(0x463,0x4d7,0x510,0x463)]||extension_settings[extensionName]?.[_0x56b6b0(0x1bd,0x273,0x20a,0x24f)+'geDemand']||'',_0x5eaaeb=_0x544b26['images']||[];}else{const _0x1c0b92=_0x26414c['querySelec'+_0x56b6b0(0x31c,0x29c,0x2b1,0x3ca)](_0x3d5ce8[_0x46363d(0x45b,0x434,0x436,0x40f)]);if(_0x1c0b92){const _0x5a7562=_0x1c0b92[_0x56b6b0(0x25a,0x207,0x2e5,0x268)+_0x46363d(0x498,0x486,0x496,0x47b)+'t']();_0x5c8001=_0x539b06[_0x56b6b0(0x21b,0x209,0x1dd,0x2b2)](-0x765+0x19e9+0x127a*-0x1,_0x440e24[_0x56b6b0(0x309,0x3cb,0x2b7,0x302)](_0x3d5ce8['UCggl'](_0x5a7562[_0x46363d(0x3f4,0x42b,0x45e,0x4c5)],0x27*0xe+0x1867+0x15*-0x143),_0x3d5ce8[_0x46363d(0x484,0x4e6,0x499,0x4ef)](_0x17573b[_0x56b6b0(0x2d5,0x29d,0x26a,0x31d)+'t'],0xa*-0x41+0x26*-0xd4+0x2202+0.5)));}const _0x482f85=_0x18757a[_0x46363d(0x3d3,0x3e3,0x34c,0x394)](0x13c8+0x52*-0x75+0x127a,_0x3d5ce8[_0x46363d(0x375,0x3e1,0x397,0x465)](_0x3d5ce8[_0x46363d(0x3af,0x41f,0x4d4,0x4a4)](_0x4669d0[_0x56b6b0(0x2d5,0x369,0x38a,0x30f)+'t'],_0x947f2e),-0xfa7*0x1+0xad8*0x1+0x4e3));_0x1c252d=_0x482f85+'px';}}else _0x48b06b=extension_settings[extensionName]?.['defaultIma'+_0x46363d(0x4c4,0x44c,0x396,0x3c6)]||'';toastr[_0x46363d(0x3f1,0x42a,0x48b,0x3a5)](_0x3d5ce8[_0x56b6b0(0x1b2,0x1f6,0x1e9,0x151)]);let _0x342f6c=getContext();const _0x225a5b=(extension_settings[extensionName]?.[_0x56b6b0(0x297,0x2fb,0x2b5,0x344)+'y_depth']??0x179c+-0x239d+0x1*0xc03)+(-0x215a+-0x23a1+-0x113f*-0x4),_0x103ca9=await getElContext(_0x57efa7,_0x225a5b),_0x255e98=_0x103ca9[_0x103ca9['length']-(0x1c96+0x1361+-0x2ff6)];let _0x1cc006='';if(_0x103ca9){if(_0x3d5ce8[_0x46363d(0x445,0x4ac,0x3eb,0x48d)](_0x3d5ce8[_0x56b6b0(0x21d,0x22c,0x27a,0x1b3)],_0x3d5ce8[_0x56b6b0(0x21d,0x2e3,0x18d,0x298)])){const _0xe4d0c7=_0x48b06b?[..._0x103ca9,_0x48b06b]:_0x103ca9;_0x1cc006=await _0x3d5ce8[_0x56b6b0(0x29a,0x24f,0x221,0x2af)](processWorldBooksWithTrigger,_0xe4d0c7);if(_0x1cc006){}}else _0x3d5ce8[_0x46363d(0x3f6,0x35e,0x405,0x364)](_0x42eaf0,{'text':_0x470e20['value'][_0x46363d(0x37f,0x430,0x46a,0x45c)]()||'','images':[..._0x1539d3]}),_0x37a6bf['removeEven'+'tListener'](_0x46363d(0x2b7,0x368,0x343,0x300),_0x380603);}let _0x5cc3f2=_0x342f6c[_0x56b6b0(0x2cd,0x22c,0x2f7,0x2d0)+'ta'][_0x56b6b0(0x197,0x181,0x151,0x13b)]||{};const _0x3cac03=_0x103ca9&&_0x3d5ce8[_0x56b6b0(0x288,0x214,0x287,0x291)](_0x103ca9[_0x46363d(0x3f4,0x40c,0x3a9,0x494)],-0x1ca5+0x5*0x14d+-0x1625*-0x1)?_0x103ca9[_0x46363d(0x3dd,0x3d5,0x399,0x34b)](0x6ef+-0x1223+0xb34,-(-0x489+0x3ed+-0x9d*-0x1)):[],_0x4daeba=[];_0x48b06b&&(_0x3d5ce8[_0x46363d(0x35a,0x366,0x2e8,0x2cb)](_0x56b6b0(0x205,0x161,0x1a5,0x167),_0x3d5ce8[_0x46363d(0x3ae,0x39e,0x3ca,0x2e1)])?(_0x553124['completeTa'+'sk'](_0x22dc6c,_0x410a9d['success']!==![]),_0x336df1[_0x56b6b0(0x204,0x176,0x18a,0x1ff)+_0x46363d(0x4e7,0x479,0x3c1,0x4aa)](_0x3d5ce8[_0x46363d(0x2cb,0x379,0x38f,0x2f6)],_0xbfd197),_0x5e7e93['autoClickT'+_0x56b6b0(0x258,0x19c,0x301,0x2b5)]=null,_0x3d5ce8[_0x46363d(0x528,0x4a5,0x563,0x54a)](_0x593267[_0x83a8e9]?.[_0x46363d(0x48b,0x43f,0x394,0x497)+'ji2'],_0x3d5ce8['rtNpD'])&&_0x3d5ce8[_0x46363d(0x412,0x4bf,0x533,0x4bf)](_0xee5df9,()=>{function _0x3e618a(_0x1f489e,_0x147aa4,_0x5ccd7c,_0x5baf23){return _0x56b6b0(_0x5baf23- -0x1c3,_0x147aa4-0x2d,_0x5ccd7c,_0x5baf23-0x149);}_0x539565[_0x3e618a(-0x4,0x16c,0x20,0xb4)+'ji']=![];},0x40b+0x2*-0x955+0x1*0x2227)):_0x4daeba[_0x46363d(0x57f,0x4e0,0x502,0x4c0)](_0x48b06b));if(_0x255e98){if(_0x3d5ce8[_0x46363d(0x402,0x4a5,0x45d,0x55e)](_0x3d5ce8[_0x56b6b0(0x1f1,0x183,0x1fc,0x215)],_0x3d5ce8[_0x56b6b0(0x1f1,0x271,0x23e,0x1c8)]))return _0x1e0395;else _0x4daeba[_0x56b6b0(0x318,0x2f9,0x285,0x347)](_0x255e98);}function _0x56b6b0(_0x204548,_0x3bddb4,_0x10eae1,_0x216fc0){return _0x3e20(_0x204548-0xf3,_0x10eae1);}const _0x41fc87=_0x4daeba[_0x56b6b0(0x1f2,0x24c,0x16c,0x15e)]('\x0a'),_0x4ace04=[];if(_0x48b06b){if(_0x3d5ce8[_0x56b6b0(0x299,0x355,0x1e5,0x210)](_0x46363d(0x4ab,0x4d5,0x4ab,0x579),_0x3d5ce8[_0x46363d(0x3cb,0x3c2,0x3c6,0x444)])){const _0x45ab46={};_0x45ab46[_0x56b6b0(0x1f7,0x26f,0x1f0,0x21b)]=_0x3d5ce8['SHdYp'],_0x45ab46[_0x56b6b0(0x30f,0x35e,0x35e,0x2f8)]=_0x56b6b0(0x2c4,0x33c,0x28d,0x369)+_0x80d4d9[_0x56b6b0(0x244,0x2c1,0x240,0x214)]+'张'+_0x450179+']',_0xd95923[_0x56b6b0(0x318,0x2de,0x3d1,0x360)](_0x45ab46);}else _0x4ace04[_0x56b6b0(0x318,0x321,0x322,0x3c2)](_0x48b06b);}_0x103ca9&&_0x3d5ce8['woAbM'](_0x103ca9[_0x56b6b0(0x244,0x204,0x1bd,0x242)],0xb2a+0x1e79+0xde1*-0x3)&&(_0x3d5ce8[_0x46363d(0x3b6,0x38b,0x424,0x2e9)]===_0x3d5ce8[_0x56b6b0(0x306,0x25f,0x395,0x3b4)]?_0x59096f[_0x46363d(0x2a1,0x361,0x3fc,0x3f7)](_0x3d5ce8[_0x56b6b0(0x1d4,0x17d,0x150,0x270)],_0x2bcfd6):_0x4ace04['push'](_0x103ca9[_0x46363d(0x319,0x3ba,0x33e,0x3e1)]('\x0a')));if(_0x1cc006){if(_0x3d5ce8['NHAEV'](_0x3d5ce8['KEzYy'],_0x56b6b0(0x198,0x195,0x1f7,0x11e))){const _0x59800e=_0x370b93[_0x56b6b0(0x23c,0x2c0,0x185,0x265)](_0x192f3f,arguments);return _0x5727e2=null,_0x59800e;}else _0x4ace04[_0x46363d(0x474,0x4e0,0x501,0x4b5)](_0x1cc006);}function _0x46363d(_0x2240eb,_0x31bd80,_0x1fd0e8,_0x1bcea6){return _0x3e20(_0x31bd80-0x2bb,_0x1fd0e8);}const _0x4f45fa=_0x4ace04['join']('\x0a');let _0x463bb8=buildPromptForRequestType(_0x56b6b0(0x213,0x1c0,0x23a,0x251),_0x41fc87);const _0x116e2c=_0x3d5ce8[_0x56b6b0(0x2e1,0x225,0x34e,0x261)](generateCharacterListText,_0x4f45fa),_0xcb4c25=generateOutfitEnableListText(),_0x3f597e=_0x3d5ce8['BxYmF'](generateCommonCharacterListText),_0x1de378=[_0x46363d(0x394,0x413,0x399,0x494),_0x3d5ce8[_0x46363d(0x35b,0x399,0x39a,0x444)],_0x3d5ce8[_0x56b6b0(0x22c,0x1bb,0x21d,0x1c9)],_0x3d5ce8[_0x56b6b0(0x2f1,0x309,0x243,0x321)],_0x3d5ce8[_0x46363d(0x3bd,0x392,0x31a,0x354)],_0x3d5ce8['hrpkO'],_0x3d5ce8['eBeOg'],_0x3d5ce8[_0x46363d(0x3d7,0x39b,0x441,0x41c)]];_0x463bb8=mergeAdjacentMessages(_0x463bb8);const _0x4cea1a={'context':_0x3cac03[_0x46363d(0x417,0x3ba,0x3a1,0x391)]('\x0a'),'body':_0x255e98,'worldBookContent':_0x1cc006,'variables':_0x5cc3f2,'userDemand':_0x48b06b,'characterListText':_0x116e2c,'outfitEnableListText':_0xcb4c25,'commonCharacterListText':_0x3f597e},{messages:_0x580374,replacedVariables:_0x29f591}=_0x3d5ce8[_0x56b6b0(0x1a4,0x223,0x185,0x17e)](replaceAllPlaceholders,_0x463bb8,_0x4cea1a);_0x463bb8=_0x580374;function _0x4ea52e(_0x1ba654,_0x758efa,_0x40df08,_0x116d22='参考图片'){function _0x1dd90f(_0x22b161,_0x3c41dd,_0x51a105,_0x6fb69d){return _0x56b6b0(_0x51a105- -0x43b,_0x3c41dd-0x1e0,_0x3c41dd,_0x6fb69d-0x1a0);}function _0x29a66e(_0x3ddffd,_0x1b6918,_0x46626e,_0xa087de){return _0x46363d(_0x3ddffd-0x8,_0xa087de- -0x5e3,_0x3ddffd,_0xa087de-0x1c9);}if(_0x3d5ce8[_0x29a66e(-0xf1,-0x1a5,-0x1cc,-0x1ac)](_0x3d5ce8[_0x29a66e(-0x2b0,-0x1d3,-0x29f,-0x223)],_0x3d5ce8[_0x29a66e(-0x1b3,-0xc4,-0x1b1,-0x159)]))return;else{if(!_0x40df08||_0x3d5ce8[_0x1dd90f(-0x1db,-0x1d0,-0x248,-0x28f)](_0x40df08[_0x29a66e(-0x1e4,-0x1d1,-0x1f4,-0x1d7)],0x27*-0x7d+0x5*-0x89+0x15b8)||_0x758efa<-0x1*-0xbbc+-0x1d37+0x117b||_0x758efa>=_0x1ba654[_0x29a66e(-0x15a,-0x22e,-0x165,-0x1d7)])return _0x3d5ce8[_0x29a66e(-0x16c,-0x17f,-0x269,-0x228)](_0x3d5ce8['aXEWf'],_0x3d5ce8[_0x1dd90f(-0x1b9,-0x156,-0x214,-0x25f)])?_0x1ba654:_0xc1237a;const _0x3d1993=[..._0x1ba654],_0x49bafa=_0x3d1993[_0x758efa],_0x339ecc=[];if(_0x3d5ce8['vWQuj'](typeof _0x49bafa[_0x29a66e(-0x25e,-0x310,-0x2af,-0x256)],_0x1dd90f(-0x2e5,-0x19e,-0x24c,-0x2db))){const _0x380333={};_0x380333[_0x29a66e(-0x1a7,-0x271,-0x2e8,-0x224)]=_0x1dd90f(-0xe1,-0xaa,-0x12c,-0x1ab),_0x380333[_0x29a66e(-0x99,-0xce,-0x80,-0x10c)]=_0x49bafa[_0x1dd90f(-0x315,-0x1f2,-0x276,-0x1fb)],_0x339ecc[_0x29a66e(-0xa6,-0x18c,-0x13b,-0x103)](_0x380333);}else Array['isArray'](_0x49bafa['content'])&&_0x339ecc['push'](..._0x49bafa['content']);if(_0x40df08['length']>-0x629+-0x2a*-0x76+-0xd33){const _0x493306={};_0x493306[_0x1dd90f(-0x2b1,-0x27f,-0x244,-0x2a5)]=_0x3d5ce8[_0x1dd90f(-0x247,-0x1df,-0x266,-0x1af)],_0x493306['text']=_0x1dd90f(-0x17b,-0x228,-0x177,-0x220)+_0x40df08[_0x1dd90f(-0x1e2,-0x245,-0x1f7,-0x1b2)]+'张'+_0x116d22+']',_0x339ecc[_0x1dd90f(-0x1d3,-0x1d0,-0x123,-0x17a)](_0x493306);}_0x40df08['forEach']((_0x31d5b5,_0x4436bd)=>{function _0x516f66(_0x16b6e4,_0x1a26d5,_0x35a723,_0x3ac462){return _0x1dd90f(_0x16b6e4-0x148,_0x1a26d5,_0x3ac462-0x28c,_0x3ac462-0x1ba);}const _0x1e511c=_0x3d5ce8['bZjyl'](typeof _0x31d5b5,_0x3d5ce8[_0x516f66(0x10e,0x15a,0x1a3,0x155)])?_0x31d5b5:_0x31d5b5['base64'],_0x3083e7=_0x3d5ce8[_0x516f66(0x2d,0x6e,0x126,0xe9)](typeof _0x31d5b5,_0x3d5ce8[_0x47a56a(0x14b,0x143,0x1af,0x1b3)])&&_0x31d5b5[_0x516f66(-0x61,-0x1c,-0x79,-0x1b)]?_0x31d5b5[_0x516f66(0xd,0x95,0x33,-0x1b)]:''+_0x116d22+(_0x4436bd+(0x2f*0x5e+0x133f*0x1+-0x20*0x124)),_0x30f85a={};_0x30f85a[_0x516f66(0x31,0xa5,0x6a,0x48)]=_0x3d5ce8[_0x47a56a(0xc3,0x123,0x1e0,0x177)],_0x30f85a[_0x516f66(0x149,0x110,0xc0,0x160)]='['+_0x3083e7+']',_0x339ecc['push'](_0x30f85a);function _0x47a56a(_0x56d554,_0x1c7077,_0xc4e442,_0x10e7b3){return _0x29a66e(_0x56d554,_0x1c7077-0x1e0,_0xc4e442-0x15a,_0x1c7077-0x369);}let _0x155ded=_0x1e511c;!_0x1e511c[_0x47a56a(0x8e,0x151,0xc0,0xa3)](_0x3d5ce8[_0x47a56a(0x1a2,0x241,0x1b7,0x2a4)])&&(_0x3d5ce8['nIIbo'](_0x3d5ce8[_0x516f66(0x97,0x1d3,0x181,0x156)],_0x3d5ce8['Qeyeq'])?_0x3c5f09[_0x516f66(0x15f,0x129,0x1e4,0x169)](_0x13fe69):_0x155ded='data:image'+'/png;base6'+'4,'+_0x1e511c);const _0x197e8c={};_0x197e8c[_0x47a56a(0xd2,0x145,0x12b,0x124)]=_0x3d5ce8[_0x516f66(0x65,0xfd,0x190,0x116)],_0x197e8c[_0x516f66(0x72,0xc1,-0x6d,-0x5)]={},_0x197e8c[_0x516f66(0x72,0xc1,-0x6d,-0x5)][_0x47a56a(0x1ae,0x19f,0x1db,0x212)]=_0x155ded,_0x197e8c[_0x516f66(0x72,0xc1,-0x6d,-0x5)][_0x516f66(0xb,-0x39,-0x51,0x5f)]=_0x3d5ce8[_0x47a56a(0x160,0x16f,0xf3,0x20a)],_0x339ecc['push'](_0x197e8c);});const _0x5b733e={..._0x49bafa};return _0x5b733e['content']=_0x339ecc,_0x3d1993[_0x758efa]=_0x5b733e,_0x3d1993;}}function _0x35da20(_0x1ddce9){function _0x18e88a(_0x541693,_0x4db311,_0x1e2124,_0x174cfc){return _0x56b6b0(_0x541693- -0x145,_0x4db311-0x172,_0x1e2124,_0x174cfc-0xef);}for(let _0x3dc7e7=_0x3d5ce8[_0x18e88a(0x19e,0x141,0x265,0xf4)](_0x1ddce9[_0x5a1d4e(0x2ec,0x31e,0x2a9,0x2d8)],-0x1339+0x1c1d+-0x8e3);_0x3d5ce8[_0x18e88a(0x14c,0xf0,0xb5,0x11e)](_0x3dc7e7,0x121c+0x1384+-0x25a0);_0x3dc7e7--){if(_0x3d5ce8[_0x18e88a(0x175,0x15b,0x216,0x183)](_0x1ddce9[_0x3dc7e7][_0x18e88a(0x13b,0x10c,0xf9,0xca)],_0x3d5ce8[_0x5a1d4e(0x368,0x30b,0x2f4,0x2c2)]))return _0x3dc7e7;}function _0x5a1d4e(_0x5c4bc8,_0x554bfe,_0x5823e5,_0x4d6a86){return _0x56b6b0(_0x5c4bc8-0xa8,_0x554bfe-0xec,_0x4d6a86,_0x4d6a86-0x1ba);}return-(0xd4a*-0x2+-0x2405+0x3e9a);}const _0x343840=_0x35da20(_0x463bb8);if(_0x3d5ce8[_0x56b6b0(0x2bd,0x2a2,0x237,0x21d)](_0x5eaaeb[_0x56b6b0(0x244,0x1a7,0x267,0x1d5)],0xd96+0x737*-0x2+0xd8)&&_0x343840>=-0x5f2*-0x2+-0x2*-0x583+-0x16ea){if(_0x3d5ce8[_0x46363d(0x4b8,0x42f,0x3ba,0x495)](_0x3d5ce8['bhumf'],_0x3d5ce8['lHsNz'])){if(_0x10fb63){const _0x4608bc=_0x4edfaa[_0x56b6b0(0x23c,0x246,0x198,0x27e)](_0x9d2ac5,arguments);return _0x18dc15=null,_0x4608bc;}}else _0x463bb8=_0x3d5ce8[_0x46363d(0x4f2,0x435,0x474,0x477)](_0x4ea52e,_0x463bb8,_0x343840,_0x5eaaeb,_0x3d5ce8['bPwYr']);}try{const _0x1c1388=await getEnabledCharacterImages(_0x4f45fa),_0x15d141=await _0x3d5ce8[_0x46363d(0x493,0x3d1,0x348,0x3f2)](getEnabledOutfitImages),_0xb8b25e=await getCommonCharacterImages(),_0x4960bb=[..._0x1c1388,..._0x15d141,..._0xb8b25e];_0x3d5ce8['VbRPR'](_0x4960bb[_0x46363d(0x3d7,0x40c,0x45f,0x491)],-0xd13+0x1730+-0xa1d)&&_0x3d5ce8['dJNJm'](_0x343840,-0x1ab5+-0x2d1+0x1d86)&&(_0x463bb8=_0x3d5ce8[_0x46363d(0x45c,0x3fc,0x4a6,0x39d)](_0x4ea52e,_0x463bb8,_0x343840,_0x4960bb,_0x3d5ce8[_0x56b6b0(0x1d8,0x228,0x14f,0x1b7)]));}catch(_0x490b3f){_0x3d5ce8['WqPdn'](_0x3d5ce8['STwTy'],_0x3d5ce8[_0x46363d(0x54f,0x4aa,0x4cc,0x4fe)])?_0x3d5ce8[_0x46363d(0x46e,0x3e6,0x45a,0x37b)](_0x2b29bf[_0x56b6b0(0x2cc,0x373,0x357,0x2c3)],_0x374a3c)&&(_0x5d62b5[_0x46363d(0x3e4,0x44d,0x4e1,0x395)+'sk'](_0x405b90,_0x3d5ce8[_0x56b6b0(0x2dd,0x30a,0x389,0x330)](_0x4bfc12[_0x56b6b0(0x2f2,0x2a3,0x2c1,0x2ba)],![])),_0x59d716[_0x56b6b0(0x204,0x241,0x2a8,0x22e)+_0x56b6b0(0x2b1,0x25f,0x1f9,0x35b)](_0x3d5ce8[_0x46363d(0x3fd,0x379,0x36e,0x3bc)],_0x52e138),_0x3897b8['autoClickT'+_0x56b6b0(0x258,0x25f,0x19f,0x2b3)]=null,_0x3f7722[_0x4b158f]?.[_0x56b6b0(0x277,0x275,0x257,0x2b0)+_0x46363d(0x3c2,0x3c8,0x317,0x485)]!==_0x3d5ce8[_0x56b6b0(0x1c2,0x236,0x23d,0x244)]&&_0x3d5ce8[_0x46363d(0x4f6,0x4b6,0x476,0x4cb)](_0x5aca85,()=>{function _0x519a98(_0x3f06d8,_0x18f981,_0x50e93b,_0x213738){return _0x46363d(_0x3f06d8-0xe4,_0x213738-0x11d,_0x18f981,_0x213738-0x1ce);}_0x324327[_0x519a98(0x621,0x55f,0x507,0x55c)+'ji']=![];},-0x11*0xd1+0x5*-0x589+0x3d16)):console[_0x56b6b0(0x199,0x107,0xda,0x197)](_0x3d5ce8[_0x46363d(0x46e,0x442,0x456,0x477)],_0x490b3f);}let _0x228e92='';_0x3d5ce8[_0x56b6b0(0x202,0x1d2,0x177,0x282)](_0x29f591[_0x56b6b0(0x2f6,0x2c1,0x378,0x348)],-0xa*-0x267+0x2098+-0x389e)?_0x228e92='诊断：检测到以下变量'+_0x56b6b0(0x206,0x15a,0x14e,0x2c3)+[..._0x29f591][_0x46363d(0x43f,0x3ba,0x434,0x35b)]('、')+'\x0a':_0x228e92=_0x3d5ce8[_0x46363d(0x3d9,0x44f,0x42a,0x46f)];const _0x44892e=_0x1de378[_0x56b6b0(0x27f,0x2d6,0x31f,0x2b7)](_0x4eafa5=>!_0x29f591[_0x46363d(0x3f4,0x3fb,0x44c,0x406)](_0x4eafa5)&&!_0x4eafa5['includes']('::'));_0x44892e[_0x56b6b0(0x244,0x180,0x24f,0x246)]>0x10bb*-0x1+0x1c1a+0x29*-0x47?_0x228e92+=_0x46363d(0x50c,0x4c0,0x544,0x4c9)+_0x44892e['join']('、')+'\x0a\x0a':_0x228e92+=_0x46363d(0x3be,0x46c,0x3ee,0x47c)+_0x46363d(0x4b3,0x4ca,0x565,0x4b7);_0x3d5ce8['AelNo'](updateCombinedPrompt,_0x463bb8,_0x228e92);const _0x200461=extension_settings[extensionName]?.['regexTestM'+_0x46363d(0x356,0x3b4,0x3c8,0x323)]??![];if(_0x200461){toastr[_0x56b6b0(0x262,0x325,0x1e5,0x2ff)](_0x3d5ce8['OFpeq']);return;}const _0x5ddfcc={};_0x5ddfcc[_0x46363d(0x456,0x4d9,0x4eb,0x433)]=0x493e0;const _0x17cc5b=await _0x3d5ce8[_0x46363d(0x515,0x45c,0x488,0x4a4)](LLM_IMAGE_GEN,_0x463bb8,_0x5ddfcc);if(_0x17cc5b[_0x56b6b0(0x208,0x158,0x25e,0x1a8)])return;const _0x4a9c58=_0x17cc5b[_0x46363d(0x3e4,0x394,0x2ea,0x2eb)],_0x414481=removeThinkingTags(_0x4a9c58),_0x5a6c4e=_0x3d5ce8[_0x56b6b0(0x2e1,0x2d1,0x240,0x308)](parseImagesFromPrompt,_0x414481);if(_0x3d5ce8['qpJrF'](_0x5a6c4e['length'],-0x1e59+-0x25fb+0x4*0x1115)&&_0x57efa7){await _0x3d5ce8[_0x46363d(0x577,0x4d8,0x581,0x524)](insertImagesIntoElement,_0x57efa7,_0x5a6c4e);const _0x2b705e=_0x3d5ce8['MdBuV'](extension_settings[extensionName]?.['zidongdian'+'ji'],_0x46363d(0x3d8,0x3f6,0x445,0x370));if(_0x2b705e){if(_0x3d5ce8['sAPbt']!==_0x3d5ce8[_0x46363d(0x4d2,0x4d6,0x513,0x4d1)]){const {taskQueue:_0x5280af,TaskType:_0x2d2c42,TaskStatus:_0x598f4a}=await import(_0x56b6b0(0x1bf,0xf8,0x265,0x194)+_0x46363d(0x496,0x3df,0x3c1,0x332)),{eventSource:_0x399448}=await import(_0x3d5ce8[_0x46363d(0x540,0x4c7,0x585,0x535)]),_0x87060d={};_0x87060d['name']=_0x56b6b0(0x1b6,0x243,0x1a0,0x139)+_0x5a6c4e[_0x46363d(0x3ec,0x40c,0x4bd,0x49f)]+_0x46363d(0x3fe,0x3a4,0x44e,0x2f9),_0x87060d[_0x56b6b0(0x1f7,0x20a,0x290,0x151)]=_0x2d2c42['AUTO_CLICK'],_0x87060d[_0x46363d(0x462,0x45e,0x44b,0x3c2)]='共\x20'+_0x5a6c4e[_0x56b6b0(0x244,0x1bc,0x2e9,0x279)]+_0x56b6b0(0x2dc,0x387,0x366,0x35f);const _0x10b716=_0x5280af['addTask'](_0x87060d);_0x5280af['updateStat'+'us'](_0x10b716,_0x598f4a[_0x56b6b0(0x23f,0x225,0x2a4,0x29e)]),window[_0x56b6b0(0x277,0x2ed,0x252,0x1ee)+'ji']=!![],window[_0x56b6b0(0x2b3,0x333,0x240,0x293)+_0x46363d(0x3f1,0x420,0x3c3,0x49e)]=_0x10b716;const _0x30a6d3=_0xe12568=>{function _0x38cf5c(_0x25d251,_0x519a9a,_0x647169,_0x5b1c75){return _0x46363d(_0x25d251-0x38,_0x647169- -0x438,_0x519a9a,_0x5b1c75-0xd5);}function _0xb00ef7(_0x1b6bc3,_0x1186d8,_0x2c72bf,_0x23801d){return _0x46363d(_0x1b6bc3-0x1c1,_0x2c72bf- -0x540,_0x23801d,_0x23801d-0x1f4);}const _0x5e2008={'iXyAp':function(_0x38e9b3,_0x7782){function _0x610f1f(_0x24d788,_0x130b14,_0x40ca6d,_0x1915e2){return _0x3e20(_0x40ca6d-0x2c9,_0x130b14);}return _0x3d5ce8[_0x610f1f(0x439,0x3c8,0x424,0x3f0)](_0x38e9b3,_0x7782);},'nOngi':_0x3d5ce8[_0x38cf5c(0x2f,-0xb6,-0xc,0x30)]};_0x3d5ce8[_0x38cf5c(-0x6b,0x5e,-0x12,0x5)](_0x3d5ce8['UBvgs'],_0x38cf5c(0xe6,0x1a,0x68,0x23))?(_0x4dae2e[_0xb00ef7(-0x2d,-0x181,-0xe9,-0xe5)](),_0x3d5ce8[_0xb00ef7(-0x127,-0x11,-0x65,-0x45)](_0x1bbe70,_0x3fe69a)):_0x3d5ce8[_0x38cf5c(-0x7d,-0xc6,-0x1,-0x5c)](_0xe12568[_0xb00ef7(-0x6,-0x15a,-0xac,-0x4c)],_0x10b716)&&(_0x5280af[_0x38cf5c(-0x78,0x40,0x15,0x72)+'sk'](_0x10b716,_0x3d5ce8[_0xb00ef7(-0x11a,-0x8e,-0x9b,-0x141)](_0xe12568[_0xb00ef7(0x2,-0x4a,-0x86,-0x73)],![])),_0x399448[_0xb00ef7(-0x198,-0x22d,-0x174,-0x157)+_0x38cf5c(-0x1,-0x27,0x41,0xa2)](_0x3d5ce8['APajh'],_0x30a6d3),window['autoClickT'+_0x38cf5c(0x3d,0x7a,-0x18,0x35)]=null,extension_settings[extensionName]?.[_0x38cf5c(-0x9c,0x7a,0x7,0x8)+'ji2']!==_0x3d5ce8[_0xb00ef7(-0x243,-0x1f8,-0x1b6,-0x18e)]&&_0x3d5ce8[_0x38cf5c(0x98,0x141,0x7e,0xab)](setTimeout,()=>{function _0x1d071c(_0x49c32d,_0x31ec9a,_0x1330a5,_0x3a012a){return _0x38cf5c(_0x49c32d-0x147,_0x1330a5,_0x49c32d-0x473,_0x3a012a-0x1a5);}function _0x4ec2cf(_0x53e859,_0x45f993,_0x11b582,_0x43d44e){return _0xb00ef7(_0x53e859-0x3,_0x45f993-0x186,_0x11b582-0x5e8,_0x45f993);}_0x5e2008[_0x1d071c(0x477,0x53c,0x4ce,0x515)](_0x5e2008[_0x4ec2cf(0x51f,0x550,0x533,0x52f)],_0x4ec2cf(0x4ae,0x530,0x511,0x56d))?_0x386956[_0x4ec2cf(0x5b8,0x630,0x588,0x534)](_0x44bd14):window[_0x4ec2cf(0x50f,0x4c5,0x4e7,0x582)+'ji']=![];},-0x1*0x6b9+-0x151*-0x6+0x125b));};_0x399448['on'](_0x3d5ce8['APajh'],_0x30a6d3),_0x3d5ce8['xzvbm'](setTimeout,()=>{const _0x29912d={};function _0x19d5b3(_0x110e2b,_0x11967b,_0x2ea4b3,_0x1bfba8){return _0x46363d(_0x110e2b-0xec,_0x2ea4b3- -0x1c1,_0x11967b,_0x1bfba8-0xba);}_0x29912d['oehFO']=_0x3d5ce8[_0x18bb44(-0x3a,-0x18a,-0xa1,-0xf9)],_0x29912d[_0x19d5b3(0x1f5,0x340,0x2b7,0x21a)]=_0x3d5ce8[_0x19d5b3(0x264,0x274,0x1ae,0xf2)];const _0xe5b0d3=_0x29912d;function _0x18bb44(_0x13b16f,_0xf22607,_0x36d7d7,_0x4ed2a6){return _0x56b6b0(_0x4ed2a6- -0x373,_0xf22607-0x2d,_0x36d7d7,_0x4ed2a6-0x192);}if(_0x3d5ce8[_0x19d5b3(0x30c,0x1b7,0x255,0x1f9)]('PGOos',_0x3d5ce8[_0x18bb44(-0x93,-0xb7,-0xd6,-0x9d)]))_0x52213b=_0x3d5ce8[_0x18bb44(-0x84,-0xe2,-0xbc,-0x13f)](_0x115932,_0x42697b,_0x7c2271,_0x419a90,_0x19d5b3(0x270,0x275,0x1ec,0x1d7));else{if(!_0x5280af[_0x19d5b3(0x1cb,0x10f,0x1d2,0x1fb)+_0x19d5b3(0x1a8,0x11a,0x19c,0x217)](_0x10b716)){if(_0x3d5ce8[_0x18bb44(-0x21d,-0x22e,-0x15e,-0x1d2)](_0x3d5ce8[_0x18bb44(-0x3a,0x4c,-0x17,-0x6b)],_0x3d5ce8['PtySE'])){const _0x4e7427=_0x3d5ce8['ynjjB'][_0x19d5b3(0x294,0x1e0,0x2a4,0x1ed)]('|');let _0x2b019e=0x4*0x9ae+0x53c*-0x2+0x40*-0x71;while(!![]){switch(_0x4e7427[_0x2b019e++]){case'0':console[_0x18bb44(-0x115,-0xc5,0x2,-0xa3)](_0x3d5ce8[_0x18bb44(-0x202,-0x15d,-0x177,-0x1d7)]);continue;case'1':_0x399448['removeList'+_0x19d5b3(0x26f,0x1f1,0x2b8,0x37a)](_0x3d5ce8['APajh'],_0x30a6d3);continue;case'2':return;case'3':window['autoClickT'+_0x18bb44(-0x5e,-0x1c4,-0x1a7,-0x11b)]=null;continue;case'4':window['zidongdian'+'ji']=![];continue;}break;}}else _0x58e64c['error'](_0xe5b0d3[_0x19d5b3(0x2a5,0x1b7,0x1e7,0x1aa)],_0x101cc1);}import('./iframe/i'+_0x19d5b3(0x1ff,0x2fb,0x263,0x20a))['then'](({processAllImagePlaceholders:_0x36381e})=>{function _0x2c94c2(_0x541150,_0x37898a,_0x509f08,_0x136bb3){return _0x18bb44(_0x541150-0x191,_0x37898a-0x16a,_0x509f08,_0x136bb3-0x5c1);}function _0x20498a(_0x602f9,_0x3da710,_0x37a30e,_0x156996){return _0x19d5b3(_0x602f9-0xad,_0x3da710,_0x37a30e- -0x2db,_0x156996-0x88);}if(!_0x5280af['isTaskInQu'+'eue'](_0x10b716)){console[_0x20498a(0xbc,0xb0,-0x4,0x8a)](_0x20498a(-0x68,-0x123,-0x104,-0x1bf)+_0x20498a(-0x9b,-0x45,-0xf2,-0x127)+'取消'),window[_0x2c94c2(0x552,0x44b,0x48b,0x4c5)+'ji']=![],window[_0x2c94c2(0x4ef,0x45f,0x4a9,0x501)+_0x20498a(-0x3d,-0xf7,-0x7c,-0xa5)]=null,_0x399448[_0x20498a(-0x6a,-0x13e,-0xd0,-0x179)+_0x2c94c2(0x517,0x451,0x443,0x4ff)](_0x3d5ce8[_0x20498a(-0x1da,-0xcd,-0x123,-0x1bb)],_0x30a6d3);return;}_0x3d5ce8[_0x20498a(-0x176,-0x151,-0xcb,-0x104)](_0x36381e);})[_0x18bb44(-0x14b,-0x131,-0x26a,-0x1c6)](_0x494d06=>{console[_0x319393(-0x321,-0x375,-0x2a6,-0x3a6)](_0xe5b0d3[_0x319393(-0x20a,-0x2a6,-0x210,-0x1c6)],_0x494d06);function _0x3e3702(_0x2acc2d,_0x1359a0,_0x47dfa5,_0x33a0d3){return _0x18bb44(_0x2acc2d-0x1ee,_0x1359a0-0xf4,_0x47dfa5,_0x1359a0-0xd9);}_0x5280af[_0x3e3702(0xa1,-0x15,-0x1,0x5e)+'sk'](_0x10b716,![]),window[_0x3e3702(-0x30,0x19,-0x55,-0x25)+_0x3e3702(-0x60,-0x42,-0xd,-0xec)]=null;function _0x319393(_0x2f5f04,_0x48c72a,_0x5c2dee,_0x5672cc){return _0x18bb44(_0x2f5f04-0x6a,_0x48c72a-0x13d,_0x5c2dee,_0x2f5f04- -0x147);}_0x399448['removeList'+_0x3e3702(-0x2e,0x17,0x19,-0x25)](_0x319393(-0x2b9,-0x37b,-0x329,-0x1f9)+'auto_click'+'_complete',_0x30a6d3);});}},-0x4*0x8f4+0x13c*0x13+-0x3*-0x440);}else _0x27e906[_0x56b6b0(0x318,0x39c,0x374,0x2ff)](..._0x350733[_0x46363d(0x335,0x38d,0x39b,0x434)]);}}}