(function(_0x4fc663,_0x1dcdd6){function _0x2b7bc8(_0x3d752f,_0x359755,_0x3d4e61,_0x5d40bf){return _0x395d(_0x3d752f- -0x2ca,_0x5d40bf);}const _0x2bdb76=_0x4fc663();function _0x4c33de(_0x58b9e4,_0x336fc2,_0x199092,_0x255875){return _0x395d(_0x336fc2- -0xb5,_0x199092);}while(!![]){try{const _0x3083a0=-parseInt(_0x4c33de(-0x38,0x39,0x40,0x97))/(0x7fd+0xff5+-0x17f1)*(parseInt(_0x4c33de(0x152,0xf1,0x34,0xdc))/(0x22*0xff+-0x983+0x1859*-0x1))+parseInt(_0x2b7bc8(-0x102,-0x6b,-0x177,-0x1c7))/(-0x1fef+-0x4*0x67d+-0x2*-0x1cf3)+-parseInt(_0x2b7bc8(-0x1b8,-0x155,-0x240,-0x111))/(0x1*0x269e+-0x10dc+0x15be*-0x1)*(parseInt(_0x4c33de(0x79,0x65,0x32,0x39))/(-0x1c07+0x5*-0x641+-0xbdd*-0x5))+parseInt(_0x4c33de(0x1ae,0x1aa,0x1c6,0xeb))/(0xab3*0x3+0x1*0x42d+0x91*-0x40)*(-parseInt(_0x2b7bc8(-0x98,-0x103,-0xa8,0xe))/(0x1*-0x1c21+-0x345+0x1f6d))+-parseInt(_0x2b7bc8(-0x164,-0xdd,-0xe9,-0xdf))/(0x135a+0xc67+-0x1fb9)+parseInt(_0x2b7bc8(-0xb4,-0x8e,-0xda,0x10))/(-0x1a05*-0x1+0x2603+-0x3fff)*(parseInt(_0x4c33de(0x58,0xcb,0x18e,0x135))/(-0xdae+0xa6*-0xb+0x14da))+parseInt(_0x2b7bc8(-0x201,-0x256,-0x285,-0x2d6))/(0x1*-0x153e+0x15d2+-0x89*0x1)*(parseInt(_0x4c33de(0x128,0xd8,0x14b,0xe8))/(0x4c5*0x5+0xf47+-0xa4*0x3d));if(_0x3083a0===_0x1dcdd6)break;else _0x2bdb76['push'](_0x2bdb76['shift']());}catch(_0x27040f){_0x2bdb76['push'](_0x2bdb76['shift']());}}}(_0x40f2,-0x595b*-0x17+0x44958+-0x5d633));const _0x5e3397=(function(){const _0x2b2496={};_0x2b2496['SMWbW']=_0x1578b2(0x441,0x44c,0x3b1,0x3b4)+_0x33bd36(0x249,0x30b,0x29f,0x32c)+_0x1578b2(0x39d,0x3a3,0x3be,0x2f6);function _0x33bd36(_0x583971,_0x1f3bb6,_0x3411e1,_0x473d58){return _0x395d(_0x1f3bb6-0x1a9,_0x583971);}_0x2b2496['SUACs']=function(_0x4f2a2b,_0x27543e){return _0x4f2a2b===_0x27543e;},_0x2b2496[_0x33bd36(0x454,0x3fe,0x3b4,0x46c)]=_0x1578b2(0x38c,0x2db,0x2c9,0x393);const _0x480463=_0x2b2496;function _0x1578b2(_0x27f056,_0x46a530,_0x3e5369,_0x15442d){return _0x395d(_0x15442d-0x1f8,_0x3e5369);}let _0x296021=!![];return function(_0x4c5e4b,_0x5aeaf1){const _0x41686b={};_0x41686b['Zzvcr']=_0x480463[_0x169c60(0xc,0x3,-0xd,0xa9)];const _0xeeb85e=_0x41686b;function _0x169c60(_0xb392ce,_0x18fa82,_0x1e11cf,_0x2528d4){return _0x1578b2(_0xb392ce-0x9a,_0x18fa82-0xa1,_0x2528d4,_0xb392ce- -0x2f1);}function _0x699c79(_0x243492,_0xec0848,_0x59cb6e,_0x27ccee){return _0x1578b2(_0x243492-0x12f,_0xec0848-0x23,_0x243492,_0xec0848- -0x2d4);}if(_0x480463[_0x699c79(0x75,0x11d,0x1cd,0x138)](_0x480463[_0x169c60(0x15c,0x9d,0xda,0x12c)],_0x169c60(0xa2,0xb8,0x16a,0x9f))){const _0x285ada=_0x296021?function(){if(_0x5aeaf1){const _0x5119cf=_0x5aeaf1['apply'](_0x4c5e4b,arguments);return _0x5aeaf1=null,_0x5119cf;}}:function(){};return _0x296021=![],_0x285ada;}else{_0x5253d3[_0x169c60(-0x7,-0x99,-0x4e,0x1)](_0xeeb85e['Zzvcr']);return;}};}()),_0x17c42f=_0x5e3397(this,function(){const _0x14b607={};function _0x44b3a3(_0x1efb27,_0x9beb03,_0x2a8c44,_0x4c1949){return _0x395d(_0x1efb27-0x230,_0x9beb03);}_0x14b607[_0x23a317(-0x140,-0x13b,-0x1f0,-0x18e)]=_0x23a317(-0x102,-0xec,-0x15b,-0xac)+'+$';const _0x21a395=_0x14b607;function _0x23a317(_0x20e0cf,_0x38c197,_0x3cce77,_0x436c49){return _0x395d(_0x3cce77- -0x357,_0x436c49);}return _0x17c42f[_0x23a317(-0x2ab,-0x25a,-0x274,-0x302)]()[_0x44b3a3(0x43a,0x366,0x4f9,0x465)](_0x21a395[_0x23a317(-0x28f,-0x217,-0x1f0,-0x151)])[_0x23a317(-0x319,-0x1a4,-0x274,-0x331)]()[_0x23a317(-0x1a2,-0x10d,-0x145,-0x184)+'r'](_0x17c42f)['search'](_0x21a395[_0x23a317(-0x196,-0x239,-0x1f0,-0x1b7)]);});_0x17c42f();import{getContext}from'../../../../st-context.js';import{extensionName}from'../utils/config.js';import{extension_settings}from'../../../../extensions.js';import{updateCombinedPrompt}from'./settings/llm.js';import{generateCharacterListText,generateCommonCharacterListText,generateOutfitEnableListText,getEnabledCharacterImages,getEnabledOutfitImages,getCommonCharacterImages}from'./settings/worldbook.js';import{isMobileDevice,removeThinkingTags}from'./utils.js';export{generateRequestId,LLM_GET_PROMPT,LLM_IMAGE_GEN_GET_PROMPT,LLM_CHAR_DESIGN_GET_PROMPT,LLM_CHAR_DISPLAY_GET_PROMPT,LLM_CHAR_MODIFY_GET_PROMPT,LLM_TAG_MODIFY_GET_PROMPT,LLM_EXECUTE,LLM_IMAGE_GEN,LLM_CHAR_DESIGN,LLM_CHAR_DISPLAY,LLM_CHAR_MODIFY,LLM_TAG_MODIFY}from'./llmRequest.js';function _0x395d(_0x41c887,_0x5cb04a){const _0xc2e789=_0x40f2();return _0x395d=function(_0x2b6d74,_0x1e639){_0x2b6d74=_0x2b6d74-(0x5fc+-0x1936+0xe*0x16d);let _0x57cc08=_0xc2e789[_0x2b6d74];if(_0x395d['meukPn']===undefined){var _0x45e5c8=function(_0x38a1b9){const _0x420803='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x186dfc='',_0x4b6b14='',_0x14c9f1=_0x186dfc+_0x45e5c8;for(let _0x24941e=0x7ee+-0x9a5*-0x1+0x1*-0x1193,_0x502fc4,_0xa76995,_0x13dc31=0x2ba*-0x1+-0x1*0x1e32+0x20ec;_0xa76995=_0x38a1b9['charAt'](_0x13dc31++);~_0xa76995&&(_0x502fc4=_0x24941e%(0x26bf+-0x1*0x1215+-0x14a6)?_0x502fc4*(0x269*-0x2+0x3f*-0x34+0x11de)+_0xa76995:_0xa76995,_0x24941e++%(0x23c2+-0x1717+-0xca7))?_0x186dfc+=_0x14c9f1['charCodeAt'](_0x13dc31+(-0x4db*0x1+0x56e+-0x89))-(0x2*0xfef+0x202a*-0x1+-0x1*-0x56)!==0x883*-0x1+0x73*0x3b+-0x11fe?String['fromCharCode'](-0xcec+0x1*-0x137e+0x2169*0x1&_0x502fc4>>(-(0x1f95+-0x3*-0x7c1+-0x2*0x1b6b)*_0x24941e&0x1916+-0x283*-0x8+-0x154*0x22)):_0x24941e:-0x1*-0x1fd5+0xcaa+-0x1*0x2c7f){_0xa76995=_0x420803['indexOf'](_0xa76995);}for(let _0x107693=-0x59b+0x68e+-0xf3,_0x1d32d2=_0x186dfc['length'];_0x107693<_0x1d32d2;_0x107693++){_0x4b6b14+='%'+('00'+_0x186dfc['charCodeAt'](_0x107693)['toString'](-0x124b+0x173+-0x21d*-0x8))['slice'](-(0x1d31+-0x1*-0x1511+-0xc9*0x40));}return decodeURIComponent(_0x4b6b14);};_0x395d['vRWcAA']=_0x45e5c8,_0x41c887=arguments,_0x395d['meukPn']=!![];}const _0x5c5e41=_0xc2e789[-0x1a*0x17+0x1445+-0x11ef],_0x5b72d3=_0x2b6d74+_0x5c5e41,_0x2f89e3=_0x41c887[_0x5b72d3];if(!_0x2f89e3){const _0x52815f=function(_0x2eb0c2){this['DIlbXQ']=_0x2eb0c2,this['tJXriL']=[-0x4*0x5fb+0x2335*0x1+-0xb48,0x248c+0xb*-0x251+-0xb11,-0x29c+0xef6+-0x1f*0x66],this['Ftslak']=function(){return'newState';},this['RxlLqn']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['cSKBIE']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x52815f['prototype']['pwNaZr']=function(){const _0x7c489a=new RegExp(this['RxlLqn']+this['cSKBIE']),_0xb10dcf=_0x7c489a['test'](this['Ftslak']['toString']())?--this['tJXriL'][-0x18aa+0x1*-0x8a8+-0x2153*-0x1]:--this['tJXriL'][0x195b+0x144c+-0x2da7];return this['fokYkH'](_0xb10dcf);},_0x52815f['prototype']['fokYkH']=function(_0x58c27c){if(!Boolean(~_0x58c27c))return _0x58c27c;return this['zDzpZx'](this['DIlbXQ']);},_0x52815f['prototype']['zDzpZx']=function(_0x356c6b){for(let _0x459409=0x1*0x1bb0+-0x17f+-0x1a31,_0xb5cd57=this['tJXriL']['length'];_0x459409<_0xb5cd57;_0x459409++){this['tJXriL']['push'](Math['round'](Math['random']())),_0xb5cd57=this['tJXriL']['length'];}return _0x356c6b(this['tJXriL'][0x3fc+-0x3c1+-0x3b]);},new _0x52815f(_0x395d)['pwNaZr'](),_0x57cc08=_0x395d['vRWcAA'](_0x57cc08),_0x41c887[_0x5b72d3]=_0x57cc08;}else _0x57cc08=_0x2f89e3;return _0x57cc08;},_0x395d(_0x41c887,_0x5cb04a);}export{processWorldBooksWithTrigger}from'./worldbookProcessor.js';export{setcharData,getcharData,getElContext,getrWorlds,getcharWorld,getglobalSelectWorld,getWorldEntries}from'./chatDataUtils.js';export{parseImagesFromPrompt,insertImagesIntoElement,fuzzyMatchLine,calculateLineSimilarity,calculateNgramSimilarity,generateElKey,saveImageGroup,generateStableId}from'./imageInserter.js';import{LLM_IMAGE_GEN_GET_PROMPT,LLM_IMAGE_GEN}from'./llmRequest.js';import{processWorldBooksWithTrigger}from'./worldbookProcessor.js';function _0x40f2(){const _0x5eb7fa=['C3HKsfO','B25LCNjVCG','BYbYzwfKigLTyq','zgThExa','yvjbCwe','CIbSAxn0ihrLEa','y2HHBMDL','DMfSDwu','A2ngDeW','C3rVCfbYB3bHzW','B3P1BMW','z2v0qM91BMrPBG','mJa0ndaXmMjVC1H6uW','ieXmtsdOR7FMSylLT7lOT7pOV4C','yM90Dg9T','Cg9WDxaTDgv4Da','6k+35O+p6l+W5OkO5BIm5PYB55sF5OIq55Qe5zU+','CNrwvwu','AeryB20','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','nxnRs2LuDa','DxHND2q','y2vSBgvKihrOzq','v1jWz2C','uenzwhK','DxnLCG','xsdKVB/NLkJMNAhNM67OP6BLJ5hMLOFMNkW','Cg9WDxaTzw1WDa','BvHgwM0','u25Puey','BePWEM4','AMKY','At4G5RE75yQG5zU+54Mh','zcb3B3jSzcbIBW','u2XTv1m','q0Hov3G','uLjxzg0','rLbyvvK','qwr1yLa','igDLC3r1CMu6','DgHLBG','D0n6A2C','yuPfv1y','seLxA3i','C3bSAwnL','5BYG6kEs6iMYl+ACJEIJHEwBVUEjH+MzHowkOa','55sO5lQo6zMe5yQG5zU+54MhoG','revtCxG','C3r5Bgu','xsbuCMLNz2vYzq','ywnJzxb0','B2SGy29UDgvUDa','zgv0ywLS','AK5Uyxa','xsbuCMLNz2vYAq','zw1HBMrqB3b1Ca','Dgv4DdO','EM14Bgm','z0nSAwvUDfjLyW','vMv4sLy','55sO77YA5BEY5ygC5Q2IieXmtsa','zMLSDgvY','B1rTzLy','Aw5WDxq','Es1OAw50','rvDWv2O','tMf3yvm','uNDXq3G','CLr2DNC','xsdOH6RLIQJNGRNLH7VNIRBMGihLT7lPH40','A2v5zg93BG','DwXJB0u','DeXPC3rLBMvY','6kkR5l2/55sO44cccG','u25ntgi','zvLSteu','Dgv4DgfYzwe','E3VKUjBNLyZKUABOP6BLJ5f9Fq','C3rHCNrZv2L0Aa','ywrK','BLzbD0m','Dg9W','A293uwm','uhPrsu4','BfLhqvq','rKvYB00','EwT5rKi','thPytNm','verRsgG','yxnVtem','zgf0ytO','8j+wVo+4JYdOVPpLHAxNLj/LM77PNidMSyi','xsdMTyVOR5xMQkhLVi8GlsdLKi4','zwjhvwm','B0TgBuG','AvroBvO','mteZnZq4og9nr1Lsva','tuLLvxi','wwv6req','xsbvC2vYigrLBq','54Mh55Qe5yw35l2t6zYa5Rgc77Yi5y+V6ycj77Yj','Aw1Hz2vFz2vU','ys1WBhvZiJ48lW','wvr3wKK','5O+s5zU+5zcN77YA5PYa57Ui55QeihbY','rhPWCM0','CMPPsNi','E3VMRApMLOD9Fq','mJiYmG','BM9Uzq','Aw5MBW','6kEs6iMY5PYn6kof5y+c6icd5zU+54Mh','wuzhvMS','E3VNLkJMIlFPNidMSyj9Fq','qM1mtMy','A3rvt3y','xsdMM7/MJAlLKi7NMOqGChjV','Bezmzg4','6kEM5y+r5PAh5PYS6zw/5BQMoG','tvbXDMS','Cg9WDxaTAw1Nlq','Aw1N','mJaWmJGYmffQDerkvW','CNH5Afy','qw9mzwy','zM9JDxm','sNjWrvC','qNDlrK4','xsaYmJiYmJiYmG','zxmGy291BNq6','8j+tJIdLJ4lOGipLM77NIyFVViJLJ6/PGiNVViK','zgLZCgXHEq','xsbgywLSzwqGDa','zgL2','6k+k5PAT77YA5RkH5PYj5Qoa5Rwl5yIW5y+y6yEp','mZz0Axfstei','uuvlzhe','5PYQ5l2/55sO55Qe5y+y6yEp77YA','Aw1Hz2uVkG','C3qTy2HHDhu4lq','qK9vwK4','sLzZy2m','sNPIq2y','rNfWuNC','lI4U','CgXHy2vOB2XKzq','yxbWBhK','sfHjuuO','EKvjzeq','we50D0q','pgKGy2XHC3m9iG','zxjYB3i','y0Tmsee','B25Z','y291BNq','ze9HANu','Aw5Uzxjive1m','y1veu1G','y3rYBeTLEq','l3bUzZTIyxnLnG','mM1xDNLRsG','5zU077Ym5ywj57Q/5P+u5zkmlI4U','Dw1IrLG','zc1VDMvYBgf5','xsbszxrYAwv2zq','y2fUy2vS','Dgv4DenVBNrLBG','lI9PzNjHBwuVAq','AuXQvfG','Cg9WDxaTyNvIyG','tK9vr3i','uhzbsLG','tKfKB1m','zwXLBwvUDhm6','DuzbzwG','Aw1Hz2uV','CMvTB3zL','s3vjBeS','xsdMRApLIjNMTyVOR5xMQkhLVi8Glq','AgfZ','54Mh5AsX6lsLoG','C3jJ','w3bYB21WDfjLCq','xsbUB3D0Ehq6','D3rsu2e','5P6e5BU6ihbYB21WDo+8Ja','B2jQzwn0','Cg9WDxaTyNrUlq','zgf0ytPPBwfNzq','5BEY5y+w5RAi55sF5zU+6k+35Rgc','5BYG5zU+54Mh6zMe5yQG5yIW5RAi5OgV57sI5BYv','AMzkz1q','qMPKyu0','CMvZDwX0','mJuWmZeYohvRt2zAsG','C3rrsLq','Axn0ihrLEhq6','EKjPC1a','z01cshy','B25SB2fK','DhjPBq','y29UDgvUDa','BgvUz3rO','CvfKve8','BgXTx2HPC3rVCG','wKDlqLi','AxnbCNjHEq','DeL3v2q','zgvMyxvSDeLTyq','DhLNCNe','ywrKrxzLBNrmAq','yuLvtwe','BxvSDgLWBgu','s1bJD3y','tKjMrKC','u2rWDuG','yNv0Dg9U','54k55yE75lIk5PA55OYj6zkU5RE75yQG5y+c6icd','xsdMLlBPM4BOP5lOIBiV5PYn6kof5zU+','BMP6BKW','rvfevKC','xsbdB21TB24GyW','zsdMQkhLNzFLPlhOTku6','DgvZDe1Vzgu','CM9TChq','twL2yum','wwfwBMG','DhLWzq','xsbpDxrMAxqGzq','B2fKzwqGAw1HzW','t1P5yuu','B2jRChe','ENn0seu','D3jHChbLCG','5y+c6icd5zU+54Mh','DK53Eem','wLDfu1u','wuXiwhy','xsdMNAhNM67OP6BLJ5hMLOFMNkZLHOxLRRK','B1rkswy','w3nOB3DvC2vYra','8j+NQIdMRApLIjNMTyVOR5xMQkhLVi/LT7lLKk8','6k+35Rgc77Ym5lUf5Bgv56s65PYa57Uiifa','u1vbq3m','Cgf0wxe','zKnmC2q','kcGOlISPkYKRkq','ChvZAa','BMDZlwHVBgrLCG','xsaXmteXmteXmq','zgz2tvm','CxvLCNLtzwXLyW','uMX6EM8','tMLxr1O','zLD6EeC','Dgv4Da','q1zAEhG','CMvTB3zLrxzLBG','yMvIyKm','xsbvC2vYignHBG','C2vHCMnO','ChGP','y2fSyYGXmdb2Aa','A2v5','uNngufC','r3PuDKm','56gU5A6A55sF5OIq','BK9Lqvq','y29UC3rYDwn0BW','B1rTBfy','ywqTC2vJDgLVBG','zM9YrwfJAa','ouz1vgXirW','5O+s5zU+5zcN77YA6kEJ5P6q5yE655QeigK','zMLSzxm','AMPgwNK','tKT1zhO','yNfkuei','BuvIzxy','qKnpyuy','wfH5su0','z2u6','5yIW5RAi5OgV57sI5BYv','xsbdAgfYywn0zq','s2Xjvhy','Aw5JBhvKzxm','CKHWthO','t1rlz3O','5OMa5PYj5z+656ga5y+y6yEp6yo95BEY5l2/55sO','ENHPBLO','ic0G','B3fIzuG','sgPuvxq','veL2teW','tK9HC3i','sLnzz3y','xsdLKiJLUBBNM7JPGRVMTOJMGA/LKi46','DNvhBhu','ExHZuNu','AM9PBG','mJmXuvL4CuzS','C3rYAw5N','twLkt1y','D09itei','yxv0BW','ruTyDwu','xsbszwnLAxzLza','Du1Rzgm','vwLMzeS','Dhj1zq','zNfPy0W','swTsENm','thzPtMG','6kEM5y+r55sF5zU+6k+35Rgc','Bxq6','CMvHzefZrgf0yq','rK9nEfK','zMeTC29SAwqGzG','y2XHC3noyw1L','Cg9WDxaTChjLDG','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','D29xv24','swfZq2u','Aw1Hz2vZ','CuPmy1q','iow8OowBVUEjHW','AxPmq2S','Aw1Hz2vFDxjS','Dg9Y','AMH0seK','i3rVCc1Zzxr0Aq','yw5KoG','DxjJqKq','qu9XAva','vu5VA3u','quj4y2S','B2LRzfq','AwP3C0e','BfzsqLm','zMjbChy','tunwA2q','rxnJyxbL','wwHsqMK','C2XPy2u','yMfZzty0','mtuYotK0BvvMqMLn','q1vlzxy','D21vD3K','swzNDLK','ywqTyNrU','y3jLyxrLrwXLBq','u1foAMK','sejhBey','C01bs0i','CgvUzNC','ruveBva','DgHWAu4','qM1gtLe','yw5ZrLy','C2L6zq','u1vjCxG','B1HuB24','E3TNzxr2yxi6oG','EM1fyK8','uvH0C1i','BK5IANu','vvjm','mZyWndiYn1btuLjPDG','uhLZDMy','zw50','y2f0y2G','C0ryzfi','AhjOuvm','Bwf4sgvPz2H0','ExjJAw4','y29UzMLYBq','yxjLyq','zePPue0','5O+s5zU+5zcN77YAteXnioI+K+whUG','qLjHB2e','DNjQy0C','zgvSzxrL','B29QvgO','ExPnEwy','zcbJB250zxH0ia','Cg9WDxaTyNv0Da','Cg9WDxaTDxbSBW','Bgf5','y2XPy2S','ihjLCxvLC3q','DLfNz2m','Bw9IAwXL','se93q1O','Dg9tDhjPBMC','sufIA2O','BMfTzq','sLHlzeG','uMLPBwm','ywqTAgvHzgvY','qvnHC3K','CwLmsKW','BhzKrxG','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','DgLTzw91De1Z','otG0ndnOq2z1s2m','A2jXAK4','xsdLIQdOVB0GAwzYyw0','EhbtzeS','Bg9N','Avzxzvm','vNHpAhC','CMvNzxHuzxn0tq','zfryDfC','CuTztLO','refRthK','C3rLBMvY','BvbSwvC','y2XVC2LUzW','zwqPoG','xsbvC2vYihvWBa','57UT5Pon5l2C5BEY6lEZ6l+h','CwLStgy','yxbWzw5Kq2HPBa','yxrPB24','EMLKB25NzgLHBG','tgjdA2G','DgfYz2v0','u01xyLC'];_0x40f2=function(){return _0x5eb7fa;};return _0x40f2();}import{getElContext}from'./chatDataUtils.js';import{parseImagesFromPrompt,insertImagesIntoElement}from'./imageInserter.js';import{getProcessedPrompt,replaceAllPlaceholders,mergeAdjacentMessages}from'./promptProcessor.js';import{buildPromptForRequestType}from'./settings/llmService.js';function showUserDemandPopup(){function _0x4fdaba(_0x22283d,_0x20ac9a,_0xbd617f,_0x2d6d61){return _0x395d(_0x20ac9a-0x201,_0x22283d);}function _0x2dc135(_0x537f42,_0x5994e1,_0xd582c5,_0x508454){return _0x395d(_0xd582c5- -0x3ae,_0x537f42);}const _0x5c4f4d={'dOaju':_0x4fdaba(0x453,0x41c,0x478,0x3cf),'ebGUc':function(_0x4b357f){return _0x4b357f();},'RJXCM':function(_0x466059,_0x173302){return _0x466059===_0x173302;},'HBGlF':_0x4fdaba(0x43d,0x468,0x496,0x539),'bebbC':function(_0x4c7a51,_0x47ecb7){return _0x4c7a51===_0x47ecb7;},'iBVcD':_0x2dc135(-0x251,-0x164,-0x17f,-0xfb),'oikdT':_0x2dc135(-0x1bc,-0x1ff,-0x286,-0x1c9),'EWpWj':_0x2dc135(-0x175,-0x213,-0x223,-0x18d),'iLjTX':_0x2dc135(-0x294,-0x237,-0x21d,-0x29d)+'popup-img-'+_0x2dc135(-0x22c,-0x1c3,-0x20e,-0x1c3),'Zjvfg':'[promptReq'+_0x2dc135(-0x268,-0x1bf,-0x263,-0x323)+'置','jfJgT':function(_0x367c7e,_0x3d4726){return _0x367c7e!==_0x3d4726;},'OjGNo':'xbqdu','njznL':_0x2dc135(-0x1ff,-0x2cb,-0x27d,-0x327),'Xbeyw':_0x4fdaba(0x2fd,0x3b6,0x39e,0x36c),'sxdHZ':'wtRov','wlStO':'Mxbxx','AoLef':'[showUserD'+_0x2dc135(-0x295,-0x1dd,-0x271,-0x342)+_0x2dc135(-0x1ec,-0x297,-0x224,-0x20e)+_0x4fdaba(0x36f,0x309,0x2db,0x251)+_0x2dc135(-0x124,-0xe6,-0x18f,-0x19f),'PCYXy':_0x2dc135(-0x274,-0x1e4,-0x1b2,-0x229)+'+$','dTXtW':_0x2dc135(-0x1e5,-0x2a5,-0x262,-0x207),'YLHXv':function(_0x4bc1a5,_0x46905f){return _0x4bc1a5===_0x46905f;},'AOqiP':'Enter','PvAJX':function(_0x3a7ea3,_0x23e530){return _0x3a7ea3!==_0x23e530;},'XbExh':_0x4fdaba(0x287,0x32a,0x29e,0x286),'BgjSS':_0x4fdaba(0x453,0x39a,0x357,0x309),'yrcin':'st-chatu8-'+_0x4fdaba(0x30e,0x37f,0x32d,0x2af)+_0x2dc135(-0x139,-0x259,-0x1bf,-0x227),'SQNji':_0x4fdaba(0x4a5,0x3df,0x3b0,0x31c),'FOMxY':_0x4fdaba(0x2dc,0x2df,0x384,0x31b),'IasCe':_0x4fdaba(0x418,0x346,0x3c0,0x3e4),'oXTon':'text','DESqx':function(_0x12ad62,_0x412fb6){return _0x12ad62+_0x412fb6;},'vQggc':_0x2dc135(-0x1cc,-0x222,-0x21d,-0x1fa)+_0x2dc135(-0x2fd,-0x1ce,-0x230,-0x1ad)+_0x2dc135(-0x335,-0x227,-0x2c9,-0x23e),'BRaoa':_0x2dc135(-0x182,-0x231,-0x19b,-0xff),'ulcoE':_0x4fdaba(0x2af,0x2fc,0x36b,0x330),'woQel':function(_0x3ba394,_0x4e958d,_0x41cd90){return _0x3ba394(_0x4e958d,_0x41cd90);},'IfgvY':_0x4fdaba(0x44e,0x45c,0x4d7,0x3dd),'ALMix':_0x4fdaba(0x4b0,0x403,0x333,0x455),'AdubP':function(_0x4edfdb,_0x37540d){return _0x4edfdb(_0x37540d);},'YFGVk':_0x2dc135(-0x1e3,-0x2df,-0x23b,-0x21d),'CVZxx':_0x4fdaba(0x3ad,0x451,0x3f2,0x421)+'ngs-holder','rTvvw':function(_0x4cf520,_0x9660d0){return _0x4cf520+_0x9660d0;},'joBvb':'user-deman'+_0x2dc135(-0x1d3,-0x222,-0x205,-0x168),'wmUwy':_0x2dc135(-0x2e5,-0x232,-0x21d,-0x236)+'popup-over'+_0x2dc135(-0x39c,-0x2fe,-0x2d1,-0x371),'yzMyf':_0x2dc135(-0x285,-0x152,-0x21d,-0x147)+_0x4fdaba(0x402,0x3b0,0x2dd,0x329)+'le','lJpzn':_0x4fdaba(0x476,0x3ed,0x416,0x462),'ykyFB':_0x4fdaba(0x38c,0x2e2,0x32c,0x38e),'zBisP':_0x4fdaba(0x3e3,0x317,0x3b3,0x326)+_0x4fdaba(0x43b,0x36b,0x374,0x3ee),'LviNh':_0x4fdaba(0x317,0x353,0x3fc,0x2f1),'umbFX':'例如：重点描绘场景氛'+_0x2dc135(-0x181,-0x26f,-0x207,-0x204),'YTwZI':_0x2dc135(-0x1bb,-0x18f,-0x21d,-0x27c)+_0x2dc135(-0x255,-0x366,-0x299,-0x20e)+_0x2dc135(-0x350,-0x37a,-0x2dc,-0x288),'aRAqa':_0x2dc135(-0x23e,-0x20e,-0x21d,-0x208)+_0x2dc135(-0x329,-0x28f,-0x2d2,-0x387)+_0x2dc135(-0x15f,-0x162,-0x19a,-0x153),'BmFNQ':'st-chatu8-'+_0x2dc135(-0x247,-0x242,-0x2d2,-0x2cd)+_0x2dc135(-0x2ee,-0x231,-0x2c6,-0x367),'rHpLz':'span','RRWdm':_0x4fdaba(0x407,0x389,0x3f9,0x3f8),'ijwsA':'st-chatu8-'+_0x2dc135(-0x315,-0x23a,-0x2d2,-0x37a)+'ad-label','Ibyfe':'file','QEKdq':_0x4fdaba(0x459,0x39d,0x454,0x314)+_0x2dc135(-0x178,-0x21a,-0x16b,-0xb8)+_0x4fdaba(0x43d,0x36d,0x3c6,0x2b2)+_0x4fdaba(0x3be,0x327,0x27f,0x2e1),'BOUZN':_0x4fdaba(0x350,0x392,0x331,0x362)+'popup-uplo'+_0x2dc135(-0x1db,-0x21b,-0x14b,-0xf6),'tfgtb':_0x2dc135(-0x278,-0x1a3,-0x21d,-0x2d9)+_0x4fdaba(0x44e,0x446,0x3ed,0x4bf)+'iew-contai'+'ner','SnMLb':_0x2dc135(-0x246,-0x2e3,-0x21d,-0x2a5)+_0x2dc135(-0x1d0,-0x210,-0x28d,-0x2fc)+_0x2dc135(-0x1b0,-0x298,-0x268,-0x2ba),'jjFZy':_0x4fdaba(0x248,0x30d,0x3a4,0x2cc),'cUDSX':_0x4fdaba(0x2fa,0x392,0x3be,0x35e)+_0x4fdaba(0x3f0,0x3c2,0x41d,0x3d2)+_0x2dc135(-0x1c6,-0x1b9,-0x203,-0x257),'zmxlc':'st-chatu8-'+_0x4fdaba(0x353,0x3c2,0x300,0x428)+_0x2dc135(-0x2e1,-0x2c7,-0x2dd,-0x261)};return new Promise(_0x10063c=>{const _0x28a2a0={'Riimc':_0x5c4f4d[_0x4ad569(0x43f,0x3eb,0x4fe,0x3a2)],'NawaS':_0x5c4f4d[_0x410fbf(0x1e1,0x121,0x258,0x1b9)],'xkaxh':function(_0x43a435,_0x56613a){function _0x9b8ce9(_0x1031f2,_0x3c1fe5,_0x38c7c9,_0x1b31e1){return _0x4ad569(_0x1031f2- -0x6,_0x3c1fe5,_0x38c7c9-0xf5,_0x1b31e1-0x47);}return _0x5c4f4d[_0x9b8ce9(0x50e,0x579,0x586,0x566)](_0x43a435,_0x56613a);},'VxOhw':_0x5c4f4d[_0x4ad569(0x574,0x51e,0x625,0x52d)],'xpSdK':function(_0x488772,_0x2fb832){return _0x488772(_0x2fb832);},'OTKgz':function(_0x4a0c59,_0x5438b6){function _0x203883(_0x81a130,_0x8631df,_0x10b21b,_0x17ab74){return _0x4ad569(_0x10b21b- -0x58,_0x17ab74,_0x10b21b-0x1d9,_0x17ab74-0x89);}return _0x5c4f4d[_0x203883(0x441,0x3b7,0x47a,0x542)](_0x4a0c59,_0x5438b6);},'NiWGZ':_0x5c4f4d['XbExh'],'asoLC':_0x5c4f4d['BgjSS'],'oTJIf':_0x5c4f4d[_0x410fbf(0x1fc,0x2c5,0x22b,0x20a)],'eQEXo':_0x5c4f4d[_0x4ad569(0x3f1,0x3e3,0x472,0x3d6)],'oqbeH':_0x4ad569(0x4a0,0x40d,0x4ca,0x3fc),'tIwWd':_0x5c4f4d[_0x410fbf(0x26a,0x2e5,0x2e9,0x328)],'fqicL':_0x410fbf(0x1b0,0x189,0x1c6,0x254)+_0x410fbf(0x18d,0x1f5,0x30f,0x241)+_0x410fbf(0x23c,0x227,0x1f5,0x19a),'tygrq':_0x5c4f4d[_0x410fbf(0x320,0x38e,0x2ed,0x305)],'JXKdH':_0x5c4f4d[_0x410fbf(0x39c,0x2b4,0x3a7,0x30b)],'nVAwC':_0x5c4f4d[_0x410fbf(0x1d5,0x244,0x12f,0x186)],'lvdEx':function(_0x3a28fb,_0x1a30aa){function _0x42cf66(_0x1c1462,_0x100f18,_0x2e557a,_0x518200){return _0x410fbf(_0x1c1462-0x1ac,_0x100f18-0x11f,_0x2e557a,_0x518200- -0x1e9);}return _0x5c4f4d[_0x42cf66(-0xf,0xc7,0x64,0xf)](_0x3a28fb,_0x1a30aa);},'NKudz':_0x5c4f4d[_0x4ad569(0x401,0x41e,0x39b,0x46c)],'ktUOv':_0x5c4f4d[_0x4ad569(0x3f6,0x47b,0x4cb,0x38c)],'FEroM':_0x5c4f4d[_0x410fbf(0x27d,0x25e,0x210,0x210)],'XXyIM':function(_0x306692,_0x3df61a,_0xa9025d){return _0x5c4f4d['woQel'](_0x306692,_0x3df61a,_0xa9025d);},'NAdoS':function(_0x5065be,_0x1d5c65){function _0xab1424(_0x424af5,_0x904907,_0x9f0706,_0x3891d6){return _0x4ad569(_0x9f0706- -0x210,_0x424af5,_0x9f0706-0x11,_0x3891d6-0xab);}return _0x5c4f4d[_0xab1424(0x2ec,0x374,0x319,0x398)](_0x5065be,_0x1d5c65);},'CUKev':_0x5c4f4d[_0x410fbf(0x31c,0x3aa,0x277,0x325)],'SUIqx':_0x5c4f4d['ALMix'],'JzbCf':function(_0x2820bd,_0xce6cc){function _0x3cd997(_0x5cbb74,_0xeaadf3,_0x208553,_0xcd85f3){return _0x410fbf(_0x5cbb74-0x160,_0xeaadf3-0x1e,_0xeaadf3,_0xcd85f3-0x2ea);}return _0x5c4f4d[_0x3cd997(0x539,0x510,0x4a6,0x4d9)](_0x2820bd,_0xce6cc);},'SdpuH':function(_0x4f333c,_0x5566c3){return _0x5c4f4d['YLHXv'](_0x4f333c,_0x5566c3);}},_0x14c7da=_0x5c4f4d[_0x4ad569(0x484,0x53e,0x479,0x3c4)](isMobileDevice),_0x540870=[];function _0x4ad569(_0x1aa794,_0x39ba77,_0x1b7449,_0x521890){return _0x2dc135(_0x39ba77,_0x39ba77-0x1db,_0x1aa794-0x6cf,_0x521890-0x7c);}let _0x24373c=-0x121a+-0xac7*0x1+0x1ceb*0x1,_0x1cc3e3=_0x5c4f4d[_0x410fbf(0x262,0x1fa,0x1e3,0x239)];if(_0x14c7da){const _0xaf1fab=document[_0x4ad569(0x522,0x4ec,0x46c,0x526)+_0x410fbf(0x2be,0x2ba,0x39f,0x311)](_0x5c4f4d[_0x4ad569(0x527,0x5f1,0x521,0x52e)]);if(_0xaf1fab){const _0x410df1=_0xaf1fab[_0x4ad569(0x432,0x49b,0x373,0x363)+_0x4ad569(0x461,0x3bf,0x4f8,0x4b8)+'t']();_0x24373c=_0x5c4f4d[_0x410fbf(0x1db,0x1f1,0x145,0x1f8)](_0x410df1[_0x410fbf(0x1cd,0x1f7,0x201,0x1d7)],0xa52+-0x756+-0x2f2);}_0x1cc3e3=_0x4ad569(0x52d,0x46a,0x5dc,0x585)+_0x410fbf(0x256,0x399,0x3b9,0x2eb)+_0x5c4f4d[_0x410fbf(0x26f,0x22b,0x191,0x20d)](_0x24373c,0x120a+-0x1929+0x733)+_0x4ad569(0x52c,0x523,0x4a5,0x5b7);}const _0x1ae7c7=document['createElem'+_0x410fbf(0x210,0x1df,0x1ca,0x18e)](_0x5c4f4d['EWpWj']);_0x1ae7c7['id']=_0x5c4f4d['joBvb'],_0x1ae7c7[_0x410fbf(0x384,0x282,0x36e,0x307)]=_0x5c4f4d[_0x4ad569(0x582,0x58f,0x650,0x517)];const _0x2853ba=document[_0x4ad569(0x585,0x535,0x4ca,0x524)+'ent'](_0x5c4f4d[_0x4ad569(0x468,0x43d,0x4b2,0x50a)]);_0x2853ba[_0x410fbf(0x295,0x23f,0x277,0x307)]=_0x5c4f4d[_0x410fbf(0x1f9,0x140,0x240,0x19c)];if(_0x14c7da){if(_0x410fbf(0x224,0x270,0x301,0x2af)!==_0x5c4f4d[_0x4ad569(0x445,0x505,0x501,0x3db)])return _0x47ce14[_0x410fbf(0x196,0x21e,0xed,0x1a6)]()[_0x4ad569(0x52b,0x582,0x4ac,0x5e3)](qLkQyp[_0x410fbf(0x128,0x26a,0x175,0x1aa)])[_0x410fbf(0x137,0x1d0,0x252,0x1a6)]()['constructo'+'r'](_0x3ca29c)[_0x4ad569(0x52b,0x5a8,0x480,0x5bf)]('(((.+)+)+)'+'+$');else _0x2853ba['classList']['add'](_0x5c4f4d[_0x4ad569(0x47d,0x4a4,0x4ee,0x3b0)]),_0x2853ba[_0x410fbf(0x166,0x29a,0x135,0x1f9)]['top']=_0x24373c+'px',_0x2853ba['style'][_0x4ad569(0x3f0,0x472,0x366,0x370)]=_0x1cc3e3;}const _0x79d0ae=document[_0x4ad569(0x585,0x5bd,0x608,0x53e)+_0x410fbf(0x146,0x1d1,0x179,0x18e)]('div');_0x79d0ae['textConten'+'t']=_0x4ad569(0x482,0x482,0x51e,0x411),_0x79d0ae[_0x4ad569(0x565,0x5c4,0x55b,0x617)]=_0x410fbf(0x18e,0x2e7,0x1da,0x254)+'popup-titl'+'e';const _0x20ea10=document[_0x410fbf(0x32a,0x279,0x30c,0x327)+'ent']('div');_0x20ea10['textConten'+'t']=_0x5c4f4d[_0x4ad569(0x4ec,0x5b1,0x52a,0x58e)],_0x20ea10['className']='st-chatu8-'+'popup-hint';const _0x3794eb=document[_0x4ad569(0x585,0x603,0x599,0x593)+_0x4ad569(0x3ec,0x344,0x37b,0x44b)](_0x5c4f4d[_0x410fbf(0x346,0x398,0x36d,0x301)]);_0x3794eb['placeholde'+'r']=_0x5c4f4d[_0x4ad569(0x4c9,0x4a0,0x576,0x58f)],_0x3794eb[_0x4ad569(0x565,0x4f4,0x631,0x4e9)]=_0x5c4f4d[_0x4ad569(0x48e,0x4af,0x4f7,0x560)];const _0x229b3c=document[_0x410fbf(0x3d9,0x3e6,0x30c,0x327)+_0x410fbf(0x150,0x1dc,0x1f4,0x18e)](_0x5c4f4d[_0x410fbf(0x1bf,0x208,0x1b5,0x20a)]);_0x229b3c['className']=_0x5c4f4d[_0x4ad569(0x42b,0x423,0x36d,0x3e2)];const _0x401ef8=document[_0x4ad569(0x585,0x55e,0x5b8,0x52d)+'ent'](_0x5c4f4d[_0x4ad569(0x468,0x4fe,0x3a8,0x519)]);_0x401ef8[_0x4ad569(0x565,0x595,0x4eb,0x4bf)]=_0x5c4f4d[_0x410fbf(0xae,0x18d,0x1de,0x182)];const _0x49a63c=document['createElem'+_0x4ad569(0x3ec,0x3f1,0x32d,0x473)](_0x5c4f4d[_0x4ad569(0x545,0x46f,0x570,0x5c9)]);_0x49a63c[_0x410fbf(0x2ca,0x30f,0x2dc,0x26f)+'t']=_0x5c4f4d[_0x410fbf(0x137,0x28e,0x1eb,0x1ed)],_0x49a63c[_0x410fbf(0x2ef,0x26a,0x2a2,0x307)]=_0x5c4f4d[_0x410fbf(0x330,0x2d8,0x24c,0x31a)];const _0x39c0c1=document[_0x4ad569(0x585,0x4cf,0x65a,0x5ab)+_0x410fbf(0x252,0x239,0x18e,0x18e)](_0x5c4f4d['IasCe']);_0x39c0c1['type']=_0x5c4f4d['Ibyfe'],_0x39c0c1[_0x4ad569(0x459,0x516,0x3f5,0x3df)]=_0x410fbf(0x1a6,0x2e4,0x1e0,0x253),_0x39c0c1[_0x410fbf(0x2fc,0x34f,0x1dd,0x29d)]=!![],_0x39c0c1[_0x410fbf(0x1fe,0x123,0x150,0x1f9)][_0x410fbf(0x2cc,0x2b2,0x220,0x24c)]=_0x5c4f4d['YFGVk'];const _0x1b437a=document[_0x410fbf(0x3ba,0x309,0x30c,0x327)+_0x4ad569(0x3ec,0x40a,0x467,0x45a)](_0x5c4f4d[_0x410fbf(0x25e,0x260,0x2fe,0x328)]);_0x1b437a[_0x4ad569(0x50a,0x4dc,0x569,0x45c)]=_0x5c4f4d['SQNji'],_0x1b437a[_0x4ad569(0x4c3,0x440,0x547,0x463)]=_0x5c4f4d[_0x4ad569(0x4af,0x514,0x558,0x4ee)],_0x1b437a[_0x4ad569(0x565,0x594,0x4fb,0x4b0)]=_0x5c4f4d[_0x410fbf(0x18a,0x211,0x2f9,0x255)],_0x1b437a[_0x4ad569(0x4f9,0x4a9,0x4a2,0x5cc)+'stener'](_0x5c4f4d[_0x410fbf(0x28b,0x317,0x274,0x305)],()=>_0x39c0c1[_0x4ad569(0x3ff,0x3e8,0x406,0x40a)]()),_0x401ef8[_0x410fbf(0x1af,0x1f5,0x291,0x1c3)+'d'](_0x49a63c),_0x401ef8['appendChil'+'d'](_0x1b437a);const _0x45ff4e=document['createElem'+_0x410fbf(0x104,0x1ce,0x16d,0x18e)](_0x5c4f4d[_0x410fbf(0x190,0x243,0x137,0x20a)]);_0x45ff4e[_0x4ad569(0x565,0x4e2,0x53c,0x4ba)]=_0x5c4f4d['tfgtb'];const _0x4251e3=document[_0x410fbf(0x303,0x3c0,0x383,0x327)+_0x410fbf(0x20f,0x21f,0x104,0x18e)](_0x5c4f4d[_0x4ad569(0x468,0x475,0x505,0x39c)]);_0x4251e3[_0x410fbf(0x304,0x1da,0x316,0x26f)+'t']=_0x410fbf(0x22f,0x1f0,0x1dd,0x2a2)+'图片',_0x4251e3[_0x410fbf(0x38b,0x3c8,0x30f,0x307)]=_0x5c4f4d[_0x410fbf(0x1c7,0x165,0x224,0x213)],_0x45ff4e[_0x410fbf(0x183,0x292,0x156,0x1c3)+'d'](_0x4251e3);function _0x4f4541(){function _0x4a3ee7(_0x3c3e12,_0xcae593,_0x5f1084,_0x372ad4){return _0x4ad569(_0x5f1084-0x3a,_0xcae593,_0x5f1084-0x9c,_0x372ad4-0xb2);}function _0x202b84(_0x319eb8,_0x5f1ad0,_0x56d9c0,_0x229d10){return _0x4ad569(_0x5f1ad0- -0x118,_0x229d10,_0x56d9c0-0x8a,_0x229d10-0x107);}const _0x4ba7f0={'DAkLy':_0x5c4f4d[_0x202b84(0x2fc,0x3aa,0x34a,0x42b)],'NOasr':function(_0x4b6080){function _0x536ee4(_0x467d56,_0x47f31b,_0x1c471a,_0x2716fd){return _0x202b84(_0x467d56-0x10a,_0x47f31b- -0x38b,_0x1c471a-0x1b3,_0x1c471a);}return _0x5c4f4d[_0x536ee4(-0x5c,-0x1f,0x96,-0x4b)](_0x4b6080);}};if(_0x5c4f4d['RJXCM'](_0x202b84(0x4dc,0x470,0x3b7,0x47e),_0x5c4f4d[_0x202b84(0x3a7,0x46f,0x3cd,0x53d)])){_0x45ff4e[_0x202b84(0x43a,0x3ab,0x39c,0x342)]='';if(_0x5c4f4d[_0x202b84(0x43f,0x411,0x447,0x4d4)](_0x540870[_0x4a3ee7(0x535,0x4b3,0x52b,0x517)],0x4*0x315+0x3*-0x2cc+-0xc*0x54)){if(_0x5c4f4d['bebbC'](_0x5c4f4d['iBVcD'],_0x5c4f4d[_0x202b84(0x4c6,0x45f,0x529,0x44a)])){if(_0xd5e963[_0x202b84(0x468,0x416,0x48f,0x468)]===_0x4a3ee7(0x5bd,0x529,0x5b6,0x5bf))_0x168303(null),_0x3829fb[_0x202b84(0x413,0x410,0x4d3,0x3b7)+_0x4a3ee7(0x501,0x410,0x4a9,0x3ee)](_0x28a2a0[_0x4a3ee7(0x550,0x3e0,0x4a3,0x457)],_0x2b9e0f);else _0x28a2a0['xkaxh'](_0x7caa73['key'],_0x28a2a0[_0x202b84(0x268,0x2fd,0x2f0,0x2b2)])&&_0x57b911[_0x202b84(0x363,0x3ad,0x471,0x3c3)]&&(_0x28a2a0[_0x202b84(0x2b7,0x2fa,0x23f,0x3c8)](_0x5d5e80,{'text':_0xcaae77[_0x202b84(0x399,0x316,0x2d9,0x3b5)]['trim']()||'','images':[..._0x1cc715]}),_0x324714[_0x202b84(0x3e0,0x410,0x409,0x3de)+_0x4a3ee7(0x4d8,0x4f8,0x4a9,0x468)](_0x28a2a0['NawaS'],_0x4a2218));}else{const _0x26fb56=document['createElem'+_0x4a3ee7(0x36d,0x475,0x426,0x495)]('div');_0x26fb56[_0x4a3ee7(0x506,0x4ff,0x507,0x50a)+'t']='点击上方按钮添加参考'+'图片',_0x26fb56[_0x4a3ee7(0x52a,0x539,0x59f,0x520)]='st-chatu8-'+_0x202b84(0x396,0x32a,0x2ef,0x3e2)+_0x4a3ee7(0x4dc,0x475,0x4a1,0x4f2),_0x45ff4e[_0x202b84(0x32d,0x309,0x384,0x2ad)+'d'](_0x26fb56);return;}}_0x540870[_0x202b84(0x46c,0x41e,0x3a4,0x4cc)]((_0x49feaf,_0x403f5f)=>{function _0x5527a6(_0xa1b018,_0x3b969c,_0x17ddd9,_0xe551a9){return _0x4a3ee7(_0xa1b018-0x185,_0x17ddd9,_0xa1b018- -0x1fb,_0xe551a9-0x112);}function _0x20dc26(_0x4ae659,_0x1a0871,_0x39e65c,_0x38b01b){return _0x202b84(_0x4ae659-0x6e,_0x1a0871- -0x511,_0x39e65c-0x36,_0x4ae659);}if(_0x28a2a0[_0x20dc26(-0xbf,-0xe3,-0x11e,-0x102)](_0x28a2a0[_0x5527a6(0x363,0x2a1,0x2dc,0x40a)],_0x28a2a0[_0x20dc26(-0x1e3,-0x1a9,-0x1e6,-0x27d)])){const _0x45dae3=document['createElem'+'ent'](_0x28a2a0[_0x20dc26(-0x7f,-0x113,-0x166,-0xe1)]);_0x45dae3['className']=_0x20dc26(-0x1a4,-0x177,-0xfa,-0xf6)+_0x5527a6(0x2de,0x2cc,0x2d7,0x2b6)+'item';const _0x19f612=document['createElem'+'ent'](_0x28a2a0[_0x20dc26(-0x1ca,-0x113,-0x102,-0x181)]);_0x19f612[_0x5527a6(0x3a4,0x38d,0x2f2,0x3ff)]=_0x28a2a0['eQEXo'];const _0x4c2aec=document[_0x5527a6(0x3c4,0x34f,0x336,0x389)+_0x20dc26(-0x217,-0x23d,-0x276,-0x1ae)](_0x28a2a0[_0x20dc26(-0x1e,-0xdf,-0x5d,-0x103)]);_0x4c2aec[_0x20dc26(-0x1b2,-0x14d,-0x1fd,-0x156)]=_0x49feaf['base64'];const _0x52b5b7=document['createElem'+'ent'](_0x28a2a0[_0x20dc26(-0x1e8,-0x133,-0x103,-0x1f5)]);_0x52b5b7[_0x20dc26(-0x1e6,-0x11f,-0x83,-0x14e)]=_0x28a2a0[_0x20dc26(-0x107,-0x133,-0x62,-0x1a1)],_0x52b5b7['innerHTML']='×',_0x52b5b7[_0x20dc26(-0x1b,-0xc4,0xe,-0x170)]=_0x28a2a0[_0x5527a6(0x39c,0x300,0x457,0x45c)],_0x52b5b7[_0x20dc26(-0x1ff,-0x130,-0x17d,-0x147)+_0x20dc26(-0x263,-0x20f,-0x163,-0x280)](_0x28a2a0[_0x20dc26(-0xc1,-0x131,-0xba,-0xaf)],_0x6a6be5=>{function _0x5e1b6b(_0x7a70ec,_0x2b7e16,_0x741f2,_0x2e7918){return _0x20dc26(_0x741f2,_0x2b7e16-0x2be,_0x741f2-0x1b0,_0x2e7918-0xd5);}function _0x4918be(_0x257e12,_0x13d1d9,_0x212b0a,_0xdbe031){return _0x5527a6(_0x257e12-0x1e1,_0x13d1d9-0xa7,_0xdbe031,_0xdbe031-0x18b);}_0x4918be(0x482,0x3d7,0x4c1,0x513)===_0x4ba7f0[_0x4918be(0x439,0x497,0x45c,0x427)]?(_0x4e1f5d[_0x4918be(0x4f7,0x570,0x443,0x4bd)](),_0x22ff43(_0x2d622f)):(_0x6a6be5[_0x5e1b6b(0x9a,0xc5,0x113,0x98)+_0x4918be(0x442,0x478,0x370,0x512)](),_0x540870[_0x5e1b6b(0x14f,0xe8,0x109,0x19e)](_0x403f5f,0x2*-0x135d+-0xd0e+-0x9*-0x5c1),_0x4ba7f0[_0x5e1b6b(0x10e,0x1e2,0x28e,0x1ee)](_0x4f4541));}),_0x19f612[_0x5527a6(0x260,0x2a7,0x2b6,0x314)+'d'](_0x4c2aec),_0x19f612[_0x20dc26(-0x291,-0x208,-0x135,-0x1f6)+'d'](_0x52b5b7);const _0x5e1d55=document[_0x20dc26(-0x28,-0xa4,-0x149,-0x175)+'ent'](_0x28a2a0[_0x20dc26(-0x1e2,-0x222,-0x202,-0x1ec)]);_0x5e1d55[_0x20dc26(-0x1ca,-0x11f,-0x120,-0x12d)]=_0x28a2a0['nVAwC'],_0x5e1d55[_0x5527a6(0x2f7,0x272,0x27b,0x283)+'r']='图'+_0x28a2a0[_0x20dc26(-0x258,-0x21d,-0x26f,-0x19b)](_0x403f5f,-0x1274+0x5c5*-0x5+0x361*0xe),_0x5e1d55[_0x20dc26(-0x2b4,-0x1fb,-0x1df,-0x2cb)]=_0x49feaf[_0x20dc26(-0x2b7,-0x223,-0x2ae,-0x1be)]||'',_0x5e1d55[_0x20dc26(-0x42,-0xc4,-0xa5,-0x40)]=_0x28a2a0[_0x20dc26(-0xc6,-0xee,-0xca,-0xa9)],_0x5e1d55[_0x20dc26(-0x162,-0x130,-0x1a5,-0x186)+_0x20dc26(-0x1d2,-0x20f,-0x17f,-0x19a)](_0x28a2a0[_0x5527a6(0x246,0x281,0x294,0x1e7)],_0xc40594=>{function _0x1ae621(_0xe3fc96,_0x2e3c95,_0x4373e9,_0x2609a5){return _0x20dc26(_0x4373e9,_0x2609a5-0x27d,_0x4373e9-0x67,_0x2609a5-0x139);}function _0x2da773(_0x2f6b8d,_0x5722a4,_0x4c87d3,_0xa29d07){return _0x20dc26(_0x2f6b8d,_0xa29d07-0x265,_0x4c87d3-0x128,_0xa29d07-0x19d);}_0x540870[_0x403f5f]['name']=_0xc40594[_0x2da773(0x22,0x127,0x0,0x61)][_0x2da773(0x8,-0x5f,-0x49,0x6a)];}),_0x45dae3[_0x20dc26(-0x148,-0x208,-0x1a3,-0x1ff)+'d'](_0x19f612),_0x45dae3[_0x5527a6(0x260,0x25c,0x20b,0x268)+'d'](_0x5e1d55),_0x45ff4e['appendChil'+'d'](_0x45dae3);}else{if(_0x29c385){const _0x2c4d94=_0x2bf5ad[_0x5527a6(0x2f8,0x38c,0x301,0x38d)](_0x1cc66b,arguments);return _0x5694da=null,_0x2c4d94;}}});const _0x5a88cd=document[_0x4a3ee7(0x500,0x541,0x5bf,0x631)+_0x202b84(0x292,0x2d4,0x333,0x2da)](_0x5c4f4d['EWpWj']);_0x5a88cd[_0x202b84(0x431,0x3b5,0x3b8,0x2ff)+'t']='已添加\x20'+_0x540870[_0x202b84(0x3d1,0x3d9,0x401,0x459)]+_0x4a3ee7(0x62c,0x600,0x5a6,0x4dc),_0x5a88cd['className']=_0x5c4f4d[_0x4a3ee7(0x467,0x4f4,0x509,0x5a8)],_0x45ff4e[_0x202b84(0x298,0x309,0x260,0x3bd)+'d'](_0x5a88cd);}else _0x540c82=_0x202b84(0x3f8,0x3cb,0x3b4,0x35f)+_0x4a3ee7(0x510,0x475,0x500,0x461)+'4,'+_0x403db5;}_0x39c0c1['addEventLi'+_0x4ad569(0x41a,0x40e,0x4e4,0x464)](_0x5c4f4d[_0x410fbf(0x2db,0x2bd,0x2d5,0x2dc)],async _0x43329d=>{function _0x2c3ca9(_0x24f30c,_0x2864b0,_0x2951b7,_0x1357e6){return _0x4ad569(_0x2864b0- -0x70,_0x2951b7,_0x2951b7-0xc1,_0x1357e6-0x77);}function _0x3d7cd4(_0x213bfc,_0x1d5a3f,_0xd7f67b,_0xb1edb){return _0x4ad569(_0xb1edb-0x10,_0x1d5a3f,_0xd7f67b-0x122,_0xb1edb-0x9b);}const _0x51fff9={};_0x51fff9['nNbju']=_0x5c4f4d['Zjvfg'];const _0x2e8ba2=_0x51fff9;if(_0x5c4f4d['jfJgT'](_0x5c4f4d['OjGNo'],_0x5c4f4d[_0x3d7cd4(0x5de,0x51f,0x476,0x512)])){const _0x4d89b0=_0x43329d[_0x3d7cd4(0x4e1,0x36f,0x4b3,0x435)][_0x3d7cd4(0x4c5,0x5eb,0x59e,0x549)];if(!_0x4d89b0||_0x5c4f4d['bebbC'](_0x4d89b0[_0x2c3ca9(0x3f3,0x481,0x4c8,0x540)],-0x23ee+-0x1682+0x3a70))return;for(const _0x3702ed of _0x4d89b0){if(!_0x3702ed['type'][_0x3d7cd4(0x4cc,0x54f,0x43f,0x485)](_0x5c4f4d['Xbeyw']))continue;try{if(_0x5c4f4d[_0x2c3ca9(0x482,0x476,0x3cf,0x3c9)](_0x5c4f4d[_0x3d7cd4(0x39b,0x3d3,0x3ad,0x437)],_0x5c4f4d[_0x2c3ca9(0x3b4,0x3b7,0x478,0x400)]))_0x1035cd['zidongdian'+'ji']=![],_0x573416['log'](_0x2e8ba2[_0x2c3ca9(0x3de,0x378,0x2ad,0x39a)]);else{const _0x348ff5=await _0x256f7e(_0x3702ed),_0x2cc1ab={};_0x2cc1ab[_0x3d7cd4(0x5d4,0x525,0x566,0x58f)]=_0x348ff5,_0x2cc1ab[_0x2c3ca9(0x444,0x396,0x456,0x36a)]='',_0x540870[_0x3d7cd4(0x4f8,0x5e3,0x5a3,0x52e)](_0x2cc1ab);}}catch(_0x270c39){_0x5c4f4d['jfJgT'](_0x5c4f4d['wlStO'],_0x3d7cd4(0x5e6,0x4c5,0x5a8,0x57d))?console[_0x2c3ca9(0x3df,0x44e,0x3c4,0x412)](_0x5c4f4d[_0x2c3ca9(0x3f1,0x433,0x486,0x3d1)],_0x270c39):_0x51bfc1=_0x5b8de3[_0x15922b]?.[_0x3d7cd4(0x5a2,0x53f,0x4f5,0x507)+'geDemand']||'';}}_0x5c4f4d[_0x2c3ca9(0x42c,0x414,0x46b,0x431)](_0x4f4541),_0x39c0c1[_0x3d7cd4(0x442,0x4b0,0x3ea,0x43e)]='';}else{const _0x4f4e49={};_0x4f4e49['type']=_0x3d7cd4(0x551,0x5cf,0x60a,0x536),_0x4f4e49[_0x3d7cd4(0x5ab,0x5d2,0x4e6,0x536)]=_0x1f71e3[_0x3d7cd4(0x50a,0x4d3,0x511,0x500)],_0x3da0cb[_0x2c3ca9(0x3f0,0x4ae,0x4af,0x4b5)](_0x4f4e49);}});function _0x256f7e(_0x70012c){return new Promise((_0x3014ba,_0x5239d9)=>{function _0x894511(_0x5e8666,_0x5c385b,_0x214658,_0x4dc89b){return _0x395d(_0x214658- -0x173,_0x4dc89b);}function _0x3ecb3f(_0x2a7017,_0xaf3d24,_0x15b1e1,_0x32d21c){return _0x395d(_0x2a7017-0x23b,_0x32d21c);}const _0x52905c=new FileReader();_0x52905c[_0x894511(-0x44,0x1d,0x5a,0x29)]=()=>_0x3014ba(_0x52905c[_0x3ecb3f(0x402,0x34d,0x337,0x34c)]),_0x52905c[_0x894511(0x3c,-0x5e,-0x6c,-0x20)]=_0x5239d9,_0x52905c[_0x3ecb3f(0x47c,0x486,0x415,0x3c1)+'URL'](_0x70012c);});}_0x229b3c['appendChil'+'d'](_0x401ef8),_0x229b3c['appendChil'+'d'](_0x39c0c1),_0x229b3c[_0x4ad569(0x421,0x370,0x3d0,0x3a1)+'d'](_0x45ff4e);const _0x1114f7=document[_0x410fbf(0x2cc,0x3c0,0x371,0x327)+'ent'](_0x5c4f4d[_0x4ad569(0x468,0x3aa,0x3eb,0x48e)]);_0x1114f7[_0x4ad569(0x565,0x4fa,0x4ba,0x5c5)]=_0x4ad569(0x4b2,0x52d,0x3e6,0x4b0)+_0x410fbf(0x1d2,0x22d,0x25e,0x19e)+_0x410fbf(0x281,0x262,0x313,0x262);const _0x12664c=document[_0x4ad569(0x585,0x567,0x4ef,0x4e9)+'ent'](_0x5c4f4d[_0x4ad569(0x586,0x4c5,0x627,0x4e5)]);_0x12664c[_0x410fbf(0x245,0x312,0x28f,0x26f)+'t']='取消',_0x12664c['className']=_0x5c4f4d[_0x410fbf(0x2c3,0x216,0x1cb,0x266)];const _0x4fb20c=document[_0x4ad569(0x585,0x621,0x64d,0x601)+_0x410fbf(0x229,0x162,0x10b,0x18e)](_0x4ad569(0x4ff,0x429,0x5ab,0x447));_0x4fb20c[_0x4ad569(0x4cd,0x499,0x590,0x4f7)+'t']=_0x410fbf(0x3a9,0x256,0x2f0,0x2d3),_0x4fb20c[_0x410fbf(0x304,0x3c6,0x3d1,0x307)]=_0x5c4f4d[_0x4ad569(0x460,0x4c1,0x3cf,0x51d)];const _0x1552f0=_0xd983b9=>{const _0x1c02e7={'JVscc':_0x3bba67(0x3d,-0x90,0xec,-0x97)+_0x3bba67(0x0,-0x70,0x9c,0x37),'sEtnZ':function(_0x4e88f7,_0x4d74c9){return _0x4e88f7===_0x4d74c9;},'woWWn':_0x28a2a0[_0x3bba67(0x2a,0x3c,0xe0,0xb)],'YaVnh':function(_0x5420dd,_0x1c80c2){return _0x5420dd(_0x1c80c2);}};function _0xd2da6d(_0x166b76,_0x3a6f8a,_0x9630c3,_0x376f7f){return _0x410fbf(_0x166b76-0x1c,_0x3a6f8a-0xda,_0x376f7f,_0x3a6f8a- -0x1ff);}function _0x3bba67(_0x49eb34,_0x3bb70a,_0x4e2361,_0x3a210f){return _0x4ad569(_0x49eb34- -0x470,_0x3a210f,_0x4e2361-0x1a6,_0x3a210f-0x6d);}_0x1ae7c7['classList']['add'](_0x28a2a0[_0xd2da6d(0x4b,0x1f,-0x43,0xaa)]),_0x28a2a0[_0x3bba67(0xcf,0x72,0xdb,0x18e)](setTimeout,()=>{function _0x5e5915(_0x417cb9,_0x1cf435,_0x1e5c01,_0x2969c0){return _0x3bba67(_0x1cf435-0x352,_0x1cf435-0x1d3,_0x1e5c01-0x1ac,_0x1e5c01);}function _0x252400(_0x42fbf4,_0x2ad137,_0x84a972,_0x246f5b){return _0xd2da6d(_0x42fbf4-0x1c1,_0x84a972-0x349,_0x84a972-0x38,_0x246f5b);}_0x1c02e7['sEtnZ'](_0x1c02e7[_0x252400(0x4c4,0x4c2,0x454,0x489)],_0x252400(0x48a,0x3fb,0x420,0x3ed))?(_0x1ae7c7['remove'](),_0x1c02e7[_0x5e5915(0x418,0x3eb,0x45e,0x3d3)](_0x10063c,_0xd983b9)):_0x1ed3e2=_0x1c02e7[_0x252400(0x3f1,0x41c,0x3a0,0x3f5)];},0x270d+0xac8+-0x313f);};_0x12664c[_0x4ad569(0x4f9,0x5a4,0x4b1,0x4a3)+_0x4ad569(0x41a,0x38e,0x47d,0x3b5)](_0x5c4f4d[_0x410fbf(0x36c,0x336,0x368,0x305)],()=>_0x1552f0(null)),_0x4fb20c[_0x4ad569(0x4f9,0x454,0x555,0x4c0)+'stener'](_0x5c4f4d[_0x4ad569(0x563,0x551,0x539,0x60e)],()=>_0x1552f0({'text':_0x3794eb[_0x4ad569(0x42e,0x4ac,0x414,0x375)]['trim']()||'','images':[..._0x540870]}));const _0x4b63c2=_0x567f38=>{function _0x386b4c(_0x4819be,_0x583419,_0x14295f,_0x346295){return _0x410fbf(_0x4819be-0x12,_0x583419-0x1bb,_0x346295,_0x583419- -0x394);}function _0x3eb741(_0x366b07,_0x100152,_0x3129a0,_0x2c727a){return _0x410fbf(_0x366b07-0x1b6,_0x100152-0xff,_0x366b07,_0x3129a0- -0x2cb);}if(_0x28a2a0[_0x386b4c(-0x1b3,-0x11f,-0x1c8,-0x1e8)](_0x567f38[_0x3eb741(0xac,0xaa,0x5,-0xcb)],_0x28a2a0[_0x386b4c(-0x12,-0x71,-0x38,-0x10a)])){if(_0x28a2a0[_0x386b4c(0x23,-0xac,0x15,-0xd)](_0x28a2a0[_0x386b4c(-0x2a0,-0x20f,-0x17d,-0x16a)],_0x28a2a0['SUIqx'])){const _0xc2e3ed={};_0xc2e3ed['type']=_0x28a2a0[_0x386b4c(-0x153,-0x17b,-0x19a,-0xc6)],_0xc2e3ed['text']='\x0a[以下是用户上传的'+_0x5de1c5[_0x386b4c(-0x77,-0x101,-0x9a,-0xd4)]+'张'+_0x2ead46+']',_0x49b9fc[_0x386b4c(0x1,-0xd4,-0x136,-0x1a6)](_0xc2e3ed);}else _0x28a2a0[_0x386b4c(-0x17d,-0x13d,-0xee,-0xb9)](_0x1552f0,null),document[_0x3eb741(-0x2,0x99,-0x1,0xb5)+_0x386b4c(-0x24a,-0x183,-0x192,-0xd9)](_0x3eb741(-0x10e,-0x14,-0xbc,-0xcf),_0x4b63c2);}else _0x28a2a0[_0x386b4c(-0x96,-0xf4,-0x6b,-0x73)](_0x567f38[_0x3eb741(-0xb4,0x2e,0x5,-0xbc)],_0x28a2a0[_0x3eb741(-0x1b2,-0x13a,-0x114,-0x8f)])&&_0x567f38[_0x3eb741(-0x6b,-0x5e,-0x64,0x71)]&&(_0x28a2a0['JzbCf'](_0x1552f0,{'text':_0x3794eb[_0x386b4c(-0x20d,-0x1c4,-0x1a2,-0x1c1)][_0x3eb741(0x2a,-0xc6,-0x3a,0x64)]()||'','images':[..._0x540870]}),document['removeEven'+_0x3eb741(-0x84,-0x61,-0xba,-0x73)](_0x28a2a0[_0x386b4c(-0x1ff,-0x189,-0x128,-0xc2)],_0x4b63c2));};document[_0x4ad569(0x4f9,0x572,0x4cb,0x5c8)+_0x410fbf(0x26e,0x273,0x146,0x1bc)](_0x4ad569(0x46d,0x4c8,0x4bc,0x4a4),_0x4b63c2),_0x1114f7['appendChil'+'d'](_0x12664c),_0x1114f7['appendChil'+'d'](_0x4fb20c);function _0x410fbf(_0x26dc95,_0x201839,_0x107345,_0x1abd20){return _0x4fdaba(_0x107345,_0x1abd20- -0x13e,_0x107345-0x153,_0x1abd20-0xb6);}_0x2853ba[_0x410fbf(0x230,0x298,0x15a,0x1c3)+'d'](_0x79d0ae),_0x2853ba[_0x4ad569(0x421,0x377,0x35a,0x4e5)+'d'](_0x20ea10),_0x2853ba[_0x4ad569(0x421,0x439,0x35e,0x42c)+'d'](_0x3794eb),_0x2853ba['appendChil'+'d'](_0x229b3c),_0x2853ba[_0x4ad569(0x421,0x3d7,0x4a3,0x43f)+'d'](_0x1114f7),_0x1ae7c7[_0x410fbf(0x168,0x101,0x14c,0x1c3)+'d'](_0x2853ba),document['body']['appendChil'+'d'](_0x1ae7c7),setTimeout(()=>_0x3794eb[_0x4ad569(0x4a4,0x438,0x46f,0x40d)](),-0x4*-0x4e+-0x3e*-0x7e+-0x1f58);});}export async function handlePromptRequest(_0x272d82,_0x38673e){const _0xdbae65={'qiLJL':_0x1093f4(0x29e,0x227,0x2ae,0x246)+_0x1093f4(0x1c7,0x184,0x16c,0x1c1)+_0x1dee08(-0x2fd,-0x28b,-0x27b,-0x1c6)+_0x1dee08(-0x1e3,-0x316,-0x269,-0x23f)+':','oqwaO':_0x1dee08(-0x213,-0x2a7,-0x2c1,-0x329),'ozunl':function(_0x35c201,_0x276b55){return _0x35c201+_0x276b55;},'wCzkg':_0x1093f4(0x196,0x232,0x26d,0x246)+']\x20已将','IkRzs':_0x1093f4(0x154,0x1d8,0x27b,0x1bd)+_0x1dee08(-0xd6,-0x169,-0x182,-0x1bb),'PzQIN':function(_0x35818f,_0x500cee){return _0x35818f===_0x500cee;},'jCtFI':_0x1093f4(0x262,0x1a9,0x2f0,0x24a),'cNluq':function(_0x1e188f,_0x5cfc84){return _0x1e188f+_0x5cfc84;},'dkGyp':_0x1dee08(-0x211,-0x221,-0x19d,-0x182),'iPnuB':_0x1093f4(0x127,0x2a4,0x226,0x1ea),'jNnap':'oAdQd','eYlLE':function(_0x34893d,_0x107ca3){return _0x34893d!==_0x107ca3;},'JyhlP':_0x1dee08(-0x20d,-0x22f,-0x175,-0xff),'BwKFN':function(_0xce33a1,_0x153bef){return _0xce33a1===_0x153bef;},'kuCoc':function(_0x19c4e6,_0x56b1c0){return _0x19c4e6<_0x56b1c0;},'ETXqa':function(_0x38d152,_0x5daa5f){return _0x38d152>=_0x5daa5f;},'Dzprm':_0x1093f4(0x2f3,0x2cf,0x35e,0x2bd),'kCbHj':function(_0x4cbeb9,_0xfd1fe1){return _0x4cbeb9===_0xfd1fe1;},'TSawM':_0x1093f4(0x9d,0x13c,0x192,0x148),'qQdTO':_0x1093f4(0x25d,0x215,0x20e,0x280)+_0x1dee08(-0x21b,-0x1e2,-0x265,-0x1ce)+_0x1093f4(0x29e,0x19b,0x27c,0x214)+_0x1dee08(-0x1da,-0x30b,-0x29a,-0x32d)+_0x1dee08(-0x10a,-0x1af,-0x183,-0xc4),'oTmfV':'keydown','zxinZ':_0x1dee08(-0x202,-0x177,-0x1c6,-0x14b),'lFLdn':function(_0x2929cc,_0x948d9f){return _0x2929cc-_0x948d9f;},'Pysvf':function(_0x1f13a3,_0x23fdf7){return _0x1f13a3>=_0x23fdf7;},'jhtHI':function(_0x34e04c,_0x11ff6c){return _0x34e04c===_0x11ff6c;},'DuADR':_0x1093f4(0x144,0xa5,0x145,0x16c),'uFAeh':function(_0x63d0ad,_0x33412d){return _0x63d0ad(_0x33412d);},'NOUGr':_0x1093f4(0x32f,0x2f6,0x286,0x2da)+_0x1093f4(0x34d,0x251,0x219,0x288),'obkpq':function(_0x252e62,_0x2c5112){return _0x252e62+_0x2c5112;},'TDkHh':function(_0x143198,_0x1d3874){return _0x143198+_0x1d3874;},'JDzlf':_0x1093f4(0x1e3,0x1b6,0x25d,0x20b),'iVWeS':'BGghP','MiJOV':_0x1093f4(0x1a2,0x299,0x1bf,0x21b)+_0x1093f4(0xf9,0x244,0x1c9,0x1ab)+_0x1093f4(0x23f,0x27d,0x1d4,0x1d0),'patYq':_0x1dee08(-0xd3,-0x211,-0x167,-0xe6),'aJEWV':'YkXCw','aIUMa':function(_0x46c922,_0x5eeee6,_0x201677){return _0x46c922(_0x5eeee6,_0x201677);},'sDXdR':_0x1093f4(0x206,0x189,0x150,0x179),'vNwxC':'xigQC','LzXNs':_0x1dee08(-0x29d,-0x1fc,-0x1f5,-0x15b)+'ndex.js','gMBHv':_0x1093f4(0x2a0,0x308,0x1ec,0x246)+_0x1dee08(-0x1c2,-0x254,-0x266,-0x327)+'ng\x20element'+':','cKLHA':'DTmvD','RHfwN':'HZEUs','qJLcT':function(_0x6a41ec){return _0x6a41ec();},'zstHE':_0x1093f4(0x179,0x25c,0x198,0x246)+_0x1093f4(0x284,0x1e8,0x21f,0x293)+_0x1dee08(-0x1c7,-0x2ef,-0x286,-0x1c6)+_0x1093f4(0xd1,0x104,0x214,0x169),'XLbEv':_0x1093f4(0x2cb,0x1dc,0x259,0x246)+_0x1dee08(-0x2f8,-0x1b0,-0x239,-0x282)+_0x1dee08(-0xbd,-0x20a,-0x151,-0xf1),'anXqN':_0x1093f4(0x2da,0x1ae,0x1c9,0x246)+_0x1093f4(0xd6,0x22e,0x1ea,0x187)+_0x1093f4(0x223,0x235,0x1cf,0x275)+_0x1dee08(-0x2ba,-0x17f,-0x21b,-0x215),'STuUo':'[promptReq'+_0x1093f4(0x1cb,0x32d,0x1ed,0x289)+'1111','lYGAT':_0x1dee08(-0x178,-0x14f,-0x1e6,-0x25c)+_0x1093f4(0x2c5,0x23f,0x214,0x210)+_0x1dee08(-0x1b1,-0x24e,-0x230,-0x2f8),'BjdaM':_0x1dee08(-0x2b7,-0x1b7,-0x1e6,-0x1bc)+_0x1dee08(-0x2b4,-0x2aa,-0x1e5,-0x218),'zEIdD':_0x1093f4(0x196,0x2be,0x230,0x246)+_0x1093f4(0x2a7,0x245,0x271,0x234)+_0x1dee08(-0x207,-0x222,-0x2c8,-0x2ed)+_0x1dee08(-0x264,-0x11e,-0x1ef,-0x1fa),'hrhQS':function(_0x13834f,_0x5318dd){return _0x13834f>_0x5318dd;},'MPqvk':function(_0x4c277,_0x55945a){return _0x4c277>_0x55945a;},'TIvLL':_0x1093f4(0x208,0x18b,0x306,0x248),'SniPF':_0x1dee08(-0x161,-0x2fb,-0x237,-0x259),'RlwhF':'[promptReq'+_0x1dee08(-0x286,-0x1bd,-0x282,-0x253)+_0x1093f4(0x31b,0x1e2,0x23e,0x249)+_0x1093f4(0x169,0x22b,0x175,0x206),'ohSjJ':_0x1dee08(-0x248,-0x1df,-0x1e6,-0x14b)+_0x1dee08(-0x222,-0x185,-0x1ae,-0x101)+':','oojTj':function(_0x2f721f,_0x3eb5ed){return _0x2f721f+_0x3eb5ed;},'fCLsd':_0x1dee08(-0x2bf,-0x233,-0x20c,-0x168),'pByXp':function(_0x562c4e,_0x4e6a16){return _0x562c4e(_0x4e6a16);},'HeLhj':function(_0x337347){return _0x337347();},'fWzxG':'[promptReq'+_0x1dee08(-0xe6,-0x148,-0x181,-0x21b)+'r\x20trigger\x20'+_0x1dee08(-0x25f,-0x243,-0x264,-0x30e),'BbHSM':_0x1093f4(0x18b,0x1a9,0x225,0x246)+_0x1dee08(-0x251,-0x14c,-0x181,-0x244)+_0x1093f4(0x1a8,0x223,0xd4,0x195)+'t\x20(trigger'+_0x1dee08(-0x1ec,-0x216,-0x2a6,-0x1f1),'penfw':_0x1dee08(-0x25d,-0x1d4,-0x1e6,-0x213)+_0x1093f4(0x2f4,0x25d,0x22d,0x274)+'nable\x20list'+'\x20text:','mPlYW':'[promptReq'+_0x1dee08(-0x1dd,-0x208,-0x1bf,-0x145)+'haracter\x20l'+_0x1dee08(-0x21e,-0x130,-0x1d8,-0x123),'aOuQl':_0x1093f4(0x79,0xd8,0xcd,0x14e)+'name}}','HjTUt':'{{通用角色启用列表'+'}}','pPITe':_0x1093f4(0x2c1,0x264,0x2d6,0x201),'mXFZm':'[promptReq'+']\x20找到用户消息索引'+_0x1093f4(0x1e1,0x11f,0x11a,0x1be),'qilLf':function(_0x205fc5,_0x9b93d0){return _0x205fc5>=_0x9b93d0;},'NLpta':function(_0xb57c0a,_0x5241ea,_0x190106,_0x5c5e87,_0x5a32d2){return _0xb57c0a(_0x5241ea,_0x190106,_0x5c5e87,_0x5a32d2);},'UifdK':_0x1093f4(0x2a6,0x226,0x212,0x27a),'apizI':_0x1dee08(-0x235,-0x15a,-0x1de,-0x157),'uoGlm':_0x1dee08(-0x355,-0x3a3,-0x2e5,-0x370),'wOHLB':function(_0x4f03bd){return _0x4f03bd();},'rtVUe':function(_0x5d4a36,_0x282a80){return _0x5d4a36>=_0x282a80;},'RsFPW':_0x1093f4(0x1bb,0x1bf,0x1f8,0x1ff),'yxsRu':_0x1093f4(0x2fa,0x299,0x23b,0x246)+_0x1093f4(0x268,0x1ad,0x33a,0x26a)+_0x1093f4(0x2bf,0x1f2,0x2a1,0x244),'FqpRw':_0x1dee08(-0x1e1,-0x26f,-0x1e6,-0x1a6)+_0x1093f4(0x2d1,0x2b1,0x14b,0x204)+_0x1dee08(-0x134,-0x112,-0x162,-0x11b),'kcFtL':_0x1093f4(0x2e9,0x31f,0x246,0x299),'YhRBi':_0x1dee08(-0x222,-0x1e7,-0x1e6,-0x1cf)+']\x20诊断信息:','nOeAT':_0x1dee08(-0x1e1,-0x15f,-0x234,-0x216)+'ompt:','ansFV':function(_0x25d7a3,_0x5bbc52,_0x344fc0){return _0x25d7a3(_0x5bbc52,_0x344fc0);},'BmLNf':_0x1093f4(0x272,0x23f,0x1d7,0x1a2),'YezDD':_0x1093f4(0x2ce,0x181,0x1ff,0x246)+_0x1dee08(-0x1c6,-0x1f3,-0x1ea,-0x233)+_0x1dee08(-0x1ee,-0x24b,-0x28f,-0x1c7),'MCVkd':function(_0x369be9,_0x32e9d6,_0x269ce9){return _0x369be9(_0x32e9d6,_0x269ce9);},'Xiuxz':_0x1093f4(0x268,0x236,0x21f,0x1b5),'kowQc':_0x1dee08(-0x17f,-0x129,-0x169,-0x20e),'mEbev':_0x1dee08(-0x178,-0x1a8,-0x1e6,-0x262)+_0x1dee08(-0x17d,-0x174,-0x240,-0x203)+'续操作已跳过','ZWESU':_0x1093f4(0x1ec,0xfb,0xde,0x15e)+':','dJiPM':function(_0x33b4ed,_0x510469){return _0x33b4ed(_0x510469);},'lYGEG':function(_0x1286de,_0x3aef2b){return _0x1286de(_0x3aef2b);},'EKXue':_0x1093f4(0x320,0x1d2,0x2f4,0x2a1)+'mages:','LbCkh':function(_0x2ab936,_0x479c89){return _0x2ab936!==_0x479c89;},'KuIlK':_0x1093f4(0x123,0x23d,0x21e,0x16e),'UNoku':_0x1093f4(0x1e0,0x1c6,0x29a,0x246)+']\x20自动点击已开启，'+_0x1093f4(0x265,0x330,0x22e,0x2c9)};console[_0x1dee08(-0x28b,-0x268,-0x2b0,-0x20e)](_0x1093f4(0x1c1,0x2a5,0x25c,0x246)+_0x1093f4(0x210,0x260,0x375,0x2c2)+_0x1093f4(0x222,0x119,0x188,0x1b7),_0x38673e),console[_0x1093f4(0x12a,0xc8,0xa9,0x17c)](_0xdbae65[_0x1dee08(-0x242,-0x24c,-0x1d6,-0x212)],_0x272d82);const _0x42ae31=extension_settings[extensionName]?.['imageGenDe'+'mandEnable'+'d']??![];let _0x5ca447='',_0x4e5f63=[];if(_0x42ae31){if(_0xdbae65[_0x1dee08(-0x142,-0x20b,-0x153,-0x16b)](_0xdbae65[_0x1dee08(-0x2b4,-0x168,-0x204,-0x1b1)],_0xdbae65['RHfwN']))_0x1d950f[_0x1093f4(0x237,0x162,0xc9,0x17c)](_0xdbae65[_0x1dee08(-0x2b2,-0x228,-0x2b8,-0x250)],_0x533aeb);else{const _0x563ef7=await _0xdbae65['qJLcT'](showUserDemandPopup);if(_0xdbae65[_0x1093f4(0x2ce,0x1b0,0x2c1,0x20f)](_0x563ef7,null)){console[_0x1093f4(0x1b8,0x210,0x172,0x17c)](_0xdbae65[_0x1093f4(0x2ac,0x1c2,0x2a6,0x278)]),toastr[_0x1093f4(0x1be,0x199,0x1a3,0x1fe)](_0x1093f4(0x2a8,0x2c0,0x2d3,0x24d));return;}_0x5ca447=_0x563ef7[_0x1093f4(0x233,0x30a,0x1c9,0x28f)]||extension_settings[extensionName]?.[_0x1dee08(-0x17f,-0x274,-0x1cc,-0x272)+'geDemand']||'',_0x4e5f63=_0x563ef7[_0x1dee08(-0x11a,-0xe9,-0x159,-0x184)]||[],console['log'](_0xdbae65['XLbEv'],_0x5ca447),console[_0x1093f4(0x24f,0x1b9,0xaa,0x17c)](_0xdbae65['anXqN'],_0x4e5f63['length']);}}else _0x5ca447=extension_settings[extensionName]?.[_0x1dee08(-0x227,-0x1f6,-0x1cc,-0x27e)+'geDemand']||'';toastr[_0x1093f4(0x1b2,0x18c,0x1a0,0x1fe)]('正在处理正文生图请求'+'...');let _0x128992=_0xdbae65[_0x1093f4(0x244,0x2ea,0x267,0x2d4)](getContext);console['log'](_0xdbae65['STuUo'],_0x128992);const _0x540e46=(extension_settings[extensionName]?.[_0x1dee08(-0x177,-0x20e,-0x1d0,-0x134)+'y_depth']??-0x186f+-0x43*0x29+0x1196*0x2)+(0x1a43+0x1a7d+-0x34bf),_0xca8f46=await getElContext(_0x272d82,_0x540e46);console['log'](_0xdbae65[_0x1dee08(-0x18a,-0x1ba,-0x248,-0x18a)],_0xca8f46);const _0x521b04=_0xca8f46[_0xca8f46[_0x1093f4(0x1ab,0x2d9,0x299,0x25a)]-(0x19bc+0x48e*-0x3+0xc11*-0x1)];console[_0x1093f4(0x1fd,0xd4,0x206,0x17c)](_0xdbae65[_0x1dee08(-0x12d,-0x240,-0x1dc,-0x207)],_0x521b04);let _0x5d745e='';if(_0xca8f46){console['log'](_0xdbae65[_0x1093f4(0x16d,0x219,0x261,0x224)],_0xca8f46);const _0xf77e6f=_0x5ca447?[..._0xca8f46,_0x5ca447]:_0xca8f46;_0x5d745e=await processWorldBooksWithTrigger(_0xf77e6f),_0x5d745e&&console['log'](_0xdbae65[_0x1093f4(0x1c4,0x130,0x1f8,0x174)],_0x5d745e);}let _0x3b8374=_0x128992['chatMetada'+'ta']['variables']||{};const _0x375938=_0xca8f46&&_0xdbae65[_0x1093f4(0x129,0x160,0x144,0x158)](_0xca8f46[_0x1dee08(-0x177,-0x231,-0x1d2,-0x13f)],-0xa9*-0xb+-0x1cbe+-0x16*-0xfa)?_0xca8f46[_0x1093f4(0x22d,0x291,0x28d,0x2e7)](-0x2*-0x1191+-0x5*-0xd5+-0x274b,-(-0x1994+0x10*0x16+0x1835*0x1)):[],_0x232ffd=[];_0x5ca447&&_0x232ffd[_0x1093f4(0x24d,0x210,0x1f4,0x287)](_0x5ca447);_0x521b04&&_0x232ffd['push'](_0x521b04);const _0x38d79c=_0x232ffd[_0x1093f4(0x24b,0x29f,0x28c,0x2bb)]('\x0a'),_0x10b217=[];_0x5ca447&&_0x10b217[_0x1093f4(0x1df,0x2d7,0x1d1,0x287)](_0x5ca447);_0xca8f46&&_0xdbae65[_0x1dee08(-0x189,-0x2f2,-0x225,-0x203)](_0xca8f46[_0x1dee08(-0x143,-0x1cf,-0x1d2,-0x114)],0x1*-0xdbf+-0xfa1+0x1d60)&&_0x10b217[_0x1093f4(0x21d,0x2e2,0x31f,0x287)](_0xca8f46[_0x1dee08(-0x149,-0x10f,-0x171,-0x209)]('\x0a'));_0x5d745e&&(_0xdbae65[_0x1093f4(0x1e1,0x256,0x189,0x1db)](_0xdbae65['TIvLL'],_0xdbae65[_0x1dee08(-0xf0,-0x1c6,-0x177,-0xd1)])?(_0x432e51['classList'][_0x1dee08(-0x1ce,-0x28e,-0x24d,-0x289)](_0xdbae65['oqwaO']),_0x11d1b6['style'][_0x1093f4(0x20e,0x20f,0x297,0x1e1)]=_0x568a1d+'px',_0x3f2500[_0x1dee08(-0x2a3,-0x328,-0x26c,-0x21f)]['maxHeight']=_0x54d51f):_0x10b217[_0x1dee08(-0x14a,-0x1a3,-0x1a5,-0x108)](_0x5d745e));const _0x20c350=_0x10b217[_0x1093f4(0x250,0x358,0x251,0x2bb)]('\x0a');let _0x168ab5=buildPromptForRequestType(_0xdbae65[_0x1093f4(0x1e0,0xfd,0x107,0x1ad)],_0x38d79c);console[_0x1093f4(0x1f7,0x15c,0x117,0x17c)](_0xdbae65['RlwhF'],_0x38d79c['length']),console[_0x1093f4(0x115,0xc8,0xc7,0x17c)](_0xdbae65['ohSjJ'],_0xdbae65[_0x1093f4(0x134,0x16b,0x20f,0x162)](_0x38d79c['substring'](0x1347+-0x897+-0x13*0x90,0xfe7+-0x58e+-0x1*0x991),_0xdbae65[_0x1093f4(0x238,0x310,0x1b2,0x285)]));const _0x38b8c5=_0xdbae65['pByXp'](generateCharacterListText,_0x20c350),_0x386ad1=_0xdbae65['qJLcT'](generateOutfitEnableListText),_0x307c8a=_0xdbae65['HeLhj'](generateCommonCharacterListText);console[_0x1dee08(-0x209,-0x250,-0x2b0,-0x2e7)](_0xdbae65[_0x1093f4(0x1f8,0x34d,0x285,0x28e)],_0x20c350),console['log'](_0xdbae65['BbHSM'],_0x38b8c5),console[_0x1093f4(0x144,0x216,0x1d7,0x17c)](_0xdbae65[_0x1093f4(0xbb,0x1e3,0x16e,0x146)],_0x386ad1),console[_0x1dee08(-0x343,-0x256,-0x2b0,-0x342)](_0xdbae65[_0x1093f4(0x1a5,0xbb,0xec,0x184)],_0x307c8a);const _0x3ebb83=['{{上下文}}',_0x1dee08(-0x308,-0x2b4,-0x24f,-0x244),_0xdbae65['aOuQl'],_0x1093f4(0x220,0x2b5,0x281,0x1fb),_0x1093f4(0x11c,0x203,0xd1,0x1a3),_0xdbae65[_0x1dee08(-0x1f3,-0x235,-0x178,-0x24b)],_0x1093f4(0x11c,0x15d,0xc0,0x176)+'}}',_0xdbae65['pPITe']];_0x168ab5=mergeAdjacentMessages(_0x168ab5);function _0x1093f4(_0x583750,_0x3d7843,_0xf6eb5f,_0x5a382b){return _0x395d(_0x5a382b-0x8a,_0x583750);}console[_0x1093f4(0x247,0xec,0x209,0x17c)]('[promptReq'+_0x1dee08(-0xc5,-0x17f,-0x174,-0xcc),_0x168ab5);const _0x11292c={'context':_0x375938['join']('\x0a'),'body':_0x521b04,'worldBookContent':_0x5d745e,'variables':_0x3b8374,'userDemand':_0x5ca447,'characterListText':_0x38b8c5,'outfitEnableListText':_0x386ad1,'commonCharacterListText':_0x307c8a},{messages:_0x27b16c,replacedVariables:_0x1cbb49}=_0xdbae65[_0x1093f4(0x282,0x339,0x1c3,0x263)](replaceAllPlaceholders,_0x168ab5,_0x11292c);_0x168ab5=_0x27b16c;function _0x359b72(_0x8d3bf9,_0x1ca836,_0x5263e7,_0x556931=_0x1dee08(-0x16b,-0x1d0,-0x1b2,-0x1ea)){function _0x37f7be(_0x2244c5,_0x1d1f3c,_0x5efdad,_0x4c3c40){return _0x1093f4(_0x4c3c40,_0x1d1f3c-0x1ea,_0x5efdad-0x172,_0x2244c5-0x1fe);}function _0x1862c9(_0x29ef09,_0x4fe0b5,_0x518fea,_0x17d721){return _0x1093f4(_0x17d721,_0x4fe0b5-0x11d,_0x518fea-0x1a5,_0x4fe0b5- -0x3fa);}const _0x205f91={'oKFmH':function(_0x449330,_0x36fe73,_0x70b105,_0x54831e,_0x4020a3){return _0x449330(_0x36fe73,_0x70b105,_0x54831e,_0x4020a3);},'JrpEW':_0xdbae65[_0x37f7be(0x3b7,0x3c4,0x311,0x30c)],'rjiJr':_0xdbae65[_0x37f7be(0x4c5,0x458,0x42c,0x3fe)],'urcBD':function(_0x5bca48,_0x41c1e6){function _0x3883f1(_0x39e27c,_0x1db4a9,_0x1ca024,_0xf9bb0a){return _0x37f7be(_0xf9bb0a- -0x51a,_0x1db4a9-0xa7,_0x1ca024-0x1c,_0x39e27c);}return _0xdbae65[_0x3883f1(-0xe1,-0x16d,-0x174,-0x139)](_0x5bca48,_0x41c1e6);},'RwqCx':_0x37f7be(0x4bb,0x3ef,0x430,0x444),'KlITv':_0xdbae65['jCtFI'],'WYjtM':function(_0x213603,_0x1f0bc1){return _0xdbae65['cNluq'](_0x213603,_0x1f0bc1);},'stQJT':_0xdbae65[_0x1862c9(-0x2de,-0x267,-0x1aa,-0x22b)],'qKYNZ':_0xdbae65['iPnuB'],'BCOaF':_0xdbae65[_0x1862c9(-0x230,-0x235,-0x2c9,-0x309)],'YDwPR':'image_url'};if(_0xdbae65['eYlLE'](_0xdbae65['JyhlP'],_0x1862c9(-0x115,-0x143,-0x6f,-0x1c6)))_0xcfdda5=_0x205f91[_0x1862c9(-0x22e,-0x20c,-0x1a3,-0x235)](_0x4c4462,_0x339714,_0x440ee2,_0x4d27a0,_0x37f7be(0x3fd,0x451,0x3d6,0x393)),_0x3bf2fc[_0x37f7be(0x37a,0x306,0x2fe,0x330)](_0x205f91[_0x1862c9(-0x29c,-0x1ec,-0x255,-0x287)],_0x357c36['length'],_0x205f91[_0x1862c9(-0x267,-0x200,-0x1ac,-0x2b1)],_0xc54947);else{if(!_0x5263e7||_0xdbae65[_0x1862c9(-0x1b4,-0x1eb,-0x1db,-0x24b)](_0x5263e7['length'],0x11*0xee+0x1ed+-0x1*0x11bb)||_0xdbae65['kuCoc'](_0x1ca836,-0x2297+0x217d+0x11a)||_0xdbae65['ETXqa'](_0x1ca836,_0x8d3bf9[_0x37f7be(0x458,0x446,0x437,0x411)]))return _0x8d3bf9;const _0x2408e6=[..._0x8d3bf9],_0xaa24a6=_0x2408e6[_0x1ca836],_0x260164=[];if(typeof _0xaa24a6[_0x37f7be(0x457,0x3d2,0x45b,0x4b7)]===_0xdbae65[_0x1862c9(-0x296,-0x201,-0x1be,-0x2c7)]){if(_0xdbae65['kCbHj'](_0x1862c9(-0x2f6,-0x2b2,-0x335,-0x1ef),_0xdbae65['TSawM'])){const _0x3e346c={};_0x3e346c[_0x1862c9(-0x21d,-0x187,-0x23f,-0x1c1)]='text',_0x3e346c[_0x1862c9(-0x236,-0x16b,-0x15a,-0xc5)]=_0xaa24a6[_0x37f7be(0x457,0x439,0x41a,0x511)],_0x260164['push'](_0x3e346c);}else{const _0x317a1e=_0x24cb0f[_0x37f7be(0x399,0x40f,0x3a6,0x37d)+'gClientRec'+'t']();_0x58ce3f=_0xdbae65[_0x37f7be(0x398,0x444,0x444,0x3cb)](_0x317a1e[_0x37f7be(0x39c,0x2db,0x407,0x462)],0xd3*-0x1d+-0x1*-0xf4d+0x8a4);}}else Array[_0x1862c9(-0x268,-0x19c,-0x138,-0x1ce)](_0xaa24a6[_0x1862c9(-0x247,-0x1a1,-0x11f,-0x145)])&&_0x260164[_0x1862c9(-0x143,-0x173,-0x150,-0xf5)](..._0xaa24a6[_0x1862c9(-0x1ab,-0x1a1,-0x154,-0x1c8)]);if(_0x5263e7[_0x1862c9(-0x1d2,-0x1a0,-0x154,-0x249)]>0x1c9f*0x1+-0x561+0xe*-0x1a9){const _0x79eee4={};_0x79eee4['type']=_0xdbae65[_0x1862c9(-0x1a1,-0x267,-0x299,-0x2f1)],_0x79eee4[_0x1862c9(-0x155,-0x16b,-0x13d,-0x1b1)]='\x0a[以下是用户上传的'+_0x5263e7['length']+'张'+_0x556931+']',_0x260164['push'](_0x79eee4);}_0x5263e7[_0x37f7be(0x49d,0x3f4,0x3e5,0x54c)]((_0x5660cb,_0x41cc83)=>{const _0x3b8a94=_0x205f91[_0x3c617d(0x140,0x216,0x1f1,0x1ad)](typeof _0x5660cb,_0x205f91[_0x3c617d(0x17b,0x2f,0xe8,0xf5)])?_0x5660cb:_0x5660cb['base64'],_0x108dc1=_0x205f91[_0xdcbcde(0x50b,0x4f8,0x4b6,0x561)](typeof _0x5660cb,_0x205f91[_0xdcbcde(0x46d,0x4c8,0x41d,0x59a)])&&_0x5660cb[_0xdcbcde(0x2d2,0x38b,0x2e0,0x3e8)]?_0x5660cb[_0x3c617d(0xfe,0xc7,0x84,0xbf)]:''+_0x556931+_0x205f91['WYjtM'](_0x41cc83,0x26e8+-0x1ef1*0x1+0x7f6*-0x1);function _0xdcbcde(_0x1ed4bf,_0x299fea,_0x4d1f1a,_0x4fa9dd){return _0x37f7be(_0x299fea-0x1e,_0x299fea-0x172,_0x4d1f1a-0x10c,_0x4fa9dd);}function _0x3c617d(_0x37f658,_0x15426f,_0x39a9ee,_0x31c4f3){return _0x1862c9(_0x37f658-0x172,_0x39a9ee-0x30f,_0x39a9ee-0x167,_0x31c4f3);}const _0x272514={};_0x272514[_0x3c617d(0x178,0x10d,0x188,0x11c)]=_0x205f91[_0x3c617d(0x185,0xe7,0x168,0x164)],_0x272514[_0x3c617d(0x19e,0x201,0x1a4,0x172)]='['+_0x108dc1+']',_0x260164[_0xdcbcde(0x555,0x4a3,0x555,0x495)](_0x272514);let _0x3a21d7=_0x3b8a94;if(!_0x3b8a94[_0xdcbcde(0x466,0x3fa,0x347,0x4bb)](_0x205f91[_0xdcbcde(0x396,0x39d,0x36f,0x2d4)])){if(_0x205f91['BCOaF']===_0x205f91[_0xdcbcde(0x427,0x4c3,0x52d,0x533)])_0x3a21d7=_0x3c617d(0x206,0x191,0x161,0x97)+'/png;base6'+'4,'+_0x3b8a94;else{const _0x125446=_0x87f5eb?function(){if(_0x98f84b){const _0x29a9f7=_0x49e2fe['apply'](_0x47f6be,arguments);return _0x48080b=null,_0x29a9f7;}}:function(){};return _0x2bb03b=![],_0x125446;}}const _0x5318bc={};_0x5318bc['url']=_0x3a21d7,_0x5318bc[_0x3c617d(0x10a,0xbd,0xd9,0x110)]=_0xdcbcde(0x523,0x4dc,0x5a0,0x46d);const _0xf5b03a={};_0xf5b03a[_0xdcbcde(0x52e,0x48f,0x4d1,0x453)]=_0x205f91['YDwPR'],_0xf5b03a[_0x3c617d(0x25c,0x286,0x1ec,0x205)]=_0x5318bc,_0x260164[_0xdcbcde(0x467,0x4a3,0x486,0x51c)](_0xf5b03a);});const _0xb6f68a={..._0xaa24a6};return _0xb6f68a[_0x37f7be(0x457,0x40f,0x3ca,0x481)]=_0x260164,_0x2408e6[_0x1ca836]=_0xb6f68a,_0x2408e6;}}function _0x2f74e2(_0xffd37a){function _0x57859f(_0x4ad8c2,_0x1ff0e1,_0x5da049,_0x556a07){return _0x1093f4(_0x5da049,_0x1ff0e1-0x174,_0x5da049-0x145,_0x556a07- -0x3cf);}const _0x1718ec={'xoZXG':_0xdbae65[_0x57859f(-0x16c,-0x201,-0x1bb,-0x174)],'dfvMS':function(_0x7d8b1d,_0x2fc708){return _0x7d8b1d(_0x2fc708);},'vrjcG':_0xdbae65[_0xec8850(0xc4,0x14a,0xce,0xe4)]};function _0xec8850(_0x1890ab,_0x3fc807,_0x465f15,_0x2572cd){return _0x1dee08(_0x1890ab-0x10f,_0x3fc807,_0x1890ab-0x322,_0x2572cd-0x190);}if(_0xdbae65['BwKFN'](_0xdbae65[_0xec8850(0x1a7,0x1a2,0x274,0xdf)],_0xdbae65[_0xec8850(0x1a7,0x111,0x12b,0x25b)])){for(let _0x16b70c=_0xdbae65[_0xec8850(0xfb,0x8a,0x1b5,0x57)](_0xffd37a['length'],0x626*-0x6+0x47d+0x2068);_0xdbae65[_0x57859f(-0x297,-0x22d,-0x1cb,-0x27b)](_0x16b70c,0x254f+-0x16dd+-0x1*0xe72);_0x16b70c--){if(_0xdbae65['jhtHI'](_0xdbae65['DuADR'],_0xdbae65['DuADR'])){if(_0xffd37a[_0x16b70c]['role']===_0x57859f(-0x1b0,-0x28d,-0x1f1,-0x226))return _0x16b70c;}else _0x3667ef[_0xec8850(0x11d,0xae,0x1a9,0x93)](_0x1718ec['xoZXG'],_0x339680);}return-(0x31*0xab+-0x1f66+-0x44*0x5);}else _0x1718ec[_0xec8850(0x180,0x181,0x1b3,0x240)](_0x1975b9,null),_0x1c495b[_0xec8850(0x187,0x1e9,0xf0,0x1ed)+_0xec8850(0xce,0x123,0x42,0x10b)](_0x1718ec[_0x57859f(-0x1fd,-0x226,-0x1da,-0x26f)],_0x3a997b);}const _0x2ecab7=_0x2f74e2(_0x168ab5);console['log'](_0xdbae65[_0x1093f4(0x213,0x13c,0x195,0x1ac)],_0x2ecab7);_0x4e5f63[_0x1dee08(-0x240,-0x225,-0x1d2,-0x26e)]>-0xe*0x289+-0x67*-0xc+-0x2*-0xf55&&_0xdbae65[_0x1dee08(-0x1da,-0x2f8,-0x2a3,-0x244)](_0x2ecab7,0x1a9e+-0xe2*0x25+0xc*0x81)&&(_0x168ab5=_0xdbae65['NLpta'](_0x359b72,_0x168ab5,_0x2ecab7,_0x4e5f63,_0xdbae65[_0x1dee08(-0x134,-0x239,-0x168,-0x1b1)]),console[_0x1093f4(0x1c5,0xfe,0xf6,0x17c)](_0xdbae65[_0x1dee08(-0x2f5,-0x28a,-0x273,-0x2c4)],_0x4e5f63['length'],_0xdbae65['apizI'],_0x2ecab7));try{if(_0xdbae65[_0x1dee08(-0x246,-0x286,-0x251,-0x2b4)]('QFDhH',_0xdbae65['uoGlm'])){const _0x41fe27=await getEnabledCharacterImages(_0x20c350),_0x4e3aeb=await _0xdbae65[_0x1093f4(0x2b8,0x2d7,0x24b,0x2bf)](getEnabledOutfitImages),_0xbc9eae=await getCommonCharacterImages(),_0x32995b=[..._0x41fe27,..._0x4e3aeb,..._0xbc9eae];_0x32995b[_0x1093f4(0x2ec,0x1df,0x209,0x25a)]>-0x1460+0x1*-0x5ed+0x1a4d&&_0xdbae65[_0x1dee08(-0x231,-0x255,-0x28b,-0x247)](_0x2ecab7,0x1*-0x9fd+-0xfce*0x1+0xd5*0x1f)&&(_0x168ab5=_0x359b72(_0x168ab5,_0x2ecab7,_0x32995b,_0xdbae65[_0x1093f4(0x1f9,0x236,0x2a1,0x298)]),console[_0x1dee08(-0x254,-0x33a,-0x2b0,-0x35a)](_0xdbae65['wCzkg'],_0x32995b[_0x1093f4(0x321,0x20d,0x18f,0x25a)],_0xdbae65[_0x1dee08(-0x139,-0x10e,-0x165,-0x13c)],_0x2ecab7));}else _0x48c1ca[_0x1dee08(-0x22d,-0xf0,-0x1a5,-0x205)](_0x552b0f[_0x1093f4(0x322,0x1ee,0x240,0x2bb)]('\x0a'));}catch(_0x223785){console['error'](_0xdbae65[_0x1093f4(0x307,0x25e,0x2ce,0x2ba)],_0x223785);}console['log'](_0xdbae65[_0x1093f4(0x27e,0x2e0,0x251,0x21f)],_0x168ab5),console[_0x1dee08(-0x220,-0x37e,-0x2b0,-0x2e6)](_0x1dee08(-0x26d,-0x173,-0x1e6,-0x1a7)+']\x20已替换的变量:',[..._0x1cbb49]);let _0x1488e9='';_0xdbae65['MPqvk'](_0x1cbb49[_0x1093f4(0x191,0x1dd,0x15f,0x14b)],-0x1d5f+-0x15*0x1a5+0x3fe8)?_0x1488e9=_0x1093f4(0x2e2,0x279,0x29b,0x2d0)+'被使用：'+[..._0x1cbb49]['join']('、')+'\x0a':_0xdbae65[_0x1dee08(-0x1ba,-0x188,-0x251,-0x2af)](_0xdbae65['kcFtL'],_0xdbae65[_0x1093f4(0x142,0x1ca,0x23c,0x198)])?(_0xdbae65[_0x1093f4(0x297,0x268,0x2fb,0x23e)](_0x501678,{'text':_0x58d7f5[_0x1dee08(-0x2e1,-0x2bc,-0x295,-0x2ab)][_0x1093f4(0x304,0x2d7,0x248,0x258)]()||'','images':[..._0x5d2ba8]}),_0x781578[_0x1093f4(0x366,0x34f,0x315,0x291)+'tListener'](_0xdbae65[_0x1dee08(-0x2eb,-0x210,-0x25e,-0x1ea)],_0x484af1)):_0x1488e9='诊断：没有检测到变量'+_0x1093f4(0x1e4,0x18d,0x103,0x1d9);const _0xa6adc2=_0x3ebb83[_0x1dee08(-0x323,-0x31e,-0x25f,-0x255)](_0x47050=>!_0x1cbb49[_0x1dee08(-0x25a,-0x12c,-0x1e9,-0x198)](_0x47050)&&!_0x47050[_0x1093f4(0x21f,0x33a,0x2f0,0x2ad)]('::'));_0xa6adc2['length']>0x1a3c*-0x1+-0x1*-0x1229+0x813?_0x1488e9+=_0x1093f4(0x23c,0x2b8,0x1af,0x219)+_0xa6adc2[_0x1dee08(-0x124,-0x181,-0x171,-0x168)]('、')+'\x0a\x0a':_0x1488e9+=_0x1dee08(-0xb2,-0x11e,-0x17c,-0x12e)+'。\x0a\x0a';console[_0x1dee08(-0x340,-0x2e7,-0x2b0,-0x256)](_0xdbae65[_0x1093f4(0x333,0x2ad,0x22b,0x2e6)],_0x1488e9);function _0x1dee08(_0x1eba4b,_0x1791d7,_0x455347,_0x4f8a62){return _0x395d(_0x455347- -0x3a2,_0x1791d7);}console['log'](_0xdbae65[_0x1dee08(-0x20b,-0x1cd,-0x191,-0x20f)],_0x168ab5),_0xdbae65[_0x1093f4(0x205,0x90,0x170,0x14a)](updateCombinedPrompt,_0x168ab5,_0x1488e9);const _0x22bac0=extension_settings[extensionName]?.[_0x1093f4(0x157,0x20e,0x15e,0x17f)+'ode']??![];if(_0x22bac0){if(_0xdbae65[_0x1dee08(-0x2b1,-0x1ff,-0x249,-0x220)](_0xdbae65[_0x1093f4(0x16b,0x2c8,0x20d,0x202)],_0xdbae65['BmLNf'])){toastr[_0x1093f4(0x1ec,0x227,0x1d4,0x1fe)](_0x1dee08(-0x1cd,-0x239,-0x1ab,-0x1a2)+_0x1093f4(0x267,0x1e7,0x210,0x1cc)+_0x1dee08(-0x154,-0x1ae,-0x1aa,-0x1d4)+_0x1093f4(0x2d2,0x2ab,0x1d0,0x270)),console['log'](_0xdbae65[_0x1093f4(0x135,0x202,0x29f,0x1f2)]);return;}else _0x41fec1+='所有基础变量都已使用'+'。\x0a\x0a';}const _0x330950={};_0x330950[_0x1dee08(-0x358,-0x2c9,-0x2b5,-0x22a)]=0x493e0;const _0x550914=await _0xdbae65[_0x1dee08(-0x182,-0xcb,-0x148,-0x186)](LLM_IMAGE_GEN,_0x168ab5,_0x330950);if(_0x550914[_0x1dee08(-0x247,-0x1c3,-0x1bd,-0x286)]){if(_0xdbae65[_0x1dee08(-0x1a0,-0x19d,-0x251,-0x2ce)](_0xdbae65['Xiuxz'],_0xdbae65[_0x1093f4(0x135,0x25f,0x23d,0x1e2)])){console[_0x1093f4(0xf3,0x112,0xb9,0x17c)](_0xdbae65[_0x1dee08(-0x180,-0x13a,-0x186,-0x170)]);return;}else return _0x37f8b7;}const _0x47d4db=_0x550914[_0x1dee08(-0x29a,-0x16c,-0x1db,-0x252)];console[_0x1093f4(0xb8,0x184,0x172,0x17c)](_0xdbae65[_0x1dee08(-0x103,-0x1cf,-0x1b0,-0x201)],_0x47d4db);const _0x8f26c8=_0xdbae65[_0x1dee08(-0x2b4,-0x265,-0x2cf,-0x30b)](removeThinkingTags,_0x47d4db),_0x576c97=_0xdbae65['lYGEG'](parseImagesFromPrompt,_0x8f26c8);console[_0x1093f4(0x179,0x149,0x205,0x17c)](_0xdbae65[_0x1093f4(0x341,0x259,0x22c,0x2c1)],_0x576c97);if(_0xdbae65['hrhQS'](_0x576c97[_0x1dee08(-0x1fd,-0x1c1,-0x1d2,-0x26a)],-0x133*0x8+0x376*0x3+0x1*-0xca)&&_0x272d82){if(_0xdbae65[_0x1093f4(0x254,0x106,0x1a3,0x18d)](_0xdbae65[_0x1dee08(-0x1d5,-0x179,-0x1eb,-0x179)],'IAbkj'))return new _0x2b1bbc((_0x3399b5,_0x46eddf)=>{const _0x120c69=new _0x50a4f8();function _0x21e2db(_0xafdd53,_0x87aa54,_0x413956,_0x688276){return _0x1dee08(_0xafdd53-0x14a,_0x87aa54,_0x688276-0x501,_0x688276-0xf8);}function _0x42e4a5(_0x452797,_0x21ac71,_0x48d068,_0x592509){return _0x1093f4(_0x21ac71,_0x21ac71-0xd0,_0x48d068-0x7e,_0x48d068- -0x45d);}_0x120c69['onload']=()=>_0x3399b5(_0x120c69['result']),_0x120c69[_0x42e4a5(-0x2ef,-0x222,-0x2cc,-0x21f)]=_0x46eddf,_0x120c69['readAsData'+_0x42e4a5(-0x2e6,-0x342,-0x30b,-0x327)](_0x41c887);});else{await _0xdbae65[_0x1dee08(-0x28b,-0x285,-0x1c9,-0x1e2)](insertImagesIntoElement,_0x272d82,_0x576c97);const _0x237f6e=extension_settings[extensionName]?.['zidongdian'+'ji']===_0x1093f4(0x2cf,0x267,0x382,0x2c5);_0x237f6e&&(console['log'](_0xdbae65[_0x1093f4(0x2d5,0x230,0x37b,0x2de)]),window[_0x1093f4(0x14e,0x25f,0x1d5,0x18c)+'ji']=!![],setTimeout(()=>{function _0x4140ee(_0x3d09cc,_0x25a3fc,_0x1205cf,_0x576c0f){return _0x1093f4(_0x25a3fc,_0x25a3fc-0xa8,_0x1205cf-0x3a,_0x3d09cc- -0x2ae);}const _0x576936={'ASasy':function(_0x58e3e0,_0x56873b){function _0x5e1b6e(_0x24d86a,_0x50d19f,_0x3783d8,_0x18afe8){return _0x395d(_0x24d86a-0x164,_0x3783d8);}return _0xdbae65[_0x5e1b6e(0x3b3,0x36a,0x488,0x463)](_0x58e3e0,_0x56873b);},'MivaC':_0xdbae65['JDzlf'],'EQDVG':_0xdbae65[_0xabda13(0x3bd,0x386,0x2cb,0x2d5)],'kQOFl':_0xabda13(0x48e,0x44f,0x50c,0x4b8)+_0x4140ee(-0xd9,-0x2c,-0x52,-0x13d)+'置','iTNmZ':'点击上方按钮添加参考'+'图片','zmEbO':_0xdbae65[_0xabda13(0x56a,0x4c7,0x571,0x4a6)],'KPcwv':function(_0x505836,_0x5462c7){function _0x29ad7f(_0x4339f7,_0x22a8e9,_0x30a0ca,_0x116194){return _0xabda13(_0x4339f7-0x74,_0x30a0ca-0x121,_0x22a8e9,_0x116194-0x193);}return _0xdbae65[_0x29ad7f(0x547,0x4da,0x505,0x59e)](_0x505836,_0x5462c7);},'uxgwd':_0xabda13(0x562,0x4eb,0x45f,0x48a),'WRpgg':function(_0x349ae6){return _0x349ae6();},'QXtsR':_0xdbae65[_0xabda13(0x3d4,0x48d,0x462,0x52e)],'ZGKBR':_0xdbae65[_0xabda13(0x2ed,0x3c3,0x371,0x35a)],'fbApv':function(_0x273af0,_0x3d44a5,_0x383fa2){function _0x2a9ce2(_0x372de4,_0x558e03,_0x1f11f6,_0x9054f6){return _0xabda13(_0x372de4-0xf,_0x372de4- -0x151,_0x9054f6,_0x9054f6-0xfb);}return _0xdbae65[_0x2a9ce2(0x31b,0x280,0x35e,0x28f)](_0x273af0,_0x3d44a5,_0x383fa2);}};function _0xabda13(_0x5852ec,_0x513ff6,_0x11549c,_0x266a95){return _0x1dee08(_0x5852ec-0x139,_0x11549c,_0x513ff6-0x635,_0x266a95-0x194);}if(_0xdbae65['eYlLE'](_0xdbae65[_0x4140ee(-0x157,-0x1c0,-0x14f,-0x119)],_0xdbae65[_0xabda13(0x3de,0x484,0x3d6,0x435)]))import(_0xdbae65[_0x4140ee(-0xc7,-0x2f,-0x191,0x3)])[_0x4140ee(-0xf6,-0x150,-0x56,-0x197)](({processAllImagePlaceholders:_0x55f16c})=>{function _0x484b50(_0x52d80b,_0x58e5af,_0x2a42aa,_0xd6c2fa){return _0x4140ee(_0x58e5af-0x16d,_0x2a42aa,_0x2a42aa-0x183,_0xd6c2fa-0xee);}function _0x59aab5(_0x16311d,_0x564031,_0x163640,_0x49b628){return _0x4140ee(_0x49b628-0x48c,_0x163640,_0x163640-0x19,_0x49b628-0xb6);}if(_0x576936[_0x484b50(0x1c0,0x124,0x14f,0x1da)](_0x576936[_0x59aab5(0x3c6,0x35f,0x3df,0x383)],_0x576936[_0x59aab5(0x2d5,0x3c5,0x3bd,0x383)]))_0x4e7109+='未使用的变量：'+_0x41777b['join']('、')+'\x0a\x0a';else{_0x576936[_0x59aab5(0x433,0x334,0x3ef,0x385)](_0x55f16c);if(extension_settings[extensionName]?.[_0x59aab5(0x2ed,0x305,0x3e3,0x36a)+_0x59aab5(0x40d,0x41f,0x383,0x38d)]!==_0x576936[_0x484b50(0x17,0xf,0x93,-0x9b)]){if(_0x576936[_0x59aab5(0x406,0x400,0x357,0x351)](_0x576936[_0x484b50(0x5c,0x11c,0x185,0x8d)],_0x576936['ZGKBR']))_0x576936[_0x484b50(0x169,0x1a2,0x146,0x16a)](setTimeout,()=>{function _0x2b83e5(_0x21ac20,_0x4e6116,_0x29afc8,_0x41687b){return _0x484b50(_0x21ac20-0x1e4,_0x29afc8-0x331,_0x21ac20,_0x41687b-0xc);}function _0x391d92(_0x101792,_0x14eec7,_0xdc00f8,_0x223043){return _0x484b50(_0x101792-0x17c,_0x14eec7- -0x9d,_0xdc00f8,_0x223043-0x104);}if(_0x576936['ASasy'](_0x576936[_0x2b83e5(0x421,0x52f,0x461,0x4e9)],_0x576936[_0x391d92(0x155,0x8e,-0x43,0xd6)]))return _0x81a0a8;else window[_0x2b83e5(0x3cb,0x2f7,0x37c,0x2f9)+'ji']=![],console['log'](_0x576936['kQOFl']);},0x2356+-0x1eec+0xf1e);else{const _0x2ad7be=_0x527a00[_0x59aab5(0x593,0x594,0x4d8,0x4cc)+_0x59aab5(0x2a1,0x361,0x35c,0x333)]('div');_0x2ad7be[_0x484b50(0x6c,0xf5,0x15d,0x4f)+'t']=_0x576936[_0x484b50(0x6,0xae,0xa1,0x88)],_0x2ad7be[_0x59aab5(0x452,0x516,0x438,0x4ac)]=_0x576936[_0x59aab5(0x3f8,0x383,0x3b3,0x32d)],_0x23d780[_0x59aab5(0x320,0x2ee,0x3f4,0x368)+'d'](_0x2ad7be);return;}}}})[_0xabda13(0x38d,0x35f,0x32f,0x3ef)](_0x1c6262=>{function _0x224bad(_0x3f2c49,_0x17a8c0,_0x5489db,_0x32add6){return _0x4140ee(_0x5489db-0x9,_0x17a8c0,_0x5489db-0x1c6,_0x32add6-0xd1);}function _0x1b2ef6(_0x4c682a,_0x21c5d0,_0x25f957,_0x5b8f61){return _0x4140ee(_0x5b8f61-0x560,_0x25f957,_0x25f957-0x100,_0x5b8f61-0x178);}console[_0x1b2ef6(0x473,0x419,0x488,0x4d9)](_0x1b2ef6(0x4ff,0x476,0x523,0x4f8)+_0x1b2ef6(0x400,0x35f,0x36c,0x42c)+_0x224bad(-0x100,0x7e,-0x37,-0xeb),_0x1c6262);});else{const _0x59b9d3=_0x2e1ca9['querySelec'+_0x4140ee(0x2a,-0xa5,0x4c,-0x1a)](_0xdbae65[_0x4140ee(-0x74,-0xd2,-0x8f,-0xe5)]);if(_0x59b9d3){const _0xd4c262=_0x59b9d3['getBoundin'+_0xabda13(0x336,0x3d3,0x46b,0x426)+'t']();_0x596747=_0xdbae65[_0x4140ee(-0x37,0x20,-0x10d,-0xda)](_0xd4c262[_0x4140ee(-0x110,-0x1d9,-0x1b4,-0x8d)],-0x1e77+0x11*-0x139+0x41*0xca);}_0x32a66d=_0x4140ee(-0x18,0x85,0x53,0x32)+'\x20-\x20'+_0xdbae65[_0xabda13(0x3c0,0x3f1,0x3d7,0x39a)](_0x33a18d,-0x28*0xf4+0xa9b+-0x1b99*-0x1)+_0x4140ee(-0x19,-0x66,-0xd7,-0xe6);}},-0x1c2b+-0x104*0x1+-0x1d93*-0x1));}}}
//# sourceMappingURL=http://localhost:8000/promptReq.js.map