function _0x29ab(_0x4438d8,_0x496131){_0x4438d8=_0x4438d8-(0xb*0x284+-0x1863+-0x4*0x7e);const _0x18dae2=_0x4254();let _0x44318e=_0x18dae2[_0x4438d8];if(_0x29ab['AGlWjt']===undefined){var _0x472923=function(_0x1ccf3d){const _0x34bfb4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3f23c8='',_0x450688='',_0x46b004=_0x3f23c8+_0x472923;for(let _0x5ada1c=-0x4*0x9b5+0x1121*-0x1+0x37f5,_0x5472d6,_0x21a5cb,_0x2084ce=-0x1e03+-0x1*-0x22cb+-0x4c8;_0x21a5cb=_0x1ccf3d['charAt'](_0x2084ce++);~_0x21a5cb&&(_0x5472d6=_0x5ada1c%(0x2555+-0x1*-0x1ae7+-0x4038)?_0x5472d6*(0x1ee4*0x1+-0x832+-0x1672)+_0x21a5cb:_0x21a5cb,_0x5ada1c++%(-0x7cc+0xd*-0x2c2+0x2baa))?_0x3f23c8+=_0x46b004['charCodeAt'](_0x2084ce+(0x12db+0xb31*-0x1+-0x7a0))-(0x329*-0x9+0xe*0x27e+0x669*-0x1)!==0x216*0xc+-0x1d1d*-0x1+-0x3625?String['fromCharCode'](-0x183a+0x875+0x10c4*0x1&_0x5472d6>>(-(0x478+-0x482*0x1+-0xc*-0x1)*_0x5ada1c&-0x2*0x887+0x1e31*-0x1+-0x1*-0x2f45)):_0x5ada1c:-0x45e*0x3+-0x5aa*0x1+0x12c4){_0x21a5cb=_0x34bfb4['indexOf'](_0x21a5cb);}for(let _0x495584=0x1b9b+-0x46*-0x37+-0x2aa5,_0x1a9816=_0x3f23c8['length'];_0x495584<_0x1a9816;_0x495584++){_0x450688+='%'+('00'+_0x3f23c8['charCodeAt'](_0x495584)['toString'](0x6a6*0x3+-0x17a5+0x3c3))['slice'](-(-0xa45+-0x1754+0x4cd*0x7));}return decodeURIComponent(_0x450688);};_0x29ab['EEQLQF']=_0x472923,_0x29ab['InWGgB']={},_0x29ab['AGlWjt']=!![];}const _0x31dd69=_0x18dae2[-0x3b*0x6a+0x9*-0x319+0x344f],_0xf03bbc=_0x4438d8+_0x31dd69,_0x44bafa=_0x29ab['InWGgB'][_0xf03bbc];if(!_0x44bafa){const _0x4bb3e2=function(_0x3afc81){this['WldDRz']=_0x3afc81,this['pilCrG']=[-0x6*0x305+0x400+-0x1*-0xe1f,0xd2+0x828+-0x8fa,-0x61*0xc+-0x232b+0x27b7],this['UnFCdZ']=function(){return'newState';},this['qlkiMG']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['WfOGWx']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4bb3e2['prototype']['DHGhTb']=function(){const _0x18feea=new RegExp(this['qlkiMG']+this['WfOGWx']),_0x340af8=_0x18feea['test'](this['UnFCdZ']['toString']())?--this['pilCrG'][0xa*-0x2b3+0x23cf+-0x8d0]:--this['pilCrG'][-0xb2*0x15+0x12*0xf7+-0x2c4];return this['npKZFZ'](_0x340af8);},_0x4bb3e2['prototype']['npKZFZ']=function(_0x5136f6){if(!Boolean(~_0x5136f6))return _0x5136f6;return this['wWdAqm'](this['WldDRz']);},_0x4bb3e2['prototype']['wWdAqm']=function(_0x111a43){for(let _0x4769c3=-0x177e*-0x1+0xae7*0x2+-0x2d4c,_0x112670=this['pilCrG']['length'];_0x4769c3<_0x112670;_0x4769c3++){this['pilCrG']['push'](Math['round'](Math['random']())),_0x112670=this['pilCrG']['length'];}return _0x111a43(this['pilCrG'][0x4a7*0x1+0x1842+-0x3*0x9a3]);},new _0x4bb3e2(_0x29ab)['DHGhTb'](),_0x44318e=_0x29ab['EEQLQF'](_0x44318e),_0x29ab['InWGgB'][_0xf03bbc]=_0x44318e;}else _0x44318e=_0x44bafa;return _0x44318e;}(function(_0x1e7fda,_0x5b27bc){function _0x464b09(_0x10de7a,_0x179cec,_0x259d1d,_0x9e1eab){return _0x29ab(_0x179cec- -0x263,_0x259d1d);}function _0x409545(_0x20598a,_0x3e8ec6,_0x1f0ce4,_0x939f1c){return _0x29ab(_0x939f1c- -0x1f5,_0x1f0ce4);}const _0x3a3f1a=_0x1e7fda();while(!![]){try{const _0x178814=parseInt(_0x464b09(-0x46,-0x9c,-0x9c,-0x6b))/(-0x2b*-0x9d+0x1ad9+0xef*-0x39)*(-parseInt(_0x464b09(-0xd0,-0xf9,-0x11c,-0xfe))/(0x4*0x32c+-0x15bb*0x1+0x7*0x14b))+-parseInt(_0x409545(-0x47,-0x5b,-0x1,-0x4b))/(0xf68+-0x55d+-0xa08)+-parseInt(_0x409545(0x5,-0x3b,-0x64,-0x32))/(0x1*0x803+-0x48d+-0x372)*(-parseInt(_0x409545(0x20,-0x17,0x1c,-0x17))/(-0x1a32+-0x3d*-0xa3+-0xca0))+parseInt(_0x464b09(-0x83,-0x82,-0xc5,-0x53))/(0xc42+-0x9cd*-0x2+-0x1fd6)+parseInt(_0x409545(-0x33,-0x1f,-0xb,-0x3f))/(-0x286*-0x2+-0x1*0x148b+-0xf86*-0x1)+-parseInt(_0x409545(-0x5e,-0xd0,-0x6d,-0x9e))/(0x3*-0x22d+0xe5c+-0x7cd)+parseInt(_0x464b09(-0xce,-0x110,-0xbe,-0x108))/(-0x90d+-0xd0a*-0x2+0x5aa*-0x3)*(parseInt(_0x409545(0xe,-0x37,0x1a,-0x11))/(0x7b0+0x1519*0x1+0x29d*-0xb));if(_0x178814===_0x5b27bc)break;else _0x3a3f1a['push'](_0x3a3f1a['shift']());}catch(_0x172583){_0x3a3f1a['push'](_0x3a3f1a['shift']());}}}(_0x4254,-0x6b1b0+0xed6d+-0xa4bad*-0x1));const _0x180c15=(function(){const _0x3b1987={};_0x3b1987[_0x56aa17(0x1e9,0x21a,0x201,0x214)]=function(_0x2dc0eb,_0x2d5fce){return _0x2dc0eb!==_0x2d5fce;},_0x3b1987[_0x56aa17(0x253,0x22b,0x237,0x204)]='DorSG',_0x3b1987[_0x56aa17(0x1c0,0x254,0x21a,0x22a)]=_0x56aa17(0x26e,0x1e5,0x219,0x24a);const _0x2d7813=_0x3b1987;function _0x56aa17(_0x3669df,_0x4777bb,_0x3a1c09,_0x57edb6){return _0x29ab(_0x3a1c09-0x78,_0x3669df);}let _0x1ec57b=!![];function _0x3e5d9d(_0xf4fc99,_0x150cf1,_0x4a0fba,_0xf562c7){return _0x29ab(_0xf562c7- -0x3b6,_0x150cf1);}return function(_0x254959,_0x5a533c){function _0xd450d2(_0x18c4e4,_0x3c68b2,_0x51346f,_0x65704f){return _0x56aa17(_0x3c68b2,_0x3c68b2-0x1ba,_0x18c4e4-0x21c,_0x65704f-0x1d4);}const _0x98fd10={'yEyoH':function(_0x14f640,_0x340f5b){function _0x18d68f(_0x278237,_0x1ce0e2,_0xd93b6,_0x120126){return _0x29ab(_0x278237- -0x203,_0x1ce0e2);}return _0x2d7813[_0x18d68f(-0x7a,-0x7f,-0xa1,-0x62)](_0x14f640,_0x340f5b);},'TNrQQ':_0x2d7813[_0xd450d2(0x453,0x415,0x482,0x446)],'MHyKv':_0x2d7813[_0x12421f(0x22e,0x1d7,0x20d,0x1e5)]},_0x3a7484=_0x1ec57b?function(){function _0x3bb10a(_0x4282f0,_0x53baf9,_0x7ed8a4,_0x4e6862){return _0x12421f(_0x7ed8a4,_0x53baf9-0x1b9,_0x4e6862-0x167,_0x4e6862-0x18d);}function _0x327e86(_0x2db896,_0x199f0c,_0x3ebf01,_0x1a2444){return _0x12421f(_0x199f0c,_0x199f0c-0x158,_0x1a2444- -0x12c,_0x1a2444-0x50);}if(_0x98fd10['yEyoH'](_0x98fd10[_0x327e86(0x53,0x76,0x7f,0xae)],_0x98fd10['MHyKv'])){if(_0x5a533c){const _0x3c6570=_0x5a533c[_0x3bb10a(0x3b1,0x374,0x3e3,0x3c8)](_0x254959,arguments);return _0x5a533c=null,_0x3c6570;}}else{const _0x28a6bb=_0x134120?function(){function _0x11f1d7(_0x297d02,_0x27cefd,_0x113319,_0x347f0b){return _0x3bb10a(_0x297d02-0x80,_0x27cefd-0x53,_0x297d02,_0x27cefd- -0x3b9);}if(_0x28fc00){const _0x43424a=_0x5eff44[_0x11f1d7(-0x2f,0xf,0x62,0x3a)](_0x1c0790,arguments);return _0x4cd882=null,_0x43424a;}}:function(){};return _0x268944=![],_0x28a6bb;}}:function(){};_0x1ec57b=![];function _0x12421f(_0x6e22e4,_0x4e8d6d,_0x5a9246,_0x15ce63){return _0x56aa17(_0x6e22e4,_0x4e8d6d-0x1d4,_0x5a9246- -0xd,_0x15ce63-0x3a);}return _0x3a7484;};}()),_0x37daa3=_0x180c15(this,function(){const _0x3f8b23={};function _0x1f46f0(_0x42b292,_0x5ca840,_0x2d6577,_0x3306e1){return _0x29ab(_0x5ca840- -0xe2,_0x42b292);}function _0x406f58(_0x148331,_0x1da413,_0x1e2835,_0x33f697){return _0x29ab(_0x33f697-0x331,_0x1da413);}_0x3f8b23['LYuBQ']=_0x406f58(0x52b,0x50d,0x4dc,0x509)+'+$';const _0x4e06d4=_0x3f8b23;return _0x37daa3[_0x1f46f0(0x116,0xe7,0xdc,0xc1)]()[_0x406f58(0x50c,0x4ea,0x50d,0x4de)](_0x4e06d4['LYuBQ'])[_0x406f58(0x511,0x512,0x520,0x4fa)]()['constructo'+'r'](_0x37daa3)[_0x406f58(0x4d8,0x498,0x538,0x4de)](_0x4e06d4[_0x1f46f0(0x5f,0xb8,0xd0,0x6c)]);});_0x37daa3();import{extension_settings}from'../../../../extensions.js';import{extensionName}from'./config.js';function _0x4254(){const _0x45bc38=['vernz1q','EePzy0q','EhnjDLi','Aw9eruG','id0+ia','AKrYA00','s0XZqMS','B3rkEue','zMLUywXdB3vUDa','vhbnyK0','zMj4CM0','BMfTzte','CKTnsMm','txbZuNy','E0bZzxr2yxi6oG','Euj2s0u','whPyy1y','yxjuvKW','Dgv4Da','B0PcDvi','Bhfvvfu','qMPMrMq','tg1NCgS','BgXTx3jLCxvLCW','tfL1qLe','yufdz1y','wwzbv04','z3LNDuq','z3HsyvK','zw5HyMXLza','CMvWBgfJzwrwyq','tgDrt04','Eg9gt0m','r2Pts1C','DhzHCJOG','DhjPz2DLCK1Vza','v3HVtei','E0bZzxrNBg9Iyq','D0XrAu8','rxfbufm','nZu3mJaZDK9NCgrp','E3VKUiRKUiVMLOD9Fq','Bwf0y2HbBgW','C2vHCMnO','y2vZC29YxsbNzq','vujLAee','B01Pz2S','BwPYveG','twnkBeq','zMLNCW','BvLVu1a','EwzdvfG','mJi0mJqXnvD4wu9TAq','BePut0i','EwfMuuK','tgPRz2W','EhrFChjVzMLSzq','BwvYz2vKq291BG','vgrRC1y','DvHcANy','E0bNzxr3B3jSza','BgTiELa','D2PcBve','twvxCgC','txblrue','mJHhrunyru4','C3vIC3rYAw5N','BMXzqNG','AfLouMC','nM9tBM9jsW','A2v5CW','Dg9tDhjPBMC','uLj4DwG','wuTbq2q','yxDvCum','BeDrEhy','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','y2vZC29YxsbZzq','DxnLCG','Dgv1EMm','yxnZAxn0yw50','uxzdvvC','ywrK','E3VNLkJMIlFPNidMSyj9Fq','wuL0yuK','vgH0ywS','kcGOlISPkYKRkq','CfjYsMG','lI4U','E3T1C2vYFx0','zMjnCe8','Efj5C3G','mtu1mdC1vMPuqLPI','Bg9N','zw50CMLLCW','mJi3odCZngTSvgHsDa','wMj4uvy','B09Asw8','mtaWy2L0sMzT','BhzHCJO6','vLzwvge','E0bNzxrNBg9Iyq','z2XuDwe','CM9Szq','EenfvvO','C2PYwhi','BvvrzhC','y29UDgvUDa','Ae1nEu4','DgDSB2jHBhzHCG','DLvlEhm','DhDVCMXKDMfYoG','z3zxrLO','Aw5JBhvKzxm','C0Tyq3u','ANftEum','yxbWBhK','B2jQzwn0','teLVtuq','CMLHyMXLCW','qwLdwNO','DMfYAwfIBgvZ','shfwEg4','C3rYAw5N','wNLHCMG','zLrksLy','E3VKUjBNLyZKUABOP6BLJ5f9Fq','y2HHDe1LDgfKyq','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','zLP3Cvi','EwzxvhK','Efb0D1y','CMvXDwvZDfr5Ca','AxnbCNjHEq','DgvZDf9JB250zq','y29UDgv4Df9WCG','ndC5odG5vwjVvu9p','ChvZAa','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','phvZzxi+','nde0odm2ofDNuLrwBa','DM54EgS','ELjcr0C','BeHltfa','zMLSDgvY','DhLWzq','tufiwfC','EgfZq0C','BgvUz3rO','ruz4CLO','AM9PBG','id0G','rxbxv28','q05Az2O','CMvWBgfJzufSBa','5A6m5OIqoG','w3bYB21WDfbYBW','E3TNzxr2yxi6oG','Df90ExbLx2nVBG','mti3nty0CvDdy0DW','uw9st2C','CfPbBwy','wvbKr1y','DhjPz2DLCG','ve5Yuve','tgHOy2e','zw50CMLLC0nVDq','BwfW','rxr3qKW','ufvOCwC','y2vZC29YxsdMNOtLU7O','AgLZDg9YEq','wM9QyKW','D0XIuxm','wxjWAfq','D1vxq3K','CfjjthK','zNPMre0','C3rYAw5NAwz5','CMvWBgfJzq','DMfYoJO','DhjPBq','swnZzKm'];_0x4254=function(){return _0x45bc38;};return _0x4254();}import{getContext}from'../../../../st-context.js';import{getglobalvar,setglobalvar}from'./chatDataUtils.js';import{getworldvar}from'./worldbookProcessor.js';export function checkTriggerWords(_0x574f0b,_0x45d2e5){const _0x4a075a={'yfCTX':function(_0x2b6f12,_0x41421a,_0x47834a){return _0x2b6f12(_0x41421a,_0x47834a);},'yfWTy':function(_0x4d0766,_0x409a03){return _0x4d0766===_0x409a03;},'PSpFE':_0x477610(0x327,0x348,0x383,0x34f)};if(!_0x574f0b||!_0x45d2e5){if(_0x4a075a[_0x477610(0x343,0x375,0x346,0x32c)](_0x4a075a['PSpFE'],_0x477610(0x2f2,0x2de,0x2fc,0x29a)))_0x11deb0[_0x395739(0x35,0x52,0x73,0x3f)]=_0x4a075a[_0x395739(0xb,0x18,0x3b,0x2c)](_0xda9942,_0x339542[_0x477610(0x379,0x35e,0x331,0x39b)],_0x1afb14[_0x395739(0x1a,0x33,0x73,0x6c)]);else return![];}const _0x119d70=_0x574f0b['split'](',')[_0x477610(0x2ef,0x2e3,0x337,0x2b0)](_0x38bffa=>_0x38bffa['trim']())[_0x395739(-0x27,0x3a,-0x1f,-0x37)](_0x30f7a1=>_0x30f7a1);if(_0x4a075a[_0x477610(0x340,0x375,0x336,0x382)](_0x119d70[_0x395739(0xa,-0x21,-0x1b,-0x60)],-0x3*-0xb92+0xc94+-0x2f4a))return![];for(const _0x53b55a of _0x119d70){if(_0x45d2e5[_0x477610(0x366,0x364,0x3ab,0x3a0)](_0x53b55a))return!![];}function _0x477610(_0x753b05,_0x16244b,_0x5e022f,_0x110292){return _0x29ab(_0x16244b-0x171,_0x5e022f);}function _0x395739(_0x3f4041,_0x340aa7,_0x173e05,_0x16d87f){return _0x29ab(_0x173e05- -0x17a,_0x340aa7);}return![];}export function mergeAdjacentMessages(_0x4b730e){const _0x330ed6={'UBehA':function(_0x3d05e7,_0x131ace,_0x302029,_0x269a35){return _0x3d05e7(_0x131ace,_0x302029,_0x269a35);},'YItaI':function(_0x467f0f,_0x3b2c89){return _0x467f0f===_0x3b2c89;},'KLsBk':function(_0x15b6ee,_0x2cd899){return _0x15b6ee===_0x2cd899;},'wkCMj':'JSujJ','xJYcD':function(_0xff2a2c,_0x5b06ec){return _0xff2a2c===_0x5b06ec;},'wLbQs':function(_0x5214c8,_0x534a9e){return _0x5214c8!==_0x534a9e;},'YKACd':function(_0x2d6c2c,_0x1fc69b,_0x688ea8){return _0x2d6c2c(_0x1fc69b,_0x688ea8);}};if(!_0x4b730e||_0x330ed6[_0x37aece(0xcf,0x131,0xb6,0x10f)](_0x4b730e[_0x1c4477(0x9f,0xb5,0xeb,0xfe)],0x21*0x2b+0x1f42+-0x24cd*0x1))return[];function _0x37aece(_0x378d35,_0xc21f75,_0x2c8430,_0x59d7df){return _0x29ab(_0x59d7df- -0x79,_0xc21f75);}const _0x4a1f88=[];let _0x360de3=null;for(const _0x1297bd of _0x4b730e){if(!_0x360de3){if('NppGM'!==_0x330ed6['wkCMj']){const _0x303fc4={..._0x1297bd};_0x360de3=_0x303fc4;}else{if(!_0x11b5b8||_0x330ed6[_0x37aece(0x1a4,0x184,0x177,0x15d)](_0xc205ee['length'],0x1113+-0x312*-0x7+-0x3*0xcdb))return _0xc5599d;const _0x3898f9=_0x5c9b45();return!_0x3898f9['chatMetada'+'ta']&&(_0x3898f9[_0x37aece(0x1b4,0x1bb,0x132,0x188)+'ta']={}),!_0x3898f9[_0x1c4477(0x180,0x192,0x18d,0x177)+'ta'][_0x1c4477(0x150,0x16c,0x187,0x17a)]&&(_0x3898f9[_0x37aece(0x1cc,0x19b,0x1e0,0x188)+'ta'][_0x1c4477(0x172,0x14b,0x187,0x1ab)]={}),_0x399574[_0x37aece(0x132,0xf7,0xed,0xf9)](_0x460eb7=>{function _0x58008d(_0x2de32b,_0x131411,_0x282e48,_0x58f3e4){return _0x1c4477(_0x131411,_0x131411-0xde,_0x58f3e4-0x33f,_0x58f3e4-0x1f4);}if(!_0x460eb7||!_0x460eb7[_0x457a43(0x177,0x189,0x110,0x149)])return _0x460eb7;function _0x457a43(_0x3f4618,_0x30a9b1,_0x3360c1,_0x4f4943){return _0x1c4477(_0x3360c1,_0x30a9b1-0x16f,_0x4f4943- -0x30,_0x4f4943-0x135);}return{..._0x460eb7,'content':_0x330ed6[_0x457a43(0xb8,0xb5,0x150,0x10b)](_0x405aa7,_0x460eb7[_0x457a43(0x191,0x144,0xf1,0x149)],_0x3898f9,_0x1fbe4a)};});}}else{if(_0x330ed6[_0x1c4477(0xfb,0xd1,0x10f,0x14d)](_0x360de3[_0x1c4477(0x1d0,0x194,0x175,0x18e)],_0x1297bd['role']))_0x330ed6[_0x37aece(0xe5,0xfe,0xd4,0xff)](_0x37aece(0x162,0x10b,0xe5,0x113),_0x37aece(0x148,0x197,0x16e,0x14d))?_0x360de3[_0x1c4477(0x182,0x1d1,0x179,0x129)]=_0x330ed6[_0x37aece(0x163,0x118,0x128,0x152)](mergeContent,_0x360de3['content'],_0x1297bd[_0x1c4477(0x1cc,0x1c9,0x179,0x1aa)]):_0x553896[_0x37aece(0x18c,0x138,0x156,0x188)+'ta'][_0x37aece(0x185,0x18e,0x1ce,0x182)]={};else{_0x4a1f88['push'](_0x360de3);const _0x3401ed={..._0x1297bd};_0x360de3=_0x3401ed;}}}_0x360de3&&_0x4a1f88[_0x1c4477(0x9e,0x94,0xe0,0x121)](_0x360de3);function _0x1c4477(_0x454318,_0x3f1686,_0xfbe24f,_0x571856){return _0x29ab(_0xfbe24f- -0x74,_0x454318);}return _0x4a1f88;}function mergeContent(_0x5b1600,_0x520117){const _0x2c076a={'yBvKE':function(_0x37d611,_0x470425){return _0x37d611(_0x470425);},'WxoLB':function(_0x1cc888,_0x492c22){return _0x1cc888===_0x492c22;},'fZwqR':_0x123a64(0x4b5,0x479,0x48e,0x4d4),'LFpeY':function(_0x3af27a,_0x334bf0){return _0x3af27a!==_0x334bf0;},'BjfFd':'QvCUW','fzfDM':function(_0x45d5c6,_0x5afa53){return _0x45d5c6+_0x5afa53;},'gxRaY':_0x38307a(0x19b,0x178,0x17f,0x1c6)};if(_0x2c076a[_0x123a64(0x45e,0x439,0x456,0x43e)](typeof _0x5b1600,_0x2c076a[_0x123a64(0x4bb,0x4e8,0x4c5,0x4f7)])&&typeof _0x520117===_0x38307a(0x1bb,0x193,0x1e8,0x22b)){if(_0x2c076a['LFpeY'](_0x2c076a[_0x123a64(0x44f,0x4a6,0x44f,0x427)],_0x123a64(0x48b,0x4c4,0x4bb,0x485))){const _0x1ec7f2=_0x1edb09[_0x123a64(0x438,0x429,0x405,0x40d)](),_0x5a08e3=_0x2c076a['yBvKE'](_0x570943,_0x1ec7f2)||'';return _0x10bdd2[_0x123a64(0x497,0x4b9,0x463,0x492)]('[promptPro'+_0x38307a(0x185,0x155,0x199,0x1d8)+_0x38307a(0x1c8,0x1b2,0x1dc,0x204)+'\x20'+_0x1ec7f2+'\x20=>\x20'+_0x2c076a[_0x38307a(0x153,0x166,0x17c,0x16c)](_0x22c076,_0x5a08e3)[_0x123a64(0x47c,0x439,0x4b6,0x4a9)](0x3e8+0x6b1+-0xa99*0x1,-0x24c0+-0x22f6+0x18*0x2ff)+_0x123a64(0x492,0x4d8,0x447,0x4dc)),_0x507be0&&_0x5b776c[_0x123a64(0x48c,0x4b8,0x4c6,0x4b9)](_0x123a64(0x476,0x438,0x4aa,0x4c4)+'var::'+_0x1ec7f2+'@}'),_0x5a08e3;}else return _0x2c076a[_0x38307a(0x17a,0x11c,0x167,0x15c)](_0x5b1600,'\x0a')+_0x520117;}const _0x2a305e=_0x2c076a[_0x123a64(0x449,0x46a,0x478,0x470)](normalizeToArray,_0x5b1600),_0x5cfdac=_0x2c076a[_0x123a64(0x449,0x473,0x440,0x449)](normalizeToArray,_0x520117),_0x441120={};function _0x38307a(_0x2995e6,_0x63ebb2,_0x20e649,_0x51ab32){return _0x29ab(_0x20e649- -0x15,_0x2995e6);}function _0x123a64(_0x6c148b,_0x3d4ce7,_0x310e30,_0xdbb6d4){return _0x29ab(_0x6c148b-0x2b8,_0x310e30);}return _0x441120['type']=_0x2c076a[_0x123a64(0x456,0x465,0x490,0x472)],_0x441120[_0x123a64(0x44c,0x402,0x490,0x4a0)]='\x0a',[..._0x2a305e,_0x441120,..._0x5cfdac];}function normalizeToArray(_0x239a95){function _0x4c9d90(_0x53476e,_0x59b79c,_0x4efbb5,_0x2757c5){return _0x29ab(_0x4efbb5- -0x14c,_0x2757c5);}const _0x32e2f3={};function _0x2899be(_0x23146a,_0x491ef6,_0x1937ba,_0x4902c9){return _0x29ab(_0x491ef6- -0x34a,_0x4902c9);}_0x32e2f3[_0x2899be(-0x141,-0x180,-0x14e,-0x191)]=_0x2899be(-0x1c6,-0x1b6,-0x1bf,-0x1f2),_0x32e2f3[_0x4c9d90(0x43,0x75,0x2f,-0x18)]=function(_0x2884bf,_0x255673){return _0x2884bf||_0x255673;};const _0x5eff04=_0x32e2f3;if(Array['isArray'](_0x239a95))return _0x239a95;return[{'type':_0x5eff04[_0x2899be(-0x157,-0x180,-0x184,-0x153)],'text':_0x5eff04['pRILy'](_0x239a95,'')}];}export function replacePlaceholder(_0x5538e5,_0x322239,_0x1d4c69,_0x7be710){const _0x228848={'teuzc':function(_0x58b8b0,_0x5bc9ea){return _0x58b8b0(_0x5bc9ea);},'sjrXr':function(_0x4638ad,_0x4cb3ec){return _0x4638ad||_0x4cb3ec;},'YrphT':function(_0x4cd8d5,_0x45004d){return _0x4cd8d5===_0x45004d;},'lGQxv':_0x3bd297(0x1c3,0x1a9,0x1e2,0x1b0),'NCroU':function(_0x4bd950,_0x175745,_0x23b020,_0x473277,_0x4d265d){return _0x4bd950(_0x175745,_0x23b020,_0x473277,_0x4d265d);}};function _0x3bd297(_0x16f5c5,_0x185d96,_0x99fb77,_0x994ae3){return _0x29ab(_0x99fb77-0x5d,_0x994ae3);}if(typeof _0x5538e5===_0x597c51(0x324,0x292,0x309,0x2da))return _0x1d4c69&&_0x5538e5[_0x3bd297(0x218,0x212,0x250,0x24b)](_0x322239)&&(_0x7be710&&_0x7be710[_0x597c51(0x2ca,0x299,0x2be,0x2b1)](_0x322239)),_0x5538e5[_0x3bd297(0x1c3,0x19c,0x1c2,0x17c)](_0x322239,_0x228848[_0x3bd297(0x254,0x29c,0x248,0x22c)](_0x1d4c69,''));if(Array['isArray'](_0x5538e5))return _0x5538e5[_0x597c51(0x247,0x26a,0x208,0x24f)](_0x333925=>replacePlaceholder(_0x333925,_0x322239,_0x1d4c69,_0x7be710));function _0x597c51(_0x57f45d,_0x3b7603,_0x7f0aa1,_0xba1e7a){return _0x29ab(_0xba1e7a-0xdd,_0x57f45d);}if(_0x5538e5&&_0x228848[_0x3bd297(0x21f,0x21d,0x1d6,0x1a7)](typeof _0x5538e5,_0x3bd297(0x204,0x20c,0x254,0x235))){if(_0x3bd297(0x26d,0x1f3,0x24d,0x26a)===_0x228848[_0x3bd297(0x1de,0x22e,0x22a,0x253)]){const _0x599fb5=_0x364248[_0x3bd297(0x193,0x1d8,0x1dd,0x222)](),_0x9373ec=_0x1145f0(_0x599fb5)||'';return _0x5b500c['log'](_0x3bd297(0x21e,0x1bb,0x1c4,0x1fa)+'cessor]\x20ge'+_0x3bd297(0x2a3,0x28e,0x24c,0x1f1)+':\x20'+_0x599fb5+_0x597c51(0x22e,0x217,0x278,0x263)+_0x228848[_0x3bd297(0x27e,0x1f9,0x22e,0x210)](_0x25eac3,_0x9373ec)['substring'](-0x212d+-0x1*-0x46d+0x4*0x730,0x1772+0x1ec0+-0x3600)+_0x3bd297(0x218,0x206,0x237,0x26f)),_0x3ac84a&&_0x43f1f7[_0x3bd297(0x1ef,0x222,0x231,0x282)](_0x3bd297(0x20e,0x208,0x244,0x26d)+_0x597c51(0x291,0x2ea,0x307,0x2c2)+_0x599fb5+'@}'),_0x9373ec;}else{const _0xe8e582={};for(const _0x442eb7 in _0x5538e5){_0xe8e582[_0x442eb7]=_0x228848['NCroU'](replacePlaceholder,_0x5538e5[_0x442eb7],_0x322239,_0x1d4c69,_0x7be710);}return _0xe8e582;}}return _0x5538e5;}export function replaceAllPlaceholders(_0x295046,_0x1c16da){const _0x2fbfd2={'lHKLP':_0x4e83a4(0x16e,0x14c,0x1cc,0x194),'arTVL':function(_0x108320,_0x495447){return _0x108320||_0x495447;},'Zyarh':function(_0x3bf7d5){return _0x3bf7d5();},'flVjM':_0x207c4f(0x348,0x382,0x3ce,0x338),'uDULq':_0x207c4f(0x29a,0x2eb,0x2f9,0x2c4),'LIoMD':_0x4e83a4(0x231,0x1a9,0x1dd,0x1db),'oMigk':_0x4e83a4(0x120,0x175,0x16a,0x156),'EFxrZ':function(_0x41980e,_0x27c1ae,_0x340a9b,_0x48e6e8,_0x551e4c){return _0x41980e(_0x27c1ae,_0x340a9b,_0x48e6e8,_0x551e4c);},'Lhhca':_0x207c4f(0x347,0x388,0x333,0x390),'glTua':'{{正文}}','EtwBL':_0x207c4f(0x2ce,0x2dd,0x2b0,0x292),'Ljkgl':function(_0x36ac0a,_0x5f49ad,_0x54e5e9,_0x775249,_0x53bd22){return _0x36ac0a(_0x5f49ad,_0x54e5e9,_0x775249,_0x53bd22);},'MAHXW':_0x4e83a4(0x1c6,0x1fd,0x1f9,0x1ce)+'}}','RgnMd':function(_0x1c00de,_0x2594dd,_0x440a6f,_0x84f346,_0x83f8c2){return _0x1c00de(_0x2594dd,_0x440a6f,_0x84f346,_0x83f8c2);},'lqUTU':_0x207c4f(0x3a3,0x38a,0x3d5,0x381)+'}}','xCEUZ':_0x207c4f(0x3aa,0x35d,0x38a,0x345),'rKMJc':function(_0x10a235,_0x722d22){return _0x10a235!==_0x722d22;},'zRBGG':_0x4e83a4(0x175,0x18c,0x175,0x1b7),'mjrTH':_0x207c4f(0x313,0x345,0x2f7,0x34c),'EImCT':function(_0x354c9f,_0x16939c,_0x31f670){return _0x354c9f(_0x16939c,_0x31f670);}},{context:context='',body:body='',worldBookContent:worldBookContent='',variables:variables={},userDemand:userDemand='',characterListText:characterListText='',outfitEnableListText:outfitEnableListText='',commonCharacterListText:commonCharacterListText=''}=_0x1c16da,_0x977d24=new Set();function _0x207c4f(_0x447101,_0x5e5316,_0x37cc0f,_0x128eff){return _0x29ab(_0x5e5316-0x188,_0x447101);}let _0x189d95=_0x295046;const _0x17391e=_0x2fbfd2[_0x207c4f(0x348,0x386,0x37e,0x372)](getContext),_0x2de78f=_0x17391e?.[_0x4e83a4(0x185,0x1a6,0x16a,0x18d)]||'';let _0x2ca013=worldBookContent;if(_0x2ca013){if(_0x2fbfd2['flVjM']===_0x2fbfd2['uDULq']){if(_0xa1fc09[_0x207c4f(0x3e4,0x38f,0x3c6,0x392)](_0x355d97))return _0x5395bb;return[{'type':_0x2fbfd2[_0x207c4f(0x2ab,0x2e2,0x28e,0x2f7)],'text':_0x2fbfd2[_0x207c4f(0x2e2,0x31b,0x2c7,0x2e5)](_0x3db405,'')}];}else _0x2ca013=_0x2ca013['replaceAll'](_0x2fbfd2[_0x207c4f(0x3bb,0x380,0x3b3,0x326)],_0x2de78f),_0x2ca013=_0x2ca013[_0x207c4f(0x2ac,0x2ed,0x297,0x291)](_0x2fbfd2[_0x207c4f(0x2e5,0x338,0x345,0x302)],_0x2de78f);}_0x189d95=_0x2fbfd2[_0x4e83a4(0x15a,0x197,0x148,0x160)](replacePlaceholder,_0x189d95,_0x4e83a4(0x158,0x1b1,0x156,0x1ab),context,_0x977d24),_0x189d95=_0x2fbfd2[_0x207c4f(0x2ba,0x2e8,0x2e1,0x296)](replacePlaceholder,_0x189d95,_0x2fbfd2[_0x207c4f(0x32b,0x2f8,0x2bf,0x2af)],_0x2ca013,_0x977d24),_0x189d95=_0x2fbfd2[_0x4e83a4(0x1b9,0x181,0x177,0x160)](replacePlaceholder,_0x189d95,_0x2fbfd2[_0x4e83a4(0x20b,0x1c6,0x190,0x1e8)],body,_0x977d24),_0x189d95=replacePlaceholder(_0x189d95,_0x2fbfd2[_0x207c4f(0x301,0x2fb,0x2f8,0x32e)],characterListText,_0x977d24),_0x189d95=_0x2fbfd2[_0x207c4f(0x2e7,0x341,0x31f,0x302)](replacePlaceholder,_0x189d95,_0x2fbfd2[_0x207c4f(0x320,0x2e5,0x2eb,0x2ca)],outfitEnableListText,_0x977d24),_0x189d95=_0x2fbfd2['RgnMd'](replacePlaceholder,_0x189d95,_0x2fbfd2[_0x207c4f(0x33a,0x31e,0x2e9,0x346)],commonCharacterListText,_0x977d24),_0x189d95=replacePlaceholder(_0x189d95,_0x2fbfd2[_0x207c4f(0x367,0x372,0x32e,0x36f)],userDemand,_0x977d24);if(variables&&Object[_0x207c4f(0x327,0x350,0x35b,0x361)](variables)[_0x207c4f(0x2df,0x2e7,0x2c6,0x33b)]>-0xdd*0x3+0x863+-0x5cc){if(_0x2fbfd2[_0x4e83a4(0x14f,0x146,0x1d5,0x18e)](_0x2fbfd2[_0x207c4f(0x2eb,0x2e1,0x2ef,0x323)],_0x2fbfd2[_0x4e83a4(0x1b7,0x1c1,0x1b7,0x1b1)])){const _0xce2fb1=/\{\{getvar::([^}]+)\}\}/g,_0x5844bf=JSON[_0x4e83a4(0x196,0x121,0x197,0x17d)](_0x189d95),_0x2eddc3=[..._0x5844bf[_0x207c4f(0x377,0x334,0x361,0x352)](_0xce2fb1)],_0xb7f016=new Set();for(const _0x5bc78c of _0x2eddc3){_0xb7f016[_0x4e83a4(0x1f4,0x1fe,0x1f2,0x1d4)](_0x5bc78c[0xf3c+0x17d3+0x2*-0x1387]);}for(const _0x15fa76 of _0xb7f016){const _0x12a3de=_0x207c4f(0x33c,0x2f0,0x2e7,0x2b8)+_0x15fa76+'}}',_0x289b54=variables[_0x15fa76]||'';_0x189d95=_0x2fbfd2['Ljkgl'](replacePlaceholder,_0x189d95,_0x12a3de,_0x289b54,_0x977d24);}}else _0x5f22f4[_0x4e83a4(0x1ab,0x1e8,0x1e3,0x1d4)](_0x4e83a4(0x19f,0x20c,0x18b,0x1be)+_0x207c4f(0x2ee,0x307,0x336,0x2d5)+_0x5a9973+'@}');}_0x189d95=_0x2fbfd2['EImCT'](processVariablePlaceholdersInMessages,_0x189d95,_0x977d24);const _0x206bd2={};_0x206bd2['messages']=_0x189d95;function _0x4e83a4(_0x566741,_0xd6633d,_0xf10554,_0x3959e6){return _0x29ab(_0x3959e6-0x0,_0xf10554);}return _0x206bd2[_0x4e83a4(0x1aa,0x1b5,0x1b1,0x1a0)+'riables']=_0x977d24,_0x206bd2;}function processVariablePlaceholdersInMessages(_0x4e1035,_0x4214b3){function _0x23257f(_0x1b202b,_0x54eedc,_0xfdf4a3,_0x348990){return _0x29ab(_0x348990- -0x3b4,_0xfdf4a3);}const _0x408ec5={'oOZIo':function(_0xb87b3a,_0x1aab87,_0x1eeb23,_0x11fca7){return _0xb87b3a(_0x1aab87,_0x1eeb23,_0x11fca7);},'jqSyC':function(_0x1375d7,_0x263df5){return _0x1375d7===_0x263df5;},'tsaVF':function(_0x250e44,_0x5a9719){return _0x250e44!==_0x5a9719;},'xRysx':'tmwvK'};if(!_0x4e1035||_0x408ec5[_0x50d9dd(0x183,0x1bb,0x1c9,0x1af)](_0x4e1035[_0x50d9dd(0xed,0x9e,0xe0,0xac)],-0x1cb9+0x23cd+-0x714))return _0x4e1035;function _0x50d9dd(_0x50cbea,_0x43bd66,_0x400b14,_0x1162ce){return _0x29ab(_0x50cbea- -0x72,_0x400b14);}const _0x14242d=getContext();return!_0x14242d[_0x23257f(-0x198,-0x208,-0x173,-0x1b3)+'ta']&&(_0x408ec5['tsaVF'](_0x408ec5[_0x50d9dd(0x16b,0x1a9,0x12c,0x14a)],_0x23257f(-0x237,-0x285,-0x1f2,-0x232))?_0x14242d['chatMetada'+'ta']={}:_0x30b11b[_0x50d9dd(0xe2,0xff,0xeb,0xca)](_0x39a469)),!_0x14242d[_0x23257f(-0x1b0,-0x15f,-0x207,-0x1b3)+'ta']['variables']&&(_0x14242d[_0x23257f(-0x204,-0x1c5,-0x1bb,-0x1b3)+'ta'][_0x23257f(-0x166,-0x1f4,-0x1ea,-0x1b9)]={}),_0x4e1035[_0x23257f(-0x243,-0x28a,-0x293,-0x242)](_0x237e5f=>{function _0xe4ea08(_0xaad7a6,_0x1f40cd,_0x4375f5,_0x3c5cbb){return _0x50d9dd(_0x3c5cbb-0x2c7,_0x1f40cd-0x157,_0x1f40cd,_0x3c5cbb-0x186);}if(!_0x237e5f||!_0x237e5f[_0x13a8e8(-0x5c,-0x26,-0x4e,-0x9d)])return _0x237e5f;function _0x13a8e8(_0x186600,_0x5f0610,_0xa652ed,_0x316c2a){return _0x23257f(_0x186600-0x19d,_0x5f0610-0x1e3,_0x316c2a,_0xa652ed-0x179);}return{..._0x237e5f,'content':_0x408ec5[_0x13a8e8(-0xa8,-0x8f,-0x58,-0x10)](processContentVariables,_0x237e5f['content'],_0x14242d,_0x4214b3)};});}function processContentVariables(_0x4c1613,_0x21f707,_0xd83dff){function _0x424ce3(_0x1994a8,_0x3188ab,_0x51f754,_0x5ca8f7){return _0x29ab(_0x51f754- -0x2d3,_0x5ca8f7);}const _0x2d0792={'EqAPS':function(_0x52f780,_0x455322){return _0x52f780!==_0x455322;},'sKXCu':_0x48736b(0x9e,0xec,0xf4,0x61),'XHtKU':_0x48736b(0xa0,0x5b,0xc4,0x45),'hyLtc':function(_0x3a99e5,_0x4bd4f3){return _0x3a99e5!==_0x4bd4f3;},'QoROg':_0x48736b(0x63,0x5a,0x84,0xbc),'yafQI':'rhKJX','awUqC':function(_0x10be04,_0x3d4dc4){return _0x10be04===_0x3d4dc4;},'MpKEA':_0x48736b(0x62,0xa8,0x90,0x67),'wTxwM':_0x424ce3(-0x8a,-0x11c,-0xd6,-0x123),'pRrJh':function(_0x3e63d2,_0x5e5074,_0x511b52,_0x218e52){return _0x3e63d2(_0x5e5074,_0x511b52,_0x218e52);},'McJlD':_0x48736b(0x76,0x3f,0x4c,0x39),'jDrkM':function(_0x45c6c9,_0x30884d){return _0x45c6c9===_0x30884d;},'vnxxk':_0x48736b(0x8f,0x69,0x35,0xbb)};if(typeof _0x4c1613===_0x2d0792['wTxwM']){if(_0x2d0792[_0x48736b(0x77,0x20,0xc6,0x94)](_0x424ce3(-0x11f,-0x1c8,-0x16f,-0x1c5),_0x2d0792[_0x424ce3(-0xfd,-0x151,-0x121,-0x137)]))return _0x2d0792[_0x48736b(0xa7,0xfa,0x5f,0xe5)](processStringVariables,_0x4c1613,_0x21f707,_0xd83dff);else for(const _0x4a8baf of _0x3e2144[_0x424ce3(-0x12a,-0x184,-0x15d,-0x165)]){if(_0x4a8baf[_0x424ce3(-0xc7,-0xfb,-0x103,-0xb5)]&&_0x2d0792['EqAPS'](_0x4a8baf[_0x424ce3(-0x15c,-0xbf,-0x103,-0xa8)]['trim'](),'')){const _0x3b8f67={};_0x3b8f67[_0x424ce3(-0xdc,-0xa4,-0xea,-0x116)]=_0x2d0792[_0x48736b(0xc2,0x11c,0x8a,0x6d)],_0x3b8f67[_0x48736b(0xbb,0xde,0x106,0xd7)]=_0x4a8baf[_0x48736b(0x9e,0xe6,0xfa,0xc9)],_0x50b2cf[_0x424ce3(-0x126,-0x129,-0x17f,-0x1a5)](_0x3b8f67);}if(_0x4a8baf[_0x48736b(0xa0,0xf2,0x7b,0xd7)]&&_0x2d0792[_0x48736b(0x77,0x56,0x4d,0x48)](_0x4a8baf[_0x48736b(0xa0,0x5e,0x71,0x79)][_0x424ce3(-0x17e,-0x153,-0x153,-0x1ae)](),'')){const _0x13d847={};_0x13d847[_0x48736b(0xb7,0xb6,0x9c,0x69)]=_0x2d0792['XHtKU'],_0x13d847[_0x48736b(0xbb,0x88,0x111,0x78)]=_0x4a8baf[_0x48736b(0xa0,0xe6,0x61,0xef)],_0x417539[_0x424ce3(-0x19b,-0x12c,-0x17f,-0x1c2)](_0x13d847);}}}function _0x48736b(_0x740902,_0x1dcfe5,_0x3121d6,_0x2c9a5d){return _0x29ab(_0x740902- -0x132,_0x3121d6);}if(Array[_0x424ce3(-0x98,-0x8d,-0xcc,-0x126)](_0x4c1613))return _0x2d0792[_0x48736b(0x55,0x2d,0x5c,0x49)](_0x2d0792[_0x424ce3(-0x19f,-0x1cb,-0x17b,-0x180)],_0x424ce3(-0x181,-0x13c,-0x159,-0x15b))?![]:_0x4c1613['map'](_0x424b24=>{function _0x1ef7a4(_0x27d3d2,_0x17d7a5,_0x5cfe85,_0x497c7f){return _0x424ce3(_0x27d3d2-0x1c7,_0x17d7a5-0x152,_0x17d7a5-0x387,_0x5cfe85);}function _0x41e3d7(_0x5c9d48,_0x324f85,_0xb4b136,_0x1b72b8){return _0x424ce3(_0x5c9d48-0x1dc,_0x324f85-0x1c,_0x1b72b8-0x45b,_0x5c9d48);}if(_0x2d0792['hyLtc'](_0x2d0792[_0x41e3d7(0x340,0x322,0x31e,0x2f3)],_0x2d0792[_0x1ef7a4(0x2c0,0x26c,0x234,0x299)])){if(_0x424b24&&_0x2d0792[_0x1ef7a4(0x291,0x280,0x281,0x236)](_0x424b24[_0x1ef7a4(0x212,0x210,0x1eb,0x1ef)],_0x2d0792[_0x41e3d7(0x34e,0x33d,0x373,0x34a)])&&_0x2d0792[_0x1ef7a4(0x28c,0x280,0x265,0x2b8)](typeof _0x424b24[_0x41e3d7(0x366,0x2d6,0x312,0x31c)],_0x2d0792['wTxwM']))return{..._0x424b24,'text':_0x2d0792['pRrJh'](processStringVariables,_0x424b24[_0x1ef7a4(0x1f0,0x248,0x232,0x209)],_0x21f707,_0xd83dff)};return _0x424b24;}else _0x1c35b2[_0x41e3d7(0x328,0x3a2,0x387,0x35c)](_0x142a13[-0x691*-0x2+0x194f+-0xcd*0x30]);});return _0x4c1613;}function processStringVariables(_0x48f942,_0x5a5845,_0x2b1360){const _0xb3736c={'ZojbL':function(_0x33ff0c,_0x15b401){return _0x33ff0c!==_0x15b401;},'mUQdw':_0x2d0be1(-0x107,-0x119,-0xd8,-0xdd),'TOTis':_0x21dae2(0x4cc,0x483,0x4cf,0x4cd),'Lmgpk':'XNhPg','PUhqg':function(_0x3f0a88,_0x4932a3){return _0x3f0a88(_0x4932a3);},'xPtwV':function(_0x51be34,_0x2f3361){return _0x51be34===_0x2f3361;},'aACgV':_0x2d0be1(-0x9a,-0x78,-0xce,-0xf3),'xsIvR':function(_0x1387d5,_0x1cb0e9,_0x26dea4){return _0x1387d5(_0x1cb0e9,_0x26dea4);},'ZbxQV':_0x21dae2(0x480,0x46a,0x422,0x444),'mYoSP':function(_0x12d68b,_0x554420){return _0x12d68b(_0x554420);}};if(!_0x48f942)return _0x48f942;function _0x21dae2(_0x46b453,_0xc38164,_0x20791b,_0x288357){return _0x29ab(_0xc38164-0x2c7,_0x288357);}let _0x326f08=_0x48f942;_0x326f08=_0x326f08['replace'](/\{@setvar::([^:@]+)::([\s\S]*?)@\}/g,(_0xbdcfc3,_0x53b689,_0x45199b)=>{function _0x5dcff7(_0x4712a2,_0x48caf9,_0x15a8d6,_0x4e60f8){return _0x2d0be1(_0x4712a2-0xdf,_0x48caf9-0x1d5,_0x15a8d6-0x43b,_0x4712a2);}const _0x517060=_0x53b689[_0x22f9ad(-0x42,-0x1f,-0x73,-0x23)]();console['log'](_0x22f9ad(-0x5b,-0x3a,-0x9d,-0x32)+_0x22f9ad(0xd,-0x38,0x42,0x63)+_0x22f9ad(-0x1e,-0x67,-0x53,-0x2)+_0x517060+_0x5dcff7(0x2de,0x320,0x2d3,0x317)+_0x45199b[_0x5dcff7(0x326,0x301,0x335,0x376)](0x4*0x14b+0x4*0x937+-0x2a08,-0x3ad*-0x8+0x7be*-0x3+-0x5fc)+_0x22f9ad(0x18,-0x5,-0x19,0x14)),_0x5a5845[_0x5dcff7(0x332,0x376,0x372,0x330)+'ta']['variables'][_0x517060]=_0x45199b;function _0x22f9ad(_0x4a9f59,_0x8f13a9,_0x5803b5,_0x5951b1){return _0x21dae2(_0x4a9f59-0x16a,_0x4a9f59- -0x489,_0x5803b5-0xda,_0x8f13a9);}if(_0x2b1360){if(_0xb3736c[_0x5dcff7(0x2ff,0x341,0x2e8,0x2a9)](_0xb3736c[_0x5dcff7(0x3b9,0x324,0x35d,0x3b8)],_0xb3736c[_0x22f9ad(0x2a,0x1e,-0xa,0x55)])){if(_0x46b34e){const _0x31b13f=_0x5bb00e[_0x5dcff7(0x3a9,0x32b,0x367,0x32a)](_0xd80488,arguments);return _0xcf989f=null,_0x31b13f;}}else _0x2b1360[_0x22f9ad(0x12,0xd,0x26,0xe)](_0x22f9ad(-0x32,-0x1d,-0x31,-0x54)+_0x517060+'@}');}return'';}),_0x326f08=_0x326f08['replace'](/\{@getvar::([^@]+)@\}/g,(_0x45159b,_0xd93171)=>{function _0x19beda(_0x459e38,_0xda5814,_0x30828c,_0x1ade02){return _0x21dae2(_0x459e38-0xea,_0xda5814- -0x48b,_0x30828c-0x1cd,_0x30828c);}function _0x353d52(_0x5df3f8,_0x3a3e7b,_0x1539d1,_0x3db466){return _0x21dae2(_0x5df3f8-0x1a7,_0x1539d1- -0x4d4,_0x1539d1-0xf0,_0x5df3f8);}if(_0xb3736c[_0x353d52(-0x76,-0xe4,-0x96,-0xb2)](_0xb3736c['TOTis'],_0xb3736c[_0x353d52(-0x84,-0x9b,-0x75,-0x92)])){const _0x135247=_0xd93171[_0x19beda(-0x51,-0x44,-0x1,-0x52)](),_0x12de47=_0x5a5845[_0x19beda(0x6f,0x3d,0x80,0x0)+'ta'][_0x353d52(0x46,-0xe,-0x12,0x13)][_0x135247]||'';return console[_0x19beda(0x5e,0x1b,0x6c,0x4c)](_0x19beda(-0x71,-0x5d,-0xb0,-0x3)+_0x19beda(0x2a,-0x16,0x15,-0x54)+_0x19beda(0x30,-0x20,-0x44,-0x70)+_0x135247+_0x353d52(-0x59,-0x35,-0x87,-0x45)+_0xb3736c[_0x19beda(-0x87,-0x50,-0x13,-0x3d)](String,_0x12de47)[_0x19beda(0x16,0x0,0x1c,-0x47)](-0x70f+0x1394+-0xc85,-0x2*-0xfee+0x1bd9*-0x1+-0x3d1*0x1)+_0x19beda(0xd,0x16,0x6e,0x56)),_0x2b1360&&(_0xb3736c['xPtwV'](_0xb3736c[_0x353d52(-0x8b,-0x51,-0x72,-0xc1)],_0xb3736c[_0x19beda(-0x3,-0x29,-0x58,-0x4d)])?_0x2b1360[_0x353d52(-0x86,0x20,-0x39,-0x37)]('{@getvar::'+_0x135247+'@}'):_0x4769c3&&_0x3c8a83[_0x19beda(0x65,0x10,0x3a,0x68)](_0x2b860e)),_0x12de47;}else _0x5bd925[_0x353d52(-0x19,-0x47,-0x39,-0x91)](_0x353d52(-0x66,0x11,-0x26,-0x2d)+_0x19beda(-0x4,0x21,-0x39,0x31)+_0x409e48+'@}');}),_0x326f08=_0x326f08[_0x21dae2(0x407,0x445,0x484,0x49f)](/\{@setglobalvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x41768f,_0x1fac37,_0x1dd064)=>{function _0x449621(_0x325f24,_0x483fb1,_0x1247b2,_0x171d7c){return _0x21dae2(_0x325f24-0xa2,_0x483fb1-0x8d,_0x1247b2-0x73,_0x1247b2);}function _0x2e9eb6(_0x138bfe,_0x3d403d,_0x399bf7,_0x22656f){return _0x21dae2(_0x138bfe-0x1ef,_0x3d403d- -0x2be,_0x399bf7-0xbd,_0x22656f);}const _0x410bdb=_0x1fac37[_0x2e9eb6(0x1b3,0x189,0x1c9,0x1a4)]();console['log'](_0x2e9eb6(0x12f,0x170,0x1cb,0x1a7)+'cessor]\x20se'+_0x2e9eb6(0x245,0x1f8,0x21f,0x1b4)+':\x20'+_0x410bdb+_0x2e9eb6(0x111,0x16b,0x1b2,0x181)+_0x1dd064[_0x2e9eb6(0x1d4,0x1cd,0x182,0x187)](-0x2151+-0x226f+0x10f0*0x4,0x958+0x1a3+0xfb*-0xb)+_0x2e9eb6(0x237,0x1e3,0x219,0x1ab)),_0xb3736c[_0x449621(0x4c3,0x4d8,0x4fb,0x49a)](setglobalvar,_0x410bdb,_0x1dd064);if(_0x2b1360){if(_0xb3736c[_0x449621(0x590,0x559,0x51b,0x570)](_0xb3736c[_0x449621(0x50a,0x536,0x4db,0x531)],_0x449621(0x504,0x4f0,0x4d7,0x498)))return![];else _0x2b1360['add'](_0x449621(0x510,0x4fb,0x4ba,0x4f1)+_0x2e9eb6(0x244,0x1ee,0x1a2,0x223)+_0x410bdb+'@}');}return'';}),_0x326f08=_0x326f08[_0x21dae2(0x452,0x445,0x432,0x431)](/\{@getglobalvar::([^@]+)@\}/g,(_0x1e691a,_0x41e8a4)=>{function _0xd2687a(_0x325aeb,_0x3c37bc,_0x7a15a4,_0x3d103c){return _0x21dae2(_0x325aeb-0xd7,_0x3c37bc- -0x306,_0x7a15a4-0x7c,_0x3d103c);}function _0x56ea08(_0x5d0a7f,_0x1f6892,_0x2e63da,_0x13e800){return _0x21dae2(_0x5d0a7f-0x10e,_0x13e800- -0x239,_0x2e63da-0x21,_0x5d0a7f);}const _0x25987f=_0x41e8a4[_0xd2687a(0x164,0x141,0x18c,0x13c)](),_0x333501=_0xb3736c[_0xd2687a(0xe9,0x135,0x14c,0x176)](getglobalvar,_0x25987f)||'';return console[_0x56ea08(0x22c,0x28a,0x227,0x26d)](_0xd2687a(0x148,0x128,0x17f,0xd9)+_0xd2687a(0x184,0x16f,0x151,0x1a6)+_0xd2687a(0x1d1,0x1b0,0x188,0x201)+':\x20'+_0x25987f+_0x56ea08(0x247,0x1d3,0x257,0x214)+String(_0x333501)[_0x56ea08(0x21f,0x298,0x235,0x252)](-0x17*0xb3+-0x1*-0x1c14+-0xbff,0x63*0x21+0x1*-0xf56+0x2c5)+_0x56ea08(0x258,0x2aa,0x281,0x268)),_0x2b1360&&_0x2b1360[_0xd2687a(0x1a0,0x195,0x1e2,0x178)]('{@getgloba'+_0x56ea08(0x237,0x220,0x26c,0x273)+_0x25987f+'@}'),_0x333501;});function _0x2d0be1(_0x26074a,_0x2f5150,_0x5eafda,_0x750e0d){return _0x29ab(_0x5eafda- -0x2ca,_0x750e0d);}return _0x326f08=_0x326f08[_0x2d0be1(-0x10f,-0x16c,-0x14c,-0x14a)](/\{@getworldvar::([^@]+)@\}/g,(_0x5bcbfb,_0x4ff4fa)=>{function _0x4f2911(_0x15f275,_0x1ab94d,_0x14f6aa,_0x430164){return _0x2d0be1(_0x15f275-0xe9,_0x1ab94d-0x1a7,_0x15f275-0x630,_0x14f6aa);}const _0x4aab0c=_0x4ff4fa[_0x4f2911(0x4e6,0x52a,0x4c5,0x4c6)](),_0x457a57=_0xb3736c[_0x41eefa(0x45e,0x47c,0x42c,0x4a9)](getworldvar,_0x4aab0c)||'';console['log'](_0x4f2911(0x4cd,0x49d,0x47c,0x51f)+_0x4f2911(0x514,0x4d0,0x53b,0x540)+_0x41eefa(0x4bc,0x4b9,0x4ba,0x475)+'\x20'+_0x4aab0c+_0x4f2911(0x4ec,0x538,0x4c1,0x511)+_0xb3736c['PUhqg'](String,_0x457a57)['substring'](0x1b7*0xd+-0x1*-0x2379+-0x2*0x1ce2,0x1f*0x46+0x743+-0xf8b)+_0x4f2911(0x540,0x4f1,0x57e,0x59a));function _0x41eefa(_0xe2f0d1,_0x405d00,_0x111b2f,_0x2cc84a){return _0x21dae2(_0xe2f0d1-0x4c,_0x405d00-0x1,_0x111b2f-0x11e,_0x2cc84a);}return _0x2b1360&&_0x2b1360[_0x4f2911(0x53a,0x593,0x4ee,0x592)](_0x4f2911(0x524,0x4e5,0x540,0x549)+_0x41eefa(0x448,0x447,0x3f4,0x455)+_0x4aab0c+'@}'),_0x457a57;}),_0x326f08;}export function buildPromptWithTrigger(_0x4504fa){const _0xdbc640={'rTgId':function(_0x2ccf5b,_0x70a224,_0x575e41,_0x10b36c){return _0x2ccf5b(_0x70a224,_0x575e41,_0x10b36c);},'VVVTa':function(_0x35226d,_0x3afe73){return _0x35226d!==_0x3afe73;},'bQuAI':_0x1fe944(0x2bc,0x33d,0x2fb,0x2f2),'xasCG':_0x1fe944(0x325,0x2aa,0x2be,0x2e7),'qIstP':function(_0x569989,_0x33da32){return _0x569989===_0x33da32;},'tUwxZ':_0x1fe944(0x28e,0x26c,0x2fc,0x2c3),'hMMyN':'user','nlYBx':_0x46bdc7(-0x178,-0x1c7,-0x188,-0x1fe),'KFDMz':function(_0x40118c,_0x679236){return _0x40118c!==_0x679236;},'wjBmQ':_0x1fe944(0x30b,0x2f4,0x373,0x331),'fTJJV':_0x1fe944(0x2f6,0x295,0x2d6,0x2c1),'IcsfC':_0x1fe944(0x364,0x32a,0x332,0x327),'MpsRv':function(_0x4db35a,_0x3ce822){return _0x4db35a(_0x3ce822);},'Lpneu':function(_0x509574,_0x58fd04,_0x5890f5){return _0x509574(_0x58fd04,_0x5890f5);}},{requestType:_0xe7b92c,contextData:_0x120bc7}=_0x4504fa,_0x4eecdd=extension_settings[extensionName]?.[_0x1fe944(0x2bb,0x344,0x33d,0x2ee)+_0x46bdc7(-0x1e7,-0x1e9,-0x1fc,-0x231)+_0x46bdc7(-0x1a6,-0x19f,-0x148,-0x1e4)]||{},_0x243bdb={};_0x243bdb[_0x46bdc7(-0x1eb,-0x200,-0x21c,-0x232)+'ofile']='默认';function _0x46bdc7(_0x4f6a9d,_0x4e9528,_0x35ed5f,_0x5f2910){return _0x29ab(_0x4e9528- -0x352,_0x35ed5f);}const _0x15d629=_0x4eecdd[_0xe7b92c]||_0x243bdb,_0x381ef4=_0x15d629['context_pr'+'ofile']||'默认',_0x4de282=extension_settings[extensionName]?.[_0x46bdc7(-0x1bc,-0x201,-0x1f3,-0x1b7)+_0x46bdc7(-0x17b,-0x198,-0x17a,-0x17c)+'s']||{},_0x15c63b=_0x4de282[_0x381ef4]||_0x4de282[Object[_0x46bdc7(-0x1d6,-0x18a,-0x189,-0x1de)](_0x4de282)[0x10*-0x259+-0x6*0x21f+0x1*0x324a]]||{},{context:context='',body:body='',worldBookContent:worldBookContent='',userDemand:userDemand=''}=_0x120bc7,_0x9e4ad2=[userDemand,context,body,worldBookContent][_0x1fe944(0x307,0x300,0x29a,0x2b0)](Boolean)[_0x46bdc7(-0x247,-0x1f1,-0x1c5,-0x216)]('\x0a');function _0x1fe944(_0x3b04b3,_0x35e723,_0x3bf50f,_0x563925){return _0x29ab(_0x563925-0x155,_0x35e723);}const _0x1c6ffe=[];if(_0x15c63b['entries']&&Array['isArray'](_0x15c63b['entries'])){if(_0xdbc640['VVVTa'](_0xdbc640['bQuAI'],_0xdbc640[_0x1fe944(0x2ef,0x2fd,0x30f,0x2b3)]))for(const _0xe48fa0 of _0x15c63b[_0x1fe944(0x319,0x321,0x33d,0x335)]){if(!_0xe48fa0[_0x1fe944(0x30f,0x32c,0x2b5,0x2f4)])continue;if(!_0xe48fa0[_0x46bdc7(-0x1ad,-0x165,-0x11c,-0x14a)]||_0xdbc640['qIstP'](_0xe48fa0[_0x1fe944(0x31a,0x319,0x329,0x342)]['trim'](),''))continue;if(_0xdbc640['qIstP'](_0xe48fa0[_0x46bdc7(-0x17d,-0x1ad,-0x1ae,-0x1fc)+'e'],_0xdbc640['tUwxZ'])){if(!checkTriggerWords(_0xe48fa0['triggerWor'+'ds'],_0x9e4ad2))continue;}const _0x38c660={};_0x38c660[_0x1fe944(0x346,0x343,0x371,0x33e)]=_0xe48fa0['role']||_0xdbc640[_0x46bdc7(-0x134,-0x164,-0x158,-0x16b)],_0x38c660[_0x46bdc7(-0x126,-0x165,-0x1a6,-0x1bc)]=_0xe48fa0['content'],_0x1c6ffe[_0x1fe944(0x2d8,0x2e6,0x303,0x2a9)](_0x38c660);}else _0x3a093a[_0x1fe944(0x381,0x329,0x2f1,0x329)](_0x46bdc7(-0x198,-0x1ab,-0x1f0,-0x1b7)+'lvar::'+_0x21502c+'@}');}else{if(_0x15c63b[_0x46bdc7(-0x1ef,-0x1dc,-0x1da,-0x18b)]&&Array[_0x1fe944(0x342,0x308,0x35a,0x35c)](_0x15c63b['history']))for(const _0x1e8d51 of _0x15c63b[_0x1fe944(0x2f8,0x2a6,0x323,0x2cb)]){if(_0xdbc640[_0x1fe944(0x354,0x30e,0x38f,0x33b)](_0xdbc640[_0x46bdc7(-0x160,-0x18d,-0x15f,-0x196)],_0x46bdc7(-0x1fd,-0x1c7,-0x1d5,-0x1e9))){if(_0x121eec['includes'](_0x3a02d0))return!![];}else{if(_0x1e8d51['user']&&_0xdbc640['KFDMz'](_0x1e8d51[_0x46bdc7(-0x165,-0x182,-0x1ce,-0x186)][_0x1fe944(0x307,0x303,0x30d,0x2d5)](),'')){if(_0xdbc640[_0x46bdc7(-0x161,-0x192,-0x1a3,-0x162)]!==_0xdbc640[_0x1fe944(0x345,0x330,0x365,0x354)]){const _0x2347f8={};_0x2347f8[_0x1fe944(0x308,0x360,0x362,0x33e)]=_0xdbc640[_0x46bdc7(-0x188,-0x164,-0x118,-0x123)],_0x2347f8[_0x46bdc7(-0x1bb,-0x165,-0x138,-0x1a0)]=_0x1e8d51['user'],_0x1c6ffe[_0x46bdc7(-0x218,-0x1fe,-0x1c2,-0x1ef)](_0x2347f8);}else return{..._0x258e7d,'text':_0xdbc640['rTgId'](_0x27058a,_0x354a3c[_0x46bdc7(-0x1f0,-0x1be,-0x211,-0x1e2)],_0x47013a,_0x5db6a7)};}if(_0x1e8d51[_0x46bdc7(-0x1a9,-0x180,-0x169,-0x179)]&&_0xdbc640[_0x46bdc7(-0x15a,-0x16c,-0x17f,-0x1ba)](_0x1e8d51[_0x46bdc7(-0x1b9,-0x180,-0x168,-0x1dc)][_0x1fe944(0x2d5,0x282,0x2bd,0x2d5)](),'')){const _0x298ee5={};_0x298ee5[_0x1fe944(0x314,0x2f6,0x38f,0x33e)]=_0xdbc640[_0x46bdc7(-0x19b,-0x1d1,-0x180,-0x1f1)],_0x298ee5[_0x46bdc7(-0x135,-0x165,-0x1ba,-0x15d)]=_0x1e8d51[_0x1fe944(0x30a,0x309,0x32f,0x327)],_0x1c6ffe['push'](_0x298ee5);}}}}const _0x2e9cf8=_0xdbc640[_0x1fe944(0x2a2,0x2c0,0x2e8,0x2e4)](mergeAdjacentMessages,_0x1c6ffe),{messages:_0x426f39,replacedVariables:_0x3c15b3}=_0xdbc640['Lpneu'](replaceAllPlaceholders,_0x2e9cf8,_0x120bc7),_0x165ddc={};return _0x165ddc[_0x46bdc7(-0x131,-0x14c,-0x142,-0x13a)+'e']=_0xe7b92c,_0x165ddc[_0x46bdc7(-0x1cc,-0x1e1,-0x1ff,-0x192)+'nt']=_0x1c6ffe['length'],_0x165ddc[_0x1fe944(0x2ce,0x309,0x319,0x310)+'t']=_0x2e9cf8[_0x46bdc7(-0x20b,-0x1f3,-0x20a,-0x207)],_0x165ddc[_0x1fe944(0x28a,0x297,0x2de,0x2df)]=_0x426f39[_0x46bdc7(-0x1b2,-0x1f3,-0x21e,-0x1ac)],_0x165ddc['replacedVa'+_0x1fe944(0x319,0x308,0x328,0x34e)]=[..._0x3c15b3],console[_0x1fe944(0x33a,0x36a,0x380,0x334)]('[promptPro'+_0x46bdc7(-0x1e0,-0x1dd,-0x19a,-0x21c)+_0x46bdc7(-0x1b7,-0x1ec,-0x233,-0x244),_0x165ddc),_0x426f39;}export function getProcessedPrompt(_0x3bdece,_0x28a252){const _0xb87ca1={'mKylJ':function(_0x56eeab,_0x2e64b1){return _0x56eeab(_0x2e64b1);}},_0xca9a96={};return _0xca9a96['requestTyp'+'e']=_0x3bdece,_0xca9a96['contextDat'+'a']=_0x28a252,_0xb87ca1['mKylJ'](buildPromptWithTrigger,_0xca9a96);}