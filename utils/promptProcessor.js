(function(_0x4709d1,_0x2695f7){function _0x3627d3(_0x47566a,_0x4a3532,_0x2b1dbf,_0x40b499){return _0x2dc0(_0x40b499-0x12,_0x4a3532);}const _0x548d55=_0x4709d1();function _0x57f004(_0x43f168,_0x25dc7a,_0x218027,_0x277529){return _0x2dc0(_0x25dc7a-0x34a,_0x43f168);}while(!![]){try{const _0x438da6=-parseInt(_0x3627d3(0x1aa,0x180,0x138,0x16b))/(-0x149c+0x1b*-0xbd+0x288c)+-parseInt(_0x57f004(0x4f7,0x4da,0x51e,0x497))/(-0x1adb+0x9eb+-0x10f2*-0x1)+parseInt(_0x57f004(0x500,0x4e9,0x519,0x4cf))/(-0xd5a+0x1064+-0x307)*(-parseInt(_0x3627d3(0x219,0x1f3,0x194,0x1c6))/(-0x1*-0x11f1+0x1a*-0x8b+-0x3cf))+-parseInt(_0x3627d3(0x1f1,0x21d,0x1f4,0x1d3))/(0xa93*-0x1+-0xbdb*-0x2+-0x1*0xd1e)*(-parseInt(_0x57f004(0x4c8,0x490,0x472,0x45a))/(-0xc2e*0x1+-0x2f9+0xf2d))+-parseInt(_0x3627d3(0x1b6,0x1f5,0x1ce,0x1d2))/(0xd8e+-0xbfc+0x4f*-0x5)*(parseInt(_0x57f004(0x4ae,0x4ed,0x4fe,0x510))/(0x1695+0x245d+-0x3aea*0x1))+-parseInt(_0x3627d3(0x12a,0x166,0xfa,0x142))/(0x6c4+0x78f*-0x1+-0x4*-0x35)+parseInt(_0x57f004(0x4b7,0x4cf,0x49f,0x4bd))/(0xb*0x25c+-0x10f1*0x1+-0x8f9*0x1);if(_0x438da6===_0x2695f7)break;else _0x548d55['push'](_0x548d55['shift']());}catch(_0x251a87){_0x548d55['push'](_0x548d55['shift']());}}}(_0x1b23,-0x45d6f+-0x1*0x7e3fb+0x1234bf));const _0x334cd8=(function(){const _0x5b874b={};_0x5b874b[_0x3bba0c(0x3be,0x3bd,0x398,0x394)]=function(_0x3a473e,_0x4d1eb2){return _0x3a473e!==_0x4d1eb2;},_0x5b874b[_0x5d109b(0x45b,0x44b,0x482,0x4c9)]=_0x3bba0c(0x3a6,0x356,0x369,0x3aa);function _0x3bba0c(_0x44ecc8,_0x16549a,_0x34df70,_0x2c9a4f){return _0x2dc0(_0x44ecc8-0x237,_0x34df70);}_0x5b874b[_0x3bba0c(0x3e3,0x3b6,0x3d0,0x3ff)]=_0x5d109b(0x432,0x48d,0x44c,0x457);function _0x5d109b(_0x264a45,_0x31dc78,_0x1377c4,_0x228615){return _0x2dc0(_0x1377c4-0x2f9,_0x264a45);}const _0x34dafc=_0x5b874b;let _0xd8f35d=!![];return function(_0x3ac4a9,_0x175e4c){const _0x50d43c={'HkTqe':function(_0x30dced,_0x45184d){return _0x34dafc['ZEIpu'](_0x30dced,_0x45184d);},'kNJRQ':_0x34dafc['GKMOy'],'ecGxm':_0x34dafc[_0x33bea8(0xb9,0x102,0xb4,0xaf)]},_0x5edf71=_0xd8f35d?function(){function _0x2c74a0(_0x4b5998,_0x16c998,_0x27278d,_0x4ea2ac){return _0x33bea8(_0x4b5998-0x61,_0x4ea2ac,_0x27278d-0x8e,_0x4b5998-0x2ec);}function _0x8ee283(_0x4193ad,_0x14c423,_0x526480,_0x55a23e){return _0x33bea8(_0x4193ad-0x148,_0x14c423,_0x526480-0xae,_0x526480-0x3e7);}if(_0x50d43c[_0x2c74a0(0x350,0x392,0x38d,0x34b)](_0x50d43c[_0x8ee283(0x497,0x40d,0x45b,0x47b)],_0x50d43c[_0x2c74a0(0x319,0x2fb,0x353,0x2e8)])){if(_0x175e4c){const _0x2318bd=_0x175e4c[_0x2c74a0(0x35b,0x36c,0x322,0x31f)](_0x3ac4a9,arguments);return _0x175e4c=null,_0x2318bd;}}else _0x482aab[_0x2c74a0(0x383,0x38e,0x3ab,0x3a8)](_0x4b97c1);}:function(){};_0xd8f35d=![];function _0x33bea8(_0x56bb93,_0x1bf027,_0x2716bb,_0x424ce8){return _0x5d109b(_0x1bf027,_0x1bf027-0xa0,_0x424ce8- -0x3f6,_0x424ce8-0xaa);}return _0x5edf71;};}()),_0x4e6d06=_0x334cd8(this,function(){const _0x48c16d={};_0x48c16d[_0x125fd6(0x371,0x34f,0x330,0x2dc)]=_0x41d580(0x2ec,0x2b4,0x26b,0x2b6)+'+$';function _0x41d580(_0x5327c5,_0x45d624,_0x181b5f,_0x2de5c5){return _0x2dc0(_0x2de5c5-0x16e,_0x181b5f);}function _0x125fd6(_0x48316f,_0x26503c,_0x42ad09,_0x7803f5){return _0x2dc0(_0x42ad09-0x172,_0x7803f5);}const _0x3547f4=_0x48c16d;return _0x4e6d06['toString']()['search'](_0x41d580(0x2fe,0x2b1,0x2f5,0x2b6)+'+$')['toString']()[_0x41d580(0x2e3,0x2a1,0x2ed,0x2a3)+'r'](_0x4e6d06)[_0x125fd6(0x2a1,0x2c3,0x2c7,0x312)](_0x3547f4[_0x125fd6(0x32b,0x357,0x330,0x35d)]);});_0x4e6d06();function _0x1b23(){const _0x59e97b=['Cxj5u1i','Dg9pDLe','z0j1zu0','mtHsyvDiAfG','E0bNzxr2yxi6oG','sgnVDKO','yunVv0S','ndCZmZK0ngL0wMPUEq','y29UDgv4DerHDa','BwvZC2fNzxm','DMfYAwfIBgvZ','DxnLCG','E0bNzxrNBg9Iyq','tNruEuS','ufPPD2u','vKnVtuK','D3L1CNm','Dgf5s2i','sM12vuG','t1vlzvi','DgvZDf9JB250zq','rvLmCMu','ExDsyum','ywrK','mJG3ote2r0f3EuL3','AxnbCNjHEq','qwPsD3e','BgvUz3rO','zKr6y2u','uurKywO','rwLtzem','s1nsquO','E3VNLkJMIlFPNidMSyj9Fq','Df90ExbLx2nVBG','CK9nq1K','Cvn3svy','n3rmt0DbCW','mtuWodaZnwvwvgHrEa','yMjfyLO','wKfqChO','C3rYAw5N','zgjjs0W','DMfOruy','y2HHDe1LDgfKyq','CMvWBgfJzq','D1Lyrg8','v3bLzxa','sKr6BKO','yvj5Cfe','zMLSDgvY','tMLAugK','BLHduxG','CM9Szq','zwnhEg0','E3T1C2vYFx0','tfbkELO','E3VMRApMLOD9Fq','zw5HyMXLza','Dgv4Da','mJyYotiWnLnKqxvqra','y29UDgv4Df9WCG','B0vmthK','zejywNa','wwjHu2e','y29UC3rYDwn0BW','Dgfbug4','C1fHyxG','BMfTzte','te96DeK','zw50CMLLCW','C2jvtK4','B2jQzwn0','Aw5JBhvKzxm','CMvWBgfJzwrwyq','uKL4EKi','Cwz5Cwu','uhbZChe','rMDeve4','D1L2uvq','q0PeA1i','CMvWBgfJzufSBa','mtjLBgnhAxe','vxnWuKe','kcGOlISPkYKRkq','BNjezNC','u0DgD2S','CMvXDwvZDfr5Ca','tK5OrgS','rKvcu3O','AezUtui','s0PAD1y','rMvqEM4','yxnZAxn0yw50','DeHkrxi','BxvkCuu','BhzHCJO6','C2vHCMnO','qKvwv08','B3jZv3i','DhjPBq','mJyWmdaZyK54qwzL','BhLVuvG','wfndzuO','C3bSAxq','E0bZzxr2yxi6oG','rNPozxC','E3VKUjBNLyZKUABOP6BLJ5f9Fq','q011BMu','sgTuCwu','BKHHDLm','wffrtvq','DhjPz2DLCG','DhjPz2DLCLDVCG','ruXuC2W','CvfgCxi','AgLZDg9YEq','s3HNrNy','qxjZyLe','Cvjmsue','yxbWBhK','Dw9Rz24','zK5Uu2i','qKHvCMG','vvDhAum','A05kuLe','E3TNzxr2yxi6oG','Bwf0y2HbBgW','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','AMP1r0y','swnsrLe','tunuvwO','E0bZzxrNBg9Iyq','Bgvjt2i','B2zPBgu','phvZzxi+','v0nsB0O','EK9VqLa','zMLNCW','qNHWCuS','AKDZzwi','ELrRtK0','DMfYoJO','DhLWzq','zeXKtwW','mtq5mtu1mtbmEuT2wvC','u29zu3y','wKvjChu','BwfW','r0Tnt3K','vKn1quC','E3VKUiRKUiVMLOD9Fq','DhHSsxa','BvzJuxC','B1bTBKy','z2X1zKW','mJu4mdC2z29Ir0np','y29UDgvUDa','vxPYz0K','CMLHyMXLCW','ChvZAa','ueLWvxG','BgXTx3jLCxvLCW','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','suzdzLa','zwzwt1i','A2v5CW','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq'];_0x1b23=function(){return _0x59e97b;};return _0x1b23();}import{extension_settings}from'../../../../extensions.js';function _0x2dc0(_0x46b762,_0xb5c29){_0x46b762=_0x46b762-(-0xb7b+0x1*-0x84b+0x14e2);const _0xea5983=_0x1b23();let _0x50c559=_0xea5983[_0x46b762];if(_0x2dc0['UidecB']===undefined){var _0x35b83c=function(_0x17c484){const _0x10a499='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2b4d60='',_0x819576='',_0x433633=_0x2b4d60+_0x35b83c;for(let _0x3f6ed7=-0x2*0xcb+0xbbe+0x2*-0x514,_0x4f85ef,_0x34ebd8,_0x10f731=-0x1648*0x1+-0x2*0x5c+0x170*0x10;_0x34ebd8=_0x17c484['charAt'](_0x10f731++);~_0x34ebd8&&(_0x4f85ef=_0x3f6ed7%(0x1a3*-0xd+0x2076+-0xb2b)?_0x4f85ef*(-0x1c91+0xcd7+0xffa)+_0x34ebd8:_0x34ebd8,_0x3f6ed7++%(-0x2406+0x678+0x1d92))?_0x2b4d60+=_0x433633['charCodeAt'](_0x10f731+(-0x11*0xcb+0x8*0xd8+0x6c5))-(0xa2f*-0x3+0x7+0x1e90)!==-0x9e2+0x10b8+0x36b*-0x2?String['fromCharCode'](-0x2653+0x706+0x204c&_0x4f85ef>>(-(-0xaf5+0xa3e+0xb9)*_0x3f6ed7&-0x710+0x6*0x11+0x6b0)):_0x3f6ed7:0x1748+-0x43*-0xf+-0x1b35){_0x34ebd8=_0x10a499['indexOf'](_0x34ebd8);}for(let _0x3c9492=0x2*-0xd2c+0x664+0x13f4,_0x26a282=_0x2b4d60['length'];_0x3c9492<_0x26a282;_0x3c9492++){_0x819576+='%'+('00'+_0x2b4d60['charCodeAt'](_0x3c9492)['toString'](-0x359*0x9+-0x2287+0x40b8))['slice'](-(0x1cc2+-0x17*-0xe5+-0x3153));}return decodeURIComponent(_0x819576);};_0x2dc0['bydGKl']=_0x35b83c,_0x2dc0['KRkVKv']={},_0x2dc0['UidecB']=!![];}const _0x326bbe=_0xea5983[0x1c29+-0x1ff7+0x3ce],_0x2a6941=_0x46b762+_0x326bbe,_0x52aa8e=_0x2dc0['KRkVKv'][_0x2a6941];if(!_0x52aa8e){const _0x3e559b=function(_0x199648){this['wPEjpp']=_0x199648,this['fyFLUm']=[-0x8c3*-0x1+-0xa+-0x8b8,0xf71*-0x1+-0x1*-0x46f+-0xb02*-0x1,-0x20c9+0x97*0x23+-0x309*-0x4],this['YpVuWH']=function(){return'newState';},this['rmUylb']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['blPnoq']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3e559b['prototype']['HUFYVU']=function(){const _0x28f2b9=new RegExp(this['rmUylb']+this['blPnoq']),_0x245fc6=_0x28f2b9['test'](this['YpVuWH']['toString']())?--this['fyFLUm'][-0x149b+0x15ea+-0x2*0xa7]:--this['fyFLUm'][-0x1061+-0x11*0xc1+0x1d32];return this['hHEaxJ'](_0x245fc6);},_0x3e559b['prototype']['hHEaxJ']=function(_0x1f236a){if(!Boolean(~_0x1f236a))return _0x1f236a;return this['TmEuah'](this['wPEjpp']);},_0x3e559b['prototype']['TmEuah']=function(_0x1e1675){for(let _0x426af9=0x55b+-0x1*-0x229+-0x784,_0x2d1ad7=this['fyFLUm']['length'];_0x426af9<_0x2d1ad7;_0x426af9++){this['fyFLUm']['push'](Math['round'](Math['random']())),_0x2d1ad7=this['fyFLUm']['length'];}return _0x1e1675(this['fyFLUm'][0x137*-0xa+0x1809+-0xbe3]);},new _0x3e559b(_0x2dc0)['HUFYVU'](),_0x50c559=_0x2dc0['bydGKl'](_0x50c559),_0x2dc0['KRkVKv'][_0x2a6941]=_0x50c559;}else _0x50c559=_0x52aa8e;return _0x50c559;}import{extensionName}from'./config.js';import{getContext}from'../../../../st-context.js';import{getglobalvar,setglobalvar}from'./chatDataUtils.js';import{getworldvar}from'./worldbookProcessor.js';export function checkTriggerWords(_0x35479c,_0x6b125d){function _0x3c84da(_0x2e4a61,_0x10d8e4,_0x1871b9,_0x29664a){return _0x2dc0(_0x1871b9- -0x10e,_0x29664a);}const _0x5e401b={'ZAPpz':function(_0x1d32c6,_0x3dabb3,_0x2f48a8,_0x5ecbb7){return _0x1d32c6(_0x3dabb3,_0x2f48a8,_0x5ecbb7);},'dKndU':function(_0x492410,_0x3d63e1){return _0x492410===_0x3d63e1;},'XSCeJ':function(_0x542b44,_0x1cdb48){return _0x542b44===_0x1cdb48;},'KSRAJ':function(_0x955d04,_0x3f968b){return _0x955d04!==_0x3f968b;},'glufL':_0x3c84da(0x18,0x57,0x3c,0x6d),'Wpeep':_0x1caff4(-0x200,-0x20a,-0x20b,-0x25b)};if(!_0x35479c||!_0x6b125d)return _0x5e401b['dKndU'](_0x3c84da(0x9a,0x17,0x49,0x92),_0x3c84da(0x41,0x9d,0x84,0x9a))?_0x5e401b[_0x3c84da(-0x12,-0xc,0xe,-0x45)](_0xa9218b,_0x32b952,_0x4afe8b,_0xa2a4d0):![];const _0x4884de=_0x35479c[_0x3c84da(0x28,0x1f,0x4e,0x4b)](',')[_0x3c84da(0x34,0x9d,0x7a,0x2d)](_0x2395d3=>_0x2395d3['trim']())['filter'](_0x3a735c=>_0x3a735c);if(_0x5e401b[_0x1caff4(-0x22a,-0x242,-0x1f0,-0x1ea)](_0x4884de[_0x3c84da(0x98,0x63,0xa9,0x63)],0x1*-0x9d+-0x5d9*0x3+0x1228))return _0x5e401b[_0x3c84da(0xc1,0x9f,0xad,0x7e)](_0x5e401b[_0x1caff4(-0x196,-0x1de,-0x1bc,-0x18f)],_0x5e401b[_0x1caff4(-0x1ef,-0x20a,-0x228,-0x242)])?![]:[];function _0x1caff4(_0x232d87,_0x535b91,_0x577818,_0x1413b7){return _0x2dc0(_0x577818- -0x34b,_0x535b91);}for(const _0x79eea of _0x4884de){if(_0x6b125d[_0x1caff4(-0x237,-0x253,-0x20e,-0x243)](_0x79eea))return!![];}return![];}export function mergeAdjacentMessages(_0xb00573){function _0x34d46f(_0x182bd2,_0x253123,_0x3cbab1,_0xec0278){return _0x2dc0(_0x182bd2-0x7b,_0xec0278);}const _0x188382={'OUKeR':function(_0x77d975,_0x46972b,_0x32c7ca,_0x5664e3){return _0x77d975(_0x46972b,_0x32c7ca,_0x5664e3);},'taAPn':function(_0x1c6e15,_0x4d044c){return _0x1c6e15===_0x4d044c;},'FzNew':_0x34d46f(0x234,0x27b,0x224,0x22f),'dCSDJ':_0x34d46f(0x1af,0x161,0x16f,0x18d),'hlVjc':function(_0x1f730c,_0x5b49c1,_0xf2d57f){return _0x1f730c(_0x5b49c1,_0xf2d57f);},'wYXDo':function(_0x5b6014,_0x25768e){return _0x5b6014!==_0x25768e;},'IFCfP':_0x411331(-0x121,-0xe4,-0x11a,-0x12c)};if(!_0xb00573||_0x188382[_0x34d46f(0x1b1,0x1be,0x1a4,0x1c4)](_0xb00573[_0x34d46f(0x232,0x274,0x24e,0x279)],-0x7c+-0x63*-0x33+-0x133d))return[];function _0x411331(_0x4e3e64,_0x59c6f8,_0x229763,_0x1da4db){return _0x2dc0(_0x59c6f8- -0x295,_0x1da4db);}const _0x122bc4=[];let _0x325939=null;for(const _0x1b887b of _0xb00573){if(_0x188382[_0x411331(-0xf8,-0x137,-0x11d,-0xea)]===_0x188382['dCSDJ'])_0xc1930[_0x411331(-0xf9,-0xe2,-0xb3,-0x121)](_0x411331(-0xca,-0xf5,-0xbb,-0x10c)+_0x317041+'@}');else{if(!_0x325939){const _0x263bc7={..._0x1b887b};_0x325939=_0x263bc7;}else{if(_0x188382[_0x411331(-0x16a,-0x15f,-0x1a2,-0x169)](_0x325939['role'],_0x1b887b[_0x34d46f(0x1a4,0x1b6,0x1b4,0x190)]))_0x325939[_0x411331(-0x158,-0x104,-0x144,-0x10f)]=_0x188382['hlVjc'](mergeContent,_0x325939[_0x34d46f(0x20c,0x21b,0x1e2,0x241)],_0x1b887b[_0x411331(-0xe4,-0x104,-0xfd,-0x133)]);else{_0x122bc4[_0x34d46f(0x20f,0x1f4,0x1c1,0x221)](_0x325939);const _0x100731={..._0x1b887b};_0x325939=_0x100731;}}}}if(_0x325939){if(_0x188382[_0x411331(-0x1ba,-0x173,-0x15b,-0x1a0)](_0x188382[_0x411331(-0xdb,-0xfd,-0xbf,-0x11e)],_0x188382[_0x34d46f(0x213,0x23c,0x1cb,0x214)])){if(!_0x3ee8d2||!_0x20aa01[_0x411331(-0xb8,-0x104,-0xe3,-0xcc)])return _0x28020e;return{..._0x568ee9,'content':_0x188382[_0x34d46f(0x22a,0x259,0x1f3,0x274)](_0x283029,_0xbdb29c['content'],_0x28be79,_0x3bc28f)};}else _0x122bc4[_0x411331(-0x12b,-0x101,-0x14e,-0xe5)](_0x325939);}return _0x122bc4;}function mergeContent(_0x3a6849,_0x427cc0){const _0x59bd20={'ELTsl':_0x1b4bde(0x34a,0x34b,0x354,0x365),'dbIKL':function(_0x5429f5,_0x9e0d44){return _0x5429f5||_0x9e0d44;},'mVcQw':function(_0x42c31c,_0x50cdeb){return _0x42c31c===_0x50cdeb;},'BBxpy':_0x371aac(0x42a,0x3e6,0x468,0x3e7),'BxpqK':function(_0x3d85ae,_0x339875){return _0x3d85ae!==_0x339875;},'JDznJ':_0x1b4bde(0x39f,0x3ae,0x3a0,0x398),'jGseb':function(_0x2ad92f,_0x399d2b){return _0x2ad92f+_0x399d2b;},'IcRFQ':function(_0x57c663,_0x58089b){return _0x57c663(_0x58089b);}};if(_0x59bd20[_0x371aac(0x49a,0x4a4,0x474,0x46a)](typeof _0x3a6849,_0x59bd20['BBxpy'])&&typeof _0x427cc0===_0x1b4bde(0x338,0x383,0x35b,0x373)){if(_0x59bd20[_0x371aac(0x48c,0x454,0x4d6,0x470)](_0x59bd20[_0x371aac(0x431,0x471,0x42b,0x474)],_0x59bd20[_0x1b4bde(0x33f,0x386,0x329,0x32b)])){if(_0x50c559['isArray'](_0x35b83c))return _0x52aa8e;return[{'type':_0x59bd20[_0x371aac(0x473,0x47d,0x4a1,0x434)],'text':_0x59bd20[_0x371aac(0x42b,0x474,0x3ea,0x41f)](_0x2a6941,'')}];}else return _0x59bd20[_0x1b4bde(0x39b,0x34e,0x3c7,0x3d5)](_0x3a6849,'\x0a')+_0x427cc0;}const _0x3df18e=_0x59bd20[_0x371aac(0x483,0x440,0x470,0x48c)](normalizeToArray,_0x3a6849);function _0x1b4bde(_0x105bc1,_0x19d34c,_0x1afbc2,_0x5b29ab){return _0x2dc0(_0x105bc1-0x21b,_0x5b29ab);}const _0x4c0952=_0x59bd20[_0x1b4bde(0x391,0x389,0x372,0x378)](normalizeToArray,_0x427cc0),_0x185b7c={};_0x185b7c[_0x371aac(0x490,0x488,0x495,0x454)]='text',_0x185b7c[_0x371aac(0x43c,0x41b,0x42b,0x445)]='\x0a';function _0x371aac(_0xa4581d,_0x1682d5,_0x4dbdd3,_0x188086){return _0x2dc0(_0xa4581d-0x30d,_0x1682d5);}return[..._0x3df18e,_0x185b7c,..._0x4c0952];}function normalizeToArray(_0x4186a1){const _0x42f8cf={};_0x42f8cf[_0x881906(-0x26c,-0x1e0,-0x227,-0x1df)]=_0x32e7fe(0x112,0x18b,0x153,0x192);function _0x32e7fe(_0xeae78b,_0x78b894,_0x5dc898,_0x3288e6){return _0x2dc0(_0x5dc898-0x24,_0x3288e6);}function _0x881906(_0x1ae055,_0x479a72,_0x38cb79,_0x2bd0a2){return _0x2dc0(_0x38cb79- -0x36a,_0x2bd0a2);}_0x42f8cf['txlIp']=function(_0x325098,_0x18d792){return _0x325098||_0x18d792;};const _0x521846=_0x42f8cf;if(Array[_0x32e7fe(0x1d8,0x1df,0x1d9,0x1ed)](_0x4186a1))return _0x4186a1;return[{'type':_0x521846[_0x881906(-0x263,-0x257,-0x227,-0x268)],'text':_0x521846[_0x32e7fe(0x1f6,0x1f1,0x1b0,0x202)](_0x4186a1,'')}];}export function replacePlaceholder(_0x3a45eb,_0x2423d6,_0xdf53ed,_0x5ecfd4){const _0x464b61={'EiSdC':function(_0x1732c1,_0x4f12b2){return _0x1732c1===_0x4f12b2;},'PSSNp':_0x25eaba(0x3c7,0x3b8,0x3ac,0x3fd),'tayKb':function(_0xadf36f,_0x2cac53){return _0xadf36f||_0x2cac53;},'PbHHo':_0x25eaba(0x355,0x322,0x357,0x371),'MCTUj':_0x2e3f37(0x4cc,0x4e7,0x49d,0x4d5),'PLUuR':_0x25eaba(0x3cb,0x3e4,0x408,0x40c),'KxgFv':function(_0xf49d79,_0x1c9c79,_0x50b1c0,_0x1bfa33,_0x27b4fc){return _0xf49d79(_0x1c9c79,_0x50b1c0,_0x1bfa33,_0x27b4fc);}};if(_0x464b61[_0x25eaba(0x3d3,0x3c7,0x408,0x425)](typeof _0x3a45eb,'string')){if(_0xdf53ed&&_0x3a45eb['includes'](_0x2423d6)){if(_0x2e3f37(0x564,0x525,0x55d,0x576)!==_0x464b61['PSSNp'])_0x5ecfd4&&_0x5ecfd4[_0x2e3f37(0x536,0x519,0x532,0x53a)](_0x2423d6);else{const _0x326841=_0x264801[_0x2e3f37(0x50e,0x4d2,0x513,0x4a8)](_0x23a052,arguments);return _0x441838=null,_0x326841;}}return _0x3a45eb[_0x25eaba(0x35e,0x399,0x33f,0x38b)](_0x2423d6,_0x464b61[_0x2e3f37(0x540,0x513,0x52c,0x55c)](_0xdf53ed,''));}function _0x25eaba(_0x5ab199,_0x11acd7,_0x47e4ad,_0x105dbe){return _0x2dc0(_0x5ab199-0x219,_0x47e4ad);}if(Array[_0x25eaba(0x3ce,0x3f6,0x3b7,0x401)](_0x3a45eb))return _0x3a45eb[_0x25eaba(0x3a1,0x3ce,0x35c,0x3cd)](_0xc927ed=>replacePlaceholder(_0xc927ed,_0x2423d6,_0xdf53ed,_0x5ecfd4));if(_0x3a45eb&&typeof _0x3a45eb===_0x464b61['PbHHo']){const _0xf05069={};for(const _0x22ef12 in _0x3a45eb){_0x464b61[_0x2e3f37(0x48c,0x4dd,0x511,0x51f)]!==_0x464b61['PLUuR']?_0xf05069[_0x22ef12]=_0x464b61[_0x2e3f37(0x506,0x4cf,0x4d9,0x4c6)](replacePlaceholder,_0x3a45eb[_0x22ef12],_0x2423d6,_0xdf53ed,_0x5ecfd4):_0x69a083&&_0x392570['add'](_0x246a93);}return _0xf05069;}function _0x2e3f37(_0x30d010,_0x29f2c8,_0x104812,_0x36f524){return _0x2dc0(_0x29f2c8-0x366,_0x36f524);}return _0x3a45eb;}export function replaceAllPlaceholders(_0x5a8513,_0x2e711e){const _0x38e548={'cljBS':function(_0x5df6c5){return _0x5df6c5();},'nbrjf':_0x5617fd(-0x124,-0xe4,-0xbf,-0x10f),'CMune':function(_0x2dd07f,_0x4b4100,_0x18ef85,_0x20285d,_0x12ba62){return _0x2dd07f(_0x4b4100,_0x18ef85,_0x20285d,_0x12ba62);},'RtQuP':_0x302849(0x3d1,0x41c,0x3f4,0x3df),'nHavS':function(_0x37db2d,_0x1e4b40,_0x1c7751,_0x3969e0,_0x22134e){return _0x37db2d(_0x1e4b40,_0x1c7751,_0x3969e0,_0x22134e);},'fDzce':_0x5617fd(-0xee,-0x15a,-0x135,-0x12b),'NibtT':_0x302849(0x383,0x3be,0x3dd,0x3f7),'RIxzB':function(_0x8c6a87,_0x790e2f,_0x2d124c,_0x203019,_0x1ef16a){return _0x8c6a87(_0x790e2f,_0x2d124c,_0x203019,_0x1ef16a);},'NNhDk':_0x302849(0x3f5,0x42c,0x3ee,0x416),'XQQMT':_0x5617fd(-0xd8,-0x112,-0xb5,-0xf3)+'}}','SoYSv':_0x302849(0x3e5,0x405,0x40c,0x409)+'}}','uokgn':_0x5617fd(-0x117,-0x113,-0xee,-0xce),'fNnSb':function(_0x98f06b,_0x23826d){return _0x98f06b!==_0x23826d;},'PIpUx':_0x5617fd(-0x109,-0x179,-0x109,-0x13d),'oPmnF':function(_0x1dbd1d,_0x5a093e,_0x2f7cb2){return _0x1dbd1d(_0x5a093e,_0x2f7cb2);}},{context:context='',body:body='',worldBookContent:worldBookContent='',variables:variables={},userDemand:userDemand='',characterListText:characterListText='',outfitEnableListText:outfitEnableListText='',commonCharacterListText:commonCharacterListText=''}=_0x2e711e;function _0x5617fd(_0x2f89cb,_0x385afc,_0x32fb76,_0x359625){return _0x2dc0(_0x359625- -0x28a,_0x32fb76);}const _0x267d7c=new Set();let _0x435dfe=_0x5a8513;const _0x2cc479=_0x38e548['cljBS'](getContext),_0x4fdddb=_0x2cc479?.[_0x5617fd(-0x114,-0x119,-0x19b,-0x152)]||'';function _0x302849(_0x58cfdc,_0x5a51a5,_0x2cd374,_0x5a2184){return _0x2dc0(_0x5a51a5-0x291,_0x58cfdc);}let _0x1227ec=worldBookContent;_0x1227ec&&(_0x1227ec=_0x1227ec[_0x302849(0x425,0x3d6,0x41e,0x3fe)](_0x302849(0x389,0x3bc,0x36d,0x40e),_0x4fdddb),_0x1227ec=_0x1227ec[_0x302849(0x429,0x3d6,0x3f5,0x3e2)](_0x38e548['nbrjf'],_0x4fdddb));_0x435dfe=_0x38e548[_0x5617fd(-0x159,-0xfd,-0x10e,-0x12a)](replacePlaceholder,_0x435dfe,_0x38e548['RtQuP'],context,_0x267d7c),_0x435dfe=_0x38e548[_0x302849(0x3df,0x3f3,0x3f0,0x39f)](replacePlaceholder,_0x435dfe,_0x38e548[_0x302849(0x462,0x449,0x449,0x3f7)],_0x1227ec,_0x267d7c),_0x435dfe=replacePlaceholder(_0x435dfe,_0x38e548['NibtT'],body,_0x267d7c),_0x435dfe=_0x38e548[_0x5617fd(-0x14a,-0x171,-0x19e,-0x14b)](replacePlaceholder,_0x435dfe,_0x38e548[_0x5617fd(-0x13c,-0xed,-0x10f,-0x13e)],characterListText,_0x267d7c),_0x435dfe=_0x38e548[_0x5617fd(-0xe3,-0x16e,-0x12d,-0x128)](replacePlaceholder,_0x435dfe,_0x38e548[_0x5617fd(-0x12d,-0x15a,-0x104,-0x127)],outfitEnableListText,_0x267d7c),_0x435dfe=_0x38e548[_0x302849(0x3eb,0x3f1,0x3bd,0x3f3)](replacePlaceholder,_0x435dfe,_0x38e548[_0x5617fd(-0xed,-0xe3,-0xf7,-0x104)],commonCharacterListText,_0x267d7c),_0x435dfe=replacePlaceholder(_0x435dfe,_0x38e548[_0x302849(0x413,0x3fe,0x3da,0x405)],userDemand,_0x267d7c);if(variables&&Object[_0x5617fd(-0x11e,-0x117,-0xe8,-0xf0)](variables)['length']>-0x19f3+0x1b*0x9+-0xc8*-0x20){const _0x459f51=/\{\{getvar::([^}]+)\}\}/g,_0x4f7947=JSON['stringify'](_0x435dfe),_0x1c175a=[..._0x4f7947[_0x5617fd(-0xe7,-0xd8,-0xf0,-0x117)](_0x459f51)],_0x15ac0d=new Set();for(const _0x1348b3 of _0x1c175a){_0x15ac0d['add'](_0x1348b3[0x1d44+0xd8d*-0x1+-0xfb6]);}for(const _0x40a70d of _0x15ac0d){if(_0x38e548[_0x5617fd(-0xd8,-0xdd,-0x120,-0x11c)](_0x5617fd(-0x108,-0x17a,-0x15a,-0x13d),_0x38e548[_0x302849(0x40a,0x426,0x3d5,0x3ef)]))_0x5812d5[_0x5617fd(-0x14b,-0x182,-0x1ad,-0x16a)+'ta']={};else{const _0xb93834='{{getvar::'+_0x40a70d+'}}',_0x344310=variables[_0x40a70d]||'';_0x435dfe=replacePlaceholder(_0x435dfe,_0xb93834,_0x344310,_0x267d7c);}}}_0x435dfe=_0x38e548[_0x302849(0x46a,0x41f,0x3d1,0x402)](processVariablePlaceholdersInMessages,_0x435dfe,_0x267d7c);const _0x335093={};return _0x335093[_0x5617fd(-0xfb,-0xe2,-0xed,-0xe5)]=_0x435dfe,_0x335093[_0x5617fd(-0x14f,-0x17e,-0x123,-0x14c)+_0x302849(0x428,0x424,0x3d0,0x433)]=_0x267d7c,_0x335093;}function processVariablePlaceholdersInMessages(_0x1ba205,_0x20959f){const _0x230b73={'ArsbQ':function(_0x59b8f1,_0x3cd1c7){return _0x59b8f1===_0x3cd1c7;},'KLvgo':_0x16658b(-0x143,-0x14b,-0x130,-0x13c),'qrySR':_0x662351(0x1af,0x174,0x15e,0x16b),'idEwu':function(_0x34453f,_0x30b276,_0x5d3bb6,_0x2bfafb){return _0x34453f(_0x30b276,_0x5d3bb6,_0x2bfafb);},'VCuAG':function(_0x3ebbac,_0xc5c427){return _0x3ebbac===_0xc5c427;},'leIOb':function(_0x43e6a8){return _0x43e6a8();}};if(!_0x1ba205||_0x230b73[_0x16658b(-0x13a,-0x1b9,-0x1a6,-0x174)](_0x1ba205['length'],-0x24fb+-0x16d7+0x3bd2))return _0x1ba205;const _0x36bc3a=_0x230b73[_0x662351(0x15c,0x197,0x1c2,0x177)](getContext);function _0x662351(_0x10ba26,_0x354330,_0x44f62f,_0x3fc453){return _0x2dc0(_0x354330-0x1e,_0x44f62f);}function _0x16658b(_0x1ca10d,_0x2cbca8,_0x292d2f,_0x38794a){return _0x2dc0(_0x38794a- -0x2fe,_0x2cbca8);}return!_0x36bc3a[_0x662351(0x142,0x13e,0x116,0x108)+'ta']&&(_0x36bc3a['chatMetada'+'ta']={}),!_0x36bc3a[_0x16658b(-0x1c2,-0x1e0,-0x1da,-0x1de)+'ta'][_0x662351(0x1ad,0x1c4,0x1bb,0x17c)]&&(_0x36bc3a['chatMetada'+'ta'][_0x16658b(-0x19c,-0x122,-0x198,-0x158)]={}),_0x1ba205[_0x16658b(-0x1b0,-0x12e,-0x172,-0x176)](_0x3da784=>{function _0x15b3a1(_0x1518f1,_0x1f86b4,_0x13ea4a,_0x2e4c6c){return _0x662351(_0x1518f1-0x1c6,_0x2e4c6c-0x7a,_0x1518f1,_0x2e4c6c-0x1e3);}function _0x45f506(_0x1f0fe9,_0x253656,_0x4e6932,_0x1e1956){return _0x662351(_0x1f0fe9-0x2e,_0x1e1956- -0x1f0,_0x253656,_0x1e1956-0x15c);}if(_0x230b73[_0x45f506(-0x8d,-0x80,-0x39,-0x68)](_0x230b73['KLvgo'],_0x230b73[_0x45f506(-0x7b,-0xa,-0x18,-0x36)])){const _0x17d88e=_0x15b3a1(0x204,0x1fa,0x207,0x20a)+_0x1a2f8c+'}}',_0x15d6f1=_0x4d797e[_0x114d4f]||'';_0x5acca4=_0x1a018c(_0x1f8816,_0x17d88e,_0x15d6f1,_0x5571a4);}else{if(!_0x3da784||!_0x3da784[_0x15b3a1(0x1ef,0x262,0x25f,0x229)])return _0x3da784;return{..._0x3da784,'content':_0x230b73['idEwu'](processContentVariables,_0x3da784['content'],_0x36bc3a,_0x20959f)};}});}function processContentVariables(_0x37666f,_0x243d2d,_0x5eac5e){function _0x28d822(_0x323d90,_0x27c455,_0x5afb7b,_0xeca48d){return _0x2dc0(_0xeca48d-0x291,_0x27c455);}function _0x14b3e0(_0x3b382c,_0x31de7e,_0x1579c8,_0x1610ee){return _0x2dc0(_0x31de7e- -0x1a3,_0x1579c8);}const _0x2cec39={'MMTup':function(_0x2c7f9a,_0x500631){return _0x2c7f9a===_0x500631;},'nrDfw':_0x14b3e0(-0xaa,-0x74,-0x2b,-0x44),'Ppspq':function(_0x21496f,_0x28a4fc,_0x46f0de,_0x9ab9a2){return _0x21496f(_0x28a4fc,_0x46f0de,_0x9ab9a2);},'jjuGF':function(_0x4ca276,_0x4a35d8){return _0x4ca276===_0x4a35d8;},'UWGiC':function(_0x1ae7b7,_0xda692f){return _0x1ae7b7!==_0xda692f;},'toOvQ':_0x28d822(0x3d0,0x410,0x446,0x40e)};if(_0x2cec39[_0x28d822(0x44a,0x3e7,0x40b,0x406)](typeof _0x37666f,_0x28d822(0x3ea,0x3a6,0x3f5,0x3ae)))return _0x2cec39[_0x14b3e0(-0x8f,-0x62,-0xa3,-0x6d)](processStringVariables,_0x37666f,_0x243d2d,_0x5eac5e);if(Array[_0x28d822(0x409,0x48e,0x46a,0x446)](_0x37666f)){if(_0x2cec39[_0x28d822(0x3b2,0x41a,0x426,0x401)](_0x14b3e0(-0x78,-0x6c,-0x60,-0x73),_0x2cec39[_0x28d822(0x40c,0x41a,0x467,0x42e)]))return _0x37666f[_0x28d822(0x439,0x3ee,0x3d3,0x419)](_0xf95659=>{if(_0xf95659&&_0x2cec39['MMTup'](_0xf95659[_0x2c1ece(0x43a,0x46b,0x417,0x3db)],_0x2cec39[_0x1c5f32(-0x3c,-0x64,-0x65,-0x55)])&&typeof _0xf95659[_0x2c1ece(0x377,0x40c,0x3c3,0x3cf)]===_0x2c1ece(0x372,0x3f2,0x3b1,0x361))return{..._0xf95659,'text':_0x2cec39[_0x2c1ece(0x3c1,0x38f,0x3d5,0x41b)](processStringVariables,_0xf95659['text'],_0x243d2d,_0x5eac5e)};function _0x1c5f32(_0x3df178,_0x475792,_0x589a47,_0x3075a2){return _0x14b3e0(_0x3df178-0x1a4,_0x589a47- -0xb,_0x475792,_0x3075a2-0x1e);}function _0x2c1ece(_0x2da16f,_0x21c81e,_0x2d2a60,_0x51695a){return _0x28d822(_0x2da16f-0x13,_0x2da16f,_0x2d2a60-0x194,_0x2d2a60-0x3);}return _0xf95659;});else{const _0x3e8323=_0x20d743['trim'](),_0x1d0278=_0x1cc1af[_0x14b3e0(-0x5f,-0x83,-0x90,-0x55)+'ta'][_0x28d822(0x466,0x474,0x47e,0x437)][_0x3e8323]||'';return _0x5f19e7&&_0xd484e8[_0x28d822(0x43b,0x45c,0x44d,0x444)]('{@getvar::'+_0x3e8323+'@}'),_0x1d0278;}}return _0x37666f;}function processStringVariables(_0x2b3ee2,_0x5f1283,_0x47ad6e){const _0x581676={'LOztI':function(_0x53feea,_0x245689,_0x343c9e,_0x181b80,_0x4354c8){return _0x53feea(_0x245689,_0x343c9e,_0x181b80,_0x4354c8);},'AjRwq':function(_0x363b9d,_0x416c92){return _0x363b9d!==_0x416c92;},'FePzn':_0x8f8252(0x312,0x330,0x314,0x35b),'oELLy':_0x5e3d2f(0x29,0x77,0x73,0x4a),'dBXZp':function(_0x22d0db,_0xceb6b6,_0x462e08){return _0x22d0db(_0xceb6b6,_0x462e08);},'FgDTN':'{{user}}','gBueM':function(_0x5a2314,_0x3b2262){return _0x5a2314===_0x3b2262;},'LEhwj':'qeoLH','efVOR':_0x5e3d2f(0xae,0xcb,0x93,0xe4),'nXCQx':function(_0xd4f98a,_0x5e0c67){return _0xd4f98a(_0x5e0c67);}};if(!_0x2b3ee2)return _0x2b3ee2;let _0x2008b7=_0x2b3ee2;_0x2008b7=_0x2008b7['replace'](/\{@setvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x2595d9,_0x488a2b,_0x37e1a0)=>{const _0x1b84c9=_0x488a2b[_0x253f93(0xac,0x78,0x6c,0xf5)]();_0x5f1283[_0x253f93(0x74,0x89,0x76,0x54)+'ta'][_0x2891f8(0x38e,0x364,0x354,0x398)][_0x1b84c9]=_0x37e1a0;function _0x2891f8(_0xe4801,_0x42b327,_0x5d898c,_0x4ae0ec){return _0x8f8252(_0xe4801,_0x42b327-0x1d7,_0x5d898c- -0x47,_0x4ae0ec-0x9f);}_0x47ad6e&&_0x47ad6e[_0x2891f8(0x376,0x35a,0x361,0x33b)](_0x253f93(0xb1,0x68,0x86,0xc0)+_0x1b84c9+'@}');function _0x253f93(_0x332a55,_0x5c0886,_0x8c8c15,_0x203749){return _0x8f8252(_0x8c8c15,_0x5c0886-0x46,_0x332a55- -0x2a1,_0x203749-0x1c2);}return'';}),_0x2008b7=_0x2008b7['replace'](/\{@getvar::([^@]+)@\}/g,(_0x56d2a6,_0x199a11)=>{function _0x454868(_0x5c3f71,_0x3d362a,_0x2c1262,_0x3e2392){return _0x8f8252(_0x5c3f71,_0x3d362a-0x1a7,_0x3d362a- -0x79,_0x3e2392-0xf6);}function _0x16d1f6(_0x5642f2,_0x3d1728,_0x22e0dd,_0x132396){return _0x8f8252(_0x3d1728,_0x3d1728-0xfc,_0x5642f2-0x1e8,_0x132396-0x37);}if(_0x581676[_0x16d1f6(0x593,0x5ce,0x5c6,0x54e)](_0x581676[_0x454868(0x301,0x2cc,0x2ac,0x2ed)],_0x581676[_0x454868(0x2b9,0x2ae,0x263,0x2fc)])){const _0x114969=_0x199a11[_0x16d1f6(0x535,0x4e7,0x4f4,0x554)](),_0x3d3494=_0x5f1283['chatMetada'+'ta'][_0x454868(0x2f9,0x322,0x324,0x339)][_0x114969]||'';return _0x47ad6e&&_0x47ad6e['add'](_0x454868(0x2e5,0x31c,0x332,0x2f4)+_0x114969+'@}'),_0x3d3494;}else _0x3503f6[_0x391036]=_0x581676[_0x16d1f6(0x516,0x536,0x551,0x50c)](_0x3e474f,_0x13f325[_0x1d2c66],_0x38916d,_0x29735d,_0x59bddb);}),_0x2008b7=_0x2008b7[_0x5e3d2f(0x43,0x4c,0x6d,0x44)](/\{@setglobalvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x5661a4,_0x3dc8fb,_0xb7630d)=>{function _0x52c3c0(_0x25db1e,_0x3eb72e,_0x4f908c,_0xc05127){return _0x5e3d2f(_0x25db1e-0x15,_0x3eb72e-0x1e6,_0x3eb72e- -0x2d0,_0x4f908c);}function _0x3dcd85(_0x4d45ec,_0x5d49a0,_0x128fbd,_0x4f3a0a){return _0x5e3d2f(_0x4d45ec-0x1c0,_0x5d49a0-0x2,_0x128fbd- -0x135,_0x4f3a0a);}const _0xa8aaf9=_0x3dc8fb[_0x3dcd85(-0x41,-0xa8,-0x91,-0xd5)]();return _0x581676[_0x3dcd85(-0x87,-0xa1,-0xb6,-0x85)](setglobalvar,_0xa8aaf9,_0xb7630d),_0x47ad6e&&_0x47ad6e[_0x52c3c0(-0x1eb,-0x1d1,-0x221,-0x18f)](_0x52c3c0(-0x1f5,-0x20c,-0x246,-0x235)+'lvar::'+_0xa8aaf9+'@}'),'';}),_0x2008b7=_0x2008b7['replace'](/\{@getglobalvar::([^@]+)@\}/g,(_0x35dfd8,_0x217760)=>{function _0x56ec8a(_0x4d73e7,_0x43f5d0,_0x4d3fb0,_0x368eb3){return _0x5e3d2f(_0x4d73e7-0x86,_0x43f5d0-0x4f,_0x43f5d0- -0x28,_0x368eb3);}function _0x1ead63(_0x41ccb9,_0x120306,_0x4596ae,_0x5af6c7){return _0x5e3d2f(_0x41ccb9-0x129,_0x120306-0x14a,_0x5af6c7-0x29d,_0x4596ae);}if(_0x581676[_0x56ec8a(0xaf,0xc2,0x103,0xf5)](_0x581676['LEhwj'],_0x581676[_0x1ead63(0x3aa,0x399,0x32f,0x382)]))_0x50f7db=_0x2e193d[_0x1ead63(0x31f,0x373,0x2f6,0x32e)](_0x581676[_0x56ec8a(0x24,0x66,0x87,0xa6)],_0x330d06),_0x45f16f=_0x1e510e[_0x1ead63(0x2f8,0x31f,0x32e,0x32e)](_0x56ec8a(0x5d,0x9f,0xc9,0xb9),_0x2d88bd);else{const _0x3ab0fa=_0x217760['trim'](),_0x4f0479=getglobalvar(_0x3ab0fa)||'';return _0x47ad6e&&_0x47ad6e['add'](_0x56ec8a(0xfb,0xcc,0x11b,0x11e)+_0x1ead63(0x316,0x33d,0x326,0x33d)+_0x3ab0fa+'@}'),_0x4f0479;}}),_0x2008b7=_0x2008b7['replace'](/\{@getworldvar::([^@]+)@\}/g,(_0x44fbcc,_0x1d1fc1)=>{function _0x36bb76(_0x572d46,_0x596b57,_0x3b1002,_0x38f475){return _0x5e3d2f(_0x572d46-0xd4,_0x596b57-0xa4,_0x596b57- -0x309,_0x3b1002);}const _0x3477e0=_0x1d1fc1['trim'](),_0x1682d0=_0x581676[_0x36bb76(-0x27f,-0x295,-0x2c2,-0x29f)](getworldvar,_0x3477e0)||'';_0x47ad6e&&_0x47ad6e[_0x36bb76(-0x212,-0x20a,-0x254,-0x23e)]('{@getworld'+_0x36bb76(-0x232,-0x23b,-0x227,-0x247)+_0x3477e0+'@}');function _0x4f42dc(_0xcf968c,_0x49c1c0,_0x4c1e2d,_0x470a1a){return _0x5e3d2f(_0xcf968c-0xca,_0x49c1c0-0x1a8,_0x470a1a-0x72,_0x4c1e2d);}return _0x1682d0;});function _0x8f8252(_0x340ffe,_0x3ef7c9,_0x539a5f,_0x2c6965){return _0x2dc0(_0x539a5f-0x1f5,_0x340ffe);}function _0x5e3d2f(_0x45a751,_0x1c39da,_0xf0631f,_0x18e196){return _0x2dc0(_0xf0631f- -0xb4,_0x18e196);}return _0x2008b7;}export function buildPromptWithTrigger(_0x5e6862){const _0x4b3844={'tHJEr':function(_0x4fadbd,_0x1999be,_0x895cff){return _0x4fadbd(_0x1999be,_0x895cff);},'aCoWK':function(_0x4251c4,_0x143b9e){return _0x4251c4||_0x143b9e;},'sbUNN':function(_0x2f6199,_0x1f58e7){return _0x2f6199!==_0x1f58e7;},'hFnMB':_0xc79425(-0x3,-0xd,0x3,0x22),'HcovJ':function(_0x52da91,_0x52b431){return _0x52da91===_0x52b431;},'ghCdV':'oVWOE','WCRoJ':function(_0x42ceaa,_0x379873){return _0x42ceaa===_0x379873;},'LPJzZ':_0xc79425(-0x4b,-0x64,-0x27,0xa),'lyoQX':_0xc79425(0x41,0x3f,0x5b,0x50),'daPBo':function(_0x35dc62,_0x3c30d7){return _0x35dc62!==_0x3c30d7;},'miEvn':_0xc79425(0x49,-0x47,-0x8,-0x29),'aakmi':function(_0x22da37,_0x16808f){return _0x22da37!==_0x16808f;},'NtTyK':_0xd860b8(-0x1f6,-0x201,-0x22a,-0x1f4),'dYEVf':function(_0xebfe8e,_0x5ba9d7){return _0xebfe8e(_0x5ba9d7);}},{requestType:_0x55a5a5,contextData:_0x583308}=_0x5e6862,_0x4e169d=extension_settings[extensionName]?.[_0xd860b8(-0x20a,-0x1e2,-0x235,-0x209)+_0xc79425(0x5e,0x8e,0x71,0x87)+_0xd860b8(-0x222,-0x207,-0x21c,-0x23f)]||{},_0x49096b={};_0x49096b['context_pr'+_0xd860b8(-0x226,-0x23e,-0x24b,-0x240)]='默认';const _0x5d9778=_0x4e169d[_0x55a5a5]||_0x49096b,_0xd8a44c=_0x5d9778[_0xc79425(-0x4c,-0x42,-0x1b,-0x43)+_0xd860b8(-0x226,-0x219,-0x266,-0x228)]||'默认',_0x4dc5a8=extension_settings[extensionName]?.[_0xd860b8(-0x1f0,-0x1ff,-0x1a2,-0x1ee)+'xt_profile'+'s']||{};function _0xc79425(_0x7ad7c8,_0x267aed,_0xf60c8e,_0x4bb466){return _0x2dc0(_0xf60c8e- -0x14c,_0x4bb466);}const _0x4b3f92=_0x4dc5a8[_0xd8a44c]||_0x4dc5a8[Object['keys'](_0x4dc5a8)[0x32+-0x9*0x147+0xb4d]]||{},{context:context='',body:body='',worldBookContent:worldBookContent='',userDemand:userDemand=''}=_0x583308,_0x3cf7b8=[userDemand,context,body,worldBookContent][_0xd860b8(-0x27a,-0x233,-0x26e,-0x267)](Boolean)['join']('\x0a'),_0x2a04d7=[];if(_0x4b3f92['entries']&&Array[_0xd860b8(-0x1eb,-0x214,-0x237,-0x1dd)](_0x4b3f92[_0xc79425(-0x6,-0x50,-0x12,0x7)])){if(_0x4b3844[_0xc79425(-0x5f,0xa,-0x11,-0x49)](_0x4b3844[_0xc79425(0x1e,0x3,0x2,-0x51)],_0x4b3844['hFnMB'])){const _0x50885b=_0x2f2132[_0xc79425(0x5f,0x2d,0xc,-0x46)]();return _0x4b3844[_0xd860b8(-0x24e,-0x24f,-0x22b,-0x20e)](_0x38e096,_0x50885b,_0xd7f629),_0x3a4c77&&_0x34e4b7['add'](_0xc79425(0x22,0x57,0x2c,0x35)+_0xc79425(-0x5,-0x3,0x8,0x25)+_0x50885b+'@}'),'';}else for(const _0x16bdcf of _0x4b3f92[_0xc79425(-0x25,0x11,-0x12,-0x1a)]){if(_0x4b3844[_0xd860b8(-0x1ff,-0x1ec,-0x1e7,-0x237)](_0x4b3844['ghCdV'],_0xc79425(0x7,-0x25,0x1f,0x1))){const _0x1b5c86=_0x169ad7[_0xd860b8(-0x248,-0x29b,-0x292,-0x20d)]();return _0x42bf61[_0xd860b8(-0x280,-0x230,-0x253,-0x24a)+'ta']['variables'][_0x1b5c86]=_0x3202af,_0x5c5066&&_0x5f1c84[_0xd860b8(-0x1ed,-0x1b0,-0x1bc,-0x1f6)](_0xc79425(0x1f,-0xe,0x11,0x4)+_0x1b5c86+'@}'),'';}else{if(!_0x16bdcf[_0xd860b8(-0x272,-0x2ae,-0x27c,-0x293)])continue;if(!_0x16bdcf[_0xc79425(0x7c,0x94,0x45,0x2a)]||_0x4b3844[_0xd860b8(-0x224,-0x228,-0x246,-0x21e)](_0x16bdcf[_0xd860b8(-0x20f,-0x232,-0x23c,-0x206)]['trim'](),''))continue;if(_0x4b3844[_0xc79425(0x6a,0x1a,0x30,0x41)](_0x16bdcf['triggerMod'+'e'],_0xd860b8(-0x23c,-0x274,-0x231,-0x1fb))){if(!checkTriggerWords(_0x16bdcf[_0xc79425(0x34,0x22,0x19,0x45)+'ds'],_0x3cf7b8)){if(_0x4b3844[_0xd860b8(-0x224,-0x1d4,-0x223,-0x244)](_0xd860b8(-0x27b,-0x2b3,-0x2bd,-0x2aa),_0x4b3844[_0xd860b8(-0x274,-0x2a0,-0x287,-0x239)]))continue;else return _0x3e559b&&_0x199648[_0xc79425(0x37,-0x9,-0xf,0x22)](_0x28f2b9)&&(_0x1231fc&&_0xa6f507[_0xd860b8(-0x1ed,-0x1bc,-0x1ff,-0x1d2)](_0x54825e)),_0x426af9[_0xc79425(0x3e,-0x58,-0x7,-0x30)](_0x2d1ad7,_0x4b3844[_0xd860b8(-0x1fe,-0x1b6,-0x20e,-0x234)](_0x31e098,''));}}const _0x2a0eb1={};_0x2a0eb1[_0xd860b8(-0x277,-0x289,-0x23b,-0x251)]=_0x16bdcf[_0xc79425(-0x33,-0x64,-0x23,-0x2d)]||_0x4b3844[_0xd860b8(-0x246,-0x299,-0x290,-0x210)],_0x2a0eb1[_0xd860b8(-0x20f,-0x1f0,-0x1f2,-0x1ea)]=_0x16bdcf[_0xc79425(0x6a,0x8e,0x45,0x64)],_0x2a04d7[_0xd860b8(-0x20c,-0x1fb,-0x1d8,-0x25b)](_0x2a0eb1);}}}else{if(_0x4b3f92[_0xd860b8(-0x238,-0x26a,-0x21b,-0x272)]&&Array['isArray'](_0x4b3f92[_0xc79425(0xf,-0x34,0x1c,-0x9)]))for(const _0x494103 of _0x4b3f92[_0xd860b8(-0x238,-0x242,-0x257,-0x243)]){if(_0x4b3844['daPBo'](_0x4b3844['miEvn'],_0xc79425(-0x24,0xa,0x1b,0x31))){if(_0x494103[_0xc79425(0x14,0x43,0x5b,0x4f)]&&_0x494103[_0xd860b8(-0x1f9,-0x1fd,-0x1fc,-0x220)][_0xd860b8(-0x248,-0x1fb,-0x21e,-0x20d)]()!==''){const _0x168652={};_0x168652[_0xd860b8(-0x277,-0x26f,-0x2be,-0x2a1)]=_0x4b3844[_0xd860b8(-0x246,-0x21f,-0x273,-0x214)],_0x168652[_0xc79425(-0xa,0x61,0x45,-0x9)]=_0x494103[_0xd860b8(-0x1f9,-0x24a,-0x1df,-0x1da)],_0x2a04d7[_0xc79425(0x3c,0x8a,0x48,0x8b)](_0x168652);}if(_0x494103[_0xc79425(-0x46,-0x1a,0x5,0x55)]&&_0x4b3844['aakmi'](_0x494103['assistant'][_0xc79425(-0x1f,0x3c,0xc,0x4b)](),'')){if('NPhed'===_0x4b3844[_0xd860b8(-0x1f7,-0x1ea,-0x1c6,-0x1be)])return _0x10a499;else{const _0x3b76a8={};_0x3b76a8['role']=_0xd860b8(-0x24f,-0x1ff,-0x242,-0x207),_0x3b76a8['content']=_0x494103[_0xc79425(-0x31,-0x4,0x5,0xb)],_0x2a04d7['push'](_0x3b76a8);}}}else return![];}}const _0x1b746b=_0x4b3844['dYEVf'](mergeAdjacentMessages,_0x2a04d7);function _0xd860b8(_0xe40943,_0xd60117,_0x2b952f,_0x3531ba){return _0x2dc0(_0xe40943- -0x3a0,_0x3531ba);}const {messages:_0x1cc651,replacedVariables:_0x32a30d}=replaceAllPlaceholders(_0x1b746b,_0x583308);return _0x1cc651;}export function getProcessedPrompt(_0x363b1a,_0x38d820){const _0x1f8ec8={'VCoMI':function(_0x4bccad,_0x62fbd){return _0x4bccad(_0x62fbd);}};function _0x103a9c(_0x194a3e,_0x344ade,_0x5cc17d,_0x59df5e){return _0x2dc0(_0x344ade- -0x1ec,_0x59df5e);}const _0x226c4b={};_0x226c4b[_0x103a9c(-0x61,-0xa1,-0xb9,-0x9d)+'e']=_0x363b1a,_0x226c4b[_0x282711(0x396,0x37a,0x399,0x328)+'a']=_0x38d820;function _0x282711(_0xa96ce5,_0xa0ef2e,_0x2de192,_0x57a6c6){return _0x2dc0(_0xa0ef2e-0x1d6,_0xa96ce5);}return _0x1f8ec8[_0x103a9c(-0x5f,-0x41,-0x83,-0x2b)](buildPromptWithTrigger,_0x226c4b);}