(function(_0x56b72d,_0x14cd53){function _0x4f25f0(_0x1e729d,_0x5b8ef9,_0xe845ee,_0x1c534d){return _0x49e3(_0x5b8ef9- -0x36f,_0x1c534d);}function _0x11bdb2(_0x4f3de6,_0x4b6176,_0x27b676,_0x51c61a){return _0x49e3(_0x4f3de6-0x2f0,_0x51c61a);}const _0x466e90=_0x56b72d();while(!![]){try{const _0x30bc8b=-parseInt(_0x4f25f0(-0x1b4,-0x1fd,-0x244,-0x200))/(-0x6df*-0x3+0x14e3+-0x297f)*(parseInt(_0x11bdb2(0x48a,0x479,0x488,0x494))/(-0x3a*-0x7f+0x1*-0x8dd+-0x13e7))+parseInt(_0x4f25f0(-0x182,-0x1a7,-0x161,-0x1d0))/(0x1a34+-0x20c0+-0x49*-0x17)*(-parseInt(_0x11bdb2(0x4a2,0x4c8,0x474,0x4a0))/(-0x5*-0x12e+0x3*0x1a3+-0xacb))+-parseInt(_0x11bdb2(0x467,0x427,0x474,0x46e))/(-0x5fd+-0x1174*-0x2+-0x1ce6)+-parseInt(_0x4f25f0(-0x233,-0x1ed,-0x1b5,-0x218))/(0x1597*0x1+0xe5d+-0x23ee)*(parseInt(_0x11bdb2(0x48e,0x4b1,0x474,0x46f))/(0x18*-0xe4+-0x1b7*0xa+0x268d))+-parseInt(_0x4f25f0(-0x1d8,-0x1c0,-0x19a,-0x1f4))/(0x36f*-0x7+-0x1ee+0x19ff)*(-parseInt(_0x4f25f0(-0x1e0,-0x1ca,-0x18f,-0x1fb))/(-0x49e+0x1283+-0x2*0x6ee))+parseInt(_0x11bdb2(0x4ba,0x4eb,0x4c5,0x4c5))/(0x3*0x1c6+-0x6*-0x3d6+0x1c4c*-0x1)+-parseInt(_0x4f25f0(-0x1b4,-0x1a4,-0x172,-0x1a7))/(-0x16bd+0x2*0xdb7+0xa*-0x77)*(-parseInt(_0x4f25f0(-0x1b2,-0x1f1,-0x23a,-0x1ef))/(-0x21af*-0x1+0x9d*0x25+0x46*-0xce));if(_0x30bc8b===_0x14cd53)break;else _0x466e90['push'](_0x466e90['shift']());}catch(_0x51c22f){_0x466e90['push'](_0x466e90['shift']());}}}(_0x62e3,-0x9*-0x152e3+0x2*-0x137e7+-0xa4f0));const _0x55ac11=(function(){const _0x51aa70={};_0x51aa70[_0x30793e(-0x92,-0x92,-0xfc,-0xd1)]='text',_0x51aa70['sUckW']=function(_0x27bc68,_0x119e2e){return _0x27bc68||_0x119e2e;},_0x51aa70[_0x30793e(-0x13c,-0x102,-0x132,-0xf9)]=function(_0x24081b,_0x3bdf9b){return _0x24081b===_0x3bdf9b;},_0x51aa70[_0x240ab2(0x48d,0x453,0x441,0x469)]=_0x240ab2(0x4a9,0x461,0x450,0x44a),_0x51aa70['InFaL']=_0x30793e(-0xd2,-0xf6,-0x143,-0x116),_0x51aa70[_0x30793e(-0x13b,-0x113,-0x16d,-0x147)]=function(_0x11c83b,_0x158ba3){return _0x11c83b===_0x158ba3;},_0x51aa70[_0x30793e(-0x162,-0x128,-0x177,-0x14d)]='mxGRY';function _0x240ab2(_0x8afb3f,_0x39e6d,_0x43cd06,_0x43b236){return _0x49e3(_0x39e6d-0x29f,_0x8afb3f);}_0x51aa70['lEksr']='UIxvf';const _0x1c441c=_0x51aa70;function _0x30793e(_0x4ff420,_0x2e24e2,_0x4d18e2,_0x40f810){return _0x49e3(_0x40f810- -0x2b6,_0x4d18e2);}let _0x1b3a92=!![];return function(_0x32ad4c,_0x1b6b25){const _0x3401c0=_0x1b3a92?function(){const _0x347441={'ZPGqZ':_0x1c441c[_0x136671(0x458,0x498,0x450,0x461)],'yTZPx':function(_0x303b6e,_0x4471fa){function _0x1e010e(_0x4c5ddf,_0x69b8b,_0x27dea3,_0x25ce94){return _0x136671(_0x69b8b,_0x4c5ddf- -0x562,_0x27dea3-0x1a1,_0x25ce94-0x126);}return _0x1c441c[_0x1e010e(-0x147,-0x159,-0x144,-0x148)](_0x303b6e,_0x4471fa);}};function _0x136671(_0x3dd6ba,_0x5d3d94,_0xdb045f,_0x1e0a46){return _0x49e3(_0x5d3d94-0x2b3,_0x3dd6ba);}function _0x17a17e(_0x3513e6,_0x2f218c,_0x34005d,_0x381792){return _0x49e3(_0x3513e6- -0x1e5,_0x34005d);}if(_0x1c441c[_0x136671(0x477,0x470,0x46b,0x485)](_0x1c441c[_0x17a17e(-0x31,-0x60,-0x7,-0x65)],_0x1c441c['InFaL'])){if(_0x12cecd[_0x136671(0x464,0x487,0x4a8,0x446)](_0x568cce))return!![];}else{if(_0x1b6b25){if(_0x1c441c[_0x17a17e(-0x76,-0x96,-0xbe,-0xa9)](_0x1c441c['iUxqu'],_0x1c441c[_0x136671(0x479,0x48c,0x4c0,0x471)])){if(_0x202674[_0x17a17e(-0x66,-0x94,-0x70,-0x7f)](_0x3dd5d9))return _0x49576a;return[{'type':_0x347441[_0x136671(0x428,0x45b,0x44e,0x48e)],'text':_0x347441['yTZPx'](_0x1f1aef,'')}];}else{const _0x4181ab=_0x1b6b25[_0x136671(0x45e,0x44b,0x46a,0x45b)](_0x32ad4c,arguments);return _0x1b6b25=null,_0x4181ab;}}}}:function(){};return _0x1b3a92=![],_0x3401c0;};}()),_0x4d76d4=_0x55ac11(this,function(){function _0x14a5a9(_0x2dba3b,_0x34879c,_0x1bd6dc,_0x337334){return _0x49e3(_0x34879c- -0x3c5,_0x2dba3b);}const _0x633fe0={};_0x633fe0[_0x1fd459(0x513,0x523,0x521,0x52f)]=_0x14a5a9(-0x20a,-0x242,-0x206,-0x200)+'+$';function _0x1fd459(_0x26574d,_0x1b8540,_0x264102,_0x5d9a58){return _0x49e3(_0x1b8540-0x363,_0x5d9a58);}const _0x23cf08=_0x633fe0;return _0x4d76d4['toString']()['search'](_0x23cf08['MSCpg'])['toString']()['constructo'+'r'](_0x4d76d4)['search'](_0x23cf08[_0x1fd459(0x536,0x523,0x54a,0x517)]);});_0x4d76d4();import{extension_settings}from'../../../../extensions.js';function _0x49e3(_0x1f1aef,_0x49576a){const _0x133a21=_0x62e3();return _0x49e3=function(_0x234133,_0x583cf0){_0x234133=_0x234133-(0x133*0xe+-0x3eb*-0x5+-0x230d*0x1);let _0x484415=_0x133a21[_0x234133];if(_0x49e3['iGeJQa']===undefined){var _0x5cd5f3=function(_0x90f84a){const _0x30f311='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1954c5='',_0x4afb55='',_0x45cb87=_0x1954c5+_0x5cd5f3;for(let _0x3dafa3=0x1c*-0xbc+0x2f1+0x119f,_0x5dc19f,_0x1a7a9f,_0x4e9d2b=-0x1933+-0x14fb+0x2e2e;_0x1a7a9f=_0x90f84a['charAt'](_0x4e9d2b++);~_0x1a7a9f&&(_0x5dc19f=_0x3dafa3%(0x355*0x5+-0x77*0x4f+0x1414)?_0x5dc19f*(0x1*0x1531+0x2192*0x1+-0x3683)+_0x1a7a9f:_0x1a7a9f,_0x3dafa3++%(0x1*0x1f28+0x3c8*0xa+-0x44f4))?_0x1954c5+=_0x45cb87['charCodeAt'](_0x4e9d2b+(0x6*0x401+0x14dc+-0x2cd8))-(-0x20f3+-0x26ca+0x47c7)!==-0x8*0x315+0x1*-0x1a21+0x32c9?String['fromCharCode'](0x5d*0x1+0x1*-0x17aa+0x184c&_0x5dc19f>>(-(0x3*0xb9b+-0x1aac+-0x1*0x823)*_0x3dafa3&0x314+0x1f0c+-0x221a)):_0x3dafa3:0x1410+0xbe9+-0x1ff9*0x1){_0x1a7a9f=_0x30f311['indexOf'](_0x1a7a9f);}for(let _0xf75d84=0x22f8+0x532+-0x282a,_0x4bf9c5=_0x1954c5['length'];_0xf75d84<_0x4bf9c5;_0xf75d84++){_0x4afb55+='%'+('00'+_0x1954c5['charCodeAt'](_0xf75d84)['toString'](-0x1cd1+0x11a9+0xb38))['slice'](-(0xe2*0x17+-0x1a87*-0x1+-0x2ed3));}return decodeURIComponent(_0x4afb55);};_0x49e3['PwxRje']=_0x5cd5f3,_0x1f1aef=arguments,_0x49e3['iGeJQa']=!![];}const _0x1ee930=_0x133a21[0x1e40+0xf53*0x1+-0x2d93],_0x3b0c44=_0x234133+_0x1ee930,_0x3d5723=_0x1f1aef[_0x3b0c44];if(!_0x3d5723){const _0x11c0f1=function(_0x3239f7){this['TcBtEz']=_0x3239f7,this['FynfVE']=[0xe2e+0x13*0x13a+-0x257b,-0x21*0xa5+-0x1611+-0x2b*-0x102,-0xdb2+0x11*0x71+-0x13d*-0x5],this['HOGwwo']=function(){return'newState';},this['zDbNcK']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['XMespk']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x11c0f1['prototype']['dctAvM']=function(){const _0xc16b63=new RegExp(this['zDbNcK']+this['XMespk']),_0x4878a2=_0xc16b63['test'](this['HOGwwo']['toString']())?--this['FynfVE'][0x5c*0x5c+-0x1c6d+0x4a2*-0x1]:--this['FynfVE'][0x3*-0x256+0x3f4+0x30e];return this['BfiUFn'](_0x4878a2);},_0x11c0f1['prototype']['BfiUFn']=function(_0x1abf89){if(!Boolean(~_0x1abf89))return _0x1abf89;return this['JqJJZG'](this['TcBtEz']);},_0x11c0f1['prototype']['JqJJZG']=function(_0x13285c){for(let _0x1a0c15=-0x274*0x7+0x1*0x5dc+0xb50,_0x202933=this['FynfVE']['length'];_0x1a0c15<_0x202933;_0x1a0c15++){this['FynfVE']['push'](Math['round'](Math['random']())),_0x202933=this['FynfVE']['length'];}return _0x13285c(this['FynfVE'][-0x1808+-0x2222+0x2*0x1d15]);},new _0x11c0f1(_0x49e3)['dctAvM'](),_0x484415=_0x49e3['PwxRje'](_0x484415),_0x1f1aef[_0x3b0c44]=_0x484415;}else _0x484415=_0x3d5723;return _0x484415;},_0x49e3(_0x1f1aef,_0x49576a);}import{extensionName}from'./config.js';import{getContext}from'../../../../st-context.js';export function checkTriggerWords(_0x1ab293,_0x4ea847){const _0xc3fd3d={'jXZaO':function(_0xb87245,_0x15f4b5,_0x1ee2d4,_0x1f8d7d,_0x217946){return _0xb87245(_0x15f4b5,_0x1ee2d4,_0x1f8d7d,_0x217946);},'XgSkX':function(_0x54c910,_0xff9757){return _0x54c910===_0xff9757;},'ByEHf':_0x243802(0x355,0x35c,0x34f,0x37c),'cPvoS':function(_0x26d25f,_0x5e5890){return _0x26d25f!==_0x5e5890;},'PZzgY':_0x1e233a(0x3bb,0x38a,0x3c2,0x3d9)};if(!_0x1ab293||!_0x4ea847)return![];function _0x243802(_0xd0f8bf,_0x3abf9f,_0x386781,_0x428ae4){return _0x49e3(_0xd0f8bf-0x1ee,_0x386781);}const _0x4edb02=_0x1ab293[_0x1e233a(0x385,0x3ae,0x395,0x352)](',')[_0x243802(0x392,0x38b,0x3b3,0x35d)](_0x2d4d4b=>_0x2d4d4b[_0x243802(0x3c1,0x3d5,0x3a5,0x402)]())['filter'](_0x1a329f=>_0x1a329f);if(_0xc3fd3d[_0x1e233a(0x34a,0x321,0x355,0x338)](_0x4edb02[_0x243802(0x3b5,0x397,0x376,0x391)],0x476*0x1+0x8c4+-0xd3a))return![];for(const _0x45821a of _0x4edb02){if(_0x1e233a(0x32e,0x377,0x35b,0x359)===_0xc3fd3d[_0x1e233a(0x34b,0x376,0x36e,0x3a9)]){if(_0x4ea847[_0x243802(0x3c2,0x3d0,0x3c8,0x381)](_0x45821a)){if(_0xc3fd3d[_0x1e233a(0x3b6,0x392,0x3ba,0x404)](_0xc3fd3d['PZzgY'],_0x243802(0x343,0x313,0x35c,0x2fa)))return!![];else _0x2d0306[_0x2a37e8]=_0xc3fd3d['jXZaO'](_0x285ace,_0x89878d[_0x1710c8],_0x4481a,_0x42366a,_0x1b7d4c);}}else return[];}function _0x1e233a(_0x30faf5,_0x33f84e,_0x880f45,_0x408c14){return _0x49e3(_0x880f45-0x1f4,_0x30faf5);}return![];}export function mergeAdjacentMessages(_0x518df7){function _0x31d229(_0x425c31,_0xe0b918,_0x17fea0,_0x2938fc){return _0x49e3(_0xe0b918-0x2a9,_0x17fea0);}const _0x4207c0={'XMmNq':function(_0x29619f,_0x4e7397){return _0x29619f===_0x4e7397;},'ccVlu':'string','DfwWJ':function(_0x306acb,_0x54ca93){return _0x306acb+_0x54ca93;},'zaHdK':function(_0x5b68ca,_0x2f89ac){return _0x5b68ca+_0x2f89ac;},'fSXDB':function(_0x154791,_0x13b77b){return _0x154791(_0x13b77b);},'TrAxQ':_0x11041d(0x3b2,0x369,0x385,0x3a3),'VBKbO':function(_0x61798,_0x5d01f6){return _0x61798||_0x5d01f6;},'Dfryy':_0x31d229(0x3d2,0x406,0x41a,0x40c),'ciWae':_0x11041d(0x3fa,0x3a2,0x3b6,0x3d6),'GWnrz':function(_0x24ba26,_0x5c651c){return _0x24ba26===_0x5c651c;},'KyObT':function(_0x4c574a,_0x176666){return _0x4c574a!==_0x176666;},'HWGvC':_0x31d229(0x452,0x40d,0x403,0x3ff),'DtgoS':'hmjmZ','vMQoQ':'hwDzP'};if(!_0x518df7||_0x4207c0[_0x11041d(0x436,0x431,0x3c5,0x3ee)](_0x518df7['length'],-0x1*-0x189b+-0xf7*0xb+-0xdfe*0x1)){if(_0x4207c0[_0x31d229(0x462,0x453,0x43b,0x474)](_0x4207c0['Dfryy'],_0x4207c0[_0x11041d(0x413,0x3e6,0x3b4,0x3df)])){if(_0x4207c0[_0x11041d(0x3f4,0x3bf,0x3aa,0x3ee)](typeof _0x46ab58,'string')&&typeof _0x287220===_0x4207c0[_0x11041d(0x367,0x392,0x3c6,0x39a)])return _0x4207c0[_0x31d229(0x3bc,0x403,0x44a,0x40e)](_0x4207c0[_0x31d229(0x429,0x40f,0x447,0x3f6)](_0x232e10,'\x0a'),_0x1d0547);const _0x3a4daa=_0x4207c0[_0x11041d(0x3c2,0x3a2,0x39d,0x3a4)](_0x2722a1,_0x3483a7),_0x37f317=_0x4207c0[_0x11041d(0x3bf,0x3b0,0x3e8,0x3a4)](_0x5c1809,_0x37e240),_0x50f8b3={};return _0x50f8b3[_0x11041d(0x3fb,0x400,0x38a,0x3d0)]=_0x4207c0[_0x31d229(0x472,0x48b,0x489,0x479)],_0x50f8b3[_0x31d229(0x421,0x408,0x3f3,0x42f)]='\x0a',[..._0x3a4daa,_0x50f8b3,..._0x37f317];}else return[];}const _0x267915=[];let _0x244eaf=null;for(const _0x2a9e47 of _0x518df7){if(!_0x244eaf){const _0x5d9c16={..._0x2a9e47};_0x244eaf=_0x5d9c16;}else{if(_0x4207c0[_0x31d229(0x40f,0x421,0x457,0x41b)](_0x244eaf[_0x11041d(0x3cb,0x3fb,0x3b3,0x3d1)],_0x2a9e47[_0x11041d(0x3a5,0x3bb,0x3e6,0x3d1)]))_0x4207c0[_0x11041d(0x3d4,0x3da,0x407,0x3c9)](_0x4207c0['HWGvC'],_0x4207c0[_0x31d229(0x449,0x46a,0x43b,0x444)])?_0x244eaf[_0x11041d(0x3b4,0x39c,0x3b8,0x3cf)]=mergeContent(_0x244eaf['content'],_0x2a9e47[_0x11041d(0x3c5,0x3a1,0x3fc,0x3cf)]):_0x1b27d4['add'](_0x1fce18);else{if(_0x4207c0[_0x11041d(0x382,0x38c,0x3d0,0x3c9)](_0x4207c0[_0x31d229(0x462,0x424,0x41f,0x463)],_0x31d229(0x407,0x448,0x446,0x481))){_0x267915[_0x11041d(0x40a,0x427,0x3d0,0x416)](_0x244eaf);const _0x1f52b6={..._0x2a9e47};_0x244eaf=_0x1f52b6;}else return _0x4afb55&&_0x45cb87[_0x11041d(0x458,0x3f7,0x43f,0x418)](_0x3dafa3)&&(_0x3239f7&&_0x1abf89['add'](_0x13285c)),_0xf75d84[_0x11041d(0x41e,0x425,0x46a,0x424)](_0x4bf9c5,_0x4207c0[_0x11041d(0x404,0x3f1,0x3e3,0x3c1)](_0x11c0f1,''));}}}function _0x11041d(_0x24c2c4,_0x4393d5,_0x4d25f7,_0x55b049){return _0x49e3(_0x55b049-0x244,_0x4d25f7);}return _0x244eaf&&_0x267915[_0x31d229(0x45a,0x47b,0x488,0x437)](_0x244eaf),_0x267915;}function _0x62e3(){const _0x51d673=['y1b2B1m','BgvUz3rO','nteZmZm5s0DYDvnZ','Bwf0y2HbBgW','ntaWntmXmePPtwnfCW','mtf0CKfQy0i','vLvcBg4','uNPuuvC','uhflzM0','E3T1C2vYFx0','ywzKsgy','ENPMsMC','ChvZAa','DhjPBq','Aw5JBhvKzxm','rfzOvLi','AuzpwMW','uNvewLm','q25pEwe','BevRC3i','B2f2C3y','zw50CMLLCW','y01HyNe','q0TQzgy','vufJue0','Bg9N','CMvWBgfJzufSBa','DhjPz2DLCLDVCG','vhjbEfe','DKfrELa','B2zPBgu','CgvkwfG','tvnKC2u','EgvADva','sgHUvgK','whzkuwu','y2nwBhu','CMLHyMXLCW','EhrFChjVzMLSzq','rg9yC04','rgz3v0O','tKTXuhG','ywrK','CuPvCMK','uuvsqNO','Dgv4Da','zLnyrei','wgDtA1G','C3rYAw5N','A2v5CW','vffUuwu','5A6m5OIqoG','EMfizeS','yKH1Ew8','C1vJA1C','Avv4Cxu','Dw1bBwS','DxnLCG','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','BeHzyKi','yxnZAxn0yw50','Ahn5Cxm','swn2wNm','CMvWBgfJzwrwyq','n0Xwv3r4sG','BwvYz2vKq291BG','BgXTx3jLCxvLCW','vurisgO','D3fmB3y','mJe3otu1mgH3tuv3CG','r1DUCNO','ugPODfy','qNLfsgy','DK1rB1e','v3vjDui','vKjlyK8','mta2odq1nZjpyMTeAei','AxnbCNjHEq','zMLNCW','CLnLzxO','nKXzz0H5DW','kcGOlISPkYKRkq','CxbgDgG','s3LpyLq','w3bYB21WDfbYBW','AgLZDg9YEq','zMLSDgvY','y29UDgv4Df9WCG','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','y29UDgvUDa','DhLWzq','CM9Szq','vhr0rfK','AM9PBG','vuXjyxa','sKLvwhC','t2Losui','r1j0txK','qvHNtfO','zw50CMLLC0nVDq','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','BgPoAwm','yxbWBhK','Df90ExbLx2nVBG','mZK1mKPhAKvowa','y2Lxywu','te5pD08','zgDlt08','mJqZote1n1zJu3fOAq','ALDOr3a','yKDNELy','C3bSAxq','z0TmEhm','s0rJz0i','BwfW','mtqXntqZowP1t1Htza','rLHtBe4','y2vZC29YxsdMNOtLU7O','wLbhCvO','t3rcDeK','we1TtNe','B2jQzwn0','A0fqCwu','qMz5CMm','Ee5twKm','og53Ag9dqq','ufLzC00','A1f1vg4','nhrWt1H3Ea','BwvZC2fNzxm','AwrHvfC','vNvZt0u','DKflwLe','Cvj4D0K','DufnELa','ExbACxO','C3rYAw5NAwz5','E3TNzxr2yxi6oG','zw5HyMXLza','sLPnsge','thruAvC','Cwztuwi','tvndCgC','rhrNB1m','u2zVDfe','DhjPz2DLCG','uvDTChi','CMvXDwvZDfr5Ca'];_0x62e3=function(){return _0x51d673;};return _0x62e3();}function mergeContent(_0x5a58a4,_0xd87640){const _0x3886cf={'oavsv':function(_0x23f614,_0x2ec785,_0x3bb20d,_0x71a358,_0x36da51){return _0x23f614(_0x2ec785,_0x3bb20d,_0x71a358,_0x36da51);},'PjhtV':function(_0x16bfc2,_0x453c33){return _0x16bfc2===_0x453c33;},'TttDY':_0x339b44(-0xb9,-0xbd,-0x10a,-0xfe),'kQuTn':function(_0x157d2c,_0x5220a3){return _0x157d2c===_0x5220a3;},'VUBln':function(_0x23a1ac,_0x11b366){return _0x23a1ac!==_0x11b366;},'wqLov':_0x339b44(-0x83,-0x84,-0x4a,-0x8a),'rhSkp':function(_0x2f4b71,_0x437f8b){return _0x2f4b71+_0x437f8b;},'NKqPx':function(_0x33a735,_0x155f0c){return _0x33a735+_0x155f0c;},'QERBz':function(_0x268f02,_0xe28d19){return _0x268f02(_0xe28d19);},'qfSQb':function(_0x4b04de,_0x4acb38){return _0x4b04de(_0x4acb38);},'CKjdf':_0x339b44(-0xba,-0x107,-0xbd,-0x101)};if(_0x3886cf[_0x339b44(-0xe4,-0xfc,-0x103,-0xe7)](typeof _0x5a58a4,_0x3886cf[_0x5084d2(0x181,0x1af,0x1b3,0x172)])&&_0x3886cf[_0x5084d2(0x1d0,0x1d2,0x18a,0x1a6)](typeof _0xd87640,_0x3886cf[_0x5084d2(0x176,0x1af,0x1f3,0x191)])){if(_0x3886cf[_0x339b44(-0xaf,-0x60,-0x95,-0x94)](_0x3886cf[_0x5084d2(0x168,0x197,0x1da,0x1c5)],_0x3886cf[_0x5084d2(0x159,0x197,0x1de,0x1a0)])){const _0x27818e=/\{\{getvar::([^}]+)\}\}/g,_0x236c4f=_0x5dc8b4[_0x339b44(-0xa2,-0xde,-0xd8,-0xa6)](_0x21f5de),_0x56b38c=[..._0x236c4f[_0x339b44(-0xd4,-0xd6,-0xc8,-0x97)](_0x27818e)],_0x46fc5c=new _0xb95a0e();for(const _0x5397bb of _0x56b38c){_0x46fc5c[_0x5084d2(0x14d,0x17d,0x153,0x18c)](_0x5397bb[-0x373*0x2+0x1f7d+-0xc4b*0x2]);}for(const _0x2ddd66 of _0x46fc5c){const _0x122e79=_0x339b44(-0xa2,-0x64,-0xaa,-0xa5)+_0x2ddd66+'}}',_0x19861b=_0x59a980[_0x2ddd66]||'';_0x576249=_0x3886cf[_0x5084d2(0x1f2,0x1fb,0x234,0x20d)](_0x19010d,_0x359929,_0x122e79,_0x19861b,_0x5df59a);}}else return _0x3886cf['rhSkp'](_0x3886cf[_0x339b44(-0x111,-0x14b,-0xce,-0x105)](_0x5a58a4,'\x0a'),_0xd87640);}function _0x5084d2(_0x231b87,_0x5597af,_0x2dcda5,_0x57d0d4){return _0x49e3(_0x5597af-0x21,_0x231b87);}const _0x7c918c=_0x3886cf[_0x339b44(-0x124,-0xfa,-0xbe,-0x102)](normalizeToArray,_0x5a58a4),_0x511774=_0x3886cf[_0x339b44(-0xad,-0x9b,-0x73,-0xa1)](normalizeToArray,_0xd87640),_0x32a381={};_0x32a381[_0x5084d2(0x18e,0x1ad,0x178,0x1dd)]=_0x3886cf[_0x5084d2(0x21d,0x1fe,0x1f6,0x1df)];function _0x339b44(_0x35a608,_0x141114,_0x21dbf2,_0x5226e7){return _0x49e3(_0x5226e7- -0x260,_0x141114);}return _0x32a381[_0x5084d2(0x187,0x180,0x1bf,0x18d)]='\x0a',[..._0x7c918c,_0x32a381,..._0x511774];}function normalizeToArray(_0x515d38){const _0x30de13={};_0x30de13[_0x2900f8(-0xd6,-0xfd,-0x126,-0xf3)]=function(_0x44b9ef,_0x296089){return _0x44b9ef!==_0x296089;};function _0x2900f8(_0x494d3b,_0x52be50,_0x101789,_0x8f4d6c){return _0x49e3(_0x8f4d6c- -0x2da,_0x52be50);}_0x30de13[_0x2900f8(-0x112,-0x141,-0x13b,-0x102)]='text',_0x30de13['WuIuB']=function(_0x5b4cf7,_0x530c81){return _0x5b4cf7||_0x530c81;};const _0x4c5a02=_0x30de13;if(Array[_0x2900f8(-0x144,-0x128,-0x15f,-0x15b)](_0x515d38))return _0x4c5a02[_0x4d6548(0x74,0x7c,0x5d,0x85)](_0x4d6548(0x43,0x6f,0x89,0x83),'CEKzH')?_0x515d38:_0x234133;function _0x4d6548(_0x3952ac,_0x3ca15b,_0x1c2eb0,_0x140cd8){return _0x49e3(_0x3952ac- -0x173,_0x3ca15b);}return[{'type':_0x4c5a02[_0x2900f8(-0x111,-0x142,-0x132,-0x102)],'text':_0x4c5a02[_0x2900f8(-0x13e,-0x131,-0x151,-0x15e)](_0x515d38,'')}];}export function replacePlaceholder(_0x104486,_0x3e167c,_0x27e2b1,_0x1a81da){const _0x47043b={'ljNic':function(_0x20c3e9,_0x3ce772,_0x124a63,_0x279a9b,_0xb5e52b){return _0x20c3e9(_0x3ce772,_0x124a63,_0x279a9b,_0xb5e52b);},'rSeez':function(_0x576a89,_0x58db6a){return _0x576a89===_0x58db6a;},'zzfJg':function(_0x570d1a,_0x4556f8){return _0x570d1a!==_0x4556f8;},'KDcgB':_0xf18d97(0x39e,0x3c2,0x3e9,0x381),'IgXdk':function(_0x2a1ac7,_0x44d816){return _0x2a1ac7||_0x44d816;},'umAmk':_0x105e2e(-0x46,-0x51,-0x21,-0x77)};if(_0x47043b[_0x105e2e(-0x58,-0x2e,-0x47,-0x97)](typeof _0x104486,_0xf18d97(0x3a3,0x376,0x333,0x34a)))return _0x27e2b1&&_0x104486[_0x105e2e(-0x5,0x3c,0x3f,0x22)](_0x3e167c)&&(_0x1a81da&&(_0x47043b[_0xf18d97(0x3f6,0x3e5,0x42f,0x40a)]('FLxjh',_0x47043b[_0xf18d97(0x379,0x3b7,0x3dc,0x39d)])?_0x1a81da[_0xf18d97(0x32f,0x370,0x387,0x3b6)](_0x3e167c):_0x1ef9aa[_0x105e2e(-0x7,0x27,-0x1,-0x1a)](_0x38d935))),_0x104486[_0xf18d97(0x43b,0x3f4,0x3fa,0x3c5)](_0x3e167c,_0x47043b['IgXdk'](_0x27e2b1,''));if(Array['isArray'](_0x104486))return _0x104486['map'](_0x2fa37b=>replacePlaceholder(_0x2fa37b,_0x3e167c,_0x27e2b1,_0x1a81da));if(_0x104486&&_0x47043b[_0xf18d97(0x3c0,0x395,0x39f,0x3d4)](typeof _0x104486,_0xf18d97(0x378,0x3bf,0x381,0x3c2))){const _0x492b92={};for(const _0x523e2a in _0x104486){if(_0x47043b['zzfJg'](_0xf18d97(0x376,0x3a7,0x3bc,0x3ec),_0x47043b[_0x105e2e(-0x6f,-0x58,-0x60,-0x82)])){const _0x339003=_0xf18d97(0x3e0,0x3cf,0x40e,0x3d2)+_0x44ea1e+'}}',_0x229cf9=_0xfe29f8[_0x5372f8]||'';_0x393784=_0x47043b[_0xf18d97(0x39d,0x3ab,0x3c7,0x376)](_0x2737cf,_0x3cb979,_0x339003,_0x229cf9,_0x3eb0df);}else _0x492b92[_0x523e2a]=replacePlaceholder(_0x104486[_0x523e2a],_0x3e167c,_0x27e2b1,_0x1a81da);}return _0x492b92;}function _0xf18d97(_0x148e7a,_0xcdcfcf,_0x54b318,_0x24add6){return _0x49e3(_0xcdcfcf-0x214,_0x24add6);}function _0x105e2e(_0x445439,_0x1537f5,_0x12ce75,_0xf4eddb){return _0x49e3(_0x445439- -0x1d9,_0x12ce75);}return _0x104486;}export function replaceAllPlaceholders(_0x4f1432,_0xaa0d3c){const _0x3eac81={'qRxwI':'{{user}}','OtBtI':'<user>','IcvZs':function(_0x47d834){return _0x47d834();},'kNulf':_0x2bdbd4(0x1fe,0x201,0x1f9,0x1cf),'RzTQW':function(_0x99f205,_0x43e5e4,_0x41722c,_0x5793c4,_0x2e6954){return _0x99f205(_0x43e5e4,_0x41722c,_0x5793c4,_0x2e6954);},'afdHf':'{{世界书触发}}','QWmpr':function(_0x19329f,_0x5e8c05,_0x697a65,_0x15f950,_0x4f4893){return _0x19329f(_0x5e8c05,_0x697a65,_0x15f950,_0x4f4893);},'LNOwO':_0x2bdbd4(0x19f,0x1c6,0x17b,0x1ac),'JIUXw':function(_0x13db85,_0x2fe415,_0x569dd2,_0xd257a,_0x4d83ce){return _0x13db85(_0x2fe415,_0x569dd2,_0xd257a,_0x4d83ce);},'MSdse':_0x29dc15(-0x236,-0x24f,-0x26f,-0x251)+'}}','vAQzP':_0x29dc15(-0x260,-0x27c,-0x236,-0x289)+'}}','DoXsN':function(_0xe0e090,_0x5ee53b,_0x1a417b,_0x1afec6,_0x2eae18){return _0xe0e090(_0x5ee53b,_0x1a417b,_0x1afec6,_0x2eae18);},'HhnTi':'{{用户需求}}','ypZqz':function(_0x4de314,_0x2c3923){return _0x4de314>_0x2c3923;},'LtTiW':function(_0x286bd4,_0x696f86){return _0x286bd4!==_0x696f86;},'lHYbB':_0x2bdbd4(0x21f,0x1bc,0x1db,0x1da)},{context:context='',body:body='',worldBookContent:worldBookContent='',variables:variables={},userDemand:userDemand='',characterListText:characterListText='',outfitEnableListText:outfitEnableListText='',commonCharacterListText:commonCharacterListText=''}=_0xaa0d3c,_0x1d67ce=new Set();let _0x3f7c1b=_0x4f1432;const _0x4538dd=_0x3eac81[_0x29dc15(-0x25c,-0x2a6,-0x21e,-0x27d)](getContext),_0x249386=_0x4538dd?.['name1']||'';let _0x14ab46=worldBookContent;_0x14ab46&&('Bfyrc'===_0x3eac81['kNulf']?(_0x14ab46=_0x14ab46[_0x29dc15(-0x1ec,-0x1c2,-0x1e2,-0x224)](_0x2bdbd4(0x1f1,0x20e,0x1d2,0x1f1),_0x249386),_0x14ab46=_0x14ab46[_0x29dc15(-0x1ec,-0x227,-0x22b,-0x21d)](_0x3eac81[_0x29dc15(-0x223,-0x26d,-0x1ff,-0x1f7)],_0x249386)):(_0x5cbf32=_0x28f15c[_0x29dc15(-0x1ec,-0x216,-0x225,-0x228)](_0x3eac81[_0x2bdbd4(0x20e,0x1fe,0x1a3,0x1d9)],_0x3b0559),_0x284db3=_0x2551e7[_0x2bdbd4(0x1f0,0x1be,0x20c,0x202)](_0x3eac81['OtBtI'],_0x516bdb)));_0x3f7c1b=_0x3eac81[_0x29dc15(-0x1ff,-0x23c,-0x1e4,-0x1ed)](replacePlaceholder,_0x3f7c1b,'{{上下文}}',context,_0x1d67ce),_0x3f7c1b=_0x3eac81[_0x29dc15(-0x1ff,-0x1ee,-0x1f2,-0x22e)](replacePlaceholder,_0x3f7c1b,_0x3eac81[_0x29dc15(-0x1fc,-0x237,-0x1f4,-0x211)],_0x14ab46,_0x1d67ce),_0x3f7c1b=_0x3eac81[_0x2bdbd4(0x230,0x21a,0x20d,0x1ef)](replacePlaceholder,_0x3f7c1b,'{{正文}}',body,_0x1d67ce),_0x3f7c1b=_0x3eac81[_0x2bdbd4(0x1a3,0x213,0x222,0x1e6)](replacePlaceholder,_0x3f7c1b,_0x3eac81[_0x29dc15(-0x230,-0x210,-0x1f9,-0x220)],characterListText,_0x1d67ce),_0x3f7c1b=_0x3eac81[_0x2bdbd4(0x172,0x1af,0x1a8,0x1b3)](replacePlaceholder,_0x3f7c1b,_0x3eac81[_0x29dc15(-0x1e6,-0x1dc,-0x210,-0x1f6)],outfitEnableListText,_0x1d67ce);function _0x2bdbd4(_0x1068b2,_0x50bd37,_0x232b41,_0x59be45){return _0x49e3(_0x59be45-0x22,_0x1068b2);}_0x3f7c1b=_0x3eac81[_0x29dc15(-0x1ff,-0x220,-0x1e8,-0x246)](replacePlaceholder,_0x3f7c1b,_0x3eac81[_0x29dc15(-0x1e9,-0x1c1,-0x1a7,-0x1c7)],commonCharacterListText,_0x1d67ce),_0x3f7c1b=_0x3eac81[_0x2bdbd4(0x14f,0x1b9,0x1ae,0x17b)](replacePlaceholder,_0x3f7c1b,_0x3eac81[_0x29dc15(-0x278,-0x26c,-0x28f,-0x2b5)],userDemand,_0x1d67ce);if(variables&&_0x3eac81[_0x29dc15(-0x213,-0x251,-0x1ff,-0x1cd)](Object[_0x2bdbd4(0x1bc,0x196,0x184,0x185)](variables)[_0x29dc15(-0x205,-0x1f5,-0x1f7,-0x200)],-0x265e+-0x37*0xa+0x2884)){const _0x123a72=/\{\{getvar::([^}]+)\}\}/g,_0x3f6600=JSON['stringify'](_0x3f7c1b),_0x20faad=[..._0x3f6600[_0x29dc15(-0x203,-0x208,-0x21e,-0x247)](_0x123a72)],_0x7953aa=new Set();for(const _0x2d9cfb of _0x20faad){_0x7953aa['add'](_0x2d9cfb[-0x176*-0x3+-0x1*0x345+-0x11c]);}for(const _0x2c1cbe of _0x7953aa){if(_0x3eac81[_0x2bdbd4(0x198,0x1d2,0x20e,0x1e0)](_0x3eac81['lHYbB'],_0x3eac81[_0x29dc15(-0x25f,-0x21c,-0x276,-0x265)]))return _0x3ff101[_0x2bdbd4(0x181,0x1ea,0x1a9,0x1c6)](_0x5d440b=>_0x5e0298(_0x5d440b,_0x434a97,_0x15ea15,_0x235456));else{const _0x166d51='{{getvar::'+_0x2c1cbe+'}}',_0x1d4375=variables[_0x2c1cbe]||'';_0x3f7c1b=replacePlaceholder(_0x3f7c1b,_0x166d51,_0x1d4375,_0x1d67ce);}}}const _0x4e4716={};_0x4e4716[_0x29dc15(-0x219,-0x228,-0x205,-0x22f)]=_0x3f7c1b;function _0x29dc15(_0x4c9863,_0x2b7f7e,_0x49e032,_0x231c27){return _0x49e3(_0x4c9863- -0x3cc,_0x231c27);}return _0x4e4716[_0x29dc15(-0x25b,-0x252,-0x293,-0x224)+_0x2bdbd4(0x170,0x147,0x1bf,0x179)]=_0x1d67ce,_0x4e4716;}export function buildPromptWithTrigger(_0x4aa2d4){const _0x1a043e={'PYYsM':function(_0x50aec0,_0x4ec5c6,_0x29f13c){return _0x50aec0(_0x4ec5c6,_0x29f13c);},'wtlfD':_0x5752fd(0x321,0x35e,0x2d8,0x337),'kAPqe':'XaOim','UDHHj':'user','RuDZS':function(_0x195873,_0x1933d3){return _0x195873!==_0x1933d3;},'FXSlN':'fECDj','cMabq':function(_0x56ac00,_0xb77e27){return _0x56ac00!==_0xb77e27;},'UAcPM':_0x5752fd(0x326,0x312,0x2e9,0x30e),'qpFth':function(_0x5567f9,_0x5c307c){return _0x5567f9!==_0x5c307c;},'ULIap':_0x133147(0x418,0x3da,0x3c6,0x3ea),'AXgLZ':function(_0x459906,_0x3298c1){return _0x459906(_0x3298c1);},'DVhVR':_0x133147(0x3bf,0x3df,0x3fc,0x402)+_0x5752fd(0x32b,0x302,0x33e,0x31e)+_0x133147(0x3f3,0x3d8,0x3c9,0x3e1)},{requestType:_0x5a3911,contextData:_0x3b1bd3}=_0x4aa2d4,_0x8bb7c9=extension_settings[extensionName]?.[_0x133147(0x40d,0x430,0x429,0x3f0)+_0x5752fd(0x31d,0x2d5,0x312,0x34a)+_0x5752fd(0x304,0x2ff,0x346,0x2c2)]||{},_0x2eb5ff={};function _0x5752fd(_0x4dc536,_0x48a0ce,_0x5476e4,_0x1ed77b){return _0x49e3(_0x4dc536-0x184,_0x1ed77b);}_0x2eb5ff[_0x133147(0x42f,0x41b,0x414,0x405)+_0x5752fd(0x368,0x326,0x36e,0x323)]='默认';const _0x2bcf52=_0x8bb7c9[_0x5a3911]||_0x2eb5ff,_0x28f5dd=_0x2bcf52[_0x133147(0x42f,0x3e5,0x422,0x405)+'ofile']||'默认',_0x43ec33=extension_settings[extensionName]?.['test_conte'+_0x5752fd(0x2dc,0x2d7,0x2aa,0x29d)+'s']||{},_0x4e7f58=_0x43ec33[_0x28f5dd]||_0x43ec33[Object[_0x133147(0x3c5,0x3ea,0x3cf,0x3df)](_0x43ec33)[0x1716+0x1691+-0x2da7]]||{},{context:context='',body:body='',worldBookContent:worldBookContent='',userDemand:userDemand=''}=_0x3b1bd3,_0x1675c9=[userDemand,context,body,worldBookContent][_0x133147(0x3dc,0x43f,0x42e,0x404)](Boolean)[_0x5752fd(0x313,0x319,0x343,0x331)]('\x0a'),_0x2850ae=[];if(_0x4e7f58['entries']&&Array[_0x5752fd(0x303,0x34c,0x2fc,0x2c8)](_0x4e7f58[_0x133147(0x484,0x475,0x472,0x457)])){if(_0x1a043e['wtlfD']===_0x1a043e[_0x133147(0x3ef,0x3e2,0x433,0x428)])_0x218a4a[_0x5752fd(0x30f,0x2f2,0x30e,0x2e2)]=_0x1a043e['PYYsM'](_0x40fe3d,_0x4c21d5[_0x133147(0x42a,0x420,0x402,0x407)],_0x13e09b[_0x133147(0x446,0x3cc,0x403,0x407)]);else for(const _0x4580e2 of _0x4e7f58[_0x5752fd(0x35f,0x350,0x331,0x328)]){if(!_0x4580e2[_0x5752fd(0x340,0x335,0x357,0x38a)])continue;if(!_0x4580e2[_0x5752fd(0x30f,0x34b,0x2f5,0x315)]||_0x4580e2[_0x133147(0x3c5,0x403,0x41e,0x407)]['trim']()==='')continue;if(_0x4580e2['triggerMod'+'e']===_0x133147(0x412,0x435,0x45e,0x43f)){if(!_0x1a043e['PYYsM'](checkTriggerWords,_0x4580e2[_0x5752fd(0x365,0x322,0x387,0x332)+'ds'],_0x1675c9))continue;}const _0x1304e9={};_0x1304e9['role']=_0x4580e2[_0x133147(0x408,0x3f3,0x3e7,0x409)]||_0x1a043e[_0x133147(0x3ec,0x3cc,0x417,0x3f1)],_0x1304e9[_0x133147(0x42d,0x3d1,0x436,0x407)]=_0x4580e2[_0x5752fd(0x30f,0x2ff,0x2d6,0x306)],_0x2850ae[_0x133147(0x449,0x47d,0x46b,0x44e)](_0x1304e9);}}else{if(_0x4e7f58[_0x5752fd(0x30b,0x353,0x34b,0x2df)]&&Array[_0x5752fd(0x303,0x2cf,0x31c,0x314)](_0x4e7f58[_0x133147(0x402,0x3c4,0x3db,0x403)])){if(_0x1a043e[_0x5752fd(0x35b,0x32d,0x39e,0x363)](_0x1a043e[_0x133147(0x3dd,0x42c,0x45e,0x422)],'EqEsG'))for(const _0x5a299c of _0x4e7f58[_0x5752fd(0x30b,0x345,0x300,0x31d)]){if(_0x1a043e[_0x5752fd(0x360,0x35d,0x32e,0x380)]('gKLxs',_0x1a043e[_0x133147(0x493,0x484,0x471,0x45a)]))_0x3af9d1&&_0xc6a4e1[_0x133147(0x3da,0x400,0x3ab,0x3d8)](_0x55c20f);else{if(_0x5a299c[_0x5752fd(0x2ef,0x2df,0x2b1,0x327)]&&_0x5a299c[_0x5752fd(0x2ef,0x311,0x32b,0x2d2)][_0x133147(0x484,0x46e,0x445,0x44f)]()!==''){const _0x4005db={};_0x4005db[_0x133147(0x3ef,0x3ca,0x404,0x409)]=_0x1a043e['UDHHj'],_0x4005db[_0x133147(0x406,0x3f5,0x41b,0x407)]=_0x5a299c[_0x5752fd(0x2ef,0x325,0x307,0x2d6)],_0x2850ae[_0x5752fd(0x356,0x391,0x373,0x349)](_0x4005db);}if(_0x5a299c[_0x5752fd(0x2f2,0x2e7,0x318,0x32f)]&&_0x1a043e[_0x133147(0x43b,0x447,0x415,0x400)](_0x5a299c['assistant'][_0x133147(0x479,0x45c,0x416,0x44f)](),'')){const _0x4544ee={};_0x4544ee[_0x5752fd(0x311,0x353,0x33a,0x32d)]=_0x1a043e[_0x5752fd(0x314,0x33c,0x305,0x34a)],_0x4544ee[_0x133147(0x3ed,0x427,0x40d,0x407)]=_0x5a299c[_0x133147(0x416,0x3a3,0x3f9,0x3ea)],_0x2850ae[_0x5752fd(0x356,0x39f,0x36e,0x32e)](_0x4544ee);}}}else{const _0x2f2956={..._0x549b6c};_0x2505e8=_0x2f2956;}}}const _0x42627e=_0x1a043e[_0x133147(0x3ee,0x429,0x3d4,0x410)](mergeAdjacentMessages,_0x2850ae),{messages:_0xbe6fc,replacedVariables:_0x33775d}=_0x1a043e[_0x5752fd(0x334,0x372,0x34c,0x36e)](replaceAllPlaceholders,_0x42627e,_0x3b1bd3),_0x437121={};_0x437121[_0x133147(0x468,0x447,0x46f,0x441)+'e']=_0x5a3911,_0x437121[_0x5752fd(0x319,0x321,0x31e,0x35f)+'nt']=_0x2850ae[_0x5752fd(0x34b,0x33c,0x321,0x375)],_0x437121[_0x133147(0x3ec,0x3eb,0x3c6,0x3ef)+'t']=_0x42627e[_0x5752fd(0x34b,0x378,0x380,0x361)],_0x437121['finalCount']=_0xbe6fc[_0x133147(0x466,0x43b,0x406,0x443)];function _0x133147(_0x4285f4,_0x74db64,_0x2bbd33,_0x29281a){return _0x49e3(_0x29281a-0x27c,_0x74db64);}return _0x437121['replacedVa'+_0x133147(0x3b9,0x397,0x39b,0x3d3)]=[..._0x33775d],console[_0x133147(0x414,0x46a,0x476,0x45b)](_0x1a043e[_0x133147(0x479,0x480,0x40c,0x451)],_0x437121),_0xbe6fc;}export function getProcessedPrompt(_0x990e7a,_0x165f7e){const _0x297512={'VusOE':function(_0x3b0e85,_0xeb5879){return _0x3b0e85(_0xeb5879);}};function _0x50a745(_0x439971,_0x328def,_0x2ed331,_0x42517a){return _0x49e3(_0x42517a-0x397,_0x2ed331);}const _0x14976c={};return _0x14976c['requestTyp'+'e']=_0x990e7a,_0x14976c['contextDat'+'a']=_0x165f7e,_0x297512[_0x50a745(0x502,0x54c,0x54f,0x54c)](buildPromptWithTrigger,_0x14976c);}
//# sourceMappingURL=http://localhost:8000/promptProcessor.js.map