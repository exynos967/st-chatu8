(function(_0x1273be,_0x28e7f1){function _0x37296d(_0x3f7f55,_0x46946c,_0x147243,_0x29dcca){return _0x813e(_0x46946c-0x3c8,_0x3f7f55);}const _0x397d36=_0x1273be();function _0x355044(_0x1515f7,_0x467db4,_0x2c0570,_0x94db3c){return _0x813e(_0x2c0570-0x43,_0x1515f7);}while(!![]){try{const _0x487ff1=-parseInt(_0x355044(0x187,0x1b2,0x1d8,0x208))/(0x2146+-0x12fb+-0xe4a)*(parseInt(_0x355044(0x1f6,0x192,0x1b4,0x206))/(-0x239*-0x4+-0x1781+0x13*0xc5))+-parseInt(_0x37296d(0x5a5,0x5b6,0x5b7,0x5f6))/(0x1e9+0x6b*0x1+-0x251)*(parseInt(_0x355044(0x1be,0x1d8,0x1cf,0x1a6))/(-0xba8+-0x1273+0x1e1f))+parseInt(_0x37296d(0x5b6,0x5c9,0x58b,0x5cd))/(-0x8dd*-0x3+0x1cee+-0x3780)*(parseInt(_0x37296d(0x580,0x5ae,0x58e,0x5f8))/(0x283*0x7+0xeb*0x15+-0x24d6))+parseInt(_0x355044(0x1c6,0x1ad,0x1ea,0x217))/(-0x1198+0x192+0x100d)*(parseInt(_0x37296d(0x5b1,0x5a7,0x57d,0x567))/(-0x1*-0x50e+-0xcdc+0x2*0x3eb))+parseInt(_0x355044(0x219,0x257,0x232,0x20d))/(0x2473+0x1fbf+0x1*-0x4429)+parseInt(_0x355044(0x1c7,0x23b,0x20d,0x20b))/(-0x2*-0xaf1+-0x3e*0x1f+-0xe56)+-parseInt(_0x37296d(0x566,0x563,0x54c,0x544))/(0x179a+-0x27*-0x6f+-0x2878)*(parseInt(_0x37296d(0x60e,0x5ca,0x583,0x618))/(-0x1cae+-0x29c+0x23d*0xe));if(_0x487ff1===_0x28e7f1)break;else _0x397d36['push'](_0x397d36['shift']());}catch(_0x4e15d4){_0x397d36['push'](_0x397d36['shift']());}}}(_0x4f36,0x171d10*-0x1+0xeb9de+0x1515f0));const _0x51a42c=(function(){const _0xdbe370={};_0xdbe370['cGQme']=_0x5518cc(-0x134,-0x125,-0x13d,-0x146);const _0x469532=_0xdbe370;let _0x3bc415=!![];function _0x5518cc(_0xe5ed09,_0x29807e,_0x184bc1,_0x1253ae){return _0x813e(_0x1253ae- -0x31b,_0x29807e);}return function(_0xc1d290,_0x464cfb){const _0x347e0d=_0x3bc415?function(){function _0x21bc16(_0x4118ea,_0x416fa8,_0x529e44,_0x107e98){return _0x813e(_0x416fa8- -0x1ca,_0x107e98);}function _0x3ebead(_0x40af6d,_0x4c64f3,_0x4a5549,_0x10f3ac){return _0x813e(_0x40af6d- -0x42,_0x10f3ac);}if(_0x469532[_0x21bc16(-0xa9,-0x54,-0x95,-0x7f)]==='ulQGe'){if(_0x464cfb){const _0x26d1cc=_0x464cfb[_0x3ebead(0x17b,0x16f,0x18a,0x13e)](_0xc1d290,arguments);return _0x464cfb=null,_0x26d1cc;}}else return _0x119e2e;}:function(){};return _0x3bc415=![],_0x347e0d;};}()),_0x1db563=_0x51a42c(this,function(){const _0x217c13={};function _0x49aa37(_0x37ae12,_0xecd88e,_0x5bd256,_0x476de6){return _0x813e(_0x5bd256-0xfe,_0xecd88e);}_0x217c13[_0x1bb20e(0x48d,0x4a8,0x4bf,0x486)]=_0x1bb20e(0x3e4,0x3bd,0x3f5,0x434)+'+$';function _0x1bb20e(_0x14add5,_0x14c7be,_0x5878d3,_0x5de356){return _0x813e(_0x14add5-0x284,_0x5de356);}const _0x95ef16=_0x217c13;return _0x1db563[_0x1bb20e(0x44f,0x470,0x41c,0x476)]()[_0x1bb20e(0x43f,0x42e,0x46c,0x460)](_0x95ef16['eOqDV'])['toString']()[_0x49aa37(0x2c0,0x22b,0x27b,0x2c8)+'r'](_0x1db563)['search'](_0x95ef16[_0x49aa37(0x2cb,0x339,0x307,0x34c)]);});_0x1db563();import{extension_settings}from'../../../../extensions.js';import{extensionName}from'./config.js';function _0x4f36(){const _0x95a2c3=['AMHMC2q','sMT1swS','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','CePfEha','suzkrxC','y29UDgvUDa','r3zmthq','AwfTrNm','wenhAwm','mte4nZaWmJbUvgrUr1O','Dg9tDhjPBMC','qKLXwxK','E0bNzxr3B3jSza','veDoEvi','v0TjzK8','AMjouKK','uefmug0','zNLUuM8','CefQAwK','Dgv4Da','DwXrr2u','t3bUq2W','DhLWzq','B2Hbs2y','yNHuqK4','u0TvtKW','zuv1zum','zNfKugq','tgvLzfi','B2zPBgu','mZy2mZjbChjdD1y','sfzhvgK','CM9Szq','qvbIC3G','E0bNzxrNBg9Iyq','DhjPz2DLCG','C3bSAxq','mZm3mMnoB0zvsG','DhjPz2DLCK1Vza','BgXTx3jLCxvLCW','v1P1u20','ywrK','y29UDgv4DerHDa','uuXbrLK','Aw5JBhvKzxm','mZq2mdyXnevQugLWDW','mti0mtaWodjnug55swS','ALzMA1y','ufP4Dee','DNDcELe','CMLHyMXLCW','CwPxyKG','BgvUz3rO','rwH5uwu','ALDnseq','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','zMLSDgvY','qvDIB0q','AxnbCNjHEq','Bu5ZvKW','CMvWBgfJzq','DgvZDf9JB250zq','BfzRBgG','E0bNzxr2yxi6oG','mta3mdvnquHLvKG','mZz5qwPiA0O','Bwn2thK','tMXKC0y','E3VKUiRKUiVMLOD9Fq','y1jZAe8','AMDwANq','EMTcB20','zu9Xrfy','y29UDgv4Df9WCG','vvHKzuW','zenMwLC','kcGOlISPkYKRkq','wuHkyLK','E3VNLkJMIlFPNidMSyj9Fq','se1ZBNO','DhjPBq','rM9oAxq','A2v5CW','s0zctKe','DwfOt3G','y0XbA2y','qwDYrMS','qM1pCvO','ChnIvwu','C3rYAw5NAwz5','wgTHBLm','BK9bvxC','B2jQzwn0','nefiDMLxBq','Auvxsfe','v3PqqNO','AM9PBG','DufXq1m','y0DrBwu','y2HHDe1LDgfKyq','Ae9LuxG','B2TLC1O','rvLVC0m','D21ky20','BwDfAvO','y29UC3rYDwn0BW','AfzlBe8','DxnLCG','A0zvBKq','AgLZDg9YEq','BwvZC2fNzxm','t1zsrwG','CNbrEKy','phvZzxi+','C3nMt1m','wNLSBMy','DhjPz2DLCLDVCG','qKPAz0e','suvxyLu','zw50CMLLCW','nfbssuj1sG','E0bZzxrNBg9Iyq','DMfYoJO','Cuvtt00','yxnZAxn0yw50','D1jRuvm','tMXtsLC','wePgtxG','shHXB1K','odeYndG0AxzrqKXQ','t2HjCMu','DMfYAwfIBgvZ','thvlrNa','DeDdB3G','sfDuDeK','mZC4nZC5nu14tgfTEG','B1zSr1G','uLzWENe','q0nXuMi','uNvJB1e','se5er1C','s2LSCfK','B0rjB1q','uLPrsxu','E0bZzxr2yxi6oG','ref3t2i','EhrFChjVzMLSzq','mtmZn2vPqLzrua','C3DmDu0','DLHpz0e','t1HVvu4','yLzIqMC','qunswK4','C3rYAw5N','CMvWBgfJzufSBa','DvHHEKu','te1XqwK','rfH6Ewm','BwfW','v3rRyKK','vLvJvhy','s05wA1i','BhzHCJO6','ChvZAa','tw5OEfu','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','E3VMRApMLOD9Fq','C2vHCMnO','tw5suhu','yxbWBhK','BMfTzte','DxDHyKW','t3HHs2q'];_0x4f36=function(){return _0x95a2c3;};return _0x4f36();}import{getContext}from'../../../../st-context.js';import{getglobalvar,setglobalvar}from'./chatDataUtils.js';import{getworldvar}from'./worldbookProcessor.js';export function checkTriggerWords(_0x479607,_0x9a62d7){function _0x21a487(_0x27c01d,_0xe85086,_0x7351b1,_0x4d8858){return _0x813e(_0x27c01d- -0x2d1,_0x7351b1);}function _0x7df058(_0x4aeec9,_0x3a53e7,_0x145f0d,_0xa2d89c){return _0x813e(_0x4aeec9-0x72,_0xa2d89c);}const _0x2a62bc={};_0x2a62bc[_0x7df058(0x1db,0x1a0,0x200,0x1e9)]=_0x7df058(0x204,0x238,0x1cc,0x248),_0x2a62bc[_0x21a487(-0x16a,-0x1af,-0x14d,-0x14d)]=function(_0x1e5b60,_0x3aa561){return _0x1e5b60===_0x3aa561;};const _0x5f4aa3=_0x2a62bc;if(!_0x479607||!_0x9a62d7){if(_0x5f4aa3[_0x7df058(0x1db,0x22f,0x1af,0x1f4)]!=='rzSYs')return![];else{if(_0x2a72bf){const _0x59dece=_0x1768f2[_0x7df058(0x22f,0x223,0x26a,0x1ed)](_0x4a093e,arguments);return _0x22b89f=null,_0x59dece;}}}const _0x288e90=_0x479607[_0x21a487(-0xec,-0xe9,-0xe2,-0x113)](',')[_0x21a487(-0x11f,-0x146,-0xe5,-0x121)](_0x2cb1ba=>_0x2cb1ba['trim']())[_0x7df058(0x26b,0x29b,0x253,0x228)](_0x4e8cec=>_0x4e8cec);if(_0x5f4aa3[_0x21a487(-0x16a,-0x131,-0x180,-0x15b)](_0x288e90['length'],0xe*-0x196+-0xe48+0x4*0x91f))return![];for(const _0x3f39a9 of _0x288e90){if(_0x9a62d7[_0x7df058(0x25f,0x2a2,0x221,0x236)](_0x3f39a9))return!![];}return![];}export function mergeAdjacentMessages(_0x125fea){const _0x32af62={'siyPm':function(_0x13bbd2,_0x17842b,_0x180306){return _0x13bbd2(_0x17842b,_0x180306);},'nOAUw':function(_0x11d26f,_0x1236c8){return _0x11d26f===_0x1236c8;},'sqOwz':_0x31e03a(0xd1,0xae,0xfb,0xe2),'pJExp':_0x31e03a(0x71,0x6d,0xbf,0x5a),'GvLLt':function(_0x265829,_0x1f2714,_0x178aea){return _0x265829(_0x1f2714,_0x178aea);},'cQTWQ':'VEFRH','UXdeL':'QXJtc','bVbBg':function(_0x5800ae,_0x236897){return _0x5800ae!==_0x236897;},'jbNRI':'GMBbi','RZQIu':_0x463a34(0x7e,0x86,0x91,0xc1)};function _0x463a34(_0x142387,_0x270b3c,_0x5d3dd9,_0x5d0926){return _0x813e(_0x142387- -0x17e,_0x270b3c);}function _0x31e03a(_0x4ec0cd,_0x5b1dd6,_0x1e1df8,_0x333639){return _0x813e(_0x4ec0cd- -0x109,_0x333639);}if(!_0x125fea||_0x32af62['nOAUw'](_0x125fea[_0x463a34(0x77,0x66,0x77,0xa8)],0x64e*0x2+0x1c*0x79+-0x676*0x4))return[];const _0x2f3abf=[];let _0x116d8f=null;for(const _0x186263 of _0x125fea){if(!_0x116d8f){if(_0x32af62['sqOwz']!==_0x32af62[_0x463a34(0x46,0x65,0x7f,-0xd)]){const _0x12ae6a={..._0x186263};_0x116d8f=_0x12ae6a;}else _0x9409ab['add'](_0x463a34(0x26,-0x15,0x61,0x74)+_0x180025+'@}');}else{if(_0x116d8f[_0x31e03a(0xd8,0x126,0xde,0xf5)]===_0x186263[_0x31e03a(0xd8,0xe4,0xe6,0x10d)])_0x116d8f[_0x463a34(0x48,0x28,0x10,0x58)]=_0x32af62[_0x31e03a(0xbe,0xfc,0xb8,0x112)](mergeContent,_0x116d8f[_0x31e03a(0xbd,0x70,0xa1,0x79)],_0x186263['content']);else{if(_0x32af62[_0x31e03a(0x66,0x86,0x76,0x6d)](_0x32af62['cQTWQ'],_0x32af62[_0x463a34(-0x20,-0x74,-0xf,-0x65)]))_0x14d54b[_0x31e03a(0xbd,0x97,0xad,0x73)]=_0x32af62['siyPm'](_0x22980f,_0x3fcc0e[_0x463a34(0x48,-0xd,0x1d,0x94)],_0x242492['content']);else{_0x2f3abf[_0x463a34(0x39,0x87,0x6,0x34)](_0x116d8f);const _0xe65222={..._0x186263};_0x116d8f=_0xe65222;}}}}if(_0x116d8f){if(_0x32af62[_0x463a34(0x2d,0x19,0x44,0x22)](_0x32af62[_0x463a34(0x52,0x22,0x94,0x76)],_0x32af62[_0x463a34(0x25,0x55,0x9,0x6)]))_0x2f3abf[_0x463a34(0x39,0x50,0x25,0x41)](_0x116d8f);else{if(!_0x4fd330||!_0x2f6d40[_0x31e03a(0xbd,0x99,0xa5,0xbe)])return _0x586c1d;return{..._0x2e5dfa,'content':_0x3d73e7(_0x20c0f0[_0x463a34(0x48,0x23,0x2e,0x4b)],_0x28b557,_0x17b66d)};}}return _0x2f3abf;}function mergeContent(_0xbbf175,_0x165180){function _0x37ddf2(_0x2601e3,_0x4953a4,_0x25ffa2,_0x4e71e5){return _0x813e(_0x4e71e5-0x29c,_0x2601e3);}const _0x482517={'HNDGW':function(_0xeb50cb,_0x859329){return _0xeb50cb===_0x859329;},'RVpzq':_0x509713(0x305,0x2b7,0x2f2,0x2bf),'uwabL':function(_0x556683,_0x54c015){return _0x556683+_0x54c015;},'WZuSm':function(_0x1fd36d,_0x36d14f){return _0x1fd36d(_0x36d14f);},'ssfOS':function(_0x5726a4,_0x59ea50){return _0x5726a4(_0x59ea50);},'HxqoY':_0x37ddf2(0x429,0x42a,0x45f,0x470)};if(_0x482517['HNDGW'](typeof _0xbbf175,_0x482517[_0x509713(0x2f5,0x32c,0x338,0x2dc)])&&_0x482517[_0x509713(0x2f8,0x2a7,0x2da,0x2f1)](typeof _0x165180,_0x482517[_0x37ddf2(0x40b,0x3ee,0x476,0x439)]))return _0x482517[_0x37ddf2(0x491,0x468,0x442,0x45b)](_0xbbf175+'\x0a',_0x165180);const _0x1233e9=_0x482517[_0x37ddf2(0x484,0x443,0x4c8,0x485)](normalizeToArray,_0xbbf175),_0x4021e9=_0x482517[_0x37ddf2(0x3e8,0x3f1,0x40b,0x422)](normalizeToArray,_0x165180);function _0x509713(_0x576719,_0x44c140,_0x4dbe50,_0x40a954){return _0x813e(_0x576719-0x158,_0x44c140);}const _0x432721={};return _0x432721[_0x509713(0x32f,0x346,0x308,0x319)]=_0x482517[_0x509713(0x2ec,0x2ea,0x309,0x32c)],_0x432721['text']='\x0a',[..._0x1233e9,_0x432721,..._0x4021e9];}function normalizeToArray(_0x28af7c){const _0x353f0d={};_0x353f0d[_0x21d2ba(-0x68,-0x78,-0x37,-0x1b)]=_0x21d2ba(0x55,-0x4e,0x3,-0x4e);function _0x30cc4c(_0x2fd3bb,_0x498b2a,_0x386844,_0x2f59b6){return _0x813e(_0x498b2a-0x13c,_0x386844);}function _0x21d2ba(_0x3d4b79,_0x437d87,_0x57f911,_0x1a34c6){return _0x813e(_0x57f911- -0x1d1,_0x1a34c6);}_0x353f0d[_0x21d2ba(-0x38,-0x21,0x1b,-0xc)]=function(_0x3c2cc5,_0x112c49){return _0x3c2cc5||_0x112c49;};const _0x7a1335=_0x353f0d;if(Array[_0x21d2ba(0x76,0xc,0x2a,0x44)](_0x28af7c))return _0x28af7c;return[{'type':_0x7a1335[_0x21d2ba(-0x70,0x1b,-0x37,-0x73)],'text':_0x7a1335[_0x21d2ba(0x6b,0x52,0x1b,-0x34)](_0x28af7c,'')}];}export function replacePlaceholder(_0x23218b,_0x2c1ef8,_0x1b5a2e,_0x227a18){const _0x5bba64={'JkuIk':function(_0x339c05,_0xe3b249){return _0x339c05===_0xe3b249;},'PZxtA':function(_0x5454fd,_0x136b15){return _0x5454fd!==_0x136b15;},'uIaGU':_0x10beaa(-0x39,-0x88,-0x7e,-0xc5),'ACRZN':function(_0x51a2ce,_0x1125b8){return _0x51a2ce||_0x1125b8;},'OpnCl':_0x10beaa(-0x53,-0x97,-0x4d,-0x47),'okesZ':function(_0x3c5a3c,_0x595881,_0x2edc23,_0x17d7fb,_0x194df6){return _0x3c5a3c(_0x595881,_0x2edc23,_0x17d7fb,_0x194df6);}};if(_0x5bba64['JkuIk'](typeof _0x23218b,_0x10beaa(-0x34,-0x86,-0x6f,-0x2f))){if(_0x5bba64[_0x524828(0x386,0x3b8,0x3c8,0x40e)](_0x5bba64['uIaGU'],_0x524828(0x369,0x335,0x375,0x343)))_0xbb56ca[_0x524828(0x3d0,0x35b,0x38e,0x3bd)](_0x126232);else return _0x1b5a2e&&_0x23218b['includes'](_0x2c1ef8)&&(_0x227a18&&_0x227a18[_0x524828(0x3f6,0x3ac,0x3c1,0x3fd)](_0x2c1ef8)),_0x23218b['replaceAll'](_0x2c1ef8,_0x5bba64[_0x524828(0x334,0x349,0x383,0x352)](_0x1b5a2e,''));}if(Array[_0x524828(0x3e3,0x423,0x3d2,0x418)](_0x23218b))return _0x23218b[_0x10beaa(-0x63,-0x2b,-0x6a,-0x2a)](_0x5de65b=>replacePlaceholder(_0x5de65b,_0x2c1ef8,_0x1b5a2e,_0x227a18));function _0x524828(_0x8ca998,_0x2b6c0d,_0x1c8349,_0x4eff3d){return _0x813e(_0x1c8349-0x1d7,_0x8ca998);}function _0x10beaa(_0xece5c5,_0x2eb6af,_0x52673a,_0x168a86){return _0x813e(_0x52673a- -0x21c,_0x168a86);}if(_0x23218b&&_0x5bba64[_0x524828(0x39f,0x3b3,0x399,0x3a1)](typeof _0x23218b,_0x10beaa(-0x99,-0xf0,-0xac,-0x70))){const _0x28491f={};for(const _0x58605e in _0x23218b){if(_0x5bba64[_0x524828(0x385,0x3ee,0x3ad,0x3b8)]==='WKIfO')_0x28491f[_0x58605e]=_0x5bba64[_0x524828(0x301,0x37d,0x350,0x379)](replacePlaceholder,_0x23218b[_0x58605e],_0x2c1ef8,_0x1b5a2e,_0x227a18);else return[];}return _0x28491f;}return _0x23218b;}export function replaceAllPlaceholders(_0x32a8d9,_0x4eb8f2){const _0x4f642a={'qESOM':_0x1ca324(0x43f,0x421,0x434,0x3ff),'EhyQe':_0x1ca324(0x460,0x4d6,0x4bb,0x47f),'pAjii':function(_0x1b393c,_0xbea5d5,_0x36370e,_0x10ac44,_0x1717bc){return _0x1b393c(_0xbea5d5,_0x36370e,_0x10ac44,_0x1717bc);},'Zylnf':'{{世界书触发}}','kFUnD':function(_0x46c4c2,_0x180cf2,_0x4b45da,_0x589dc4,_0x14a0a0){return _0x46c4c2(_0x180cf2,_0x4b45da,_0x589dc4,_0x14a0a0);},'mcvLy':_0x1ca324(0x3e5,0x418,0x431,0x434),'BmOqZ':_0x50138b(-0x13b,-0xd1,-0xfe,-0x10f),'jgVjt':_0x50138b(-0x138,-0xe7,-0x13d,-0x17e)+'}}','BFZuW':_0x1ca324(0x44a,0x483,0x40b,0x43d)+'}}','psbUe':function(_0xb6a500,_0x542266,_0x2a64be,_0x5e90c7,_0x1e04cb){return _0xb6a500(_0x542266,_0x2a64be,_0x5e90c7,_0x1e04cb);},'RRRAN':function(_0x18c458,_0x4debc1){return _0x18c458>_0x4debc1;},'uahOx':'RyyWR','CTvnV':function(_0x26c9ac,_0x36efda){return _0x26c9ac!==_0x36efda;},'jhfsd':_0x1ca324(0x418,0x42e,0x487,0x452),'BIqYy':function(_0x1eacf6,_0x2b7135,_0x30b3ab,_0x8b3738,_0x4325b1){return _0x1eacf6(_0x2b7135,_0x30b3ab,_0x8b3738,_0x4325b1);},'VUcTv':function(_0x2af265,_0x3afcf9,_0x302cb8){return _0x2af265(_0x3afcf9,_0x302cb8);}},{context:context='',body:body='',worldBookContent:worldBookContent='',variables:variables={},userDemand:userDemand='',characterListText:characterListText='',outfitEnableListText:outfitEnableListText='',commonCharacterListText:commonCharacterListText=''}=_0x4eb8f2,_0x89dcb3=new Set();let _0x364ac2=_0x32a8d9;const _0x3549cd=getContext(),_0x35e45b=_0x3549cd?.[_0x1ca324(0x485,0x3f7,0x441,0x438)]||'';function _0x50138b(_0x598a15,_0x8ac7f0,_0x4e6629,_0x56a00e){return _0x813e(_0x4e6629- -0x2f6,_0x598a15);}let _0x72fe9a=worldBookContent;_0x72fe9a&&(_0x72fe9a=_0x72fe9a[_0x1ca324(0x3ef,0x457,0x474,0x428)]('{{user}}',_0x35e45b),_0x72fe9a=_0x72fe9a[_0x1ca324(0x42a,0x445,0x3e0,0x428)](_0x4f642a[_0x1ca324(0x443,0x447,0x431,0x409)],_0x35e45b));_0x364ac2=replacePlaceholder(_0x364ac2,_0x4f642a[_0x1ca324(0x478,0x4b6,0x427,0x470)],context,_0x89dcb3),_0x364ac2=_0x4f642a[_0x50138b(-0xe0,-0x135,-0x123,-0x146)](replacePlaceholder,_0x364ac2,_0x4f642a[_0x1ca324(0x402,0x41b,0x427,0x401)],_0x72fe9a,_0x89dcb3),_0x364ac2=_0x4f642a[_0x50138b(-0x187,-0x1b5,-0x176,-0x1b7)](replacePlaceholder,_0x364ac2,_0x4f642a[_0x1ca324(0x445,0x456,0x48b,0x47d)],body,_0x89dcb3),_0x364ac2=_0x4f642a[_0x1ca324(0x409,0x3f9,0x443,0x44d)](replacePlaceholder,_0x364ac2,_0x4f642a[_0x1ca324(0x437,0x415,0x3aa,0x3e5)],characterListText,_0x89dcb3),_0x364ac2=_0x4f642a[_0x1ca324(0x410,0x446,0x463,0x44d)](replacePlaceholder,_0x364ac2,_0x4f642a[_0x1ca324(0x470,0x433,0x460,0x481)],outfitEnableListText,_0x89dcb3),_0x364ac2=_0x4f642a[_0x1ca324(0x3ad,0x446,0x449,0x3fa)](replacePlaceholder,_0x364ac2,_0x4f642a['BFZuW'],commonCharacterListText,_0x89dcb3),_0x364ac2=_0x4f642a[_0x50138b(-0x1ac,-0x147,-0x18a,-0x1a7)](replacePlaceholder,_0x364ac2,_0x1ca324(0x3fd,0x3e6,0x3eb,0x3dc),userDemand,_0x89dcb3);if(variables&&_0x4f642a['RRRAN'](Object['keys'](variables)[_0x1ca324(0x46b,0x44b,0x4b1,0x46f)],0x1763+0x102e+-0x5a7*0x7)){const _0x11da80=/\{\{getvar::([^}]+)\}\}/g,_0x40675e=JSON[_0x1ca324(0x419,0x415,0x41c,0x3e7)](_0x364ac2),_0x3d152d=[..._0x40675e['matchAll'](_0x11da80)],_0x218de4=new Set();for(const _0x3329aa of _0x3d152d){if(_0x4f642a[_0x50138b(-0x1d9,-0x1cb,-0x18e,-0x137)]===_0x4f642a[_0x50138b(-0x14d,-0x17e,-0x18e,-0x173)])_0x218de4[_0x1ca324(0x4b2,0x418,0x41b,0x464)](_0x3329aa[0x1*0x1cd5+0xc7d+-0x1*0x2951]);else{if(_0x4264fc[_0x1ca324(0x4a2,0x4b4,0x41f,0x467)](_0x4cf786))return!![];}}for(const _0x108385 of _0x218de4){if(_0x4f642a['CTvnV'](_0x4f642a['jhfsd'],_0x4f642a[_0x50138b(-0x11f,-0x128,-0x135,-0x151)])){const _0xb5d820=_0xda3b50?function(){if(_0x176143){const _0x703f23=_0xe36ae2['apply'](_0x3737ee,arguments);return _0xa065a7=null,_0x703f23;}}:function(){};return _0x438a40=![],_0xb5d820;}else{const _0xd43399='{{getvar::'+_0x108385+'}}',_0xbc834e=variables[_0x108385]||'';_0x364ac2=_0x4f642a[_0x1ca324(0x46f,0x43e,0x477,0x446)](replacePlaceholder,_0x364ac2,_0xd43399,_0xbc834e,_0x89dcb3);}}}function _0x1ca324(_0x9e8675,_0x584bd3,_0xebc8c6,_0x3b765c){return _0x813e(_0x3b765c-0x27a,_0x9e8675);}_0x364ac2=_0x4f642a[_0x1ca324(0x44d,0x41b,0x3e5,0x42e)](processVariablePlaceholdersInMessages,_0x364ac2,_0x89dcb3);const _0x3a1866={};return _0x3a1866[_0x50138b(-0x15f,-0x13f,-0x174,-0x181)]=_0x364ac2,_0x3a1866['replacedVa'+_0x50138b(-0xe1,-0x118,-0x103,-0xb4)]=_0x89dcb3,_0x3a1866;}function _0x813e(_0x6ac455,_0x5c78c7){_0x6ac455=_0x6ac455-(-0x8a5*-0x1+0x3a*-0xa+-0x504);const _0x42eba6=_0x4f36();let _0x5c2276=_0x42eba6[_0x6ac455];if(_0x813e['jfKavC']===undefined){var _0x331fd9=function(_0x3d279d){const _0x138e47='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x46487c='',_0x19090b='',_0x4a1188=_0x46487c+_0x331fd9;for(let _0x2a9edd=0x1*0x14c+0x221*-0x3+0x517,_0x2db715,_0x1e8b6b,_0x4214dc=0x28c*0xc+0x1f71+-0x3e01;_0x1e8b6b=_0x3d279d['charAt'](_0x4214dc++);~_0x1e8b6b&&(_0x2db715=_0x2a9edd%(0x169d+-0x24f5+-0x397*-0x4)?_0x2db715*(-0x231a+0x1b5d+-0x7fd*-0x1)+_0x1e8b6b:_0x1e8b6b,_0x2a9edd++%(0x228c+-0xc39+-0x1*0x164f))?_0x46487c+=_0x4a1188['charCodeAt'](_0x4214dc+(-0x1*0x24e6+0xbd9+-0x1917*-0x1))-(-0x2329+0x2429*0x1+-0xf6)!==0x1d98+0x3f*0x63+-0x35f5?String['fromCharCode'](-0xa73*0x2+-0x425*0x2+-0x1e2f*-0x1&_0x2db715>>(-(-0x20f4+0x67*-0x35+-0x3649*-0x1)*_0x2a9edd&-0x22f4+-0x10a7+0x33a1)):_0x2a9edd:0xc30+-0x366+-0x465*0x2){_0x1e8b6b=_0x138e47['indexOf'](_0x1e8b6b);}for(let _0x45b4a1=-0x23e9+0xec4+0x1525,_0x2f4cb1=_0x46487c['length'];_0x45b4a1<_0x2f4cb1;_0x45b4a1++){_0x19090b+='%'+('00'+_0x46487c['charCodeAt'](_0x45b4a1)['toString'](-0x2480+-0x16de+0x3b6e))['slice'](-(0x48c+0x92*-0x3f+0x1f64));}return decodeURIComponent(_0x19090b);};_0x813e['iPAUQI']=_0x331fd9,_0x813e['qmeJsS']={},_0x813e['jfKavC']=!![];}const _0x119e2e=_0x42eba6[-0x249a+0x24a4+-0xa],_0x371eb8=_0x6ac455+_0x119e2e,_0xc1d479=_0x813e['qmeJsS'][_0x371eb8];if(!_0xc1d479){const _0x551559=function(_0x4ade3b){this['zgOQJQ']=_0x4ade3b,this['RRMRnS']=[0x2034+-0x1*0x1601+0x519*-0x2,0x1*0x175b+-0x52f*-0x1+-0x1c8a,-0x4fa+-0x1d7b+-0x1*-0x2275],this['iVEtdm']=function(){return'newState';},this['lANFjF']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['cgNcHp']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x551559['prototype']['tmtVZW']=function(){const _0x3d1dac=new RegExp(this['lANFjF']+this['cgNcHp']),_0x224a05=_0x3d1dac['test'](this['iVEtdm']['toString']())?--this['RRMRnS'][0x1ff0+0x11be+-0x51*0x9d]:--this['RRMRnS'][0x597+-0x1*-0x257c+-0x2b13];return this['hGYGgN'](_0x224a05);},_0x551559['prototype']['hGYGgN']=function(_0x4f6756){if(!Boolean(~_0x4f6756))return _0x4f6756;return this['gzXwWT'](this['zgOQJQ']);},_0x551559['prototype']['gzXwWT']=function(_0x29baa1){for(let _0x2cd99f=-0x1889+0x1*-0x1b1a+0x33a3,_0x5362e7=this['RRMRnS']['length'];_0x2cd99f<_0x5362e7;_0x2cd99f++){this['RRMRnS']['push'](Math['round'](Math['random']())),_0x5362e7=this['RRMRnS']['length'];}return _0x29baa1(this['RRMRnS'][0x3f*0x7f+-0x1e4d*-0x1+-0x1*0x3d8e]);},new _0x551559(_0x813e)['tmtVZW'](),_0x5c2276=_0x813e['iPAUQI'](_0x5c2276),_0x813e['qmeJsS'][_0x371eb8]=_0x5c2276;}else _0x5c2276=_0xc1d479;return _0x5c2276;}function processVariablePlaceholdersInMessages(_0x123745,_0x4a8261){const _0x4f2e1f={'oVlGX':function(_0x3f401e,_0x1f78f4){return _0x3f401e(_0x1f78f4);},'XJFMx':function(_0x56d9e4,_0x3f6e16){return _0x56d9e4===_0x3f6e16;},'cRshO':_0x3769cb(0x317,0x356,0x327,0x31d),'FoNit':'Eeazv','CrMvb':function(_0x22a458,_0x2ebdc9,_0x1a133e,_0x2eb9f4){return _0x22a458(_0x2ebdc9,_0x1a133e,_0x2eb9f4);},'OVREh':function(_0x2d4965){return _0x2d4965();},'OxaKd':_0x55d70d(0x325,0x365,0x368,0x349),'DAwOb':'ZVSki','vXCAv':_0x3769cb(0x308,0x2e4,0x2a9,0x32d),'uEUHM':'LQcMN'};function _0x3769cb(_0x1f25a2,_0x30c6f7,_0x4acc33,_0x515914){return _0x813e(_0x30c6f7-0x166,_0x515914);}if(!_0x123745||_0x4f2e1f[_0x55d70d(0x2de,0x327,0x326,0x377)](_0x123745[_0x3769cb(0x38d,0x35b,0x318,0x3ac)],0x1f3d*0x1+0x9e5+-0x2922))return _0x123745;const _0x158e99=_0x4f2e1f[_0x3769cb(0x2b3,0x2e9,0x2e9,0x2f4)](getContext);if(!_0x158e99[_0x3769cb(0x2d2,0x2dd,0x2e2,0x311)+'ta']){if(_0x4f2e1f[_0x55d70d(0x3a4,0x354,0x32d,0x35e)]===_0x4f2e1f[_0x55d70d(0x377,0x339,0x358,0x332)]){const _0x4e3b01={};_0x4e3b01['role']=_0x3769cb(0x339,0x2f6,0x2f9,0x328),_0x4e3b01[_0x55d70d(0x33e,0x35a,0x3a8,0x335)]=_0x2f2643['assistant'],_0x3dad31[_0x55d70d(0x328,0x34b,0x369,0x377)](_0x4e3b01);}else _0x158e99[_0x55d70d(0x30e,0x30b,0x33b,0x339)+'ta']={};}if(!_0x158e99[_0x3769cb(0x2f1,0x2dd,0x324,0x301)+'ta']['variables']){if(_0x4f2e1f['vXCAv']!==_0x4f2e1f['uEUHM'])_0x158e99[_0x55d70d(0x35e,0x30b,0x358,0x35a)+'ta'][_0x55d70d(0x348,0x32b,0x35f,0x347)]={};else{const _0x3ee8dd=_0x4473da['trim'](),_0x4509b2=_0x4f2e1f[_0x55d70d(0x302,0x330,0x30d,0x327)](_0x41df5f,_0x3ee8dd)||'';return _0x44fa8d&&_0x15ca66[_0x3769cb(0x34d,0x350,0x30b,0x37b)](_0x55d70d(0x320,0x361,0x35d,0x368)+_0x55d70d(0x365,0x322,0x309,0x310)+_0x3ee8dd+'@}'),_0x4509b2;}}function _0x55d70d(_0x36644f,_0x28149e,_0x574320,_0x56241c){return _0x813e(_0x28149e-0x194,_0x36644f);}return _0x123745['map'](_0xaa15ec=>{function _0xdc7f86(_0x4f34bc,_0x3c04fc,_0x4cf216,_0x2dea33){return _0x3769cb(_0x4f34bc-0x92,_0x2dea33- -0x40,_0x4cf216-0x122,_0x4cf216);}function _0x2bbe4e(_0x5b6ae0,_0x267e89,_0x394023,_0x4542b6){return _0x55d70d(_0x394023,_0x5b6ae0- -0x3c0,_0x394023-0x180,_0x4542b6-0x1b1);}if(_0x4f2e1f[_0xdc7f86(0x2bd,0x299,0x2df,0x2b9)](_0x4f2e1f[_0xdc7f86(0x367,0x32a,0x350,0x32c)],_0x4f2e1f[_0xdc7f86(0x247,0x270,0x298,0x28b)]))_0x1e88ab['add'](_0x3fbc09);else{if(!_0xaa15ec||!_0xaa15ec[_0x2bbe4e(-0x66,-0x4e,-0x4b,-0xac)])return _0xaa15ec;return{..._0xaa15ec,'content':_0x4f2e1f['CrMvb'](processContentVariables,_0xaa15ec[_0x2bbe4e(-0x66,-0x48,-0x20,-0x84)],_0x158e99,_0x4a8261)};}});}function processContentVariables(_0x4eecbf,_0x2c42b3,_0x25005f){const _0x5e22ce={'HMsnz':function(_0x3342a5,_0x1a3392){return _0x3342a5!==_0x1a3392;},'tGCox':_0x4479ef(0x12c,0x1a7,0x191,0x160),'zkBom':_0x365f07(-0x10e,-0xe6,-0xdc,-0xda),'IFJEw':function(_0x5ed366,_0x36ed32,_0x4c337f,_0x17963c){return _0x5ed366(_0x36ed32,_0x4c337f,_0x17963c);},'LMqAi':function(_0x6b42b){return _0x6b42b();},'GkyTo':function(_0x48e728,_0x9c032e){return _0x48e728!==_0x9c032e;},'AgrFk':_0x365f07(-0xbe,-0x96,-0xa5,-0xb0),'LuKFp':_0x4479ef(0x1b9,0x178,0x197,0x199),'WzPBz':function(_0x51fab2,_0x5c9e1f){return _0x51fab2===_0x5c9e1f;},'vwBzQ':_0x4479ef(0x1d7,0x1b9,0x17e,0x1b5),'OXoUN':'string','RucoQ':function(_0x235948,_0x2ef9d6,_0x19f07e,_0x5eefda){return _0x235948(_0x2ef9d6,_0x19f07e,_0x5eefda);},'KNVkR':_0x4479ef(0x19d,0x14c,0x154,0x183),'XkanS':'fVpJK','uAqCS':function(_0x169ae4,_0xf25533,_0x493cd5,_0x4a07e6){return _0x169ae4(_0xf25533,_0x493cd5,_0x4a07e6);}};function _0x4479ef(_0x57add7,_0x521036,_0x55f212,_0xc68a7a){return _0x813e(_0xc68a7a- -0x1f,_0x55f212);}if(typeof _0x4eecbf===_0x5e22ce[_0x4479ef(0x18c,0x1a2,0x1c9,0x18b)]){if(_0x5e22ce[_0x4479ef(0x158,0x18f,0x182,0x196)]===_0x5e22ce[_0x365f07(-0x130,-0x151,-0xe9,-0xf1)])for(const _0x2da858 of _0x5f1cfa[_0x4479ef(0x16c,0x144,0x1b4,0x162)]){if(_0x2da858[_0x365f07(-0x11f,-0x175,-0x12d,-0x137)]&&_0x5e22ce[_0x365f07(-0x13b,-0xe4,-0x182,-0xeb)](_0x2da858[_0x4479ef(0x11e,0x127,0x115,0x160)]['trim'](),'')){const _0x5836ab={};_0x5836ab[_0x4479ef(0x1f9,0x199,0x1a4,0x1c2)]=_0x5e22ce[_0x365f07(-0x105,-0xdc,-0x112,-0x14f)],_0x5836ab['content']=_0x2da858[_0x365f07(-0x11f,-0x174,-0x114,-0xed)],_0x15432d[_0x4479ef(0x1b1,0x157,0x1cd,0x198)](_0x5836ab);}if(_0x2da858[_0x4479ef(0x16b,0x141,0x165,0x171)]&&_0x2da858[_0x365f07(-0x10e,-0xb9,-0xf6,-0xeb)][_0x4479ef(0x150,0x11e,0x138,0x145)]()!==''){const _0x3c09f3={};_0x3c09f3['role']=_0x5e22ce[_0x365f07(-0x96,-0x40,-0xdb,-0xe4)],_0x3c09f3[_0x4479ef(0x1a6,0x192,0x1e6,0x1a7)]=_0x2da858[_0x365f07(-0x10e,-0xf9,-0xfc,-0xe1)],_0x5917b6[_0x4479ef(0x149,0x1ca,0x162,0x198)](_0x3c09f3);}}else return _0x5e22ce[_0x4479ef(0x11d,0x1a1,0x13a,0x156)](processStringVariables,_0x4eecbf,_0x2c42b3,_0x25005f);}if(Array['isArray'](_0x4eecbf)){if(_0x5e22ce[_0x4479ef(0x189,0x131,0x10b,0x154)](_0x365f07(-0x13d,-0x17c,-0x15c,-0x15a),_0x4479ef(0x159,0x195,0x164,0x142)))return _0x4eecbf[_0x4479ef(0x170,0x1c6,0x186,0x193)](_0x57d402=>{function _0x963e75(_0xec844,_0x2b4d2d,_0x6825b1,_0xae4b78){return _0x4479ef(_0xec844-0x41,_0x2b4d2d-0x7c,_0xec844,_0xae4b78-0x105);}const _0x3f75e2={'uXazE':function(_0x4c40dc,_0xade92f,_0xa98044,_0x1a6451){function _0x5e8370(_0x5a96ae,_0x445aeb,_0x51b326,_0x7f92ed){return _0x813e(_0x7f92ed-0x4d,_0x445aeb);}return _0x5e22ce[_0x5e8370(0x1d8,0x250,0x23e,0x212)](_0x4c40dc,_0xade92f,_0xa98044,_0x1a6451);},'RopyU':function(_0x585c6e){function _0x189755(_0x49624f,_0x441b38,_0xcc7cec,_0x2ab3f9){return _0x813e(_0x441b38-0x7,_0x2ab3f9);}return _0x5e22ce[_0x189755(0x1fc,0x1b7,0x1a7,0x180)](_0x585c6e);}};function _0x408d5c(_0x5e36d7,_0x205721,_0x4cd82c,_0x222673){return _0x4479ef(_0x5e36d7-0x96,_0x205721-0x112,_0x205721,_0x222673-0x4a);}if(_0x5e22ce['GkyTo'](_0x5e22ce[_0x963e75(0x21e,0x297,0x262,0x250)],_0x5e22ce[_0x963e75(0x28d,0x2c9,0x259,0x27e)])){if(_0x57d402&&_0x5e22ce['WzPBz'](_0x57d402[_0x408d5c(0x1c1,0x1d5,0x1b1,0x202)],_0x5e22ce[_0x408d5c(0x217,0x243,0x1f8,0x21d)])&&_0x5e22ce[_0x963e75(0x267,0x275,0x28a,0x259)](typeof _0x57d402['text'],_0x5e22ce[_0x963e75(0x2d1,0x2a5,0x29e,0x290)]))return{..._0x57d402,'text':_0x5e22ce[_0x408d5c(0x1ad,0x185,0x1cc,0x1ca)](processStringVariables,_0x57d402[_0x408d5c(0x20f,0x236,0x20b,0x1ff)],_0x2c42b3,_0x25005f)};return _0x57d402;}else{const _0x6846d0={'dCfZW':function(_0x10306a,_0x3daf75,_0x30f639,_0x689644){function _0x392c0f(_0x29ad7a,_0x5498eb,_0x3723a1,_0x43f6fb){return _0x408d5c(_0x29ad7a-0x1e6,_0x43f6fb,_0x3723a1-0x1c4,_0x29ad7a- -0x23);}return _0x3f75e2[_0x392c0f(0x1b7,0x1e4,0x16c,0x165)](_0x10306a,_0x3daf75,_0x30f639,_0x689644);}};if(!_0x2860f4||_0x47d8a9[_0x963e75(0x2fc,0x31b,0x2fb,0x2db)]===0x19cd+0x1d49+-0x3716)return _0x16af09;const _0xca4ac7=_0x3f75e2['RopyU'](_0x43dae7);return!_0xca4ac7[_0x408d5c(0x197,0x19a,0x172,0x1a2)+'ta']&&(_0xca4ac7['chatMetada'+'ta']={}),!_0xca4ac7[_0x408d5c(0x160,0x1f2,0x153,0x1a2)+'ta'][_0x408d5c(0x1de,0x17b,0x16c,0x1c2)]&&(_0xca4ac7[_0x408d5c(0x18b,0x1b1,0x15b,0x1a2)+'ta']['variables']={}),_0x48420b[_0x963e75(0x24c,0x244,0x2d7,0x298)](_0x45935f=>{if(!_0x45935f||!_0x45935f[_0x9c5bf4(0x1ce,0x1ba,0x1dc,0x1d9)])return _0x45935f;function _0x9c5bf4(_0x2cc5ec,_0x1caf9c,_0x4ee7fc,_0x80b002){return _0x408d5c(_0x2cc5ec-0x3,_0x4ee7fc,_0x4ee7fc-0x1d9,_0x2cc5ec- -0x23);}function _0x2debf5(_0x359f6c,_0xef6f5a,_0x50ad04,_0x4a0835){return _0x963e75(_0x50ad04,_0xef6f5a-0x15d,_0x50ad04-0x1a6,_0x359f6c- -0xfa);}return{..._0x45935f,'content':_0x6846d0[_0x2debf5(0x14b,0x110,0x13f,0x126)](_0x9de58b,_0x45935f['content'],_0xca4ac7,_0x54ff37)};});}});else _0x473a87[_0x365f07(-0xb4,-0xd7,-0x69,-0x100)](_0x365f07(-0xd1,-0x11e,-0xd0,-0xcb)+_0x365f07(-0x110,-0x10e,-0x103,-0xba)+_0x31f8f4+'@}');}function _0x365f07(_0x6bb4cf,_0x47a9b3,_0x208ca7,_0x9a57d9){return _0x813e(_0x6bb4cf- -0x29e,_0x208ca7);}return _0x4eecbf;}function processStringVariables(_0x10349a,_0x14c79d,_0x5c288c){function _0x58ed60(_0x5d00a2,_0x50e2ea,_0x572080,_0x1658c1){return _0x813e(_0x50e2ea-0x2c7,_0x572080);}function _0x5e8d77(_0x5aa57d,_0x47759c,_0x45e864,_0x46c837){return _0x813e(_0x5aa57d-0xe,_0x46c837);}const _0xb81cec={'NldsF':function(_0x562866,_0x1d32c4){return _0x562866===_0x1d32c4;},'fqdPd':_0x58ed60(0x493,0x474,0x483,0x41f),'glMeT':function(_0x15bce2,_0x515aae){return _0x15bce2===_0x515aae;},'vXOgA':function(_0x391cdd,_0x350bb0){return _0x391cdd+_0x350bb0;},'iamFs':function(_0x3d1fec,_0x19441d){return _0x3d1fec(_0x19441d);},'KsquI':_0x5e8d77(0x1e2,0x1ed,0x18e,0x1c0),'qjWbH':function(_0x4a6935,_0x4ba5a2){return _0x4a6935===_0x4ba5a2;},'AWboD':'HslpB','gVlvl':'ShGlK','BJZgA':function(_0x3ee9fa,_0x166c87){return _0x3ee9fa!==_0x166c87;},'APbsx':function(_0x5458c0,_0x452a24){return _0x5458c0!==_0x452a24;},'TGNyR':_0x5e8d77(0x205,0x1be,0x1b2,0x254),'iEWHQ':function(_0x9f9497,_0x453ee8,_0x4bcf5b){return _0x9f9497(_0x453ee8,_0x4bcf5b);},'wmJcm':function(_0x2b8366,_0x2ffc65){return _0x2b8366(_0x2ffc65);},'bxTBN':_0x5e8d77(0x20d,0x24f,0x232,0x24d),'hOeQx':function(_0x15639f,_0x2be2a3){return _0x15639f||_0x2be2a3;},'rpQzF':function(_0x4c9ea9,_0x2285df){return _0x4c9ea9!==_0x2285df;},'ioDKJ':'skDqM'};if(!_0x10349a)return _0x10349a;let _0x52fd33=_0x10349a;return _0x52fd33=_0x52fd33[_0x58ed60(0x4c6,0x4c4,0x48f,0x4a6)](/\{@setvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x714f7d,_0x4a6b8a,_0x113d13)=>{function _0x2655c4(_0x54c312,_0x1e1ef3,_0xbabaa6,_0x534676){return _0x58ed60(_0x54c312-0x1ba,_0xbabaa6- -0x553,_0x54c312,_0x534676-0x159);}function _0x504137(_0x65e4bd,_0x4aed3f,_0x104a00,_0x1c7759){return _0x5e8d77(_0x65e4bd- -0x32d,_0x4aed3f-0x18e,_0x104a00-0xa5,_0x1c7759);}if(_0xb81cec[_0x2655c4(-0xe1,-0x7e,-0x98,-0x46)](_0xb81cec[_0x2655c4(-0x61,-0xc4,-0x92,-0x3f)],_0xb81cec['gVlvl'])){if(_0xb81cec[_0x2655c4(-0x9e,-0xc5,-0x88,-0xac)](typeof _0x1b53ab,_0xb81cec['fqdPd'])&&_0xb81cec['glMeT'](typeof _0x36835f,_0xb81cec[_0x2655c4(-0xf8,-0xe0,-0xb0,-0xa8)]))return _0xb81cec[_0x2655c4(-0x11b,-0xac,-0xe3,-0xaf)](_0xb81cec[_0x2655c4(-0xf2,-0xb4,-0xe3,-0x121)](_0xe9bdec,'\x0a'),_0x476a93);const _0x532101=_0xb81cec[_0x504137(-0x157,-0x112,-0x13d,-0x18f)](_0x57172b,_0x2a3518),_0x49711e=_0xb81cec[_0x2655c4(-0x11a,-0xf2,-0xc4,-0xe5)](_0x28e5b8,_0x11bdd9),_0x52909e={};return _0x52909e[_0x2655c4(-0xf2,-0xff,-0xb5,-0xca)]=_0xb81cec['KsquI'],_0x52909e['text']='\x0a',[..._0x532101,_0x52909e,..._0x49711e];}else{const _0x33558b=_0x4a6b8a[_0x2655c4(-0x17b,-0x11b,-0x128,-0x11e)]();_0x14c79d['chatMetada'+'ta']['variables'][_0x33558b]=_0x113d13;if(_0x5c288c){if(_0xb81cec[_0x504137(-0x196,-0x1c6,-0x152,-0x1d0)]('DXzyc',_0x504137(-0x16e,-0x16e,-0x147,-0x139)))return![];else _0x5c288c[_0x504137(-0x135,-0x129,-0x15b,-0x163)](_0x2655c4(-0x132,-0x109,-0xe8,-0xe4)+_0x33558b+'@}');}return'';}}),_0x52fd33=_0x52fd33[_0x5e8d77(0x20b,0x1d8,0x1b9,0x252)](/\{@getvar::([^@]+)@\}/g,(_0x1e6315,_0x40ee81)=>{function _0x55c4d5(_0x331a61,_0x1a1b00,_0x408829,_0x538bd3){return _0x58ed60(_0x331a61-0xd5,_0x1a1b00- -0x21e,_0x538bd3,_0x538bd3-0x20);}function _0x4d1d00(_0x497258,_0x5c4354,_0x2857d2,_0x17e30e){return _0x58ed60(_0x497258-0x37,_0x5c4354- -0x181,_0x2857d2,_0x17e30e-0x27);}if(_0xb81cec[_0x4d1d00(0x2e8,0x328,0x2f7,0x306)](_0xb81cec[_0x4d1d00(0x338,0x314,0x2cb,0x30e)],_0xb81cec['TGNyR'])){const _0x5842a0=_0x5cf16b['apply'](_0x1503aa,arguments);return _0x53cf59=null,_0x5842a0;}else{const _0x4f2d81=_0x40ee81['trim'](),_0x5e3b89=_0x14c79d[_0x55c4d5(0x263,0x220,0x220,0x21e)+'ta'][_0x55c4d5(0x21b,0x240,0x262,0x223)][_0x4f2d81]||'';return _0x5c288c&&_0x5c288c['add'](_0x4d1d00(0x324,0x346,0x381,0x2f0)+_0x4f2d81+'@}'),_0x5e3b89;}}),_0x52fd33=_0x52fd33[_0x58ed60(0x470,0x4c4,0x4de,0x4eb)](/\{@setglobalvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x5cf99f,_0x1ee7c1,_0x31091f)=>{function _0x1a54d8(_0x117589,_0x493424,_0x4552ee,_0x4a9b67){return _0x5e8d77(_0x4a9b67- -0x271,_0x493424-0xbc,_0x4552ee-0x1ab,_0x117589);}const _0x1691e6=_0x1ee7c1['trim']();_0xb81cec[_0x1d5b5e(-0x140,-0x15e,-0x16b,-0x168)](setglobalvar,_0x1691e6,_0x31091f);_0x5c288c&&_0x5c288c[_0x1a54d8(-0xcf,-0xbb,-0x71,-0x79)](_0x1d5b5e(-0x18d,-0xf8,-0x18a,-0x14d)+'lvar::'+_0x1691e6+'@}');function _0x1d5b5e(_0x3a4d5d,_0x332ee5,_0x578062,_0x49efa4){return _0x58ed60(_0x3a4d5d-0x131,_0x49efa4- -0x5a1,_0x332ee5,_0x49efa4-0x1b8);}return'';}),_0x52fd33=_0x52fd33[_0x5e8d77(0x20b,0x226,0x1d6,0x203)](/\{@getglobalvar::([^@]+)@\}/g,(_0x49d0ae,_0x437d4e)=>{function _0x4217e3(_0x4ede9d,_0x2eb88b,_0x2edd81,_0x14f6a6){return _0x5e8d77(_0x4ede9d-0x16e,_0x2eb88b-0x107,_0x2edd81-0x5e,_0x14f6a6);}const _0xd6c603=_0x437d4e[_0x3957bf(0x2ea,0x32b,0x2ef,0x33d)](),_0x3105ac=_0xb81cec[_0x3957bf(0x2eb,0x32f,0x306,0x35d)](getglobalvar,_0xd6c603)||'';function _0x3957bf(_0x4ec84a,_0x333615,_0x2b6cec,_0xb020ce){return _0x58ed60(_0x4ec84a-0x191,_0x2b6cec- -0x13c,_0x4ec84a,_0xb020ce-0x12e);}return _0x5c288c&&(_0xb81cec['glMeT'](_0xb81cec[_0x3957bf(0x357,0x33d,0x364,0x39c)],_0xb81cec[_0x4217e3(0x355,0x350,0x39b,0x38d)])?_0x5c288c['add'](_0x4217e3(0x35f,0x33d,0x354,0x34c)+_0x4217e3(0x332,0x306,0x374,0x369)+_0xd6c603+'@}'):_0x4d153e[_0x4217e3(0x2f3,0x2ca,0x2cf,0x319)+'ta']={}),_0x3105ac;}),_0x52fd33=_0x52fd33['replace'](/\{@getworldvar::([^@]+)@\}/g,(_0x48093d,_0x38e1b3)=>{function _0x5d2ac3(_0x2ae323,_0xeeaed,_0xacd9f5,_0x150cf0){return _0x5e8d77(_0xeeaed- -0x70,_0xeeaed-0x118,_0xacd9f5-0x1e0,_0xacd9f5);}function _0x360b8d(_0x427fb4,_0x426d68,_0x482ea5,_0x2ad00b){return _0x58ed60(_0x427fb4-0x1a,_0x2ad00b- -0x6c,_0x427fb4,_0x2ad00b-0x9f);}const _0x1cacd9={'OhIre':function(_0xbee7ba,_0x551db2){function _0x49f5b6(_0xd20643,_0x277de1,_0x206329,_0x17a018){return _0x813e(_0x277de1- -0x290,_0x206329);}return _0xb81cec[_0x49f5b6(-0x16c,-0x118,-0x161,-0xe4)](_0xbee7ba,_0x551db2);}};if(_0xb81cec[_0x360b8d(0x38e,0x3d7,0x393,0x3df)](_0xb81cec['ioDKJ'],_0x5d2ac3(0x15c,0x12f,0x17d,0x129))){const _0x18eea2=_0x38e1b3[_0x360b8d(0x3ed,0x3e1,0x3ca,0x3bf)](),_0x115afa=_0xb81cec[_0x360b8d(0x3af,0x3aa,0x3aa,0x3d6)](getworldvar,_0x18eea2)||'';return _0x5c288c&&_0x5c288c[_0x5d2ac3(0x187,0x188,0x18e,0x187)](_0x5d2ac3(0x14a,0x16b,0x166,0x19b)+_0x5d2ac3(0x151,0x12c,0x10c,0x14e)+_0x18eea2+'@}'),_0x115afa;}else return _0x1e8b6b&&_0x4214dc[_0x5d2ac3(0x18c,0x18b,0x165,0x193)](_0x45b4a1)&&(_0x29baa1&&_0x4c7831[_0x360b8d(0x45a,0x443,0x408,0x445)](_0x4088e0)),_0x3d1dac[_0x360b8d(0x3ed,0x435,0x412,0x409)](_0x224a05,_0x1cacd9[_0x360b8d(0x432,0x3e6,0x3fa,0x3f1)](_0x4f6756,''));}),_0x52fd33;}export function buildPromptWithTrigger(_0x100904){const _0xb7c7dd={'YRvQP':function(_0x36cb00,_0x3a8e38){return _0x36cb00+_0x3a8e38;},'BjXqf':function(_0x5368f9,_0x5c45e0){return _0x5368f9+_0x5c45e0;},'IEWbU':function(_0x547ed6,_0x34adc8){return _0x547ed6===_0x34adc8;},'LeedR':'GZcdB','MnRPu':_0x54ecf6(0x529,0x574,0x514,0x524),'swLuM':function(_0x7e0137,_0x2ac48c){return _0x7e0137!==_0x2ac48c;},'KilpY':'YyaqB','XCGic':function(_0x417ec5,_0x3fde30,_0x3631db){return _0x417ec5(_0x3fde30,_0x3631db);},'BEZPF':'mgEiZ','eEueC':_0x54ecf6(0x4c4,0x483,0x479,0x4f2),'MvWdC':_0x54ecf6(0x4d5,0x4a4,0x4f2,0x4bb),'fynRo':function(_0x2b71f2,_0x558745){return _0x2b71f2(_0x558745);}},{requestType:_0x3ee21f,contextData:_0x385411}=_0x100904,_0x495556=extension_settings[extensionName]?.[_0x5af3d5(-0x205,-0x1f6,-0x1c1,-0x1b5)+'t_type_con'+'figs']||{},_0x42df3d={};_0x42df3d['context_pr'+'ofile']='默认';const _0x461c56=_0x495556[_0x3ee21f]||_0x42df3d,_0x4c3b4e=_0x461c56[_0x5af3d5(-0x25e,-0x281,-0x26b,-0x292)+_0x54ecf6(0x523,0x56a,0x545,0x506)]||'默认',_0xc9804=extension_settings[extensionName]?.[_0x54ecf6(0x543,0x589,0x51d,0x528)+_0x54ecf6(0x4eb,0x4e9,0x4ac,0x501)+'s']||{},_0x193f29=_0xc9804[_0x4c3b4e]||_0xc9804[Object[_0x5af3d5(-0x229,-0x278,-0x25a,-0x230)](_0xc9804)[-0x2e6+0x2b5*0xb+0x1ae1*-0x1]]||{},{context:context='',body:body='',worldBookContent:worldBookContent='',userDemand:userDemand=''}=_0x385411;function _0x5af3d5(_0x59c2d4,_0x1b2cfa,_0x5912ab,_0x3db5f2){return _0x813e(_0x1b2cfa- -0x3de,_0x3db5f2);}const _0x120556=[userDemand,context,body,worldBookContent][_0x54ecf6(0x53e,0x4f8,0x513,0x57a)](Boolean)[_0x5af3d5(-0x239,-0x26a,-0x238,-0x275)]('\x0a'),_0x464b07=[];if(_0x193f29[_0x54ecf6(0x4d0,0x49f,0x4cb,0x48d)]&&Array[_0x54ecf6(0x540,0x500,0x51b,0x504)](_0x193f29[_0x54ecf6(0x4d0,0x4e7,0x505,0x4f5)]))for(const _0x25bd58 of _0x193f29[_0x5af3d5(-0x22b,-0x253,-0x20f,-0x298)]){if(_0xb7c7dd[_0x5af3d5(-0x2a4,-0x254,-0x21b,-0x24a)](_0xb7c7dd[_0x54ecf6(0x522,0x512,0x540,0x575)],_0xb7c7dd[_0x5af3d5(-0x250,-0x201,-0x204,-0x1d8)])){if(!_0x25bd58['enabled'])continue;if(!_0x25bd58[_0x5af3d5(-0x1d3,-0x218,-0x256,-0x1dd)]||_0xb7c7dd['IEWbU'](_0x25bd58[_0x54ecf6(0x50b,0x562,0x52c,0x4dc)][_0x54ecf6(0x4a9,0x4e2,0x4c1,0x4a4)](),''))continue;if(_0xb7c7dd['IEWbU'](_0x25bd58[_0x5af3d5(-0x1cd,-0x1f7,-0x216,-0x1a9)+'e'],_0xb7c7dd[_0x5af3d5(-0x1da,-0x222,-0x1e3,-0x21f)])){if(_0xb7c7dd[_0x5af3d5(-0x1f6,-0x236,-0x216,-0x1ef)](_0xb7c7dd[_0x54ecf6(0x4e6,0x4ad,0x490,0x503)],_0xb7c7dd['KilpY'])){_0x338f5c[_0x54ecf6(0x4fc,0x536,0x52b,0x520)](_0x31dcd6);const _0x3c257a={..._0x1838a7};_0x574fe3=_0x3c257a;}else{if(!_0xb7c7dd[_0x54ecf6(0x50e,0x531,0x4c3,0x4d8)](checkTriggerWords,_0x25bd58[_0x5af3d5(-0x26e,-0x256,-0x2a9,-0x2a9)+'ds'],_0x120556))continue;}}const _0x44219d={};_0x44219d[_0x5af3d5(-0x1fa,-0x1fd,-0x1aa,-0x1f3)]=_0x25bd58['role']||_0x5af3d5(-0x2a5,-0x25f,-0x294,-0x292),_0x44219d['content']=_0x25bd58[_0x54ecf6(0x50b,0x515,0x522,0x4f1)],_0x464b07[_0x5af3d5(-0x24d,-0x227,-0x1f3,-0x279)](_0x44219d);}else _0x101211&&_0x1602c9['add'](_0x5ded46);}else{if(_0x193f29[_0x54ecf6(0x4c6,0x50a,0x502,0x49f)]&&Array['isArray'](_0x193f29[_0x54ecf6(0x4c6,0x51c,0x50f,0x4b2)]))for(const _0x2e007d of _0x193f29[_0x54ecf6(0x4c6,0x4cb,0x4d9,0x4d9)]){if(_0x5af3d5(-0x221,-0x262,-0x27c,-0x270)!==_0xb7c7dd['BEZPF'])return _0xb7c7dd['YRvQP'](_0xb7c7dd['BjXqf'](_0x54ac61,'\x0a'),_0x408b94);else{if(_0x2e007d[_0x54ecf6(0x4c4,0x502,0x490,0x4f4)]&&_0xb7c7dd[_0x5af3d5(-0x1fc,-0x236,-0x200,-0x228)](_0x2e007d['user'][_0x5af3d5(-0x2b2,-0x27a,-0x231,-0x253)](),'')){const _0x7c3296={};_0x7c3296[_0x5af3d5(-0x1de,-0x1fd,-0x24e,-0x1c1)]=_0xb7c7dd[_0x5af3d5(-0x204,-0x203,-0x24c,-0x258)],_0x7c3296['content']=_0x2e007d['user'],_0x464b07[_0x5af3d5(-0x24b,-0x227,-0x218,-0x247)](_0x7c3296);}if(_0x2e007d['assistant']&&_0x2e007d[_0x54ecf6(0x4d5,0x50c,0x4a5,0x4cf)]['trim']()!==''){const _0x1e696d={};_0x1e696d['role']=_0xb7c7dd['MvWdC'],_0x1e696d[_0x54ecf6(0x50b,0x555,0x51f,0x525)]=_0x2e007d[_0x54ecf6(0x4d5,0x4f2,0x4f3,0x489)],_0x464b07[_0x5af3d5(-0x1dd,-0x227,-0x1d8,-0x1f5)](_0x1e696d);}}}}const _0x319da4=_0xb7c7dd[_0x54ecf6(0x517,0x4ec,0x525,0x4fd)](mergeAdjacentMessages,_0x464b07),{messages:_0x33328c,replacedVariables:_0xc6ee3d}=replaceAllPlaceholders(_0x319da4,_0x385411);function _0x54ecf6(_0x355282,_0x3cad10,_0x3c9040,_0x1f86ef){return _0x813e(_0x355282-0x345,_0x3c9040);}return _0x33328c;}export function getProcessedPrompt(_0x21f30a,_0x442337){const _0x30caaa={'WtkbI':function(_0x56577b,_0x197c1f){return _0x56577b(_0x197c1f);}},_0x2e9212={};function _0x34b8b7(_0x3369a6,_0x1eef8b,_0x2f05f1,_0xd44d4b){return _0x813e(_0x2f05f1- -0x318,_0x3369a6);}_0x2e9212['requestTyp'+'e']=_0x21f30a;function _0x443042(_0x51e4de,_0x24788d,_0x298d22,_0x1a9f4d){return _0x813e(_0x24788d-0x225,_0x1a9f4d);}return _0x2e9212[_0x34b8b7(-0x11a,-0xf4,-0x12d,-0x11a)+'a']=_0x442337,_0x30caaa[_0x34b8b7(-0x1af,-0x149,-0x165,-0x19c)](buildPromptWithTrigger,_0x2e9212);}