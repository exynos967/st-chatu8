function _0x587c(){const _0x1bd82b=['mwT4v2Trwa','reTZAM8','BgvUz3rO','yNrysNy','ChvZAa','t1nstMS','nJzsru9TrwW','ntGXntyWrenAq0fX','rgvXufy','AxnbCNjHEq','Dgv4Da','Dwz1ufy','rxrtvhu','AgLZDg9YEq','phvZzxi+','EMjgqw4','C29NCMy','Ahv6v0K','CM9Szq','qvzHtgG','C2vHCMnO','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','C3bSAxq','qLPWzMS','DhjPBq','ywrK','EuDjv1y','EKfZAhi','nte5mtLLvMLfuxa','se9fBfy','CefHq2O','y2vZC29YxsdMNOtLU7O','DuLzDfy','zMLNCW','kcGOlISPkYKRkq','sw9vqNa','zvHmzuu','AerTwK8','DhLWzq','DKPcA0O','CMvWBgfJzwrwyq','wgHIr1q','yLzHtvC','Bwf0y2HbBgW','og5zAvvZqq','qxPgzuW','BMryBfe','mty4mdm5Efnzt3n1','EhrFChjVzMLSzq','zw50CMLLCW','E3T1C2vYFx0','mtaWmteYswfoq09h','E3VKUiRKUiVMLOD9Fq','Dg9tDhjPBMC','ENPHz2u','C3rYAw5N','B1n4wgm','5A6m5OIqoG','C3rYAw5NAwz5','z09rAeS','y29UC3rYDwn0BW','BLrczfq','nJG0ntCZrgv6vufV','yxbWBhK','y29UDgv4Df9WCG','rwz6sMO','BwfW','AKrUAfa','thPZywq','vKXMBNG','r29ezMG','mtu2ndC1mgXTuMDXCG','qwHpBvK','CMLHyMXLCW','w3bYB21WDfbYBW','E3VKUjBNLyZKUABOP6BLJ5f9Fq','DxnLCG','wwXwr0e','y29UDgv4DerHDa','DhjPz2DLCK1Vza','CMvWBgfJzufSBa','yvnOwxy','BgXTx3jLCxvLCW','zw5HyMXLza','EKPPBNu','B2zPBgu','C0X1Bhe','shPWreO','B2XcugC','B1PsAhK','BMfTzte','A2v5CW','y29UDgvUDa','tND4wum','E3TNzxr2yxi6oG','zMLSDgvY','tK5Jv2u','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','BLDoELm','vgrus3u','rw9fz0q','DhjPz2DLCLDVCG','yxnZAxn0yw50','EfvLEvi','tuLnBui','mtC0odCYDNjky3HJ','CMvXDwvZDfr5Ca','BwvZC2fNzxm','E3VNLkJMIlFPNidMSyj9Fq','Bw1ACMy','C052Ahi','whfsAvm','D3r1wgK','CvvAywW','uLLUr1a','DxPgqKC','AuHhwKG','svL6Ahe','uwTKCMC','EvD5uwC','zwniv2y','Aurbz3C'];_0x587c=function(){return _0x1bd82b;};return _0x587c();}(function(_0x15d09d,_0x42af6b){const _0xcaf1d7=_0x15d09d();function _0x25a4a0(_0x3e2ae6,_0x94662f,_0x1ed664,_0x16f053){return _0x3935(_0x16f053- -0xdf,_0x3e2ae6);}function _0x1f1759(_0x45d092,_0x4765cb,_0x5f5908,_0x207b33){return _0x3935(_0x45d092-0x183,_0x4765cb);}while(!![]){try{const _0x46aa46=-parseInt(_0x25a4a0(-0x25,0x3d,0x39,0x3))/(-0x15fb+0x7d8+0xe24)*(-parseInt(_0x1f1759(0x254,0x224,0x226,0x267))/(0x2612+-0x2*0x1336+0x5c))+parseInt(_0x25a4a0(0x5f,0x65,0x12,0x41))/(-0x170f*0x1+-0x1a1e*0x1+0x3130)+parseInt(_0x25a4a0(-0x6,0x24,0x3c,0x36))/(0x1d*0xdd+-0x153a+0x1*-0x3cb)+-parseInt(_0x1f1759(0x26c,0x274,0x245,0x282))/(0x23*0x11a+-0x16cf+-0x53e*0x3)+-parseInt(_0x25a4a0(0x9,-0x4,-0xf,0x9))/(-0x14d9+-0x15dc+0x1*0x2abb)*(-parseInt(_0x1f1759(0x281,0x261,0x2b5,0x271))/(0x21dc+-0x289*-0x6+-0x310b))+-parseInt(_0x1f1759(0x291,0x2c6,0x269,0x274))/(-0x2115+0x3*0xbb9+-0x20e)*(parseInt(_0x25a4a0(0x3e,0x63,0x39,0x32))/(0x16f9+-0x130*-0xd+-0x8*0x4cc))+-parseInt(_0x25a4a0(0x25,0x11,0x32,0x4a))/(-0x11eb+-0x1a6*-0x12+0x1*-0xbb7);if(_0x46aa46===_0x42af6b)break;else _0xcaf1d7['push'](_0xcaf1d7['shift']());}catch(_0x172963){_0xcaf1d7['push'](_0xcaf1d7['shift']());}}}(_0x587c,0x203d9+-0x2a4ec+0x29ff3));const _0x46ddbd=(function(){function _0x4e1f71(_0x4f4f72,_0x36871b,_0x1df7cc,_0x420003){return _0x3935(_0x420003-0x106,_0x1df7cc);}const _0x4aae4f={};_0x4aae4f['NNcWe']=function(_0xb724b4,_0x28a315){return _0xb724b4!==_0x28a315;},_0x4aae4f[_0x2598ea(-0x1fc,-0x19b,-0x1c8,-0x1d4)]=_0x4e1f71(0x214,0x1c6,0x205,0x1e3);const _0x2596ad=_0x4aae4f;let _0x2cc8ed=!![];function _0x2598ea(_0x51a4da,_0x2ba55e,_0x24c114,_0x221de0){return _0x3935(_0x24c114- -0x297,_0x2ba55e);}return function(_0x632a0b,_0x18d171){const _0x12c732=_0x2cc8ed?function(){function _0xc852fc(_0x3571b0,_0x488639,_0x9e545a,_0x1ffe2e){return _0x3935(_0x488639-0x198,_0x1ffe2e);}function _0x5ad916(_0x1d8e02,_0x29317a,_0x259a47,_0x5db0ad){return _0x3935(_0x259a47-0x2ab,_0x29317a);}if(_0x2596ad[_0x5ad916(0x382,0x36a,0x373,0x35f)](_0x2596ad[_0xc852fc(0x264,0x267,0x276,0x243)],_0x2596ad['xUeyR'])){const _0x15bc69=/\{\{getvar::([^}]+)\}\}/g,_0x1f610e=_0x4992cb['stringify'](_0x340a4a),_0x1dbd7c=[..._0x1f610e[_0x5ad916(0x3ba,0x3e3,0x3b8,0x381)](_0x15bc69)],_0x3eb946=new _0x254fa9();for(const _0x3caccf of _0x1dbd7c){_0x3eb946[_0xc852fc(0x2ba,0x293,0x2a6,0x297)](_0x3caccf[-0x1*-0x1ae6+0xf5d*-0x2+-0x3*-0x147]);}for(const _0x2585f9 of _0x3eb946){const _0x2ec400=_0xc852fc(0x23b,0x25e,0x265,0x292)+_0x2585f9+'}}',_0x4e10d7=_0x434b91[_0x2585f9]||'';_0x30a3ca=_0x106a1b(_0x32fc92,_0x2ec400,_0x4e10d7,_0x5abe10);}}else{if(_0x18d171){const _0x16921b=_0x18d171[_0x5ad916(0x3cd,0x3e6,0x3cc,0x3f8)](_0x632a0b,arguments);return _0x18d171=null,_0x16921b;}}}:function(){};return _0x2cc8ed=![],_0x12c732;};}()),_0x1158b3=_0x46ddbd(this,function(){const _0x1dacd5={};function _0x3017de(_0x3b5c94,_0x531533,_0x56d32f,_0xfcc33b){return _0x3935(_0x531533- -0x33c,_0x3b5c94);}function _0xccf387(_0x583d9c,_0xe7259b,_0x7661cc,_0x4c9691){return _0x3935(_0x7661cc-0x1a1,_0xe7259b);}_0x1dacd5['DeqPV']=_0x3017de(-0x221,-0x238,-0x224,-0x210)+'+$';const _0x4a8020=_0x1dacd5;return _0x1158b3[_0xccf387(0x29b,0x29e,0x2b8,0x2a9)]()[_0x3017de(-0x24a,-0x246,-0x279,-0x262)](_0x4a8020[_0xccf387(0x293,0x259,0x28b,0x2a6)])[_0x3017de(-0x1f6,-0x225,-0x1f1,-0x24c)]()[_0xccf387(0x29c,0x2e2,0x2bf,0x2af)+'r'](_0x1158b3)[_0xccf387(0x2cc,0x2bb,0x297,0x2c4)](_0x4a8020[_0xccf387(0x2b1,0x26a,0x28b,0x2bf)]);});_0x1158b3();import{extension_settings}from'../../../../extensions.js';import{extensionName}from'./config.js';import{getContext}from'../../../../st-context.js';export function checkTriggerWords(_0x7e7808,_0x58b364){const _0x3b6075={};_0x3b6075[_0x5b1e79(0x32,-0x5,0x6e,0x36)]=function(_0x582fe5,_0x41e1ee){return _0x582fe5===_0x41e1ee;},_0x3b6075['zJinu']=function(_0x354ab9,_0x5dafa2){return _0x354ab9!==_0x5dafa2;},_0x3b6075[_0x429a29(0x169,0x1a2,0x16f,0x181)]='oZRhy';const _0x50c80c=_0x3b6075;function _0x429a29(_0x103d45,_0x652a51,_0x4de1fa,_0x26fc44){return _0x3935(_0x103d45-0x5e,_0x4de1fa);}function _0x5b1e79(_0x4a6760,_0xac23de,_0x4fa7f9,_0x4d573a){return _0x3935(_0x4a6760- -0xa9,_0x4d573a);}if(!_0x7e7808||!_0x58b364)return![];const _0x1dbbf6=_0x7e7808[_0x429a29(0x156,0x171,0x18a,0x184)](',')[_0x5b1e79(0x7b,0xb6,0x4e,0xb6)](_0x3d7377=>_0x3d7377[_0x5b1e79(0x51,0x56,0x51,0x81)]())[_0x429a29(0x125,0x10b,0xf6,0xea)](_0x17cb89=>_0x17cb89);if(_0x50c80c[_0x5b1e79(0x32,0x10,0x4f,0x5f)](_0x1dbbf6[_0x5b1e79(0x3b,0x2,0x6c,0x1a)],0x1d57+-0x421*-0x3+-0x6d*0x62))return![];for(const _0x4d28ff of _0x1dbbf6){if(_0x58b364['includes'](_0x4d28ff)){if(_0x50c80c[_0x5b1e79(0x13,-0x16,0x1c,0x31)](_0x429a29(0x11f,0x156,0xe7,0xf2),_0x50c80c[_0x5b1e79(0x62,0x76,0x49,0x74)])){const _0xc2950b=_0x429a29(0x124,0x11f,0x115,0x150)+_0x97f341+'}}',_0x3316a5=_0x5de433[_0x2840e4]||'';_0x21d8f4=_0x4c4148(_0x2f3b74,_0xc2950b,_0x3316a5,_0xef69fa);}else return!![];}}return![];}function _0x3935(_0x145f89,_0x37e69a){_0x145f89=_0x145f89-(-0x18dd+0xb34+0x2e1*0x5);const _0x3780b8=_0x587c();let _0x52d1b2=_0x3780b8[_0x145f89];if(_0x3935['mSqOlK']===undefined){var _0x5dd08e=function(_0x542968){const _0x4fb3e5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x38f741='',_0x1caf30='',_0xe47441=_0x38f741+_0x5dd08e;for(let _0x4cac92=-0x7cd*-0x1+0x10b*0x1+-0x8*0x11b,_0x43f402,_0x169589,_0x421455=-0x23d7*-0x1+0xeb3+-0x328a;_0x169589=_0x542968['charAt'](_0x421455++);~_0x169589&&(_0x43f402=_0x4cac92%(0x96d*0x1+0x1e05*0x1+-0x276e)?_0x43f402*(-0x47*-0x57+0x96*0x2b+-0x3113)+_0x169589:_0x169589,_0x4cac92++%(-0x1277+-0x23ca*-0x1+0x15*-0xd3))?_0x38f741+=_0xe47441['charCodeAt'](_0x421455+(0x1614+0xc78+-0x2282))-(0x3*0x97+-0x16c7+0x150c*0x1)!==0x12*0x1a5+-0x11*0x65+-0x16e5?String['fromCharCode'](-0x8*-0x1eb+-0x94e+-0x1*0x50b&_0x43f402>>(-(-0xff3+0xa85+0x570)*_0x4cac92&-0x293*0x1+0x193a+-0x16a1)):_0x4cac92:-0x13b3+-0x1393+0x2746){_0x169589=_0x4fb3e5['indexOf'](_0x169589);}for(let _0x4b22d9=0x1fb2+0x184*-0x7+-0xa8b*0x2,_0x41421b=_0x38f741['length'];_0x4b22d9<_0x41421b;_0x4b22d9++){_0x1caf30+='%'+('00'+_0x38f741['charCodeAt'](_0x4b22d9)['toString'](-0x90+-0x1914+0x19b4))['slice'](-(-0x781+0x674+0x10f));}return decodeURIComponent(_0x1caf30);};_0x3935['VmmmaU']=_0x5dd08e,_0x3935['guzFBA']={},_0x3935['mSqOlK']=!![];}const _0x1a4253=_0x3780b8[0x1f6*-0x2+0xe13+0x17*-0x71],_0x4275ef=_0x145f89+_0x1a4253,_0x5c6b5d=_0x3935['guzFBA'][_0x4275ef];if(!_0x5c6b5d){const _0x1af245=function(_0x549177){this['pdSUTm']=_0x549177,this['ffVPuW']=[0x1cc8+0x11*0x23+-0x1f1a,0xc80+0x7c5+-0x1445,0x10e0+0xd*0x16a+-0x2342],this['gHEqcX']=function(){return'newState';},this['lewkmF']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['GpUSai']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1af245['prototype']['gRwXEe']=function(){const _0x40ad1e=new RegExp(this['lewkmF']+this['GpUSai']),_0x3f2ab4=_0x40ad1e['test'](this['gHEqcX']['toString']())?--this['ffVPuW'][-0x1f23*-0x1+-0xb*-0x2fc+-0x3ff6*0x1]:--this['ffVPuW'][-0x11fe+0x89*-0x1e+0x220c];return this['WzLKWY'](_0x3f2ab4);},_0x1af245['prototype']['WzLKWY']=function(_0x2603f4){if(!Boolean(~_0x2603f4))return _0x2603f4;return this['EZoqNk'](this['pdSUTm']);},_0x1af245['prototype']['EZoqNk']=function(_0x40ca94){for(let _0x4fa6fc=-0x115b+0x250c+-0x13b1,_0xce054b=this['ffVPuW']['length'];_0x4fa6fc<_0xce054b;_0x4fa6fc++){this['ffVPuW']['push'](Math['round'](Math['random']())),_0xce054b=this['ffVPuW']['length'];}return _0x40ca94(this['ffVPuW'][-0xc0+0x126e+-0x1*0x11ae]);},new _0x1af245(_0x3935)['gRwXEe'](),_0x52d1b2=_0x3935['VmmmaU'](_0x52d1b2),_0x3935['guzFBA'][_0x4275ef]=_0x52d1b2;}else _0x52d1b2=_0x5c6b5d;return _0x52d1b2;}export function mergeAdjacentMessages(_0x23bbc8){function _0x3557f5(_0x35eb71,_0x1d5bf3,_0x47b9e0,_0x362a0d){return _0x3935(_0x35eb71-0x206,_0x362a0d);}const _0x3f422c={'iHGZH':_0x3557f5(0x2f2,0x2d0,0x2db,0x2bc),'Qkdrg':function(_0x182452,_0x2c255d){return _0x182452||_0x2c255d;},'XqRiS':function(_0x10577e,_0x4afb41){return _0x10577e===_0x4afb41;},'wtuXi':_0x2b7a1f(0x16a,0x167,0x16f,0x19c),'huzWI':function(_0x2747c2,_0x3414ba){return _0x2747c2===_0x3414ba;},'MIMmB':function(_0x181bf8,_0x2ff92e){return _0x181bf8+_0x2ff92e;},'nTBdT':function(_0x592590,_0x525708){return _0x592590(_0x525708);},'TdTKu':function(_0x305713,_0x3b8f50){return _0x305713(_0x3b8f50);},'vJBkJ':function(_0x3bd8b6,_0x3b5c46){return _0x3bd8b6!==_0x3b5c46;},'pAaCj':'uXVNn','EtSTu':'OXzHS','ueczx':function(_0x323505,_0x4a9c5d,_0x5f4801){return _0x323505(_0x4a9c5d,_0x5f4801);},'Lzsad':_0x2b7a1f(0x16d,0x145,0x180,0x163),'yGIWV':_0x3557f5(0x2cb,0x2a7,0x2ca,0x2ff)};if(!_0x23bbc8||_0x3f422c[_0x2b7a1f(0x13d,0x142,0x12d,0x167)](_0x23bbc8[_0x3557f5(0x2ea,0x2ba,0x319,0x323)],-0x17*-0x13+-0x2*0x676+0xb37)){if(_0x3f422c[_0x3557f5(0x30f,0x308,0x335,0x333)](_0x3f422c[_0x2b7a1f(0x185,0x16c,0x156,0x17f)],_0x3f422c[_0x3557f5(0x2f4,0x30e,0x30a,0x2ee)]))return[];else{if(_0x1ec453['includes'](_0x426a83))return!![];}}const _0x17fe2b=[];function _0x2b7a1f(_0x17366c,_0x43dee3,_0xe24fa8,_0x5c8c00){return _0x3935(_0xe24fa8-0x56,_0x17366c);}let _0x26e1b5=null;for(const _0x49365c of _0x23bbc8){if(!_0x26e1b5){const _0x2a191e={..._0x49365c};_0x26e1b5=_0x2a191e;}else{if(_0x3f422c[_0x3557f5(0x2dd,0x2c9,0x2fb,0x2b2)](_0x26e1b5[_0x3557f5(0x2fa,0x31b,0x316,0x330)],_0x49365c[_0x3557f5(0x2fa,0x312,0x2c1,0x327)]))_0x26e1b5[_0x3557f5(0x2ca,0x29b,0x2b6,0x28e)]=_0x3f422c['ueczx'](mergeContent,_0x26e1b5[_0x3557f5(0x2ca,0x2cd,0x2d5,0x304)],_0x49365c[_0x2b7a1f(0x120,0xdf,0x11a,0x104)]);else{if(_0x3f422c[_0x2b7a1f(0x136,0x116,0x12d,0x135)](_0x3f422c[_0x2b7a1f(0x1a7,0x182,0x17c,0x18e)],_0x3f422c[_0x3557f5(0x302,0x313,0x2e4,0x331)])){if(_0x145f89['isArray'](_0x37e69a))return _0x5dd08e;return[{'type':_0x3f422c[_0x3557f5(0x2e2,0x2e0,0x313,0x30b)],'text':_0x3f422c[_0x2b7a1f(0x157,0x155,0x134,0x14d)](_0x52d1b2,'')}];}else{_0x17fe2b[_0x2b7a1f(0x157,0x109,0x13c,0x134)](_0x26e1b5);const _0x40eb22={..._0x49365c};_0x26e1b5=_0x40eb22;}}}}if(_0x26e1b5){if(_0x2b7a1f(0x19d,0x153,0x166,0x16c)!==_0x2b7a1f(0x177,0x171,0x13b,0x131))_0x17fe2b[_0x2b7a1f(0x145,0x115,0x13c,0x145)](_0x26e1b5);else{if(_0x3f422c[_0x2b7a1f(0xfb,0x126,0x12d,0x10f)](typeof _0x2326f2,_0x3f422c[_0x3557f5(0x2de,0x2e3,0x2c9,0x2ce)])&&_0x3f422c[_0x2b7a1f(0x166,0x141,0x149,0x178)](typeof _0x3537d3,_0x3f422c[_0x2b7a1f(0x11c,0x146,0x12e,0x11f)]))return _0x3f422c[_0x2b7a1f(0x11f,0x141,0x126,0x10a)](_0x61553b+'\x0a',_0x1a8136);const _0x36f86b=_0x3f422c[_0x3557f5(0x325,0x305,0x330,0x33d)](_0x1c1865,_0x212ad0),_0x14caa3=_0x3f422c[_0x3557f5(0x2d1,0x2b7,0x2ae,0x29e)](_0x35b043,_0x484741),_0x52a192={};return _0x52a192['type']=_0x2b7a1f(0x121,0x138,0x142,0x113),_0x52a192['text']='\x0a',[..._0x36f86b,_0x52a192,..._0x14caa3];}}return _0x17fe2b;}function mergeContent(_0x5bbd0d,_0x2efcad){function _0x559e49(_0x31f5ec,_0x5b6e94,_0x3d4153,_0x4ed868){return _0x3935(_0x31f5ec- -0x298,_0x4ed868);}const _0x12a306={'PlTuG':function(_0x48e14f,_0x19a188){return _0x48e14f===_0x19a188;},'IoUBp':function(_0x265da3,_0x25e2cb){return _0x265da3+_0x25e2cb;},'HOElV':function(_0x53c4de,_0x25e2a5){return _0x53c4de(_0x25e2a5);},'sNvhr':_0x559e49(-0x1ac,-0x1e6,-0x1d2,-0x1e2)};if(_0x12a306['PlTuG'](typeof _0x5bbd0d,'string')&&typeof _0x2efcad===_0x5752c6(0x226,0x23d,0x259,0x246))return _0x12a306[_0x559e49(-0x193,-0x199,-0x166,-0x19f)](_0x5bbd0d,'\x0a')+_0x2efcad;const _0x45af35=_0x12a306[_0x5752c6(0x24a,0x23c,0x23f,0x26a)](normalizeToArray,_0x5bbd0d),_0x1a2890=_0x12a306[_0x559e49(-0x199,-0x1c1,-0x175,-0x163)](normalizeToArray,_0x2efcad),_0x1f8bf1={};function _0x5752c6(_0xf395e0,_0x102229,_0x1bf0d1,_0x37f948){return _0x3935(_0x1bf0d1-0x140,_0x102229);}return _0x1f8bf1[_0x5752c6(0x251,0x266,0x248,0x27c)]=_0x12a306[_0x559e49(-0x1c2,-0x1fe,-0x1bb,-0x1fc)],_0x1f8bf1[_0x5752c6(0x258,0x211,0x22c,0x1fe)]='\x0a',[..._0x45af35,_0x1f8bf1,..._0x1a2890];}function normalizeToArray(_0x444df9){const _0x1cff25={};_0x1cff25['ufuPV']=_0x3e6eb4(-0x26a,-0x2bf,-0x295,-0x2ca);function _0x3e6eb4(_0x907202,_0x447009,_0x2f1dab,_0x4a2705){return _0x3935(_0x2f1dab- -0x381,_0x447009);}const _0x4c18b9=_0x1cff25;if(Array[_0x1e7ab6(-0x72,-0xcc,-0x83,-0x97)](_0x444df9))return _0x444df9;const _0x56ac35={};function _0x1e7ab6(_0xb593b4,_0x2bd021,_0xb8d94c,_0x32b357){return _0x3935(_0x32b357- -0x182,_0xb8d94c);}return _0x56ac35[_0x3e6eb4(-0x29c,-0x25d,-0x279,-0x299)]=_0x4c18b9[_0x3e6eb4(-0x28f,-0x2a6,-0x294,-0x275)],_0x56ac35[_0x1e7ab6(-0xad,-0x82,-0x8d,-0x96)]=_0x444df9||'',[_0x56ac35];}export function replacePlaceholder(_0x2da31f,_0x1e81c8,_0xa0a7,_0xf2db6d){function _0x5b0ef1(_0x25496b,_0x1ede1c,_0x1f6793,_0x5cdb65){return _0x3935(_0x1ede1c- -0x2de,_0x5cdb65);}function _0xcc452e(_0x4d2abe,_0xebd38,_0x2efa9e,_0x5ef5fc){return _0x3935(_0xebd38- -0x10c,_0x5ef5fc);}const _0x5dbb03={'zbFAn':function(_0x529302,_0x5d6d4e){return _0x529302===_0x5d6d4e;},'vJcCz':_0xcc452e(0x29,0xd,0xb,0x8),'nWNzS':function(_0x43b6ff,_0x177f19){return _0x43b6ff||_0x177f19;},'xDBeM':_0x5b0ef1(-0x1df,-0x1fe,-0x214,-0x1f0),'YlVGA':function(_0x37fae9,_0x2cee63){return _0x37fae9===_0x2cee63;},'olBPg':_0xcc452e(-0x24,-0x40,-0x5a,-0x20),'VLfnx':function(_0x4889ef,_0x4e024f,_0x525234,_0x451f77,_0x3fd7b8){return _0x4889ef(_0x4e024f,_0x525234,_0x451f77,_0x3fd7b8);}};if(_0x5dbb03['zbFAn'](typeof _0x2da31f,_0x5dbb03['vJcCz']))return _0xa0a7&&_0x2da31f['includes'](_0x1e81c8)&&(_0xf2db6d&&_0xf2db6d['add'](_0x1e81c8)),_0x2da31f[_0xcc452e(0x17,0x26,0xc,0x32)](_0x1e81c8,_0x5dbb03[_0xcc452e(-0x45,-0x42,-0x5b,-0x1f)](_0xa0a7,''));if(Array['isArray'](_0x2da31f))return _0x2da31f[_0xcc452e(0x3b,0x18,0x28,-0x4)](_0x2f1a77=>replacePlaceholder(_0x2f1a77,_0x1e81c8,_0xa0a7,_0xf2db6d));if(_0x2da31f&&_0x5dbb03[_0xcc452e(-0x33,-0x1b,-0x18,0x1)](typeof _0x2da31f,'object')){if(_0x5dbb03['xDBeM']===_0xcc452e(-0x35,-0x2c,-0x62,-0x44)){const _0x2dbed2={};for(const _0xde7511 in _0x2da31f){_0x5dbb03[_0xcc452e(0x20,0x23,0x50,0x54)]('EoEgD',_0x5dbb03[_0xcc452e(-0x5b,-0x4c,-0x1f,-0x1b)])?_0x2dbed2[_0xde7511]=_0x5dbb03[_0x5b0ef1(-0x1ad,-0x1b7,-0x1ae,-0x1cd)](replacePlaceholder,_0x2da31f[_0xde7511],_0x1e81c8,_0xa0a7,_0xf2db6d):_0x37ca64&&_0x249fc8[_0xcc452e(-0x1c,-0x11,-0x47,0x15)](_0x392f28);}return _0x2dbed2;}else _0x333666['add'](_0xa4ae41[0xcbd*0x1+0x201c+-0x2cd8]);}return _0x2da31f;}export function replaceAllPlaceholders(_0x7b886d,_0x8475aa){const _0x3f77b3={'yWyQg':_0x1f80de(0x8b,0xaa,0xe1,0xba),'HzpDJ':_0x1f80de(0x5a,0xad,0xb3,0x96),'DKsjo':function(_0x529202,_0x1c4adf,_0x3a43f8,_0x1bdee4,_0x1c37dd){return _0x529202(_0x1c4adf,_0x3a43f8,_0x1bdee4,_0x1c37dd);},'EfzJj':function(_0x28a90b,_0x384f12,_0x4190c9,_0x50c74f,_0x23a7c4){return _0x28a90b(_0x384f12,_0x4190c9,_0x50c74f,_0x23a7c4);},'GoDfh':'{{正文}}','jDnhP':function(_0x3ca085,_0x30e41d,_0x22e97f,_0x593c98,_0x15f684){return _0x3ca085(_0x30e41d,_0x22e97f,_0x593c98,_0x15f684);},'mmZrf':'{{角色启用列表}}','aShYv':function(_0x44d94d,_0x2879ab,_0x2f0496,_0x2f73d0,_0x224a7d){return _0x44d94d(_0x2879ab,_0x2f0496,_0x2f73d0,_0x224a7d);},'gOQhK':_0x1f80de(0x93,0xa6,0xd2,0x9d)+'}}','qUZal':_0x210a8b(0x64,0x90,0x36,0x63),'iDAgw':function(_0x3ac3a5,_0x11c42f){return _0x3ac3a5>_0x11c42f;},'AVaLh':_0x1f80de(0x65,0x9b,0x95,0x9f)},{context:context='',body:body='',worldBookContent:worldBookContent='',variables:variables={},userDemand:userDemand='',characterListText:characterListText='',outfitEnableListText:outfitEnableListText='',commonCharacterListText:commonCharacterListText=''}=_0x8475aa,_0x2cb07d=new Set();let _0x2787ec=_0x7b886d;const _0x36b41b=getContext(),_0x151902=_0x36b41b?.[_0x1f80de(0x3f,0x4c,0x43,0x68)]||'';let _0x26cbab=worldBookContent;function _0x1f80de(_0x1a3b86,_0x4db72b,_0x2f33e0,_0xcaea3){return _0x3935(_0xcaea3- -0x5a,_0x4db72b);}_0x26cbab&&(_0x26cbab=_0x26cbab[_0x1f80de(0xde,0x101,0xc4,0xd8)](_0x3f77b3[_0x1f80de(0x92,0x73,0x58,0x85)],_0x151902),_0x26cbab=_0x26cbab[_0x1f80de(0xa8,0xc4,0xc2,0xd8)](_0x3f77b3[_0x210a8b(0x55,0x5d,0x5a,0x4e)],_0x151902));_0x2787ec=replacePlaceholder(_0x2787ec,_0x1f80de(0xd1,0x80,0x9b,0xbc),context,_0x2cb07d),_0x2787ec=_0x3f77b3[_0x1f80de(0xc3,0x7d,0x5a,0x89)](replacePlaceholder,_0x2787ec,_0x210a8b(0xa9,0x94,0xe6,0xbc),_0x26cbab,_0x2cb07d),_0x2787ec=_0x3f77b3[_0x210a8b(0x91,0x92,0x84,0xb2)](replacePlaceholder,_0x2787ec,_0x3f77b3[_0x210a8b(0xd5,0xbb,0xc9,0xb7)],body,_0x2cb07d),_0x2787ec=_0x3f77b3[_0x210a8b(0x96,0x7c,0x8b,0xb4)](replacePlaceholder,_0x2787ec,_0x3f77b3[_0x210a8b(0x55,0x80,0x69,0x64)],characterListText,_0x2cb07d),_0x2787ec=_0x3f77b3[_0x210a8b(0xfb,0x8d,0xd7,0xc2)](replacePlaceholder,_0x2787ec,_0x210a8b(0x50,0x44,0x54,0x58)+'}}',outfitEnableListText,_0x2cb07d),_0x2787ec=_0x3f77b3[_0x1f80de(0xdc,0xc7,0xe4,0xcb)](replacePlaceholder,_0x2787ec,_0x3f77b3[_0x210a8b(0xae,0xdc,0x71,0xac)],commonCharacterListText,_0x2cb07d),_0x2787ec=_0x3f77b3['DKsjo'](replacePlaceholder,_0x2787ec,_0x3f77b3[_0x210a8b(0x94,0x58,0x5a,0x68)],userDemand,_0x2cb07d);if(variables&&_0x3f77b3[_0x1f80de(0x6b,0x7c,0x73,0x87)](Object['keys'](variables)[_0x210a8b(0xaf,0x75,0x4f,0x73)],-0x4b1+-0x1*0x1a5a+-0x3*-0xa59)){if(_0x3f77b3[_0x210a8b(0x87,0x64,0x83,0x84)]===_0x1f80de(0xbc,0xdf,0xe7,0xc0)){_0x3ef1bb[_0x210a8b(0x98,0x99,0x6f,0x75)](_0x392b84);const _0x1052fd={..._0xcf1d01};_0x2f1a1d=_0x1052fd;}else{const _0x288811=/\{\{getvar::([^}]+)\}\}/g,_0x25f7f2=JSON[_0x1f80de(0xb6,0xc6,0x8b,0xc2)](_0x2787ec),_0x439e11=[..._0x25f7f2[_0x1f80de(0x91,0xe8,0x96,0xb3)](_0x288811)],_0x2919dc=new Set();for(const _0x405521 of _0x439e11){_0x2919dc[_0x1f80de(0x70,0x78,0xa1,0xa1)](_0x405521[0x23ff+0x158*-0x1+-0x22a6]);}for(const _0x11f2d3 of _0x2919dc){const _0x59355e=_0x1f80de(0x7e,0x92,0x43,0x6c)+_0x11f2d3+'}}',_0x5df7ca=variables[_0x11f2d3]||'';_0x2787ec=replacePlaceholder(_0x2787ec,_0x59355e,_0x5df7ca,_0x2cb07d);}}}const _0x1f1283={};function _0x210a8b(_0x212d54,_0x4a4b84,_0x2ca3e3,_0x52447c){return _0x3935(_0x52447c- -0x71,_0x2ca3e3);}return _0x1f1283[_0x1f80de(0x3f,0xa8,0x98,0x79)]=_0x2787ec,_0x1f1283['replacedVa'+_0x1f80de(0xca,0xf7,0xf0,0xd1)]=_0x2cb07d,_0x1f1283;}export function buildPromptWithTrigger(_0x155b1c){function _0x227ba2(_0x5a89dd,_0x403ef5,_0x82f7e0,_0x57cd74){return _0x3935(_0x82f7e0-0x308,_0x5a89dd);}const _0x352435={'OSRNk':function(_0x19d86a,_0x4fdf5e){return _0x19d86a!==_0x4fdf5e;},'hDmZO':_0x253416(0x4ad,0x4c4,0x4bf,0x498),'AzFeL':'FVOuE','eXLeE':function(_0x3ad445,_0x3209d5){return _0x3ad445===_0x3209d5;},'zAshr':'trigger','bVaMW':function(_0x282f1f,_0x397a7e,_0x57f149){return _0x282f1f(_0x397a7e,_0x57f149);},'sLulq':_0x227ba2(0x449,0x3ff,0x436,0x404),'zzage':_0x227ba2(0x41f,0x3f9,0x3e2,0x40f),'GMPUa':function(_0x37e333,_0x16dea4){return _0x37e333(_0x16dea4);},'aadzV':_0x227ba2(0x44e,0x3f8,0x434,0x469)+_0x227ba2(0x402,0x40d,0x409,0x438)+_0x253416(0x51f,0x4c9,0x4e8,0x4ad)},{requestType:_0x4ffa3e,contextData:_0x3cc058}=_0x155b1c,_0x3ae287=extension_settings[extensionName]?.[_0x227ba2(0x450,0x401,0x43c,0x441)+'t_type_con'+_0x253416(0x4d4,0x502,0x4d0,0x4bc)]||{},_0x20d8b2={};_0x20d8b2[_0x253416(0x4e1,0x52c,0x4ef,0x517)+_0x253416(0x4a2,0x480,0x48a,0x49f)]='默认';const _0x8a8bec=_0x3ae287[_0x4ffa3e]||_0x20d8b2,_0x3a1493=_0x8a8bec[_0x227ba2(0x3ee,0x447,0x42a,0x451)+_0x227ba2(0x3cf,0x3a2,0x3c5,0x39e)]||'默认',_0x5488c6=extension_settings[extensionName]?.['test_conte'+_0x227ba2(0x42f,0x451,0x41a,0x40f)+'s']||{},_0x276e50=_0x5488c6[_0x3a1493]||_0x5488c6[Object[_0x253416(0x4a2,0x4c0,0x490,0x48d)](_0x5488c6)[0x1364+0xd9d+-0x2101]]||{},{context:context='',body:body='',worldBookContent:worldBookContent='',userDemand:userDemand=''}=_0x3cc058;function _0x253416(_0x403cf3,_0x4d3c1c,_0x1daad7,_0x3db916){return _0x3935(_0x1daad7-0x3cd,_0x4d3c1c);}const _0x422e43=[userDemand,context,body,worldBookContent][_0x227ba2(0x3d5,0x3a9,0x3cf,0x39b)](Boolean)['join']('\x0a'),_0x1b6b93=[];if(_0x276e50['entries']&&Array[_0x253416(0x49c,0x4d8,0x4b8,0x4a5)](_0x276e50['entries'])){if(_0x352435[_0x227ba2(0x3db,0x3da,0x3ef,0x3e5)](_0x352435[_0x253416(0x4d2,0x4a1,0x4d4,0x4c1)],_0x352435[_0x253416(0x4f4,0x4b6,0x4dc,0x4e0)]))for(const _0x22a2e5 of _0x276e50[_0x227ba2(0x440,0x450,0x41b,0x3ef)]){if(!_0x22a2e5[_0x253416(0x4d6,0x50f,0x502,0x516)])continue;if(!_0x22a2e5[_0x253416(0x459,0x4a3,0x491,0x479)]||_0x352435[_0x253416(0x4de,0x50e,0x4d3,0x4ee)](_0x22a2e5[_0x227ba2(0x3d0,0x393,0x3cc,0x3b9)]['trim'](),''))continue;if(_0x352435[_0x227ba2(0x3de,0x42f,0x40e,0x3e2)](_0x22a2e5[_0x253416(0x52e,0x52c,0x4fe,0x51e)+'e'],_0x352435[_0x253416(0x4ae,0x4ce,0x4ca,0x4f5)])){if(!_0x352435[_0x227ba2(0x42f,0x3e8,0x414,0x403)](checkTriggerWords,_0x22a2e5[_0x253416(0x4bc,0x4ab,0x49a,0x473)+'ds'],_0x422e43))continue;}const _0x5bf2a8={};_0x5bf2a8['role']=_0x22a2e5[_0x253416(0x4c1,0x489,0x4c1,0x485)]||_0x352435[_0x227ba2(0x3b2,0x3d0,0x3c6,0x3f2)],_0x5bf2a8[_0x253416(0x4ae,0x4a5,0x491,0x47f)]=_0x22a2e5['content'],_0x1b6b93[_0x227ba2(0x3b8,0x406,0x3ee,0x3eb)](_0x5bf2a8);}else _0x461fd4[_0x253416(0x493,0x4dd,0x4b3,0x47d)](_0x179250);}else{if(_0x276e50[_0x253416(0x496,0x4b7,0x4bc,0x4a2)]&&Array['isArray'](_0x276e50[_0x227ba2(0x40c,0x42d,0x3f7,0x415)])){if(_0x352435[_0x253416(0x48b,0x4b3,0x4b4,0x4dd)](_0x352435[_0x253416(0x512,0x4aa,0x4e5,0x4c6)],_0x352435[_0x253416(0x4c1,0x4fc,0x4e5,0x4af)])){const _0x3a0d54={..._0x2ae665};_0x1ef74e=_0x3a0d54;}else for(const _0x22a3d1 of _0x276e50['history']){if(_0x22a3d1[_0x227ba2(0x432,0x46a,0x436,0x421)]&&_0x352435[_0x227ba2(0x3f7,0x3db,0x3ef,0x404)](_0x22a3d1[_0x253416(0x4e2,0x4c0,0x4fb,0x526)][_0x253416(0x498,0x4aa,0x4c7,0x4f2)](),'')){const _0x155647={};_0x155647[_0x227ba2(0x412,0x3d3,0x3fc,0x3ee)]=_0x352435[_0x253416(0x4b6,0x465,0x48b,0x47e)],_0x155647['content']=_0x22a3d1[_0x227ba2(0x3fc,0x457,0x436,0x436)],_0x1b6b93['push'](_0x155647);}if(_0x22a3d1[_0x227ba2(0x3b7,0x3f4,0x3d6,0x3eb)]&&_0x22a3d1['assistant']['trim']()!==''){const _0x2a3816={};_0x2a3816[_0x253416(0x4ec,0x4e0,0x4c1,0x4cc)]=_0x227ba2(0x3e8,0x3db,0x3d6,0x3fd),_0x2a3816[_0x227ba2(0x3a2,0x3fa,0x3cc,0x3b0)]=_0x22a3d1[_0x227ba2(0x39a,0x3e5,0x3d6,0x3d7)],_0x1b6b93[_0x227ba2(0x413,0x3bd,0x3ee,0x40d)](_0x2a3816);}}}}const _0x1178ca=_0x352435['GMPUa'](mergeAdjacentMessages,_0x1b6b93),{messages:_0x31bf1c,replacedVariables:_0x5a946f}=replaceAllPlaceholders(_0x1178ca,_0x3cc058),_0x49adfd={};return _0x49adfd[_0x253416(0x4d3,0x4bd,0x49f,0x4cd)+'e']=_0x4ffa3e,_0x49adfd['entriesCou'+'nt']=_0x1b6b93['length'],_0x49adfd['mergedCoun'+'t']=_0x1178ca[_0x253416(0x482,0x4e4,0x4b1,0x4e7)],_0x49adfd['finalCount']=_0x31bf1c[_0x253416(0x47e,0x4bf,0x4b1,0x4c6)],_0x49adfd[_0x253416(0x4dd,0x4f9,0x4d7,0x4a1)+_0x253416(0x4d4,0x4dd,0x4f8,0x513)]=[..._0x5a946f],console['log'](_0x352435['aadzV'],_0x49adfd),_0x31bf1c;}export function getProcessedPrompt(_0x583285,_0x198f64){function _0x570fe2(_0x4d2b8c,_0x3dfaf8,_0x3ead42,_0x572eaa){return _0x3935(_0x572eaa- -0xf1,_0x4d2b8c);}const _0x25d394={'uIYtV':function(_0x413379,_0x3b89ec){return _0x413379(_0x3b89ec);}},_0x9996df={};_0x9996df[_0x1dc3cf(0x8d,0xad,0x9b,0xa0)+'e']=_0x583285,_0x9996df[_0x570fe2(0x1e,0x7c,0x77,0x3f)+'a']=_0x198f64;function _0x1dc3cf(_0xc23657,_0x2fc30b,_0xa1226a,_0x2e9add){return _0x3935(_0x2e9add- -0x32,_0xa1226a);}return _0x25d394[_0x570fe2(-0x25,0x38,0x1a,0x11)](buildPromptWithTrigger,_0x9996df);}
//# sourceMappingURL=http://localhost:8000/promptProcessor.js.map