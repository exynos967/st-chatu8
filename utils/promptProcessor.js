function _0x2495(){const _0x4683ca=['seXYtM8','BezoA0K','yxfHwMC','Dw9rAeq','vMDoBhC','A0T3vwm','C3rYAw5NAwz5','u29qDKO','CMvWBgfJzq','q2Xnze8','DhjPBq','rxbmD3q','DhjPz2DLCG','DMjlr0y','CNzHy2u','DhjPz2DLCK1Vza','nti1mJm1DeXstfbt','E0bZzxrNBg9Iyq','mtm4mdHAwMT3BKi','AgLZDg9YEq','DxnLCG','wLfZqvG','qKvRsvq','y2jmBvu','BMfTzte','AxfdqLK','BwfW','BgvUz3rO','kcGOlISPkYKRkq','zgXcDu4','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','vNDhvg8','D01IrNi','yxbWBhK','y29UDgvUDa','zwPNse8','Df90ExbLx2nVBG','A2v5CW','r3fgC08','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','CvnhwLO','swzpthO','C3rYAw5N','swH1D3G','zuL4Cui','AM9PBG','AvrdzKC','C2vHCMnO','AfPMu2O','tNnwuee','y05QywS','Dg9tDhjPBMC','DhLWzq','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','zMLNCW','CMLHyMXLCW','E3VKUjBNLyZKUABOP6BLJ5f9Fq','E3TNzxr2yxi6oG','zu1RuNq','zMXsqwW','CgHctxO','BLvZshG','vM5OAvu','Ae1oALa','A2jZDeG','E3T1C2vYFx0','EKrXDvi','quvbtgC','yxb3Cum','y29UDgv4DerHDa','mJiXmdi5ownPs1f6BW','CM9Szq','E0bNzxrNBg9Iyq','wxfevvm','Aw5JBhvKzxm','E3VNLkJMIlFPNidMSyj9Fq','se9nsLO','rM9RwKm','mteZmtGXmuvdzfzyBW','uvnlzuO','E3VKUiRKUiVMLOD9Fq','E0bNzxr3B3jSza','ntqWBuv2uuzu','CMvWBgfJzufSBa','y29UDgv4Df9WCG','BwvZC2fNzxm','CLzHyMC','su1KBuS','ChvZAa','CMvXDwvZDfr5Ca','yxnZAxn0yw50','y3LXree','wwfZvu4','yLnbrNG','yNHLreq','rfP6vxe','q2zzBge','DMfYoJO','nJG3EMr0CLPh','tvLRAKy','DwPJtuC','DhjPz2DLCLDVCG','Buzwuvi','CLbkEK8','EKXxu0y','zMLSDgvY','E0bNzxr2yxi6oG','E3VMRApMLOD9Fq','wKzjB24','BhzHCJO6','DMfYAwfIBgvZ','uMzIAuW','vuDZsgC','ntmYodeWvhnstevr','y29UC3rYDwn0BW','uKDdwuW','C1f5t1K','yujdsuS','ndm1ndyZmNnerxjVzq','whjOsxi','zw50CMLLCW','AhD2CKS','CNP2wuG','wKjMtw4','CMvWBgfJzwrwyq','uMrYA28','AxnbCNjHEq','y2HHDe1LDgfKyq','Bwf0y2HbBgW','ywrK','uMToruO','mti2mtiZmJHusNnTC28','B2zPBgu','nJb4CLvAzei','BM5uvu0','CKT3sg4','s2LLs0e','phvZzxi+','Dgv4Da','BgXTx3jLCxvLCW','vfveshO','vNjgvNa','DgvZDf9JB250zq','v0DtyNC','vw9etgK','u2n1Bfm','su9zsKe'];_0x2495=function(){return _0x4683ca;};return _0x2495();}function _0x23be(_0x971a0,_0x7bb6ce){_0x971a0=_0x971a0-(0x248c+0x14b2+-0x1*0x382d);const _0x5de24a=_0x2495();let _0x125362=_0x5de24a[_0x971a0];if(_0x23be['FrpajS']===undefined){var _0x1277fd=function(_0x55c627){const _0x5b11cf='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3f369f='',_0x21b371='',_0x2ad57a=_0x3f369f+_0x1277fd;for(let _0xd0c798=-0x343*0x3+0x2595+-0x1bcc,_0x2ce9cc,_0x3b7661,_0x42400e=-0x12b*0x3+-0x15*-0x1d+-0x20*-0x9;_0x3b7661=_0x55c627['charAt'](_0x42400e++);~_0x3b7661&&(_0x2ce9cc=_0xd0c798%(-0xe1+-0x168+0x24d)?_0x2ce9cc*(-0x8a9*0x1+-0x240d+0x2cf6)+_0x3b7661:_0x3b7661,_0xd0c798++%(0xede+-0x1512+0x638))?_0x3f369f+=_0x2ad57a['charCodeAt'](_0x42400e+(0x809+-0x5*-0x59f+-0x241a))-(-0x13af+0x1241+-0x8*-0x2f)!==0x1*-0x1adf+-0x4a*-0x7f+0x9d7*-0x1?String['fromCharCode'](0x521+-0x261e+0x21fc&_0x2ce9cc>>(-(-0x1*0x101b+-0x137*0xb+0x1d7a)*_0xd0c798&0x225a+0x2117+-0x436b)):_0xd0c798:0x9b3+-0x22a8+0x1*0x18f5){_0x3b7661=_0x5b11cf['indexOf'](_0x3b7661);}for(let _0x10fc5b=0x2*0x11b3+-0x1*-0x166b+-0x39d1,_0x3a8199=_0x3f369f['length'];_0x10fc5b<_0x3a8199;_0x10fc5b++){_0x21b371+='%'+('00'+_0x3f369f['charCodeAt'](_0x10fc5b)['toString'](0x475*0x5+0x7*0x199+-0x2168))['slice'](-(0x5e2+-0x439*0x4+0xb04*0x1));}return decodeURIComponent(_0x21b371);};_0x23be['hoFTJH']=_0x1277fd,_0x23be['GzSdum']={},_0x23be['FrpajS']=!![];}const _0x2fd0eb=_0x5de24a[-0x5*0x73c+0x720+0x1d0c],_0x180af8=_0x971a0+_0x2fd0eb,_0x2b44cf=_0x23be['GzSdum'][_0x180af8];if(!_0x2b44cf){const _0x5d59be=function(_0x4366f7){this['yUyhgD']=_0x4366f7,this['avWfXu']=[0x907*0x3+-0xf*0x15b+-0x6bf*0x1,-0x1424+0xa4c+0x9d8,-0x1f5*-0x2+0x18f9+0xff*-0x1d],this['PDZKYj']=function(){return'newState';},this['jbxZtR']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['CXjpfW']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5d59be['prototype']['AyyPBF']=function(){const _0x2e0b1f=new RegExp(this['jbxZtR']+this['CXjpfW']),_0x2aa722=_0x2e0b1f['test'](this['PDZKYj']['toString']())?--this['avWfXu'][-0x1cff+-0x758*0x2+-0x6*-0x748]:--this['avWfXu'][-0xcd3+-0x1f26+0x2bf9];return this['VekfSx'](_0x2aa722);},_0x5d59be['prototype']['VekfSx']=function(_0x5da0ed){if(!Boolean(~_0x5da0ed))return _0x5da0ed;return this['XUIDOE'](this['yUyhgD']);},_0x5d59be['prototype']['XUIDOE']=function(_0x54cee9){for(let _0x1f3478=-0x8*-0x1ce+-0x19*0x6e+-0x3b2*0x1,_0x4ce83c=this['avWfXu']['length'];_0x1f3478<_0x4ce83c;_0x1f3478++){this['avWfXu']['push'](Math['round'](Math['random']())),_0x4ce83c=this['avWfXu']['length'];}return _0x54cee9(this['avWfXu'][0xc9*-0x27+-0x1426+-0x13d*-0x29]);},new _0x5d59be(_0x23be)['AyyPBF'](),_0x125362=_0x23be['hoFTJH'](_0x125362),_0x23be['GzSdum'][_0x180af8]=_0x125362;}else _0x125362=_0x2b44cf;return _0x125362;}(function(_0x19e830,_0x3ba22f){const _0x357711=_0x19e830();function _0x48e3a5(_0x5be46c,_0x2e69db,_0x54fc80,_0x699aa9){return _0x23be(_0x5be46c- -0x111,_0x54fc80);}function _0x126518(_0x5161d9,_0x561f75,_0x43c651,_0x2599c9){return _0x23be(_0x43c651-0x16b,_0x2599c9);}while(!![]){try{const _0x263f83=parseInt(_0x48e3a5(0x6c,0xa1,0xb1,0x39))/(0x3a1*-0x7+0x91*-0x35+0x1*0x376d)+parseInt(_0x48e3a5(0x30,0x29,0x5f,0x4d))/(-0x359+-0x1c11+0x4*0x7db)*(-parseInt(_0x48e3a5(0x80,0x3c,0x4b,0xb2))/(0x6f3+-0xb4f+0x45f))+-parseInt(_0x48e3a5(0x1,-0x46,-0x36,0x8))/(-0x2049+-0x4*-0x96d+-0x567)+-parseInt(_0x126518(0x28e,0x28b,0x2aa,0x2f1))/(0xa7f*-0x1+-0xed0+0x1954*0x1)*(-parseInt(_0x126518(0x2c8,0x244,0x28c,0x2c4))/(-0x234c+-0x14ab+0x37fd))+-parseInt(_0x126518(0x2c9,0x2de,0x2e0,0x29f))/(-0xc41*-0x3+0x2072+-0x452e)+-parseInt(_0x126518(0x286,0x294,0x28a,0x25f))/(0x2559*0x1+-0x4f4+-0x679*0x5)+-parseInt(_0x126518(0x318,0x311,0x2ec,0x2c4))/(-0x268c+0x10de+0x15b7*0x1)*(-parseInt(_0x126518(0x2fc,0x34c,0x30b,0x30a))/(-0xf1*0x20+-0x6d*0x3b+0x3749));if(_0x263f83===_0x3ba22f)break;else _0x357711['push'](_0x357711['shift']());}catch(_0x51471d){_0x357711['push'](_0x357711['shift']());}}}(_0x2495,0x16aa15+0x25da2*-0x8+0x8bb0c));const _0x3a6fef=(function(){const _0x464dcf={};_0x464dcf[_0x442886(-0x7a,-0x45,-0x66,-0x52)]=function(_0x2617a8,_0x4618e5){return _0x2617a8!==_0x4618e5;};const _0x5cc545=_0x464dcf;let _0x50a373=!![];function _0x442886(_0x2124cb,_0x49803d,_0x35b367,_0x15410a){return _0x23be(_0x35b367- -0x1eb,_0x2124cb);}return function(_0x50dc54,_0x5df185){const _0x144da4=_0x50a373?function(){function _0x3d7867(_0x53cbc7,_0x213a99,_0x3d8e6a,_0x2a11f3){return _0x23be(_0x3d8e6a-0x2c0,_0x53cbc7);}function _0xbb927a(_0x27b489,_0x1a40ad,_0x415dfb,_0x280697){return _0x23be(_0x27b489- -0x1c2,_0x1a40ad);}if(_0x5df185){if(_0x5cc545[_0xbb927a(-0x3d,-0x21,-0x4,-0x75)](_0x3d7867(0x436,0x3f5,0x408,0x3e6),'iqCBY'))_0x55c123['add'](_0xbb927a(-0x82,-0xab,-0x89,-0xa9)+_0x3d7867(0x494,0x430,0x45c,0x489)+_0x5c3ba9+'@}');else{const _0x14db95=_0x5df185[_0xbb927a(-0x72,-0x34,-0x4d,-0x47)](_0x50dc54,arguments);return _0x5df185=null,_0x14db95;}}}:function(){};return _0x50a373=![],_0x144da4;};}()),_0x13f979=_0x3a6fef(this,function(){const _0x49166a={};_0x49166a['RGCYL']=_0x45ef11(0x15e,0x196,0x121,0x156)+'+$';function _0x49b3d1(_0x49372a,_0x22e45c,_0x300db5,_0x627403){return _0x23be(_0x300db5- -0x3ca,_0x22e45c);}function _0x45ef11(_0x37fcac,_0x1b26e2,_0xf06a45,_0x4e3fd7){return _0x23be(_0x4e3fd7-0xb,_0x37fcac);}const _0x2b7628=_0x49166a;return _0x13f979['toString']()[_0x45ef11(0x137,0x1a8,0x16c,0x169)](_0x2b7628[_0x45ef11(0x1ad,0x165,0x1cc,0x1ad)])[_0x49b3d1(-0x24f,-0x295,-0x268,-0x261)]()[_0x49b3d1(-0x20c,-0x25b,-0x229,-0x231)+'r'](_0x13f979)[_0x45ef11(0x18b,0x191,0x17e,0x169)](_0x2b7628[_0x49b3d1(-0x1e1,-0x248,-0x228,-0x225)]);});_0x13f979();import{extension_settings}from'../../../../extensions.js';import{extensionName}from'./config.js';import{getContext}from'../../../../st-context.js';import{getglobalvar,setglobalvar}from'./chatDataUtils.js';import{getworldvar}from'./worldbookProcessor.js';export function checkTriggerWords(_0x5d316f,_0x5c7d57){function _0x87f4cc(_0x2217ab,_0x259db4,_0x5a6e36,_0x21a8ef){return _0x23be(_0x259db4- -0x393,_0x2217ab);}const _0x39ccaa={};_0x39ccaa[_0x87f4cc(-0x224,-0x1f5,-0x21e,-0x1c2)]=function(_0x56701c,_0xe53823){return _0x56701c||_0xe53823;},_0x39ccaa['qikGu']=function(_0x4844ca,_0x48b5e6){return _0x4844ca===_0x48b5e6;};function _0x98a04a(_0x56d961,_0x15c99f,_0x5b40b3,_0x1eda17){return _0x23be(_0x15c99f-0x244,_0x56d961);}const _0x30a614=_0x39ccaa;if(_0x30a614[_0x98a04a(0x3a6,0x3e2,0x3b4,0x427)](!_0x5d316f,!_0x5c7d57))return![];const _0xf2633b=_0x5d316f['split'](',')[_0x98a04a(0x3ce,0x38d,0x366,0x3c9)](_0x4c2698=>_0x4c2698[_0x87f4cc(-0x212,-0x25a,-0x288,-0x22c)]())[_0x98a04a(0x3d2,0x3dc,0x3c0,0x39a)](_0x52427b=>_0x52427b);if(_0x30a614['qikGu'](_0xf2633b['length'],-0x1b10+0x125f+-0x8b1*-0x1))return![];for(const _0x50341d of _0xf2633b){if(_0x5c7d57['includes'](_0x50341d))return!![];}return![];}export function mergeAdjacentMessages(_0x2c28bb){const _0x28ac0a={'nnTUM':_0x24cca5(0x1af,0x1e2,0x1c4,0x1be),'wMbFr':function(_0x451325,_0x3fbbb0){return _0x451325===_0x3fbbb0;},'nqbRK':'SbGAd','TUDHz':_0x24cca5(0x17e,0x150,0x190,0x194),'wwlSm':function(_0x1a92bb,_0x45f7bb){return _0x1a92bb!==_0x45f7bb;},'nUsHx':_0x1e8f74(0x89,0x46,0x8b,0x77),'GqFsO':_0x1e8f74(0x5d,0x70,0xa8,0x7f),'eMkRt':function(_0x422b72,_0x5e543e){return _0x422b72!==_0x5e543e;},'GKBhz':_0x24cca5(0x159,0x182,0x173,0x13c),'obgxE':_0x1e8f74(0xe8,0xb7,0xb7,0xd1),'kKwUc':function(_0x1265bb,_0x373a97,_0x4314fe){return _0x1265bb(_0x373a97,_0x4314fe);},'VrFVp':function(_0x25c139,_0x4d7b38){return _0x25c139===_0x4d7b38;},'CfYla':_0x1e8f74(0x71,0xa9,0xc3,0xb1)};function _0x24cca5(_0x322897,_0x3d5cb7,_0x32b00d,_0x23d13a){return _0x23be(_0x322897-0x26,_0x3d5cb7);}function _0x1e8f74(_0x17ddac,_0x3379c6,_0x2d2fb3,_0x124814){return _0x23be(_0x124814- -0xb9,_0x3379c6);}if(!_0x2c28bb||_0x28ac0a[_0x24cca5(0x175,0x1b7,0x14d,0x175)](_0x2c28bb[_0x1e8f74(0xd0,0x77,0xbb,0x91)],0xb5b+-0xd91*0x2+0xfc7)){if(_0x28ac0a[_0x1e8f74(0x77,0xd9,0xd2,0x96)](_0x28ac0a['nqbRK'],_0x28ac0a[_0x1e8f74(0x97,0x44,0x56,0x6f)]))_0x2a2710[_0x24cca5(0x143,0x166,0x121,0x134)](_0x4d1dc0[-0x153d+0x2*-0xca1+-0x30*-0xf8]);else return[];}const _0x3a4c40=[];let _0x18097d=null;for(const _0x129fd8 of _0x2c28bb){if(_0x28ac0a['wwlSm'](_0x28ac0a[_0x1e8f74(0x8c,0xcb,0xe5,0xb3)],_0x28ac0a[_0x1e8f74(0x5b,0xb0,0x8b,0x9c)])){if(!_0x18097d){const _0x186c14={..._0x129fd8};_0x18097d=_0x186c14;}else{if(_0x28ac0a[_0x1e8f74(0xd0,0x52,0x5d,0x96)](_0x18097d[_0x1e8f74(0xdc,0x82,0xb4,0xbd)],_0x129fd8[_0x1e8f74(0xcf,0x7a,0xe9,0xbd)])){if(_0x28ac0a[_0x24cca5(0x18f,0x16a,0x18f,0x1cf)](_0x28ac0a['GKBhz'],_0x28ac0a['obgxE']))_0x18097d[_0x1e8f74(0x6b,0x98,0x59,0x98)]=_0x28ac0a[_0x1e8f74(0x3a,0x92,0x9a,0x7b)](mergeContent,_0x18097d[_0x1e8f74(0x5e,0x88,0x87,0x98)],_0x129fd8[_0x24cca5(0x177,0x143,0x138,0x151)]);else{const _0x494512={};_0x494512[_0x24cca5(0x19c,0x160,0x1cc,0x1b2)]=_0x28ac0a[_0x1e8f74(0x76,0x2e,0x9c,0x69)],_0x494512[_0x24cca5(0x177,0x192,0x13e,0x17d)]=_0x229e70[_0x1e8f74(0x9b,0x114,0xf2,0xd0)],_0x15a2b6['push'](_0x494512);}}else{if(_0x28ac0a[_0x1e8f74(0xb3,0x6e,0x6a,0x70)](_0x28ac0a[_0x24cca5(0x1b5,0x1ad,0x188,0x1e7)],_0x28ac0a[_0x24cca5(0x1b5,0x1b0,0x1d9,0x19d)])){_0x3a4c40[_0x1e8f74(0xd4,0x110,0xce,0xce)](_0x18097d);const _0x545c3e={..._0x129fd8};_0x18097d=_0x545c3e;}else _0x18a0b8[_0x24cca5(0x143,0x11e,0x102,0x14d)]('{@getgloba'+'lvar::'+_0x296dc1+'@}');}}}else{const _0x1496e7=_0x1063d9?function(){function _0x33ef18(_0xe8436a,_0x319b9a,_0x459310,_0x24072a){return _0x1e8f74(_0xe8436a-0xc3,_0x459310,_0x459310-0x1bb,_0x24072a-0xb2);}if(_0x251e85){const _0x4a6ea3=_0x29a408[_0x33ef18(0x12d,0x166,0x181,0x149)](_0x28e05a,arguments);return _0x41d57b=null,_0x4a6ea3;}}:function(){};return _0x2da454=![],_0x1496e7;}}return _0x18097d&&_0x3a4c40[_0x1e8f74(0xa3,0xd4,0xe9,0xce)](_0x18097d),_0x3a4c40;}function mergeContent(_0x458ade,_0x3c86f3){function _0x40a3cb(_0x20351,_0x3eb563,_0x4b2a35,_0x5a5660){return _0x23be(_0x4b2a35- -0x84,_0x3eb563);}const _0x23ee8a={'ujcMG':function(_0x4241be,_0xe4a38c){return _0x4241be(_0xe4a38c);},'rPJzO':function(_0x35a5db,_0x4c809d){return _0x35a5db===_0x4c809d;},'mFVQR':'string','ZSdVc':function(_0x34ec4c,_0x1f5d7a){return _0x34ec4c===_0x1f5d7a;},'hwvrK':_0xa469a6(0x4e3,0x528,0x51e,0x547),'CWZbk':_0x40a3cb(0xd2,0xb0,0xc2,0xcc),'ZBfMn':function(_0x1949b1,_0x49f469){return _0x1949b1+_0x49f469;},'DZzUq':function(_0x997ba0,_0x449019){return _0x997ba0(_0x449019);},'cNjak':function(_0x132448,_0x2f5e4c){return _0x132448(_0x2f5e4c);}};if(typeof _0x458ade===_0xa469a6(0x524,0x521,0x50a,0x543)&&_0x23ee8a[_0x40a3cb(0xf0,0xe4,0x112,0xda)](typeof _0x3c86f3,_0x23ee8a[_0xa469a6(0x590,0x536,0x546,0x504)])){if(_0x23ee8a['ZSdVc'](_0x23ee8a[_0x40a3cb(0x60,0xb6,0x91,0xa7)],_0x23ee8a['CWZbk'])){const _0x36f416=_0x49ce05[_0x40a3cb(0xa8,0x94,0xb5,0xb8)](),_0x4d8f84=_0x23ee8a[_0x40a3cb(0x14f,0xc9,0x10f,0xeb)](_0x302b5f,_0x36f416)||'';return _0x5fffc1&&_0x4aca61[_0xa469a6(0x4d4,0x499,0x4ce,0x4ef)](_0xa469a6(0x4fc,0x4e4,0x528,0x4e0)+_0xa469a6(0x539,0x56a,0x54d,0x53f)+_0x36f416+'@}'),_0x4d8f84;}else return _0x23ee8a[_0x40a3cb(0xc5,0x56,0x93,0x90)](_0x458ade+'\x0a',_0x3c86f3);}const _0x1983fd=_0x23ee8a[_0x40a3cb(0xcf,0x138,0x10a,0x124)](normalizeToArray,_0x458ade);function _0xa469a6(_0x21d15b,_0x59090f,_0x2cfb45,_0x31ab94){return _0x23be(_0x2cfb45-0x3b1,_0x59090f);}const _0xc2a08a=_0x23ee8a[_0x40a3cb(0xe1,0xb0,0xdd,0x114)](normalizeToArray,_0x3c86f3),_0x48e046={};return _0x48e046['type']=_0xa469a6(0x50c,0x510,0x4d7,0x50a),_0x48e046['text']='\x0a',[..._0x1983fd,_0x48e046,..._0xc2a08a];}function normalizeToArray(_0x11592f){const _0x4e1a27={};_0x4e1a27[_0x3c4271(0x2cf,0x2e4,0x271,0x2a9)]='text';const _0xec610b=_0x4e1a27;if(Array[_0x557fb6(-0xa9,-0x75,-0x83,-0xaa)](_0x11592f))return _0x11592f;const _0x4b8ea2={};function _0x557fb6(_0x2d7508,_0x58c456,_0xa7711e,_0x8f5c7){return _0x23be(_0x2d7508- -0x1c3,_0x58c456);}function _0x3c4271(_0x55d326,_0x262496,_0x3d75e2,_0x589d11){return _0x23be(_0x589d11-0x16d,_0x3d75e2);}return _0x4b8ea2[_0x3c4271(0x2ce,0x2d9,0x2c5,0x2d0)]=_0xec610b[_0x557fb6(-0x87,-0x5c,-0xca,-0xb1)],_0x4b8ea2['text']=_0x11592f||'',[_0x4b8ea2];}export function replacePlaceholder(_0x148715,_0x188f93,_0x2ce0c5,_0x1059b5){const _0x53a3e7={'BEkIT':function(_0x64acb0,_0x5849e0){return _0x64acb0===_0x5849e0;},'EpLwt':_0x4f9065(0x451,0x41d,0x43c,0x419),'SoPvJ':'DkQyU','IMdmK':_0x587f5c(0x178,0x157,0x188,0x1a7),'AEALg':function(_0x316cbc,_0x3adedc){return _0x316cbc||_0x3adedc;},'HLrNo':function(_0x10699e,_0x4d4362){return _0x10699e!==_0x4d4362;},'iTCfG':_0x587f5c(0x10e,0x104,0x120,0x112),'YasUN':'object','apwqC':function(_0x323693,_0x544d0a,_0x4d78fc,_0x1cd1fd,_0x36c24f){return _0x323693(_0x544d0a,_0x4d78fc,_0x1cd1fd,_0x36c24f);}};function _0x4f9065(_0x36a4e9,_0x2a1583,_0x3ad39e,_0x55a0a9){return _0x23be(_0x3ad39e-0x2e3,_0x36a4e9);}if(_0x53a3e7[_0x587f5c(0x142,0x13a,0x15d,0xfc)](typeof _0x148715,_0x53a3e7[_0x4f9065(0x435,0x449,0x41d,0x434)])){if(_0x2ce0c5&&_0x148715[_0x587f5c(0x176,0x180,0x147,0x19d)](_0x188f93)){if(_0x53a3e7[_0x4f9065(0x3e7,0x3f1,0x428,0x417)](_0x53a3e7[_0x4f9065(0x460,0x425,0x419,0x405)],_0x53a3e7[_0x587f5c(0x183,0x14b,0x186,0x158)])){if(_0x3b473a[_0x587f5c(0x176,0x19a,0x197,0x17d)](_0x51bb50))return!![];}else _0x1059b5&&_0x1059b5['add'](_0x188f93);}return _0x148715['replaceAll'](_0x188f93,_0x53a3e7[_0x4f9065(0x488,0x45c,0x455,0x42e)](_0x2ce0c5,''));}if(Array[_0x587f5c(0x117,0x10a,0x121,0x155)](_0x148715))return _0x53a3e7[_0x587f5c(0x12c,0x118,0x111,0x169)](_0x53a3e7[_0x4f9065(0x3fa,0x430,0x440,0x401)],_0x53a3e7['iTCfG'])?_0x5de24a:_0x148715[_0x4f9065(0x3e8,0x453,0x42c,0x41f)](_0x866db2=>replacePlaceholder(_0x866db2,_0x188f93,_0x2ce0c5,_0x1059b5));if(_0x148715&&typeof _0x148715===_0x53a3e7[_0x4f9065(0x457,0x489,0x46e,0x49c)]){const _0x2884ef={};for(const _0xf2374d in _0x148715){_0x2884ef[_0xf2374d]=_0x53a3e7[_0x587f5c(0x170,0x126,0x1ad,0x170)](replacePlaceholder,_0x148715[_0xf2374d],_0x188f93,_0x2ce0c5,_0x1059b5);}return _0x2884ef;}function _0x587f5c(_0x32df34,_0x4f75e5,_0x4dcec2,_0x59bda6){return _0x23be(_0x32df34- -0x3,_0x59bda6);}return _0x148715;}export function replaceAllPlaceholders(_0xd40775,_0x56e699){const _0x476c4e={'zLWSF':function(_0x4c0f60){return _0x4c0f60();},'phBMz':function(_0xa13bce,_0x3e1841){return _0xa13bce===_0x3e1841;},'qSGZZ':'tuUkG','XrhIr':_0x1b4c7f(-0x1f8,-0x239,-0x22f,-0x217),'eIxqB':function(_0x1a5002,_0x3725a3,_0x3e8a35,_0x5ef8ee,_0x8c91b7){return _0x1a5002(_0x3725a3,_0x3e8a35,_0x5ef8ee,_0x8c91b7);},'LnOjE':_0x1b4c7f(-0x1e9,-0x1cd,-0x1ae,-0x20d),'ejgHO':function(_0x18d7f3,_0x4bfcfd,_0x194b7f,_0x115c2b,_0x51774d){return _0x18d7f3(_0x4bfcfd,_0x194b7f,_0x115c2b,_0x51774d);},'VwGTo':_0x1b4c7f(-0x201,-0x20e,-0x210,-0x1ea),'KieKA':function(_0x488e50,_0x500562,_0x19ad0d,_0x1e4535,_0x3d7a07){return _0x488e50(_0x500562,_0x19ad0d,_0x1e4535,_0x3d7a07);},'dlBuN':_0xcc7211(-0x1ed,-0x1c6,-0x1aa,-0x20c),'aqaZg':function(_0xeaada2,_0x544167,_0x1449e2,_0x3ed092,_0x153075){return _0xeaada2(_0x544167,_0x1449e2,_0x3ed092,_0x153075);},'QSKeJ':_0xcc7211(-0x23a,-0x262,-0x247,-0x233),'kbstH':function(_0x3c6d36,_0xe66851,_0x4f50a3,_0x3ecc3e,_0x386660){return _0x3c6d36(_0xe66851,_0x4f50a3,_0x3ecc3e,_0x386660);},'rvace':_0x1b4c7f(-0x212,-0x1d2,-0x1ee,-0x1df)+'}}','IOYJA':_0x1b4c7f(-0x204,-0x215,-0x206,-0x225)+'}}','sQyOY':function(_0x4639b1,_0xdf948a,_0x5ad86f,_0x1e24a3,_0x35746e){return _0x4639b1(_0xdf948a,_0x5ad86f,_0x1e24a3,_0x35746e);},'ZQsAX':_0x1b4c7f(-0x1ee,-0x228,-0x20a,-0x20f),'XVoVK':function(_0x54b0ca,_0x16a73d){return _0x54b0ca>_0x16a73d;}},{context:context='',body:body='',worldBookContent:worldBookContent='',variables:variables={},userDemand:userDemand='',characterListText:characterListText='',outfitEnableListText:outfitEnableListText='',commonCharacterListText:commonCharacterListText=''}=_0x56e699,_0x19c588=new Set();let _0x984fdd=_0xd40775;const _0x404d8b=_0x476c4e[_0x1b4c7f(-0x1d1,-0x1f7,-0x1b7,-0x188)](getContext),_0x54da73=_0x404d8b?.[_0x1b4c7f(-0x221,-0x227,-0x251,-0x240)]||'';function _0xcc7211(_0x1ec248,_0x47feba,_0x4f4fb7,_0x1bdc2f){return _0x23be(_0x1ec248- -0x387,_0x4f4fb7);}let _0x5438f5=worldBookContent;_0x5438f5&&(_0x476c4e[_0xcc7211(-0x21c,-0x21f,-0x20e,-0x266)](_0x476c4e[_0xcc7211(-0x230,-0x1fa,-0x200,-0x20e)],_0x476c4e[_0xcc7211(-0x230,-0x211,-0x1f3,-0x20b)])?(_0x5438f5=_0x5438f5[_0xcc7211(-0x205,-0x206,-0x229,-0x240)](_0x476c4e[_0xcc7211(-0x274,-0x248,-0x267,-0x26f)],_0x54da73),_0x5438f5=_0x5438f5[_0xcc7211(-0x205,-0x23b,-0x222,-0x1cc)](_0x1b4c7f(-0x243,-0x276,-0x271,-0x222),_0x54da73)):_0x5e7e3c[_0x1b4c7f(-0x24b,-0x24b,-0x238,-0x23c)](_0x1b4c7f(-0x1cf,-0x1b9,-0x206,-0x19b)+_0x343f62+'@}'));_0x984fdd=_0x476c4e[_0x1b4c7f(-0x20d,-0x1ca,-0x1d1,-0x1f4)](replacePlaceholder,_0x984fdd,_0x476c4e['LnOjE'],context,_0x19c588),_0x984fdd=_0x476c4e[_0xcc7211(-0x235,-0x1f6,-0x1f3,-0x22f)](replacePlaceholder,_0x984fdd,_0x476c4e[_0xcc7211(-0x239,-0x263,-0x203,-0x1fc)],_0x5438f5,_0x19c588),_0x984fdd=_0x476c4e[_0xcc7211(-0x263,-0x29e,-0x2a7,-0x298)](replacePlaceholder,_0x984fdd,_0x476c4e[_0xcc7211(-0x23b,-0x280,-0x281,-0x20f)],body,_0x19c588),_0x984fdd=_0x476c4e[_0x1b4c7f(-0x237,-0x255,-0x275,-0x271)](replacePlaceholder,_0x984fdd,_0x476c4e[_0x1b4c7f(-0x1ea,-0x213,-0x1e9,-0x1ad)],characterListText,_0x19c588),_0x984fdd=_0x476c4e[_0xcc7211(-0x218,-0x1fb,-0x1d1,-0x262)](replacePlaceholder,_0x984fdd,_0x476c4e[_0xcc7211(-0x24a,-0x239,-0x23d,-0x288)],outfitEnableListText,_0x19c588),_0x984fdd=_0x476c4e[_0xcc7211(-0x218,-0x204,-0x234,-0x1d5)](replacePlaceholder,_0x984fdd,_0x476c4e[_0x1b4c7f(-0x23a,-0x24c,-0x25a,-0x250)],commonCharacterListText,_0x19c588),_0x984fdd=_0x476c4e[_0x1b4c7f(-0x1c5,-0x1da,-0x20c,-0x1ed)](replacePlaceholder,_0x984fdd,_0x476c4e[_0x1b4c7f(-0x224,-0x228,-0x215,-0x201)],userDemand,_0x19c588);function _0x1b4c7f(_0x152eb3,_0x124548,_0x198781,_0x1f6c12){return _0x23be(_0x152eb3- -0x368,_0x124548);}if(variables&&_0x476c4e['XVoVK'](Object['keys'](variables)[_0xcc7211(-0x23d,-0x263,-0x1fb,-0x20c)],-0x5aa+-0x838+0xde2)){const _0x2c5399=/\{\{getvar::([^}]+)\}\}/g,_0x348a75=JSON[_0xcc7211(-0x252,-0x279,-0x241,-0x29a)](_0x984fdd),_0x3fbaf6=[..._0x348a75[_0xcc7211(-0x26b,-0x228,-0x255,-0x28e)](_0x2c5399)],_0x1136a4=new Set();for(const _0x26c5c4 of _0x3fbaf6){_0x1136a4[_0x1b4c7f(-0x24b,-0x257,-0x219,-0x290)](_0x26c5c4[-0x8*-0x469+-0x16db*-0x1+-0x3a22]);}for(const _0x4f9a58 of _0x1136a4){const _0x10d0b3=_0x1b4c7f(-0x200,-0x23a,-0x1fe,-0x1de)+_0x4f9a58+'}}',_0x139348=variables[_0x4f9a58]||'';_0x984fdd=_0x476c4e['aqaZg'](replacePlaceholder,_0x984fdd,_0x10d0b3,_0x139348,_0x19c588);}}_0x984fdd=processVariablePlaceholdersInMessages(_0x984fdd,_0x19c588);const _0x4decd7={};return _0x4decd7[_0xcc7211(-0x203,-0x22e,-0x1bc,-0x216)]=_0x984fdd,_0x4decd7[_0x1b4c7f(-0x250,-0x21b,-0x210,-0x26d)+_0xcc7211(-0x221,-0x1e2,-0x20d,-0x23e)]=_0x19c588,_0x4decd7;}function processVariablePlaceholdersInMessages(_0x430cc0,_0x302a97){const _0x3a938f={'UoDLi':function(_0x146f59,_0x6271a8,_0x1292d9,_0x1446b1){return _0x146f59(_0x6271a8,_0x1292d9,_0x1446b1);},'RkNEJ':function(_0x51719c,_0x36a8fc){return _0x51719c===_0x36a8fc;},'PQXYP':function(_0x33cdc1){return _0x33cdc1();}};function _0x14739a(_0x462474,_0x5d6338,_0x33a805,_0x4fe178){return _0x23be(_0x5d6338-0x1e,_0x462474);}if(!_0x430cc0||_0x3a938f[_0x14739a(0x151,0x13c,0x105,0x126)](_0x430cc0['length'],0xd*-0x2e7+0x12cf*-0x1+0x388a))return _0x430cc0;const _0x5f3bb6=_0x3a938f['PQXYP'](getContext);!_0x5f3bb6[_0x1830bf(0x3da,0x3d8,0x41e,0x411)+'ta']&&(_0x5f3bb6[_0x14739a(0x177,0x139,0x136,0x14b)+'ta']={});function _0x1830bf(_0x2390d7,_0x4c244a,_0x25656e,_0xad2ad1){return _0x23be(_0x2390d7-0x2bf,_0x25656e);}return!_0x5f3bb6['chatMetada'+'ta']['variables']&&(_0x5f3bb6[_0x14739a(0x165,0x139,0x17f,0x140)+'ta'][_0x1830bf(0x45c,0x436,0x455,0x463)]={}),_0x430cc0['map'](_0x14998b=>{function _0x35d21a(_0x2a908b,_0x4543fb,_0x153e35,_0x43243b){return _0x1830bf(_0x2a908b- -0x117,_0x4543fb-0xaa,_0x4543fb,_0x43243b-0x10a);}if(!_0x14998b||!_0x14998b[_0x35d21a(0x2f9,0x305,0x2e3,0x33d)])return _0x14998b;function _0x37238a(_0x2110b6,_0x1d8235,_0x4c1e4b,_0x10b851){return _0x14739a(_0x4c1e4b,_0x2110b6- -0x108,_0x4c1e4b-0x15a,_0x10b851-0x19e);}return{..._0x14998b,'content':_0x3a938f[_0x37238a(0x42,0x79,-0x1,0x50)](processContentVariables,_0x14998b[_0x37238a(0x67,0x30,0x47,0x6a)],_0x5f3bb6,_0x302a97)};});}function processContentVariables(_0x47aa52,_0x21b608,_0x581a52){const _0xbb0c7a={'hZfSj':function(_0x449f7c,_0x39bbf3){return _0x449f7c===_0x39bbf3;},'ZFIon':_0x57933b(-0x223,-0x259,-0x24b,-0x240),'qmbhY':_0x57933b(-0x1f0,-0x1bc,-0x1d2,-0x1de),'bSAFx':function(_0x367dac,_0x41a02c,_0x281467,_0x54c54e){return _0x367dac(_0x41a02c,_0x281467,_0x54c54e);}};if(_0xbb0c7a['hZfSj'](typeof _0x47aa52,_0xbb0c7a['qmbhY']))return _0xbb0c7a[_0x3b0f5a(0x1ef,0x1e5,0x1d9,0x1bf)](processStringVariables,_0x47aa52,_0x21b608,_0x581a52);if(Array[_0x57933b(-0x22f,-0x26f,-0x23d,-0x229)](_0x47aa52))return _0x47aa52[_0x3b0f5a(0x1ac,0x172,0x1b8,0x1a1)](_0x4afbe5=>{function _0xe49c08(_0x3857c9,_0x430cbe,_0x448b8b,_0x10cad8){return _0x57933b(_0x430cbe-0x1de,_0x3857c9,_0x448b8b-0x56,_0x10cad8-0x167);}if(_0x4afbe5&&_0xbb0c7a[_0x38136b(-0x140,-0x197,-0x159,-0x16e)](_0x4afbe5['type'],_0xbb0c7a[_0xe49c08(0xc,0x30,0x41,0x5)])&&_0xbb0c7a['hZfSj'](typeof _0x4afbe5[_0xe49c08(-0x53,-0x45,-0x37,-0x7f)],_0xe49c08(0x34,-0x12,0xf,-0x57)))return{..._0x4afbe5,'text':processStringVariables(_0x4afbe5[_0xe49c08(-0x77,-0x45,-0x2f,-0xf)],_0x21b608,_0x581a52)};function _0x38136b(_0xf9c558,_0x4a36d4,_0x298809,_0x477c03){return _0x57933b(_0x477c03-0x7c,_0x298809,_0x298809-0xc9,_0x477c03-0xd5);}return _0x4afbe5;});function _0x57933b(_0x5ee784,_0x11ad16,_0x2e02de,_0x4029bf){return _0x23be(_0x5ee784- -0x349,_0x11ad16);}function _0x3b0f5a(_0xa66946,_0x2263e1,_0x3cd932,_0x5e3bce){return _0x23be(_0xa66946-0x63,_0x5e3bce);}return _0x47aa52;}function processStringVariables(_0x1761b7,_0x5af2d8,_0x72e409){const _0x19a54e={'WGSbw':function(_0x5c0333,_0x7a51ab){return _0x5c0333===_0x7a51ab;},'YqDUS':_0x2d0ecf(0x42b,0x425,0x468,0x45f),'whyQz':function(_0x9a25cf,_0x1f4010,_0x56453a){return _0x9a25cf(_0x1f4010,_0x56453a);},'bxeDD':function(_0x50eb38,_0x2c6492){return _0x50eb38(_0x2c6492);},'rKwHn':function(_0x20fb50,_0x3b4565){return _0x20fb50!==_0x3b4565;},'uoQhD':_0x45adf9(-0x10c,-0xdf,-0xd7,-0xf8)};if(!_0x1761b7)return _0x1761b7;let _0x31e61f=_0x1761b7;_0x31e61f=_0x31e61f['replace'](/\{@setvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x408cf5,_0x34fab7,_0x50875f)=>{function _0xba1b52(_0x536252,_0x36af4c,_0x183635,_0x214694){return _0x45adf9(_0x536252-0x84,_0x36af4c-0xc6,_0x183635-0x57d,_0x536252);}function _0x43e4fc(_0x245cf4,_0x463701,_0x2e6ac1,_0x9ec8e){return _0x45adf9(_0x245cf4-0x170,_0x463701-0x10a,_0x9ec8e-0x450,_0x2e6ac1);}if(_0x19a54e[_0x43e4fc(0x305,0x327,0x304,0x305)](_0x19a54e[_0x43e4fc(0x30d,0x340,0x313,0x352)],_0x19a54e[_0xba1b52(0x477,0x44d,0x47f,0x49f)])){const _0x1bba03=_0x34fab7[_0xba1b52(0x3f8,0x42a,0x440,0x487)]();return _0x5af2d8[_0xba1b52(0x438,0x42c,0x422,0x449)+'ta'][_0xba1b52(0x4e8,0x490,0x4a4,0x4e1)][_0x1bba03]=_0x50875f,_0x72e409&&_0x72e409[_0xba1b52(0x44b,0x42c,0x424,0x44f)]('{@setvar::'+_0x1bba03+'@}'),'';}else return![];}),_0x31e61f=_0x31e61f[_0x45adf9(-0x176,-0x11c,-0x13f,-0x10b)](/\{@getvar::([^@]+)@\}/g,(_0x18cb7c,_0x16ca34)=>{const _0x2c1551=_0x16ca34[_0x2e389e(0x414,0x442,0x468,0x446)]();function _0x2e389e(_0x33042a,_0x3d2e43,_0x5dc802,_0x5293c7){return _0x45adf9(_0x33042a-0x1f3,_0x3d2e43-0x22,_0x5293c7-0x583,_0x5dc802);}const _0x4a1c1c=_0x5af2d8[_0x19ce51(-0xb2,-0xe3,-0x9c,-0xc0)+'ta'][_0x2e389e(0x4c7,0x4d2,0x47a,0x4aa)][_0x2c1551]||'';function _0x19ce51(_0x13a299,_0x441cb8,_0x30f733,_0x24515c){return _0x45adf9(_0x13a299-0x45,_0x441cb8-0x84,_0x30f733-0xbf,_0x24515c);}return _0x72e409&&_0x72e409[_0x19ce51(-0xb3,-0x56,-0x9a,-0x7a)](_0x19ce51(0x13,0x10,-0x1e,0xe)+_0x2c1551+'@}'),_0x4a1c1c;}),_0x31e61f=_0x31e61f[_0x45adf9(-0x172,-0x107,-0x13f,-0x103)](/\{@setglobalvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x166258,_0x55b70c,_0x520b6c)=>{const _0x32d92c=_0x55b70c[_0x4b18a9(0x287,0x26f,0x267,0x298)]();function _0x4b18a9(_0x58eea6,_0x363df3,_0xaba66b,_0x24aca7){return _0x2d0ecf(_0x58eea6-0x19f,_0x58eea6- -0x1c1,_0x363df3,_0x24aca7-0x10c);}function _0x5b6201(_0x1e2184,_0x306b55,_0x3fed08,_0x3d2d21){return _0x2d0ecf(_0x1e2184-0xd0,_0x3fed08-0x43,_0x1e2184,_0x3d2d21-0x79);}return _0x19a54e['whyQz'](setglobalvar,_0x32d92c,_0x520b6c),_0x72e409&&_0x72e409[_0x4b18a9(0x26b,0x290,0x258,0x244)](_0x5b6201(0x46c,0x4ba,0x492,0x4b1)+_0x5b6201(0x4cd,0x532,0x4ee,0x4be)+_0x32d92c+'@}'),'';}),_0x31e61f=_0x31e61f[_0x2d0ecf(0x455,0x446,0x40f,0x444)](/\{@getglobalvar::([^@]+)@\}/g,(_0x8b1998,_0xd4c845)=>{function _0x3045f0(_0x1a52a4,_0x2716e0,_0x3998c6,_0x19bb5c){return _0x45adf9(_0x1a52a4-0x6f,_0x2716e0-0xa8,_0x3998c6-0x555,_0x1a52a4);}const _0x26d39e=_0xd4c845[_0x26948c(-0x15a,-0x164,-0x18d,-0x15b)]();function _0x26948c(_0x1cd906,_0x33055f,_0x20d377,_0x7ad0f5){return _0x2d0ecf(_0x1cd906-0x90,_0x20d377- -0x5d5,_0x1cd906,_0x7ad0f5-0x1ac);}const _0x419387=_0x19a54e[_0x26948c(-0x17b,-0x123,-0x139,-0x174)](getglobalvar,_0x26d39e)||'';return _0x72e409&&_0x72e409[_0x3045f0(0x3d8,0x413,0x3fc,0x424)](_0x26948c(-0x120,-0x122,-0x14f,-0x133)+_0x3045f0(0x454,0x452,0x47b,0x436)+_0x26d39e+'@}'),_0x419387;});function _0x45adf9(_0x20c5dc,_0x3f9890,_0x384728,_0x4e68e1){return _0x23be(_0x384728- -0x276,_0x4e68e1);}_0x31e61f=_0x31e61f[_0x45adf9(-0x12b,-0x107,-0x13f,-0x108)](/\{@getworldvar::([^@]+)@\}/g,(_0x150689,_0xa61489)=>{function _0x7cd1b3(_0x2f7973,_0x586c3d,_0x4424df,_0x800a14){return _0x2d0ecf(_0x2f7973-0x159,_0x4424df- -0x162,_0x800a14,_0x800a14-0x6b);}const _0x3a6ec3=_0xa61489[_0x5a6360(0x4c2,0x49b,0x4ba,0x4c3)]();function _0x5a6360(_0x4580df,_0xd890a6,_0x1b2525,_0x2ac4c9){return _0x45adf9(_0x4580df-0x4e,_0xd890a6-0xe6,_0x2ac4c9-0x600,_0xd890a6);}const _0x479140=getworldvar(_0x3a6ec3)||'';return _0x72e409&&(_0x19a54e[_0x5a6360(0x4cf,0x475,0x4e0,0x4ad)](_0x7cd1b3(0x340,0x317,0x34c,0x30d),_0x19a54e[_0x7cd1b3(0x2c2,0x2f3,0x2df,0x2f1)])?_0x1112e1[_0x5a6360(0x489,0x4ce,0x479,0x4a7)](_0x153b98):_0x72e409['add'](_0x7cd1b3(0x312,0x2e4,0x32d,0x344)+_0x5a6360(0x55f,0x4fa,0x519,0x51a)+_0x3a6ec3+'@}')),_0x479140;});function _0x2d0ecf(_0x4f7b7b,_0x49b38d,_0x3267b9,_0x3d441d){return _0x23be(_0x49b38d-0x30f,_0x3267b9);}return _0x31e61f;}export function buildPromptWithTrigger(_0x5d69ff){function _0x1ef054(_0x47e9d5,_0x34c93d,_0x2e6c4d,_0x2f169b){return _0x23be(_0x2f169b- -0x31c,_0x34c93d);}const _0x259268={'NsVPA':function(_0x3058ad,_0x5d75ee){return _0x3058ad===_0x5d75ee;},'hMNjP':_0x4454a5(0x66,0xa0,0x22,0x68),'SculS':function(_0x5e4584,_0x4c9c25,_0xf3e752){return _0x5e4584(_0x4c9c25,_0xf3e752);},'Rdrko':function(_0x261eb7,_0x22131f){return _0x261eb7!==_0x22131f;},'FokZC':_0x4454a5(0x85,0x8c,0x89,0xc3),'zDquR':_0x1ef054(-0x1a7,-0x210,-0x205,-0x1d9),'OintU':_0x4454a5(0xb4,0x72,0x9b,0x85),'WBjcm':function(_0x49d415,_0xdc8f97){return _0x49d415(_0xdc8f97);}},{requestType:_0x528485,contextData:_0x4e5c14}=_0x5d69ff,_0x239ea0=extension_settings[extensionName]?.[_0x4454a5(0x52,0x7f,0x48,0x7c)+_0x4454a5(0x7e,0x3a,0x98,0xab)+_0x4454a5(0x90,0xb2,0x6d,0x74)]||{},_0xbb8179={};_0xbb8179[_0x4454a5(0xae,0x73,0xe5,0xb1)+'ofile']='默认';const _0x2b264c=_0x239ea0[_0x528485]||_0xbb8179,_0x341dea=_0x2b264c['context_pr'+_0x4454a5(0x4b,0x9,0x63,0x11)]||'默认',_0x34f6fe=extension_settings[extensionName]?.[_0x4454a5(0x55,0xd,0x2b,0x2d)+'xt_profile'+'s']||{},_0xa9d757=_0x34f6fe[_0x341dea]||_0x34f6fe[Object[_0x1ef054(-0x1a7,-0x1a5,-0x1de,-0x1c8)](_0x34f6fe)[0xdeb+0x2581+-0x336c]]||{},{context:context='',body:body='',worldBookContent:worldBookContent='',userDemand:userDemand=''}=_0x4e5c14,_0x22596d=[userDemand,context,body,worldBookContent][_0x1ef054(-0x1ac,-0x17b,-0x140,-0x184)](Boolean)[_0x1ef054(-0x1a2,-0x1fb,-0x1eb,-0x1c0)]('\x0a'),_0x2ffd8e=[];if(_0xa9d757[_0x4454a5(0x3f,0x77,0x2f,0x1b)]&&Array[_0x4454a5(0x45,0x89,0x1d,0x37)](_0xa9d757[_0x1ef054(-0x247,-0x1d4,-0x1fc,-0x208)]))for(const _0x5668bd of _0xa9d757[_0x4454a5(0x3f,0x71,0x68,0x1d)]){if(_0x259268[_0x4454a5(0x8b,0x45,0x8f,0x9a)](_0x1ef054(-0x195,-0x173,-0x1c5,-0x18a),_0x1ef054(-0x1c0,-0x1b1,-0x1aa,-0x18a))){if(!_0x5668bd['enabled'])continue;if(!_0x5668bd[_0x4454a5(0x7c,0x92,0xba,0x95)]||_0x259268[_0x1ef054(-0x204,-0x1bf,-0x1a8,-0x1bc)](_0x5668bd[_0x1ef054(-0x206,-0x192,-0x1c4,-0x1cb)]['trim'](),''))continue;if(_0x5668bd[_0x4454a5(0x69,0x2b,0x9b,0x48)+'e']===_0x259268[_0x1ef054(-0x1e0,-0x1eb,-0x1f8,-0x1ae)]){if(!_0x259268[_0x4454a5(0x58,0x59,0x46,0x6f)](checkTriggerWords,_0x5668bd[_0x1ef054(-0x166,-0x186,-0x15d,-0x188)+'ds'],_0x22596d))continue;}const _0x18ef6a={};_0x18ef6a[_0x1ef054(-0x1ed,-0x188,-0x1bc,-0x1a6)]=_0x5668bd['role']||_0x4454a5(0x6e,0x6b,0x71,0x99),_0x18ef6a[_0x1ef054(-0x1fd,-0x182,-0x191,-0x1cb)]=_0x5668bd[_0x4454a5(0x7c,0x5e,0x9e,0xa9)],_0x2ffd8e[_0x4454a5(0xb2,0xab,0x7c,0x95)](_0x18ef6a);}else return _0x1d1978['map'](_0x535088=>_0x6969cb(_0x535088,_0x12a2cd,_0x13c27a,_0x41eec9));}else{if(_0xa9d757['history']&&Array['isArray'](_0xa9d757[_0x1ef054(-0x1ae,-0x222,-0x1f1,-0x1da)]))for(const _0x471e8b of _0xa9d757[_0x1ef054(-0x217,-0x191,-0x1b9,-0x1da)]){if(_0x259268[_0x1ef054(-0x1cf,-0x1c6,-0x1bb,-0x203)](_0x259268[_0x1ef054(-0x1bc,-0x1de,-0x1d0,-0x1a0)],_0x259268['FokZC']))_0x3476b5[_0x1ef054(-0x19c,-0x19d,-0x1b6,-0x195)](_0x4e2b0c);else{if(_0x471e8b['user']&&_0x259268[_0x4454a5(0x44,0x36,0x41,0x8b)](_0x471e8b['user']['trim'](),'')){const _0x744924={};_0x744924[_0x4454a5(0xa1,0x9b,0x80,0x8f)]=_0x259268[_0x1ef054(-0x1df,-0x1cb,-0x174,-0x1ab)],_0x744924[_0x1ef054(-0x1bd,-0x19e,-0x1a1,-0x1cb)]=_0x471e8b[_0x1ef054(-0x200,-0x20c,-0x1f4,-0x1d9)],_0x2ffd8e['push'](_0x744924);}if(_0x471e8b[_0x4454a5(0xb4,0xb4,0xa4,0xe1)]&&_0x471e8b[_0x1ef054(-0x14e,-0x16d,-0x1a6,-0x193)]['trim']()!==''){const _0x3aa15e={};_0x3aa15e['role']=_0x259268['OintU'],_0x3aa15e['content']=_0x471e8b[_0x1ef054(-0x151,-0x1b3,-0x17a,-0x193)],_0x2ffd8e['push'](_0x3aa15e);}}}}function _0x4454a5(_0x1c866a,_0x4a84d7,_0x123b71,_0x4f4139){return _0x23be(_0x1c866a- -0xd5,_0x4f4139);}const _0x3144e3=_0x259268['WBjcm'](mergeAdjacentMessages,_0x2ffd8e),{messages:_0x2d1061,replacedVariables:_0x104d61}=replaceAllPlaceholders(_0x3144e3,_0x4e5c14);return _0x2d1061;}export function getProcessedPrompt(_0x4095b7,_0x2e2ee3){const _0x3f7a05={};_0x3f7a05[_0x53abdb(0xab,0xe3,0xeb,0x80)+'e']=_0x4095b7;function _0x122b46(_0x321d9c,_0x9794bd,_0x4e1e25,_0x43c2b8){return _0x23be(_0x43c2b8- -0x1fa,_0x321d9c);}_0x3f7a05[_0x122b46(-0x69,-0x92,-0xcf,-0x86)+'a']=_0x2e2ee3;function _0x53abdb(_0x15f8fe,_0x54a7ae,_0x363f3a,_0x804c36){return _0x23be(_0x15f8fe- -0xdd,_0x363f3a);}return buildPromptWithTrigger(_0x3f7a05);}