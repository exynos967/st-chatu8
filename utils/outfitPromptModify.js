(function(_0x4f4112,_0x9add7b){function _0x27a3f(_0xe1d655,_0x23352b,_0x271cfa,_0x3720ad){return _0x54f3(_0x23352b- -0x2e6,_0xe1d655);}function _0x3ee41d(_0xa3207,_0x50eea7,_0x46d4da,_0x35cc2b){return _0x54f3(_0xa3207-0x1e5,_0x35cc2b);}const _0x2a8676=_0x4f4112();while(!![]){try{const _0x346042=-parseInt(_0x3ee41d(0x4c5,0x4ec,0x492,0x554))/(0x1793*0x1+0x1c5+-0x1957)*(parseInt(_0x3ee41d(0x407,0x3e3,0x3d9,0x412))/(0x3*0x3+-0x18f2*-0x1+0x1*-0x18f9))+-parseInt(_0x27a3f(0x8,-0x6e,-0x31,-0xdf))/(0xf*-0x27e+-0x8b*0x32+0x29*0x193)+parseInt(_0x27a3f(-0x14c,-0x118,-0xee,-0x9e))/(0x93b*-0x4+-0xb*0x31d+0x472f*0x1)*(-parseInt(_0x3ee41d(0x4ad,0x50f,0x4b6,0x49c))/(-0x261*-0xf+0x1fe6+-0x4390*0x1))+parseInt(_0x3ee41d(0x415,0x3dd,0x3f2,0x453))/(-0x1*-0x5+-0x1cde+0x1*0x1cdf)+parseInt(_0x3ee41d(0x39e,0x395,0x349,0x360))/(0x1*-0xa88+0x212b+-0x1*0x169c)*(-parseInt(_0x27a3f(-0x80,-0x9c,-0xbf,-0x35))/(0x113e*-0x1+0x1*0x21eb+0x10a5*-0x1))+parseInt(_0x3ee41d(0x3f4,0x36b,0x3d6,0x473))/(-0x2*0x7bb+-0x13ed+0x236c)*(-parseInt(_0x27a3f(-0x125,-0xe9,-0xb4,-0x158))/(-0x4*0x49d+-0x4*0x254+0xde7*0x2))+parseInt(_0x27a3f(-0x19f,-0x11b,-0x139,-0x1b1))/(-0xc1*0x22+0x1c87+-0x2da)*(parseInt(_0x27a3f(-0x167,-0x130,-0x18a,-0x1ac))/(-0x46*-0x25+-0xf*-0x1b7+-0xb*0x341));if(_0x346042===_0x9add7b)break;else _0x2a8676['push'](_0x2a8676['shift']());}catch(_0x5575ce){_0x2a8676['push'](_0x2a8676['shift']());}}}(_0xd790,0x13b3b1+0xb74bd+-0x1452af));const _0x23a070=(function(){const _0x42e022={};_0x42e022[_0x58373d(0x184,0xd2,0x192,0xf9)]=function(_0x3c71d8,_0x5cd56d){return _0x3c71d8!==_0x5cd56d;};function _0x87e87(_0x55de5b,_0x4f596f,_0x5ca72f,_0x436791){return _0x54f3(_0x436791- -0xa1,_0x5ca72f);}_0x42e022['mizYj']=_0x87e87(0x1eb,0x1ac,0x12a,0x1b0);function _0x58373d(_0x91aae9,_0x45848d,_0x31b8b9,_0x1e3aff){return _0x54f3(_0x1e3aff- -0x1ad,_0x45848d);}_0x42e022[_0x87e87(0x13e,0x1f3,0x1b9,0x1c3)]=_0x87e87(0x165,0x144,0xff,0x127);const _0x2cd54f=_0x42e022;let _0x106f9c=!![];return function(_0x213986,_0x238858){function _0x419bc9(_0x331a05,_0x389479,_0x4713e5,_0x553070){return _0x58373d(_0x331a05-0xc9,_0x553070,_0x4713e5-0x3f,_0x389479- -0x1f2);}function _0xad77bf(_0x30ffb4,_0x4d0b5c,_0x4335d9,_0x2caea2){return _0x58373d(_0x30ffb4-0x16b,_0x4335d9,_0x4335d9-0x11e,_0x2caea2-0x16);}if(_0x2cd54f[_0xad77bf(0xf2,0x8f,0x55,0xcd)]!==_0x2cd54f[_0xad77bf(0x10d,0xea,0x146,0xcd)])return _0xd68a48&&_0x4765cb['includes'](_0x44e8a4)&&(_0x2a4b95&&_0x26319d['add'](_0xa26378)),_0x3f0f0d['replaceAll'](_0x4b05c3,_0x295414);else{const _0xce3d15=_0x106f9c?function(){function _0x66a0c4(_0x5b386c,_0x501f43,_0x503000,_0x9640a0){return _0xad77bf(_0x5b386c-0x5,_0x501f43-0x18d,_0x5b386c,_0x503000-0x5a);}function _0x2f3b2(_0x3b5954,_0x38864b,_0x483591,_0x27dd59){return _0xad77bf(_0x3b5954-0xe2,_0x38864b-0xb7,_0x38864b,_0x27dd59-0x1a9);}if(_0x2cd54f[_0x2f3b2(0x22f,0x29f,0x255,0x2b8)](_0x2cd54f[_0x66a0c4(0xbf,0x49,0xa6,0x3c)],_0x2cd54f[_0x66a0c4(0x44,0xb9,0xa6,0x12)]))return _0x2b3134;else{if(_0x238858){const _0x34219d=_0x238858[_0x2f3b2(0x240,0x17b,0x263,0x1de)](_0x213986,arguments);return _0x238858=null,_0x34219d;}}}:function(){};return _0x106f9c=![],_0xce3d15;}};}()),_0x250d2f=_0x23a070(this,function(){const _0x454dff={};function _0x1f7e04(_0x34dae6,_0x7db51e,_0x206520,_0x3c704e){return _0x54f3(_0x34dae6-0x31e,_0x3c704e);}function _0x2fcc73(_0x26f61b,_0x36925b,_0x59e520,_0x3a4703){return _0x54f3(_0x26f61b- -0x132,_0x3a4703);}_0x454dff[_0x2fcc73(0x7e,0x77,0x5f,-0xd)]=_0x2fcc73(0x16b,0x1ca,0x1af,0x121)+'+$';const _0x55c6df=_0x454dff;return _0x250d2f[_0x2fcc73(0x199,0x1bc,0x1e7,0x130)]()[_0x2fcc73(0xe8,0x129,0x17a,0xa1)](_0x55c6df[_0x2fcc73(0x7e,0xb0,-0x15,0x10f)])[_0x1f7e04(0x5e9,0x59f,0x652,0x593)]()[_0x2fcc73(0x89,0xdf,0x100,0x121)+'r'](_0x250d2f)[_0x1f7e04(0x538,0x5ab,0x4a3,0x55c)](_0x55c6df[_0x1f7e04(0x4ce,0x4f7,0x4f1,0x4a5)]);});_0x250d2f();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';function _0x54f3(_0x186cb5,_0x2d929a){_0x186cb5=_0x186cb5-(-0x1*0xe8f+-0x21c0+0x31ff);const _0x1aec4d=_0xd790();let _0x831a12=_0x1aec4d[_0x186cb5];if(_0x54f3['hWDvHY']===undefined){var _0x4f0dfc=function(_0x1b711d){const _0x5278ea='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x478e48='',_0x219baf='',_0x3202ff=_0x478e48+_0x4f0dfc;for(let _0x50f588=0x1e88*0x1+-0x261e+0x796,_0x235968,_0x4e7e8a,_0x51789c=0x6c9*0x3+0xc3d+-0x7*0x4a8;_0x4e7e8a=_0x1b711d['charAt'](_0x51789c++);~_0x4e7e8a&&(_0x235968=_0x50f588%(-0x6e5*0x4+-0x382*0x5+0x2d22)?_0x235968*(0x368+-0x264a+0x2322)+_0x4e7e8a:_0x4e7e8a,_0x50f588++%(0x80f+0x1*0x1ed+-0x9f8*0x1))?_0x478e48+=_0x3202ff['charCodeAt'](_0x51789c+(0x1997*-0x1+0xe13*-0x2+0x35c7*0x1))-(-0x25*-0x71+0xffe+0x57*-0x5f)!==-0x1f*0x9d+-0x189d+0x2ba0?String['fromCharCode'](0x18ce+-0x167*-0x15+0x191*-0x22&_0x235968>>(-(-0x2*0xe0b+0x136d+0x8ab)*_0x50f588&0xc98+0x1665+-0x22f7)):_0x50f588:0x23d7+-0xb*0xb5+-0x2*0xe08){_0x4e7e8a=_0x5278ea['indexOf'](_0x4e7e8a);}for(let _0x1efa04=0x3*0xaee+0x5ca+-0xcdc*0x3,_0xad031b=_0x478e48['length'];_0x1efa04<_0xad031b;_0x1efa04++){_0x219baf+='%'+('00'+_0x478e48['charCodeAt'](_0x1efa04)['toString'](0x607+-0xe*-0x145+-0x3b*0x67))['slice'](-(-0xc31+0xf87+-0x354));}return decodeURIComponent(_0x219baf);};_0x54f3['sYQTdm']=_0x4f0dfc,_0x54f3['PsyNns']={},_0x54f3['hWDvHY']=!![];}const _0x2f2ddb=_0x1aec4d[-0x1fd9+0xdcc*-0x1+0xf37*0x3],_0xd319e6=_0x186cb5+_0x2f2ddb,_0x14e756=_0x54f3['PsyNns'][_0xd319e6];if(!_0x14e756){const _0x3ff5a1=function(_0x5aa874){this['mYZwtY']=_0x5aa874,this['jXijZm']=[0x1e8+0x1971+-0x1b58,0x2a3+0x1c5*-0xf+-0x24*-0xaa,-0x1*-0x2559+0xe*0x195+0x13d5*-0x3],this['QHfzZE']=function(){return'newState';},this['qHvMYc']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['xvGueU']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3ff5a1['prototype']['cvyEeX']=function(){const _0x1d3118=new RegExp(this['qHvMYc']+this['xvGueU']),_0x14d72b=_0x1d3118['test'](this['QHfzZE']['toString']())?--this['jXijZm'][0x1*-0xd81+0x1*-0x1551+-0x5*-0x6f7]:--this['jXijZm'][0x327+0x223b+-0x42*0x91];return this['AjdZRz'](_0x14d72b);},_0x3ff5a1['prototype']['AjdZRz']=function(_0x221441){if(!Boolean(~_0x221441))return _0x221441;return this['seDSxb'](this['mYZwtY']);},_0x3ff5a1['prototype']['seDSxb']=function(_0x566362){for(let _0x367f44=0x175+0x601*0x1+-0x776,_0x45b1f1=this['jXijZm']['length'];_0x367f44<_0x45b1f1;_0x367f44++){this['jXijZm']['push'](Math['round'](Math['random']())),_0x45b1f1=this['jXijZm']['length'];}return _0x566362(this['jXijZm'][-0x2cf*0x5+0xe0*-0x7+-0x1*-0x142b]);},new _0x3ff5a1(_0x54f3)['cvyEeX'](),_0x831a12=_0x54f3['sYQTdm'](_0x831a12),_0x54f3['PsyNns'][_0xd319e6]=_0x831a12;}else _0x831a12=_0x14e756;return _0x831a12;}import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{loadOutfitPreset}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0xdfbff8,_0x4ada3a,_0x1a80c9,_0x39acf7){function _0x2fe49b(_0x20a2a4,_0x2d25c7,_0x273c68,_0x1fc459){return _0x54f3(_0x273c68- -0x24,_0x1fc459);}const _0xb123b0={'Szfuy':_0x18cca2(0x400,0x3df,0x3e7,0x42d),'nAvNH':'[outfitPro'+_0x2fe49b(0x23a,0x117,0x1a0,0x20f)+_0x2fe49b(0x1b9,0x253,0x213,0x18a),'luNHk':_0x2fe49b(0x200,0x1f6,0x200,0x276)+'message\x20at'+_0x2fe49b(0x1a0,0x1e1,0x1bc,0x1fb),'cbzBA':function(_0x3c1bec,_0x41d0b5){return _0x3c1bec===_0x41d0b5;},'sNCSy':'text','lUGxq':function(_0x1df68b,_0x1ae067){return _0x1df68b!==_0x1ae067;},'ImTXx':'(空)','QwkOY':function(_0x3d868a,_0x5abafb){return _0x3d868a>_0x5abafb;},'GQojE':_0x2fe49b(0x326,0x266,0x2ba,0x333),'fBJtl':function(_0x331ff1,_0x439d9b){return _0x331ff1>_0x439d9b;},'dlNoy':_0x2fe49b(0x2f6,0x2ff,0x275,0x2e8),'XkRCS':'JXpTq','AuNFl':'rRYhk','JJCJk':_0x18cca2(0x4d7,0x5a0,0x52c,0x524),'DfupQ':'goXKX','LyzvY':_0x18cca2(0x4ef,0x4cc,0x4fb,0x4c3),'NBtHM':function(_0xf0ed81,_0x1eeab6){return _0xf0ed81!==_0x1eeab6;},'tbfrX':'qFVYR','ocEKG':_0x18cca2(0x539,0x4be,0x51d,0x4d0),'xcjhO':_0x18cca2(0x3fc,0x4a0,0x425,0x455),'ooLuo':function(_0xc364f4,_0x47f9fc,_0x4ad363,_0xf160c9,_0xd471d6){return _0xc364f4(_0x47f9fc,_0x4ad363,_0xf160c9,_0xd471d6);}};function _0x18cca2(_0x5a1269,_0x1e934a,_0x49a52b,_0xfa23e0){return _0x54f3(_0xfa23e0-0x257,_0x1e934a);}if(typeof _0xdfbff8===_0xb123b0[_0x18cca2(0x413,0x43a,0x3c1,0x408)]){if(_0xb123b0[_0x2fe49b(0x24b,0x309,0x28e,0x2c2)]!==_0xb123b0[_0x2fe49b(0x1d4,0x208,0x245,0x2a0)])return _0x1a80c9&&_0xdfbff8['includes'](_0x4ada3a)&&(_0x39acf7&&(_0xb123b0[_0x18cca2(0x5bf,0x4c5,0x4df,0x530)](_0xb123b0[_0x18cca2(0x4e3,0x47a,0x46f,0x4fc)],_0xb123b0[_0x2fe49b(0x13f,0x156,0x1ab,0x1ad)])?_0x35b64c='data:image'+'/png;base6'+'4,'+_0x20b3c5:_0x39acf7[_0x2fe49b(0x231,0x1f8,0x276,0x2c8)](_0x4ada3a))),_0xdfbff8[_0x2fe49b(0x204,0x11d,0x1a9,0x225)](_0x4ada3a,_0x1a80c9);else _0x431f5f=_0x2bfe75(_0x54e63d,_0x3e1026,_0xfff92,_0xb123b0['Szfuy']),_0x3ebf57[_0x18cca2(0x3e9,0x449,0x454,0x413)](_0xb123b0[_0x18cca2(0x43f,0x50a,0x540,0x4d6)],_0x5c9756[_0x2fe49b(0x251,0x2ba,0x278,0x2eb)],_0xb123b0[_0x2fe49b(0x2b4,0x22d,0x277,0x265)],_0x27a9b0);}if(Array[_0x18cca2(0x49f,0x3c4,0x3c3,0x43e)](_0xdfbff8))return _0xdfbff8['map'](_0x420bf6=>replacePlaceholder(_0x420bf6,_0x4ada3a,_0x1a80c9,_0x39acf7));if(_0xdfbff8&&_0xb123b0[_0x18cca2(0x517,0x4de,0x4ba,0x530)](typeof _0xdfbff8,_0xb123b0['LyzvY'])){if(_0xb123b0[_0x18cca2(0x56b,0x4fe,0x54b,0x511)](_0xb123b0[_0x2fe49b(0x1b1,0x147,0x1a1,0x1b2)],_0xb123b0['ocEKG'])){const _0x1165f6={};for(const _0x45c716 in _0xdfbff8){if(_0xb123b0['xcjhO']!==_0xb123b0['xcjhO'])for(const _0x5734de of _0x10cbab[_0x2fe49b(0x23e,0x24b,0x1f5,0x1e0)]){if(_0xb123b0['cbzBA'](_0x5734de[_0x18cca2(0x509,0x446,0x4f6,0x475)],_0xb123b0[_0x2fe49b(0x11b,0x1a2,0x196,0x1e2)])&&_0x5734de[_0x18cca2(0x52c,0x42a,0x44c,0x49c)][_0x2fe49b(0x242,0x1d6,0x21c,0x19b)](_0x4d9d7c))return _0x594aeb;}else _0x1165f6[_0x45c716]=_0xb123b0[_0x2fe49b(0x263,0x2b9,0x286,0x292)](replacePlaceholder,_0xdfbff8[_0x45c716],_0x4ada3a,_0x1a80c9,_0x39acf7);}return _0x1165f6;}else{if(_0x5b6604[_0x4702f0]&&_0xb123b0[_0x18cca2(0x55a,0x489,0x4e3,0x4cb)](_0x400e4a[_0x2d688d],_0x2f06d2[_0x3157c5])){const _0x314539=_0x2df8fd[_0xeeaff3]||_0xb123b0[_0x2fe49b(0x137,0x124,0x190,0x1ce)],_0x2374b2=_0x3fafb5[_0x149f3d];_0x27a674+='•\x20'+_0xac85ca[_0x3dfd97]+':\x0a',_0x322e76+='\x20\x20旧:\x20'+_0x314539[_0x2fe49b(0x170,0x22b,0x1d4,0x1c4)](-0x1f0b*0x1+-0x2234+0x413f,0x3*0xc70+-0xabd*-0x3+-0x4555)+(_0xb123b0[_0x18cca2(0x51e,0x4a0,0x4a7,0x4f6)](_0x314539[_0x2fe49b(0x2b0,0x291,0x278,0x209)],0x1984+0x1451+0x2da3*-0x1)?_0xb123b0[_0x18cca2(0x487,0x45e,0x496,0x44e)]:'')+'\x0a',_0x52ef96+=_0x18cca2(0x51e,0x496,0x51e,0x496)+_0x2374b2[_0x18cca2(0x3fc,0x4b1,0x40e,0x44f)](0x2506+0x55d*-0x1+-0x1*0x1fa9,-0x189c+0x2686+-0xdb8)+(_0xb123b0[_0x2fe49b(0x27a,0x33a,0x2c1,0x22d)](_0x2374b2['length'],0x2025*-0x1+-0x1cee+-0x5*-0xc41)?_0x18cca2(0x5c0,0x4f3,0x570,0x535):'')+'\x0a\x0a',_0x7863ad++;}}}return _0xdfbff8;}function attachImagesToMessage(_0x5144d9,_0x3faccc,_0x46f1b9,_0x27fab2='参考图片'){function _0x4f9652(_0x268c2b,_0x2184af,_0xa3ee27,_0x260e9a){return _0x54f3(_0xa3ee27- -0x38a,_0x260e9a);}const _0x4d8785={};_0x4d8785[_0x57d699(-0x49,-0xb,0x81,0x8d)]=_0x4f9652(-0xf4,-0x8b,-0xf8,-0x13d)+'内容',_0x4d8785[_0x4f9652(-0x197,-0xd0,-0xfe,-0x98)]=function(_0x57e87c,_0x35ec73){return _0x57e87c===_0x35ec73;},_0x4d8785[_0x4f9652(-0x1fc,-0x156,-0x18f,-0x1e2)]=function(_0x542f94,_0x3610f1){return _0x542f94+_0x3610f1;};function _0x57d699(_0x3d8577,_0x42cd0c,_0x30791e,_0x5bf397){return _0x54f3(_0x42cd0c- -0x22b,_0x3d8577);}_0x4d8785[_0x4f9652(-0x152,-0x19b,-0x109,-0x7a)]=_0x57d699(0x90,0x1a,0x79,0x44),_0x4d8785[_0x4f9652(-0xf8,-0x15a,-0x11f,-0x15b)]=_0x4f9652(-0x21d,-0x1da,-0x1d7,-0x15c),_0x4d8785['roLfX']=_0x57d699(0xbb,0x60,0x21,-0x18),_0x4d8785[_0x57d699(0x18,-0x76,-0xf9,-0x21)]='auto',_0x4d8785[_0x4f9652(-0x16d,-0x14a,-0x13b,-0x102)]=function(_0x254be4,_0x3173b9){return _0x254be4<_0x3173b9;},_0x4d8785['NQkSH']=function(_0x44f376,_0x3822a5){return _0x44f376>=_0x3822a5;},_0x4d8785[_0x4f9652(-0x141,-0x143,-0x1ad,-0x1f6)]=_0x4f9652(-0x116,-0x1c8,-0x16d,-0xe9),_0x4d8785[_0x57d699(0xce,0x3f,0x8a,0x34)]=_0x4f9652(-0xa9,-0x160,-0x12f,-0x1b3),_0x4d8785[_0x57d699(0x72,0x8e,0xca,0xbd)]=function(_0x20233c,_0x3a63b6){return _0x20233c===_0x3a63b6;},_0x4d8785[_0x4f9652(-0x158,-0x73,-0xfc,-0xcd)]=_0x4f9652(-0x5e,-0x71,-0xf1,-0x13b),_0x4d8785[_0x57d699(0x13,0x28,0x37,0x62)]='EhOhA',_0x4d8785['nUdsz']=_0x4f9652(-0x147,-0x100,-0x15e,-0x1ed);const _0x270628=_0x4d8785;if(!_0x46f1b9||_0x270628[_0x4f9652(-0x15b,-0x191,-0xfe,-0x163)](_0x46f1b9['length'],-0x1d*0x13+-0x2085+-0x7*-0x4f4)||_0x270628['OFtFN'](_0x3faccc,0x4a4+0x5*-0x63+-0x2b5)||_0x270628['NQkSH'](_0x3faccc,_0x5144d9['length']))return _0x270628['uEAwm'](_0x270628['zipVe'],_0x270628['pzWEM'])?_0xc69f17:_0x5144d9;const _0x2e7cf4=[..._0x5144d9],_0x1b071f=_0x2e7cf4[_0x3faccc],_0x3fa33b=[];if(_0x270628['kOyos'](typeof _0x1b071f[_0x4f9652(-0x1dc,-0x1e0,-0x171,-0x1b3)],_0x270628[_0x4f9652(-0x145,-0x172,-0xfc,-0x197)])){const _0x456bc3={};_0x456bc3[_0x4f9652(-0x104,-0x1a0,-0x16c,-0x181)]=_0x270628[_0x57d699(0xe9,0x56,0x55,-0x3d)],_0x456bc3[_0x57d699(0xa4,0x1a,0x15,0x71)]=_0x1b071f[_0x57d699(0x72,-0x12,-0x7a,0x33)],_0x3fa33b[_0x4f9652(-0x1c4,-0x108,-0x138,-0x19b)](_0x456bc3);}else{if(Array['isArray'](_0x1b071f[_0x4f9652(-0x1b8,-0x128,-0x171,-0x114)])){if(_0x270628[_0x4f9652(-0xfe,-0x153,-0x137,-0x118)]!==_0x270628[_0x4f9652(-0xa9,-0x136,-0x11d,-0x181)])_0x3fa33b['push'](..._0x1b071f[_0x57d699(-0x47,-0x12,-0x7b,0x78)]);else{_0x1c7435[_0x4f9652(-0xed,-0x126,-0xfb,-0x170)](_0x270628[_0x4f9652(-0x183,-0x126,-0x16a,-0x154)]);return;}}}if(_0x46f1b9['length']>-0x4*-0x421+0x3*0xc2+-0x12ca){const _0x53d77f={};_0x53d77f['type']=_0x270628['mbfsp'],_0x53d77f['text']='\x0a[以下是用户上传的'+_0x46f1b9['length']+'张'+_0x27fab2+']',_0x3fa33b[_0x4f9652(-0x1c0,-0x12a,-0x138,-0x164)](_0x53d77f);}_0x46f1b9[_0x57d699(-0x2d,-0x28,0x6c,0x10)]((_0x4a6b04,_0x10ba99)=>{const _0xd7cc4=_0x270628[_0x59185a(0x3f1,0x326,0x423,0x3a6)](typeof _0x4a6b04,_0x59185a(0x37d,0x373,0x326,0x3b3))?_0x4a6b04:_0x4a6b04[_0x740ac3(0x47b,0x465,0x3e6,0x374)],_0x110209=typeof _0x4a6b04===_0x59185a(0x3d3,0x405,0x417,0x386)&&_0x4a6b04[_0x740ac3(0x492,0x464,0x441,0x4bf)]?_0x4a6b04[_0x740ac3(0x44e,0x42f,0x441,0x3b4)]:''+_0x27fab2+_0x270628['ynumA'](_0x10ba99,-0x1284+-0x4e2*-0x6+0x59*-0x1f),_0x38c9ba={};function _0x740ac3(_0x102844,_0x1b04cf,_0x3b61cd,_0x19f737){return _0x57d699(_0x19f737,_0x3b61cd-0x423,_0x3b61cd-0xf8,_0x19f737-0x2a);}_0x38c9ba[_0x59185a(0x337,0x35f,0x34d,0x338)]=_0x270628[_0x59185a(0x328,0x3cc,0x387,0x39b)],_0x38c9ba[_0x59185a(0x3d8,0x2e2,0x361,0x35f)]='['+_0x110209+']',_0x3fa33b['push'](_0x38c9ba);let _0x25f263=_0xd7cc4;!_0xd7cc4[_0x740ac3(0x4f4,0x401,0x47c,0x50e)](_0x270628['mzKYm'])&&(_0x270628['roLfX']===_0x270628[_0x59185a(0x325,0x351,0x348,0x322)]?_0x25f263=_0x740ac3(0x3f7,0x36a,0x3cf,0x3e6)+_0x740ac3(0x386,0x389,0x3d0,0x36b)+'4,'+_0xd7cc4:_0x296f2a[_0x740ac3(0x358,0x36c,0x3b4,0x3ee)](_0x740ac3(0x4f4,0x4b5,0x45f,0x4ee)+_0x740ac3(0x3e9,0x447,0x3bc,0x40f)+_0x59185a(0x35e,0x3d0,0x31a,0x39a)+'\x22'+_0x21733d+'\x22'));const _0x4afd23={};_0x4afd23[_0x740ac3(0x3ef,0x3bc,0x40e,0x408)]=_0x25f263,_0x4afd23[_0x740ac3(0x45a,0x3a3,0x41e,0x446)]=_0x270628['BYZuG'];const _0x267c0a={};_0x267c0a[_0x59185a(0x326,0x392,0x331,0x338)]=_0x59185a(0x396,0x341,0x385,0x30f);function _0x59185a(_0x103025,_0x33d0f6,_0x294bc1,_0x4288be){return _0x57d699(_0x294bc1,_0x4288be-0x345,_0x294bc1-0x1f,_0x4288be-0x7a);}_0x267c0a[_0x59185a(0x29c,0x27d,0x363,0x30f)]=_0x4afd23,_0x3fa33b[_0x740ac3(0x49e,0x3f1,0x44a,0x413)](_0x267c0a);});const _0x226693={..._0x1b071f};return _0x226693[_0x57d699(-0x5d,-0x12,-0x56,0x5e)]=_0x3fa33b,_0x2e7cf4[_0x3faccc]=_0x226693,_0x2e7cf4;}function findMessageIndexWithPlaceholder(_0x19274d,_0x5e8103){const _0x271361={};_0x271361[_0x4bb313(0x604,0x5a8,0x586,0x5be)]=_0x4bb313(0x5f9,0x566,0x5fd,0x62d);function _0x15557d(_0x3f5e84,_0x4965c9,_0x58d39b,_0x35344f){return _0x54f3(_0x58d39b-0x2f4,_0x35344f);}_0x271361['TzPve']=function(_0x3dd679,_0x593fe3){return _0x3dd679<_0x593fe3;};function _0x4bb313(_0x158ff6,_0x1029b3,_0x3ece1c,_0xce2f41){return _0x54f3(_0x158ff6-0x3b4,_0x1029b3);}_0x271361[_0x15557d(0x515,0x54b,0x4d5,0x504)]=function(_0x58ccc4,_0x441cba){return _0x58ccc4!==_0x441cba;},_0x271361[_0x4bb313(0x5e6,0x589,0x5b4,0x5e0)]=function(_0x505c0d,_0x16ffa5){return _0x505c0d===_0x16ffa5;};const _0x40acd7=_0x271361;for(let _0xf2c806=-0x24e7*0x1+-0x3*0x719+0x3a32;_0x40acd7['TzPve'](_0xf2c806,_0x19274d[_0x4bb313(0x650,0x61c,0x634,0x5c4)]);_0xf2c806++){if(_0x40acd7[_0x4bb313(0x595,0x5a0,0x548,0x630)](_0x15557d(0x595,0x533,0x56a,0x5dd),_0x4bb313(0x62a,0x6a7,0x5a4,0x686))){if(_0x109fee[_0x15557d(0x4e6,0x521,0x512,0x4ad)]===_0x40acd7[_0x15557d(0x4d8,0x560,0x544,0x5c4)]&&_0x351ece[_0x15557d(0x4cc,0x5b9,0x539,0x522)][_0x15557d(0x5b9,0x520,0x534,0x4c3)](_0x55ec15))return _0x1e9fda;}else{const _0x190858=_0x19274d[_0xf2c806];if(_0x40acd7[_0x15557d(0x4db,0x4af,0x526,0x48c)](typeof _0x190858[_0x4bb313(0x5cd,0x639,0x5fe,0x532)],'string')&&_0x190858[_0x4bb313(0x5cd,0x62b,0x657,0x532)]['includes'](_0x5e8103))return _0xf2c806;else{if(Array['isArray'](_0x190858[_0x15557d(0x520,0x487,0x50d,0x4a8)]))for(const _0x4d20a2 of _0x190858['content']){if(_0x40acd7[_0x15557d(0x503,0x4c4,0x526,0x5a8)](_0x4d20a2[_0x4bb313(0x5d2,0x607,0x5a8,0x54b)],_0x40acd7['jsvlG'])&&_0x4d20a2[_0x15557d(0x546,0x4e1,0x539,0x50d)][_0x4bb313(0x5f4,0x5cd,0x5ad,0x5b4)](_0x5e8103))return _0xf2c806;}}}}return-(-0x169d+-0x726+0x1dc4);}function generateRequestId(){function _0x4d0458(_0x2d534e,_0x13bcdc,_0x515d69,_0x2a3bac){return _0x54f3(_0x2a3bac- -0x1d0,_0x13bcdc);}if(crypto&&crypto[_0x4ce039(0x226,0x34b,0x2bf,0x285)])return crypto[_0x4d0458(0x10a,0x101,0xe6,0x88)]();function _0x4ce039(_0x54669a,_0x4c29cc,_0x3efeb2,_0x56b955){return _0x54f3(_0x3efeb2-0x67,_0x54669a);}return Date[_0x4ce039(0x2aa,0x2f6,0x294,0x201)]()['toString'](-0x1f47+0x1*0x20d1+-0x166)+Math[_0x4d0458(-0x7e,0x1d,0x5,-0xe)]()['toString'](0x1*-0x1813+-0xb08+0x233f)[_0x4ce039(0x2b6,0x2e8,0x25f,0x2c1)](0xff4+-0x25b2*-0x1+0x2*-0x1ad2);}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){const _0x3e4cb3={'nHZyP':function(_0x36fdc8,_0x44bfbb){return _0x36fdc8!==_0x44bfbb;},'IxwDi':function(_0x533bba,_0x12dd11){return _0x533bba(_0x12dd11);},'hTkXu':'xtPtk','ksROg':'UhMet','sMAOv':'获取服装修改提示词超'+'时','nPvOt':function(_0x45b327){return _0x45b327();}};return new Promise((_0x3d9504,_0x230a7c)=>{const _0x3c2b08={'TcvGk':function(_0x900232,_0x35cf66){function _0x1b247d(_0x235776,_0x53f7a4,_0x719a0,_0x7c0fe6){return _0x54f3(_0x719a0- -0x46,_0x235776);}return _0x3e4cb3[_0x1b247d(0x288,0x296,0x1fe,0x17c)](_0x900232,_0x35cf66);},'LgECl':_0x3e4cb3[_0x2e79cd(0x15c,0x18a,0x12d,0x1c1)],'TlyaN':_0x3e4cb3['ksROg'],'HikGR':_0x3e4cb3[_0x4bf478(0x2f4,0x22e,0x1c9,0x25e)]},_0xe0be77=_0x3e4cb3[_0x2e79cd(0x27e,0x27a,0x1c7,0x1fb)](generateRequestId);console[_0x2e79cd(0x167,0x1bb,0x15a,0x171)](_0x4bf478(0x1ed,0x28a,0x287,0x1fe)+_0x4bf478(0x169,0x17d,0xea,0x15b)+'\x20Requestin'+_0x2e79cd(0x2b8,0x28b,0x25c,0x28f)+_0x2e79cd(0x167,0x14d,0x19f,0x16d)+'pt\x20(ID:\x20'+_0xe0be77+')');function _0x2e79cd(_0x8997a0,_0x254d97,_0x4eeac7,_0x549354){return _0x54f3(_0x549354- -0x4b,_0x8997a0);}const _0x3fd485=_0x4940a4=>{function _0x94eee8(_0x4f33ca,_0x327e5f,_0x587204,_0xa0a6c6){return _0x2e79cd(_0x327e5f,_0x327e5f-0x182,_0x587204-0xa4,_0x587204-0x13d);}if(_0x3e4cb3[_0x17b8e1(0x505,0x48f,0x4b2,0x493)](_0x4940a4['id'],_0xe0be77))return;eventSource[_0x17b8e1(0x4d1,0x530,0x55b,0x51f)+_0x94eee8(0x240,0x346,0x2b5,0x307)](eventNames[_0x94eee8(0x2cb,0x26f,0x2e5,0x305)+_0x17b8e1(0x482,0x41d,0x4ac,0x432)+_0x94eee8(0x2e0,0x360,0x353,0x362)+'PONSE'],_0x3fd485);function _0x17b8e1(_0x4faa91,_0x1d339a,_0x3b86e3,_0x59e7b0){return _0x2e79cd(_0x3b86e3,_0x1d339a-0x79,_0x3b86e3-0x120,_0x4faa91-0x30c);}_0x3e4cb3['IxwDi'](_0x3d9504,_0x4940a4[_0x17b8e1(0x586,0x504,0x50f,0x59a)]);};eventSource['on'](eventNames[_0x4bf478(0x189,0x16a,0x187,0x18a)+'ODIFY_GET_'+_0x2e79cd(0x2a6,0x194,0x1a2,0x216)+_0x2e79cd(0x2d1,0x1ec,0x23d,0x283)],_0x3fd485);const _0x1e2f74={};_0x1e2f74['id']=_0xe0be77,eventSource[_0x4bf478(0x1e5,0x279,0x281,0x1f7)](eventNames[_0x4bf478(0x1a1,0x10d,0x135,0x18a)+'ODIFY_GET_'+'PROMPT_REQ'+_0x2e79cd(0x22d,0x2b0,0x20d,0x230)],_0x1e2f74);function _0x4bf478(_0x266776,_0x15d45f,_0x1e942f,_0x3ed487){return _0x54f3(_0x3ed487- -0x69,_0x266776);}setTimeout(()=>{function _0x15760d(_0x4c8502,_0x3fb45f,_0x4a78bf,_0x46ac45){return _0x4bf478(_0x4c8502,_0x3fb45f-0x4b,_0x4a78bf-0x7,_0x46ac45- -0xe5);}function _0x269b52(_0x6a714d,_0x2446f1,_0xef6468,_0x3906b8){return _0x2e79cd(_0xef6468,_0x2446f1-0x8c,_0xef6468-0xba,_0x3906b8- -0x1ff);}_0x3c2b08[_0x15760d(0x46,0x51,0x112,0x8d)](_0x3c2b08[_0x15760d(0x1a3,0x161,0x104,0x183)],_0x3c2b08[_0x15760d(0xe4,0x10c,0x113,0xec)])?(eventSource[_0x15760d(0xec,0x11c,0x46,0xc2)+_0x15760d(0x23,0x1f,0x1d,0x75)](eventNames[_0x15760d(0x72,0x15,0xf8,0xa5)+_0x15760d(0x9c,0x9,-0x24,0x73)+'PROMPT_RES'+'PONSE'],_0x3fd485),_0x230a7c(new Error(_0x3c2b08[_0x269b52(0x2b,-0xb,0x74,0x46)]))):_0x3d433f=_0x269b52(0x23,0x33,-0x49,0x47)+_0x269b52(-0x24,0x13,-0xdf,-0x58)+[..._0x295c2a]['join']('、')+'\x0a';},-0x255*-0x11+-0x5*0x674+0x1faf*0x1);});}export function LLM_OUTFIT_MODIFY(_0x4bb248,_0x1a7ca2={}){function _0x7b34c4(_0xb56c45,_0x11a59b,_0x14b126,_0x130701){return _0x54f3(_0x11a59b- -0x3b5,_0x14b126);}function _0x4d902e(_0x3732a3,_0x59ed05,_0x49e2de,_0x1cb728){return _0x54f3(_0x49e2de-0x252,_0x3732a3);}const _0x6b75d0={'AnWEX':function(_0x2f6c67,_0x5d0e48){return _0x2f6c67(_0x5d0e48);},'TSdgQ':_0x7b34c4(-0x237,-0x1d3,-0x253,-0x21f)+_0x4d902e(0x492,0x49b,0x522,0x546),'xuKQK':function(_0x5ebb80,_0x3811ba){return _0x5ebb80(_0x3811ba);},'gPtov':_0x7b34c4(-0x64,-0xf5,-0xe3,-0x14a),'MBPmg':_0x7b34c4(-0xc6,-0x14f,-0x17d,-0x1c0)+'ack','EEufz':function(_0x4c9ad5,_0x492404){return _0x4c9ad5===_0x492404;},'KfJlC':_0x7b34c4(-0x1be,-0x1a2,-0x123,-0x22b),'lFWgM':function(_0x254d96){return _0x254d96();},'HoeEF':function(_0x29dbc2,_0x4fbe2e,_0x56a55d){return _0x29dbc2(_0x4fbe2e,_0x56a55d);}};return new Promise((_0x4e6654,_0x1c0ad0)=>{const _0x1ed0a4={'PUihy':function(_0x4d1474,_0x562bf4){return _0x6b75d0['AnWEX'](_0x4d1474,_0x562bf4);},'blCJi':function(_0x206895,_0x8f5891){function _0x555986(_0x181108,_0xd93770,_0x31cbfe,_0x33e69c){return _0x54f3(_0x181108-0x163,_0xd93770);}return _0x6b75d0[_0x555986(0x315,0x33a,0x326,0x2ef)](_0x206895,_0x8f5891);},'PbleI':_0xae22b7(-0xff,-0x2c,-0x53,-0xbe),'WIwvf':_0x6b75d0[_0xae22b7(-0xab,-0xb9,-0x94,-0x6b)],'ZBXYJ':_0xae22b7(-0x1bb,-0x110,-0x175,-0x130),'TKNfi':_0x6b75d0[_0x2e4853(0x31a,0x36d,0x3a8,0x360)]};function _0xae22b7(_0x9c0b42,_0x4ab08a,_0x3f04fd,_0x233bde){return _0x4d902e(_0x3f04fd,_0x4ab08a-0x85,_0x233bde- -0x599,_0x233bde-0x153);}function _0x2e4853(_0x3fb085,_0x56c034,_0x37b8a5,_0x4a3d3d){return _0x7b34c4(_0x3fb085-0xab,_0x56c034-0x463,_0x3fb085,_0x4a3d3d-0x24);}if(_0x6b75d0['EEufz'](_0x6b75d0[_0xae22b7(-0x136,-0x128,-0xbf,-0xe8)],_0x6b75d0[_0x2e4853(0x2ed,0x30d,0x356,0x28a)])){const _0x3cb3f4=_0x6b75d0[_0xae22b7(-0x9a,-0x20,-0x69,-0x8b)](generateRequestId),_0x23ab9c=_0x1a7ca2[_0xae22b7(-0x14a,-0xdd,-0x1d9,-0x176)]||-0xb9bc+0x1cc+-0x10*-0x1a25;console[_0x2e4853(0x25c,0x26a,0x2a4,0x2b6)](_0x2e4853(0x324,0x315,0x2d1,0x2b7)+'mptModify]'+_0xae22b7(-0x5f,-0x6d,-0x9c,-0x86)+_0x2e4853(0x22c,0x2ad,0x326,0x2e8)+_0x2e4853(0x380,0x386,0x3c6,0x308)+_0x2e4853(0x2db,0x2f6,0x2fd,0x278)+':\x20'+_0x3cb3f4+')');const _0x2dd4d8=_0xc26f5f=>{if(_0xc26f5f['id']!==_0x3cb3f4)return;function _0x3477db(_0x27d0c4,_0x5e08f6,_0x50b90d,_0x2826f4){return _0x2e4853(_0x27d0c4,_0x50b90d- -0x1a1,_0x50b90d-0x101,_0x2826f4-0xa0);}eventSource[_0x31a76e(0x472,0x45a,0x4ef,0x44a)+'ener'](eventNames['LLM_CHAR_M'+_0x31a76e(0x468,0x41c,0x42f,0x3f0)+_0x31a76e(0x43c,0x479,0x423,0x45b)],_0x2dd4d8);function _0x31a76e(_0x1bd903,_0x53ccfa,_0x374391,_0x224836){return _0x2e4853(_0x374391,_0x53ccfa-0x19c,_0x374391-0x144,_0x224836-0x1ba);}_0xc26f5f[_0x3477db(0x272,0x17c,0x1e0,0x24f)]?_0x1ed0a4['PUihy'](_0x4e6654,_0xc26f5f[_0x3477db(0x270,0x15a,0x1e8,0x1b5)]):_0x1ed0a4[_0x3477db(0x248,0x1f9,0x1ec,0x1d2)](_0x1c0ad0,new Error(_0xc26f5f[_0x3477db(0x24c,0x261,0x1e8,0x268)]||_0x3477db(0x1aa,0x170,0x1f0,0x1d8)));};eventSource['on'](eventNames[_0x2e4853(0x2d3,0x2a1,0x247,0x2ae)+_0x2e4853(0x258,0x280,0x1ea,0x286)+_0xae22b7(-0xd6,-0x8c,-0x1a4,-0x118)],_0x2dd4d8);const _0xdb93ff={};_0xdb93ff[_0x2e4853(0x3f4,0x373,0x3a1,0x387)]=_0x4bb248,_0xdb93ff['id']=_0x3cb3f4,eventSource['emit'](eventNames[_0x2e4853(0x33a,0x2a1,0x29e,0x23b)+'ODIFY_REQU'+_0xae22b7(-0xb8,-0x153,-0xd7,-0x104)],_0xdb93ff),_0x6b75d0['HoeEF'](setTimeout,()=>{function _0x5462ff(_0xc35436,_0x1dedac,_0x317d1b,_0xd38f8f){return _0x2e4853(_0x1dedac,_0xd38f8f- -0x4,_0x317d1b-0x1ae,_0xd38f8f-0xed);}function _0x18369b(_0x39f413,_0x87b788,_0x4f933a,_0x34fef1){return _0xae22b7(_0x39f413-0x7b,_0x87b788-0x44,_0x87b788,_0x39f413-0x5c3);}eventSource[_0x5462ff(0x31e,0x229,0x328,0x2ba)+_0x18369b(0x43f,0x46b,0x49e,0x3ad)](eventNames[_0x5462ff(0x2ce,0x2ad,0x305,0x29d)+_0x5462ff(0x215,0x28e,0x22d,0x27c)+_0x18369b(0x4ab,0x495,0x43d,0x472)],_0x2dd4d8),_0x6b75d0[_0x18369b(0x4ef,0x569,0x4ae,0x536)](_0x1c0ad0,new Error(_0x6b75d0[_0x5462ff(0x358,0x28d,0x33a,0x30f)]));},_0x23ab9c);}else{const _0xbe23d5={'rrhaa':function(_0x293f70,_0x103247){return _0x293f70(_0x103247);},'dEpgR':_0x1ed0a4[_0xae22b7(-0x18d,-0x148,-0x12a,-0x122)]},_0x302ac7=[_0x2e4853(0x26d,0x2a2,0x2f1,0x228),_0x1ed0a4[_0xae22b7(-0xc4,-0x46,-0xf7,-0x63)],_0x1ed0a4[_0xae22b7(-0x93,-0x6c,-0x85,-0xa5)],_0x1ed0a4[_0xae22b7(-0x18f,-0x150,-0x1cc,-0x142)],_0xae22b7(-0xda,-0xd0,-0xed,-0xf0),_0xae22b7(-0xb0,-0x1ba,-0x11c,-0x145)+'ck'];_0x302ac7[_0xae22b7(-0x1c1,-0xc0,-0x13a,-0x144)](_0x15e17c=>{function _0x58e3d0(_0x2b405,_0x43b464,_0x1e0c11,_0x2dec1f){return _0xae22b7(_0x2b405-0xa6,_0x43b464-0x123,_0x2b405,_0x1e0c11-0x293);}function _0x5c27ec(_0x583e0b,_0x1cd722,_0x336f40,_0x49ebcd){return _0xae22b7(_0x583e0b-0x23,_0x1cd722-0xff,_0x49ebcd,_0x1cd722-0x5d);}if(_0x5acf61[_0x15e17c]){const _0x35180c=_0x5d78b0[_0x58e3d0(0x1c4,0x25e,0x216,0x226)+'ById'](_0x58e3d0(0x241,0x1d2,0x212,0x232)+_0x15e17c);_0x35180c&&(_0x35180c['value']=_0x5059cb[_0x15e17c],_0xbe23d5[_0x5c27ec(-0xed,-0x70,-0x25,-0x9c)](_0x1d6111,_0x35180c)[_0x5c27ec(-0xa0,-0x60,-0xe0,-0x67)](_0xbe23d5[_0x5c27ec(-0x7f,-0x102,-0x161,-0xf4)]));}});}});}function preprocessTagContent(_0x3c685c){let _0x1cefb5=_0x3c685c[_0x3609dd(0x451,0x53d,0x4a3,0x4ac)](/:/g,':')[_0x57577b(0x251,0x1b8,0x278,0x2ad)](/\(/g,'（')[_0x3609dd(0x4d4,0x524,0x4a3,0x535)](/\)/g,'）')[_0x57577b(0x251,0x248,0x220,0x1bf)](/,/g,',');function _0x57577b(_0x21790a,_0x596822,_0x24b55e,_0x152540){return _0x54f3(_0x21790a-0x14,_0x596822);}function _0x3609dd(_0x33d80b,_0x13ef38,_0x157048,_0x31c7e1){return _0x54f3(_0x157048-0x266,_0x13ef38);}return _0x1cefb5;}function parseOutfitData(_0x1ccf60){const _0x5495d6={};_0x5495d6['kTCLn']=_0x2fa7f7(0x358,0x37e,0x372,0x310),_0x5495d6['xGpAt']=_0x632a53(0x54,0x7e,-0xe,0xa7),_0x5495d6[_0x632a53(0x18,0x87,0xf3,0x111)]=_0x2fa7f7(0x37b,0x358,0x37a,0x2e8),_0x5495d6[_0x632a53(-0x66,-0x59,-0x94,0x36)]=_0x2fa7f7(0x3ca,0x40b,0x3aa,0x3ba)+_0x632a53(-0x30,0x1a,0xad,0xa3);function _0x632a53(_0x2fc0a4,_0x560661,_0x68ce59,_0x586378){return _0x54f3(_0x560661- -0x242,_0x586378);}_0x5495d6[_0x2fa7f7(0x402,0x428,0x428,0x3ed)]=_0x632a53(0x3b,0x15,0x40,-0x19),_0x5495d6[_0x632a53(-0x10e,-0x82,-0xee,-0xa1)]=function(_0x2abce7,_0x2880b8){return _0x2abce7===_0x2880b8;},_0x5495d6[_0x632a53(0x1f,0x33,0x41,0x77)]=function(_0x3633c6,_0x574df3){return _0x3633c6===_0x574df3;},_0x5495d6['auhSU']=function(_0x10fd52,_0x4f67b6){return _0x10fd52&&_0x4f67b6;};function _0x2fa7f7(_0x2af355,_0x1e3e7e,_0x5233f5,_0x40903d){return _0x54f3(_0x2af355-0x164,_0x5233f5);}const _0x280b41=_0x5495d6,_0x462a7a=_0x1ccf60[_0x2fa7f7(0x3f9,0x420,0x490,0x3cd)]('\x0a')[_0x2fa7f7(0x365,0x379,0x31d,0x34b)](_0x4b2ee2=>_0x4b2ee2[_0x2fa7f7(0x3db,0x345,0x3d5,0x372)]())['filter'](_0x5b3f71=>_0x5b3f71),_0xefef3e={};_0xefef3e[_0x632a53(-0x33,-0x4e,-0xd8,-0x6c)]='',_0xefef3e[_0x2fa7f7(0x424,0x49c,0x441,0x3ca)]='',_0xefef3e['upperBody']='',_0xefef3e[_0x632a53(-0x33,0x24,0x26,-0x41)+_0x2fa7f7(0x3c0,0x3a2,0x42e,0x419)]='',_0xefef3e[_0x2fa7f7(0x3bb,0x3c1,0x42d,0x33a)]='',_0xefef3e[_0x632a53(0x2b,-0x40,0x4e,-0x9c)+'ck']='';const _0x5881eb=_0xefef3e,_0x453460={};_0x453460[_0x2fa7f7(0x353,0x3e6,0x375,0x2de)]=_0x280b41['kTCLn'],_0x453460['英文名称']=_0x280b41['xGpAt'],_0x453460[_0x2fa7f7(0x415,0x39e,0x451,0x3b9)]=_0x280b41[_0x632a53(0xd7,0x87,-0xf,0xfc)],_0x453460[_0x632a53(0x43,-0x35,-0xbf,-0xd)]=_0x280b41[_0x2fa7f7(0x34d,0x337,0x3c5,0x2e3)],_0x453460[_0x2fa7f7(0x33d,0x3ba,0x352,0x330)]=_0x280b41['xeqLp'],_0x453460[_0x2fa7f7(0x3a0,0x3a9,0x3c0,0x325)]=_0x280b41['xeqLp'],_0x453460['下半身背面']=_0x632a53(-0x3e,-0x40,0x41,-0x8a)+'ck';const _0x2dc8c5=_0x453460;for(const _0x4d967b of _0x462a7a){const _0xcfd4c7=_0x4d967b[_0x2fa7f7(0x398,0x322,0x32c,0x32a)](':');if(_0x280b41[_0x2fa7f7(0x324,0x303,0x313,0x34c)](_0xcfd4c7,-(0x1*-0x26d5+0x38*-0x55+0x396e)))continue;const _0x2be506=_0x4d967b['substring'](-0x9b5*0x4+0x270*0x8+0x4*0x4d5,_0xcfd4c7)[_0x632a53(0xab,0x35,0x6e,0x65)](),_0x5a5d3d=_0x4d967b[_0x632a53(-0x27,-0x4a,-0x25,0x47)](_0xcfd4c7+(-0x912+0x1*-0x1a11+-0x8c9*-0x4))[_0x2fa7f7(0x3db,0x352,0x38a,0x362)]();if(_0x2dc8c5[_0x2be506]){if(_0x280b41[_0x632a53(0x27,0x33,0x36,-0x2c)](_0x632a53(-0xc2,-0x49,0x28,-0x1d),'gKocD'))_0x5881eb[_0x2dc8c5[_0x2be506]]=_0x5a5d3d;else{if(_0x107531){const _0x2347f3=_0x5a753e[_0x2fa7f7(0x330,0x296,0x3c1,0x2a5)](_0x55337a,arguments);return _0x59039a=null,_0x2347f3;}}}else _0x280b41['auhSU'](_0x2be506,_0x5a5d3d)&&console['log'](_0x632a53(0xa6,0x25,-0x14,-0x44)+_0x632a53(-0x6e,-0x7e,-0xd0,-0x55)+_0x632a53(0x2e,0x3e,0x94,-0x5b)+'\x22'+_0x2be506+'\x22');}if(!_0x5881eb['nameCN'])return null;return console[_0x632a53(-0xa6,-0x86,-0x100,-0x6b)](_0x632a53(0x6b,0x25,-0x62,-0x65)+'mptModify]'+'\x20解析到的服装数据:',_0x5881eb),_0x5881eb;}function _0xd790(){const _0x20c682=['ChvZAa','B2j5Cwu','lxrHyI1JAgfYyq','5PYQ5zYOieXmtsdOVPpLH7RKUk0','tKLYtMK','zNvSBejVzhK','CMfUzg9Tvvvjra','y29ND0y','zxLwrwS','z09QAeG','ywnR','C21LzuS','C3rrDe0','s2zkBem','zw1PDa','ufjptvbux1jfuW','AxjLBwvUDcbTzq','EMfuDMe','CLjxD3O','vfnKz1e','DxbWzxjcB2r5qG','w291DgzPDfbYBW','zxrZ','qxvorMW','ChPxru0','BxPlww0','B2jQzwn0','BLvKC3O','5Ps56k+35RgclI4U','qM9RBKq','r3b5zxq','icdML6C6ia','ANLNqui','qw5xrvG','BfvhEhe','sw1kywG','zwTHB0u','DhjPBq','otqYotbtwuvrvKG','vNLPELq','CNjOywe','vuvtva','zKj5DwS','seXvs28','zgf0yq','BKf2tKG','ioACQUIVHUwiQ+EAHoACJEIJHEwTL+AUTsa','BwjMC3a','ufrXv1m','6iUX5PAh5zcn56EW','C3rHCNrZv2L0Aa','AgfJufK','AunTufm','5lIl5y2k6lQRoIa','DwPqwhi','Aw5WDxq','DhjPz2DLCG','wwT2Cfa','DuvbD20','DMfSDwu','DwvJzeq','Aw5MBW','sgLRr1i','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','yvPYwMu','BMj1BNK','C3bSAxq','v2HeBMy','vuDMwKy','5lIk5y2k6lQR6iom6z2IoIa','C3rYAw5N','ywrK','BhvosgS','BgvUz3rO','kcGOlISPkYKRkq','EgvXtha','uxDRt1K','zgDVzwe','EhLsAKO','wKjywuO','CMrJvxq','D2X6v3O','sKPdsMS','uwTkzMm','vMvkBKS','iow3SUABToAwSoACJEIJHEMIHoIUVIaI','t05Hqxa','B29mDw8','ywzKDfO','igrHDge6','ueH5Dvm','zxjYB3i','rMTPufq','tvHysKG','5lIk5y2k6lQR','wgTsq1m','ze5RBhy','5lIl5y2k6lQR6iom6z2IoIa','Duj4qLC','DxnLB08','r3PtDhy','ieXmtsbVDxrWDq','A095B3m','tKj0se0','pc/MNi3OO4u+','Bezxz00','rvLHq1i','BujTvK8','tujqBwC','BMfTzuvo','iev4zwn1DgLUzW','CxDoANa','BfLeyuq','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','ChjVBxb0','B3v0zML0xW','C01bt3y','nvHnr0Ldwa','CLLkvxC','z2v0rwXLBwvUDa','Dg9tDhjPBMC','rufqAgW','DMHevfu','ue9ou0u','BKXAD0G','5Rgc6lAf5PE2','tgDfq2W','Bxb0oG','C3vJy2vZCW','qNLjza','B0vjENq','EMjjCKO','koEPUIK','zgLMEsbmte0GCG','y2j6qKe','zYbVDxrMAxqGBq','CMvZDwX0','z1b0B3y','uhHyExy','lI4U','yMXdsMK','ndG4otu5zhnlu0rh','zefgD2q','ENbOzfO','teXnioIVT+AXGUwKSEI0Pq','v0L3DMy','zKjkDgW','vufAsum','zgXoB3K','EhvluuS','zgf0ytO','sw1uwhG','qLLADuC','mJy1mKXsqwv1wq','BfzeEva','B2rPzNKGChjVBq','n01vDeTXDG','C05du3K','y29UC3rYDwn0BW','Bg9N','iezPBMfSihbYBW','rgTIA1O','B3v0zML0CW','Bw5Wz3K','t0rjrLLFr0vuxW','CMfUzg9T','zw5LCG','Bxb0tw9KAwz5xq','DgjMCLG','ruDyqNm','vu1Sq2m','C1jeEeC','y1DZv3a','B3v0zML0uhjLCW','mtm3mti2EvLizMLx','yxbWBhK','CMvWBgfJzufSBa','nJG2mdeYDg93Aujq','rgz1Cfe','sKPruLm','DgLTzw91De1Z','t0rjrLLFuKvtua','A3jfwwe','wwXjtLC','6k+35ywi6ycj5OUP5lIa5lIQ5PYn6kof6Ake6k6+','5y+c6icd5zU+54Mh','zgf0ytPPBwfNzq','l3bUzZTIyxnLnG','5lIl5y2k6lQR','wMLjq3i','vgn2r2S','s2LWB0S','EMLWvMu','5lIl5y2k6lQR6iom6z2I','AM9PBG','igLUzgv4','r2fsz1u','5PYn6kof5l+U5Ps5ieXmtsdOR7C','BwL6wwO','E3VNLkJMIlFPNidMSyj9Fq','5Qoa5Rwl5yIW5PYn6kof5Qch562+','ihjLCxvLC3qUlG','AxnbCNjHEq','zevWz1i','qKH2tfK','BwvZC2fNzq','uuXlv0O','D1P3uxi','r1n5vNi','yMfZzty0','5lIT5PAh5zcn56EW','E3VKUjBNLyZKUABOP6BLJ5f9Fq','BeLtAvq','6kkR5l2/55sO77YA','teXnx0niqvjFtq','BMfTzuno','Aw1Hz2vFDxjS','BKvyEeS','r1fVAKu','C3vIC3rYAw5N','z0TVy0q','5lIk5y2k6lQRoIa','Ew51Bue','Dhj1EM0','mteYndbTreHUv3K','zK95Aw8','ig91DgzPDcbTBW','ifvZzxiGCMvXDq','BwfW','zNvSBejVzhLcyq','zM9YrwfJAa','zKrZrKW','veTozMK','ifjHDYbmte0GBW','uhzJDhq','CM9mzLG','svneDMm','rejKCwC','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','AfrRwhu','5lIk5y2k6lQR6iom6z2I','5lIT5PAh5zcn56EWoIa','nZG0ofvQr2TiCG','CMvTB3zLtgLZDa','6i635y+w5PYn6kof5l+U5Ps55O+q56s66k+n6lAf','Bxb0ig1VzgLMEq','DwX5vKy','sK5ctNO','E3VMNi3OO4xLIjFOOAH9Fq','DxjS','DxbWzxjcB2r5','rxrgBgm','y29UDgvUDa','C2vHCMnO','Bwj1v3i','zxrjza','z1nAELy','DhLWzq','EhfXA3K','uvfiAuW','zNbWA0W','nfDmsu1urG','t3fZAwy','Aw1Hz2vZihrVia','ugjSzuK','zgv0ywLS','DvvuCK4','5BEY5y+w5RAi5PU05PAW','D2fYBMLUzW','C2L6zq','rNr5veW','BxHozKW','BM93','DK9HzKu','t05trq','mJa0otGYmNjQq2P3Ba','ien1CNjLBNqGCa','zhLVzLC','wuj4zMu','Aw5KzxHpzG','y3rhzLy','rvDdCgq','ief0DgfJAgvK','yujezxq','5PYn6kof5O+q56s66k+n5l+U5Ps55AsX6lsLoG','vgX5yu4','AfvIB0C','5lIl5y2k6lQR5PYn6kof','CMvWBgfJzq','svP2D1G','icdMLRa6ia','Aw5JBhvKzxm','ExLyALe','zgvIDwDNAw5NoG','rvnu','BKHAEva','Dgv4Da','BLb2t3q','sMnIsK0','zxf1zxn0icHjra','BMfTzq','mtGWnduYmg9tvfbxuq','zxHLyW','B09zvfK','E3VLVzpLIy3OP5lOIBj9Fq','tuv5yNm','t0z0rK4','ANn2BeC','qNrTuvG'];_0xd790=function(){return _0x20c682;};return _0xd790();}function extractOutfitTags(_0x214da7){const _0x3b3ce8={'Pvctt':function(_0x306e5c,_0x541cda){return _0x306e5c(_0x541cda);}},_0x5c876b={};_0x5c876b[_0x5ef20e(0x46f,0x46e,0x3d1,0x43b)]=[];function _0x5ef20e(_0x216a17,_0x1651ee,_0x49445e,_0x45bc65){return _0x54f3(_0x45bc65-0x27c,_0x1651ee);}const _0x4cd5ab=_0x5c876b;_0x214da7=_0x214da7['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x5ef20e(0x48f,0x48c,0x503,0x4f3)]();const _0x1e43a0=/<服装>([\s\S]*?)<\/服装>/g;let _0x49c593;while((_0x49c593=_0x1e43a0[_0x5ef20e(0x447,0x528,0x51b,0x4c7)](_0x214da7))!==null){const _0x748560=preprocessTagContent(_0x49c593[0x17b4+0x22f2+-0x3aa5]),_0x248755=_0x3b3ce8[_0x5ef20e(0x4dd,0x43f,0x409,0x483)](parseOutfitData,_0x748560);_0x248755&&_0x4cd5ab[_0x5ef20e(0x3a0,0x480,0x40b,0x43b)][_0x101895(-0x14a,-0xb3,-0x70,-0x71)](_0x248755);}function _0x101895(_0x38de6b,_0x3f2333,_0x525bc1,_0x3beba5){return _0x54f3(_0x3f2333- -0x305,_0x525bc1);}return _0x4cd5ab;}function getCurrentOutfitPreset(){const _0x253c2d={};_0x253c2d['ymhSu']=_0x4bbb4f(0x557,0x580,0x4ff,0x5ad),_0x253c2d[_0x105785(0x230,0x1a9,0x243,0x211)]=function(_0x1451f6,_0x46a34c){return _0x1451f6===_0x46a34c;},_0x253c2d[_0x4bbb4f(0x5d8,0x5b5,0x63a,0x654)]=_0x105785(0x26c,0x1d8,0x168,0x1c3);const _0x5ba5bd=_0x253c2d,_0x2b83bd=extension_settings[extensionName],_0x11d5f4=_0x2b83bd[_0x4bbb4f(0x4f9,0x52b,0x47f,0x512)+_0x105785(0x288,0x1fe,0x226,0x296)];function _0x105785(_0x2886fd,_0x210fde,_0x284484,_0x3226cc){return _0x54f3(_0x210fde- -0x1e,_0x3226cc);}if(!_0x11d5f4||!_0x2b83bd[_0x105785(0x228,0x1ac,0x236,0x18c)+_0x4bbb4f(0x597,0x4fd,0x58c,0x62e)][_0x11d5f4]){if(_0x5ba5bd['UMlCc'](_0x5ba5bd[_0x4bbb4f(0x5d8,0x5f9,0x66d,0x5e0)],_0x5ba5bd['ONaAp']))return null;else{_0xd51fb7[_0x4bbb4f(0x5be,0x53c,0x607,0x5e0)](_0x5ba5bd['ymhSu']);return;}}function _0x4bbb4f(_0x596ef8,_0x339596,_0x19471d,_0x570ccc){return _0x54f3(_0x596ef8-0x32f,_0x339596);}const _0x2792eb={};return _0x2792eb['id']=_0x11d5f4,_0x2792eb[_0x105785(0x25a,0x260,0x287,0x22c)]=_0x2b83bd[_0x4bbb4f(0x4f9,0x4c9,0x50b,0x57a)+_0x4bbb4f(0x597,0x609,0x622,0x5b2)][_0x11d5f4],_0x2792eb;}function buildOutfitText(_0x5c3563){const _0x5958d3={};function _0x55a037(_0x194b8b,_0x2cb836,_0x26521e,_0x1e2b31){return _0x54f3(_0x26521e- -0x164,_0x194b8b);}_0x5958d3[_0x446845(0x85,0x58,0xb2,0x97)]='<服装>\x0a',_0x5958d3[_0x55a037(0xf2,0x3f,0xbb,0xea)]=_0x446845(0x102,0xaa,0x11e,0x83);const _0x1cc566=_0x5958d3,_0x1a3eb0=_0x5c3563[_0x55a037(0x8a,0xc7,0x11a,0xa5)];let _0x22b3a2=_0x1cc566[_0x55a037(0x185,0x1b7,0x16b,0x1ec)];_0x22b3a2+=_0x446845(-0x5b,-0x5,-0xb7,-0x2a)+(_0x1a3eb0[_0x55a037(0xb4,0x102,0x90,0xd3)]||'')+'\x0a',_0x22b3a2+='英文名称:\x20'+(_0x1a3eb0['nameEN']||'')+'\x0a',_0x22b3a2+=_0x55a037(0x104,0x8d,0x96,0x65)+(_0x1a3eb0['upperBody']||'')+'\x0a',_0x22b3a2+=_0x55a037(0x154,0x1b4,0x134,0x11a)+(_0x1a3eb0[_0x55a037(0xe3,0xe7,0x102,0x117)+'ack']||'')+'\x0a';function _0x446845(_0x37244f,_0x315ea4,_0x4ac04e,_0x348672){return _0x54f3(_0x348672- -0x238,_0x4ac04e);}return _0x22b3a2+=_0x446845(0xc7,0xd9,0xbd,0x4f)+(_0x1a3eb0[_0x446845(0x88,-0x49,-0x29,0x1f)]||'')+'\x0a',_0x22b3a2+=_0x446845(-0x18,-0x7,0xac,0x7c)+(_0x1a3eb0[_0x55a037(0x119,0xf9,0x9e,0x47)+'ck']||'')+'\x0a',_0x22b3a2+=_0x1cc566['xqqky'],_0x22b3a2;}export async function handleOutfitPromptModify(_0x8cf3b1,_0x524f3b=[]){const _0x48ae13={'xyRjJ':function(_0x5bd694,_0xe9cbf3){return _0x5bd694(_0xe9cbf3);},'zphdZ':'input','iMeHV':'找不到指定的服装预设','FkiPT':'正在处理服装提示词修'+_0x438d2a(0x238,0x243,0x289,0x24f),'ISDvc':function(_0x4d5724,_0x42d30a){return _0x4d5724===_0x42d30a;},'rdcUt':_0x4343e0(0x1db,0x1f3,0x19c,0x227),'dNklv':function(_0xd84db1){return _0xd84db1();},'hacPY':function(_0x191bc4,_0x21731c){return _0x191bc4===_0x21731c;},'stQtM':_0x4343e0(0x251,0x235,0x213,0x20f),'lYDaD':_0x4343e0(0x1e4,0x1df,0x152,0x1c1),'eyVEk':_0x4343e0(0x1db,0x1be,0x20c,0x253)+_0x438d2a(0x112,0x199,0x1c3,0x12f)+_0x4343e0(0x18a,0x1be,0x188,0x21d)+'reset:','zgymJ':function(_0x312a8f,_0x287675){return _0x312a8f||_0x287675;},'qwNjp':function(_0xa1cdb7,_0x2313ac,_0x25f9b1){return _0xa1cdb7(_0x2313ac,_0x25f9b1);},'GzStv':'char_modif'+'y','EYaCR':_0x438d2a(0x15e,0x1b9,0x1b7,0x18e),'afdtZ':_0x438d2a(0x243,0x23c,0x2d6,0x27a)+_0x438d2a(0x1c3,0x199,0x1c2,0x100)+_0x438d2a(0x264,0x1d5,0x1c6,0x1f2)+_0x4343e0(0x24d,0x275,0x2a8,0x24e)+'ssage\x20inde'+'x:','wlzWz':'{{当前服装}}','NIrNi':function(_0x535490,_0x1470fb,_0x58d0ea,_0x4973bc,_0x32177c){return _0x535490(_0x1470fb,_0x58d0ea,_0x4973bc,_0x32177c);},'krEYa':_0x4343e0(0x18c,0x26e,0x171,0x201),'KipoK':_0x438d2a(0x257,0x222,0x222,0x1ea),'uUTrN':'{{上下文}}','DacBk':function(_0x549ab9,_0x280ab1,_0x5872be,_0x5bf141,_0x5bd8ab){return _0x549ab9(_0x280ab1,_0x5872be,_0x5bf141,_0x5bd8ab);},'sWbNr':_0x438d2a(0x1be,0x1c5,0x1cc,0x164),'DkbkZ':function(_0x1d2922,_0x29539f,_0x589f1c,_0x101b02,_0x374871){return _0x1d2922(_0x29539f,_0x589f1c,_0x101b02,_0x374871);},'mBmVO':'{{角色启用列表}}','ujPXr':function(_0x588b9d,_0x35432f,_0xe5f98b,_0x46e98d,_0x5b3980){return _0x588b9d(_0x35432f,_0xe5f98b,_0x46e98d,_0x5b3980);},'IZvwX':'{{通用服装启用列表'+'}}','PTqWS':_0x4343e0(0x209,0x17f,0x1bc,0x1f7)+'}}','fByuk':_0x4343e0(0x29d,0x2e7,0x29c,0x253)+_0x4343e0(0x209,0x18e,0x165,0x1b0)+_0x438d2a(0x226,0x192,0x1a5,0x204)+_0x4343e0(0x227,0x349,0x316,0x2be),'dgoea':function(_0x4cd517,_0x372d89){return _0x4cd517>_0x372d89;},'wZwQr':function(_0x5da463,_0x2fb8b2){return _0x5da463===_0x2fb8b2;},'EtFlc':'fWTym','gpnKM':function(_0x420431,_0x125f30){return _0x420431>=_0x125f30;},'WhDnf':function(_0x37ea4d,_0x10731c,_0x86716b,_0x119141,_0x25a38e){return _0x37ea4d(_0x10731c,_0x86716b,_0x119141,_0x25a38e);},'vOafE':_0x438d2a(0x241,0x1ab,0x1b6,0x1c8),'EGXBs':_0x4343e0(0x1a0,0x1cc,0x1e0,0x210)+'message\x20at'+_0x4343e0(0x1da,0x255,0x149,0x1cc),'aZrZe':_0x438d2a(0x27e,0x23c,0x1b1,0x261)+_0x438d2a(0x20b,0x199,0x166,0x138)+_0x4343e0(0x29a,0x219,0x21f,0x2a4)+'t:','EWCpd':function(_0x44b371,_0x4d4071){return _0x44b371===_0x4d4071;},'MEybs':_0x4343e0(0x26b,0x24b,0x1e9,0x245),'dFMZd':'LLM\x20返回结果为空','oEIzt':function(_0x245963,_0x463fa8){return _0x245963===_0x463fa8;},'iCmPS':_0x438d2a(0x276,0x22a,0x262,0x1b9)+_0x438d2a(0x122,0x1ba,0x243,0x123),'GSyVr':_0x4343e0(0x1cf,0x1e8,0x25f,0x253)+_0x438d2a(0x1ef,0x199,0x128,0xfe)+_0x438d2a(0x1c0,0x1db,0x161,0x201)+'utput\x20for\x20'+_0x4343e0(0x25d,0x2c8,0x1b9,0x22e),'YBxfe':function(_0x397718,_0xf58f53,_0x1cfb0a){return _0x397718(_0xf58f53,_0x1cfb0a);},'JJQRS':'服装提示词修改完成！','JNBNz':function(_0x25e23d,_0x5a4c33){return _0x25e23d!==_0x5a4c33;},'PHyuS':'cvIPg','sbgCI':_0x4343e0(0x228,0x238,0x1e2,0x253)+'mptModify]'+'\x20Error:'};function _0x438d2a(_0x5721d9,_0x3a5d69,_0x21d8c8,_0x4c25e7){return _0x54f3(_0x3a5d69- -0x2b,_0x5721d9);}console[_0x438d2a(0x1f0,0x191,0x149,0x1c9)](_0x438d2a(0x201,0x23c,0x278,0x1c4)+_0x4343e0(0x1d7,0x11b,0x1ca,0x1b0)+'\x20Starting\x20'+'outfit\x20pro'+_0x438d2a(0x20f,0x1e7,0x1c0,0x1bd)+_0x438d2a(0x1cf,0x1bb,0x161,0x1e7)+'.'),toastr[_0x4343e0(0x237,0x310,0x1eb,0x27b)](_0x48ae13[_0x438d2a(0x311,0x284,0x209,0x2de)]);function _0x4343e0(_0x4d268e,_0x36d1d0,_0x285a80,_0xf59fc0){return _0x54f3(_0xf59fc0- -0x14,_0x4d268e);}try{if(_0x48ae13[_0x4343e0(0x1d9,0x16f,0x1c7,0x1f5)](_0x48ae13[_0x438d2a(0x276,0x278,0x2a2,0x2e3)],_0x48ae13[_0x438d2a(0x2f6,0x278,0x252,0x1ee)])){const _0x18e916=extension_settings[extensionName],_0x4f830c=_0x48ae13[_0x4343e0(0x238,0x232,0x2ff,0x29f)](getCurrentOutfitPreset);if(!_0x4f830c){if(_0x48ae13[_0x4343e0(0x229,0x2b1,0x24c,0x271)](_0x48ae13[_0x4343e0(0x227,0x1f3,0x243,0x24a)],_0x48ae13['stQtM'])){toastr[_0x438d2a(0x2d1,0x283,0x31d,0x25d)](_0x48ae13[_0x4343e0(0x305,0x259,0x28b,0x2af)]);return;}else{if(_0xc00fe7[_0x5e2c87]){const _0x1dec45=_0x5e8928[_0x438d2a(0x25d,0x29f,0x30f,0x2e0)+_0x4343e0(0x2ea,0x290,0x324,0x2c0)](_0x4343e0(0x323,0x217,0x2d7,0x2b2)+_0x2b7cdd);_0x1dec45&&(_0x1dec45[_0x438d2a(0x29a,0x262,0x1c8,0x1ca)]=_0x1959a7[_0x10347a],_0x48ae13[_0x438d2a(0x1e9,0x276,0x227,0x2de)](_0x243e82,_0x1dec45)[_0x4343e0(0x2a9,0x277,0x26e,0x276)](_0x48ae13[_0x4343e0(0x348,0x2cb,0x316,0x2ce)]));}}}console[_0x4343e0(0x12b,0x1a6,0x1ed,0x1a8)](_0x48ae13[_0x4343e0(0x2df,0x1ca,0x239,0x246)],_0x4f830c['id']);const _0x19d292=_0x48ae13[_0x4343e0(0x2e1,0x22d,0x25a,0x28d)](buildOutfitText,_0x4f830c),_0x4c37e3=[_0x48ae13['zgymJ'](_0x8cf3b1,''),_0x19d292]['filter'](Boolean)[_0x438d2a(0x1b0,0x1b4,0x1bb,0x23a)]('\x0a');let _0x55724d=_0x48ae13[_0x4343e0(0x33e,0x2a8,0x277,0x2ae)](buildPromptForRequestType,_0x48ae13[_0x438d2a(0x20e,0x28c,0x229,0x308)],_0x4c37e3);const _0x2dc80c=new Set(),_0x49c51d=_0x48ae13[_0x4343e0(0x303,0x217,0x338,0x2ae)](findMessageIndexWithPlaceholder,_0x55724d,_0x48ae13[_0x438d2a(0x2ba,0x292,0x278,0x238)]);console[_0x438d2a(0x1cf,0x191,0x11a,0x10c)](_0x48ae13[_0x4343e0(0x2b2,0x22e,0x237,0x297)],_0x49c51d),_0x55724d=replacePlaceholder(_0x55724d,_0x48ae13[_0x438d2a(0x2ab,0x279,0x285,0x214)],_0x19d292,_0x2dc80c),_0x55724d=_0x48ae13[_0x4343e0(0x22d,0x262,0x237,0x242)](replacePlaceholder,_0x55724d,_0x48ae13[_0x438d2a(0x1ad,0x1a8,0x11f,0x135)],_0x19d292,_0x2dc80c),_0x55724d=replacePlaceholder(_0x55724d,_0x4343e0(0x19a,0x165,0x25b,0x1d0),_0x8cf3b1||'',_0x2dc80c),_0x55724d=_0x48ae13['NIrNi'](replacePlaceholder,_0x55724d,_0x48ae13[_0x438d2a(0x19a,0x1b1,0x146,0x1b2)],'',_0x2dc80c),_0x55724d=_0x48ae13['NIrNi'](replacePlaceholder,_0x55724d,_0x48ae13[_0x438d2a(0x1ba,0x1fc,0x230,0x28e)],'',_0x2dc80c),_0x55724d=_0x48ae13['DacBk'](replacePlaceholder,_0x55724d,_0x48ae13['sWbNr'],'',_0x2dc80c),_0x55724d=_0x48ae13[_0x4343e0(0x148,0x23b,0x117,0x1aa)](replacePlaceholder,_0x55724d,_0x48ae13[_0x438d2a(0x2b4,0x293,0x247,0x317)],'',_0x2dc80c),_0x55724d=_0x48ae13[_0x438d2a(0x1ca,0x25d,0x29b,0x1eb)](replacePlaceholder,_0x55724d,_0x48ae13[_0x438d2a(0x1c5,0x213,0x22e,0x261)],'',_0x2dc80c),_0x55724d=replacePlaceholder(_0x55724d,_0x48ae13[_0x438d2a(0x1d5,0x257,0x2c4,0x259)],'',_0x2dc80c),console[_0x438d2a(0x1e5,0x191,0x18f,0x177)](_0x48ae13[_0x4343e0(0x233,0x2d3,0x291,0x268)],_0x55724d);let _0x3a7b65='';_0x48ae13[_0x4343e0(0x201,0x244,0x27b,0x28c)](_0x2dc80c[_0x438d2a(0x188,0x1ff,0x29a,0x204)],0x1f4b+0x8b0+0x17*-0x1bd)&&(_0x48ae13[_0x4343e0(0x20e,0x1f5,0x223,0x1d8)](_0x48ae13[_0x438d2a(0x1aa,0x1ed,0x25f,0x273)],'MXrAk')?(_0xa5f5ed[_0x4343e0(0x273,0x229,0x24c,0x1fc)+_0x4343e0(0x1db,0x1c4,0x128,0x1af)](_0x21f2cf[_0x4343e0(0x19a,0x180,0x1ad,0x1df)+_0x438d2a(0x1e2,0x196,0x14a,0x20f)+_0x4343e0(0x292,0x2a3,0x1c9,0x24d)+'PONSE'],_0x3e1db0),_0x15fbd7(new _0x38425e(_0x4343e0(0x267,0x16e,0x1c9,0x1fd)+'时'))):_0x3a7b65=_0x438d2a(0x233,0x266,0x26d,0x284)+_0x4343e0(0x20f,0x269,0x173,0x1de)+[..._0x2dc80c][_0x438d2a(0x212,0x1b4,0x149,0x191)]('、')+'\x0a');_0x524f3b&&_0x48ae13[_0x4343e0(0x26d,0x248,0x234,0x28c)](_0x524f3b['length'],0x2*0x61+0x1d95+-0x1e57)&&_0x48ae13['gpnKM'](_0x49c51d,-0x17a+0x1f16+-0x1d9c)&&(_0x55724d=_0x48ae13[_0x438d2a(0x242,0x26b,0x2ed,0x21f)](attachImagesToMessage,_0x55724d,_0x49c51d,_0x524f3b,_0x48ae13[_0x438d2a(0x255,0x203,0x28b,0x1c5)]),console[_0x438d2a(0x1c8,0x191,0x1e9,0x140)](_0x438d2a(0x1fd,0x23c,0x1a2,0x1ca)+'mptModify]'+_0x438d2a(0x1d6,0x20c,0x274,0x17a),_0x524f3b[_0x438d2a(0x307,0x271,0x294,0x30c)],_0x48ae13[_0x438d2a(0x125,0x19b,0x201,0x18a)],_0x49c51d));_0x48ae13['qwNjp'](updateCombinedPrompt,_0x55724d,_0x3a7b65);const _0x5a6e3e={};_0x5a6e3e[_0x4343e0(0x13a,0x23a,0x214,0x1bd)]=0x493e0;const _0x346996=await LLM_OUTFIT_MODIFY(_0x55724d,_0x5a6e3e);console[_0x4343e0(0x201,0x1c5,0x240,0x1a8)](_0x48ae13[_0x438d2a(0x2dd,0x268,0x1cf,0x233)],_0x346996);if(!_0x346996){if(_0x48ae13[_0x4343e0(0x2b7,0x1b6,0x2a1,0x222)](_0x48ae13[_0x438d2a(0x233,0x223,0x2a8,0x1df)],_0x48ae13[_0x438d2a(0x294,0x223,0x26d,0x213)])){toastr['error'](_0x48ae13['dFMZd']);return;}else{_0x2049fb[_0x438d2a(0x1ef,0x283,0x2f6,0x2e1)](_0x48ae13['iMeHV']);return;}}const _0x145d97=_0x48ae13[_0x4343e0(0x225,0x291,0x29f,0x28d)](extractOutfitTags,_0x346996);if(_0x48ae13[_0x438d2a(0x2ff,0x2aa,0x2b9,0x280)](_0x145d97['outfits'][_0x4343e0(0x282,0x1f0,0x2fe,0x288)],-0x10ff+-0x128a+0x2389)){toastr[_0x438d2a(0x192,0x1fe,0x1d9,0x21d)](_0x48ae13[_0x438d2a(0x284,0x25b,0x1c1,0x232)]),console[_0x438d2a(0x117,0x191,0x22c,0x139)](_0x48ae13[_0x4343e0(0x1a9,0x22d,0x26e,0x1d9)],_0x346996);return;}console['log'](_0x4343e0(0x1f8,0x222,0x28f,0x253)+_0x438d2a(0x14d,0x199,0x1ff,0x209)+'\x20Extracted'+_0x438d2a(0x2b4,0x281,0x239,0x272),_0x145d97);const _0x4228e8=_0x145d97[_0x438d2a(0x104,0x194,0x109,0x1e3)][0x142d+-0xd5a+0x1*-0x6d3];await _0x48ae13[_0x4343e0(0x1aa,0x275,0x19a,0x21f)](updateOutfitPresetFromLLM,_0x4f830c['id'],_0x4228e8),toastr['success'](_0x48ae13[_0x4343e0(0x13f,0x19a,0x125,0x1bc)]);}else{let _0xf9de8d=_0x229ad5['replace'](/:/g,':')[_0x438d2a(0x1fc,0x212,0x261,0x286)](/\(/g,'（')[_0x438d2a(0x203,0x212,0x26a,0x232)](/\)/g,'）')[_0x4343e0(0x1d2,0x207,0x18f,0x229)](/,/g,',');return _0xf9de8d;}}catch(_0x193ec8){if(_0x48ae13[_0x438d2a(0x234,0x1e9,0x187,0x242)](_0x48ae13[_0x438d2a(0x231,0x282,0x2f0,0x319)],'LlQuk'))console[_0x438d2a(0x2df,0x283,0x23e,0x26c)](_0x48ae13['sbgCI'],_0x193ec8),toastr[_0x438d2a(0x20d,0x283,0x2d6,0x294)](_0x438d2a(0x2a0,0x20e,0x1bd,0x27f)+'\x20'+_0x193ec8[_0x4343e0(0x238,0x24f,0x170,0x1d6)]);else return _0x2947b0;}}async function updateOutfitPresetFromLLM(_0x240f0e,_0x1845dd){const _0x363b0e={'PxXyv':function(_0x195151,_0x2c2f63){return _0x195151(_0x2c2f63);},'HLUKo':_0x14e809(0x462,0x3ef,0x453,0x396),'JcbJM':_0x14e809(0x305,0x33b,0x308,0x33a),'Gpyet':_0x14e809(0x3cf,0x449,0x3b9,0x4ae),'YlINW':function(_0xd918a2,_0x26da76){return _0xd918a2(_0x26da76);},'xeJMj':function(_0xce057e,_0x356e02){return _0xce057e(_0x356e02);},'ctGfV':'找不到指定的服装预设','lISiT':_0xed789a(0x4a7,0x4d0,0x4d3,0x4c7),'uBxBW':_0xed789a(0x530,0x564,0x51e,0x4cd),'fppkL':_0x14e809(0x444,0x417,0x3f3,0x403),'jlTXB':_0x14e809(0x3d7,0x33f,0x2fd,0x2ec),'MXXJH':'UpwsE','mbuWr':_0xed789a(0x540,0x5b8,0x5d2,0x5c9),'yyXjQ':'...','truzm':function(_0x55769e,_0x1ed53a){return _0x55769e>_0x1ed53a;},'kRfyS':function(_0x246e82,_0x19fb3d){return _0x246e82===_0x19fb3d;},'useoO':_0xed789a(0x575,0x573,0x515,0x5e3)+'内容','GjIDW':_0xed789a(0x608,0x5b7,0x5db,0x64d),'smeeK':_0xed789a(0x53c,0x4bb,0x4fd,0x520),'lVDyP':_0x14e809(0x3e3,0x38e,0x325,0x366),'EAPhl':function(_0x29df81,_0x2f1703){return _0x29df81!==_0x2f1703;},'VeJnK':_0x14e809(0x3c0,0x3d8,0x3c5,0x407),'fDsFL':function(_0x3cdff4){return _0x3cdff4();},'FtyTL':'#st-chatu8'+_0xed789a(0x548,0x535,0x575,0x540)+'cter','aBDet':_0xed789a(0x548,0x5c2,0x582,0x542)},_0x5bdb6b=extension_settings[extensionName],_0x198fec=_0x5bdb6b['outfitPres'+_0xed789a(0x4fd,0x549,0x5a7,0x5cc)][_0x240f0e];if(!_0x198fec){toastr[_0xed789a(0x5d6,0x58f,0x609,0x5d4)](_0x363b0e[_0xed789a(0x49c,0x516,0x510,0x4e4)]);return;}let _0x47b6bf='准备更新服装\x20\x22'+_0x240f0e+'\x22\x20的以下数据:\x0a\x0a';const _0x55b1c4={};_0x55b1c4[_0x14e809(0x357,0x35a,0x2db,0x2e1)]=_0x363b0e[_0x14e809(0x316,0x357,0x2ed,0x375)],_0x55b1c4['nameEN']=_0x363b0e[_0x14e809(0x4a0,0x41b,0x465,0x3e2)],_0x55b1c4[_0xed789a(0x4ea,0x4f8,0x498,0x588)]=_0x363b0e[_0xed789a(0x4e2,0x502,0x4b0,0x56f)],_0x55b1c4[_0xed789a(0x56a,0x547,0x597,0x4de)+_0xed789a(0x4b0,0x53d,0x514,0x4d7)]=_0x14e809(0x3e0,0x373,0x31a,0x362),_0x55b1c4['fullBody']=_0x363b0e['jlTXB'],_0x55b1c4[_0x14e809(0x2f3,0x368,0x363,0x3ad)+'ck']=_0x14e809(0x316,0x344,0x378,0x2c7);const _0x2df496=_0x55b1c4;let _0x2be9a9=0x1bd2+0xa*-0x1cd+-0x8*0x13a;for(const _0x2d9aae in _0x2df496){if(_0x363b0e[_0xed789a(0x52e,0x591,0x54c,0x599)]!==_0x363b0e[_0xed789a(0x5df,0x591,0x569,0x535)]){const _0x59debe=_0x4dc465[_0x14e809(0x3e7,0x430,0x4c5,0x42f)+_0xed789a(0x522,0x5b5,0x5a2,0x5b9)](_0xed789a(0x62b,0x5a7,0x547,0x628)+_0x105b5e);_0x59debe&&(_0x59debe[_0xed789a(0x567,0x56e,0x4ed,0x526)]=_0x2c8205[_0x14adf3],_0x363b0e[_0xed789a(0x5fe,0x5be,0x639,0x5c1)](_0x56f82f,_0x59debe)[_0xed789a(0x5b9,0x56b,0x551,0x5c0)](_0x363b0e[_0xed789a(0x58b,0x55e,0x4f5,0x5cb)]));}else{if(_0x1845dd[_0x2d9aae]&&_0x1845dd[_0x2d9aae]!==_0x198fec[_0x2d9aae]){const _0x13311c=_0x198fec[_0x2d9aae]||_0x363b0e[_0xed789a(0x4c5,0x4fc,0x4c7,0x53c)],_0x100d5f=_0x1845dd[_0x2d9aae];_0x47b6bf+='•\x20'+_0x2df496[_0x2d9aae]+':\x0a',_0x47b6bf+=_0xed789a(0x5e7,0x552,0x5bf,0x536)+_0x13311c[_0xed789a(0x521,0x4d9,0x4ca,0x470)](-0x262+0x8bf*0x2+-0xf1c,-0x2*0xde7+-0x21ec+0x4*0xf7b)+(_0x13311c['length']>-0x1*-0x907+0x107+0x9dc*-0x1?_0x363b0e[_0x14e809(0x3eb,0x3a7,0x3e3,0x36a)]:'')+'\x0a',_0x47b6bf+=_0xed789a(0x5a2,0x520,0x55a,0x4f5)+_0x100d5f[_0x14e809(0x373,0x35e,0x2de,0x3a8)](-0x7*0x164+0xb92+0x5e*-0x5,0x13*-0x123+-0x961*-0x3+0x38*-0x1d)+(_0x363b0e[_0xed789a(0x4f7,0x4dd,0x52b,0x472)](_0x100d5f['length'],-0xb1c*-0x3+0x1ad1+-0x1*0x3bf3)?_0x363b0e[_0xed789a(0x599,0x522,0x499,0x595)]:'')+'\x0a\x0a',_0x2be9a9++;}}}if(_0x363b0e['kRfyS'](_0x2be9a9,-0x2331+-0xac0+0x1*0x2df1)){toastr['info'](_0x363b0e[_0xed789a(0x5e3,0x597,0x595,0x5f5)]);return;}_0x47b6bf+='共\x20'+_0x2be9a9+_0x14e809(0x391,0x42a,0x393,0x431);const _0x148a76=await _0x363b0e['YlINW'](stylishConfirm,_0x47b6bf);if(!_0x148a76){if(_0x363b0e['GjIDW']===_0x363b0e[_0xed789a(0x596,0x53e,0x51e,0x501)]){_0x5abc5f[_0xed789a(0x515,0x58f,0x52c,0x5cc)](_0x363b0e[_0x14e809(0x429,0x3ad,0x3ab,0x393)]);return;}else{toastr[_0x14e809(0x465,0x3f5,0x364,0x44b)](_0x363b0e[_0xed789a(0x403,0x498,0x4d3,0x473)]);return;}}for(const _0x2ef208 in _0x2df496){_0x1845dd[_0x2ef208]&&(_0x363b0e[_0xed789a(0x5ce,0x5ad,0x55b,0x5fb)](_0xed789a(0x433,0x4cc,0x4c3,0x46b),_0x363b0e[_0x14e809(0x41c,0x40d,0x449,0x3d7)])?_0x198fec[_0x2ef208]=_0x1845dd[_0x2ef208]:_0x2ecb85(new _0x459c32(_0x320cdc['result']||_0x363b0e[_0x14e809(0x3f5,0x3d6,0x3c4,0x365)])));}_0x363b0e[_0xed789a(0x48e,0x4e5,0x4af,0x46d)](saveSettingsDebounced);function _0xed789a(_0x12f9cc,_0x5e5132,_0x391ba8,_0x9890d1){return _0x54f3(_0x5e5132-0x2e1,_0x9890d1);}const _0x2160c9=$(_0x363b0e[_0x14e809(0x3f6,0x391,0x3a7,0x30e)]);if(_0x2160c9['length']){if(_0x363b0e[_0x14e809(0x3ca,0x39e,0x356,0x3d2)]!==_0x363b0e['aBDet']){const _0x3daf48=_0x363b0e[_0xed789a(0x49c,0x4b5,0x505,0x53b)](_0x4e2508,_0x49810f[0x10d2+-0x4*0x7ce+0xe67]),_0x60187c=_0x363b0e['xeJMj'](_0xb5a41f,_0x3daf48);_0x60187c&&_0x4ec4b9[_0x14e809(0x295,0x325,0x36f,0x333)][_0x14e809(0x32b,0x3b8,0x423,0x354)](_0x60187c);}else loadOutfitPreset();}function _0x14e809(_0x218357,_0x363e07,_0x3847d5,_0x3891a8){return _0x54f3(_0x363e07-0x166,_0x3847d5);}_0x363b0e[_0x14e809(0x39d,0x33a,0x3ac,0x312)](updateOutfitFormFields,_0x1845dd),console['log']('[outfitPro'+_0xed789a(0x433,0x4a5,0x4be,0x4a3)+_0x14e809(0x479,0x40e,0x3fa,0x414)+_0x240f0e+'\x22');}function updateOutfitFormFields(_0x179103){const _0x5acf68={'oOYTY':function(_0x13ec17,_0x5d57f4){return _0x13ec17(_0x5d57f4);},'UGfZF':_0x217a26(-0xfa,-0xdf,-0x51,-0xeb),'BoknD':_0x217a26(-0x95,-0x1c,-0xab,-0xb4),'nbuny':_0x217a26(-0x1cc,-0x104,-0x10f,-0x15d),'cWsWp':_0x217a26(-0x7f,-0x19e,-0x138,-0x10e)+_0x3765e6(0x14e,0x5d,0xae,0xda),'zaTva':_0x217a26(-0xe4,-0xbe,-0x11c,-0x11d),'DBdqg':_0x3765e6(0x51,0xb,0xd5,0x80)+'ck'};function _0x217a26(_0x244366,_0x236bcd,_0x109aa1,_0x45809b){return _0x54f3(_0x45809b- -0x374,_0x244366);}const _0x23f457=['nameCN',_0x5acf68[_0x3765e6(0x120,0xde,0xf5,0xed)],_0x5acf68[_0x3765e6(0x8f,0x79,0x113,0x112)],_0x5acf68[_0x217a26(-0x115,-0x1b2,-0x13f,-0x1ab)],_0x5acf68[_0x3765e6(0xec,0x4d,0x71,0xe1)],_0x5acf68[_0x3765e6(0xbe,0x81,0xb7,0x88)]];function _0x3765e6(_0x3fc426,_0x52782a,_0x10d6ab,_0x51a8d2){return _0x54f3(_0x51a8d2- -0x182,_0x3fc426);}_0x23f457[_0x3765e6(0xd0,0x27,0xaf,0x81)](_0x175265=>{function _0x966146(_0x385c6a,_0x212a7a,_0x250cf6,_0x5b22d0){return _0x3765e6(_0x212a7a,_0x212a7a-0xda,_0x250cf6-0xd0,_0x5b22d0-0x3c);}function _0x36c045(_0x444f9b,_0x44f9f3,_0x495f00,_0x3297f2){return _0x3765e6(_0x3297f2,_0x44f9f3-0x147,_0x495f00-0xe4,_0x44f9f3-0x21d);}if(_0x179103[_0x175265]){const _0x4e44bd=document['getElement'+_0x36c045(0x2e2,0x36f,0x342,0x2e8)](_0x36c045(0x37d,0x361,0x390,0x305)+_0x175265);_0x4e44bd&&(_0x4e44bd[_0x966146(0xc7,0x195,0x1dd,0x147)]=_0x179103[_0x175265],_0x5acf68[_0x36c045(0x2c9,0x2e7,0x28a,0x2a2)]($,_0x4e44bd)[_0x966146(0x116,0x158,0x11d,0x144)](_0x5acf68[_0x36c045(0x344,0x332,0x30a,0x2b5)]));}});}