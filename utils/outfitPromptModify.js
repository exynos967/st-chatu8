(function(_0x40f27c,_0x26181c){function _0x5a4269(_0x17ad0e,_0x161ba9,_0x450552,_0x3f8892){return _0x4877(_0x161ba9- -0x2ea,_0x3f8892);}function _0x2d303d(_0x9a53c,_0x2089fb,_0x471d29,_0x364688){return _0x4877(_0x9a53c-0x1e4,_0x2089fb);}const _0x2e4b48=_0x40f27c();while(!![]){try{const _0x29fd33=parseInt(_0x5a4269(-0x10c,-0xf4,-0x105,-0x122))/(-0x1e19+-0xa6*-0x7+-0x8*-0x332)*(parseInt(_0x5a4269(-0x4b,-0x23,-0x9,0x2))/(0x21*0x76+0x66a*-0x5+0x2*0x86f))+parseInt(_0x2d303d(0x41b,0x41b,0x464,0x3e5))/(-0x1243*0x1+0x1744+-0x47*0x12)*(parseInt(_0x2d303d(0x48a,0x473,0x3ef,0x4ba))/(-0x4e0+-0x2417+0x1*0x28fb))+parseInt(_0x2d303d(0x3f2,0x478,0x39b,0x3c0))/(0x219*0x2+0x1a2+-0x5cf)*(parseInt(_0x5a4269(-0xac,-0x50,-0xd6,-0xac))/(-0x2*-0x20e+0x11*0xf5+-0x145b))+parseInt(_0x2d303d(0x403,0x474,0x440,0x3a9))/(-0x147*0x19+0xe95+0x1161)*(parseInt(_0x2d303d(0x3f0,0x457,0x3da,0x3de))/(0x6fb*0x3+0x27*0x82+0x5d1*-0x7))+parseInt(_0x5a4269(-0xa4,-0x18,-0x1a,-0x27))/(0x13c9+0x1*0x2027+-0x33e7)+parseInt(_0x5a4269(0x18,-0x35,-0x20,0x1a))/(0x5*0x57a+-0x140b+0x10b*-0x7)+-parseInt(_0x2d303d(0x442,0x48e,0x44d,0x4ba))/(-0xd1*0xd+0x7*-0x35e+0x223a)*(parseInt(_0x2d303d(0x458,0x3e6,0x3fd,0x4bd))/(0xd1*0x2c+0x5f5+0x29d5*-0x1));if(_0x29fd33===_0x26181c)break;else _0x2e4b48['push'](_0x2e4b48['shift']());}catch(_0x7b9be3){_0x2e4b48['push'](_0x2e4b48['shift']());}}}(_0x18ed,-0x2942*-0x8+-0x1*0x33b56+-0x2af5*-0x1f));const _0x414d63=(function(){let _0x2f89d1=!![];return function(_0xa20274,_0xd68a8f){const _0x28a78e=_0x2f89d1?function(){function _0x36ece5(_0x4be82c,_0x36d0af,_0x22a1ef,_0x394366){return _0x4877(_0x36d0af-0x228,_0x22a1ef);}if(_0xd68a8f){const _0x2ec7e0=_0xd68a8f[_0x36ece5(0x4a8,0x50e,0x4ea,0x477)](_0xa20274,arguments);return _0xd68a8f=null,_0x2ec7e0;}}:function(){};return _0x2f89d1=![],_0x28a78e;};}()),_0x2a5184=_0x414d63(this,function(){const _0x1bc0f9={};_0x1bc0f9[_0xff2898(0x412,0x410,0x470,0x46e)]=_0x517f86(-0x20,-0x4d,-0xd1,-0x7d)+'+$';function _0xff2898(_0x48cdbb,_0x227ba9,_0x499f0f,_0x40dd78){return _0x4877(_0x48cdbb-0x14e,_0x227ba9);}const _0x1f380b=_0x1bc0f9;function _0x517f86(_0x150a5f,_0x44427a,_0x5cc89d,_0x110b13){return _0x4877(_0x110b13- -0x2a1,_0x5cc89d);}return _0x2a5184[_0x517f86(-0x98,-0x4e,-0xbf,-0x49)]()['search'](_0x1f380b['yDDOE'])['toString']()[_0x517f86(0x68,-0x1f,-0x63,-0xc)+'r'](_0x2a5184)[_0xff2898(0x3a8,0x440,0x362,0x3ae)](_0x1f380b[_0xff2898(0x412,0x40b,0x414,0x453)]);});_0x2a5184();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{loadOutfitPreset}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x21acc1,_0x4e8e82,_0x2d7d95,_0x39fba9){function _0x46b79b(_0xe9b795,_0x68ed7b,_0x49120a,_0x27189b){return _0x4877(_0x68ed7b-0x164,_0x49120a);}const _0x31db6e={'hEqeZ':'[outfitPro'+_0x46b79b(0x40f,0x38c,0x3c8,0x36d)+_0x46b79b(0x339,0x3aa,0x443,0x37a),'rMzQb':_0x3c93c8(0x204,0x1be,0x1b4,0x135),'Ybxqe':_0x46b79b(0x3b0,0x41b,0x3d6,0x471),'jApBw':_0x3c93c8(0x185,0x199,0x17a,0x190)+'内容','XNnDK':function(_0x1c7808,_0xa5f19a){return _0x1c7808===_0xa5f19a;},'hoZSZ':_0x46b79b(0x3de,0x3ac,0x43d,0x3e7),'zeyhs':_0x3c93c8(0x85,0xe6,0xbf,0x121),'yKjqP':function(_0x59fc32,_0x2ef1c9){return _0x59fc32!==_0x2ef1c9;},'aqnfg':function(_0x2f3f47,_0x3d60f4){return _0x2f3f47===_0x3d60f4;},'NmbTi':_0x3c93c8(0xe3,0x14d,0x101,0x126),'RfoTc':_0x3c93c8(0xe3,0xed,0x160,0x59),'Yyhmi':'object','YfszY':_0x3c93c8(0x15d,0x1ab,0x1be,0x140),'YzKdV':_0x3c93c8(0x1b2,0x181,0x1d0,0x132),'dTUyv':_0x46b79b(0x4d4,0x43a,0x475,0x480),'rCtsg':function(_0x2ddf26,_0x4c93af,_0x57f772,_0x335ca8,_0x555c9a){return _0x2ddf26(_0x4c93af,_0x57f772,_0x335ca8,_0x555c9a);}};if(_0x31db6e[_0x3c93c8(0x195,0x185,0x126,0xfa)](typeof _0x21acc1,_0x31db6e['hoZSZ'])){if(_0x31db6e[_0x3c93c8(0x110,0x185,0x1b6,0xf7)](_0x3c93c8(0xad,0xe6,0x14e,0x87),_0x31db6e[_0x46b79b(0x3c5,0x36a,0x394,0x31e)])){if(_0x2d7d95&&_0x21acc1[_0x46b79b(0x30c,0x39f,0x41c,0x317)](_0x4e8e82)){if(_0x39fba9){if(_0x31db6e[_0x46b79b(0x3dd,0x40c,0x41f,0x3c8)](_0x46b79b(0x35f,0x381,0x33a,0x33b),_0x46b79b(0x330,0x39c,0x42a,0x3a0)))_0x39fba9[_0x46b79b(0x382,0x324,0x380,0x31b)](_0x4e8e82);else{if(_0x496a85){const _0xb41a7=_0x4f33a9['apply'](_0x17f162,arguments);return _0x55494d=null,_0xb41a7;}}}}return _0x21acc1[_0x46b79b(0x379,0x3a2,0x3cb,0x34c)](_0x4e8e82,_0x2d7d95);}else _0x213c72[_0x3c93c8(0x1f2,0x193,0x1b3,0x164)](_0x31db6e['hEqeZ'],_0x1c275b),_0x2b9793[_0x3c93c8(0x1da,0x193,0x170,0x1a1)]('服装提示词修改失败:'+'\x20'+_0x58e0ec[_0x3c93c8(0x1d3,0x152,0x176,0x1e7)]);}if(Array['isArray'](_0x21acc1)){if(_0x31db6e[_0x3c93c8(0xa4,0x107,0x91,0x86)](_0x31db6e['NmbTi'],_0x31db6e[_0x46b79b(0x41e,0x414,0x44d,0x477)])){const _0x78f477={};_0x78f477[_0x3c93c8(0xfd,0x108,0x84,0x16e)]=_0x31db6e[_0x3c93c8(0x1d9,0x1b8,0x1a3,0x200)],_0x78f477[_0x3c93c8(0x202,0x1be,0x193,0x1c2)]=_0x3aff4d['content'],_0x4b13b1[_0x46b79b(0x3ab,0x421,0x3e4,0x3c5)](_0x78f477);}else return _0x21acc1[_0x46b79b(0x4b1,0x42e,0x4bf,0x3a2)](_0x8fc584=>replacePlaceholder(_0x8fc584,_0x4e8e82,_0x2d7d95,_0x39fba9));}if(_0x21acc1&&typeof _0x21acc1===_0x31db6e['Yyhmi']){if(_0x31db6e[_0x46b79b(0x475,0x416,0x389,0x432)](_0x31db6e['YfszY'],_0x31db6e['YzKdV']))_0x98ca3a=_0x29ed8f(_0x49c1aa,_0x50af85,_0x3d97c0,_0x31db6e[_0x3c93c8(0x12f,0x165,0x1b4,0x180)]),_0x36c838[_0x3c93c8(0x1b5,0x195,0x1a5,0x12f)](_0x46b79b(0x371,0x3ad,0x331,0x362)+'mptModify]'+_0x3c93c8(0x18c,0x174,0x1cd,0x19f),_0x5297bb[_0x3c93c8(0xaa,0xe4,0x4a,0xd8)],_0x46b79b(0x433,0x3bd,0x322,0x3d8)+_0x46b79b(0x402,0x369,0x3e7,0x3ea)+_0x3c93c8(0x187,0x137,0x13a,0x156),_0xe1528a);else{const _0x2be88a={};for(const _0xba7a83 in _0x21acc1){if(_0x31db6e[_0x46b79b(0x3be,0x3bf,0x374,0x3a9)]!==_0x31db6e[_0x3c93c8(0xf2,0x12e,0x1bc,0x1b2)]){_0x9765be[_0x46b79b(0x4a7,0x427,0x46f,0x4b4)](_0x31db6e[_0x3c93c8(0x22c,0x1b0,0x19e,0x136)]);return;}else _0x2be88a[_0xba7a83]=_0x31db6e['rCtsg'](replacePlaceholder,_0x21acc1[_0xba7a83],_0x4e8e82,_0x2d7d95,_0x39fba9);}return _0x2be88a;}}function _0x3c93c8(_0x59de5c,_0x1de9ce,_0x1aeae7,_0x105287){return _0x4877(_0x1de9ce- -0x12d,_0x1aeae7);}return _0x21acc1;}function attachImagesToMessage(_0x58566f,_0x55ce40,_0x3422b8,_0x12e5db='参考图片'){const _0x298483={'PkaYo':function(_0x550aac,_0x56d9cc){return _0x550aac+_0x56d9cc;},'UNfso':function(_0x4b120f,_0x266643){return _0x4b120f(_0x266643);},'uFxNE':_0x5d6280(0x5c0,0x55e,0x57c,0x5b9)+'时','rYFsP':function(_0x5226cf,_0x1d2a8a){return _0x5226cf!==_0x1d2a8a;},'dGVkF':_0x1a6646(0xe8,0x81,0xf0,-0x16),'IoVVy':'string','rGctI':_0x5d6280(0x522,0x485,0x4c2,0x52c),'gMLJY':_0x1a6646(0x15,0x82,0xe6,0x60),'Qozul':_0x5d6280(0x5b1,0x5c1,0x593,0x5f3),'KdhUw':_0x5d6280(0x55f,0x4fc,0x56d,0x559),'fkZgq':function(_0xf07f75,_0x46cb72){return _0xf07f75===_0x46cb72;},'NotsF':function(_0x5d5fe5,_0x334e5f){return _0x5d5fe5<_0x334e5f;},'UnDpr':_0x5d6280(0x4eb,0x59e,0x51d,0x4aa),'zIVGX':'wGTqX','CoCIv':'XwAKN','kplmt':'ZPEES'};if(!_0x3422b8||_0x298483['fkZgq'](_0x3422b8[_0x5d6280(0x473,0x475,0x505,0x4eb)],-0x35c+0x2*-0x617+0x297*0x6)||_0x298483[_0x5d6280(0x4ef,0x4bc,0x52d,0x4d6)](_0x55ce40,-0x20d0+0x1592+-0x1*-0xb3e)||_0x55ce40>=_0x58566f[_0x5d6280(0x560,0x56b,0x505,0x509)]){if(_0x298483[_0x1a6646(0x65,-0x8,0x6c,0x18)](_0x298483['UnDpr'],_0x298483[_0x1a6646(-0x44,0x4b,0x36,0xc4)])){if(_0x309b35&&_0x230d6d[_0x1a6646(-0x81,-0x83,-0x7c,0x0)])return _0x198bb5[_0x1a6646(-0x104,-0x83,-0xfb,-0x73)]();return _0x298483['PkaYo'](_0x116355['now']()[_0x1a6646(-0x1c,-0x11,-0x3e,-0x94)](0x119f+-0x716+0x3*-0x377),_0x3336b3[_0x1a6646(0x8,-0x65,-0x33,-0xc6)]()[_0x1a6646(0x7e,-0x11,-0xa4,0x14)](-0x28a*-0x5+0x25*-0x34+0x56*-0xf)[_0x1a6646(0x2f,0x60,0x27,-0x1a)](-0x141*-0x11+0x2*0xdce+-0x30eb));}else return _0x58566f;}const _0x24c1e4=[..._0x58566f],_0x51b661=_0x24c1e4[_0x55ce40],_0x3d35f9=[];if(typeof _0x51b661[_0x5d6280(0x513,0x522,0x59f,0x60b)]===_0x298483[_0x5d6280(0x4be,0x511,0x51b,0x594)]){const _0xfa710f={};_0xfa710f['type']=_0x298483[_0x5d6280(0x581,0x5b7,0x583,0x5cb)],_0xfa710f[_0x1a6646(0x12,0x82,0xe8,0x27)]=_0x51b661[_0x1a6646(0x2f,0x42,0xcc,0xb5)],_0x3d35f9[_0x1a6646(-0x1a,0x54,-0x43,0x74)](_0xfa710f);}else Array[_0x1a6646(-0x72,-0x48,-0x4c,-0x5c)](_0x51b661[_0x5d6280(0x5e1,0x537,0x59f,0x54c)])&&(_0x298483['rYFsP'](_0x298483[_0x1a6646(0xb7,0x7f,0x73,0x70)],_0x298483['kplmt'])?_0x3d35f9[_0x1a6646(-0x44,0x54,-0x9,0x6e)](..._0x51b661[_0x1a6646(-0x49,0x42,0xae,0xc5)]):(_0x1468dd[_0x5d6280(0x577,0x5be,0x594,0x560)+_0x5d6280(0x527,0x501,0x4d1,0x4d8)](_0x4d5bc2[_0x1a6646(-0xc7,-0x89,-0x105,-0x72)+_0x1a6646(-0x3e,-0x54,-0x72,-0xae)+_0x5d6280(0x509,0x4a5,0x4d0,0x508)+_0x1a6646(0xa,0x7a,-0x9,0x57)],_0x53de90),_0x298483['UNfso'](_0x2fda19,new _0x4f6423(_0x298483['uFxNE']))));if(_0x3422b8[_0x1a6646(0x12,-0x58,-0x71,-0xc4)]>-0xf63+-0x17f9*-0x1+-0x896){const _0x41f27f={};_0x41f27f[_0x5d6280(0x59d,0x500,0x529,0x50f)]=_0x298483[_0x1a6646(0x30,0x26,0xa,-0x21)],_0x41f27f[_0x1a6646(0xb5,0x82,-0x19,0x6b)]=_0x1a6646(-0x108,-0x95,-0x20,-0xe7)+_0x3422b8[_0x5d6280(0x599,0x503,0x505,0x49c)]+'张'+_0x12e5db+']',_0x3d35f9[_0x1a6646(0x9,0x54,0x3c,-0x1b)](_0x41f27f);}_0x3422b8[_0x1a6646(-0x63,-0x1d,0x9,0x7b)]((_0x24f96d,_0x33d7fc)=>{function _0x1344f9(_0x12e3dd,_0x219241,_0x136485,_0x31d06a){return _0x5d6280(_0x12e3dd-0x99,_0x219241-0x1dc,_0x136485- -0x31b,_0x219241);}function _0x5d73a0(_0x47702b,_0x573a9e,_0x5ab9c0,_0x2acbe9){return _0x1a6646(_0x47702b-0x189,_0x5ab9c0-0x608,_0x2acbe9,_0x2acbe9-0x185);}if(_0x298483[_0x1344f9(0x1a5,0x1f6,0x203,0x177)](_0x5d73a0(0x613,0x5dd,0x5ec,0x649),_0x298483[_0x5d73a0(0x5bb,0x524,0x58b,0x4fa)])){const _0x3b96c9=typeof _0x24f96d===_0x298483['IoVVy']?_0x24f96d:_0x24f96d[_0x1344f9(0x227,0x2bd,0x282,0x249)],_0x4a7e2e=typeof _0x24f96d===_0x298483[_0x1344f9(0x276,0x339,0x2c8,0x2c2)]&&_0x24f96d[_0x5d73a0(0x5a3,0x5fb,0x5cd,0x565)]?_0x24f96d[_0x5d73a0(0x53a,0x58e,0x5cd,0x587)]:''+_0x12e5db+(_0x33d7fc+(-0x50b*0x6+-0x2f0*-0x2+-0x1863*-0x1)),_0x54d805={};_0x54d805[_0x1344f9(0x1b4,0x1b6,0x20e,0x28f)]=_0x298483[_0x5d73a0(0x6bf,0x61d,0x62e,0x594)],_0x54d805[_0x1344f9(0x272,0x2da,0x2c4,0x22d)]='['+_0x4a7e2e+']',_0x3d35f9[_0x1344f9(0x2c2,0x21c,0x296,0x2e6)](_0x54d805);let _0x4ed5f6=_0x3b96c9;!_0x3b96c9['startsWith'](_0x298483['Qozul'])&&(_0x4ed5f6=_0x1344f9(0x2c6,0x1e4,0x27b,0x2f2)+_0x5d73a0(0x5a6,0x504,0x591,0x57d)+'4,'+_0x3b96c9);const _0x31486c={};_0x31486c['url']=_0x4ed5f6,_0x31486c[_0x5d73a0(0x62a,0x5a5,0x5de,0x5c3)]='auto';const _0xf30282={};_0xf30282[_0x1344f9(0x1e5,0x241,0x20e,0x286)]=_0x298483[_0x1344f9(0x2e3,0x2e4,0x262,0x2d9)],_0xf30282[_0x1344f9(0x1e7,0x2eb,0x252,0x243)]=_0x31486c,_0x3d35f9[_0x1344f9(0x2db,0x2d6,0x296,0x2e3)](_0xf30282);}else return null;});function _0x1a6646(_0x3728e0,_0x1f809a,_0x281da8,_0x2c278a){return _0x4877(_0x1f809a- -0x269,_0x281da8);}const _0x7012fd={..._0x51b661};function _0x5d6280(_0x49b363,_0x14ce98,_0x360851,_0x18f651){return _0x4877(_0x360851-0x2f4,_0x18f651);}return _0x7012fd[_0x5d6280(0x582,0x5c4,0x59f,0x587)]=_0x3d35f9,_0x24c1e4[_0x55ce40]=_0x7012fd,_0x24c1e4;}function findMessageIndexWithPlaceholder(_0x535fd2,_0x1ff2b7){const _0x2f3f1e={};_0x2f3f1e['MvhLo']=_0x2bff6e(0xf7,0x173,0x1d3,0x106)+_0x2bff6e(0x187,0x16b,0x1a0,0x192),_0x2f3f1e[_0x2014d8(0x261,0x21f,0x22d,0x211)]=_0x2bff6e(0x164,0x189,0xf4,0x102)+_0x2bff6e(0x13b,0x168,0x1e0,0x150)+_0x2014d8(0x362,0x37b,0x2fa,0x37f)+_0x2bff6e(0x13a,0x142,0x139,0x161)+_0x2bff6e(0xa6,0x13d,0xc8,0xec),_0x2f3f1e[_0x2bff6e(0x1ec,0x181,0x204,0xf0)]=function(_0x566e91,_0x338977){return _0x566e91<_0x338977;},_0x2f3f1e[_0x2014d8(0x2c3,0x2fb,0x297,0x25b)]=function(_0x107a53,_0x19c71e){return _0x107a53===_0x19c71e;},_0x2f3f1e['qtaJP']=_0x2014d8(0x196,0x1d4,0x209,0x23b);function _0x2bff6e(_0x17d504,_0x115aa4,_0x1c2ab1,_0x100d32){return _0x4877(_0x115aa4- -0xc0,_0x1c2ab1);}_0x2f3f1e[_0x2014d8(0x295,0x3a9,0x330,0x392)]=_0x2014d8(0x2c5,0x2b0,0x288,0x251);function _0x2014d8(_0x28feff,_0x338568,_0x5cad93,_0x4739e1){return _0x4877(_0x5cad93-0x40,_0x338568);}_0x2f3f1e[_0x2bff6e(0x164,0xfb,0x81,0x143)]=_0x2bff6e(0x216,0x22b,0x263,0x1cf);const _0x992b5e=_0x2f3f1e;for(let _0x278df1=0x8ad*-0x2+-0xd*-0xd3+0x6a3;_0x992b5e[_0x2014d8(0x2aa,0x2ce,0x281,0x275)](_0x278df1,_0x535fd2[_0x2014d8(0x2d3,0x265,0x251,0x1be)]);_0x278df1++){if(_0x992b5e[_0x2bff6e(0x19f,0x197,0x21d,0x1d1)](_0x992b5e[_0x2014d8(0x39d,0x2d6,0x321,0x353)],_0x992b5e['qtaJP'])){const _0x238c82=_0x535fd2[_0x278df1];if(_0x992b5e['vOaIU'](typeof _0x238c82[_0x2014d8(0x274,0x34c,0x2eb,0x2ab)],_0x992b5e[_0x2014d8(0x316,0x37b,0x330,0x295)])&&_0x238c82[_0x2bff6e(0x1f4,0x1eb,0x25b,0x26d)][_0x2bff6e(0x1cf,0x17b,0x178,0x150)](_0x1ff2b7))return _0x278df1;else{if(Array['isArray'](_0x238c82[_0x2014d8(0x307,0x358,0x2eb,0x30d)]))for(const _0x11b384 of _0x238c82[_0x2014d8(0x363,0x2d2,0x2eb,0x384)]){if(_0x11b384[_0x2014d8(0x2fb,0x2de,0x275,0x29d)]===_0x992b5e[_0x2014d8(0x191,0x195,0x1fb,0x251)]&&_0x11b384[_0x2014d8(0x3a9,0x3b5,0x32b,0x2a1)]['includes'](_0x1ff2b7))return _0x278df1;}}}else{_0x1ee6d5['warning'](_0x992b5e[_0x2bff6e(0x130,0x1b3,0x228,0x178)]),_0x4252db['log'](_0x992b5e[_0x2014d8(0x25e,0x206,0x22d,0x25d)],_0x5b9939);return;}}return-(-0x24ed+-0x563*-0x7+-0xc7);}function generateRequestId(){function _0x4f8368(_0x4da51f,_0x362078,_0x4ce7d7,_0x13ed95){return _0x4877(_0x13ed95-0x298,_0x4da51f);}const _0x1af92d={};function _0x384d39(_0x16c867,_0xdd03f1,_0x13a35a,_0x54d59c){return _0x4877(_0x13a35a-0x2b0,_0x54d59c);}_0x1af92d[_0x384d39(0x555,0x570,0x56e,0x5bf)]=function(_0x208dec,_0x278e81){return _0x208dec+_0x278e81;};const _0x167055=_0x1af92d;if(crypto&&crypto[_0x4f8368(0x4d4,0x481,0x438,0x47e)])return crypto[_0x384d39(0x3fe,0x4bf,0x496,0x45c)]();return _0x167055['xKriJ'](Date['now']()[_0x384d39(0x558,0x590,0x508,0x530)](-0x100c+0x118b+-0x15b),Math['random']()[_0x4f8368(0x46e,0x477,0x520,0x4f0)](-0x26d7+-0x573*-0x1+0x4*0x862)['substring'](0x880+0x1127+-0x19a5));}function _0x18ed(){const _0x4b2398=['5PYn6kof5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','teXnx0niqvjFtq','y3rLCG','E3VLVzpLIy3MNi3OO4v9Fq','A2DPCxe','5Q2J5zYO5Ase55cg5PYn6kof5O+q56s66k+n5l+U','A2HYzu4','CMfUzg9Tvvvjra','5Ps56k+35RgclI4U','yxv0BW','iezPBMfSihbYBW','AM1sB2C','t2XpBMe','zeDwA0y','CvroBu4','poACJEIJHt4k','rxPutxa','i3n0lwnOyxr1oa','zKjLv0u','l3bUzZTIyxnLnG','5lIl5y2k6lQR6iom6z2I','C3rHCNrZv2L0Aa','uxfYshi','mvn6C1PwsG','EhHTwhO','6iUX5PAh5zcn56EW','zw1PDa','wxj0uMu','koEPUIK','iev4zwn1DgLUzW','zgvIDwDNAw5NoG','6k+35ywi6ycj5OUP5lIa5lIQ5PYn6kof6Ake6k6+','5lIl5y2k6lQRoIa','z1LHAvm','B3v0zML0uhjLCW','DxrWDxqGzM9Yia','z3DVze4','CMfUzg9T','BwvZC2fNzsbHDa','EMv5Ahm','iow3SUABToAwSoACJEIJHEMIHoIUVIaI','DwLjrwq','DhDVB3a','t0rjrLLFuKvtua','5Rgc6lAf5PE2','mJK2yMHjrKj2','sLbowve','mJmWnxrKy0fUza','s253ENe','uLvPB0i','BgvUz3rO','BMfTzuvo','AwrgwKy','E3VKUjBNLyZKUABOP6BLJ5f9Fq','t0rjrLLFr0vuxW','5lIl5y2k6lQR','AhnsC3a','D2nxzgi','zYbVDxrMAxqGBq','suzjDKy','AeLcuNG','EM5nAM4','Cg1XBxa','ieXmtsbVDxrWDq','ndGXndzMr091y3y','DxbWzxjcB2r5','AxnbCNjHEq','CKX4tKK','rvnu','kcGOlISPkYKRkq','AKzOAM4','ugPpEhO','sw9wvNK','Bxb0tw9KAwz5xq','sfP1D0i','CLLgC1a','5Qoa5Rwl5yIW5PYn6kof5Qch562+','pc/MNi3OO4u+','rfvsq2y','BMfTzq','zvnIvhu','z2XdvMy','qLb0wvK','zK9RtfO','5PYQ5zYOieXmtsdOVPpLH7RKUk0','yxfUzMC','DhLWzq','iev4DhjHy3rLza','m2nWqwHYuq','zLveufm','tM90C0y','wKL3BhO','Aw5JBhvKzxm','t0r0DNe','uvP1Bfa','CMvWBgfJzufSBa','zgv0ywLS','BenHuM0','B0L2svK','u3fsq0m','DhjPBq','icdML6C6ia','C3vJy2vZCW','ievYCM9YoG','5lIk5y2k6lQR','C3rYAw5N','w291DgzPDfbYBW','CMvZDwX0','vKrlv0S','zM9YrwfJAa','su5VBKu','vhbRsfC','yMnmBwW','zgLMEsbmte0GCG','5lIk5y2k6lQR6iom6z2IoIa','wMHSvK0','vwrkuNO','lI4U','vKPoEhi','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','DK9Hsvu','Dg9tDhjPBMC','Aw1Hz2vZihrVia','C2vHCMnO','zfrvExy','ueD5q1K','B3v0zML0CW','mtfju2TpDNO','E3VKUiRKUiVMLOD9Fq','t253qwK','zMTAz3e','5PYn6kof5O+q56s66k+n5l+U5Ps55AsX6lsLoG','6kkR5l2/55sO77YA','igLUzgv4','B1vLvMG','vMfmDK4','qMrrzfe','A1LwtLa','zMHcsgi','vuvtva','thvQD1i','q3rlEgK','5lIl5y2k6lQR6iom6z2IoIa','5OM+5lIn5yIW5OYh5A6A55Qe5PYn6kof6Ake6k6+','BMfTzuno','teXnioIVT+AXGUwKSEI0Pq','ChqGkeLeoIa','E3VLVzpLIy3OP5lOIBj9Fq','txzOtg8','mtmYntq3otjlEhj3u24','tKTLrLm','zxrjza','sMnTwwG','5lIk5y2k6lQR6iom6z2I','Aw1Hz2vFDxjS','EgnTtwq','5lIT5PAh5zcn56EW','C3PABgC','DxbWzxjcB2r5qG','ChjVBxb0','BwvZC2fNzq','rKvTzLq','uKfLsfy','zxHLyW','yK9yuuG','tgnkwM0','teXnioI/LowBNUE7K+AENos4UUEPUG','t2DOEuu','E3VMNi3OO4xLIjFOOAH9Fq','6i635y+w5PYn6kof5l+U5Ps55O+q56s66k+n6lAf','s2rOvxC','zxrZ','tMr0v1O','z3Pzy0S','CgDREvi','DhjPz2DLCG','z01msLK','lxrHyI1JAgfYyq','CfbTq3i','wwj4Cwu','CNbHv0C','CuzRDve','y29UC3rYDwn0BW','wfb3sNO','Aufjvey','v2LXug0','qNLjza','mtG0mNDnzLretG','6iUX5PAh5zcn56EWoIa','ALPzB1m','t0rjrLLFuKvrvq','ufDmEfm','zgf0ytO','CMvTB3zLtgLZDa','ief0DgfJAgvK','zgf0ytPPBwfNzq','Bxb0ig1VzgLMEq','zNvSBejVzhK','B2rPzNKGChjVBq','nZe5nte2wfjhCwT5','zvjPuM4','EuTQCva','yMfZzty0','5lIT5PAh5zcn56EWoIa','y29UDgvUDa','vwLREM4','s3PSChq','u1bTD0m','t05trq','uMzVvgm','re9QvfG','we5UreS','tKXXtvK','EKLwr1G','odC3nteWz2fkBLLw','AxjLBwvUDcbTzq','5y+c6icd5zU+54Mh','iIdNMOtKU6xKUiVMLBdMJA46cGO','zeHRqxi','ifjHDYbmte0GBW','uwr0q24','ywjLAMy','ChvZAa','EeTYAuO','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','zxjYB3i','DuDbzeK','Bg9N','Aw5MBW','Euret0u','Cvbyvfe','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','nZGXnZm0wuDVDfPS','DgLTzw91De1Z','C3vIC3rYAw5N','BwfW','C3nHz2uGAw5Kzq','ALLYCxi','AfbPywi','B0nHEui','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','AhbIvxy','DMfSDwu','mJm3mJK0ovnRvLfIuW','wKvyqLu','BhbXqMe','rhH5sKW','wgHcre8','s3fnu3q','quX6tuy','yvjstLi','ywnR','veHjtM8','5BEY5y+w5RAi5PU05PAW','AKfWqNC','BKThthi','zMLSDgvY','ien1CNjLBNqGCa','CxrHsLa','igrHDge6','ue9ou0u','B3v0zML0ihbYBW','CK16uwi','yxbWBhK','zwnbBMu','q29dsxy','y2zzuge','Ahbdt2C','Dgv4Da','Aw5WDxq','AM9PBG','rLPNweq','CKDJDeK','zMvTDgi','CMvZzxq6','wg9qy0W','ifjLCxvLC3rPBG','CMvWBgfJzq','ig91DgzPDcbTBW','ufHRr0q','ywrK','zxf1zxn0icHjra','Bxb0oG','ioINO+AEKowiSoEAHoACJEIJHEAvSoAnRJO','tufYy1e','zNnHuxC','zNvSBejVzhLcyq','yw5ADvG','ANLpD3K','Dg5Iwvu','uNHnu1G','B3v0zML0xW','zgf0yq','Cg1Vr0K','B2jQzwn0','ifvZzxiGCMvXDq','y2HHCL9TB2rPzG','vLzwAMu','A3vSy2S','ifn0yxj0Aw5Nia','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','z2v0rwXLBwvUDa','sKvgq3m','te13wvO','Aw5KzxHpzG','sfr0sK4','zxfwvKi','r2Hry2G','ufjptvbux1jfuW','zw5LCG','qNnzB1C'];_0x18ed=function(){return _0x4b2398;};return _0x18ed();}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){function _0x490386(_0x2e37ff,_0xc7e93,_0x15bfac,_0x280c7a){return _0x4877(_0xc7e93- -0x69,_0x280c7a);}const _0x414f4d={'Yrxxc':function(_0x156ab7,_0x248e22){return _0x156ab7!==_0x248e22;},'rpaWG':function(_0x57b5ab,_0x30bdc5){return _0x57b5ab(_0x30bdc5);},'hpbUv':_0x1a00a8(0xd0,0x1a4,0x114,0x150)+'时','aRRNR':function(_0x184ad9,_0x58083f){return _0x184ad9(_0x58083f);},'xxmXz':_0x490386(0x2a5,0x283,0x2f3,0x27e),'Uikzn':function(_0x421e8f,_0x71dfa3){return _0x421e8f===_0x71dfa3;},'DURCf':'jGprN','THINo':_0x1a00a8(0x14a,0x144,0xe1,0x5d),'BcaxA':function(_0x4ffded){return _0x4ffded();},'EvBWE':function(_0xa28a01,_0x13088a,_0x34bb82){return _0xa28a01(_0x13088a,_0x34bb82);}};function _0x1a00a8(_0x3c6089,_0x2457ea,_0x588a8b,_0x23fbee){return _0x4877(_0x588a8b- -0x174,_0x3c6089);}return new Promise((_0x6c4a81,_0xca5803)=>{const _0x4a9e15={'LcJZm':function(_0x2b1501,_0x300d1b){function _0x1f1b12(_0x332164,_0x3d4619,_0x55614f,_0x2c9726){return _0x4877(_0x3d4619-0xf9,_0x2c9726);}return _0x414f4d[_0x1f1b12(0x44a,0x3d2,0x33a,0x3c2)](_0x2b1501,_0x300d1b);},'nKGLr':_0x414f4d[_0x51372a(0x2e8,0x350,0x31c,0x2a5)]};function _0x876bbf(_0x550ac6,_0x5e8c16,_0x54fae9,_0x2f2cbb){return _0x1a00a8(_0x550ac6,_0x5e8c16-0xe8,_0x5e8c16-0x1,_0x2f2cbb-0x1be);}function _0x51372a(_0x2079f6,_0x469508,_0xb8c0f9,_0x401e5f){return _0x490386(_0x2079f6-0x1,_0x2079f6-0x15a,_0xb8c0f9-0x162,_0x401e5f);}if(_0x414f4d[_0x51372a(0x39d,0x37e,0x36a,0x316)](_0x414f4d[_0x876bbf(0x8e,0xba,0x122,0x11d)],_0x414f4d[_0x51372a(0x3cc,0x3bb,0x349,0x3ff)]))_0x1ff432[_0x51372a(0x3c2,0x395,0x431,0x39d)]=_0x5f4e3f[_0x44ed4b],_0x4a9e15[_0x51372a(0x375,0x37c,0x2f9,0x2ed)](_0x1932f9,_0x28ca2d)['trigger'](_0x4a9e15[_0x876bbf(0x17e,0x16b,0x1a2,0x1d6)]);else{const _0x112d02=_0x414f4d['BcaxA'](generateRequestId);console[_0x876bbf(0x18e,0x14f,0x1b8,0x131)](_0x51372a(0x33a,0x3c4,0x2e9,0x2dc)+_0x51372a(0x319,0x2b0,0x32a,0x289)+_0x876bbf(-0x42,0x49,0x43,0x4a)+_0x51372a(0x30a,0x2cf,0x34c,0x360)+_0x51372a(0x396,0x304,0x3c3,0x30b)+_0x51372a(0x362,0x3d1,0x3c0,0x33c)+_0x112d02+')');const _0x1c7d2a=_0x14ff75=>{if(_0x414f4d['Yrxxc'](_0x14ff75['id'],_0x112d02))return;function _0x522a3b(_0x46b61a,_0x8cb8c4,_0x356dad,_0xb95631){return _0x876bbf(_0xb95631,_0x356dad- -0x2b,_0x356dad-0x1e9,_0xb95631-0x1d3);}eventSource[_0x181b2f(0x15b,0x203,0x1b7,0x193)+_0x522a3b(0x4e,0xbe,0x3f,-0x52)](eventNames[_0x522a3b(-0x54,-0x3d,0x42,0x9a)+'ODIFY_GET_'+'PROMPT_RES'+_0x181b2f(0x1b6,0x1c0,0x158,0x1d6)],_0x1c7d2a);function _0x181b2f(_0x481971,_0x5577bf,_0x2f014c,_0x1fddd0){return _0x876bbf(_0x481971,_0x1fddd0-0x66,_0x2f014c-0x122,_0x1fddd0-0xc4);}_0x414f4d[_0x181b2f(0x1e9,0xf2,0xf6,0x186)](_0x6c4a81,_0x14ff75[_0x522a3b(0x121,0x63,0xe0,0x14a)]);};eventSource['on'](eventNames['LLM_CHAR_M'+'ODIFY_GET_'+_0x51372a(0x2cd,0x315,0x259,0x2d3)+'PONSE'],_0x1c7d2a);const _0x352158={};_0x352158['id']=_0x112d02,eventSource[_0x876bbf(0xf7,0x86,-0x12,0x14)](eventNames[_0x876bbf(0xbe,0x6d,0x1f,0x72)+_0x876bbf(0x124,0xa2,0x4e,0x3b)+'PROMPT_REQ'+_0x876bbf(0xd8,0xf7,0x11b,0xbf)],_0x352158),_0x414f4d['EvBWE'](setTimeout,()=>{function _0x211050(_0x22de12,_0x115561,_0x5eab14,_0x457347){return _0x876bbf(_0x115561,_0x457347-0x2b9,_0x5eab14-0xb8,_0x457347-0x94);}function _0x3be804(_0x5d815f,_0x4b3cc5,_0x466616,_0xf4bbfc){return _0x876bbf(_0x4b3cc5,_0x466616-0x56,_0x466616-0x1c,_0xf4bbfc-0x69);}eventSource[_0x3be804(0x114,0x199,0x183,0x183)+_0x211050(0x2db,0x34d,0x288,0x323)](eventNames[_0x211050(0x326,0x3af,0x342,0x326)+_0x211050(0x354,0x2d7,0x344,0x35b)+'PROMPT_RES'+'PONSE'],_0x1c7d2a),_0xca5803(new Error(_0x414f4d[_0x3be804(0x148,0x1f9,0x1b3,0x216)]));},-0x7f6*-0x4+0x2ce5+-0x25ad);}});}export function LLM_OUTFIT_MODIFY(_0x390c6a,_0x1d7c35={}){function _0x995c33(_0x253854,_0x5dd08a,_0x272812,_0x46c5e8){return _0x4877(_0x253854- -0xf,_0x5dd08a);}function _0x2a34fd(_0x125863,_0x5d4ce9,_0x1642f0,_0x53f5ef){return _0x4877(_0x1642f0-0x12d,_0x53f5ef);}const _0x5a0f28={'fhBHb':function(_0x4fb65d,_0x6b5d09){return _0x4fb65d(_0x6b5d09);},'jFhjn':'服装修改\x20LLM\x20请'+_0x2a34fd(0x397,0x391,0x338,0x3cc),'gWqyq':function(_0x186d48,_0x2a754f){return _0x186d48!==_0x2a754f;},'JEFCs':_0x2a34fd(0x2fd,0x341,0x392,0x307),'lCaRm':_0x995c33(0x261,0x2a5,0x1d7,0x2ba),'qpDbE':function(_0x456cce){return _0x456cce();}};return new Promise((_0x335df1,_0x1ec671)=>{const _0x5c2e21={'UPlqa':function(_0x5b1a92,_0x23b52f){return _0x5a0f28['gWqyq'](_0x5b1a92,_0x23b52f);},'pgkyR':function(_0x481e3e,_0x417016){return _0x481e3e===_0x417016;},'DxyJL':_0x5a0f28[_0x1c6d60(0x2d6,0x227,0x28d,0x308)],'YJbHS':function(_0x2c36ae,_0x9adb03){return _0x2c36ae(_0x9adb03);},'LujwR':_0x5a0f28[_0x1c6d60(0x296,0x312,0x2f7,0x336)]},_0x1e6726=_0x5a0f28['qpDbE'](generateRequestId);function _0x1c6d60(_0x2db553,_0x44a1d7,_0x1277f0,_0x11317b){return _0x2a34fd(_0x2db553-0x1b9,_0x44a1d7-0xb8,_0x1277f0- -0x76,_0x2db553);}const _0x2b8952=_0x1d7c35['timeoutMs']||-0x18*-0x240+0x26a8*-0x2+0x101b0;console[_0x1c6d60(0x403,0x318,0x379,0x3ce)](_0x475c4d(0x149,0xfd,0x1da,0x1b6)+'mptModify]'+_0x1c6d60(0x2bf,0x2aa,0x2b3,0x344)+_0x475c4d(0xbe,0xc3,0xcf,0x6b)+_0x475c4d(0x150,0xd6,0x178,0x191)+_0x1c6d60(0x204,0x2cf,0x278,0x20c)+':\x20'+_0x1e6726+')');const _0x508a3a=_0x202718=>{function _0x44ba21(_0x326a3e,_0x5445b9,_0x4d7e82,_0x2b4c88){return _0x1c6d60(_0x4d7e82,_0x5445b9-0x4a,_0x5445b9-0x238,_0x2b4c88-0x88);}function _0x14322f(_0x403992,_0x160a55,_0x3cc7c4,_0xde02d9){return _0x1c6d60(_0xde02d9,_0x160a55-0x154,_0x3cc7c4- -0x13,_0xde02d9-0xb9);}if(_0x5c2e21['UPlqa'](_0x202718['id'],_0x1e6726))return;eventSource['removeList'+_0x44ba21(0x482,0x4cc,0x479,0x522)](eventNames[_0x14322f(0x235,0x312,0x284,0x221)+_0x14322f(0x24b,0x2bf,0x2ae,0x2c3)+'ONSE'],_0x508a3a);if(_0x202718[_0x14322f(0x32b,0x2a3,0x2e9,0x271)]){if(_0x5c2e21[_0x44ba21(0x5bd,0x57c,0x580,0x556)](_0x5c2e21[_0x44ba21(0x5cd,0x5c4,0x5b4,0x5ec)],_0x14322f(0x298,0x2e5,0x2c6,0x2e4)))return _0x2b8739&&_0x40073d[_0x44ba21(0x5aa,0x52a,0x5a4,0x4ae)](_0x541646)&&(_0x1ce5e9&&_0x49560b['add'](_0x194ed6)),_0x21e42d['replaceAll'](_0x4025e1,_0x1fae4e);else _0x5c2e21['YJbHS'](_0x335df1,_0x202718['result']);}else _0x1ec671(new Error(_0x202718[_0x14322f(0x2b5,0x25e,0x2ee,0x2b5)]||_0x5c2e21[_0x14322f(0x290,0x32e,0x30f,0x27d)]));};eventSource['on'](eventNames[_0x1c6d60(0x286,0x232,0x297,0x22c)+_0x1c6d60(0x2e6,0x260,0x2c1,0x2c8)+_0x475c4d(0x1af,0x238,0x1c7,0x1fa)],_0x508a3a);const _0x240250={};_0x240250[_0x1c6d60(0x372,0x2d2,0x335,0x369)]=_0x390c6a;function _0x475c4d(_0x221e4c,_0x595afd,_0x4b57cd,_0x54d76c){return _0x995c33(_0x221e4c- -0xf1,_0x54d76c,_0x4b57cd-0xf1,_0x54d76c-0xdc);}_0x240250['id']=_0x1e6726,eventSource['emit'](eventNames[_0x475c4d(0xe0,0xcf,0x45,0x124)+_0x475c4d(0x19d,0x189,0x1d1,0x144)+_0x475c4d(0x123,0xcd,0x122,0x138)],_0x240250),setTimeout(()=>{function _0x7c81c2(_0x43952f,_0x51c3e5,_0x2a2421,_0x4c0de6){return _0x1c6d60(_0x51c3e5,_0x51c3e5-0x1ec,_0x4c0de6-0x23c,_0x4c0de6-0x112);}eventSource['removeList'+'ener'](eventNames[_0x1da3f3(0x3e2,0x3c1,0x349,0x321)+_0x7c81c2(0x57c,0x4b9,0x58e,0x4fd)+_0x1da3f3(0x4b2,0x3f3,0x418,0x47e)],_0x508a3a);function _0x1da3f3(_0x915db3,_0x2836f4,_0x4e8be3,_0x1c1992){return _0x1c6d60(_0x1c1992,_0x2836f4-0xc1,_0x4e8be3-0xb2,_0x1c1992-0x3c);}_0x5a0f28[_0x7c81c2(0x5bf,0x530,0x4c2,0x55c)](_0x1ec671,new Error(_0x5a0f28[_0x7c81c2(0x494,0x530,0x493,0x518)]));},_0x2b8952);});}function preprocessTagContent(_0x986931){function _0x19d389(_0x12b2b9,_0x1dc138,_0x1ee0ab,_0x2a7b87){return _0x4877(_0x1ee0ab-0x100,_0x12b2b9);}function _0x222253(_0x35800b,_0x2ca25f,_0x4353eb,_0x602c7e){return _0x4877(_0x602c7e-0x157,_0x35800b);}let _0x2dcd04=_0x986931[_0x222253(0x27b,0x2a5,0x335,0x314)](/:/g,':')[_0x19d389(0x22a,0x2c0,0x2bd,0x301)](/\(/g,'（')[_0x19d389(0x2c1,0x328,0x2bd,0x2e7)](/\)/g,'）')[_0x222253(0x337,0x39c,0x363,0x314)](/,/g,',');return _0x2dcd04;}function parseOutfitData(_0x1de67b){const _0x8e53aa={'TpkHW':function(_0x57312a,_0xdc38bb){return _0x57312a(_0xdc38bb);},'HTtJN':'LLM\x20请求失败','khreN':_0xf8eb4a(0xe3,0xe5,0x110,0x16e),'cfYPa':_0xf8eb4a(0x66,-0x15,-0x14,0x63),'PGyCY':_0xf8eb4a(0x9,0x1f,-0x33,0x78),'eSbTu':_0xf8eb4a(0x17,-0x3d,0x1,-0x4d),'PWLxS':_0x5f1211(-0x38,0x18,-0x5b,0x20)+_0xf8eb4a(0xd1,0x73,0x8f,0x16d),'Kzlpt':_0xf8eb4a(0x9b,0x8,0x45,0x9e),'XPwJz':_0xf8eb4a(-0x43,-0x78,-0xdd,-0x9e)+'ck','gYaiS':function(_0x372137,_0x1c7d19){return _0x372137!==_0x1c7d19;},'NdtWZ':_0xf8eb4a(-0x4a,-0xe3,-0xc1,-0x85),'jyOwy':function(_0x40126e,_0xf2b704){return _0x40126e===_0xf2b704;},'TrbUf':'nxLNM','IRANO':_0xf8eb4a(-0x37,-0x8,-0x92,-0xbb),'uiIEd':_0x5f1211(0x1f,-0x2f,-0x31,0x5d),'fsaQw':_0x5f1211(-0x35,-0x4a,0x4,0x4d),'DOjTX':_0x5f1211(-0x6c,-0xb4,-0x6c,-0x52)+_0xf8eb4a(0x1f,0xae,-0x78,0x7d)+_0xf8eb4a(-0x46,-0x83,0x48,-0x31)},_0x37771c=_0x1de67b['split']('\x0a')[_0xf8eb4a(0xc1,0x93,0xd9,0x74)](_0x7b4f21=>_0x7b4f21[_0x5f1211(-0x72,0x17,-0x4a,0xc)]())[_0x5f1211(0x2a,-0x34,0x96,-0x1f)](_0x703a8a=>_0x703a8a),_0x54f3e0={};_0x54f3e0[_0xf8eb4a(0x66,0x91,0x50,0x8e)]='',_0x54f3e0[_0x5f1211(-0xa3,-0x10d,-0xb6,-0x1c)]='',_0x54f3e0['upperBody']='',_0x54f3e0['upperBodyB'+_0xf8eb4a(0xd1,0x79,0xbd,0x150)]='',_0x54f3e0[_0x5f1211(-0x11,-0x31,0x6c,-0x1c)]='',_0x54f3e0[_0x5f1211(-0xef,-0x174,-0x15a,-0x8c)+'ck']='';const _0x36ce08=_0x54f3e0,_0x3c6e5={};_0x3c6e5[_0x5f1211(-0x3a,-0x80,-0x6c,-0x7a)]=_0x8e53aa[_0xf8eb4a(0xe0,0xe4,0xab,0x137)],_0x3c6e5['英文名称']=_0x8e53aa[_0xf8eb4a(0x53,0x68,0x0,-0x34)],_0x3c6e5[_0x5f1211(-0x6e,-0x34,-0x4f,-0x8b)]=_0x8e53aa[_0x5f1211(-0x86,-0x11c,-0x29,-0x6a)],_0x3c6e5[_0x5f1211(-0x3d,-0xbc,0x1,-0x6f)]=_0x8e53aa[_0xf8eb4a(0x95,0x71,0xbb,0x114)];function _0x5f1211(_0x37c117,_0x1c4200,_0x46b2ec,_0x5c1196){return _0x4877(_0x37c117- -0x2b5,_0x1c4200);}_0x3c6e5['下半身']=_0x5f1211(-0x11,-0x87,-0xa,-0x96),_0x3c6e5['下半身服装']=_0x8e53aa[_0x5f1211(-0x8,-0xa1,-0x1f,0x26)],_0x3c6e5[_0x5f1211(-0xc2,-0x4d,-0x74,-0xf4)]=_0x8e53aa[_0xf8eb4a(0x8d,0x76,0x4f,0x7e)];function _0xf8eb4a(_0x34f725,_0xda4878,_0x35a878,_0x1ee3d6){return _0x4877(_0x34f725- -0x209,_0xda4878);}const _0x1a10e8=_0x3c6e5;for(const _0x120b18 of _0x37771c){if(_0x8e53aa[_0xf8eb4a(-0x9,0x26,-0x6,0x69)](_0xf8eb4a(-0x4a,-0x99,-0x48,-0x48),_0x8e53aa[_0xf8eb4a(0x82,0xf4,0xb6,0x9a)]))_0x8e53aa[_0x5f1211(-0x67,-0xfa,-0x34,-0x15)](_0x1f9bcd,new _0x1d91ac(_0x2c2f0b['result']||_0x8e53aa[_0xf8eb4a(-0x30,-0x2b,0x62,0x24)]));else{const _0x38343a=_0x120b18[_0xf8eb4a(-0x31,-0x78,0x1c,0x61)](':');if(_0x8e53aa[_0x5f1211(-0xed,-0x114,-0x167,-0x9d)](_0x38343a,-(0x1a*0x1d+0x448+-0x739)))continue;const _0x4da966=_0x120b18['substring'](0x233d+-0x1868+-0xad5,_0x38343a)[_0xf8eb4a(0x3a,0x51,-0x41,-0x9)](),_0x407dfa=_0x120b18[_0xf8eb4a(0xc0,0x3f,0x13e,0x68)](_0x38343a+(-0x1f37*0x1+-0x1b14+0x34*0x11f))['trim']();if(_0x1a10e8[_0x4da966]){if(_0x8e53aa['TrbUf']===_0x8e53aa['IRANO']){const _0x5f0107=_0x43804f[_0xf8eb4a(-0x34,-0x1,-0xc,-0x35)+_0xf8eb4a(0x90,0x70,0xb0,0x47)](_0x5f1211(-0xea,-0x139,-0xe1,-0xe5)+_0x38426c);_0x5f0107&&(_0x5f0107[_0xf8eb4a(0xc8,0xfc,0x120,0x139)]=_0x7336d1[_0xee6057],_0x8e53aa[_0xf8eb4a(0x45,0x2a,0x65,-0x4)](_0x5e8cd1,_0x5f0107)[_0xf8eb4a(0x85,0xf8,0xad,0xf7)](_0x8e53aa[_0xf8eb4a(-0x24,-0x18,0x2b,-0x26)]));}else _0x36ce08[_0x1a10e8[_0x4da966]]=_0x407dfa;}else _0x4da966&&_0x407dfa&&console[_0x5f1211(0xd,-0x5f,-0x23,0x4d)](_0xf8eb4a(0x40,0xd3,0x2c,0x5)+_0xf8eb4a(0x1f,-0x26,0x76,0x5f)+'\x20未识别的服装字段\x20'+'\x22'+_0x4da966+'\x22');}}if(!_0x36ce08['nameCN']){if(_0x8e53aa[_0xf8eb4a(-0x9,0x76,-0x80,-0x97)](_0x8e53aa[_0x5f1211(-0xad,-0xdf,-0x103,-0x13e)],_0x8e53aa[_0x5f1211(-0xf0,-0xc0,-0xc5,-0x10f)]))return null;else{const _0x43b8ee=_0x5b3f8b['apply'](_0x25b169,arguments);return _0x5dbd94=null,_0x43b8ee;}}return console[_0x5f1211(0xd,0x1f,0x1c,0x63)](_0x8e53aa[_0x5f1211(-0x4,-0x4,0x4e,0x7c)],_0x36ce08),_0x36ce08;}function extractOutfitTags(_0x3c5da6){const _0x11b775={'RUioB':function(_0x25119d,_0x43dab6){return _0x25119d!==_0x43dab6;},'lUXCZ':function(_0x55fb40,_0x36fe3d){return _0x55fb40(_0x36fe3d);},'bOXQH':function(_0x14717b,_0x2bbe6d){return _0x14717b(_0x2bbe6d);}};function _0x1e729e(_0x572ad3,_0x1d033a,_0x34b6c3,_0x59e373){return _0x4877(_0x1d033a-0x10c,_0x59e373);}const _0x12a40f={};_0x12a40f[_0x148c21(0x2e4,0x2f9,0x2b7,0x2a2)]=[];const _0x37e421=_0x12a40f;_0x3c5da6=_0x3c5da6[_0x148c21(0x1a9,0x1d0,0x1ff,0x202)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x1e729e(0x352,0x34f,0x35d,0x2ed)]();function _0x148c21(_0x435b69,_0x4b29b3,_0x4519c1,_0x3902ad){return _0x4877(_0x3902ad-0x45,_0x4519c1);}const _0x933a51=/<服装>([\s\S]*?)<\/服装>/g;let _0x2cdf4b;while(_0x11b775[_0x1e729e(0x348,0x31c,0x33c,0x2e7)](_0x2cdf4b=_0x933a51[_0x148c21(0x347,0x305,0x28c,0x2c7)](_0x3c5da6),null)){const _0x4db411=_0x11b775['lUXCZ'](preprocessTagContent,_0x2cdf4b[0x1574+0x17d6+-0x2d49]),_0x1cd293=_0x11b775[_0x148c21(0x23e,0x2c9,0x26c,0x2c8)](parseOutfitData,_0x4db411);_0x1cd293&&_0x37e421['outfits'][_0x148c21(0x33f,0x38d,0x32b,0x302)](_0x1cd293);}return _0x37e421;}function getCurrentOutfitPreset(){const _0x39daa3=extension_settings[extensionName];function _0x48165d(_0x40714d,_0x321ebd,_0x4223ba,_0x3455ad){return _0x4877(_0x321ebd-0x22a,_0x40714d);}const _0x2ce132=_0x39daa3[_0xeb7428(0xe1,0x8e,0xf1,0x83)+_0x48165d(0x4b4,0x4a0,0x518,0x49e)];function _0xeb7428(_0x2e55b2,_0x2c0417,_0x5d5f75,_0x3c2cdb){return _0x4877(_0x5d5f75- -0x110,_0x3c2cdb);}if(!_0x2ce132||!_0x39daa3[_0xeb7428(0x90,0xf5,0xf1,0x81)+'ets'][_0x2ce132])return null;const _0x38a865={};return _0x38a865['id']=_0x2ce132,_0x38a865[_0xeb7428(0x7d,0x92,0xbc,0x76)]=_0x39daa3[_0x48165d(0x446,0x42b,0x3b2,0x46f)+_0xeb7428(0x1a1,0x107,0x17a,0x1f9)][_0x2ce132],_0x38a865;}function buildOutfitText(_0x1ab017){const _0x47f701=_0x1ab017[_0x1cc50b(-0x8,0xc2,0x16,0x78)];let _0xbe8594=_0x41d6f4(0x64,0xef,0xb3,0xd9);_0xbe8594+=_0x1cc50b(0x134,0x16d,0x1a4,0x156)+(_0x47f701[_0x1cc50b(0x15e,0xed,0x104,0x11b)]||'')+'\x0a',_0xbe8594+=_0x1cc50b(0xfb,0x193,0x1ba,0x147)+(_0x47f701[_0x41d6f4(0x13f,0x194,0x17a,0xfd)]||'')+'\x0a',_0xbe8594+='上半身:\x20'+(_0x47f701[_0x41d6f4(0x120,0x17d,0x169,0x10b)]||'')+'\x0a',_0xbe8594+=_0x41d6f4(0x112,0x14c,0x1a1,0x13c)+(_0x47f701[_0x1cc50b(0x144,0x135,0x141,0x129)+_0x41d6f4(0x1ab,0x162,0x1b3,0x1c5)]||'')+'\x0a';function _0x1cc50b(_0x33d151,_0xedccf0,_0x1f4e54,_0xb545a8){return _0x4877(_0xb545a8- -0x154,_0x1f4e54);}function _0x41d6f4(_0x22c926,_0x311ba3,_0x58b59a,_0x13e81c){return _0x4877(_0x13e81c- -0x115,_0x311ba3);}return _0xbe8594+=_0x41d6f4(0xe9,0x54,0x5d,0xea)+(_0x47f701['fullBody']||'')+'\x0a',_0xbe8594+=_0x41d6f4(0x154,0x1ee,0x1d9,0x158)+(_0x47f701['fullBodyBa'+'ck']||'')+'\x0a',_0xbe8594+=_0x41d6f4(0x10d,0x164,0x1a5,0x117),_0xbe8594;}function _0x4877(_0x113663,_0x4b13b1){_0x113663=_0x113663-(-0x1951+0x16d5+-0xd*-0x53);const _0x3aff4d=_0x18ed();let _0x319239=_0x3aff4d[_0x113663];if(_0x4877['QadpNK']===undefined){var _0x3ecfcd=function(_0x20783e){const _0x267394='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x391612='',_0x42a088='',_0x2b9575=_0x391612+_0x3ecfcd;for(let _0x445471=-0x144d*-0x1+0xdf6+-0x2243,_0x28b5eb,_0x58dce8,_0x3238a1=0x1f5f+0x2550+-0x44af;_0x58dce8=_0x20783e['charAt'](_0x3238a1++);~_0x58dce8&&(_0x28b5eb=_0x445471%(-0xd22+0x1998+-0x213*0x6)?_0x28b5eb*(0x1228+-0x5a8+-0xc40)+_0x58dce8:_0x58dce8,_0x445471++%(-0xef0*0x2+0x6f*-0x4+0x1fa0*0x1))?_0x391612+=_0x2b9575['charCodeAt'](_0x3238a1+(-0x1*-0xf2c+-0x14ee+0x5cc))-(-0x19d2*-0x1+-0x25d9+0xc11)!==-0x246e+-0x23b1*-0x1+-0x7*-0x1b?String['fromCharCode'](-0x1bdb+-0x268d+0x4367&_0x28b5eb>>(-(-0x15d*-0xf+0x1cef+-0x4*0xc58)*_0x445471&0x1*0xd63+0x1dd2+-0x2b2f)):_0x445471:0xd7c+-0xd1e+0x2f*-0x2){_0x58dce8=_0x267394['indexOf'](_0x58dce8);}for(let _0x55ac4c=-0x25c7+0x3*0x431+0x1934,_0x5e7651=_0x391612['length'];_0x55ac4c<_0x5e7651;_0x55ac4c++){_0x42a088+='%'+('00'+_0x391612['charCodeAt'](_0x55ac4c)['toString'](0x1983+0x11a1*0x1+-0x4*0xac5))['slice'](-(-0x1*0xdb3+-0x5*0x1f3+0x1774));}return decodeURIComponent(_0x42a088);};_0x4877['WBZoiG']=_0x3ecfcd,_0x4877['DlVyec']={},_0x4877['QadpNK']=!![];}const _0x1e3cce=_0x3aff4d[-0x2037+0x26*0x16+0x1cf3],_0xe81757=_0x113663+_0x1e3cce,_0x345210=_0x4877['DlVyec'][_0xe81757];if(!_0x345210){const _0x2d5a56=function(_0x48c04a){this['kAkKQl']=_0x48c04a,this['IsjeKF']=[-0x2db*0x2+-0x4f*-0x50+-0x12f9,-0x208+-0x25*0x59+0xee5,0xba3+0xb0d*-0x1+-0x96],this['qvOlMx']=function(){return'newState';},this['zEFSaU']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['naBmsK']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2d5a56['prototype']['eEGHqd']=function(){const _0x5ae07b=new RegExp(this['zEFSaU']+this['naBmsK']),_0x202c7e=_0x5ae07b['test'](this['qvOlMx']['toString']())?--this['IsjeKF'][0x6b1+0x3*-0x22f+-0x1*0x23]:--this['IsjeKF'][0x7*0x1d5+0xef*0x1d+0x27e6*-0x1];return this['UnrUpK'](_0x202c7e);},_0x2d5a56['prototype']['UnrUpK']=function(_0x15c3a7){if(!Boolean(~_0x15c3a7))return _0x15c3a7;return this['yyJlaR'](this['kAkKQl']);},_0x2d5a56['prototype']['yyJlaR']=function(_0x1bb302){for(let _0x4b9361=-0x6a3*0x3+-0x16*-0xc1+0x353,_0x4cb3ef=this['IsjeKF']['length'];_0x4b9361<_0x4cb3ef;_0x4b9361++){this['IsjeKF']['push'](Math['round'](Math['random']())),_0x4cb3ef=this['IsjeKF']['length'];}return _0x1bb302(this['IsjeKF'][0x15e9+0x16f0+-0x2cd9]);},new _0x2d5a56(_0x4877)['eEGHqd'](),_0x319239=_0x4877['WBZoiG'](_0x319239),_0x4877['DlVyec'][_0xe81757]=_0x319239;}else _0x319239=_0x345210;return _0x319239;}export async function handleOutfitPromptModify(_0x4293f0,_0x109245=[]){function _0xa4d197(_0x46d3a7,_0x3c898a,_0x1274f0,_0x54fc58){return _0x4877(_0x54fc58- -0x1b2,_0x3c898a);}function _0x56ef59(_0x48b346,_0x3829f2,_0x4462cf,_0x1d71d7){return _0x4877(_0x4462cf- -0x327,_0x3829f2);}const _0x211d35={'QqrHr':'text','BsYoW':function(_0x1a9b22,_0x3a2708){return _0x1a9b22(_0x3a2708);},'anZuX':function(_0xd9a118,_0x20e7a7){return _0xd9a118(_0x20e7a7);},'CtKxi':_0x56ef59(-0xe3,-0x69,-0xde,-0x16c)+_0x56ef59(-0x12d,-0x11c,-0xff,-0xc5)+_0xa4d197(-0x8,0x12,-0x17,0x21)+_0x56ef59(-0x65,-0x5a,-0x43,0x32)+_0x56ef59(0x4,-0x1e,-0x84,0x14)+'\x20request..'+'.','twoop':function(_0x343094,_0x399bdb){return _0x343094!==_0x399bdb;},'YiZyv':'CfDwm','kscFU':function(_0x3abe22){return _0x3abe22();},'eqVVB':_0x56ef59(-0x188,-0x1b1,-0x129,-0x160),'KqMSt':_0xa4d197(0xcc,0x103,0x31,0x97)+_0x56ef59(-0x96,-0x114,-0xff,-0x85)+_0xa4d197(0x1be,0x17d,0x1be,0x12e)+_0x56ef59(0x18,0x60,-0x36,-0x3a),'MArcQ':function(_0x42087b,_0x553770,_0x457d75){return _0x42087b(_0x553770,_0x457d75);},'kYVNP':_0x56ef59(-0x146,-0xce,-0x157,-0x196)+'y','JPNYQ':'{{用户需求}}','SqRCC':function(_0x1b291e,_0x3d2db1,_0x2e85a9,_0x3e05bf,_0x859e74){return _0x1b291e(_0x3d2db1,_0x2e85a9,_0x3e05bf,_0x859e74);},'eRiRn':_0xa4d197(0x73,0xae,0x95,0xd5),'dHkAr':function(_0xe747c2,_0x200a37,_0x2c09a5,_0x251c75,_0x5c03ca){return _0xe747c2(_0x200a37,_0x2c09a5,_0x251c75,_0x5c03ca);},'pPmCr':function(_0xde4f5b,_0x56126e){return _0xde4f5b||_0x56126e;},'ZifkE':function(_0x6218ea,_0x156e4a,_0x11b784,_0x335eb7,_0x2ff85e){return _0x6218ea(_0x156e4a,_0x11b784,_0x335eb7,_0x2ff85e);},'JcmYh':_0x56ef59(-0x46,-0x10b,-0xb5,-0x10d),'fBeWE':function(_0x41d7e8,_0x32bafe,_0x3e60ef,_0x1ddcc1,_0x3147da){return _0x41d7e8(_0x32bafe,_0x3e60ef,_0x1ddcc1,_0x3147da);},'PjOxz':_0x56ef59(-0xef,-0x168,-0x113,-0x116),'CyZja':function(_0x197da2,_0x323636,_0x4f44f3,_0x12d015,_0x4800ec){return _0x197da2(_0x323636,_0x4f44f3,_0x12d015,_0x4800ec);},'IeUSe':function(_0x2f0b52,_0x523e6d,_0x2b22fb,_0x2a85d4,_0x1ab5b6){return _0x2f0b52(_0x523e6d,_0x2b22fb,_0x2a85d4,_0x1ab5b6);},'bfbzp':_0x56ef59(-0xbb,-0x10e,-0xde,-0xae)+_0x56ef59(-0x167,-0x87,-0xff,-0x85)+_0xa4d197(0x29,0x65,0x2,0x37)+_0xa4d197(-0x2b,-0x56,-0x55,0x10),'wcWdb':function(_0x5186ba,_0x421e26){return _0x5186ba>_0x421e26;},'WiqPm':function(_0x1684ea,_0x5e0706){return _0x1684ea>=_0x5e0706;},'ZIwlz':_0xa4d197(-0x1c,0xe5,0xad,0x65),'iAITF':_0xa4d197(0x10,0x75,0x116,0x97)+_0x56ef59(-0x11a,-0xc8,-0xff,-0x13d)+'\x20Attached','YrtRe':_0x56ef59(-0x123,-0x12e,-0xce,-0xac)+'message\x20at'+'\x20index','NLqMY':function(_0xb0d29d,_0x6fa35c,_0x447497){return _0xb0d29d(_0x6fa35c,_0x447497);},'UdJRz':'[outfitPro'+'mptModify]'+_0xa4d197(0x19,0x83,0x70,0x6c)+'t:','pmoGI':function(_0x457332,_0x4f203d){return _0x457332!==_0x4f203d;},'jYrqr':_0xa4d197(0x78,0xa7,0xee,0x7e),'RAeHV':function(_0x4cfd43,_0x140ebc){return _0x4cfd43(_0x140ebc);},'FZgXD':function(_0x320564,_0x70c892){return _0x320564===_0x70c892;},'OlOna':function(_0x27287b,_0x23eed7){return _0x27287b===_0x23eed7;},'GhQch':_0x56ef59(-0x35,-0xf7,-0xc0,-0x159),'QdtCn':_0x56ef59(-0x12b,-0xa2,-0xf4,-0x98)+'检测到服装标签','jmRog':'[outfitPro'+_0x56ef59(-0x142,-0x8e,-0xff,-0xf3)+_0x56ef59(-0x107,-0x88,-0xf1,-0xbf)+_0x56ef59(0x39,-0xa9,-0x45,0x53),'gwodN':_0xa4d197(0x76,-0x4c,0x64,0x2d)};console[_0x56ef59(0x16,-0x80,-0x65,-0xef)](_0x211d35[_0x56ef59(-0x134,-0x54,-0xbb,-0xf1)]),toastr[_0x56ef59(0x34,-0xfe,-0x64,0x22)](_0xa4d197(0xa4,-0x57,-0x22,0x32)+_0xa4d197(-0x40,0xc0,0x4d,0x35));try{if(_0x211d35[_0x56ef59(-0xfd,-0xd1,-0x11e,-0x110)](_0x211d35['YiZyv'],_0x211d35['YiZyv'])){const _0x33ee98={};_0x33ee98[_0x56ef59(-0x5f,-0x116,-0xf2,-0x15a)]=_0x211d35[_0x56ef59(-0x159,-0x10c,-0x132,-0x111)],_0x33ee98[_0x56ef59(0x34,-0xcb,-0x3c,-0x17)]=_0x56ef59(-0x18a,-0xd1,-0x153,-0x17a)+_0x42a088['length']+'张'+_0x2b9575+']',_0x391612[_0xa4d197(0x142,0x139,0x7f,0x10b)](_0x33ee98);}else{const _0x4a1d75=extension_settings[extensionName],_0x330c26=_0x211d35['kscFU'](getCurrentOutfitPreset);if(!_0x330c26){toastr[_0xa4d197(0x186,0xed,0x86,0x10e)](_0x211d35[_0x56ef59(-0xf4,-0x150,-0x14d,-0x1a6)]);return;}console[_0x56ef59(-0x6c,-0x14,-0x65,-0xbe)](_0x211d35[_0x56ef59(-0x45,-0x3,-0x50,-0x6b)],_0x330c26['id']);const _0x5cca7e=_0x211d35['anZuX'](buildOutfitText,_0x330c26),_0x3271bc=[_0x4293f0||'',_0x5cca7e][_0x56ef59(-0x58,-0xd5,-0x48,-0xe1)](Boolean)['join']('\x0a');let _0x508251=_0x211d35[_0xa4d197(0x9,-0x61,0x48,0x12)](buildPromptForRequestType,_0x211d35[_0xa4d197(0x107,0xc2,0x5a,0xb6)],_0x3271bc);const _0x38b0d2=new Set(),_0xd24d35=_0x211d35['MArcQ'](findMessageIndexWithPlaceholder,_0x508251,_0x211d35[_0x56ef59(-0x1b4,-0xbb,-0x11a,-0x126)]);console[_0xa4d197(0x9a,0xb8,0x1a0,0x110)](_0xa4d197(0xe5,0xc0,0x47,0x97)+'mptModify]'+_0xa4d197(-0x29,-0x11,0x1,0x1d)+_0xa4d197(0x177,0x127,0x101,0x104)+_0xa4d197(0xbf,0xe3,0x93,0x119)+'x:',_0xd24d35),_0x508251=replacePlaceholder(_0x508251,_0x56ef59(-0xc0,-0xef,-0x145,-0x146),_0x5cca7e,_0x38b0d2),_0x508251=_0x211d35[_0x56ef59(-0x146,-0xe2,-0xe5,-0xe2)](replacePlaceholder,_0x508251,_0x211d35[_0x56ef59(-0xe,-0x1,-0x80,-0x108)],_0x5cca7e,_0x38b0d2),_0x508251=_0x211d35[_0x56ef59(-0x2c,-0x13,-0x6e,-0xbb)](replacePlaceholder,_0x508251,_0x211d35[_0x56ef59(-0x194,-0x1ae,-0x11a,-0x160)],_0x211d35[_0x56ef59(-0x86,-0x2f,-0x96,-0x101)](_0x4293f0,''),_0x38b0d2),_0x508251=_0x211d35['ZifkE'](replacePlaceholder,_0x508251,_0x211d35[_0xa4d197(0x32,0x79,0x97,0xc5)],'',_0x38b0d2),_0x508251=_0x211d35[_0xa4d197(0x4,0x28,-0x2a,0x3f)](replacePlaceholder,_0x508251,_0xa4d197(0x139,0x98,0xe4,0xad),'',_0x38b0d2),_0x508251=_0x211d35[_0x56ef59(-0x5c,-0x65,-0x6e,-0x62)](replacePlaceholder,_0x508251,_0x211d35[_0xa4d197(0xba,0x7b,0xa1,0x74)],'',_0x38b0d2),_0x508251=_0x211d35[_0x56ef59(-0xda,-0x88,-0xe5,-0x90)](replacePlaceholder,_0x508251,_0x56ef59(-0x157,-0x59,-0xd1,-0xd6),'',_0x38b0d2),_0x508251=_0x211d35['CyZja'](replacePlaceholder,_0x508251,_0xa4d197(0x144,0xd6,0xd4,0x11d)+'}}','',_0x38b0d2),_0x508251=_0x211d35['IeUSe'](replacePlaceholder,_0x508251,'{{通用角色启用列表'+'}}','',_0x38b0d2),console['log'](_0x211d35['bfbzp'],_0x508251);let _0x217d43='';_0x211d35[_0xa4d197(0xf8,0x17,-0x12,0x66)](_0x38b0d2['size'],0x719+0x47*0x76+-0x27d3)&&(_0x217d43='诊断：检测到以下变量'+_0x56ef59(-0xa2,-0xb9,-0xc4,-0x111)+[..._0x38b0d2][_0x56ef59(-0xcc,-0x65,-0x3a,-0x5f)]('、')+'\x0a');if(_0x109245&&_0x109245[_0x56ef59(-0x86,-0x141,-0x116,-0x190)]>0x1933*0x1+0xf6d*-0x2+0x5a7&&_0x211d35[_0x56ef59(-0x11d,-0x10e,-0x8f,-0xa1)](_0xd24d35,0x6ef+0xd75+0x2*-0xa32)){if('hsRsp'===_0x211d35[_0x56ef59(-0xbe,-0xa3,-0xed,-0x63)])_0x508251=attachImagesToMessage(_0x508251,_0xd24d35,_0x109245,_0xa4d197(0x86,0x116,0x158,0x105)),console['log'](_0x211d35[_0xa4d197(0xe0,0x94,0xc8,0xe5)],_0x109245['length'],_0x211d35[_0x56ef59(-0xe8,-0xc9,-0x12d,-0x121)],_0xd24d35);else{const _0x36dff8=_0x16b1e5?function(){function _0x51d68c(_0x2ddfd7,_0x4d2db1,_0x5a7943,_0x16157d){return _0xa4d197(_0x2ddfd7-0x113,_0x4d2db1,_0x5a7943-0xbd,_0x2ddfd7-0x3a1);}if(_0x5e85c7){const _0x20891f=_0x2d91c6[_0x51d68c(0x4d5,0x51e,0x4ce,0x4b8)](_0x30b392,arguments);return _0x74cdff=null,_0x20891f;}}:function(){};return _0x28c914=![],_0x36dff8;}}_0x211d35[_0xa4d197(-0x1a,-0x3e,-0x74,0x12)](updateCombinedPrompt,_0x508251,_0x217d43);const _0x1fc613={};_0x1fc613[_0x56ef59(-0x5c,0x37,-0x5f,0x6)]=0x493e0;const _0x4faaff=await _0x211d35[_0x56ef59(-0xca,0x21,-0x74,0x1e)](LLM_OUTFIT_MODIFY,_0x508251,_0x1fc613);console[_0xa4d197(0x195,0x145,0x172,0x110)](_0x211d35[_0xa4d197(0x6d,0xc2,0xba,0xa1)],_0x4faaff);if(!_0x4faaff){if(_0x211d35[_0x56ef59(-0x13a,-0x123,-0x15a,-0x19e)](_0xa4d197(0xe9,0xa9,0x155,0x10f),_0x211d35[_0x56ef59(0x1b,-0x41,-0x5b,0x1a)])){toastr['error'](_0x56ef59(-0xf8,-0xf6,-0xa2,-0xa4));return;}else _0x115f8a[_0x56ef59(-0xeb,-0x92,-0xca,-0x102)][_0xa4d197(0x12f,0x132,0x7a,0x10b)](_0x3ef09f);}const _0x5018c2=_0x211d35[_0x56ef59(-0x106,-0xa5,-0xa6,-0xa4)](extractOutfitTags,_0x4faaff);if(_0x211d35[_0xa4d197(0x115,0xd2,0xc2,0x13c)](_0x5018c2[_0x56ef59(-0xc6,-0x12e,-0xca,-0x13d)][_0xa4d197(0x18,-0x3b,0xed,0x5f)],0x7f*-0x37+-0x1d*0x89+0x2ace)){if(_0x211d35[_0x56ef59(-0x1d4,-0x146,-0x13c,-0x1c2)](_0x211d35[_0x56ef59(-0xf8,-0x1d9,-0x14c,-0x1b7)],_0x56ef59(-0xd6,-0xe9,-0xc0,-0x33))){toastr['warning'](_0x211d35[_0x56ef59(-0x94,0x2b,-0x6c,-0x107)]),console['log'](_0xa4d197(0x83,0x11a,0xd4,0x97)+_0xa4d197(0x7f,0x36,0xe1,0x76)+_0x56ef59(-0xd5,-0x7b,-0x6d,0x2d)+'utput\x20for\x20'+_0x56ef59(-0x197,-0xa2,-0x12a,-0x10d),_0x4faaff);return;}else{const _0x5df7fa=_0x211d35[_0x56ef59(-0x19f,-0x16d,-0x149,-0x1be)](_0x5c8ff3,_0x1c44d1[-0x187f+0x3af+-0x1*-0x14d1]),_0x945bb=_0x211d35[_0xa4d197(-0x56,-0x17,-0x1f,0x15)](_0x35c07c,_0x5df7fa);_0x945bb&&_0x117096[_0x56ef59(-0xb9,-0x5c,-0xca,-0x95)]['push'](_0x945bb);}}console[_0xa4d197(0xcd,0x146,0x10e,0x110)](_0x211d35[_0x56ef59(-0x190,-0x178,-0x13d,-0xbd)],_0x5018c2);const _0x5bc2bb=_0x5018c2['outfits'][0x146f+-0x648*0x4+-0x1*-0x4b1];await _0x211d35[_0xa4d197(0x5d,0x60,-0x7c,0x12)](updateOutfitPresetFromLLM,_0x330c26['id'],_0x5bc2bb),toastr['success'](_0x211d35[_0x56ef59(-0x12e,-0x14a,-0x124,-0x125)]);}}catch(_0x5493d9){console['error'](_0xa4d197(0xad,0xfd,0x10c,0x97)+'mptModify]'+_0xa4d197(0x10d,0x92,0xe,0x94),_0x5493d9),toastr['error'](_0x56ef59(-0x14b,-0x142,-0xc5,-0xef)+'\x20'+_0x5493d9['message']);}}async function updateOutfitPresetFromLLM(_0x37f9b3,_0x1919f5){function _0x243d4b(_0x3a4519,_0x1471f9,_0x54fb3c,_0xb28f7e){return _0x4877(_0x1471f9- -0x32b,_0xb28f7e);}const _0x2b992e={'bcLml':function(_0x4c96e7,_0x6f3a62){return _0x4c96e7===_0x6f3a62;},'BPtYY':_0x240ff9(0x41e,0x3e3,0x45f,0x396),'ecAne':_0x240ff9(0x31b,0x37c,0x2fb,0x2fb),'ZhlVM':_0x243d4b(-0x6d,-0x107,-0x13e,-0x8a)+'+$','VrUUT':_0x243d4b(-0x13e,-0xbd,-0x60,-0xa1),'OnwAi':_0x243d4b(-0x6f,-0xb0,-0x11e,-0xec),'VDKWK':_0x243d4b(-0x192,-0x133,-0xa6,-0xba),'NKeFS':_0x240ff9(0x37a,0x2f0,0x3b8,0x39f),'znMjn':_0x240ff9(0x3ab,0x355,0x443,0x33b),'yPOvf':_0x243d4b(-0x1a5,-0x115,-0x106,-0x1af),'gzYcK':_0x243d4b(-0x1c1,-0x138,-0x1c4,-0xfa),'abejf':function(_0x577a91,_0x1a8056){return _0x577a91!==_0x1a8056;},'kgiqq':_0x240ff9(0x322,0x378,0x2ea,0x33b),'fOkLZ':function(_0x287fa8,_0x3efbd2){return _0x287fa8!==_0x3efbd2;},'Dytfo':_0x240ff9(0x32e,0x2b1,0x29d,0x2a1),'Knwzq':function(_0x2992e3,_0xca67bd){return _0x2992e3>_0xca67bd;},'lXdhx':_0x243d4b(-0x114,-0xd7,-0x10f,-0x15e),'jZYoS':_0x243d4b(-0x7b,-0x65,-0x51,-0xa4)+'内容','ggBRu':_0x240ff9(0x36f,0x3bf,0x300,0x2ef),'qFkuQ':function(_0xcc81f0){return _0xcc81f0();},'QZulP':function(_0x3c80bf,_0x4cc9bd){return _0x3c80bf(_0x4cc9bd);},'szZlg':_0x243d4b(-0x186,-0x13b,-0xd9,-0x17a)+_0x240ff9(0x3c3,0x37f,0x332,0x405)+_0x240ff9(0x314,0x366,0x292,0x3ab),'QbjdE':function(_0x58a359,_0x53d8ff){return _0x58a359(_0x53d8ff);}},_0x2f9583=extension_settings[extensionName],_0x3dc773=_0x2f9583['outfitPres'+_0x240ff9(0x3bd,0x34e,0x44e,0x38d)][_0x37f9b3];if(!_0x3dc773){toastr[_0x240ff9(0x3f3,0x45b,0x38e,0x40f)](_0x2b992e['VrUUT']);return;}let _0x3155cf='准备更新服装\x20\x22'+_0x37f9b3+_0x240ff9(0x3eb,0x46e,0x3e5,0x39e);const _0x1ca78d={};_0x1ca78d[_0x240ff9(0x3a2,0x371,0x354,0x3df)]=_0x2b992e[_0x243d4b(-0x14a,-0xcb,-0x62,-0x117)],_0x1ca78d['nameEN']=_0x2b992e[_0x240ff9(0x37e,0x3b1,0x38a,0x2f6)],_0x1ca78d[_0x243d4b(-0x179,-0x10b,-0xbd,-0x13e)]=_0x2b992e[_0x240ff9(0x3a8,0x41c,0x3b3,0x355)],_0x1ca78d['upperBodyB'+_0x240ff9(0x40d,0x481,0x390,0x3f3)]=_0x2b992e[_0x240ff9(0x34f,0x2ba,0x2d3,0x333)],_0x1ca78d['fullBody']=_0x2b992e['yPOvf'],_0x1ca78d[_0x243d4b(-0x181,-0x165,-0x188,-0x164)+'ck']=_0x2b992e[_0x240ff9(0x3bf,0x45a,0x326,0x425)];const _0x1354fa=_0x1ca78d;let _0x725b40=-0x6db+-0x5*0x5d1+-0x64*-0x5c;for(const _0x1f338c in _0x1354fa){if(_0x2b992e[_0x243d4b(0x18,-0x6f,0x1d,-0xa3)](_0x2b992e[_0x240ff9(0x316,0x2b9,0x320,0x374)],_0x2b992e[_0x240ff9(0x316,0x30f,0x2f5,0x2d1)]))return _0x1fce57[_0x240ff9(0x3fd,0x44c,0x363,0x443)](_0xe0d79f=>_0x43dc1b(_0xe0d79f,_0x48cdfc,_0x22e39c,_0x28b76b));else{if(_0x1919f5[_0x1f338c]&&_0x2b992e[_0x243d4b(-0x10b,-0xf9,-0x6c,-0x89)](_0x1919f5[_0x1f338c],_0x3dc773[_0x1f338c])){const _0x558902=_0x3dc773[_0x1f338c]||_0x2b992e['Dytfo'],_0x5c6ba1=_0x1919f5[_0x1f338c];_0x3155cf+='•\x20'+_0x1354fa[_0x1f338c]+':\x0a',_0x3155cf+=_0x243d4b(-0x139,-0xe7,-0x137,-0xef)+_0x558902[_0x240ff9(0x3fc,0x459,0x3b4,0x47d)](0x1faf+-0x1d82+-0x1*0x22d,-0x1*-0x1f28+0x1d3e+-0x3c34)+(_0x2b992e[_0x243d4b(-0x1ab,-0x11c,-0xe2,-0x198)](_0x558902[_0x243d4b(-0x1af,-0x11a,-0xa2,-0x99)],0x1919+-0x611*-0x3+-0x158d*0x2)?_0x2b992e['lXdhx']:'')+'\x0a',_0x3155cf+='\x20\x20新:\x20'+_0x5c6ba1['substring'](0x12a6+-0x243a+0x1194,0x1fa3+-0x17b4+-0x7bd)+(_0x5c6ba1[_0x243d4b(-0xe8,-0x11a,-0x171,-0xa0)]>-0x133e+-0x1c91+0x3001?_0x240ff9(0x387,0x33d,0x3aa,0x378):'')+'\x0a\x0a',_0x725b40++;}}}if(_0x725b40===0x5*-0x51c+-0xcd*-0x8+0x992*0x2){toastr[_0x240ff9(0x3f6,0x3d6,0x436,0x3c7)](_0x2b992e[_0x240ff9(0x3cf,0x370,0x36c,0x356)]);return;}_0x3155cf+='共\x20'+_0x725b40+_0x243d4b(-0xa0,-0x6c,-0x106,-0xb4);const _0x17809c=await stylishConfirm(_0x3155cf);if(!_0x17809c){toastr[_0x243d4b(-0x2,-0x68,-0x40,-0xca)](_0x240ff9(0x40f,0x3e1,0x42b,0x438));return;}function _0x240ff9(_0x371897,_0x36757a,_0x22f2cc,_0x2906be){return _0x4877(_0x371897-0x133,_0x2906be);}for(const _0x391dc5 in _0x1354fa){if(_0x2b992e['bcLml'](_0x240ff9(0x401,0x423,0x409,0x484),_0x243d4b(-0x2d,-0x5d,-0x12,0x1b))){if(_0x1919f5[_0x391dc5]){if(_0x243d4b(-0x1bf,-0x161,-0x121,-0x1a7)!==_0x2b992e['ggBRu'])_0x3dc773[_0x391dc5]=_0x1919f5[_0x391dc5];else{const _0x2a1902=_0x2b992e[_0x243d4b(-0x11a,-0xdc,-0x15f,-0x10d)](typeof _0x15c3a7,_0x243d4b(-0x73,-0xe3,-0x17b,-0x78))?_0x1bb302:_0x4b9361[_0x243d4b(-0x68,-0x82,-0x79,-0x93)],_0x31082c=typeof _0x4cb3ef===_0x240ff9(0x301,0x279,0x334,0x268)&&_0x1679df['name']?_0x51b7cf[_0x240ff9(0x361,0x3b0,0x354,0x2e6)]:''+_0x162e39+(_0xda122e+(0x231d+0x4*-0x955+0x4*0x8e)),_0xb00556={};_0xb00556[_0x240ff9(0x368,0x401,0x3ed,0x3e8)]=_0x2b992e[_0x243d4b(-0x15a,-0xfa,-0x151,-0x7d)],_0xb00556[_0x240ff9(0x41e,0x3a1,0x3be,0x3a2)]='['+_0x31082c+']',_0x3e9d71[_0x240ff9(0x3f0,0x3a8,0x3c3,0x47b)](_0xb00556);let _0x2af89d=_0x2a1902;!_0x2a1902[_0x243d4b(-0x17b,-0x137,-0x160,-0x14f)](_0x240ff9(0x3d2,0x351,0x40d,0x433))&&(_0x2af89d=_0x240ff9(0x3d5,0x394,0x438,0x36a)+_0x243d4b(-0xbf,-0x139,-0xc2,-0xc6)+'4,'+_0x2a1902);const _0x35cf28={};_0x35cf28['url']=_0x2af89d,_0x35cf28[_0x243d4b(-0x62,-0xec,-0x168,-0xef)]=_0x2b992e[_0x243d4b(-0x8e,-0x44,-0x3d,-0xca)];const _0x289dec={};_0x289dec['type']=_0x240ff9(0x3ac,0x3ec,0x380,0x419),_0x289dec['image_url']=_0x35cf28,_0x1b7cd4[_0x243d4b(-0xfc,-0x6e,-0x41,-0x42)](_0x289dec);}}}else return _0xdb068a['toString']()[_0x243d4b(-0xf6,-0xd1,-0x72,-0x75)](_0x243d4b(-0x14f,-0x107,-0x95,-0x13a)+'+$')[_0x240ff9(0x38b,0x3f7,0x387,0x3b3)]()[_0x240ff9(0x3c8,0x369,0x394,0x338)+'r'](_0xa2c49)[_0x243d4b(-0x117,-0xd1,-0x118,-0x147)](JYFITn[_0x243d4b(-0x12a,-0xd9,-0x16e,-0x113)]);}_0x2b992e[_0x240ff9(0x3c7,0x44a,0x3ce,0x396)](saveSettingsDebounced);const _0x430c6=_0x2b992e[_0x243d4b(-0x149,-0xee,-0x89,-0x94)]($,_0x2b992e[_0x243d4b(-0xc8,-0xaf,-0x1b,-0x21)]);_0x430c6[_0x243d4b(-0x109,-0x11a,-0x163,-0x149)]&&_0x2b992e[_0x243d4b(-0xc9,-0x97,-0x133,-0xe9)](loadOutfitPreset),_0x2b992e['QbjdE'](updateOutfitFormFields,_0x1919f5),console['log'](_0x243d4b(-0x100,-0xe2,-0x160,-0x131)+_0x243d4b(-0x157,-0x103,-0xe9,-0x152)+_0x240ff9(0x33a,0x3b7,0x336,0x376)+_0x37f9b3+'\x22');}function updateOutfitFormFields(_0x1e3ddc){function _0x2a0af0(_0x573314,_0x14fa52,_0x318fec,_0x2283d4){return _0x4877(_0x573314- -0xc8,_0x318fec);}const _0x47e5a1={'LMwYZ':function(_0x40cc42,_0x411635){return _0x40cc42!==_0x411635;},'qcSSI':function(_0x4b7423,_0x32b545){return _0x4b7423(_0x32b545);},'PqqhU':function(_0x3cd5fc,_0xe1dd8b){return _0x3cd5fc===_0xe1dd8b;},'qPXTQ':_0x28d947(-0x1d2,-0x176,-0xf8,-0x15e),'hIBRx':function(_0x438f6f,_0x1ca1b4){return _0x438f6f(_0x1ca1b4);},'hPiab':_0x28d947(-0xeb,-0xf5,-0xf2,-0xd8),'OghyE':_0x28d947(-0x248,-0x169,-0x1a7,-0x1b2),'iFKJC':_0x2a0af0(0x1b5,0x210,0x1fd,0x174)+_0x2a0af0(0x212,0x28d,0x181,0x1d1)};function _0x28d947(_0x5f3115,_0x2040c1,_0x45c5e9,_0x671ac3){return _0x4877(_0x671ac3- -0x3c4,_0x2040c1);}const _0x586f43=[_0x28d947(-0xce,-0x147,-0xcf,-0x155),_0x47e5a1[_0x2a0af0(0x1be,0x15d,0x16e,0x1b1)],_0x28d947(-0x109,-0x18d,-0x1c0,-0x1a4),_0x47e5a1['iFKJC'],'fullBody',_0x28d947(-0x195,-0x279,-0x21a,-0x1fe)+'ck'];_0x586f43['forEach'](_0xdbc308=>{function _0x1cee4a(_0x17e65a,_0x5dc5c1,_0x3e26fc,_0x553e20){return _0x2a0af0(_0x553e20- -0x2c3,_0x5dc5c1-0x171,_0x5dc5c1,_0x553e20-0xb3);}const _0xfc0c78={'ZEXBU':function(_0x33440a,_0x43b9bd){function _0x5d80be(_0x44c650,_0x5e6ca8,_0x2b4106,_0x40659b){return _0x4877(_0x5e6ca8-0xd9,_0x2b4106);}return _0x47e5a1[_0x5d80be(0x2e8,0x2b0,0x33e,0x23e)](_0x33440a,_0x43b9bd);},'VVVje':function(_0x2298fa,_0x22a7b6){return _0x47e5a1['qcSSI'](_0x2298fa,_0x22a7b6);}};function _0x7464e8(_0x510df5,_0x25cd69,_0x356e68,_0x4d7487){return _0x28d947(_0x510df5-0x3e,_0x25cd69,_0x356e68-0x4d,_0x356e68-0x2be);}if(_0x1e3ddc[_0xdbc308]){if(_0x47e5a1['PqqhU'](_0x47e5a1[_0x1cee4a(-0x10c,-0xa5,-0x139,-0xc6)],'RodQU')){const _0x1dc914={};_0x1dc914[_0x1cee4a(-0x187,-0xf3,-0x134,-0x12e)]=[];const _0x509882=_0x1dc914;_0x53a7f1=_0x24da4c[_0x1cee4a(-0x16e,-0x1e1,-0x1bc,-0x1ce)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x7464e8(0x138,0x12c,0x13d,0x1ba)]();const _0x583c28=/<服装>([\s\S]*?)<\/服装>/g;let _0x1c7e1a;while(_0xfc0c78[_0x7464e8(0x1b0,0x178,0x1cd,0x14c)](_0x1c7e1a=_0x583c28[_0x1cee4a(-0x98,-0xba,-0x13e,-0x109)](_0x4ad67d),null)){const _0x554425=_0x21c594(_0x1c7e1a[0x12ea+-0x45d+-0xe8c]),_0x32645c=_0xfc0c78[_0x1cee4a(-0x206,-0x1a6,-0x127,-0x1ba)](_0x55ab9d,_0x554425);_0x32645c&&_0x509882[_0x7464e8(0xd7,0x171,0x157,0x18e)][_0x7464e8(0x1b2,0x18c,0x1b7,0x183)](_0x32645c);}return _0x509882;}else{const _0x49d132=document[_0x1cee4a(-0x18f,-0x144,-0x126,-0x1b6)+_0x7464e8(0x18e,0x1b3,0x193,0x205)](_0x1cee4a(-0x24f,-0x1f3,-0x1e5,-0x1c0)+_0xdbc308);_0x49d132&&(_0x49d132['value']=_0x1e3ddc[_0xdbc308],_0x47e5a1[_0x1cee4a(-0x1ad,-0x1d3,-0x196,-0x170)]($,_0x49d132)[_0x1cee4a(-0xa2,-0x8f,-0x121,-0xfd)](_0x47e5a1[_0x7464e8(0x1ac,0x1dd,0x1c7,0x1e7)]));}}});}