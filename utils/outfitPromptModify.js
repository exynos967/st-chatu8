(function(_0x310d16,_0x40899e){const _0x40da3f=_0x310d16();function _0x200fe4(_0x15fe90,_0x411408,_0x259f01,_0x2ad8f1){return _0x3247(_0x411408-0x16b,_0x2ad8f1);}function _0x40f6fc(_0x150a5f,_0x3f56d6,_0x148855,_0x456f69){return _0x3247(_0x148855- -0x2f1,_0x3f56d6);}while(!![]){try{const _0x2b4e3a=-parseInt(_0x200fe4(0x359,0x2cf,0x334,0x265))/(0x10*0x2c+0x23c5*-0x1+0x2106)*(parseInt(_0x40f6fc(-0xe3,-0x139,-0x156,-0x11d))/(0x1b5c+-0x25af+0xa55))+parseInt(_0x40f6fc(-0x291,-0x209,-0x245,-0x295))/(-0x123d+-0x9a6+-0xdf3*-0x2)+-parseInt(_0x200fe4(0x1db,0x25c,0x212,0x2b0))/(0x1605*-0x1+-0x37*0x6f+0x2de2)*(-parseInt(_0x200fe4(0x331,0x303,0x2f3,0x275))/(-0x16a5*-0x1+0x1579+-0x2c19))+parseInt(_0x40f6fc(-0x21e,-0x1fb,-0x19f,-0x1e8))/(-0xf79*0x1+-0xcb3*-0x3+-0x169a)+-parseInt(_0x200fe4(0x29b,0x2c7,0x282,0x2f3))/(0x158*-0x7+-0x1f8a+0x28f9)+-parseInt(_0x40f6fc(-0x1c5,-0x182,-0x1e2,-0x1e8))/(0x1bcb+0x18a2+-0x3465)+parseInt(_0x40f6fc(-0x2c3,-0x296,-0x263,-0x1db))/(-0x125b*0x1+-0x2200+0x3464)*(parseInt(_0x40f6fc(-0x1a8,-0x146,-0x1b5,-0x232))/(0xb1+-0x1*-0x18da+0x1981*-0x1));if(_0x2b4e3a===_0x40899e)break;else _0x40da3f['push'](_0x40da3f['shift']());}catch(_0x5efcd1){_0x40da3f['push'](_0x40da3f['shift']());}}}(_0x51cf,0xe3399+0x68d*-0x82+-0x1*-0x9635));function _0x3247(_0x3bbe40,_0x1f9fcf){_0x3bbe40=_0x3bbe40-(0x1d47+-0x778+-0x154b);const _0x7857e3=_0x51cf();let _0x231b9c=_0x7857e3[_0x3bbe40];if(_0x3247['FwEXGk']===undefined){var _0x1292dc=function(_0x4e45d7){const _0x24e96d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4ed9f6='',_0x52f2d5='',_0xa82e7b=_0x4ed9f6+_0x1292dc;for(let _0x47ab73=0x1bf5+0x21f+0x9a*-0x32,_0x424e9c,_0xba8051,_0x4fbc9f=0x2b3+0x18f1+-0x3a*0x7a;_0xba8051=_0x4e45d7['charAt'](_0x4fbc9f++);~_0xba8051&&(_0x424e9c=_0x47ab73%(-0x1*0xba1+-0x1ab2+-0x97*-0x41)?_0x424e9c*(-0xb*-0x1b6+0x1652+0x2*-0x1472)+_0xba8051:_0xba8051,_0x47ab73++%(0x7af+0x1*0xa03+-0x11ae))?_0x4ed9f6+=_0xa82e7b['charCodeAt'](_0x4fbc9f+(0x197c+-0x1db7+-0x445*-0x1))-(-0xbf7*-0x1+0x2b1*0x1+-0xe9e)!==0x681*0x1+-0x25a1+0x1f20?String['fromCharCode'](-0xe*-0x1a6+-0x321*-0x6+-0x28db&_0x424e9c>>(-(0x475+-0x594+-0x11*-0x11)*_0x47ab73&0xdf*0x1+-0x152c*0x1+-0xb*-0x1d9)):_0x47ab73:0x1f84+0x5*0x2d3+0x1*-0x2da3){_0xba8051=_0x24e96d['indexOf'](_0xba8051);}for(let _0x5b8263=-0x10d1+-0x1*-0xbe1+-0x4f*-0x10,_0x5c108c=_0x4ed9f6['length'];_0x5b8263<_0x5c108c;_0x5b8263++){_0x52f2d5+='%'+('00'+_0x4ed9f6['charCodeAt'](_0x5b8263)['toString'](-0x231f+-0x79b+0x2aca))['slice'](-(0x195d+-0x1705+-0x256));}return decodeURIComponent(_0x52f2d5);};_0x3247['MQbBnK']=_0x1292dc,_0x3247['Cimuap']={},_0x3247['FwEXGk']=!![];}const _0x987c78=_0x7857e3[0xc*-0x27f+-0xb38+0x292c],_0x336305=_0x3bbe40+_0x987c78,_0xeeb89d=_0x3247['Cimuap'][_0x336305];if(!_0xeeb89d){const _0x2c1c7a=function(_0x1e2da1){this['TRMyVa']=_0x1e2da1,this['xDfdyq']=[0x85b*0x1+-0x67*0x5b+0x1c43,-0x1ce6+0x1af*0xb+-0x1*-0xa61,-0xe67*-0x2+0x4b*-0x13+-0x173d],this['PoXiBr']=function(){return'newState';},this['QvslGk']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['KJGjVG']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2c1c7a['prototype']['jZdbZM']=function(){const _0x57148f=new RegExp(this['QvslGk']+this['KJGjVG']),_0x4634e1=_0x57148f['test'](this['PoXiBr']['toString']())?--this['xDfdyq'][-0x1*-0x1a7d+-0x1227*0x1+-0x855]:--this['xDfdyq'][-0x5ff+-0x1f31+-0x55*-0x70];return this['KfkPxe'](_0x4634e1);},_0x2c1c7a['prototype']['KfkPxe']=function(_0x541d3c){if(!Boolean(~_0x541d3c))return _0x541d3c;return this['nYTCiX'](this['TRMyVa']);},_0x2c1c7a['prototype']['nYTCiX']=function(_0x1df85b){for(let _0x5961fb=-0x897+0x2317+0x350*-0x8,_0x1c676e=this['xDfdyq']['length'];_0x5961fb<_0x1c676e;_0x5961fb++){this['xDfdyq']['push'](Math['round'](Math['random']())),_0x1c676e=this['xDfdyq']['length'];}return _0x1df85b(this['xDfdyq'][0x25e5+-0x156e+-0x1077]);},new _0x2c1c7a(_0x3247)['jZdbZM'](),_0x231b9c=_0x3247['MQbBnK'](_0x231b9c),_0x3247['Cimuap'][_0x336305]=_0x231b9c;}else _0x231b9c=_0xeeb89d;return _0x231b9c;}function _0x51cf(){const _0x2e1460=['s2DPBhm','zLr3tgi','z2jJCvm','ieXmtsbVDxrWDq','E3VLVzpLIy3OP5lOIBj9Fq','CevbuKm','DvLLugO','nJK0nJyZmNDYrfnZva','AxjLBwvUDcbTzq','zgf0yq','yMXIy3q','5lIk5y2k6lQR','ien1CNjLBNqGCa','s1rcBva','sfvNAxi','rMjYCLa','B3v0zML0ihbYBW','otK2ndm1m0Dhsg9KEa','Aw1Hz2vZihrVia','zePpyNO','ywnR','C3nHz2uGAw5Kzq','wu5VD3e','B3v0zML0xW','t0jxzNi','mtm3r0nVqvPQ','wNH4A1u','ELP2wvC','5BEY5y+w5RAi5PU05PAW','5y+c6icd5zU+54Mh','tfDhuM0','ue9ou0u','AM9PBG','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','DgLTzw91De1Z','zxrjza','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','t0rjrLLFr0vuxW','qvLLqMe','rffYsKq','ufjptvbux1jfuW','DxrWDxqGzM9Yia','z3nstNu','q3foB3K','5Qoa5Rwl5yIW5PYn6kof5Qch562+','rgnyC3C','yxv0BW','BNjdC0G','sxLiy2y','vKrYwMS','zNDZz0K','vvfMz0u','qNznr1C','vuvtva','Dg9tDhjPBMC','zgvIDwDNAw5NoG','r0frEMC','iev4DhjHy3rLza','y2HHCL9TB2rPzG','rfD2B2G','Aw5KzxHpzG','E3VKUiRKUiVMLOD9Fq','wMvHvuO','t0rjrLLFuKvtua','BwvZC2fNzq','ALrSt2K','BMfTzq','r0z5z3G','CuT0ExG','t0rjrLLFuKvrvq','y0rTrvi','zw5LCG','sujeBuy','yurPAKu','BMvzwMy','BM93','AxnbCNjHEq','mZq2meftExn5Ca','y0fmCuW','C3bSAxq','mty0nKrUCfD2zG','lxrHyI1JAgfYyq','Bw5dy1O','tvPNEgm','D3H5wxK','5lIl5y2k6lQR5PYn6kof','B2rPzNKGChjVBq','A3ngr1i','ywrK','ifjLCxvLC3rPBG','ufjptvbux1jfuq','ve1xyKq','C2vHCMnO','Dvrwwfu','zxvNsfG','BwvZC2fNzsbHDa','ou5VtgrcqG','zMLSDgvY','whbbt2W','y0zjzMm','z0vhzeO','ioINO+AEKowiSoEAHoACJEIJHEAvSoAnRJO','BLzgDwu','5Q2J5zYO5Ase55cg5PYn6kof5O+q56s66k+n5l+U','CMfUzg9Tvvvjra','AhfYEhi','Bxb0tw9KAwz5xq','5Rgc6lAf5PE2','6iUX5PAh5zcn56EWoIa','qLjnAMi','zxjYB3i','zxHLyW','5Ps56k+35RgclI4U','ChqGkeLeoIa','lI4U','Bxb0ig1VzgLMEq','svnOs24','CuPMD20','C0HkreW','teXnioI/LowBNUE7K+AENos4UUEPUG','pc/MNi3OO4u+','E3VMNi3OO4xLIjFOOAH9Fq','vK9ZvNm','DxjS','zgLMEsbmte0GCG','DMj2ufa','mJaYnJu5mhHvzwz4Bq','rKLly0e','se9cBNi','wwDkuK8','5PYn6kof5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','Efv1v2m','CMzXDwG','ief0DgfJAgvK','q3PmELq','iow3SUABToAwSoACJEIJHEMIHoIUVIaI','yvzWyMC','Aw1Hz2vFDxjS','C2L6zq','tKnqAwK','BMfTzuvo','qKnTqNu','yLHit2m','l3bUzZTIyxnLnG','teXnx0niqvjFtq','Aw5MBW','5PYn6kof5l+U5Ps5ieXmtsdOR7C','BNr1sKG','wgjWAMe','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','CLjjv2m','sfPYD0S','6kkR5l2/55sO77YA','suXAt0m','vMj6zwC','BNHruKW','BvjPrxK','EwjPwKm','5lIT5PAh5zcn56EW','zgPJv3y','igLUzgv4','t05trq','yxbWBhK','yMfZzty0','EKLACxm','EeHbufa','wfPwBfm','DhjPz2DLCG','Cvv4A2S','w291DgzPDfbYBW','zw1PDa','rvnu','DhjPBq','B3v0zML0uhjLCW','BMfTzuno','vfDqCe0','B3bNu1q','C3rHCNrZv2L0Aa','wxrlz3G','5PYn6kof5O+q56s66k+n5l+U5Ps55AsX6lsLoG','ChvZAa','Bxb0oG','A1PHDeC','rgfcqxy','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','zYbVDxrMAxqGBq','AKPJDwC','zM9VvNC','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','BwfW','rgDvuMW','DxbWzxjcB2r5qG','t1rerMy','CMHHthC','5lIl5y2k6lQR6iom6z2IoIa','mJG4ohb1q09uuq','wNr3wwy','B2jQzwn0','Aw5JBhvKzxm','C3rYAw5N','6i635y+w5PYn6kof5l+U5Ps55O+q56s66k+n6lAf','zxrZ','koEPUIK','Aw5WDxq','teXnioIVT+AXGUwKSEI0Pq','whPZEKe','BwnzCLa','Bg9N','E3VKUjBNLyZKUABOP6BLJ5f9Fq','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','vwjAtum','CMvWBgfJzq','qNLjza','vwPRAM4','CgnQCfi','CMvZzxq6','z3HXEhO','5lIk5y2k6lQR6iom6z2I','B1LOA3m','rffws28','DhLWzq','ExP3s2O','Ag1vu1m','Dgv4Da','Ae94sfG','mte2mJu2ntzmqKjUB0i','icdML6C6ia','yxjIvMe','zxf1zxn0icHjra','ChjVBxb0','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','C3vJy2vZCW','ALPds2O','BKHSAKS','qKPMt1K','5lIT5PAh5zcn56EWoIa','5lIl5y2k6lQR','tNPqC0y','y1fNveO','D2fYBMLUzW','B3v0zML0CW','ze1Ay2i','CMvZDwX0','5lIk5y2k6lQRoIa','zNvSBejVzhK','sNznsve','5PYQ5zYOieXmtsdOVPpLH7RKUk0','5lIl5y2k6lQR6iom6z2I','A21LC0u','zgf0ytO','CMfUzg9T','DxbWzxjcB2r5','DNvICLy','ievYCM9YoG','z1HyChO','CMvWBgfJzufSBa','ig91DgzPDcbTBW','ruXRCgG','zgf0ytPPBwfNzq','BgvUz3rO','z25hu2y','C3vIC3rYAw5N','CMvTB3zLtgLZDa','wwDxAMS','C25NEgu','y3rLCG','DNj0wKu','icdMLRa6ia','ifvZzxiGCMvXDq','zNvSBejVzhLcyq','mtqWnZy2nZbdA3LTuxa','tgXVBwi','6iUX5PAh5zcn56EW','iev4zwn1DgLUzW','rNbYEw4','5OM+5lIn5yIW5OYh5A6A55Qe5PYn6kof6Ake6k6+','ioACQUIVHUwiQ+EAHoACJEIJHEwTL+AUTsa','svz0EeW','BwPjD1q','5lIl5y2k6lQRoIa','y29UDgvUDa','s1jPtvq','zM9YrwfJAa','y1DWDwC','E3VLVzpLIy3MNi3OO4v9Fq'];_0x51cf=function(){return _0x2e1460;};return _0x51cf();}const _0x1e704b=(function(){const _0x38df3a={};_0x38df3a['hOxHX']=_0x64c1fa(-0xa,-0x95,-0x30,-0x5a);const _0x312bb9=_0x38df3a;let _0xd2b60f=!![];function _0x64c1fa(_0x591e6f,_0x3ee290,_0x32d8a2,_0x568b48){return _0x3247(_0x568b48- -0x127,_0x591e6f);}return function(_0x2ad9eb,_0x4bcd72){function _0xf10457(_0x9b0bc7,_0x1ccdad,_0xbf59b,_0x147947){return _0x64c1fa(_0x147947,_0x1ccdad-0xe4,_0xbf59b-0xa9,_0x9b0bc7-0x365);}function _0x5003e1(_0xdca6bd,_0x41a424,_0xa9152e,_0x414808){return _0x64c1fa(_0xdca6bd,_0x41a424-0x1bd,_0xa9152e-0x3a,_0x414808- -0x2bb);}if(_0x312bb9[_0xf10457(0x34c,0x382,0x338,0x356)]!==_0x312bb9[_0xf10457(0x34c,0x30b,0x3b2,0x2eb)])return _0x139850[_0x5003e1(-0x2bf,-0x2ff,-0x311,-0x2f7)](_0x49acfb=>_0x21ff41(_0x49acfb,_0x4a53d1,_0x3bc191,_0x297076));else{const _0x8af232=_0xd2b60f?function(){function _0xe73f30(_0x25c6c7,_0x3ebe62,_0xfb5f13,_0x1b75b9){return _0xf10457(_0x25c6c7- -0x33d,_0x3ebe62-0x8e,_0xfb5f13-0x5a,_0xfb5f13);}if(_0x4bcd72){const _0x3d7f1c=_0x4bcd72[_0xe73f30(-0x2f,-0xd,-0x89,-0x55)](_0x2ad9eb,arguments);return _0x4bcd72=null,_0x3d7f1c;}}:function(){};return _0xd2b60f=![],_0x8af232;}};}()),_0x605389=_0x1e704b(this,function(){const _0x3113e8={};function _0x179fba(_0x4b1fbd,_0x52fe5a,_0x383a7c,_0x58dae5){return _0x3247(_0x58dae5- -0x7f,_0x52fe5a);}function _0x1810fd(_0x9e3f45,_0x2a51d7,_0x2b4ef1,_0x1e8bca){return _0x3247(_0x2b4ef1-0x345,_0x9e3f45);}_0x3113e8[_0x179fba(0x56,0x3a,0x0,0xa)]='(((.+)+)+)'+'+$';const _0x54535d=_0x3113e8;return _0x605389[_0x179fba(0x102,0x7a,0x131,0x102)]()[_0x179fba(0x29,0x61,0x14,0xb)](_0x54535d[_0x179fba(-0x6e,0x4d,0x89,0xa)])[_0x1810fd(0x54a,0x49c,0x4c6,0x517)]()['constructo'+'r'](_0x605389)[_0x179fba(0x19,0x10,0x93,0xb)](_0x54535d[_0x1810fd(0x40b,0x39e,0x3ce,0x38b)]);});_0x605389();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{loadOutfitPreset}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x50ac07,_0x3c535b,_0x55926a,_0x38baf2){const _0x1aba35={'ybiZC':function(_0x4ff35b,_0x54e4c8){return _0x4ff35b!==_0x54e4c8;},'hmUSS':_0x603fb2(-0x20c,-0x29e,-0x235,-0x1cc),'gEGdJ':function(_0x601830,_0x2783d3){return _0x601830>_0x2783d3;},'PebXX':'...','uYePj':function(_0x551ab8,_0x520811){return _0x551ab8===_0x520811;},'YgWjk':_0x603fb2(-0x2c0,-0x1fb,-0x238,-0x1e8),'qKtyx':'GobyT','YAuNy':function(_0x3a600a,_0x2a0780){return _0x3a600a===_0x2a0780;},'IShKn':_0x525acf(0x16b,0x1d7,0xdd,0x19f),'nVFue':function(_0x400d10,_0x1f5631,_0xdd7fa1,_0x37fb48,_0x5d2cb5){return _0x400d10(_0x1f5631,_0xdd7fa1,_0x37fb48,_0x5d2cb5);}};if(_0x1aba35[_0x525acf(0x1e8,0x1e2,0x241,0x1f6)](typeof _0x50ac07,_0x1aba35[_0x525acf(0x1cc,0x13f,0x1e6,0x240)])){if(_0x55926a&&_0x50ac07[_0x525acf(0x18b,0x1ff,0x153,0x1fc)](_0x3c535b)){if(_0x1aba35[_0x525acf(0x162,0xfc,0x1b0,0x1c6)](_0x1aba35[_0x525acf(0x226,0x1c9,0x2a6,0x277)],'GobyT')){if(_0x44afb6[_0x1fb38b]&&_0x1aba35[_0x603fb2(-0x1dd,-0x1e8,-0x262,-0x1fc)](_0x477733[_0x1d8fac],_0x4a21a0[_0xed3291])){const _0x5d8cbe=_0x3d08c[_0x20679a]||_0x1aba35[_0x525acf(0x1a3,0x1d9,0x1ef,0x1bd)],_0x56f4d3=_0x551aa5[_0x515de5];_0x12e4d4+='•\x20'+_0x465aaf[_0x432763]+':\x0a',_0x549d36+=_0x603fb2(-0x261,-0x1ac,-0x21d,-0x19d)+_0x5d8cbe[_0x603fb2(-0x243,-0x1ff,-0x1fa,-0x250)](0x1e5d+0x3*0x79b+-0x352e,-0x1927+-0x1ea7+0x3800)+(_0x1aba35[_0x603fb2(-0x320,-0x2fd,-0x29b,-0x244)](_0x5d8cbe[_0x525acf(0x1c8,0x223,0x1b1,0x140)],0x10fb+0x11e2*0x1+-0x1*0x22ab)?_0x603fb2(-0x280,-0x314,-0x28d,-0x237):'')+'\x0a',_0x3533c8+=_0x603fb2(-0x246,-0x24d,-0x1f4,-0x24b)+_0x56f4d3['substring'](-0x321*0x6+0x515+0xdb1,-0x1266+-0xa9*0x26+0x2bae)+(_0x56f4d3[_0x603fb2(-0x188,-0x18e,-0x1fc,-0x1fa)]>0x1*0x304+-0x75d+0x48b?_0x1aba35['PebXX']:'')+'\x0a\x0a',_0x559738++;}}else _0x38baf2&&_0x38baf2[_0x603fb2(-0x230,-0x2e7,-0x2a7,-0x220)](_0x3c535b);}return _0x50ac07[_0x525acf(0x1c4,0x147,0x1f8,0x18f)](_0x3c535b,_0x55926a);}if(Array['isArray'](_0x50ac07))return _0x50ac07[_0x525acf(0x182,0x203,0x1a8,0x1cc)](_0x18a2e9=>replacePlaceholder(_0x18a2e9,_0x3c535b,_0x55926a,_0x38baf2));function _0x525acf(_0x47e3da,_0x3c6357,_0x237f3b,_0x2dbc01){return _0x3247(_0x47e3da-0x97,_0x3c6357);}function _0x603fb2(_0x1b12bc,_0x2d5a89,_0x45fe36,_0x496679){return _0x3247(_0x45fe36- -0x32d,_0x1b12bc);}if(_0x50ac07&&_0x1aba35['uYePj'](typeof _0x50ac07,_0x525acf(0x18a,0x192,0x19a,0x138))){const _0x496532={};for(const _0x24d202 in _0x50ac07){_0x1aba35['YAuNy'](_0x1aba35[_0x525acf(0x139,0x1a7,0xbe,0xb0)],_0x603fb2(-0x1d8,-0x274,-0x215,-0x1af))?_0x58d38c[_0x3543fd[_0x41c753]]=_0x39eee3:_0x496532[_0x24d202]=_0x1aba35[_0x525acf(0x12b,0x191,0xee,0x182)](replacePlaceholder,_0x50ac07[_0x24d202],_0x3c535b,_0x55926a,_0x38baf2);}return _0x496532;}return _0x50ac07;}function attachImagesToMessage(_0x506f67,_0x48466d,_0x1402cf,_0x2e70ca=_0x59c525(-0x10d,-0x175,-0x1a8,-0x17b)){const _0xfb1c88={};_0xfb1c88['Fpryn']=_0x4a91f9(0x82,0x91,0x154,0x10e),_0xfb1c88['Vbzeg']=function(_0x37fd05,_0x219a88){return _0x37fd05===_0x219a88;},_0xfb1c88[_0x4a91f9(0x16d,0x116,0x15c,0x164)]=_0x4a91f9(0x80,0x129,0x7e,0x10c),_0xfb1c88[_0x4a91f9(0x1bc,0x1c3,0x1bf,0x17c)]=function(_0x7aa0d6,_0x476eb0){return _0x7aa0d6+_0x476eb0;},_0xfb1c88[_0x4a91f9(0x135,0x1a8,0xb6,0x122)]=_0x4a91f9(0xb5,0xa4,0x12c,0x126),_0xfb1c88[_0x16de75(0x12f,0x169,0x168,0x1ce)]=_0x4a91f9(0xe3,0xef,0x15b,0x140),_0xfb1c88[_0x4a91f9(0x103,0xa3,0x157,0xd4)]=_0x16de75(0x15d,0xe3,0xa2,0x10f),_0xfb1c88['ooihu']=_0x16de75(0x1ff,0x1a5,0x132,0x20f),_0xfb1c88['lcxJR']=function(_0x32c793,_0x12abb7){return _0x32c793<_0x12abb7;},_0xfb1c88[_0x4a91f9(0xf4,0x140,0xaf,0x134)]=function(_0x45548c,_0x397ccb){return _0x45548c>=_0x397ccb;},_0xfb1c88[_0x16de75(0xea,0x173,0xfd,0xf4)]=function(_0x125bfe,_0x51e075){return _0x125bfe===_0x51e075;},_0xfb1c88['DgURl']=function(_0x3d2843,_0x3b3823){return _0x3d2843>_0x3b3823;};const _0x4119f7=_0xfb1c88;function _0x16de75(_0x39c616,_0x505c29,_0x2e03fb,_0x468881){return _0x59c525(_0x468881,_0x505c29-0x309,_0x2e03fb-0x199,_0x468881-0x2e);}if(!_0x1402cf||_0x4119f7['Vbzeg'](_0x1402cf[_0x4a91f9(0x18a,0x160,0x18b,0x14a)],0x2*-0x970+-0x1e9b+0x317b)||_0x4119f7['lcxJR'](_0x48466d,-0x829*0x1+0x2193+-0x196a)||_0x4119f7[_0x16de75(0x14c,0x147,0x1c6,0x10a)](_0x48466d,_0x506f67[_0x4a91f9(0x1aa,0xbb,0xc3,0x14a)]))return _0x506f67;const _0x42048b=[..._0x506f67],_0x47ebd9=_0x42048b[_0x48466d],_0x5e6ee9=[];if(_0x4119f7[_0x4a91f9(0x1ee,0x1c0,0x10e,0x160)](typeof _0x47ebd9[_0x4a91f9(0x130,0x1de,0x156,0x15f)],_0x4a91f9(0x16d,0x160,0x166,0x10e))){const _0x406444={};_0x406444[_0x4a91f9(0xa5,0x9e,0x122,0x123)]=_0x4119f7['DQVKo'],_0x406444[_0x16de75(0xbd,0x139,0x1b8,0x172)]=_0x47ebd9[_0x4a91f9(0x123,0x12f,0x130,0x15f)],_0x5e6ee9[_0x4a91f9(0x187,0x95,0xbb,0xfb)](_0x406444);}else Array[_0x4a91f9(0x1c5,0x15d,0x235,0x1b0)](_0x47ebd9[_0x4a91f9(0x115,0x1e2,0xf8,0x15f)])&&_0x5e6ee9[_0x4a91f9(0xcd,0x89,0xc9,0xfb)](..._0x47ebd9[_0x4a91f9(0xd5,0x133,0x1a6,0x15f)]);if(_0x4119f7[_0x4a91f9(0x8b,0x9e,0xef,0x105)](_0x1402cf[_0x4a91f9(0x159,0x121,0xf1,0x14a)],0xd*0x15b+-0x127d*-0x1+-0x241c)){const _0x1fcdfd={};_0x1fcdfd[_0x4a91f9(0x15a,0xd0,0xca,0x123)]=_0x16de75(0xf9,0x139,0x117,0x19c),_0x1fcdfd[_0x4a91f9(0xa9,0x1b4,0x16d,0x126)]=_0x4a91f9(0x162,0x16c,0xaf,0xff)+_0x1402cf[_0x4a91f9(0x162,0x17e,0x146,0x14a)]+'张'+_0x2e70ca+']',_0x5e6ee9[_0x4a91f9(0xae,0x154,0x151,0xfb)](_0x1fcdfd);}_0x1402cf[_0x4a91f9(0x13d,0x115,0x132,0x161)]((_0x32084c,_0x310ae5)=>{function _0x5cb5ef(_0x169032,_0x2c8660,_0x5a33d0,_0x935cb9){return _0x16de75(_0x169032-0x3e,_0x169032- -0x2a7,_0x5a33d0-0xfb,_0x935cb9);}const _0x27c1f5=typeof _0x32084c===_0x4119f7[_0x5cb5ef(-0x13b,-0x185,-0x19d,-0x1b0)]?_0x32084c:_0x32084c[_0x12753c(0x3c8,0x3e4,0x437,0x47c)],_0x496ebd=_0x4119f7[_0x12753c(0x46e,0x411,0x42e,0x3a9)](typeof _0x32084c,_0x4119f7[_0x5cb5ef(-0x130,-0x12c,-0x13c,-0x112)])&&_0x32084c[_0x5cb5ef(-0xee,-0xe1,-0xa6,-0xe0)]?_0x32084c[_0x5cb5ef(-0xee,-0x70,-0x15b,-0x163)]:''+_0x2e70ca+_0x4119f7[_0x12753c(0x43b,0x4ec,0x4c9,0x541)](_0x310ae5,-0x2180+-0x2280+0x15*0x33d),_0x3114e7={};_0x3114e7[_0x12753c(0x4ce,0x45c,0x470,0x4cb)]=_0x4119f7['DQVKo'],_0x3114e7[_0x12753c(0x3f0,0x473,0x473,0x47e)]='['+_0x496ebd+']',_0x5e6ee9[_0x12753c(0x3e6,0x3e6,0x448,0x4b6)](_0x3114e7);let _0x50da80=_0x27c1f5;!_0x27c1f5[_0x12753c(0x419,0x476,0x445,0x4d4)](_0x4119f7[_0x5cb5ef(-0x13e,-0x15f,-0x184,-0x1c5)])&&(_0x50da80=_0x5cb5ef(-0x14b,-0xca,-0x146,-0x12f)+_0x12753c(0x448,0x3c6,0x423,0x460)+'4,'+_0x27c1f5);const _0x36f230={};_0x36f230[_0x12753c(0x441,0x439,0x470,0x479)]=_0x4119f7[_0x12753c(0x3da,0x3af,0x421,0x46f)],_0x36f230[_0x12753c(0x480,0x445,0x41d,0x4aa)]={},_0x36f230[_0x12753c(0x480,0x445,0x41d,0x4aa)][_0x5cb5ef(-0x1d2,-0x1ee,-0x17b,-0x1ec)]=_0x50da80;function _0x12753c(_0x2b1ddf,_0xad47b2,_0x3ce238,_0x28046f){return _0x16de75(_0x2b1ddf-0x34,_0x3ce238-0x33a,_0x3ce238-0xfd,_0xad47b2);}_0x36f230[_0x12753c(0x480,0x445,0x41d,0x4aa)]['detail']=_0x4119f7['ooihu'],_0x5e6ee9[_0x12753c(0x4aa,0x3e8,0x448,0x44b)](_0x36f230);});function _0x4a91f9(_0x397244,_0x500fa2,_0x336f41,_0x47db24){return _0x59c525(_0x336f41,_0x47db24-0x2f6,_0x336f41-0x1e3,_0x47db24-0x163);}const _0x5260d6={..._0x47ebd9};return _0x5260d6[_0x4a91f9(0x195,0x16b,0x158,0x15f)]=_0x5e6ee9,_0x42048b[_0x48466d]=_0x5260d6,_0x42048b;}function findMessageIndexWithPlaceholder(_0x3be2d7,_0x556644){function _0x288b73(_0x32bfd7,_0x5b94c4,_0x37a08a,_0x3acdd0){return _0x59c525(_0x37a08a,_0x3acdd0-0x2fd,_0x37a08a-0x11,_0x3acdd0-0x16);}const _0x39e424={};_0x39e424[_0x288b73(0x130,0x1f3,0x1df,0x1a9)]=function(_0x3997d4,_0x687410){return _0x3997d4<_0x687410;},_0x39e424[_0xd46c16(0x338,0x30e,0x32a,0x3ac)]=_0xd46c16(0x2f2,0x324,0x37b,0x302),_0x39e424[_0x288b73(0x161,0x1aa,0x213,0x19b)]=function(_0x196eae,_0x2dbfb5){return _0x196eae!==_0x2dbfb5;};function _0xd46c16(_0x476c1d,_0x15ca10,_0x549a30,_0x513905){return _0x59c525(_0x476c1d,_0x549a30-0x563,_0x549a30-0x3d,_0x513905-0xce);}_0x39e424[_0x288b73(0x95,0x109,0x160,0x120)]='WHpKm',_0x39e424[_0xd46c16(0x30d,0x37f,0x321,0x2e4)]=_0x288b73(0x133,0x18c,0xe8,0x12d);const _0x2e4d13=_0x39e424;for(let _0x5c04f2=-0x4*-0x7bd+-0x1351+-0xba3;_0x2e4d13[_0xd46c16(0x383,0x45c,0x40f,0x464)](_0x5c04f2,_0x3be2d7['length']);_0x5c04f2++){const _0x5094d4=_0x3be2d7[_0x5c04f2];if(typeof _0x5094d4[_0x288b73(0x168,0x109,0x114,0x166)]===_0x2e4d13[_0x288b73(0x10c,0x69,0xd2,0xc4)]&&_0x5094d4[_0x288b73(0x151,0x14a,0x112,0x166)][_0xd46c16(0x3ba,0x3d4,0x37a,0x3c4)](_0x556644)){if(_0x2e4d13[_0xd46c16(0x427,0x475,0x401,0x402)](_0x2e4d13['UbZMC'],_0x2e4d13['UbZMC']))_0x44bfe8='诊断：检测到以下变量'+_0x288b73(0x5e,0xe2,0x6c,0xe6)+[..._0x417531]['join']('、')+'\x0a';else return _0x5c04f2;}else{if(Array[_0x288b73(0x14a,0x1b9,0x245,0x1b7)](_0x5094d4['content']))for(const _0x3bbada of _0x5094d4[_0xd46c16(0x3d1,0x439,0x3cc,0x340)]){if(_0x3bbada[_0xd46c16(0x3b1,0x304,0x390,0x3e8)]===_0x2e4d13[_0x288b73(0x138,0xcc,0xcb,0xbb)]&&_0x3bbada['text'][_0xd46c16(0x3de,0x329,0x37a,0x3e9)](_0x556644))return _0x5c04f2;}}}return-(0x11aa+-0x23b2+0x3*0x603);}function generateRequestId(){const _0x111148={};_0x111148[_0x4dcaf2(0x1e5,0x17d,0x17c,0x145)]=function(_0x48b327,_0x5634b8){return _0x48b327!==_0x5634b8;};function _0x4dcaf2(_0x51ef5f,_0x340285,_0x468321,_0x2398c4){return _0x59c525(_0x340285,_0x468321-0x2c5,_0x468321-0x13e,_0x2398c4-0x176);}_0x111148[_0x5dcdc9(-0x15f,-0x150,-0x1ab,-0x153)]=_0x4dcaf2(0x49,0xfe,0xd1,0x62),_0x111148[_0x5dcdc9(-0x61,-0xd5,-0x70,-0xc1)]=_0x5dcdc9(-0x1b2,-0x162,-0x1bd,-0x1cd);function _0x5dcdc9(_0x35e42a,_0x12680a,_0x2ee851,_0x441c7d){return _0x59c525(_0x35e42a,_0x441c7d-0x7f,_0x2ee851-0x128,_0x441c7d-0x6e);}const _0xeda5dd=_0x111148;if(crypto&&crypto['randomUUID'])return _0xeda5dd['aDijE'](_0xeda5dd[_0x4dcaf2(0x169,0x14a,0xf3,0x71)],_0xeda5dd[_0x5dcdc9(-0x96,-0x10e,-0x119,-0xc1)])?crypto[_0x5dcdc9(-0x1ad,-0x21f,-0x24c,-0x1c8)]():_0x40a561;return Date[_0x5dcdc9(-0x127,-0xbb,-0x108,-0xc8)]()[_0x5dcdc9(-0x160,-0x6c,-0x7d,-0xdd)](-0x157b+-0x3*0x322+0x1f05)+Math[_0x4dcaf2(0x172,0x16d,0x110,0xc4)]()[_0x4dcaf2(0x197,0xfd,0x169,0x1da)](0x1613+-0x1*0x9b3+-0xc3c)[_0x5dcdc9(-0xb2,-0x19b,-0x193,-0x12b)](-0x2*-0x68e+0xe3b*0x2+-0x28*0x10a);}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){function _0x12beaa(_0x1fb1fd,_0x36e1ca,_0x36e649,_0xd172d8){return _0x59c525(_0x36e649,_0x36e1ca-0x2cb,_0x36e649-0x7a,_0xd172d8-0x91);}const _0x3a80ad={'kHgEc':function(_0x2b914c,_0x1ec193){return _0x2b914c!==_0x1ec193;},'HUgir':function(_0x29c360,_0x154c30){return _0x29c360(_0x154c30);},'jJcug':_0x28983d(0x494,0x40a,0x4c0,0x4f1)+'时','KTBmP':_0x12beaa(0xdf,0x13e,0x1bc,0x188),'GAQzg':function(_0x2d84ca){return _0x2d84ca();},'VDrZk':function(_0x2882ce,_0x33766e,_0x4345e6){return _0x2882ce(_0x33766e,_0x4345e6);}};function _0x28983d(_0x296d34,_0x3e8a9b,_0x4b81b4,_0x4dcd99){return _0x59c525(_0x3e8a9b,_0x296d34-0x67b,_0x4b81b4-0x185,_0x4dcd99-0x1dc);}return new Promise((_0x3c30b7,_0x4888f6)=>{function _0x461451(_0x23c4da,_0xe8ab1d,_0x1347c8,_0x19012a){return _0x12beaa(_0x23c4da-0x1ed,_0x19012a- -0x4e,_0x23c4da,_0x19012a-0x143);}function _0x39cd3e(_0x3d5692,_0x3eeb91,_0x4c1912,_0x3bac82){return _0x28983d(_0x3d5692- -0xc0,_0x3eeb91,_0x4c1912-0x71,_0x3bac82-0xbd);}if(_0x3a80ad['kHgEc'](_0x3a80ad[_0x461451(0x11f,0xb6,0x11d,0xf8)],_0x3a80ad[_0x461451(0x70,0x135,0x125,0xf8)])){const _0x3e54ab=_0x1bdb01[_0x4fb34f],_0x3fcb12=_0x3e54ab[_0x461451(0x96,0xc7,0x26,0x7b)+'etId'];if(!_0x3fcb12||!_0x3e54ab[_0x39cd3e(0x3b9,0x3db,0x3af,0x3b6)+_0x461451(0x8d,0x10e,0x109,0x97)][_0x3fcb12])return null;const _0x71d452={};return _0x71d452['id']=_0x3fcb12,_0x71d452[_0x461451(0x157,0x98,0xd6,0xf4)]=_0x3e54ab[_0x461451(0xf5,0x9,0xc5,0x7b)+_0x39cd3e(0x3d5,0x437,0x3c7,0x459)][_0x3fcb12],_0x71d452;}else{const _0xf0b592=_0x3a80ad[_0x39cd3e(0x461,0x490,0x4d4,0x462)](generateRequestId);console[_0x461451(0x21,0xcd,0x82,0x9d)](_0x461451(0x1b,0xbd,0xd,0x77)+_0x39cd3e(0x376,0x32a,0x2fc,0x2ea)+_0x461451(-0x5f,0x82,-0x4b,0x27)+_0x461451(0x61,0x3d,0xaf,0x87)+_0x461451(0x37,0x9f,-0x3,0x24)+_0x461451(0x62,-0x14,-0x27,0x3f)+_0xf0b592+')');const _0x28c589=_0x544876=>{function _0x316d19(_0x8234b9,_0x135917,_0x4e84cc,_0x4e71b7){return _0x461451(_0x4e84cc,_0x135917-0x16,_0x4e84cc-0x47,_0x4e71b7-0x77);}if(_0x3a80ad['kHgEc'](_0x544876['id'],_0xf0b592))return;function _0x5eaeeb(_0x5cad8b,_0x34199d,_0x3e10a6,_0x51ec85){return _0x39cd3e(_0x5cad8b- -0x466,_0x34199d,_0x3e10a6-0xb8,_0x51ec85-0xa0);}eventSource[_0x316d19(0xfb,0xbd,0x14d,0x14b)+_0x316d19(0x1fc,0x22d,0x1a6,0x1a9)](eventNames['LLM_CHAR_M'+_0x316d19(0x11b,0x167,0x139,0x187)+_0x316d19(0x1bc,0x170,0x1fb,0x18a)+_0x5eaeeb(-0x1e,-0x87,-0x14,0x6)],_0x28c589),_0x3a80ad[_0x316d19(0x129,0x197,0x140,0x170)](_0x3c30b7,_0x544876['prompt']);};eventSource['on'](eventNames['LLM_CHAR_M'+_0x461451(0x18a,0x101,0xc5,0x110)+_0x461451(0x138,0xf3,0x126,0x113)+_0x39cd3e(0x448,0x43e,0x47b,0x4ba)],_0x28c589);const _0x39f541={};_0x39f541['id']=_0xf0b592,eventSource[_0x39cd3e(0x3b6,0x437,0x3b2,0x43a)](eventNames[_0x39cd3e(0x39c,0x40e,0x312,0x35f)+_0x39cd3e(0x44e,0x3e4,0x403,0x4c5)+_0x461451(-0x2c,-0x34,0x13,0x28)+'UEST'],_0x39f541),_0x3a80ad[_0x39cd3e(0x45a,0x401,0x431,0x4b9)](setTimeout,()=>{function _0x14fb0a(_0x1ce545,_0x31f6ed,_0x291e5f,_0x1cf1b1){return _0x461451(_0x291e5f,_0x31f6ed-0x153,_0x291e5f-0x157,_0x31f6ed-0x2a1);}function _0x10fe93(_0x2a8829,_0x3c056b,_0x3ecbac,_0x864ec3){return _0x39cd3e(_0x3ecbac- -0x4f8,_0x2a8829,_0x3ecbac-0x55,_0x864ec3-0x173);}eventSource['removeList'+_0x14fb0a(0x3ad,0x3d3,0x3fd,0x34f)](eventNames['LLM_CHAR_M'+_0x14fb0a(0x3d7,0x3b1,0x3d2,0x42d)+_0x14fb0a(0x351,0x3b4,0x339,0x40b)+'PONSE'],_0x28c589),_0x4888f6(new Error(_0x3a80ad[_0x10fe93(-0x115,-0xf8,-0x132,-0xdb)]));},0x4*0x739+0xe84+-0x8b*0x8);}});}export function LLM_OUTFIT_MODIFY(_0x469877,_0x11d2a1={}){const _0x32732e={'mCyLH':function(_0xd4413f,_0x2bb903){return _0xd4413f!==_0x2bb903;},'HOBnr':function(_0x24cba5,_0xad56a3){return _0x24cba5(_0xad56a3);},'wxyYy':_0x44c062(0x25c,0x270,0x253,0x279),'Xbpja':'BwKGn','vbvPP':_0x4ee742(-0x2c,0xa3,0x61,0x4e),'nHljK':function(_0x5b09f7,_0x32fbb2){return _0x5b09f7(_0x32fbb2);},'mjIwT':_0x4ee742(-0x4a,-0x6,-0x9,-0x53)+_0x44c062(0x1fb,0x189,0x230,0x1d5),'BvMGW':function(_0x3aa0ac){return _0x3aa0ac();}};function _0x44c062(_0x593e9e,_0x4d6ddf,_0xac7d1,_0x3d8b89){return _0x59c525(_0x4d6ddf,_0x593e9e-0x43f,_0xac7d1-0x1f2,_0x3d8b89-0xa5);}function _0x4ee742(_0x44d993,_0x59d54a,_0x5a454c,_0x37152f){return _0x59c525(_0x44d993,_0x5a454c-0x214,_0x5a454c-0x1da,_0x37152f-0xfc);}return new Promise((_0x22a001,_0x4ec83e)=>{const _0xc493ec=_0x32732e[_0x3c8d0f(-0x92,-0xd6,-0xa3,-0x5e)](generateRequestId),_0x32d413=_0x11d2a1[_0x448116(0x498,0x4ee,0x489,0x4a7)]||-0x1*0x515b+-0x7c68+0x1b823;console['log'](_0x3c8d0f(-0x1bb,-0x17e,-0x134,-0x1fc)+'mptModify]'+_0x3c8d0f(-0x105,-0x116,-0x11c,-0x11a)+_0x448116(0x443,0x44c,0x43e,0x468)+_0x448116(0x458,0x3ef,0x3fd,0x3e4)+_0x448116(0x4a7,0x44e,0x497,0x44c)+':\x20'+_0xc493ec+')');const _0x35e27c=_0x5a0b03=>{if(_0x32732e['mCyLH'](_0x5a0b03['id'],_0xc493ec))return;function _0x3ffb05(_0x56ba50,_0x1e65c8,_0x2313c9,_0xc21615){return _0x3c8d0f(_0x56ba50-0x4a,_0x56ba50-0x5f3,_0x1e65c8,_0xc21615-0x8b);}function _0x5dc037(_0x57396d,_0x320431,_0x5823ba,_0x5501a0){return _0x3c8d0f(_0x57396d-0x148,_0x5823ba-0x47a,_0x57396d,_0x5501a0-0x1bd);}eventSource[_0x5dc037(0x33f,0x37a,0x359,0x2dd)+'ener'](eventNames[_0x5dc037(0x27c,0x2ca,0x2e3,0x296)+_0x3ffb05(0x528,0x4f7,0x515,0x528)+'ONSE'],_0x35e27c),_0x5a0b03[_0x3ffb05(0x4b3,0x44e,0x45b,0x478)]?_0x22a001(_0x5a0b03[_0x5dc037(0x2d6,0x313,0x345,0x37b)]):_0x32732e[_0x3ffb05(0x44c,0x426,0x3ca,0x429)](_0x4ec83e,new Error(_0x5a0b03[_0x5dc037(0x366,0x314,0x345,0x3be)]||_0x32732e[_0x3ffb05(0x53d,0x58e,0x528,0x59f)]));};eventSource['on'](eventNames['LLM_CHAR_M'+_0x448116(0x447,0x517,0x4a5,0x4c4)+'ONSE'],_0x35e27c);const _0x2dbec3={};_0x2dbec3[_0x448116(0x421,0x3c9,0x3de,0x44d)]=_0x469877,_0x2dbec3['id']=_0xc493ec;function _0x3c8d0f(_0x3f30bb,_0x272435,_0x43318b,_0x2c4957){return _0x44c062(_0x272435- -0x3b7,_0x43318b,_0x43318b-0x13b,_0x2c4957-0xc);}function _0x448116(_0x8ccdf0,_0x73a68c,_0x5247bd,_0xe3274d){return _0x4ee742(_0x73a68c,_0x73a68c-0x6f,_0xe3274d-0x403,_0xe3274d-0x76);}eventSource[_0x448116(0x3b7,0x3ee,0x401,0x412)](eventNames[_0x3c8d0f(-0x116,-0x197,-0x1c8,-0x165)+_0x3c8d0f(-0x55,-0xc5,-0xf7,-0x50)+_0x448116(0x3ae,0x463,0x41e,0x413)],_0x2dbec3),setTimeout(()=>{function _0x1625ae(_0x5d966e,_0x30e2ef,_0x4d8d21,_0x3d531f){return _0x448116(_0x5d966e-0x58,_0x4d8d21,_0x4d8d21-0x1f4,_0x30e2ef- -0x200);}function _0x1369fa(_0x311118,_0x47e144,_0x565198,_0x269f6c){return _0x448116(_0x311118-0x1a7,_0x47e144,_0x565198-0x1ac,_0x311118- -0xe);}_0x32732e[_0x1369fa(0x3ee,0x3cc,0x475,0x477)]!==_0x32732e[_0x1625ae(0x1ff,0x1e5,0x21b,0x16e)]?(eventSource[_0x1625ae(0x224,0x26e,0x280,0x20f)+_0x1369fa(0x4be,0x4e0,0x4fd,0x509)](eventNames[_0x1369fa(0x3ea,0x432,0x470,0x40d)+_0x1625ae(0x2d5,0x2c4,0x269,0x31b)+_0x1625ae(0x1e5,0x209,0x184,0x272)],_0x35e27c),_0x32732e[_0x1369fa(0x443,0x46f,0x41c,0x3fb)](_0x4ec83e,new Error(_0x32732e[_0x1625ae(0x267,0x27e,0x24d,0x2c4)]))):_0x190e83[_0x1369fa(0x44a,0x3e2,0x43d,0x3ca)][_0x1625ae(0x232,0x21c,0x1f8,0x18e)](_0x42dea2);},_0x32d413);});}function preprocessTagContent(_0x40f0d6){let _0x31cd2f=_0x40f0d6[_0x323042(-0x63,-0x89,-0x9b,-0x6b)](/:/g,':')[_0x3c9220(-0xac,-0x17a,-0xf7,-0x12c)](/\(/g,'（')['replace'](/\)/g,'）')['replace'](/,/g,',');function _0x3c9220(_0x237a0e,_0xb76312,_0x230091,_0x5d3bd2){return _0x59c525(_0x237a0e,_0x5d3bd2-0xb0,_0x230091-0x15d,_0x5d3bd2-0x56);}function _0x323042(_0x5eb89a,_0x4cdc95,_0x4667ab,_0x4b2930){return _0x59c525(_0x4b2930,_0x5eb89a-0x179,_0x4667ab-0x1ca,_0x4b2930-0xc4);}return _0x31cd2f;}function parseOutfitData(_0x352b6c){const _0xb53afc={'dMZcb':function(_0x57cbf6,_0x554c9f){return _0x57cbf6(_0x554c9f);},'cALqL':_0x27a3d4(-0x243,-0x24e,-0x282,-0x25a)+'时','OTDFf':function(_0x6c409e,_0x2e9f40){return _0x6c409e!==_0x2e9f40;},'XpAOl':function(_0x582f37){return _0x582f37();},'BrNPz':_0x27a3d4(-0x27f,-0x2f1,-0x202,-0x256),'xUuWc':'upperBody','egbZy':_0x27a3d4(-0x24c,-0x1f3,-0x1d2,-0x250)+_0x27a3d4(-0x1da,-0x22b,-0x190,-0x1e4),'arbVa':_0x27a3d4(-0x217,-0x1da,-0x245,-0x212),'ejhTz':_0x1d1672(0x1f1,0x1cf,0x21f,0x183)+'ck','MZgxc':function(_0x24eff0,_0x2a8745){return _0x24eff0+_0x2a8745;},'ksFGR':'OqdLd','CzLzT':_0x27a3d4(-0x28a,-0x2c5,-0x259,-0x28e),'hqrxr':function(_0x2809ce,_0xe1005d){return _0x2809ce&&_0xe1005d;}},_0x2aee70=_0x352b6c[_0x27a3d4(-0x19f,-0x1ad,-0x1de,-0x119)]('\x0a')[_0x1d1672(0x209,0x17f,0x1b4,0x1f2)](_0x56d196=>_0x56d196['trim']())[_0x1d1672(0x148,0x123,0x111,0x117)](_0x25a11a=>_0x25a11a),_0x3a46f2={};_0x3a46f2[_0x27a3d4(-0x25d,-0x27e,-0x21f,-0x2e3)]='',_0x3a46f2[_0x1d1672(0x1ce,0x14e,0x16c,0x1d3)]='',_0x3a46f2[_0x27a3d4(-0x210,-0x1bc,-0x1a3,-0x29b)]='',_0x3a46f2['upperBodyB'+'ack']='',_0x3a46f2['fullBody']='',_0x3a46f2['fullBodyBa'+'ck']='';const _0x19ced1=_0x3a46f2,_0x4e0585={};_0x4e0585[_0x1d1672(0x1ba,0x160,0x168,0x155)]=_0x1d1672(0x197,0x170,0x17b,0x1bd),_0x4e0585[_0x27a3d4(-0x1fb,-0x1c4,-0x1e9,-0x19b)]=_0xb53afc['BrNPz'],_0x4e0585[_0x1d1672(0x24a,0x1ea,0x217,0x171)]=_0xb53afc[_0x1d1672(0x1a8,0x145,0xcd,0x196)],_0x4e0585[_0x1d1672(0x20e,0x19b,0x144,0x21e)]=_0xb53afc['egbZy'],_0x4e0585[_0x27a3d4(-0x21f,-0x203,-0x2ad,-0x2a1)]=_0xb53afc[_0x1d1672(0x198,0x1a5,0x116,0x12f)],_0x4e0585[_0x27a3d4(-0x199,-0x199,-0x1a5,-0x159)]=_0xb53afc[_0x1d1672(0x165,0x1a5,0x1b1,0x11c)],_0x4e0585[_0x27a3d4(-0x214,-0x254,-0x28a,-0x1fd)]=_0xb53afc['ejhTz'];const _0x3a2f3b=_0x4e0585;function _0x27a3d4(_0xa1962b,_0x5d8ae9,_0x5dc744,_0x341b93){return _0x59c525(_0x5d8ae9,_0xa1962b- -0x5c,_0x5dc744-0x1b9,_0x341b93-0xaa);}for(const _0x3e80f5 of _0x2aee70){const _0x45a7b9=_0x3e80f5[_0x27a3d4(-0x1b2,-0x15e,-0x1f6,-0x190)](':');if(_0x45a7b9===-(0x1139+-0x1b50+-0x13*-0x88))continue;const _0x5e229a=_0x3e80f5[_0x27a3d4(-0x206,-0x1da,-0x25d,-0x20e)](0x1dde+-0x19a1+-0x43d,_0x45a7b9)[_0x1d1672(0x120,0x16e,0x14c,0x1d8)](),_0x440b2d=_0x3e80f5[_0x1d1672(0x180,0x1c7,0x14e,0x18b)](_0xb53afc[_0x27a3d4(-0x19b,-0x1b1,-0x15d,-0x1cf)](_0x45a7b9,-0x1f2*0xf+-0x5b*0x4c+0x1*0x3833))['trim']();if(_0x3a2f3b[_0x5e229a]){if(_0xb53afc[_0x1d1672(0x161,0x182,0x16d,0x134)](_0xb53afc[_0x27a3d4(-0x2b4,-0x280,-0x242,-0x311)],_0xb53afc[_0x1d1672(0x19a,0x148,0x109,0xc1)]))_0x19ced1[_0x3a2f3b[_0x5e229a]]=_0x440b2d;else{const _0xcfe2cf={'rjWgC':function(_0x2a1590,_0x2359f3){function _0x43e21c(_0x4b2e71,_0x3107e8,_0x57c680,_0x4f3bb3){return _0x27a3d4(_0x4f3bb3-0x438,_0x3107e8,_0x57c680-0x145,_0x4f3bb3-0x70);}return _0xb53afc[_0x43e21c(0x229,0x1b6,0x1bd,0x1ed)](_0x2a1590,_0x2359f3);}},_0x282afd=_0xb53afc[_0x27a3d4(-0x2a9,-0x288,-0x244,-0x2f0)](_0x140567);_0x391cab[_0x27a3d4(-0x23c,-0x1d4,-0x2aa,-0x1d8)](_0x1d1672(0xf6,0x16b,0x1c6,0xfd)+_0x27a3d4(-0x2a1,-0x324,-0x249,-0x2b8)+_0x27a3d4(-0x2b2,-0x24a,-0x28a,-0x2d1)+'g\x20outfit\x20m'+_0x1d1672(0x152,0x118,0xcb,0xb3)+_0x27a3d4(-0x29a,-0x224,-0x2a6,-0x283)+_0x282afd+')');const _0x3e7867=_0x16a011=>{if(_0xcfe2cf['rjWgC'](_0x16a011['id'],_0x282afd))return;function _0x2cccc6(_0x6ae27b,_0x287407,_0x2a7a89,_0xb4faea){return _0x27a3d4(_0x2a7a89-0x493,_0x287407,_0x2a7a89-0x1f3,_0xb4faea-0x139);}function _0x3deed5(_0x15e725,_0x11cc86,_0x54076b,_0x13b5fd){return _0x27a3d4(_0x11cc86-0x6e1,_0x15e725,_0x54076b-0x13e,_0x13b5fd-0x1dc);}_0x51ddd3[_0x2cccc6(0x2a6,0x2e1,0x28e,0x291)+_0x2cccc6(0x2e1,0x2f9,0x2ec,0x358)](_0x52c9a3[_0x3deed5(0x3f8,0x466,0x3ec,0x4dc)+_0x3deed5(0x561,0x518,0x57e,0x4e6)+_0x3deed5(0x568,0x51b,0x4d1,0x528)+_0x3deed5(0x4b7,0x512,0x545,0x4a2)],_0x3e7867),_0x19672d(_0x16a011['prompt']);};_0x5ab593['on'](_0x10846f['LLM_CHAR_M'+_0x27a3d4(-0x1c9,-0x153,-0x233,-0x205)+_0x27a3d4(-0x1c6,-0x17b,-0x1e9,-0x192)+_0x27a3d4(-0x1cf,-0x1ca,-0x188,-0x147)],_0x3e7867);const _0x2aec2a={};_0x2aec2a['id']=_0x282afd,_0x4a8693[_0x1d1672(0x12e,0x16c,0x184,0x18d)](_0x6f8e55[_0x1d1672(0x1b2,0x152,0x16e,0x134)+_0x1d1672(0x289,0x204,0x20b,0x194)+_0x1d1672(0x147,0x11c,0xee,0x156)+'UEST'],_0x2aec2a),_0x50439f(()=>{function _0x5707b0(_0xce7770,_0x22d987,_0x8bf374,_0x53bbf3){return _0x1d1672(_0xce7770-0x120,_0x53bbf3-0x77,_0x8bf374-0x1db,_0xce7770);}_0x70cda0['removeList'+_0x5707b0(0x232,0x27f,0x24e,0x29d)](_0x249d93[_0x5707b0(0x170,0x22d,0x218,0x1c9)+_0x5707b0(0x22a,0x1fc,0x239,0x27b)+_0x5707b0(0x29a,0x286,0x251,0x27e)+'PONSE'],_0x3e7867);function _0xf2779a(_0x4a5e67,_0x23f37d,_0x3ea228,_0x16736c){return _0x1d1672(_0x4a5e67-0x1ef,_0x23f37d- -0x48,_0x3ea228-0x12d,_0x3ea228);}_0xb53afc[_0x5707b0(0x227,0x27c,0x204,0x22a)](_0x564038,new _0x1f771a(_0xb53afc[_0xf2779a(0x1c9,0x1e5,0x1cd,0x183)]));},0x2d22+0x127b*0x4+0x1*-0x4ffe);}}else _0xb53afc[_0x1d1672(0xc0,0x12b,0x14f,0x12d)](_0x5e229a,_0x440b2d)&&console[_0x1d1672(0x1a3,0x191,0x1c1,0x15e)](_0x27a3d4(-0x262,-0x2a6,-0x23e,-0x284)+_0x1d1672(0x185,0x12c,0x12b,0xe0)+_0x27a3d4(-0x1f7,-0x237,-0x273,-0x1ce)+'\x22'+_0x5e229a+'\x22');}function _0x1d1672(_0x222c5a,_0x4d5fc2,_0x5cd17b,_0x5bfae7){return _0x59c525(_0x5bfae7,_0x4d5fc2-0x371,_0x5cd17b-0x154,_0x5bfae7-0xce);}if(!_0x19ced1[_0x27a3d4(-0x25d,-0x29a,-0x2d2,-0x24c)])return null;return console[_0x27a3d4(-0x23c,-0x20f,-0x1bf,-0x1f3)](_0x27a3d4(-0x262,-0x231,-0x2ec,-0x20b)+_0x1d1672(0x114,0x12c,0xff,0xd5)+_0x27a3d4(-0x2a6,-0x225,-0x29e,-0x241),_0x19ced1),_0x19ced1;}function extractOutfitTags(_0x4ad725){const _0x27d75c={'KEvqz':function(_0x3e7c8d,_0x2d6e29){return _0x3e7c8d!==_0x2d6e29;},'ntuJH':function(_0x5d52cd,_0x4d2c75){return _0x5d52cd(_0x4d2c75);}};function _0x261e05(_0x2be40f,_0x337310,_0x38523d,_0x204e34){return _0x59c525(_0x204e34,_0x38523d-0x639,_0x38523d-0x126,_0x204e34-0x113);}function _0x1702c7(_0x489de2,_0x11ec06,_0x3961cd,_0xbd6980){return _0x59c525(_0xbd6980,_0x3961cd-0x53b,_0x3961cd-0xb7,_0xbd6980-0xfb);}const _0x3b929f={};_0x3b929f['outfits']=[];const _0x1ad23a=_0x3b929f;_0x4ad725=_0x4ad725['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x261e05(0x3b7,0x439,0x436,0x49b)]();const _0x21f69c=/<服装>([\s\S]*?)<\/服装>/g;let _0x13648e;while(_0x27d75c['KEvqz'](_0x13648e=_0x21f69c[_0x1702c7(0x350,0x2c1,0x2fb,0x37b)](_0x4ad725),null)){const _0x414d85=preprocessTagContent(_0x13648e[0xe01+-0x52c*0x1+-0xe2*0xa]),_0x1c12a4=_0x27d75c[_0x1702c7(0x3a8,0x2f1,0x31f,0x373)](parseOutfitData,_0x414d85);_0x1c12a4&&_0x1ad23a['outfits']['push'](_0x1c12a4);}return _0x1ad23a;}function getCurrentOutfitPreset(){const _0xd2c807=extension_settings[extensionName],_0xf14cd=_0xd2c807[_0x33fbe8(0x186,0x15e,0x16f,0x188)+_0x33fbe8(0x1ed,0x1f1,0x230,0x21f)];if(!_0xf14cd||!_0xd2c807['outfitPres'+_0x67d78f(0x166,0x15d,0x110,0x13d)][_0xf14cd])return null;const _0x114b5f={};_0x114b5f['id']=_0xf14cd;function _0x33fbe8(_0xcacc5c,_0x48b776,_0x2d3035,_0x5da809){return _0x59c525(_0x2d3035,_0x48b776-0x360,_0x2d3035-0x196,_0x5da809-0xb3);}function _0x67d78f(_0x4a41cb,_0x5bbd50,_0x8bee42,_0x224ee9){return _0x59c525(_0x5bbd50,_0x8bee42-0x2f6,_0x8bee42-0x158,_0x224ee9-0x198);}return _0x114b5f[_0x33fbe8(0x187,0x1d7,0x239,0x237)]=_0xd2c807['outfitPres'+_0x33fbe8(0x102,0x17a,0x1d3,0x137)][_0xf14cd],_0x114b5f;}function buildOutfitText(_0x3f31d7){const _0xea5e75={};_0xea5e75[_0x279e2a(0x57,0xd4,0xa4,0xd8)]=_0x3892a4(-0x351,-0x361,-0x34f,-0x30e);const _0x1ef014=_0xea5e75,_0x5d5ac9=_0x3f31d7['data'];let _0x43fa4f='<服装>\x0a';_0x43fa4f+=_0x3892a4(-0x2aa,-0x23f,-0x30e,-0x29b)+(_0x5d5ac9[_0x279e2a(0x2,0xde,0x79,0x6b)]||'')+'\x0a',_0x43fa4f+=_0x279e2a(0x3,0x2e,0x27,0x29)+(_0x5d5ac9[_0x3892a4(-0x2c1,-0x33a,-0x2c6,-0x2fa)]||'')+'\x0a';function _0x3892a4(_0x18b07b,_0xbc6b57,_0x42dadc,_0x8122e){return _0x59c525(_0x18b07b,_0x8122e- -0xd7,_0x42dadc-0x30,_0x8122e-0xd5);}_0x43fa4f+=_0x3892a4(-0x284,-0x321,-0x237,-0x293)+(_0x5d5ac9[_0x3892a4(-0x257,-0x2a2,-0x235,-0x28b)]||'')+'\x0a',_0x43fa4f+='上半身背面:\x20'+(_0x5d5ac9[_0x279e2a(0xd5,0x99,0xd8,0x7c)+_0x279e2a(0x8a,0xa9,0x160,0xee)]||'')+'\x0a',_0x43fa4f+=_0x3892a4(-0x285,-0x253,-0x2d2,-0x26f)+(_0x5d5ac9[_0x279e2a(0xdb,0x119,0xe6,0xb1)]||'')+'\x0a',_0x43fa4f+=_0x3892a4(-0x243,-0x299,-0x2c2,-0x2c4)+(_0x5d5ac9[_0x3892a4(-0x302,-0x2b4,-0x270,-0x279)+'ck']||'')+'\x0a';function _0x279e2a(_0x5cabf1,_0x1598f2,_0x1590d3,_0x26c612){return _0x59c525(_0x1598f2,_0x26c612-0x26c,_0x1590d3-0x5,_0x26c612-0xb6);}return _0x43fa4f+=_0x1ef014[_0x3892a4(-0x1e6,-0x244,-0x257,-0x26b)],_0x43fa4f;}function _0x59c525(_0x352c69,_0x267523,_0xb7d90a,_0x3149f0){return _0x3247(_0x267523- -0x2dd,_0x352c69);}export async function handleOutfitPromptModify(_0x58e4bf,_0x4131ff=[]){const _0x3abc49={'FIKcA':function(_0x353f9c,_0x4d8f9c){return _0x353f9c(_0x4d8f9c);},'rosaG':function(_0x43146d){return _0x43146d();},'kmesE':function(_0x3f13b3,_0x4af320,_0x3cae31){return _0x3f13b3(_0x4af320,_0x3cae31);},'ZtwYf':function(_0x4164fe,_0x42391d){return _0x4164fe!==_0x42391d;},'qUxkk':function(_0x5c4f64,_0x298308){return _0x5c4f64(_0x298308);},'UQfgE':'[outfitPro'+'mptModify]'+'\x20Starting\x20'+_0x57d215(-0x2cd,-0x214,-0x257,-0x233)+_0x57d215(-0x37f,-0x2cb,-0x311,-0x300)+'\x20request..'+'.','eskqD':_0x7c4dab(0x432,0x3dc,0x438,0x4b2)+'mptModify]'+_0x57d215(-0x1ec,-0x240,-0x25b,-0x1ff)+_0x57d215(-0x328,-0x2b3,-0x2ad,-0x336),'jZCKj':function(_0xeafa0d,_0x36dd12){return _0xeafa0d(_0x36dd12);},'aIIKd':function(_0x405b57,_0x3a332a,_0x17cacb){return _0x405b57(_0x3a332a,_0x17cacb);},'zZvYW':_0x57d215(-0x28a,-0x1a0,-0x22d,-0x268)+'y','gbcqS':function(_0x17785d,_0x5d8a33,_0x5712d4){return _0x17785d(_0x5d8a33,_0x5712d4);},'YNowq':'{{用户需求}}','rfquh':_0x7c4dab(0x432,0x3dd,0x46b,0x3cc)+_0x57d215(-0x2f7,-0x38d,-0x31a,-0x36d)+_0x57d215(-0x1fa,-0x235,-0x278,-0x242)+_0x7c4dab(0x4ae,0x4af,0x474,0x452)+_0x57d215(-0x2bc,-0x1f8,-0x252,-0x1e8)+'x:','LWGRm':function(_0x253073,_0x32da6e,_0x55d078,_0x36497f,_0x4389f2){return _0x253073(_0x32da6e,_0x55d078,_0x36497f,_0x4389f2);},'IVtxL':function(_0x6b583,_0xa83399,_0x250ac5,_0x1382dc,_0x50bffe){return _0x6b583(_0xa83399,_0x250ac5,_0x1382dc,_0x50bffe);},'fTwLb':_0x7c4dab(0x402,0x432,0x42a,0x399),'JvMIQ':_0x7c4dab(0x4aa,0x442,0x530,0x425),'GFygx':_0x7c4dab(0x4e3,0x4ac,0x4c0,0x4f0),'kZatG':_0x57d215(-0x314,-0x32d,-0x2b4,-0x28e),'gXXpz':_0x7c4dab(0x45a,0x4b2,0x486,0x408),'cDmER':function(_0x1d354f,_0x352e26,_0x194fd8,_0x3adda4,_0x4b3549){return _0x1d354f(_0x352e26,_0x194fd8,_0x3adda4,_0x4b3549);},'dJObz':_0x57d215(-0x228,-0x225,-0x246,-0x1f7)+'}}','DQrJD':_0x7c4dab(0x445,0x401,0x450,0x4c4)+'}}','xHAPP':_0x7c4dab(0x432,0x3cf,0x46b,0x462)+_0x7c4dab(0x3f3,0x404,0x3c6,0x395)+'\x20Final\x20pro'+_0x57d215(-0x349,-0x311,-0x2cf,-0x2a8),'gsRNu':function(_0xadbb94,_0x250308){return _0xadbb94>_0x250308;},'fwsgI':function(_0x2bea27,_0x19eac7){return _0x2bea27===_0x19eac7;},'HZrwK':_0x57d215(-0x1bd,-0x22d,-0x226,-0x214),'qJfwm':_0x7c4dab(0x491,0x50d,0x482,0x4da),'XzszA':function(_0x29e248,_0x3afa79){return _0x29e248>=_0x3afa79;},'ZrqON':_0x57d215(-0x24c,-0x25c,-0x24a,-0x2ac),'blbct':_0x57d215(-0x300,-0x369,-0x2db,-0x281)+'mptModify]'+_0x7c4dab(0x40e,0x428,0x473,0x428),'xlNcy':_0x7c4dab(0x4b8,0x4ed,0x45b,0x523)+_0x7c4dab(0x3e8,0x37d,0x41c,0x45c)+_0x7c4dab(0x429,0x4a0,0x44e,0x3c4),'rhaLw':function(_0x3e2c56,_0xb9d5c2,_0x3f6c87){return _0x3e2c56(_0xb9d5c2,_0x3f6c87);},'CqNoy':function(_0x22e557,_0x7c0b9){return _0x22e557!==_0x7c0b9;},'gejZs':_0x7c4dab(0x457,0x42d,0x3fc,0x3d2),'wXBkX':_0x7c4dab(0x400,0x429,0x3a7,0x405),'IBDmF':_0x7c4dab(0x4f0,0x530,0x469,0x54e),'zIZqs':_0x7c4dab(0x47f,0x505,0x47d,0x438)+_0x7c4dab(0x4d2,0x52c,0x54c,0x4ca),'DATaF':_0x57d215(-0x250,-0x34e,-0x2db,-0x2de)+_0x7c4dab(0x3f3,0x47d,0x435,0x399)+'\x20Raw\x20LLM\x20o'+_0x7c4dab(0x4cf,0x513,0x4f4,0x55b)+_0x57d215(-0x1ab,-0x2af,-0x230,-0x2a7),'DcXsw':_0x57d215(-0x2fe,-0x34a,-0x302,-0x2cf),'Ujkjn':_0x7c4dab(0x432,0x3c9,0x3bf,0x3c2)+_0x7c4dab(0x3f3,0x47d,0x473,0x425)+_0x57d215(-0x2a2,-0x2e6,-0x287,-0x26a)};console['log'](_0x3abc49[_0x57d215(-0x233,-0x278,-0x234,-0x229)]);function _0x57d215(_0x22b0c4,_0xaf3401,_0x37cbb4,_0x240274){return _0x59c525(_0x22b0c4,_0x37cbb4- -0xd5,_0x37cbb4-0x1d6,_0x240274-0xcc);}function _0x7c4dab(_0x552b03,_0xa5b64,_0x281121,_0x1cdf35){return _0x59c525(_0x281121,_0x552b03-0x638,_0x281121-0xf3,_0x1cdf35-0x6b);}toastr[_0x57d215(-0x2ab,-0x2db,-0x2f3,-0x28b)](_0x7c4dab(0x3f0,0x468,0x39c,0x3fe)+_0x7c4dab(0x3f9,0x44f,0x40f,0x461));try{const _0x2ccd=extension_settings[extensionName],_0x3d2cd6=getCurrentOutfitPreset();if(!_0x3d2cd6){toastr[_0x7c4dab(0x3f7,0x3ab,0x443,0x3c0)]('请先选择一个服装预设');return;}console[_0x7c4dab(0x458,0x48c,0x444,0x4d7)](_0x3abc49['eskqD'],_0x3d2cd6['id']);const _0x16b035=_0x3abc49[_0x57d215(-0x278,-0x26f,-0x29c,-0x2a5)](buildOutfitText,_0x3d2cd6),_0x415c5e=[_0x58e4bf||'',_0x16b035][_0x7c4dab(0x3ea,0x3d0,0x3ff,0x412)](Boolean)[_0x7c4dab(0x4c6,0x539,0x4f1,0x4b7)]('\x0a');let _0x55cbfb=_0x3abc49['aIIKd'](buildPromptForRequestType,_0x3abc49[_0x57d215(-0x20d,-0x287,-0x24c,-0x22f)],_0x415c5e);const _0xdfa4cb=new Set(),_0x5fce85=_0x3abc49['gbcqS'](findMessageIndexWithPlaceholder,_0x55cbfb,_0x3abc49[_0x57d215(-0x205,-0x2c4,-0x251,-0x27e)]);console[_0x57d215(-0x23a,-0x33b,-0x2b5,-0x290)](_0x3abc49[_0x57d215(-0x363,-0x32b,-0x300,-0x2df)],_0x5fce85),_0x55cbfb=_0x3abc49['LWGRm'](replacePlaceholder,_0x55cbfb,_0x57d215(-0x299,-0x214,-0x268,-0x2f5),_0x16b035,_0xdfa4cb),_0x55cbfb=_0x3abc49[_0x57d215(-0x2fb,-0x24a,-0x26f,-0x204)](replacePlaceholder,_0x55cbfb,_0x3abc49[_0x57d215(-0x24e,-0x2a6,-0x266,-0x28f)],_0x16b035,_0xdfa4cb),_0x55cbfb=_0x3abc49[_0x57d215(-0x249,-0x2ac,-0x249,-0x2b5)](replacePlaceholder,_0x55cbfb,_0x3abc49[_0x7c4dab(0x4bc,0x4ad,0x4cb,0x543)],_0x58e4bf||'',_0xdfa4cb),_0x55cbfb=_0x3abc49[_0x57d215(-0x2c0,-0x245,-0x249,-0x29b)](replacePlaceholder,_0x55cbfb,_0x3abc49[_0x57d215(-0x242,-0x249,-0x28f,-0x221)],'',_0xdfa4cb),_0x55cbfb=_0x3abc49[_0x7c4dab(0x49e,0x45a,0x4cd,0x4b2)](replacePlaceholder,_0x55cbfb,_0x3abc49[_0x7c4dab(0x4e9,0x516,0x554,0x462)],'',_0xdfa4cb),_0x55cbfb=_0x3abc49[_0x7c4dab(0x4c4,0x538,0x4a7,0x4dc)](replacePlaceholder,_0x55cbfb,_0x3abc49[_0x57d215(-0x34c,-0x2dd,-0x2ce,-0x24b)],'',_0xdfa4cb),_0x55cbfb=replacePlaceholder(_0x55cbfb,_0x3abc49[_0x57d215(-0x2e3,-0x25b,-0x286,-0x266)],'',_0xdfa4cb),_0x55cbfb=_0x3abc49[_0x57d215(-0x28a,-0x28f,-0x221,-0x215)](replacePlaceholder,_0x55cbfb,_0x3abc49[_0x57d215(-0x2de,-0x2d1,-0x254,-0x262)],'',_0xdfa4cb),_0x55cbfb=_0x3abc49['cDmER'](replacePlaceholder,_0x55cbfb,_0x3abc49[_0x7c4dab(0x4cd,0x4eb,0x4ca,0x4bf)],'',_0xdfa4cb),console['log'](_0x3abc49[_0x7c4dab(0x42e,0x41d,0x4b3,0x45c)],_0x55cbfb);let _0x34c2b0='';if(_0x3abc49[_0x7c4dab(0x4d0,0x496,0x52f,0x4e8)](_0xdfa4cb[_0x57d215(-0x274,-0x363,-0x2fa,-0x2dc)],-0x1886+0x14*0x2f+-0xa6d*-0x2)){if(_0x3abc49[_0x57d215(-0x1e5,-0x282,-0x235,-0x1c4)](_0x3abc49[_0x7c4dab(0x420,0x436,0x3b6,0x39d)],_0x3abc49[_0x7c4dab(0x3fe,0x38c,0x43a,0x3af)])){let _0x1925dc=_0x163bc0[_0x57d215(-0x2b3,-0x2dd,-0x2b1,-0x31b)](/:/g,':')[_0x57d215(-0x2ca,-0x2f3,-0x2b1,-0x2fe)](/\(/g,'（')[_0x7c4dab(0x45c,0x48f,0x466,0x4d3)](/\)/g,'）')['replace'](/,/g,',');return _0x1925dc;}else _0x34c2b0=_0x7c4dab(0x4ca,0x47e,0x494,0x4ec)+_0x7c4dab(0x421,0x439,0x3fe,0x3e7)+[..._0xdfa4cb][_0x57d215(-0x1de,-0x1eb,-0x247,-0x1c8)]('、')+'\x0a';}_0x4131ff&&_0x3abc49[_0x7c4dab(0x4d0,0x481,0x465,0x458)](_0x4131ff[_0x57d215(-0x224,-0x2bf,-0x281,-0x2bf)],-0x1d5d+0x3*-0x14c+0x2141*0x1)&&_0x3abc49[_0x57d215(-0x243,-0x2d0,-0x2b7,-0x307)](_0x5fce85,0x1*0x1f45+0x20d8+0x155f*-0x3)&&(_0x55cbfb=_0x3abc49[_0x57d215(-0x232,-0x28e,-0x26f,-0x29c)](attachImagesToMessage,_0x55cbfb,_0x5fce85,_0x4131ff,_0x3abc49['ZrqON']),console['log'](_0x3abc49[_0x57d215(-0x20c,-0x2b2,-0x25d,-0x2e9)],_0x4131ff[_0x7c4dab(0x48c,0x445,0x4c1,0x518)],_0x3abc49['xlNcy'],_0x5fce85));_0x3abc49[_0x57d215(-0x24a,-0x2a7,-0x2c3,-0x304)](updateCombinedPrompt,_0x55cbfb,_0x34c2b0);const _0xc1ce78={};_0xc1ce78['timeoutMs']=0x493e0;const _0x5e6a86=await _0x3abc49['rhaLw'](LLM_OUTFIT_MODIFY,_0x55cbfb,_0xc1ce78);console[_0x7c4dab(0x458,0x439,0x3e5,0x421)]('[outfitPro'+_0x7c4dab(0x3f3,0x41b,0x419,0x3a1)+_0x57d215(-0x273,-0x268,-0x264,-0x1ed)+'t:',_0x5e6a86);if(!_0x5e6a86){if(_0x3abc49[_0x57d215(-0x1c4,-0x2bf,-0x23c,-0x22d)]('EiZJT',_0x3abc49['gejZs'])){toastr[_0x57d215(-0x366,-0x33b,-0x316,-0x312)](_0x3abc49['wXBkX']);return;}else{const _0x406af1={'XPZzS':function(_0x490b86,_0x337c89){function _0x30f472(_0x382e2d,_0x1e691b,_0x4971b4,_0xf52989){return _0x57d215(_0x1e691b,_0x1e691b-0x13e,_0x382e2d-0x24e,_0xf52989-0x12b);}return _0x3abc49[_0x30f472(-0x72,-0x86,-0x45,-0x31)](_0x490b86,_0x337c89);},'ILZOC':function(_0x4a0c2c,_0x552b97){function _0x4e0a82(_0x5caa5b,_0x31924c,_0xa03ec2,_0x335db2){return _0x7c4dab(_0x31924c- -0x6f6,_0x31924c-0x3e,_0x335db2,_0x335db2-0x1dc);}return _0x3abc49[_0x4e0a82(-0x2c9,-0x2c5,-0x239,-0x2a6)](_0x4a0c2c,_0x552b97);}};return new _0x48a166((_0x5a1db3,_0x21fffa)=>{const _0xde7a03={'DaBAv':function(_0x56300e,_0x2f2576){function _0x169083(_0x509f93,_0x20d277,_0x35d3d5,_0x5593bd){return _0x3247(_0x5593bd-0x1fd,_0x20d277);}return _0x3abc49[_0x169083(0x2c1,0x294,0x263,0x2aa)](_0x56300e,_0x2f2576);}},_0x4560f0=_0x3abc49['rosaG'](_0xb937cf);function _0x414ce4(_0x29bd94,_0x47f9aa,_0x455fec,_0x529636){return _0x57d215(_0x455fec,_0x47f9aa-0x16,_0x529636-0x430,_0x529636-0x1a9);}_0x4ca369[_0x414ce4(0x1c2,0x1e7,0x174,0x17b)](_0x414ce4(0xe3,0x1e1,0xe4,0x155)+_0x414ce4(0xd3,0xf7,0xf0,0x116)+_0x5ddb27(-0x34b,-0x2f7,-0x330,-0x335)+_0x5ddb27(-0x342,-0x352,-0x2d0,-0x2de)+_0x414ce4(0x105,0x143,0x15a,0x102)+_0x414ce4(0x148,0x136,0x16c,0x11d)+_0x4560f0+')');const _0xb090ca=_0x46d5a4=>{if(_0x406af1['XPZzS'](_0x46d5a4['id'],_0x4560f0))return;_0x806242['removeList'+'ener'](_0x298cbf[_0x892d5d(0x2d1,0x222,0x29d,0x289)+'ODIFY_GET_'+_0x219864(0x4ac,0x515,0x519,0x4b6)+'PONSE'],_0xb090ca);function _0x219864(_0x163529,_0x1beffc,_0x13f6a7,_0xd98389){return _0x5ddb27(_0x163529-0xa2,_0x1beffc-0x13c,_0x1beffc-0x759,_0xd98389);}function _0x892d5d(_0xffe814,_0x1b2521,_0x25d152,_0x1f627e){return _0x5ddb27(_0xffe814-0x1e9,_0x1b2521-0x196,_0x25d152-0x596,_0x1b2521);}_0x406af1[_0x892d5d(0x2bc,0x29d,0x2a6,0x2de)](_0x5a1db3,_0x46d5a4[_0x219864(0x4d4,0x4b5,0x535,0x4b5)]);};_0x3c36a8['on'](_0x2ffe82[_0x5ddb27(-0x345,-0x26a,-0x2f9,-0x282)+'ODIFY_GET_'+_0x414ce4(0x26a,0x183,0x1f1,0x1f1)+_0x5ddb27(-0x2b3,-0x278,-0x24d,-0x2d9)],_0xb090ca);function _0x5ddb27(_0x269758,_0x1815b9,_0x175607,_0x570d02){return _0x7c4dab(_0x175607- -0x712,_0x1815b9-0x1d6,_0x570d02,_0x570d02-0x113);}const _0x31db46={};_0x31db46['id']=_0x4560f0,_0x3373e7['emit'](_0x9261f6[_0x414ce4(0xc6,0x13a,0x148,0x13c)+_0x414ce4(0x247,0x1f0,0x214,0x1ee)+_0x414ce4(0x157,0x109,0x16d,0x106)+_0x414ce4(0x253,0x170,0x258,0x1fe)],_0x31db46),_0x3abc49[_0x5ddb27(-0x263,-0x2ef,-0x291,-0x2f2)](_0x51dc78,()=>{function _0x360318(_0x19a1d8,_0x541ce3,_0x517596,_0x3ae577){return _0x414ce4(_0x19a1d8-0x87,_0x541ce3-0x13c,_0x517596,_0x19a1d8-0x117);}function _0x1a2bff(_0x21d34a,_0x6dc912,_0x6a474,_0x452fa8){return _0x5ddb27(_0x21d34a-0x93,_0x6dc912-0x4d,_0x21d34a-0x37e,_0x6dc912);}_0x29eca7[_0x360318(0x2c9,0x322,0x351,0x240)+'ener'](_0x547169['LLM_CHAR_M'+'ODIFY_GET_'+_0x1a2bff(0x13a,0x116,0x18c,0x162)+_0x360318(0x2ff,0x31d,0x2c7,0x28a)],_0xb090ca),_0xde7a03[_0x1a2bff(0xac,0x74,0x92,0x11a)](_0x21fffa,new _0x3fafb4(_0x1a2bff(0xbd,0x12e,0x6a,0x7f)+'时'));},0x40a+-0x1*0x19da+0x3ce0);});}}const _0x3b4b49=extractOutfitTags(_0x5e6a86);if(_0x3b4b49['outfits'][_0x57d215(-0x28a,-0x254,-0x281,-0x2e9)]===0x8e*-0x40+0x1d2d+0x653){if('HmITv'===_0x3abc49[_0x57d215(-0x19c,-0x1f2,-0x21f,-0x1c4)])_0x1600bd[_0x7c4dab(0x458,0x3ee,0x3ce,0x4dc)]('[outfitPro'+_0x57d215(-0x366,-0x321,-0x31a,-0x2dc)+'\x20未识别的服装字段\x20'+'\x22'+_0x3ad776+'\x22');else{toastr[_0x7c4dab(0x478,0x494,0x49e,0x496)](_0x3abc49[_0x7c4dab(0x42d,0x495,0x3a8,0x3a8)]),console[_0x7c4dab(0x458,0x3e6,0x3d0,0x431)](_0x3abc49['DATaF'],_0x5e6a86);return;}}console[_0x7c4dab(0x458,0x43a,0x4cd,0x4b7)](_0x7c4dab(0x432,0x3ce,0x3c8,0x42f)+'mptModify]'+_0x57d215(-0x223,-0x279,-0x22e,-0x1b7)+'\x20data:',_0x3b4b49);const _0x5b12fb=_0x3b4b49[_0x7c4dab(0x479,0x403,0x4d7,0x4cf)][-0x1e02*-0x1+0x1713+0x7f*-0x6b];await _0x3abc49[_0x57d215(-0x2a4,-0x20a,-0x265,-0x20a)](updateOutfitPresetFromLLM,_0x3d2cd6['id'],_0x5b12fb),toastr['success'](_0x3abc49[_0x7c4dab(0x4d3,0x47c,0x50e,0x560)]);}catch(_0x24bca7){console[_0x7c4dab(0x3f7,0x424,0x45b,0x42b)](_0x3abc49[_0x7c4dab(0x45e,0x48c,0x418,0x4b6)],_0x24bca7),toastr[_0x57d215(-0x2f3,-0x2ae,-0x316,-0x306)](_0x57d215(-0x254,-0x35e,-0x2d1,-0x247)+'\x20'+_0x24bca7['message']);}}async function updateOutfitPresetFromLLM(_0x29975e,_0x17604a){const _0x23b782={'nrCsH':_0x261f76(0x183,0x174,0x141,0x15b),'laGPM':function(_0xfde09,_0x3580d9){return _0xfde09!==_0x3580d9;},'gnGSf':_0x15aa9f(0x417,0x3db,0x3b4,0x34f),'mRiEy':_0x15aa9f(0x411,0x3e4,0x393,0x37a),'ELkph':_0x261f76(0x189,0x19d,0x1fd,0x1f4),'zYtYv':'上半身背面','YtKgx':_0x261f76(0x230,0x172,0x220,0x1d0),'ZxxkU':'下半身背面','DWvoh':function(_0x3742c9,_0x3b78d4){return _0x3742c9===_0x3b78d4;},'VOsVs':_0x15aa9f(0x3c5,0x3a7,0x35a,0x3d0),'gxqxz':_0x15aa9f(0x346,0x39b,0x36a,0x3c5),'AYeBa':function(_0x1db4df,_0x2a6c2d){return _0x1db4df>_0x2a6c2d;},'NCPii':'...','bXHOc':function(_0x138cf5,_0x2b02df){return _0x138cf5(_0x2b02df);},'rRIWc':_0x15aa9f(0x395,0x40a,0x3f6,0x454),'aVpbg':_0x15aa9f(0x32c,0x36c,0x38f,0x391),'HdZbw':function(_0x288126){return _0x288126();},'opgST':'#st-chatu8'+_0x15aa9f(0x459,0x43f,0x423,0x3c4)+_0x15aa9f(0x40a,0x3da,0x3ee,0x3aa)};function _0x15aa9f(_0x53ecad,_0x5b7df9,_0x288435,_0x25df22){return _0x59c525(_0x25df22,_0x5b7df9-0x580,_0x288435-0x4c,_0x25df22-0x1ea);}const _0x3075cf=extension_settings[extensionName];function _0x261f76(_0x7d9a41,_0x3fcc68,_0x2e67a7,_0x38c97a){return _0x59c525(_0x7d9a41,_0x38c97a-0x393,_0x2e67a7-0x49,_0x38c97a-0xe8);}const _0x3ad9db=_0x3075cf[_0x261f76(0x1c7,0x16b,0x125,0x191)+_0x15aa9f(0x31f,0x39a,0x3f7,0x30f)][_0x29975e];if(!_0x3ad9db){if(_0x23b782['laGPM'](_0x23b782[_0x261f76(0x22a,0x1de,0x1a9,0x1e8)],_0x261f76(0x17a,0x25e,0x246,0x1ee))){_0x1ff2d2[_0x15aa9f(0x3b8,0x33f,0x359,0x2c5)](_0x23b782[_0x261f76(0x2ad,0x1d2,0x1d2,0x230)]);return;}else{toastr[_0x261f76(0x12c,0xf5,0xea,0x152)](_0x23b782[_0x261f76(0x204,0x15f,0x1c0,0x180)]);return;}}let _0x12c661='准备更新服装\x20\x22'+_0x29975e+'\x22\x20的以下数据:\x0a\x0a';const _0x1d3558={};_0x1d3558[_0x15aa9f(0x324,0x37f,0x400,0x3df)]=_0x15aa9f(0x3aa,0x36f,0x337,0x39f),_0x1d3558[_0x15aa9f(0x399,0x35d,0x324,0x349)]=_0x23b782[_0x15aa9f(0x346,0x3d2,0x3bb,0x42c)],_0x1d3558[_0x261f76(0x1d1,0x216,0x24e,0x1df)]=_0x261f76(0x29a,0x254,0x1a5,0x20c),_0x1d3558[_0x261f76(0x17d,0x140,0x1fa,0x1a3)+_0x261f76(0x20b,0x243,0x207,0x215)]=_0x23b782['zYtYv'],_0x1d3558[_0x15aa9f(0x447,0x3c5,0x3c5,0x39b)]=_0x23b782[_0x15aa9f(0x38b,0x383,0x360,0x35b)],_0x1d3558[_0x15aa9f(0x38d,0x3de,0x385,0x369)+'ck']=_0x23b782[_0x15aa9f(0x3a3,0x408,0x470,0x48e)];const _0x259e90=_0x1d3558;let _0x27f635=-0xfa5+0x1662+-0x3*0x23f;for(const _0x5cafc6 in _0x259e90){if(_0x23b782[_0x15aa9f(0x49a,0x429,0x40e,0x3a8)](_0x23b782[_0x261f76(0x192,0x100,0x121,0x15e)],_0x261f76(0x18b,0xcf,0xb3,0x141)))_0x1f18ba[_0x353e6d]&&(_0x4a7535[_0xd60ce6]=_0xcb95b1[_0x3bdd07]);else{if(_0x17604a[_0x5cafc6]&&_0x23b782['laGPM'](_0x17604a[_0x5cafc6],_0x3ad9db[_0x5cafc6])){const _0x598dba=_0x3ad9db[_0x5cafc6]||_0x23b782[_0x261f76(0x1d9,0x148,0x1d3,0x1bc)],_0x3d3b1f=_0x17604a[_0x5cafc6];_0x12c661+='•\x20'+_0x259e90[_0x5cafc6]+':\x0a',_0x12c661+='\x20\x20旧:\x20'+_0x598dba[_0x261f76(0x22c,0x274,0x179,0x1e9)](0x1345+-0x2529*0x1+-0x8f2*-0x2,0x3*-0xf7+0x2526+-0x220f)+(_0x23b782[_0x15aa9f(0x43d,0x414,0x44c,0x3aa)](_0x598dba['length'],0x1ed0+0x5c3*0x6+-0x4130)?_0x261f76(0x1bc,0xe0,0xe6,0x156):'')+'\x0a',_0x12c661+=_0x15aa9f(0x3ee,0x3dc,0x425,0x403)+_0x3d3b1f['substring'](0x49*-0x37+-0x1e6+0x1195,0x14b+0x16*-0x115+0x16b5)+(_0x23b782['AYeBa'](_0x3d3b1f['length'],0x1db+-0xb71+0x9c8)?_0x23b782[_0x15aa9f(0x3c6,0x35c,0x380,0x32e)]:'')+'\x0a\x0a',_0x27f635++;}}}if(_0x27f635===0x1*-0x11e2+0x1103*-0x2+0x33e8){toastr[_0x261f76(0x1c3,0x17a,0x161,0x175)](_0x261f76(0x141,0x1f9,0x156,0x1ca)+'内容');return;}_0x12c661+='共\x20'+_0x27f635+_0x261f76(0x163,0x1c6,0x131,0x179);const _0x44d02b=await _0x23b782[_0x261f76(0x161,0x106,0xf8,0x172)](stylishConfirm,_0x12c661);if(!_0x44d02b){toastr['info'](_0x23b782[_0x261f76(0x173,0x17d,0x14d,0x17a)]);return;}for(const _0x1cde22 in _0x259e90){_0x23b782[_0x261f76(0x102,0x12e,0x108,0x16c)]!==_0x23b782['aVpbg']?(_0x4a38e9[_0x15aa9f(0x308,0x33f,0x373,0x3cd)](_0x261f76(0x181,0x191,0x1e0,0x18d)+_0x15aa9f(0x337,0x33b,0x3b4,0x3b8)+_0x261f76(0x199,0x171,0x267,0x1e1),_0x7e3437),_0x4b83ef['error'](_0x15aa9f(0x370,0x384,0x3c7,0x334)+'\x20'+_0x17c811[_0x261f76(0x1d8,0x1e0,0x26a,0x241)])):_0x17604a[_0x1cde22]&&(_0x3ad9db[_0x1cde22]=_0x17604a[_0x1cde22]);}_0x23b782['HdZbw'](saveSettingsDebounced);const _0x40ffc6=_0x23b782['bXHOc']($,_0x23b782[_0x261f76(0x152,0x204,0x1d2,0x194)]);_0x40ffc6['length']&&loadOutfitPreset(),_0x23b782[_0x15aa9f(0x32b,0x35f,0x3da,0x308)](updateOutfitFormFields,_0x17604a),console[_0x261f76(0x147,0x146,0x174,0x1b3)](_0x15aa9f(0x32e,0x37a,0x3d7,0x313)+'mptModify]'+_0x261f76(0x12c,0x1c0,0xfd,0x16b)+_0x29975e+'\x22');}function updateOutfitFormFields(_0xea2aba){function _0x2d96c6(_0x3e4c16,_0x72144c,_0x238015,_0x2395d2){return _0x59c525(_0x238015,_0x3e4c16-0x2f5,_0x238015-0x1b0,_0x2395d2-0x1d3);}const _0x5af633={'FbrrP':function(_0x57750f,_0x438bdd){return _0x57750f(_0x438bdd);},'ggESX':_0x2d96c6(0xd2,0x127,0xae,0x54),'oYhks':_0x2d96c6(0x141,0x186,0xfb,0x1b2),'cQgTJ':_0x1284be(-0x247,-0x2b3,-0x20b,-0x24a)+'ack','eugHX':_0x2d96c6(0x13a,0x17b,0x1bd,0x158),'TWPpM':'fullBodyBa'+'ck'},_0x26c9ec=[_0x1284be(-0x258,-0x25b,-0x2b7,-0x26e),_0x5af633['ggESX'],_0x5af633[_0x1284be(-0x22c,-0x202,-0x2a6,-0x1b2)],_0x5af633[_0x2d96c6(0x134,0x12e,0x169,0xf4)],_0x5af633[_0x2d96c6(0xa4,0x79,0x6d,0x3b)],_0x5af633[_0x1284be(-0x257,-0x263,-0x22f,-0x274)]];function _0x1284be(_0x4e794f,_0x1c8c16,_0x4344b5,_0x338658){return _0x59c525(_0x4344b5,_0x4e794f- -0x57,_0x4344b5-0x170,_0x338658-0x8b);}_0x26c9ec[_0x1284be(-0x1ec,-0x15e,-0x229,-0x18f)](_0x307044=>{function _0x2ca6ad(_0x160e1b,_0x42b5f7,_0x34a9f3,_0x3af881){return _0x2d96c6(_0x3af881-0x1f2,_0x42b5f7-0x3b,_0x160e1b,_0x3af881-0x1ee);}function _0x187bca(_0x49fc1,_0x488f6b,_0x415cf5,_0x48ab63){return _0x1284be(_0x48ab63-0x1cd,_0x488f6b-0xc3,_0x488f6b,_0x48ab63-0xcf);}if(_0xea2aba[_0x307044]){const _0x4514cc=document['getElement'+_0x187bca(-0xb3,-0x81,0x1,-0x65)](_0x187bca(-0x6c,0x66,0x40,-0x5)+_0x307044);_0x4514cc&&(_0x4514cc['value']=_0xea2aba[_0x307044],_0x5af633[_0x187bca(0x4b,0x57,-0x32,-0xd)]($,_0x4514cc)[_0x187bca(-0x8e,-0xf7,-0x26,-0x92)](_0x187bca(-0xe2,0x5,-0x29,-0x6e)));}});}
//# sourceMappingURL=http://localhost:8000/outfitPromptModify.js.map