(function(_0x43b229,_0x3a2108){function _0x4a4777(_0x9574d1,_0xeefaee,_0x511e17,_0x4642be){return _0x4f0d(_0x4642be-0xc5,_0x9574d1);}function _0x34e68d(_0x5e209e,_0xd4136a,_0x544c73,_0x2d68e1){return _0x4f0d(_0xd4136a- -0xae,_0x5e209e);}const _0x1f65c4=_0x43b229();while(!![]){try{const _0x164030=-parseInt(_0x4a4777(0x42b,0x466,0x412,0x3d0))/(-0x44c*0x1+-0x1*-0x1a53+0x2*-0xb03)*(parseInt(_0x34e68d(0xd7,0x15b,0xf7,0x115))/(-0x5*0x787+0x5e7*-0x1+0x2b8c))+-parseInt(_0x34e68d(0x214,0x1ac,0x216,0x1e0))/(-0x1*-0x1e2c+-0x24b+0xae*-0x29)*(-parseInt(_0x34e68d(0x198,0x166,0x142,0xf0))/(0x4*0x92f+-0x15ea+-0x1*0xece))+-parseInt(_0x4a4777(0x33b,0x3e3,0x2c3,0x34a))/(-0x1465+-0x164f+0x2ab9*0x1)+parseInt(_0x34e68d(0x152,0x1b1,0x1be,0x1fc))/(-0xe55+0x1c34+-0xdd9)*(-parseInt(_0x4a4777(0x3a4,0x393,0x33f,0x383))/(0x6e7+-0x15*-0x52+-0x2*0x6cd))+parseInt(_0x4a4777(0x295,0x305,0x232,0x2ab))/(-0xdfd*-0x2+-0x1a55+-0x19d)*(-parseInt(_0x34e68d(0x1de,0x174,0x1f8,0x1e4))/(0x4*-0x4fa+-0x1ee2+0x32d3))+-parseInt(_0x34e68d(0x141,0x142,0xfb,0xff))/(-0x1527+-0x1*0xe+0x93*0x25)+-parseInt(_0x34e68d(0x1b6,0x1fa,0x1b6,0x1c0))/(0x522*-0x4+-0x22b7*0x1+0x374a)*(-parseInt(_0x4a4777(0x3ab,0x314,0x3c2,0x362))/(-0x257*-0x1+0x2f*-0x11+0xd4));if(_0x164030===_0x3a2108)break;else _0x1f65c4['push'](_0x1f65c4['shift']());}catch(_0x4c3c5b){_0x1f65c4['push'](_0x1f65c4['shift']());}}}(_0x1eb0,-0x1a6*0xc64+0xd14d6+0x65b7*0x2e));const _0x22e096=(function(){const _0x3ccb0a={};_0x3ccb0a[_0x3eef66(0xbc,0xa3,0x6d,0xb3)]=function(_0x243eee,_0x151734){return _0x243eee+_0x151734;};function _0x14cd29(_0x4a620e,_0x2d28c0,_0x35f925,_0x4a9268){return _0x4f0d(_0x4a620e-0x343,_0x2d28c0);}_0x3ccb0a['QKCkr']=_0x14cd29(0x609,0x68a,0x622,0x573);function _0x3eef66(_0x133ee4,_0x44baa0,_0x5bdedc,_0x484362){return _0x4f0d(_0x484362- -0x1ec,_0x133ee4);}const _0x106ab6=_0x3ccb0a;let _0x2b69de=!![];return function(_0x37ecb6,_0x3b45b9){const _0xcf6aec=_0x2b69de?function(){function _0x313b5a(_0x4a38aa,_0x24d6da,_0x5d3b96,_0x113a3e){return _0x4f0d(_0x4a38aa- -0x59,_0x24d6da);}function _0x26b400(_0x3022c2,_0x2bb912,_0x458afb,_0xb3e382){return _0x4f0d(_0x3022c2-0x1df,_0xb3e382);}const _0x5abdf2={'EdoyV':function(_0x3dca3e,_0x536480){function _0x2160db(_0x7227fe,_0x1520b6,_0xd2f9e6,_0x5d082e){return _0x4f0d(_0x1520b6-0x47,_0x7227fe);}return _0x106ab6[_0x2160db(0x36a,0x2e6,0x2f8,0x2bd)](_0x3dca3e,_0x536480);}};if(_0x3b45b9){if(_0x26b400(0x4a5,0x46d,0x4f1,0x469)===_0x106ab6['QKCkr']){const _0x153708=_0x3b45b9['apply'](_0x37ecb6,arguments);return _0x3b45b9=null,_0x153708;}else{if(_0x15f59d&&_0x56948a[_0x313b5a(0x239,0x23e,0x1e0,0x2a3)])return _0x294ca7[_0x313b5a(0x239,0x26c,0x297,0x21f)]();return _0x5abdf2[_0x313b5a(0x260,0x1eb,0x26f,0x215)](_0x31336a[_0x26b400(0x3e7,0x3f1,0x400,0x416)]()['toString'](0xf89+-0x1f30+0xfcb),_0x5cef03['random']()[_0x26b400(0x3c3,0x369,0x37d,0x45c)](-0xc51+-0x249b+-0x5*-0x9d0)[_0x313b5a(0x1da,0x1ba,0x14a,0x16e)](0x1d*0x7a+-0x1211*-0x1+-0x1fe1));}}}:function(){};return _0x2b69de=![],_0xcf6aec;};}()),_0x2a5add=_0x22e096(this,function(){function _0x551482(_0x4cea74,_0x2d0542,_0x248865,_0x22980a){return _0x4f0d(_0x2d0542- -0x173,_0x4cea74);}const _0x30cab9={};function _0x5f2bca(_0x265c22,_0x14be28,_0x84778e,_0x4a0bd4){return _0x4f0d(_0x4a0bd4-0x2d2,_0x14be28);}_0x30cab9[_0x5f2bca(0x506,0x527,0x572,0x523)]=_0x5f2bca(0x58b,0x5a9,0x52b,0x55f)+'+$';const _0x1bf9ec=_0x30cab9;return _0x2a5add[_0x5f2bca(0x451,0x452,0x47a,0x4b6)]()[_0x5f2bca(0x52a,0x5c7,0x597,0x540)](_0x1bf9ec[_0x5f2bca(0x54e,0x526,0x592,0x523)])[_0x5f2bca(0x491,0x4c5,0x52e,0x4b6)]()[_0x551482(0x1e8,0x1a1,0x115,0x1c8)+'r'](_0x2a5add)['search'](_0x1bf9ec[_0x551482(0x4b,0xde,0x4b,0x113)]);});function _0x4f0d(_0xa50cb8,_0x3d551a){_0xa50cb8=_0xa50cb8-(-0x1*0x13ac+0x268e+-0x10fe);const _0x3e33d9=_0x1eb0();let _0xd48f08=_0x3e33d9[_0xa50cb8];if(_0x4f0d['DGDcrF']===undefined){var _0x5b8538=function(_0x1959a6){const _0x4a596a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x33d0dc='',_0x25eb94='',_0xb964ae=_0x33d0dc+_0x5b8538;for(let _0x23d287=0x19b2+0x155f*-0x1+-0x453,_0x50e326,_0x40acac,_0x54e6c6=0x1795+0x7ec*-0x2+-0x11b*0x7;_0x40acac=_0x1959a6['charAt'](_0x54e6c6++);~_0x40acac&&(_0x50e326=_0x23d287%(0x2*0x5f5+0x9f+-0x1*0xc85)?_0x50e326*(0x16ec+-0x18fd*0x1+0x251)+_0x40acac:_0x40acac,_0x23d287++%(0x1902+0xda0+-0x1*0x269e))?_0x33d0dc+=_0xb964ae['charCodeAt'](_0x54e6c6+(0x95*-0x2f+0xbd*0x25+0x5*0x4))-(-0x1*-0x7cf+0x1*0x14d9+0x1c9e*-0x1)!==-0x1030+0x7d*-0x38+-0xc7*-0x38?String['fromCharCode'](0x11a6+0x504+0x2b*-0x81&_0x50e326>>(-(0x1*-0x2119+-0x80f*0x1+-0x1495*-0x2)*_0x23d287&0xeb+0x1b2c+-0x1c11)):_0x23d287:0x2*-0x933+-0x1338+-0x3*-0xc8a){_0x40acac=_0x4a596a['indexOf'](_0x40acac);}for(let _0x55f769=-0x1*0xcac+0x4cf+-0xb*-0xb7,_0x3fbfe1=_0x33d0dc['length'];_0x55f769<_0x3fbfe1;_0x55f769++){_0x25eb94+='%'+('00'+_0x33d0dc['charCodeAt'](_0x55f769)['toString'](0x20ba*-0x1+0x1b*-0x87+0x2f07))['slice'](-(0x70b*0x2+0x319*0x3+-0x175f));}return decodeURIComponent(_0x25eb94);};_0x4f0d['aKAhgg']=_0x5b8538,_0x4f0d['iNLQpD']={},_0x4f0d['DGDcrF']=!![];}const _0xbe806c=_0x3e33d9[0x83*0x31+-0x6d+-0x4ee*0x5],_0x12fbc2=_0xa50cb8+_0xbe806c,_0x4e6b85=_0x4f0d['iNLQpD'][_0x12fbc2];if(!_0x4e6b85){const _0x53a453=function(_0x35383f){this['RqMFEu']=_0x35383f,this['IcUTzw']=[-0x1*-0x5e1+-0x13d*0x3+-0x229*0x1,-0x458+-0x22b4+0x682*0x6,0x1*0x26fa+-0x1*0x1b91+0xb69*-0x1],this['SqXmou']=function(){return'newState';},this['XthqXG']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['RnKvjr']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x53a453['prototype']['NPnBqL']=function(){const _0x4241f9=new RegExp(this['XthqXG']+this['RnKvjr']),_0x420308=_0x4241f9['test'](this['SqXmou']['toString']())?--this['IcUTzw'][-0x3df*0x2+0x61*0x36+-0xcb7]:--this['IcUTzw'][-0x18d*-0x4+0x13e6+-0xd0d*0x2];return this['pvonpg'](_0x420308);},_0x53a453['prototype']['pvonpg']=function(_0x47cbd4){if(!Boolean(~_0x47cbd4))return _0x47cbd4;return this['gdlsqN'](this['RqMFEu']);},_0x53a453['prototype']['gdlsqN']=function(_0x3384ab){for(let _0x1c52a2=-0x18*0x14b+-0x2590+0x4498,_0x32107e=this['IcUTzw']['length'];_0x1c52a2<_0x32107e;_0x1c52a2++){this['IcUTzw']['push'](Math['round'](Math['random']())),_0x32107e=this['IcUTzw']['length'];}return _0x3384ab(this['IcUTzw'][-0x2031+-0x945*-0x4+-0x8b*0x9]);},new _0x53a453(_0x4f0d)['NPnBqL'](),_0xd48f08=_0x4f0d['aKAhgg'](_0xd48f08),_0x4f0d['iNLQpD'][_0x12fbc2]=_0xd48f08;}else _0xd48f08=_0x4e6b85;return _0xd48f08;}_0x2a5add();function _0x4516be(_0x3a0662,_0x326095,_0xc79cce,_0x2ba801){return _0x4f0d(_0x326095-0xd7,_0xc79cce);}function _0x1eb0(){const _0xfaf76a=['E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','B3jwC2O','vwrtrLq','D2fYBMLUzW','we53r3C','iIdNMOtKU6xKUiVMLBdMJA46cGO','B3v0zML0xW','E3VKUiRKUiVMLOD9Fq','yxv0BW','Cuniu1O','koEPUIK','rffJy0O','BfrjBeq','DhDutwu','wxvhwwO','zu1zte4','CMvZzxq6','DuvJD0m','vwDZyvO','CLjiuxG','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','DuPgsMC','B3v0zML0ihbYBW','5y+c6icd5zU+54Mh','wMTwv0G','B0HKrxO','zNvSBejVzhK','Bg9N','uhnYAhC','CxzRrgK','s0fODLy','t0rjrLLFuKvtua','DM9jqNC','ve1ACKm','zKXPDNC','q2XtDwG','y2HHCL9TB2rPzG','Egn6weC','AxnbCNjHEq','EezNAhG','wNnstw0','tM1iwgS','uuvUB3a','Aw1Hz2vFDxjS','BMfTzuvo','z2fgBwi','rwjit1K','icdMLRa6ia','ChvZAa','CLjSrKq','5lIk5y2k6lQR','sejbyNi','D3DICge','tfn6sKq','vxzJthm','EuHJqKS','yLbPr1e','teXnioI/LowBNUE7K+AENos4UUEPUG','B1bkz1K','C3bSAxq','ChjVBxb0','DhLWzq','B0Xzr0G','EuTxsKq','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','vKzQs1O','ufjLAvG','ioINO+AEKowiSoEAHoACJEIJHEAvSoAnRJO','y29UDgvUDa','Ew5xExq','vuvtva','mtiZodC3m2TmzgTJzW','ieXmtsbVDxrWDq','uhbLAeC','C3HyB1i','vLLdzMe','twTUsvC','Aw5JBhvKzxm','Bxb0ig1VzgLMEq','yvbouKi','y29UC3rYDwn0BW','ievYCM9YoG','ien1CNjLBNqGCa','Dg9tDhjPBMC','Aefrr2y','ndG4ndi3mKnmENrQBG','Bxb0tw9KAwz5xq','tfnYv3K','r25KEKW','yMfZzty0','ue9ou0u','5BEY5y+w5RAi5PU05PAW','iow3SUABToAwSoACJEIJHEMIHoIUVIaI','uNvoA08','Cwrtwfq','nZm1mZa2mhHgrNnqsq','uhjMC24','ifvZzxiGCMvXDq','A2Hps2y','wvDjDNe','B2rPzNKGChjVBq','6iUX5PAh5zcn56EWoIa','zM9YrwfJAa','zw1PDa','ihjLCxvLC3qUlG','vevcANG','zMLSDgvY','6kkR5l2/55sO77YA','DxjS','CMvWBgfJzq','BMfTzuno','B3v0zML0uhjLCW','zxrZ','zgf0ytO','Cg1rA2i','r0XrENu','zw5LCG','Bxb0oG','l3bUzZTIyxnLnG','BM93','mK1XvwTsza','Cwrnruq','ANrbALi','EhvdAuy','DxbWzxjcB2r5qG','vK5Msge','E3VKUjBNLyZKUABOP6BLJ5f9Fq','BwfW','DxbWzxjcB2r5','BMfTzq','B2fPDhO','ngfiDw53sG','CMfUzg9T','AwzZqum','CwfgDeu','5OM+5lIn5yIW5OYh5A6A55Qe5PYn6kof6Ake6k6+','5lIk5y2k6lQR6iom6z2IoIa','6iUX5PAh5zcn56EW','Aw5KzxHpzG','v0HbzK4','tLHYz2S','q2PisMK','rvLdrfO','yM5YEuy','sgDhD3m','ovvgsxH3za','vvvdt2G','zgvIDwDNAw5NoG','Ce5vvuG','uxPAtg8','t2zpDMq','C3rYAw5N','ufjptvbux1jfuW','5PYn6kof5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','C3vJy2vZCW','BwvZC2fNzq','u2DbtLy','zxHLyW','5lIl5y2k6lQR','Ae9WzMy','y3DvCu8','t2nrDuG','C3vIC3rYAw5N','BfbrAeq','AhjnwvC','DhjPz2DLCG','5PYn6kof5O+q56s66k+n5l+U5Ps55AsX6lsLoG','5lIk5y2k6lQR6iom6z2I','wfj1s1q','AKfnq3y','zgf0ytPPBwfNzq','yxbWBhK','z2v0rwXLBwvUDa','vKT2sKW','yKvlwwK','wKPsyNu','uujht3m','y09tC2q','DhjPBq','ueLjCei','AejUrey','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','iezPBMfSihbYBW','zurLy3m','uvP3Axy','BwnmAge','wwHWv2C','z0j6BfC','5PYQ5zYOieXmtsdOVPpLH7RKUk0','DgfHyMW','E3VNLkJMIlFPNidMSyj9Fq','ifjLCxvLC3rPBG','C1HMAuq','B2jQzwn0','s0nwqMW','sePurKu','poACJEIJHt4k','C3rHCNrZv2L0Aa','vKH4rxG','vMjIyNO','AeTvC20','mJiYodGYnK5nuMjLyW','Aw1Hz2vZihrVia','vgDHBgu','w291DgzPDfbYBW','zgXoANi','mtiZnZjxv0H4yNm','ioACQUIVHUwiQ+EAHoACJEIJHEwTL+AUTsa','Burduxm','Eg9Jsxa','BertqLK','AxnuDNa','pc/MNi3OO4u+','CMvTB3zLtgLZDa','t1buquK','qxPcDfq','B3v0zML0CW','zgv0ywLS','Dezot0e','DgLTzw91De1Z','igLUzgv4','C2vHCMnO','sNLpEuW','uxL0uMC','6i635y+w5PYn6kof5l+U5Ps55O+q56s66k+n6lAf','teXnioIVT+AXGUwKSEI0Pq','BgvUz3rO','wvf5ruG','CMvWBgfJzufSBa','5lIl5y2k6lQR5PYn6kof','ruHJAMi','CMvZDwX0','rvnu','DwXOrvq','tMzwC1m','rKzmvu0','ywrK','5Rgc6lAf5PE2','q2zAvg8','sfHYr3O','zxjYB3i','Bfnry2m','5lIl5y2k6lQR6iom6z2I','5lIl5y2k6lQRoIa','ntaWmZqWzKXAEg1W','teXnx0niqvjFtq','Aw5MBW','CevfBva','q0nIrhG','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','ifjHDYbmte0GBW','rvrPCgK','kcGOlISPkYKRkq','Dgv4Da','ig91DgzPDcbTBW','ywnR','5Q2J5zYO5Ase55cg5PYn6kof5O+q56s66k+n5l+U','CMfUzg9Tvvvjra','q1rXwK4','5Qoa5Rwl5yIW5PYn6kof5Qch562+','tMzSz0S','vLbHuwW','zMPjz2S','s25iAvG','y3vVzwe','qNLjza','yufRtMm','DxrWDxqGzM9Yia','ndq0mtK0nZzcu0fmBu4','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','D3j3Cve','A01vEfe','EfrTDhe','zgf0yq','zNvSBejVzhLcyq','tw9su2u','zu9mvvu','EezID1C','t05trq','mtfizvvTr3G','ief0DgfJAgvK','sK1QuwK','5lIT5PAh5zcn56EW','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','t0rjrLLFr0vuxW','z0HfDKi','CKngqMm','zxrjza','BML1Bhe','vNvXsfu','zgLMEsbmte0GCG','DvfgvwK','ueDyreK','5PYn6kof5l+U5Ps5ieXmtsdOR7C','ueXJwvi','zxf1zxn0icHjra','rwrVEvy','5lIl5y2k6lQR6iom6z2IoIa','uvDpCgW','wfvVBKS','6k+35ywi6ycj5OUP5lIa5lIQ5PYn6kof6Ake6k6+','mZu0mMjYzMDqua','vxHir3q','icdML6C6ia','igrHDge6','vxfjuxa','CxjMrxi'];_0x1eb0=function(){return _0xfaf76a;};return _0x1eb0();}import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{loadOutfitPreset}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x4b5e3b,_0x1f1914,_0x34262f,_0x4b74bb){function _0x4a2823(_0x1a8371,_0x32f8ee,_0x1ef5aa,_0x2104c3){return _0x4f0d(_0x1a8371- -0xb,_0x32f8ee);}const _0x122cc2={'ZsRMm':_0x4a2823(0x21d,0x1c7,0x212,0x189),'oaitz':'gSeau','kMUxQ':function(_0xf5ca03,_0x3439f5){return _0xf5ca03===_0x3439f5;},'xocIp':_0x30556a(0x44e,0x487,0x4a4,0x47e),'ZkVWH':function(_0x42fb15,_0x2e045b){return _0x42fb15!==_0x2e045b;},'ClSuh':_0x30556a(0x489,0x497,0x46f,0x456),'rRkiO':function(_0x5339e5,_0x5a97aa,_0x2ff3ea,_0x229736,_0x325e46){return _0x5339e5(_0x5a97aa,_0x2ff3ea,_0x229736,_0x325e46);}};if(typeof _0x4b5e3b===_0x122cc2[_0x4a2823(0x2e1,0x2fb,0x316,0x2af)])return _0x34262f&&_0x4b5e3b[_0x4a2823(0x306,0x39f,0x350,0x30c)](_0x1f1914)&&(_0x4b74bb&&_0x4b74bb[_0x4a2823(0x272,0x262,0x256,0x226)](_0x1f1914)),_0x4b5e3b[_0x4a2823(0x26a,0x279,0x225,0x274)](_0x1f1914,_0x34262f);function _0x30556a(_0x34f1e1,_0x4dcf2d,_0x5c50db,_0x45205e){return _0x4f0d(_0x5c50db-0x252,_0x34f1e1);}if(Array[_0x30556a(0x4e2,0x544,0x53c,0x4f4)](_0x4b5e3b)){if(_0x122cc2[_0x30556a(0x4e6,0x4af,0x465,0x435)]!==_0x4a2823(0x20c,0x282,0x28d,0x215))return _0x4b5e3b[_0x4a2823(0x205,0x28b,0x1f2,0x187)](_0x12f277=>replacePlaceholder(_0x12f277,_0x1f1914,_0x34262f,_0x4b74bb));else _0x45ba58['outfits'][_0x30556a(0x531,0x521,0x546,0x5c8)](_0x368d6b);}if(_0x4b5e3b&&_0x122cc2[_0x4a2823(0x295,0x285,0x29e,0x235)](typeof _0x4b5e3b,_0x122cc2[_0x30556a(0x51f,0x4d7,0x4b4,0x51d)])){if(_0x122cc2[_0x4a2823(0x2d1,0x349,0x2c7,0x280)](_0x122cc2[_0x4a2823(0x2dc,0x2f8,0x349,0x297)],_0x122cc2[_0x4a2823(0x2dc,0x2e1,0x2f1,0x33e)]))_0x340722&&_0x2a170e[_0x4a2823(0x272,0x2b9,0x2bb,0x1f6)](_0x203939);else{const _0x14ca4f={};for(const _0x3bf8c0 in _0x4b5e3b){_0x14ca4f[_0x3bf8c0]=_0x122cc2['rRkiO'](replacePlaceholder,_0x4b5e3b[_0x3bf8c0],_0x1f1914,_0x34262f,_0x4b74bb);}return _0x14ca4f;}}return _0x4b5e3b;}function attachImagesToMessage(_0x2fcb33,_0x3ae4cd,_0x5caeff,_0x21efde=_0x4516be(0x429,0x3b2,0x363,0x36d)){const _0x395433={'niulq':function(_0x2a0a30,_0x344ff0){return _0x2a0a30!==_0x344ff0;},'nWpqH':function(_0x282dfc,_0x3e08a3){return _0x282dfc(_0x3e08a3);},'CjHJi':function(_0x3c53d7,_0x208848){return _0x3c53d7===_0x208848;},'cuoea':function(_0x422f97,_0x43ace0){return _0x422f97+_0x43ace0;},'jAMCv':_0x295188(0xba,0x37,-0xf,0x52),'yHcBK':_0x5751cc(0x4a,-0x47,-0x6,-0xc),'uQFUi':function(_0x264932,_0x1fadbc){return _0x264932>=_0x1fadbc;},'ETipi':_0x295188(-0xa7,-0x2f,-0x7f,0x52),'uEcwC':function(_0x3571b6,_0x300c3b){return _0x3571b6===_0x300c3b;},'VYCfa':'fangd'};if(!_0x5caeff||_0x5caeff[_0x295188(0x22,0x1c,0x9e,-0x45)]===-0x67*-0x5b+0x24d*0x3+-0x2b84||_0x3ae4cd<0x2*-0x24f+0xe8c+-0x9ee||_0x395433[_0x5751cc(-0xae,-0x5f,0x7,0x2f)](_0x3ae4cd,_0x2fcb33[_0x5751cc(-0xdc,-0xa0,-0x115,-0x11e)]))return _0x2fcb33;const _0x5dbbeb=[..._0x2fcb33],_0x1a72b7=_0x5dbbeb[_0x3ae4cd],_0x5eb715=[];function _0x5751cc(_0x423e43,_0x253d18,_0x5ae0b0,_0x5442ce){return _0x4516be(_0x423e43-0x168,_0x253d18- -0x3ea,_0x5442ce,_0x5442ce-0x16);}if(typeof _0x1a72b7[_0x295188(0xf4,0xb1,0xc3,0x72)]===_0x395433[_0x5751cc(-0xdd,-0x87,-0x99,-0x5a)]){if(_0x295188(0x3c,0x3e,-0x11,-0x22)===_0x5751cc(-0xdb,-0x7e,-0x34,-0x98)){const _0x54c9cc={};_0x54c9cc[_0x295188(0x2e,0xaa,0x121,0x62)]=_0x395433['jAMCv'],_0x54c9cc[_0x5751cc(-0xe4,-0x85,-0x9e,0xd)]=_0x1a72b7[_0x295188(0x30,0xb1,0xba,0x85)],_0x5eb715[_0x295188(0xa5,0x9d,0xb1,0x109)](_0x54c9cc);}else{if(_0x395433[_0x5751cc(-0x92,-0x62,-0xf3,-0x81)](_0x53eb74['id'],_0x537edb))return;_0x5577f4[_0x5751cc(-0x2e,-0xad,-0x12d,-0x35)+'ener'](_0x2d0968[_0x5751cc(-0xb7,-0x8d,-0x1b,-0xe)+_0x295188(0xb9,0x8c,0x7a,0xaf)+'ONSE'],_0x3230e1),_0x17ecc6[_0x5751cc(-0x176,-0xe8,-0xad,-0x159)]?_0x1b9c10(_0xf3da78[_0x295188(-0x2f,0x21,0x86,0x4f)]):_0x395433['nWpqH'](_0x1d8341,new _0x3ea9a4(_0x2e79f6[_0x295188(0x31,0x21,0x1,0x2b)]||_0x295188(0x80,0x1b,0x2a,0x2e)));}}else Array[_0x295188(0x10e,0x93,0x4c,0x119)](_0x1a72b7[_0x5751cc(-0x3b,-0xb,-0x95,-0x23)])&&_0x5eb715[_0x295188(0x5d,0x9d,0xeb,0x99)](..._0x1a72b7['content']);if(_0x5caeff['length']>0x1cd+-0x3*0xaa9+0x1e2e){if(_0x395433[_0x295188(0x8,0x7e,0x70,0x5c)](_0x395433[_0x5751cc(0x25,-0x4,-0x52,0x5f)],'OzRrW'))_0x96766c[_0x5751cc(-0x70,-0x92,-0xf2,-0x5)](_0x5751cc(-0x4b,-0xb6,-0x5e,-0xc3)+_0x5751cc(-0x15f,-0x12c,-0x1ae,-0x1b2)+'\x20Error:',_0x99e5a),_0x445384[_0x295188(-0x3a,0x2a,-0x8,0x6c)](_0x295188(0x61,-0x20,0x72,0x4e)+'\x20'+_0x1b698c[_0x5751cc(-0xe6,-0xe7,-0x113,-0x5f)]);else{const _0x9a1f5b={};_0x9a1f5b['type']=_0x395433[_0x5751cc(-0x90,-0xd9,-0x16c,-0xa1)],_0x9a1f5b[_0x295188(-0x55,0x37,-0xc,0xb6)]=_0x5751cc(-0x118,-0x89,-0x120,-0x7e)+_0x5caeff[_0x295188(-0x2b,0x1c,-0x3f,0x7c)]+'张'+_0x21efde+']',_0x5eb715[_0x295188(0xd7,0x9d,0x2c,0x27)](_0x9a1f5b);}}_0x5caeff[_0x5751cc(-0xd5,-0x11c,-0x162,-0xea)]((_0x2fc3d3,_0x2678c4)=>{const _0xcd8c5e=_0x395433[_0x5cdc5a(0x4dd,0x4a3,0x4b1,0x4d5)](typeof _0x2fc3d3,'string')?_0x2fc3d3:_0x2fc3d3[_0x5cdc5a(0x421,0x46f,0x4d7,0x4b5)],_0x3f7326=_0x395433[_0x5cdc5a(0x4f6,0x4a3,0x432,0x467)](typeof _0x2fc3d3,_0x524411(0xbe,0x147,0x16f,0x175))&&_0x2fc3d3['name']?_0x2fc3d3[_0x524411(0x107,0x107,0xa4,0xc8)]:''+_0x21efde+_0x395433[_0x5cdc5a(0x529,0x51e,0x4dd,0x4b0)](_0x2678c4,0x149b*0x1+0xabb+-0x1f55),_0x1e7a66={};function _0x524411(_0x5d6959,_0x43a3dd,_0x1bbdcd,_0x590271){return _0x295188(_0x590271,_0x43a3dd-0x14c,_0x1bbdcd-0x10d,_0x590271-0x145);}_0x1e7a66[_0x5cdc5a(0x582,0x586,0x56d,0x5b7)]=_0x395433[_0x524411(0x134,0x12f,0x108,0x134)],_0x1e7a66['text']='['+_0x3f7326+']',_0x5eb715['push'](_0x1e7a66);let _0x6768b6=_0xcd8c5e;!_0xcd8c5e[_0x524411(0x1ac,0x14b,0x11e,0x117)](_0x5cdc5a(0x3f0,0x487,0x502,0x4a3))&&(_0x6768b6='data:image'+_0x5cdc5a(0x47b,0x48c,0x4b0,0x45b)+'4,'+_0xcd8c5e);const _0x4ae087={};function _0x5cdc5a(_0x5eb966,_0x367d47,_0x256a89,_0x2863ca){return _0x295188(_0x256a89,_0x367d47-0x4dc,_0x256a89-0x20,_0x2863ca-0x13d);}_0x4ae087[_0x524411(0xaf,0xf2,0x14e,0x94)]=_0x6768b6,_0x4ae087[_0x5cdc5a(0x527,0x4ef,0x508,0x46a)]=_0x395433[_0x5cdc5a(0x52e,0x580,0x5fd,0x5f7)];const _0x3e88d9={};_0x3e88d9['type']=_0x524411(0x27b,0x1e4,0x1ac,0x211),_0x3e88d9['image_url']=_0x4ae087,_0x5eb715['push'](_0x3e88d9);});const _0x371800={..._0x1a72b7};function _0x295188(_0xb78154,_0x2b34d0,_0x27291c,_0x2890ca){return _0x4516be(_0xb78154-0x9c,_0x2b34d0- -0x32e,_0xb78154,_0x2890ca-0xc1);}return _0x371800[_0x295188(0x5e,0xb1,0xa6,0x12b)]=_0x5eb715,_0x5dbbeb[_0x3ae4cd]=_0x371800,_0x5dbbeb;}function findMessageIndexWithPlaceholder(_0x26dc45,_0x1e2553){const _0x56ad1e={};_0x56ad1e[_0x5278a4(0x3aa,0x3cc,0x429,0x437)]=function(_0x463405,_0x55117f){return _0x463405<_0x55117f;},_0x56ad1e[_0x5278a4(0x3d6,0x4b4,0x490,0x43c)]=function(_0x3e6cca,_0x4ea1fc){return _0x3e6cca!==_0x4ea1fc;},_0x56ad1e[_0x5278a4(0x409,0x4be,0x4c8,0x46e)]=_0x30c68f(0x6eb,0x66b,0x6eb,0x6db),_0x56ad1e[_0x5278a4(0x385,0x39e,0x40a,0x3f8)]=function(_0x4a1b50,_0x389958){return _0x4a1b50===_0x389958;},_0x56ad1e[_0x30c68f(0x5ff,0x5a5,0x523,0x5fd)]=_0x30c68f(0x578,0x5c2,0x558,0x587),_0x56ad1e['gBzlW']=_0x5278a4(0x48a,0x3b4,0x3a6,0x40a),_0x56ad1e[_0x5278a4(0x339,0x37a,0x41b,0x3c8)]='WzAfs',_0x56ad1e[_0x30c68f(0x5fb,0x687,0x601,0x707)]=_0x5278a4(0x36f,0x3a9,0x3cc,0x3f3);const _0x553a7d=_0x56ad1e;for(let _0x2b3ccc=0x1c28+-0x1855+0x59*-0xb;_0x553a7d[_0x5278a4(0x3fa,0x469,0x456,0x437)](_0x2b3ccc,_0x26dc45[_0x30c68f(0x656,0x60d,0x625,0x65f)]);_0x2b3ccc++){if(_0x553a7d['rRHQx'](_0x553a7d[_0x30c68f(0x6f0,0x6a3,0x6b2,0x6d3)],_0x553a7d[_0x30c68f(0x6c1,0x6a3,0x6f8,0x6d7)]))return _0x23853c['randomUUID']();else{const _0x5a6e39=_0x26dc45[_0x2b3ccc];if(_0x553a7d[_0x5278a4(0x3bf,0x422,0x38a,0x3f8)](typeof _0x5a6e39[_0x5278a4(0x446,0x4bf,0x40c,0x46d)],_0x553a7d[_0x5278a4(0x393,0x349,0x358,0x370)])&&_0x5a6e39[_0x30c68f(0x6f4,0x6a2,0x69a,0x73a)][_0x30c68f(0x636,0x6ab,0x6a4,0x687)](_0x1e2553)){if(_0x553a7d[_0x5278a4(0x46a,0x453,0x482,0x3f8)](_0x553a7d[_0x30c68f(0x5c4,0x5e6,0x5b8,0x5bc)],_0x553a7d[_0x5278a4(0x457,0x3d3,0x3b0,0x3c8)])){if(_0xe4cf9f){const _0x289095=_0x4688fb[_0x5278a4(0x400,0x3d8,0x417,0x3a1)](_0x4c21f2,arguments);return _0x4e1b2d=null,_0x289095;}}else return _0x2b3ccc;}else{if(Array['isArray'](_0x5a6e39[_0x30c68f(0x641,0x6a2,0x645,0x6fc)]))for(const _0x9a8d99 of _0x5a6e39[_0x5278a4(0x4a6,0x44a,0x4da,0x46d)]){if(_0x9a8d99[_0x30c68f(0x6b9,0x69b,0x70d,0x65b)]===_0x553a7d[_0x5278a4(0x40a,0x477,0x3f4,0x452)]&&_0x9a8d99[_0x30c68f(0x638,0x628,0x5f9,0x6c0)][_0x5278a4(0x439,0x3f6,0x4d5,0x476)](_0x1e2553))return _0x2b3ccc;}}}}function _0x5278a4(_0x31df6d,_0x4bd49b,_0x3c948f,_0x136ba5){return _0x4516be(_0x31df6d-0x6e,_0x136ba5-0x8e,_0x3c948f,_0x136ba5-0x76);}function _0x30c68f(_0x22d1b6,_0x2e4eb6,_0x1d859d,_0x553e04){return _0x4516be(_0x22d1b6-0xce,_0x2e4eb6-0x2c3,_0x1d859d,_0x553e04-0x10a);}return-(0xb78+0x16aa+-0x2221);}function generateRequestId(){const _0x2e941e={'pmQkb':function(_0x41002e,_0x28572b,_0x2a0626,_0x3790dd,_0x1322f5){return _0x41002e(_0x28572b,_0x2a0626,_0x3790dd,_0x1322f5);},'qdSXT':function(_0x309d07,_0x3855e3){return _0x309d07===_0x3855e3;},'OcQuH':_0x45d6c9(0x22f,0x1d4,0x24c,0x1cd),'PBbLG':function(_0x57cc9e,_0x4cf103){return _0x57cc9e+_0x4cf103;}};function _0x45d6c9(_0x1ba8f2,_0x2ca763,_0x59d672,_0x5839dc){return _0x4516be(_0x1ba8f2-0x15a,_0x5839dc- -0x1a5,_0x2ca763,_0x5839dc-0xa6);}if(crypto&&crypto[_0x45d6c9(0x13d,0x19b,0x20b,0x1c4)]){if(_0x2e941e[_0x45d6c9(0xd5,0x16b,0xa2,0x121)]('aAkNc',_0x2e941e[_0x570baf(0x170,0x16e,0x1a0,0x206)]))return crypto[_0x45d6c9(0x205,0x1c3,0x233,0x1c4)]();else _0xfea59d[_0x5d266e]=_0x2e941e[_0x570baf(0xa9,0x13f,0x1cd,0x1d5)](_0x48095f,_0x26516c[_0x37425a],_0x47fa13,_0x309e68,_0x149033);}function _0x570baf(_0xea07dd,_0x5c9faf,_0x353c1b,_0x3cbe71){return _0x4516be(_0xea07dd-0xfc,_0x5c9faf- -0x19b,_0xea07dd,_0x3cbe71-0x102);}return _0x2e941e['PBbLG'](Date[_0x45d6c9(0x1ac,0xad,0x1d0,0x13a)]()['toString'](-0x1270+0x1*0xb47+-0x7*-0x10b),Math[_0x570baf(0x1e6,0x151,0x19a,0x134)]()[_0x570baf(0x168,0x120,0x9a,0x9c)](-0x2*-0x101b+-0xb5*0x36+0x61c)['substring'](0x10a5+0x996*-0x1+-0x70d));}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){const _0x179cd7={'QzZLo':function(_0x133ad3,_0x3f782f){return _0x133ad3!==_0x3f782f;},'oPJgY':'stNiE','KnHiX':'ixjAG','WHAfN':function(_0x44d7f8,_0x261fa9){return _0x44d7f8(_0x261fa9);},'VuqHU':_0x1fce2f(-0x68,-0xde,-0x96,-0xf6),'JyOyL':function(_0x1d4f94,_0x487d2a){return _0x1d4f94(_0x487d2a);},'VNfHa':function(_0x5582c9){return _0x5582c9();},'hrMYW':function(_0x148c94,_0xc8b4e2,_0x3e1203){return _0x148c94(_0xc8b4e2,_0x3e1203);}};function _0x1fce2f(_0x405b26,_0x3fb091,_0x576f63,_0x467bd9){return _0x4516be(_0x405b26-0x199,_0x576f63- -0x453,_0x405b26,_0x467bd9-0x70);}return new Promise((_0x1fe312,_0x4928d1)=>{const _0x161a77={'SghWt':function(_0x15d43e,_0x1567e0){return _0x15d43e!==_0x1567e0;},'SgANV':_0x179cd7[_0x45f458(0x261,0x2e2,0x208,0x29a)],'qvkDi':function(_0x2cf29b,_0x2b7c66){function _0x52f5da(_0x77a631,_0x1600e9,_0x263604,_0x132309){return _0x45f458(_0x77a631-0x14,_0x1600e9,_0x263604-0x1cf,_0x132309-0x1fe);}return _0x179cd7[_0x52f5da(0x3ea,0x401,0x448,0x455)](_0x2cf29b,_0x2b7c66);}},_0xe308c3=_0x179cd7[_0x45f458(0x20b,0x1bc,0x220,0x1f6)](generateRequestId);console['log'](_0x45f458(0x2d7,0x2b0,0x210,0x245)+'mptModify]'+_0x2a3f6d(0xc6,0x1c,0x50,0x1d)+'g\x20outfit\x20m'+_0x2a3f6d(0x67,0x6c,-0xb,0x74)+'pt\x20(ID:\x20'+_0xe308c3+')');const _0x243601=_0x2dc074=>{function _0x3cbf6f(_0x2e29bf,_0x4ec1f5,_0x3ecc3e,_0x24064c){return _0x45f458(_0x2e29bf-0x3d,_0x4ec1f5,_0x3ecc3e-0xbe,_0x24064c-0x3e);}function _0x156893(_0x202d85,_0x4ec820,_0x41fbe5,_0x4fcc94){return _0x45f458(_0x202d85-0x170,_0x202d85,_0x41fbe5-0x5a,_0x4ec820- -0x2e5);}if(_0x179cd7[_0x3cbf6f(0x1bb,0x279,0x212,0x24c)](_0x179cd7[_0x156893(-0x18,0x1,0x84,0x96)],_0x179cd7[_0x3cbf6f(0x288,0x329,0x24c,0x2be)])){if(_0x179cd7[_0x3cbf6f(0x1df,0x286,0x274,0x24c)](_0x2dc074['id'],_0xe308c3))return;eventSource[_0x3cbf6f(0x308,0x277,0x21b,0x28c)+_0x156893(-0x180,-0xf8,-0xfd,-0x101)](eventNames[_0x3cbf6f(0x285,0x336,0x2d9,0x2ac)+_0x3cbf6f(0x328,0x331,0x293,0x2d3)+_0x156893(-0x6e,-0xd4,-0xe3,-0xc9)+_0x3cbf6f(0x27e,0x239,0x1fa,0x211)],_0x243601),_0x179cd7[_0x3cbf6f(0x23e,0x1bb,0x1ba,0x242)](_0x1fe312,_0x2dc074[_0x156893(-0x27,0x3,0x43,-0x3)]);}else _0x50acc6[_0x3cbf6f(0x32b,0x36f,0x365,0x305)](_0x156893(-0x1d,-0xa0,-0x7,-0x83)+'mptModify]'+'\x20未识别的服装字段\x20'+'\x22'+_0x410931+'\x22');};eventSource['on'](eventNames[_0x2a3f6d(0xb7,0x35,0x86,0xef)+_0x2a3f6d(0xad,0x8f,0xad,0x64)+_0x45f458(0x1fd,0x1ca,0x207,0x211)+'PONSE'],_0x243601);function _0x2a3f6d(_0x488320,_0x4b116f,_0x4d2b92,_0x14fddd){return _0x1fce2f(_0x488320,_0x4b116f-0x99,_0x4d2b92-0x17c,_0x14fddd-0x8f);}function _0x45f458(_0x28fd18,_0x53a67d,_0x493ca5,_0x2c21cd){return _0x1fce2f(_0x53a67d,_0x53a67d-0x18f,_0x2c21cd-0x364,_0x2c21cd-0x126);}const _0x4f7664={};_0x4f7664['id']=_0xe308c3,eventSource[_0x45f458(0x17d,0x155,0x22b,0x1e0)](eventNames[_0x45f458(0x1d7,0x250,0x2f7,0x26e)+_0x45f458(0x20b,0x326,0x287,0x295)+'PROMPT_REQ'+_0x2a3f6d(0xcf,0x101,0x10a,0x19a)],_0x4f7664),_0x179cd7[_0x45f458(0x1da,0x29f,0x1d8,0x21d)](setTimeout,()=>{function _0x363d30(_0x142642,_0x76259e,_0x53bf95,_0x474d56){return _0x2a3f6d(_0x142642,_0x76259e-0x11b,_0x76259e-0x318,_0x474d56-0x3c);}function _0x507530(_0x5f499b,_0x4e7425,_0x10d8a4,_0x2d6a4e){return _0x45f458(_0x5f499b-0x9b,_0x5f499b,_0x10d8a4-0xbd,_0x10d8a4- -0x1e8);}_0x161a77['SghWt'](_0x507530(0xe5,0xc2,0xe6,0x93),_0x161a77[_0x363d30(0x35c,0x345,0x311,0x364)])?_0x3955d8[_0x8be02b]=_0x470fad[_0x3c7477]:(eventSource[_0x363d30(0x397,0x37e,0x3f5,0x39f)+_0x507530(0x54,0x7a,0x5,-0x2b)](eventNames[_0x363d30(0x3ce,0x39e,0x3ff,0x35b)+'ODIFY_GET_'+_0x507530(-0x3d,-0x21,0x29,-0x2d)+'PONSE'],_0x243601),_0x161a77[_0x363d30(0x473,0x3f9,0x3e6,0x48b)](_0x4928d1,new Error(_0x363d30(0x3ae,0x389,0x35b,0x32d)+'时')));},-0x1*-0x3aba+0x232f+-0x2e3*0x13);});}export function LLM_OUTFIT_MODIFY(_0x3dfa9a,_0x1449b7={}){function _0x56568b(_0x577f9e,_0x3d806b,_0x55d881,_0x5d822f){return _0x4516be(_0x577f9e-0x35,_0x55d881- -0x2cb,_0x3d806b,_0x5d822f-0x7f);}const _0x5d3521={'dlNjr':_0x56568b(0x166,0x6f,0xce,0x131),'gaFmb':function(_0x24e2a3,_0x5d2f34){return _0x24e2a3(_0x5d2f34);},'EYCDZ':_0x56568b(0x101,0x37,0xc3,0x51),'HBAbr':_0x56568b(-0x5,0x1c,0x7e,0x17),'EbHOY':function(_0x501959,_0x7530f0){return _0x501959(_0x7530f0);},'ifsAC':_0x56568b(0x10d,0x71,0xc2,0x79)+_0x334323(-0x125,-0x32,-0x5b,-0xa9),'XNwGw':function(_0xc322a1){return _0xc322a1();}};function _0x334323(_0x5c6ab3,_0x3c56d9,_0x4bcb28,_0x1f6d05){return _0x4516be(_0x5c6ab3-0x36,_0x1f6d05- -0x3fe,_0x4bcb28,_0x1f6d05-0x10a);}return new Promise((_0x40b361,_0x3bd46c)=>{const _0x10ede0={'oHdEz':function(_0x6b5e8e,_0x15ce04){return _0x6b5e8e(_0x15ce04);},'QytRg':function(_0x5332fc,_0x460d28){return _0x5332fc===_0x460d28;},'HWdUt':_0x5d3521[_0x104e54(0x24f,0x298,0x219,0x187)],'UgsaZ':function(_0x5bc127,_0x4d22ad){function _0x5a3d6b(_0x5328c9,_0x48760e,_0x28502f,_0x31e5bf){return _0x104e54(_0x5328c9-0x135,_0x31e5bf,_0x48760e-0x256,_0x31e5bf-0x32);}return _0x5d3521[_0x5a3d6b(0x54d,0x502,0x4ec,0x574)](_0x5bc127,_0x4d22ad);},'rCFBc':_0x5d3521[_0x104e54(0x1d3,0x14c,0x1da,0x1c2)],'cOSsd':_0x5d3521[_0x55ddb6(0x5e9,0x60a,0x663,0x6a9)],'RHywk':function(_0x33c681,_0x4a5e9c){function _0x5f4b5f(_0x545dc3,_0x2a86d3,_0xde255a,_0x1efe0b){return _0x104e54(_0x545dc3-0xff,_0x1efe0b,_0xde255a- -0x17c,_0x1efe0b-0x161);}return _0x5d3521[_0x5f4b5f(0x190,0xd6,0x131,0x140)](_0x33c681,_0x4a5e9c);},'lSQcc':_0x5d3521[_0x104e54(0x1b1,0x170,0x1d1,0x259)]};function _0x55ddb6(_0x2d6067,_0x1727e6,_0x2a486f,_0x233fd8){return _0x334323(_0x2d6067-0xd5,_0x1727e6-0x27,_0x233fd8,_0x2a486f-0x693);}const _0x2eae8e=_0x5d3521[_0x104e54(0x2b6,0x2e8,0x283,0x23e)](generateRequestId),_0x4b813b=_0x1449b7['timeoutMs']||0x9a7e+-0x610d*-0x1+-0x112b;console[_0x55ddb6(0x675,0x620,0x64b,0x5d6)](_0x104e54(0x1a0,0x203,0x218,0x18b)+_0x55ddb6(0x528,0x574,0x553,0x4bc)+'\x20Executing'+_0x104e54(0x2dc,0x1b9,0x24a,0x262)+_0x55ddb6(0x5d3,0x6b6,0x61f,0x638)+_0x104e54(0x21d,0x275,0x273,0x277)+':\x20'+_0x2eae8e+')');const _0x412004=_0x146fca=>{function _0x17dea4(_0x28b820,_0x5485b0,_0x2107c6,_0x4165d7){return _0x104e54(_0x28b820-0x31,_0x4165d7,_0x5485b0- -0x302,_0x4165d7-0xe1);}function _0x3c62ff(_0x2b10d6,_0x4068a6,_0x3f962d,_0xf2cd97){return _0x55ddb6(_0x2b10d6-0x142,_0x4068a6-0x1e1,_0x2b10d6- -0x122,_0xf2cd97);}const _0x5cffe2={'hAQGf':function(_0x49d591,_0x44c133){function _0x30efab(_0x353bf8,_0x425058,_0x3297ea,_0x455b48){return _0x4f0d(_0x425058-0x21e,_0x3297ea);}return _0x10ede0[_0x30efab(0x4ee,0x4fb,0x57a,0x4d8)](_0x49d591,_0x44c133);}};if(_0x10ede0[_0x3c62ff(0x4ba,0x52b,0x43e,0x49b)](_0x3c62ff(0x50c,0x47f,0x477,0x4c7),_0x10ede0['HWdUt'])){if(_0x146fca['id']!==_0x2eae8e)return;eventSource[_0x3c62ff(0x4b0,0x53c,0x4a5,0x45a)+_0x17dea4(-0xed,-0x142,-0x1dc,-0x15f)](eventNames[_0x3c62ff(0x4d0,0x4ae,0x453,0x4f6)+_0x17dea4(-0x77,-0x64,-0xf3,-0x2c)+'ONSE'],_0x412004),_0x146fca[_0x3c62ff(0x475,0x440,0x406,0x4f3)]?_0x10ede0[_0x17dea4(-0xf5,-0x71,-0x77,-0x46)](_0x40b361,_0x146fca[_0x3c62ff(0x4c2,0x429,0x49f,0x438)]):_0x10ede0[_0x17dea4(-0x26,-0x98,-0x86,-0x112)]==='khMNq'?_0x5cffe2[_0x17dea4(-0x134,-0x162,-0x1e2,-0xe3)](_0x996cd2,_0x5b5dfa[_0x17dea4(-0x14c,-0xcf,-0x45,-0x68)]):_0x10ede0[_0x3c62ff(0x527,0x4a8,0x58a,0x5ae)](_0x3bd46c,new Error(_0x146fca['result']||_0x10ede0[_0x17dea4(-0x19d,-0x105,-0xb5,-0xfc)]));}else _0x2638d2[_0x248e9[_0x80a35b]]=_0x4cad14;};eventSource['on'](eventNames[_0x104e54(0x20c,0x207,0x241,0x285)+'ODIFY_RESP'+_0x104e54(0x29e,0x24b,0x262,0x28f)],_0x412004);const _0x4c4b32={};_0x4c4b32[_0x104e54(0x325,0x2c2,0x2bb,0x261)]=_0x3dfa9a,_0x4c4b32['id']=_0x2eae8e,eventSource['emit'](eventNames[_0x55ddb6(0x64b,0x5b3,0x5f2,0x663)+'ODIFY_REQU'+_0x55ddb6(0x5d2,0x55e,0x5e5,0x63f)],_0x4c4b32);function _0x104e54(_0x408842,_0x3f7602,_0x7b34fc,_0xb13dda){return _0x334323(_0x408842-0x50,_0x3f7602-0x1dc,_0x3f7602,_0x7b34fc-0x2e2);}setTimeout(()=>{eventSource[_0xac9785(0x440,0x4c1,0x514,0x428)+'ener'](eventNames[_0xac9785(0x4ec,0x4e1,0x503,0x538)+_0xac9785(0x550,0x53e,0x593,0x54e)+_0xac9785(0x4ce,0x502,0x4c6,0x523)],_0x412004);function _0x3abee2(_0x152ce1,_0x1ce68b,_0x3b385c,_0x106c10){return _0x104e54(_0x152ce1-0x6e,_0x1ce68b,_0x152ce1- -0x2b7,_0x106c10-0xd4);}function _0xac9785(_0x58c059,_0x118485,_0x58c970,_0x2f97b4){return _0x55ddb6(_0x58c059-0x18b,_0x118485-0x73,_0x118485- -0x111,_0x58c970);}_0x10ede0['RHywk'](_0x3bd46c,new Error(_0x10ede0[_0xac9785(0x53f,0x4dd,0x4a6,0x523)]));},_0x4b813b);});}function preprocessTagContent(_0x3f8145){let _0x16a483=_0x3f8145[_0x48ff8f(0x3b2,0x37f,0x329,0x3f7)](/:/g,':')[_0x48ff8f(0x34a,0x37f,0x388,0x31d)](/\(/g,'（')[_0x4f6f47(0x38a,0x384,0x3e8,0x314)](/\)/g,'）')['replace'](/,/g,',');function _0x4f6f47(_0x21bce8,_0x594316,_0x1984c3,_0x41fa37){return _0x4516be(_0x21bce8-0x1a4,_0x594316-0xaf,_0x21bce8,_0x41fa37-0x84);}function _0x48ff8f(_0x1db9dc,_0x52a767,_0x187c49,_0x360339){return _0x4516be(_0x1db9dc-0xfd,_0x52a767-0xaa,_0x1db9dc,_0x360339-0x12a);}return _0x16a483;}function parseOutfitData(_0x29698f){const _0x687004={};_0x687004[_0x3b2418(-0x7e,-0xf,-0x6d,-0xf5)]='(((.+)+)+)'+'+$',_0x687004['QZwiv']=_0x48ecf6(0x9,-0xa7,-0x50,-0x3e),_0x687004['eMVyt']='upperBody',_0x687004['pEEmP']=_0x48ecf6(-0x1c,-0x5e,-0x62,-0x99),_0x687004[_0x48ecf6(-0xd0,-0x116,-0xc5,-0x14a)]=function(_0x216d8e,_0x3e6a26){return _0x216d8e===_0x3e6a26;},_0x687004[_0x3b2418(-0xa4,-0xa3,-0x119,-0x17e)]=function(_0x4f19e6,_0x511955){return _0x4f19e6+_0x511955;},_0x687004[_0x48ecf6(-0x17a,-0xd2,-0xfc,-0x138)]=function(_0x2fb7db,_0x457c08){return _0x2fb7db&&_0x457c08;},_0x687004[_0x48ecf6(-0x6b,-0x82,-0x100,-0x120)]=function(_0xa3c8d6,_0x3cd753){return _0xa3c8d6!==_0x3cd753;},_0x687004['QWOpl']=_0x48ecf6(-0x155,-0x1e0,-0x14c,-0x196),_0x687004[_0x48ecf6(-0x106,-0x1bf,-0x152,-0x1ab)]='mDCQs',_0x687004[_0x3b2418(-0xc7,-0x129,-0x15d,-0x10f)]=_0x48ecf6(-0x6f,-0x141,-0xe3,-0x137)+_0x48ecf6(-0x105,-0xfe,-0x159,-0xc0)+_0x3b2418(-0x85,-0x73,-0x76,0x22);const _0x18e9d0=_0x687004,_0x37196c=_0x29698f[_0x48ecf6(0x18,-0x8c,-0x41,0x13)]('\x0a')[_0x48ecf6(-0xe3,-0x168,-0x130,-0x9b)](_0x1044ab=>_0x1044ab[_0x48ecf6(-0x6a,-0x11a,-0xfd,-0xeb)]())[_0x48ecf6(-0xdb,-0xd5,-0x145,-0xfc)](_0x29e25f=>_0x29e25f),_0x377e54={};_0x377e54['nameCN']='',_0x377e54['nameEN']='',_0x377e54['upperBody']='';function _0x3b2418(_0x10a265,_0x119d1f,_0x2317a6,_0xa9dcd2){return _0x4516be(_0x10a265-0x1c5,_0x2317a6- -0x454,_0x10a265,_0xa9dcd2-0xd1);}_0x377e54[_0x3b2418(-0x1bc,-0x184,-0x170,-0x102)+_0x48ecf6(-0xe7,-0x77,-0xb0,-0x9b)]='',_0x377e54[_0x3b2418(-0xb9,-0xb,-0x9f,-0x99)]='',_0x377e54[_0x48ecf6(-0xce,-0x3a,-0x9d,-0xd2)+'ck']='';const _0x2a2f55=_0x377e54,_0x2968e6={};_0x2968e6[_0x48ecf6(-0x89,-0xaa,-0x95,-0x47)]='nameCN',_0x2968e6[_0x3b2418(-0x1f0,-0x18b,-0x163,-0xe2)]=_0x18e9d0[_0x48ecf6(-0x17c,-0x67,-0xf7,-0xa5)],_0x2968e6[_0x3b2418(-0x7c,-0xc9,-0x87,-0x118)]=_0x18e9d0['eMVyt'],_0x2968e6[_0x48ecf6(-0x128,-0x85,-0x108,-0x142)]='upperBodyB'+_0x3b2418(-0x179,-0x8c,-0xed,-0xa7),_0x2968e6[_0x3b2418(-0xc4,-0x187,-0x14e,-0x14f)]=_0x3b2418(-0x109,-0x45,-0x9f,-0x99),_0x2968e6[_0x3b2418(-0x194,-0x192,-0x107,-0xb8)]=_0x18e9d0[_0x48ecf6(-0x6f,-0xf2,-0xb8,-0x141)],_0x2968e6[_0x48ecf6(-0x132,-0x24,-0xbd,-0xe7)]=_0x3b2418(-0x82,-0x83,-0xda,-0xfa)+'ck';const _0x43faa2=_0x2968e6;for(const _0x4a0251 of _0x37196c){const _0x1f05b1=_0x4a0251[_0x48ecf6(-0xa0,-0x195,-0x125,-0x18e)](':');if(_0x18e9d0['NfVsS'](_0x1f05b1,-(0x19d2*-0x1+-0x689*0x3+0x48b*0xa)))continue;const _0x3c651f=_0x4a0251[_0x3b2418(-0x1d8,-0x16b,-0x14a,-0xc6)](-0x1a57*0x1+0x748*0x1+0x29*0x77,_0x1f05b1)[_0x3b2418(-0xed,-0xfc,-0x13a,-0x157)](),_0x18efae=_0x4a0251[_0x3b2418(-0xcd,-0x169,-0x14a,-0xcf)](_0x18e9d0[_0x3b2418(-0x10e,-0xe7,-0x119,-0x7f)](_0x1f05b1,-0x905+-0x2*0xe20+0x1a*0x16f))[_0x3b2418(-0x13a,-0x1ca,-0x13a,-0xfe)]();if(_0x43faa2[_0x3c651f])_0x2a2f55[_0x43faa2[_0x3c651f]]=_0x18efae;else{if(_0x18e9d0[_0x48ecf6(-0x15b,-0xcd,-0xfc,-0xe3)](_0x3c651f,_0x18efae)){if(_0x18e9d0['ZJRbu'](_0x18e9d0[_0x48ecf6(-0x59,-0xc7,-0x85,-0xb0)],_0x18e9d0[_0x3b2418(-0x4c,-0xf5,-0xc2,-0x116)]))return _0xe50724[_0x48ecf6(-0xeb,-0xc6,-0x15c,-0x1ef)]()['search'](TPgBhK[_0x3b2418(-0x38,-0x83,-0x6d,-0x84)])[_0x3b2418(-0x192,-0x14e,-0x199,-0x157)]()[_0x3b2418(-0x28,-0x1c,-0x69,-0x97)+'r'](_0x23150e)[_0x48ecf6(-0x42,-0x138,-0xd2,-0x150)](TPgBhK['MknIW']);else console[_0x48ecf6(-0x12,-0x3e,-0x61,-0x1a)]('[outfitPro'+_0x48ecf6(-0x171,-0xc0,-0x159,-0x1a6)+_0x3b2418(-0x98,-0x10a,-0x11d,-0xc1)+'\x22'+_0x3c651f+'\x22');}}}if(!_0x2a2f55[_0x3b2418(-0x1c7,-0x1ce,-0x17e,-0x202)]){if(_0x3b2418(-0x146,-0xe7,-0x11c,-0x1ad)!==_0x18e9d0['RuNkO']){_0x5097a0[_0x3b2418(-0xc7,-0x177,-0xfc,-0x166)](_0x3b2418(-0xce,-0x94,-0xc0,-0x31));return;}else return null;}function _0x48ecf6(_0x3772a1,_0x236aa2,_0x3b46ea,_0x18ff73){return _0x4516be(_0x3772a1-0xd6,_0x3b46ea- -0x417,_0x18ff73,_0x18ff73-0x56);}return console['log'](_0x18e9d0[_0x48ecf6(-0x17c,-0x162,-0x120,-0x120)],_0x2a2f55),_0x2a2f55;}function extractOutfitTags(_0x51c5ad){const _0x1d2350={'CfZTo':'LLM\x20请求失败','MoRSe':'(空)','juSoN':function(_0x202faf,_0x5c6190){return _0x202faf>_0x5c6190;},'VHxEx':'...','QBGOs':function(_0x75db3b,_0x4dfd3c){return _0x75db3b!==_0x4dfd3c;},'YhpWg':function(_0xe3a6bb,_0x1b8951){return _0xe3a6bb!==_0x1b8951;},'GLQzu':_0x295e99(0x25f,0x1f6,0x24c,0x285),'AHFal':function(_0x17617b,_0xa6794f){return _0x17617b(_0xa6794f);},'WTfXS':function(_0x24ea39,_0x107ece){return _0x24ea39!==_0x107ece;},'hOpff':_0x295e99(0x1a4,0x234,0x207,0x190)},_0x5108f2={};function _0x114d31(_0x54665b,_0x108441,_0x10f466,_0x17ae40){return _0x4516be(_0x54665b-0x1db,_0x10f466- -0x2ff,_0x17ae40,_0x17ae40-0xad);}_0x5108f2[_0x114d31(0xd4,0x13,0x41,0x53)]=[];const _0x36439b=_0x5108f2;function _0x295e99(_0xcebcd8,_0x579fe5,_0xa0be44,_0x232029){return _0x4516be(_0xcebcd8-0x5a,_0xcebcd8- -0x158,_0x232029,_0x232029-0x81);}_0x51c5ad=_0x51c5ad[_0x114d31(0x28,-0xd,-0x2a,-0x1)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x295e99(0x1c2,0x218,0x194,0x1d3)]();const _0x30c675=/<服装>([\s\S]*?)<\/服装>/g;let _0x4dd6cf;while(_0x1d2350[_0x295e99(0x1c0,0x24a,0x1c1,0x15e)](_0x4dd6cf=_0x30c675[_0x295e99(0x1ad,0x1e5,0x121,0x237)](_0x51c5ad),null)){if(_0x1d2350[_0x114d31(-0x61,-0x14,0x23,-0x8)](_0x1d2350[_0x295e99(0x183,0x127,0x11e,0x1dd)],_0x114d31(0xf3,0x87,0xb8,0x2b)))_0x4cabe1(new _0x23368a(_0x18b2c6[_0x114d31(0x6f,0x50,0x50,0xde)]||_0x1d2350[_0x295e99(0x1fe,0x23a,0x189,0x1cc)]));else{const _0x2619e8=_0x1d2350['AHFal'](preprocessTagContent,_0x4dd6cf[-0x6*-0x3f1+-0x2042+0xf*0x93]),_0x87c076=parseOutfitData(_0x2619e8);if(_0x87c076){if(_0x1d2350['WTfXS'](_0x1d2350[_0x295e99(0x1af,0x1d2,0x15d,0x170)],_0x1d2350['hOpff'])){const _0x55cfd8=_0x1dfbaa[_0x48b38a]||_0x1d2350[_0x114d31(-0x1c,0x2a,0x7c,0xa2)],_0x125a5a=_0x33d060[_0x5adbe4];_0x133fd2+='•\x20'+_0x1c0a09[_0x512856]+':\x0a',_0x595a39+=_0x114d31(0x63,0x88,0x98,0x103)+_0x55cfd8['substring'](0x2619+-0x15d1+0x209*-0x8,0x11a6+0x3*0xbdd+-0x350b)+(_0x1d2350['juSoN'](_0x55cfd8[_0x295e99(0x1f2,0x25e,0x1df,0x1d1)],0x260c+0x2f*-0x5+-0x24ef)?_0x1d2350[_0x295e99(0x1d6,0x1b5,0x19e,0x1f8)]:'')+'\x0a',_0x564435+=_0x295e99(0x272,0x237,0x28e,0x22c)+_0x125a5a[_0x114d31(0x70,-0x3e,0xb,0x96)](-0x6d*-0x37+-0x33a*-0x9+-0x3475,-0xb7b*0x1+0x1fd0+0x1*-0x1423)+(_0x125a5a[_0x114d31(-0x5,0x4e,0x4b,0xcd)]>0x1*0x1772+-0x201e*0x1+0x1c6*0x5?_0x1d2350[_0x114d31(-0x1c,0x6c,0x2f,-0x1)]:'')+'\x0a\x0a',_0xc5df82++;}else _0x36439b[_0x114d31(0x84,0x74,0x41,0x93)][_0x295e99(0x273,0x2d8,0x213,0x239)](_0x87c076);}}}return _0x36439b;}function getCurrentOutfitPreset(){const _0x3edafc=extension_settings[extensionName];function _0x5ec127(_0x3a0f78,_0x551e53,_0x46b96a,_0x4e4d90){return _0x4516be(_0x3a0f78-0x1e1,_0x46b96a-0x229,_0x3a0f78,_0x4e4d90-0x148);}const _0x5141e6=_0x3edafc[_0x5ec127(0x57e,0x54d,0x500,0x534)+_0x1ea7db(0x14a,0x197,0x10a,0xde)];if(!_0x5141e6||!_0x3edafc[_0x5ec127(0x4b2,0x58f,0x500,0x515)+_0x5ec127(0x4a1,0x523,0x501,0x520)][_0x5141e6])return null;const _0x561e8f={};_0x561e8f['id']=_0x5141e6,_0x561e8f[_0x1ea7db(0x13c,0x13a,0xfa,0x1ad)]=_0x3edafc[_0x1ea7db(0x9a,0x4a,0x5,0x118)+'ets'][_0x5141e6];function _0x1ea7db(_0x592ce1,_0x139486,_0x71da1e,_0x2cf858){return _0x4516be(_0x592ce1-0x89,_0x592ce1- -0x23d,_0x139486,_0x2cf858-0x1ae);}return _0x561e8f;}function buildOutfitText(_0x371be9){const _0x68293e={};_0x68293e[_0x548cd9(0x10b,0x148,0xfa,0x69)]=_0x548cd9(0x12a,0xa0,0xa5,0xa6),_0x68293e[_0x548cd9(0xd9,0x50,0x43,0x18)]=_0x548cd9(0xfe,0x138,0xb5,0x100);const _0x198831=_0x68293e;function _0x548cd9(_0x4934fb,_0x41ccf5,_0xd988e2,_0x1e6813){return _0x4516be(_0x4934fb-0x1b8,_0xd988e2- -0x287,_0x4934fb,_0x1e6813-0x24);}const _0x1f2883=_0x371be9[_0x548cd9(0xa8,0x175,0xf2,0x180)];let _0x3ebd1d=_0x198831[_0x548cd9(0x152,0x88,0xfa,0x16c)];_0x3ebd1d+='中文名称:\x20'+(_0x1f2883['nameCN']||'')+'\x0a',_0x3ebd1d+=_0x548cd9(-0xf,0x6b,0x46,-0x37)+(_0x1f2883[_0x548cd9(0x1c8,0x184,0x140,0xad)]||'')+'\x0a';function _0x49486d(_0xf16dde,_0x2026e0,_0x197135,_0x50ffd6){return _0x4516be(_0xf16dde-0x12b,_0x197135- -0x26a,_0xf16dde,_0x50ffd6-0x45);}return _0x3ebd1d+='上半身:\x20'+(_0x1f2883[_0x548cd9(0x33,0x27,0x61,0x40)]||'')+'\x0a',_0x3ebd1d+=_0x548cd9(0x64,0xf4,0x69,0xde)+(_0x1f2883[_0x49486d(0x113,0xc1,0x7a,0x6)+'ack']||'')+'\x0a',_0x3ebd1d+=_0x49486d(0xb0,0x91,0xf1,0xe4)+(_0x1f2883[_0x548cd9(0x124,0x1b6,0x12e,0xc5)]||'')+'\x0a',_0x3ebd1d+=_0x548cd9(0x141,0x1a3,0x10a,0xe9)+(_0x1f2883[_0x49486d(0xa7,0xc2,0x110,0x197)+'ck']||'')+'\x0a',_0x3ebd1d+=_0x198831[_0x49486d(-0x12,0x37,0x60,0x50)],_0x3ebd1d;}export async function handleOutfitPromptModify(_0x2bc23e,_0x4276c6=[]){function _0x21ca17(_0x29fe0e,_0x5ac53e,_0x2d94fc,_0xc8f791){return _0x4516be(_0x29fe0e-0xea,_0x2d94fc-0x6c,_0x5ac53e,_0xc8f791-0x122);}const _0x924541={'CCbDx':function(_0x4f8fd7,_0x587630){return _0x4f8fd7(_0x587630);},'LSzJD':'服装修改\x20LLM\x20请'+'求超时','DQccJ':function(_0x55163b,_0x4e7018,_0x1bfc9b,_0x2a897d,_0x16898a){return _0x55163b(_0x4e7018,_0x1bfc9b,_0x2a897d,_0x16898a);},'RlFVi':function(_0x3afd6c,_0x113368){return _0x3afd6c(_0x113368);},'qCHSZ':_0x2095a7(0x5b6,0x659,0x572,0x5f8)+'时','KCVBl':_0x21ca17(0x405,0x412,0x3a0,0x336)+_0x2095a7(0x58b,0x56c,0x4e3,0x56e)+'\x20Starting\x20'+_0x21ca17(0x3c8,0x43a,0x41d,0x38c)+_0x2095a7(0x68a,0x618,0x6de,0x699)+_0x21ca17(0x2fd,0x317,0x33c,0x3bd)+'.','zTvmH':_0x21ca17(0x427,0x38b,0x3d4,0x3c3)+'改请求...','YQyEH':function(_0x4e4a7c,_0x6e848c){return _0x4e4a7c!==_0x6e848c;},'XUonK':_0x21ca17(0x364,0x366,0x32c,0x305),'PReiX':_0x2095a7(0x621,0x6b2,0x676,0x67f),'rRlFD':function(_0xcff319){return _0xcff319();},'yKWJD':'OfOvd','fjIgk':_0x2095a7(0x6c4,0x6c6,0x5cb,0x644),'QEnop':function(_0x191375,_0x31c4cb){return _0x191375(_0x31c4cb);},'HgGws':function(_0x405bfe,_0x39f63d){return _0x405bfe||_0x39f63d;},'kZLOJ':function(_0x57a5e0,_0x43c373,_0x5b179b){return _0x57a5e0(_0x43c373,_0x5b179b);},'VPaQl':_0x21ca17(0x410,0x31c,0x392,0x339),'PGXDI':_0x2095a7(0x551,0x570,0x65f,0x5e4)+_0x21ca17(0x3aa,0x39b,0x32a,0x33b)+_0x2095a7(0x4fa,0x5f2,0x558,0x579)+'irement\x20me'+'ssage\x20inde'+'x:','lPQhD':'{{当前服装}}','hHPuN':function(_0x481220,_0x11d34b){return _0x481220||_0x11d34b;},'HJTFE':function(_0x5d24fa,_0x40ad58,_0x1c8c6f,_0x584f04,_0x5d7365){return _0x5d24fa(_0x40ad58,_0x1c8c6f,_0x584f04,_0x5d7365);},'mcLha':_0x21ca17(0x459,0x42f,0x40e,0x396),'eMYLN':_0x2095a7(0x59c,0x57f,0x5db,0x596),'VFjKZ':_0x21ca17(0x3d7,0x36c,0x389,0x3b4),'xFghx':_0x21ca17(0x416,0x45f,0x407,0x3aa)+'}}','OPTAI':_0x2095a7(0x618,0x649,0x624,0x68b)+'}}','hKUsm':_0x21ca17(0x386,0x312,0x3a0,0x39b)+_0x21ca17(0x3b3,0x30e,0x32a,0x3be)+_0x21ca17(0x3b2,0x411,0x38a,0x32d)+_0x21ca17(0x35a,0x3a0,0x349,0x322),'xFbwW':function(_0x40ccc7,_0x46f8d8){return _0x40ccc7>_0x46f8d8;},'FFLUM':function(_0x25511b,_0x188c39){return _0x25511b>_0x188c39;},'lTIlD':function(_0x21efdf,_0x5a433c){return _0x21efdf>=_0x5a433c;},'HXrGz':_0x21ca17(0x2ed,0x3e8,0x382,0x32b),'VKvJL':_0x21ca17(0x3b3,0x409,0x41e,0x389),'Xoqkq':_0x2095a7(0x5ab,0x677,0x65a,0x5e4)+_0x21ca17(0x3ad,0x33f,0x32a,0x303)+_0x2095a7(0x610,0x651,0x5f6,0x630),'UxHGt':_0x21ca17(0x32c,0x3b7,0x39e,0x380)+'message\x20at'+_0x21ca17(0x3a1,0x337,0x3b0,0x352),'RNyBN':function(_0x39f1f8,_0x3264ee,_0x5098be){return _0x39f1f8(_0x3264ee,_0x5098be);},'DgvhB':function(_0x24215e,_0x40bd35,_0x2b5683){return _0x24215e(_0x40bd35,_0x2b5683);},'KAhvV':'[outfitPro'+_0x21ca17(0x301,0x297,0x32a,0x370)+_0x21ca17(0x4b5,0x42d,0x44f,0x3e3)+'t:','xTmtq':_0x21ca17(0x405,0x432,0x440,0x41e),'UvcLs':function(_0x29978e,_0x28b2da){return _0x29978e===_0x28b2da;},'dPsfM':_0x2095a7(0x57b,0x5cc,0x637,0x5aa),'eSQfR':'kTUVX','xuCiF':_0x21ca17(0x397,0x404,0x390,0x3e1)+_0x21ca17(0x446,0x3a1,0x3d7,0x42d),'tFNOA':_0x21ca17(0x3c0,0x31c,0x3a0,0x429)+_0x2095a7(0x564,0x575,0x5a5,0x56e)+_0x2095a7(0x686,0x5da,0x60b,0x612)+_0x21ca17(0x43c,0x408,0x3df,0x3c9)+_0x21ca17(0x3ec,0x317,0x367,0x370),'Tgale':_0x21ca17(0x334,0x391,0x36d,0x3b1),'oLYGH':_0x2095a7(0x56a,0x5a2,0x5ff,0x5e4)+'mptModify]'+_0x2095a7(0x66d,0x63e,0x6df,0x69c)};console['log'](_0x924541[_0x21ca17(0x379,0x310,0x396,0x3f6)]),toastr['info'](_0x924541['zTvmH']);function _0x2095a7(_0x1ee2c2,_0x362167,_0x344ba5,_0x549936){return _0x4516be(_0x1ee2c2-0x195,_0x549936-0x2b0,_0x362167,_0x549936-0x89);}try{if(_0x924541[_0x2095a7(0x684,0x67b,0x58f,0x5fb)](_0x924541[_0x21ca17(0x418,0x40e,0x3ff,0x413)],_0x924541[_0x2095a7(0x69d,0x6fc,0x650,0x68d)])){const _0xa63705=extension_settings[extensionName],_0x5575a6=_0x924541[_0x21ca17(0x3c8,0x3b2,0x438,0x4b3)](getCurrentOutfitPreset);if(!_0x5575a6){if(_0x924541[_0x2095a7(0x575,0x5cc,0x653,0x5fb)](_0x924541[_0x21ca17(0x42f,0x446,0x446,0x480)],_0x2095a7(0x547,0x532,0x634,0x5ae)))_0x3fa233[_0x2095a7(0x5c2,0x644,0x5db,0x5ed)+_0x2095a7(0x5db,0x541,0x595,0x58c)](_0x11b79e[_0x21ca17(0x457,0x401,0x3c9,0x45d)+_0x2095a7(0x5e3,0x635,0x6b1,0x66a)+_0x2095a7(0x694,0x676,0x651,0x62e)],_0x23902f),_0x924541[_0x2095a7(0x5b3,0x5ac,0x58e,0x610)](_0xefc1ac,new _0x4f4ad8(_0x924541[_0x2095a7(0x6b7,0x625,0x662,0x680)]));else{toastr[_0x21ca17(0x444,0x38e,0x3c4,0x3bb)](_0x924541[_0x2095a7(0x6a3,0x656,0x5e8,0x61e)]);return;}}console[_0x21ca17(0x3b9,0x399,0x422,0x444)](_0x21ca17(0x375,0x37c,0x3a0,0x360)+'mptModify]'+_0x21ca17(0x4a4,0x43f,0x459,0x415)+_0x21ca17(0x4a0,0x3e5,0x417,0x48d),_0x5575a6['id']);const _0x8b1ce0=_0x924541[_0x2095a7(0x705,0x6f4,0x6e1,0x675)](buildOutfitText,_0x5575a6),_0xafe9a=[_0x924541[_0x21ca17(0x392,0x3d3,0x364,0x38c)](_0x2bc23e,''),_0x8b1ce0]['filter'](Boolean)['join']('\x0a');let _0x4da626=_0x924541['kZLOJ'](buildPromptForRequestType,_0x2095a7(0x6f0,0x665,0x6a8,0x66f)+'y',_0xafe9a);const _0x13ccd6=new Set(),_0x368796=findMessageIndexWithPlaceholder(_0x4da626,_0x924541[_0x21ca17(0x3de,0x3d7,0x3d9,0x446)]);console[_0x2095a7(0x61d,0x69e,0x645,0x666)](_0x924541[_0x2095a7(0x61a,0x5a5,0x5b3,0x63c)],_0x368796),_0x4da626=replacePlaceholder(_0x4da626,_0x924541[_0x2095a7(0x577,0x55e,0x61e,0x5bb)],_0x8b1ce0,_0x13ccd6),_0x4da626=_0x924541[_0x2095a7(0x637,0x6b2,0x695,0x656)](replacePlaceholder,_0x4da626,'{{服装列表}}',_0x8b1ce0,_0x13ccd6),_0x4da626=replacePlaceholder(_0x4da626,_0x924541[_0x21ca17(0x414,0x428,0x3d9,0x419)],_0x924541['hHPuN'](_0x2bc23e,''),_0x13ccd6),_0x4da626=_0x924541[_0x21ca17(0x31d,0x30d,0x397,0x365)](replacePlaceholder,_0x4da626,'{{当前角色}}','',_0x13ccd6),_0x4da626=_0x924541['DQccJ'](replacePlaceholder,_0x4da626,_0x924541[_0x2095a7(0x586,0x592,0x637,0x5d1)],'',_0x13ccd6),_0x4da626=_0x924541['DQccJ'](replacePlaceholder,_0x4da626,_0x924541[_0x21ca17(0x3b2,0x3f4,0x416,0x3f9)],'',_0x13ccd6),_0x4da626=replacePlaceholder(_0x4da626,_0x924541[_0x2095a7(0x6af,0x6b1,0x69d,0x68c)],'',_0x13ccd6),_0x4da626=replacePlaceholder(_0x4da626,_0x924541[_0x21ca17(0x3ca,0x479,0x42e,0x4c0)],'',_0x13ccd6),_0x4da626=_0x924541[_0x21ca17(0x3ea,0x35c,0x397,0x376)](replacePlaceholder,_0x4da626,_0x924541[_0x21ca17(0x35e,0x403,0x3aa,0x3e5)],'',_0x13ccd6),console[_0x2095a7(0x623,0x6cf,0x61a,0x666)](_0x924541[_0x21ca17(0x351,0x3d5,0x39c,0x3e4)],_0x4da626);let _0x583516='';_0x924541[_0x21ca17(0x42b,0x472,0x3e9,0x394)](_0x13ccd6['size'],-0x795*0x4+0x4a*0x61+-0x1*-0x24a)&&(_0x583516=_0x2095a7(0x602,0x68a,0x6a4,0x65f)+_0x21ca17(0x2f1,0x38d,0x33f,0x2d1)+[..._0x13ccd6]['join']('、')+'\x0a');if(_0x4276c6&&_0x924541[_0x2095a7(0x5e8,0x5e7,0x5e2,0x603)](_0x4276c6[_0x21ca17(0x3f3,0x351,0x3b6,0x3f7)],-0x1b59*0x1+-0x1f49+0x18b*0x26)&&_0x924541[_0x2095a7(0x60c,0x63a,0x627,0x657)](_0x368796,-0x102+-0xa*-0x5f+0xad*-0x4)){if(_0x924541[_0x21ca17(0x376,0x33c,0x3b7,0x42e)](_0x924541[_0x2095a7(0x5e5,0x642,0x603,0x607)],_0x2095a7(0x63a,0x70c,0x6bd,0x695)))_0x4da626=attachImagesToMessage(_0x4da626,_0x368796,_0x4276c6,_0x924541[_0x21ca17(0x343,0x37f,0x381,0x2ed)]),console[_0x2095a7(0x638,0x682,0x64c,0x666)](_0x924541['Xoqkq'],_0x4276c6[_0x21ca17(0x3b1,0x3cd,0x3b6,0x3e1)],_0x924541[_0x2095a7(0x6d9,0x697,0x67a,0x646)],_0x368796);else{const _0x4df2a0={};for(const _0x36237f in _0x49a348){_0x4df2a0[_0x36237f]=_0x924541[_0x2095a7(0x616,0x636,0x65b,0x656)](_0x2557cf,_0x88fe65[_0x36237f],_0x378a90,_0x58ed5d,_0x5f432c);}return _0x4df2a0;}}_0x924541['RNyBN'](updateCombinedPrompt,_0x4da626,_0x583516);const _0x1b9680={};_0x1b9680[_0x2095a7(0x61c,0x60e,0x68d,0x5f3)]=0x493e0;const _0xd9e467=await _0x924541['DgvhB'](LLM_OUTFIT_MODIFY,_0x4da626,_0x1b9680);console[_0x2095a7(0x6f7,0x660,0x6ed,0x666)](_0x924541[_0x21ca17(0x3ae,0x4b8,0x425,0x3f7)],_0xd9e467);if(!_0xd9e467){toastr[_0x21ca17(0x3ac,0x33a,0x3c4,0x337)](_0x924541[_0x21ca17(0x3e4,0x35e,0x3e4,0x45b)]);return;}const _0x4cdd9b=_0x924541[_0x2095a7(0x650,0x654,0x633,0x675)](extractOutfitTags,_0xd9e467);if(_0x924541[_0x2095a7(0x6a3,0x5f3,0x6d5,0x681)](_0x4cdd9b['outfits'][_0x2095a7(0x681,0x5b8,0x662,0x5fa)],0x1b24+-0x7*0x169+-0x1145*0x1)){if(_0x924541['dPsfM']!==_0x924541['eSQfR']){toastr[_0x2095a7(0x5ba,0x63f,0x6e2,0x64e)](_0x924541[_0x2095a7(0x5ee,0x4fc,0x50d,0x593)]),console[_0x21ca17(0x3a1,0x4b7,0x422,0x3b1)](_0x924541[_0x21ca17(0x3f6,0x3ae,0x3ae,0x34e)],_0xd9e467);return;}else _0xe2f422[_0x2095a7(0x62a,0x5cc,0x5ca,0x5ed)+'ener'](_0x2be55d[_0x21ca17(0x426,0x382,0x3c9,0x3cb)+'ODIFY_GET_'+_0x21ca17(0x35c,0x37e,0x36c,0x3ae)+'PONSE'],_0x56ebc3),_0x924541['RlFVi'](_0x1abf09,new _0x5b2f96(_0x924541[_0x21ca17(0x438,0x423,0x410,0x392)]));}console['log'](_0x21ca17(0x326,0x3f3,0x3a0,0x411)+_0x21ca17(0x3ae,0x304,0x32a,0x39c)+'\x20Extracted'+_0x2095a7(0x5d4,0x626,0x63e,0x648),_0x4cdd9b);const _0x295100=_0x4cdd9b[_0x2095a7(0x60f,0x644,0x5eb,0x5f0)][0x1d1+-0x1ce7+0xd8b*0x2];await updateOutfitPresetFromLLM(_0x5575a6['id'],_0x295100),toastr[_0x21ca17(0x3d7,0x3de,0x36e,0x39c)](_0x924541[_0x21ca17(0x3b6,0x3e6,0x39f,0x3a7)]);}else return null;}catch(_0x5c582a){console[_0x21ca17(0x3bb,0x42e,0x3c4,0x400)](_0x924541[_0x2095a7(0x715,0x71b,0x721,0x689)],_0x5c582a),toastr[_0x2095a7(0x5cc,0x67f,0x5d1,0x608)](_0x2095a7(0x620,0x645,0x5a1,0x5be)+'\x20'+_0x5c582a[_0x2095a7(0x526,0x61e,0x5bc,0x5b3)]);}}async function updateOutfitPresetFromLLM(_0x600640,_0x1920c9){const _0x52445e={'FpgYc':_0x41c867(0x35d,0x2fd,0x2f9,0x3a5),'Ylofy':_0x40e890(0xd,0x1,0x9a,-0x19),'xczXG':'英文名称','Vbbbz':'上半身','LSrWy':_0x41c867(0x37d,0x394,0x3c4,0x362),'EHcjb':_0x41c867(0x3c8,0x40f,0x344,0x405),'qdMED':function(_0x3885f3,_0x4fe2ed){return _0x3885f3===_0x4fe2ed;},'cwUqO':_0x41c867(0x37e,0x302,0x403,0x3f9),'taabl':_0x40e890(0x30,-0x35,0x38,0x73),'bPiGQ':function(_0x529017,_0x5c355a){return _0x529017>_0x5c355a;},'TEBjx':'...','pySIz':_0x41c867(0x3e3,0x44d,0x381,0x379)+'内容','orVsj':function(_0x14f726,_0x1bcf98){return _0x14f726(_0x1bcf98);},'hBnDF':_0x40e890(-0xb2,-0xf6,-0x110,-0x7b),'aPNRB':function(_0x27b6cc){return _0x27b6cc();},'gHEvB':function(_0x183d45,_0x46479b){return _0x183d45(_0x46479b);},'vQTfs':'#st-chatu8'+'-tab-chara'+'cter'},_0x2601dc=extension_settings[extensionName],_0x3c1b2c=_0x2601dc[_0x41c867(0x345,0x2b6,0x2e8,0x301)+_0x40e890(-0x9d,-0x8e,-0xbd,-0x10b)][_0x600640];function _0x40e890(_0x5af543,_0x513368,_0x1fdc63,_0x2dfc71){return _0x4516be(_0x5af543-0x24,_0x5af543- -0x375,_0x1fdc63,_0x2dfc71-0x119);}if(!_0x3c1b2c){toastr[_0x40e890(-0x1d,0x4e,0x1e,0x69)](_0x52445e['FpgYc']);return;}let _0x44d2a4='准备更新服装\x20\x22'+_0x600640+_0x41c867(0x40e,0x476,0x457,0x43c);const _0x395d18={};function _0x41c867(_0x3b73b2,_0x1c1767,_0x2ae6da,_0x3d8cd9){return _0x4516be(_0x3b73b2-0x114,_0x3b73b2-0x6e,_0x1c1767,_0x3d8cd9-0x1aa);}_0x395d18[_0x41c867(0x344,0x368,0x2f3,0x33a)]=_0x52445e['Ylofy'],_0x395d18[_0x41c867(0x435,0x3ab,0x3ea,0x3e7)]=_0x52445e[_0x40e890(0x4b,-0x42,0x9d,0xbc)],_0x395d18['upperBody']=_0x52445e[_0x41c867(0x39d,0x3a4,0x3a1,0x39f)],_0x395d18['upperBodyB'+'ack']=_0x52445e[_0x40e890(-0xb6,-0xeb,-0xe4,-0xc1)],_0x395d18[_0x41c867(0x423,0x423,0x44f,0x411)]='下半身',_0x395d18[_0x40e890(0x5,0x3f,-0x1,-0x78)+'ck']=_0x52445e[_0x41c867(0x3bc,0x3da,0x455,0x3a7)];const _0x1a6601=_0x395d18;let _0x521de9=0x1*-0xc31+0x13c5+-0x794;for(const _0x1e26ad in _0x1a6601){if(_0x1920c9[_0x1e26ad]&&_0x1920c9[_0x1e26ad]!==_0x3c1b2c[_0x1e26ad]){if(_0x52445e[_0x41c867(0x34f,0x36a,0x2e4,0x349)](_0x41c867(0x37e,0x312,0x306,0x395),_0x52445e[_0x40e890(-0x6d,-0x64,-0x4c,-0x73)])){const _0x28350f=_0x3c1b2c[_0x1e26ad]||_0x52445e[_0x40e890(-0x50,-0x40,-0x41,-0x71)],_0x57fad4=_0x1920c9[_0x1e26ad];_0x44d2a4+='•\x20'+_0x1a6601[_0x1e26ad]+':\x0a',_0x44d2a4+=_0x40e890(0x22,0xd,-0x38,0xa5)+_0x28350f[_0x41c867(0x378,0x3d8,0x3ba,0x2e1)](-0x1a02+-0x4*0x73+-0xde7*-0x2,0x1e7*0x2+0x108b+-0x1427)+(_0x52445e[_0x41c867(0x441,0x428,0x3ba,0x3df)](_0x28350f[_0x41c867(0x3b8,0x3f0,0x41d,0x3c4)],0x33b*-0x6+-0x23bc+-0xec*-0x3c)?_0x52445e[_0x41c867(0x33f,0x303,0x384,0x2d9)]:'')+'\x0a',_0x44d2a4+=_0x40e890(0x55,-0x3b,0x94,0xa2)+_0x57fad4[_0x41c867(0x378,0x3fa,0x3a1,0x405)](-0xb*-0x37d+0xa5c*0x1+-0x30bb,-0x339+0x1f84+-0x1c19)+(_0x52445e[_0x41c867(0x441,0x3af,0x480,0x42c)](_0x57fad4[_0x41c867(0x3b8,0x419,0x36b,0x349)],0x239e+0x323+-0x268f)?_0x52445e[_0x41c867(0x33f,0x2c3,0x36c,0x371)]:'')+'\x0a\x0a',_0x521de9++;}else _0x1c52a2=_0x41c867(0x380,0x3d2,0x3d1,0x387)+_0x41c867(0x34c,0x3db,0x38b,0x346)+'4,'+_0x32107e;}}if(_0x52445e[_0x40e890(-0x94,-0x85,-0x2c,-0xda)](_0x521de9,-0x21c7+-0x19*-0x113+-0x1*-0x6ec)){toastr[_0x41c867(0x3cc,0x3c9,0x455,0x369)](_0x52445e['pySIz']);return;}_0x44d2a4+='共\x20'+_0x521de9+_0x41c867(0x3f1,0x3ac,0x397,0x38c);const _0x4a5317=await _0x52445e[_0x41c867(0x40a,0x3c7,0x479,0x401)](stylishConfirm,_0x44d2a4);if(!_0x4a5317){toastr[_0x40e890(-0x17,-0x6b,-0x29,-0x5a)](_0x52445e[_0x40e890(-0x59,0x40,-0xbc,0x2b)]);return;}for(const _0x57b136 in _0x1a6601){_0x1920c9[_0x57b136]&&(_0x3c1b2c[_0x57b136]=_0x1920c9[_0x57b136]);}_0x52445e[_0x40e890(0x75,0xae,-0xd,-0x6)](saveSettingsDebounced);const _0x13650d=_0x52445e[_0x40e890(0x10,-0x72,0x90,-0x58)]($,_0x52445e['vQTfs']);_0x13650d[_0x40e890(-0x2b,0x3b,0xa,-0x64)]&&_0x52445e[_0x40e890(0x75,0x88,0xe7,0xd6)](loadOutfitPreset),updateOutfitFormFields(_0x1920c9),console[_0x40e890(0x41,0xc7,0x37,0xa8)](_0x41c867(0x3a2,0x314,0x409,0x30c)+'mptModify]'+_0x41c867(0x332,0x3cc,0x383,0x29b)+_0x600640+'\x22');}function updateOutfitFormFields(_0x138e10){const _0x163a8a={'TMZrC':_0x3e6061(0x589,0x573,0x5ef,0x597),'eDecs':function(_0x370b6c,_0x3ac0d1){return _0x370b6c(_0x3ac0d1);},'uJFJg':'input','PpehG':_0x3e6061(0x611,0x629,0x59d,0x60d),'voIBw':_0x3e6061(0x52e,0x524,0x4bb,0x50c)+_0x3e6061(0x5b1,0x643,0x54d,0x54c),'qrfEr':_0x4caaf1(-0x28,-0xae,-0x70,-0x38),'ulhET':'fullBodyBa'+'ck'},_0x523fe6=[_0x4caaf1(-0x200,-0x18d,-0x159,-0x151),_0x163a8a[_0x4caaf1(-0xac,-0x7f,-0x51,-0xdd)],_0x4caaf1(-0x15f,-0x17b,-0x1c0,-0x130),_0x163a8a[_0x3e6061(0x605,0x5c0,0x5bc,0x659)],_0x163a8a[_0x4caaf1(-0x9b,-0xc9,-0x42,-0x11b)],_0x163a8a[_0x3e6061(0x59b,0x591,0x50c,0x587)]];function _0x3e6061(_0x2b323c,_0x3a41ba,_0xf6d078,_0x21b6c7){return _0x4516be(_0x2b323c-0xdf,_0x2b323c-0x24a,_0x3a41ba,_0x21b6c7-0x33);}function _0x4caaf1(_0x5c1951,_0x52705a,_0x587a45,_0x18426d){return _0x4516be(_0x5c1951-0xa9,_0x52705a- -0x463,_0x18426d,_0x18426d-0x168);}_0x523fe6[_0x3e6061(0x518,0x4c2,0x495,0x5ab)](_0x538e08=>{function _0x362117(_0x1f0e4a,_0x5857b4,_0xd8ab50,_0x190e43){return _0x3e6061(_0x190e43- -0x35f,_0x1f0e4a,_0xd8ab50-0xcd,_0x190e43-0x115);}function _0x4eec31(_0x53ad7c,_0x335032,_0x4edc75,_0xcf4579){return _0x4caaf1(_0x53ad7c-0xcb,_0x335032-0x440,_0x4edc75-0x8a,_0x53ad7c);}if(_0x138e10[_0x538e08]){if(_0x362117(0x208,0x223,0x1bd,0x1b3)!==_0x163a8a[_0x4eec31(0x394,0x399,0x3d0,0x330)]){const _0x43d9ab=document[_0x362117(0x22e,0x1ff,0x235,0x1ff)+_0x362117(0x231,0x233,0x1cb,0x25c)](_0x362117(0x2f0,0x1f3,0x2d2,0x28c)+_0x538e08);_0x43d9ab&&(_0x43d9ab['value']=_0x138e10[_0x538e08],_0x163a8a[_0x4eec31(0x2c0,0x2fc,0x381,0x332)]($,_0x43d9ab)[_0x362117(0x19c,0x1a5,0x1c7,0x1f8)](_0x163a8a[_0x4eec31(0x404,0x38d,0x375,0x3c0)]));}else{_0x4fa854['error'](_0x4eec31(0x365,0x3b1,0x449,0x371));return;}}});}