(function(_0x4fc2a2,_0x192636){function _0x525e46(_0x2dfd78,_0x2c61bd,_0x49a9a3,_0x298a6f){return _0x5a3f(_0x2dfd78-0xd5,_0x298a6f);}function _0x4bb704(_0x285393,_0x79f43e,_0x3c1e73,_0x21a89e){return _0x5a3f(_0x285393- -0x78,_0x3c1e73);}const _0x7aa8d=_0x4fc2a2();while(!![]){try{const _0x2a0a7f=-parseInt(_0x525e46(0x2de,0x2a7,0x2b0,0x2ee))/(-0x829+-0x207a*0x1+-0x4*-0xa29)*(parseInt(_0x4bb704(0x126,0xce,0xba,0x10b))/(0x5*-0x71f+0x1bbf*0x1+0x7de))+parseInt(_0x4bb704(0x184,0x12c,0x202,0x163))/(0x7*0xf5+-0x2*0x5e5+-0x1*-0x51a)+parseInt(_0x4bb704(0x119,0xdf,0xf1,0x155))/(-0x10f8+0x142d+-0x13*0x2b)+parseInt(_0x4bb704(0x18d,0x1ca,0x1c4,0x13d))/(0x1aba+0x1184*0x2+-0xc59*0x5)+-parseInt(_0x525e46(0x2a6,0x30a,0x2e5,0x2e4))/(0x1d*-0xe+-0xc86+-0x1*-0xe22)*(-parseInt(_0x4bb704(0x139,0x115,0x1ad,0xee))/(-0x97d+-0x3*0x2a5+0x1173))+parseInt(_0x4bb704(0x1b1,0x20c,0x14f,0x162))/(-0xe3*0x6+-0x19*-0x184+0xa*-0x341)*(-parseInt(_0x525e46(0x264,0x243,0x209,0x1f9))/(0x4*0x4ac+0x16*-0xa3+0x1*-0x4a5))+-parseInt(_0x4bb704(0x1b4,0x1c2,0x1f9,0x20a))/(-0xa50+-0x9a*0xe+-0x12c6*-0x1);if(_0x2a0a7f===_0x192636)break;else _0x7aa8d['push'](_0x7aa8d['shift']());}catch(_0xb0562c){_0x7aa8d['push'](_0x7aa8d['shift']());}}}(_0x5805,0x18cc*0x15+-0x3b6b6*0x1+-0x3c9c1*-0x2));const _0x4ccd4b=(function(){function _0x7641a4(_0x4c87e5,_0x25e9a6,_0x501e8e,_0x5a52e5){return _0x5a3f(_0x501e8e-0x2f,_0x25e9a6);}const _0x193c4f={'MxgAj':function(_0x21e961){return _0x21e961();},'PybTY':function(_0x53e5bd,_0x32a220){return _0x53e5bd!==_0x32a220;},'MCVGm':_0x7641a4(0x26d,0x2b7,0x285,0x2aa)};let _0x13f32a=!![];return function(_0x2bd6b5,_0x42517b){const _0x33d707={'VwZYa':function(_0x223c5d){function _0x397c1f(_0x499e66,_0x5577d1,_0x17580a,_0x4b3c03){return _0x5a3f(_0x4b3c03- -0xfe,_0x17580a);}return _0x193c4f[_0x397c1f(0xe6,0xea,0x3b,0x88)](_0x223c5d);},'YMkNx':function(_0x532c39,_0x1a742d){function _0x155eb2(_0x16a090,_0x566492,_0x25bbf7,_0x27a711){return _0x5a3f(_0x16a090-0xd7,_0x25bbf7);}return _0x193c4f[_0x155eb2(0x2c5,0x2fc,0x27c,0x2ca)](_0x532c39,_0x1a742d);},'WAFod':_0x193c4f['MCVGm']},_0x3a880e=_0x13f32a?function(){function _0x1e732c(_0x64acbb,_0x349927,_0x47cea4,_0x292477){return _0x5a3f(_0x47cea4-0x90,_0x292477);}function _0x48b7ec(_0x547c64,_0x27fc45,_0x2b3d4b,_0x31c5c7){return _0x5a3f(_0x2b3d4b- -0x234,_0x31c5c7);}if(_0x33d707[_0x48b7ec(-0x51,0x24,0x6,0x5d)](_0x33d707[_0x48b7ec(0x0,0x84,0x2c,0x6d)],_0x33d707[_0x1e732c(0x321,0x2f7,0x2f0,0x310)]))_0x33d707['VwZYa'](_0x1f2586);else{if(_0x42517b){const _0x3b6912=_0x42517b[_0x1e732c(0x2a7,0x222,0x254,0x202)](_0x2bd6b5,arguments);return _0x42517b=null,_0x3b6912;}}}:function(){};return _0x13f32a=![],_0x3a880e;};}()),_0x553c78=_0x4ccd4b(this,function(){const _0x491281={};_0x491281['GLuxe']=_0x3028c8(-0x1e1,-0x174,-0x176,-0x1c9)+'+$';function _0x3028c8(_0x426015,_0x1b829c,_0x592b17,_0x33a383){return _0x5a3f(_0x426015- -0x3b9,_0x33a383);}function _0x3fd707(_0x479f0a,_0x40e59a,_0x1186c6,_0x2da211){return _0x5a3f(_0x2da211-0x1a8,_0x40e59a);}const _0x32d77f=_0x491281;return _0x553c78[_0x3fd707(0x394,0x396,0x3c6,0x3d8)]()[_0x3028c8(-0x169,-0x196,-0x160,-0x160)](_0x32d77f['GLuxe'])[_0x3fd707(0x44c,0x3ee,0x363,0x3d8)]()['constructo'+'r'](_0x553c78)['search'](_0x3028c8(-0x1e1,-0x1a9,-0x16d,-0x165)+'+$');});_0x553c78();function _0xae3fa8(_0x537258,_0x58c103,_0x55bf17,_0x441149){return _0x5a3f(_0x55bf17-0x91,_0x441149);}import{extension_settings}from'../../../../../extensions.js';function _0x5805(){const _0x117881=['qNLjza','sMrNzhu','y29TzNL1As1Yzq','nJmZmZbMAvrQwLO','zMLSzxm','BgfJzwHVBgrLCG','i2LTywDLsw5WDq','zwzFAw1Hz2u','vgncsw8','CfvpC3a','kcGOlISPkYKRkq','vNzJzLu','yMXVyJO','y2XPy2S','shn2EfO','CfHywLm','5lIk5lYG5AsX6lsLoIa','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','BgfPx3zPyMvFDa','s215rwe','u2TPtfe','Bg9N','uLDKB1u','uvbzz3K','CMvZDwX0','s0LMtfi','D3Dhv3u','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','z2vFBM92zwXHAq','C3r5Bgu','l3vWBg9Hzc9PBq','zwXLy3qTAw1HzW','uhLIvfK','AgfYlxjLzI1PBq','s2Lvs2C','whP2ugq','BeD2Au0','m3WXFdb8nhWY','vwHjBwO','EMPJz04','A2fVDhvWAwfU','i25VDMvSywKTCG','rw1xv1a','y2fJAgvFy29TzG','CMvMlwLTywDLlq','i25VDMvSywKTyW','mtK3ndK5m2nKBe9mAG','CfjHuLu','Aw5SAw5LlwzSzq','CgvzDKm','BM92zwXHAs1Yzq','AwjLigLTywDLoG','v1Dgvfi','vvjm','zwXbssbPBwfNzq','mtC4mdK4mgnYAwv3yG','BwfNzs1WCMv2Aq','CxvLCNLtzwXLyW','C3rVCMvezwXLDa','m0XWzvfzvq','BMfTzq','ywDL','rxD3uNu','uK1mwwe','CMvM','wLHTt1y','EKfnqxa','BwvZC2fNzq','zxjYB3i','zMXLEa','m3WYFdf8mhW0','Dg9Y','sLrAwMu','thbtCuS','lwj0BG','AKftvMi','CwP2tMu','CMfUC2zLCL9PBq','zxHgvxm','yMXVyG','rhHAuMm','ue1TD0q','CePRANK','EwzQuvi','Df9UB3zLBgfP','yMXVy2S','DLbyBfK','A2risgu','Dhu4lwLTywDLlq','C2vYDMvYrMLSzq','twHfBfK','mtG5mdyWoffcwvDKrG','zxnZAw5Nie5VDG','ssbbueNLNldLNydJGii','nZq2otC0mfrSrNrIsW','DY1JB250ywLUzq','ztOG','uKvVvgy','Dg9tDhjPBMC','CeX1shq','y2f0vvm','Ew5cEMu','DgfYz2v0','yw5ZzMvYsw1HzW','s3rvv1y','ie5VDMvSquKGqW','Aw1Hz2vjBNb1Da','C3jJ','wu1RtNG','ihrVihvWzgf0zq','vwrJs2G','C3rHCNrZv2L0Aa','AwnMB1C','Du5OveK','CgXHy2vOB2XKzq','zNLvssbPBwfNzq','ignHy2HLihrVia','ywDLlxbYzxzPzq','igzYB20GB2XKia','igzYB20Gy2fJAa','DtGTAw1Hz2uTCa','AgLJDeK','CML0zq','C29twuK','ChjLDMLLD0LTyq','AuDtBwO','BMfPm1zPyMvuCG','z2v0rwXLBwvUDa','AM9kCeG','ywDLoG','C2vHCMnO','CL9Yzwy','DvnhB3q','i2nVBwz5DwKTCW','i25VDMvSywKTAq','tMfTzq','txjVq1e','B1zNsuC','yLvktgS','C3bSAxq','sNzmzwO','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','y29TzNL1AvvYBa','uvjlCMK','Aw5NignHy2HLza','i25VDMvSywKTCW','v0fgB2q','zgLZCgXHEq','DvjsvKi','y2HHBMDL','C3rYAw5NAwz5','DwrSr04','CMvHzefZrgf0yq','sKzYu1m','rvvizvC','C3rVCMvszwfKtW','ExvPx3jLzL9PBq','A0zpCMe','u29NrgW','Bw92zs1JAgfYlq','zxiGlNn0lwnOyq','rNDNt28','z1HAuLK','BKrwugG','zxCTy29UDgfPBG','thjuExa','ihjLlxvWBg9Hza','BgfPx2nOyxjFCG','yxbWzw5K','y29TzNL1AwnHBG','zgf0yq','C3rVCMvszwfKvW','uuz2BgO','tg9HzgvKienVBq','wNj0tfi','B1PYAvi','CIaUC3qTy2HHDa','CgreBw4','zwXLy3qTy2HHCG','5zU+54Mh5Ase55cg5AsX6lsLoIa','Cuj3Cu0','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','qM9JvNq','txHNqwO','quzdweS','Aw1Hz2u','lxjLzI1PBwfNzq','CMv2B2TLt2jQzq','rwDJC3q','zMLUza','CuHjsNy','BMfPm0nOyxjszq','mtHwC3jru0W','uwP6yLC','mtu3mtqWmer5tNDbrW','C3rYAw5N','x3jLzG','qxfcBNG','zNLcr0e','i2nVBwz5DwKTAq','yNrU','vhnwt1q','tNbHzLK','tNfdrvK','y3rvuKW','ienVBwz5vuKGAq','uvDhC1O','mtm0otm0BhnKtNLm','Aw1Hz2uVCg5N','CKrnz0i','A3fXy3u','rurIvwW','BuDnz1G','zs1IDg4','DuX0Ce4','BM9Uzq','Df9UywLFy2HHCG','quPpD2y','zMzHt2u','AKjZCg8','ie5VDMvSquKGvG','uK9AD28','vuNLM77NIyC6ia','u1zkteW','A3HoEhO','y3jLyxrLt2jQzq','mJy2qNLzzLDd','CMn4D2m','CM1HDc4','uujNr1G','u3vOsMG','B25SB2fKzw5K','BwfNztO','y2fJAguGzM9YBq','ENfqBuS','x25HAv9JAgfYxW','y2fJAgvFBM92zq','vKDSuhe','CMvMigLTywDLoG','uNPJrKW','zKLTywDL','B0HrCfK','zgf0ytPPBwfNzq','y2r0qMW','zw1VDMuTAw1HzW','yxbWBhK','yxqUifbSzwfZzq','ANnVBG','rxjYB3iGBg9Hza','Bw92zs1PBwfNzq','wM5kCfO','Du9qAem','rxjYB3iGChjVyW','BMX5','DuHuz2C'];_0x5805=function(){return _0x117881;};return _0x5805();}import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0xae3fa8(0x276,0x24d,0x24c,0x1d8)+_0x3b0d41(0x482,0x449,0x4fc,0x43c)+_0xae3fa8(0x2b2,0x2ba,0x2ac,0x2bd)+_0x3b0d41(0x4ad,0x49d,0x470,0x4bb),NAI_CHAR_REF_CACHE_KEY=_0x3b0d41(0x45d,0x49a,0x47a,0x3e4)+_0x3b0d41(0x418,0x3bf,0x463,0x39f)+_0xae3fa8(0x2d1,0x218,0x266,0x20e),COMFYUI_REF_CACHE_KEY=_0xae3fa8(0x270,0x25c,0x28a,0x2d6)+_0xae3fa8(0x2d2,0x2c7,0x2fb,0x33e)+_0xae3fa8(0x2aa,0x2e5,0x29c,0x222);let nai3VibeTransferImageMimeType=_0xae3fa8(0x1d9,0x256,0x230,0x284),nai3CharRefImageMimeType='image/png',comfyuiImageObjectURL=null;function _0x3b0d41(_0x68198b,_0x63e99b,_0xcd0a3d,_0x592998){return _0x5a3f(_0x68198b-0x2a2,_0x63e99b);}function updateNovelaiImagePreview(_0x38920e){const _0x36b0d7={};_0x36b0d7[_0x21e46d(-0x36,-0xa3,-0x5f,-0x102)]='previewIma'+_0x21e46d(-0xfc,-0xa0,-0xa8,-0x81),_0x36b0d7[_0x2774f2(0x311,0x2d8,0x2cb,0x2ff)]=_0x2774f2(0x31f,0x332,0x366,0x35e)+_0x21e46d(-0xca,-0x84,-0xaf,-0xa8)+_0x2774f2(0x2e2,0x290,0x285,0x229)+_0x2774f2(0x323,0x33b,0x380,0x3c0)+_0x2774f2(0x2ef,0x2f0,0x338,0x351)+'placeholde'+'r',_0x36b0d7[_0x21e46d(-0x24,-0x38,-0x43,-0x87)]=_0x21e46d(-0x7d,-0x8a,-0xcc,-0xa3)+_0x2774f2(0x2f7,0x303,0x2da,0x2e9)+_0x2774f2(0x38b,0x2ce,0x32a,0x2f2);function _0x2774f2(_0x2ad4f6,_0x339a8a,_0x44e18a,_0x152489){return _0xae3fa8(_0x2ad4f6-0x31,_0x339a8a-0xcd,_0x44e18a-0x81,_0x2ad4f6);}_0x36b0d7[_0x21e46d(-0xcf,-0xb1,-0x90,-0x49)]=_0x2774f2(0x313,0x261,0x2d3,0x273),_0x36b0d7[_0x21e46d(-0x15a,-0xe1,-0xa7,-0x84)]='block',_0x36b0d7[_0x21e46d(-0xd6,-0xa6,-0xb2,-0x6e)]=_0x21e46d(-0xfe,-0xe4,-0xf5,-0x9f),_0x36b0d7[_0x2774f2(0x277,0x290,0x2ef,0x273)]=_0x2774f2(0x2b9,0x2ae,0x310,0x2f4)+'x',_0x36b0d7[_0x2774f2(0x309,0x3cc,0x360,0x319)]=_0x2774f2(0x378,0x32f,0x325,0x2ee);const _0x2969a8=_0x36b0d7,_0x32da46=document[_0x21e46d(0x23,-0x3d,0x1f,-0x9f)+_0x2774f2(0x2aa,0x339,0x2e0,0x356)](_0x2969a8[_0x21e46d(-0x49,-0xa3,-0x35,-0x117)]),_0x191566=document['querySelec'+_0x21e46d(-0x21,-0x75,-0x6,-0x80)](_0x2969a8[_0x21e46d(-0x80,-0xd1,-0x126,-0xa4)]);function _0x21e46d(_0x9ca2d4,_0x5256d1,_0x44c3e4,_0x33ad35){return _0xae3fa8(_0x9ca2d4-0x118,_0x5256d1-0x142,_0x5256d1- -0x31b,_0x33ad35);}const _0x6d4b6a=document[_0x21e46d(-0x77,-0x3d,0x29,-0x49)+_0x21e46d(-0x88,-0xbc,-0xef,-0xb9)](_0x2969a8[_0x2774f2(0x364,0x2fd,0x364,0x33d)]);if(_0x38920e&&_0x38920e[_0x2774f2(0x2d1,0x369,0x34f,0x2ec)](_0x2969a8[_0x2774f2(0x304,0x28d,0x2eb,0x303)])){_0x32da46['src']=_0x38920e,_0x32da46['style'][_0x21e46d(-0x8f,-0x29,0x32,-0x84)]=_0x2969a8['ffaOe'],_0x191566[_0x21e46d(-0x5f,-0x9f,-0xae,-0x74)][_0x2774f2(0x3ce,0x33f,0x373,0x3e1)]=_0x2969a8[_0x2774f2(0x27b,0x33f,0x2f6,0x301)],_0x6d4b6a[_0x21e46d(-0x22,-0x9f,-0x26,-0xa7)]['display']=_0x2969a8[_0x2774f2(0x309,0x339,0x2ef,0x2c1)];const _0x3acec2=_0x38920e[_0x2774f2(0x35c,0x369,0x36b,0x35c)](','),_0x20866e=_0x3acec2[-0x2512+0xf95+0x157d]['split'](':')[-0x1206+-0x226*0x9+0x255d][_0x21e46d(0x18,-0x31,-0x59,-0xb1)](';')[-0xdf9*0x2+-0x1*-0xff0+0x3a*0x35];nai3VibeTransferImageMimeType=_0x20866e,window['nai3VibeTr'+_0x2774f2(0x374,0x3bd,0x347,0x2fa)+'e']=_0x3acec2[0x7*0x1b8+-0x2633+0x1a2c];const _0x7a08d3={};_0x7a08d3['id']=NAI_VIBE_CACHE_KEY,_0x7a08d3[_0x2774f2(0x238,0x2a3,0x28b,0x218)]=_0x38920e,dbs['storeReadW'+'rite'](_0x7a08d3);}else{const _0x48f788='2|1|4|0|3'[_0x2774f2(0x3a2,0x3bd,0x36b,0x343)]('|');let _0x140427=-0x374+0x1052+-0xcde;while(!![]){switch(_0x48f788[_0x140427++]){case'0':_0x6d4b6a[_0x2774f2(0x302,0x2ab,0x2fd,0x2af)][_0x2774f2(0x32d,0x398,0x373,0x3eb)]=_0x21e46d(-0xd5,-0xe4,-0xd5,-0x107);continue;case'1':_0x32da46[_0x21e46d(-0x66,-0x9f,-0xa8,-0x81)][_0x2774f2(0x319,0x3d3,0x373,0x34e)]=_0x2969a8['RWdoU'];continue;case'2':_0x32da46['src']='';continue;case'3':window['nai3VibeTr'+_0x21e46d(-0x3c,-0x55,-0x8b,-0x20)+'e']=null;continue;case'4':_0x191566[_0x21e46d(-0xd6,-0x9f,-0x10b,-0xd5)][_0x2774f2(0x359,0x30e,0x373,0x309)]=_0x2969a8[_0x21e46d(-0x9c,-0x3c,-0xad,-0x62)];continue;}break;}}}function removeNovelaiImage(){function _0x49c518(_0x5ea6f3,_0x21c114,_0x28e492,_0x3c3ea9){return _0x3b0d41(_0x5ea6f3- -0x367,_0x28e492,_0x28e492-0x1b,_0x3c3ea9-0xf9);}const _0x5111e0={'REoTf':function(_0x2a15a3,_0x18bee9){return _0x2a15a3(_0x18bee9);}};_0x5111e0[_0x49c518(0x16a,0x1a6,0x131,0x168)](updateNovelaiImagePreview,null);function _0x32f185(_0x587f5a,_0x5e10aa,_0x2da8a6,_0xb7fdf1){return _0xae3fa8(_0x587f5a-0x9f,_0x5e10aa-0x5f,_0x2da8a6- -0x18b,_0x587f5a);}dbs[_0x49c518(0x143,0xdc,0x103,0x14d)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x4d0a4e){function _0x594e87(_0x523a0c,_0x4e9f89,_0x54fa35,_0x58c4b4){return _0xae3fa8(_0x523a0c-0x5,_0x4e9f89-0x72,_0x54fa35- -0x3db,_0x4e9f89);}const _0x1489bd={'iYHcO':_0x594e87(-0xc4,-0x17b,-0x137,-0x111),'EDbUl':'none','EUHeW':function(_0x36b8ea,_0x131c69){return _0x36b8ea===_0x131c69;},'OWeuy':function(_0x565ecf,_0x5caceb,_0xcf86eb){return _0x565ecf(_0x5caceb,_0xcf86eb);},'peYvC':function(_0x170879,_0x4c06a6){return _0x170879(_0x4c06a6);},'gjWip':_0xf062c3(-0x15b,-0x119,-0x108,-0x125)+_0xf062c3(-0xfc,-0x146,-0x15f,-0xd9)+_0xf062c3(-0x122,-0x13f,-0x13b,-0xee)+':','exFUs':function(_0x557298,_0x5306a6){return _0x557298(_0x5306a6);},'RGXet':function(_0x1e244c,_0xd680fd){return _0x1e244c+_0xd680fd;},'Blmyh':_0x594e87(-0x163,-0x169,-0x1c8,-0x1ae)};function _0xf062c3(_0x39bb29,_0x11191f,_0x5e32bd,_0x41b164){return _0x3b0d41(_0x39bb29- -0x5c8,_0x41b164,_0x5e32bd-0x78,_0x41b164-0xcc);}const _0x37a71e=_0x4d0a4e[_0xf062c3(-0xf2,-0x160,-0x85,-0x76)][_0x594e87(-0x1f1,-0x186,-0x178,-0x1f8)][0x2601+-0x5a2*0x5+-0x9d7];if(!_0x37a71e)return;try{if(_0x1489bd[_0xf062c3(-0xbe,-0x60,-0x5a,-0xb7)](_0x594e87(-0x213,-0x201,-0x1ca,-0x1fa),_0xf062c3(-0x14a,-0x101,-0xfd,-0x130))){const _0x434fda=_0xf062c3(-0x133,-0x19f,-0x139,-0x135)['split']('|');let _0x4bed4b=-0x1180+0x2317+0x5dd*-0x3;while(!![]){switch(_0x434fda[_0x4bed4b++]){case'0':_0x498e8[_0x594e87(-0x11a,-0x1af,-0x15f,-0x1a9)][_0xf062c3(-0xc5,-0x110,-0xd7,-0x85)]=_0x1489bd['iYHcO'];continue;case'1':_0x1f1fd1[_0xf062c3(-0x13b,-0x180,-0x163,-0x133)][_0xf062c3(-0xc5,-0x54,-0xbe,-0x55)]=_0x594e87(-0x1d5,-0x140,-0x1a4,-0x149);continue;case'2':_0x22efa6[_0xf062c3(-0x198,-0x199,-0x1c6,-0x166)+_0x594e87(-0x161,-0x1cb,-0x18b,-0x1a0)]=null;continue;case'3':_0x14c15b['src']='';continue;case'4':_0x466d02[_0x594e87(-0x1c7,-0x100,-0x15f,-0x160)][_0x594e87(-0x148,-0xe8,-0xe9,-0xcd)]=_0x1489bd[_0xf062c3(-0x184,-0x1e6,-0x1e5,-0x196)];continue;}break;}}else{const _0x17ca23=await _0x1489bd['OWeuy'](processUploadedImage,_0x37a71e,!![]);_0x1489bd[_0xf062c3(-0x127,-0x187,-0x121,-0x15e)](updateNovelaiImagePreview,_0x17ca23);}}catch(_0x2abed1){console[_0xf062c3(-0x114,-0x15d,-0x11a,-0x144)](_0x1489bd['gjWip'],_0x2abed1),_0x1489bd[_0xf062c3(-0x10a,-0x120,-0xbe,-0x100)](alert,_0x1489bd['RGXet'](_0x1489bd['Blmyh'],_0x2abed1[_0x594e87(-0x116,-0xd0,-0x139,-0x102)]));}}function updateNovelaiCharRefImagePreview(_0x49a1ea){const _0x103816={};_0x103816[_0x3641ff(0x4d1,0x49b,0x4a0,0x4b1)]=_0x4d1469(0x364,0x38a,0x36e,0x39a)+'ge_nai_cha'+_0x3641ff(0x4e3,0x4d7,0x4ce,0x475),_0x103816[_0x4d1469(0x2bf,0x2c8,0x25b,0x2c9)]=_0x3641ff(0x48d,0x42a,0x46d,0x4e0)+_0x3641ff(0x481,0x4b3,0x4e9,0x438)+_0x4d1469(0x35d,0x3be,0x33c,0x3af)+_0x4d1469(0x347,0x34e,0x2ff,0x3b8)+_0x4d1469(0x299,0x249,0x25d,0x23c)+_0x3641ff(0x4d8,0x49d,0x4ae,0x4b0)+_0x4d1469(0x2ed,0x2d6,0x360,0x315),_0x103816[_0x4d1469(0x30a,0x2d1,0x320,0x2f1)]=_0x3641ff(0x492,0x49d,0x4ad,0x471)+_0x4d1469(0x387,0x3a5,0x3c1,0x3a8)+_0x4d1469(0x314,0x2dd,0x2c7,0x29d)+_0x4d1469(0x2b1,0x269,0x248,0x25f),_0x103816[_0x3641ff(0x4b3,0x497,0x45b,0x494)]='data:image',_0x103816[_0x4d1469(0x2c8,0x2fc,0x33d,0x2b6)]=_0x4d1469(0x33d,0x394,0x376,0x3a5),_0x103816['Egcst']=_0x4d1469(0x29f,0x2fe,0x259,0x24e);function _0x3641ff(_0x307e4c,_0x1101f7,_0x2c51f1,_0xe6986d){return _0xae3fa8(_0x307e4c-0x37,_0x1101f7-0x104,_0x307e4c-0x201,_0xe6986d);}_0x103816[_0x4d1469(0x2a1,0x227,0x250,0x226)]=_0x4d1469(0x34b,0x31d,0x3c2,0x34e),_0x103816[_0x3641ff(0x47a,0x4d8,0x4d2,0x49f)]=_0x4d1469(0x32e,0x2cc,0x36c,0x35a),_0x103816[_0x4d1469(0x2bd,0x27b,0x298,0x286)]=_0x3641ff(0x438,0x4ae,0x49e,0x4a5),_0x103816['gXZRY']='flex';const _0x4d96a8=_0x103816;function _0x4d1469(_0x280ff0,_0x21bb07,_0x2e454c,_0x54e09d){return _0xae3fa8(_0x280ff0-0x116,_0x21bb07-0x1a8,_0x280ff0-0x89,_0x21bb07);}const _0xe66159=document[_0x3641ff(0x4df,0x548,0x484,0x475)+_0x4d1469(0x2e8,0x2f1,0x28b,0x34c)](_0x4d96a8[_0x3641ff(0x4d1,0x4ca,0x52e,0x539)]),_0x587a3f=document['querySelec'+_0x3641ff(0x4a7,0x4a7,0x450,0x516)](_0x4d96a8[_0x3641ff(0x437,0x446,0x3bc,0x459)]),_0x237b82=document[_0x4d1469(0x367,0x3a6,0x364,0x31c)+_0x4d1469(0x2e8,0x303,0x357,0x2ab)](_0x4d96a8[_0x4d1469(0x30a,0x298,0x2e3,0x2d2)]);if(_0x49a1ea&&_0x49a1ea[_0x3641ff(0x4cf,0x53b,0x482,0x516)](_0x4d96a8[_0x4d1469(0x33b,0x344,0x330,0x2cb)])){_0xe66159['src']=_0x49a1ea,_0xe66159['style'][_0x3641ff(0x4f3,0x542,0x4d0,0x48f)]=_0x4d96a8[_0x4d1469(0x2c8,0x2a5,0x2f9,0x287)],_0x587a3f[_0x3641ff(0x47d,0x414,0x425,0x4cd)][_0x4d1469(0x37b,0x36a,0x38a,0x345)]=_0x4d1469(0x2c0,0x27c,0x2df,0x28f),_0x237b82[_0x3641ff(0x47d,0x4c8,0x4b7,0x49c)]['display']=_0x4d1469(0x318,0x35f,0x2f3,0x2f8)+'x';const _0x5e5c2e=_0x49a1ea[_0x3641ff(0x4eb,0x47a,0x561,0x4fd)](','),_0x575360=_0x5e5c2e[-0x8f4+-0x25f2+0x2ee6][_0x4d1469(0x373,0x31a,0x3b8,0x379)](':')[0x255c+0x2365*-0x1+-0x1f6][_0x3641ff(0x4eb,0x486,0x533,0x4c2)](';')[0x26*-0x3b+-0x1306+0x1*0x1bc8];nai3CharRefImageMimeType=_0x575360,window[_0x3641ff(0x420,0x3a1,0x40b,0x3a4)+'fImage']=_0x5e5c2e[-0xc61*-0x3+0x707+-0x2c29];const _0x51b0e6={};_0x51b0e6['id']=NAI_CHAR_REF_CACHE_KEY,_0x51b0e6['data']=_0x49a1ea,dbs[_0x3641ff(0x40c,0x3b1,0x3e1,0x419)+'rite'](_0x51b0e6);}else{if(_0x4d96a8[_0x4d1469(0x2a5,0x255,0x24a,0x2a3)]!==_0x4d96a8[_0x3641ff(0x419,0x3e3,0x418,0x39b)]){const _0x4bfb01=_0x4d96a8[_0x4d1469(0x302,0x31b,0x348,0x2e3)][_0x3641ff(0x4eb,0x55f,0x534,0x47e)]('|');let _0x563b35=0x1a1d+-0x5c*0x49+0x1f*0x1;while(!![]){switch(_0x4bfb01[_0x563b35++]){case'0':_0x237b82['style'][_0x3641ff(0x4f3,0x485,0x4af,0x475)]=_0x4d96a8['mGMgX'];continue;case'1':_0x587a3f['style'][_0x4d1469(0x37b,0x384,0x311,0x346)]=_0x4d96a8[_0x4d1469(0x28b,0x28c,0x230,0x227)];continue;case'2':_0xe66159[_0x3641ff(0x47d,0x435,0x4da,0x44f)][_0x3641ff(0x4f3,0x4df,0x4e2,0x494)]=_0x4d1469(0x2c0,0x24e,0x2bf,0x2c2);continue;case'3':_0xe66159['src']='';continue;case'4':window[_0x3641ff(0x420,0x431,0x450,0x45b)+'fImage']=null;continue;}break;}}else _0x4838e8(_0x1cbf0f[_0x4d1469(0x293,0x217,0x25e,0x23a)]);}}function removeNovelaiCharRefImage(){function _0x371c0a(_0x44a6e2,_0x1f07b8,_0xaef20a,_0x153010){return _0xae3fa8(_0x44a6e2-0x79,_0x1f07b8-0xae,_0x1f07b8- -0x257,_0x153010);}function _0x20a66a(_0x90a369,_0x474a13,_0x100f1c,_0x243e67){return _0xae3fa8(_0x90a369-0x6c,_0x474a13-0x19,_0x100f1c- -0x30c,_0x474a13);}const _0x2036b8={'oHQpY':function(_0x4f7cd2,_0x45f8ba){return _0x4f7cd2(_0x45f8ba);}};_0x2036b8[_0x20a66a(-0xb4,-0xd7,-0xbb,-0xac)](updateNovelaiCharRefImagePreview,null),dbs[_0x371c0a(0x9f,0x42,0x26,0x8d)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0xd8705c){const _0x572969={'bUJLk':_0x24fda8(0x146,0x61,0x97,0xd0),'vPXlY':'none','SkiLQ':_0x94256b(-0x124,-0x1f3,-0x174,-0x1aa)+'x','QBgGX':function(_0x4ea041,_0x1c5f13){return _0x4ea041!==_0x1c5f13;},'ZXmOV':'UdcKh','TcBIo':function(_0x3f8315,_0x1c7ddc){return _0x3f8315(_0x1c7ddc);},'XzvPd':_0x94256b(-0x18b,-0x18e,-0x1a7,-0x1f6)+_0x94256b(-0x147,-0x127,-0x148,-0x1ae)+'elAI\x20char\x20'+_0x24fda8(0xa7,0x23,0x9c,0x6a),'NqCEY':_0x94256b(-0x1da,-0x25d,-0x1f0,-0x219)},_0x1d3563=_0xd8705c[_0x24fda8(0x12f,0x116,0x86,0xe1)][_0x24fda8(0xb4,0x1f,0xdd,0x7f)][0x1*-0x1c42+-0x1*0x5b1+0x21f3];function _0x24fda8(_0x2a76c7,_0x378d7e,_0x4b77d0,_0x3d4fa1){return _0xae3fa8(_0x2a76c7-0x149,_0x378d7e-0xff,_0x3d4fa1- -0x1e4,_0x2a76c7);}if(!_0x1d3563)return;function _0x94256b(_0x28e60e,_0x3b5414,_0x31c545,_0x3077a7){return _0x3b0d41(_0x31c545- -0x614,_0x3077a7,_0x31c545-0x47,_0x3077a7-0x14);}try{if(_0x572969[_0x24fda8(0x2f,0xa4,0x3f,0x61)](_0x572969[_0x24fda8(0xd8,0xc4,0x51,0xbc)],_0x24fda8(0x7c,0x130,0xb9,0xe9))){_0x5b497b[_0x24fda8(0x124,0x14d,0x14d,0xe6)]=_0x2e4357,_0x5eed59[_0x94256b(-0x1e8,-0x199,-0x187,-0x1f4)][_0x24fda8(0x10a,0x143,0x144,0x10e)]=_0x572969[_0x94256b(-0xe8,-0xee,-0x11a,-0x156)],_0x5194a1[_0x24fda8(0xab,0x106,0xd4,0x98)][_0x24fda8(0x93,0xbd,0x146,0x10e)]=_0x572969[_0x94256b(-0x12f,-0x199,-0x14e,-0xf7)],_0x232301[_0x94256b(-0x12f,-0x1cf,-0x187,-0x163)]['display']=_0x572969[_0x24fda8(0x13,0x57,0xc5,0x8f)];const _0x337f94=_0x1dda3a[_0x24fda8(0x105,0x92,0xd8,0x106)](','),_0x5d1bd2=_0x337f94[0x27*0xd7+0x21b2*0x1+-0x1*0x4273][_0x94256b(-0x150,-0x195,-0x119,-0x146)](':')[-0x45*0x4c+-0x7*0x7d+0x17e8][_0x24fda8(0xbd,0x10e,0xae,0x106)](';')[0xf65+-0x276*-0x8+-0x2315];_0x1417bc=_0x5d1bd2,_0x259fb9['nai3VibeTr'+_0x94256b(-0x1aa,-0xe3,-0x13d,-0xc8)+'e']=_0x337f94[0x1*0x97b+0x1047*0x1+-0x1*0x19c1];const _0x282d7a={};_0x282d7a['id']=_0x1c652f,_0x282d7a[_0x24fda8(0x5a,0x86,-0x15,0x26)]=_0x110c4a,_0x25aced['storeReadW'+_0x94256b(-0x195,-0x122,-0x12a,-0xb5)](_0x282d7a);}else{const _0x88282f=await processUploadedImage(_0x1d3563);_0x572969[_0x94256b(-0x17c,-0x16f,-0x19c,-0x14e)](updateNovelaiCharRefImagePreview,_0x88282f);}}catch(_0xc8b410){console[_0x24fda8(0xab,0xcc,0xc1,0xbf)](_0x572969[_0x94256b(-0x148,-0x1be,-0x181,-0x185)],_0xc8b410),_0x572969[_0x24fda8(0xae,0xd,0x82,0x83)](alert,_0x572969[_0x24fda8(0x85,0x5d,0x63,0x47)]+_0xc8b410[_0x24fda8(0xc5,0x7b,0xb6,0xbe)]);}}function updateComfyUIImagePreview(_0x6d25ce){const _0x358deb={};_0x358deb[_0x4810c0(0xbc,0xcb,0xb6,0xfe)]=_0x4810c0(0xdc,0x86,0x9c,0x101)+'ing\x20cached'+_0x46bf2d(0x181,0x13a,0x16e,0x168)+_0x46bf2d(0x1fb,0x242,0x1c4,0x238),_0x358deb[_0x4810c0(-0x10,0x60,-0x20,0xdf)]=_0x4810c0(0xd9,0x109,0x144,0xf1)+'ge2',_0x358deb[_0x46bf2d(0x1e5,0x295,0x220,0x288)]=_0x4810c0(0xd0,0x8f,0x57,0x95)+'move-image'+_0x46bf2d(0x1c7,0x1e7,0x1db,0x17f),_0x358deb[_0x4810c0(0x83,0xa4,0x11b,0x70)]=_0x46bf2d(0x179,0x18c,0x19d,0x1f1),_0x358deb['pRaRU']=function(_0x2c8b29,_0x568866){return _0x2c8b29===_0x568866;},_0x358deb['ynBze']=_0x46bf2d(0x17c,0x193,0x181,0x1bf),_0x358deb[_0x46bf2d(0x208,0x1aa,0x21a,0x1e5)]=_0x4810c0(0x103,0x106,0x15b,0x168),_0x358deb[_0x4810c0(0xc8,0x69,0xe1,0xc0)]='block';function _0x4810c0(_0x136fb9,_0x3ef0f0,_0x3bc4ca,_0x42de01){return _0xae3fa8(_0x136fb9-0x159,_0x3ef0f0-0x7d,_0x3ef0f0- -0x1d2,_0x42de01);}_0x358deb[_0x46bf2d(0x17f,0x141,0x16b,0x10c)]=_0x4810c0(0xaf,0x65,0x69,0xd3),_0x358deb[_0x4810c0(0x2e,0x3a,0x26,0x5)]='3|0|4|1|2|'+'5',_0x358deb[_0x4810c0(0x92,0x6e,0xd4,0x2)]='flex';const _0x73928=_0x358deb,_0x492430=document[_0x46bf2d(0x220,0x1b3,0x210,0x1ab)+_0x4810c0(0x27,0x8d,0x13,0x2f)](_0x73928['kqqcu']),_0x304e90=document[_0x4810c0(0x72,0xc6,0x12e,0x84)+'tor'](_0x4810c0(0x3,0x55,0x14,0x3c)+_0x46bf2d(0x1a9,0x1c6,0x1c9,0x1f7)+_0x4810c0(-0x9,0x32,0x48,0x7b)+_0x4810c0(0xe1,0x12d,0xda,0xc9)+_0x46bf2d(0x1c7,0x1cf,0x1e9,0x215)+'placeholde'+'r');function _0x46bf2d(_0x54ffac,_0x36ef54,_0x418352,_0x2c922e){return _0xae3fa8(_0x54ffac-0x7c,_0x36ef54-0x1c,_0x418352- -0xce,_0x54ffac);}const _0x36b2d1=document['getElement'+_0x4810c0(0x85,0x8d,0xa3,0xc3)](_0x73928[_0x46bf2d(0x275,0x1ae,0x220,0x26b)]);_0x492430[_0x4810c0(0x9c,0xf8,0x106,0x85)]&&_0x492430[_0x4810c0(0x167,0xf8,0xcf,0x122)][_0x4810c0(0x90,0xfc,0x117,0x17a)](_0x73928[_0x4810c0(0x4b,0xa4,0x85,0x96)])&&_0x492430[_0x46bf2d(0x263,0x1a4,0x1fc,0x216)]!==_0x6d25ce&&URL[_0x4810c0(0x6a,0x49,-0x12,-0x3)+_0x46bf2d(0x1b7,0x180,0x15e,0xe0)](_0x492430['src']);if(_0x6d25ce)_0x73928[_0x4810c0(0x83,0xbc,0x62,0xbc)](_0x73928[_0x46bf2d(0x18c,0x20b,0x1f6,0x180)],_0x73928['oVgIG'])?_0x5622ab[_0x46bf2d(0x1c8,0x1ba,0x1d5,0x1c5)](_0x73928[_0x46bf2d(0x227,0x1f1,0x1cf,0x1a0)],_0x4e8291):(_0x492430[_0x4810c0(0xd4,0xf8,0xd1,0x13b)]=_0x6d25ce,_0x492430[_0x4810c0(0xb3,0xaa,0x81,0x35)]['display']=_0x73928[_0x46bf2d(0x150,0x1e0,0x16d,0x1d4)],_0x304e90[_0x46bf2d(0x1f9,0x1f6,0x1ae,0x15b)]['display']=_0x73928[_0x46bf2d(0x112,0x110,0x16b,0x178)],_0x36b2d1[_0x46bf2d(0x224,0x1b0,0x1ae,0x162)][_0x46bf2d(0x1d2,0x204,0x224,0x226)]='inline-fle'+'x');else{const _0x2af4c3=_0x73928[_0x4810c0(0xaf,0x3a,-0x25,0x6c)][_0x46bf2d(0x1a1,0x1ef,0x21c,0x207)]('|');let _0x2cc798=-0x1778+0x1f75*-0x1+0x36ed;while(!![]){switch(_0x2af4c3[_0x2cc798++]){case'0':_0x492430[_0x4810c0(0x82,0xaa,0x59,0xc3)]['display']=_0x73928[_0x46bf2d(0x102,0xec,0x16b,0x147)];continue;case'1':_0x36b2d1[_0x46bf2d(0x171,0x1fe,0x1ae,0x221)][_0x4810c0(0xc2,0x120,0x18e,0x15d)]=_0x4810c0(-0x2,0x65,0x79,-0x6);continue;case'2':window[_0x4810c0(0x8d,0x37,0x9a,0x6f)+_0x46bf2d(0x14a,0x147,0x1b9,0x147)]=null;continue;case'3':_0x492430[_0x4810c0(0xad,0xf8,0x122,0xd8)]='';continue;case'4':_0x304e90[_0x4810c0(0xbe,0xaa,0x106,0xe0)][_0x46bf2d(0x23a,0x227,0x224,0x1be)]=_0x73928[_0x46bf2d(0x1bc,0x1e5,0x172,0x18d)];continue;case'5':comfyuiImageObjectURL=null;continue;}break;}}}function removeComfyUIImage(){function _0x2daa29(_0x327ae3,_0x52452f,_0x34e0da,_0x48794b){return _0xae3fa8(_0x327ae3-0x48,_0x52452f-0x2e,_0x34e0da-0x1b1,_0x48794b);}function _0x217bef(_0xf82b47,_0x3588ef,_0x2d7e4a,_0x13e6b6){return _0xae3fa8(_0xf82b47-0x1e1,_0x3588ef-0x28,_0x3588ef- -0x2a9,_0x13e6b6);}const _0x36f2a6={'zAMAp':function(_0x2d7d7e,_0x465838){return _0x2d7d7e(_0x465838);}};_0x36f2a6[_0x217bef(0x5b,-0x8,-0x22,0x36)](updateComfyUIImagePreview,null),dbs[_0x2daa29(0x441,0x3d0,0x44a,0x4b1)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x5740ba){function _0xbabad2(_0x58ab10,_0x36ae83,_0x3a0ae8,_0x571eeb){return _0xae3fa8(_0x58ab10-0x1cf,_0x36ae83-0xc3,_0x3a0ae8-0x247,_0x36ae83);}function _0x224305(_0x50f578,_0x33ceb7,_0xe4c4e8,_0x12ff6e){return _0xae3fa8(_0x50f578-0x71,_0x33ceb7-0x10f,_0x12ff6e- -0x9c,_0x50f578);}const _0x5166b7={'qBwqM':'#novelai-i'+_0xbabad2(0x4af,0x4e7,0x4de,0x480)+_0xbabad2(0x420,0x46a,0x44b,0x4c7)+_0x224305(0x229,0x223,0x1f0,0x263)+_0xbabad2(0x4d5,0x4e1,0x4fe,0x4ae)+_0xbabad2(0x56d,0x588,0x518,0x56c)+'r','JvLej':'data:image','Jdgdu':_0xbabad2(0x4da,0x407,0x47e,0x47f),'uOPhC':_0x224305(0x1a1,0x1d1,0x1a4,0x1f3)+'x','nDVPh':_0xbabad2(0x4e1,0x4c5,0x4eb,0x47e),'KmyEa':function(_0x500062,_0x2d4741){return _0x500062===_0x2d4741;},'jASVb':_0xbabad2(0x4ca,0x504,0x50a,0x4f9),'DANWV':function(_0x18c5e6,_0x1f932a){return _0x18c5e6(_0x1f932a);},'OWQNb':_0x224305(0x1d8,0x16b,0x159,0x17d),'FENCi':function(_0xd93096,_0x247ba1){return _0xd93096(_0x247ba1);},'cdtBl':'请先设置ComfyU'+_0xbabad2(0x48c,0x49b,0x503,0x4ba),'AqBnx':function(_0x745e39){return _0x745e39();},'ROZwo':function(_0x3e8811,_0x5a8a0c,_0x2cd523){return _0x3e8811(_0x5a8a0c,_0x2cd523);},'ZnJpZ':'POST','XfKEQ':function(_0x202fc5,_0x5a8701){return _0x202fc5(_0x5a8701);},'icfoW':_0xbabad2(0x57a,0x4f4,0x533,0x4c4)+'回数据:','ZrtLR':function(_0x3f85d2,_0x52c1f3){return _0x3f85d2+_0x52c1f3;},'auxBD':_0x224305(0x182,0x1c5,0x1ca,0x1d3),'QjzbW':function(_0x262df7,_0x5ac352){return _0x262df7(_0x5ac352);},'kFOra':'错误详情:','zjcgN':function(_0x3aca56){return _0x3aca56();},'soSYI':_0x224305(0x1a0,0x177,0x178,0x1d4)+':','dqPGj':function(_0x22c92d,_0x2a0492){return _0x22c92d(_0x2a0492);},'fyBGA':function(_0x127f94){return _0x127f94();}},_0x53e8ae=extension_settings[extensionName],_0x7b2d96=_0x5740ba[_0xbabad2(0x559,0x570,0x50c,0x518)][_0x224305(0x147,0x1c2,0x154,0x1c7)][0x1b76+0x54d+-0x20c3];if(!_0x7b2d96)return;try{if(_0x5166b7[_0x224305(0x1a1,0x20d,0x17e,0x1d6)](_0x5166b7[_0xbabad2(0x56e,0x4dc,0x4f1,0x51a)],_0x5166b7[_0xbabad2(0x4de,0x523,0x4f1,0x482)])){const _0x57ecba=await _0x5166b7['DANWV'](processUploadedImageToBlob,_0x7b2d96),_0x235dbe=URL['createObje'+_0xbabad2(0x43e,0x4ca,0x473,0x4ba)](_0x57ecba);comfyuiImageObjectURL=_0x235dbe,updateComfyUIImagePreview(_0x235dbe);const _0x35c8ff=new FormData();_0x35c8ff[_0xbabad2(0x444,0x407,0x44f,0x4be)](_0x5166b7['OWQNb'],_0x57ecba,_0x7b2d96[_0xbabad2(0x52f,0x48f,0x4e2,0x4da)]);let _0x187149=_0x53e8ae[_0x224305(0x29c,0x25b,0x1f7,0x251)]['trim']();if(!_0x187149){_0x5166b7['FENCi'](alert,_0x5166b7[_0x224305(0x1d9,0x1f9,0x19b,0x1b7)]),_0x5166b7[_0x224305(0x13e,0x191,0x12b,0x189)](removeComfyUIImage);return;}const _0x31274e=await _0x5166b7[_0x224305(0x1ec,0x179,0x1c6,0x1a1)](fetch,_0x187149+(_0x224305(0x23d,0x18e,0x1b6,0x1e1)+'age'),{'method':_0x5166b7[_0xbabad2(0x4f6,0x477,0x4a1,0x42a)],'body':_0x35c8ff});if(_0x31274e['ok']){const _0x3d274f=await _0x31274e[_0xbabad2(0x49c,0x4b7,0x49e,0x45b)]();window[_0x224305(0x14e,0x193,0x183,0x16d)+_0x224305(0x1b0,0x1d4,0x233,0x1eb)]=_0x3d274f[_0x224305(0x268,0x180,0x269,0x1ff)],_0x5166b7['XfKEQ'](addLog,_0xbabad2(0x461,0x3e5,0x45c,0x4da)+'器返回数据:\x20'+JSON[_0x224305(0x28b,0x1fd,0x2d3,0x259)](_0x3d274f)),console[_0xbabad2(0x4d9,0x487,0x4bb,0x50f)](_0x5166b7[_0x224305(0x27d,0x1c7,0x1f6,0x233)],_0x3d274f);const _0x169550=new FileReader();_0x169550[_0xbabad2(0x480,0x4dd,0x48e,0x502)]=()=>{const _0x422c4e=_0x169550[_0x4b1be0(0x56b,0x5b7,0x533,0x5e2)],_0x5abd6c={};_0x5abd6c[_0x140911(0x436,0x4e7,0x4aa,0x483)]=_0x422c4e;function _0x4b1be0(_0x38468d,_0x4cdc83,_0xafbdad,_0x24daaa){return _0x224305(_0x24daaa,_0x4cdc83-0xcf,_0xafbdad-0x1c4,_0x38468d-0x390);}_0x5abd6c[_0x4b1be0(0x5ac,0x546,0x571,0x5f5)+_0x4b1be0(0x5da,0x63f,0x5e9,0x5f8)]=_0x3d274f['name'];function _0x140911(_0x3abb31,_0x457ee9,_0x2c9ed4,_0x155026){return _0x224305(_0x457ee9,_0x457ee9-0x10b,_0x2c9ed4-0x16c,_0x155026-0x315);}const _0x50fba2=_0x5abd6c,_0x5290e1={};_0x5290e1['id']=COMFYUI_REF_CACHE_KEY,_0x5290e1[_0x140911(0x4ab,0x40a,0x441,0x483)]=_0x50fba2,dbs[_0x4b1be0(0x4ff,0x4d2,0x4c1,0x576)+_0x140911(0x557,0x54d,0x589,0x552)](_0x5290e1);},_0x169550[_0x224305(0x29a,0x253,0x2c2,0x25b)+_0x224305(0x237,0x264,0x1a3,0x1f8)](_0x57ecba);}else{const _0x1c5a1c=await _0x31274e['text']();_0x5166b7['DANWV'](alert,_0x5166b7[_0x224305(0x142,0x15d,0xf3,0x172)](_0x5166b7['auxBD'],_0x1c5a1c)),_0x5166b7[_0xbabad2(0x427,0x416,0x468,0x45c)](addLog,_0x224305(0x23b,0x215,0x18c,0x1de)+'详情:\x20'+_0x1c5a1c),console[_0x224305(0x1c0,0x205,0x18c,0x207)](_0x5166b7[_0xbabad2(0x507,0x593,0x543,0x581)],_0x1c5a1c),_0x5166b7[_0xbabad2(0x548,0x45a,0x4cd,0x4cc)](removeComfyUIImage);}}else{const _0x481b1b=_0x33e2ba[_0xbabad2(0x573,0x4de,0x525,0x523)+'ById'](_0x224305(0x203,0x279,0x286,0x23f)+'ge_novelai'),_0x16b945=_0x515235[_0x224305(0x241,0x196,0x239,0x1fc)+_0x224305(0x1f1,0x1c4,0x1de,0x20a)](_0x5166b7[_0x224305(0x150,0x1ae,0x12c,0x178)]),_0x56dd3c=_0x8a212d['getElement'+_0xbabad2(0x4ea,0x4b6,0x4a6,0x4c0)](_0x224305(0x227,0x20b,0x266,0x1f5)+_0x224305(0x222,0x18c,0x1dd,0x1bd)+_0xbabad2(0x551,0x495,0x4f0,0x4c4));if(_0x259db2&&_0x13f14c[_0xbabad2(0x54f,0x4a3,0x515,0x524)](_0x5166b7[_0x224305(0x23c,0x266,0x25a,0x24f)])){_0x481b1b[_0x224305(0x278,0x210,0x235,0x22e)]=_0x538ecc,_0x481b1b[_0xbabad2(0x443,0x4cd,0x4c3,0x50a)][_0xbabad2(0x56d,0x521,0x539,0x4ee)]=_0x224305(0x214,0x1e1,0x234,0x218),_0x16b945['style'][_0xbabad2(0x587,0x5a9,0x539,0x57f)]=_0x5166b7['Jdgdu'],_0x56dd3c[_0xbabad2(0x50c,0x4eb,0x4c3,0x525)][_0x224305(0x242,0x1df,0x281,0x256)]=_0x5166b7[_0xbabad2(0x463,0x428,0x4a2,0x4b2)];const _0x55fa17=_0x69884c[_0xbabad2(0x5b0,0x582,0x531,0x560)](','),_0x51713c=_0x55fa17[0x1*-0x1762+-0x1913+0xf*0x33b]['split'](':')[-0x2*0x599+0x11cf+0x1a7*-0x4][_0x224305(0x2ca,0x26c,0x26e,0x24e)](';')[0x2113+-0x1854+-0x1*0x8bf];_0x310dfe=_0x51713c,_0x2bd92e[_0x224305(0x20f,0x246,0x216,0x241)+_0xbabad2(0x543,0x4b7,0x50d,0x4de)+'e']=_0x55fa17[-0x126b+0x1*0x102b+0x241];const _0x412599={};_0x412599['id']=_0x2e6381,_0x412599[_0xbabad2(0x48a,0x4bf,0x451,0x403)]=_0x2464b9,_0x36b524['storeReadW'+'rite'](_0x412599);}else{const _0x25bd5d='3|2|4|0|1'['split']('|');let _0x1a7954=-0x851*-0x4+0x2c9+0x347*-0xb;while(!![]){switch(_0x25bd5d[_0x1a7954++]){case'0':_0x56dd3c[_0x224305(0x180,0x254,0x16c,0x1e0)]['display']=_0x5166b7[_0xbabad2(0x4c3,0x49e,0x4a7,0x478)];continue;case'1':_0x2610b1[_0x224305(0x1c4,0x220,0x29b,0x241)+_0xbabad2(0x4eb,0x510,0x50d,0x4ee)+'e']=null;continue;case'2':_0x481b1b[_0xbabad2(0x465,0x448,0x4c3,0x4c8)]['display']=_0x5166b7[_0xbabad2(0x460,0x4cf,0x4a7,0x448)];continue;case'3':_0x481b1b[_0x224305(0x268,0x1e1,0x225,0x22e)]='';continue;case'4':_0x16b945['style']['display']=_0x5166b7[_0xbabad2(0x442,0x3d8,0x44a,0x498)];continue;}break;}}}}catch(_0x2fc485){_0x5166b7['FENCi'](alert,_0x224305(0x198,0x16c,0x185,0x1d4)+':\x20'+_0x2fc485['message']),console['error'](_0x5166b7[_0x224305(0x233,0x26c,0x2bc,0x23e)],_0x2fc485),_0x5166b7['dqPGj'](addLog,'图片上传失败,\x20错误'+'详情:\x20'+JSON[_0x224305(0x27b,0x1eb,0x22a,0x259)](_0x2fc485)),_0x5166b7[_0xbabad2(0x4cb,0x49c,0x46d,0x41c)](removeComfyUIImage);}}async function loadCachedImages(){const _0x20a1a7={'VGlPq':_0x1c7c88(0x16d,0x187,0x1c3,0x19d)+'essing\x20Nov'+_0x188eb4(0x1ea,0x1f5,0x1ae,0x1ea)+':','mvEUq':function(_0x537e47,_0x41b8ad){return _0x537e47+_0x41b8ad;},'RMLYa':_0x188eb4(0x1d1,0x190,0x1cf,0x168),'JTZZe':'imageInput'+_0x1c7c88(0x1be,0x143,0x1b2,0x1a5)+_0x1c7c88(0x1d5,0x18c,0x206,0x20a),'DxZRc':_0x1c7c88(0x11a,0x1f9,0x198,0x1e0),'LpSqK':_0x188eb4(0x28f,0x216,0x221,0x231),'LrTyp':function(_0x56dd0a,_0x5dc4ca){return _0x56dd0a(_0x5dc4ca);},'dVkiO':function(_0x54eccc,_0x1f0ab7){return _0x54eccc!==_0x1f0ab7;},'SogDl':_0x1c7c88(0x192,0x1a8,0x1ad,0x200),'wdfca':_0x188eb4(0x1d8,0x24a,0x1ec,0x206),'TsVOT':function(_0x282b4e,_0x300ffa){return _0x282b4e(_0x300ffa);},'qHIJv':function(_0x59b6b5,_0x264cfd){return _0x59b6b5(_0x264cfd);},'oZriR':function(_0x2110dd,_0x3de3d7){return _0x2110dd===_0x3de3d7;},'pUOsp':_0x188eb4(0x166,0x164,0x1a3,0x178),'UhImj':function(_0x211f38,_0x3b8514){return _0x211f38(_0x3b8514);},'yemno':'Loaded\x20Com'+_0x188eb4(0x248,0x26f,0x1f8,0x227)+_0x1c7c88(0x1c8,0x2b2,0x23c,0x247)+_0x188eb4(0x1a2,0x12f,0x170,0x19e)+_0x188eb4(0x217,0x1df,0x149,0x1ab)+_0x188eb4(0x169,0x174,0x171,0x15b)+_0x188eb4(0x23a,0x291,0x1eb,0x221)+_0x1c7c88(0x2ae,0x1d3,0x23a,0x279)+'the\x20new\x20fo'+_0x188eb4(0x1b0,0x19f,0x122,0x199)};function _0x1c7c88(_0x24f9d9,_0xdb779b,_0x2144f9,_0x382d87){return _0xae3fa8(_0x24f9d9-0x11,_0xdb779b-0x33,_0x2144f9- -0x99,_0x24f9d9);}await dbs['openDB']();try{if(_0x20a1a7[_0x1c7c88(0x21e,0x1a2,0x216,0x1ce)]===_0x20a1a7[_0x188eb4(0x1ad,0x181,0x23e,0x1fd)])_0xf25c6f[_0x188eb4(0x265,0x18b,0x1af,0x1f8)](_0x20a1a7[_0x188eb4(0x1aa,0x172,0x208,0x1a2)],_0x18c144),_0x5f2680(_0x20a1a7['mvEUq'](_0x20a1a7[_0x1c7c88(0x21a,0x21d,0x205,0x213)],_0x130cfa[_0x188eb4(0x25e,0x272,0x240,0x1f7)]));else{const _0x2937c9=await dbs[_0x1c7c88(0x28e,0x245,0x261,0x2b0)+'nly'](NAI_VIBE_CACHE_KEY);_0x2937c9&&_0x2937c9[_0x188eb4(0x1db,0x171,0x16e,0x15f)]&&_0x20a1a7[_0x188eb4(0xe0,0x174,0x1c3,0x15a)](updateNovelaiImagePreview,_0x2937c9[_0x1c7c88(0x18c,0x181,0x171,0x1b1)]);}}catch(_0x5107d1){console[_0x1c7c88(0x19a,0x190,0x20a,0x210)]('Error\x20load'+_0x1c7c88(0x1fc,0x2c5,0x256,0x2c9)+_0x188eb4(0x1c2,0x1c7,0x1b4,0x191)+_0x1c7c88(0x1ae,0x1ae,0x1f9,0x1a7),_0x5107d1);}try{const _0x2c6d83=await dbs[_0x188eb4(0x26c,0x28e,0x1f6,0x24f)+_0x188eb4(0x16f,0x14a,0x18a,0x1b2)](NAI_CHAR_REF_CACHE_KEY);_0x2c6d83&&_0x2c6d83['data']&&(_0x20a1a7['dVkiO'](_0x20a1a7[_0x1c7c88(0x2de,0x287,0x264,0x1ed)],_0x20a1a7['wdfca'])?_0x20a1a7[_0x1c7c88(0x106,0x159,0x16c,0x151)](updateNovelaiCharRefImagePreview,_0x2c6d83[_0x188eb4(0x18a,0x192,0x1b5,0x15f)]):_0x342fab[_0x1c7c88(0x28d,0x1f1,0x245,0x213)+_0x1c7c88(0x1f4,0x20e,0x1c6,0x20f)](_0x20a1a7[_0x1c7c88(0x24b,0x21a,0x20e,0x1a2)])[_0x1c7c88(0x16d,0x154,0x1d3,0x15d)]());}catch(_0x435f82){console[_0x1c7c88(0x27e,0x1ea,0x20a,0x267)](_0x188eb4(0x18e,0x213,0x1bd,0x1ad)+_0x1c7c88(0x25c,0x263,0x256,0x2bf)+_0x188eb4(0x278,0x21d,0x1fc,0x21d)+'har\x20Ref\x20im'+_0x188eb4(0x261,0x284,0x21a,0x235),_0x435f82);}function _0x188eb4(_0x2fa05e,_0x289ce3,_0x436423,_0x4edb3c){return _0x3b0d41(_0x4edb3c- -0x2bc,_0x2fa05e,_0x436423-0x91,_0x4edb3c-0x135);}try{const _0x5e18d7=await dbs['storeReadO'+_0x1c7c88(0x172,0x16a,0x1c4,0x174)](COMFYUI_REF_CACHE_KEY);if(_0x5e18d7&&_0x5e18d7[_0x188eb4(0x133,0x18c,0x197,0x15f)]&&_0x5e18d7['data'][_0x188eb4(0x1b9,0x111,0x1d7,0x15f)]&&_0x5e18d7[_0x1c7c88(0x1de,0x16c,0x171,0x17c)][_0x1c7c88(0x229,0x26e,0x21f,0x20f)+_0x188eb4(0x2a3,0x234,0x1e6,0x23b)]){const _0x2479ac=_0x5e18d7[_0x1c7c88(0xf5,0x1eb,0x171,0x13e)],_0x51e0d1=await _0x20a1a7[_0x1c7c88(0x1da,0x1ca,0x190,0x1c4)](fetch,_0x2479ac[_0x1c7c88(0x112,0x127,0x171,0x19e)]),_0x533a3d=await _0x51e0d1[_0x1c7c88(0x208,0x279,0x215,0x196)](),_0x34c05f=URL[_0x188eb4(0x1a2,0x14b,0x174,0x196)+_0x188eb4(0x17e,0x1b5,0x1c4,0x181)](_0x533a3d);_0x20a1a7[_0x1c7c88(0x1a8,0x1b1,0x185,0x120)](updateComfyUIImagePreview,_0x34c05f),comfyuiImageObjectURL=_0x34c05f,window['comfyuican'+_0x188eb4(0x1a9,0x238,0x1f5,0x1dc)]=_0x2479ac['serverFile'+_0x1c7c88(0x1e7,0x1fa,0x24d,0x1de)],_0x20a1a7[_0x1c7c88(0x12c,0xf0,0x16c,0x13d)](addLog,'从缓存加载Comfy'+_0x1c7c88(0x17c,0x148,0x1a5,0x206)+_0x2479ac[_0x188eb4(0x1b7,0x218,0x273,0x20d)+'Name']),console[_0x188eb4(0x1a8,0x18a,0x1e2,0x1c9)](_0x1c7c88(0x15f,0x118,0x174,0x152)+'fyUI\x20image'+_0x1c7c88(0x1f8,0x1fa,0x23d,0x277)+_0x1c7c88(0x208,0x297,0x226,0x28f)+_0x2479ac[_0x1c7c88(0x25e,0x293,0x21f,0x24a)+'Name']);}else{if(_0x5e18d7&&_0x20a1a7[_0x188eb4(0xf3,0x1a1,0x112,0x164)](typeof _0x5e18d7[_0x1c7c88(0x1d9,0x12f,0x171,0x18c)],_0x20a1a7[_0x188eb4(0x178,0x22c,0x1ae,0x1bd)])){const _0x39d762=await fetch(_0x5e18d7[_0x188eb4(0x13a,0x129,0x189,0x15f)]),_0x7a3045=await _0x39d762[_0x1c7c88(0x211,0x23c,0x215,0x1f7)](),_0x38b4b2=URL[_0x1c7c88(0x223,0x1ed,0x1a8,0x201)+_0x1c7c88(0x159,0x194,0x193,0x156)](_0x7a3045);_0x20a1a7[_0x188eb4(0x1db,0x201,0x167,0x1da)](updateComfyUIImagePreview,_0x38b4b2),comfyuiImageObjectURL=_0x38b4b2,console['warn'](_0x20a1a7['yemno']);}}}catch(_0x1d4adf){console[_0x188eb4(0x1eb,0x214,0x1be,0x1f8)](_0x1c7c88(0x1b7,0x238,0x1bf,0x1ac)+'ing\x20cached'+_0x1c7c88(0x151,0x1b7,0x194,0x124)+_0x1c7c88(0x1fc,0x1c2,0x1af,0x1a5),_0x1d4adf);}}function _0x5a3f(_0xdffbbb,_0x5ece3e){_0xdffbbb=_0xdffbbb-(-0x2148+0x17f*0x8+0x340*0x7);const _0x52f24c=_0x5805();let _0x3749f8=_0x52f24c[_0xdffbbb];if(_0x5a3f['HWRNQr']===undefined){var _0x19c8c8=function(_0xaff0b1){const _0xf85c9e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4bf93c='',_0x13474a='',_0x47809c=_0x4bf93c+_0x19c8c8;for(let _0x38ecc8=-0xb05+-0x10de+-0x289*-0xb,_0x28f6cb,_0x1f8270,_0x27419a=0x12da+0xce7+0xb*-0x2e3;_0x1f8270=_0xaff0b1['charAt'](_0x27419a++);~_0x1f8270&&(_0x28f6cb=_0x38ecc8%(0x1d8c*-0x1+0x13*0x5e+0x1696)?_0x28f6cb*(-0xf45+0x2202+-0x127d)+_0x1f8270:_0x1f8270,_0x38ecc8++%(0x15f8+-0x1db0+0xdc*0x9))?_0x4bf93c+=_0x47809c['charCodeAt'](_0x27419a+(-0xb06+0x1be*0x16+0x4*-0x6d1))-(-0x7f*0x9+0x1a7b+-0x3a*0x61)!==0x1c98+0x19b7+-0x364f?String['fromCharCode'](-0x2dd+0x1992+-0x15b6&_0x28f6cb>>(-(-0x1c7e+-0x2f*0xc+0x3c*0x83)*_0x38ecc8&0x112*0x4+0x1a71+-0x1eb3)):_0x38ecc8:-0x16bc+0xa3*0x2b+0x29*-0x1d){_0x1f8270=_0xf85c9e['indexOf'](_0x1f8270);}for(let _0x31e58a=-0x7d9*-0x4+-0x1*0x1b62+-0x1*0x402,_0x371ceb=_0x4bf93c['length'];_0x31e58a<_0x371ceb;_0x31e58a++){_0x13474a+='%'+('00'+_0x4bf93c['charCodeAt'](_0x31e58a)['toString'](-0x1*0x941+-0x3f1*0x2+0x1133))['slice'](-(0x1c97+0xbc1+-0x2856*0x1));}return decodeURIComponent(_0x13474a);};_0x5a3f['spmwrV']=_0x19c8c8,_0x5a3f['DzRhHa']={},_0x5a3f['HWRNQr']=!![];}const _0x591a79=_0x52f24c[-0xc0e+0x1033*0x1+-0x1*0x425],_0x2ed59a=_0xdffbbb+_0x591a79,_0x2aff43=_0x5a3f['DzRhHa'][_0x2ed59a];if(!_0x2aff43){const _0x11c790=function(_0x593a8b){this['thCYax']=_0x593a8b,this['LBTijZ']=[0x26b4+0x1bc5+-0x4278,-0x83f+-0x834+0x1073,-0x1*0xde4+0x1a*-0xcb+0x277*0xe],this['iOUEUh']=function(){return'newState';},this['VLzRfk']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['IaxNPN']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x11c790['prototype']['luWCIr']=function(){const _0x37bde8=new RegExp(this['VLzRfk']+this['IaxNPN']),_0x53e5bf=_0x37bde8['test'](this['iOUEUh']['toString']())?--this['LBTijZ'][-0x1*-0x2cb+-0x4*-0x4dc+-0x163a]:--this['LBTijZ'][0x4*0x641+-0x1*-0x959+-0x225d];return this['VwaXVL'](_0x53e5bf);},_0x11c790['prototype']['VwaXVL']=function(_0x539b27){if(!Boolean(~_0x539b27))return _0x539b27;return this['fHRfNk'](this['thCYax']);},_0x11c790['prototype']['fHRfNk']=function(_0xc25af6){for(let _0x29b9ea=-0x12ca+0x26e3+-0x1*0x1419,_0x30d56d=this['LBTijZ']['length'];_0x29b9ea<_0x30d56d;_0x29b9ea++){this['LBTijZ']['push'](Math['round'](Math['random']())),_0x30d56d=this['LBTijZ']['length'];}return _0xc25af6(this['LBTijZ'][-0x10d+0xdbe+0x13*-0xab]);},new _0x11c790(_0x5a3f)['luWCIr'](),_0x3749f8=_0x5a3f['spmwrV'](_0x3749f8),_0x5a3f['DzRhHa'][_0x2ed59a]=_0x3749f8;}else _0x3749f8=_0x2aff43;return _0x3749f8;}export function initImageUpload(_0x1e3f25){const _0x103478={'uHTgg':_0x5a6de0(0x5c7,0x5f9,0x63c,0x57c)+'_novelai','EmWWP':function(_0x5660d7){return _0x5660d7();},'rcxwc':function(_0x1ab1ea,_0x424655){return _0x1ab1ea===_0x424655;},'qjvNe':_0x5a6de0(0x672,0x5f7,0x607,0x5c1),'WWFTR':_0x8c1152(0x5ea,0x585,0x551,0x5e8)+'2','uRRVB':_0x5a6de0(0x5e2,0x620,0x5de,0x621)+_0x5a6de0(0x530,0x5ae,0x55a,0x625)+_0x5a6de0(0x59b,0x565,0x512,0x514),'NpafY':'click','FwgOo':_0x5a6de0(0x607,0x624,0x664,0x5dd),'kdHHe':_0x5a6de0(0x5a7,0x5b8,0x552,0x59f)+_0x8c1152(0x562,0x510,0x57b,0x56e)+_0x8c1152(0x554,0x4f1,0x514,0x505),'JFrSS':'#imageInpu'+_0x5a6de0(0x5b8,0x568,0x589,0x4f6)+_0x8c1152(0x53b,0x4e0,0x534,0x4f7),'iOBMx':'#novelai-r'+'emove-char'+_0x8c1152(0x537,0x4d6,0x482,0x4ea)+_0x8c1152(0x524,0x565,0x549,0x5b0),'udlGN':_0x8c1152(0x566,0x5a0,0x563,0x551)+'elect-imag'+_0x5a6de0(0x5c3,0x565,0x504,0x578),'lGviM':'#imageInpu'+'t2','QWGsZ':'#comfyui-r'+_0x8c1152(0x49b,0x510,0x4ea,0x513)+_0x5a6de0(0x528,0x565,0x4e8,0x5aa)};_0x103478[_0x5a6de0(0x60a,0x5b9,0x558,0x5a4)](loadCachedImages),_0x1e3f25[_0x5a6de0(0x4ed,0x54d,0x4dd,0x5bf)](_0x103478[_0x8c1152(0x586,0x5af,0x5a0,0x596)])['on'](_0x103478[_0x5a6de0(0x594,0x55a,0x563,0x4e8)],()=>{function _0x3d003d(_0x25f2ec,_0x639d27,_0x5826ea,_0x27d6f3){return _0x8c1152(_0x25f2ec-0x17c,_0x639d27- -0x35b,_0x27d6f3,_0x27d6f3-0x1af);}function _0x24f7dd(_0xb4600d,_0x15a10c,_0x491a2f,_0x38ec59){return _0x8c1152(_0xb4600d-0xa0,_0x15a10c- -0x1f3,_0xb4600d,_0x38ec59-0x1eb);}document[_0x3d003d(0x295,0x23f,0x271,0x269)+'ById'](_0x103478[_0x24f7dd(0x2bc,0x327,0x2c9,0x38f)])[_0x24f7dd(0x2b6,0x335,0x2be,0x30d)]();});function _0x8c1152(_0x2289cc,_0x9b10e2,_0x5275d1,_0x14e067){return _0xae3fa8(_0x2289cc-0x1b1,_0x9b10e2-0x12d,_0x9b10e2-0x2bc,_0x5275d1);}_0x1e3f25[_0x8c1152(0x4f1,0x4d9,0x50c,0x4f1)](_0x5a6de0(0x5b4,0x595,0x5e1,0x5f5)+_0x8c1152(0x58a,0x56f,0x582,0x5d9))['on'](_0x103478['FwgOo'],handleNovelaiImageUpload),_0x1e3f25[_0x8c1152(0x4c9,0x4d9,0x4d1,0x544)](_0x103478[_0x5a6de0(0x5af,0x5e6,0x5ae,0x664)])['on'](_0x103478[_0x5a6de0(0x569,0x55a,0x4e2,0x4f6)],()=>{function _0x4cd713(_0x22b353,_0x52736e,_0x8127b1,_0x4b5af1){return _0x8c1152(_0x22b353-0xea,_0x22b353- -0x103,_0x4b5af1,_0x4b5af1-0x57);}_0x103478[_0x4cd713(0x442,0x4bb,0x40a,0x3df)](removeNovelaiImage);}),_0x1e3f25['find'](_0x8c1152(0x5cb,0x5ac,0x619,0x5d1)+_0x5a6de0(0x531,0x542,0x5a3,0x50a)+'-ref-image'+_0x8c1152(0x514,0x565,0x58c,0x512))['on'](_0x103478[_0x8c1152(0x52b,0x4e6,0x561,0x546)],()=>{function _0x12b69b(_0x50e3ea,_0x128612,_0x1064b8,_0x3d2f96){return _0x5a6de0(_0x1064b8,_0x50e3ea- -0x53a,_0x1064b8-0x33,_0x3d2f96-0x7f);}const _0x2a4aaf={'MhElY':function(_0x356ddb){function _0x24fbce(_0x57e07f,_0x2f0270,_0x2e98ec,_0x56916a){return _0x5a3f(_0x56916a- -0x1e,_0x57e07f);}return _0x103478[_0x24fbce(0x19a,0x183,0x20d,0x1da)](_0x356ddb);}};function _0x10856a(_0x372a71,_0x392088,_0x4404f8,_0x4f7283){return _0x5a6de0(_0x4404f8,_0x392088- -0x338,_0x4404f8-0xd4,_0x4f7283-0xa6);}_0x103478[_0x10856a(0x1ef,0x23b,0x265,0x1e5)](_0x103478[_0x10856a(0x31a,0x2a3,0x2b9,0x2b1)],_0x12b69b(0xa6,0xd7,0xae,0xd6))?_0x2a4aaf[_0x10856a(0x32f,0x2b1,0x283,0x27a)](_0x43a0b6):document[_0x10856a(0x338,0x2d6,0x338,0x33a)+'ById']('imageInput'+_0x10856a(0x1f8,0x243,0x299,0x1c8)+_0x12b69b(0x95,0x83,0xc9,0x57))[_0x10856a(0x1f9,0x264,0x23f,0x2cc)]();}),_0x1e3f25['find'](_0x103478[_0x8c1152(0x575,0x5b4,0x601,0x607)])['on'](_0x103478[_0x8c1152(0x44f,0x4bd,0x47c,0x464)],handleNovelaiCharRefImageUpload),_0x1e3f25[_0x5a6de0(0x588,0x54d,0x548,0x5b3)](_0x103478['iOBMx'])['on'](_0x103478[_0x5a6de0(0x54e,0x55a,0x564,0x500)],()=>{function _0x109e26(_0x5b42b3,_0xc2d47e,_0x1f89d8,_0x475b23){return _0x8c1152(_0x5b42b3-0x17a,_0x475b23- -0x104,_0x1f89d8,_0x475b23-0x107);}_0x103478[_0x109e26(0x458,0x431,0x3cf,0x441)](removeNovelaiCharRefImage);});function _0x5a6de0(_0x3b7015,_0x49b171,_0x506f12,_0x4836fd){return _0x3b0d41(_0x49b171-0x11f,_0x3b7015,_0x506f12-0x128,_0x4836fd-0x169);}_0x1e3f25['find'](_0x103478[_0x8c1152(0x57c,0x5b2,0x564,0x5d9)])['on'](_0x5a6de0(0x601,0x59c,0x560,0x613),()=>{function _0x1ce473(_0x376ace,_0x1e47f3,_0x36c525,_0x3cf707){return _0x8c1152(_0x376ace-0xa2,_0x36c525- -0x21a,_0x1e47f3,_0x3cf707-0x14c);}function _0x40003e(_0x1f8a6e,_0x3b7803,_0x47431d,_0x78c46e){return _0x5a6de0(_0x3b7803,_0x78c46e- -0x34a,_0x47431d-0xd3,_0x78c46e-0x134);}document[_0x1ce473(0x38b,0x355,0x380,0x3dd)+'ById'](_0x103478[_0x40003e(0x2a5,0x29a,0x276,0x279)])[_0x1ce473(0x346,0x2e6,0x30e,0x38a)]();}),_0x1e3f25[_0x8c1152(0x471,0x4d9,0x517,0x485)](_0x103478[_0x8c1152(0x5b5,0x53f,0x516,0x5a5)])['on'](_0x103478[_0x8c1152(0x4da,0x4bd,0x4ab,0x451)],handleImageUpload2),_0x1e3f25[_0x8c1152(0x531,0x4d9,0x4d6,0x45d)](_0x103478[_0x8c1152(0x51d,0x4ea,0x55d,0x4b8)])['on'](_0x103478[_0x5a6de0(0x577,0x55a,0x552,0x5bd)],()=>{_0x103478['EmWWP'](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};