(function(_0x461a02,_0x315b89){function _0x1fba0c(_0x257845,_0x39ee7a,_0x1acbd1,_0x5b5b04){return _0x17dd(_0x257845-0x1c6,_0x39ee7a);}function _0x19128a(_0x37d0fc,_0x1fca59,_0x1cc455,_0x271324){return _0x17dd(_0x1cc455-0x240,_0x37d0fc);}const _0x5d6f2a=_0x461a02();while(!![]){try{const _0x19322d=parseInt(_0x19128a(0x408,0x387,0x3f3,0x456))/(-0x125f+-0x28*-0x4f+0x608)*(-parseInt(_0x1fba0c(0x3e7,0x3ef,0x407,0x464))/(0xf5b+0x655+-0x15ae))+-parseInt(_0x1fba0c(0x2f3,0x2e9,0x2fd,0x378))/(-0x151*-0x2+0x16a1+0x194*-0x10)+parseInt(_0x1fba0c(0x3ee,0x437,0x443,0x368))/(-0xff9+0x5d3*0x1+0xa2a)*(-parseInt(_0x1fba0c(0x349,0x35e,0x376,0x2fe))/(-0x1ad6+-0x449*0x1+0x1f24))+parseInt(_0x19128a(0x3e1,0x4aa,0x466,0x4e4))/(0xd11+-0x20f0*-0x1+-0x2dfb)+parseInt(_0x19128a(0x3fe,0x3e1,0x445,0x410))/(-0x19*-0x82+0x17*0x14d+-0x6*0x719)+parseInt(_0x1fba0c(0x382,0x3be,0x388,0x3f0))/(0x1032+0x2153+0x3*-0x107f)*(-parseInt(_0x1fba0c(0x3b9,0x431,0x3d9,0x3c5))/(0x2100+0x1a15*0x1+-0x3b0c))+parseInt(_0x1fba0c(0x39a,0x3ff,0x3d1,0x33b))/(0xa9*0x17+-0x2668+0x1743);if(_0x19322d===_0x315b89)break;else _0x5d6f2a['push'](_0x5d6f2a['shift']());}catch(_0x13d3af){_0x5d6f2a['push'](_0x5d6f2a['shift']());}}}(_0x39ca,0x65c39+-0x76f12+0xaf2b5));const _0x1df54b=(function(){const _0x6ff267={};_0x6ff267[_0x19d116(-0x1da,-0x153,-0x1cf,-0x18e)]=_0x19d116(0x18,-0x64,-0xc5,-0x9e);function _0x1d9db5(_0x494863,_0x47c128,_0x115235,_0x3a9ef5){return _0x17dd(_0x115235- -0x2b3,_0x47c128);}_0x6ff267['IxqWw']=_0x19d116(-0xe3,-0xc7,-0x64,-0x9c),_0x6ff267[_0x19d116(-0xce,-0x113,-0x157,-0xe3)]=function(_0x1a73e8,_0x3af118){return _0x1a73e8===_0x3af118;};function _0x19d116(_0x2652cd,_0x3893e4,_0x3412d6,_0x428430){return _0x17dd(_0x3893e4- -0x28d,_0x3412d6);}_0x6ff267[_0x1d9db5(-0xf9,-0x138,-0x166,-0x140)]=function(_0x3b4a3b,_0x3ca147){return _0x3b4a3b===_0x3ca147;},_0x6ff267[_0x19d116(-0x1df,-0x171,-0x115,-0x1cf)]='cVaBR';const _0x273f66=_0x6ff267;let _0x436d4b=!![];return function(_0x59ed1a,_0x2c9654){function _0x346779(_0x58c43f,_0x316c89,_0x5f5de0,_0x19930c){return _0x19d116(_0x58c43f-0x3b,_0x19930c-0x47e,_0x58c43f,_0x19930c-0x85);}function _0x57a50a(_0x5572e5,_0x3c2556,_0x204404,_0x36e90c){return _0x19d116(_0x5572e5-0x5,_0x36e90c-0x222,_0x5572e5,_0x36e90c-0xa0);}const _0x309ec1={'ivjvz':_0x273f66[_0x57a50a(0x13c,0x8e,0xbb,0xcf)],'cGdhF':_0x273f66[_0x57a50a(0x102,0x15d,0x11b,0x14c)],'xYmiT':function(_0x51d835,_0x39d611){return _0x273f66['ooAyO'](_0x51d835,_0x39d611);},'xMFse':_0x57a50a(0x174,0x13c,0x177,0x1b7)};if(_0x273f66[_0x57a50a(0xbd,0x94,0xaa,0xe2)](_0x273f66[_0x346779(0x389,0x2a8,0x381,0x30d)],_0x273f66[_0x57a50a(0x9f,0x45,0x2d,0xb1)])){const _0x1f455f=_0x436d4b?function(){function _0x10c641(_0x29f64d,_0x29903b,_0x5f0baa,_0x102327){return _0x346779(_0x102327,_0x29903b-0x108,_0x5f0baa-0x39,_0x29f64d- -0x103);}function _0x4d5609(_0x2cba02,_0x23f1e1,_0x5608ea,_0x3c2316){return _0x57a50a(_0x3c2316,_0x23f1e1-0x9e,_0x5608ea-0x126,_0x2cba02-0x36c);}if(_0x309ec1['xYmiT'](_0x309ec1[_0x4d5609(0x487,0x4b1,0x4e1,0x447)],_0x309ec1[_0x4d5609(0x487,0x4a7,0x4cb,0x41e)])){if(_0x2c9654){const _0x154279=_0x2c9654[_0x4d5609(0x432,0x3de,0x463,0x4bb)](_0x59ed1a,arguments);return _0x2c9654=null,_0x154279;}}else _0x46c7d5[_0x4d5609(0x4c2,0x464,0x527,0x4c5)]='',_0x431c31[_0x10c641(0x25e,0x2d1,0x25f,0x2e4)][_0x10c641(0x29b,0x308,0x2b6,0x31c)]=_0x10c641(0x2b4,0x271,0x235,0x237),_0x1500cb[_0x4d5609(0x471,0x420,0x3e8,0x42c)]['display']=_0x309ec1[_0x10c641(0x259,0x2a5,0x1f5,0x28b)],_0x1d3b55[_0x4d5609(0x471,0x4f6,0x456,0x4f6)][_0x4d5609(0x4ae,0x525,0x4fe,0x4ff)]=_0x309ec1[_0x4d5609(0x4d1,0x46d,0x460,0x47d)],_0x2c8f4e[_0x10c641(0x27c,0x2a6,0x278,0x23b)+_0x10c641(0x231,0x2a0,0x204,0x1b9)+'e']=null;}:function(){};return _0x436d4b=![],_0x1f455f;}else{const _0x572d8d=_0x4227d7[_0x346779(0x349,0x2c8,0x34b,0x322)](_0x56de89,arguments);return _0x487a87=null,_0x572d8d;}};}()),_0x270f7e=_0x1df54b(this,function(){function _0x2085df(_0xb1e7f3,_0x5f589b,_0x158ebb,_0x254142){return _0x17dd(_0x254142-0x8f,_0x5f589b);}const _0x9a551d={};function _0x4980e2(_0x34b8f4,_0x4483a9,_0x54a297,_0x5d6862){return _0x17dd(_0x5d6862- -0x21,_0x4483a9);}_0x9a551d[_0x2085df(0x162,0x1d5,0x187,0x1eb)]='(((.+)+)+)'+'+$';const _0x162e4d=_0x9a551d;return _0x270f7e[_0x2085df(0x22d,0x1c7,0x1d9,0x218)]()[_0x2085df(0x20f,0x165,0x19d,0x1ba)](_0x162e4d['RZXDw'])[_0x4980e2(0xe9,0x14a,0x1f1,0x168)]()[_0x2085df(0x1e6,0x21b,0x2b7,0x239)+'r'](_0x270f7e)['search'](_0x162e4d['RZXDw']);});_0x270f7e();function _0x17aa11(_0x11cd5c,_0x726cb5,_0x3edd1b,_0x2b7fdf){return _0x17dd(_0x726cb5-0x5,_0x2b7fdf);}import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY='cache_nove'+_0x245c25(0x3e3,0x44b,0x46b,0x3f9)+_0x245c25(0x452,0x4af,0x4b8,0x49e)+_0x17aa11(0xff,0x140,0x12f,0x11b),NAI_CHAR_REF_CACHE_KEY=_0x17aa11(0x22e,0x1ef,0x26c,0x237)+_0x245c25(0x414,0x3ad,0x42d,0x42c)+_0x17aa11(0x205,0x22a,0x20b,0x21f),COMFYUI_REF_CACHE_KEY=_0x245c25(0x429,0x3e8,0x427,0x3ce)+'yui_ref_im'+_0x17aa11(0x103,0x140,0x17e,0x10f);function _0x17dd(_0x2472aa,_0x4ae144){const _0x55ce11=_0x39ca();return _0x17dd=function(_0x58f440,_0x54f991){_0x58f440=_0x58f440-(0xabf+-0xec0+0x519);let _0x270f1f=_0x55ce11[_0x58f440];if(_0x17dd['VYXVuH']===undefined){var _0x3ed735=function(_0x4b924d){const _0x451bd9='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2704ce='',_0x18c096='',_0x231a4f=_0x2704ce+_0x3ed735;for(let _0x2422e7=0x1*0x847+-0x1385+-0x1*-0xb3e,_0x4efce1,_0x2bd8a1,_0xd69896=-0x1fcc+-0x6*-0x62f+-0x54e;_0x2bd8a1=_0x4b924d['charAt'](_0xd69896++);~_0x2bd8a1&&(_0x4efce1=_0x2422e7%(-0x2*-0x1381+-0xe2a+-0x18d4)?_0x4efce1*(-0xadb+0x1*0xe57+-0x33c)+_0x2bd8a1:_0x2bd8a1,_0x2422e7++%(0x123*0x7+-0x25c*-0x5+-0x13bd))?_0x2704ce+=_0x231a4f['charCodeAt'](_0xd69896+(0x84c*0x3+-0x2*0x19e+0x1*-0x159e))-(0x12c9+0x25*-0xee+0xfa7)!==-0x2*-0xa28+-0x1e70+-0x12*-0x90?String['fromCharCode'](-0x20ba+-0x1ca2+-0x3ab*-0x11&_0x4efce1>>(-(-0xd*-0x275+0x6a*0x4c+-0x3f67*0x1)*_0x2422e7&0x23dd+-0x8b*0x44+0x115)):_0x2422e7:-0x220f*-0x1+-0x24aa+0x29b){_0x2bd8a1=_0x451bd9['indexOf'](_0x2bd8a1);}for(let _0x1c0ba6=0x1587+-0x76*-0xf+-0x1c71*0x1,_0x2da9ea=_0x2704ce['length'];_0x1c0ba6<_0x2da9ea;_0x1c0ba6++){_0x18c096+='%'+('00'+_0x2704ce['charCodeAt'](_0x1c0ba6)['toString'](0x1be6*-0x1+-0x4c9+0x1*0x20bf))['slice'](-(-0x26a5+-0x25b4+0x4c5b));}return decodeURIComponent(_0x18c096);};_0x17dd['uPgGcl']=_0x3ed735,_0x2472aa=arguments,_0x17dd['VYXVuH']=!![];}const _0xf1f7f1=_0x55ce11[-0x3a+-0x408*-0x7+0x1bfe*-0x1],_0x234b96=_0x58f440+_0xf1f7f1,_0x19cec4=_0x2472aa[_0x234b96];if(!_0x19cec4){const _0x261f6e=function(_0x349ef0){this['xXHluR']=_0x349ef0,this['oUzLnm']=[-0x728+0x85*0x1a+-0x7d*0xd,0x7d7*0x3+-0x20f*-0x5+-0x21d0,-0x7cf*0x4+0x12eb+0xc51],this['hgjiqO']=function(){return'newState';},this['yRirPf']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['tUYDKe']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x261f6e['prototype']['tsyrBK']=function(){const _0x61ac9b=new RegExp(this['yRirPf']+this['tUYDKe']),_0x18f94e=_0x61ac9b['test'](this['hgjiqO']['toString']())?--this['oUzLnm'][-0x1c51+0x14c1+0x791]:--this['oUzLnm'][0xfc7+-0x503+-0xac4];return this['kftefQ'](_0x18f94e);},_0x261f6e['prototype']['kftefQ']=function(_0x259a2e){if(!Boolean(~_0x259a2e))return _0x259a2e;return this['xFwWwn'](this['xXHluR']);},_0x261f6e['prototype']['xFwWwn']=function(_0x3a18dd){for(let _0x4e0956=0x24a7+0x1445+-0x38ec,_0x161bd2=this['oUzLnm']['length'];_0x4e0956<_0x161bd2;_0x4e0956++){this['oUzLnm']['push'](Math['round'](Math['random']())),_0x161bd2=this['oUzLnm']['length'];}return _0x3a18dd(this['oUzLnm'][-0x1635*-0x1+-0x4*-0x85d+-0x37a9]);},new _0x261f6e(_0x17dd)['tsyrBK'](),_0x270f1f=_0x17dd['uPgGcl'](_0x270f1f),_0x2472aa[_0x234b96]=_0x270f1f;}else _0x270f1f=_0x19cec4;return _0x270f1f;},_0x17dd(_0x2472aa,_0x4ae144);}function _0x39ca(){const _0x3a782a=['ufDUtLK','DhjPBq','B3DesNi','Aw1Hz2uVCg5N','6k+35ywi6k6+572Uq29TzNLv','yw5ZzMvYsw1HzW','z2v0rwXLBwvUDa','s3jmvKK','zgf0yq','uhriugm','CMv2B2TLt2jQzq','ssbbueNLNldLNydJGii','Dg1cB1m','ser0wKC','5zU+54Mh5Ase55cg5AsX6lsLoIa','C3zODwK','CvfVtue','CMvHzefZrgf0yq','Df9UywLFy2HHCG','Bg9N','DgfYz2v0','DY1JB250ywLUzq','u1Liwee','CgXHy2vOB2XKzq','u1rYBeS','C3rVCMvszwfKtW','ExbiAg4','AxburxC','Aw1Hz2u','y1nbsxy','uLPyrhC','C1jgqK4','vuNLM77NIyC6ia','yxbWzw5K','ue9tva','EKjbvvO','u3PIveq','ywDLlxbYzxzPzq','C2vYDMvYrMLSzq','i25VDMvSywKTAq','mhWXFdn8mNW0','swLduKK','Dg9Y','rwLQqum','A2forwC','AxzQDNO','v3jJzeS','q1b6tvi','CKLgDxC','x25HAv9JAgfYxW','C3r5Bgu','s0LKyNK','nxWZFdr8mxWYFa','ihrVihvWzgf0zq','Bwr0Evm','vvjm','CMzby3m','veDKz0G','CMvZDwX0','zMLUza','B29bEu8','tMfTzq','zs1IDg4','A1H4ruy','BMnuEfC','Df9UB3zLBgfP','wwP4Cxq','zNLvssbPBwfNzq','ChjLDMLLD0LTyq','mZuZndvcBhDXtMu','BKD2wK8','CM1HDc4','Ee1gC2u','ywDLoG','rMjzsgy','Dg9tDhjPBMC','zM9sww8','yLLovue','BgfJzwHVBgrLCG','i2nVBwz5DwKTCG','BMfPm1zPyMvuCG','tMTkyKy','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','lwj0BG','zwXLy3qTAw1HzW','y2HHBMDL','ie5VDMvSquKGvG','EenPB0m','yMXVyG','EKLhDuO','y1rnrLq','zezjvu8','r3fmCvC','qNLjza','AvPdCM4','EMP3vLa','AfDqBNO','zvnnzKG','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','Dhu4lwLTywDLlq','i25VDMvSywKTyW','z2uY','wfjTy1m','Dgv4Da','ie5VDMvSquKGqW','yNHkwLC','nhWXFdn8mNW1Fa','ignHy2HLihrVia','y29UC3rYDwn0BW','v1DjzvG','y3rvuKW','zgLZCgXHEq','C3rHCNrZv2L0Aa','BgfPx3zPyMvFDa','EefwwKO','zwXbssbPBwfNzq','zxCTy29UDgfPBG','mZmZtw5rwLjT','qK9zr3a','whnsBMe','zwXbssbJAgfYia','sxHXv3C','yuTnwNK','i25VDMvSywKTCG','AgfYlxjLzI1PBq','A2fVDhvWAwfU','mty4BeX5B25n','igzYB20Gy2fJAa','s0PXCum','B3Pfue4','twrSA1K','C3jJ','ienVBwz5vuKGAq','ihjLlxvWBg9Hza','6zsz6k+V6k+M5OofoG','i2nVBwz5DwKTCW','BM9Uzq','rxjYB3iGChjVyW','DNbyvMW','i2nVBwz5DwKTAq','wurZsgO','BwvZC2fNzq','l3vWBg9Hzc9PBq','zxiGlNn0lwnOyq','uuvxwvy','5zUE5PwW5O2UoG','y0DKAey','Bw92zs1PBwfNzq','x3jLzG','Aw1Hz2vjBNb1Da','mZmZnZmYmZbNBK5luNK','qNDgz3K','BMfTzq','su1MEKe','CM5iDvO','BufSrxu','DuLLEM0','uhnKvei','vwvyuee','C3rVCMvszwfKvW','igzYB20GB2XKia','CxvLCNLtzwXLyW','BgfPx2nOyxjFCG','qxvNz1q','BMX5','zKLTywDL','B25SB2fKzw5K','y29TzNL1AvvYBa','sNjdAfC','zxnZAw5Nie5VDG','y3jLyxrLt2jQzq','ANnVBG','y2fJAgvFBM92zq','yMXVy2S','vMLwre0','CMvMlwLTywDLlq','s09bELm','z0fdrvq','6k+M5OofoIa','yw9zwum','BM92zwXHAs1Yzq','ndCWnZGXwuvlvNHI','t2LpBxm','y2fJAgvFy29TzG','Bunyq3O','BxjmsMe','i2LTywDLsw5WDq','teHbA3u','Bw92zs1JAgfYlq','x25VDMvSywK','zMLSzxm','zNvdy20','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','q3zpvxy','u0nsq24','y2XPy2S','C3rVCMvezwXLDa','zwXLy3qTy2HHCG','wvnowNa','ntmWnZeWnKndrM92wq','y29TzNL1AwnHBG','wND3Bg0','tuLgse0','BeDKCfG','z2vFBMfPx2nOyq','y3bHu0S','EeTouhq','rK1wtg0','mxWWFdr8m3WY','DtGTAw1Hz2uTCa','DNPeuNq','shrSBgi','EK5VsK0','AwjLigLTywDLoG','AgfYifjLzIbPBq','tg9HzgvKienVBq','y29TzNL1As1Yzq','sKzQrKi','qM1mv3C','tNPSyLu','ze5xyMq','CMvM','qMnOr1C','DgH6vLi','CMfUC2zLCL9PBq','5lUo57Yt5A2y5yQG6l29q29TzNK','ztOG','mtGZnhjPwKrwAG','EKTTv0K','wuvcDLu','q2fVC3G','zwzFAw1Hz2u','mtu4nZq3nhvtDKTyuG','ywTxqMu','nZi0Cvjeq0vm','zMXLEa','D2fYBG','BwfNzs1WCMv2Aq','CL9Yzwy','i25VDMvSywKTCW','tufoBwO','BMfPm0nOyxjszq','wxbRBLG','zxjYB3i','zgf0ytPPBwfNzq','AMnHvMC','CIaUC3qTy2HHDa','Aw5NignHy2HLza','rxjYB3iGBg9Hza','Dvv0su0','vwXiuKq','vLLoq1O','z2TxEwe','Aw5SAw5LlwzSzq','CML0zq','C2vHCMnO','vLzbqvu','mZa4odC2n2zMBg1eCq','q0jvtKO','DgHLig5LDYbMBW','y2fJAguGzM9YBq','yxbWBhK','DuPyzhG','CMvMigLTywDLoG','uMvlAMq','sLrAv1a','C3bSAxq','z2vFBM92zwXHAq','yMXVyJO','D2zLAu8','CMvgwwK','ywDL','zw1VDMuTy2HHCG','wKHxzeW'];_0x39ca=function(){return _0x3a782a;};return _0x39ca();}let nai3VibeTransferImageMimeType='image/png',nai3CharRefImageMimeType=_0x17aa11(0x181,0x146,0x153,0x1a4),comfyuiImageObjectURL=null;function _0x245c25(_0x46cc0f,_0x2af49e,_0x508828,_0x38fe70){return _0x17dd(_0x46cc0f-0x234,_0x38fe70);}function updateNovelaiImagePreview(_0x3089aa){function _0xaded4b(_0x4da2be,_0x53f2d8,_0x11d22c,_0x42202e){return _0x17aa11(_0x4da2be-0xc1,_0x4da2be- -0x17,_0x11d22c-0x12,_0x42202e);}const _0x264599={};_0x264599['mvQWj']=_0xb3c322(0x534,0x4e4,0x4e3,0x4ad)+'ge_novelai',_0x264599['bxJZW']='#novelai-i'+_0xb3c322(0x487,0x4cd,0x4c2,0x444)+_0xb3c322(0x493,0x4b1,0x4fa,0x4dd)+_0xb3c322(0x4e1,0x4ca,0x52a,0x4f8)+_0xb3c322(0x517,0x4b0,0x547,0x4cc)+_0xb3c322(0x45d,0x451,0x432,0x480)+'r',_0x264599[_0xaded4b(0x123,0x18f,0x108,0x16c)]=_0xb3c322(0x4c9,0x4d4,0x4b5,0x51d)+_0xb3c322(0x51e,0x4d0,0x4be,0x4fc)+'-btn',_0x264599[_0xaded4b(0x206,0x1b0,0x212,0x267)]='block',_0x264599['dQeov']=_0xb3c322(0x4cf,0x4f3,0x508,0x4f1);function _0xb3c322(_0x2bed79,_0x206388,_0xa48578,_0x4efd8d){return _0x17aa11(_0x2bed79-0xe1,_0x4efd8d-0x326,_0xa48578-0x1df,_0xa48578);}_0x264599[_0xb3c322(0x48b,0x4e8,0x4ab,0x492)]=_0xaded4b(0x117,0x10e,0x10d,0xf8)+'x',_0x264599[_0xaded4b(0x165,0x11e,0x146,0x15e)]=_0xaded4b(0x217,0x196,0x24c,0x26e);const _0x197b6b=_0x264599,_0x493aeb=document[_0xaded4b(0x132,0xb9,0x12a,0x1b6)+_0xaded4b(0x189,0x111,0x105,0x196)](_0x197b6b['mvQWj']),_0x1a4f0b=document[_0xb3c322(0x54a,0x567,0x54d,0x50a)+_0xaded4b(0x156,0x18f,0x1bd,0x15c)](_0x197b6b[_0xb3c322(0x487,0x4ee,0x47b,0x4d2)]),_0x9d21d=document[_0xb3c322(0x3fe,0x470,0x47b,0x46f)+_0xaded4b(0x189,0x193,0x115,0x16b)](_0x197b6b['JTZWP']);if(_0x3089aa&&_0x3089aa[_0xb3c322(0x4b7,0x47b,0x4a0,0x4d9)](_0xaded4b(0x10e,0x8e,0xdf,0x175))){_0x493aeb[_0xb3c322(0x4c0,0x49c,0x523,0x4ec)]=_0x3089aa,_0x493aeb[_0xaded4b(0x15e,0xda,0x15c,0x1bb)]['display']=_0x197b6b['BmLWw'],_0x1a4f0b[_0xb3c322(0x49d,0x412,0x50b,0x49b)][_0xaded4b(0x19b,0x1ad,0x18a,0x17c)]=_0x197b6b['dQeov'],_0x9d21d[_0xb3c322(0x492,0x452,0x420,0x49b)][_0xaded4b(0x19b,0x18b,0x128,0x1b1)]=_0x197b6b['IiCRI'];const _0xda5d11=_0x3089aa[_0xaded4b(0x124,0x17e,0xe9,0x181)](','),_0x41d887=_0xda5d11[0x1741+0x19c4+0x3105*-0x1]['split'](':')[-0x2c1+0x13*0x71+0x83*-0xb][_0xaded4b(0x124,0x120,0x10d,0x1ad)](';')[0x177f+-0x1176+-0x609];nai3VibeTransferImageMimeType=_0x41d887,window[_0xb3c322(0x44c,0x497,0x4f4,0x4b9)+_0xb3c322(0x4e3,0x433,0x4cd,0x46e)+'e']=_0xda5d11[0x9*0x302+-0xa78+0x25f*-0x7];const _0x195118={};_0x195118['id']=NAI_VIBE_CACHE_KEY,_0x195118[_0xb3c322(0x440,0x43e,0x4f1,0x471)]=_0x3089aa,dbs[_0xb3c322(0x4be,0x490,0x484,0x508)+_0xb3c322(0x3ed,0x3d2,0x4bc,0x455)](_0x195118);}else _0x493aeb['src']='',_0x493aeb[_0xb3c322(0x41e,0x419,0x47e,0x49b)][_0xaded4b(0x19b,0x1b1,0x121,0x1f4)]=_0x197b6b['dQeov'],_0x1a4f0b[_0xaded4b(0x15e,0x1a5,0x15e,0xfd)][_0xb3c322(0x486,0x500,0x544,0x4d8)]=_0x197b6b[_0xaded4b(0x165,0xfb,0x1cf,0x132)],_0x9d21d['style']['display']=_0xaded4b(0x1b4,0x1d1,0x15f,0x20c),window[_0xb3c322(0x4e8,0x45c,0x45c,0x4b9)+'ansferImag'+'e']=null;}function removeNovelaiImage(){updateNovelaiImagePreview(null);function _0x40de72(_0x1189c4,_0x282b57,_0x167588,_0x2aa687){return _0x245c25(_0x1189c4- -0x297,_0x282b57-0x99,_0x167588-0xfa,_0x282b57);}dbs[_0x40de72(0x19f,0x21c,0x12b,0x1ba)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x5e5522){const _0x3dc749={'jcaVg':function(_0x2281d4,_0x13d18d,_0x2b2ac0){return _0x2281d4(_0x13d18d,_0x2b2ac0);},'zjwVP':function(_0x5d35c5,_0x1c9abf){return _0x5d35c5(_0x1c9abf);},'JROLA':function(_0x2eaa0c,_0x13b7b9){return _0x2eaa0c+_0x13b7b9;},'WCoKt':_0x12d491(0x8a,0x45,0xdf,0xb0)},_0x4ed6e4=_0x5e5522[_0x12d491(0x3e,0x2d,0x12b,0xb6)]['files'][0xb60+0x2368+-0x2ec8];function _0x381088(_0x33b897,_0x2753ae,_0x4e36a1,_0x3fc8fb){return _0x245c25(_0x3fc8fb-0x12,_0x2753ae-0x9d,_0x4e36a1-0x198,_0x33b897);}function _0x12d491(_0x5f14f6,_0x45b910,_0x2b4e5e,_0x8ec0ea){return _0x17aa11(_0x5f14f6-0xc5,_0x8ec0ea- -0xa1,_0x2b4e5e-0x10b,_0x45b910);}if(!_0x4ed6e4)return;try{const _0x43f8c7=await _0x3dc749[_0x12d491(0xb2,0xfc,0x31,0x85)](processUploadedImage,_0x4ed6e4,!![]);_0x3dc749[_0x12d491(0x87,0x96,0x104,0x101)](updateNovelaiImagePreview,_0x43f8c7);}catch(_0x1721c9){console[_0x381088(0x392,0x3e9,0x31a,0x365)](_0x12d491(0x107,0x123,0x1a1,0x12b)+_0x381088(0x452,0x47b,0x3c5,0x42d)+_0x381088(0x466,0x415,0x3b1,0x3f7)+':',_0x1721c9),_0x3dc749[_0x381088(0x39e,0x437,0x408,0x3e3)](alert,_0x3dc749['JROLA'](_0x3dc749['WCoKt'],_0x1721c9['message']));}}function updateNovelaiCharRefImagePreview(_0x15a630){function _0xd762a7(_0x1e13dd,_0x3e3121,_0x481436,_0x385909){return _0x17aa11(_0x1e13dd-0x18b,_0x481436- -0x27f,_0x481436-0xc4,_0x1e13dd);}const _0x5e2337={'PtHPc':function(_0x5d1101,_0x7c7823){return _0x5d1101(_0x7c7823);},'OiOms':'block','sRFBN':_0x4a6ea5(0x26a,0x230,0x1ea,0x161),'HDtZG':'inline-fle'+'x','JFjFB':function(_0x32dd81,_0x1c57cd){return _0x32dd81!==_0x1c57cd;},'mdtyS':_0xd762a7(-0xe2,-0x73,-0xe3,-0x140),'kXxEF':_0x4a6ea5(0x1d0,0x1d6,0x24d,0x21e)},_0x4c54b8=document['getElement'+'ById']('previewIma'+_0x4a6ea5(0x24b,0x1bc,0x22e,0x230)+_0x4a6ea5(0x117,0x128,0x13e,0x180));function _0x4a6ea5(_0x3d00c3,_0x442148,_0x2f9bb4,_0x45be11){return _0x245c25(_0x2f9bb4- -0x210,_0x442148-0x1c3,_0x2f9bb4-0x8b,_0x442148);}const _0x47b08e=document[_0x4a6ea5(0x24f,0x181,0x203,0x20b)+_0xd762a7(-0x15d,-0xb1,-0x112,-0x147)](_0xd762a7(-0x12d,-0x79,-0xd8,-0x6d)+'har-ref-im'+'age-previe'+'w-containe'+_0xd762a7(-0x185,-0x11b,-0x158,-0x1cf)+'u8-image-p'+'laceholder'),_0x442e64=document[_0x4a6ea5(0x104,0xe7,0x168,0x16f)+_0x4a6ea5(0x204,0x14c,0x1bf,0x1a9)]('novelai-re'+_0xd762a7(-0x9e,-0xd2,-0x80,-0x106)+'ref-image-'+'btn');if(_0x15a630&&_0x15a630['startsWith']('data:image')){_0x4c54b8[_0xd762a7(-0xc8,-0x65,-0xb9,-0x131)]=_0x15a630,_0x4c54b8[_0x4a6ea5(0x118,0x18d,0x194,0x17b)]['display']=_0x5e2337[_0x4a6ea5(0x203,0x296,0x218,0x25d)],_0x47b08e['style'][_0x4a6ea5(0x164,0x174,0x1d1,0x17a)]=_0x5e2337[_0x4a6ea5(0x1b7,0x119,0x181,0x135)],_0x442e64['style'][_0x4a6ea5(0x1f7,0x253,0x1d1,0x1e0)]=_0x5e2337[_0x4a6ea5(0x1a7,0x18f,0x16f,0x158)];const _0x4ff81c=_0x15a630[_0xd762a7(-0x185,-0xfe,-0x144,-0x1a9)](','),_0x3bf619=_0x4ff81c[-0x2*-0x1376+0x17d7+-0x3ec3*0x1][_0x4a6ea5(0x12e,0x11e,0x15a,0x1c9)](':')[0x1*0x8d7+0x1*-0xf17+-0x641*-0x1][_0xd762a7(-0x176,-0x19c,-0x144,-0xe4)](';')[0x2*-0xbd7+-0x2*0x353+0x1e54];nai3CharRefImageMimeType=_0x3bf619,window['nai3CharRe'+_0xd762a7(-0x11d,-0x38,-0x97,-0xf7)]=_0x4ff81c[-0x607*0x5+0x241c+-0x8*0xbf];const _0x126b84={};_0x126b84['id']=NAI_CHAR_REF_CACHE_KEY,_0x126b84[_0xd762a7(-0x18e,-0xd2,-0x134,-0xc6)]=_0x15a630,dbs[_0x4a6ea5(0x274,0x1f3,0x201,0x241)+_0x4a6ea5(0xfe,0x100,0x14e,0xfe)](_0x126b84);}else _0x5e2337[_0xd762a7(-0xb7,-0xaa,-0x63,-0xea)](_0x5e2337[_0x4a6ea5(0x1fc,0x1fd,0x198,0x18e)],_0x5e2337['mdtyS'])?_0x5e2337[_0xd762a7(-0x125,-0xc5,-0x133,-0xab)](_0x211317,_0x32c68b['data']):(_0x4c54b8[_0xd762a7(-0xfc,-0x136,-0xb9,-0x12f)]='',_0x4c54b8['style'][_0xd762a7(-0xfc,-0x49,-0xcd,-0x118)]=_0x5e2337[_0xd762a7(-0xb7,-0xfe,-0x11d,-0x97)],_0x47b08e[_0x4a6ea5(0x181,0x12a,0x194,0x138)][_0xd762a7(-0x121,-0xc3,-0xcd,-0x13f)]=_0x5e2337[_0xd762a7(-0x16c,-0x122,-0xfd,-0x7f)],_0x442e64[_0xd762a7(-0x161,-0x188,-0x10a,-0x16e)][_0xd762a7(-0x14b,-0x56,-0xcd,-0x51)]=_0x5e2337[_0xd762a7(-0xbf,-0xad,-0x11d,-0xab)],window[_0x4a6ea5(0x107,0x171,0x141,0x13e)+_0x4a6ea5(0x221,0x273,0x207,0x1c3)]=null);}function removeNovelaiCharRefImage(){function _0x15f1b6(_0x5dacb0,_0x2d685b,_0x116a7b,_0x436fb8){return _0x17aa11(_0x5dacb0-0x1c8,_0x436fb8- -0x2af,_0x116a7b-0x12e,_0x5dacb0);}const _0x2231cc={'VuALM':function(_0x557859,_0x6643fd){return _0x557859(_0x6643fd);}};_0x2231cc['VuALM'](updateNovelaiCharRefImagePreview,null),dbs[_0x15f1b6(-0x9b,-0x94,-0x6a,-0xa8)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x36a7e3){const _0x9fbcb6={'SzbTD':function(_0x1f8bfd,_0x499c64){return _0x1f8bfd(_0x499c64);},'JEvNd':function(_0x26683a,_0x4b6d5c){return _0x26683a!==_0x4b6d5c;},'rIFuw':_0x4b69f1(-0x17d,-0x1ab,-0x1ca,-0x1a3),'rfAcs':function(_0x764692,_0x3157b9){return _0x764692(_0x3157b9);},'gACET':function(_0x2a7210,_0x274385){return _0x2a7210(_0x274385);},'WLjtf':function(_0x19dd4f,_0x39416f){return _0x19dd4f+_0x39416f;},'Zwwlm':'图片处理失败:\x20'},_0x14ad69=_0x36a7e3[_0x4b69f1(-0x222,-0x265,-0x235,-0x1d5)][_0x4b69f1(-0x178,-0x128,-0x1fd,-0x165)][-0x1bfa+0xd*0x6+0xb*0x284];if(!_0x14ad69)return;function _0x238771(_0xfa2e45,_0x5dd64c,_0x532615,_0x2a83a9){return _0x17aa11(_0xfa2e45-0x19b,_0x532615- -0x252,_0x532615-0x118,_0x5dd64c);}function _0x4b69f1(_0x35f3a5,_0x2bad46,_0x17a65b,_0x5a386e){return _0x245c25(_0x35f3a5- -0x5a8,_0x2bad46-0x6e,_0x17a65b-0xfd,_0x17a65b);}try{if(_0x9fbcb6['JEvNd'](_0x9fbcb6['rIFuw'],_0x9fbcb6[_0x4b69f1(-0x206,-0x25e,-0x213,-0x1fe)]))_0x9fbcb6[_0x238771(-0x128,-0xdd,-0xeb,-0x112)](_0x4c9d2a,_0x3fa471['data']);else{const _0x4f5b2a=await _0x9fbcb6[_0x4b69f1(-0x1fe,-0x203,-0x271,-0x27d)](processUploadedImage,_0x14ad69);_0x9fbcb6[_0x238771(0x28,-0x3f,-0x5e,0x8)](updateNovelaiCharRefImagePreview,_0x4f5b2a);}}catch(_0x524da0){console[_0x238771(-0x16e,-0x19f,-0x12e,-0xf3)](_0x238771(-0xfb,-0x9b,-0x86,-0x46)+'essing\x20Nov'+_0x4b69f1(-0x1be,-0x1bb,-0x193,-0x20d)+_0x4b69f1(-0x241,-0x24f,-0x2ac,-0x282),_0x524da0),alert(_0x9fbcb6['WLjtf'](_0x9fbcb6[_0x238771(-0x48,0x22,-0x46,0x30)],_0x524da0[_0x238771(-0x45,-0x66,-0x82,-0x85)]));}}function updateComfyUIImagePreview(_0x8cd507){const _0x1e812b={};_0x1e812b[_0x133662(0x148,0x140,0x120,0x11c)]=_0x451254(0x49b,0x434,0x46f,0x40c)+'ing\x20cached'+_0x451254(0x462,0x4a4,0x442,0x4e4)+'ibe\x20image:',_0x1e812b[_0x133662(0x100,0x145,0x1b1,0x19f)]=_0x451254(0x460,0x492,0x4b6,0x47e)+_0x133662(0x16f,0x149,0x14d,0x152),_0x1e812b[_0x133662(0x17e,0x1c9,0x15d,0x1f6)]=_0x133662(0x187,0x16f,0x15b,0x164)+'mage-previ'+_0x133662(0x1ce,0x158,0x1c4,0x127)+_0x133662(0x11a,0x173,0x150,0x1fc)+_0x451254(0x4b5,0x4b1,0x51d,0x514)+_0x451254(0x48a,0x465,0x40c,0x4ca)+'r',_0x1e812b[_0x133662(0x1cf,0x1ca,0x169,0x1eb)]=_0x451254(0x534,0x526,0x50e,0x587)+_0x133662(0xf7,0x177,0x17f,0x162)+_0x451254(0x476,0x4a1,0x4ad,0x4bd),_0x1e812b[_0x451254(0x47e,0x4ea,0x51d,0x553)]=_0x133662(0xe2,0xde,0x14e,0x160);function _0x133662(_0x553521,_0x45405f,_0x5ed31b,_0x5ce09e){return _0x17aa11(_0x553521-0x3c,_0x45405f- -0x5f,_0x5ed31b-0x3c,_0x553521);}_0x1e812b[_0x451254(0x3bf,0x436,0x475,0x480)]=_0x133662(0x13f,0x191,0x184,0x1cf),_0x1e812b['uJXdx']=_0x451254(0x552,0x4d6,0x45f,0x533);function _0x451254(_0x149a04,_0x3abe70,_0x591ac3,_0x18162c){return _0x17aa11(_0x149a04-0x1d,_0x3abe70-0x30b,_0x591ac3-0x29,_0x18162c);}_0x1e812b[_0x133662(0xd3,0xfe,0x101,0xdb)]='inline-fle'+'x',_0x1e812b[_0x133662(0x18c,0x1a5,0x1c5,0x12a)]=function(_0x16f044,_0x550011){return _0x16f044!==_0x550011;},_0x1e812b['KJqqC']=_0x451254(0x4ac,0x51c,0x539,0x563),_0x1e812b[_0x451254(0x53b,0x522,0x4ff,0x53f)]=_0x451254(0x50c,0x4b8,0x53c,0x43f)+'0',_0x1e812b[_0x133662(0x116,0xfa,0x116,0xee)]=_0x133662(0x180,0x1cf,0x1fe,0x206);const _0xddd288=_0x1e812b,_0x2b7043=document[_0x451254(0x429,0x454,0x4aa,0x3d1)+_0x451254(0x465,0x4ab,0x47f,0x486)](_0xddd288[_0x133662(0x17d,0x145,0x168,0x176)]),_0x316af9=document['querySelec'+_0x451254(0x4cd,0x478,0x476,0x47d)](_0xddd288[_0x133662(0x1c2,0x1c9,0x174,0x210)]),_0x43b985=document[_0x451254(0x445,0x454,0x4ab,0x3cb)+_0x451254(0x51d,0x4ab,0x476,0x438)](_0xddd288[_0x133662(0x1f4,0x1ca,0x159,0x180)]);_0x2b7043[_0x451254(0x501,0x4d1,0x4ed,0x471)]&&_0x2b7043[_0x133662(0x104,0x167,0x16f,0x111)][_0x133662(0x151,0x154,0x11a,0xe7)](_0xddd288[_0x451254(0x515,0x4ea,0x4a4,0x48d)])&&_0x2b7043[_0x451254(0x514,0x4d1,0x52e,0x474)]!==_0x8cd507&&URL[_0x451254(0x4a1,0x458,0x4a4,0x412)+'ctURL'](_0x2b7043[_0x451254(0x4e8,0x4d1,0x539,0x472)]);if(_0x8cd507)_0x2b7043[_0x133662(0x1ec,0x167,0x1eb,0x173)]=_0x8cd507,_0x2b7043[_0x133662(0x90,0x116,0xe8,0x142)][_0x133662(0x18b,0x153,0xdb,0xdb)]=_0xddd288[_0x133662(0xb9,0xcc,0xf8,0x11f)],_0x316af9[_0x451254(0x4bb,0x480,0x483,0x479)]['display']=_0xddd288[_0x133662(0xaf,0xd8,0xc1,0x124)],_0x43b985['style'][_0x133662(0xfc,0x153,0x1a5,0x121)]=_0xddd288[_0x133662(0x171,0xfe,0x163,0x8b)];else{if(_0xddd288[_0x451254(0x57b,0x50f,0x4d8,0x48c)](_0x133662(0x13b,0x1b2,0x20d,0x1ad),_0xddd288[_0x133662(0x1e5,0x164,0x1da,0x140)]))_0x43fca6[_0x451254(0x3d4,0x42f,0x409,0x3f3)](_0xddd288['GqLqW'],_0x4df7da);else{const _0x1f258b=_0xddd288['zNoJM'][_0x451254(0x3e5,0x446,0x489,0x472)]('|');let _0x966652=-0x1a51+-0xdb4+0xf*0x2ab;while(!![]){switch(_0x1f258b[_0x966652++]){case'0':comfyuiImageObjectURL=null;continue;case'1':_0x2b7043[_0x133662(0x143,0x116,0x119,0xcb)][_0x133662(0x168,0x153,0x12c,0xf1)]=_0xddd288['uJXdx'];continue;case'2':_0x43b985[_0x451254(0x505,0x480,0x4eb,0x485)][_0x451254(0x542,0x4bd,0x48c,0x436)]=_0xddd288[_0x451254(0x45b,0x442,0x4bd,0x433)];continue;case'3':_0x316af9[_0x133662(0x183,0x116,0xf1,0x152)][_0x451254(0x437,0x4bd,0x527,0x47e)]=_0xddd288['SYHXA'];continue;case'4':_0x2b7043[_0x133662(0x1d4,0x167,0x193,0x1c6)]='';continue;case'5':window['comfyuican'+_0x133662(0x1e3,0x161,0x180,0x152)]=null;continue;}break;}}}}function removeComfyUIImage(){function _0x4d7859(_0x4fd976,_0x1e8773,_0x30d4bf,_0x22f4e7){return _0x17aa11(_0x4fd976-0x174,_0x30d4bf-0x17a,_0x30d4bf-0x57,_0x4fd976);}const _0x1d6b8a={'nvWAU':function(_0x4ab236,_0x151fcb){return _0x4ab236(_0x151fcb);}};_0x1d6b8a['nvWAU'](updateComfyUIImagePreview,null),dbs[_0x4d7859(0x302,0x3bc,0x381,0x396)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x22a056){const _0x3b8210={'ReKjd':_0x22d0a5(-0x25b,-0x2c2,-0x233,-0x2b4)+_0x22d0a5(-0x23a,-0x201,-0x287,-0x228),'YpknX':_0x22d0a5(-0x214,-0x1b6,-0x1bc,-0x1a7)+_0x22d0a5(-0x2c4,-0x29d,-0x240,-0x289)+_0x22d0a5(-0x22b,-0x240,-0x1bc,-0x1d6)+_0x22d0a5(-0x210,-0x1d9,-0x27d,-0x200)+'tu8-image-'+_0x22d0a5(-0x288,-0x2ff,-0x2d7,-0x2a0)+'r','AIyiQ':_0x507fa8(0x4d2,0x430,0x469,0x4d9)+_0x22d0a5(-0x20c,-0x214,-0x201,-0x1f9)+'-btn','nGvZO':_0x507fa8(0x367,0x319,0x38b,0x366),'Htllb':function(_0x126bf9,_0x5dcf0c){return _0x126bf9!==_0x5dcf0c;},'mxyLt':_0x507fa8(0x3bf,0x42d,0x43e,0x494),'owDJr':'none','MIFHM':'inline-fle'+'x','falkI':_0x22d0a5(-0x1b4,-0x16a,-0x1e3,-0x13b),'FMVLm':function(_0x40cc70,_0x114097){return _0x40cc70!==_0x114097;},'xCioC':_0x22d0a5(-0x241,-0x2a2,-0x26f,-0x1e5),'rnHuZ':_0x507fa8(0x3d0,0x3b1,0x3e2,0x442),'VVAAU':function(_0x4534f9,_0x8e46e4){return _0x4534f9(_0x8e46e4);},'XRmcS':function(_0x43699e,_0x239a18){return _0x43699e(_0x239a18);},'EijAC':_0x507fa8(0x41f,0x413,0x3ad,0x402),'WMqxb':function(_0x57c9f6,_0x183f3b,_0x1b33dc){return _0x57c9f6(_0x183f3b,_0x1b33dc);},'akWBe':_0x507fa8(0x3a9,0x370,0x3b3,0x3cd),'mAlEu':function(_0x427d9f,_0x1eda20){return _0x427d9f(_0x1eda20);},'zlPKv':'上传失败:\x20','rswkz':_0x507fa8(0x42d,0x3e3,0x417,0x41b),'ipTEw':function(_0x4ce7aa){return _0x4ce7aa();},'KYtOM':function(_0x7e57a6,_0x25ae0f){return _0x7e57a6===_0x25ae0f;},'KIdby':_0x507fa8(0x480,0x414,0x449,0x46b),'JrChW':_0x22d0a5(-0x228,-0x234,-0x2a6,-0x1c0),'dFIUO':function(_0x138af3,_0x10dd58){return _0x138af3(_0x10dd58);},'PWnNY':function(_0x59b055,_0x38ca7e){return _0x59b055+_0x38ca7e;},'kaNEg':_0x507fa8(0x441,0x410,0x3f3,0x396)+':\x20','foRYo':'图片处理或上传时出错'+':','VMwgl':function(_0x5e34cf,_0x50ce4f){return _0x5e34cf(_0x50ce4f);}},_0xfb6152=extension_settings[extensionName];function _0x22d0a5(_0x368e88,_0x19ce86,_0x483bc8,_0x35aaff){return _0x17aa11(_0x368e88-0x181,_0x368e88- -0x3e2,_0x483bc8-0x24,_0x483bc8);}const _0x654abd=_0x22a056[_0x507fa8(0x34c,0x37c,0x3a5,0x38a)][_0x22d0a5(-0x1e1,-0x1a1,-0x1af,-0x17d)][0xf*0xdf+0x1590+-0x22a1];if(!_0x654abd)return;function _0x507fa8(_0x353f70,_0x23f04e,_0x2185bf,_0x41f508){return _0x245c25(_0x2185bf-0x1f,_0x23f04e-0x102,_0x2185bf-0x106,_0x41f508);}try{const _0x553a79=await _0x3b8210[_0x507fa8(0x3cc,0x33b,0x37f,0x3c2)](processUploadedImageToBlob,_0x654abd),_0xc3437b=URL[_0x22d0a5(-0x1f5,-0x1e4,-0x27a,-0x214)+'ctURL'](_0x553a79);comfyuiImageObjectURL=_0xc3437b,_0x3b8210[_0x507fa8(0x43f,0x399,0x3f7,0x41e)](updateComfyUIImagePreview,_0xc3437b);const _0x32bc42=new FormData();_0x32bc42[_0x22d0a5(-0x27e,-0x2ad,-0x294,-0x284)](_0x3b8210[_0x507fa8(0x42d,0x362,0x3bc,0x3c5)],_0x553a79,_0x654abd[_0x22d0a5(-0x207,-0x258,-0x201,-0x263)]);let _0x401e4e=_0xfb6152[_0x22d0a5(-0x1f8,-0x20a,-0x25e,-0x23b)][_0x22d0a5(-0x29e,-0x28e,-0x281,-0x2af)]();if(!_0x401e4e){alert(_0x507fa8(0x3b3,0x404,0x395,0x30d)+_0x22d0a5(-0x294,-0x28e,-0x25d,-0x29c)),removeComfyUIImage();return;}const _0x5bacf5=await _0x3b8210['WMqxb'](fetch,_0x401e4e+(_0x22d0a5(-0x211,-0x1b7,-0x1cf,-0x264)+_0x22d0a5(-0x2a2,-0x31d,-0x270,-0x243)),{'method':_0x3b8210[_0x22d0a5(-0x1b6,-0x14f,-0x1d9,-0x224)],'body':_0x32bc42});if(_0x5bacf5['ok']){const _0x2372fe=await _0x5bacf5[_0x507fa8(0x3d1,0x3f0,0x43c,0x3e6)]();window[_0x22d0a5(-0x1d7,-0x1bd,-0x233,-0x207)+_0x22d0a5(-0x222,-0x225,-0x245,-0x21e)]=_0x2372fe[_0x507fa8(0x478,0x3a5,0x429,0x46f)],_0x3b8210[_0x22d0a5(-0x204,-0x284,-0x239,-0x186)](addLog,'图片上传成功,\x20服务'+'器返回数据:\x20'+JSON['stringify'](_0x2372fe)),console[_0x507fa8(0x395,0x393,0x3a4,0x40f)](_0x507fa8(0x423,0x479,0x451,0x4a5)+_0x507fa8(0x43b,0x49a,0x422,0x43d),_0x2372fe);const _0x1a5bcf=new FileReader();_0x1a5bcf[_0x507fa8(0x433,0x490,0x437,0x45f)]=()=>{function _0x455b6a(_0x3a3e7b,_0x401633,_0x522a35,_0x53a3bd){return _0x22d0a5(_0x522a35-0x18f,_0x401633-0x54,_0x3a3e7b,_0x53a3bd-0x4f);}function _0x13c426(_0x16109f,_0x5b268c,_0x415a9f,_0x51b36f){return _0x22d0a5(_0x51b36f-0x6df,_0x5b268c-0x1ac,_0x16109f,_0x51b36f-0xb0);}if(_0x3b8210[_0x13c426(0x519,0x555,0x4d3,0x50f)](_0x3b8210[_0x455b6a(-0x10b,-0xe6,-0xb9,-0x8a)],_0x3b8210[_0x13c426(0x50c,0x49a,0x554,0x4da)])){const _0xde6cce=_0x1a5bcf[_0x455b6a(-0x13c,-0x12e,-0xd6,-0x10e)],_0x2c4aaf={};_0x2c4aaf[_0x13c426(0x48c,0x4aa,0x42e,0x448)]=_0xde6cce,_0x2c4aaf[_0x455b6a(-0x85,-0x8b,-0xea,-0xda)+_0x455b6a(-0xcb,-0x13a,-0xd3,-0x100)]=_0x2372fe['name'];const _0x21c61b=_0x2c4aaf,_0x34d752={};_0x34d752['id']=COMFYUI_REF_CACHE_KEY,_0x34d752[_0x13c426(0x4b7,0x407,0x4c1,0x448)]=_0x21c61b,dbs[_0x13c426(0x4d1,0x4c7,0x4b0,0x4df)+'rite'](_0x34d752);}else{const _0x5c9dc7=_0x498021[_0x455b6a(-0x10c,-0xb5,-0x10a,-0x12b)+_0x455b6a(-0x107,-0x6a,-0xb3,-0x130)](_0x3b8210[_0x13c426(0x48f,0x3f5,0x440,0x436)]),_0x5cf338=_0x16d632[_0x13c426(0x4c5,0x46a,0x520,0x4e1)+_0x13c426(0x3f4,0x3e1,0x485,0x46a)](_0x3b8210[_0x455b6a(-0x111,-0x17a,-0x130,-0x166)]),_0x2ee283=_0xf698ea[_0x455b6a(-0x11f,-0x179,-0x10a,-0xd1)+'ById'](_0x3b8210['AIyiQ']);_0x5c9dc7['src']&&_0x5c9dc7[_0x13c426(0x500,0x50d,0x49a,0x4c3)][_0x13c426(0x489,0x48f,0x461,0x4b0)](_0x3b8210[_0x13c426(0x40a,0x4eb,0x50c,0x486)])&&_0x3b8210[_0x455b6a(-0xba,0x1e,-0x3d,0x20)](_0x5c9dc7[_0x455b6a(-0xa3,-0x5b,-0x8d,-0x5a)],_0x23b11d)&&_0x1e9124[_0x13c426(0x447,0x482,0x3c5,0x44a)+_0x13c426(0x527,0x434,0x489,0x4ae)](_0x5c9dc7[_0x13c426(0x4a5,0x440,0x490,0x4c3)]);if(_0xbb04a7)_0x5c9dc7[_0x13c426(0x466,0x4d1,0x4f4,0x4c3)]=_0x296b83,_0x5c9dc7[_0x13c426(0x49a,0x4da,0x4b9,0x472)][_0x13c426(0x528,0x477,0x457,0x4af)]=_0x3b8210['mxyLt'],_0x5cf338['style'][_0x13c426(0x471,0x4b5,0x47d,0x4af)]=_0x3b8210[_0x455b6a(-0x14a,-0x186,-0x10e,-0xe2)],_0x2ee283[_0x13c426(0x4ce,0x47b,0x401,0x472)][_0x13c426(0x4df,0x45f,0x435,0x4af)]=_0x3b8210[_0x13c426(0x593,0x553,0x485,0x50a)];else{const _0x5df24c=(_0x455b6a(-0x137,-0xa4,-0xdc,-0x144)+'0')[_0x13c426(0x46c,0x48b,0x3c2,0x438)]('|');let _0x3260c0=0xb8+0x5df+-0x697;while(!![]){switch(_0x5df24c[_0x3260c0++]){case'0':_0x4bed80=null;continue;case'1':_0x2ee283[_0x13c426(0x45e,0x3ee,0x4c6,0x472)]['display']=_0x3b8210['owDJr'];continue;case'2':_0x166549[_0x455b6a(-0x87,-0xb9,-0x48,-0x17)+'kaotupian']=null;continue;case'3':_0x5c9dc7['style']['display']=_0x3b8210[_0x455b6a(-0x196,-0x17f,-0x10e,-0xa8)];continue;case'4':_0x5cf338[_0x13c426(0x4c7,0x4c1,0x410,0x472)]['display']=_0x3b8210['falkI'];continue;case'5':_0x5c9dc7[_0x13c426(0x445,0x53f,0x485,0x4c3)]='';continue;}break;}}}},_0x1a5bcf[_0x507fa8(0x3b7,0x420,0x3a2,0x381)+_0x22d0a5(-0x268,-0x1eb,-0x27a,-0x232)](_0x553a79);}else{const _0x6eb8af=await _0x5bacf5[_0x507fa8(0x3ee,0x3eb,0x3f8,0x391)]();_0x3b8210['XRmcS'](alert,_0x3b8210['zlPKv']+_0x6eb8af),addLog(_0x22d0a5(-0x24d,-0x2b5,-0x2a9,-0x280)+_0x507fa8(0x407,0x405,0x443,0x47c)+_0x6eb8af),console[_0x507fa8(0x3af,0x3e4,0x372,0x372)](_0x3b8210['rswkz'],_0x6eb8af),_0x3b8210[_0x507fa8(0x397,0x406,0x3ac,0x3ae)](removeComfyUIImage);}}catch(_0x4060ed){_0x3b8210['KYtOM'](_0x3b8210[_0x22d0a5(-0x26c,-0x2b9,-0x24f,-0x220)],_0x3b8210[_0x22d0a5(-0x1f7,-0x24d,-0x250,-0x1d3)])?(_0x50d1e8(null),_0x5468de[_0x507fa8(0x489,0x47f,0x455,0x458)+'e'](_0x5dd84d)):(_0x3b8210[_0x507fa8(0x36f,0x381,0x3ec,0x3da)](alert,_0x3b8210[_0x22d0a5(-0x29f,-0x2a3,-0x2e8,-0x319)](_0x3b8210[_0x22d0a5(-0x273,-0x254,-0x228,-0x299)],_0x4060ed['message'])),console[_0x22d0a5(-0x2be,-0x24f,-0x2d7,-0x2fa)](_0x3b8210[_0x507fa8(0x3bd,0x3e2,0x3dd,0x368)],_0x4060ed),_0x3b8210['VMwgl'](addLog,_0x507fa8(0x451,0x456,0x3e3,0x3b6)+'详情:\x20'+JSON['stringify'](_0x4060ed)),_0x3b8210[_0x507fa8(0x37a,0x3d0,0x3ac,0x345)](removeComfyUIImage));}}async function loadCachedImages(){const _0x5dda68={'AuggT':function(_0x1d5d9f,_0x50ba47){return _0x1d5d9f(_0x50ba47);},'STrlK':'novelai-re'+_0x33b833(0x5d7,0x59c,0x5ff,0x595)+_0x33b833(0x538,0x55c,0x53c,0x5c4),'vpXVl':'data:image','gzRRw':_0x33b833(0x58c,0x5b6,0x612,0x583),'NzlbU':_0x33b833(0x5a4,0x591,0x5e6,0x5ac),'BDiBP':_0x162176(-0x58,0x1d,-0x5f,-0x44)+'x','MdlkY':'2|4|3|1|0','zBAUZ':'flex','vzDRt':_0x162176(0x97,0x76,0x39,0xcc)+_0x33b833(0x5b8,0x5d5,0x54c,0x60e)+_0x33b833(0x4ec,0x4e5,0x51b,0x543),'thzVR':_0x162176(0x126,0xe6,0xad,0x138)+_0x162176(0x131,0xee,0x130,0x159)+_0x33b833(0x62f,0x5b8,0x5f8,0x54d)+'btn','YSNZp':_0x162176(0xa3,0x5a,-0x17,0x40),'xAVZJ':function(_0x3cc603,_0x416fbd){return _0x3cc603!==_0x416fbd;},'CPzMR':_0x33b833(0x5b2,0x5a0,0x55b,0x5de),'UefCr':function(_0x14d81e,_0x3741e8){return _0x14d81e===_0x3741e8;},'VYNCZ':_0x33b833(0x504,0x576,0x5d9,0x526),'BchGW':function(_0x4139f3,_0x3cbe9a){return _0x4139f3(_0x3cbe9a);},'bYNUA':_0x33b833(0x50c,0x4ef,0x46d,0x55f)+_0x33b833(0x554,0x4ee,0x52f,0x475)+_0x162176(0xac,0x9a,0xe1,0x98)+_0x33b833(0x5b9,0x5df,0x63e,0x595)+_0x33b833(0x4d9,0x552,0x4fb,0x519),'Iuzlh':'pmNYx','PsdTB':'cHLpk','gkWya':'string','KrLVI':function(_0x57d752,_0x16dc50){return _0x57d752(_0x16dc50);},'ZHWdL':_0x33b833(0x619,0x5e0,0x624,0x5c3)+_0x33b833(0x4fa,0x54c,0x56a,0x571)+_0x162176(0xff,0xd2,0x14e,0xd1)+_0x33b833(0x561,0x4fb,0x523,0x4fe)+'at.\x20Please'+_0x33b833(0x5d8,0x58e,0x55e,0x5b0)+_0x162176(0x37,0x67,0x9a,0x5)+_0x162176(0xa9,0x9d,0x6c,0x22)+_0x33b833(0x4c3,0x4fa,0x51c,0x578)+_0x162176(0xa6,0x79,0x75,0x24),'lGdpX':function(_0xf6d9a3,_0x2749ec){return _0xf6d9a3===_0x2749ec;},'UeXPA':_0x162176(0x13d,0xe2,0xfb,0x78),'SCRCn':_0x162176(0x40,0x18,-0x39,0x16)+_0x33b833(0x4c0,0x4ee,0x4fc,0x474)+_0x33b833(0x604,0x58d,0x5b5,0x5ff)+'mage:'};function _0x33b833(_0x16d0f1,_0x393bce,_0x128ef8,_0x176e42){return _0x245c25(_0x393bce-0x197,_0x393bce-0xe3,_0x128ef8-0x60,_0x128ef8);}function _0x162176(_0x12e43f,_0x71e6ba,_0xdd358c,_0x59831f){return _0x245c25(_0x71e6ba- -0x340,_0x71e6ba-0x127,_0xdd358c-0xd0,_0xdd358c);}await dbs['openDB']();try{const _0x64edc3=await dbs[_0x33b833(0x59a,0x522,0x507,0x5ab)+_0x162176(0xa4,0xd6,0x7a,0x102)](NAI_VIBE_CACHE_KEY);_0x64edc3&&_0x64edc3[_0x33b833(0x560,0x511,0x4fc,0x58e)]&&updateNovelaiImagePreview(_0x64edc3[_0x162176(0x8d,0x3a,0x3e,0x91)]);}catch(_0x59918e){_0x5dda68[_0x162176(0x80,0xa4,0xa6,0x23)](_0x5dda68['CPzMR'],_0x5dda68[_0x162176(0x24,0x61,-0x17,0x82)])?(_0x5dda68[_0x162176(0xe1,0xd5,0x97,0x9f)](_0xc3ad98,null),_0x40bb7a[_0x33b833(0x5e6,0x5cd,0x5dc,0x5a9)+'e'](_0x21d712)):console[_0x162176(0x96,0x13,-0x7,0x51)](_0x162176(-0x35,0x18,-0x24,-0x58)+_0x162176(-0x25,0x17,0x88,0x66)+_0x162176(0xd,0x88,0x2a,0x10b)+_0x162176(0xed,0x107,0xb1,0x176),_0x59918e);}try{if(_0x5dda68['UefCr'](_0x5dda68[_0x162176(0x8,0x1b,-0x5a,0x37)],_0x5dda68[_0x33b833(0x482,0x4f2,0x51f,0x52a)])){const _0x1c496b=await dbs[_0x33b833(0x581,0x522,0x5a8,0x54c)+_0x33b833(0x535,0x5ad,0x5d5,0x5f4)](NAI_CHAR_REF_CACHE_KEY);_0x1c496b&&_0x1c496b[_0x162176(0x3d,0x3a,0x4f,0x7e)]&&_0x5dda68[_0x33b833(0x663,0x5e7,0x5a5,0x628)](updateNovelaiCharRefImagePreview,_0x1c496b['data']);}else{const _0x13c2e5=_0x34f0c9['getElement'+_0x162176(0x26,0x8f,0x8,0x45)](_0x162176(0xa2,0x76,0x76,0xf2)+_0x162176(0x11,0x2b,0x7c,0x1e)),_0x55a6ad=_0xa04f97[_0x162176(0x10e,0xd3,0xc7,0x152)+_0x33b833(0x4b0,0x533,0x519,0x51c)](_0x162176(0x15,0x59,0xa,0x7f)+_0x162176(0x11,0xd,0x6,0x1b)+_0x162176(0x1d,0xa6,0x47,0x105)+'er\x20.st-cha'+_0x162176(0x12,0x95,0x69,0x22)+'placeholde'+'r'),_0x28f61b=_0x5b756a[_0x33b833(0x48d,0x50f,0x57b,0x4d6)+'ById'](_0x5dda68[_0x162176(0xcd,0x4a,0xb,0x8b)]);if(_0x29fde1&&_0x1fe8e9[_0x33b833(0x506,0x579,0x5fa,0x5bf)](_0x5dda68['vpXVl'])){_0x13c2e5[_0x162176(0xdb,0xb5,0x124,0xd1)]=_0xf7bfec,_0x13c2e5[_0x33b833(0x526,0x53b,0x5c0,0x5bf)][_0x162176(0x40,0xa1,0x3a,0xdd)]=_0x5dda68['gzRRw'],_0x55a6ad['style'][_0x162176(0xc5,0xa1,0xd4,0x110)]=_0x5dda68[_0x162176(0x134,0x10d,0x12a,0x16b)],_0x28f61b['style'][_0x162176(0xb0,0xa1,0x3d,0x89)]=_0x5dda68['BDiBP'];const _0x1eff55=_0x49f70d['split'](','),_0x4723eb=_0x1eff55[0x3*0x90b+0xb80+0x1*-0x26a1][_0x162176(0x6e,0x2a,0xa6,0x22)](':')[0x5*0x6fc+0x22fa+-0x45e5]['split'](';')[0x9d9+0x71e*0x4+-0x2651];_0x38203d=_0x4723eb,_0x3dccf[_0x33b833(0x54d,0x559,0x55c,0x4fa)+_0x162176(0x98,0x37,0x4e,0x8)+'e']=_0x1eff55[-0x17*0x15a+-0x5e9*0x6+0x428d];const _0x150b25={};_0x150b25['id']=_0x12a217,_0x150b25[_0x33b833(0x4f7,0x511,0x49b,0x495)]=_0x31dc2d,_0x4f473c[_0x162176(0x68,0xd1,0x140,0xb8)+'rite'](_0x150b25);}else{const _0x27d4fb=_0x5dda68[_0x162176(0x100,0xb4,0x118,0xa7)][_0x162176(-0x26,0x2a,-0xb,0x9d)]('|');let _0x3f006=-0x1*0xecd+-0x3*-0x891+-0xf*0xba;while(!![]){switch(_0x27d4fb[_0x3f006++]){case'0':_0x4f2756[_0x33b833(0x585,0x559,0x588,0x579)+_0x33b833(0x4e1,0x50e,0x4ee,0x4ba)+'e']=null;continue;case'1':_0x28f61b[_0x162176(0x2c,0x64,0x66,0x34)][_0x162176(0x29,0xa1,0x35,0x3c)]=_0x5dda68['NzlbU'];continue;case'2':_0x13c2e5[_0x33b833(0x5de,0x58c,0x507,0x588)]='';continue;case'3':_0x55a6ad[_0x162176(0xe3,0x64,0x17,0x62)]['display']=_0x5dda68[_0x33b833(0x52e,0x52c,0x4fc,0x509)];continue;case'4':_0x13c2e5[_0x33b833(0x511,0x53b,0x561,0x4ed)]['display']=_0x5dda68[_0x33b833(0x599,0x5e4,0x64e,0x65c)];continue;}break;}}}}catch(_0x270ee4){console[_0x162176(0x68,0x13,0x6c,-0x50)](_0x5dda68[_0x162176(0x8b,0x7f,0x2d,0xbe)],_0x270ee4);}try{const _0x5e3442=await dbs[_0x162176(-0x33,0x4b,-0x2f,0x40)+_0x33b833(0x54e,0x5ad,0x619,0x53d)](COMFYUI_REF_CACHE_KEY);if(_0x5e3442&&_0x5e3442[_0x162176(-0x12,0x3a,0x49,0x1d)]&&_0x5e3442[_0x33b833(0x577,0x511,0x590,0x542)][_0x33b833(0x4d4,0x511,0x503,0x542)]&&_0x5e3442[_0x162176(0x86,0x3a,0x3d,-0x48)][_0x162176(0xc8,0x58,0xb2,0x76)+_0x33b833(0x533,0x546,0x5ce,0x4cb)]){if(_0x5dda68['UefCr'](_0x5dda68['Iuzlh'],_0x5dda68[_0x162176(0x6b,0xcf,0x4f,0xe9)])){const _0x568587=_0x33b833(0x631,0x5d9,0x607,0x5e6)['split']('|');let _0x3de596=-0xe49+0x4ef+-0x31e*-0x3;while(!![]){switch(_0x568587[_0x3de596++]){case'0':_0x4b5247[_0x162176(0x5,0x64,0x68,0xb0)][_0x33b833(0x58b,0x578,0x4f9,0x601)]=_0x5dda68['NzlbU'];continue;case'1':_0x5774f5[_0x162176(0x4d,0xb5,0x133,0xb2)]='';continue;case'2':_0x3ff0eb[_0x33b833(0x4f3,0x4e8,0x529,0x488)+_0x33b833(0x58b,0x5ae,0x590,0x612)]=null;continue;case'3':_0x4ef81c[_0x162176(-0x11,0x64,0x7b,-0x1c)][_0x162176(0x2a,0xa1,0x1c,0x88)]=_0x5dda68[_0x162176(0xa3,0x10d,0x116,0x164)];continue;case'4':_0x5b0291['style'][_0x162176(0xb9,0xa1,0x8a,0xd1)]=_0x5dda68['zBAUZ'];continue;}break;}}else{const _0xd58042=_0x5e3442[_0x33b833(0x58f,0x511,0x4d5,0x489)],_0x139cd5=await fetch(_0xd58042['data']),_0x179c84=await _0x139cd5[_0x162176(0x99,0x8a,0x68,0x101)](),_0x54e38a=URL[_0x162176(0x6d,0xdc,0x64,0x14c)+_0x33b833(0x53a,0x577,0x4f4,0x50f)](_0x179c84);_0x5dda68['AuggT'](updateComfyUIImagePreview,_0x54e38a),comfyuiImageObjectURL=_0x54e38a,window[_0x162176(0xd8,0xfa,0x71,0x15e)+_0x33b833(0x50d,0x586,0x596,0x54a)]=_0xd58042[_0x162176(0xc6,0x58,0x2,-0x18)+_0x33b833(0x53b,0x546,0x52f,0x558)],_0x5dda68[_0x33b833(0x5c1,0x5e7,0x5e8,0x64a)](addLog,_0x33b833(0x636,0x5ea,0x5e9,0x5cf)+_0x33b833(0x4e7,0x529,0x5a5,0x5a0)+_0xd58042['serverFile'+_0x162176(0x8e,0x6f,-0x4,0x2)]),console[_0x162176(0x1b,0x45,0x77,0x42)](_0x33b833(0x636,0x5e0,0x558,0x5f0)+_0x33b833(0x50e,0x54c,0x54f,0x54b)+_0x33b833(0x5d7,0x588,0x5e1,0x549)+_0x33b833(0x56d,0x5eb,0x5f0,0x61e)+_0xd58042['serverFile'+'Name']);}}else{if(_0x5e3442&&typeof _0x5e3442['data']===_0x5dda68[_0x162176(0x42,0x1c,0x3a,0x80)]){const _0x35afff=await fetch(_0x5e3442[_0x162176(0x5a,0x3a,0xa,0x5c)]),_0x3a77f8=await _0x35afff[_0x33b833(0x507,0x561,0x4f7,0x4fa)](),_0x5eae4f=URL[_0x33b833(0x584,0x5b3,0x609,0x609)+_0x33b833(0x536,0x577,0x506,0x5d7)](_0x3a77f8);_0x5dda68[_0x33b833(0x588,0x510,0x52b,0x4d6)](updateComfyUIImagePreview,_0x5eae4f),comfyuiImageObjectURL=_0x5eae4f,console[_0x162176(0x52,0xc,-0x7a,-0x10)](_0x5dda68[_0x162176(0xa2,0x31,0x5e,0x1f)]);}}}catch(_0x14ad3d){if(_0x5dda68[_0x162176(0x7d,0xfd,0xfe,0xe5)](_0x5dda68[_0x162176(0x132,0xd0,0xca,0x97)],'gFSKj')){const _0x4c7254=_0x270f1f[_0x33b833(0x53d,0x50f,0x4e0,0x4fe)+_0x162176(0xa6,0x8f,0xf2,0xf5)](_0x5dda68[_0x33b833(0x662,0x5db,0x5d8,0x591)]),_0x5a69b8=_0x3ed735[_0x162176(0xec,0xd3,0x93,0x62)+'tor']('#novelai-c'+_0x33b833(0x527,0x585,0x529,0x503)+_0x33b833(0x573,0x52e,0x579,0x509)+_0x162176(-0xe,0x47,-0x27,0xae)+'r\x20.st-chat'+_0x162176(0xa4,0x103,0x11d,0x16d)+_0x162176(0x40,0x80,0xc,0xd1)),_0x5921f5=_0xf1f7f1[_0x162176(-0x2,0x38,0xba,0x8f)+'ById'](_0x5dda68[_0x33b833(0x644,0x5e8,0x623,0x594)]);if(_0x234b96&&_0x19cec4[_0x162176(0x119,0xa2,0x8d,0x100)](_0x5dda68[_0x162176(0x10f,0xbc,0x71,0xb8)])){_0x4c7254['src']=_0xd69896,_0x4c7254[_0x162176(0x48,0x64,0x93,0x3e)]['display']=_0x5dda68['gzRRw'],_0x5a69b8[_0x33b833(0x594,0x53b,0x50e,0x521)][_0x33b833(0x582,0x578,0x5b9,0x4fc)]=_0x5dda68[_0x33b833(0x60c,0x5e4,0x63e,0x605)],_0x5921f5[_0x33b833(0x4fc,0x53b,0x59d,0x515)]['display']=_0x33b833(0x472,0x4f4,0x4b2,0x486)+'x';const _0x38c198=_0x1c0ba6['split'](','),_0x10440f=_0x38c198[0x25af+0x2*0xa9f+0x5*-0xbc9]['split'](':')[-0x1*0x3cb+-0x2ad+0x679][_0x33b833(0x4a9,0x501,0x507,0x4ed)](';')[-0x1*0x1ca7+0x12ff+0x19c*0x6];_0x2da9ea=_0x10440f,_0x261f6e[_0x162176(0x7d,0x11,-0x21,0x3b)+'fImage']=_0x38c198[0x1e0d+0x91c+0x9ca*-0x4];const _0xf3e428={};_0xf3e428['id']=_0x61ac9b,_0xf3e428[_0x162176(-0x9,0x3a,0x16,-0x4e)]=_0x18f94e,_0x349ef0[_0x162176(0xb0,0xd1,0xce,0x12f)+_0x162176(0x6,0x1e,-0x56,0x35)](_0xf3e428);}else{const _0x279dcc=_0x5dda68[_0x33b833(0x645,0x5cf,0x570,0x5f4)][_0x33b833(0x4c7,0x501,0x56d,0x53f)]('|');let _0x56979d=-0x1*-0x158+-0x1f95+0x1e3d;while(!![]){switch(_0x279dcc[_0x56979d++]){case'0':_0x4c7254[_0x162176(0xc4,0xb5,0x55,0xf3)]='';continue;case'1':_0x4c7254[_0x33b833(0x4cc,0x53b,0x592,0x4c3)][_0x33b833(0x4f9,0x578,0x5d2,0x5fd)]=_0x5dda68[_0x33b833(0x5e1,0x5e4,0x669,0x651)];continue;case'2':_0x5921f5['style'][_0x162176(0x2a,0xa1,0x20,0x7a)]=_0x5dda68['NzlbU'];continue;case'3':_0x5a69b8[_0x162176(0x40,0x64,0xed,0x3)]['display']=_0x5dda68[_0x162176(0x3a,0x55,0xde,0xb2)];continue;case'4':_0x259a2e[_0x162176(-0x22,0x11,0x7b,0x0)+'fImage']=null;continue;}break;}}}else console[_0x162176(0x57,0x13,0x5b,-0x4f)](_0x5dda68[_0x162176(0x6f,0xf4,0x9b,0xaf)],_0x14ad3d);}}export function initImageUpload(_0x23873a){const _0x44d824={'lCvhz':_0x58655d(0x4e7,0x47a,0x527,0x465)+_0x58655d(0x50f,0x51b,0x4c0,0x4ae),'DVcSA':_0x393cea(0x52c,0x572,0x567,0x5a7)+_0x58655d(0x483,0x505,0x40c,0x45c)+_0x393cea(0x559,0x5e3,0x5af,0x616),'BOYGp':_0x393cea(0x587,0x5a2,0x55a,0x519),'Yjxqt':_0x393cea(0x56d,0x611,0x5bd,0x625),'dNWbd':function(_0x1101e4,_0x3081f7){return _0x1101e4===_0x3081f7;},'aKMZy':'zFwQR','WrcdK':function(_0x4014fc){return _0x4014fc();},'hWPnz':'imageInput'+'2','ViVDM':function(_0x57d036,_0x1661a){return _0x57d036(_0x1661a);},'zYfEX':'请先设置ComfyU'+'I\x20API地址。','cTMFT':function(_0x49bd02){return _0x49bd02();},'LHAku':function(_0x53475b,_0x284e11){return _0x53475b===_0x284e11;},'eywhw':_0x58655d(0x442,0x4c2,0x3bd,0x3cf),'ncTxW':function(_0x513253){return _0x513253();},'YDsHj':function(_0x3e55a2){return _0x3e55a2();},'FbYHf':'#novelai-s'+_0x58655d(0x4a6,0x496,0x4db,0x484)+_0x393cea(0x48d,0x4da,0x510,0x599),'aoYYC':'#imageInpu'+_0x58655d(0x493,0x428,0x4dc,0x46d),'cpaSK':_0x393cea(0x4f6,0x557,0x527,0x560),'fuCcm':_0x58655d(0x4cd,0x550,0x467,0x46f)+'emove-imag'+_0x393cea(0x4c9,0x4f7,0x510,0x4d5),'cSAIv':_0x393cea(0x53d,0x50d,0x595,0x5b4),'IMfzA':_0x393cea(0x4d5,0x4ff,0x4af,0x4c8)+_0x393cea(0x564,0x5b3,0x597,0x586)+'-ref-image'+'-btn','ozEPN':_0x393cea(0x59d,0x508,0x58c,0x610)+_0x58655d(0x464,0x46c,0x487,0x3f4)+_0x393cea(0x5c8,0x5d5,0x566,0x5cf),'DjSLw':_0x58655d(0x4d9,0x494,0x4ae,0x4e8)+_0x58655d(0x4a6,0x4d0,0x4be,0x52e)+'e-btn','qQoMA':_0x58655d(0x50c,0x507,0x497,0x513)+'t2'};function _0x58655d(_0x168b1d,_0x399585,_0x38bd1f,_0x3b1766){return _0x245c25(_0x168b1d-0xe0,_0x399585-0x22,_0x38bd1f-0x18a,_0x38bd1f);}function _0x393cea(_0xa09431,_0x71a617,_0xd7f276,_0x1cce5f){return _0x17aa11(_0xa09431-0x78,_0xd7f276-0x38f,_0xd7f276-0xa7,_0x71a617);}_0x44d824[_0x393cea(0x50d,0x5d5,0x55e,0x4f9)](loadCachedImages),_0x23873a[_0x393cea(0x4d8,0x56a,0x50d,0x4b7)](_0x44d824[_0x58655d(0x49c,0x41e,0x485,0x47e)])['on'](_0x58655d(0x515,0x563,0x550,0x4c4),()=>{function _0x1060bf(_0x5cde89,_0x347ae0,_0x3fcfa1,_0x4096d0){return _0x58655d(_0x3fcfa1- -0x509,_0x347ae0-0x5a,_0x5cde89,_0x4096d0-0x173);}function _0x351fea(_0x41bbbe,_0xe68b06,_0x319652,_0x2aee39){return _0x393cea(_0x41bbbe-0x10c,_0x2aee39,_0x41bbbe- -0x28c,_0x2aee39-0x1ad);}document[_0x1060bf(-0x10e,-0x2d,-0xb1,-0xdb)+_0x1060bf(-0x6b,-0x1e,-0x5a,-0x5f)](_0x44d824['lCvhz'])['click']();}),_0x23873a['find'](_0x44d824[_0x58655d(0x505,0x4e1,0x527,0x584)])['on'](_0x44d824[_0x58655d(0x51f,0x4da,0x557,0x55b)],handleNovelaiImageUpload),_0x23873a[_0x58655d(0x48d,0x46a,0x4f0,0x41f)](_0x44d824[_0x393cea(0x5cb,0x519,0x591,0x55a)])['on'](_0x44d824[_0x58655d(0x46f,0x48b,0x47f,0x48d)],()=>{removeNovelaiImage();}),_0x23873a['find'](_0x44d824[_0x58655d(0x4eb,0x46a,0x4a2,0x517)])['on'](_0x44d824[_0x393cea(0x4c3,0x519,0x4ef,0x4ea)],()=>{function _0x278d4e(_0x26648e,_0x5748d1,_0x416809,_0x4ffb60){return _0x58655d(_0x5748d1- -0x6fb,_0x5748d1-0x1a1,_0x26648e,_0x4ffb60-0x1b5);}function _0x38de9e(_0x5e1e8c,_0xe1e5fb,_0x204591,_0xb64882){return _0x393cea(_0x5e1e8c-0x43,_0xb64882,_0x204591- -0x3bc,_0xb64882-0x190);}document[_0x278d4e(-0x290,-0x2a3,-0x2b4,-0x26b)+'ById'](_0x44d824['DVcSA'])[_0x278d4e(-0x1cb,-0x1e6,-0x1e5,-0x17f)]();}),_0x23873a[_0x58655d(0x48d,0x464,0x4e0,0x4b9)](_0x44d824[_0x393cea(0x560,0x51c,0x553,0x5db)])['on'](_0x44d824['cpaSK'],handleNovelaiCharRefImageUpload),_0x23873a[_0x58655d(0x48d,0x48d,0x458,0x442)](_0x393cea(0x59a,0x54b,0x54d,0x518)+_0x58655d(0x450,0x419,0x4ca,0x3d6)+'-ref-image'+_0x58655d(0x4a5,0x433,0x444,0x483))['on'](_0x44d824[_0x393cea(0x4b7,0x4f7,0x4ef,0x47f)],()=>{function _0xe0af44(_0x601877,_0x4ecc46,_0x5d8078,_0x126797){return _0x393cea(_0x601877-0x9e,_0x4ecc46,_0x601877- -0x239,_0x126797-0xab);}const _0x382fdd={};_0x382fdd[_0x3bbc7d(0x17e,0x19d,0x139,0xf5)]=_0x44d824[_0xe0af44(0x30f,0x2f5,0x2da,0x2f1)],_0x382fdd[_0x3bbc7d(0x202,0x280,0x186,0x1f6)]=_0x44d824[_0x3bbc7d(0x1b4,0x229,0x1ef,0x142)];const _0x51105b=_0x382fdd;function _0x3bbc7d(_0x2f473c,_0x1e67fe,_0x2b0576,_0x57e744){return _0x393cea(_0x2f473c-0x12b,_0x1e67fe,_0x2f473c- -0x360,_0x57e744-0x16f);}_0x44d824[_0xe0af44(0x375,0x309,0x3cd,0x3e9)](_0x44d824[_0xe0af44(0x313,0x309,0x2e8,0x2bc)],_0x44d824[_0xe0af44(0x313,0x37f,0x31f,0x358)])?_0x44d824[_0x3bbc7d(0x1a0,0x1f7,0x127,0x15a)](removeNovelaiCharRefImage):(_0x4d5582[_0xe0af44(0x31c,0x309,0x317,0x2bc)]='',_0x1f179e['style']['display']=_0x51105b[_0xe0af44(0x2a5,0x2bd,0x302,0x2cc)],_0x349ce4['style'][_0xe0af44(0x308,0x2ea,0x36f,0x33b)]=_0x51105b[_0xe0af44(0x329,0x2f3,0x2a0,0x358)],_0x4d13af[_0x3bbc7d(0x1a4,0x21f,0x1ac,0x1e8)][_0x3bbc7d(0x1e1,0x209,0x167,0x1f3)]=_0x3bbc7d(0x1fa,0x265,0x1b4,0x26a),_0x47280c[_0x3bbc7d(0x23a,0x265,0x1bd,0x201)+_0xe0af44(0x316,0x362,0x399,0x2d5)]=null,_0x1bcd52=null);}),_0x23873a[_0x393cea(0x525,0x4c5,0x50d,0x4b0)](_0x44d824['DjSLw'])['on'](_0x44d824['cSAIv'],()=>{function _0x149789(_0x303d47,_0x1c29de,_0x3a65f5,_0x20388c){return _0x393cea(_0x303d47-0x3e,_0x20388c,_0x3a65f5- -0x321,_0x20388c-0x123);}function _0x2693f5(_0xa43d5b,_0x1668db,_0x41ad01,_0x492c0e){return _0x393cea(_0xa43d5b-0xf0,_0x41ad01,_0xa43d5b- -0xc,_0x492c0e-0x144);}document[_0x149789(0x135,0x1a2,0x1b7,0x200)+_0x2693f5(0x523,0x4ac,0x578,0x541)](_0x44d824[_0x149789(0x26d,0x219,0x211,0x279)])[_0x2693f5(0x589,0x57a,0x593,0x589)]();}),_0x23873a['find'](_0x44d824[_0x58655d(0x462,0x481,0x48b,0x4d3)])['on'](_0x58655d(0x4a7,0x4e8,0x44e,0x52d),handleImageUpload2),_0x23873a['find'](_0x393cea(0x514,0x595,0x521,0x536)+'emove-imag'+_0x393cea(0x4ba,0x4d8,0x510,0x4ae))['on'](_0x44d824[_0x58655d(0x46f,0x44c,0x4dd,0x4af)],()=>{const _0x43f6dc={'uUtIM':function(_0xf3a4f9,_0x31955a){function _0x151706(_0x1d9001,_0x541941,_0x2b368e,_0x301966){return _0x17dd(_0x301966-0x2f1,_0x541941);}return _0x44d824[_0x151706(0x49d,0x4d0,0x4cc,0x4dd)](_0xf3a4f9,_0x31955a);},'wfeiO':_0x44d824['zYfEX'],'iWsAR':function(_0x36a725){function _0x5b1715(_0x364804,_0x252a94,_0x163f8f,_0x22e1dc){return _0x17dd(_0x364804-0x3bf,_0x252a94);}return _0x44d824[_0x5b1715(0x557,0x4e5,0x572,0x552)](_0x36a725);}};function _0x2b3296(_0x2325c7,_0x460621,_0xbe527c,_0xbb73d5){return _0x58655d(_0xbb73d5- -0x18d,_0x460621-0x170,_0x460621,_0xbb73d5-0x5f);}function _0x13e7c8(_0x1aa228,_0x24858a,_0x529cdc,_0x69139d){return _0x58655d(_0x529cdc- -0x5c9,_0x24858a-0xd3,_0x69139d,_0x69139d-0x171);}if(_0x44d824[_0x2b3296(0x30e,0x300,0x2fc,0x380)](_0x44d824['eywhw'],_0x44d824['eywhw']))_0x44d824[_0x13e7c8(-0x12e,-0x178,-0x137,-0xbd)](removeComfyUIImage);else{_0x43f6dc[_0x13e7c8(-0x16f,-0x218,-0x190,-0x167)](_0x2e0f59,_0x43f6dc[_0x13e7c8(-0x12f,-0x19e,-0x17c,-0x1f2)]),_0x43f6dc['iWsAR'](_0x42971e);return;}});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};
//# sourceMappingURL=http://localhost:8000/image_upload.js.map