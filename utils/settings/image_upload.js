(function(_0xcb159,_0x3b111c){const _0x500b9d=_0xcb159();function _0x201799(_0x1065d8,_0x59ba5d,_0x46348c,_0x3ebbc6){return _0x29be(_0x3ebbc6-0x31f,_0x1065d8);}function _0x5d772b(_0x275057,_0x41bd1b,_0x22fff4,_0x340275){return _0x29be(_0x275057-0x2c8,_0x22fff4);}while(!![]){try{const _0x520ba7=-parseInt(_0x201799(0x448,0x41c,0x46c,0x485))/(0x204d+-0x2*0x42d+-0x17f2)+parseInt(_0x201799(0x5ae,0x4d4,0x5a1,0x535))/(-0x1f97+-0x1*-0x1c4c+-0x41*-0xd)*(-parseInt(_0x5d772b(0x4e3,0x513,0x54e,0x555))/(-0x1*0x1d5a+0x1355+0xa08))+parseInt(_0x5d772b(0x487,0x4e9,0x4af,0x502))/(-0x45*0x2e+0x1b7*-0x4+-0x1346*-0x1)+parseInt(_0x201799(0x577,0x504,0x5c0,0x550))/(-0x12d3+0x1c27+-0x94f)+parseInt(_0x201799(0x500,0x4bd,0x4f8,0x528))/(0x5*0x3d9+0x1*0x19ab+-0x2ce2)+parseInt(_0x5d772b(0x4e8,0x4a2,0x50a,0x46d))/(0x6c*-0x45+0x9d4+0x134f)*(-parseInt(_0x201799(0x46d,0x49e,0x568,0x4eb))/(-0xb05*0x1+-0x8*0x2b3+0x20a5))+parseInt(_0x5d772b(0x439,0x3bd,0x3da,0x460))/(0xce1*0x1+-0x25ca+-0xce*-0x1f)*(parseInt(_0x201799(0x4ca,0x511,0x487,0x494))/(-0x7*0x287+0x169f*0x1+-0x4e4));if(_0x520ba7===_0x3b111c)break;else _0x500b9d['push'](_0x500b9d['shift']());}catch(_0x420e93){_0x500b9d['push'](_0x500b9d['shift']());}}}(_0x2534,0x117*-0x53+-0x6c28e+0xdcf6a));const _0x8108bd=(function(){let _0x57ba3f=!![];return function(_0x50eab9,_0xb05b4c){const _0x3033c2={};_0x3033c2[_0x1aeb2c(-0x1f7,-0x202,-0x1c9,-0x228)]='PKvBI';function _0x1aeb2c(_0x2b80b2,_0x2fe087,_0x30d1b6,_0x317a1f){return _0x29be(_0x317a1f- -0x3e2,_0x2b80b2);}const _0x26ea32=_0x3033c2,_0x1f5e4b=_0x57ba3f?function(){function _0x336621(_0x3076ee,_0x836def,_0x3f9250,_0x546552){return _0x1aeb2c(_0x3f9250,_0x836def-0x1d5,_0x3f9250-0x2e,_0x3076ee-0x18c);}function _0x2e2a3f(_0x4e5051,_0x49cf3b,_0x328d49,_0x7050ab){return _0x1aeb2c(_0x328d49,_0x49cf3b-0x1d1,_0x328d49-0x109,_0x49cf3b-0x67f);}if(_0xb05b4c){if(_0x26ea32[_0x2e2a3f(0x46a,0x457,0x4ba,0x419)]!==_0x2e2a3f(0x3b7,0x3ed,0x3c8,0x3b6)){const _0x228cf1=_0xb05b4c[_0x2e2a3f(0x449,0x4a1,0x433,0x46f)](_0x50eab9,arguments);return _0xb05b4c=null,_0x228cf1;}else{if(_0x3da362){const _0x181cbe=_0x7a522c[_0x2e2a3f(0x4af,0x4a1,0x460,0x4c2)](_0x3a88c5,arguments);return _0x2a0369=null,_0x181cbe;}}}}:function(){};return _0x57ba3f=![],_0x1f5e4b;};}()),_0x18d3ae=_0x8108bd(this,function(){const _0x2d65c0={};_0x2d65c0[_0x295de4(0x1ce,0x192,0x1c7,0x1bb)]=_0x5864bf(0x336,0x31f,0x38e,0x2c4)+'+$';function _0x5864bf(_0x362a54,_0x522542,_0x2dbf7e,_0x3aa4ad){return _0x29be(_0x522542-0x1d8,_0x3aa4ad);}const _0x4c6782=_0x2d65c0;function _0x295de4(_0xa7c603,_0x20d31b,_0x5384e6,_0x5bcfbc){return _0x29be(_0x20d31b- -0x7b,_0xa7c603);}return _0x18d3ae[_0x5864bf(0x385,0x325,0x2b7,0x330)]()[_0x295de4(0x13b,0x104,0x13c,0xfa)](_0x4c6782[_0x295de4(0x11b,0x192,0x146,0x1e2)])[_0x295de4(0x131,0xd2,0xb9,0x67)]()[_0x5864bf(0x352,0x39c,0x399,0x3b9)+'r'](_0x18d3ae)[_0x5864bf(0x327,0x357,0x2f5,0x2df)](_0x4c6782[_0x295de4(0x1b4,0x192,0x137,0x180)]);});_0x18d3ae();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';function _0x13e6c2(_0x12abf3,_0xd7a185,_0x53cd30,_0x171bdb){return _0x29be(_0xd7a185-0x159,_0x53cd30);}function _0x2534(){const _0x5e6a16=['Aw1Hz2vjBNb1Da','ChnbwLG','ChjLDMLLD0LTyq','ANnVBG','sMvrBfC','yujZwuG','tgfcEwG','nta5nJG3ug9PA25l','DxnOruS','t1fxy0K','CwHVtwe','Aw5NignHy2HLza','AKLfDve','ignHy2HLihrVia','B3revu4','tu1Zz0e','uu9ZDhG','C3rHCNrZv2L0Aa','otm5nZG4mxrZEMXTqG','uwXlqLu','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','5zMO6l+u5zUE5PwW5O2UoIa','mtbKzhPpuNC','svbSEw0','i2LTywDLsw5WDq','y1P0rgq','5lIk5lYG5AsX6lsLoIa','CMvMigLTywDLoG','yMXVyG','AgfYlxjLzI1PBq','vuvXCMi','zKXWrg4','C2vHCMnO','qNDxvfq','yNfOzgm','C3rVCMvezwXLDa','CMDXDvO','whbLDhm','zNbuA0S','qufUs3O','x25HAv9JAgfYxW','A2XIu3C','z2vFBMfPx2nOyq','mNWWFdn8nhWXFa','DM9NyMm','ALzhD1G','ALPRvvy','m3WYFdf8nxW0Fa','vNfbCey','Bw92zs1PBwfNzq','i2nVBwz5DwKTAq','y3jLyxrLt2jQzq','tKDsu3i','zgLZCgXHEq','yxbWzw5K','uvfWEKu','zw1VDMuTAw1HzW','BgfPx2nOyxjFCG','BgfPx3zPyMvFDa','CMvZDwX0','C3jJ','yu5itNm','z2v0rwXLBwvUDa','B3bLBKrc','AuPcwNq','z2uY','C0fkENi','BM92zwXHAs1Yzq','CxvLCNLtzwXLyW','uLbntvq','EwfsreG','5zUE5PwW5O2UoG','lxjLzI1PBwfNzq','A1LpqLu','zxCTy29UDgfPBG','yNrU','ztOG','CM9jBe4','qLzTyvm','zwXLy3qTAw1HzW','DhjPBq','C3rVCMvszwfKtW','ihrVihvWzgf0zq','C3rYAw5NAwz5','Eu1TsK8','yxqUifbSzwfZzq','C0jyBhO','y29TzNL1AwnHBG','Dgv4Da','CL9Yzwy','vMD6quG','ww1jsfu','CMv2B2TLt2jQzq','ExvPx3jLzL9PBq','DgfYz2v0','BwXTsvK','mZe2ndu2vLjnA2jI','ue9tva','yvnSu04','rgDhvLm','z2vFBM92zwXHAq','y29UC3rYDwn0BW','zuzKDLm','q0fUwuO','lwj0BG','x25VDMvSywK','ywDLoG','mxWZFdr8mhWY','Df9UywLFy2HHCG','ohHPqxv3tW','vvjm','ELvuvMK','yMXVyJO','i25VDMvSywKTAq','z01Zshu','txbKr0q','B2ngsuu','tLHhAw4','zKXrrei','rxjYB3iGBg9Hza','Dhu4lwLTywDLlq','C3r5Bgu','DgfkDge','C3rVCMvszwfKvW','uNnOEM0','vMTzCwS','y3rvuKW','zxnZAw5Nie5VDG','DgHLig5LDYbMBW','ywDL','Aw1Hz2u','B29VwgG','sfvPrwK','qNLjza','vwHXEwO','ze9uDKq','rxjYB3iGChjVyW','CgjXCK8','uw5zyuC','zMLSzxm','BxbxvKG','i25VDMvSywKTyW','5lUo57Yt5A2y5yQG6l29q29TzNK','BwfNzs1WCMv2Aq','zwXbssbPBwfNzq','BMX5','rw1IEwC','y2HHBMDL','ie5VDMvSquKGqW','rvjKu1C','zMXLEa','rMjprge','qMXPDuu','x3jLzG','Avr0sxm','B2vUseu','i2nVBwz5DwKTCG','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','y2XPy2S','5zU+54Mh5Ase55cg5AsX6lsLoIa','BMfPm0nOyxjszq','igzYB20Gy2fJAa','CML0zq','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','y29TzNL1AvvYBa','yxbWBhK','v1P1CLq','zLrtqum','Bw92zs1JAgfYlq','zgf0ytPPBwfNzq','mZqXmZqWAePAsNf3','zxiGlNn0lwnOyq','zxjYB3i','C0jsvwq','D3LTBgq','BhLzCMi','zKLTywDL','CgXHy2vOB2XKzq','y05bzgS','BMfTzq','AK52Dwy','AgfYifjLzIbPBq','Aw1Hz2uVCg5N','mtCWmZy5nhjPsMz0tW','ienVBwz5vuKGAq','CM1HDc4','C2vYDMvYrMLSzq','Dg9Y','m3HmvfzvrW','zejXueW','DY1JB250ywLUzq','tw5Uy1i','CMfUC2zLCL9PBq','ntyWnJiZwxrus2nY','twvIBgK','zs1IDg4','BxbbvhK','vK1MuMq','Aw5SAw5LlwzSzq','y2fJAguGzM9YBq','tMfTzq','B25SB2fKzw5K','v1L4yve','DfbvAwS','y29TzNL1As1Yzq','B2Lxvwq','ruPAqxK','DerdC2C','y1nxvhK','A2rlEKW','mZuWmtq4nwHZs0nmuW','zw1VDMuTy2HHCG','Bef4BM4','tgrrBeu','rwf4CfG','B2XVCxq','BNb3C0S','yMXVy2S','s3bMtuS','txfOy3u','Awj5AxK','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','BwvZC2fNzq','sffADhG','y2fJAgvFy29TzG','q2TLA1y','igzYB20GB2XKia','AuXnCMO','r2LXBuq','zNLvssbPBwfNzq','C3rYAw5N','DeHYzg8','zMLUza','tvjezhq','ruLMrKG','v1PNqK0','ChHuExy','A2fVDhvWAwfU','vKDLBuK','tg9HzgvKienVBq','CMvHzefZrgf0yq','wLzOqKC','v2rpDei','tvrqreS','ru9Usui','AwjLigLTywDLoG','r2TRDMC','kcGOlISPkYKRkq','Bg9N','tujyuKu','ywjYAxC','vLzSDLe','zgf0yq','Dg9tDhjPBMC','CKfJDKu','qKrzC2G','CMnqueS','y2fJAgvFBM92zq','BfjZyLK','ywDLlxbYzxzPzq','z0v6zKO','BM9Uzq','BwfNztO','zwXbssbJAgfYia','BMfPm1zPyMvuCG','yw5ZzMvYsw1HzW','nhWYFdb8mxWZ','l3vWBg9Hzc9PBq','C3bSAxq','Berytuu','6k+35ywi6k6+572Uq29TzNLv'];_0x2534=function(){return _0x5e6a16;};return _0x2534();}import{extensionName}from'../config.js';function _0x29be(_0x231728,_0x6af46){_0x231728=_0x231728-(-0x23*-0xc5+0xcf7+-0x26bf);const _0x42d1a4=_0x2534();let _0x2a1257=_0x42d1a4[_0x231728];if(_0x29be['DhUBvh']===undefined){var _0x486686=function(_0x5e0e0e){const _0x51f9e6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x357d29='',_0x4e1ef5='',_0x28c754=_0x357d29+_0x486686;for(let _0x29752e=-0x4df+-0x43*-0x4c+-0x301*0x5,_0x5a7391,_0x22525a,_0x1aba42=-0x9d2*0x3+0x13*-0x169+0x3841;_0x22525a=_0x5e0e0e['charAt'](_0x1aba42++);~_0x22525a&&(_0x5a7391=_0x29752e%(0x376+-0x254c+0x21da)?_0x5a7391*(0x1c81+-0x2*0xc88+-0x2b*0x13)+_0x22525a:_0x22525a,_0x29752e++%(-0x3f5*0x1+-0x1b16+0x1*0x1f0f))?_0x357d29+=_0x28c754['charCodeAt'](_0x1aba42+(-0x297*0x4+-0x2*0xbec+0x223e))-(0x1081+-0x744+0x5*-0x1d7)!==-0x1183+0x19*-0x1+0x119c?String['fromCharCode'](-0xb*0x1ed+0x784+0xeaa&_0x5a7391>>(-(0x2307+0xbf*0x3+-0xfb*0x26)*_0x29752e&-0x1aac+-0x3bf*0x4+0x29ae)):_0x29752e:0x24a6+-0x20f7+-0x1*0x3af){_0x22525a=_0x51f9e6['indexOf'](_0x22525a);}for(let _0x2dac82=-0x206+-0x21*-0x113+0xc7*-0x2b,_0x209686=_0x357d29['length'];_0x2dac82<_0x209686;_0x2dac82++){_0x4e1ef5+='%'+('00'+_0x357d29['charCodeAt'](_0x2dac82)['toString'](0x239a+0x168b+-0x3a15))['slice'](-(0x1786+-0x365*-0xa+0x2*-0x1cbb));}return decodeURIComponent(_0x4e1ef5);};_0x29be['rTqnCX']=_0x486686,_0x29be['zTrznd']={},_0x29be['DhUBvh']=!![];}const _0x58a542=_0x42d1a4[-0x1af2+0xbb+0x3*0x8bd],_0x484a2b=_0x231728+_0x58a542,_0x340a6b=_0x29be['zTrznd'][_0x484a2b];if(!_0x340a6b){const _0x5b1155=function(_0x13e4b9){this['fxMcZi']=_0x13e4b9,this['BhLqUk']=[0xc8*-0x14+0x19f0+0xcb*-0xd,0x230b+0x15e1+-0x38ec,0xb*-0x121+-0x1d*0x7a+-0x3*-0x8bf],this['sPaCay']=function(){return'newState';},this['PYWwDO']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['OPqKKK']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5b1155['prototype']['UweBTW']=function(){const _0x463b9a=new RegExp(this['PYWwDO']+this['OPqKKK']),_0x3424cb=_0x463b9a['test'](this['sPaCay']['toString']())?--this['BhLqUk'][0x1f68+0x2465+-0x2*0x21e6]:--this['BhLqUk'][-0x4a4+0x25f2+0x261*-0xe];return this['ORNgfj'](_0x3424cb);},_0x5b1155['prototype']['ORNgfj']=function(_0x99e277){if(!Boolean(~_0x99e277))return _0x99e277;return this['DNwaqv'](this['fxMcZi']);},_0x5b1155['prototype']['DNwaqv']=function(_0x53f12c){for(let _0x5f1fa2=0x13ab*-0x1+-0xceb*-0x1+0x6c0,_0x50c095=this['BhLqUk']['length'];_0x5f1fa2<_0x50c095;_0x5f1fa2++){this['BhLqUk']['push'](Math['round'](Math['random']())),_0x50c095=this['BhLqUk']['length'];}return _0x53f12c(this['BhLqUk'][-0x2537+-0x985+0x2ebc]);},new _0x5b1155(_0x29be)['UweBTW'](),_0x2a1257=_0x29be['rTqnCX'](_0x2a1257),_0x29be['zTrznd'][_0x484a2b]=_0x2a1257;}else _0x2a1257=_0x340a6b;return _0x2a1257;}import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x13e6c2(0x311,0x2aa,0x2e4,0x32e)+_0x13e6c2(0x347,0x2f2,0x2e9,0x28a)+_0x213aaa(0x82,0x8d,0x4c,0x63)+_0x213aaa(-0x65,0x46,0xd,-0x4f),NAI_CHAR_REF_CACHE_KEY=_0x13e6c2(0x2a7,0x2aa,0x2d3,0x29e)+_0x213aaa(0x40,0x28,-0x3b,-0xa0)+'ef_image',COMFYUI_REF_CACHE_KEY=_0x13e6c2(0x295,0x289,0x244,0x245)+_0x213aaa(0x35,0x43,-0x17,-0x54)+_0x13e6c2(0x3a5,0x339,0x2ff,0x2f0);let nai3VibeTransferImageMimeType=_0x13e6c2(0x36c,0x36e,0x32b,0x355);function _0x213aaa(_0x18ee2e,_0x6cb146,_0x3425d7,_0x5009a3){return _0x29be(_0x3425d7- -0x1d3,_0x6cb146);}let nai3CharRefImageMimeType=_0x213aaa(0xb5,0x6b,0x42,-0x3d),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x27df33){const _0x307a78={};_0x307a78[_0x574667(0x15a,0x1c2,0x24d,0x1df)]=_0x245507(0x219,0x270,0x259,0x1aa)+_0x574667(0x1bd,0x116,0x16b,0x17f),_0x307a78[_0x245507(0x28b,0x2fd,0x27a,0x30a)]=_0x245507(0x288,0x239,0x240,0x2de)+_0x574667(0x173,0x150,0x190,0x1aa)+_0x245507(0x261,0x21e,0x2ae,0x225)+'er\x20.st-cha'+_0x574667(0x1e1,0x135,0x1b4,0x193)+_0x245507(0x2c8,0x2ad,0x33e,0x31c)+'r',_0x307a78[_0x245507(0x21b,0x29c,0x1a6,0x20e)]=_0x574667(0xf2,0x1b5,0x16e,0x15e)+'move-image'+_0x574667(0x16b,0x141,0x120,0x183),_0x307a78['Uhqyj']=_0x574667(0x198,0x1b0,0x23f,0x1c4),_0x307a78[_0x245507(0x201,0x1d4,0x1d4,0x231)]=_0x245507(0x1e1,0x205,0x25c,0x23c);function _0x574667(_0x49662a,_0x4d718c,_0x4da5e3,_0x12de99){return _0x13e6c2(_0x49662a-0x1a3,_0x12de99- -0x19d,_0x4da5e3,_0x12de99-0x1af);}_0x307a78[_0x574667(0x21e,0x23a,0x1d0,0x1ef)]=_0x245507(0x20d,0x19f,0x234,0x23d);function _0x245507(_0x3fda41,_0x594077,_0x35b75e,_0x31d8b3){return _0x13e6c2(_0x3fda41-0x150,_0x3fda41- -0xa1,_0x594077,_0x31d8b3-0x17f);}_0x307a78[_0x574667(0x205,0x14e,0x1e9,0x1b6)]=_0x574667(0x133,0x1b5,0x1f2,0x1b1);const _0x5e1869=_0x307a78,_0x12c7f4=document['getElement'+_0x245507(0x29c,0x318,0x288,0x216)](_0x5e1869[_0x245507(0x2db,0x299,0x33c,0x337)]),_0xe3dc90=document['querySelec'+'tor'](_0x5e1869[_0x245507(0x28b,0x2b4,0x219,0x22f)]),_0x24bbf3=document[_0x245507(0x255,0x27c,0x299,0x1e6)+_0x574667(0x1c9,0x1ca,0x152,0x1a0)](_0x5e1869[_0x574667(0xad,0x166,0x10e,0x11f)]);if(_0x27df33&&_0x27df33['startsWith'](_0x5e1869[_0x574667(0x1aa,0x1f2,0x178,0x1a1)])){_0x12c7f4[_0x574667(0xec,0x160,0x1c6,0x157)]=_0x27df33,_0x12c7f4['style'][_0x574667(0xec,0xcf,0x14a,0x150)]=_0x5e1869[_0x245507(0x201,0x287,0x287,0x208)],_0xe3dc90[_0x245507(0x290,0x287,0x2fd,0x27e)][_0x574667(0xfe,0x162,0xf5,0x150)]=_0x245507(0x20d,0x1f2,0x1d7,0x219),_0x24bbf3['style'][_0x245507(0x24c,0x27e,0x25b,0x1f3)]='inline-fle'+'x';const _0x3c0ed9=_0x27df33['split'](','),_0x1a03c8=_0x3c0ed9[-0x3*-0x4c0+-0x716+-0x72a]['split'](':')[-0xb7*-0x1b+-0x17cf+0x483][_0x245507(0x214,0x25e,0x23f,0x1da)](';')[-0x32d*-0x8+-0x16d5+0x293*-0x1];nai3VibeTransferImageMimeType=_0x1a03c8,window['nai3VibeTr'+_0x245507(0x211,0x201,0x1c2,0x236)+'e']=_0x3c0ed9[0x1*-0x1c47+0x16e4+-0xe6*-0x6];const _0x390513={};_0x390513['id']=NAI_VIBE_CACHE_KEY,_0x390513['data']=_0x27df33,dbs['storeReadW'+_0x574667(0x1f0,0x244,0x16e,0x1bd)](_0x390513);}else{const _0x16cb9b='3|0|2|4|1'[_0x574667(0x98,0x191,0x117,0x118)]('|');let _0x54cc97=0x3d*-0x5+-0x20c2+0x21f3;while(!![]){switch(_0x16cb9b[_0x54cc97++]){case'0':_0x12c7f4[_0x245507(0x290,0x25e,0x24f,0x2c0)][_0x574667(0x1c4,0x18e,0x180,0x150)]=_0x5e1869['lAxnn'];continue;case'1':window['nai3VibeTr'+'ansferImag'+'e']=null;continue;case'2':_0xe3dc90['style'][_0x574667(0x1cf,0x12a,0x102,0x150)]=_0x5e1869[_0x245507(0x2b2,0x26b,0x245,0x2c4)];continue;case'3':_0x12c7f4[_0x245507(0x253,0x26a,0x1ff,0x2d6)]='';continue;case'4':_0x24bbf3[_0x574667(0x115,0x1d9,0x164,0x194)][_0x574667(0x161,0xd0,0xfd,0x150)]=_0x5e1869['lAxnn'];continue;}break;}}}function removeNovelaiImage(){function _0xff604a(_0x39fb22,_0x2bd7c8,_0x1f8529,_0x2d3e37){return _0x213aaa(_0x39fb22-0x17c,_0x2d3e37,_0x2bd7c8-0x46e,_0x2d3e37-0x19c);}const _0x4a6bcd={'qhoMa':function(_0x2e5f1d,_0x5178c2){return _0x2e5f1d(_0x5178c2);}};_0x4a6bcd[_0x4d0d62(0x1c1,0x1d4,0x244,0x2c8)](updateNovelaiImagePreview,null);function _0x4d0d62(_0x55ea8f,_0x3efaa8,_0x165a2d,_0x5c62f2){return _0x213aaa(_0x55ea8f-0x122,_0x3efaa8,_0x165a2d-0x2ae,_0x5c62f2-0x1b);}dbs[_0xff604a(0x483,0x41d,0x40c,0x3d7)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x1316e7){const _0x2aa9bb={'WZurT':_0x3c56e4(-0x9,0x62,-0x54,0x34)+_0x3c56e4(0x41,0x8f,0x27,0x2b)+'elAI\x20image'+':','pxTyv':function(_0x26699e,_0xe9786f){return _0x26699e(_0xe9786f);},'sBRUd':_0x3c56e4(0x68,-0x14,-0x7,0x4b)},_0x367910=_0x1316e7['target'][_0x3c56e4(0x3b,0xb9,0x82,0x37)][0x4f*0x70+-0x61*0x4e+-0x502*0x1];function _0x3c56e4(_0x37bc15,_0x10dde2,_0x1e9de6,_0x57776c){return _0x13e6c2(_0x37bc15-0x9c,_0x57776c- -0x30c,_0x37bc15,_0x57776c-0x1e6);}function _0xd7a8ff(_0x29e54e,_0x1e1fd4,_0x3a949f,_0x130623){return _0x13e6c2(_0x29e54e-0x84,_0x3a949f- -0x309,_0x1e1fd4,_0x130623-0x113);}if(!_0x367910)return;try{const _0x5a1ea7=await processUploadedImage(_0x367910,!![]);updateNovelaiImagePreview(_0x5a1ea7);}catch(_0x21a694){console[_0xd7a8ff(0x56,0x46,0x5b,0x79)](_0x2aa9bb[_0xd7a8ff(0x3c,0x34,0x55,-0x5)],_0x21a694),_0x2aa9bb[_0x3c56e4(-0xb4,-0xf1,-0xd9,-0x77)](alert,_0x2aa9bb[_0xd7a8ff(0x3e,0x1d,0x5c,0xdd)]+_0x21a694[_0xd7a8ff(-0x16,-0x89,-0x82,0x2)]);}}function updateNovelaiCharRefImagePreview(_0x4a3aae){const _0x20eed5={};_0x20eed5[_0x2a7482(0x2b8,0x2e7,0x274,0x345)]=_0x2a7482(0x2d4,0x31e,0x2e1,0x324)+_0x2a7482(0x335,0x35d,0x3e2,0x35f),_0x20eed5['bqhdc']=_0x376079(-0x9c,-0x7b,-0x37,-0x79)+'mage-previ'+_0x2a7482(0x3da,0x366,0x2e7,0x3b0)+_0x376079(-0x23,0x18,-0x43,-0x33)+_0x2a7482(0x418,0x394,0x3db,0x31d)+'placeholde'+'r',_0x20eed5[_0x376079(-0x6b,-0x39,-0x68,-0x2e)]=_0x2a7482(0x419,0x3e8,0x414,0x3d9)+_0x2a7482(0x2eb,0x34d,0x348,0x2e4)+'-btn',_0x20eed5['QQpzE']=_0x2a7482(0x393,0x38c,0x362,0x34b),_0x20eed5['acSHw']=function(_0x4d14df,_0x56b5b9){return _0x4d14df!==_0x56b5b9;},_0x20eed5[_0x2a7482(0x2f1,0x2fe,0x2e4,0x2a9)]='block';function _0x376079(_0x1f146f,_0x21b34a,_0x5ad5b9,_0x3b1213){return _0x13e6c2(_0x1f146f-0xc0,_0x1f146f- -0x386,_0x3b1213,_0x3b1213-0xa1);}_0x20eed5[_0x376079(-0x34,0x3c,0x22,-0x16)]=_0x2a7482(0x30a,0x312,0x2f9,0x395),_0x20eed5[_0x376079(-0x39,0x11,0x42,-0x49)]=_0x376079(-0x8,0x45,-0x34,0x5)+'x',_0x20eed5[_0x2a7482(0x31b,0x345,0x2f9,0x2e1)]=_0x376079(-0xa3,-0x118,-0x122,-0xc9)+'5',_0x20eed5[_0x2a7482(0x360,0x372,0x3ca,0x35d)]=_0x2a7482(0x3cf,0x3b2,0x42f,0x37f),_0x20eed5['VgzAH']=_0x2a7482(0x3ea,0x393,0x334,0x378)+_0x376079(-0xc3,-0x52,-0xfe,-0x78)+'\x20NovelAI\x20V'+_0x376079(-0xe8,-0xc4,-0xf2,-0x15d),_0x20eed5[_0x376079(-0xbb,-0x11c,-0xc1,-0x134)]=_0x376079(-0xcc,-0xf8,-0x11f,-0x6f)+_0x376079(-0xa4,-0x5d,-0x83,-0x67)+_0x2a7482(0x3cf,0x375,0x380,0x3bb);function _0x2a7482(_0xc0bb7c,_0x4816,_0x3979aa,_0x1956b0){return _0x213aaa(_0xc0bb7c-0x19f,_0x3979aa,_0x4816-0x390,_0x1956b0-0x182);}_0x20eed5[_0x2a7482(0x282,0x2ee,0x2e0,0x2af)]=_0x2a7482(0x3ee,0x3a9,0x3e6,0x3a5)+_0x2a7482(0x32a,0x339,0x31b,0x315)+_0x376079(-0xda,-0x138,-0x58,-0xe8)+_0x2a7482(0x3a8,0x3da,0x426,0x39e)+'r\x20.st-chat'+'u8-image-p'+'laceholder',_0x20eed5[_0x376079(-0xfa,-0xe5,-0x95,-0x14c)]='novelai-re'+_0x2a7482(0x37c,0x3c4,0x420,0x3a4)+'ref-image-'+_0x2a7482(0x34c,0x367,0x3d1,0x38c),_0x20eed5[_0x2a7482(0x408,0x3a3,0x32d,0x349)]=_0x2a7482(0x3c2,0x3c5,0x42b,0x3fa),_0x20eed5[_0x376079(-0x5b,0xf,0x1c,-0xac)]=function(_0x1195df,_0x433674){return _0x1195df===_0x433674;},_0x20eed5[_0x2a7482(0x430,0x3eb,0x447,0x401)]=_0x376079(-0x7a,-0x66,-0xc5,-0x8e),_0x20eed5['Mebli']=_0x376079(-0x8c,-0xca,-0x9d,-0xce),_0x20eed5['VMfRd']=_0x2a7482(0x3c9,0x387,0x404,0x3e4);const _0x3a9ba9=_0x20eed5,_0xe37163=document[_0x2a7482(0x33c,0x35a,0x354,0x354)+_0x376079(-0x49,-0x3c,-0x6a,-0x13)](_0x3a9ba9[_0x376079(-0xbb,-0xcf,-0x76,-0x120)]),_0x173da=document['querySelec'+'tor'](_0x3a9ba9[_0x376079(-0xfc,-0x15d,-0x174,-0xcf)]),_0x2085b9=document[_0x2a7482(0x314,0x35a,0x3dd,0x34e)+_0x2a7482(0x414,0x3a1,0x38a,0x36e)](_0x3a9ba9['iLMrj']);if(_0x4a3aae&&_0x4a3aae['startsWith'](_0x3a9ba9[_0x2a7482(0x40a,0x3a3,0x336,0x373)])){if(_0x3a9ba9['MpdGD'](_0x3a9ba9[_0x2a7482(0x450,0x3eb,0x459,0x401)],_0x3a9ba9[_0x376079(-0xc,-0x4a,0x27,0x4b)])){const _0x198477=_0x51daf2[_0x2a7482(0x314,0x35a,0x3a7,0x2f3)+_0x2a7482(0x331,0x3a1,0x3b3,0x354)](_0x3a9ba9['KpfMK']),_0x3dc821=_0x4a5a58[_0x2a7482(0x30f,0x360,0x3a5,0x3bb)+_0x2a7482(0x422,0x3d7,0x387,0x42e)](_0x3a9ba9[_0x2a7482(0x356,0x33e,0x357,0x2bc)]),_0x3d466e=_0x46460a['getElement'+'ById'](_0x3a9ba9[_0x2a7482(0x3b7,0x37f,0x33c,0x39b)]);_0x198477['src']&&_0x198477[_0x2a7482(0x2f1,0x358,0x384,0x373)][_0x2a7482(0x2dd,0x32d,0x331,0x2b4)](_0x3a9ba9[_0x2a7482(0x3c0,0x353,0x341,0x3d8)])&&_0x3a9ba9['acSHw'](_0x198477[_0x376079(-0x92,-0x82,-0xf9,-0x101)],_0x54ca44)&&_0x25a074[_0x2a7482(0x35f,0x378,0x3e0,0x328)+_0x376079(-0x50,-0xbf,-0xa7,-0x25)](_0x198477[_0x2a7482(0x38e,0x358,0x31e,0x362)]);if(_0x377cf6)_0x198477['src']=_0x201bdf,_0x198477[_0x2a7482(0x3ed,0x395,0x318,0x39c)]['display']=_0x3a9ba9[_0x2a7482(0x2e6,0x2fe,0x2a3,0x31d)],_0x3dc821[_0x376079(-0x55,-0xbe,-0x74,0xf)][_0x376079(-0x99,-0x4f,-0x8d,-0x3e)]=_0x3a9ba9[_0x2a7482(0x423,0x3b6,0x3be,0x374)],_0x3d466e[_0x376079(-0x55,0x20,-0xd8,-0x9c)][_0x2a7482(0x2e3,0x351,0x35d,0x35b)]=_0x3a9ba9[_0x2a7482(0x332,0x3b1,0x3d9,0x3be)];else{const _0x792815=_0x3a9ba9['klbSw'][_0x2a7482(0x2b3,0x319,0x2ac,0x39a)]('|');let _0x1cc432=-0x20de+-0x1840+-0x3*-0x130a;while(!![]){switch(_0x792815[_0x1cc432++]){case'0':_0x198477[_0x376079(-0x55,-0xc9,-0x28,0xb)][_0x2a7482(0x394,0x351,0x366,0x327)]=_0x3a9ba9['iTtIs'];continue;case'1':_0x4e8557[_0x2a7482(0x3bd,0x373,0x3d9,0x3b8)+_0x376079(-0xf0,-0x6b,-0x11d,-0x167)]=null;continue;case'2':_0x198477[_0x2a7482(0x3cc,0x358,0x351,0x32a)]='';continue;case'3':_0x3dc821['style'][_0x376079(-0x99,-0xdc,-0x2d,-0x43)]=_0x3a9ba9[_0x2a7482(0x3b2,0x372,0x38f,0x337)];continue;case'4':_0x3d466e[_0x376079(-0x55,-0x2a,-0x5c,-0x70)][_0x376079(-0x99,-0x99,-0x4f,-0x11e)]='none';continue;case'5':_0x42f06b=null;continue;}break;}}}else{_0xe37163[_0x2a7482(0x2dd,0x358,0x2e1,0x392)]=_0x4a3aae,_0xe37163[_0x376079(-0x55,-0xce,0x10,-0xa0)]['display']=_0x3a9ba9[_0x2a7482(0x297,0x2fe,0x340,0x2ae)],_0x173da['style'][_0x376079(-0x99,-0xbc,-0x51,-0x85)]=_0x376079(-0xd8,-0xb0,-0x9e,-0x10b),_0x2085b9[_0x376079(-0x55,-0x48,-0x39,-0x7b)][_0x376079(-0x99,-0x100,-0x104,-0xaf)]=_0x3a9ba9[_0x2a7482(0x3a8,0x3b1,0x3e9,0x398)];const _0x1abbf1=_0x4a3aae[_0x376079(-0xd1,-0xec,-0x113,-0x124)](','),_0xed39b=_0x1abbf1[-0xbfc*0x2+0x1*0x283+0x1575][_0x2a7482(0x31d,0x319,0x370,0x357)](':')[-0x1*-0x1efb+-0xf1b+0xef*-0x11]['split'](';')[-0x11be+-0x1513+0x26d1*0x1];nai3CharRefImageMimeType=_0xed39b,window[_0x376079(-0x2e,-0x98,0x38,0x53)+_0x2a7482(0x35b,0x3cc,0x410,0x3e5)]=_0x1abbf1[-0x626+-0x2c2*-0xe+-0x2075];const _0x5df33b={};_0x5df33b['id']=NAI_CHAR_REF_CACHE_KEY,_0x5df33b[_0x376079(-0xe1,-0x160,-0x80,-0xb2)]=_0x4a3aae,dbs[_0x376079(-0x53,0x2d,-0xb8,-0xa6)+_0x2a7482(0x444,0x3be,0x39e,0x36b)](_0x5df33b);}}else{if('UEqrb'!==_0x376079(-0xb0,-0x32,-0x10e,-0x8d))_0x55d8ba[_0x2a7482(0x448,0x3c8,0x39b,0x3da)](_0x3a9ba9[_0x376079(-0x74,0x5,-0x1f,-0xc9)],_0x429d97);else{const _0x3be4dd=_0x3a9ba9[_0x2a7482(0x3d9,0x3e1,0x375,0x3d1)][_0x2a7482(0x2cd,0x319,0x2d4,0x2c1)]('|');let _0x16f2aa=0x1b98*-0x1+0xb4f+0x1049;while(!![]){switch(_0x3be4dd[_0x16f2aa++]){case'0':_0x2085b9[_0x376079(-0x55,-0x59,-0x61,0x1)][_0x2a7482(0x2ea,0x351,0x378,0x38a)]=_0x3a9ba9['iTtIs'];continue;case'1':_0xe37163[_0x376079(-0x92,-0xc,-0xc5,-0x95)]='';continue;case'2':window['nai3CharRe'+_0x376079(-0x1e,-0x4f,0x21,0x46)]=null;continue;case'3':_0xe37163[_0x376079(-0x55,-0xbd,-0xbf,-0x85)][_0x2a7482(0x386,0x351,0x2ff,0x34d)]=_0x3a9ba9['iTtIs'];continue;case'4':_0x173da[_0x376079(-0x55,-0x69,0x1e,-0x7e)][_0x376079(-0x99,-0x8d,-0x7c,-0x30)]=_0x3a9ba9[_0x376079(-0x78,-0x94,-0x43,-0x42)];continue;}break;}}}}function removeNovelaiCharRefImage(){function _0x123b29(_0x325bae,_0x1c25b7,_0x32ad6d,_0x4a6f40){return _0x213aaa(_0x325bae-0xac,_0x325bae,_0x4a6f40-0x501,_0x4a6f40-0x1cd);}updateNovelaiCharRefImagePreview(null),dbs[_0x123b29(0x4ab,0x52b,0x4a6,0x4b0)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x26f9c6){function _0x5ce82f(_0x227331,_0x4fba2f,_0xc219d3,_0xda1d6){return _0x13e6c2(_0x227331-0x93,_0x4fba2f- -0x293,_0xda1d6,_0xda1d6-0x1b4);}const _0x2a961a={'otDUN':_0x83cf0a(0x54a,0x521,0x581,0x57e)+'2','AtnSq':function(_0x34f469,_0x34aa55){return _0x34f469===_0x34aa55;},'OQWcI':_0x83cf0a(0x4ac,0x50d,0x4a9,0x4c2),'VGemI':_0x83cf0a(0x527,0x596,0x515,0x599),'lyYrb':function(_0x101de8,_0x5003ed){return _0x101de8(_0x5003ed);},'VkYqk':_0x83cf0a(0x61c,0x5a9,0x5bc,0x607)+_0x5ce82f(0x11a,0xa4,0x6e,0x1c)+_0x5ce82f(0x37,0x1d,0x4d,-0x42)+_0x5ce82f(-0x44,0x40,0x19,-0x1b),'lRsbY':function(_0x545411,_0x3165b6){return _0x545411+_0x3165b6;},'WYxaQ':_0x5ce82f(0xdb,0xc4,0xa9,0x6e)},_0x6cabbf=_0x26f9c6[_0x5ce82f(0x7c,0x83,0xc0,0x2f)][_0x83cf0a(0x53a,0x5ac,0x5b5,0x528)][-0xdd+0x1ee+-0x111];if(!_0x6cabbf)return;function _0x83cf0a(_0x570201,_0x17b7eb,_0x33a70d,_0x3d43b1){return _0x13e6c2(_0x570201-0x6f,_0x17b7eb-0x269,_0x570201,_0x3d43b1-0x4f);}try{if(_0x2a961a['AtnSq'](_0x2a961a[_0x5ce82f(-0x1a,0x2e,-0x5,-0x17)],_0x2a961a[_0x5ce82f(-0x2a,0x4,0xa,-0x81)]))_0x36f278[_0x83cf0a(0x599,0x55f,0x578,0x564)+_0x5ce82f(0x75,0xaa,0xff,0xc9)](_0x2a961a[_0x83cf0a(0x57a,0x52f,0x58b,0x50a)])[_0x5ce82f(0x52,0xc3,0x4d,0xbe)]();else{const _0x1afadf=await _0x2a961a[_0x5ce82f(0xd0,0xd4,0x8a,0x102)](processUploadedImage,_0x6cabbf);updateNovelaiCharRefImagePreview(_0x1afadf);}}catch(_0x5137c8){console['error'](_0x2a961a[_0x83cf0a(0x528,0x59e,0x575,0x608)],_0x5137c8),alert(_0x2a961a[_0x83cf0a(0x599,0x514,0x50d,0x590)](_0x2a961a[_0x83cf0a(0x5a1,0x5eb,0x576,0x592)],_0x5137c8[_0x83cf0a(0x4b3,0x4f0,0x55f,0x4e3)]));}}function updateComfyUIImagePreview(_0xd79ced){const _0xfedb01={};_0xfedb01[_0x59d6ed(-0x27d,-0x255,-0x264,-0x21b)]=_0x59d6ed(-0x2c9,-0x28f,-0x23e,-0x280)+_0x1b3c20(-0xa8,0x1f,-0x21,-0xa3),_0xfedb01[_0x1b3c20(-0xd9,-0x7b,-0x61,-0x2)]=_0x1b3c20(0xb9,0xd3,0x6a,0x51)+_0x59d6ed(-0x209,-0x23a,-0x24f,-0x251)+'-btn';function _0x1b3c20(_0x29bf7e,_0x1522d2,_0x1b972e,_0x5bb0f4){return _0x13e6c2(_0x29bf7e-0x97,_0x1b972e- -0x31a,_0x5bb0f4,_0x5bb0f4-0x174);}_0xfedb01[_0x1b3c20(-0x10,-0x4e,-0x19,-0x3f)]=_0x59d6ed(-0x21f,-0x286,-0x18a,-0x212),_0xfedb01[_0x59d6ed(-0x251,-0x2f4,-0x27a,-0x293)]=function(_0xee0f4c,_0xbc82e8){return _0xee0f4c!==_0xbc82e8;},_0xfedb01[_0x59d6ed(-0x242,-0x20b,-0x236,-0x208)]=_0x59d6ed(-0x2f7,-0x251,-0x25f,-0x2b8),_0xfedb01[_0x59d6ed(-0x260,-0x20a,-0x212,-0x210)]=_0x59d6ed(-0x307,-0x272,-0x29b,-0x28c),_0xfedb01['ibyiy']=function(_0xa072c6,_0x44256a){return _0xa072c6===_0x44256a;};function _0x59d6ed(_0xeb456,_0xdbf7b3,_0x5d7cd8,_0x10efd1){return _0x13e6c2(_0xeb456-0x16a,_0x10efd1- -0x53a,_0x5d7cd8,_0x10efd1-0xa8);}_0xfedb01[_0x59d6ed(-0x22f,-0x19a,-0x1fa,-0x1fe)]='Rshzm',_0xfedb01['RPMMT']=_0x59d6ed(-0x25a,-0x1f8,-0x238,-0x1ec);const _0x29e05e=_0xfedb01,_0x1a8dcf=document['getElement'+_0x59d6ed(-0x1fa,-0x1f3,-0x26b,-0x1fd)](_0x29e05e[_0x1b3c20(0x53,0x20,0x5,-0x3e)]),_0x3e394f=document[_0x1b3c20(0x5,0xa,-0x1e,-0x2c)+_0x1b3c20(0x11,0xac,0x59,0xc5)](_0x59d6ed(-0x213,-0x243,-0x213,-0x250)+'mage-previ'+_0x1b3c20(-0x42,0x59,-0x18,-0x6a)+_0x1b3c20(0x83,-0x10,0x49,-0x39)+'tu8-image-'+'placeholde'+'r'),_0x5f5954=document[_0x59d6ed(-0x2b9,-0x1c8,-0x28f,-0x244)+_0x1b3c20(0x80,0x8c,0x23,0x32)](_0x29e05e[_0x59d6ed(-0x2a7,-0x2f7,-0x2a2,-0x281)]);_0x1a8dcf[_0x1b3c20(0x21,0xb,-0x26,-0x8d)]&&_0x1a8dcf[_0x59d6ed(-0x23d,-0x2b1,-0x273,-0x246)]['startsWith'](_0x29e05e[_0x59d6ed(-0x222,-0x267,-0x28f,-0x239)])&&_0x29e05e[_0x59d6ed(-0x215,-0x2f6,-0x2e6,-0x293)](_0x1a8dcf[_0x1b3c20(0x57,0x21,-0x26,0x56)],_0xd79ced)&&URL['revokeObje'+_0x1b3c20(0x33,-0x40,0x1c,-0xe)](_0x1a8dcf[_0x1b3c20(-0x18,-0x76,-0x26,-0x20)]);if(_0xd79ced)_0x1a8dcf['src']=_0xd79ced,_0x1a8dcf[_0x1b3c20(0xc,0x6,0x17,-0x2a)]['display']=_0x29e05e['taJta'],_0x3e394f[_0x1b3c20(0x99,-0x2f,0x17,-0x37)][_0x59d6ed(-0x1e9,-0x223,-0x290,-0x24d)]=_0x29e05e[_0x59d6ed(-0x232,-0x25e,-0x261,-0x210)],_0x5f5954[_0x1b3c20(0x6a,0x8a,0x17,0x15)]['display']=_0x59d6ed(-0x191,-0x201,-0x1c9,-0x1bc)+'x';else{if(_0x29e05e[_0x1b3c20(-0x19,-0xf7,-0x95,-0xd0)](_0x59d6ed(-0x23b,-0x22a,-0x181,-0x206),_0x29e05e[_0x59d6ed(-0x23e,-0x1ca,-0x1a4,-0x1fe)])){const _0x2ef1ef=(_0x1b3c20(0x29,-0x89,-0x33,-0x45)+'0')['split']('|');let _0x1b5b96=0x2705+0xad*-0x21+0x1ac*-0xa;while(!![]){switch(_0x2ef1ef[_0x1b5b96++]){case'0':comfyuiImageObjectURL=null;continue;case'1':_0x3e394f['style']['display']=_0x29e05e[_0x59d6ed(-0x282,-0x209,-0x2a6,-0x23d)];continue;case'2':_0x1a8dcf[_0x59d6ed(-0x265,-0x252,-0x226,-0x209)][_0x59d6ed(-0x2a4,-0x26b,-0x24b,-0x24d)]=_0x29e05e['gMsHu'];continue;case'3':_0x1a8dcf['src']='';continue;case'4':window['comfyuican'+_0x59d6ed(-0x284,-0x277,-0x2c5,-0x2a4)]=null;continue;case'5':_0x5f5954[_0x59d6ed(-0x219,-0x255,-0x254,-0x209)][_0x59d6ed(-0x240,-0x2c3,-0x25b,-0x24d)]=_0x29e05e[_0x59d6ed(-0x1ce,-0x22a,-0x1b9,-0x210)];continue;}break;}}else _0x212a67(null),_0x2a06c9[_0x1b3c20(-0x34,-0xa1,-0x3f,0xb)+'e'](_0x5e00eb);}}function removeComfyUIImage(){const _0x3d0e13={'jNvuf':function(_0x44e9be,_0x515395){return _0x44e9be(_0x515395);}};function _0x290059(_0x167cdc,_0xd177c,_0x18ed6e,_0x16358d){return _0x13e6c2(_0x167cdc-0x1b0,_0x16358d- -0x331,_0xd177c,_0x16358d-0x79);}function _0x24cdb8(_0x2c7e84,_0x4847f8,_0x23b8a7,_0x3c6f53){return _0x13e6c2(_0x2c7e84-0x1a2,_0x23b8a7- -0x107,_0x4847f8,_0x3c6f53-0x13d);}_0x3d0e13[_0x290059(-0x5,-0x4d,0x9b,0x3b)](updateComfyUIImagePreview,null),dbs[_0x290059(-0x5b,-0x8d,-0x66,-0x56)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x1169ae){function _0x551ae0(_0x2cb326,_0x34adeb,_0x3d4ed5,_0x5d2e41){return _0x213aaa(_0x2cb326-0x27,_0x34adeb,_0x5d2e41-0x20e,_0x5d2e41-0x157);}const _0x2839be={'LaByh':function(_0x26ed02){return _0x26ed02();},'BVmaS':_0x9901da(0xa0,0x110,0x99,0x92)+_0x551ae0(0x183,0x165,0x191,0x1a5)+_0x9901da(0xad,0x9a,0xda,0x77)+_0x551ae0(0x1d2,0x10d,0x174,0x191),'VqApF':function(_0x80ff04,_0x50b802){return _0x80ff04!==_0x50b802;},'abriw':_0x9901da(0x57,0x7f,0x4f,0x43),'rgquZ':function(_0x57b182,_0x347ecc){return _0x57b182(_0x347ecc);},'unqbx':function(_0x52dd46,_0x1b6a69){return _0x52dd46(_0x1b6a69);},'aNHNs':_0x551ae0(0x195,0x237,0x1a4,0x21c),'tPUik':function(_0x5435cb,_0x9bc9ea){return _0x5435cb===_0x9bc9ea;},'MnncR':_0x551ae0(0x1cf,0x1be,0x15e,0x1b3),'iJBZt':_0x9901da(-0x9,0x37,0x21,0x94)+'I\x20API地址。','fLpDn':function(_0x117689,_0x25892d,_0x27e582){return _0x117689(_0x25892d,_0x27e582);},'mlmIY':_0x9901da(0x103,0x107,0x83,0xab),'yaRDH':function(_0x552beb,_0x23c542){return _0x552beb(_0x23c542);},'EIfFH':_0x9901da(-0x64,-0x6d,-0x10,0x71)+_0x551ae0(0x215,0x199,0x24c,0x1e1),'sxuER':_0x551ae0(0x147,0x1e2,0x223,0x1c6),'tHrdo':function(_0x31e59e,_0x2dcb76){return _0x31e59e+_0x2dcb76;},'ZujzH':_0x551ae0(0x1e9,0x144,0x167,0x1b4),'oqnQI':'错误详情:','Mqhcu':_0x9901da(0xd3,0x104,0xc5,0x84)+':\x20','Gkkvg':_0x551ae0(0x277,0x22a,0x1f0,0x23d)+':','mpWVH':function(_0x358955){return _0x358955();}},_0x1b3ea7=extension_settings[extensionName],_0x6f0cc=_0x1169ae[_0x551ae0(0x17b,0x1f0,0x22c,0x1f8)][_0x551ae0(0x1e2,0x28f,0x289,0x225)][0x1276+-0xc84+-0x5f2];function _0x9901da(_0x3c3da1,_0x4cdedc,_0x1721e2,_0x1eb449){return _0x213aaa(_0x3c3da1-0x14b,_0x4cdedc,_0x1721e2-0x96,_0x1eb449-0x1a9);}if(!_0x6f0cc)return;try{const _0x3b8304=await _0x2839be[_0x9901da(0x34,0x80,0x46,0x76)](processUploadedImageToBlob,_0x6f0cc),_0x342d35=URL['createObje'+_0x9901da(0xf8,0x6f,0xa0,0x26)](_0x3b8304);comfyuiImageObjectURL=_0x342d35,_0x2839be['unqbx'](updateComfyUIImagePreview,_0x342d35);const _0x3ecd32=new FormData();_0x3ecd32[_0x9901da(0x2c,0xb,0x58,0xa7)](_0x2839be[_0x551ae0(0x23a,0x257,0x23d,0x1d7)],_0x3b8304,_0x6f0cc[_0x9901da(0xf1,0xee,0xd5,0x152)]);let _0x5055ce=_0x1b3ea7[_0x551ae0(0x27e,0x1de,0x1bd,0x23e)][_0x551ae0(0x1cf,0x234,0x1cf,0x1ea)]();if(!_0x5055ce){if(_0x2839be[_0x9901da(0x11a,0x81,0xed,0x16e)](_0x9901da(-0x39,-0x20,0x3b,-0x34),_0x2839be[_0x551ae0(0x233,0x23e,0x247,0x259)])){alert(_0x2839be[_0x551ae0(0x221,0x184,0x188,0x1da)]),_0x2839be[_0x9901da(-0x5e,0x7,0x28,-0x1e)](removeComfyUIImage);return;}else _0x2839be[_0x551ae0(0x1d3,0x1d8,0x1da,0x1a0)](_0x1aefe3);}const _0x404faf=await _0x2839be[_0x9901da(0x44,0x2,0x41,0x2b)](fetch,_0x5055ce+(_0x9901da(-0x5f,0x72,0x1e,0x87)+_0x551ae0(0x23d,0x22d,0x1fe,0x21b)),{'method':_0x2839be[_0x551ae0(0x22c,0x178,0x1d2,0x1f9)],'body':_0x3ecd32});if(_0x404faf['ok']){const _0x26792c=await _0x404faf[_0x551ae0(0x1a7,0x130,0x1f1,0x19d)]();window[_0x551ae0(0x228,0x205,0x276,0x1f1)+_0x551ae0(0x17e,0x137,0x14e,0x178)]=_0x26792c[_0x551ae0(0x2be,0x2b5,0x234,0x24d)],_0x2839be[_0x9901da(0x5e,0x96,0x68,0x78)](addLog,_0x551ae0(0x1be,0x1d3,0x13d,0x1ae)+_0x9901da(0xb4,-0xb,0x37,0x35)+JSON[_0x551ae0(0x1da,0x19f,0x23e,0x1ed)](_0x26792c)),console['log'](_0x2839be[_0x551ae0(0x1e5,0x1b8,0x129,0x175)],_0x26792c);const _0x476653=new FileReader();_0x476653[_0x9901da(0x90,0xb6,0xeb,0x86)]=()=>{function _0x154cde(_0x49a5c5,_0x3f07ed,_0x5332c4,_0x191e58){return _0x9901da(_0x49a5c5-0xdf,_0x3f07ed,_0x191e58-0x488,_0x191e58-0x45);}function _0xadaf69(_0x1b7a19,_0x3f73c9,_0x404e9c,_0x179375){return _0x551ae0(_0x1b7a19-0x100,_0x1b7a19,_0x404e9c-0x39,_0x404e9c- -0x3e2);}if(_0x2839be[_0xadaf69(-0x1d4,-0x23a,-0x218,-0x231)]('nVRCy',_0x2839be[_0x154cde(0x43b,0x502,0x4c6,0x495)])){const _0x1cd709=_0x476653[_0xadaf69(-0x1b4,-0x261,-0x20d,-0x290)],_0x3ab9cb={};_0x3ab9cb[_0xadaf69(-0x256,-0x1dd,-0x25b,-0x250)]=_0x1cd709,_0x3ab9cb[_0x154cde(0x55f,0x502,0x5a4,0x564)+_0xadaf69(-0x156,-0x1b1,-0x180,-0x10f)]=_0x26792c['name'];const _0x479fb5=_0x3ab9cb,_0x18940f={};_0x18940f['id']=COMFYUI_REF_CACHE_KEY,_0x18940f[_0xadaf69(-0x1e9,-0x24f,-0x25b,-0x2d5)]=_0x479fb5,dbs[_0x154cde(0x4a2,0x528,0x599,0x525)+_0x154cde(0x51d,0x501,0x53a,0x54c)](_0x18940f);}else _0x4817bf[_0xadaf69(-0x11b,-0x1a8,-0x19c,-0x1fe)](_0x2839be[_0x154cde(0x502,0x563,0x490,0x4f8)],_0xfbf319);},_0x476653[_0x551ae0(0x1aa,0x15d,0x180,0x17b)+_0x9901da(0xcd,0xb8,0x90,0x97)](_0x3b8304);}else{if(_0x9901da(0x5a,0x59,0x4e,-0x12)===_0x2839be['sxuER']){const _0x438570=await _0x404faf[_0x551ae0(0x255,0x178,0x1a4,0x1f2)]();alert(_0x2839be[_0x9901da(-0x23,0x55,-0x6,0x2d)](_0x2839be['ZujzH'],_0x438570)),addLog(_0x551ae0(0x266,0x280,0x211,0x237)+'详情:\x20'+_0x438570),console[_0x551ae0(0x2b6,0x29c,0x282,0x246)](_0x2839be['oqnQI'],_0x438570),_0x2839be[_0x551ae0(0x16f,0x215,0x174,0x1a0)](removeComfyUIImage);}else _0x52c2c8[_0x9901da(0xa6,0xa7,0x7e,0x8a)+_0x9901da(0xc0,0x108,0xa0,0x96)](_0x3401d5['src']);}}catch(_0x546f20){alert(_0x2839be[_0x551ae0(0x123,0xf9,0x159,0x166)]+_0x546f20[_0x551ae0(0x15a,0x15a,0x13f,0x169)]),console[_0x9901da(0xf3,0x13e,0xce,0x92)](_0x2839be[_0x551ae0(0x16b,0x1a8,0x151,0x181)],_0x546f20),addLog(_0x9901da(0x97,0x53,0xbf,0x40)+'详情:\x20'+JSON[_0x551ae0(0x16b,0x21d,0x235,0x1ed)](_0x546f20)),_0x2839be[_0x551ae0(0x248,0x1de,0x1e5,0x226)](removeComfyUIImage);}}async function loadCachedImages(){const _0x246725={'fLQDB':_0x3b5b04(0x378,0x2f9,0x2dc,0x336)+'+$','nJGwN':function(_0x2ea10c){return _0x2ea10c();},'diAaI':function(_0x5b3be3){return _0x5b3be3();},'cSWTy':function(_0x2ce29f,_0x328779){return _0x2ce29f(_0x328779);},'pbqrO':function(_0x3e14d0,_0x206dc2){return _0x3e14d0!==_0x206dc2;},'rKmTe':_0x3b5b04(0x360,0x377,0x2f3,0x371),'MRDdt':_0x3b5b04(0x2d0,0x345,0x2ef,0x339),'MrZYd':function(_0x45f0b3,_0x326f56){return _0x45f0b3(_0x326f56);},'sAVnT':_0x3a80dc(0x30,0x26,0x8a,0x47)+'ing\x20cached'+_0x3a80dc(0x4d,-0x24,-0x35,-0x6)+_0x3a80dc(0x6e,0x15,-0x5,0xa2)+_0x3b5b04(0x2f6,0x37b,0x3f8,0x39d),'BliuE':function(_0x30f5f4,_0x18ada1){return _0x30f5f4!==_0x18ada1;},'DGyXu':_0x3b5b04(0x312,0x319,0x2bc,0x331),'dBqPL':function(_0x5b9127,_0x4d2652){return _0x5b9127===_0x4d2652;},'YpFLX':_0x3a80dc(-0x70,-0x10,-0xa4,-0x79),'QOstx':function(_0x3065e9,_0x2d2a64){return _0x3065e9(_0x2d2a64);},'IPlym':_0x3b5b04(0x272,0x2f1,0x274,0x30f)+_0x3a80dc(-0x71,-0xa3,-0xef,-0x3b)+_0x3b5b04(0x347,0x2e4,0x336,0x34d)+_0x3b5b04(0x430,0x3d8,0x409,0x39d)+_0x3b5b04(0x383,0x366,0x31d,0x39a)+'\x20re-upload'+_0x3a80dc(0xb,0x5,-0x13,0x2d)+_0x3b5b04(0x2f2,0x31e,0x2e7,0x311)+_0x3b5b04(0x3e8,0x391,0x33f,0x3b4)+_0x3b5b04(0x348,0x3ca,0x37f,0x3ee),'fTSAC':function(_0x459752,_0x469e71){return _0x459752===_0x469e71;},'oloqt':'DUHGH','aBsYH':'Error\x20load'+'ing\x20cached'+'\x20ComfyUI\x20i'+'mage:'};function _0x3b5b04(_0x4ff8dd,_0x7c6bfc,_0x48e448,_0x2e3173){return _0x213aaa(_0x4ff8dd-0xc3,_0x2e3173,_0x7c6bfc-0x385,_0x2e3173-0x8e);}function _0x3a80dc(_0xfa1a82,_0x3c18e3,_0x2bf87d,_0x53a767){return _0x213aaa(_0xfa1a82-0x131,_0x53a767,_0xfa1a82-0x2d,_0x53a767-0x52);}await dbs[_0x3a80dc(-0x8,-0x81,0x29,-0xb)]();try{const _0x349b6f=await dbs[_0x3b5b04(0x388,0x362,0x3b2,0x345)+'nly'](NAI_VIBE_CACHE_KEY);_0x349b6f&&_0x349b6f[_0x3b5b04(0x358,0x2fe,0x2ef,0x2d5)]&&_0x246725[_0x3a80dc(0x89,0x33,0x54,0x32)](updateNovelaiImagePreview,_0x349b6f[_0x3a80dc(-0x5a,-0x33,-0x99,-0x28)]);}catch(_0x609445){if(_0x246725[_0x3a80dc(0x42,0x77,-0x46,0x1d)](_0x3b5b04(0x2fa,0x377,0x3e5,0x3cd),_0x246725['rKmTe']))return _0x53279d[_0x3b5b04(0x311,0x2ff,0x381,0x30d)]()['search'](OQScoR['fLQDB'])['toString']()['constructo'+'r'](_0x564e45)[_0x3b5b04(0x393,0x331,0x2f1,0x2ac)](OQScoR[_0x3b5b04(0x3b7,0x387,0x383,0x312)]);else console[_0x3b5b04(0x356,0x3bd,0x3d8,0x3b7)](_0x3b5b04(0x314,0x388,0x38d,0x303)+_0x3a80dc(-0x3c,-0x16,-0xa8,0x1f)+'\x20NovelAI\x20V'+_0x3a80dc(-0x61,-0xe9,0x14,-0x3d),_0x609445);}try{const _0x39e07a=await dbs[_0x3a80dc(0xa,-0x33,-0x1a,-0x2e)+_0x3a80dc(0x4a,0xac,0xac,0xc4)](NAI_CHAR_REF_CACHE_KEY);_0x39e07a&&_0x39e07a[_0x3b5b04(0x277,0x2fe,0x2b7,0x2f0)]&&(_0x246725[_0x3b5b04(0x40d,0x39a,0x395,0x413)](_0x3a80dc(-0x13,-0xf,-0x7d,0x11),_0x246725[_0x3b5b04(0x2b2,0x2eb,0x30e,0x2b3)])?_0x246725['nJGwN'](_0xf421cd):_0x246725['MrZYd'](updateNovelaiCharRefImagePreview,_0x39e07a[_0x3a80dc(-0x5a,-0x56,0x28,-0xb5)]));}catch(_0x4640a1){console[_0x3b5b04(0x3b6,0x3bd,0x335,0x418)](_0x246725['sAVnT'],_0x4640a1);}try{const _0x2685d9=await dbs['storeReadO'+'nly'](COMFYUI_REF_CACHE_KEY);if(_0x2685d9&&_0x2685d9[_0x3b5b04(0x36e,0x2fe,0x2c0,0x341)]&&_0x2685d9[_0x3b5b04(0x34a,0x2fe,0x2c2,0x334)]['data']&&_0x2685d9[_0x3b5b04(0x381,0x2fe,0x302,0x312)][_0x3a80dc(0x73,0x11,0x68,0xb4)+_0x3a80dc(0x81,0xd4,0x6c,0x2f)]){if(_0x246725[_0x3b5b04(0x39d,0x3a9,0x3bd,0x38e)](_0x3a80dc(0x86,0x7c,0xa,0x65),_0x246725['DGyXu'])){const _0x3a7762=_0x2685d9[_0x3b5b04(0x379,0x2fe,0x320,0x312)],_0x397378=await fetch(_0x3a7762[_0x3a80dc(-0x5a,-0x2f,-0xf,-0x1c)]),_0x641df=await _0x397378[_0x3a80dc(-0x2b,-0x59,0x46,0x53)](),_0x5bc47a=URL['createObje'+'ctURL'](_0x641df);_0x246725[_0x3b5b04(0x44f,0x3e1,0x441,0x3af)](updateComfyUIImagePreview,_0x5bc47a),comfyuiImageObjectURL=_0x5bc47a,window[_0x3a80dc(0x10,-0x8,-0x4b,-0x3c)+_0x3b5b04(0x2ad,0x2ef,0x2be,0x2fd)]=_0x3a7762[_0x3a80dc(0x73,0x59,0x47,0xab)+_0x3b5b04(0x3f2,0x3d9,0x447,0x443)],_0x246725['cSWTy'](addLog,_0x3b5b04(0x3de,0x39f,0x3b5,0x318)+'UI图片:\x20'+_0x3a7762[_0x3a80dc(0x73,0x7d,0x43,0xeb)+'Name']),console[_0x3a80dc(-0x5e,-0x23,0x14,-0x88)](_0x3a80dc(-0x67,-0xb,-0xd7,-0xa1)+_0x3a80dc(-0x71,-0xaf,-0xa6,-0x2f)+_0x3b5b04(0x3b8,0x3b2,0x3fb,0x3f5)+_0x3a80dc(0x5,0x21,0x72,-0x35)+_0x3a7762[_0x3b5b04(0x377,0x3cb,0x406,0x453)+_0x3b5b04(0x453,0x3d9,0x419,0x3b7)]);}else _0x246725['diAaI'](_0x44181c);}else{if(_0x2685d9&&_0x246725[_0x3a80dc(0x76,0x65,-0x10,0x17)](typeof _0x2685d9[_0x3a80dc(-0x5a,-0x5e,0x10,-0x5)],_0x246725['YpFLX'])){const _0x4aa642=await _0x246725[_0x3a80dc(-0x37,0x50,-0x82,-0x8b)](fetch,_0x2685d9[_0x3b5b04(0x2df,0x2fe,0x300,0x37c)]),_0x51a159=await _0x4aa642[_0x3a80dc(-0x2b,-0x9,-0x5a,-0x1)](),_0x5a9e31=URL[_0x3b5b04(0x35f,0x344,0x306,0x3a7)+_0x3b5b04(0x3b9,0x38f,0x401,0x40a)](_0x51a159);updateComfyUIImagePreview(_0x5a9e31),comfyuiImageObjectURL=_0x5a9e31,console['warn'](_0x246725[_0x3b5b04(0x31a,0x328,0x2a0,0x2b1)]);}}}catch(_0x4f3dc2){if(_0x246725[_0x3a80dc(0x60,0x32,-0x8,0x98)](_0x246725[_0x3b5b04(0x264,0x2d9,0x2c9,0x321)],_0x246725['oloqt']))console[_0x3a80dc(0x65,0x1d,0x99,0xc5)](_0x246725[_0x3b5b04(0x31e,0x316,0x379,0x2d4)],_0x4f3dc2);else{const _0xf15adb=_0x4569c4[_0x3b5b04(0x34c,0x34c,0x3c8,0x346)],_0x593611={};_0x593611['data']=_0xf15adb,_0x593611[_0x3b5b04(0x39a,0x3cb,0x416,0x34c)+_0x3b5b04(0x40e,0x3d9,0x40f,0x377)]=_0x101781[_0x3b5b04(0x440,0x3c4,0x3d0,0x383)];const _0xb21bf9=_0x593611,_0x4d99c2={};_0x4d99c2['id']=_0x20474c,_0x4d99c2[_0x3b5b04(0x2bd,0x2fe,0x308,0x319)]=_0xb21bf9,_0x35124a['storeReadW'+_0x3b5b04(0x381,0x3b3,0x42d,0x406)](_0x4d99c2);}}}export function initImageUpload(_0x29ac23){const _0xd3f210={'EOnIB':_0x52ec3c(-0x12c,-0x107,-0x102,-0x148)+_0x52ec3c(-0xf5,-0x110,-0x11c,-0x135)+_0x95f7ce(-0x66,-0x1e,-0xd4,-0x96)+':','oooXh':function(_0x1ae5a2,_0x2ef01a){return _0x1ae5a2(_0x2ef01a);},'roIlN':function(_0x3786d6,_0x329d89){return _0x3786d6+_0x329d89;},'EaxpX':_0x52ec3c(-0xab,-0xf0,-0xd1,-0x96),'WdOtB':_0x52ec3c(-0x159,-0x168,-0x108,-0x174),'EJZAy':_0x52ec3c(-0x149,-0x18f,-0x1db,-0x1d7)+_0x52ec3c(-0x112,-0x126,-0xf3,-0x138),'zUTVi':function(_0xcfa3b1){return _0xcfa3b1();},'MMsgA':function(_0x1f39f0,_0x4a2309){return _0x1f39f0!==_0x4a2309;},'GiqmD':_0x95f7ce(-0x134,-0x168,-0x17d,-0x156),'fpTkK':_0x95f7ce(-0x14c,-0x16b,-0x171,-0x126)+_0x52ec3c(-0xe9,-0x167,-0xf5,-0x134)+'ref','Embyg':_0x52ec3c(-0x125,-0x18f,-0x165,-0x1cb)+'2','jZkUV':_0x95f7ce(-0xd1,-0x11b,-0x106,-0x124)+_0x52ec3c(-0x191,-0x12b,-0xde,-0x185),'UvpHH':_0x52ec3c(-0xcb,-0x11e,-0x199,-0x197)+_0x95f7ce(-0x28,-0xed,-0x44,-0x97)+'ew-contain'+'er\x20.st-cha'+_0x95f7ce(-0x51,-0x6d,-0xf3,-0xae)+_0x95f7ce(-0xa2,0x2,-0xea,-0x75)+'r','gEzfJ':_0x52ec3c(-0x112,-0x14c,-0x19a,-0xfb)+_0x95f7ce(-0x162,-0x142,-0x93,-0xf5)+_0x52ec3c(-0xe3,-0x127,-0x143,-0x13c),'jIEuQ':'data:image','kdKzL':_0x52ec3c(-0x1fa,-0x199,-0x143,-0x1c6),'lSlQK':_0x95f7ce(-0x133,-0xae,-0x13d,-0x12b),'Xpets':_0x95f7ce(-0x8e,-0x3b,-0x65,-0x90),'QnYaG':function(_0x5a16e3,_0x351179){return _0x5a16e3===_0x351179;},'lDXME':'#novelai-s'+_0x95f7ce(-0x113,-0x11a,-0x10f,-0xd7)+_0x95f7ce(-0x30,-0x5a,-0x85,-0x63),'FbODa':_0x52ec3c(-0x13a,-0xf1,-0xff,-0x174),'BDYsh':_0x52ec3c(-0xf8,-0x177,-0x120,-0x195)+'t_novelai','MTPDK':'#novelai-r'+_0x95f7ce(-0xeb,-0x151,-0xe2,-0xee)+_0x52ec3c(-0x9e,-0xcc,-0x96,-0x11a),'BwWTT':'#novelai-s'+'elect-char'+_0x95f7ce(-0xdf,-0x132,-0x6b,-0xde)+_0x52ec3c(-0x142,-0x127,-0x135,-0x104),'LdQlE':_0x95f7ce(-0xfe,-0xc9,-0xb8,-0x10e)+_0x95f7ce(-0xf6,-0xa9,-0x64,-0xba)+_0x52ec3c(-0xdd,-0xf6,-0x11a,-0xe0),'NDIif':_0x95f7ce(-0x75,-0x11b,-0x41,-0x93),'npwsK':'#novelai-r'+_0x95f7ce(-0xc5,-0x8f,-0xcc,-0x53)+_0x95f7ce(-0xcc,-0x143,-0x130,-0xde)+_0x95f7ce(-0xe6,-0x7b,-0x64,-0xbe),'aSlSN':_0x52ec3c(-0x16c,-0x177,-0x12a,-0x148)+'t2','WZgBM':_0x52ec3c(-0x77,-0xf3,-0x112,-0x11e)+_0x95f7ce(-0xa1,-0x84,-0x81,-0xee)+'e-btn'};loadCachedImages();function _0x52ec3c(_0x2cccaf,_0x2706e3,_0x408fa6,_0x209acf){return _0x13e6c2(_0x2cccaf-0x10a,_0x2706e3- -0x447,_0x2cccaf,_0x209acf-0x1e9);}_0x29ac23[_0x95f7ce(-0x1cf,-0x16b,-0x175,-0x14d)](_0xd3f210[_0x52ec3c(-0x13e,-0x191,-0x1d4,-0x15e)])['on'](_0xd3f210[_0x52ec3c(-0xcc,-0xf8,-0xe1,-0x9c)],()=>{function _0x1e1be6(_0x249fed,_0x141932,_0x29538e,_0x2aea1f){return _0x52ec3c(_0x29538e,_0x141932-0x4a,_0x29538e-0xc8,_0x2aea1f-0x169);}function _0x17b591(_0x345800,_0x17a772,_0x37682c,_0xeebe5){return _0x95f7ce(_0x345800-0x142,_0x17a772-0x127,_0x37682c,_0x17a772-0xc6);}_0xd3f210[_0x1e1be6(-0xdf,-0x162,-0x1bc,-0x1c5)]!==_0xd3f210[_0x17b591(-0xfc,-0x7d,-0xbb,-0xc0)]?(_0x17aee3[_0x1e1be6(-0xae,-0x99,-0xee,-0xb3)](_0xd3f210[_0x1e1be6(-0x11d,-0x160,-0x1c1,-0x1ca)],_0x3f74db),_0xd3f210[_0x17b591(0x2f,0x23,0x9c,0xa8)](_0x43f67f,_0xd3f210[_0x17b591(-0x8e,-0x13,-0x2d,0x3e)](_0xd3f210[_0x17b591(0xfd,0x76,0xbe,0x84)],_0x5adbb8[_0x17b591(-0x3f,-0x91,-0x34,-0x5c)]))):document['getElement'+_0x17b591(0x2b,0x25,-0x19,0x80)](_0xd3f210[_0x17b591(0xab,0x6e,0x9a,0x8)])[_0x17b591(-0x31,0x3e,-0x34,0x76)]();}),_0x29ac23[_0x95f7ce(-0x1b7,-0xdf,-0x12e,-0x14d)](_0xd3f210[_0x52ec3c(-0x158,-0x19f,-0x17b,-0x1dd)])['on'](_0x95f7ce(-0x77,-0xae,-0xe3,-0x93),handleNovelaiImageUpload),_0x29ac23[_0x95f7ce(-0xd9,-0x1b1,-0x113,-0x14d)](_0xd3f210[_0x95f7ce(-0x165,-0x188,-0x1c0,-0x142)])['on'](_0xd3f210['FbODa'],()=>{function _0x3922b0(_0x1c218d,_0x47ed5a,_0x3b570d,_0x290276){return _0x95f7ce(_0x1c218d-0xab,_0x47ed5a-0x150,_0x47ed5a,_0x3b570d-0x4a9);}_0xd3f210[_0x3922b0(0x40b,0x45b,0x3f2,0x469)](removeNovelaiImage);}),_0x29ac23[_0x95f7ce(-0x186,-0x1cd,-0x110,-0x14d)](_0xd3f210[_0x52ec3c(-0x1f2,-0x16e,-0x1a1,-0x1bb)])['on'](_0xd3f210[_0x52ec3c(-0x121,-0xf8,-0x120,-0xf5)],()=>{function _0x2f7587(_0x5bdcfb,_0x4df6b9,_0x5bf313,_0x579353){return _0x52ec3c(_0x579353,_0x5bf313- -0x29,_0x5bf313-0xd8,_0x579353-0x67);}function _0x123dc4(_0xef0f89,_0x58069a,_0x552a3d,_0x144cf9){return _0x52ec3c(_0x58069a,_0x144cf9- -0x43,_0x552a3d-0x1d4,_0x144cf9-0x46);}_0xd3f210[_0x123dc4(-0x161,-0x16c,-0x1e3,-0x1c3)]('HQZtx',_0xd3f210[_0x123dc4(-0x1b9,-0x1d9,-0x1dc,-0x1fd)])?_0x449418[_0x2f7587(-0xf7,-0x157,-0x17a,-0x1a4)+_0x123dc4(-0xfe,-0x125,-0x11c,-0x14d)](_0xd3f210[_0x2f7587(-0xd9,-0x7a,-0xea,-0x140)])[_0x123dc4(-0x18b,-0x14a,-0x18d,-0x134)]():document[_0x2f7587(-0x179,-0x1ff,-0x17a,-0xf7)+_0x2f7587(-0x184,-0x199,-0x133,-0x10b)](_0xd3f210[_0x123dc4(-0x132,-0x21a,-0x16e,-0x1ac)])[_0x2f7587(-0x12f,-0x100,-0x11a,-0x19f)]();}),_0x29ac23[_0x95f7ce(-0x128,-0x167,-0x167,-0x14d)](_0xd3f210[_0x52ec3c(-0x63,-0xba,-0x4d,-0x5d)])['on'](_0xd3f210['NDIif'],handleNovelaiCharRefImageUpload),_0x29ac23[_0x52ec3c(-0x201,-0x1b6,-0x1b6,-0x161)](_0xd3f210[_0x95f7ce(-0x112,-0xea,-0x175,-0x15d)])['on'](_0xd3f210[_0x95f7ce(-0xce,-0x88,-0x79,-0x8f)],()=>{function _0x5cdabd(_0x2e5729,_0x430ae3,_0x44bc4d,_0x2f0e78){return _0x52ec3c(_0x2f0e78,_0x430ae3-0x55,_0x44bc4d-0x3,_0x2f0e78-0xf0);}_0xd3f210[_0x5cdabd(-0x119,-0xcb,-0xfe,-0xa9)](removeNovelaiCharRefImage);}),_0x29ac23[_0x95f7ce(-0xe9,-0x1ca,-0x15e,-0x14d)]('#comfyui-s'+_0x52ec3c(-0xfe,-0x140,-0x135,-0x157)+'e-btn')['on'](_0x52ec3c(-0xf8,-0xf1,-0x162,-0xd4),()=>{function _0x61f489(_0x3a3e6b,_0x265cab,_0xbf1306,_0xfdb5e1){return _0x95f7ce(_0x3a3e6b-0x187,_0x265cab-0x40,_0x3a3e6b,_0xbf1306- -0x8);}function _0x5e185e(_0x4059e3,_0x27df9c,_0x44f1f8,_0x1521f7){return _0x95f7ce(_0x4059e3-0xd4,_0x27df9c-0x28,_0x44f1f8,_0x1521f7-0x9f);}document[_0x61f489(-0x107,-0x125,-0xf0,-0xf3)+_0x5e185e(0x51,-0x84,-0x17,-0x2)](_0xd3f210[_0x61f489(-0xf7,-0x5c,-0x9c,-0xf9)])[_0x61f489(-0x36,-0x10f,-0x90,-0xba)]();}),_0x29ac23[_0x95f7ce(-0x13f,-0x1a3,-0x12a,-0x14d)](_0xd3f210[_0x95f7ce(-0x49,-0x66,-0xd6,-0xc4)])['on'](_0xd3f210['NDIif'],handleImageUpload2);function _0x95f7ce(_0xd8b9e7,_0x4cb1ae,_0x286423,_0x2f8659){return _0x213aaa(_0xd8b9e7-0x1ed,_0x286423,_0x2f8659- -0xb2,_0x2f8659-0x99);}_0x29ac23[_0x52ec3c(-0x231,-0x1b6,-0x226,-0x234)](_0xd3f210[_0x95f7ce(-0x15d,-0x18e,-0xd4,-0x14a)])['on'](_0xd3f210[_0x52ec3c(-0xb2,-0xf8,-0xaf,-0x138)],()=>{function _0x3834d3(_0x5b016d,_0x3f7644,_0x416756,_0x1333ff){return _0x52ec3c(_0x1333ff,_0x3f7644-0x12a,_0x416756-0xc1,_0x1333ff-0x105);}function _0x144ca1(_0x4db7c7,_0x323061,_0x2b4b53,_0x1d502a){return _0x95f7ce(_0x4db7c7-0x163,_0x323061-0x6e,_0x4db7c7,_0x2b4b53-0x107);}if(_0xd3f210[_0x3834d3(-0x25,0x25,-0x54,0x48)](_0x3834d3(0xa4,0x4d,0x65,-0x2c),'cNAdk'))_0xd3f210[_0x3834d3(0x37,0xa,0x2d,0x65)](removeComfyUIImage);else{const _0x4e873b=_0x15762f['getElement'+_0x3834d3(0x45,0x20,0x85,0x7c)](_0xd3f210[_0x144ca1(-0x9,-0x78,0xf,0x1)]),_0x1d1334=_0xf220ba[_0x144ca1(-0x1,0xa4,0x25,-0x62)+_0x3834d3(0x66,0x56,0x23,0x3d)](_0xd3f210['UvpHH']),_0x4db02d=_0x1d65ca['getElement'+'ById'](_0xd3f210[_0x144ca1(-0x18,-0x15,-0x2a,-0x4f)]);if(_0x6a9c2b&&_0x32ef03[_0x3834d3(-0xac,-0x54,-0xc5,-0x34)](_0xd3f210[_0x144ca1(-0x3b,0x47,-0x13,0x3d)])){_0x4e873b[_0x3834d3(-0x1f,-0x29,-0xa6,-0x7f)]=_0x2d382e,_0x4e873b[_0x3834d3(0x62,0x14,0x15,-0x72)]['display']='block',_0x1d1334['style'][_0x144ca1(0x84,0x8e,0x16,0x2f)]=_0xd3f210['kdKzL'],_0x4db02d[_0x3834d3(-0x14,0x14,0x24,0x88)][_0x144ca1(-0x41,0x39,0x16,-0x3f)]=_0x144ca1(0x57,0x94,0xa7,0xd2)+'x';const _0x576e8e=_0x5af434['split'](','),_0x5330b=_0x576e8e[-0x632+-0x2*0x8e4+-0x3*-0x7fe][_0x3834d3(-0xb3,-0x68,0x13,-0xbe)](':')[0x1b48+0xf64+-0x2aab][_0x144ca1(0x59,-0x4,-0x22,-0xa3)](';')[-0xf70+0x1*-0x1061+0x21f*0xf];_0x193683=_0x5330b,_0x4e5dd4[_0x3834d3(-0x68,-0x6c,-0xd,-0x50)+_0x144ca1(-0x8f,-0x1c,-0x25,0x9)+'e']=_0x576e8e[-0x4d0+-0x1286+-0x5*-0x4ab];const _0x252a44={};_0x252a44['id']=_0x3d5e5f,_0x252a44[_0x3834d3(-0xbc,-0x78,-0x94,-0xb4)]=_0x48b40d,_0x1d355b[_0x144ca1(0x85,0xb5,0x5c,0x3c)+'rite'](_0x252a44);}else{const _0x144143=_0xd3f210['lSlQK']['split']('|');let _0x2feb42=-0x363*0x6+0x5e*-0x1f+0x1fb4;while(!![]){switch(_0x144143[_0x2feb42++]){case'0':_0x1d1334[_0x144ca1(0xb9,-0x1c,0x5a,0x6a)][_0x3834d3(-0x3b,-0x30,-0x41,-0x7b)]=_0xd3f210[_0x3834d3(-0x8e,-0x40,-0x95,-0x22)];continue;case'1':_0x4db02d['style'][_0x3834d3(-0x8f,-0x30,0xd,-0x2)]=_0xd3f210[_0x3834d3(0x12,0x6c,-0xc,0x62)];continue;case'2':_0x4e873b[_0x3834d3(-0x6a,0x14,0x26,-0x14)][_0x144ca1(0x40,0x77,0x16,0x16)]=_0xd3f210[_0x3834d3(0x7f,0x6c,0xe1,0xa8)];continue;case'3':_0x5b2433[_0x144ca1(-0x4d,-0x83,-0x26,0x23)+_0x3834d3(-0xa6,-0x6b,0x8,-0x8)+'e']=null;continue;case'4':_0x4e873b[_0x3834d3(0x1f,-0x29,-0x3b,-0x66)]='';continue;}break;}}}});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};