(function(_0x58af37,_0xff3ee3){function _0x28cad2(_0x322041,_0x221561,_0x4d84ae,_0x46c760){return _0x3401(_0x4d84ae-0x252,_0x221561);}function _0x26e0e4(_0x102ba5,_0x129e89,_0x235425,_0x1fa376){return _0x3401(_0x102ba5- -0x3d6,_0x129e89);}const _0x2f9490=_0x58af37();while(!![]){try{const _0x229f7a=-parseInt(_0x28cad2(0x3b7,0x321,0x398,0x3e3))/(0x7*-0x3d7+0x2670+-0x11*0xae)*(-parseInt(_0x26e0e4(-0x2e6,-0x356,-0x2f9,-0x269))/(-0x25f2+0x1b70+0x2a1*0x4))+-parseInt(_0x26e0e4(-0x2b4,-0x25d,-0x2ee,-0x27c))/(0xe*-0x233+-0x2*-0x3c3+0x1747)+-parseInt(_0x26e0e4(-0x295,-0x2f6,-0x2bc,-0x26c))/(0x23b1+-0x6*-0x238+-0x1*0x30fd)+-parseInt(_0x26e0e4(-0x279,-0x2e8,-0x2af,-0x241))/(0x9a+0x807*0x1+-0x89c)*(-parseInt(_0x26e0e4(-0x2d8,-0x338,-0x293,-0x32d))/(-0x26b+0x635+0x1e2*-0x2))+-parseInt(_0x28cad2(0x3c9,0x437,0x3e6,0x431))/(0x26*0x7+-0x3*-0x41f+0x10*-0xd6)+-parseInt(_0x26e0e4(-0x2cf,-0x288,-0x33e,-0x252))/(0x206*-0x5+-0x15*0x10b+0xaaf*0x3)*(-parseInt(_0x28cad2(0x38e,0x2f6,0x32c,0x398))/(0x23a3*-0x1+0x1dd7+0x5d5*0x1))+-parseInt(_0x26e0e4(-0x2c0,-0x30a,-0x247,-0x2c0))/(-0x5c+0xe92*-0x1+-0x8*-0x1df);if(_0x229f7a===_0xff3ee3)break;else _0x2f9490['push'](_0x2f9490['shift']());}catch(_0x3afaf9){_0x2f9490['push'](_0x2f9490['shift']());}}}(_0x17c4,-0xecb26+0x9963*0xb+0x133798));const _0x444961=(function(){const _0xea81fa={'OlmOF':function(_0x538331){return _0x538331();},'UCLNC':_0x5cd154(0x43c,0x383,0x3a9,0x3f3)};function _0x5cd154(_0x5ad6c2,_0x5793a4,_0x4c98c9,_0x3a16ed){return _0x3401(_0x3a16ed-0x27c,_0x5ad6c2);}let _0x54240a=!![];return function(_0x21bfa7,_0x1b8417){function _0x2e9120(_0x2d53a4,_0xe9627e,_0x449aaa,_0x14cb3f){return _0x5cd154(_0xe9627e,_0xe9627e-0x87,_0x449aaa-0xdb,_0x449aaa- -0x5b2);}function _0x100532(_0x139649,_0x437117,_0x28c3a3,_0x1ffdbb){return _0x5cd154(_0x28c3a3,_0x437117-0x1b8,_0x28c3a3-0x159,_0x437117- -0x20d);}if(_0x100532(0x121,0x123,0x169,0xdf)===_0xea81fa[_0x2e9120(-0x1f7,-0x191,-0x1a1,-0x143)])_0xea81fa[_0x100532(0x161,0x158,0x174,0x18e)](_0x2f8e73);else{const _0x5f4f44=_0x54240a?function(){function _0x410016(_0xc7f294,_0x1b87e9,_0x3f1cd6,_0x44beb4){return _0x2e9120(_0xc7f294-0x91,_0x1b87e9,_0x3f1cd6-0x5bc,_0x44beb4-0x3a);}if(_0x1b8417){const _0x3e19b5=_0x1b8417[_0x410016(0x373,0x3ed,0x375,0x3ae)](_0x21bfa7,arguments);return _0x1b8417=null,_0x3e19b5;}}:function(){};return _0x54240a=![],_0x5f4f44;}};}()),_0x5b0180=_0x444961(this,function(){function _0x628532(_0x1c6a20,_0x3d6b25,_0x48ee0a,_0x4050ff){return _0x3401(_0x4050ff-0x30d,_0x3d6b25);}function _0x19445a(_0x4a1467,_0x3f3681,_0x1dca52,_0x202293){return _0x3401(_0x1dca52-0x2e3,_0x3f3681);}const _0x2c98da={};_0x2c98da[_0x19445a(0x442,0x405,0x40e,0x41b)]='(((.+)+)+)'+'+$';const _0x1196e4=_0x2c98da;return _0x5b0180['toString']()[_0x19445a(0x3f1,0x43a,0x3d6,0x449)](_0x628532(0x36a,0x3eb,0x36e,0x3b4)+'+$')[_0x628532(0x399,0x3cb,0x3d9,0x408)]()[_0x19445a(0x4da,0x495,0x45e,0x4bc)+'r'](_0x5b0180)['search'](_0x1196e4[_0x19445a(0x3cc,0x3f9,0x40e,0x45f)]);});_0x5b0180();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';function _0x3401(_0x32089d,_0x33a82c){_0x32089d=_0x32089d-(0x1ba7*-0x1+-0x56*0x4d+-0x4*-0xd8b);const _0x2bdbe5=_0x17c4();let _0x3ae502=_0x2bdbe5[_0x32089d];if(_0x3401['zDZICg']===undefined){var _0x23572d=function(_0x343071){const _0x589dbd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x93da35='',_0x44b26c='',_0x12acd6=_0x93da35+_0x23572d;for(let _0x1d1ca5=-0xd58+0x49*-0x27+0x1877,_0x313666,_0x23d371,_0xffa0f8=-0x1426+0x18e4+-0x4be;_0x23d371=_0x343071['charAt'](_0xffa0f8++);~_0x23d371&&(_0x313666=_0x1d1ca5%(0x15c+-0x47*0xc+0x2*0xfe)?_0x313666*(0x4a9*-0x4+-0x1039+0x231d)+_0x23d371:_0x23d371,_0x1d1ca5++%(0x125*-0x11+0x1c39+-0x8c0))?_0x93da35+=_0x12acd6['charCodeAt'](_0xffa0f8+(0x75*0x34+-0x779*-0x3+-0x2e25))-(-0x5*0x237+-0x929+0x1446)!==-0x126d+-0x1433*0x1+0x26a0?String['fromCharCode'](0xb94+-0xb3*-0x2f+-0x53*0x86&_0x313666>>(-(0x10bf+0x19*0x15e+-0x32eb)*_0x1d1ca5&-0x8db+0xe0d+-0x1*0x52c)):_0x1d1ca5:0x1288*0x2+-0xac*0x4+-0x898*0x4){_0x23d371=_0x589dbd['indexOf'](_0x23d371);}for(let _0x3ac829=-0x1e23+-0xa*-0xd+0x5ed*0x5,_0x142e25=_0x93da35['length'];_0x3ac829<_0x142e25;_0x3ac829++){_0x44b26c+='%'+('00'+_0x93da35['charCodeAt'](_0x3ac829)['toString'](0x3e*-0xa0+0x7*-0x18b+0x319d))['slice'](-(0x13c9+-0x2304+-0x53*-0x2f));}return decodeURIComponent(_0x44b26c);};_0x3401['cMfybG']=_0x23572d,_0x3401['Dkfpxy']={},_0x3401['zDZICg']=!![];}const _0x3becbb=_0x2bdbe5[-0x1208+0xa6*0x1+0x1162],_0x67262c=_0x32089d+_0x3becbb,_0x1ce87d=_0x3401['Dkfpxy'][_0x67262c];if(!_0x1ce87d){const _0x2e9fbc=function(_0x2f0e99){this['gduGet']=_0x2f0e99,this['uNhgTA']=[-0x166*-0x16+0x1*-0x257+-0x1c6c,0x265+-0x25*0x1c+0x1a7,-0x1339*0x1+-0x1*0xc19+0x1f52],this['pkWAPy']=function(){return'newState';},this['tjJigo']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['xTgqkD']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2e9fbc['prototype']['HhyEGS']=function(){const _0x36fc77=new RegExp(this['tjJigo']+this['xTgqkD']),_0x28f075=_0x36fc77['test'](this['pkWAPy']['toString']())?--this['uNhgTA'][0x17c9+0x4*0x4e1+-0x2b4c*0x1]:--this['uNhgTA'][0x13*-0x59+0x50*0x4+0x55b];return this['lYyMwj'](_0x28f075);},_0x2e9fbc['prototype']['lYyMwj']=function(_0x18d5a0){if(!Boolean(~_0x18d5a0))return _0x18d5a0;return this['SGkZRj'](this['gduGet']);},_0x2e9fbc['prototype']['SGkZRj']=function(_0x521329){for(let _0x58a313=-0xdae*-0x1+-0x243a+0x168c,_0x14cc8a=this['uNhgTA']['length'];_0x58a313<_0x14cc8a;_0x58a313++){this['uNhgTA']['push'](Math['round'](Math['random']())),_0x14cc8a=this['uNhgTA']['length'];}return _0x521329(this['uNhgTA'][-0x5a*-0x1d+-0x991+-0x17*0x7]);},new _0x2e9fbc(_0x3401)['HhyEGS'](),_0x3ae502=_0x3401['cMfybG'](_0x3ae502),_0x3401['Dkfpxy'][_0x67262c]=_0x3ae502;}else _0x3ae502=_0x1ce87d;return _0x3ae502;}import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x4ade0b(0x17e,0x199,0x1e0,0x1b8)+'lai_vibe_t'+_0xb1d8a1(-0x7e,-0xc3,-0xec,-0x81)+_0xb1d8a1(-0xff,-0x129,-0x130,-0x122),NAI_CHAR_REF_CACHE_KEY='cache_nove'+_0x4ade0b(0x1bc,0x231,0x17f,0x225)+_0xb1d8a1(-0x8f,-0x69,-0x14,-0x75),COMFYUI_REF_CACHE_KEY=_0xb1d8a1(-0xfc,-0x108,-0xee,-0xb9)+_0x4ade0b(0x14c,0x162,0x171,0x159)+'age';function _0x17c4(){const _0x21aa01=['BMfTzq','reTzqM4','tKPgweK','v1b1s3K','C3rVCMvszwfKtW','BwvZC2fNzq','C3r5Bgu','m3WYFdv8mxWWFa','vuNLM77NIyC6ia','i25VDMvSywKTCG','ywDL','qKX6v2S','t2XTt0y','y2fJAgvFy29TzG','yvfIzLu','ve12C1m','ENzIq3q','zgf0yq','yxbWBhK','otC0v01qqxzq','DwfZy0S','CvLZruW','C2vHCMnO','yLPbq2q','Bw92zs1PBwfNzq','CMv2B2TLt2jQzq','lxjLzI1PBwfNzq','D2fYBG','z2jgvuW','ExvPx3jLzL9PBq','Dg9tDhjPBMC','zMLUza','CL9Yzwy','mJa3mZbLtMHZENq','vhzgu08','B3bLBKrc','qvj4Aw4','vMPLwLy','vgjbwNK','zxjYB3i','x25VDMvSywK','y3jLyxrLt2jQzq','mJm1mJu2ALrpChf2','tg9HzgvKienVBq','A2fVDhvWAwfU','y29TzNL1As1Yzq','ChjLDMLLD0LTyq','AK1WA0y','AwPLAwG','ihjLlxvWBg9Hza','wvrisha','BMfPm1zPyMvuCG','CMvZDwX0','rNPsyvO','ienVBwz5vuKGAq','u2XgEgG','ve9wt2q','mZmWnda0meLQzxjmza','EeH3Cuy','swHVzeu','BgHmDe4','zKvYvfe','rvPbwg4','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','D3rdqvu','nhWZFdj8mxWW','zwXbssbJAgfYia','wMzpyLm','yKDYs0m','mteZmdCZm1LtyuPVqW','z2vFBM92zwXHAq','Bw92zs1JAgfYlq','wNzIDKS','Aw1Hz2uVCg5N','i25VDMvSywKTCW','rxjYB3iGChjVyW','C3rVCMvezwXLDa','yw5ZzMvYsw1HzW','tu1rzKC','y2fJAgvFBM92zq','C3rYAw5NAwz5','ANnVBG','6k+M5OofoIa','D0zhyvG','wwTxruK','y29TzNL1AvvYBa','z3DvwMq','t2XTDMG','y2HHBMDL','D1HUq0m','vg56qM4','AhLSvvK','C3bSAxq','tMfTzq','AgfYlxjLzI1PBq','DgHLig5LDYbMBW','Dgzwsfy','BNbRswu','zw1VDMuTAw1HzW','qNLjza','mJGXmdKZmMjwAgvzua','zNLvssbPBwfNzq','BwfNztO','C3rYAw5N','Dgv4Da','mJG0ohnYDe5jvW','BMfPm0nOyxjszq','y0vjBMK','yMXVy2S','CML0zq','zgf0ytPPBwfNzq','uu5fse4','x25HAv9JAgfYxW','u1DhEK4','CMvM','Aw1Hz2vjBNb1Da','zs1IDg4','rwH2zM4','BM92zwXHAs1Yzq','ANv3Bxm','v3nOzLy','BhLuv2G','zwzFAw1Hz2u','z2vFBMfPx2nOyq','ue9tva','i2nVBwz5DwKTAq','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','mxWWFdn8nhWYFa','ndiWt3LLtLzq','DgfYz2v0','zxCTy29UDgfPBG','Aw5SAw5LlwzSzq','rwLmzMu','qu5ZDva','Df9UywLFy2HHCG','ztOG','u0DfDhm','y05rzeS','DKHPD1K','CMfUC2zLCL9PBq','zMXLEa','BgfPx2nOyxjFCG','zwXLy3qTAw1HzW','yM9KEq','z2uY','Bg9N','C3vcr3u','CNnNq0G','yMXVyG','zKLTywDL','AuTQveW','wMPWyLm','wMTvtve','BKLpzLG','rvn6sLC','5zU+54Mh5Ase55cg5AsX6lsLoIa','zwXbssbPBwfNzq','igzYB20Gy2fJAa','y29UC3rYDwn0BW','i2nVBwz5DwKTCW','sNv1ANm','EhHtsgW','CxvLCNLtzwXLyW','CLrkrM8','CefNu1C','6zsz6k+V6k+M5OofoG','i2nVBwz5DwKTCG','zLfYyvy','mNWWFdr8m3WX','BM9Uzq','i25VDMvSywKTyW','y0PAvuO','BuXSAgm','vNjRshK','ie5VDMvSquKGvG','C3rHCNrZv2L0Aa','sLnJsuO','CMvMigLTywDLoG','CIaUC3qTy2HHDa','ignHy2HLihrVia','t0rzDey','Aw5NignHy2HLza','lwj0BG','mZqWndmWm2HVzNDiyq','vunmtKm','qLf0r3y','z2v0rwXLBwvUDa','AgHqweG','q3LnqM4','uNnsB0K','i2LTywDLsw5WDq','qMzdrvq','swvbD2S','y2fJAguGzM9YBq','BMX5','twDjA3m','C3rVCMvszwfKvW','kcGOlISPkYKRkq','C2vYDMvYrMLSzq','zgLZCgXHEq','Dhu4lwLTywDLlq','t1jUvuO','y3DQBfG','BKX2txa','CMvHzefZrgf0yq','t2PwvKe','y3rvuKW','Df9UB3zLBgfP','De9nqvq','u0XWt0q','q0nAyMe','Dg9Y','zNjpB0G','wgXuCLC','zMLSzxm','5lUo57Yt5A2y5yQG6l29q29TzNK','ie5VDMvSquKGqW','BurWELO','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','CgXHy2vOB2XKzq','DNjruuG','rxjYB3iGBg9Hza','6k+35ywi6k6+572Uq29TzNLv','rNDcyK0','se53q2u','BwfNzs1WCMv2Aq','DhjPBq','tKX5EMW','yxqUifbSzwfZzq','CMvMlwLTywDLlq','y21zsgC','y29TzNL1AwnHBG','D2PcBhu','vuf5zue','l3vWBg9Hzc9PBq','zxnZAw5Nie5VDG','twrxDhC','B0HIvxe','uw9OquO','ihrVihvWzgf0zq','CM1HDc4','zLLOyu8','zKXyDfC','qw9Pvve','CNf6ugq','y2XPy2S','C3jJ','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','mJG4uKPks3zI','ssbbueNLNldLNydJGii','5zUE5PwW5O2UoG'];_0x17c4=function(){return _0x21aa01;};return _0x17c4();}let nai3VibeTransferImageMimeType=_0x4ade0b(0x178,0x1b2,0x14a,0x16b),nai3CharRefImageMimeType=_0x4ade0b(0x178,0x147,0x11f,0x194),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x1e4ec9){function _0x9c4d68(_0x282e8b,_0x58de7e,_0x30df80,_0x50eb65){return _0x4ade0b(_0x30df80-0x21a,_0x50eb65,_0x30df80-0x15b,_0x50eb65-0x1f4);}const _0x5c9577={};_0x5c9577[_0x2028f0(0x138,0x123,0xfa,0x144)]='previewIma'+_0x2028f0(0xfb,0x171,0x15d,0x1b8),_0x5c9577['qYsEL']='#novelai-i'+_0x2028f0(0xd7,0x111,0x148,0x162)+_0x9c4d68(0x3d4,0x38e,0x3cb,0x434)+'er\x20.st-cha'+_0x2028f0(0x113,0xf8,0xad,0x147)+_0x2028f0(0xdf,0x10b,0x9d,0xe1)+'r',_0x5c9577[_0x2028f0(0x175,0x162,0x1c7,0x1c1)]=_0x2028f0(0x1bb,0x1a1,0x1a4,0x14e)+'move-image'+'-btn',_0x5c9577[_0x2028f0(0x144,0x12c,0xdb,0x1a1)]=_0x9c4d68(0x394,0x3a0,0x3b7,0x386),_0x5c9577[_0x2028f0(0x185,0x11e,0xdb,0x147)]='block';function _0x2028f0(_0x37342b,_0xc990b9,_0x3570ca,_0x56300d){return _0x4ade0b(_0xc990b9- -0x4,_0x56300d,_0x3570ca-0x111,_0x56300d-0xfc);}_0x5c9577[_0x2028f0(0x18a,0x16f,0x12a,0x13a)]=_0x9c4d68(0x3f7,0x35a,0x3cc,0x402)+'x',_0x5c9577['ZkUMQ']=_0x9c4d68(0x3c5,0x38e,0x3f1,0x390),_0x5c9577['OlnBh']=_0x2028f0(0x235,0x1d4,0x24e,0x24f),_0x5c9577[_0x2028f0(0x18d,0x116,0xe0,0xb9)]=_0x2028f0(0x231,0x1b7,0x1e0,0x1b1);const _0x5e7de7=_0x5c9577,_0x4835e8=document[_0x2028f0(0x259,0x1e5,0x221,0x1de)+_0x9c4d68(0x3c7,0x371,0x3ac,0x3a5)](_0x5e7de7[_0x2028f0(0xf6,0x123,0x123,0x19a)]),_0x234ff6=document['querySelec'+'tor'](_0x5e7de7[_0x2028f0(0x14b,0x140,0x16d,0xc5)]),_0x581e94=document['getElement'+_0x2028f0(0x1bf,0x18e,0x17b,0x11a)](_0x5e7de7['SlFxh']);if(_0x1e4ec9&&_0x1e4ec9['startsWith'](_0x5e7de7[_0x2028f0(0x199,0x12c,0x10d,0x18d)])){_0x4835e8[_0x9c4d68(0x3b1,0x357,0x344,0x3b7)]=_0x1e4ec9,_0x4835e8[_0x2028f0(0x1ab,0x131,0x117,0x13b)][_0x9c4d68(0x2b7,0x335,0x315,0x325)]=_0x5e7de7[_0x2028f0(0x159,0x11e,0x12b,0x13b)],_0x234ff6[_0x9c4d68(0x3c1,0x319,0x34f,0x37e)]['display']=_0x9c4d68(0x3b4,0x419,0x3f2,0x3a3),_0x581e94[_0x2028f0(0xc9,0x131,0x102,0xc7)][_0x9c4d68(0x34d,0x36c,0x315,0x37a)]=_0x5e7de7['bGrKC'];const _0xe8989f=_0x1e4ec9[_0x2028f0(0x177,0x187,0x1fd,0x1c0)](','),_0x51d05d=_0xe8989f[-0xba*-0x2f+0x1be*-0x2+0x1eaa*-0x1][_0x9c4d68(0x338,0x3fb,0x3a5,0x416)](':')[-0x190e+0x6d*-0x34+0x2f33]['split'](';')[0x1a63+0x7*0x212+-0x28e1];nai3VibeTransferImageMimeType=_0x51d05d,window[_0x2028f0(0x1ad,0x15e,0x19b,0x1c8)+'ansferImag'+'e']=_0xe8989f[0x894+-0x1054+0x7c1];const _0x465f45={};_0x465f45['id']=NAI_VIBE_CACHE_KEY,_0x465f45['data']=_0x1e4ec9,dbs['storeReadW'+'rite'](_0x465f45);}else{const _0xa34052=_0x5e7de7[_0x9c4d68(0x417,0x3d0,0x3e1,0x456)]['split']('|');let _0xdcbfd=-0x4*0x3ec+0x102b*-0x1+0x1fdb;while(!![]){switch(_0xa34052[_0xdcbfd++]){case'0':_0x4835e8['style']['display']=_0x9c4d68(0x414,0x3c4,0x3f2,0x40d);continue;case'1':window[_0x9c4d68(0x3d1,0x381,0x37c,0x3b7)+_0x2028f0(0x1c0,0x178,0x12e,0x1e6)+'e']=null;continue;case'2':_0x4835e8[_0x9c4d68(0x31a,0x3b3,0x344,0x2cc)]='';continue;case'3':_0x581e94[_0x2028f0(0x1a5,0x131,0xf7,0xf9)][_0x9c4d68(0x2f4,0x2d1,0x315,0x2e8)]=_0x5e7de7['OlnBh'];continue;case'4':_0x234ff6[_0x9c4d68(0x30c,0x390,0x34f,0x31a)][_0x9c4d68(0x377,0x2ae,0x315,0x345)]=_0x5e7de7[_0x2028f0(0x17b,0x116,0x116,0x120)];continue;}break;}}}function removeNovelaiImage(){const _0x37b63b={'fdXxV':function(_0x2d29d4,_0xdcccc4){return _0x2d29d4(_0xdcccc4);}};_0x37b63b['fdXxV'](updateNovelaiImagePreview,null),dbs['storeDelet'+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x5e40e6){const _0x3c240a={'mDpzZ':function(_0x2b5893,_0x3ee384,_0x31c068){return _0x2b5893(_0x3ee384,_0x31c068);},'Zqagx':function(_0x4540fe,_0x199c21){return _0x4540fe(_0x199c21);},'nLvMp':'Error\x20proc'+_0x5a5ce0(0x20a,0x274,0x269,0x207)+_0x5a5ce0(0x2bd,0x36c,0x315,0x387)+':','WshfV':function(_0x1b0c1c,_0x8170d7){return _0x1b0c1c+_0x8170d7;},'FAgZU':_0x5a5ce0(0x306,0x2bd,0x314,0x329)},_0x5290f4=_0x5e40e6[_0x5a5ce0(0x2be,0x32d,0x2fa,0x375)][_0x5a5ce0(0x2ca,0x276,0x254,0x28e)][0x1a0d+0x1f*0x111+-0x3b1c];if(!_0x5290f4)return;function _0x5540d5(_0x1fe366,_0x34d972,_0x4fbf65,_0x499c2b){return _0x4ade0b(_0x1fe366-0xef,_0x34d972,_0x4fbf65-0x12b,_0x499c2b-0x179);}function _0x5a5ce0(_0x481e34,_0x15e9a8,_0x4a366d,_0x5c24b3){return _0x4ade0b(_0x4a366d-0x14a,_0x481e34,_0x4a366d-0x5b,_0x5c24b3-0x189);}try{const _0x438789=await _0x3c240a[_0x5540d5(0x1fc,0x1f8,0x21f,0x22d)](processUploadedImage,_0x5290f4,!![]);_0x3c240a['Zqagx'](updateNovelaiImagePreview,_0x438789);}catch(_0x4d8fdf){console['error'](_0x3c240a[_0x5540d5(0x1ee,0x219,0x215,0x23e)],_0x4d8fdf),alert(_0x3c240a[_0x5540d5(0x296,0x2c3,0x311,0x2c9)](_0x3c240a['FAgZU'],_0x4d8fdf[_0x5a5ce0(0x224,0x21f,0x27e,0x2eb)]));}}function _0x4ade0b(_0x52bd00,_0x3af8e0,_0x23305c,_0x481982){return _0x3401(_0x52bd00-0x52,_0x3af8e0);}function updateNovelaiCharRefImagePreview(_0x1fa198){const _0x444eaf={'UAyeA':_0x56ea20(0x2f9,0x362,0x32a,0x2c9)+'2','BQtGv':'Error\x20proc'+_0x506550(-0x2f1,-0x342,-0x2d6,-0x36f)+_0x56ea20(0x329,0x355,0x353,0x312)+':','gYOUd':function(_0x2f457f,_0x44bdc7){return _0x2f457f(_0x44bdc7);},'vHiwY':_0x506550(-0x246,-0x2a5,-0x1ff,-0x225),'eHMBt':_0x506550(-0x2b3,-0x250,-0x251,-0x276)+_0x506550(-0x266,-0x2b5,-0x2a7,-0x1f7)+_0x506550(-0x2c1,-0x30b,-0x2a7,-0x2fa),'TnzBn':_0x506550(-0x237,-0x247,-0x24b,-0x26d)+_0x56ea20(0x2cb,0x2ee,0x315,0x343)+'age-previe'+'w-containe'+_0x56ea20(0x3d4,0x368,0x369,0x3c0)+'u8-image-p'+'laceholder','fYhaO':_0x506550(-0x26b,-0x2af,-0x2da,-0x262)+_0x56ea20(0x2b0,0x345,0x2fe,0x2be)+_0x56ea20(0x2c7,0x2ec,0x2a1,0x2cd)+'btn','MiGWT':_0x56ea20(0x361,0x357,0x325,0x395),'hylUY':_0x506550(-0x24f,-0x2a0,-0x261,-0x1fb),'NJFXI':_0x56ea20(0x24b,0x21b,0x28c,0x2ba),'OXfcy':_0x506550(-0x275,-0x23e,-0x294,-0x2bb),'MdWtw':_0x506550(-0x238,-0x22e,-0x259,-0x238),'xxSHl':function(_0x15d7bf,_0x102ecd){return _0x15d7bf===_0x102ecd;},'bZACd':_0x506550(-0x225,-0x26e,-0x25c,-0x25f),'cEIni':_0x56ea20(0x2b7,0x314,0x2f8,0x27e),'Ehvfn':_0x506550(-0x255,-0x2c2,-0x255,-0x29c)};function _0x506550(_0x4f4673,_0x239105,_0x4105c3,_0x3ef739){return _0x4ade0b(_0x4f4673- -0x410,_0x4105c3,_0x4105c3-0x10a,_0x3ef739-0x4e);}function _0x56ea20(_0x396375,_0x2801d1,_0x208c76,_0x1feb32){return _0xb1d8a1(_0x208c76-0x3c0,_0x396375,_0x208c76-0x13c,_0x1feb32-0x177);}const _0x5d9c38=document[_0x56ea20(0x3b9,0x339,0x371,0x3e8)+_0x56ea20(0x358,0x32e,0x31a,0x29c)](_0x444eaf['eHMBt']),_0x47b8a2=document[_0x56ea20(0x387,0x35c,0x359,0x3af)+_0x56ea20(0x214,0x22f,0x28f,0x211)](_0x444eaf[_0x56ea20(0x324,0x2ee,0x311,0x31b)]),_0x33ef31=document[_0x56ea20(0x371,0x2f7,0x371,0x360)+_0x56ea20(0x30c,0x339,0x31a,0x393)](_0x444eaf[_0x506550(-0x2eb,-0x346,-0x27d,-0x322)]);if(_0x1fa198&&_0x1fa198[_0x56ea20(0x3c5,0x3c1,0x366,0x3af)](_0x444eaf['MiGWT'])){if(_0x444eaf[_0x506550(-0x286,-0x267,-0x262,-0x2b5)]===_0x444eaf[_0x56ea20(0x25b,0x249,0x2b9,0x295)])_0x5df034[_0x56ea20(0x2fb,0x311,0x371,0x334)+_0x506550(-0x27e,-0x2c0,-0x2c7,-0x2f0)](_0x444eaf[_0x506550(-0x2f3,-0x27c,-0x28a,-0x2a3)])[_0x506550(-0x2e7,-0x341,-0x28b,-0x360)]();else{_0x5d9c38['src']=_0x1fa198,_0x5d9c38['style'][_0x56ea20(0x26b,0x2c6,0x283,0x275)]=_0x444eaf['OXfcy'],_0x47b8a2[_0x56ea20(0x2d1,0x255,0x2bd,0x2f5)][_0x506550(-0x315,-0x320,-0x2bf,-0x338)]=_0x444eaf[_0x56ea20(0x2e4,0x25d,0x2a8,0x24b)],_0x33ef31[_0x56ea20(0x289,0x2a5,0x2bd,0x27e)][_0x56ea20(0x210,0x2d1,0x283,0x27b)]=_0x506550(-0x25e,-0x238,-0x223,-0x26a)+'x';const _0xee8f9b=_0x1fa198[_0x56ea20(0x378,0x2ff,0x313,0x37a)](','),_0x5f21eb=_0xee8f9b[-0x6b*-0x45+-0x801*-0x1+-0x418*0x9][_0x56ea20(0x335,0x31d,0x313,0x2e3)](':')[-0x10f*-0x1+-0x66f+-0x1*-0x561][_0x506550(-0x285,-0x26d,-0x2a1,-0x293)](';')[0x911*0x1+-0xc89*0x1+-0x8*-0x6f];nai3CharRefImageMimeType=_0x5f21eb,window[_0x56ea20(0x367,0x303,0x321,0x327)+_0x506550(-0x24c,-0x219,-0x213,-0x2bf)]=_0xee8f9b[0x7d1+-0x68*-0x38+0x28c*-0xc];const _0x4f187f={};_0x4f187f['id']=NAI_CHAR_REF_CACHE_KEY,_0x4f187f[_0x506550(-0x2d0,-0x328,-0x33d,-0x338)]=_0x1fa198,dbs[_0x506550(-0x21d,-0x1ce,-0x22e,-0x1e2)+_0x506550(-0x274,-0x21d,-0x24c,-0x2b9)](_0x4f187f);}}else{if(_0x444eaf[_0x56ea20(0x2fa,0x319,0x358,0x31c)](_0x56ea20(0x2f7,0x3f0,0x373,0x33f),_0x444eaf[_0x56ea20(0x2a2,0x295,0x2ce,0x2a0)])){const _0x57f3b1=_0x444eaf[_0x56ea20(0x32b,0x363,0x322,0x2bb)][_0x506550(-0x285,-0x2c5,-0x23b,-0x236)]('|');let _0x33b61e=-0x1d1a*-0x1+-0x2364+0x64a;while(!![]){switch(_0x57f3b1[_0x33b61e++]){case'0':window['nai3CharRe'+_0x506550(-0x24c,-0x1dc,-0x1fd,-0x1d6)]=null;continue;case'1':_0x33ef31[_0x506550(-0x2db,-0x2d3,-0x2ef,-0x295)][_0x56ea20(0x2fe,0x2f7,0x283,0x22f)]=_0x444eaf['MdWtw'];continue;case'2':_0x47b8a2['style']['display']=_0x444eaf[_0x56ea20(0x37e,0x2ff,0x32c,0x357)];continue;case'3':_0x5d9c38[_0x56ea20(0x246,0x258,0x2bd,0x2a8)][_0x56ea20(0x227,0x2b2,0x283,0x234)]=_0x444eaf[_0x506550(-0x2f0,-0x2a0,-0x317,-0x27f)];continue;case'4':_0x5d9c38[_0x56ea20(0x254,0x2cf,0x2b2,0x24f)]='';continue;}break;}}else _0x3c1479[_0x506550(-0x2ba,-0x280,-0x2fc,-0x241)](_0x444eaf[_0x506550(-0x228,-0x27f,-0x1cf,-0x1bf)],_0x5c0b16),_0x444eaf['gYOUd'](_0x55f6f0,_0x444eaf[_0x506550(-0x257,-0x23a,-0x1f8,-0x2cd)]+_0x1d0c00[_0x56ea20(0x32c,0x2a1,0x2bc,0x290)]);}}function removeNovelaiCharRefImage(){updateNovelaiCharRefImagePreview(null),dbs['storeDelet'+'e'](NAI_CHAR_REF_CACHE_KEY);}function _0xb1d8a1(_0x4cc8aa,_0xc4695f,_0x489fcc,_0xa5f08b){return _0x3401(_0x4cc8aa- -0x1e6,_0xc4695f);}async function handleNovelaiCharRefImageUpload(_0x397cb7){const _0x139b87={'rTJFo':function(_0x48d2f0,_0x3e7fd3){return _0x48d2f0(_0x3e7fd3);},'OjVVA':function(_0x18f5d8,_0x26b4af){return _0x18f5d8+_0x26b4af;},'JScIJ':_0x2d95a4(0x4e0,0x4d9,0x498,0x4c7)};function _0x22eff9(_0x17c985,_0x1fe3f9,_0x3a9ff3,_0x10e2ac){return _0xb1d8a1(_0x17c985-0x29c,_0x3a9ff3,_0x3a9ff3-0x98,_0x10e2ac-0x15d);}const _0x6fec6e=_0x397cb7[_0x22eff9(0x214,0x25f,0x288,0x28d)][_0x22eff9(0x16e,0x1db,0x12d,0x197)][-0x1*0x75a+-0x21*0x67+-0x14a1*-0x1];function _0x2d95a4(_0x2d8ada,_0x3b9569,_0xda647a,_0x200356){return _0xb1d8a1(_0x200356-0x535,_0x3b9569,_0xda647a-0x18d,_0x200356-0x1a9);}if(!_0x6fec6e)return;try{const _0x5b357f=await _0x139b87[_0x2d95a4(0x45b,0x45e,0x500,0x4cf)](processUploadedImage,_0x6fec6e);updateNovelaiCharRefImagePreview(_0x5b357f);}catch(_0x3591d0){console[_0x22eff9(0x1ba,0x149,0x22d,0x17b)](_0x22eff9(0x1de,0x16e,0x182,0x1f5)+'essing\x20Nov'+_0x22eff9(0x1d5,0x1e7,0x205,0x242)+_0x2d95a4(0x4ca,0x548,0x490,0x4dd),_0x3591d0),alert(_0x139b87[_0x2d95a4(0x44d,0x38f,0x464,0x3fe)](_0x139b87[_0x22eff9(0x243,0x25d,0x287,0x1e2)],_0x3591d0[_0x22eff9(0x198,0x1cc,0x1be,0x194)]));}}function updateComfyUIImagePreview(_0x520d9d){const _0x3f4416={};_0x3f4416['fLXtW']=_0x3efe12(0xb4,0xbd,0x56,0xcd)+_0x2f32a4(0x379,0x330,0x30b,0x2f6),_0x3f4416['rubeZ']=_0x2f32a4(0x2e2,0x31d,0x2fc,0x323)+_0x3efe12(-0x51,0x1d,0xe,-0x35)+_0x3efe12(0xca,0x85,0xaa,0x7f)+'er\x20.st-cha'+_0x2f32a4(0x295,0x26d,0x28c,0x222)+'placeholde'+'r',_0x3f4416[_0x3efe12(0xd0,0xb7,0x64,0x32)]=_0x2f32a4(0x2ae,0x2cd,0x2ae,0x2c3)+_0x2f32a4(0x284,0x2b8,0x2fb,0x2c9)+'-btn',_0x3f4416['ZjpbS']='blob:',_0x3f4416[_0x3efe12(0x19,0x82,0x4a,0x9d)]=function(_0x54bca3,_0x2594b1){return _0x54bca3!==_0x2594b1;},_0x3f4416[_0x3efe12(0x5a,0x74,0xbb,0x110)]='none',_0x3f4416['nIOfX']=_0x2f32a4(0x35b,0x323,0x34c,0x36e)+'x',_0x3f4416[_0x3efe12(0xb8,0xd6,0x63,0xde)]=_0x3efe12(-0x4a,-0x38,0x2f,-0x4e)+'4',_0x3f4416[_0x2f32a4(0x315,0x34d,0x3a1,0x2e6)]=_0x3efe12(0x77,0x58,0xb4,0xe4);function _0x2f32a4(_0x5913cf,_0xf6089,_0x158959,_0x2184c5){return _0xb1d8a1(_0xf6089-0x3a9,_0x2184c5,_0x158959-0x1e8,_0x2184c5-0x1c2);}function _0x3efe12(_0x50e2c2,_0x36eb73,_0x2d67af,_0x30093c){return _0x4ade0b(_0x2d67af- -0x107,_0x30093c,_0x2d67af-0x14f,_0x30093c-0x5d);}_0x3f4416[_0x2f32a4(0x2dc,0x288,0x292,0x27c)]=_0x3efe12(0x79,0x3c,0x68,0x60),_0x3f4416['KoHUi']='JIoCq',_0x3f4416[_0x3efe12(0xb0,0x66,0xe3,0x128)]='RsRoI',_0x3f4416[_0x2f32a4(0x23b,0x285,0x286,0x287)]=_0x3efe12(0xae,0xe1,0x94,0x108),_0x3f4416[_0x2f32a4(0x257,0x281,0x24c,0x2c8)]=_0x3efe12(0x33,0x8b,0xa7,0x47)+'5';const _0x557f02=_0x3f4416,_0x48fa74=document['getElement'+_0x3efe12(0x1b,0x7c,0x8b,0x55)](_0x557f02['fLXtW']),_0x135bd7=document['querySelec'+_0x3efe12(-0x35,-0x61,0x0,0x32)](_0x557f02['rubeZ']),_0x3f1102=document['getElement'+_0x2f32a4(0x33f,0x303,0x286,0x37e)](_0x557f02['lhLtN']);if(_0x48fa74['src']&&_0x48fa74[_0x2f32a4(0x2e7,0x29b,0x222,0x2ac)][_0x2f32a4(0x32f,0x34f,0x359,0x390)](_0x557f02[_0x3efe12(0xdb,0xbd,0xbf,0xe5)])&&_0x48fa74['src']!==_0x520d9d){if(_0x557f02['TvFSO'](_0x557f02[_0x3efe12(-0x3f,-0x45,0x10,0x65)],_0x557f02['KoHUi']))URL['revokeObje'+_0x2f32a4(0x251,0x273,0x2d7,0x2b4)](_0x48fa74[_0x2f32a4(0x233,0x29b,0x270,0x2e7)]);else{if(_0x4cb275){const _0x132148=_0x3f6c6e[_0x3efe12(-0x17,0x41,0x3a,-0x3e)](_0xeec889,arguments);return _0x22c518=null,_0x132148;}}}if(_0x520d9d){if(_0x557f02[_0x2f32a4(0x2a3,0x2c2,0x245,0x250)](_0x2f32a4(0x35e,0x35d,0x2e8,0x352),_0x557f02[_0x2f32a4(0x395,0x35b,0x3d9,0x35e)])){const _0x5e767f=_0x343325[_0x2f32a4(0x36b,0x35a,0x39d,0x328)+'ById'](_0x557f02[_0x3efe12(0x48,-0x35,0x1f,0x3c)]),_0x48eb3e=_0x4ef92f[_0x3efe12(0x139,0x88,0xca,0x10b)+'tor'](_0x557f02['rubeZ']),_0x288a38=_0x5b042f[_0x2f32a4(0x2fa,0x35a,0x2e0,0x36e)+_0x3efe12(0x51,0xaa,0x8b,0x6e)](_0x557f02['lhLtN']);_0x5e767f[_0x3efe12(0x5f,0x72,0x23,0x84)]&&_0x5e767f['src'][_0x3efe12(0x14d,0x9a,0xd7,0x81)](_0x557f02['ZjpbS'])&&_0x557f02[_0x3efe12(0xbd,0x7b,0x4a,0xb4)](_0x5e767f[_0x2f32a4(0x2f6,0x29b,0x23d,0x318)],_0x5e7801)&&_0x2e8cf1[_0x2f32a4(0x32a,0x2b9,0x2a8,0x27c)+'ctURL'](_0x5e767f[_0x2f32a4(0x278,0x29b,0x27a,0x2ea)]);if(_0x215f3e)_0x5e767f['src']=_0x40372c,_0x5e767f[_0x2f32a4(0x2be,0x2a6,0x266,0x245)]['display']=_0x3efe12(0x7a,0x35,0x94,0xde),_0x48eb3e[_0x2f32a4(0x22e,0x2a6,0x258,0x2b6)][_0x2f32a4(0x252,0x26c,0x21e,0x29f)]=_0x557f02[_0x2f32a4(0x2ef,0x333,0x317,0x311)],_0x288a38['style'][_0x2f32a4(0x2e4,0x26c,0x21f,0x215)]=_0x557f02[_0x2f32a4(0x33c,0x339,0x2d3,0x358)];else{const _0xdd34f9=_0x557f02[_0x3efe12(0x20,0x2,0x63,0x13)][_0x2f32a4(0x2ea,0x2fc,0x2d0,0x2e2)]('|');let _0x39fb63=0x2198+-0x1733+-0x377*0x3;while(!![]){switch(_0xdd34f9[_0x39fb63++]){case'0':_0x260c6b[_0x2f32a4(0x24f,0x28c,0x295,0x2ca)+'kaotupian']=null;continue;case'1':_0x288a38['style'][_0x2f32a4(0x273,0x26c,0x2d8,0x2d6)]=_0x557f02[_0x2f32a4(0x2f6,0x333,0x3b0,0x366)];continue;case'2':_0x5e767f[_0x2f32a4(0x264,0x2a6,0x2a6,0x2d9)][_0x3efe12(-0x5e,0x10,-0xc,0x56)]=_0x557f02[_0x2f32a4(0x32d,0x333,0x2c6,0x2d5)];continue;case'3':_0x5e767f['src']='';continue;case'4':_0x478a55=null;continue;case'5':_0x48eb3e['style'][_0x3efe12(0x3e,-0x70,-0xc,-0x18)]=_0x557f02[_0x3efe12(0xa7,0xea,0xd5,0x6a)];continue;}break;}}}else _0x48fa74[_0x3efe12(0x40,0x9,0x23,-0x50)]=_0x520d9d,_0x48fa74[_0x3efe12(0x4a,0x81,0x2e,-0x2a)]['display']=_0x557f02[_0x2f32a4(0x284,0x285,0x2b8,0x22f)],_0x135bd7['style'][_0x3efe12(-0x2,0x45,-0xc,-0x4c)]=_0x2f32a4(0x2ff,0x349,0x342,0x3c3),_0x3f1102[_0x2f32a4(0x2fe,0x2a6,0x2a6,0x302)][_0x3efe12(-0x15,-0xd,-0xc,0xe)]=_0x557f02['nIOfX'];}else{const _0x33fda5=_0x557f02['vrQQH']['split']('|');let _0x4e2559=-0xb*0x36b+0x156c+0x102d;while(!![]){switch(_0x33fda5[_0x4e2559++]){case'0':_0x48fa74[_0x2f32a4(0x30d,0x2a6,0x235,0x25b)]['display']=_0x557f02[_0x2f32a4(0x309,0x333,0x38f,0x35c)];continue;case'1':_0x48fa74['src']='';continue;case'2':window[_0x2f32a4(0x290,0x28c,0x281,0x2ed)+'kaotupian']=null;continue;case'3':_0x135bd7[_0x3efe12(0x35,-0x40,0x2e,0x1c)]['display']=_0x2f32a4(0x38d,0x32c,0x313,0x373);continue;case'4':_0x3f1102[_0x2f32a4(0x272,0x2a6,0x286,0x2b5)][_0x3efe12(-0x84,-0x1d,-0xc,0x6a)]=_0x557f02[_0x3efe12(0x10f,0x6b,0xbb,0xf2)];continue;case'5':comfyuiImageObjectURL=null;continue;}break;}}}function removeComfyUIImage(){const _0x4690b5={'feZaC':function(_0x40ccbf,_0x151b87){return _0x40ccbf(_0x151b87);}};function _0x10b13c(_0x54bdd4,_0x5862de,_0x56f997,_0x44b4c6){return _0x4ade0b(_0x5862de- -0x2c9,_0x44b4c6,_0x56f997-0x157,_0x44b4c6-0x6b);}_0x4690b5['feZaC'](updateComfyUIImagePreview,null),dbs[_0x10b13c(-0x190,-0x14e,-0x160,-0x113)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x11cb6f){const _0x30d7e6={'SLpOD':function(_0x202015,_0x2e5dfb){return _0x202015(_0x2e5dfb);},'ijeih':function(_0x4e336b,_0x247af3){return _0x4e336b(_0x247af3);},'EZAXn':function(_0xc8e428,_0x240f91){return _0xc8e428(_0x240f91);},'mmGhs':function(_0x49d12e,_0xd4d11,_0x3f42ea){return _0x49d12e(_0xd4d11,_0x3f42ea);},'VwjcD':_0x4b955f(0x1ce,0x18c,0x19c,0x187),'tfVHV':function(_0x35ce8d,_0x2d6013){return _0x35ce8d+_0x2d6013;},'YTHHp':function(_0x19907e,_0x4724fa){return _0x19907e(_0x4724fa);},'IeAwk':_0x4b955f(0x12f,0x1df,0x11b,0x188),'gwUZd':function(_0x270960){return _0x270960();},'gbFUL':_0xffed77(-0x1f0,-0x1cc,-0x23b,-0x1e0)+':\x20','xHwqF':_0xffed77(-0x1df,-0x22f,-0x23b,-0x27e)+':','lEGkk':function(_0x3af6aa,_0x159947){return _0x3af6aa(_0x159947);}};function _0xffed77(_0x3e5aae,_0x189123,_0x542baf,_0x1c59a6){return _0xb1d8a1(_0x542baf- -0x171,_0x3e5aae,_0x542baf-0x63,_0x1c59a6-0x12b);}const _0x57fca5=extension_settings[extensionName];function _0x4b955f(_0x54ae0d,_0x44c0bc,_0x51d574,_0x376415){return _0xb1d8a1(_0x376415-0x1ec,_0x51d574,_0x51d574-0x2c,_0x376415-0x11a);}const _0xbaa012=_0x11cb6f[_0xffed77(-0x1b8,-0x1f6,-0x1f9,-0x24e)][_0x4b955f(0x124,0x137,0xcd,0xbe)][-0x7f1*-0x4+0xc31+0x16b*-0x1f];if(!_0xbaa012)return;try{const _0x22e06c=await _0x30d7e6[_0x4b955f(0x44,0xac,0xea,0xb9)](processUploadedImageToBlob,_0xbaa012),_0x1b1bbc=URL[_0xffed77(-0x29b,-0x23f,-0x251,-0x20c)+_0x4b955f(0xef,0x103,0xd2,0xb6)](_0x22e06c);comfyuiImageObjectURL=_0x1b1bbc,_0x30d7e6[_0x4b955f(0xed,0xf0,0xad,0x113)](updateComfyUIImagePreview,_0x1b1bbc);const _0x1f3f55=new FormData();_0x1f3f55['append']('image',_0x22e06c,_0xbaa012[_0x4b955f(0x14b,0x13c,0xbc,0xe3)]);let _0x468bdc=_0x57fca5[_0xffed77(-0x22a,-0x280,-0x225,-0x288)][_0x4b955f(0x7d,0xda,0xf0,0xca)]();if(!_0x468bdc){_0x30d7e6[_0xffed77(-0x2ad,-0x268,-0x23c,-0x1ee)](alert,_0x4b955f(0x140,0xf7,0xf9,0xc6)+_0x4b955f(0x143,0xf7,0x129,0xe1)),removeComfyUIImage();return;}const _0x269076={};_0x269076['method']=_0x4b955f(0x1aa,0x19a,0x1ce,0x15f),_0x269076[_0xffed77(-0x1a9,-0x1f9,-0x1eb,-0x1b7)]=_0x1f3f55;const _0x3206af=await _0x30d7e6['mmGhs'](fetch,_0x468bdc+(_0x4b955f(0xf8,0xfa,0x62,0xd2)+_0xffed77(-0x2a4,-0x2d3,-0x270,-0x239)),_0x269076);if(_0x3206af['ok']){if(_0x30d7e6['VwjcD']!==_0xffed77(-0x274,-0x1b4,-0x1f6,-0x23e)){const _0x2ff908=await _0x3206af[_0xffed77(-0x1c4,-0x1df,-0x229,-0x230)]();window[_0xffed77(-0x2fc,-0x2cc,-0x28e,-0x2ab)+_0x4b955f(0x159,0x15f,0x139,0x10f)]=_0x2ff908['name'],addLog(_0x4b955f(0x131,0x1cb,0x1c1,0x161)+'器返回数据:\x20'+JSON[_0xffed77(-0x2a5,-0x1b5,-0x22a,-0x22e)](_0x2ff908)),console[_0xffed77(-0x237,-0x231,-0x1e9,-0x243)](_0xffed77(-0x28d,-0x2c8,-0x27e,-0x223)+_0x4b955f(0x7d,0xd3,0x138,0xe2),_0x2ff908);const _0x311c70=new FileReader();_0x311c70['onloadend']=()=>{const _0x1b6091=_0x311c70[_0x159ce2(0x455,0x43b,0x4bd,0x45d)],_0x43922e={};_0x43922e[_0x159ce2(0x432,0x485,0x442,0x433)]=_0x1b6091,_0x43922e[_0x1e817a(0x303,0x2e3,0x324,0x2c1)+_0x159ce2(0x47e,0x410,0x43b,0x432)]=_0x2ff908[_0x1e817a(0x33a,0x318,0x29c,0x32d)];function _0x1e817a(_0x245df3,_0x2862c1,_0x37b3be,_0x2349f8){return _0x4b955f(_0x245df3-0x14b,_0x2862c1-0x6e,_0x37b3be,_0x2862c1-0x235);}const _0x3004fd=_0x43922e,_0x3c74b7={};_0x3c74b7['id']=COMFYUI_REF_CACHE_KEY;function _0x159ce2(_0x1f44c1,_0x4ad199,_0x468581,_0x3f79a7){return _0xffed77(_0x468581,_0x4ad199-0x1af,_0x1f44c1-0x69b,_0x3f79a7-0x1e3);}_0x3c74b7[_0x159ce2(0x432,0x44a,0x47f,0x40b)]=_0x3004fd,dbs[_0x1e817a(0x383,0x3dc,0x37f,0x3d7)+_0x159ce2(0x48e,0x4b7,0x4bc,0x44a)](_0x3c74b7);},_0x311c70[_0xffed77(-0x31b,-0x2f0,-0x2a9,-0x310)+'URL'](_0x22e06c);}else _0x356d52[_0xffed77(-0x172,-0x166,-0x1c0,-0x185)+_0x4b955f(0x121,0x145,0x139,0x146)](_0xffed77(-0x19d,-0x201,-0x207,-0x261)+_0xffed77(-0x274,-0x1b2,-0x20a,-0x272)+_0x4b955f(0x1c9,0x1ce,0x1bf,0x155))[_0xffed77(-0x2cd,-0x297,-0x280,-0x228)]();}else{const _0x22a26f=await _0x3206af[_0xffed77(-0x204,-0x1fc,-0x212,-0x1ca)]();alert(_0x30d7e6[_0x4b955f(0x15b,0xcd,0xd9,0x143)]('上传失败:\x20',_0x22a26f)),_0x30d7e6[_0xffed77(-0x1ff,-0x291,-0x248,-0x250)](addLog,_0x4b955f(0x5d,0xce,0x56,0xc2)+'详情:\x20'+_0x22a26f),console[_0x4b955f(0x182,0x132,0xd9,0x10a)](_0x30d7e6[_0xffed77(-0x1af,-0x179,-0x1ba,-0x188)],_0x22a26f),_0x30d7e6[_0xffed77(-0x1ac,-0x231,-0x224,-0x22f)](removeComfyUIImage);}}catch(_0x54ee98){alert(_0x30d7e6[_0xffed77(-0x297,-0x285,-0x25e,-0x28d)]+_0x54ee98[_0x4b955f(0xf8,0x13e,0x146,0xe8)]),console[_0xffed77(-0x23f,-0x1f9,-0x253,-0x232)](_0x30d7e6[_0xffed77(-0x23f,-0x251,-0x240,-0x293)],_0x54ee98),_0x30d7e6['lEGkk'](addLog,_0x4b955f(0x4e,0xbc,0x126,0xc2)+_0xffed77(-0x219,-0x1cd,-0x228,-0x230)+JSON[_0xffed77(-0x270,-0x25b,-0x22a,-0x1b8)](_0x54ee98)),_0x30d7e6[_0x4b955f(0x110,0x188,0x1ac,0x139)](removeComfyUIImage);}}async function loadCachedImages(){const _0x3c0350={'aQbfU':function(_0x38e96f,_0x23f852){return _0x38e96f(_0x23f852);},'cNQdK':_0x518c3e(0x1f9,0x229,0x1f4,0x1a5)+'+$','juwms':function(_0x42d720,_0x18e7d1){return _0x42d720(_0x18e7d1);},'bcONQ':'Error\x20load'+'ing\x20cached'+_0x9e4243(0x2da,0x2e8,0x350,0x336)+'ibe\x20image:','gYwNM':_0x9e4243(0x20f,0x2af,0x284,0x283)+_0x9e4243(0x2ec,0x31e,0x357,0x37c)+_0x9e4243(0x2b3,0x24c,0x27f,0x2b4)+'har\x20Ref\x20im'+'age:','lyTWh':function(_0x3cb070,_0x33eca6){return _0x3cb070!==_0x33eca6;},'msYpM':_0x9e4243(0x261,0x27f,0x2df,0x2e6),'wjBlu':_0x9e4243(0x2f9,0x272,0x2a5,0x2d8),'FlyNl':_0x9e4243(0x323,0x2dc,0x2c8,0x31a),'BfCET':'VUEeX','mLlhc':function(_0x26d7c7,_0x13c076){return _0x26d7c7===_0x13c076;},'JPHPy':_0x9e4243(0x34e,0x340,0x309,0x377),'Olmvh':_0x518c3e(0x280,0x1ed,0x255,0x1e7)+_0x9e4243(0x357,0x302,0x307,0x2eb)+'\x20from\x20old\x20'+_0x9e4243(0x387,0x361,0x363,0x341)+_0x518c3e(0x1bc,0x22c,0x213,0x24a)+_0x518c3e(0x241,0x248,0x25b,0x27c)+_0x9e4243(0x22a,0x2e9,0x296,0x25d)+_0x9e4243(0x311,0x2f6,0x355,0x33c)+_0x518c3e(0x304,0x2dd,0x289,0x210)+_0x9e4243(0x2d2,0x243,0x297,0x274),'BLzWk':_0x518c3e(0x2e6,0x269,0x27d,0x2d4),'oHbUq':_0x9e4243(0x29a,0x246,0x284,0x26c)+_0x9e4243(0x32a,0x379,0x357,0x317)+_0x9e4243(0x321,0x2f8,0x2d8,0x25a)+_0x518c3e(0x247,0x274,0x290,0x220)};await dbs[_0x518c3e(0x2b6,0x285,0x24d,0x232)]();function _0x9e4243(_0x4dc3bb,_0x2fa6cd,_0x4c75ea,_0x144844){return _0xb1d8a1(_0x4c75ea-0x3ab,_0x2fa6cd,_0x4c75ea-0x1ac,_0x144844-0x3d);}function _0x518c3e(_0x1346fd,_0x14ab98,_0x448e14,_0x41f264){return _0xb1d8a1(_0x448e14-0x333,_0x14ab98,_0x448e14-0x99,_0x41f264-0x75);}try{const _0x4bb2e4=await dbs['storeReadO'+_0x518c3e(0x2aa,0x2f4,0x2ec,0x2b0)](NAI_VIBE_CACHE_KEY);_0x4bb2e4&&_0x4bb2e4[_0x518c3e(0x1d8,0x1d8,0x23b,0x289)]&&_0x3c0350[_0x9e4243(0x350,0x2df,0x319,0x2fb)](updateNovelaiImagePreview,_0x4bb2e4[_0x9e4243(0x31e,0x2e2,0x2b3,0x26b)]);}catch(_0x726549){console[_0x9e4243(0x2d3,0x33f,0x2c9,0x27a)](_0x3c0350['bcONQ'],_0x726549);}try{const _0x229b88=await dbs[_0x9e4243(0x250,0x236,0x2a6,0x23e)+'nly'](NAI_CHAR_REF_CACHE_KEY);_0x229b88&&_0x229b88[_0x518c3e(0x212,0x262,0x23b,0x215)]&&updateNovelaiCharRefImagePreview(_0x229b88[_0x518c3e(0x1ee,0x1ee,0x23b,0x20e)]);}catch(_0x27d652){console[_0x518c3e(0x238,0x270,0x251,0x2b2)](_0x3c0350['gYwNM'],_0x27d652);}try{if(_0x3c0350[_0x518c3e(0x2dc,0x30f,0x2a3,0x27d)](_0x3c0350['msYpM'],_0x3c0350[_0x518c3e(0x23d,0x23d,0x217,0x251)])){const _0x13b14a=await dbs['storeReadO'+_0x9e4243(0x393,0x339,0x364,0x347)](COMFYUI_REF_CACHE_KEY);if(_0x13b14a&&_0x13b14a[_0x9e4243(0x28f,0x319,0x2b3,0x27e)]&&_0x13b14a[_0x518c3e(0x1eb,0x244,0x23b,0x1ef)][_0x518c3e(0x280,0x264,0x23b,0x21a)]&&_0x13b14a[_0x9e4243(0x2a1,0x297,0x2b3,0x264)][_0x9e4243(0x22f,0x23f,0x26d,0x239)+_0x9e4243(0x33c,0x369,0x2ff,0x2f4)]){if(_0x3c0350['lyTWh'](_0x3c0350['FlyNl'],_0x3c0350[_0x518c3e(0x2f8,0x2d7,0x2e9,0x336)])){const _0x354fa8=_0x13b14a['data'],_0x2129f8=await _0x3c0350[_0x518c3e(0x2b5,0x22c,0x2a1,0x250)](fetch,_0x354fa8['data']),_0x484ce7=await _0x2129f8[_0x518c3e(0x2b3,0x30d,0x2be,0x2b0)](),_0x481c44=URL[_0x9e4243(0x32d,0x2df,0x2cb,0x296)+'ctURL'](_0x484ce7);updateComfyUIImagePreview(_0x481c44),comfyuiImageObjectURL=_0x481c44,window[_0x9e4243(0x242,0x2e5,0x28e,0x270)+'kaotupian']=_0x354fa8[_0x518c3e(0x1b0,0x1ed,0x1f5,0x1e2)+_0x9e4243(0x2ad,0x321,0x2ff,0x346)],addLog(_0x518c3e(0x1a9,0x1cb,0x206,0x24b)+_0x518c3e(0x200,0x1f1,0x232,0x1fe)+_0x354fa8[_0x518c3e(0x24d,0x1a8,0x1f5,0x22c)+_0x9e4243(0x2cf,0x2ff,0x2ff,0x2f8)]),console[_0x9e4243(0x2bf,0x369,0x333,0x2c0)](_0x518c3e(0x236,0x1f7,0x255,0x23b)+_0x518c3e(0x2ee,0x21b,0x28f,0x2f2)+_0x518c3e(0x2d8,0x33d,0x2c7,0x2c1)+_0x9e4243(0x2bd,0x342,0x329,0x33f)+_0x354fa8[_0x9e4243(0x21e,0x252,0x26d,0x226)+_0x9e4243(0x284,0x2f2,0x2ff,0x2b2)]);}else _0x3c0350[_0x518c3e(0x259,0x29c,0x238,0x1f3)](_0x10f656,_0x51a98f[_0x9e4243(0x2a6,0x2e8,0x2b3,0x31f)]);}else{if(_0x13b14a&&_0x3c0350[_0x518c3e(0x320,0x2dc,0x2d6,0x2de)](typeof _0x13b14a[_0x518c3e(0x1e6,0x2ab,0x23b,0x277)],_0x3c0350['JPHPy'])){const _0x4fff26=await _0x3c0350['aQbfU'](fetch,_0x13b14a[_0x518c3e(0x240,0x214,0x23b,0x221)]),_0x408c8c=await _0x4fff26[_0x9e4243(0x3ae,0x2ba,0x336,0x2d8)](),_0x20633f=URL['createObje'+_0x9e4243(0x2c1,0x2f1,0x275,0x293)](_0x408c8c);_0x3c0350['juwms'](updateComfyUIImagePreview,_0x20633f),comfyuiImageObjectURL=_0x20633f,console[_0x9e4243(0x29f,0x275,0x2bd,0x2d9)](_0x3c0350[_0x518c3e(0x259,0x2e2,0x281,0x258)]);}}}else return _0x1d650c[_0x518c3e(0x293,0x1ed,0x248,0x203)]()[_0x9e4243(0x2ac,0x2a4,0x2b8,0x268)](PbBYHo[_0x9e4243(0x33e,0x336,0x32b,0x395)])[_0x9e4243(0x2df,0x2dc,0x2c0,0x296)]()[_0x9e4243(0x2fd,0x36e,0x340,0x38c)+'r'](_0x156d45)['search'](PbBYHo[_0x518c3e(0x239,0x2d7,0x2b3,0x2bf)]);}catch(_0x4318c3){_0x3c0350[_0x9e4243(0x312,0x342,0x34e,0x3a1)](_0x3c0350[_0x9e4243(0x302,0x303,0x2ad,0x29f)],_0x3c0350[_0x9e4243(0x2da,0x25e,0x2ad,0x28e)])?console['error'](_0x3c0350[_0x9e4243(0x2cb,0x232,0x294,0x253)],_0x4318c3):(_0x3c0350[_0x518c3e(0x2b1,0x254,0x2a1,0x31e)](_0x2f1afc,null),_0x408016[_0x518c3e(0x2e5,0x268,0x276,0x221)+'e'](_0x3003a9));}}export function initImageUpload(_0x150d8e){const _0x2f3415={'npkIe':_0x1f7edb(-0x1e7,-0x1c7,-0x174,-0x175)+_0x1f7edb(-0x232,-0x1b6,-0x2a5,-0x1d5),'cwjlX':_0x933927(0x2aa,0x2c0,0x235,0x26e)+_0x1f7edb(-0x25c,-0x1e3,-0x296,-0x220),'fQraV':function(_0x3c2550){return _0x3c2550();},'rqzPd':_0x933927(0x338,0x345,0x310,0x3ae),'ANsuP':_0x933927(0x34f,0x345,0x3b2,0x391),'TOVOd':'imageInput'+_0x933927(0x337,0x301,0x30c,0x378)+_0x933927(0x339,0x337,0x2c8,0x305),'FwBbM':function(_0x169ae6){return _0x169ae6();},'Juujs':function(_0x7474c9,_0x15c300){return _0x7474c9!==_0x15c300;},'QNEHN':_0x933927(0x295,0x2d9,0x22f,0x2be),'VVeip':_0x933927(0x30a,0x372,0x2ef,0x36b),'zvbCt':'imageInput'+'2','XlTrW':_0x1f7edb(-0x1af,-0x13e,-0x229,-0x21e),'ZvbvK':'PtPAM','frOoH':function(_0x4b6ab9){return _0x4b6ab9();},'MgIks':_0x933927(0x311,0x2eb,0x2d9,0x309)+_0x1f7edb(-0x1cc,-0x1fb,-0x151,-0x218)+'e-btn','mLfRS':'#imageInpu'+_0x933927(0x29b,0x2e6,0x2a6,0x2f1),'VjeZV':_0x1f7edb(-0x260,-0x20a,-0x1eb,-0x262),'YkWEI':_0x933927(0x311,0x30e,0x331,0x2a4)+'elect-char'+_0x1f7edb(-0x240,-0x2bc,-0x1d3,-0x268)+_0x933927(0x37d,0x317,0x3a4,0x364),'wXnCC':_0x1f7edb(-0x202,-0x1dc,-0x241,-0x239),'ARxin':_0x933927(0x2d0,0x2af,0x270,0x2fc)+'emove-char'+'-ref-image'+'-btn','iKjTL':_0x1f7edb(-0x1bb,-0x157,-0x1a1,-0x199)+_0x1f7edb(-0x1cc,-0x186,-0x1a1,-0x229)+_0x1f7edb(-0x1e6,-0x1a5,-0x1cf,-0x17e),'TMvsS':_0x933927(0x385,0x3d6,0x328,0x356)+'t2','FzRaZ':_0x1f7edb(-0x1b4,-0x15d,-0x16b,-0x1f8)+'emove-imag'+'e-btn'};function _0x1f7edb(_0x2f6bed,_0x59f7c1,_0x2a82b3,_0x50816a){return _0x4ade0b(_0x2f6bed- -0x389,_0x2a82b3,_0x2a82b3-0x1b6,_0x50816a-0xb9);}loadCachedImages(),_0x150d8e[_0x933927(0x2e6,0x288,0x352,0x293)](_0x2f3415[_0x1f7edb(-0x197,-0x1dd,-0x17b,-0x11b)])['on'](_0x933927(0x2c1,0x257,0x315,0x29d),()=>{function _0x5a2bec(_0xe05904,_0xc34d65,_0x44c615,_0x43f07b){return _0x1f7edb(_0xe05904- -0x7e,_0xc34d65-0x1ae,_0x43f07b,_0x43f07b-0x8c);}function _0x1b4ad5(_0x246865,_0x51b2a0,_0x4f3bf8,_0x5b16b5){return _0x933927(_0x246865- -0x193,_0x51b2a0,_0x4f3bf8-0x1c1,_0x5b16b5-0x50);}document[_0x5a2bec(-0x21e,-0x260,-0x23e,-0x22d)+_0x1b4ad5(0x197,0x1ca,0x11e,0x144)](_0x2f3415[_0x5a2bec(-0x277,-0x244,-0x243,-0x2a5)])[_0x1b4ad5(0x12e,0xcf,0x152,0x188)]();}),_0x150d8e[_0x1f7edb(-0x23b,-0x200,-0x26b,-0x1bf)](_0x2f3415['mLfRS'])['on'](_0x1f7edb(-0x202,-0x185,-0x1a5,-0x18b),handleNovelaiImageUpload);function _0x933927(_0x35ee6b,_0x3f24ad,_0x2e1a6c,_0x177383){return _0xb1d8a1(_0x35ee6b-0x3d0,_0x3f24ad,_0x2e1a6c-0x12a,_0x177383-0x8b);}_0x150d8e[_0x933927(0x2e6,0x26a,0x29c,0x2ef)]('#novelai-r'+_0x1f7edb(-0x1f8,-0x247,-0x201,-0x1c5)+_0x1f7edb(-0x1e6,-0x1da,-0x253,-0x214))['on'](_0x2f3415[_0x1f7edb(-0x235,-0x1da,-0x26a,-0x1d8)],()=>{function _0x8296c(_0x50204c,_0x215803,_0x360bba,_0x4b2b4f){return _0x1f7edb(_0x360bba-0x1e3,_0x215803-0x19,_0x215803,_0x4b2b4f-0x82);}function _0x1dfc23(_0x1a00ea,_0x19d95b,_0x3a63f9,_0x41af2d){return _0x1f7edb(_0x19d95b- -0x5,_0x19d95b-0xd7,_0x41af2d,_0x41af2d-0x19b);}const _0x1fdf50={'uascK':_0x2f3415[_0x1dfc23(-0x2db,-0x290,-0x299,-0x2ce)],'jMpkF':function(_0x20f205){function _0x4720ac(_0x1c24f7,_0x219f07,_0x588584,_0x58ec3d){return _0x1dfc23(_0x1c24f7-0xe8,_0x588584-0x546,_0x588584-0x1bd,_0x58ec3d);}return _0x2f3415[_0x4720ac(0x3f0,0x3e0,0x38e,0x3fd)](_0x20f205);}};if(_0x2f3415[_0x8296c(-0xf5,-0xae,-0x7e,-0xe5)]!==_0x2f3415[_0x8296c(0x83,-0x5c,0xe,0x5)])_0x2f3415[_0x8296c(-0x1,0x1d,0x30,0x33)](removeNovelaiImage);else{_0x15caa6(_0x1fdf50[_0x8296c(-0x2a,0xc,-0x63,-0x80)]),_0x1fdf50[_0x8296c(-0x79,-0xd,-0x48,-0x3c)](_0x307ed7);return;}}),_0x150d8e[_0x933927(0x2e6,0x28e,0x30c,0x30e)](_0x2f3415[_0x933927(0x31b,0x323,0x2f3,0x2e1)])['on'](_0x2f3415[_0x1f7edb(-0x235,-0x1c8,-0x2ab,-0x23e)],()=>{function _0x2e03af(_0x1c3cff,_0x3f50ff,_0xd6ed4f,_0x2a7b9b){return _0x1f7edb(_0x2a7b9b-0x4c0,_0x3f50ff-0x1e,_0xd6ed4f,_0x2a7b9b-0x8a);}function _0x2a4382(_0x4b1c52,_0x2ba1f6,_0x239241,_0x43fbc0){return _0x933927(_0x4b1c52- -0x385,_0x2ba1f6,_0x239241-0xf4,_0x43fbc0-0xfc);}document[_0x2e03af(0x2de,0x310,0x2ef,0x320)+_0x2a4382(-0x5b,-0x71,-0x55,-0x73)](_0x2f3415[_0x2e03af(0x296,0x308,0x22a,0x29e)])[_0x2a4382(-0xc4,-0x90,-0x11c,-0x6e)]();}),_0x150d8e['find'](_0x933927(0x385,0x38b,0x30b,0x3a2)+_0x1f7edb(-0x1d4,-0x246,-0x233,-0x1c8)+'_ref')['on'](_0x2f3415['wXnCC'],handleNovelaiCharRefImageUpload),_0x150d8e['find'](_0x2f3415[_0x1f7edb(-0x236,-0x2a6,-0x1ef,-0x1de)])['on'](_0x2f3415[_0x1f7edb(-0x235,-0x226,-0x24d,-0x28e)],()=>{function _0x89da15(_0x48fb83,_0x32245c,_0x11ad8e,_0x2d8ffc){return _0x1f7edb(_0x11ad8e-0x30d,_0x32245c-0x113,_0x2d8ffc,_0x2d8ffc-0x1c4);}_0x2f3415[_0x89da15(0x6a,0xd8,0x97,0xf4)](removeNovelaiCharRefImage);}),_0x150d8e[_0x933927(0x2e6,0x296,0x27a,0x2a1)](_0x2f3415[_0x1f7edb(-0x1c4,-0x205,-0x1d7,-0x16d)])['on'](_0x2f3415[_0x1f7edb(-0x235,-0x1f1,-0x290,-0x226)],()=>{function _0x22f56d(_0x450ff8,_0x221e64,_0x50e043,_0x404f19){return _0x1f7edb(_0x50e043-0x2fe,_0x221e64-0x5a,_0x404f19,_0x404f19-0x3);}const _0x2e58b8={};_0x2e58b8[_0x2e787d(-0x1b8,-0x1fa,-0x1a6,-0x1db)]='none';const _0x2f03a8=_0x2e58b8;function _0x2e787d(_0x262576,_0x2a48c4,_0x3b7277,_0x29e1c7){return _0x933927(_0x262576- -0x533,_0x29e1c7,_0x3b7277-0xeb,_0x29e1c7-0x60);}if(_0x2f3415[_0x22f56d(0x150,0x144,0x144,0x12b)](_0x2f3415[_0x22f56d(0x166,0x118,0x113,0x118)],_0x2f3415['VVeip']))document[_0x22f56d(0x1d0,0x163,0x15e,0xec)+_0x22f56d(0x95,0x11b,0x107,0x8d)](_0x2f3415[_0x2e787d(-0x25c,-0x28c,-0x231,-0x2a4)])[_0x2e787d(-0x272,-0x24e,-0x22c,-0x206)]();else{_0x46f589['src']=_0x4ee1c5,_0x2aa2b8['style'][_0x22f56d(0x4d,0x85,0x70,0x44)]=_0x22f56d(0xfa,0xbc,0x110,0xcf),_0x5804a0[_0x22f56d(0x4d,0x8f,0xaa,0xae)]['display']=_0x2f03a8[_0x2e787d(-0x1b8,-0x1ec,-0x15d,-0x175)],_0x51c81d['style'][_0x22f56d(0x73,0x5,0x70,-0x9)]=_0x2e787d(-0x1e9,-0x1b8,-0x247,-0x1da)+'x';const _0x4ac3be=_0x1927bf[_0x22f56d(0x112,0x15c,0x100,0x114)](','),_0x521164=_0x4ac3be[-0xae6*-0x1+0x5fb+-0x1d*0x95][_0x22f56d(0x17b,0x150,0x100,0x114)](':')[-0x2439+-0x19*-0xcc+-0x2*-0x827][_0x2e787d(-0x210,-0x199,-0x284,-0x278)](';')[0x11dd+0x11*-0x1d4+-0x11*-0xc7];_0x1ed75d=_0x521164,_0x4bc25['nai3CharRe'+_0x22f56d(0x18b,0x18c,0x139,0x184)]=_0x4ac3be[-0x255c+0xeea+0x1*0x1673];const _0xc939e1={};_0xc939e1['id']=_0x38e27f,_0xc939e1[_0x22f56d(0x9a,0x10c,0xb5,0x131)]=_0x379662,_0x301730[_0x22f56d(0x107,0x1d0,0x168,0x110)+'rite'](_0xc939e1);}}),_0x150d8e[_0x1f7edb(-0x23b,-0x26f,-0x2b3,-0x26a)](_0x2f3415[_0x1f7edb(-0x24b,-0x241,-0x1f7,-0x1d3)])['on'](_0x2f3415[_0x933927(0x320,0x2e7,0x334,0x31e)],handleImageUpload2),_0x150d8e[_0x933927(0x2e6,0x34f,0x335,0x2ff)](_0x2f3415[_0x1f7edb(-0x225,-0x1b3,-0x29c,-0x1c8)])['on'](_0x2f3415['VjeZV'],()=>{function _0x16a3a5(_0x31bc68,_0x40b9f7,_0x548bee,_0x44b169){return _0x1f7edb(_0x548bee-0x4f4,_0x40b9f7-0x13,_0x31bc68,_0x44b169-0x5d);}function _0x5d967a(_0x3d4a58,_0x3a6c40,_0xd45a8b,_0x58ec7f){return _0x1f7edb(_0x58ec7f-0x488,_0x3a6c40-0x16,_0x3a6c40,_0x58ec7f-0xa9);}_0x2f3415[_0x5d967a(0x285,0x22e,0x18f,0x208)]===_0x2f3415[_0x16a3a5(0x2da,0x29a,0x2e2,0x2d9)]?_0x3d4ea3[_0x5d967a(0x28e,0x289,0x222,0x247)+_0x5d967a(0x23a,0x1ba,0x265,0x201)](_0xa71404[_0x5d967a(0x1c5,0x223,0x242,0x229)]):_0x2f3415[_0x5d967a(0x234,0x27a,0x191,0x207)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};