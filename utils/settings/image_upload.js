(function(_0x542a21,_0x24726e){function _0x30d8de(_0x544368,_0x1037dd,_0x47aaea,_0x1ec6ee){return _0x56b9(_0x47aaea-0x1a4,_0x1037dd);}const _0x322677=_0x542a21();function _0x4072bd(_0x336d92,_0x6fa7db,_0x3bd1ec,_0xd99559){return _0x56b9(_0x6fa7db- -0x24d,_0x336d92);}while(!![]){try{const _0x10bf59=parseInt(_0x30d8de(0x38a,0x41c,0x3cc,0x432))/(-0xbd2+0x78*0x4c+-0x9*0x2a5)+parseInt(_0x4072bd(0x42,0x8e,0xc5,0x45))/(-0xb1*0x5+0x1*0x16e1+-0x163*0xe)*(-parseInt(_0x4072bd(0x9d,0x7a,0x96,0x18))/(0x1*-0x1367+0x1224+0x146))+-parseInt(_0x4072bd(0x41,-0xa,-0x25,-0x40))/(-0x1*0x84b+0x18bd+-0x106e)*(parseInt(_0x30d8de(0x477,0x4a1,0x429,0x3c2))/(-0xaaf+-0x33b*-0x2+-0x2*-0x21f))+parseInt(_0x30d8de(0x3d2,0x40c,0x3dd,0x42f))/(-0x1e54+-0x126c+0x30c6)*(parseInt(_0x30d8de(0x457,0x4c7,0x482,0x488))/(0x1*-0x1915+-0x3*-0x9ef+-0x4b1))+-parseInt(_0x30d8de(0x389,0x389,0x400,0x3b7))/(-0x419*0x3+-0x2352+0x2fa5)+-parseInt(_0x4072bd(0x2b,-0x15,0x2f,0x45))/(0xd*0x1f2+0x1ce8+-0x3629)*(parseInt(_0x4072bd(-0x2d,-0x41,-0x43,-0x98))/(0x74c+0x14da+-0x1c1c))+-parseInt(_0x4072bd(-0x5f,-0x43,-0x59,0x8))/(-0x10f2+-0x1fb*-0x9+-0xd6)*(-parseInt(_0x4072bd(-0x5e,-0x16,-0x51,-0x73))/(0x6*-0x3b9+0x1fbb+-0x959));if(_0x10bf59===_0x24726e)break;else _0x322677['push'](_0x322677['shift']());}catch(_0x142e8a){_0x322677['push'](_0x322677['shift']());}}}(_0x1525,0x1ce89*-0x2+0x7cbba+0x14*0x4e98));const _0x94796=(function(){const _0xfd7fb7={};function _0x464d65(_0x31c868,_0x36bd86,_0x39dfe5,_0x132dcc){return _0x56b9(_0x132dcc-0x3dc,_0x36bd86);}_0xfd7fb7[_0x4ddff7(0x136,0x1ad,0x19f,0xda)]='KElnA',_0xfd7fb7[_0x4ddff7(0xd8,0x70,0x103,0x111)]=_0x4ddff7(0x109,0x110,0xb8,0x144)+_0x464d65(0x678,0x61e,0x6c6,0x673)+_0x464d65(0x655,0x611,0x640,0x5e1),_0xfd7fb7['PqxNs']=function(_0x9654d4,_0x2aefb9){return _0x9654d4===_0x2aefb9;},_0xfd7fb7['JQWay']=_0x4ddff7(0x10b,0x155,0xfd,0x17c);function _0x4ddff7(_0x55c385,_0x538de1,_0x263d9e,_0x34cf5b){return _0x56b9(_0x55c385- -0x1b1,_0x34cf5b);}const _0x9e576b=_0xfd7fb7;let _0x342e18=!![];return function(_0x310fef,_0x2048da){function _0x29812b(_0x46e35f,_0x34898b,_0x50871c,_0x334a91){return _0x464d65(_0x46e35f-0x5b,_0x50871c,_0x50871c-0x1aa,_0x34898b- -0x63f);}function _0x3fea55(_0x32b89d,_0x1f3dd2,_0x34a412,_0x2dafad){return _0x464d65(_0x32b89d-0x128,_0x2dafad,_0x34a412-0x12e,_0x34a412- -0x242);}const _0x2cc6e3={};_0x2cc6e3[_0x3fea55(0x316,0x376,0x38a,0x313)]=_0x9e576b[_0x29812b(0xa6,0x26,0x98,0x96)];const _0x19ae0d=_0x2cc6e3;if(_0x9e576b['PqxNs']('GKkul',_0x9e576b[_0x29812b(-0x1,-0x46,-0x71,-0x9d)]))_0x3b258b[_0x3fea55(0x489,0x47d,0x47d,0x4a8)+_0x3fea55(0x3e5,0x45d,0x44f,0x46d)](_0x19ae0d[_0x3fea55(0x329,0x381,0x38a,0x337)])['click']();else{const _0x8035fd=_0x342e18?function(){function _0x51776d(_0x2346bf,_0x1d61c1,_0x5f3923,_0xef51fa){return _0x3fea55(_0x2346bf-0x8f,_0x1d61c1-0xd1,_0x1d61c1- -0x45e,_0x2346bf);}function _0x3b7197(_0x41ff4a,_0x11dc72,_0x53dd37,_0x25b325){return _0x29812b(_0x41ff4a-0x9e,_0x25b325-0x305,_0x53dd37,_0x25b325-0x9);}if(_0x9e576b[_0x51776d(-0x3a,0x23,0x1a,-0x16)]!==_0x9e576b['nceHM'])_0x3f27f1[_0x3b7197(0x3b7,0x371,0x359,0x385)+_0x51776d(-0x7c,-0xf,-0x58,-0x40)](_0x51776d(-0x5,-0xa,0x30,0x39)+'2')[_0x51776d(0xb,-0x38,0x5,-0x7d)]();else{if(_0x2048da){const _0x224ebf=_0x2048da['apply'](_0x310fef,arguments);return _0x2048da=null,_0x224ebf;}}}:function(){};return _0x342e18=![],_0x8035fd;}};}()),_0x55b707=_0x94796(this,function(){const _0x1545a4={};function _0x1da8e4(_0x5a49af,_0x547b07,_0x2be6a1,_0x53eca4){return _0x56b9(_0x547b07- -0x2,_0x2be6a1);}_0x1545a4[_0x5857c1(-0x19,-0x7,0x8,0xa)]=_0x1da8e4(0x1ac,0x20e,0x1b7,0x1f6)+'+$';const _0x41b25a=_0x1545a4;function _0x5857c1(_0x5bf4af,_0x287443,_0x46268e,_0x489ce5){return _0x56b9(_0x46268e- -0x294,_0x5bf4af);}return _0x55b707['toString']()[_0x1da8e4(0x2cf,0x2a1,0x2e4,0x30e)](_0x41b25a[_0x5857c1(-0x4b,0x63,0x8,-0x2d)])[_0x5857c1(-0x3b,0xa,-0x25,0x4f)]()[_0x5857c1(-0x86,-0xbc,-0x3f,-0xaf)+'r'](_0x55b707)['search'](_0x5857c1(-0xff,-0xd8,-0x84,-0xd9)+'+$');});function _0x1525(){const _0x101d5f=['C3r5Bgu','tNvwyw8','tg9HzgvKienVBq','zKHWEum','EvLfsLC','wwrZDfC','tLrnqw8','vMH3Eg8','BMX5','A2fVDhvWAwfU','zxCTy29UDgfPBG','zMLUza','uxLWCKi','vxfJDLO','z2vFBM92zwXHAq','C2vYDMvYrMLSzq','ienVBwz5vuKGAq','6zsz6k+V6k+M5OofoG','nufQtxDZuW','rxjYB3iGBg9Hza','ssbbueNLNldLNydJGii','y3jLyxrLt2jQzq','u3z0BKm','vvbxDLa','yMXVyG','y2XPy2S','i25VDMvSywKTCW','AeTOvMK','CMvHzefZrgf0yq','y2fJAguGzM9YBq','vvjm','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','rhrXD2S','AM54sfq','zxnZAw5Nie5VDG','Bw92zs1PBwfNzq','x25HAv9JAgfYxW','zwXLy3qTy2HHCG','y2fJAgvFBM92zq','C3rVCMvszwfKvW','AKzSCKK','BvbNs2W','C3LOz1O','DMv3y2y','swTtA0C','zNLvssbPBwfNzq','CL9Yzwy','yNrU','C2vHCMnO','mhW0Fdj8mxWZ','DgfYz2v0','zxiGlNn0lwnOyq','D0zetuO','zgf0yq','m3WYFdb8mxW0Fa','C3rVCMvszwfKtW','uuLcuha','rePdrvi','Df9UB3zLBgfP','y3rvuKW','yLDhwuW','DhfeDxC','AgfYlxjLzI1PBq','shrwwgK','z3jVDNe','sgvOr2i','qNLjza','lwj0BG','DKnYyKm','tMfTzq','wgH6Cw0','Aw1Hz2vjBNb1Da','AwjLigLTywDLoG','EhvuwKy','uvvXzvy','EhfjBKi','y29TzNL1AwnHBG','CMvMlwLTywDLlq','u2LnDhy','B1vgEem','BgfPx3zPyMvFDa','DLzRt0q','DtGTAw1Hz2uTCa','zxj2DNq','m2DzwMzqvq','CIaUC3qTy2HHDa','ihjLlxvWBg9Hza','x25VDMvSywK','uK5rwxK','CMvMigLTywDLoG','zMPnCgu','uxDKsg4','C3rVCMvezwXLDa','i2LTywDLsw5WDq','z2LgD3y','BwfNzs1WCMv2Aq','yMXVyJO','AfbABLC','ugnkqvm','ywDLoG','z05OBKq','CMXcweO','v1LhCKG','EefOCKq','mtKXmZGWnevXvvjQwq','zvvVtui','Dgv4Da','ntGXq3fpq2Dh','Aw5SAw5LlwzSzq','igzYB20GB2XKia','zMDNuw0','C3jJ','z2v0rwXLBwvUDa','ie5VDMvSquKGqW','CML0zq','vhLYz3K','BMnLse0','vMXrALO','BM92zwXHAs1Yzq','ENfbDKq','zgf0ytPPBwfNzq','CMfUC2zLCL9PBq','B3bLBKrc','vLLeveq','yMXVy2S','DKzWwNO','vgnIvfu','r1LHA2q','BM9Uzq','ywDL','yM1SsMG','D21YtNO','yxbWzw5K','rxjYB3iGChjVyW','C3rHCNrZv2L0Aa','ignHy2HLihrVia','x3jLzG','i25VDMvSywKTyW','z2uY','6k+M5OofoIa','yuPOu3u','Ae9LEgq','tu1ezvG','BMfTzq','i2nVBwz5DwKTAq','y2LIy2C','Awnisui','CMvM','y2fJAgvFy29TzG','BMfPm1zPyMvuCG','wvv0t28','Efrmu2S','mtC3ndneAKzZrfe','zxjYB3i','mteYndmWwuziB056','s3f1zNC','sfbkz0q','Dhu4lwLTywDLlq','kcGOlISPkYKRkq','zMLSzxm','A0LPwxC','zw1VDMuTy2HHCG','wKnfwxy','zMXLEa','A0XgquS','vfLVrfe','rKPeq2C','zxrKEwO','ihrVihvWzgf0zq','BhfYAMW','6k+35ywi6k6+572Uq29TzNLv','sLfxyxK','A3bkvgK','5zU+54Mh5Ase55cg5AsX6lsLoIa','rhjYBfi','B255vwm','ExvPx3jLzL9PBq','suHnwee','DMT0yvO','zKPoEgC','5lUo57Yt5A2y5yQG6l29q29TzNK','ChjLDMLLD0LTyq','mte1mZC2yNPUvwj1','D2Pksfq','CfvxzKi','Aw5NignHy2HLza','txvWuxa','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','DgjRy1i','BMfPm0nOyxjszq','BwvZC2fNzq','uuXcD3i','yw5ZzMvYsw1HzW','zs1IDg4','C3rYAw5NAwz5','zgLZCgXHEq','Bwv0Ag9K','mJC4nZzVAMreueK','odaXELnxD1fZ','mtC5mdrruxbWEeO','i25VDMvSywKTAq','zwXbssbPBwfNzq','AxfxDhK','vevds1e','Df9UywLFy2HHCG','B25SB2fKzw5K','i2nVBwz5DwKTCW','CMfNBNq','CMv2B2TLt2jQzq','nZq1mdy0u1LOrhPR','q2vtz2e','AgTQuNK','ie5VDMvSquKGvG','t3zTEM4','A1bXrgy','C3bSAxq','q2HPwu4','Aw1Hz2uVCg5N','Egv0CMu','qvzvCwS','DhjPBq','ywDLlxbYzxzPzq','DY1JB250ywLUzq','CejJzMW','BfzPswC','Dg9Y','rePHD3e','y29UC3rYDwn0BW','u2jtwLq','rK1HqKS','zKLTywDL','i25VDMvSywKTCG','u0T6rNu','zuXYrxG','mtaZmtGXmtjeuM5hwwK','Bufqvue','igzYB20Gy2fJAa','BwfNztO','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','uhLjs0i','BgfPx2nOyxjFCG','wNnKtxC','CM1HDc4','BfrVBxi','5zMO6l+u5zUE5PwW5O2UoIa','zw5LrK4','zw1VDMuTAw1HzW','ue9tva','EKLHDfa','m3WYFdf8mhW0','CxvLCNLtzwXLyW','ywDjB1K','y2HHBMDL','Dg9tDhjPBMC','lxjLzI1PBwfNzq','reLSy3O','Bg9N'];_0x1525=function(){return _0x101d5f;};return _0x1525();}_0x55b707();function _0x20e3f9(_0x3f3817,_0x44eacd,_0x5354e9,_0x3b822b){return _0x56b9(_0x3f3817-0x84,_0x5354e9);}import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x20e3f9(0x31d,0x331,0x395,0x356)+_0x105b52(0x54c,0x555,0x53c,0x50a)+_0x20e3f9(0x370,0x312,0x3d2,0x37c)+_0x105b52(0x47c,0x4c6,0x406,0x42c),NAI_CHAR_REF_CACHE_KEY=_0x105b52(0x522,0x548,0x4fd,0x586)+_0x20e3f9(0x2e6,0x26b,0x2a1,0x307)+'ef_image',COMFYUI_REF_CACHE_KEY=_0x105b52(0x48f,0x43d,0x43d,0x4c9)+_0x105b52(0x4ab,0x47c,0x4e0,0x471)+_0x20e3f9(0x277,0x271,0x204,0x277);let nai3VibeTransferImageMimeType=_0x105b52(0x4d4,0x45f,0x4d0,0x467),nai3CharRefImageMimeType=_0x105b52(0x4d4,0x52a,0x485,0x4fd),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x33a772){const _0x4c6e46={};_0x4c6e46[_0x1c9d5c(-0xeb,-0xdf,-0xf6,-0x149)]=_0x1c9d5c(-0xea,-0x124,-0x132,-0x176)+_0x1c9d5c(-0x119,-0xdc,-0xd8,-0xf5),_0x4c6e46[_0x1c9d5c(-0x7e,-0xc1,-0x78,-0x4c)]='novelai-re'+'move-image'+_0x452712(-0xd4,-0xb5,-0x10a,-0xbe),_0x4c6e46[_0x1c9d5c(-0xe8,-0xf6,-0x14c,-0x149)]=_0x1c9d5c(-0xc8,0x10,-0x6e,-0xcb),_0x4c6e46[_0x1c9d5c(-0x36,-0xb7,-0xb2,-0x129)]=_0x452712(-0x198,-0x20a,-0x139,-0x1d4);function _0x1c9d5c(_0x210443,_0x428489,_0x390d13,_0x3a76b8){return _0x105b52(_0x390d13- -0x5e2,_0x210443,_0x390d13-0xec,_0x3a76b8-0x24);}_0x4c6e46[_0x452712(-0x13e,-0x11b,-0x191,-0x154)]=_0x452712(-0xab,-0xe3,-0xa4,-0x5a)+'x',_0x4c6e46['aJhSu']=_0x1c9d5c(-0x132,-0x113,-0xb5,-0x74);const _0x23b7ee=_0x4c6e46,_0x591319=document[_0x452712(-0xa7,-0x2b,-0x27,-0xc8)+_0x1c9d5c(-0x42,-0xd9,-0xa4,-0x3a)](_0x23b7ee['ZsdMw']),_0x5bec8a=document[_0x1c9d5c(-0xc4,-0x81,-0xed,-0x89)+_0x452712(-0x137,-0x1b2,-0x175,-0x149)](_0x452712(-0x150,-0x19d,-0x128,-0x170)+_0x1c9d5c(-0x1b,-0x8,-0x87,-0xc6)+_0x452712(-0x10d,-0xde,-0x150,-0xd8)+'er\x20.st-cha'+_0x1c9d5c(-0x1b2,-0x124,-0x14a,-0xd8)+'placeholde'+'r');function _0x452712(_0x48b565,_0x2061b5,_0x4ec508,_0x349f7b){return _0x20e3f9(_0x48b565- -0x40e,_0x2061b5-0x1be,_0x349f7b,_0x349f7b-0x123);}const _0x421bb9=document[_0x1c9d5c(-0x6b,-0xb8,-0x76,-0x99)+'ById'](_0x23b7ee[_0x452712(-0xa9,-0xe0,-0x7e,-0xe6)]);if(_0x33a772&&_0x33a772[_0x452712(-0x192,-0x172,-0x153,-0x1a3)](_0x23b7ee['Kqufw'])){_0x591319[_0x452712(-0xa8,-0x123,-0x7b,-0x4b)]=_0x33a772,_0x591319[_0x1c9d5c(-0xb4,-0xaf,-0xe6,-0x105)][_0x452712(-0x155,-0x14e,-0x160,-0x1a4)]=_0x1c9d5c(-0x14c,-0x19f,-0x16b,-0x18e),_0x5bec8a[_0x1c9d5c(-0x6a,-0xb8,-0xe6,-0x133)][_0x1c9d5c(-0x13e,-0x175,-0x124,-0xe3)]=_0x23b7ee['wFDMJ'],_0x421bb9[_0x452712(-0x117,-0x155,-0x140,-0x18a)][_0x1c9d5c(-0x10b,-0x13d,-0x124,-0x14b)]=_0x23b7ee[_0x1c9d5c(-0x17b,-0x125,-0x10d,-0x105)];const _0x49ee8c=_0x33a772[_0x1c9d5c(-0xc0,-0x113,-0x110,-0xc9)](','),_0x37bb25=_0x49ee8c[-0xe13+0x22b8+-0x421*0x5]['split'](':')[-0xc2a+0xeed+-0x2c2][_0x1c9d5c(-0xb0,-0xd5,-0x110,-0xe4)](';')[0x466*0x1+-0xf2c+0xc5*0xe];nai3VibeTransferImageMimeType=_0x37bb25,window[_0x1c9d5c(-0xdb,-0x1b8,-0x152,-0xeb)+_0x452712(-0x158,-0x139,-0x17a,-0x17e)+'e']=_0x49ee8c[-0xaa3+-0x193+0xc37];const _0x53e764={};_0x53e764['id']=NAI_VIBE_CACHE_KEY,_0x53e764[_0x452712(-0xe2,-0xc9,-0x151,-0x82)]=_0x33a772,dbs[_0x452712(-0xf0,-0x118,-0x128,-0x13a)+'rite'](_0x53e764);}else{const _0x57e21d=_0x23b7ee[_0x1c9d5c(-0x11f,-0x12f,-0x15b,-0x11e)][_0x1c9d5c(-0x15f,-0x126,-0x110,-0x17b)]('|');let _0x4d0a36=-0x6bb+0x134f+-0xc94;while(!![]){switch(_0x57e21d[_0x4d0a36++]){case'0':_0x591319['src']='';continue;case'1':_0x421bb9['style'][_0x1c9d5c(-0x134,-0x185,-0x124,-0x17d)]=_0x23b7ee[_0x1c9d5c(-0x93,-0x36,-0xb2,-0xfa)];continue;case'2':_0x5bec8a[_0x452712(-0x117,-0x10f,-0xef,-0x12a)]['display']='flex';continue;case'3':window[_0x452712(-0x183,-0x12e,-0x19f,-0x18b)+_0x452712(-0x158,-0x19e,-0x14b,-0x19e)+'e']=null;continue;case'4':_0x591319[_0x452712(-0x117,-0x100,-0xbd,-0x17a)][_0x1c9d5c(-0x1a2,-0xb9,-0x124,-0x111)]=_0x23b7ee[_0x1c9d5c(-0x51,-0xe7,-0xb2,-0xf2)];continue;}break;}}}function removeNovelaiImage(){function _0x3aad49(_0x5f316e,_0xe762c0,_0x5539a8,_0x3a592e){return _0x20e3f9(_0xe762c0-0x27c,_0xe762c0-0x171,_0x5539a8,_0x3a592e-0x161);}const _0x539f56={'lViIg':function(_0x20bf5c,_0x43cae4){return _0x20bf5c(_0x43cae4);}};_0x539f56[_0x3aad49(0x502,0x552,0x5a0,0x5b8)](updateNovelaiImagePreview,null);function _0x47d149(_0xb706a5,_0x2bcbe2,_0x3ce4b6,_0x1b1cc7){return _0x20e3f9(_0xb706a5- -0x11b,_0x2bcbe2-0x181,_0x3ce4b6,_0x1b1cc7-0x1dd);}dbs[_0x47d149(0x238,0x296,0x20f,0x269)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x4cd61c){function _0x1e0db9(_0x2f536e,_0x19cdbe,_0x269c9e,_0x447e54){return _0x105b52(_0x269c9e- -0x5f,_0x447e54,_0x269c9e-0x33,_0x447e54-0x44);}const _0x128317={'hPZnW':function(_0x3a2d27,_0x3dc612){return _0x3a2d27(_0x3dc612);},'jFlrI':_0xf8758d(-0x192,-0xb8,-0x131,-0x14d)+_0xf8758d(-0xc8,-0xb2,-0xc6,-0xe7),'ZJIwR':function(_0x5e38f0){return _0x5e38f0();},'IHMXA':function(_0x221295,_0x5634ef){return _0x221295===_0x5634ef;},'Vhwxo':_0xf8758d(-0x110,-0x183,-0x139,-0x16d),'ntrPS':function(_0x54e36f,_0x5cac3b,_0x40c34e){return _0x54e36f(_0x5cac3b,_0x40c34e);},'eneFN':function(_0x2568af,_0x2279e3){return _0x2568af(_0x2279e3);},'fJNxg':_0xf8758d(-0xf2,-0x1c1,-0x156,-0x142)+_0x1e0db9(0x538,0x4ac,0x4bf,0x533)+_0xf8758d(-0x134,-0x157,-0x112,-0x9d)+':','DIlcz':function(_0x3c41c8,_0x45eebe){return _0x3c41c8(_0x45eebe);},'vVkOD':function(_0xb60383,_0x34ea7a){return _0xb60383+_0x34ea7a;}},_0x3fb8d4=_0x4cd61c['target']['files'][-0x2*-0x725+-0x1*0x978+-0x4d2];if(!_0x3fb8d4)return;function _0xf8758d(_0x12054d,_0x360eec,_0x9b71a2,_0x46b6b8){return _0x20e3f9(_0x9b71a2- -0x3d1,_0x360eec-0x81,_0x360eec,_0x46b6b8-0x16e);}try{if(_0x128317[_0xf8758d(-0x17b,-0x1a1,-0x12a,-0xad)](_0x128317[_0x1e0db9(0x43a,0x446,0x4a4,0x4bd)],_0x128317[_0x1e0db9(0x42f,0x4c5,0x4a4,0x516)])){const _0xcc0932=await _0x128317['ntrPS'](processUploadedImage,_0x3fb8d4,!![]);_0x128317[_0x1e0db9(0x496,0x497,0x491,0x4c0)](updateNovelaiImagePreview,_0xcc0932);}else{_0x128317[_0xf8758d(-0x51,-0xea,-0x79,-0xb8)](_0x484a8b,_0x128317[_0xf8758d(-0xd0,-0xba,-0xb2,-0xa8)]),_0x128317['ZJIwR'](_0x4d0303);return;}}catch(_0x577d45){console[_0xf8758d(-0x14b,-0xf6,-0x142,-0x11d)](_0x128317[_0x1e0db9(0x4cc,0x483,0x44f,0x476)],_0x577d45),_0x128317[_0xf8758d(-0x124,-0xa1,-0xdc,-0x11c)](alert,_0x128317[_0xf8758d(-0xfd,-0x25,-0x89,-0x76)](_0xf8758d(-0x160,-0xce,-0x12e,-0xf3),_0x577d45[_0x1e0db9(0x3dc,0x447,0x45a,0x3f1)]));}}function updateNovelaiCharRefImagePreview(_0xb78dfd){const _0x3aa97b={};_0x3aa97b[_0x7c1bf1(0x46e,0x48e,0x406,0x459)]=_0x7c1bf1(0x440,0x41c,0x42d,0x43c)+'ge_nai_cha'+_0x7c1bf1(0x46f,0x4dc,0x45f,0x4b6),_0x3aa97b['ragnt']=_0x7c1bf1(0x390,0x402,0x45b,0x410)+_0x31f43c(0x417,0x46d,0x409,0x3cd)+_0x7c1bf1(0x42e,0x407,0x493,0x464)+_0x31f43c(0x3cd,0x3a5,0x3a8,0x3a7)+_0x31f43c(0x458,0x41a,0x420,0x3fe)+_0x31f43c(0x466,0x43e,0x41d,0x48a)+'laceholder';function _0x31f43c(_0x2ee6e8,_0x440a74,_0x364ec0,_0x17eb8f){return _0x105b52(_0x364ec0- -0x131,_0x17eb8f,_0x364ec0-0xd3,_0x17eb8f-0x7c);}_0x3aa97b['QLBwr']=_0x31f43c(0x43e,0x455,0x443,0x43a),_0x3aa97b[_0x7c1bf1(0x45c,0x38e,0x439,0x40a)]=_0x31f43c(0x319,0x2d7,0x346,0x2e9),_0x3aa97b[_0x31f43c(0x42a,0x45b,0x3e2,0x38f)]='none',_0x3aa97b[_0x7c1bf1(0x4d4,0x504,0x4c5,0x4ea)]=_0x31f43c(0x411,0x3c5,0x437,0x420)+'x',_0x3aa97b[_0x7c1bf1(0x4b8,0x3dc,0x3e6,0x452)]=_0x31f43c(0x38a,0x2ef,0x36d,0x375);function _0x7c1bf1(_0x2d11f5,_0x3c3388,_0x3dd859,_0x5cef49){return _0x20e3f9(_0x5cef49-0x191,_0x3c3388-0x13a,_0x3dd859,_0x5cef49-0xa9);}const _0x59c3b7=_0x3aa97b,_0x58eb44=document[_0x31f43c(0x485,0x412,0x43b,0x43f)+_0x7c1bf1(0x44c,0x4ff,0x50b,0x4ca)](_0x59c3b7[_0x7c1bf1(0x494,0x3e7,0x4b7,0x459)]),_0x1b5619=document[_0x31f43c(0x358,0x390,0x3c4,0x38c)+_0x7c1bf1(0x49e,0x4b1,0x3f8,0x468)](_0x59c3b7[_0x31f43c(0x3ef,0x3ef,0x399,0x414)]),_0x4a9359=document['getElement'+_0x7c1bf1(0x4c7,0x44a,0x488,0x4ca)](_0x31f43c(0x472,0x465,0x441,0x49a)+'move-char-'+_0x31f43c(0x486,0x45c,0x418,0x425)+_0x7c1bf1(0x4df,0x450,0x4ca,0x4b7));if(_0xb78dfd&&_0xb78dfd[_0x7c1bf1(0x3bc,0x445,0x489,0x40d)](_0x59c3b7[_0x7c1bf1(0x492,0x3fd,0x40f,0x446)])){_0x58eb44['src']=_0xb78dfd,_0x58eb44['style'][_0x31f43c(0x318,0x401,0x38d,0x40e)]=_0x59c3b7[_0x31f43c(0x397,0x3c3,0x34d,0x351)],_0x1b5619[_0x7c1bf1(0x4f0,0x45b,0x43d,0x488)][_0x31f43c(0x406,0x35b,0x38d,0x33a)]=_0x59c3b7[_0x31f43c(0x429,0x377,0x3e2,0x368)],_0x4a9359[_0x7c1bf1(0x4c1,0x458,0x449,0x488)]['display']=_0x59c3b7[_0x7c1bf1(0x545,0x479,0x4b1,0x4ea)];const _0x1ad4e8=_0xb78dfd[_0x31f43c(0x3e1,0x383,0x3a1,0x3d5)](','),_0x53f07a=_0x1ad4e8[0x874+0x132a+-0x1b9e][_0x7c1bf1(0x410,0x433,0x4b3,0x45e)](':')[-0x3*-0x9e1+-0x4e5+-0x18bd]['split'](';')[-0x2*-0xd6d+0x488*0x5+0x18c1*-0x2];nai3CharRefImageMimeType=_0x53f07a,window[_0x7c1bf1(0x4aa,0x4be,0x46b,0x444)+_0x31f43c(0x3b2,0x3ef,0x3b0,0x383)]=_0x1ad4e8[0x142f*0x1+0x1bda+-0x3008];const _0x102daa={};_0x102daa['id']=NAI_CHAR_REF_CACHE_KEY,_0x102daa[_0x31f43c(0x3fc,0x3fa,0x400,0x3c7)]=_0xb78dfd,dbs[_0x7c1bf1(0x4f4,0x4af,0x4c5,0x4af)+_0x31f43c(0x439,0x46e,0x43d,0x424)](_0x102daa);}else _0x58eb44[_0x31f43c(0x443,0x3ed,0x43a,0x42f)]='',_0x58eb44[_0x7c1bf1(0x4b1,0x4f3,0x4c9,0x488)]['display']=_0x59c3b7[_0x7c1bf1(0x4a9,0x442,0x49a,0x49f)],_0x1b5619[_0x7c1bf1(0x508,0x42f,0x4ad,0x488)][_0x7c1bf1(0x3d2,0x41c,0x422,0x44a)]=_0x59c3b7[_0x7c1bf1(0x490,0x450,0x3d2,0x452)],_0x4a9359['style'][_0x31f43c(0x35a,0x3ee,0x38d,0x338)]=_0x59c3b7[_0x7c1bf1(0x459,0x420,0x4cb,0x49f)],window[_0x7c1bf1(0x46e,0x45f,0x3c7,0x444)+'fImage']=null;}function removeNovelaiCharRefImage(){function _0x4c7002(_0xd526eb,_0x3069a7,_0x1cccfe,_0x1f7063){return _0x105b52(_0x1cccfe- -0x53b,_0x3069a7,_0x1cccfe-0xe1,_0x1f7063-0x1ca);}const _0x406595={'DJawq':function(_0x3e1fc5,_0x460f05){return _0x3e1fc5(_0x460f05);}};_0x406595[_0x4c7002(-0x52,0x12,-0x5e,-0x7f)](updateNovelaiCharRefImagePreview,null),dbs['storeDelet'+'e'](NAI_CHAR_REF_CACHE_KEY);}function _0x56b9(_0x3754b0,_0x1036a8){_0x3754b0=_0x3754b0-(0x14d3*0x1+0x1b95+-0x2e7c);const _0x19cacb=_0x1525();let _0x35ab8b=_0x19cacb[_0x3754b0];if(_0x56b9['qSSiVO']===undefined){var _0x5239e1=function(_0x350960){const _0x311dcf='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x166625='',_0x2c56f5='',_0x17a0ef=_0x166625+_0x5239e1;for(let _0x39bdca=0x1ffc*0x1+-0xaf9+0x3*-0x701,_0x4f2743,_0x50e88d,_0x1513a4=0x1*-0x2219+-0x15bb+0x37d4;_0x50e88d=_0x350960['charAt'](_0x1513a4++);~_0x50e88d&&(_0x4f2743=_0x39bdca%(0x5b7+0x1*0xe3c+-0x237*0x9)?_0x4f2743*(-0x1836+-0x21ed+0x3a63)+_0x50e88d:_0x50e88d,_0x39bdca++%(0x2641+0x3f9*-0x2+-0x1e4b))?_0x166625+=_0x17a0ef['charCodeAt'](_0x1513a4+(-0x1a2c+-0x3*-0x246+-0x49*-0x44))-(0x2208+0x1b2e+-0x3*0x1464)!==-0x238*-0x5+-0x2284+0x176c*0x1?String['fromCharCode'](-0x223c+-0x3*-0x641+0x1078&_0x4f2743>>(-(0x14d0+-0x7*-0xec+0x1b42*-0x1)*_0x39bdca&0xd5a+-0xde9*0x1+0x95)):_0x39bdca:0x1030+0x1f3+-0x1223){_0x50e88d=_0x311dcf['indexOf'](_0x50e88d);}for(let _0x3849e0=-0x198e+0x5*-0x1ff+0x2389,_0x489137=_0x166625['length'];_0x3849e0<_0x489137;_0x3849e0++){_0x2c56f5+='%'+('00'+_0x166625['charCodeAt'](_0x3849e0)['toString'](-0x61*-0x25+0x18c7*-0x1+0xa*0x115))['slice'](-(0xa1*-0x1d+-0x1*-0xcd+0x1172));}return decodeURIComponent(_0x2c56f5);};_0x56b9['gryKOz']=_0x5239e1,_0x56b9['vPKzNV']={},_0x56b9['qSSiVO']=!![];}const _0x4bdc52=_0x19cacb[-0x10f8+-0x9dc+-0x194*-0x11],_0x4bf5d1=_0x3754b0+_0x4bdc52,_0x35465c=_0x56b9['vPKzNV'][_0x4bf5d1];if(!_0x35465c){const _0x227c03=function(_0xf65902){this['qCETTt']=_0xf65902,this['mZRNgS']=[-0x251a+0x9bc+0xd*0x21b,-0x2*0x117e+-0x243+0x253f,-0x6e0*-0x1+0x2613+-0x2cf3],this['ddmaOf']=function(){return'newState';},this['KlCvWa']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ZYFkuP']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x227c03['prototype']['dmRksi']=function(){const _0x3399fd=new RegExp(this['KlCvWa']+this['ZYFkuP']),_0x31c665=_0x3399fd['test'](this['ddmaOf']['toString']())?--this['mZRNgS'][-0x1*0x1c3+-0x829*-0x1+-0x665]:--this['mZRNgS'][0x14*0x5+-0x2165+-0x4b7*-0x7];return this['eFTjlE'](_0x31c665);},_0x227c03['prototype']['eFTjlE']=function(_0x86a092){if(!Boolean(~_0x86a092))return _0x86a092;return this['FaVfuN'](this['qCETTt']);},_0x227c03['prototype']['FaVfuN']=function(_0x35af8e){for(let _0x2cdb30=0x2d3*0xd+0x5*-0x45+-0x2*0x11af,_0x34c9a7=this['mZRNgS']['length'];_0x2cdb30<_0x34c9a7;_0x2cdb30++){this['mZRNgS']['push'](Math['round'](Math['random']())),_0x34c9a7=this['mZRNgS']['length'];}return _0x35af8e(this['mZRNgS'][-0x20b*-0x5+0xc93+-0x16ca]);},new _0x227c03(_0x56b9)['dmRksi'](),_0x35ab8b=_0x56b9['gryKOz'](_0x35ab8b),_0x56b9['vPKzNV'][_0x4bf5d1]=_0x35ab8b;}else _0x35ab8b=_0x35465c;return _0x35ab8b;}async function handleNovelaiCharRefImageUpload(_0x594e84){const _0x55c646={'YdstW':function(_0x5bd953,_0x1a04fe){return _0x5bd953(_0x1a04fe);},'QUqeV':_0x4cd9d5(0x443,0x3fb,0x3c3,0x443)+_0x4cd9d5(0x460,0x499,0x4d1,0x4c0)+'elAI\x20char\x20'+_0x4cd9d5(0x52e,0x4d0,0x53e,0x54b),'DrrlR':function(_0x527527,_0xba8a18){return _0x527527+_0xba8a18;},'iAqea':_0x5589da(0x2cf,0x2b6,0x27a,0x26a)},_0x3e758c=_0x594e84[_0x4cd9d5(0x479,0x4a9,0x4b3,0x4da)][_0x4cd9d5(0x3d0,0x415,0x494,0x47e)][0x107b*-0x1+-0x1b01+0x2b7c];function _0x5589da(_0xdc9068,_0x23c89f,_0x18b778,_0x4cb706){return _0x20e3f9(_0x4cb706- -0x39,_0x23c89f-0x56,_0xdc9068,_0x4cb706-0x1e6);}if(!_0x3e758c)return;function _0x4cd9d5(_0x504641,_0x49e655,_0x90b1ad,_0x46297e){return _0x20e3f9(_0x49e655-0x180,_0x49e655-0x11f,_0x46297e,_0x46297e-0x179);}try{const _0x4e98b8=await _0x55c646[_0x4cd9d5(0x481,0x47c,0x416,0x421)](processUploadedImage,_0x3e758c);_0x55c646[_0x4cd9d5(0x495,0x47c,0x4f4,0x437)](updateNovelaiCharRefImagePreview,_0x4e98b8);}catch(_0xfe75f9){console['error'](_0x55c646[_0x5589da(0x2de,0x386,0x2ab,0x308)],_0xfe75f9),alert(_0x55c646[_0x4cd9d5(0x3b1,0x424,0x3d5,0x46a)](_0x55c646['iAqea'],_0xfe75f9[_0x4cd9d5(0x422,0x434,0x3ce,0x3d6)]));}}function updateComfyUIImagePreview(_0x3d813c){const _0x47e612={};_0x47e612[_0x10fb3a(0x12b,0x15c,0x165,0x1a6)]=_0x10fb3a(0x7b,0x2,0x5c,0xeb)+_0x10fb3a(0x50,0x74,0xb3,0xa3),_0x47e612[_0x5ecead(0x49f,0x523,0x4a4,0x481)]=_0x5ecead(0x412,0x4ab,0x48b,0x490)+_0x5ecead(0x526,0x5b7,0x55b,0x5ba)+_0x5ecead(0x488,0x57b,0x506,0x4c3)+_0x5ecead(0x4f2,0x4e6,0x52f,0x56a)+_0x5ecead(0x4de,0x433,0x498,0x4e4)+'placeholde'+'r',_0x47e612[_0x10fb3a(0x9c,0x8e,0xa7,0x7d)]='comfyui-re'+_0x5ecead(0x546,0x541,0x51f,0x4a6)+_0x10fb3a(0x10a,0x12b,0xa2,0x147),_0x47e612['TYoDQ']=_0x10fb3a(0x127,0x193,0xf2,0x118),_0x47e612[_0x10fb3a(0xca,0x128,0x6e,0xf0)]=function(_0x4a8cf3,_0x10c7cc){return _0x4a8cf3!==_0x10c7cc;},_0x47e612[_0x10fb3a(0x107,0x15a,0x15d,0x15c)]=_0x5ecead(0x4d6,0x4a4,0x477,0x4f0),_0x47e612[_0x5ecead(0x4e5,0x4f2,0x492,0x46b)]=_0x5ecead(0x4ab,0x440,0x47b,0x427);function _0x10fb3a(_0x4343dc,_0x2e422e,_0x1afc8d,_0x186ca0){return _0x20e3f9(_0x4343dc- -0x230,_0x2e422e-0x1c6,_0x1afc8d,_0x186ca0-0x55);}_0x47e612[_0x10fb3a(0x11f,0x13a,0xc1,0x157)]=_0x5ecead(0x5a0,0x532,0x568,0x565)+'x',_0x47e612[_0x5ecead(0x535,0x4f8,0x565,0x4ed)]=_0x5ecead(0x5a3,0x4b3,0x532,0x4d6)+'5',_0x47e612[_0x10fb3a(0x108,0x15e,0xd5,0xc7)]=_0x5ecead(0x4d0,0x422,0x49e,0x46e);const _0x5d7c00=_0x47e612,_0x1dceca=document[_0x10fb3a(0x137,0xfd,0x17e,0xea)+_0x5ecead(0x5ab,0x573,0x53e,0x5b1)](_0x5d7c00['gNhnD']),_0x1eb582=document[_0x5ecead(0x47b,0x506,0x4f5,0x4a2)+'tor'](_0x5d7c00['lqrjl']);function _0x5ecead(_0xdb31c5,_0x2f7096,_0x17b092,_0x2a0f89){return _0x20e3f9(_0x17b092-0x205,_0x2f7096-0x9a,_0xdb31c5,_0x2a0f89-0x14f);}const _0x15562a=document[_0x5ecead(0x50b,0x5e4,0x56c,0x5a6)+_0x5ecead(0x4d0,0x58d,0x53e,0x535)](_0x5d7c00[_0x10fb3a(0x9c,0xd6,0x114,0x93)]);_0x1dceca['src']&&_0x1dceca[_0x5ecead(0x503,0x519,0x56b,0x59a)]['startsWith'](_0x5d7c00[_0x5ecead(0x4d6,0x433,0x4a0,0x51c)])&&_0x5d7c00[_0x5ecead(0x543,0x508,0x4ff,0x4c9)](_0x1dceca[_0x5ecead(0x5d6,0x5a1,0x56b,0x5cc)],_0x3d813c)&&URL[_0x10fb3a(0x96,0xd7,0x93,0xa1)+_0x10fb3a(0x102,0xd4,0x10c,0xad)](_0x1dceca[_0x10fb3a(0x136,0xcc,0x141,0x14d)]);if(_0x3d813c)_0x1dceca['src']=_0x3d813c,_0x1dceca['style'][_0x10fb3a(0x89,0x1b,0xa1,0xb4)]=_0x5d7c00[_0x10fb3a(0x107,0x14f,0x99,0xae)],_0x1eb582[_0x5ecead(0x50e,0x48f,0x4fc,0x56b)][_0x10fb3a(0x89,0xf0,0x7d,0x1f)]=_0x5d7c00[_0x5ecead(0x43b,0x4fb,0x492,0x42f)],_0x15562a[_0x10fb3a(0xc7,0xd7,0xff,0xe5)][_0x10fb3a(0x89,0x109,0xfd,0xbe)]=_0x5d7c00['RNQYy'];else{const _0x441d8e=_0x5d7c00[_0x5ecead(0x561,0x5d4,0x565,0x53d)][_0x5ecead(0x4f5,0x4c3,0x4d2,0x509)]('|');let _0x2a1683=0x2*-0x2ab+-0x664+0xbba;while(!![]){switch(_0x441d8e[_0x2a1683++]){case'0':_0x1eb582[_0x10fb3a(0xc7,0xf1,0x63,0xc7)]['display']=_0x5d7c00[_0x10fb3a(0x108,0x173,0xcb,0x107)];continue;case'1':_0x15562a[_0x5ecead(0x49c,0x549,0x4fc,0x50c)][_0x10fb3a(0x89,0xa3,0xac,0xe2)]=_0x5ecead(0x4c8,0x41b,0x47b,0x4a1);continue;case'2':_0x1dceca[_0x10fb3a(0xc7,0x47,0xa9,0xa6)][_0x5ecead(0x473,0x4c5,0x4be,0x48e)]=_0x5d7c00[_0x10fb3a(0x5d,-0x2,0x71,0x22)];continue;case'3':_0x1dceca['src']='';continue;case'4':window[_0x5ecead(0x51e,0x597,0x548,0x52d)+_0x10fb3a(0xd0,0x14e,0xed,0x63)]=null;continue;case'5':comfyuiImageObjectURL=null;continue;}break;}}}function _0x105b52(_0x48fc2a,_0x28a1a2,_0x5e9a1a,_0x3fcd70){return _0x56b9(_0x48fc2a-0x289,_0x28a1a2);}function removeComfyUIImage(){updateComfyUIImagePreview(null);function _0x5a71a6(_0x5d37de,_0xec6e25,_0x50fcca,_0x50c31f){return _0x105b52(_0x50c31f- -0x297,_0x50fcca,_0x50fcca-0x10c,_0x50c31f-0x1e1);}dbs[_0x5a71a6(0x2f4,0x2f9,0x2cf,0x2c1)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x446028){const _0x1fee50={'vCrbC':_0x60f837(0x15d,0xbd,0xe6,0x113),'vktaZ':_0x60f837(0x119,0xa6,0xea,0xde),'QyprB':'inline-fle'+'x','FGOCn':function(_0x2044ab){return _0x2044ab();},'kIiYw':function(_0x1e5da5,_0x5c0875){return _0x1e5da5!==_0x5c0875;},'WYGrH':_0x23cee0(0x228,0x284,0x246,0x2fa),'Xhzqm':function(_0x15e4c0){return _0x15e4c0();},'bWGYL':_0x60f837(0x19d,0x1d4,0x17e,0x1fd)+_0x60f837(0x146,0x142,0x123,0x164)+_0x60f837(0x136,0x194,0x13e,0xd6)+_0x23cee0(0x213,0x26e,0x2ab,0x20e),'icHIB':function(_0x5932ab,_0x30d352){return _0x5932ab(_0x30d352);},'Thfmj':'image','HtVXi':_0x60f837(0xfa,0x135,0x114,0x12f)+_0x23cee0(0x24d,0x23a,0x25d,0x293),'MupQp':function(_0x393d3a){return _0x393d3a();},'YfaeH':_0x23cee0(0x22f,0x1e0,0x1e5,0x207)+'回数据:','vewcf':_0x23cee0(0x201,0x280,0x225,0x246),'PbWWS':function(_0x3a2f38,_0x273c7c){return _0x3a2f38(_0x273c7c);},'Ovmzn':function(_0xa49b61,_0x4fe6f3){return _0xa49b61+_0x4fe6f3;},'eZIER':'上传失败:\x20','AVUqk':_0x23cee0(0x284,0x241,0x21e,0x271),'hOexd':_0x23cee0(0x1e8,0x245,0x272,0x203)+':\x20','JhiDF':_0x60f837(0x19d,0x168,0x18a,0x1e8)+':','kpJTi':function(_0x176160,_0x5bf2b6){return _0x176160(_0x5bf2b6);}},_0x599e6b=extension_settings[extensionName];function _0x23cee0(_0x4d42df,_0x2dc099,_0x401e85,_0x2e3bb1){return _0x20e3f9(_0x2dc099- -0xd1,_0x2dc099-0x1a1,_0x401e85,_0x2e3bb1-0x1bd);}const _0x2711be=_0x446028[_0x23cee0(0x21b,0x258,0x25b,0x2a0)]['files'][-0xbbb+-0x48b*0x8+0x3013];if(!_0x2711be)return;function _0x60f837(_0x2c2836,_0x404cef,_0x103c41,_0x3f3964){return _0x105b52(_0x103c41- -0x391,_0x2c2836,_0x103c41-0x77,_0x3f3964-0xc3);}try{const _0x5dbc93=await processUploadedImageToBlob(_0x2711be),_0x1bbbea=URL['createObje'+_0x23cee0(0x2df,0x261,0x1f9,0x205)](_0x5dbc93);comfyuiImageObjectURL=_0x1bbbea,_0x1fee50[_0x60f837(0xe0,0x168,0xfc,0xcd)](updateComfyUIImagePreview,_0x1bbbea);const _0x340bb4=new FormData();_0x340bb4[_0x60f837(0xe4,0x11e,0xee,0xfc)](_0x1fee50['Thfmj'],_0x5dbc93,_0x2711be['name']);let _0x2940b4=_0x599e6b['comfyuiUrl'][_0x60f837(0x10d,0x11f,0x146,0x1c1)]();if(!_0x2940b4){_0x1fee50[_0x60f837(0x147,0x113,0xfc,0x112)](alert,_0x1fee50[_0x23cee0(0x20c,0x265,0x29e,0x2c2)]),_0x1fee50[_0x60f837(0x16c,0x14a,0x124,0x155)](removeComfyUIImage);return;}const _0x1883c6={};_0x1883c6[_0x60f837(0x104,0x113,0x12e,0xef)]=_0x23cee0(0x277,0x21c,0x26b,0x1bd),_0x1883c6['body']=_0x340bb4;const _0x599fa2=await fetch(_0x2940b4+('/upload/im'+'age'),_0x1883c6);if(_0x599fa2['ok']){if(_0x23cee0(0x22f,0x20d,0x1b0,0x207)!==_0x23cee0(0x18f,0x20d,0x27c,0x1ee)){_0x37d597[_0x60f837(0x1fa,0x1ac,0x1da,0x1ae)]=_0x36cd12,_0x508e2b[_0x23cee0(0x1f1,0x226,0x1b8,0x287)]['display']=_0x1fee50[_0x23cee0(0x232,0x26a,0x23a,0x225)],_0x668fc8[_0x23cee0(0x207,0x226,0x25a,0x259)]['display']=_0x1fee50[_0x23cee0(0x20c,0x1d7,0x17a,0x22f)],_0x4a2852[_0x60f837(0x13a,0x162,0x16b,0x1c6)][_0x60f837(0x15c,0x18b,0x12d,0xcc)]=_0x1fee50[_0x60f837(0x1ef,0x193,0x177,0x140)];const _0x3fae86=_0x1cb843[_0x23cee0(0x192,0x1fc,0x220,0x19b)](','),_0x1bb3d3=_0x3fae86[-0x4*-0x58c+0x113*0x16+-0x2dd2][_0x23cee0(0x1fe,0x1fc,0x189,0x23d)](':')[-0x10d9+-0x1ba8+0x2c82][_0x60f837(0x18b,0x1be,0x141,0xe5)](';')[0x1639+0xd70+-0x23a9];_0x9d4c82=_0x1bb3d3,_0x3f471b[_0x60f837(0x137,0x19e,0x127,0x108)+_0x23cee0(0x22a,0x20b,0x268,0x1ee)]=_0x3fae86[0x1*0x16a9+0x2b6*-0x5+-0x91a];const _0x3ee76c={};_0x3ee76c['id']=_0x251d67,_0x3ee76c[_0x23cee0(0x202,0x25b,0x269,0x2d3)]=_0x56dcc4,_0x37579e[_0x60f837(0x13e,0x207,0x192,0x1a8)+_0x60f837(0x1da,0x1f4,0x1dd,0x244)](_0x3ee76c);}else{const _0x45ede8=await _0x599fa2['json']();window['comfyuican'+_0x23cee0(0x1b5,0x22f,0x23c,0x21f)]=_0x45ede8['name'],_0x1fee50[_0x60f837(0xef,0x14a,0xfc,0x11f)](addLog,'图片上传成功,\x20服务'+_0x60f837(0x15b,0x105,0x15e,0x159)+JSON[_0x60f837(0x13f,0x11d,0x12c,0xc1)](_0x45ede8)),console[_0x60f837(0x1d9,0x141,0x16a,0xfa)](_0x1fee50['YfaeH'],_0x45ede8);const _0x3d35dd=new FileReader();_0x3d35dd[_0x60f837(0x113,0x16c,0x137,0x183)]=()=>{function _0x513648(_0x2b0f23,_0x113acc,_0x2b54ee,_0x5da74c){return _0x60f837(_0x2b0f23,_0x113acc-0xe0,_0x113acc- -0x153,_0x5da74c-0x1e6);}function _0x181a13(_0x200d87,_0x2aa17b,_0x3230fc,_0x125941){return _0x60f837(_0x3230fc,_0x2aa17b-0xa5,_0x2aa17b-0x51,_0x125941-0x158);}if(_0x1fee50['kIiYw'](_0x1fee50[_0x181a13(0x1a5,0x222,0x1bd,0x25a)],_0x1fee50['WYGrH']))_0x1fee50['FGOCn'](_0x447dab);else{const _0x4666b1=_0x3d35dd['result'],_0x12fb33={};_0x12fb33[_0x513648(0xa4,0x4d,0x4f,-0x33)]=_0x4666b1,_0x12fb33[_0x513648(0x76,0x27,0x1,-0x39)+_0x513648(0x6e,0x5d,0xb9,0xa4)]=_0x45ede8[_0x181a13(0x1c1,0x14a,0xdb,0x15d)];const _0x1a7804=_0x12fb33,_0x192ce4={};_0x192ce4['id']=COMFYUI_REF_CACHE_KEY,_0x192ce4[_0x513648(-0x2e,0x4d,0x88,-0xd)]=_0x1a7804,dbs[_0x513648(0x36,0x3f,0x79,-0x36)+_0x513648(0xcc,0x8a,0x28,0x84)](_0x192ce4);}},_0x3d35dd[_0x23cee0(0x1fd,0x242,0x2ba,0x25f)+_0x60f837(0x1c8,0x1eb,0x189,0x1ff)](_0x5dbc93);}}else{if(_0x1fee50[_0x23cee0(0x189,0x1c5,0x15d,0x229)](_0x1fee50[_0x60f837(0x15f,0x11f,0x196,0x188)],_0x60f837(0x22b,0x179,0x1c5,0x21c)))_0x1fee50[_0x23cee0(0x2b2,0x26c,0x2af,0x20d)](_0x4f5bc3);else{const _0x201844=await _0x599fa2[_0x60f837(0x243,0x1f8,0x1d5,0x221)]();_0x1fee50['PbWWS'](alert,_0x1fee50[_0x23cee0(0x235,0x1fa,0x211,0x1fd)](_0x1fee50['eZIER'],_0x201844)),_0x1fee50[_0x60f837(0x11b,0xca,0xfc,0xe4)](addLog,'图片上传失败,\x20错误'+_0x23cee0(0x1da,0x1b0,0x16a,0x173)+_0x201844),console[_0x23cee0(0x200,0x1be,0x1d3,0x1d9)](_0x23cee0(0x1e7,0x237,0x1d2,0x252),_0x201844),_0x1fee50[_0x60f837(0x158,0x180,0x124,0xc4)](removeComfyUIImage);}}}catch(_0x288c09){_0x1fee50['AVUqk']===_0x1fee50[_0x60f837(0x193,0xe8,0x145,0xd5)]?(alert(_0x1fee50[_0x60f837(0x183,0x154,0x13f,0x12e)](_0x1fee50[_0x60f837(0x12c,0xfb,0xf7,0x144)],_0x288c09[_0x23cee0(0x1b5,0x1e3,0x1c6,0x1f8)])),console[_0x60f837(0x9a,0xb8,0x103,0xdd)](_0x1fee50['JhiDF'],_0x288c09),_0x1fee50[_0x23cee0(0x214,0x1d1,0x1a7,0x1e0)](addLog,_0x23cee0(0x1c8,0x213,0x21e,0x23a)+_0x60f837(0x76,0x103,0xf5,0xb6)+JSON[_0x60f837(0x14e,0xd5,0x12c,0x160)](_0x288c09)),removeComfyUIImage()):_0x2de38d['error'](_0x1fee50[_0x60f837(0x1b8,0x1e8,0x1a7,0x180)],_0x81b27f);}}async function loadCachedImages(){const _0x5d64eb={'rlBXJ':_0x24e5c3(0x5cb,0x567,0x589,0x5a5)+_0x24e5c3(0x625,0x64b,0x696,0x695),'Tyrgy':_0x24e5c3(0x5de,0x58d,0x5d4,0x61c)+_0x24e5c3(0x676,0x6b9,0x6c5,0x6ea)+_0x5f2841(0x334,0x36c,0x327,0x364)+'er\x20.st-cha'+_0x5f2841(0x335,0x2fe,0x283,0x37c)+'placeholde'+'r','SiMtv':'novelai-re'+_0x24e5c3(0x63a,0x611,0x5c6,0x621)+'-btn','DJCER':_0x5f2841(0x444,0x3da,0x36e,0x408),'rebFL':_0x24e5c3(0x592,0x5a8,0x58c,0x545),'zIatP':_0x5f2841(0x29c,0x2e1,0x2d7,0x29a),'hkddp':_0x5f2841(0x392,0x3ce,0x3cf,0x39b)+'x','kVfzd':_0x5f2841(0x36e,0x35a,0x318,0x3af),'NuVao':function(_0x308c4f,_0x2886da){return _0x308c4f(_0x2886da);},'QwdHn':function(_0x22bd08,_0x199c78){return _0x22bd08+_0x199c78;},'PyIKB':_0x24e5c3(0x636,0x694,0x5d7,0x634)+':\x20','hkjRy':_0x5f2841(0x3da,0x381,0x36f,0x3e5)+':','OpVyh':function(_0x2de36e){return _0x2de36e();},'SbSZT':_0x24e5c3(0x5b4,0x5de,0x61c,0x5ef)+'+$','onyUc':function(_0x44d13f,_0x2ef404){return _0x44d13f===_0x2ef404;},'YUtOo':_0x5f2841(0x349,0x35c,0x31a,0x3c4),'VlQjZ':_0x5f2841(0x3c1,0x354,0x303,0x352),'eLrEx':function(_0x4a43bc,_0x81889d){return _0x4a43bc(_0x81889d);},'Dtqwk':function(_0x5c23f4,_0x3b769e){return _0x5c23f4===_0x3b769e;},'UqcvZ':_0x24e5c3(0x5ba,0x625,0x567,0x5e1),'pBcfl':_0x24e5c3(0x5bc,0x5a8,0x5c0,0x5a2),'jnxHT':function(_0x3351d5,_0x4a895c){return _0x3351d5!==_0x4a895c;},'xqInB':'iqWty','wxvMa':function(_0x1dfe6e,_0x447230){return _0x1dfe6e===_0x447230;},'ChiYN':'HPJgD','wjJHT':function(_0x24b5f9,_0x3e922f){return _0x24b5f9(_0x3e922f);},'mAPUA':_0x5f2841(0x3c1,0x375,0x364,0x3af)+_0x5f2841(0x2f5,0x31a,0x2d5,0x387)+_0x24e5c3(0x627,0x5a8,0x63d,0x637)+_0x24e5c3(0x603,0x5cb,0x66b,0x599)};function _0x5f2841(_0x31b311,_0x38bf9b,_0x57dea7,_0x3df6f9){return _0x20e3f9(_0x38bf9b-0x6b,_0x38bf9b-0x93,_0x57dea7,_0x3df6f9-0x1f3);}await dbs[_0x5f2841(0x2fc,0x2db,0x2f6,0x269)]();try{const _0xf967b4=await dbs[_0x5f2841(0x3cf,0x399,0x3a6,0x3b7)+_0x24e5c3(0x61f,0x640,0x656,0x60e)](NAI_VIBE_CACHE_KEY);if(_0xf967b4&&_0xf967b4[_0x5f2841(0x3d7,0x397,0x35a,0x404)]){if(_0x5d64eb[_0x5f2841(0x351,0x310,0x36f,0x2ac)](_0x5d64eb[_0x5f2841(0x352,0x2f7,0x2fc,0x29e)],_0x5d64eb[_0x24e5c3(0x68c,0x660,0x6ec,0x615)])){const _0x192851=_0x3ffbe4[_0x24e5c3(0x687,0x622,0x66a,0x620)+_0x24e5c3(0x659,0x69c,0x6a7,0x6d2)](_0x5d64eb[_0x5f2841(0x38e,0x3c7,0x415,0x423)]),_0x3f8bac=_0x1eb681[_0x5f2841(0x31c,0x35b,0x383,0x367)+'tor'](_0x5d64eb[_0x24e5c3(0x68a,0x6d0,0x67f,0x65c)]),_0x1ef14e=_0x648d99['getElement'+_0x24e5c3(0x659,0x6a9,0x68d,0x5e4)](_0x5d64eb[_0x5f2841(0x3b9,0x3b0,0x3dc,0x37d)]);if(_0x3388f6&&_0x35c391[_0x24e5c3(0x59c,0x578,0x585,0x609)](_0x5d64eb[_0x24e5c3(0x650,0x6a6,0x66a,0x692)])){_0x192851[_0x24e5c3(0x686,0x6c2,0x631,0x635)]=_0x22a2bf,_0x192851[_0x5f2841(0x3cd,0x362,0x337,0x300)][_0x24e5c3(0x5d9,0x623,0x55e,0x65a)]=_0x5d64eb['rebFL'],_0x3f8bac['style'][_0x24e5c3(0x5d9,0x559,0x5cb,0x564)]=_0x5d64eb[_0x24e5c3(0x60e,0x67e,0x591,0x5f4)],_0x1ef14e[_0x5f2841(0x3b5,0x362,0x3d9,0x3d5)][_0x24e5c3(0x5d9,0x5da,0x654,0x5ae)]=_0x5d64eb['hkddp'];const _0x16bc80=_0x305434[_0x24e5c3(0x5ed,0x5b3,0x64a,0x625)](','),_0x5048ea=_0x16bc80[-0x381*-0x8+0x4*0x81b+-0x3c74][_0x24e5c3(0x5ed,0x66c,0x5ab,0x5f8)](':')[-0x20a0+-0x1925+0x3*0x1342][_0x24e5c3(0x5ed,0x59d,0x632,0x62d)](';')[-0x2*-0x91b+0xf51+-0x2187];_0x3944de=_0x5048ea,_0xdae215[_0x24e5c3(0x5ab,0x5aa,0x601,0x5f0)+_0x5f2841(0x2ce,0x321,0x326,0x312)+'e']=_0x16bc80[0x3*0x89b+-0x1*-0x243f+-0x3e0f];const _0x44e4e8={};_0x44e4e8['id']=_0x1172eb,_0x44e4e8['data']=_0x4ea2d4,_0x40cc81['storeReadW'+_0x5f2841(0x3f7,0x3d4,0x35e,0x41c)](_0x44e4e8);}else{const _0x2a69e5=_0x5d64eb['kVfzd']['split']('|');let _0x531d1b=-0x3ba+-0xe7c+0x91b*0x2;while(!![]){switch(_0x2a69e5[_0x531d1b++]){case'0':_0x1ef14e['style'][_0x5f2841(0x33b,0x324,0x2b1,0x329)]=_0x24e5c3(0x596,0x601,0x5fc,0x585);continue;case'1':_0x3f8bac[_0x5f2841(0x3d9,0x362,0x315,0x37a)][_0x5f2841(0x345,0x324,0x384,0x320)]=_0x5f2841(0x35d,0x304,0x2d3,0x339);continue;case'2':_0x192851[_0x5f2841(0x312,0x362,0x328,0x3a4)][_0x24e5c3(0x5d9,0x61e,0x5aa,0x5d2)]=_0x5d64eb[_0x5f2841(0x2e1,0x359,0x35e,0x345)];continue;case'3':_0x192851['src']='';continue;case'4':_0xeae90f[_0x24e5c3(0x5ab,0x61d,0x5b9,0x628)+_0x5f2841(0x33b,0x321,0x2d2,0x30d)+'e']=null;continue;}break;}}}else _0x5d64eb[_0x5f2841(0x3a1,0x34a,0x38e,0x3a4)](updateNovelaiImagePreview,_0xf967b4[_0x5f2841(0x31a,0x397,0x364,0x40a)]);}}catch(_0x87d6f2){console[_0x5f2841(0x350,0x2fa,0x318,0x296)](_0x24e5c3(0x62a,0x5af,0x5f2,0x66f)+_0x5f2841(0x2bf,0x31a,0x2e7,0x362)+_0x5f2841(0x361,0x335,0x2dd,0x3ac)+_0x5f2841(0x3fb,0x3aa,0x346,0x417),_0x87d6f2);}function _0x24e5c3(_0x3cee6f,_0x47080a,_0x40518f,_0x246727){return _0x20e3f9(_0x3cee6f-0x320,_0x47080a-0x184,_0x40518f,_0x246727-0x2d);}try{if(_0x5d64eb[_0x5f2841(0x32c,0x382,0x3b2,0x3df)](_0x5d64eb[_0x24e5c3(0x624,0x610,0x5fd,0x645)],_0x5d64eb[_0x5f2841(0x322,0x340,0x3a4,0x2dd)]))_0xdc40f[_0x24e5c3(0x5e6,0x5c0,0x5b5,0x59b)+_0x5f2841(0x36d,0x39d,0x417,0x411)](_0x4cefab['src']);else{const _0x2a08f9=await dbs[_0x24e5c3(0x64e,0x67e,0x6a3,0x687)+_0x5f2841(0x323,0x36a,0x37c,0x32a)](NAI_CHAR_REF_CACHE_KEY);_0x2a08f9&&_0x2a08f9[_0x24e5c3(0x64c,0x62e,0x60a,0x694)]&&_0x5d64eb[_0x5f2841(0x33d,0x363,0x2e4,0x397)](updateNovelaiCharRefImagePreview,_0x2a08f9[_0x5f2841(0x40a,0x397,0x318,0x3dc)]);}}catch(_0x317afc){_0x5d64eb[_0x5f2841(0x329,0x383,0x321,0x3ea)](_0x5f2841(0x360,0x32b,0x362,0x302),_0x5d64eb[_0x24e5c3(0x662,0x627,0x669,0x601)])?(_0x5d64eb[_0x24e5c3(0x618,0x64d,0x60a,0x62e)](_0x622b49,_0x5d64eb[_0x5f2841(0x351,0x3bd,0x3cc,0x387)](_0x5d64eb[_0x5f2841(0x391,0x350,0x369,0x36e)],_0x5d7ed8[_0x24e5c3(0x5d4,0x615,0x609,0x5d7)])),_0x51d14d[_0x5f2841(0x345,0x2fa,0x36e,0x2aa)](_0x5d64eb[_0x5f2841(0x345,0x334,0x3b3,0x2ff)],_0x40ce51),_0x5d64eb[_0x5f2841(0x30d,0x363,0x398,0x309)](_0x50a498,'图片上传失败,\x20错误'+_0x5f2841(0x2be,0x2ec,0x34e,0x31d)+_0x172858['stringify'](_0x4c4237)),_0x5d64eb['OpVyh'](_0x292cce)):console[_0x24e5c3(0x5af,0x52f,0x5d0,0x5aa)](_0x5f2841(0x37e,0x375,0x38e,0x3a2)+_0x5f2841(0x35a,0x31a,0x36d,0x349)+_0x5f2841(0x3e4,0x3d3,0x3b2,0x35f)+'har\x20Ref\x20im'+_0x24e5c3(0x67a,0x65d,0x69c,0x606),_0x317afc);}try{if(_0x5d64eb['wxvMa'](_0x5d64eb[_0x5f2841(0x3a3,0x339,0x2f1,0x2e8)],_0x5f2841(0x313,0x2fd,0x2ad,0x362))){const _0xeabb00=await dbs[_0x5f2841(0x383,0x399,0x349,0x413)+_0x24e5c3(0x61f,0x5b5,0x5ea,0x603)](COMFYUI_REF_CACHE_KEY);if(_0xeabb00&&_0xeabb00[_0x24e5c3(0x64c,0x654,0x5ec,0x689)]&&_0xeabb00[_0x5f2841(0x400,0x397,0x347,0x34b)][_0x5f2841(0x3d5,0x397,0x371,0x36b)]&&_0xeabb00[_0x24e5c3(0x64c,0x6ad,0x627,0x62d)][_0x5f2841(0x3d0,0x371,0x350,0x39d)+'Name']){const _0x2707a7=_0xeabb00[_0x24e5c3(0x64c,0x698,0x62d,0x6c4)],_0x292ab2=await _0x5d64eb['wjJHT'](fetch,_0x2707a7[_0x5f2841(0x358,0x397,0x350,0x3a0)]),_0x330aa2=await _0x292ab2['blob'](),_0x3fa122=URL[_0x24e5c3(0x62c,0x6a8,0x687,0x673)+_0x24e5c3(0x652,0x5e3,0x5f5,0x6ab)](_0x330aa2);_0x5d64eb['NuVao'](updateComfyUIImagePreview,_0x3fa122),comfyuiImageObjectURL=_0x3fa122,window[_0x5f2841(0x39f,0x3ae,0x33d,0x38c)+_0x5f2841(0x3a8,0x36b,0x3b3,0x36f)]=_0x2707a7[_0x24e5c3(0x626,0x6a3,0x651,0x65c)+_0x24e5c3(0x65c,0x5ff,0x606,0x6ce)],_0x5d64eb['wjJHT'](addLog,_0x24e5c3(0x5ca,0x572,0x645,0x622)+'UI图片:\x20'+_0x2707a7[_0x24e5c3(0x626,0x652,0x5e8,0x5cf)+_0x24e5c3(0x65c,0x6af,0x606,0x66c)]),console[_0x24e5c3(0x616,0x65d,0x692,0x59e)](_0x5f2841(0x2ef,0x364,0x359,0x2f3)+_0x24e5c3(0x644,0x656,0x6c2,0x673)+_0x24e5c3(0x602,0x678,0x63b,0x5e5)+'e:\x20'+_0x2707a7[_0x24e5c3(0x626,0x5cd,0x64c,0x696)+'Name']);}else{if(_0xeabb00&&typeof _0xeabb00[_0x5f2841(0x36d,0x397,0x3b5,0x3ba)]==='string'){const _0x3d7be2=await _0x5d64eb[_0x5f2841(0x2ab,0x318,0x32e,0x2a1)](fetch,_0xeabb00[_0x24e5c3(0x64c,0x606,0x6b9,0x681)]),_0x225f09=await _0x3d7be2[_0x24e5c3(0x62f,0x5c5,0x602,0x5ba)](),_0x36addd=URL[_0x5f2841(0x3a6,0x377,0x361,0x341)+'ctURL'](_0x225f09);updateComfyUIImagePreview(_0x36addd),comfyuiImageObjectURL=_0x36addd,console['warn']('Loaded\x20Com'+_0x24e5c3(0x644,0x62c,0x693,0x667)+_0x24e5c3(0x684,0x6cd,0x691,0x694)+_0x5f2841(0x3c2,0x37f,0x375,0x3a9)+'at.\x20Please'+_0x5f2841(0x3c0,0x3b8,0x3e6,0x3f9)+_0x5f2841(0x336,0x309,0x336,0x2c4)+_0x5f2841(0x321,0x2e8,0x30d,0x2d9)+'the\x20new\x20fo'+_0x5f2841(0x3a2,0x353,0x2fe,0x312));}}}else return _0x529cf3[_0x24e5c3(0x613,0x639,0x635,0x5cb)]()['search'](npEdtm[_0x24e5c3(0x5fa,0x5f2,0x640,0x628)])[_0x5f2841(0x3a6,0x35e,0x339,0x352)]()[_0x24e5c3(0x5f9,0x5ca,0x5ec,0x5c0)+'r'](_0x5dbe6b)[_0x5f2841(0x351,0x392,0x37e,0x398)](npEdtm['SbSZT']);}catch(_0x445c55){console['error'](_0x5d64eb[_0x24e5c3(0x601,0x61c,0x65e,0x5c8)],_0x445c55);}}export function initImageUpload(_0xebb4b0){const _0x4e1690={'cibcg':_0x692478(0x416,0x3e6,0x3d5,0x3c5)+_0x692478(0x3e7,0x3f6,0x391,0x457),'tbkcR':_0x692478(0x3da,0x3e6,0x453,0x3d1)+_0x692478(0x41e,0x3c3,0x414,0x385)+_0x144557(0x34f,0x2af,0x32b,0x38a),'etdyj':function(_0x907450,_0x2941cb){return _0x907450(_0x2941cb);},'zqAvD':function(_0x2d5b8f,_0x1af553){return _0x2d5b8f+_0x1af553;},'txEWy':_0x144557(0x2ca,0x319,0x345,0x2de),'bmlJh':function(_0x459dc1,_0x3728a1){return _0x459dc1!==_0x3728a1;},'oUFxC':_0x144557(0x353,0x380,0x315,0x395),'acnZl':_0x144557(0x338,0x3df,0x39d,0x3dc),'tqDuw':_0x144557(0x368,0x342,0x317,0x2f9),'IkSkG':_0x692478(0x3f8,0x3e6,0x41c,0x3a1)+'2','NTMAo':function(_0x11c603){return _0x11c603();},'FMaBK':function(_0x48a863){return _0x48a863();},'xAhrD':_0x144557(0x393,0x36b,0x394,0x3e4),'ervvt':'#novelai-r'+'emove-imag'+_0x692478(0x3d3,0x35f,0x316,0x306),'syhgZ':_0x144557(0x358,0x41c,0x3b3,0x38b)+_0x692478(0x38e,0x3c4,0x412,0x35f)+_0x144557(0x38d,0x3af,0x396,0x398)+_0x692478(0x382,0x3e2,0x3b5,0x3a0),'qQtSK':_0x144557(0x31d,0x339,0x37f,0x3ef)+_0x692478(0x2d2,0x33f,0x3ae,0x30f)+_0x692478(0x3c3,0x39c,0x356,0x3a2)+_0x144557(0x3e3,0x39d,0x3dc,0x360),'pUWfB':_0x692478(0x39d,0x3b8,0x366,0x3ad),'QIBPp':_0x692478(0x412,0x3fc,0x38d,0x3a1)+'t2'};_0x4e1690[_0x144557(0x39e,0x377,0x37d,0x3e5)](loadCachedImages),_0xebb4b0['find']('#novelai-s'+'elect-imag'+_0x692478(0x355,0x35f,0x394,0x359))['on']('click',()=>{function _0x4b780e(_0x14e23d,_0x83001f,_0x31d3ac,_0x19c59c){return _0x692478(_0x14e23d-0x132,_0x19c59c- -0x221,_0x31d3ac-0xec,_0x83001f);}function _0x3c9dba(_0x2a750d,_0x451004,_0x47c925,_0x44b292){return _0x144557(_0x2a750d,_0x451004-0xbe,_0x451004-0x1a6,_0x44b292-0x181);}document[_0x3c9dba(0x613,0x5af,0x548,0x5f2)+_0x4b780e(0x16b,0x1be,0x22e,0x1c0)](_0x4e1690[_0x4b780e(0x8f,0x131,0x151,0x10e)])['click']();}),_0xebb4b0['find'](_0x692478(0x433,0x3fc,0x39d,0x38c)+_0x144557(0x448,0x39d,0x3d3,0x449))['on'](_0x4e1690[_0x692478(0x3d1,0x406,0x484,0x41b)],handleNovelaiImageUpload),_0xebb4b0['find'](_0x4e1690[_0x144557(0x3e0,0x444,0x3ec,0x38b)])['on'](_0x144557(0x3e5,0x411,0x3b2,0x369),()=>{removeNovelaiImage();});function _0x692478(_0x4f9e64,_0x3fc061,_0x50e55e,_0x25206c){return _0x105b52(_0x3fc061- -0x15d,_0x25206c,_0x50e55e-0x1c3,_0x25206c-0x128);}_0xebb4b0[_0x144557(0x40b,0x372,0x3a4,0x343)](_0x4e1690[_0x144557(0x380,0x403,0x3c3,0x3ae)])['on'](_0x692478(0x3bd,0x3b8,0x37f,0x380),()=>{function _0x355de5(_0x5bdd0f,_0x1e1b83,_0xcfbdab,_0x47bcfc){return _0x144557(_0x5bdd0f,_0x1e1b83-0x17a,_0xcfbdab- -0x3ed,_0x47bcfc-0xbb);}function _0x3afaaa(_0x50288b,_0x1e298d,_0x3bac3f,_0x5ea7df){return _0x144557(_0x50288b,_0x1e298d-0xd2,_0x1e298d- -0x2b3,_0x5ea7df-0x15e);}document[_0x3afaaa(0x170,0x156,0x1c6,0x174)+_0x355de5(-0x6a,-0xc,-0x12,-0x2b)](_0x4e1690[_0x355de5(-0x74,-0x84,-0x99,-0x50)])[_0x3afaaa(0xf9,0xff,0x88,0x105)]();}),_0xebb4b0[_0x692478(0x3de,0x3aa,0x36b,0x341)]('#imageInpu'+_0x692478(0x3bc,0x36a,0x399,0x369)+_0x144557(0x2a1,0x2a6,0x320,0x301))['on'](_0x4e1690[_0x144557(0x3b9,0x3cf,0x400,0x3e9)],handleNovelaiCharRefImageUpload),_0xebb4b0[_0x692478(0x398,0x3aa,0x3a7,0x3ae)](_0x4e1690['qQtSK'])['on'](_0x144557(0x3ca,0x423,0x3b2,0x423),()=>{function _0x1970a0(_0x27e56f,_0x3c4e43,_0x4599ea,_0x2244bf){return _0x144557(_0x3c4e43,_0x3c4e43-0xa9,_0x27e56f-0x270,_0x2244bf-0x5d);}const _0x2dbf02={'MMDeX':function(_0x515fe1,_0xe0e82a){function _0x44a76a(_0x477bf8,_0x5346da,_0x55c5c1,_0x5bdc5c){return _0x56b9(_0x477bf8- -0x3a6,_0x5346da);}return _0x4e1690[_0x44a76a(-0x18d,-0x1e7,-0x163,-0x1e4)](_0x515fe1,_0xe0e82a);},'fzKBm':function(_0x384b73,_0x5240c3){function _0x2a1df1(_0x566cc1,_0x51dfa1,_0x3eb9aa,_0x22a02a){return _0x56b9(_0x3eb9aa- -0x36c,_0x566cc1);}return _0x4e1690[_0x2a1df1(-0xf3,-0x23,-0x82,-0xc5)](_0x384b73,_0x5240c3);},'VYDTD':_0x4e1690['txEWy']};function _0xc81939(_0x4d22af,_0x264fb5,_0x3d0eef,_0x58c3fb){return _0x144557(_0x58c3fb,_0x264fb5-0x14d,_0x264fb5- -0x3f5,_0x58c3fb-0x20);}_0x4e1690[_0xc81939(-0x60,-0xdb,-0xde,-0xbf)](_0x4e1690['oUFxC'],_0x4e1690[_0x1970a0(0x658,0x661,0x67d,0x6aa)])?(_0x284ced[_0x1970a0(0x5a1,0x5bc,0x55d,0x557)]('Error\x20proc'+_0xc81939(-0x80,-0x3a,-0xac,-0x70)+'elAI\x20char\x20'+_0xc81939(-0x49,-0x3,-0x2,0x14),_0x352168),_0x2dbf02[_0x1970a0(0x596,0x515,0x5ff,0x5e8)](_0xe1b0b5,_0x2dbf02['fzKBm'](_0x2dbf02[_0x1970a0(0x583,0x5c5,0x565,0x52f)],_0x31b95f[_0x1970a0(0x5c6,0x5e1,0x645,0x56a)]))):removeNovelaiCharRefImage();}),_0xebb4b0['find'](_0x144557(0x331,0x3de,0x366,0x354)+'elect-imag'+_0x144557(0x32b,0x3a4,0x359,0x2e2))['on'](_0x4e1690[_0x144557(0x35c,0x360,0x350,0x3c8)],()=>{function _0x2cf787(_0x5a2d38,_0x465a75,_0xcf7102,_0x431032){return _0x692478(_0x5a2d38-0x11e,_0x465a75- -0x326,_0xcf7102-0x180,_0x431032);}function _0x5afb64(_0x5e8948,_0x2e2539,_0x2cfa73,_0x2a39d5){return _0x144557(_0x5e8948,_0x2e2539-0x8a,_0x2a39d5-0x1cc,_0x2a39d5-0x116);}_0x4e1690['acnZl']!==_0x4e1690[_0x5afb64(0x560,0x526,0x5e8,0x5a2)]?document[_0x5afb64(0x580,0x55a,0x5d6,0x5d5)+'ById'](_0x4e1690[_0x5afb64(0x51b,0x5cc,0x553,0x591)])[_0x2cf787(0xac,0x92,0x12,0x87)]():_0x4e1690[_0x2cf787(-0x5b,0x1f,-0x43,-0x2a)](_0x3d7745,_0x5e8b63[_0x2cf787(0x8c,0xae,0xbc,0xfc)]);}),_0xebb4b0['find'](_0x4e1690[_0x144557(0x3fb,0x367,0x3d1,0x3d7)])['on'](_0x4e1690[_0x692478(0x437,0x406,0x38f,0x3be)],handleImageUpload2);function _0x144557(_0x58f8a5,_0x35a7e5,_0x54296f,_0x259152){return _0x20e3f9(_0x54296f-0xa2,_0x35a7e5-0x7b,_0x58f8a5,_0x259152-0x14f);}_0xebb4b0['find']('#comfyui-r'+_0x692478(0x324,0x394,0x353,0x35a)+_0x692478(0x37a,0x35f,0x35a,0x30c))['on'](_0x4e1690['pUWfB'],()=>{function _0x3e2f89(_0x3263e6,_0x157ada,_0x28b076,_0x552055){return _0x692478(_0x3263e6-0x1b3,_0x3263e6-0x1fa,_0x28b076-0x1f4,_0x28b076);}_0x4e1690[_0x3e2f89(0x59f,0x580,0x56d,0x55c)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};