(function(_0x5c940b,_0x987991){const _0x4305c6=_0x5c940b();function _0x27464f(_0x2bb722,_0x21023b,_0x135f32,_0x9af07f){return _0x43bf(_0x21023b-0xa6,_0x135f32);}function _0x397986(_0x429d1c,_0x2a0be5,_0x34759b,_0xd6e738){return _0x43bf(_0x429d1c- -0x1d8,_0x34759b);}while(!![]){try{const _0x16c03f=-parseInt(_0x397986(0x1a,0x0,0x3e,-0x62))/(0xa7e+-0x2*0xfb1+0x14e5)+parseInt(_0x27464f(0x251,0x2c5,0x2fd,0x303))/(0x2df+0x1b07+-0x1de4)*(-parseInt(_0x397986(0x62,0x4f,0xcc,0x67))/(0x6d0+0x2503*0x1+-0x2bd0))+-parseInt(_0x397986(0xc9,0x118,0x144,0x109))/(0x1d95+0x3b5+-0x2146)+parseInt(_0x397986(0xa0,0x36,0xea,0xff))/(-0x127b+0x1*0x1ce5+-0xa65)*(-parseInt(_0x27464f(0x3a0,0x380,0x313,0x3d0))/(0x1*-0xebf+0x2*-0x2ea+0x1499*0x1))+parseInt(_0x27464f(0x338,0x35e,0x3a2,0x39b))/(-0xd95+-0x3*0x257+-0x1*-0x14a1)*(parseInt(_0x27464f(0x31e,0x2ab,0x252,0x232))/(-0x15f1+0x1ed6+-0x8dd))+-parseInt(_0x27464f(0x2f1,0x2e4,0x2b0,0x359))/(-0x1e7e*0x1+0x199+-0x2e*-0xa1)*(parseInt(_0x397986(0x73,0x59,0xc8,0x38))/(0x2*-0x625+0x1aa8+-0x7*0x20c))+parseInt(_0x27464f(0x330,0x2dc,0x31c,0x2c7))/(-0x2bd*0x1+-0x8bf+0xb87);if(_0x16c03f===_0x987991)break;else _0x4305c6['push'](_0x4305c6['shift']());}catch(_0xea0008){_0x4305c6['push'](_0x4305c6['shift']());}}}(_0x5cea,-0x4b2c*-0x8+-0x1*0x8293+-0x166*0x1a));function _0x43bf(_0x2075f3,_0x15b4f1){_0x2075f3=_0x2075f3-(-0x72d+-0xd3*0x1d+0x4f*0x6b);const _0x320190=_0x5cea();let _0x35a1f7=_0x320190[_0x2075f3];if(_0x43bf['OylHLa']===undefined){var _0x461f75=function(_0x509b4d){const _0x3d3ea3='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xd86c94='',_0x1c2f6e='',_0x1670fd=_0xd86c94+_0x461f75;for(let _0x483cbf=-0x231e+-0x19f+0x24bd,_0x283e27,_0x567634,_0x3561aa=-0x4d6*0x1+-0xc61+-0x71*-0x27;_0x567634=_0x509b4d['charAt'](_0x3561aa++);~_0x567634&&(_0x283e27=_0x483cbf%(-0x1d17+0x1222*0x1+0xaf9)?_0x283e27*(-0x1*0xbb3+0x6cb+0x3c*0x16)+_0x567634:_0x567634,_0x483cbf++%(0xdb9*0x1+0x1*0x1f01+-0x2cb6))?_0xd86c94+=_0x1670fd['charCodeAt'](_0x3561aa+(-0x1*0xfe9+0x2041+-0x104e*0x1))-(-0x1ca8+0x3d0+-0xa*-0x27d)!==-0xa1e+0x290*-0x5+0x1*0x16ee?String['fromCharCode'](0x3d1*-0x1+0x68d+-0x1bd&_0x283e27>>(-(-0x1f79+0x1548+-0xa33*-0x1)*_0x483cbf&-0x228d+-0x24fa*-0x1+-0x29*0xf)):_0x483cbf:-0xf+0x203f+-0x203*0x10){_0x567634=_0x3d3ea3['indexOf'](_0x567634);}for(let _0x429fbd=0x43c+0x2*0x8ed+-0x1616,_0x7117d8=_0xd86c94['length'];_0x429fbd<_0x7117d8;_0x429fbd++){_0x1c2f6e+='%'+('00'+_0xd86c94['charCodeAt'](_0x429fbd)['toString'](-0x100b+-0xd4e+0x1d69))['slice'](-(-0x73*-0x49+0x19ef*0x1+-0x1*0x3ab8));}return decodeURIComponent(_0x1c2f6e);};_0x43bf['wkQarD']=_0x461f75,_0x43bf['MrWuvq']={},_0x43bf['OylHLa']=!![];}const _0x482796=_0x320190[-0x48*0x4b+0x1af9*-0x1+0x3011],_0x36a027=_0x2075f3+_0x482796,_0x1e1eb4=_0x43bf['MrWuvq'][_0x36a027];if(!_0x1e1eb4){const _0x2d4aff=function(_0x5c450c){this['BexpqD']=_0x5c450c,this['WtKnzm']=[0x6d7+-0x3*-0xbf+-0x913*0x1,0xf*-0x12f+0x18c2*-0x1+0x2a83,-0xe7c+0x667+0x815],this['FKeRNm']=function(){return'newState';},this['SStCNt']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ctPisb']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2d4aff['prototype']['CbJKLR']=function(){const _0x9bd5a9=new RegExp(this['SStCNt']+this['ctPisb']),_0xd958af=_0x9bd5a9['test'](this['FKeRNm']['toString']())?--this['WtKnzm'][0x1fb8+-0xc*0x280+0x1b7*-0x1]:--this['WtKnzm'][0xb2e+0x159e+-0x20cc];return this['MuzGlJ'](_0xd958af);},_0x2d4aff['prototype']['MuzGlJ']=function(_0x4ce771){if(!Boolean(~_0x4ce771))return _0x4ce771;return this['uGvCpp'](this['BexpqD']);},_0x2d4aff['prototype']['uGvCpp']=function(_0x34af6d){for(let _0x42deab=0x19*0x115+0x1e8e+-0x399b,_0x155af1=this['WtKnzm']['length'];_0x42deab<_0x155af1;_0x42deab++){this['WtKnzm']['push'](Math['round'](Math['random']())),_0x155af1=this['WtKnzm']['length'];}return _0x34af6d(this['WtKnzm'][-0x3*0xc7+-0x8*-0x1b4+-0xb4b]);},new _0x2d4aff(_0x43bf)['CbJKLR'](),_0x35a1f7=_0x43bf['wkQarD'](_0x35a1f7),_0x43bf['MrWuvq'][_0x36a027]=_0x35a1f7;}else _0x35a1f7=_0x1e1eb4;return _0x35a1f7;}const _0x16cdad=(function(){const _0x3f33e2={};function _0x1a2165(_0x28dc87,_0x2c5eda,_0x4ca03a,_0x39d836){return _0x43bf(_0x2c5eda- -0x3e6,_0x4ca03a);}_0x3f33e2[_0x542367(-0x47,-0xf1,-0x8a,-0x75)]=function(_0x4ab786,_0x233e48){return _0x4ab786===_0x233e48;},_0x3f33e2[_0x542367(-0xf6,-0x15,-0x85,-0xe0)]='ikhUd';const _0x3117fe=_0x3f33e2;let _0x298dfd=!![];function _0x542367(_0x39a595,_0x4df611,_0x13e3d8,_0x334bc1){return _0x43bf(_0x13e3d8- -0x2a7,_0x39a595);}return function(_0x43bcf4,_0xcba80){function _0x2154c9(_0x34e1e3,_0x15e342,_0x50aee1,_0x3e0ff6){return _0x1a2165(_0x34e1e3-0x1b9,_0x50aee1-0x287,_0x15e342,_0x3e0ff6-0x7a);}const _0x2a2d17={};_0x2a2d17[_0x2ae562(-0xf3,-0x99,-0xc5,-0xc6)]=_0x2ae562(-0x141,-0x8b,-0xff,-0xe9)+_0x2ae562(-0xcf,-0xf5,-0x51,-0x8c)+_0x2154c9(0x17f,0x1bf,0x155,0x105)+_0x2ae562(-0x3a,0x1,-0x9c,-0x75);const _0x51b891=_0x2a2d17;function _0x2ae562(_0x21d077,_0x2d41c1,_0x428f36,_0x39e085){return _0x1a2165(_0x21d077-0x1f4,_0x39e085-0xd6,_0x428f36,_0x39e085-0x157);}if(_0x3117fe['Lpmlu'](_0x3117fe[_0x2ae562(-0x93,-0xdf,-0xba,-0xee)],_0x2ae562(-0x6b,-0x5f,-0xaf,-0xbe)))_0x32d353[_0x2ae562(-0x6c,-0xda,-0xed,-0xb8)](_0x51b891[_0x2154c9(0x144,0x139,0xeb,0x165)],_0xfd9e4f);else{const _0x220208=_0x298dfd?function(){function _0x6b12cc(_0x279b70,_0x21d6a1,_0x2b24ea,_0x1a5179){return _0x2154c9(_0x279b70-0x13c,_0x2b24ea,_0x1a5179- -0x22,_0x1a5179-0xc6);}if(_0xcba80){const _0x2d206e=_0xcba80[_0x6b12cc(0x1bb,0xc7,0xe1,0x143)](_0x43bcf4,arguments);return _0xcba80=null,_0x2d206e;}}:function(){};return _0x298dfd=![],_0x220208;}};}()),_0x4d5c8f=_0x16cdad(this,function(){function _0x5548b9(_0x293451,_0x28edfc,_0x4844fe,_0x37699e){return _0x43bf(_0x28edfc-0x393,_0x37699e);}const _0x12e582={};function _0x366038(_0x1be8d1,_0x4135d8,_0x4febc0,_0x376716){return _0x43bf(_0x4135d8- -0x374,_0x4febc0);}_0x12e582[_0x366038(-0x13c,-0x107,-0x17e,-0xd3)]=_0x366038(-0x111,-0x109,-0x10f,-0xd5)+'+$';const _0x10d602=_0x12e582;return _0x4d5c8f[_0x366038(-0x118,-0x13f,-0xf6,-0x14c)]()[_0x5548b9(0x5bc,0x5bc,0x61b,0x5b2)](_0x10d602[_0x5548b9(0x5a5,0x600,0x5de,0x5b8)])[_0x5548b9(0x604,0x5c8,0x63d,0x63a)]()[_0x5548b9(0x5ed,0x5d7,0x635,0x574)+'r'](_0x4d5c8f)['search'](_0x366038(-0x123,-0x109,-0x171,-0x184)+'+$');});_0x4d5c8f();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0xe4184a(-0x45,0x26,-0x52,0x56)+_0xe4184a(0x74,0x8a,0x34,0x7a)+'ransfer_im'+_0xe4184a(0x30,0x38,0x1d,-0x20);function _0xe4184a(_0x301f9,_0x5174e6,_0x4e3723,_0x4d9fd0){return _0x43bf(_0x5174e6- -0x1d7,_0x4e3723);}const NAI_CHAR_REF_CACHE_KEY=_0x948dc1(-0x9f,-0xcf,-0x111,-0x15d)+_0x948dc1(-0x30,-0xc7,-0xa8,-0x8e)+_0x948dc1(-0x7e,0x3,-0x5b,-0x56),COMFYUI_REF_CACHE_KEY=_0x948dc1(-0x41,-0x16,-0x3e,-0x32)+_0xe4184a(0xec,0xcf,0xf2,0x113)+'age';let nai3VibeTransferImageMimeType='image/png',nai3CharRefImageMimeType='image/png',comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x2994e3){const _0xf2e322={};_0xf2e322[_0xe8b94b(0x2f7,0x2aa,0x369,0x321)]=_0xe8b94b(0x33c,0x3cb,0x320,0x356),_0xf2e322['ZvpEc']='none',_0xf2e322[_0xe8b94b(0x2f3,0x2b9,0x2c1,0x29c)]=_0x23bbf9(0x343,0x370,0x325,0x352)+_0xe8b94b(0x2eb,0x301,0x311,0x34f)+'ew-contain'+_0x23bbf9(0x33f,0x362,0x360,0x348)+_0x23bbf9(0x328,0x399,0x3a9,0x3f0)+_0xe8b94b(0x356,0x2fd,0x29a,0x2f5)+'r';function _0xe8b94b(_0x20cb8a,_0x3b5e35,_0x56b9de,_0x17b9d1){return _0x948dc1(_0x56b9de,_0x3b5e35-0x1f1,_0x17b9d1-0x393,_0x17b9d1-0x107);}_0xf2e322[_0xe8b94b(0x390,0x3cd,0x30d,0x35d)]=_0xe8b94b(0x2b2,0x249,0x2d4,0x283)+_0xe8b94b(0x315,0x32e,0x37e,0x32a)+_0xe8b94b(0x2da,0x2f6,0x358,0x314),_0xf2e322[_0x23bbf9(0x3df,0x392,0x33f,0x3cd)]=_0xe8b94b(0x301,0x32d,0x2fb,0x353),_0xf2e322['UJics']=_0xe8b94b(0x2f4,0x3b4,0x2f6,0x347),_0xf2e322[_0xe8b94b(0x270,0x2a7,0x314,0x2b3)]='inline-fle'+'x',_0xf2e322['yUqHQ']=function(_0xa90f41,_0x312bec){return _0xa90f41===_0x312bec;},_0xf2e322[_0xe8b94b(0x2df,0x224,0x228,0x28b)]='RYXZO';const _0x2b52d9=_0xf2e322,_0x34d417=document[_0x23bbf9(0x366,0x316,0x300,0x2fc)+_0xe8b94b(0x2a9,0x2fd,0x2f8,0x2de)](_0x23bbf9(0x2e1,0x331,0x35a,0x2b6)+_0x23bbf9(0x38c,0x3ad,0x3b4,0x36c)),_0x2a390c=document[_0x23bbf9(0x40c,0x3a6,0x417,0x34a)+'tor'](_0x2b52d9[_0xe8b94b(0x2e6,0x2a3,0x2ff,0x29c)]),_0x7d6dd9=document['getElement'+_0xe8b94b(0x347,0x34c,0x30b,0x2de)](_0x2b52d9['HvRHJ']);function _0x23bbf9(_0x4b22a5,_0x4b4420,_0x3a0c61,_0x3b2711){return _0x948dc1(_0x3b2711,_0x4b4420-0xe8,_0x4b4420-0x412,_0x3b2711-0x7);}if(_0x2994e3&&_0x2994e3[_0xe8b94b(0x328,0x2a4,0x2d1,0x30f)](_0x2b52d9[_0x23bbf9(0x354,0x392,0x366,0x34d)])){if(_0x2b52d9['UJics']!==_0xe8b94b(0x267,0x26a,0x2b0,0x2df)){_0x34d417['src']=_0x2994e3,_0x34d417[_0xe8b94b(0x2d5,0x264,0x28f,0x285)][_0xe8b94b(0x26b,0x34e,0x346,0x2da)]=_0x2b52d9[_0xe8b94b(0x362,0x2b4,0x358,0x321)],_0x2a390c[_0x23bbf9(0x321,0x304,0x361,0x33b)][_0x23bbf9(0x354,0x359,0x384,0x398)]=_0x23bbf9(0x2c5,0x32c,0x34f,0x2b7),_0x7d6dd9[_0xe8b94b(0x2fa,0x2cb,0x274,0x285)][_0xe8b94b(0x27c,0x260,0x28a,0x2da)]=_0x2b52d9[_0xe8b94b(0x2cf,0x2e0,0x2d9,0x2b3)];const _0x37ae84=_0x2994e3[_0x23bbf9(0x38a,0x36d,0x2f5,0x31d)](','),_0x2259a9=_0x37ae84[-0x2251+-0x29*-0x6b+0x112e][_0x23bbf9(0x32a,0x36d,0x3db,0x34b)](':')[-0x6ab+-0x125f+0x190b][_0xe8b94b(0x30e,0x2d8,0x343,0x2ee)](';')[0xc93+-0xf*-0x4+0x1*-0xccf];nai3VibeTransferImageMimeType=_0x2259a9,window[_0x23bbf9(0x442,0x3c9,0x34f,0x412)+_0x23bbf9(0x3a3,0x397,0x346,0x336)+'e']=_0x37ae84[0x19dc+-0x417*-0x4+-0x2a37];const _0x26e66c={};_0x26e66c['id']=NAI_VIBE_CACHE_KEY,_0x26e66c[_0x23bbf9(0x391,0x385,0x31b,0x343)]=_0x2994e3,dbs[_0x23bbf9(0x3a7,0x3ea,0x398,0x3d5)+_0x23bbf9(0x357,0x31c,0x348,0x338)](_0x26e66c);}else{_0x2bf83e['src']=_0x19a9a6,_0x2beaf1[_0xe8b94b(0x28e,0x2be,0x284,0x285)]['display']=_0x2b52d9['TShtb'],_0x273972[_0x23bbf9(0x332,0x304,0x325,0x2e9)]['display']=_0x2b52d9[_0x23bbf9(0x369,0x306,0x344,0x35e)],_0x95aeaa['style'][_0x23bbf9(0x36a,0x359,0x3c4,0x39d)]=_0x23bbf9(0x361,0x315,0x2f7,0x357)+'x';const _0x5afec8=_0x2399a7['split'](','),_0x509ed8=_0x5afec8[-0xa12+-0x1633*-0x1+-0xc21][_0xe8b94b(0x299,0x2af,0x28d,0x2ee)](':')[-0x1d*0x95+-0xcb*0x30+0x36f2][_0x23bbf9(0x3d1,0x36d,0x327,0x3e6)](';')[0x1*0x829+-0x13a+-0x163*0x5];_0x413831=_0x509ed8,_0x4c1e8c[_0xe8b94b(0x23d,0x22e,0x257,0x29e)+'fImage']=_0x5afec8[0x8*0x2d+-0x16d3+0x156c];const _0x7c851a={};_0x7c851a['id']=_0x45c5b9,_0x7c851a[_0xe8b94b(0x328,0x309,0x2de,0x306)]=_0xc12e46,_0x1bdef2[_0xe8b94b(0x387,0x3ac,0x338,0x36b)+_0x23bbf9(0x2a4,0x31c,0x2d1,0x2ae)](_0x7c851a);}}else _0x2b52d9[_0xe8b94b(0x3a9,0x37a,0x30d,0x364)](_0x2b52d9[_0x23bbf9(0x33f,0x30a,0x36f,0x29a)],_0x23bbf9(0x35b,0x390,0x34d,0x3f5))?_0x54fc51['error'](_0xe8b94b(0x259,0x262,0x304,0x2ac)+'ing\x20cached'+_0xe8b94b(0x25a,0x2de,0x30f,0x29b)+_0x23bbf9(0x32d,0x334,0x2d3,0x31c),_0x134567):(_0x34d417['src']='',_0x34d417['style']['display']=_0x2b52d9[_0xe8b94b(0x2ba,0x2f1,0x210,0x287)],_0x2a390c[_0xe8b94b(0x2f4,0x298,0x287,0x285)][_0xe8b94b(0x2a3,0x273,0x32e,0x2da)]=_0x23bbf9(0x36e,0x33b,0x38d,0x32b),_0x7d6dd9[_0xe8b94b(0x283,0x244,0x2b4,0x285)][_0xe8b94b(0x34d,0x2fa,0x2d8,0x2da)]=_0x2b52d9['ZvpEc'],window[_0x23bbf9(0x3e0,0x3c9,0x3ab,0x371)+_0x23bbf9(0x31f,0x397,0x33a,0x3a0)+'e']=null);}function removeNovelaiImage(){function _0x3a5f44(_0x211408,_0x273b0a,_0x1a2e07,_0x386fa1){return _0xe4184a(_0x211408-0x10b,_0x1a2e07-0x23,_0x273b0a,_0x386fa1-0x1c6);}updateNovelaiImagePreview(null),dbs[_0x3a5f44(0xda,0xe4,0x85,0xef)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x4eaf3b){function _0x246e70(_0x11f4d3,_0x1a6115,_0x321f96,_0x153996){return _0x948dc1(_0x1a6115,_0x1a6115-0x1ca,_0x153996-0x57b,_0x153996-0xe);}const _0x5f5d9a={'YDGki':function(_0x3c6cbd,_0x8a8842,_0x229068){return _0x3c6cbd(_0x8a8842,_0x229068);},'vUZTm':function(_0x218253,_0x13c962){return _0x218253(_0x13c962);},'aJIrJ':_0x246e70(0x51d,0x53d,0x4e7,0x544)+_0x1a4547(0xd6,0x114,0x12a,0x9c)+_0x246e70(0x405,0x4c4,0x46f,0x474)+':','OoRRd':function(_0x335c9f,_0x175d77){return _0x335c9f+_0x175d77;}},_0x21d668=_0x4eaf3b[_0x246e70(0x4ab,0x48f,0x458,0x49f)]['files'][0x543*-0x1+-0x2*0x51c+0x1*0xf7b];if(!_0x21d668)return;function _0x1a4547(_0x2755b2,_0x57c8a1,_0x40ee09,_0x19bb29){return _0xe4184a(_0x2755b2-0x12d,_0x57c8a1-0xef,_0x19bb29,_0x19bb29-0x12b);}try{const _0x35e9f4=await _0x5f5d9a[_0x1a4547(0x230,0x1e7,0x23a,0x21c)](processUploadedImage,_0x21d668,!![]);_0x5f5d9a['vUZTm'](updateNovelaiImagePreview,_0x35e9f4);}catch(_0x2474ef){console['error'](_0x5f5d9a[_0x246e70(0x566,0x4c0,0x56a,0x51b)],_0x2474ef),_0x5f5d9a[_0x1a4547(0x95,0x10f,0x152,0x110)](alert,_0x5f5d9a[_0x246e70(0x53a,0x46a,0x473,0x4e1)]('图片处理失败:\x20',_0x2474ef[_0x246e70(0x5ae,0x543,0x4d2,0x533)]));}}function updateNovelaiCharRefImagePreview(_0x556b26){const _0x1dc54c={};_0x1dc54c[_0x10d14d(0x69d,0x663,0x60c,0x60b)]=_0x10d14d(0x612,0x61c,0x5c3,0x5ed)+_0x10d14d(0x730,0x6b9,0x66e,0x6d3)+'age-previe'+_0x5ac1f6(0x495,0x4f1,0x476,0x4ac)+'r\x20.st-chat'+_0x10d14d(0x6b7,0x696,0x676,0x6c3)+'laceholder',_0x1dc54c[_0x5ac1f6(0x545,0x4ce,0x4e3,0x48a)]='novelai-re'+'move-char-'+_0x10d14d(0x6f6,0x6bb,0x687,0x681)+'btn',_0x1dc54c['FVdxz']='block';function _0x10d14d(_0x4e6c38,_0x390852,_0x176c21,_0x58ab8c){return _0x948dc1(_0x176c21,_0x390852-0x5,_0x390852-0x6e9,_0x58ab8c-0x1b8);}function _0x5ac1f6(_0x2de4d6,_0x10d9ce,_0xd887b,_0x33636e){return _0x948dc1(_0x2de4d6,_0x10d9ce-0x7a,_0x10d9ce-0x546,_0x33636e-0x1a3);}_0x1dc54c[_0x10d14d(0x6ed,0x683,0x6fa,0x60f)]=_0x5ac1f6(0x47d,0x449,0x418,0x3d4)+'x',_0x1dc54c[_0x10d14d(0x584,0x5fb,0x609,0x64a)]=_0x5ac1f6(0x538,0x513,0x550,0x545),_0x1dc54c[_0x10d14d(0x680,0x6b4,0x6da,0x6f6)]='none',_0x1dc54c[_0x10d14d(0x657,0x5f5,0x642,0x5c6)]=_0x10d14d(0x5c8,0x612,0x67b,0x680);const _0x2a7b5b=_0x1dc54c,_0xce619e=document['getElement'+_0x5ac1f6(0x4e3,0x491,0x4e1,0x465)](_0x5ac1f6(0x4a7,0x465,0x439,0x4ae)+_0x5ac1f6(0x425,0x477,0x426,0x418)+_0x5ac1f6(0x51b,0x4e4,0x481,0x534)),_0x295b02=document[_0x10d14d(0x654,0x67d,0x6e9,0x6b9)+_0x5ac1f6(0x48f,0x4f2,0x4a6,0x4fc)](_0x2a7b5b[_0x10d14d(0x681,0x663,0x6ba,0x5fc)]),_0x4b0376=document[_0x5ac1f6(0x412,0x44a,0x40e,0x3dc)+_0x5ac1f6(0x441,0x491,0x4f7,0x4f8)](_0x2a7b5b[_0x5ac1f6(0x4f2,0x4ce,0x48c,0x4f2)]);if(_0x556b26&&_0x556b26['startsWith'](_0x5ac1f6(0x49a,0x506,0x537,0x570))){_0xce619e['src']=_0x556b26,_0xce619e[_0x5ac1f6(0x3f5,0x438,0x416,0x47d)][_0x10d14d(0x66a,0x630,0x612,0x5fa)]=_0x2a7b5b[_0x10d14d(0x601,0x63e,0x5f3,0x67d)],_0x295b02['style'][_0x5ac1f6(0x472,0x48d,0x507,0x4fe)]=_0x10d14d(0x5b7,0x603,0x5c5,0x59b),_0x4b0376[_0x5ac1f6(0x3cf,0x438,0x454,0x451)]['display']=_0x2a7b5b[_0x5ac1f6(0x54e,0x4e0,0x4ca,0x4b6)];const _0xce6f6=_0x556b26[_0x10d14d(0x61e,0x644,0x5e5,0x686)](','),_0x3de1b7=_0xce6f6[-0x11*-0x10d+0x17bf*0x1+-0x1*0x299c][_0x5ac1f6(0x456,0x4a1,0x490,0x464)](':')[0xc05+0x914+0x21c*-0xa][_0x5ac1f6(0x4f4,0x4a1,0x50b,0x4a9)](';')[-0x1148+0x2520+-0x9ec*0x2];nai3CharRefImageMimeType=_0x3de1b7,window[_0x10d14d(0x58c,0x5f4,0x630,0x5b7)+_0x10d14d(0x61a,0x65a,0x6d1,0x672)]=_0xce6f6[-0x16f4+0xb4e*-0x2+0x2d91];const _0x3b6454={};_0x3b6454['id']=NAI_CHAR_REF_CACHE_KEY,_0x3b6454['data']=_0x556b26,dbs[_0x5ac1f6(0x4de,0x51e,0x4c8,0x53a)+_0x5ac1f6(0x408,0x450,0x451,0x494)](_0x3b6454);}else{const _0x5be11d=_0x2a7b5b[_0x5ac1f6(0x42c,0x458,0x40d,0x4b9)][_0x10d14d(0x5e4,0x644,0x5e7,0x69c)]('|');let _0x2f706f=-0x1adf*-0x1+0x1*-0x1aed+-0xe*-0x1;while(!![]){switch(_0x5be11d[_0x2f706f++]){case'0':window[_0x5ac1f6(0x3fb,0x451,0x3e2,0x497)+_0x5ac1f6(0x43b,0x4b7,0x47a,0x4e9)]=null;continue;case'1':_0xce619e[_0x5ac1f6(0x3ed,0x438,0x46d,0x42e)]['display']=_0x2a7b5b['JvHUZ'];continue;case'2':_0xce619e[_0x10d14d(0x6bc,0x6bf,0x682,0x69d)]='';continue;case'3':_0x295b02['style'][_0x5ac1f6(0x473,0x48d,0x448,0x4ab)]=_0x2a7b5b['QyIdx'];continue;case'4':_0x4b0376[_0x10d14d(0x586,0x5db,0x5b1,0x606)][_0x10d14d(0x673,0x630,0x5c1,0x60c)]=_0x2a7b5b[_0x10d14d(0x728,0x6b4,0x66c,0x6b4)];continue;}break;}}}function removeNovelaiCharRefImage(){function _0x192629(_0x320ef5,_0x39e10d,_0x5c79fb,_0x2f24c6){return _0x948dc1(_0x39e10d,_0x39e10d-0xa4,_0x5c79fb-0xd5,_0x2f24c6-0x1d5);}updateNovelaiCharRefImagePreview(null),dbs[_0x192629(0x69,-0x6a,0x0,-0x8)+'e'](NAI_CHAR_REF_CACHE_KEY);}function _0x948dc1(_0x2a55bb,_0x4118c5,_0x2ebed2,_0x1bfc83){return _0x43bf(_0x2ebed2- -0x30e,_0x2a55bb);}async function handleNovelaiCharRefImageUpload(_0x1402a4){const _0x40384c={'zWLcL':function(_0x2a25a1,_0x4a205e){return _0x2a25a1(_0x4a205e);},'gHyOY':function(_0x300352,_0xbb28b5){return _0x300352(_0xbb28b5);},'RtLJb':function(_0x37207a,_0x3a8199){return _0x37207a(_0x3a8199);},'FbWKc':function(_0x4f6e41,_0x416d77){return _0x4f6e41===_0x416d77;},'LRXSN':_0x5243a3(0x66,0x97,0x70,0xd2),'ZszzB':_0x5243a3(0x102,0x118,0xf6,0x115),'WoBhu':_0x5243a3(0xb1,0x120,0x118,0x14a)+_0x5243a3(0xb1,0x21,0x3d,0xb4)+_0x5243a3(0x102,0xab,0x116,0xd3)+'ref\x20image:','FXHPp':function(_0xc195cc,_0xc745f6){return _0xc195cc+_0xc745f6;},'Ypjcc':_0x5ca99c(0x27d,0x2a6,0x200,0x22d)},_0x547028=_0x1402a4[_0x5243a3(0x88,0x40,0x73,-0x3)][_0x5ca99c(0x26b,0x284,0x1ee,0x239)][-0x77*-0x1f+0x1fbd+-0x16*0x219];function _0x5243a3(_0xa2bce0,_0x11d574,_0x4b6d96,_0x42a69d){return _0x948dc1(_0x11d574,_0x11d574-0xe5,_0x4b6d96-0x14f,_0x42a69d-0x161);}if(!_0x547028)return;function _0x5ca99c(_0x30b7b0,_0x238e17,_0x37ae8c,_0x3f30a9){return _0x948dc1(_0x37ae8c,_0x238e17-0x1e3,_0x3f30a9-0x2d9,_0x3f30a9-0xae);}try{const _0x6a293c=await _0x40384c['gHyOY'](processUploadedImage,_0x547028);_0x40384c[_0x5ca99c(0x221,0x229,0x1e6,0x1c3)](updateNovelaiCharRefImagePreview,_0x6a293c);}catch(_0x42a007){_0x40384c['FbWKc'](_0x40384c[_0x5243a3(0x108,0x130,0x114,0xda)],_0x40384c['ZszzB'])?_0x40384c[_0x5ca99c(0x296,0x2bb,0x29b,0x256)](_0x1a665f,_0xe64520[_0x5243a3(0x6b,0x67,0xc2,0xa4)]):(console['error'](_0x40384c[_0x5ca99c(0x21e,0x293,0x241,0x21e)],_0x42a007),alert(_0x40384c['FXHPp'](_0x40384c[_0x5243a3(0x14d,0x73,0xde,0xde)],_0x42a007['message'])));}}function _0x5cea(){const _0x1a581c=['Dg9tDhjPBMC','nJm0mJK1mLbwvMnwqW','zMXLEa','vxHwrLe','C3rVCMvezwXLDa','nJG5ngPkEg1tuW','tMfTzq','y3rvuKW','l3vWBg9Hzc9PBq','ndC3s2XKB3Dq','z2vFBMfPx2nOyq','t0XxuuO','i25VDMvSywKTyW','vvjm','tg9HzgvKienVBq','y29UC3rYDwn0BW','wxLgAum','yMj1qMG','ruf2u3C','CuHTCLO','CMvZDwX0','rKDiDgW','nZbXsK1Owfy','DgHLig5LDYbMBW','C3rYAw5N','s1rwwhC','nhWXFdb8m3WY','zxCTy29UDgfPBG','Ce5ss2G','tNnTq2q','v29cAhu','mxW0Fdb8nxWYFa','zgLZCgXHEq','zKvcvxm','tgziwgu','zxjYB3i','qNLjza','rhPYvuy','y2HHBMDL','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','sK9huxC','zxiGlNn0lwnOyq','ztOG','q0DjwMm','BgfPx3zPyMvFDa','5zU+54Mh5Ase55cg5AsX6lsLoIa','rLzKEhO','5lIk5lYG5AsX6lsLoIa','qKf3wNm','BgfPx2nOyxjFCG','x25HAv9JAgfYxW','AgTdDMe','C3bSAxq','lxjLzI1PBwfNzq','kcGOlISPkYKRkq','i25VDMvSywKTAq','BfDmquW','zMLSzxm','r0TtBgO','CgXHy2vOB2XKzq','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','te1fuwy','t29suMq','rvffExi','uejOyu4','5zMO6l+u5zUE5PwW5O2UoIa','ndy0meLstwrIwq','ywDLoG','AKvoBg4','y3jLyxrLt2jQzq','zw1VDMuTAw1HzW','vwHdrgO','Bg9N','zKLTywDL','AgfYifjLzIbPBq','zgf0yq','sxflsMC','vhPjtfe','Aw5NignHy2HLza','t0XSsfy','C3rYAw5NAwz5','x3jLzG','zNbPsNy','Bwv0Ag9K','C3rHCNrZv2L0Aa','ELDmy0W','DKL4u0K','zs1IDg4','sgvsBLy','lwj0BG','z2uY','seXbr1G','DhfOtg4','yw5ZzMvYsw1HzW','zNLvssbPBwfNzq','Dhu4lwLTywDLlq','t0nYquW','s1DOAMK','tvPvywK','yM9KEq','q0rNvLu','BwfNztO','vfnODgi','wxbQy2m','rMnkwgS','DePsuw0','igzYB20GB2XKia','mtm4mZiWz1zLD2LQ','CxvLCNLtzwXLyW','qw52z2W','yMXVyG','Bw92zs1PBwfNzq','ExvPx3jLzL9PBq','uuPVy0u','sgngAfO','z2vFBM92zwXHAq','rMLmt1i','A2fVDhvWAwfU','CL9Yzwy','zwXLy3qTAw1HzW','yuPjCKO','6zsz6k+V6k+M5OofoG','6k+M5OofoIa','y0rHqu0','v3HwsgK','zwzFAw1Hz2u','ienVBwz5vuKGAq','CLLAswC','DvLYwee','Aw1Hz2vjBNb1Da','mty4mJfszfP3vgq','DY1JB250ywLUzq','Dg9Y','DtGTAw1Hz2uTCa','A1fHyKe','BNP4zuW','ihjLlxvWBg9Hza','yxqUifbSzwfZzq','s3LIvvC','i25VDMvSywKTCW','CNfnCgq','y2XPy2S','yxbWBhK','BMfPm1zPyMvuCG','BwvZC2fNzq','Dgv4Da','CMvHzefZrgf0yq','ANnVBG','BwfNzs1WCMv2Aq','t09wqNu','reTRA1G','y0XjEhO','zgf0ytPPBwfNzq','wurhA2K','y2fJAgvFy29TzG','yMXVy2S','x25VDMvSywK','tfjyu04','yKvzrKS','zwXbssbJAgfYia','mhWZFdr8mNWX','rxjYB3iGChjVyW','shzsseO','sNzivvO','mtmYnMjvwgPnua','mNWXFdn8nhWW','ssbbueNLNldLNydJGii','B25SB2fKzw5K','AgfYlxjLzI1PBq','EvvXsfe','CMvMlwLTywDLlq','zLjNDeW','y29TzNL1As1Yzq','z0jhzuu','C3jJ','DMTqBeO','C3rVCMvszwfKvW','y2fJAguGzM9YBq','qLfIrha','oda3mdDHDejRwuu','B3bLBKrc','DgzUA2S','uxPID0S','i2nVBwz5DwKTAq','DLvAvg0','uNrmsMi','vLbADMC','i2nVBwz5DwKTCG','CMv2B2TLt2jQzq','zxnZAw5Nie5VDG','y2fJAgvFBM92zq','BM92zwXHAs1Yzq','CMvMigLTywDLoG','C3r5Bgu','BwnPt0e','wNzWrwm','wKvtEhm','wLrXD2u','ofLksKDjwq','tKHlwuK','zwXbssbPBwfNzq','yxbWzw5K','CeP1uuC','C0TPvM0','C3rVCMvszwfKtW','BwHKtgO','zMLUza','zwXLy3qTy2HHCG','ywDL','vwz5C2q','Aw5SAw5LlwzSzq','z2v0rwXLBwvUDa','CfLHCwu','i2LTywDLsw5WDq','y29TzNL1AwnHBG','ie5VDMvSquKGvG','AuLmB0u','CML0zq','BMfPm0nOyxjszq','uxLjzhG','CM1HDc4','BMX5','thbTBhu','rxjqBee','mti4wfnftujd','yurWvKK','y0rez1a','wxHewvO','vxztsM8','vxHwAwO','y29TzNL1AvvYBa','i25VDMvSywKTCG','rxjYB3iGBg9Hza','BM9Uzq','C2vHCMnO','5zUE5PwW5O2UoG','vuNLM77NIyC6ia','BMfTzq','ChjLDMLLD0LTyq','wNfTBfG','uNzMBeW','AwjLigLTywDLoG','5lUo57Yt5A2y5yQG6l29q29TzNK','DgfYz2v0','qLbrsfK','C2vYDMvYrMLSzq'];_0x5cea=function(){return _0x1a581c;};return _0x5cea();}function updateComfyUIImagePreview(_0x1461b7){const _0x23307a={'IqKJg':'previewIma'+_0x502c7f(0xc,0xab,0x4c,0x33),'kQabA':'novelai-re'+'move-image'+_0x502c7f(0xa5,0x41,0x32,0x55),'GKSlj':_0x502c7f(0x21,0xbe,0x74,0x20),'bEYFK':'none','WxVHi':_0x502c7f(-0x29,-0x61,-0xe,-0x67),'mhdLj':_0x502c7f(0x22,-0x9d,-0x26,0x36),'JOGQw':function(_0x4b48a3,_0x31e316){return _0x4b48a3(_0x31e316);},'OLWQJ':'请先设置ComfyU'+_0x502c7f(0x65,0xda,0x7f,0x87),'eaPdm':_0x502c7f(0x36,0x37,0x85,0x6d)+_0x3768a1(-0x21,0x3d,0x29,-0x8)+_0x502c7f(0x3,0x20,0x32,0x9f),'TzILQ':'blob:','JyUoD':function(_0x6e0e38,_0x5abe1f){return _0x6e0e38!==_0x5abe1f;},'QzbwK':_0x3768a1(-0x61,-0x9e,0xc,-0xbc),'HLAGX':'inline-fle'+'x','pYaqe':_0x3768a1(-0x15,-0x82,0x31,-0x59)},_0x3d8a5c=document[_0x502c7f(0x5,-0x8e,-0x4b,0x1)+'ById'](_0x502c7f(0x1f,-0x5c,-0x30,-0xa5)+_0x3768a1(-0x36,-0x92,0x12,-0x84)),_0x3d7663=document['querySelec'+_0x3768a1(-0xc,0x47,-0x51,-0x25)](_0x3768a1(-0xd0,-0xd3,-0x83,-0x109)+'mage-previ'+_0x3768a1(-0x76,-0xcc,-0xb0,-0x20)+_0x3768a1(-0x68,-0x51,-0xd,-0x34)+_0x502c7f(0x4c,0x36,0x38,0x66)+_0x3768a1(-0x56,0x17,-0x55,0x2)+'r');function _0x502c7f(_0x49b136,_0x2ad559,_0x1d6530,_0x238b9b){return _0x948dc1(_0x238b9b,_0x2ad559-0x14f,_0x1d6530-0xb1,_0x238b9b-0x145);}function _0x3768a1(_0x431050,_0x4f086c,_0x1254ce,_0x4d0e46){return _0x948dc1(_0x1254ce,_0x4f086c-0x156,_0x431050-0x48,_0x4d0e46-0x43);}const _0x29db28=document[_0x3768a1(-0xb4,-0x55,-0xc5,-0xa0)+'ById'](_0x23307a['eaPdm']);_0x3d8a5c[_0x502c7f(0x5d,0x50,0x87,0xba)]&&_0x3d8a5c[_0x502c7f(0x1d,0xf4,0x87,0xb9)][_0x3768a1(-0x3c,-0xa5,-0x33,0x1f)](_0x23307a[_0x3768a1(-0x43,-0x43,-0xa6,0x1b)])&&_0x23307a['JyUoD'](_0x3d8a5c['src'],_0x1461b7)&&URL[_0x502c7f(-0xb0,-0xaa,-0x62,0x1)+_0x502c7f(0x16,-0x7f,-0x21,-0x93)](_0x3d8a5c[_0x502c7f(0xff,0xcf,0x87,0x77)]);if(_0x1461b7){if(_0x23307a['QzbwK']===_0x23307a[_0x3768a1(-0xd1,-0x91,-0xc4,-0xce)])_0x3d8a5c['src']=_0x1461b7,_0x3d8a5c[_0x3768a1(-0xc6,-0x69,-0x4e,-0x85)]['display']='block',_0x3d7663[_0x3768a1(-0xc6,-0x107,-0xd6,-0xb5)]['display']=_0x23307a[_0x502c7f(0x1b,0xb2,0x77,0xd4)],_0x29db28['style'][_0x502c7f(-0x48,-0xe,-0x8,-0x76)]=_0x23307a[_0x3768a1(-0x35,-0x9a,-0x81,-0xa3)];else{const _0x3cc659=_0xb20302['getElement'+_0x3768a1(-0x6d,-0x30,-0xe,0x3)](_0x23307a[_0x3768a1(-0x44,-0x36,-0xf,-0xb5)]),_0x404382=_0x5848f5[_0x502c7f(-0xc,0x85,0x45,-0x2f)+'tor'](_0x502c7f(0x5f,-0x51,0xf,-0x2e)+_0x3768a1(0x4,-0x26,-0x29,-0x1f)+_0x3768a1(-0x76,0x1,-0x58,-0xdd)+_0x3768a1(-0x68,-0x5e,-0xcc,0x7)+_0x502c7f(0x0,0x97,0x38,0x4c)+_0x3768a1(-0x56,-0x73,0x1f,-0x7)+'r'),_0x3251ab=_0x5cd196[_0x502c7f(-0x32,0x12,-0x4b,-0x9e)+_0x3768a1(-0x6d,-0x19,-0x9a,-0x2)](_0x23307a[_0x502c7f(0x9b,0x69,0x5f,0x4)]);if(_0x280575&&_0x410248[_0x502c7f(0x93,0x76,0x2d,0x21)](_0x502c7f(0x52,-0x3,0x71,0xbe))){_0x3cc659[_0x3768a1(0x1e,0x95,-0x59,0x8a)]=_0xf011cb,_0x3cc659[_0x502c7f(-0xb3,-0x42,-0x5d,-0x9a)]['display']=_0x23307a[_0x502c7f(0x7c,0x27,0x12,0x79)],_0x404382[_0x3768a1(-0xc6,-0x126,-0xc5,-0x4e)][_0x502c7f(0x5d,0x24,-0x8,0x5d)]=_0x23307a[_0x502c7f(0xec,0xa6,0x77,0x15)],_0x3251ab[_0x502c7f(0x12,-0x81,-0x5d,-0x4d)][_0x502c7f(-0x5d,0x67,-0x8,-0x5)]='inline-fle'+'x';const _0x5c6fce=_0x34db1c[_0x3768a1(-0x5d,-0x67,0xf,-0x59)](','),_0x4e86c9=_0x5c6fce[-0x1e77+-0x270d+-0x4584*-0x1]['split'](':')[0x1306*-0x1+-0x977*0x1+0x209*0xe][_0x3768a1(-0x5d,-0x4e,-0x41,-0x17)](';')[-0x135*-0x13+-0xaea+-0xc05];_0x457992=_0x4e86c9,_0x11479a['nai3VibeTr'+_0x3768a1(-0x33,-0x65,0x3b,0x15)+'e']=_0x5c6fce[-0x8fe*0x3+-0x3fa+0x1ef5];const _0x57c4a4={};_0x57c4a4['id']=_0x37f354,_0x57c4a4['data']=_0x193b7f,_0x418a6e[_0x3768a1(0x20,-0x43,-0xd,0x7e)+_0x3768a1(-0xae,-0x80,-0x7f,-0x78)](_0x57c4a4);}else{const _0x5521e2=_0x23307a[_0x3768a1(-0x14,0x30,-0x8e,-0x13)][_0x3768a1(-0x5d,-0xb0,-0x24,-0x6d)]('|');let _0x4e209f=0x1ccf+0xb*0x33f+0x2*-0x2042;while(!![]){switch(_0x5521e2[_0x4e209f++]){case'0':_0x404382[_0x3768a1(-0xc6,-0x8a,-0xf9,-0x83)][_0x502c7f(-0x78,-0x6c,-0x8,-0x17)]=_0x23307a[_0x502c7f(-0x75,-0x2b,-0x51,0x19)];continue;case'1':_0x3cc659[_0x502c7f(-0x87,-0x3f,-0x5d,-0xb9)][_0x3768a1(-0x71,-0x7e,-0x89,-0xa3)]=_0x23307a['bEYFK'];continue;case'2':_0x1c1c00[_0x502c7f(0x37,0xd8,0x68,0x35)+_0x502c7f(-0x1b,0x3,0x36,0x75)+'e']=null;continue;case'3':_0x3251ab[_0x502c7f(-0xd7,-0x64,-0x5d,0x4)]['display']=_0x3768a1(-0x9e,-0x8d,-0x7b,-0xbf);continue;case'4':_0x3cc659[_0x502c7f(0x29,0xac,0x87,0x56)]='';continue;}break;}}}}else{if(_0x23307a[_0x502c7f(0x1f,-0x4b,-0x4a,-0x11)]!=='cDaAM'){_0x23307a[_0x502c7f(-0x9,-0x62,0x0,-0x6b)](_0x24bf58,_0x23307a[_0x502c7f(-0x75,-0x27,-0x1d,-0x2d)]),_0x2ae034();return;}else{const _0x4b0b23=(_0x3768a1(-0x72,0x5,-0x75,-0x5c)+'3')['split']('|');let _0x35a6a4=0x1*0x1ecd+0xbbc+-0x2a89;while(!![]){switch(_0x4b0b23[_0x35a6a4++]){case'0':_0x3d7663[_0x502c7f(-0xd3,-0xc2,-0x5d,-0x57)][_0x502c7f(0x6c,-0x25,-0x8,-0x53)]=_0x3768a1(-0x8f,-0x8b,-0xf1,-0x4f);continue;case'1':_0x3d8a5c[_0x502c7f(0x9a,0x17,0x87,0xb2)]='';continue;case'2':window['comfyuican'+'kaotupian']=null;continue;case'3':comfyuiImageObjectURL=null;continue;case'4':_0x3d8a5c[_0x3768a1(-0xc6,-0xc1,-0x10b,-0x73)][_0x3768a1(-0x71,-0x3b,-0x56,-0xcd)]=_0x23307a[_0x502c7f(0x93,0x38,0x77,0x56)];continue;case'5':_0x29db28['style']['display']=_0x23307a[_0x502c7f(0x3f,0x3a,0x77,0xaf)];continue;}break;}}}}function removeComfyUIImage(){const _0x3a34f6={'EAvSw':function(_0x4eb22a,_0x28206c){return _0x4eb22a(_0x28206c);}};function _0xeac9f8(_0x5cc2b9,_0x249b87,_0x1922ce,_0x1238c6){return _0xe4184a(_0x5cc2b9-0xe1,_0x1238c6-0x276,_0x249b87,_0x1238c6-0x7c);}_0x3a34f6[_0xdab42f(0x39c,0x3b2,0x41e,0x413)](updateComfyUIImagePreview,null);function _0xdab42f(_0x39cb35,_0x33a558,_0x1be56c,_0x590887){return _0x948dc1(_0x1be56c,_0x33a558-0x10f,_0x590887-0x4da,_0x590887-0x1ef);}dbs[_0xeac9f8(0x2d1,0x2f7,0x2ba,0x2d8)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x10672a){const _0x303a5b={'pNRKh':_0xcc35bb(-0x160,-0x1d2,-0x18f,-0x122),'qHmrZ':'IVKhH','cLIxz':function(_0x30770c,_0x341c6e){return _0x30770c(_0x341c6e);},'GKNYI':function(_0x1b0bc2,_0x1e41e9){return _0x1b0bc2+_0x1e41e9;},'tfnkk':'image','UhCDj':'请先设置ComfyU'+_0xcc35bb(-0x131,-0x175,-0x10a,-0x100),'BQbDp':function(_0x2b2c1e){return _0x2b2c1e();},'GHVWq':function(_0x647d1,_0x2e1f43,_0x1a36cc){return _0x647d1(_0x2e1f43,_0x1a36cc);},'KTVXw':function(_0x250372,_0x4e28ec){return _0x250372!==_0x4e28ec;},'DKkkX':function(_0x2747ac,_0x7755ba){return _0x2747ac(_0x7755ba);},'LeeUK':'上传成功,\x20服务器返'+_0x322e4d(0x249,0x1f6,0x1c9,0x226),'KWhji':function(_0x2305c7,_0x76fc19){return _0x2305c7+_0x76fc19;},'uYrXA':_0x322e4d(0x267,0x230,0x1f6,0x252),'ZTqwe':_0x322e4d(0x244,0x27b,0x217,0x289),'CDgVU':function(_0x167f10){return _0x167f10();},'BPQHY':_0xcc35bb(-0x178,-0x178,-0x103,-0x8a),'VPZvg':function(_0xda44ce,_0x5d2a6a){return _0xda44ce+_0x5d2a6a;},'OLlHV':_0x322e4d(0x21a,0x23e,0x238,0x265)+':\x20','hkCva':_0xcc35bb(-0x118,-0x1d8,-0x174,-0x1b1)+':'};function _0xcc35bb(_0x5eb742,_0xad14e1,_0x20ab8a,_0xcadde){return _0xe4184a(_0x5eb742-0x48,_0x20ab8a- -0x20f,_0xcadde,_0xcadde-0x1c4);}const _0x3b0e89=extension_settings[extensionName];function _0x322e4d(_0x5f5a77,_0x18b105,_0x20d744,_0x30fc30){return _0xe4184a(_0x5f5a77-0x6f,_0x18b105-0x1a3,_0x20d744,_0x30fc30-0x41);}const _0x4b18ee=_0x10672a[_0xcc35bb(-0x210,-0x223,-0x1b4,-0x1c0)]['files'][-0x1*0xbce+0x2d*0x6e+-0x788];if(!_0x4b18ee)return;try{const _0x557587=await processUploadedImageToBlob(_0x4b18ee),_0x2620b3=URL[_0x322e4d(0x1f1,0x247,0x276,0x21e)+_0x322e4d(0x22f,0x208,0x26b,0x20d)](_0x557587);comfyuiImageObjectURL=_0x2620b3,_0x303a5b[_0x322e4d(0x300,0x299,0x2b8,0x2ee)](updateComfyUIImagePreview,_0x2620b3);const _0x3fdc6b=new FormData();_0x3fdc6b[_0xcc35bb(-0x20f,-0x1f5,-0x1de,-0x1e1)](_0x303a5b[_0xcc35bb(-0x1fc,-0x1f7,-0x1f2,-0x21a)],_0x557587,_0x4b18ee[_0x322e4d(0x26f,0x1f8,0x197,0x211)]);let _0x113588=_0x3b0e89[_0xcc35bb(-0x195,-0x1bf,-0x1c1,-0x1ba)]['trim']();if(!_0x113588){_0x303a5b[_0xcc35bb(-0x125,-0x135,-0x119,-0x18b)](alert,_0x303a5b[_0x322e4d(0x226,0x249,0x22f,0x28d)]),_0x303a5b[_0x322e4d(0x22f,0x1bd,0x150,0x1ec)](removeComfyUIImage);return;}const _0x38999f={};_0x38999f[_0xcc35bb(-0xf4,-0x1bc,-0x15d,-0x107)]='POST',_0x38999f[_0xcc35bb(-0x135,-0xf5,-0x14d,-0x131)]=_0x3fdc6b;const _0x2af1f7=await _0x303a5b['GHVWq'](fetch,_0x113588+(_0x322e4d(0x214,0x209,0x20a,0x25d)+_0x322e4d(0x1ca,0x1db,0x18b,0x168)),_0x38999f);if(_0x2af1f7['ok']){if(_0x303a5b[_0x322e4d(0x22e,0x21a,0x1b6,0x1d5)](_0x322e4d(0x278,0x26a,0x29d,0x264),'FcJXk')){const _0x165686=_0xc2f94c?function(){function _0x314c17(_0x192d0c,_0x3ae3c4,_0x3fdd3c,_0x338a70){return _0x322e4d(_0x192d0c-0x1bd,_0x338a70- -0x297,_0x3ae3c4,_0x338a70-0x9d);}if(_0x21694a){const _0x512153=_0x259850[_0x314c17(0x30,-0x38,0x69,-0x7)](_0x45ae02,arguments);return _0x4c99b6=null,_0x512153;}}:function(){};return _0x1f3825=![],_0x165686;}else{const _0x54b49b=await _0x2af1f7[_0x322e4d(0x306,0x295,0x291,0x221)]();window['comfyuican'+'kaotupian']=_0x54b49b['name'],_0x303a5b[_0x322e4d(0x2a9,0x298,0x22b,0x2ea)](addLog,_0xcc35bb(-0x162,-0x1a8,-0x175,-0x109)+_0xcc35bb(-0x16c,-0x1eb,-0x16f,-0x19c)+JSON['stringify'](_0x54b49b)),console[_0x322e4d(0x207,0x24a,0x234,0x201)](_0x303a5b['LeeUK'],_0x54b49b);const _0x31bc3f=new FileReader();_0x31bc3f[_0xcc35bb(-0x148,-0xdf,-0x109,-0x17a)]=()=>{function _0x29d3e9(_0xc1baa2,_0x425a12,_0x32c628,_0x416d1d){return _0xcc35bb(_0xc1baa2-0x10f,_0x425a12-0xab,_0xc1baa2-0x611,_0x416d1d);}function _0x56fd22(_0x1f1ee3,_0x245d75,_0x1e3189,_0x2eb530){return _0x322e4d(_0x1f1ee3-0x1c7,_0x245d75- -0xb8,_0x1e3189,_0x2eb530-0x195);}if(_0x303a5b[_0x29d3e9(0x47c,0x44c,0x470,0x497)]!==_0x303a5b[_0x56fd22(0x14c,0x15c,0x112,0x111)]){const _0x67214a=_0x31bc3f[_0x56fd22(0x160,0x15d,0x14d,0x11d)],_0x4af323={};_0x4af323['data']=_0x67214a,_0x4af323[_0x56fd22(0xe3,0x148,0x12c,0x110)+_0x56fd22(0xf9,0x14f,0xf8,0x12b)]=_0x54b49b[_0x29d3e9(0x457,0x416,0x4ab,0x494)];const _0x3d03e1=_0x4af323,_0x53f63b={};_0x53f63b['id']=COMFYUI_REF_CACHE_KEY,_0x53f63b[_0x56fd22(0x19b,0x195,0x14e,0x17a)]=_0x3d03e1,dbs['storeReadW'+'rite'](_0x53f63b);}else _0x1c17fd(null),_0x5f22e1[_0x29d3e9(0x464,0x4c4,0x4c0,0x4d6)+'e'](_0x301464);},_0x31bc3f[_0x322e4d(0x2a6,0x294,0x29f,0x2e3)+_0x322e4d(0x1eb,0x20e,0x1e2,0x192)](_0x557587);}}else{const _0x367f9f=await _0x2af1f7[_0xcc35bb(-0xbf,-0xda,-0x11f,-0xda)]();_0x303a5b[_0x322e4d(0x304,0x299,0x291,0x2a2)](alert,_0x303a5b[_0x322e4d(0x212,0x263,0x279,0x20f)](_0x303a5b[_0xcc35bb(-0xe6,-0xe2,-0x130,-0x15f)],_0x367f9f)),_0x303a5b[_0xcc35bb(-0xcb,-0x195,-0x119,-0x16a)](addLog,_0xcc35bb(-0x195,-0x179,-0x18a,-0x175)+_0x322e4d(0x222,0x27c,0x29f,0x203)+_0x367f9f),console[_0x322e4d(0x1c7,0x224,0x1fe,0x292)](_0x303a5b[_0xcc35bb(-0x252,-0x221,-0x1e2,-0x254)],_0x367f9f),_0x303a5b[_0xcc35bb(-0xe6,-0xd6,-0x14c,-0x165)](removeComfyUIImage);}}catch(_0x170831){_0x303a5b[_0xcc35bb(-0x15a,-0x1b1,-0x198,-0x1ea)]('QYaZn',_0x303a5b[_0x322e4d(0x1ca,0x1ff,0x210,0x20a)])?(_0x303a5b[_0x322e4d(0x278,0x299,0x281,0x2a8)](alert,_0x303a5b[_0xcc35bb(-0x22a,-0x21f,-0x1ed,-0x264)](_0x303a5b[_0xcc35bb(-0x14d,-0x190,-0x161,-0xf1)],_0x170831[_0xcc35bb(-0x10d,-0xcb,-0x120,-0x14b)])),console[_0x322e4d(0x202,0x224,0x273,0x23e)](_0x303a5b[_0x322e4d(0x29f,0x234,0x22c,0x254)],_0x170831),addLog(_0xcc35bb(-0x11e,-0x1f7,-0x18a,-0x1f1)+_0x322e4d(0x2b7,0x27c,0x21a,0x218)+JSON[_0x322e4d(0x2bc,0x252,0x237,0x2b2)](_0x170831)),_0x303a5b[_0x322e4d(0x25a,0x266,0x25a,0x24c)](removeComfyUIImage)):(_0xd8389[_0xcc35bb(-0x1aa,-0x159,-0x18e,-0x162)](_0xcc35bb(-0xcf,-0x138,-0x10f,-0xe1)+_0x322e4d(0x1fb,0x1c8,0x175,0x164)+_0xcc35bb(-0xed,-0xbe,-0x111,-0xa2)+_0xcc35bb(-0x1c0,-0x186,-0x1e7,-0x1f0),_0x19ec6f),_0x303a5b[_0x322e4d(0x2e8,0x299,0x2f3,0x267)](_0x58abce,_0x303a5b['GKNYI'](_0xcc35bb(-0x11e,-0x1da,-0x184,-0x1bc),_0x530aed[_0x322e4d(0x287,0x292,0x259,0x2fd)])));}}async function loadCachedImages(){const _0x14f789={'KybUW':_0x7cf055(-0x66,-0xaf,-0x10b,-0x69)+_0x7cf055(-0x105,-0xff,-0x92,-0x166)+'ref','tqhLn':function(_0x2272ab,_0x3d8449){return _0x2272ab(_0x3d8449);},'ahxTx':_0x7cf055(-0x92,-0x90,-0xde,-0x2a),'UxVij':'none','ErPlA':_0x7cf055(-0xf4,-0x12f,-0xd2,-0x1a6),'OOVBu':function(_0x3d2ec7,_0x5e8cb5){return _0x3d2ec7===_0x5e8cb5;},'cceMR':_0x7cf055(-0xb4,-0xc7,-0x5c,-0xb2),'UxVFQ':function(_0xcbc070,_0x285623){return _0xcbc070===_0x285623;},'YyFiC':'vktmh','NuZDb':'clwhs','AfVrL':function(_0x1e7ddd,_0x4fa0d6){return _0x1e7ddd(_0x4fa0d6);},'LMEQf':_0x4ec516(-0x14f,-0x12a,-0x19c,-0x146)+_0x7cf055(-0x12a,-0xe2,-0xcc,-0x150)+_0x4ec516(-0x163,-0x14d,-0x1ad,-0x1b1)+'ibe\x20image:','bbuBh':_0x7cf055(-0xb9,-0xec,-0x144,-0x137),'QJocE':'nQQNG','MZUai':function(_0x2f6b1a,_0x2fcfb6){return _0x2f6b1a(_0x2fcfb6);},'EQEyr':_0x7cf055(-0x155,-0x110,-0x154,-0x96),'PFrOW':_0x7cf055(-0xf1,-0x13f,-0x192,-0x185)+'ing\x20cached'+'\x20NovelAI\x20C'+_0x7cf055(-0xb1,-0xe6,-0x75,-0xdf)+_0x7cf055(-0x140,-0xed,-0xc6,-0x13e),'ZESxs':function(_0x8ac192,_0x1b66d4){return _0x8ac192(_0x1b66d4);},'pJuQG':_0x4ec516(-0x120,-0x19d,-0x176,-0x19f),'nzxeL':_0x7cf055(-0x16e,-0x13f,-0x125,-0x11d)+_0x7cf055(-0xeb,-0xe2,-0x69,-0x7b)+_0x7cf055(-0x8e,-0xb2,-0xb1,-0x12a)+_0x4ec516(-0x131,-0xe2,-0x128,-0xc2)};await dbs[_0x7cf055(-0x11d,-0x173,-0x160,-0x19f)]();function _0x4ec516(_0x5249f2,_0x86472f,_0x13e7d0,_0x451f76){return _0x948dc1(_0x5249f2,_0x86472f-0x185,_0x13e7d0- -0xb5,_0x451f76-0x13e);}try{if(_0x14f789[_0x4ec516(-0x135,-0x9f,-0xf8,-0x156)](_0x14f789['cceMR'],_0x7cf055(-0x165,-0x15c,-0x11e,-0x1d1)))_0x53df4b['getElement'+_0x7cf055(-0xa0,-0x10d,-0x14b,-0x172)](_0x14f789[_0x4ec516(-0xfa,-0x174,-0x103,-0xfc)])[_0x4ec516(-0x163,-0xf8,-0x100,-0x98)]();else{const _0x446890=await dbs[_0x4ec516(-0x20c,-0x19f,-0x1b8,-0x1ff)+'nly'](NAI_VIBE_CACHE_KEY);_0x446890&&_0x446890[_0x4ec516(-0x10d,-0xde,-0x142,-0x112)]&&(_0x14f789[_0x7cf055(-0x16d,-0x12e,-0x15c,-0x117)](_0x14f789[_0x7cf055(-0xad,-0x121,-0xfa,-0x146)],_0x14f789['NuZDb'])?_0x14f789[_0x7cf055(-0x5f,-0xd4,-0x7a,-0xb3)](_0xe6e369,_0x26c90a[_0x4ec516(-0x15b,-0xe5,-0x142,-0x11c)]):_0x14f789['AfVrL'](updateNovelaiImagePreview,_0x446890[_0x4ec516(-0x151,-0x1a7,-0x142,-0x17c)]));}}catch(_0x3b0a93){console[_0x4ec516(-0x1d7,-0x12a,-0x16b,-0x198)](_0x14f789[_0x4ec516(-0xfb,-0x1a0,-0x150,-0x143)],_0x3b0a93);}function _0x7cf055(_0x12a65b,_0x553ec3,_0x5b3153,_0x5c88fc){return _0xe4184a(_0x12a65b-0xbf,_0x553ec3- -0x18f,_0x12a65b,_0x5c88fc-0x16e);}try{if(_0x14f789['OOVBu'](_0x4ec516(-0x1ba,-0xde,-0x149,-0x124),_0x14f789[_0x7cf055(-0xc7,-0x120,-0x114,-0xf9)])){const _0x292893=await dbs[_0x4ec516(-0x1f2,-0x15d,-0x1b8,-0x1ec)+'nly'](NAI_CHAR_REF_CACHE_KEY);if(_0x292893&&_0x292893['data']){if(_0x14f789[_0x4ec516(-0x163,-0xf2,-0x11c,-0x18d)]===_0x14f789['QJocE'])_0x14f789[_0x4ec516(-0x19b,-0xef,-0x12b,-0x143)](updateNovelaiCharRefImagePreview,_0x292893[_0x4ec516(-0x197,-0x142,-0x142,-0x185)]);else{if(_0x28e1cd){const _0x405918=_0x1f95c6[_0x7cf055(-0x45,-0xa2,-0xa6,-0xeb)](_0x4ba4cd,arguments);return _0x3d7444=null,_0x405918;}}}}else{const _0x1d9f94=_0x14f789['ahxTx'][_0x4ec516(-0x152,-0x105,-0x15a,-0x163)]('|');let _0xd7954f=0x1*0xa5c+-0x16*-0x4+-0xab4;while(!![]){switch(_0x1d9f94[_0xd7954f++]){case'0':_0x378036[_0x4ec516(-0xb8,-0x6d,-0xdf,-0x72)]='';continue;case'1':_0x56671e[_0x7cf055(-0x6d,-0xa1,-0xfb,-0xb3)+_0x4ec516(-0x100,-0xc8,-0x130,-0x12c)+'e']=null;continue;case'2':_0x1abd04[_0x7cf055(-0x169,-0x166,-0x19f,-0x161)][_0x7cf055(-0x13c,-0x111,-0xea,-0x153)]=_0x14f789[_0x7cf055(-0x16c,-0x142,-0x16c,-0x12a)];continue;case'3':_0x13d03c[_0x7cf055(-0x175,-0x166,-0x111,-0x13a)][_0x4ec516(-0x1d7,-0x133,-0x16e,-0x104)]=_0x4ec516(-0x14b,-0x161,-0x19b,-0x165);continue;case'4':_0x1abf4d[_0x7cf055(-0xf9,-0x166,-0x10a,-0x1aa)][_0x4ec516(-0x12c,-0x127,-0x16e,-0x1c1)]=_0x14f789[_0x7cf055(-0xd2,-0x148,-0x15b,-0x1a1)];continue;}break;}}}catch(_0x4ef7b1){if(_0x14f789[_0x7cf055(-0x10c,-0x12e,-0xf9,-0x156)]('fEBUs',_0x14f789[_0x7cf055(-0xb1,-0xf1,-0x159,-0xfe)]))console[_0x7cf055(-0xe6,-0x10e,-0x166,-0x95)](_0x14f789['PFrOW'],_0x4ef7b1);else{const _0x445cbe=_0x3d038b[_0x7cf055(-0x12f,-0x11d,-0xaf,-0x195)],_0xb67514={};_0xb67514[_0x7cf055(-0xdb,-0xe5,-0xcf,-0x109)]=_0x445cbe,_0xb67514['serverFile'+_0x4ec516(-0x119,-0x195,-0x188,-0x11a)]=_0x2dcb5f['name'];const _0x5d1b36=_0xb67514,_0xc574d1={};_0xc574d1['id']=_0xb012ec,_0xc574d1['data']=_0x5d1b36,_0x3cf989[_0x4ec516(-0xfc,-0x96,-0xdd,-0x7c)+'rite'](_0xc574d1);}}try{const _0x860d3=await dbs[_0x4ec516(-0x1d5,-0x149,-0x1b8,-0x1c6)+_0x7cf055(-0x163,-0x14a,-0x18a,-0xf8)](COMFYUI_REF_CACHE_KEY);if(_0x860d3&&_0x860d3[_0x4ec516(-0x187,-0x160,-0x142,-0xd7)]&&_0x860d3[_0x7cf055(-0xd2,-0xe5,-0x87,-0x10d)][_0x4ec516(-0xe9,-0x130,-0x142,-0x198)]&&_0x860d3[_0x7cf055(-0x103,-0xe5,-0xcd,-0x15f)][_0x4ec516(-0x14e,-0x1fe,-0x18f,-0x204)+'Name']){const _0x350a50=_0x860d3[_0x7cf055(-0x14a,-0xe5,-0xb9,-0xdb)],_0x5e666f=await _0x14f789[_0x7cf055(-0x12e,-0x163,-0x19a,-0x12d)](fetch,_0x350a50[_0x4ec516(-0xc7,-0x1a2,-0x142,-0x112)]),_0x11ba14=await _0x5e666f[_0x4ec516(-0x147,-0x142,-0x11f,-0x18e)](),_0xec3c31=URL[_0x4ec516(-0x11f,-0x1c3,-0x148,-0x104)+_0x7cf055(-0x187,-0x12a,-0xd4,-0x106)](_0x11ba14);updateComfyUIImagePreview(_0xec3c31),comfyuiImageObjectURL=_0xec3c31,window[_0x7cf055(-0xda,-0x151,-0x110,-0x15e)+_0x7cf055(-0xc0,-0xbb,-0x89,-0x120)]=_0x350a50[_0x7cf055(-0xf2,-0x132,-0x111,-0x126)+_0x7cf055(-0x109,-0x12b,-0x16f,-0x189)],_0x14f789[_0x4ec516(-0xf9,-0xe1,-0x12b,-0x10b)](addLog,_0x4ec516(-0x14d,-0x17a,-0x192,-0x12f)+_0x7cf055(-0x112,-0x13b,-0x1a1,-0x13f)+_0x350a50['serverFile'+_0x7cf055(-0xd5,-0x12b,-0xc6,-0xfd)]),console[_0x7cf055(-0x6f,-0xe8,-0x15f,-0xb8)](_0x4ec516(-0x114,-0x1ac,-0x180,-0x1a8)+_0x4ec516(-0xb5,-0x184,-0x12f,-0x14b)+'\x20from\x20cach'+_0x7cf055(-0x170,-0x107,-0x17c,-0x130)+_0x350a50[_0x7cf055(-0x171,-0x132,-0x19f,-0x119)+_0x7cf055(-0x128,-0x12b,-0x1a2,-0x11e)]);}else{if(_0x860d3&&_0x14f789[_0x4ec516(-0x10d,-0xa1,-0xf8,-0x133)](typeof _0x860d3[_0x4ec516(-0xd2,-0x13c,-0x142,-0x11b)],_0x14f789[_0x7cf055(-0x1c6,-0x15d,-0x18f,-0x182)])){const _0x143f03=await fetch(_0x860d3['data']),_0x335894=await _0x143f03['blob'](),_0x1002f1=URL[_0x4ec516(-0xff,-0x182,-0x148,-0x1b8)+_0x4ec516(-0x14a,-0x170,-0x187,-0x1c8)](_0x335894);updateComfyUIImagePreview(_0x1002f1),comfyuiImageObjectURL=_0x1002f1,console['warn'](_0x4ec516(-0x10e,-0x1d2,-0x180,-0x1e1)+_0x4ec516(-0x147,-0x1a9,-0x12f,-0xff)+_0x7cf055(-0x12e,-0xc6,-0x93,-0xb2)+_0x4ec516(-0x124,-0xd4,-0xdc,-0x129)+_0x7cf055(-0x2d,-0xa7,-0x36,-0xf7)+_0x4ec516(-0xf6,-0x11c,-0x105,-0xad)+'\x20to\x20update'+'\x20cache\x20to\x20'+_0x7cf055(-0x134,-0x11a,-0xfc,-0x177)+_0x4ec516(-0x1cd,-0x14f,-0x1a8,-0x206));}}}catch(_0x5c799f){console['error'](_0x14f789[_0x7cf055(-0x71,-0xa9,-0x10a,-0x97)],_0x5c799f);}}export function initImageUpload(_0x225c08){const _0x48b940={'CGIZc':'imageInput'+_0x423bbd(0x2ae,0x33a,0x311,0x300),'PBhaN':_0x423bbd(0x276,0x33e,0x276,0x2e5)+_0x423bbd(0x26b,0x2fb,0x266,0x295)+'ref','StOTE':_0x423bbd(0x26f,0x2bf,0x33c,0x2e5)+'2','Anvgl':function(_0x5f11b9){return _0x5f11b9();},'noZNY':function(_0xdaef92){return _0xdaef92();},'mciOA':_0x289340(0x1c9,0x1ee,0x1f6,0x178)+_0x423bbd(0x2ea,0x33e,0x354,0x2db)+'e-btn','Ufysd':_0x423bbd(0x2d8,0x2c4,0x28c,0x2f1),'fRgtL':_0x289340(0xea,0x141,0x125,0x1ac)+'t_novelai','FiLOR':_0x289340(0x1ca,0x188,0x1e1,0x144),'pXlUD':'#novelai-r'+_0x423bbd(0x264,0x2c6,0x2ef,0x2aa)+_0x423bbd(0x2e2,0x265,0x323,0x2bb),'vkPlJ':_0x423bbd(0x304,0x2c2,0x2b9,0x2ef)+_0x423bbd(0x282,0x26b,0x26f,0x23c)+'-ref-image'+'-btn','UvSJo':'#comfyui-s'+_0x423bbd(0x27d,0x29e,0x273,0x2db)+_0x289340(0x1c5,0x1ba,0x177,0x1d4),'cDDgP':_0x423bbd(0x274,0x22d,0x22e,0x242)+'t2','kacWD':_0x423bbd(0x28d,0x1c9,0x1bc,0x228)+_0x423bbd(0x2aa,0x230,0x2fd,0x2aa)+_0x423bbd(0x2f9,0x255,0x298,0x2bb)};_0x48b940['noZNY'](loadCachedImages);function _0x289340(_0x43fca1,_0x494e9a,_0x2065d2,_0x232e81){return _0x948dc1(_0x43fca1,_0x494e9a-0x1d1,_0x494e9a-0x23b,_0x232e81-0x52);}_0x225c08['find'](_0x48b940[_0x423bbd(0x1da,0x28a,0x2ab,0x22f)])['on'](_0x48b940[_0x289340(0x19c,0x13d,0x179,0x1a1)],()=>{function _0x5e8b7b(_0x3584c7,_0x11bf9d,_0x3850f4,_0xdefa8f){return _0x423bbd(_0x3850f4,_0x11bf9d-0xf1,_0x3850f4-0x1cf,_0xdefa8f- -0x38);}function _0x2a3d0b(_0x1fb4ea,_0x20c4ea,_0x107ba2,_0x5e8653){return _0x423bbd(_0x5e8653,_0x20c4ea-0x1de,_0x107ba2-0x41,_0x107ba2- -0x2c5);}document['getElement'+'ById'](_0x48b940[_0x5e8b7b(0x1e8,0x233,0x2be,0x256)])[_0x5e8b7b(0x27c,0x2a8,0x2b5,0x2b9)]();}),_0x225c08[_0x289340(0x122,0x13a,0x188,0x15b)](_0x48b940[_0x289340(0x1fc,0x20e,0x1ac,0x20f)])['on'](_0x48b940[_0x289340(0x196,0x1d7,0x24e,0x20d)],handleNovelaiImageUpload),_0x225c08[_0x423bbd(0x1c6,0x2a8,0x21f,0x23b)](_0x48b940['pXlUD'])['on'](_0x48b940['Ufysd'],()=>{removeNovelaiImage();}),_0x225c08[_0x423bbd(0x1e2,0x278,0x234,0x23b)](_0x48b940[_0x423bbd(0x301,0x322,0x36f,0x313)])['on'](_0x289340(0x240,0x1f0,0x195,0x242),()=>{function _0x37ad4c(_0x4c5664,_0x2ee5fb,_0x1c88ca,_0x1e825a){return _0x289340(_0x4c5664,_0x2ee5fb- -0x1d9,_0x1c88ca-0x13c,_0x1e825a-0x77);}function _0x5a7968(_0x22e8d9,_0x5f5353,_0x32687d,_0xe7c371){return _0x289340(_0x32687d,_0x5f5353-0x258,_0x32687d-0x193,_0xe7c371-0x2f);}document[_0x37ad4c(-0xda,-0x9a,-0x5f,-0xf5)+_0x37ad4c(-0x64,-0x53,-0xc1,-0xc1)](_0x48b940[_0x37ad4c(0x11,-0x36,-0x7f,-0xad)])[_0x5a7968(0x3ef,0x448,0x3d4,0x3fc)]();}),_0x225c08[_0x289340(0x17b,0x13a,0x13b,0x16e)](_0x289340(0xce,0x141,0x128,0xc6)+'t_nai_char'+_0x289340(0x17e,0x1b4,0x21b,0x1bd))['on'](_0x48b940[_0x423bbd(0x289,0x341,0x29a,0x2d8)],handleNovelaiCharRefImageUpload),_0x225c08['find'](_0x423bbd(0x217,0x1ef,0x28c,0x254)+'emove-char'+_0x423bbd(0x30e,0x296,0x227,0x298)+'-btn')['on'](_0x289340(0x20a,0x1f0,0x1cf,0x1db),()=>{removeNovelaiCharRefImage();}),_0x225c08['find'](_0x48b940[_0x289340(0x133,0x150,0x1bc,0x16e)])['on'](_0x48b940[_0x423bbd(0x244,0x276,0x1fc,0x23e)],()=>{function _0x3abcb7(_0x368565,_0x4e9120,_0x1892ba,_0x3f334f){return _0x423bbd(_0x368565,_0x4e9120-0x62,_0x1892ba-0x198,_0x3f334f- -0x371);}function _0x293c5d(_0x4a6034,_0x7c19de,_0x51670a,_0x4c5ddd){return _0x289340(_0x4a6034,_0x51670a-0x48e,_0x51670a-0x1f0,_0x4c5ddd-0x55);}document['getElement'+_0x293c5d(0x5ce,0x620,0x614,0x5fa)](_0x48b940['StOTE'])[_0x293c5d(0x6ad,0x69f,0x67e,0x6bd)]();}),_0x225c08['find'](_0x48b940[_0x423bbd(0x1f3,0x282,0x275,0x24f)])['on'](_0x48b940[_0x423bbd(0x34e,0x335,0x27f,0x2d8)],handleImageUpload2);function _0x423bbd(_0xc81fcd,_0xc3a16c,_0x214490,_0x317596){return _0xe4184a(_0xc81fcd-0x86,_0x317596-0x205,_0xc81fcd,_0x317596-0x118);}_0x225c08[_0x423bbd(0x22a,0x1e0,0x236,0x23b)](_0x48b940['kacWD'])['on'](_0x48b940[_0x423bbd(0x2b5,0x1ea,0x22f,0x23e)],()=>{function _0x5b268c(_0x4fff47,_0xc19f0b,_0x431eb8,_0x44138b){return _0x423bbd(_0xc19f0b,_0xc19f0b-0x109,_0x431eb8-0xea,_0x44138b- -0x2af);}_0x48b940[_0x5b268c(-0x21,0x96,-0x3d,0x22)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};