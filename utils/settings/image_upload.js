(function(_0x470c60,_0x274b71){const _0x4c4d6f=_0x470c60();function _0xf4105a(_0x1f91af,_0x147a68,_0x19dcfc,_0xed2312){return _0x4fc3(_0x147a68-0x1ea,_0x1f91af);}function _0x15840b(_0x2e8152,_0x32deb5,_0x72a0ab,_0x45955c){return _0x4fc3(_0x2e8152-0x392,_0x32deb5);}while(!![]){try{const _0xf6f596=parseInt(_0x15840b(0x4ff,0x515,0x56d,0x4fd))/(-0xd0c+0x1*-0xbf+0x1*0xdcc)+-parseInt(_0x15840b(0x50e,0x543,0x553,0x4a1))/(-0x2122+-0x22f9+-0x9bb*-0x7)+-parseInt(_0x15840b(0x467,0x4cd,0x417,0x450))/(-0x10b*-0x11+0x11c0+0x46f*-0x8)+parseInt(_0x15840b(0x4c4,0x497,0x468,0x51b))/(0x189f+0x85a+-0x20f5*0x1)+parseInt(_0xf4105a(0x377,0x371,0x332,0x3e4))/(0x2589*-0x1+-0x2245+-0xe3*-0x51)+-parseInt(_0xf4105a(0x325,0x2f3,0x32f,0x278))/(-0x1cf3+0x15df+0x71a)+parseInt(_0xf4105a(0x30d,0x2da,0x2eb,0x31b))/(0x245f*-0x1+0x35b+0x210b);if(_0xf6f596===_0x274b71)break;else _0x4c4d6f['push'](_0x4c4d6f['shift']());}catch(_0x46021f){_0x4c4d6f['push'](_0x4c4d6f['shift']());}}}(_0x410b,-0x16e86c*-0x1+-0x22128+-0x1edd*0x32));function _0x3e5332(_0x417e1e,_0xe18020,_0x3620c2,_0x19f7f5){return _0x4fc3(_0xe18020-0xb6,_0x3620c2);}const _0x17e1f9=(function(){let _0x359780=!![];return function(_0x1255df,_0x205e94){const _0x3cf842=_0x359780?function(){function _0x116bab(_0x437671,_0x4df70d,_0xe79380,_0x3e6d52){return _0x4fc3(_0x4df70d- -0x91,_0xe79380);}if(_0x205e94){const _0x1090bf=_0x205e94[_0x116bab(0x48,0xb6,0xb6,0x96)](_0x1255df,arguments);return _0x205e94=null,_0x1090bf;}}:function(){};return _0x359780=![],_0x3cf842;};}()),_0x4d8f1e=_0x17e1f9(this,function(){function _0x7f0a8b(_0x4cd359,_0x5ebb18,_0x321277,_0x196e71){return _0x4fc3(_0x5ebb18- -0x53,_0x4cd359);}const _0x54a1bd={};_0x54a1bd['dsjAm']=_0x5a3f56(0x399,0x38b,0x3d4,0x3dd)+'+$';const _0x2ce860=_0x54a1bd;function _0x5a3f56(_0x2e03b6,_0x5c4e6a,_0x3d3e27,_0x169b17){return _0x4fc3(_0x2e03b6-0x2cc,_0x3d3e27);}return _0x4d8f1e[_0x7f0a8b(0xb6,0x64,0xc6,0x88)]()[_0x5a3f56(0x3c6,0x35e,0x374,0x396)](_0x2ce860[_0x5a3f56(0x459,0x4b4,0x443,0x476)])[_0x7f0a8b(0x58,0x64,0xe,0x2f)]()[_0x5a3f56(0x462,0x4c5,0x4df,0x3fb)+'r'](_0x4d8f1e)['search'](_0x5a3f56(0x399,0x3a9,0x3ce,0x3b8)+'+$');});_0x4d8f1e();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';function _0x410b(){const _0x39cf36=['sLPese4','mty4mJG1mZjvtwvKDe0','C3rYAw5N','ueXowKO','lwj0BG','Bevpqw4','zgf0ytPPBwfNzq','EKvMCgS','Ag1St04','ywDL','DgHLig5LDYbMBW','C2vHCMnO','zMDWvwS','x3jLzG','zw1VDMuTy2HHCG','BMX5','CL9Yzwy','ENrUweS','C3rVCMvezwXLDa','qMDiD0W','y29TzNL1As1Yzq','vhLWt2K','Dgr0vfC','rKzosu8','y3jLyxrLt2jQzq','ztOG','mJmZote4ngfuuLr2va','6k+M5OofoIa','yvvjD3e','C3rYAw5NAwz5','ignHy2HLihrVia','CMvZDwX0','EMrmywq','rwLlq3a','reT3ywm','zgf0yq','igzYB20GB2XKia','Exv3Cvq','zxj0AfG','v2LWC2m','BMfPm0nOyxjszq','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','A3Plu2u','6zsz6k+V6k+M5OofoG','Ew1VAKq','DgfYz2v0','tKrtAhG','yxqUifbSzwfZzq','z2DnyKG','igzYB20Gy2fJAa','z2vFBMfPx2nOyq','5zU+54Mh5Ase55cg5AsX6lsLoIa','C3bSAxq','yMXVyJO','Du52wfe','u1rOEeG','vurcr0C','CxvLCNLtzwXLyW','tg9HzgvKienVBq','vvzouhu','ufvQq1m','C1PuD0m','m3WYFdr8mxWW','CMvMigLTywDLoG','C2vYDMvYrMLSzq','DY1JB250ywLUzq','CgXHy2vOB2XKzq','mJK3mti0s2zXyKrr','C3rVCMvszwfKvW','CML0zq','BwfNztO','ienVBwz5vuKGAq','yMvnvKK','vNjrsg4','ihrVihvWzgf0zq','D2fYBG','DtGTAw1Hz2uTCa','y2fJAguGzM9YBq','rvbnA1K','C3jJ','AwjLigLTywDLoG','DgreDhO','yMXVyG','zxjYB3i','y2fJAgvFBM92zq','Chbkz2m','DMvysNG','CMvMlwLTywDLlq','yxbWBhK','A09zvuy','zMLSzxm','CMvM','vK9xrLa','Bw92zs1PBwfNzq','zw1VDMuTAw1HzW','yM9KEq','zvviyvq','shj2tKu','vvjm','Aw1Hz2u','CMvHzefZrgf0yq','tvL0tK8','y0vhz3G','AgfYifjLzIbPBq','s21zsNe','B3bLBKrc','r3LHDMW','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','s3fkC0W','Bgn2zwO','reH5Dxy','zhjlv3m','EuTmre8','D0zWv3i','CfD3shK','u1zLDw4','yxbWzw5K','i25VDMvSywKTAq','zLn1vMS','y3fgufK','5lIk5lYG5AsX6lsLoIa','rLn1wKq','tMfTzq','BNzqBKe','rxzrzva','wgn6uNu','mZm1mtLUvgHQBLe','quXYvLy','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','ufj3BMi','zfnKBw8','Dgv4Da','zxiGlNn0lwnOyq','D1D5uKm','6k+35ywi6k6+572Uq29TzNLv','i2LTywDLsw5WDq','C3rVCMvszwfKtW','D1fUyw0','rxHRwLq','z2uY','x25VDMvSywK','mtqWnZCWmeTkweLutW','yNrU','zfrzseW','zwXLy3qTy2HHCG','C3r5Bgu','sufSA3i','wwntsNO','rgXov00','r2XHsM4','nhWWFdn8mxWYFa','t1PMENu','ndy2nde0nxnPvhbeEa','z2X1EMq','vKvHyum','s2DJsKO','zMXLEa','Dhu4lwLTywDLlq','zhnQqw0','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','BMfTzq','Aw5NignHy2HLza','A2fIrNO','rxjYB3iGChjVyW','mNWZFdv8mxWWFa','i2nVBwz5DwKTAq','zgLZCgXHEq','y29UC3rYDwn0BW','BM92zwXHAs1Yzq','rLDUr0y','Df9UB3zLBgfP','mxWWFdj8m3W0','uxv0vxu','ie5VDMvSquKGvG','vuNLM77NIyC6ia','ChjLDMLLD0LTyq','BwfNzs1WCMv2Aq','BgfPx2nOyxjFCG','zMLUza','zfDuC20','y3rvuKW','vKPzsLC','DhjPBq','BgfJzwHVBgrLCG','zNLvssbPBwfNzq','Aw1Hz2uVCg5N','y29TzNL1AwnHBG','BgfPx3zPyMvFDa','CMv2B2TLt2jQzq','ihjLlxvWBg9Hza','q0r4z3i','Aw5SAw5LlwzSzq','BwvZC2fNzq','CefzC2S','i25VDMvSywKTCG','Dg9tDhjPBMC','x25HAv9JAgfYxW','y2XPy2S','ANnVBG','zxCTy29UDgfPBG','qNLjza','Bwv0Ag9K','BM9Uzq','y2HHBMDL','Dg9Y','zs1IDg4','zwzFAw1Hz2u','ExvPx3jLzL9PBq','DvbTwhK','lxjLzI1PBwfNzq','yw5ZzMvYsw1HzW','l3vWBg9Hzc9PBq','zwXbssbPBwfNzq','AgfYlxjLzI1PBq','CIaUC3qTy2HHDa','EvnhB0C','uxbXzha','kcGOlISPkYKRkq','Bg9N','zwXbssbJAgfYia','zxnZAw5Nie5VDG','z2v0rwXLBwvUDa','Bw92zs1JAgfYlq','EwvHzxe','rePdDgO','nde1mJKYn0HYCvvgyq','DM5eAgG','C3z2BNu','D3jHBLG','zwTlu3e','y2fJAgvFy29TzG','yMXVy2S','ywDLlxbYzxzPzq','zKLTywDL','B25SB2fKzw5K','i25VDMvSywKTCW','i25VDMvSywKTyW','CKD4D00','C3rHCNrZv2L0Aa','Aw1Hz2vjBNb1Da','rxjYB3iGBg9Hza','vLL4t2m','EfH6zKy','CLbMuvq','ssbbueNLNldLNydJGii','z2vFBM92zwXHAq','s1nIq2m','ANPwte8','sej1Bum','A2fVDhvWAwfU','u010rxq'];_0x410b=function(){return _0x39cf36;};return _0x410b();}const NAI_VIBE_CACHE_KEY=_0x7178c7(0x11,-0xf,-0x15,0x21)+_0x3e5332(0x1aa,0x165,0x17a,0x1d8)+'ransfer_im'+_0x7178c7(-0x50,-0x48,0x10,-0x2a),NAI_CHAR_REF_CACHE_KEY=_0x3e5332(0x214,0x1f9,0x225,0x21a)+_0x3e5332(0x2bd,0x256,0x203,0x2ad)+_0x3e5332(0x1d8,0x178,0x1c1,0x12f),COMFYUI_REF_CACHE_KEY=_0x3e5332(0x18e,0x190,0x1d9,0x16d)+_0x3e5332(0x153,0x179,0x190,0x1d2)+_0x7178c7(-0x8b,-0x67,0x37,-0x2a);let nai3VibeTransferImageMimeType='image/png';function _0x7178c7(_0x5b7b5b,_0x54ebaf,_0x27065d,_0x349426){return _0x4fc3(_0x349426- -0x122,_0x54ebaf);}let nai3CharRefImageMimeType=_0x3e5332(0x173,0x163,0x19b,0x16f),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x5e9c5b){const _0x4fd207={};_0x4fd207['EiKCp']=_0x46a55c(0x351,0x32b,0x393,0x394)+_0x46a55c(0x27b,0x2ae,0x25c,0x2d2)+_0x46a55c(0x2d2,0x28c,0x2ad,0x21a),_0x4fd207[_0x5aadc1(0x454,0x4fb,0x47e,0x4a6)]=_0x46a55c(0x2e7,0x26d,0x230,0x239)+_0x5aadc1(0x44c,0x3be,0x3e5,0x439)+_0x5aadc1(0x3df,0x39a,0x3f8,0x3ec)+_0x46a55c(0x26c,0x2bd,0x2db,0x25c)+_0x46a55c(0x256,0x257,0x29a,0x2d0)+_0x46a55c(0x2f1,0x2c8,0x2b6,0x313)+_0x5aadc1(0x399,0x39e,0x3c7,0x3f7);function _0x5aadc1(_0x388f10,_0x5c2dc0,_0x3169f5,_0x59c9e5){return _0x7178c7(_0x388f10-0x111,_0x5c2dc0,_0x3169f5-0xaa,_0x3169f5-0x43e);}_0x4fd207[_0x46a55c(0x293,0x2f7,0x285,0x2a0)]=_0x5aadc1(0x4f9,0x43f,0x4b3,0x4a3)+_0x46a55c(0x284,0x25f,0x2a0,0x25a)+_0x46a55c(0x308,0x2d3,0x318,0x34e)+_0x5aadc1(0x4b1,0x4ed,0x499,0x475),_0x4fd207[_0x5aadc1(0x4cb,0x44e,0x454,0x4c1)]='data:image',_0x4fd207[_0x5aadc1(0x41d,0x402,0x422,0x49e)]=_0x46a55c(0x2aa,0x268,0x2b2,0x220),_0x4fd207['gluzd']=_0x5aadc1(0x3d2,0x3bd,0x3cf,0x404)+'x',_0x4fd207[_0x46a55c(0x251,0x27f,0x219,0x2b2)]=_0x5aadc1(0x499,0x48b,0x4b6,0x507),_0x4fd207['zdLad']=_0x46a55c(0x207,0x24b,0x21e,0x210),_0x4fd207[_0x46a55c(0x236,0x278,0x2a8,0x2a6)]=_0x5aadc1(0x473,0x471,0x4a7,0x4ce),_0x4fd207[_0x5aadc1(0x463,0x43f,0x441,0x3c6)]=_0x46a55c(0x318,0x32b,0x2ee,0x30e)+_0x46a55c(0x222,0x276,0x26e,0x28e),_0x4fd207['YcSJz']=_0x5aadc1(0x44c,0x505,0x4b3,0x4a9)+_0x46a55c(0x2a5,0x2d9,0x2c0,0x2c4)+'-btn',_0x4fd207[_0x5aadc1(0x457,0x487,0x40a,0x477)]=function(_0x2084d1,_0x1a3fae){return _0x2084d1!==_0x1a3fae;};function _0x46a55c(_0x5a5a7f,_0x298cf9,_0x48ecc8,_0x2cbfb2){return _0x7178c7(_0x5a5a7f-0x10d,_0x2cbfb2,_0x48ecc8-0x171,_0x298cf9-0x2af);}_0x4fd207[_0x5aadc1(0x3ec,0x3ac,0x420,0x3aa)]=_0x5aadc1(0x40a,0x46b,0x439,0x401);const _0x18f3cf=_0x4fd207,_0x2eb1f8=document[_0x5aadc1(0x395,0x440,0x3ed,0x3d9)+_0x5aadc1(0x446,0x443,0x3d8,0x380)](_0x18f3cf['uNvXQ']),_0x4c6395=document[_0x5aadc1(0x489,0x45e,0x444,0x3e0)+'tor'](_0x5aadc1(0x410,0x4c7,0x480,0x44b)+_0x46a55c(0x347,0x32c,0x2ea,0x375)+_0x5aadc1(0x3ff,0x3c5,0x3d7,0x446)+_0x5aadc1(0x4aa,0x43e,0x48f,0x47e)+_0x46a55c(0x318,0x319,0x29d,0x35a)+_0x5aadc1(0x415,0x44e,0x44d,0x470)+'r'),_0x2a46ac=document[_0x5aadc1(0x3b5,0x3ac,0x3ed,0x38e)+_0x46a55c(0x2b3,0x249,0x22c,0x1f5)](_0x18f3cf[_0x46a55c(0x386,0x30f,0x2e8,0x2b8)]);if(_0x5e9c5b&&_0x5e9c5b[_0x5aadc1(0x3a6,0x3b5,0x3fe,0x3e6)](_0x18f3cf[_0x5aadc1(0x415,0x4cf,0x454,0x487)])){_0x2eb1f8[_0x46a55c(0x299,0x2cb,0x284,0x279)]=_0x5e9c5b,_0x2eb1f8[_0x5aadc1(0x509,0x429,0x49c,0x46f)][_0x5aadc1(0x4aa,0x51b,0x4b1,0x4b6)]=_0x5aadc1(0x3aa,0x3f6,0x3f7,0x3a3),_0x4c6395[_0x46a55c(0x2e2,0x30d,0x2df,0x2ec)][_0x5aadc1(0x4e0,0x4e2,0x4b1,0x507)]=_0x18f3cf[_0x46a55c(0x21e,0x29c,0x23c,0x288)],_0x2a46ac[_0x5aadc1(0x4dc,0x462,0x49c,0x4a6)][_0x5aadc1(0x451,0x4d5,0x4b1,0x4ce)]=_0x18f3cf[_0x46a55c(0x388,0x315,0x358,0x31e)];const _0x2c6f32=_0x5e9c5b[_0x46a55c(0x2b5,0x2b0,0x323,0x239)](','),_0x18a399=_0x2c6f32[0x63*0x5+-0x947*0x2+0x109f][_0x46a55c(0x2f6,0x2b0,0x26d,0x278)](':')[-0x7*0x22b+-0x93*0x9+0x1459]['split'](';')[0x26bf+0x1fd2+-0xe1d*0x5];nai3VibeTransferImageMimeType=_0x18a399,window['nai3VibeTr'+_0x5aadc1(0x414,0x37b,0x3e2,0x400)+'e']=_0x2c6f32[0xfd*0x3+0x765*0x1+0xa5b*-0x1];const _0x23b675={};_0x23b675['id']=NAI_VIBE_CACHE_KEY,_0x23b675[_0x5aadc1(0x478,0x439,0x42e,0x493)]=_0x5e9c5b,dbs['storeReadW'+'rite'](_0x23b675);}else{if(_0x18f3cf[_0x46a55c(0x2e9,0x27b,0x2d6,0x225)](_0x18f3cf['TypOi'],_0x46a55c(0x285,0x2aa,0x2ef,0x30b))){const _0x178293=_0x42bf91['getElement'+'ById'](_0x18f3cf[_0x46a55c(0x2a6,0x29d,0x2c9,0x2d7)]),_0x15f403=_0x22e2f4[_0x5aadc1(0x4b9,0x444,0x444,0x477)+_0x5aadc1(0x416,0x3b2,0x3dc,0x3c6)](_0x18f3cf[_0x46a55c(0x2e5,0x2ef,0x2dc,0x29f)]),_0x58138b=_0x29acbd[_0x46a55c(0x235,0x25e,0x234,0x259)+_0x46a55c(0x208,0x249,0x2a5,0x1cc)](_0x18f3cf[_0x5aadc1(0x4aa,0x42b,0x486,0x42f)]);if(_0x23c8ee&&_0x1d3130[_0x46a55c(0x27d,0x26f,0x222,0x2d4)](_0x18f3cf[_0x5aadc1(0x447,0x429,0x454,0x41d)])){_0x178293[_0x5aadc1(0x4ce,0x415,0x45a,0x442)]=_0x24894e,_0x178293[_0x5aadc1(0x4af,0x461,0x49c,0x4d9)]['display']=_0x18f3cf[_0x5aadc1(0x491,0x42b,0x422,0x3d0)],_0x15f403['style']['display']=_0x46a55c(0x2b1,0x24b,0x1da,0x1fa),_0x58138b['style']['display']=_0x18f3cf[_0x46a55c(0x314,0x315,0x366,0x2f2)];const _0xf6ba10=_0x27df40[_0x46a55c(0x2bf,0x2b0,0x264,0x259)](','),_0x3b1f06=_0xf6ba10[0x238a+0x47*0x72+0x2194*-0x2]['split'](':')[0x1e5f+0x1309+-0x3167][_0x5aadc1(0x404,0x4b2,0x43f,0x422)](';')[-0x1c15+0x1*-0x1aa+0x1dbf];_0x4b277a=_0x3b1f06,_0x45e7c['nai3CharRe'+_0x5aadc1(0x431,0x468,0x3f9,0x401)]=_0xf6ba10[-0x7d3+0x27b*0x9+0x1*-0xe7f];const _0x1cd7f3={};_0x1cd7f3['id']=_0x5efebf,_0x1cd7f3['data']=_0xd46a2f,_0x4f7e27[_0x46a55c(0x289,0x2c0,0x325,0x328)+_0x46a55c(0x33b,0x2c1,0x2e5,0x2fc)](_0x1cd7f3);}else{const _0x24a1aa=_0x18f3cf[_0x46a55c(0x23d,0x27f,0x2ab,0x2fb)][_0x46a55c(0x294,0x2b0,0x2f0,0x27e)]('|');let _0x3ba47d=0xb8e+-0xecc+0x19f*0x2;while(!![]){switch(_0x24a1aa[_0x3ba47d++]){case'0':_0x178293[_0x46a55c(0x294,0x30d,0x34c,0x365)][_0x46a55c(0x2f3,0x322,0x379,0x31e)]=_0x18f3cf[_0x5aadc1(0x43c,0x3c6,0x42b,0x472)];continue;case'1':_0x178293[_0x46a55c(0x254,0x2cb,0x2b6,0x27d)]='';continue;case'2':_0x15f403[_0x46a55c(0x2bb,0x30d,0x2bc,0x36c)][_0x5aadc1(0x447,0x4e4,0x4b1,0x4e0)]=_0x18f3cf[_0x46a55c(0x262,0x278,0x2b9,0x271)];continue;case'3':_0x58138b['style'][_0x5aadc1(0x499,0x4c6,0x4b1,0x435)]=_0x18f3cf[_0x5aadc1(0x3d3,0x403,0x42b,0x409)];continue;case'4':_0x15c7d5[_0x5aadc1(0x409,0x415,0x433,0x3df)+_0x5aadc1(0x415,0x3fa,0x3f9,0x3b0)]=null;continue;}break;}}}else _0x2eb1f8[_0x5aadc1(0x480,0x44b,0x45a,0x4d4)]='',_0x2eb1f8['style'][_0x46a55c(0x398,0x322,0x313,0x37c)]=_0x18f3cf[_0x5aadc1(0x3db,0x3b1,0x42b,0x3df)],_0x4c6395[_0x46a55c(0x349,0x30d,0x379,0x2a0)]['display']=_0x18f3cf[_0x5aadc1(0x3e6,0x471,0x407,0x459)],_0x2a46ac['style'][_0x46a55c(0x2b8,0x322,0x2ac,0x2a6)]=_0x18f3cf['zdLad'],window['nai3VibeTr'+_0x5aadc1(0x399,0x3d7,0x3e2,0x37c)+'e']=null;}}function removeNovelaiImage(){const _0x762774={'fSuVk':function(_0x5e125e,_0x41e442){return _0x5e125e(_0x41e442);}};function _0x5320a9(_0xa6576a,_0x156c93,_0x5d2f3a,_0x258dcb){return _0x3e5332(_0xa6576a-0xd,_0x258dcb- -0x15,_0x156c93,_0x258dcb-0x135);}function _0x2f7ab7(_0x27cf78,_0x4159fc,_0x17d294,_0x308ef0){return _0x7178c7(_0x27cf78-0x137,_0x27cf78,_0x17d294-0x69,_0x308ef0-0x39d);}_0x762774[_0x5320a9(0x1f2,0x275,0x1f6,0x206)](updateNovelaiImagePreview,null),dbs[_0x5320a9(0x191,0x127,0x191,0x1a2)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x27c0e3){function _0x195ddf(_0x3f38db,_0x43d91e,_0x53a188,_0x5d074d){return _0x7178c7(_0x3f38db-0x1e8,_0x53a188,_0x53a188-0xc8,_0x3f38db- -0x3b);}const _0x35da8c={'IzuBY':function(_0x448ede,_0x3ea033){return _0x448ede(_0x3ea033);},'wranX':function(_0x23ddeb,_0x3fda0f){return _0x23ddeb(_0x3fda0f);},'beMVI':function(_0x3fdc76,_0x29089e){return _0x3fdc76+_0x29089e;},'kabFz':_0x50ae8e(0x461,0x427,0x4e4,0x486)},_0x303cdb=_0x27c0e3[_0x195ddf(-0x41,0x1e,-0x8c,-0x83)][_0x50ae8e(0x4ba,0x525,0x4f7,0x4ad)][-0x1e5b+-0x7ff+0x265a];if(!_0x303cdb)return;function _0x50ae8e(_0x263796,_0x3a6f5f,_0x522f4a,_0x1e73e4){return _0x7178c7(_0x263796-0x1dd,_0x3a6f5f,_0x522f4a-0x11,_0x1e73e4-0x486);}try{const _0x5049fd=await processUploadedImage(_0x303cdb,!![]);_0x35da8c['IzuBY'](updateNovelaiImagePreview,_0x5049fd);}catch(_0x3c93f3){console[_0x195ddf(-0x1b,-0x8e,-0x37,0x36)](_0x195ddf(0x35,-0x40,0x3f,0x44)+_0x195ddf(-0x8d,-0xf3,-0x68,-0xfc)+_0x50ae8e(0x45b,0x410,0x3c7,0x42c)+':',_0x3c93f3),_0x35da8c[_0x50ae8e(0x3c2,0x4aa,0x413,0x43c)](alert,_0x35da8c[_0x195ddf(-0x26,-0x8a,0x1,0xc)](_0x35da8c[_0x195ddf(0x34,0x45,0x5d,0x71)],_0x3c93f3[_0x195ddf(-0xa9,-0x2d,-0x111,-0xf4)]));}}function updateNovelaiCharRefImagePreview(_0x27db15){function _0x3abcde(_0x2ce4bb,_0x43ee6e,_0x5c8e36,_0x598ca8){return _0x7178c7(_0x2ce4bb-0x118,_0x43ee6e,_0x5c8e36-0xa0,_0x598ca8- -0x2c5);}function _0x5761d2(_0x1443ba,_0x53ac8c,_0xbd937a,_0x253c71){return _0x3e5332(_0x1443ba-0x33,_0x53ac8c- -0x1e,_0x1443ba,_0x253c71-0x142);}const _0x4aa1d0={};_0x4aa1d0[_0x5761d2(0x1e7,0x21e,0x26f,0x1b2)]=_0x5761d2(0x290,0x236,0x27c,0x2a2)+_0x3abcde(-0x2bd,-0x1f0,-0x2ac,-0x26d),_0x4aa1d0['PUjCS']='comfyui-re'+_0x3abcde(-0x299,-0x2f3,-0x2dc,-0x29b)+_0x5761d2(0x1c0,0x18b,0x1f5,0x137),_0x4aa1d0[_0x5761d2(0x219,0x233,0x260,0x24e)]=_0x5761d2(0x21a,0x1bc,0x1a4,0x208),_0x4aa1d0[_0x5761d2(0x1c7,0x1c2,0x181,0x22c)]=function(_0x564b18,_0x14e138){return _0x564b18!==_0x14e138;},_0x4aa1d0[_0x5761d2(0x18e,0x1e0,0x18f,0x181)]=_0x5761d2(0x18a,0x173,0x186,0x188),_0x4aa1d0['JZDHN']=_0x3abcde(-0x247,-0x1e9,-0x1ec,-0x262)+'5',_0x4aa1d0[_0x3abcde(-0x268,-0x2ac,-0x1fe,-0x277)]=_0x3abcde(-0x324,-0x304,-0x378,-0x329),_0x4aa1d0[_0x3abcde(-0x23d,-0x256,-0x210,-0x276)]=_0x5761d2(0x24b,0x223,0x290,0x1e1),_0x4aa1d0[_0x5761d2(0x28a,0x219,0x24c,0x244)]=_0x5761d2(0x263,0x22f,0x1b2,0x1b1)+_0x3abcde(-0x2f7,-0x30d,-0x38e,-0x315)+'ref-image-'+_0x5761d2(0x20f,0x215,0x208,0x1a5),_0x4aa1d0[_0x5761d2(0x20c,0x19d,0x194,0x141)]=_0x5761d2(0x11b,0x18d,0x16e,0x180),_0x4aa1d0['odTDZ']=function(_0xd46c1f,_0x28351d){return _0xd46c1f!==_0x28351d;},_0x4aa1d0[_0x3abcde(-0x366,-0x324,-0x2ab,-0x313)]=_0x3abcde(-0x262,-0x2b1,-0x272,-0x2dc),_0x4aa1d0['Gyavl']=_0x3abcde(-0x2df,-0x30d,-0x303,-0x2ba);const _0x46d7d8=_0x4aa1d0,_0x51ef1f=document[_0x3abcde(-0x29d,-0x388,-0x311,-0x316)+_0x5761d2(0x17f,0x154,0x126,0x105)]('previewIma'+_0x5761d2(0x170,0x1b9,0x182,0x208)+_0x5761d2(0x14b,0x197,0x11f,0x211)),_0x59b1ba=document['querySelec'+_0x5761d2(0x191,0x158,0x169,0x179)]('#novelai-c'+_0x5761d2(0x188,0x161,0x109,0x180)+_0x5761d2(0x13f,0x174,0x14c,0x1f2)+_0x5761d2(0x1be,0x1c8,0x1f9,0x16e)+_0x3abcde(-0x2b6,-0x2d9,-0x2b6,-0x31d)+_0x5761d2(0x246,0x1d3,0x1e7,0x1f3)+_0x3abcde(-0x3a9,-0x303,-0x350,-0x33c)),_0x477a1d=document[_0x5761d2(0x1ab,0x169,0xf1,0x196)+_0x5761d2(0x1ba,0x154,0x117,0x16f)](_0x46d7d8[_0x3abcde(-0x1fe,-0x26c,-0x2ca,-0x266)]);if(_0x27db15&&_0x27db15[_0x3abcde(-0x29d,-0x2c1,-0x2d4,-0x305)](_0x46d7d8[_0x5761d2(0x1c0,0x19d,0x1c8,0x168)])){if(_0x46d7d8['odTDZ'](_0x46d7d8['DJCtj'],_0x3abcde(-0x32b,-0x325,-0x335,-0x2fd))){_0x51ef1f[_0x3abcde(-0x287,-0x2d2,-0x24e,-0x2a9)]=_0x27db15,_0x51ef1f[_0x3abcde(-0x1f6,-0x20d,-0x246,-0x267)][_0x5761d2(0x1ce,0x22d,0x27a,0x265)]=_0x5761d2(0x165,0x173,0x1de,0x1ab),_0x59b1ba[_0x3abcde(-0x236,-0x264,-0x202,-0x267)][_0x5761d2(0x1d1,0x22d,0x1dd,0x260)]=_0x5761d2(0x15e,0x156,0x108,0xfe),_0x477a1d[_0x5761d2(0x204,0x218,0x23e,0x20f)][_0x3abcde(-0x284,-0x236,-0x1ed,-0x252)]=_0x5761d2(0x195,0x14b,0x183,0xee)+'x';const _0x2cd6d5=_0x27db15[_0x5761d2(0x212,0x1bb,0x1c7,0x1ab)](','),_0x32ab06=_0x2cd6d5[0x1*-0x26f5+0x2234+0x1*0x4c1][_0x3abcde(-0x29d,-0x28a,-0x2f0,-0x2c4)](':')[-0x7d6*0x1+0xf17+0x3a0*-0x2]['split'](';')[-0x24be+-0x1cf6+0x20da*0x2];nai3CharRefImageMimeType=_0x32ab06,window[_0x5761d2(0x1f3,0x1af,0x188,0x147)+_0x3abcde(-0x2c0,-0x2a0,-0x2f6,-0x30a)]=_0x2cd6d5[0x177d+-0x4*-0x93a+-0x3c64];const _0x20f207={};_0x20f207['id']=NAI_CHAR_REF_CACHE_KEY,_0x20f207[_0x3abcde(-0x2c4,-0x2f9,-0x32a,-0x2d5)]=_0x27db15,dbs[_0x5761d2(0x19c,0x1cb,0x1e4,0x22f)+_0x3abcde(-0x2eb,-0x306,-0x2b0,-0x2b3)](_0x20f207);}else{const _0x334d19=_0x4b8caa[_0x5761d2(0x1aa,0x169,0x154,0x1db)+_0x3abcde(-0x375,-0x389,-0x2cc,-0x32b)](_0x46d7d8['OZfzu']),_0x4511cf=_0x56bd02[_0x5761d2(0x1e7,0x1c0,0x215,0x1db)+_0x3abcde(-0x354,-0x393,-0x397,-0x327)]('#comfyui-i'+_0x3abcde(-0x1ea,-0x1cf,-0x1da,-0x248)+_0x3abcde(-0x332,-0x31c,-0x397,-0x32c)+'er\x20.st-cha'+'tu8-image-'+_0x5761d2(0x21f,0x1c9,0x194,0x21c)+'r'),_0x205959=_0x3f50dc[_0x3abcde(-0x2cc,-0x366,-0x339,-0x316)+'ById'](_0x46d7d8[_0x5761d2(0x205,0x1c3,0x15d,0x187)]);_0x334d19[_0x3abcde(-0x24f,-0x2ab,-0x24f,-0x2a9)]&&_0x334d19[_0x5761d2(0x17d,0x1d6,0x180,0x1c3)][_0x3abcde(-0x2fe,-0x32a,-0x33d,-0x305)](_0x46d7d8[_0x3abcde(-0x289,-0x2b1,-0x2bd,-0x24c)])&&_0x46d7d8['UVNPu'](_0x334d19[_0x5761d2(0x18d,0x1d6,0x183,0x228)],_0x8b53ab)&&_0x1afab6[_0x3abcde(-0x387,-0x338,-0x3a3,-0x337)+_0x5761d2(0x18a,0x140,0x135,0x17b)](_0x334d19[_0x3abcde(-0x30a,-0x27d,-0x307,-0x2a9)]);if(_0x4df824)_0x334d19['src']=_0x4c3ed4,_0x334d19[_0x3abcde(-0x2e4,-0x24d,-0x243,-0x267)]['display']=_0x46d7d8[_0x3abcde(-0x265,-0x30b,-0x2d2,-0x29f)],_0x4511cf[_0x3abcde(-0x2af,-0x299,-0x226,-0x267)][_0x3abcde(-0x299,-0x273,-0x2c7,-0x252)]='none',_0x205959['style'][_0x5761d2(0x1d3,0x22d,0x27c,0x23d)]=_0x3abcde(-0x36e,-0x345,-0x2cb,-0x334)+'x';else{const _0x5e8058=_0x46d7d8[_0x5761d2(0x122,0x187,0x11e,0x1be)][_0x3abcde(-0x2eb,-0x26d,-0x28d,-0x2c4)]('|');let _0x227374=0x2551+0xd5*0x25+-0x220d*0x2;while(!![]){switch(_0x5e8058[_0x227374++]){case'0':_0x334d19[_0x3abcde(-0x274,-0x275,-0x27d,-0x267)][_0x3abcde(-0x28c,-0x24c,-0x229,-0x252)]=_0x46d7d8['PRwnb'];continue;case'1':_0x205959[_0x5761d2(0x208,0x218,0x279,0x205)][_0x3abcde(-0x24a,-0x1e2,-0x295,-0x252)]=_0x46d7d8[_0x3abcde(-0x26a,-0x212,-0x286,-0x277)];continue;case'2':_0x381ddd[_0x3abcde(-0x36f,-0x32c,-0x2e6,-0x339)+_0x3abcde(-0x373,-0x2f4,-0x2e2,-0x2fa)]=null;continue;case'3':_0x4511cf[_0x3abcde(-0x24b,-0x205,-0x1ff,-0x267)]['display']=_0x46d7d8[_0x5761d2(0x257,0x209,0x1f3,0x25b)];continue;case'4':_0x334d19['src']='';continue;case'5':_0x171f49=null;continue;}break;}}}}else{const _0x1f6336=_0x46d7d8[_0x5761d2(0x219,0x1f1,0x1d9,0x1ed)]['split']('|');let _0x4be81c=0x2601+0x19d4*0x1+0x3fd5*-0x1;while(!![]){switch(_0x1f6336[_0x4be81c++]){case'0':window[_0x5761d2(0x1be,0x1af,0x211,0x214)+_0x5761d2(0x1bd,0x175,0x1ac,0x17b)]=null;continue;case'1':_0x477a1d[_0x5761d2(0x210,0x218,0x1e6,0x1b8)]['display']=_0x46d7d8['PRwnb'];continue;case'2':_0x51ef1f[_0x3abcde(-0x204,-0x26e,-0x2e4,-0x267)][_0x5761d2(0x1c4,0x22d,0x22c,0x1cc)]=_0x5761d2(0x1d2,0x156,0xf9,0x10f);continue;case'3':_0x51ef1f['src']='';continue;case'4':_0x59b1ba[_0x3abcde(-0x1fb,-0x223,-0x22c,-0x267)]['display']=_0x46d7d8[_0x3abcde(-0x28c,-0x2d1,-0x2b7,-0x276)];continue;}break;}}}function removeNovelaiCharRefImage(){const _0x513e02={'rGxwM':function(_0x10bef4,_0x2b258e){return _0x10bef4(_0x2b258e);}};_0x513e02[_0x31d3d0(0x438,0x45c,0x48c,0x471)](updateNovelaiCharRefImagePreview,null);function _0x26c90d(_0x37bd75,_0x4f2057,_0x6a3b16,_0x40a7af){return _0x7178c7(_0x37bd75-0x1e2,_0x6a3b16,_0x6a3b16-0x127,_0x4f2057-0x3e9);}function _0x31d3d0(_0x75682f,_0x29f3a7,_0x512e01,_0x502a1b){return _0x3e5332(_0x75682f-0x16b,_0x75682f-0x2a1,_0x502a1b,_0x502a1b-0x8f);}dbs[_0x26c90d(0x3b6,0x3c8,0x39b,0x3e0)+'e'](NAI_CHAR_REF_CACHE_KEY);}function _0x4fc3(_0x23c8ee,_0x1d3130){_0x23c8ee=_0x23c8ee-(0x20b7+-0x3b*0x4a+0xa7*-0x17);const _0xb5a5cc=_0x410b();let _0x4bdde2=_0xb5a5cc[_0x23c8ee];if(_0x4fc3['GZjDZQ']===undefined){var _0x2a2979=function(_0x37c17c){const _0x5eac4d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x24894e='',_0x27df40='',_0x4b277a=_0x24894e+_0x2a2979;for(let _0x45e7c=0x1748+0x10fe+-0x2846,_0x4f7e27,_0x5efebf,_0xd46a2f=-0x1b7a+-0x719+0x2293;_0x5efebf=_0x37c17c['charAt'](_0xd46a2f++);~_0x5efebf&&(_0x4f7e27=_0x45e7c%(-0x5*-0x232+-0xaed*0x1+-0x9)?_0x4f7e27*(0x7*0x39f+-0xb93*-0x3+-0xf7*0x3e)+_0x5efebf:_0x5efebf,_0x45e7c++%(-0x1245+-0x2236+-0x97*-0x59))?_0x24894e+=_0x4b277a['charCodeAt'](_0xd46a2f+(-0x2*-0xade+0x1ada+-0x308c))-(-0x1638+-0x2*-0xb47+0x2*-0x26)!==-0xc6c+-0x1387*-0x1+-0x71b?String['fromCharCode'](-0x1*-0xc59+0x1eb*-0x1+0x5*-0x1e3&_0x4f7e27>>(-(-0x15c7+0x1b59*-0x1+0x3122)*_0x45e7c&0xde*0x1f+0x112*-0x17+0xe*-0x29)):_0x45e7c:-0xce3*0x1+-0x14a1*-0x1+0x3df*-0x2){_0x5efebf=_0x5eac4d['indexOf'](_0x5efebf);}for(let _0x15c7d5=0x1d18+-0xbc5*-0x1+-0x28dd,_0x66146c=_0x24894e['length'];_0x15c7d5<_0x66146c;_0x15c7d5++){_0x27df40+='%'+('00'+_0x24894e['charCodeAt'](_0x15c7d5)['toString'](-0x9e*0x4+-0x3*-0x159+-0x183))['slice'](-(-0x23aa+0x1017+-0x1*-0x1395));}return decodeURIComponent(_0x27df40);};_0x4fc3['Xklwmq']=_0x2a2979,_0x4fc3['QPvSzm']={},_0x4fc3['GZjDZQ']=!![];}const _0x5c366d=_0xb5a5cc[0x1*-0x10d5+0x100d+0xa*0x14],_0x5ef2d7=_0x23c8ee+_0x5c366d,_0x145912=_0x4fc3['QPvSzm'][_0x5ef2d7];if(!_0x145912){const _0x197f4=function(_0x16bf22){this['jmEMIF']=_0x16bf22,this['dkHuEz']=[-0x1*-0x18be+-0x1*0xad2+-0xdeb,-0x65*0x11+-0x848+-0x1*-0xefd,-0x14d6+-0x1*-0xc1f+0x17*0x61],this['toLeUl']=function(){return'newState';},this['PELFQs']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['MUAoIH']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x197f4['prototype']['GxIrMX']=function(){const _0x24cc4c=new RegExp(this['PELFQs']+this['MUAoIH']),_0x3ebcaa=_0x24cc4c['test'](this['toLeUl']['toString']())?--this['dkHuEz'][-0x1038+-0x175*-0x13+-0xb76]:--this['dkHuEz'][-0x1*0x21c7+-0x1*-0xc63+0x1564];return this['nvUmUS'](_0x3ebcaa);},_0x197f4['prototype']['nvUmUS']=function(_0x1b08a3){if(!Boolean(~_0x1b08a3))return _0x1b08a3;return this['bWQESI'](this['jmEMIF']);},_0x197f4['prototype']['bWQESI']=function(_0x272b3e){for(let _0x555ce6=-0x9*-0x352+-0xccc+-0x12*0xf3,_0x2cb1a6=this['dkHuEz']['length'];_0x555ce6<_0x2cb1a6;_0x555ce6++){this['dkHuEz']['push'](Math['round'](Math['random']())),_0x2cb1a6=this['dkHuEz']['length'];}return _0x272b3e(this['dkHuEz'][0x3b6+-0x1*-0x1e6d+-0x2223]);},new _0x197f4(_0x4fc3)['GxIrMX'](),_0x4bdde2=_0x4fc3['Xklwmq'](_0x4bdde2),_0x4fc3['QPvSzm'][_0x5ef2d7]=_0x4bdde2;}else _0x4bdde2=_0x145912;return _0x4bdde2;}async function handleNovelaiCharRefImageUpload(_0x39df03){function _0x18784f(_0x2163ca,_0x1e94bc,_0x574f36,_0x4d3799){return _0x7178c7(_0x2163ca-0x100,_0x4d3799,_0x574f36-0x161,_0x1e94bc-0x135);}const _0x5a4569={'zEfpk':_0x18784f(0x1d6,0x1a5,0x1c2,0x182)+_0x2816ac(-0xaa,-0xb5,-0x55,-0x53)+_0x2816ac(-0xcb,-0x14,-0x5d,0x11)+':','VOWFP':function(_0x4fcf03,_0x318dca){return _0x4fcf03+_0x318dca;},'erthX':'图片处理失败:\x20','yeaeq':function(_0x43140f,_0x1028bb){return _0x43140f!==_0x1028bb;},'drKWs':'nhZYB','ppJgc':function(_0x39ead9,_0x1708f0){return _0x39ead9(_0x1708f0);},'jwwoO':_0x2816ac(0x72,0xa2,0x6d,0x7e)+_0x2816ac(-0x41,-0x2e,-0x55,-0x24)+_0x2816ac(-0x2b,-0x32,-0x56,0x0)+_0x2816ac(-0x68,0x44,0x9,0x68)};function _0x2816ac(_0x22921f,_0x1a03aa,_0x399190,_0xb54be0){return _0x3e5332(_0x22921f-0x1e0,_0x399190- -0x1db,_0x22921f,_0xb54be0-0x2a);}const _0x2576f6=_0x39df03[_0x18784f(0xd4,0x12f,0xe4,0x14c)][_0x2816ac(0x44,0x9,0x24,0x91)][-0x64e*-0x2+0x1679+-0x2315];if(!_0x2576f6)return;try{if(_0x5a4569[_0x2816ac(-0x7a,0x2c,-0x52,0x1)](_0x18784f(0xcb,0xc8,0x76,0xd7),_0x5a4569[_0x2816ac(0xb4,-0x27,0x39,0x94)])){const _0x9b8dff=await processUploadedImage(_0x2576f6);_0x5a4569[_0x18784f(0x178,0x157,0x123,0x110)](updateNovelaiCharRefImagePreview,_0x9b8dff);}else _0x6763a4['error'](_0x5a4569[_0x18784f(0xcb,0x109,0xb9,0x161)],_0x3ece98),_0x4f213d(_0x5a4569[_0x18784f(0x1c5,0x15e,0x115,0xef)](_0x5a4569[_0x2816ac(0x36,-0x16,-0x10,0x5c)],_0x2698eb[_0x18784f(0x71,0xc7,0xd5,0x9b)]));}catch(_0x4d3fc0){console['error'](_0x5a4569['jwwoO'],_0x4d3fc0),_0x5a4569[_0x2816ac(0x41,0x28,0x1f,0x82)](alert,_0x5a4569[_0x2816ac(-0x4,-0x15,0x26,0x84)]('图片处理失败:\x20',_0x4d3fc0[_0x18784f(0x56,0xc7,0x139,0x114)]));}}function updateComfyUIImagePreview(_0x21e321){const _0x5ae7cf={'IcCaO':function(_0x29c642){return _0x29c642();},'VEaaC':_0x2a75b9(-0xd9,-0xcf,-0x6b,-0x9a)+_0x2a75b9(-0x83,-0x115,-0xaa,-0xbe),'cqFPY':_0x4bbe43(0x3df,0x3b9,0x3f9,0x3fa)+_0x4bbe43(0x3ed,0x3c4,0x418,0x399)+_0x4bbe43(0x27f,0x2e0,0x2ac,0x2da)+_0x2a75b9(-0x10f,-0x110,-0x133,-0xc5)+_0x4bbe43(0x343,0x3b1,0x3cb,0x3d7)+'placeholde'+'r','SThxH':_0x2a75b9(-0xe5,-0x178,-0x16a,-0x135)+'move-image'+'-btn','gcnFZ':function(_0x46d183,_0xfaba45){return _0x46d183!==_0xfaba45;},'ggMbH':_0x2a75b9(-0x188,-0x153,-0xca,-0x124),'eUHaT':_0x2a75b9(-0x179,-0x175,-0x1a7,-0x15d),'FWnGF':_0x2a75b9(-0x121,-0x1e8,-0x15f,-0x17a),'KhqbA':_0x2a75b9(-0x1e7,-0x1f8,-0x1e9,-0x185)+'x','DHyuv':_0x2a75b9(-0x116,-0xa5,-0xcc,-0xa5)+'4','BgHwL':_0x2a75b9(-0xb1,-0x126,-0x72,-0xad)};function _0x2a75b9(_0xac8704,_0x1bfddc,_0x16634e,_0x34821a){return _0x3e5332(_0xac8704-0x2,_0x34821a- -0x2ee,_0x1bfddc,_0x34821a-0xa);}const _0x1af7cc=document['getElement'+_0x4bbe43(0x2d5,0x2e1,0x320,0x35c)](_0x5ae7cf[_0x4bbe43(0x33c,0x3ae,0x381,0x3b2)]),_0xff95c6=document[_0x4bbe43(0x373,0x34d,0x330,0x3c3)+_0x4bbe43(0x2ff,0x2e5,0x28e,0x2d6)](_0x5ae7cf[_0x4bbe43(0x319,0x38b,0x3ae,0x34a)]),_0x3d49af=document[_0x4bbe43(0x355,0x2f6,0x290,0x2fb)+_0x4bbe43(0x2f7,0x2e1,0x328,0x265)](_0x5ae7cf[_0x2a75b9(-0x126,-0x95,-0xb3,-0x112)]);function _0x4bbe43(_0x8dd916,_0x2bf871,_0x221aec,_0x22f364){return _0x3e5332(_0x8dd916-0xd6,_0x2bf871-0x16f,_0x221aec,_0x22f364-0x18c);}_0x1af7cc[_0x2a75b9(-0x96,-0x157,-0xd7,-0xfa)]&&_0x1af7cc[_0x4bbe43(0x3ad,0x363,0x3dc,0x390)]['startsWith'](_0x4bbe43(0x2fe,0x349,0x2e8,0x310))&&_0x5ae7cf['gcnFZ'](_0x1af7cc[_0x4bbe43(0x2e8,0x363,0x382,0x3bc)],_0x21e321)&&(_0x5ae7cf[_0x4bbe43(0x311,0x344,0x2d4,0x2e6)]!==_0x5ae7cf[_0x4bbe43(0x351,0x344,0x379,0x2d4)]?_0x5ae7cf['IcCaO'](_0x12d141):URL[_0x4bbe43(0x29a,0x2d5,0x2c6,0x2a6)+_0x4bbe43(0x2b4,0x2cd,0x2fa,0x251)](_0x1af7cc['src']));if(_0x21e321)_0x1af7cc[_0x4bbe43(0x3af,0x363,0x2ea,0x2ec)]=_0x21e321,_0x1af7cc[_0x2a75b9(-0xa9,-0x8a,-0xc5,-0xb8)][_0x4bbe43(0x35d,0x3ba,0x3d2,0x382)]=_0x5ae7cf[_0x4bbe43(0x312,0x374,0x36e,0x3c9)],_0xff95c6[_0x2a75b9(-0x10a,-0xcc,-0xd6,-0xb8)][_0x2a75b9(-0x2b,-0x10c,-0xcc,-0xa3)]=_0x5ae7cf[_0x2a75b9(-0x70,-0xba,-0xa0,-0xa0)],_0x3d49af[_0x4bbe43(0x32c,0x3a5,0x378,0x39a)][_0x2a75b9(-0xae,-0xf1,-0x6d,-0xa3)]=_0x5ae7cf['KhqbA'];else{const _0x2bb9f1=_0x5ae7cf[_0x4bbe43(0x3fa,0x382,0x330,0x34f)][_0x4bbe43(0x38d,0x348,0x386,0x32b)]('|');let _0x483c7f=-0x2ff+-0x5f0*-0x1+-0x3*0xfb;while(!![]){switch(_0x2bb9f1[_0x483c7f++]){case'0':window[_0x4bbe43(0x2e5,0x2d3,0x2ab,0x2d0)+_0x4bbe43(0x313,0x312,0x2dd,0x375)]=null;continue;case'1':_0x3d49af['style'][_0x4bbe43(0x411,0x3ba,0x3ca,0x3c0)]=_0x4bbe43(0x330,0x2e3,0x290,0x2af);continue;case'2':_0x1af7cc[_0x4bbe43(0x36e,0x363,0x34d,0x3be)]='';continue;case'3':_0x1af7cc[_0x2a75b9(-0xd2,-0x52,-0x119,-0xb8)][_0x2a75b9(-0x112,-0x61,-0x88,-0xa3)]=_0x2a75b9(-0x158,-0x12c,-0x1d8,-0x17a);continue;case'4':comfyuiImageObjectURL=null;continue;case'5':_0xff95c6['style'][_0x4bbe43(0x3fc,0x3ba,0x3ed,0x385)]=_0x5ae7cf[_0x4bbe43(0x2de,0x327,0x2ad,0x35b)];continue;}break;}}}function removeComfyUIImage(){updateComfyUIImagePreview(null),dbs['storeDelet'+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x38753e){const _0x13217c={'ekKSq':_0x19f58c(-0x23e,-0x207,-0x1e8,-0x1c5)+_0x19f58c(-0x192,-0x12c,-0x20e,-0x168)+_0x19f58c(-0x186,-0x1ea,-0x10a,-0x188)+_0x19f58c(-0x1e3,-0x1f7,-0x18c,-0x1fd),'VJYJW':function(_0x27b4a8,_0x438ca0){return _0x27b4a8!==_0x438ca0;},'ExkZT':'Shccv','VYxOc':function(_0x28b476,_0x1a1f14){return _0x28b476(_0x1a1f14);},'Wipsc':_0x40bfc(0x3e9,0x357,0x38e,0x391),'kzKSe':function(_0x2e33a5,_0x4267fc){return _0x2e33a5(_0x4267fc);},'wQnam':_0x19f58c(-0x1ad,-0x198,-0x1f7,-0x131)+_0x19f58c(-0x23a,-0x270,-0x1f7,-0x1f3),'MYtNO':function(_0x528df6){return _0x528df6();},'PMEza':'POST','hmlON':function(_0x2c5582,_0x4f7fa0){return _0x2c5582(_0x4f7fa0);},'EvQeP':function(_0x3932b6,_0x8b2c){return _0x3932b6(_0x8b2c);},'fgpUk':function(_0xdb5313,_0x2acb18){return _0xdb5313+_0x2acb18;},'sfBiS':function(_0xf2c8d,_0x2913a6){return _0xf2c8d(_0x2913a6);},'ZkpBh':_0x19f58c(-0x208,-0x19f,-0x24b,-0x214),'PyZAT':function(_0x5551dc){return _0x5551dc();},'KmYJq':_0x40bfc(0x3e6,0x39f,0x3ab,0x3e0)+':\x20','uPmXy':_0x19f58c(-0x1b3,-0x1f6,-0x143,-0x148)+':','oNBgp':function(_0x47dda6){return _0x47dda6();}},_0x3cf05b=extension_settings[extensionName],_0x1676ce=_0x38753e[_0x19f58c(-0x206,-0x1f4,-0x23e,-0x1b4)][_0x19f58c(-0x1d9,-0x222,-0x1f9,-0x20b)][-0x2048*-0x1+0x4f5*0x1+0x1*-0x253d];if(!_0x1676ce)return;function _0x19f58c(_0x70e726,_0x18551a,_0x4baa8a,_0x533e92){return _0x3e5332(_0x70e726-0x108,_0x70e726- -0x3d8,_0x18551a,_0x533e92-0x127);}function _0x40bfc(_0x1404eb,_0x1e8675,_0x2ed252,_0x406818){return _0x7178c7(_0x1404eb-0x12,_0x406818,_0x2ed252-0xfb,_0x2ed252-0x35e);}try{if(_0x13217c[_0x19f58c(-0x279,-0x2cf,-0x2b4,-0x21d)](_0x13217c['ExkZT'],_0x13217c[_0x40bfc(0x39d,0x393,0x3b5,0x348)]))_0x350e45[_0x19f58c(-0x1e0,-0x21d,-0x17a,-0x1e9)](_0x13217c[_0x19f58c(-0x249,-0x2bf,-0x23f,-0x2b6)],_0x488ff7);else{const _0x4e642d=await _0x13217c[_0x19f58c(-0x23d,-0x27d,-0x23b,-0x2ae)](processUploadedImageToBlob,_0x1676ce),_0x1a29b6=URL[_0x40bfc(0x322,0x2cd,0x343,0x2d1)+_0x19f58c(-0x27a,-0x2b8,-0x2db,-0x25c)](_0x4e642d);comfyuiImageObjectURL=_0x1a29b6,updateComfyUIImagePreview(_0x1a29b6);const _0x511aaf=new FormData();_0x511aaf[_0x19f58c(-0x1bf,-0x1a9,-0x16c,-0x166)](_0x13217c[_0x19f58c(-0x20c,-0x1e8,-0x25e,-0x251)],_0x4e642d,_0x1676ce[_0x19f58c(-0x193,-0x193,-0x1a6,-0x1be)]);let _0x5081ae=_0x3cf05b['comfyuiUrl'][_0x19f58c(-0x278,-0x1fa,-0x231,-0x217)]();if(!_0x5081ae){_0x13217c[_0x19f58c(-0x209,-0x222,-0x286,-0x1a5)](alert,_0x13217c[_0x40bfc(0x413,0x418,0x3b4,0x3d6)]),_0x13217c[_0x19f58c(-0x1ce,-0x1e0,-0x178,-0x1ca)](removeComfyUIImage);return;}const _0x5bc49d={};_0x5bc49d[_0x40bfc(0x303,0x2c4,0x2f9,0x33e)]=_0x13217c['PMEza'],_0x5bc49d[_0x19f58c(-0x1d4,-0x20e,-0x171,-0x233)]=_0x511aaf;const _0x33c58e=await fetch(_0x5081ae+(_0x19f58c(-0x25b,-0x261,-0x26e,-0x2b2)+_0x19f58c(-0x22a,-0x1bd,-0x286,-0x221)),_0x5bc49d);if(_0x33c58e['ok']){const _0x12d234=await _0x33c58e[_0x19f58c(-0x268,-0x2d3,-0x212,-0x1fb)]();window['comfyuican'+_0x40bfc(0x2ca,0x355,0x329,0x380)]=_0x12d234[_0x19f58c(-0x193,-0x1c7,-0x161,-0x15a)],_0x13217c[_0x40bfc(0x2ee,0x38a,0x333,0x323)](addLog,_0x19f58c(-0x194,-0x145,-0x165,-0x1ce)+'器返回数据:\x20'+JSON[_0x19f58c(-0x216,-0x27a,-0x279,-0x21c)](_0x12d234)),console[_0x40bfc(0x2ab,0x28d,0x30a,0x31d)](_0x19f58c(-0x20a,-0x210,-0x228,-0x1f0)+'回数据:',_0x12d234);const _0x1e4cae=new FileReader();_0x1e4cae[_0x40bfc(0x32d,0x31c,0x31a,0x37d)]=()=>{const _0x21f079=_0x1e4cae[_0x3ec98e(0x27e,0x272,0x2e2,0x329)],_0x14b726={};_0x14b726['data']=_0x21f079,_0x14b726['serverFile'+_0x50513c(0x190,0x127,0x20c,0x147)]=_0x12d234[_0x50513c(0x1b6,0x225,0x165,0x203)];const _0x10f5ba=_0x14b726;function _0x50513c(_0x21e145,_0x58133e,_0x538c4,_0x561b83){return _0x19f58c(_0x21e145-0x349,_0x58133e,_0x538c4-0x33,_0x561b83-0x148);}const _0x18cf53={};function _0x3ec98e(_0x190261,_0x15ed2b,_0x222d6a,_0x43df46){return _0x19f58c(_0x222d6a-0x4f6,_0x43df46,_0x222d6a-0x1d0,_0x43df46-0xcb);}_0x18cf53['id']=COMFYUI_REF_CACHE_KEY,_0x18cf53[_0x50513c(0x139,0x11c,0x171,0x177)]=_0x10f5ba,dbs['storeReadW'+_0x50513c(0x15b,0x128,0x118,0x114)](_0x18cf53);},_0x1e4cae[_0x19f58c(-0x1cf,-0x21f,-0x1f3,-0x1a3)+_0x19f58c(-0x1d1,-0x1ab,-0x17a,-0x1fa)](_0x4e642d);}else{const _0x17f9c7=await _0x33c58e[_0x19f58c(-0x1b0,-0x1f9,-0x160,-0x19b)]();_0x13217c[_0x19f58c(-0x1b7,-0x194,-0x230,-0x1ca)](alert,_0x13217c[_0x19f58c(-0x227,-0x203,-0x20a,-0x1c4)](_0x19f58c(-0x1bb,-0x20d,-0x201,-0x204),_0x17f9c7)),_0x13217c['sfBiS'](addLog,_0x40bfc(0x3f1,0x3be,0x396,0x360)+'详情:\x20'+_0x17f9c7),console[_0x19f58c(-0x1e0,-0x180,-0x1dd,-0x1c9)](_0x13217c['ZkpBh'],_0x17f9c7),_0x13217c['PyZAT'](removeComfyUIImage);}}}catch(_0x595540){alert(_0x13217c[_0x40bfc(0x335,0x30a,0x337,0x3a6)](_0x13217c[_0x40bfc(0x31f,0x38b,0x393,0x332)],_0x595540[_0x40bfc(0x2c8,0x354,0x2f0,0x363)])),console[_0x19f58c(-0x1e0,-0x249,-0x179,-0x1f8)](_0x13217c[_0x19f58c(-0x25e,-0x1f0,-0x2b8,-0x1e1)],_0x595540),addLog(_0x40bfc(0x355,0x36d,0x396,0x3e6)+_0x40bfc(0x3a3,0x32a,0x346,0x3bb)+JSON[_0x19f58c(-0x216,-0x25b,-0x279,-0x283)](_0x595540)),_0x13217c['oNBgp'](removeComfyUIImage);}}async function loadCachedImages(){function _0x64a55c(_0x4abc83,_0x49f166,_0x1975e1,_0x4162db){return _0x3e5332(_0x4abc83-0x1c3,_0x4162db- -0x2f7,_0x49f166,_0x4162db-0x1e5);}function _0x29dd10(_0x293491,_0x1ff0b7,_0x384897,_0x23a162){return _0x3e5332(_0x293491-0x162,_0x384897- -0xbe,_0x293491,_0x23a162-0x1d7);}const _0x317eed={'sZTwC':_0x64a55c(-0x1ca,-0x144,-0x13e,-0x15d)+_0x29dd10(0x162,0x195,0x188,0x13e)+_0x29dd10(0x157,0x177,0x12e,0x14b)+_0x64a55c(-0x178,-0x165,-0xfb,-0x10c),'rPfQT':function(_0x33b087,_0x3d2913){return _0x33b087(_0x3d2913);},'GlaJn':_0x64a55c(-0x10e,-0x58,-0x101,-0xcc)+_0x29dd10(0xcc,0x6a,0xe0,0xeb),'ySGoG':function(_0x132879,_0xc4d6e7){return _0x132879===_0xc4d6e7;},'xXzfF':_0x29dd10(0x97,0x103,0xe4,0x86),'FSuZD':'Error\x20load'+_0x64a55c(-0x10c,-0x95,-0x82,-0xb1)+_0x64a55c(-0xbc,-0xb9,-0xb8,-0xa5)+_0x29dd10(0x13d,0x178,0x137,0x127),'ShBqD':function(_0x485c35,_0x101587){return _0x485c35===_0x101587;},'zroLf':_0x64a55c(-0xb0,-0x13a,-0x15d,-0xf1),'Lgtve':_0x64a55c(-0x193,-0x127,-0x185,-0x126),'wFpWr':'YsBRw','cEGgx':function(_0x3d8054,_0x49e2f0){return _0x3d8054(_0x49e2f0);},'KgcJJ':function(_0x40970f,_0x1f9179){return _0x40970f!==_0x1f9179;},'lcvej':_0x64a55c(-0x122,-0x6d,-0xbf,-0xd5),'rXHPe':_0x29dd10(0x125,0x60,0xdc,0xe4)+_0x64a55c(-0xe3,-0xbb,-0x11b,-0xb1)+'\x20NovelAI\x20C'+_0x64a55c(-0xa9,-0xa0,-0x159,-0xeb)+'age:','veXJx':function(_0x3c5a1c,_0x1b027b){return _0x3c5a1c(_0x1b027b);},'DKwac':_0x29dd10(0x130,0xd2,0xe9,0xb0),'uniVk':function(_0x218b0e,_0x5000ba){return _0x218b0e(_0x5000ba);},'dTYHL':function(_0x29d264,_0x496e0a){return _0x29d264!==_0x496e0a;}};await dbs[_0x29dd10(0x11d,0x165,0x150,0x1a7)]();try{if(_0x317eed[_0x29dd10(0xea,0x134,0xc3,0xf0)](_0x317eed[_0x29dd10(0x8c,0x91,0xde,0x138)],'OhIZS'))_0x5783a9['error'](_0x317eed['sZTwC'],_0x4cb81f);else{const _0xc92bab=await dbs['storeReadO'+_0x29dd10(0xfc,0x137,0xf6,0x171)](NAI_VIBE_CACHE_KEY);_0xc92bab&&_0xc92bab['data']&&_0x317eed[_0x64a55c(-0x18d,-0xfa,-0x1c7,-0x15a)](updateNovelaiImagePreview,_0xc92bab['data']);}}catch(_0x122574){console[_0x64a55c(-0x82,-0x100,-0x10a,-0xff)](_0x317eed[_0x64a55c(-0xa5,-0x6f,-0x76,-0xd9)],_0x122574);}try{if(_0x317eed['ShBqD'](_0x317eed['zroLf'],_0x317eed['Lgtve'])){_0x317eed[_0x29dd10(0x143,0xcb,0xdf,0x84)](_0x33670f,_0x317eed[_0x64a55c(-0x5f,-0x115,-0x12a,-0xbd)]),_0x5d3b7e();return;}else{const _0x23c056=await dbs[_0x29dd10(0x1b9,0x1ce,0x16f,0x1a2)+_0x64a55c(-0x132,-0x18f,-0xfe,-0x143)](NAI_CHAR_REF_CACHE_KEY);_0x23c056&&_0x23c056['data']&&(_0x317eed['ShBqD'](_0x317eed['wFpWr'],_0x317eed[_0x64a55c(-0xba,-0x97,-0x10b,-0xe1)])?_0x317eed[_0x64a55c(-0x12f,-0x15f,-0x88,-0xec)](updateNovelaiCharRefImagePreview,_0x23c056[_0x29dd10(0x14d,0xf4,0x10a,0x141)]):_0x12fe3e[_0x29dd10(0x7a,0xc0,0xc9,0x122)+_0x64a55c(-0x19d,-0x1bd,-0x10e,-0x185)](_0x29dd10(0x10d,0xd9,0xdb,0xbb)+_0x29dd10(0xff,0xd7,0xb0,0xeb)+_0x64a55c(-0x15c,-0x12e,-0x82,-0xf7))['click']());}}catch(_0x5211b3){_0x317eed[_0x29dd10(0x1b6,0x159,0x182,0x1ac)](_0x317eed[_0x64a55c(-0x76,-0xe7,-0x76,-0xe5)],_0x317eed[_0x64a55c(-0x148,-0x137,-0x104,-0xe5)])?_0x48fb37(_0x2af0d9['data']):console[_0x64a55c(-0x81,-0x13d,-0x17c,-0xff)](_0x317eed['rXHPe'],_0x5211b3);}try{const _0x4cfe7c=await dbs[_0x29dd10(0x14a,0x1be,0x16f,0x154)+_0x64a55c(-0x10a,-0x1bc,-0x10f,-0x143)](COMFYUI_REF_CACHE_KEY);if(_0x4cfe7c&&_0x4cfe7c['data']&&_0x4cfe7c[_0x29dd10(0x166,0x10b,0x10a,0xc8)][_0x29dd10(0xb9,0xe3,0x10a,0xda)]&&_0x4cfe7c['data'][_0x29dd10(0xcc,0xac,0x127,0xbb)+'Name']){const _0x552164=_0x4cfe7c[_0x64a55c(-0xf2,-0xcc,-0x10f,-0x12f)],_0x383209=await fetch(_0x552164['data']),_0x3a5ccd=await _0x383209[_0x29dd10(0x16e,0xca,0x139,0x167)](),_0x90831=URL[_0x29dd10(0xf6,0x172,0xff,0xd4)+_0x64a55c(-0x13b,-0x1b1,-0x1cf,-0x199)](_0x3a5ccd);_0x317eed[_0x64a55c(-0xdf,-0x10b,-0xdd,-0x15a)](updateComfyUIImagePreview,_0x90831),comfyuiImageObjectURL=_0x90831,window[_0x29dd10(0x73,0x106,0xa6,0x106)+_0x29dd10(0x106,0x14d,0xe5,0x93)]=_0x552164[_0x29dd10(0x11c,0xd8,0x127,0x171)+_0x64a55c(-0xb4,-0x14b,-0xbf,-0xd8)],_0x317eed[_0x64a55c(-0x8a,-0x155,-0x84,-0xfc)](addLog,'从缓存加载Comfy'+_0x64a55c(-0xc0,-0x11b,-0x56,-0xa4)+_0x552164[_0x29dd10(0x13b,0xd4,0x127,0x163)+_0x64a55c(-0x9e,-0x9b,-0xed,-0xd8)]),console[_0x29dd10(0xef,0x4b,0xc6,0x12e)](_0x64a55c(-0x18f,-0x184,-0x15d,-0x118)+_0x29dd10(0x70,0xa7,0xa4,0xb9)+_0x64a55c(-0x182,-0x196,-0xfe,-0x121)+_0x29dd10(0x10b,0xac,0x100,0x153)+_0x552164[_0x29dd10(0xd3,0xc7,0x127,0xdf)+_0x64a55c(-0x112,-0x12b,-0xfe,-0xd8)]);}else{if(_0x4cfe7c&&typeof _0x4cfe7c[_0x29dd10(0x121,0xd5,0x10a,0x10a)]===_0x317eed[_0x29dd10(0x124,0xd1,0x109,0x161)]){const _0x2f09a1=await _0x317eed['uniVk'](fetch,_0x4cfe7c[_0x29dd10(0x94,0x137,0x10a,0x136)]),_0x4fd6cb=await _0x2f09a1[_0x29dd10(0xca,0xe4,0x139,0x116)](),_0x430a44=URL['createObje'+_0x29dd10(0xae,0xbd,0xa0,0xa1)](_0x4fd6cb);_0x317eed[_0x29dd10(0x16a,0x150,0x13d,0x12c)](updateComfyUIImagePreview,_0x430a44),comfyuiImageObjectURL=_0x430a44,console[_0x29dd10(0x1ad,0x142,0x132,0xfc)]('Loaded\x20Com'+_0x64a55c(-0x1ca,-0x12f,-0x20f,-0x195)+_0x64a55c(-0x179,-0x116,-0x1a3,-0x12e)+_0x29dd10(0xdd,0x14a,0x134,0x19f)+_0x64a55c(-0xb0,-0x11a,-0x19c,-0x123)+_0x64a55c(-0x1a8,-0x1d9,-0x209,-0x190)+_0x64a55c(-0x12a,-0x10b,-0x11f,-0x108)+_0x64a55c(-0x14e,-0x174,-0xc5,-0x134)+_0x29dd10(0x165,0x101,0xf1,0x147)+'rmat.');}}}catch(_0x28f5fb){if(_0x317eed[_0x29dd10(0x109,0x1a5,0x176,0x181)]('vnDhh',_0x64a55c(-0x115,-0x194,-0x1a3,-0x16b))){const _0x2ccccf=_0x8c8feb[_0x64a55c(-0x125,-0x17c,-0x107,-0x133)],_0x2b6ba9={};_0x2b6ba9[_0x29dd10(0x16c,0x101,0x10a,0x97)]=_0x2ccccf,_0x2b6ba9[_0x64a55c(-0xaf,-0x15c,-0x130,-0x112)+_0x29dd10(0x195,0x1a1,0x161,0x16e)]=_0x527db0[_0x29dd10(0x1d2,0x146,0x187,0x18b)];const _0x4a7d2e=_0x2b6ba9,_0x26ed89={};_0x26ed89['id']=_0x3b39d1,_0x26ed89['data']=_0x4a7d2e,_0x24672b[_0x29dd10(0xc6,0x100,0x12b,0xd8)+_0x64a55c(-0x92,-0x9d,-0xcb,-0x10d)](_0x26ed89);}else console['error'](_0x317eed[_0x29dd10(0x122,0xc8,0x124,0x127)],_0x28f5fb);}}export function initImageUpload(_0x3eff29){const _0x2f88bf={'DlNWM':_0x5b28b6(0x417,0x43f,0x3a8,0x48c)+'+$','EPMkY':'WRnye','wWyRC':_0x5b28b6(0x42d,0x3dd,0x46c,0x420)+_0x133433(-0x130,-0xf4,-0x133,-0x13b),'KqJsL':function(_0x1af4a2){return _0x1af4a2();},'JYnaK':_0x133433(-0x19b,-0x20a,-0x15d,-0x1d3)+_0x133433(-0x256,-0x188,-0x229,-0x1fe)+'ref','ALrVV':_0x133433(-0x1d8,-0x1cf,-0x180,-0x1d3)+'2','CDxgr':_0x133433(-0x1bd,-0x1df,-0x1f2,-0x1d7)+'elect-imag'+'e-btn','chWwx':_0x5b28b6(0x4c0,0x4dc,0x49c,0x4b9)+_0x5b28b6(0x4e3,0x4b7,0x46d,0x506),'ztnXK':'change','svvnu':_0x5b28b6(0x400,0x42b,0x3a6,0x399)+_0x5b28b6(0x497,0x4fe,0x49b,0x49c)+'e-btn','Jjzjj':_0x133433(-0x1b3,-0x1f9,-0x1c9,-0x1d7)+_0x133433(-0xc6,-0x144,-0xfc,-0x137)+_0x133433(-0x205,-0x25b,-0x176,-0x1f1)+'-btn','lEOAn':_0x5b28b6(0x403,0x420,0x45d,0x459),'UDBGG':_0x133433(-0x174,-0x172,-0x168,-0x140)+'t_nai_char'+_0x133433(-0x1b4,-0x1de,-0x1b5,-0x1ba),'dWTsm':_0x5b28b6(0x400,0x412,0x47d,0x396)+_0x133433(-0x213,-0x1fa,-0x21e,-0x1b9)+_0x133433(-0x1b4,-0x22c,-0x1d4,-0x1f1)+'-btn','Qpqdp':'#comfyui-s'+'elect-imag'+_0x133433(-0x1bf,-0x251,-0x214,-0x1f5),'tdDtz':_0x5b28b6(0x4c0,0x534,0x481,0x503)+'t2','pWwHy':'#comfyui-r'+'emove-imag'+_0x5b28b6(0x40b,0x438,0x3f6,0x414)};function _0x5b28b6(_0x23ad31,_0x529271,_0x4b8d4e,_0x2574a2){return _0x3e5332(_0x23ad31-0x121,_0x23ad31-0x294,_0x2574a2,_0x2574a2-0x184);}_0x2f88bf['KqJsL'](loadCachedImages),_0x3eff29['find'](_0x2f88bf[_0x133433(-0x1cc,-0x1d9,-0x25b,-0x204)])['on'](_0x133433(-0x1ca,-0x1ff,-0x21b,-0x1fd),()=>{const _0x3d9ced={};_0x3d9ced[_0x123e3c(-0x282,-0x21d,-0x2db,-0x21e)]=_0x2f88bf[_0x123e3c(-0x25e,-0x228,-0x1f4,-0x2ad)];function _0x39a33a(_0x2bdd26,_0x263de6,_0xf25104,_0x1a8e1b){return _0x5b28b6(_0x1a8e1b- -0x554,_0x263de6-0x12e,_0xf25104-0x1d5,_0x2bdd26);}function _0x123e3c(_0x49868e,_0x547383,_0x180ce2,_0x461b35){return _0x5b28b6(_0x49868e- -0x72b,_0x547383-0x100,_0x180ce2-0x1cd,_0x180ce2);}const _0x1322eb=_0x3d9ced;if('ZhXyY'===_0x2f88bf[_0x123e3c(-0x2a4,-0x22a,-0x2df,-0x2d5)])return _0xab0b70[_0x39a33a(-0x1c0,-0x15b,-0x11a,-0x153)]()[_0x39a33a(-0x14a,-0x9d,-0x10d,-0x110)](hqROOT['yKLDO'])[_0x39a33a(-0x176,-0x1ac,-0x1ad,-0x153)]()['constructo'+'r'](_0x236031)[_0x39a33a(-0x13f,-0x164,-0x92,-0x110)](_0x39a33a(-0x1b7,-0x177,-0x172,-0x13d)+'+$');else document[_0x123e3c(-0x310,-0x36f,-0x330,-0x360)+_0x39a33a(-0x155,-0x19a,-0xe8,-0x14e)](_0x2f88bf[_0x39a33a(-0x9e,-0x29,-0x10b,-0x96)])[_0x123e3c(-0x328,-0x32d,-0x355,-0x376)]();}),_0x3eff29['find'](_0x2f88bf['chWwx'])['on'](_0x2f88bf[_0x133433(-0x13b,-0x14d,-0x1a2,-0x1b6)],handleNovelaiImageUpload),_0x3eff29[_0x133433(-0xfe,-0xd2,-0xbd,-0x115)](_0x2f88bf[_0x5b28b6(0x421,0x41e,0x3d8,0x442)])['on'](_0x133433(-0x239,-0x20a,-0x26e,-0x1fd),()=>{function _0x20ada6(_0x404025,_0xf6d345,_0x570276,_0x1b24cb){return _0x133433(_0x404025-0xe3,_0xf6d345-0x135,_0x570276,_0xf6d345-0x2c7);}_0x2f88bf[_0x20ada6(0x17f,0x16c,0x1ad,0x177)](removeNovelaiImage);}),_0x3eff29[_0x5b28b6(0x4eb,0x4c9,0x4fd,0x4c9)](_0x2f88bf['Jjzjj'])['on'](_0x2f88bf[_0x133433(-0x188,-0x174,-0x1dd,-0x1c2)],()=>{function _0x284f50(_0x5b194e,_0xc82147,_0x4bf1d3,_0x1cabbe){return _0x133433(_0x5b194e-0xdd,_0xc82147-0xb5,_0xc82147,_0x4bf1d3-0x4c0);}function _0x449b5d(_0x37576d,_0x4179e9,_0x23c7ae,_0x4c6ca7){return _0x5b28b6(_0x4179e9- -0x3b4,_0x4179e9-0x7c,_0x23c7ae-0xd3,_0x4c6ca7);}document[_0x284f50(0x2ec,0x2ec,0x2db,0x306)+_0x284f50(0x2eb,0x2f1,0x2c6,0x2aa)](_0x2f88bf['JYnaK'])['click']();}),_0x3eff29[_0x5b28b6(0x4eb,0x4ee,0x4ea,0x4db)](_0x2f88bf[_0x133433(-0x18c,-0x19c,-0x129,-0x18f)])['on'](_0x2f88bf[_0x133433(-0x1db,-0x168,-0x1db,-0x1b6)],handleNovelaiCharRefImageUpload),_0x3eff29[_0x5b28b6(0x4eb,0x474,0x4a0,0x4e9)](_0x2f88bf[_0x133433(-0x12f,-0xc6,-0x103,-0x114)])['on'](_0x133433(-0x196,-0x226,-0x1e0,-0x1fd),()=>{function _0x21480b(_0x28f506,_0x31ddba,_0x54b460,_0x18ee60){return _0x133433(_0x28f506-0x3b,_0x31ddba-0x94,_0x18ee60,_0x54b460-0x155);}_0x2f88bf[_0x21480b(-0x7f,-0x6e,-0x6,-0x11)](removeNovelaiCharRefImage);});function _0x133433(_0x100483,_0xa322e1,_0x5414d0,_0x23c275){return _0x7178c7(_0x100483-0x11d,_0x5414d0,_0x5414d0-0xd0,_0x23c275- -0x194);}_0x3eff29['find'](_0x2f88bf[_0x133433(-0x208,-0x1c8,-0x22a,-0x1ea)])['on'](_0x2f88bf[_0x133433(-0x1cc,-0x199,-0x162,-0x1c2)],()=>{function _0x4cc750(_0x52e1e2,_0x3845a6,_0x1b455a,_0x5985ac){return _0x5b28b6(_0x1b455a- -0x5f5,_0x3845a6-0xd2,_0x1b455a-0x130,_0x3845a6);}function _0xd200dd(_0x59ca2d,_0x274e9a,_0x487447,_0x508fa3){return _0x5b28b6(_0x487447- -0x2fb,_0x274e9a-0x9d,_0x487447-0x120,_0x274e9a);}document[_0x4cc750(-0x216,-0x16f,-0x1da,-0x16d)+_0xd200dd(0xc6,0xcb,0x10b,0xbe)](_0x2f88bf[_0x4cc750(-0x160,-0x121,-0x13d,-0x163)])[_0x4cc750(-0x1c5,-0x21f,-0x1f2,-0x1a0)]();}),_0x3eff29['find'](_0x2f88bf[_0x5b28b6(0x48a,0x474,0x4a8,0x41c)])['on'](_0x5b28b6(0x409,0x3e7,0x3a0,0x40c),handleImageUpload2),_0x3eff29['find'](_0x2f88bf[_0x5b28b6(0x4ab,0x464,0x4f4,0x44b)])['on'](_0x2f88bf[_0x133433(-0x1af,-0x1cd,-0x1fa,-0x1c2)],()=>{removeComfyUIImage();});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};