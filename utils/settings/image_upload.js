(function(_0x23ac33,_0xd6f07){function _0x1bb1a5(_0x2f3a1a,_0x4d092f,_0x5d73ac,_0x47c1ba){return _0x2b83(_0x47c1ba- -0x22d,_0x4d092f);}function _0x214b63(_0x57da37,_0x2dad04,_0x506b4d,_0x4dc5b8){return _0x2b83(_0x4dc5b8- -0x275,_0x506b4d);}const _0x2b1b0c=_0x23ac33();while(!![]){try{const _0x228549=parseInt(_0x214b63(-0x189,-0x153,-0x113,-0x180))/(-0x2148+0xfe1+-0x8b4*-0x2)*(-parseInt(_0x214b63(-0x1e4,-0x17a,-0x19f,-0x1f1))/(0x2*0x70d+-0x2e6*0x7+0x1*0x632))+-parseInt(_0x1bb1a5(-0x11a,-0x95,-0x172,-0x115))/(-0x1e7a*-0x1+-0x4b2*-0x2+-0x27db)+-parseInt(_0x214b63(-0x1cb,-0x1dc,-0x173,-0x186))/(-0x1109+0x26*0xf+0x17*0xa5)+parseInt(_0x1bb1a5(-0xa2,-0xa7,-0xeb,-0xb4))/(-0x4*0x8e0+-0x7*-0x4aa+0x1*0x2df)*(parseInt(_0x1bb1a5(-0x128,-0x16a,-0x1e6,-0x19a))/(0x11*-0x1e7+0xcb9+0x13a4))+-parseInt(_0x214b63(-0x15e,-0xc2,-0x11d,-0x11f))/(0x1450+-0x1334+-0x1*0x115)+parseInt(_0x214b63(-0x240,-0x1eb,-0x175,-0x1ce))/(0x9bb*-0x4+0x1a03+-0x1*-0xcf1)*(parseInt(_0x1bb1a5(-0x167,-0x20d,-0x1ac,-0x1ad))/(-0xad9+0x1551*-0x1+0x2033))+parseInt(_0x214b63(-0x20d,-0x187,-0x1dc,-0x1cf))/(-0xbf*0xd+-0x42*0x85+0x2c07);if(_0x228549===_0xd6f07)break;else _0x2b1b0c['push'](_0x2b1b0c['shift']());}catch(_0x4f28de){_0x2b1b0c['push'](_0x2b1b0c['shift']());}}}(_0xc9bf,0x1*0x337e1+0x114e2d*0x1+-0xaded0));const _0x3f5e73=(function(){const _0x377390={};_0x377390[_0x16a14b(0x256,0x26d,0x2a5,0x1e8)]=_0x16a14b(0x1cf,0x250,0x16d,0x22c)+'5',_0x377390[_0x16a14b(0x1be,0x1c3,0x210,0x159)]='none',_0x377390['ozrBw']=function(_0x10dd9f,_0x192960){return _0x10dd9f!==_0x192960;};function _0x16a14b(_0x356ceb,_0x54acdf,_0x351fdd,_0x338093){return _0x2b83(_0x356ceb-0x115,_0x54acdf);}_0x377390[_0x2f33a4(-0x1b5,-0x196,-0x13a,-0x163)]=_0x16a14b(0x215,0x22b,0x214,0x20d);const _0x483f88=_0x377390;function _0x2f33a4(_0x5313e4,_0x375d92,_0x2ab988,_0x38c02c){return _0x2b83(_0x5313e4- -0x313,_0x38c02c);}let _0x1026f7=!![];return function(_0x42a163,_0x208b4f){const _0x980549={};_0x980549[_0x1391bf(-0x2a4,-0x2f8,-0x2f8,-0x2c0)]=_0x483f88[_0x38aca4(-0x17c,-0x102,-0x13f,-0x1cb)],_0x980549[_0x1391bf(-0x30a,-0x289,-0x2d7,-0x2eb)]=_0x483f88[_0x38aca4(-0x214,-0x1b9,-0x21b,-0x206)];function _0x1391bf(_0x3fd95d,_0x13026a,_0x5e58de,_0x489442){return _0x2f33a4(_0x13026a- -0x8f,_0x13026a-0x33,_0x5e58de-0x13a,_0x489442);}function _0x38aca4(_0x5e5ec9,_0x49a6d5,_0x2bb1f5,_0x50a7eb){return _0x2f33a4(_0x5e5ec9-0x56,_0x49a6d5-0xd3,_0x2bb1f5-0xdd,_0x50a7eb);}_0x980549[_0x1391bf(-0x2bd,-0x257,-0x274,-0x1e4)]=_0x38aca4(-0x1c7,-0x1e8,-0x210,-0x15a);const _0x3e2ccd=_0x980549;if(_0x483f88[_0x1391bf(-0x2a7,-0x266,-0x23e,-0x1eb)](_0x483f88[_0x1391bf(-0x1e6,-0x244,-0x214,-0x211)],_0x38aca4(-0x1bd,-0x156,-0x17d,-0x157))){const _0x5c69d8=_0x3e2ccd[_0x38aca4(-0x213,-0x249,-0x27a,-0x1ab)][_0x38aca4(-0x182,-0x118,-0x18c,-0x103)]('|');let _0x4a27a3=0x7ef*0x2+0x1194+0x3*-0xb26;while(!![]){switch(_0x5c69d8[_0x4a27a3++]){case'0':_0x27dfa4['src']='';continue;case'1':_0x4ac736[_0x1391bf(-0x29f,-0x285,-0x283,-0x215)][_0x38aca4(-0x171,-0x19f,-0x1d8,-0x18a)]=_0x3e2ccd[_0x38aca4(-0x1a4,-0x180,-0x1f7,-0x18d)];continue;case'2':_0x2d8162[_0x38aca4(-0x24b,-0x230,-0x217,-0x270)+_0x38aca4(-0x150,-0xff,-0xd1,-0x1a3)]=null;continue;case'3':_0x5a17a5[_0x38aca4(-0x1a0,-0x1bd,-0x211,-0x1dc)][_0x38aca4(-0x171,-0x1ac,-0x1f6,-0x1ee)]=_0x3e2ccd['AlYhd'];continue;case'4':_0x49ebf2[_0x38aca4(-0x1a0,-0x1c6,-0x152,-0x201)][_0x1391bf(-0x1d8,-0x256,-0x24a,-0x2d8)]=_0x3e2ccd[_0x1391bf(-0x25a,-0x257,-0x2bb,-0x252)];continue;case'5':_0x2501d5=null;continue;}break;}}else{const _0x453c38=_0x1026f7?function(){function _0x1fe88e(_0x40077b,_0x1268a6,_0x36a5b1,_0x527452){return _0x38aca4(_0x1268a6-0x1cb,_0x1268a6-0x1a7,_0x36a5b1-0x10,_0x40077b);}if(_0x208b4f){const _0xc8233e=_0x208b4f[_0x1fe88e(0x15,0x4b,0x9c,0x6e)](_0x42a163,arguments);return _0x208b4f=null,_0xc8233e;}}:function(){};return _0x1026f7=![],_0x453c38;}};}()),_0x2d0b41=_0x3f5e73(this,function(){const _0x3e1744={};_0x3e1744['UMIqe']=_0x9deefa(0x40f,0x3df,0x3c5,0x3ce)+'+$';const _0x593ad3=_0x3e1744;function _0x9deefa(_0x4357c8,_0x437279,_0x2fa9c6,_0x4e8bec){return _0x2b83(_0x437279-0x2a6,_0x4e8bec);}function _0x57f546(_0x5a8a92,_0x21c553,_0x3cb706,_0x18ebd3){return _0x2b83(_0x5a8a92-0x196,_0x21c553);}return _0x2d0b41['toString']()['search'](_0x593ad3['UMIqe'])[_0x57f546(0x275,0x2c1,0x274,0x276)]()['constructo'+'r'](_0x2d0b41)[_0x57f546(0x2e0,0x321,0x2c5,0x342)](_0x593ad3['UMIqe']);});_0x2d0b41();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY='cache_nove'+_0x218acb(-0x94,-0xae,-0x50,-0x69)+'ransfer_im'+_0x218acb(-0x158,-0x102,-0x120,-0x7e),NAI_CHAR_REF_CACHE_KEY='cache_nove'+_0x218acb(-0x7b,-0xb8,-0xba,-0xd2)+'ef_image',COMFYUI_REF_CACHE_KEY=_0x218acb(-0x171,-0x147,-0x12c,-0x19c)+_0x218acb(-0x1a1,-0x16a,-0x11b,-0x1d5)+_0x1295cc(0x27e,0x22e,0x297,0x269);let nai3VibeTransferImageMimeType=_0x218acb(-0x112,-0x188,-0x12c,-0x195),nai3CharRefImageMimeType=_0x1295cc(0x16e,0x218,0x1dd,0x1e3),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x292e41){const _0x4d96c1={'VbMPl':function(_0x1d2348,_0x26dea3){return _0x1d2348(_0x26dea3);},'KTEyl':'previewIma'+'ge_novelai','WOWiN':_0x13d590(0x329,0x33d,0x2bb,0x2f3)+_0x13d590(0x343,0x334,0x33e,0x363)+_0x10253a(0x3b8,0x399,0x35e,0x36d)+_0x10253a(0x368,0x339,0x3e2,0x380)+_0x10253a(0x354,0x2e3,0x342,0x3c9)+_0x10253a(0x2e4,0x315,0x33b,0x302)+'r','VLjRJ':_0x10253a(0x305,0x283,0x338,0x379)+_0x13d590(0x29a,0x2cc,0x351,0x332)+_0x13d590(0x2f8,0x333,0x389,0x2e4),'SqvJR':_0x10253a(0x3ab,0x3f4,0x356,0x389),'JqHQD':function(_0x3e8950,_0x4c1a2b){return _0x3e8950===_0x4c1a2b;},'cAHvv':_0x13d590(0x394,0x38c,0x36b,0x380),'hYhmx':'none','jIjWJ':_0x13d590(0x398,0x34f,0x338,0x2d2)+'x','CNxFh':_0x10253a(0x2d7,0x2a5,0x259,0x342),'olxVz':_0x10253a(0x33c,0x3b0,0x2ec,0x399)},_0x27dbe5=document[_0x10253a(0x30e,0x2a2,0x34f,0x28c)+_0x10253a(0x2d8,0x31f,0x32a,0x30f)](_0x4d96c1[_0x10253a(0x39a,0x37a,0x354,0x3aa)]),_0x227839=document[_0x13d590(0x322,0x361,0x39a,0x38d)+'tor'](_0x4d96c1['WOWiN']);function _0x10253a(_0x524b2a,_0x2589c3,_0x443df3,_0xd812eb){return _0x1295cc(_0x524b2a-0x1ee,_0x2589c3-0x17,_0x2589c3,_0x524b2a-0xda);}function _0x13d590(_0x5249f8,_0x352ba7,_0x62bf40,_0x4f973c){return _0x1295cc(_0x5249f8-0x122,_0x352ba7-0x0,_0x5249f8,_0x352ba7-0xef);}const _0x16c77e=document[_0x13d590(0x30e,0x323,0x37e,0x33f)+_0x13d590(0x319,0x2ed,0x36a,0x2c3)](_0x4d96c1[_0x13d590(0x373,0x36a,0x3d6,0x319)]);if(_0x292e41&&_0x292e41[_0x13d590(0x32e,0x2fd,0x327,0x2d8)](_0x4d96c1[_0x10253a(0x373,0x2fa,0x3e3,0x3b0)])){if(_0x4d96c1[_0x10253a(0x3bd,0x439,0x343,0x3ad)](_0x4d96c1[_0x13d590(0x3e1,0x37c,0x3f0,0x2fc)],_0x10253a(0x3b0,0x3ea,0x35d,0x373)))_0x4d96c1[_0x10253a(0x3a8,0x3fa,0x3fd,0x352)](_0x55f142,_0x3fe8bd[_0x13d590(0x368,0x2ff,0x35c,0x2f8)]);else{_0x27dbe5['src']=_0x292e41,_0x27dbe5[_0x10253a(0x363,0x367,0x39d,0x3af)][_0x13d590(0x325,0x3a7,0x383,0x337)]='block',_0x227839['style']['display']=_0x4d96c1[_0x13d590(0x297,0x30b,0x299,0x28e)],_0x16c77e[_0x13d590(0x330,0x378,0x399,0x3b7)][_0x13d590(0x325,0x3a7,0x3c4,0x399)]=_0x4d96c1[_0x13d590(0x306,0x324,0x2eb,0x357)];const _0x4498c8=_0x292e41[_0x13d590(0x36e,0x396,0x35d,0x35d)](','),_0x5ab0ef=_0x4498c8[-0x16f6+0x1*0x1079+0x1*0x67d]['split'](':')[-0x842*-0x1+0x6*0x3b3+-0x1*0x1e73]['split'](';')[-0x152+-0x1*-0x1237+0x361*-0x5];nai3VibeTransferImageMimeType=_0x5ab0ef,window[_0x13d590(0x3e5,0x3b4,0x36b,0x347)+_0x13d590(0x308,0x326,0x2b2,0x376)+'e']=_0x4498c8[-0x56*0x39+-0x3*0x95d+-0x2f3e*-0x1];const _0x356c6f={};_0x356c6f['id']=NAI_VIBE_CACHE_KEY,_0x356c6f[_0x13d590(0x316,0x2ff,0x2bb,0x319)]=_0x292e41,dbs[_0x13d590(0x32d,0x327,0x361,0x3a7)+_0x10253a(0x32c,0x3a7,0x2ce,0x322)](_0x356c6f);}}else{const _0x41f3fe=_0x4d96c1['CNxFh'][_0x10253a(0x381,0x32e,0x307,0x32d)]('|');let _0x120d4b=0x5*0x7b9+-0x1812+-0xe8b;while(!![]){switch(_0x41f3fe[_0x120d4b++]){case'0':_0x27dbe5[_0x10253a(0x376,0x3b0,0x399,0x3f9)]='';continue;case'1':_0x16c77e[_0x13d590(0x3bb,0x378,0x3d7,0x331)][_0x10253a(0x392,0x3f8,0x341,0x3c7)]=_0x13d590(0x301,0x343,0x33b,0x2d4);continue;case'2':_0x227839[_0x13d590(0x337,0x378,0x2f6,0x348)]['display']=_0x4d96c1[_0x13d590(0x3a1,0x3c7,0x3c2,0x433)];continue;case'3':window[_0x13d590(0x35d,0x3b4,0x3a5,0x420)+_0x10253a(0x311,0x38a,0x31b,0x2c2)+'e']=null;continue;case'4':_0x27dbe5[_0x10253a(0x363,0x31e,0x379,0x346)]['display']=_0x4d96c1[_0x13d590(0x2de,0x30b,0x368,0x2e8)];continue;}break;}}}function removeNovelaiImage(){updateNovelaiImagePreview(null),dbs['storeDelet'+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x563068){const _0x18f97d={'JwNof':function(_0x14fee4,_0x58fa64,_0x26d195){return _0x14fee4(_0x58fa64,_0x26d195);},'TAhDI':function(_0x419ab2,_0x33cc7f){return _0x419ab2(_0x33cc7f);},'TflbY':function(_0x143645,_0x57e695){return _0x143645+_0x57e695;},'Frjvg':_0x28e7c6(-0x63,0x46,0x7,-0x57)};function _0x229eaa(_0x4a40a6,_0x5323b6,_0x160666,_0x148a15){return _0x1295cc(_0x4a40a6-0x15e,_0x5323b6-0x17d,_0x160666,_0x4a40a6-0x182);}const _0x3c59e8=_0x563068['target'][_0x28e7c6(-0x1,0x2,-0x71,-0x8c)][-0x50*0x71+-0x2644+-0x1*-0x4994];function _0x28e7c6(_0x428727,_0x1353ee,_0x153554,_0x3629ae){return _0x1295cc(_0x428727-0xed,_0x1353ee-0x136,_0x3629ae,_0x153554- -0x2c6);}if(!_0x3c59e8)return;try{const _0x14c31f=await _0x18f97d[_0x229eaa(0x461,0x3f2,0x4a7,0x44c)](processUploadedImage,_0x3c59e8,!![]);updateNovelaiImagePreview(_0x14c31f);}catch(_0x1a8389){console[_0x229eaa(0x3a2,0x419,0x412,0x365)](_0x28e7c6(-0xc6,-0x26,-0x5c,0xe)+_0x28e7c6(-0x34,-0x89,-0x80,-0xd9)+_0x28e7c6(-0x90,-0xa6,-0xac,-0xe5)+':',_0x1a8389),_0x18f97d[_0x229eaa(0x3d1,0x3de,0x418,0x3bc)](alert,_0x18f97d['TflbY'](_0x18f97d[_0x28e7c6(-0x89,-0x2c,-0xa,-0x83)],_0x1a8389[_0x229eaa(0x43c,0x41e,0x433,0x3fa)]));}}function _0x1295cc(_0x3d8b89,_0x32e407,_0x3c2669,_0x21ce70){return _0x2b83(_0x21ce70-0x16c,_0x3c2669);}function _0x2b83(_0x296202,_0x388b6e){_0x296202=_0x296202-(-0x1*-0x17a3+-0x15c*-0xe+-0x2a3a);const _0x59ba8c=_0xc9bf();let _0xe4d98=_0x59ba8c[_0x296202];if(_0x2b83['KpjLOA']===undefined){var _0x1d73a5=function(_0x53e4f2){const _0x2f1704='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x36af0e='',_0x447c66='',_0x335102=_0x36af0e+_0x1d73a5;for(let _0x179090=-0x1*0x1565+-0xb65*0x1+0x20ca,_0x25fe74,_0x44e7d1,_0x3190c2=-0x878+-0x641+-0x1*-0xeb9;_0x44e7d1=_0x53e4f2['charAt'](_0x3190c2++);~_0x44e7d1&&(_0x25fe74=_0x179090%(-0x19d*0xe+-0x1b4f*-0x1+-0x4b5*0x1)?_0x25fe74*(-0x3*0x34d+0x13b5+-0x2*0x4c7)+_0x44e7d1:_0x44e7d1,_0x179090++%(-0x5*-0x5db+-0x17*0x67+-0x1402))?_0x36af0e+=_0x335102['charCodeAt'](_0x3190c2+(0x1*-0xa99+-0x2b*0x11+-0x6bf*-0x2))-(-0x1af9*-0x1+0x550+-0x41*0x7f)!==0x20a+0x2682+-0x288c?String['fromCharCode'](-0x5*-0x65+0x7*0x16+0x2*-0xca&_0x25fe74>>(-(0x2b*0xcd+-0x1ed1+-0x39c)*_0x179090&-0x2235+0x17d5+0xa66)):_0x179090:0x22f2+0x1b79+-0x1*0x3e6b){_0x44e7d1=_0x2f1704['indexOf'](_0x44e7d1);}for(let _0x54d1a1=-0x2096*-0x1+0xc*0x7a+-0x1*0x264e,_0x23b128=_0x36af0e['length'];_0x54d1a1<_0x23b128;_0x54d1a1++){_0x447c66+='%'+('00'+_0x36af0e['charCodeAt'](_0x54d1a1)['toString'](-0x1f8f+0x1816+0x1*0x789))['slice'](-(-0xc8d+-0xd49+0x19d8));}return decodeURIComponent(_0x447c66);};_0x2b83['DBaUsZ']=_0x1d73a5,_0x2b83['Mswhux']={},_0x2b83['KpjLOA']=!![];}const _0x2371f3=_0x59ba8c[0x24a6+0x579+-0x29*0x107],_0x3c546e=_0x296202+_0x2371f3,_0x13bfbe=_0x2b83['Mswhux'][_0x3c546e];if(!_0x13bfbe){const _0x18b381=function(_0x252511){this['xzkgjq']=_0x252511,this['taKeGj']=[0x13*-0x146+-0x338+0x1b6b,0x2610+-0x32b*0x4+0x4*-0x659,0x1888+-0x31d*0x5+-0x2fd*0x3],this['ntZNlA']=function(){return'newState';},this['YslGwp']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['hFjQCa']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x18b381['prototype']['swwymA']=function(){const _0x584624=new RegExp(this['YslGwp']+this['hFjQCa']),_0x3c333e=_0x584624['test'](this['ntZNlA']['toString']())?--this['taKeGj'][0x686+-0x53+-0x632]:--this['taKeGj'][-0x6f5*0x1+-0x4d*0x1b+0xf14];return this['dPGWch'](_0x3c333e);},_0x18b381['prototype']['dPGWch']=function(_0x5a246e){if(!Boolean(~_0x5a246e))return _0x5a246e;return this['ykCYUL'](this['xzkgjq']);},_0x18b381['prototype']['ykCYUL']=function(_0x155895){for(let _0x42cf6f=-0x373*0x3+-0x1130+0x1b89,_0x337ac6=this['taKeGj']['length'];_0x42cf6f<_0x337ac6;_0x42cf6f++){this['taKeGj']['push'](Math['round'](Math['random']())),_0x337ac6=this['taKeGj']['length'];}return _0x155895(this['taKeGj'][0xb3+0x1*0x465+-0x518]);},new _0x18b381(_0x2b83)['swwymA'](),_0xe4d98=_0x2b83['DBaUsZ'](_0xe4d98),_0x2b83['Mswhux'][_0x3c546e]=_0xe4d98;}else _0xe4d98=_0x13bfbe;return _0xe4d98;}function _0x218acb(_0x48b5eb,_0x459ec5,_0x3dbd3f,_0x2ae5f3){return _0x2b83(_0x459ec5- -0x1ff,_0x3dbd3f);}function updateNovelaiCharRefImagePreview(_0x21b1c7){const _0x23fa36={};_0x23fa36['ZxWyl']=_0x50f506(-0x178,-0x1d2,-0x198,-0x1d8)+'+$',_0x23fa36['zSgFd']='previewIma'+_0x4f3da5(0xd6,0x145,0x8d,0x12d)+_0x50f506(-0x238,-0x221,-0x1e0,-0x1b2),_0x23fa36[_0x4f3da5(0x95,0x8a,0xc4,0x2f)]=_0x4f3da5(0x8f,0xf2,0xf,0x108)+_0x4f3da5(0x112,0xb6,0xe0,0x172)+_0x50f506(-0x1fd,-0x193,-0x11d,-0x200)+_0x4f3da5(0xe5,0xb5,0x157,0x9a)+_0x4f3da5(0xd3,0x101,0x6e,0x11a)+_0x50f506(-0x1c8,-0x201,-0x1a3,-0x27e)+_0x4f3da5(0xa0,0xcf,0x75,0xfd),_0x23fa36[_0x4f3da5(0x11a,0x19f,0xc3,0x19d)]=_0x50f506(-0x1f5,-0x24c,-0x2cc,-0x237)+_0x50f506(-0x253,-0x1f4,-0x226,-0x1c9)+_0x50f506(-0x163,-0x1df,-0x1c7,-0x1ff)+_0x4f3da5(0xc7,0x13a,0xc0,0x103),_0x23fa36[_0x4f3da5(0xd5,0xfb,0xb4,0x13c)]=_0x4f3da5(0x16a,0x192,0x12c,0x112),_0x23fa36[_0x4f3da5(0xb8,0x116,0xcb,0xc7)]=_0x4f3da5(0x12a,0x16e,0x159,0x18a),_0x23fa36['yTfwH']=_0x50f506(-0x21d,-0x223,-0x1f0,-0x21c),_0x23fa36[_0x50f506(-0x22a,-0x1af,-0x225,-0x12d)]=_0x4f3da5(0xf9,0xa4,0x123,0x132)+'x',_0x23fa36[_0x50f506(-0x2d6,-0x26c,-0x2bc,-0x2cd)]=function(_0x35861e,_0x1e33cd){return _0x35861e===_0x1e33cd;};function _0x50f506(_0x1aedd4,_0x13b6a5,_0x27145b,_0x11c960){return _0x1295cc(_0x1aedd4-0x1c9,_0x13b6a5-0xa,_0x1aedd4,_0x13b6a5- -0x477);}_0x23fa36['DOFxk']=_0x4f3da5(0x88,0x84,0xb3,0x9c);function _0x4f3da5(_0x50647b,_0x8ed5b4,_0x4f6c77,_0x4e4f36){return _0x1295cc(_0x50647b-0x6e,_0x8ed5b4-0x14c,_0x8ed5b4,_0x50647b- -0x167);}_0x23fa36[_0x50f506(-0x155,-0x196,-0x116,-0x12f)]='flex';const _0x1dd121=_0x23fa36,_0x4de85b=document[_0x50f506(-0x1c9,-0x243,-0x1e0,-0x23a)+'ById'](_0x1dd121['zSgFd']),_0x4202e1=document['querySelec'+_0x4f3da5(0x108,0x10d,0x150,0x159)](_0x1dd121[_0x4f3da5(0x95,0xaa,0xc4,0x33)]),_0x1244bc=document[_0x50f506(-0x2ab,-0x243,-0x259,-0x237)+_0x50f506(-0x2eb,-0x279,-0x229,-0x2ec)](_0x1dd121['qTjFA']);if(_0x21b1c7&&_0x21b1c7[_0x4f3da5(0xa7,0xf5,0x6b,0x119)](_0x1dd121[_0x50f506(-0x22d,-0x23b,-0x267,-0x2a0)])){_0x4de85b[_0x50f506(-0x1f9,-0x1db,-0x1fb,-0x258)]=_0x21b1c7,_0x4de85b[_0x4f3da5(0x122,0x1a6,0x10d,0x15b)]['display']=_0x1dd121['xzsRJ'],_0x4202e1['style'][_0x4f3da5(0x151,0x1ae,0xf8,0x140)]=_0x1dd121[_0x4f3da5(0x93,0x92,0x16,0xe4)],_0x1244bc[_0x4f3da5(0x122,0x125,0x1a0,0x17c)][_0x50f506(-0x21f,-0x1bf,-0x160,-0x1ae)]=_0x1dd121['XDFxe'];const _0x5a8bb8=_0x21b1c7[_0x50f506(-0x1bf,-0x1d0,-0x1df,-0x16b)](','),_0x20031e=_0x5a8bb8[-0x96+0x261c+-0x2586][_0x4f3da5(0x140,0x196,0x178,0x173)](':')[0xb5c+-0x8*-0x455+-0x2e03][_0x50f506(-0x161,-0x1d0,-0x1b9,-0x20d)](';')[-0xc83*0x1+0x24ff+-0x1*0x187c];nai3CharRefImageMimeType=_0x20031e,window[_0x50f506(-0x264,-0x274,-0x293,-0x241)+_0x50f506(-0x1b4,-0x19b,-0x169,-0x1fb)]=_0x5a8bb8[0x127b+0x1aff+-0x2d79];const _0x5bbfac={};_0x5bbfac['id']=NAI_CHAR_REF_CACHE_KEY,_0x5bbfac[_0x4f3da5(0xa9,0x108,0x68,0x10a)]=_0x21b1c7,dbs['storeReadW'+_0x4f3da5(0xeb,0x7a,0x102,0xd0)](_0x5bbfac);}else{if(_0x1dd121['lIaXW'](_0x1dd121[_0x50f506(-0x1e9,-0x219,-0x1cd,-0x24d)],_0x1dd121['DOFxk']))_0x4de85b[_0x4f3da5(0x135,0x1aa,0xbd,0x11d)]='',_0x4de85b[_0x50f506(-0x177,-0x1ee,-0x23e,-0x218)][_0x4f3da5(0x151,0x1ad,0x17d,0xe4)]=_0x50f506(-0x292,-0x223,-0x1ec,-0x214),_0x4202e1['style'][_0x50f506(-0x165,-0x1bf,-0x243,-0x18e)]=_0x1dd121[_0x50f506(-0x1a6,-0x196,-0x1c5,-0x127)],_0x1244bc['style'][_0x4f3da5(0x151,0x1a9,0x17d,0x123)]=_0x50f506(-0x1fb,-0x223,-0x1d5,-0x1b8),window[_0x50f506(-0x26c,-0x274,-0x27c,-0x2eb)+_0x50f506(-0x172,-0x19b,-0x13a,-0x13c)]=null;else return _0x4eaaf0[_0x4f3da5(0xe4,0xcf,0x127,0x117)]()[_0x4f3da5(0x14f,0x12a,0x1d2,0x1ca)](lvFlde[_0x50f506(-0x21d,-0x1b3,-0x20f,-0x1cc)])[_0x4f3da5(0xe4,0xff,0x79,0xb1)]()[_0x50f506(-0x17f,-0x1f0,-0x181,-0x1ae)+'r'](_0x1a4f51)[_0x50f506(-0x21f,-0x1c1,-0x231,-0x1a6)](lvFlde['ZxWyl']);}}function removeNovelaiCharRefImage(){function _0x46cb88(_0x41a795,_0x5ee163,_0x3ec0dd,_0x3289ce){return _0x1295cc(_0x41a795-0xd9,_0x5ee163-0x188,_0x3ec0dd,_0x3289ce- -0x80);}const _0x57f8da={'KtCXn':function(_0x5cfe17,_0x363e64){return _0x5cfe17(_0x363e64);}};_0x57f8da[_0x26b8e8(0x307,0x339,0x2e8,0x34f)](updateNovelaiCharRefImagePreview,null);function _0x26b8e8(_0x438014,_0x3246a5,_0x30f06e,_0x59679c){return _0x218acb(_0x438014-0x17a,_0x30f06e-0x3e2,_0x59679c,_0x59679c-0x19f);}dbs[_0x46cb88(0x1e0,0x23f,0x1c4,0x1d9)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x44da82){function _0x17f90b(_0x558c0e,_0x3ccfa4,_0x23d929,_0x714746){return _0x218acb(_0x558c0e-0x57,_0x714746- -0x7d,_0x558c0e,_0x714746-0x3a);}const _0x31ac4c={'iPott':function(_0x28d178,_0x10c067){return _0x28d178===_0x10c067;},'YIdOr':'Aulsf','VexPv':'IDlYl','yaFAA':function(_0x396332,_0x53c4ac){return _0x396332(_0x53c4ac);},'dNHJC':'Error\x20proc'+'essing\x20Nov'+_0x50b82a(0x221,0x1b4,0x1db,0x1f5)+_0x50b82a(0x2b1,0x244,0x204,0x24d),'REwGK':function(_0x3e135b,_0x36cb9f){return _0x3e135b+_0x36cb9f;},'aKkoz':_0x17f90b(-0xc5,-0x11f,-0xb7,-0x11b)};function _0x50b82a(_0x4f2843,_0xcb4358,_0x186967,_0x204900){return _0x1295cc(_0x4f2843-0x1ea,_0xcb4358-0x1d,_0x204900,_0xcb4358- -0x3e);}const _0x479808=_0x44da82[_0x50b82a(0x1a4,0x225,0x283,0x256)][_0x50b82a(0x281,0x217,0x243,0x288)][-0x11ba+0xb*-0x287+0x2d87];if(!_0x479808)return;try{if(_0x31ac4c['iPott'](_0x31ac4c['YIdOr'],_0x31ac4c[_0x17f90b(-0x14e,-0x125,-0xd1,-0x138)])){const _0x5931fd=_0x96b9eb[_0x17f90b(-0x101,-0x117,-0x1af,-0x13f)](_0x509c86,arguments);return _0x362bea=null,_0x5931fd;}else{const _0x5582ae=await _0x31ac4c[_0x50b82a(0x1ce,0x1da,0x176,0x1fe)](processUploadedImage,_0x479808);_0x31ac4c[_0x50b82a(0x1a1,0x1da,0x1c2,0x171)](updateNovelaiCharRefImagePreview,_0x5582ae);}}catch(_0x19ce22){console[_0x17f90b(-0x19d,-0x200,-0x14f,-0x1c8)](_0x31ac4c[_0x50b82a(0x1dd,0x1fd,0x183,0x262)],_0x19ce22),_0x31ac4c[_0x17f90b(-0x250,-0x1e6,-0x15d,-0x1d0)](alert,_0x31ac4c['REwGK'](_0x31ac4c['aKkoz'],_0x19ce22[_0x17f90b(-0x15b,-0xcc,-0x108,-0x12e)]));}}function _0xc9bf(){const _0x534cd6=['y29TzNL1AwnHBG','s21KChK','ztOG','y29TzNL1AvvYBa','D2fNuK0','Aw1Hz2uVCg5N','Ae9Kz3u','reXjsuS','ie5VDMvSquKGqW','sunfv1G','zxz0tLm','ueTkEwO','z1jAv1i','Aw5NignHy2HLza','mZy2m1PwEwLnCW','sNnyvvC','C3rYAw5N','vxLbt2C','nM16sNzlyW','lxjLzI1PBwfNzq','zwXbssbJAgfYia','t2rfD2m','CgHiC2i','qvbJshq','i25VDMvSywKTyW','wMznBe0','zuHtzNq','C3rYAw5NAwz5','EvrMD0G','z1HtDMG','zKjbzuS','mhW0Fdj8mxWZ','qNLjza','mJu2nZr3vxHhrgS','x25HAv9JAgfYxW','ExvPx3jLzL9PBq','yM9KEq','BMfPm0nOyxjszq','ssbbueNLNldLNydJGii','i2nVBwz5DwKTCW','Cujctve','BgfJzwHVBgrLCG','5lUo57Yt5A2y5yQG6l29q29TzNK','m3WWFdj8mxW1Fa','CgXHy2vOB2XKzq','BeLHwfC','t1bpBLO','AM9OrMq','C3rHCNrZv2L0Aa','zMPxDeK','zgf0yq','6k+M5OofoIa','mta2mZuYmtbsCuvlq3q','mJi4odH5q0fvsuu','tuLkq0u','B3f2z3C','uvf2B2i','u0jkuvq','Ewfgque','m3WXFdr8mNWW','zwXbssbPBwfNzq','zufWueC','AfLOBxG','qKTcyxe','B3bLBKrc','EhPZuKO','zxjYB3i','z25Tv0e','ienVBwz5vuKGAq','CuvwD0W','y2fJAgvFy29TzG','qxDsEvG','mhWXFdr8m3WYFa','ChjLDMLLD0LTyq','AwjLigLTywDLoG','wxjzue4','B2LQA3m','BM92zwXHAs1Yzq','AgfYifjLzIbPBq','vMrtqLi','yNrU','A1nAALe','zwXLy3qTy2HHCG','zMLUza','yxPLvgC','A3jIveW','z2v0rwXLBwvUDa','AKLQv0O','Aw1Hz2vjBNb1Da','yw5ZzMvYsw1HzW','C3rVCMvszwfKvW','ihjLlxvWBg9Hza','CIaUC3qTy2HHDa','ze5isKm','qwLwqwq','z2vFBMfPx2nOyq','zw1VDMuTAw1HzW','tg9HzgvKienVBq','Bg9N','AMPcreK','z3bSwfy','ihrVihvWzgf0zq','lwj0BG','BwfNzs1WCMv2Aq','zxnZAw5Nie5VDG','zwXLy3qTAw1HzW','zffkEMq','DMz4sfq','5zMO6l+u5zUE5PwW5O2UoIa','Dg9tDhjPBMC','DY1JB250ywLUzq','l3vWBg9Hzc9PBq','i25VDMvSywKTAq','vefOreK','DvrqueK','ie5VDMvSquKGvG','CML0zq','DK5nEem','BM9Uzq','zMLSzxm','CL9Yzwy','i25VDMvSywKTCW','zs1IDg4','C3rVCMvezwXLDa','yvreBuu','mtK0mZq3nM9iq3HIvq','vfLnt3G','CMvZDwX0','re9gEgS','BhPequO','Aw5SAw5LlwzSzq','mJCXmJmXwvnmtg1Y','zMXLEa','DgfYz2v0','Bwv0Ag9K','Dgv4Da','thDQtxi','ENLVtKi','qwf3shu','ywDL','rxjYB3iGChjVyW','z3rwBfO','ELHQA1e','tujos1i','s0nAvMK','Dg9Y','DKrMuMm','s3rdwg4','CxvLCNLtzwXLyW','y3jLyxrLt2jQzq','tMfTzq','uMHYugq','DtGTAw1Hz2uTCa','CKTXveu','C2vYDMvYrMLSzq','AgfYlxjLzI1PBq','Dhu4lwLTywDLlq','vKXQuKO','tM5xAKe','CMvHzefZrgf0yq','BMfTzq','ywDLoG','6k+35ywi6k6+572Uq29TzNLv','CvrQrKe','CMvMigLTywDLoG','Bw92zs1JAgfYlq','ntu1ndGWEgvpBhD5','qwXzAgq','yxbWzw5K','y29UC3rYDwn0BW','ENrACwO','C3r5Bgu','zhj5rvi','v3DVv2G','z0HyugG','y0fiDNy','zxiGlNn0lwnOyq','wK9yuMW','ue9tva','yMXVy2S','zw1VDMuTy2HHCG','ignHy2HLihrVia','yxfXDfi','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','rxjYB3iGBg9Hza','C3rVCMvszwfKtW','CMvMlwLTywDLlq','u3f2sLi','ENbNEMC','refWrhG','C3jJ','CNrKwMO','suzpAKe','t211vNO','wLH4A0G','y3rvuKW','wxnIsem','rgHIvNq','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','kcGOlISPkYKRkq','CMvM','C3bSAxq','B3PYqNC','yxbWBhK','y2XPy2S','igzYB20GB2XKia','ANnVBG','z2TlBKq','vvjm','i2LTywDLsw5WDq','vMv4uhy','5zUE5PwW5O2UoG','zNvIrhO','BgfPx2nOyxjFCG','Df9UywLFy2HHCG','BgjdweG','C2vHCMnO','qKDlvuC','zgLZCgXHEq','C2XtChG','BwvZC2fNzq','BMX5','rNjQDMC','BgfPx3zPyMvFDa','y2fJAguGzM9YBq','wgfwuuO','s1rfEwW','D2fYBG','nJKXndq4mxrzr2rqzG','Aw9twwy','wNHxEwW','BMfPm1zPyMvuCG','mhW0Fdf8mNWZ','vLfZuMe','wergEgu','yxqUifbSzwfZzq','y09LCeC','yMXVyG','Ag5bCxC','5zU+54Mh5Ase55cg5AsX6lsLoIa','vMjnugW','i2nVBwz5DwKTAq','z2uY','zgf0ytPPBwfNzq','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','y2HHBMDL','i2nVBwz5DwKTCG','i25VDMvSywKTCG','zKjXq1K','BfHMAvO','B2X4vNO','A2fVDhvWAwfU','EeHOs3q','yMXVyJO','zKLTywDL','tfHSy3e','zxCTy29UDgfPBG','sNDoB2y','igzYB20Gy2fJAa','Dgf5BKi','CM1HDc4','sNfiuuq','ywDLlxbYzxzPzq','mtaYnwTbCMroyW','Bw92zs1PBwfNzq'];_0xc9bf=function(){return _0x534cd6;};return _0xc9bf();}function updateComfyUIImagePreview(_0x1aa83c){const _0x597fe1={'uTPPI':_0xc9a376(0x2cd,0x2f9,0x2a3,0x2dd)+'2','YrYPN':function(_0xd4df60,_0x839f10){return _0xd4df60(_0x839f10);},'AawHu':_0x63304f(-0x23d,-0x207,-0x2bd,-0x2c1)+':\x20','ktPnH':_0xc9a376(0x2f3,0x33a,0x375,0x33c)+':','KCZVi':function(_0x31f37e){return _0x31f37e();},'MBNKR':'previewIma'+_0xc9a376(0x2f7,0x3bf,0x3d5,0x377),'wagRM':_0xc9a376(0x3be,0x398,0x3e8,0x376)+_0x63304f(-0x28d,-0x2be,-0x25f,-0x25b)+_0xc9a376(0x383,0x3c2,0x375,0x385)+_0xc9a376(0x2b4,0x2b0,0x342,0x335)+_0x63304f(-0x258,-0x1f9,-0x27f,-0x244)+_0xc9a376(0x2e1,0x23e,0x297,0x2b1)+'r','AwRyX':'comfyui-re'+_0x63304f(-0x2f5,-0x2c6,-0x356,-0x2b1)+'-btn','eHSft':_0xc9a376(0x3c0,0x3ce,0x3c7,0x382),'OmuVz':function(_0x58929b,_0x15500f){return _0x58929b!==_0x15500f;},'APcHt':'block','zyoNB':'none','fubDz':_0x63304f(-0x272,-0x2b8,-0x256,-0x25d)+'x','hnAqw':_0x63304f(-0x267,-0x2d7,-0x25f,-0x21e),'qEVwL':_0x63304f(-0x2c9,-0x299,-0x269,-0x340)+'4','DLIIK':_0x63304f(-0x270,-0x2f3,-0x292,-0x243)},_0x2ca751=document[_0xc9a376(0x312,0x2d6,0x2e6,0x2db)+_0xc9a376(0x279,0x325,0x2f1,0x2a5)](_0x597fe1[_0x63304f(-0x265,-0x22b,-0x211,-0x21c)]),_0x3b64a6=document[_0xc9a376(0x2a8,0x2d8,0x2a8,0x319)+_0xc9a376(0x360,0x2c2,0x34a,0x316)](_0x597fe1[_0xc9a376(0x2a9,0x2f0,0x2f2,0x289)]),_0x1494b8=document[_0xc9a376(0x33a,0x273,0x328,0x2db)+_0xc9a376(0x2d6,0x22a,0x2e8,0x2a5)](_0x597fe1[_0xc9a376(0x31c,0x2fc,0x319,0x2cc)]);function _0x63304f(_0x112bed,_0x123a8f,_0x52a5c3,_0x3da0e9){return _0x218acb(_0x112bed-0x10e,_0x112bed- -0x167,_0x52a5c3,_0x3da0e9-0xbd);}function _0xc9a376(_0x300c18,_0x2da8c7,_0x3070a2,_0x384d3a){return _0x1295cc(_0x300c18-0x38,_0x2da8c7-0x9,_0x3070a2,_0x384d3a-0xa7);}_0x2ca751[_0x63304f(-0x236,-0x280,-0x217,-0x2b6)]&&_0x2ca751[_0x63304f(-0x236,-0x21c,-0x277,-0x24e)][_0x63304f(-0x2c4,-0x288,-0x29b,-0x29f)](_0x597fe1[_0x63304f(-0x2da,-0x2da,-0x293,-0x357)])&&_0x597fe1[_0x63304f(-0x233,-0x2b2,-0x27d,-0x2a0)](_0x2ca751['src'],_0x1aa83c)&&(_0xc9a376(0x33f,0x32a,0x39b,0x341)!==_0x63304f(-0x2df,-0x348,-0x289,-0x262)?URL['revokeObje'+_0xc9a376(0x3a6,0x2e4,0x31e,0x348)](_0x2ca751[_0xc9a376(0x327,0x334,0x2cd,0x343)]):_0x4e52ce['getElement'+_0xc9a376(0x27a,0x325,0x31f,0x2a5)](_0x597fe1[_0x63304f(-0x282,-0x2a5,-0x250,-0x303)])[_0x63304f(-0x228,-0x243,-0x262,-0x201)]());if(_0x1aa83c)_0x2ca751[_0x63304f(-0x236,-0x2b9,-0x235,-0x1bb)]=_0x1aa83c,_0x2ca751[_0x63304f(-0x249,-0x260,-0x275,-0x2be)]['display']=_0x597fe1[_0x63304f(-0x2dd,-0x2ed,-0x29a,-0x2ac)],_0x3b64a6[_0xc9a376(0x312,0x31d,0x2c9,0x330)]['display']=_0x597fe1[_0xc9a376(0x2b9,0x338,0x2f6,0x30e)],_0x1494b8['style'][_0x63304f(-0x21a,-0x205,-0x1ed,-0x1d2)]=_0x597fe1[_0xc9a376(0x33f,0x2fc,0x32e,0x359)];else{if(_0x597fe1[_0x63304f(-0x206,-0x1b1,-0x25d,-0x279)]===_0x597fe1[_0x63304f(-0x206,-0x230,-0x255,-0x218)]){const _0x8f0bb=_0x597fe1[_0xc9a376(0x2d5,0x33e,0x2ea,0x2ca)][_0xc9a376(0x379,0x3a5,0x3d2,0x34e)]('|');let _0x47a5bd=-0x1817+0x1*-0xbdb+0x23f2*0x1;while(!![]){switch(_0x8f0bb[_0x47a5bd++]){case'0':_0x2ca751['style'][_0xc9a376(0x2fc,0x3cc,0x395,0x35f)]=_0x63304f(-0x27e,-0x23b,-0x2ba,-0x2dd);continue;case'1':_0x1494b8['style']['display']=_0x597fe1[_0x63304f(-0x26b,-0x25b,-0x2ad,-0x296)];continue;case'2':_0x3b64a6['style'][_0xc9a376(0x347,0x399,0x37c,0x35f)]=_0x597fe1[_0xc9a376(0x254,0x265,0x211,0x28c)];continue;case'3':_0x2ca751[_0xc9a376(0x39c,0x2ec,0x2d5,0x343)]='';continue;case'4':comfyuiImageObjectURL=null;continue;case'5':window['comfyuican'+_0xc9a376(0x341,0x32e,0x31b,0x380)]=null;continue;}break;}}else _0x597fe1[_0xc9a376(0x2b4,0x2c3,0x323,0x2d0)](_0x1cebc7,_0x597fe1[_0xc9a376(0x327,0x2ed,0x361,0x30f)]+_0x17b650[_0xc9a376(0x39d,0x36e,0x2dd,0x361)]),_0x1b6c8f[_0x63304f(-0x2b2,-0x336,-0x2b3,-0x2e7)](_0x597fe1['ktPnH'],_0x3aa793),_0x2b5902(_0xc9a376(0x3fa,0x39c,0x3d8,0x379)+_0xc9a376(0x276,0x2d1,0x320,0x2b8)+_0x85bd17[_0xc9a376(0x229,0x250,0x298,0x2a0)](_0x2f3937)),_0x597fe1[_0x63304f(-0x264,-0x208,-0x1f0,-0x23e)](_0x5d7ebf);}}function removeComfyUIImage(){const _0x153539={'LwjMr':function(_0x479b6c,_0x168c74){return _0x479b6c(_0x168c74);}};function _0x2f8190(_0x38ada6,_0x1b02cd,_0x582070,_0x186e18){return _0x1295cc(_0x38ada6-0x97,_0x1b02cd-0x1a7,_0x38ada6,_0x1b02cd- -0x6e);}function _0x43ce24(_0x37f7c3,_0x5208c0,_0x4e99e5,_0x38aa91){return _0x218acb(_0x37f7c3-0x1ad,_0x37f7c3-0x28,_0x4e99e5,_0x38aa91-0x1a1);}_0x153539[_0x43ce24(-0xdd,-0x135,-0x8a,-0x13d)](updateComfyUIImagePreview,null),dbs[_0x2f8190(0x263,0x1eb,0x206,0x19e)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x26911c){const _0x5302bd={'ZXxkH':_0x559789(0x38e,0x398,0x36d,0x332)+_0x559789(0x3e9,0x445,0x3f0,0x453)+'age-previe'+_0x3c3b10(0xc3,0x82,0x104,0x37)+_0x559789(0x3aa,0x436,0x3b1,0x420)+_0x3c3b10(0x102,0xac,0x7f,0x49)+'laceholder','gnmWA':_0x559789(0x3df,0x337,0x3a2,0x38b)+_0x559789(0x38e,0x40d,0x3fa,0x378)+_0x3c3b10(0x51,0xce,0x64,0x49)+_0x559789(0x338,0x33a,0x3a5,0x3b1),'VdSBR':_0x559789(0x42a,0x3ee,0x448,0x468),'YsbHC':_0x3c3b10(0xbc,0xc7,0x125,0x10f),'kSZjQ':'none','VQsRa':'inline-fle'+'x','dryER':_0x3c3b10(0x5,0x4f,0x8a,0x52),'azOUX':_0x3c3b10(0x33,0x98,0x38,0xbf),'hOdgu':function(_0x38e9cc,_0xef7e0b){return _0x38e9cc(_0xef7e0b);},'slSpx':'image','YcVeU':function(_0x5ac36e){return _0x5ac36e();},'eApPG':_0x559789(0x45a,0x3ef,0x407,0x3d0),'nLKfY':'上传成功,\x20服务器返'+_0x559789(0x461,0x3a5,0x428,0x476),'evciz':function(_0x4016a8,_0x2e7976){return _0x4016a8===_0x2e7976;},'JsXUW':_0x559789(0x3d5,0x438,0x3ec,0x468),'aTDmE':function(_0x123b87,_0x181768){return _0x123b87+_0x181768;},'WPflH':function(_0x395bd3,_0x27e975){return _0x395bd3(_0x27e975);},'jjBDI':'错误详情:','vDfRc':function(_0x2e505a){return _0x2e505a();},'TYMOx':function(_0x2f60ad,_0x12d05d){return _0x2f60ad+_0x12d05d;},'qdrHo':_0x559789(0x42d,0x3d4,0x40c,0x467)+':\x20','qBBMQ':_0x3c3b10(0x9a,0xcb,0xef,0x115)+':'};function _0x3c3b10(_0x39097c,_0x58bf33,_0x4b77e4,_0x4504a0){return _0x218acb(_0x39097c-0x30,_0x58bf33-0x1a1,_0x39097c,_0x4504a0-0x8f);}function _0x559789(_0x1a6339,_0x406f70,_0x4b8efb,_0x13e83b){return _0x218acb(_0x1a6339-0x1ac,_0x4b8efb-0x4e2,_0x406f70,_0x13e83b-0x8);}const _0x54d90e=extension_settings[extensionName],_0x214b3a=_0x26911c['target'][_0x3c3b10(0x73,0x8b,0xad,0x10f)][0x2126+-0x152*0x1d+0x1c*0x2f];if(!_0x214b3a)return;try{const _0x409a57=await _0x5302bd[_0x559789(0x2ef,0x3ba,0x35b,0x304)](processUploadedImageToBlob,_0x214b3a),_0x52aed3=URL[_0x559789(0x39d,0x42d,0x3ea,0x438)+_0x559789(0x49d,0x399,0x418,0x47f)](_0x409a57);comfyuiImageObjectURL=_0x52aed3,_0x5302bd[_0x3c3b10(-0x60,0x1a,-0x5d,0x5a)](updateComfyUIImagePreview,_0x52aed3);const _0x391379=new FormData();_0x391379[_0x3c3b10(0x9f,0xbc,0xf5,0xb8)](_0x5302bd[_0x3c3b10(0xf8,0xef,0xb2,0xe3)],_0x409a57,_0x214b3a[_0x559789(0x442,0x420,0x3f5,0x3c1)]);let _0x25c3fc=_0x54d90e[_0x559789(0x350,0x2df,0x358,0x382)]['trim']();if(!_0x25c3fc){_0x5302bd['hOdgu'](alert,_0x559789(0x390,0x3fd,0x3f7,0x448)+_0x3c3b10(-0x2f,0x3a,0x33,0xc)),_0x5302bd['YcVeU'](removeComfyUIImage);return;}const _0x21c18d={};_0x21c18d[_0x3c3b10(0xa6,0x9a,0x96,0x66)]=_0x5302bd[_0x559789(0x3a8,0x3a1,0x392,0x398)],_0x21c18d[_0x559789(0x319,0x383,0x379,0x363)]=_0x391379;const _0x3eb275=await fetch(_0x25c3fc+(_0x3c3b10(0x36,0x83,0xa2,0x25)+_0x559789(0x374,0x412,0x3e0,0x3da)),_0x21c18d);if(_0x3eb275['ok']){const _0x30e2b0=await _0x3eb275[_0x559789(0x48a,0x456,0x423,0x44d)]();window[_0x559789(0x391,0x35e,0x355,0x3a7)+_0x559789(0x478,0x434,0x450,0x47d)]=_0x30e2b0['name'],addLog(_0x559789(0x3d7,0x423,0x41b,0x49c)+_0x3c3b10(0x96,0x80,0xff,0xe0)+JSON[_0x559789(0x3ef,0x3cc,0x370,0x30a)](_0x30e2b0)),console[_0x559789(0x3ab,0x3da,0x3b7,0x39d)](_0x5302bd['nLKfY'],_0x30e2b0);const _0x26fe72=new FileReader();_0x26fe72['onloadend']=()=>{const _0x49fb13=_0x26fe72[_0x233621(-0x9b,-0xce,-0x6b,-0xb5)],_0x313bcc={};function _0x5f12ff(_0x535291,_0x3afe47,_0x212339,_0x1e7d8c){return _0x3c3b10(_0x212339,_0x535291- -0x175,_0x212339-0x168,_0x1e7d8c-0x177);}_0x313bcc['data']=_0x49fb13,_0x313bcc[_0x233621(-0xaf,-0x9b,-0xeb,-0x9a)+'Name']=_0x30e2b0[_0x233621(-0x6c,-0x4f,-0x26,-0x94)];const _0x37c91c=_0x313bcc,_0x8aa852={};function _0x233621(_0x385cef,_0x2c6637,_0x527676,_0x1253c6){return _0x559789(_0x385cef-0x7a,_0x385cef,_0x1253c6- -0x489,_0x1253c6-0xac);}_0x8aa852['id']=COMFYUI_REF_CACHE_KEY,_0x8aa852[_0x5f12ff(-0x12f,-0x10f,-0x124,-0x14e)]=_0x37c91c,dbs[_0x233621(-0xaa,-0xcb,-0xd6,-0xda)+_0x233621(-0x126,-0xab,-0xee,-0xc0)](_0x8aa852);},_0x26fe72[_0x559789(0x38e,0x3ee,0x3f4,0x3af)+_0x3c3b10(0x13c,0xe4,0x10f,0xea)](_0x409a57);}else{if(_0x5302bd['evciz']('RhrPd',_0x5302bd[_0x3c3b10(0x7a,0x23,0x2d,0x81)])){const _0x3e1527=await _0x3eb275[_0x559789(0x439,0x404,0x3dc,0x39d)]();_0x5302bd[_0x3c3b10(0x49,0x1a,0x6f,0x95)](alert,_0x5302bd[_0x3c3b10(0x9b,0x90,0x30,0xe0)]('上传失败:\x20',_0x3e1527)),_0x5302bd['WPflH'](addLog,_0x559789(0x4c6,0x3f4,0x449,0x4a7)+'详情:\x20'+_0x3e1527),console[_0x3c3b10(0x83,0x56,0xd1,0xae)](_0x5302bd[_0x3c3b10(0x91,0x77,0x6a,0xab)],_0x3e1527),_0x5302bd[_0x3c3b10(0x116,0xa6,0x85,0x5f)](removeComfyUIImage);}else{const _0x5eb69d=_0x388b6e[_0x3c3b10(0xe,0x6a,0x10,-0x10)+_0x3c3b10(0x3,0x34,0xa3,0x2b)](_0x559789(0x3c5,0x32e,0x39e,0x35e)+_0x3c3b10(0x7d,0x73,0x4,0x36)+_0x3c3b10(0x42,0x8c,0xb2,0xa)),_0x5016dc=_0x59ba8c['querySelec'+_0x559789(0x441,0x3a0,0x3e6,0x3ea)](_0x5302bd[_0x3c3b10(0x83,0xd6,0xda,0x61)]),_0x641230=_0xe4d98['getElement'+_0x3c3b10(0x48,0x34,-0xc,0x1f)](_0x5302bd[_0x3c3b10(0xbb,0x57,0x19,0xd0)]);if(_0x1d73a5&&_0x2371f3[_0x3c3b10(0x76,0x44,0x89,0x65)](_0x5302bd[_0x559789(0x33c,0x3d6,0x3a4,0x402)])){_0x5eb69d[_0x3c3b10(0xe3,0xd2,0x132,0xbc)]=_0x25fe74,_0x5eb69d[_0x559789(0x388,0x3ae,0x400,0x3a4)][_0x559789(0x3b1,0x3b6,0x42f,0x3fb)]=_0x5302bd[_0x559789(0x49c,0x3c8,0x419,0x49c)],_0x5016dc[_0x559789(0x43a,0x421,0x400,0x424)][_0x559789(0x45d,0x430,0x42f,0x45b)]=_0x5302bd['kSZjQ'],_0x641230['style'][_0x559789(0x3d8,0x455,0x42f,0x495)]=_0x5302bd[_0x3c3b10(0x167,0xfd,0x7c,0xe0)];const _0x594ed5=_0x44e7d1[_0x3c3b10(0x112,0xdd,0xd8,0x140)](','),_0x53d1d5=_0x594ed5[0x89*0x31+-0x147*0x7+-0x1148]['split'](':')[0x1*0x1328+0x20cf+-0x33f6][_0x3c3b10(0xa2,0xdd,0x7a,0x12a)](';')[0xfc9+-0x45*-0x73+-0x2ec8];_0x3190c2=_0x53d1d5,_0x54d1a1[_0x559789(0x3e3,0x351,0x37a,0x36d)+_0x559789(0x467,0x4af,0x453,0x452)]=_0x594ed5[-0xb56+-0x1af8+0x3*0xcc5];const _0x4809e0={};_0x4809e0['id']=_0x18b381,_0x4809e0[_0x559789(0x35b,0x325,0x387,0x3bd)]=_0x252511,_0x23b128[_0x559789(0x38b,0x3d3,0x3af,0x334)+_0x559789(0x44e,0x3f0,0x3c9,0x440)](_0x4809e0);}else{const _0x5b15b=_0x5302bd[_0x559789(0x3fd,0x3ec,0x401,0x449)][_0x559789(0x41a,0x49e,0x41e,0x3de)]('|');let _0xd901c0=0x12cd*-0x1+0x127*0x1f+-0x10ec;while(!![]){switch(_0x5b15b[_0xd901c0++]){case'0':_0x584624['nai3CharRe'+_0x559789(0x4d6,0x40c,0x453,0x4ac)]=null;continue;case'1':_0x5eb69d['style'][_0x559789(0x3f0,0x3ec,0x42f,0x474)]=_0x559789(0x3a0,0x34c,0x3cb,0x409);continue;case'2':_0x641230[_0x559789(0x3e2,0x46a,0x400,0x3ba)][_0x559789(0x3e2,0x3d5,0x42f,0x446)]=_0x5302bd[_0x559789(0x370,0x3c1,0x3a6,0x405)];continue;case'3':_0x5eb69d[_0x3c3b10(0x13f,0xd2,0xce,0xb0)]='';continue;case'4':_0x5016dc[_0x559789(0x421,0x44a,0x400,0x410)][_0x3c3b10(0xf1,0xee,0x7f,0x134)]=_0x5302bd['azOUX'];continue;}break;}}}}}catch(_0x1aa0b4){alert(_0x5302bd[_0x3c3b10(0x79,0x92,0x69,0x3e)](_0x5302bd['qdrHo'],_0x1aa0b4[_0x3c3b10(0xd5,0xf0,0xf8,0xf5)])),console['error'](_0x5302bd[_0x3c3b10(0x6e,0x3c,0xb7,0x91)],_0x1aa0b4),addLog('图片上传失败,\x20错误'+_0x559789(0x32d,0x40b,0x388,0x33f)+JSON[_0x3c3b10(0x97,0x2f,-0x26,0x68)](_0x1aa0b4)),_0x5302bd[_0x3c3b10(0x118,0xa6,0x8a,0xe9)](removeComfyUIImage);}}async function loadCachedImages(){const _0x17acd1={'psPWM':_0x4cb209(0x71,0x7f,0xdd,0xe9),'fjWtI':_0x9084bd(0x164,0x14b,0x148,0x15e),'sjapl':_0x4cb209(-0x1,0x79,-0x52,0x7d),'krbTL':function(_0x5385f2,_0x13a7dd){return _0x5385f2(_0x13a7dd);},'XaVQJ':_0x4cb209(0x41,-0x9,-0x9,0x91)+_0x4cb209(-0x6a,-0x74,-0x4d,-0x9a)+_0x9084bd(0xf3,0x13a,0x177,0x140)+_0x4cb209(-0x2d,-0x73,0x3b,-0x98),'SBJQT':_0x4cb209(-0x6d,-0xf0,-0xc5,-0xd4),'gplXV':_0x9084bd(0x73,0xf5,0xd6,0x11d),'aqqtR':function(_0x4e3bf2,_0x7c9146){return _0x4e3bf2(_0x7c9146);},'LXlcq':_0x4cb209(0x41,0x92,0xad,0x2a)+_0x9084bd(0x107,0xd4,0x6d,0xcc)+_0x4cb209(-0x6f,-0x6b,-0xc3,-0x4a)+_0x4cb209(-0x29,-0xa9,-0x27,-0x6c)+_0x9084bd(0xf9,0x168,0x152,0x15c),'lXfiZ':function(_0x352ce6,_0x1a901c){return _0x352ce6===_0x1a901c;},'gRZWR':_0x4cb209(-0x67,-0x98,-0x65,-0x4d),'azeTg':_0x9084bd(0x17f,0x128,0x145,0x15d)+'fyUI\x20image'+_0x4cb209(0x56,0x6e,0xb5,-0x2e)+_0x9084bd(0x1cb,0x1a7,0x12a,0x174)+_0x4cb209(0x74,0x2d,0x21,0x66)+_0x4cb209(-0x1c,0x1,-0x41,0x4e)+_0x4cb209(-0x12,-0x81,0xc,-0x70)+_0x4cb209(0x3e,0xb7,0x4d,0x4d)+'the\x20new\x20fo'+_0x4cb209(0x8d,0x3a,0xc2,0xbf),'NnWjA':_0x9084bd(0x172,0x17f,0x194,0x176)+_0x4cb209(-0x6a,-0x7e,-0x81,-0xd6)+_0x9084bd(0x168,0x10b,0x144,0xbf)+'mage:'};function _0x9084bd(_0x21dd83,_0x4a0be5,_0x14d0e0,_0x24192d){return _0x1295cc(_0x21dd83-0x1da,_0x4a0be5-0x11a,_0x24192d,_0x4a0be5- -0x117);}function _0x4cb209(_0x1b8242,_0x166617,_0x415f16,_0x3d3a29){return _0x218acb(_0x1b8242-0x1cf,_0x1b8242-0x116,_0x3d3a29,_0x3d3a29-0x18f);}await dbs[_0x9084bd(0x18b,0x107,0xfc,0x129)]();try{const _0x4a0159=await dbs[_0x4cb209(0x42,0xb9,0x90,0x28)+_0x9084bd(0x15e,0x1a4,0x1bf,0x133)](NAI_VIBE_CACHE_KEY);_0x4a0159&&_0x4a0159[_0x9084bd(0xf6,0xf9,0x165,0xdd)]&&_0x17acd1[_0x4cb209(-0x22,-0x4b,0x22,0x59)](updateNovelaiImagePreview,_0x4a0159[_0x4cb209(-0x45,-0x4,-0x8f,0x20)]);}catch(_0x1f56f3){console['error'](_0x17acd1[_0x9084bd(0x1c5,0x1a8,0x158,0x1c7)],_0x1f56f3);}try{if(_0x17acd1[_0x4cb209(-0x3e,0x14,0x43,-0xae)]!==_0x17acd1[_0x4cb209(-0x13,0x52,-0x69,-0x30)]){const _0x11bec3=await dbs[_0x4cb209(0x42,0x15,0xc4,0x1b)+_0x9084bd(0x13b,0x1a4,0x169,0x163)](NAI_CHAR_REF_CACHE_KEY);_0x11bec3&&_0x11bec3[_0x9084bd(0x10e,0xf9,0xca,0xc9)]&&_0x17acd1['aqqtR'](updateNovelaiCharRefImagePreview,_0x11bec3[_0x4cb209(-0x45,-0x84,-0x4d,0x36)]);}else{const _0xc73327=_0x17acd1['psPWM'][_0x4cb209(0x52,0xaa,0x4b,0x29)]('|');let _0x23c9b7=-0x1d39*-0x1+-0x2537*-0x1+-0x84e*0x8;while(!![]){switch(_0xc73327[_0x23c9b7++]){case'0':_0x4da15c['src']='';continue;case'1':_0x1724e6[_0x4cb209(0x34,0x6,0x3a,0xa6)]['display']=_0x17acd1[_0x9084bd(0x95,0xf8,0xea,0x13f)];continue;case'2':_0x31021c[_0x9084bd(0x132,0x172,0x142,0xef)][_0x4cb209(0x63,0x8f,0x94,-0xa)]=_0x17acd1['sjapl'];continue;case'3':_0xc36a4f[_0x9084bd(0x22e,0x1ae,0x189,0x1ed)+_0x9084bd(0x199,0x120,0x11f,0x14d)+'e']=null;continue;case'4':_0x1cb048[_0x4cb209(0x34,-0x4d,0x9f,0x78)][_0x4cb209(0x63,0xcd,0xc,0x3a)]=_0x9084bd(0x1c2,0x13d,0x145,0x131);continue;}break;}}}catch(_0x32baa3){console['error'](_0x17acd1[_0x9084bd(0x19b,0x1c6,0x1b7,0x161)],_0x32baa3);}try{const _0x439918=await dbs[_0x4cb209(0x42,0x90,0xc,-0x3f)+'nly'](COMFYUI_REF_CACHE_KEY);if(_0x439918&&_0x439918[_0x9084bd(0xaa,0xf9,0xf5,0x94)]&&_0x439918[_0x9084bd(0x152,0xf9,0x157,0x100)][_0x9084bd(0x175,0xf9,0xce,0x17b)]&&_0x439918[_0x4cb209(-0x45,-0x88,-0x50,0x33)][_0x4cb209(0x23,-0x4f,-0x2e,0x87)+_0x9084bd(0x14b,0x15d,0x163,0x1c3)]){const _0x2cf99a=_0x439918[_0x4cb209(-0x45,-0x37,-0x3c,-0x27)],_0x495f0f=await fetch(_0x2cf99a[_0x4cb209(-0x45,-0x64,0x19,-0x3b)]),_0x12bf1f=await _0x495f0f['blob'](),_0x2e9604=URL[_0x9084bd(0xd9,0x15c,0x13e,0x13e)+'ctURL'](_0x12bf1f);_0x17acd1[_0x4cb209(-0x22,-0x83,0x2a,-0x17)](updateComfyUIImagePreview,_0x2e9604),comfyuiImageObjectURL=_0x2e9604,window['comfyuican'+'kaotupian']=_0x2cf99a['serverFile'+_0x4cb209(0x1f,0x4f,0x34,0x43)],_0x17acd1[_0x9084bd(0x11a,0x17d,0x1bf,0x150)](addLog,_0x4cb209(-0x4d,-0x3a,-0x88,-0x61)+'UI图片:\x20'+_0x2cf99a['serverFile'+_0x9084bd(0x193,0x15d,0xf1,0x168)]),console[_0x4cb209(-0x15,0x27,0x22,0x3e)]('Loaded\x20Com'+'fyUI\x20image'+_0x4cb209(0x8b,0xdb,0xaa,0x5b)+_0x4cb209(-0x75,-0x1f,-0x6f,-0x4c)+_0x2cf99a[_0x9084bd(0x1b1,0x161,0x10e,0x18d)+_0x4cb209(0x1f,0x24,0x81,-0x51)]);}else{if(_0x439918&&_0x17acd1[_0x9084bd(0x209,0x1c0,0x148,0x18e)](typeof _0x439918['data'],_0x17acd1[_0x9084bd(0x151,0xd3,0x133,0x4e)])){const _0x39fc3e=await _0x17acd1[_0x9084bd(0x118,0x17d,0xfc,0x18e)](fetch,_0x439918[_0x4cb209(-0x45,-0xca,-0xb4,-0xc)]),_0x4ede56=await _0x39fc3e[_0x9084bd(0x185,0x1b4,0x1f5,0x159)](),_0x519512=URL['createObje'+_0x4cb209(0x4c,0xa9,0x4d,0x51)](_0x4ede56);_0x17acd1[_0x4cb209(-0x22,-0x84,-0x7d,-0x3e)](updateComfyUIImagePreview,_0x519512),comfyuiImageObjectURL=_0x519512,console[_0x9084bd(0x17f,0x1aa,0x133,0x19b)](_0x17acd1[_0x4cb209(-0x23,-0x94,-0x26,-0x43)]);}}}catch(_0x45d8c5){console[_0x9084bd(0x99,0x109,0x163,0x13b)](_0x17acd1[_0x9084bd(0xe7,0x165,0x167,0x12e)],_0x45d8c5);}}export function initImageUpload(_0x1792b6){const _0x477a1c={'ioSYf':_0x5af7e1(-0x10b,-0x92,-0x14f,-0xfc)+'_novelai','vfxHT':_0x5a2141(0x3d1,0x3e4,0x3e4,0x3f1),'lzDAJ':function(_0x46ac8d){return _0x46ac8d();},'VTJAL':_0x5af7e1(-0xb0,-0xa3,-0x45,-0xb3),'Kmdpy':_0x5a2141(0x410,0x44b,0x424,0x487),'ZfMlM':'inline-fle'+'x','vyLAx':function(_0x2404e6,_0x1c1604){return _0x2404e6!==_0x1c1604;},'WwoWh':_0x5a2141(0x4d0,0x402,0x45c,0x43e),'phHsb':_0x5a2141(0x4a7,0x3ff,0x458,0x440),'johFd':'imageInput'+_0x5af7e1(-0x141,-0xfc,-0x112,-0x18a)+_0x5af7e1(-0x9b,-0xdb,-0xb4,-0xed),'gXSvh':function(_0x2fe971){return _0x2fe971();},'xfvrH':'imageInput'+'2','lbCXH':function(_0x3b123c){return _0x3b123c();},'IFOjA':_0x5a2141(0x432,0x4ab,0x47a,0x4a5),'BKBaq':'#imageInpu'+'t_novelai','PKJyj':_0x5af7e1(-0x6e,-0x44,0xa,-0x19),'dQJzd':_0x5af7e1(-0x6c,-0xca,-0xd8,-0x35)+_0x5af7e1(-0x103,-0xb4,-0x149,-0x188)+_0x5a2141(0x3a8,0x3ff,0x428,0x420),'oijks':_0x5a2141(0x457,0x3c8,0x427,0x3e7)+_0x5af7e1(-0x111,-0xf5,-0x10e,-0x11d)+_0x5a2141(0x3ca,0x42c,0x3c1,0x3ab)+_0x5a2141(0x41f,0x408,0x414,0x46e),'DhbVt':_0x5a2141(0x4c9,0x459,0x4a5,0x47a)+_0x5a2141(0x4b3,0x42b,0x462,0x4c4)+_0x5a2141(0x357,0x3dd,0x3c1,0x3cd)+_0x5a2141(0x3ec,0x3e8,0x414,0x3c9),'DApDx':_0x5af7e1(-0x13c,-0xc9,-0xed,-0x102)+_0x5af7e1(-0xfa,-0x16c,-0x7e,-0x8a)+_0x5a2141(0x469,0x48a,0x428,0x46f),'rKqTE':'#imageInpu'+'t2','ICEWX':_0x5a2141(0x494,0x4c8,0x4a4,0x421)+_0x5af7e1(-0x103,-0xd3,-0x14c,-0x158)+_0x5a2141(0x45d,0x3d0,0x428,0x48d)};_0x477a1c[_0x5af7e1(-0x146,-0x1a5,-0xfe,-0x11b)](loadCachedImages),_0x1792b6[_0x5a2141(0x39d,0x480,0x401,0x3b7)]('#novelai-s'+_0x5af7e1(-0xfa,-0x135,-0xd6,-0xda)+_0x5a2141(0x407,0x46a,0x428,0x479))['on'](_0x477a1c[_0x5af7e1(-0xa3,-0x100,-0x9a,-0x4f)],()=>{function _0x33d6ea(_0x281e59,_0x3ecb28,_0x18a66d,_0x8f6b2d){return _0x5af7e1(_0x18a66d- -0x154,_0x3ecb28-0x11b,_0x281e59,_0x8f6b2d-0x117);}function _0x10ae32(_0x52ea41,_0x28cb0a,_0x39fd47,_0x5711e1){return _0x5af7e1(_0x52ea41-0x1da,_0x28cb0a-0xaf,_0x39fd47,_0x5711e1-0xdd);}document[_0x33d6ea(-0x2ce,-0x254,-0x261,-0x264)+_0x33d6ea(-0x319,-0x216,-0x297,-0x2a3)](_0x477a1c[_0x33d6ea(-0x1ef,-0x24c,-0x1d2,-0x1be)])[_0x10ae32(0x143,0xd1,0x158,0x18b)]();}),_0x1792b6[_0x5af7e1(-0x110,-0x126,-0x150,-0xa2)](_0x477a1c[_0x5a2141(0x438,0x45e,0x3ed,0x3dc)])['on'](_0x477a1c[_0x5af7e1(-0x158,-0x109,-0x1a2,-0x1dd)],handleNovelaiImageUpload),_0x1792b6[_0x5a2141(0x3bf,0x3da,0x401,0x3c3)](_0x477a1c[_0x5a2141(0x402,0x3ac,0x418,0x402)])['on'](_0x477a1c[_0x5a2141(0x4e7,0x477,0x46e,0x4b9)],()=>{function _0x5a7818(_0x5a38ee,_0xdcec30,_0x44b170,_0x29b51f){return _0x5af7e1(_0xdcec30-0xc6,_0xdcec30-0xe,_0x44b170,_0x29b51f-0x13d);}function _0x5735a4(_0x88dca7,_0xb12fc5,_0x682e7d,_0x3a6c8c){return _0x5af7e1(_0xb12fc5- -0x9e,_0xb12fc5-0xcc,_0x3a6c8c,_0x3a6c8c-0x197);}_0x5a7818(-0x14,-0x67,-0x93,-0x7a)===_0x477a1c[_0x5735a4(-0x145,-0x196,-0x1c7,-0x15c)]?_0x477a1c[_0x5735a4(-0x1d0,-0x180,-0x1e8,-0x178)](removeNovelaiImage):_0x498234[_0x5a7818(0x1a,-0x47,-0x60,-0x7d)+'ById'](_0x477a1c[_0x5a7818(0x79,0x48,0x93,-0x38)])[_0x5a7818(0xa4,0x2f,0x5b,-0x42)]();}),_0x1792b6[_0x5af7e1(-0x110,-0x171,-0xaa,-0xee)](_0x477a1c[_0x5af7e1(-0x117,-0x14e,-0x12e,-0x130)])['on'](_0x477a1c[_0x5a2141(0x45d,0x4cc,0x46e,0x411)],()=>{const _0x559de4={};function _0x4e4900(_0x217da0,_0x3bb5ef,_0x3acd6a,_0x3426af){return _0x5a2141(_0x217da0-0x135,_0x3bb5ef,_0x3426af- -0x93,_0x3426af-0x71);}_0x559de4[_0x52b4a2(0x4a4,0x4e5,0x4a8,0x527)]=_0x477a1c['VTJAL'],_0x559de4['vNMxC']=_0x477a1c[_0x52b4a2(0x3a9,0x3be,0x41f,0x350)];function _0x52b4a2(_0x38d03d,_0x1ae7fb,_0x4d1ff5,_0x1e11e4){return _0x5a2141(_0x38d03d-0x91,_0x1e11e4,_0x38d03d- -0x6,_0x1e11e4-0x194);}_0x559de4[_0x52b4a2(0x459,0x4dc,0x46a,0x431)]=_0x477a1c[_0x4e4900(0x38b,0x316,0x364,0x334)];const _0x392d79=_0x559de4;_0x477a1c['vyLAx'](_0x477a1c[_0x4e4900(0x377,0x372,0x3cf,0x3c8)],_0x477a1c[_0x52b4a2(0x3be,0x388,0x36b,0x391)])?document[_0x52b4a2(0x3fe,0x3cb,0x464,0x388)+_0x4e4900(0x321,0x307,0x2c8,0x33b)](_0x477a1c[_0x52b4a2(0x3d7,0x3dd,0x402,0x44f)])[_0x4e4900(0x376,0x431,0x37b,0x3e7)]():(_0x1cac7a[_0x52b4a2(0x466,0x45e,0x4e9,0x4cf)]=_0x143d9e,_0x517775[_0x4e4900(0x347,0x431,0x384,0x3c6)]['display']=_0x392d79['xHhKt'],_0x28fa76[_0x4e4900(0x420,0x382,0x388,0x3c6)][_0x52b4a2(0x482,0x48c,0x450,0x4fc)]=_0x392d79[_0x52b4a2(0x41d,0x3d8,0x3e2,0x416)],_0x55b774[_0x4e4900(0x3d6,0x352,0x3dd,0x3c6)][_0x4e4900(0x3bf,0x39c,0x375,0x3f5)]=_0x392d79[_0x4e4900(0x3ee,0x377,0x3c3,0x3cc)]);});function _0x5a2141(_0x4d8498,_0x2dbd1b,_0x12f688,_0x474758){return _0x1295cc(_0x4d8498-0x94,_0x2dbd1b-0x87,_0x2dbd1b,_0x12f688-0x1d0);}_0x1792b6['find'](_0x5af7e1(-0x92,-0xbc,-0xbf,-0xb2)+_0x5af7e1(-0x8d,-0x9f,-0xc5,-0x37)+'_ref')['on'](_0x477a1c[_0x5a2141(0x409,0x339,0x3b9,0x3e4)],handleNovelaiCharRefImageUpload);function _0x5af7e1(_0x32e56a,_0x56d34b,_0x2989d4,_0x4f8083){return _0x218acb(_0x32e56a-0x1c3,_0x32e56a-0x2a,_0x2989d4,_0x4f8083-0x48);}_0x1792b6['find'](_0x477a1c[_0x5af7e1(-0x9e,-0xc1,-0xca,-0xd7)])['on'](_0x477a1c['IFOjA'],()=>{_0x477a1c['gXSvh'](removeNovelaiCharRefImage);}),_0x1792b6['find'](_0x477a1c[_0x5a2141(0x3e6,0x4e4,0x46b,0x4cf)])['on'](_0x477a1c[_0x5af7e1(-0xa3,-0xc2,-0xbd,-0x80)],()=>{function _0x37617f(_0x5a4d15,_0x9323e8,_0x4b3601,_0x3f9d55){return _0x5af7e1(_0x5a4d15-0x4bb,_0x9323e8-0x1bb,_0x3f9d55,_0x3f9d55-0x63);}function _0x514111(_0x367db5,_0x1882b4,_0x4960a1,_0x134226){return _0x5af7e1(_0x1882b4- -0x1d8,_0x1882b4-0x89,_0x4960a1,_0x134226-0x143);}document[_0x514111(-0x270,-0x2e5,-0x363,-0x341)+_0x37617f(0x378,0x3ee,0x3e8,0x3fc)](_0x477a1c['xfvrH'])[_0x514111(-0x290,-0x26f,-0x224,-0x252)]();}),_0x1792b6[_0x5a2141(0x3cb,0x45e,0x401,0x3b9)](_0x477a1c[_0x5a2141(0x4c4,0x442,0x447,0x45d)])['on'](_0x477a1c[_0x5a2141(0x41f,0x379,0x3b9,0x3b5)],handleImageUpload2),_0x1792b6[_0x5af7e1(-0x110,-0xe6,-0xc4,-0x130)](_0x477a1c[_0x5af7e1(-0x15a,-0x183,-0x18e,-0x121)])['on'](_0x477a1c[_0x5af7e1(-0xa3,-0xbc,-0x78,-0x3d)],()=>{function _0x4b6352(_0x3e13ce,_0x1945e4,_0x2c3f4a,_0xff38e3){return _0x5af7e1(_0x2c3f4a-0x56f,_0x1945e4-0x163,_0x1945e4,_0xff38e3-0x15f);}_0x477a1c[_0x4b6352(0x52d,0x469,0x4e3,0x4d2)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};