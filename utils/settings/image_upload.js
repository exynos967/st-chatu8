(function(_0x5656d5,_0x10f327){function _0xa40902(_0x4c3e38,_0x46446c,_0xadc61,_0xe3ce6f){return _0x5166(_0x4c3e38-0x69,_0xadc61);}const _0x5b7454=_0x5656d5();function _0x46a9d9(_0x572c27,_0x3fd5a4,_0x15a1af,_0x3ebc56){return _0x5166(_0x3fd5a4- -0x1b0,_0x15a1af);}while(!![]){try{const _0x236634=parseInt(_0x46a9d9(0xf8,0xc3,0x13d,0xb2))/(0x37*-0x53+-0x14fa+0x26d0)*(parseInt(_0x46a9d9(0x93,0xca,0x11c,0x50))/(-0x25e2+0x1a*-0xfe+-0x4*-0xfec))+-parseInt(_0x46a9d9(0x49,0x64,0xcd,0xdd))/(0x137d+-0x98*0x2b+0x60e)+parseInt(_0xa40902(0x2ce,0x2f6,0x269,0x282))/(-0x224d*0x1+0x4b7*-0x4+0x352d*0x1)*(parseInt(_0x46a9d9(0x7c,0x6d,0xc1,0x3))/(0x135d+-0x24d8+-0x23*-0x80))+-parseInt(_0x46a9d9(0xd3,0x115,0xd7,0x173))/(0x2f*-0x1+0x7*-0x343+0x170a)+-parseInt(_0x46a9d9(0xa0,0xd1,0x129,0xb5))/(-0x164*-0x4+0xd8+-0x661)*(-parseInt(_0x46a9d9(0x150,0xfd,0xc0,0x16b))/(-0x17*-0x185+-0xba*-0xf+-0x2dd1))+parseInt(_0x46a9d9(0x10a,0x12f,0x18e,0x182))/(-0x20c5+0x14bd+0x1*0xc11)+-parseInt(_0x46a9d9(0xcb,0xfa,0x172,0x77))/(0x74f*-0x1+-0x1a44+-0x219d*-0x1)*(-parseInt(_0xa40902(0x332,0x35d,0x2bd,0x328))/(-0x13c3+0x4a*0x65+-0x964));if(_0x236634===_0x10f327)break;else _0x5b7454['push'](_0x5b7454['shift']());}catch(_0x357209){_0x5b7454['push'](_0x5b7454['shift']());}}}(_0x50fe,0x4a522+-0x17*-0x29fb+0x1014*-0x5c));const _0x48861b=(function(){let _0x4c2352=!![];return function(_0x16e158,_0x16282a){const _0x429137=_0x4c2352?function(){function _0x169b66(_0x27441a,_0x14770e,_0x4545ee,_0x2c337b){return _0x5166(_0x27441a- -0x159,_0x4545ee);}if(_0x16282a){const _0x28d3a4=_0x16282a[_0x169b66(0x14c,0x1a5,0x15c,0x1cd)](_0x16e158,arguments);return _0x16282a=null,_0x28d3a4;}}:function(){};return _0x4c2352=![],_0x429137;};}()),_0x39e4b4=_0x48861b(this,function(){function _0x5bc38d(_0x1212c4,_0x20a371,_0x2d8b12,_0x5b92b5){return _0x5166(_0x2d8b12- -0x49,_0x20a371);}const _0x259a98={};function _0x153f9b(_0x1b1f30,_0x58b488,_0x5eb65a,_0x42e5b1){return _0x5166(_0x42e5b1- -0x16,_0x5eb65a);}_0x259a98[_0x153f9b(0x2cd,0x2c1,0x263,0x24b)]=_0x5bc38d(0x264,0x2bc,0x2ad,0x2fb)+'+$';const _0x48f02c=_0x259a98;return _0x39e4b4[_0x5bc38d(0x271,0x215,0x26e,0x260)]()['search'](_0x48f02c[_0x5bc38d(0x1df,0x1c8,0x218,0x1ea)])[_0x153f9b(0x220,0x295,0x311,0x2a1)]()[_0x153f9b(0x282,0x229,0x283,0x24d)+'r'](_0x39e4b4)[_0x5bc38d(0x1f4,0x25e,0x1e6,0x229)](_0x48f02c[_0x153f9b(0x1d5,0x293,0x223,0x24b)]);});_0x39e4b4();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';function _0x198c01(_0x556c3b,_0x4557c7,_0x2aa2c6,_0x518c89){return _0x5166(_0x2aa2c6- -0x3c,_0x556c3b);}const NAI_VIBE_CACHE_KEY='cache_nove'+_0x42cc5f(0x162,0x9f,0x108,0xfb)+'ransfer_im'+_0x42cc5f(0x161,0x12e,0x11f,0x10a),NAI_CHAR_REF_CACHE_KEY='cache_nove'+_0x42cc5f(0x161,0x16e,0x168,0x13a)+_0x198c01(0x2fd,0x30a,0x2bb,0x2f4),COMFYUI_REF_CACHE_KEY=_0x42cc5f(0x18a,0x149,0x1ab,0x149)+_0x198c01(0x26c,0x2b5,0x240,0x2a3)+'age';let nai3VibeTransferImageMimeType=_0x198c01(0x2a8,0x1c2,0x223,0x2a7),nai3CharRefImageMimeType='image/png',comfyuiImageObjectURL=null;function _0x42cc5f(_0x203a1,_0x2d801d,_0x17837e,_0x5db77d){return _0x5166(_0x5db77d- -0x189,_0x203a1);}function updateNovelaiImagePreview(_0x10502c){const _0x908923={'KGMXR':'Error\x20proc'+_0x346e9c(0x2ab,0x2db,0x35f,0x33a)+_0x1a673e(0x118,0x16e,0x142,0x1ba)+':','QHRmF':function(_0x25b782,_0x47fe28){return _0x25b782(_0x47fe28);},'ggstF':function(_0x208fdf,_0x18be6f){return _0x208fdf+_0x18be6f;},'crSsu':'图片处理失败:\x20','RLNlj':_0x1a673e(0x1c1,0x1d4,0x195,0x215)+_0x346e9c(0x394,0x37a,0x369,0x317),'uqdZL':_0x346e9c(0x2a6,0x32a,0x2fd,0x36b)+'mage-previ'+_0x346e9c(0x397,0x32c,0x381,0x2b8)+_0x1a673e(0x26a,0x24e,0x1f2,0x2d2)+'tu8-image-'+_0x346e9c(0x3a5,0x373,0x362,0x31a)+'r','szChi':_0x346e9c(0x2c9,0x33d,0x2f9,0x2ed)+_0x346e9c(0x324,0x2fd,0x30d,0x360)+_0x346e9c(0x303,0x362,0x32b,0x3dd),'UxNfR':_0x346e9c(0x357,0x31a,0x38e,0x35b),'aoRlv':_0x1a673e(0x157,0x196,0x174,0x115),'iLPnL':_0x1a673e(0x204,0x1a2,0x1aa,0x124),'MdcRL':_0x346e9c(0x28a,0x293,0x2b8,0x273)+'x','cjrhk':function(_0x1d7bb9,_0x3d1994){return _0x1d7bb9!==_0x3d1994;},'DbKiK':_0x346e9c(0x37d,0x30b,0x2c6,0x380),'yWdio':_0x1a673e(0x1e7,0x1e2,0x225,0x231),'PQujA':_0x1a673e(0x268,0x251,0x1db,0x1d7)},_0x1a4017=document[_0x346e9c(0x299,0x2f6,0x336,0x353)+'ById'](_0x908923['RLNlj']);function _0x1a673e(_0x5b9234,_0xf28e1b,_0x1c39da,_0x375054){return _0x42cc5f(_0x1c39da,_0xf28e1b-0x12,_0x1c39da-0x1e0,_0xf28e1b-0xf6);}function _0x346e9c(_0x5a6b01,_0x562d67,_0x7646e5,_0x448059){return _0x42cc5f(_0x7646e5,_0x562d67-0xdd,_0x7646e5-0xfe,_0x562d67-0x214);}const _0x457e28=document[_0x1a673e(0x1cf,0x1f8,0x252,0x24c)+_0x346e9c(0x346,0x2d1,0x2eb,0x2aa)](_0x908923[_0x346e9c(0x376,0x30e,0x2b0,0x2e5)]),_0x2b6802=document['getElement'+_0x346e9c(0x372,0x319,0x2ff,0x2f1)](_0x908923[_0x346e9c(0x336,0x2e5,0x31a,0x337)]);if(_0x10502c&&_0x10502c['startsWith'](_0x908923['UxNfR'])){_0x1a4017[_0x1a673e(0x1dc,0x235,0x2a5,0x25a)]=_0x10502c,_0x1a4017[_0x346e9c(0x2b7,0x297,0x318,0x21e)][_0x346e9c(0x30d,0x2ad,0x32a,0x278)]=_0x908923['aoRlv'],_0x457e28[_0x346e9c(0x23a,0x297,0x2b1,0x274)][_0x1a673e(0x190,0x18f,0x1c3,0x177)]=_0x908923[_0x1a673e(0x263,0x218,0x1fe,0x22d)],_0x2b6802[_0x1a673e(0x12d,0x179,0x129,0x113)]['display']=_0x908923[_0x346e9c(0x2bd,0x333,0x307,0x39d)];const _0x39f9d4=_0x10502c[_0x1a673e(0x295,0x253,0x291,0x26c)](','),_0x101d3e=_0x39f9d4[0x9ab+0x2662+0x1*-0x300d][_0x1a673e(0x2b5,0x253,0x1de,0x28d)](':')[0x1466+0xeec+-0x2351*0x1][_0x346e9c(0x3f6,0x371,0x3cb,0x2f0)](';')[0xd92+0x110d+-0x3*0xa35];nai3VibeTransferImageMimeType=_0x101d3e,window[_0x1a673e(0x1a2,0x1d7,0x1ed,0x23b)+_0x1a673e(0x17a,0x16a,0x18a,0x1d1)+'e']=_0x39f9d4[-0x1cb7+-0x79b+-0x2453*-0x1];const _0x38cdc2={};_0x38cdc2['id']=NAI_VIBE_CACHE_KEY,_0x38cdc2[_0x1a673e(0x218,0x26b,0x246,0x27d)]=_0x10502c,dbs['storeReadW'+_0x1a673e(0x1c6,0x23d,0x22a,0x2bc)](_0x38cdc2);}else{if(_0x908923[_0x1a673e(0x1f8,0x1a8,0x137,0x16c)](_0x908923[_0x1a673e(0x13f,0x1ba,0x22c,0x1c6)],_0x908923[_0x346e9c(0x309,0x2d8,0x341,0x302)]))_0x562a4d[_0x346e9c(0x284,0x2b3,0x2b1,0x2ac)](_0x908923['KGMXR'],_0x2b50e2),_0x908923[_0x1a673e(0x162,0x199,0x199,0x113)](_0x5b3741,_0x908923[_0x346e9c(0x2ec,0x2be,0x2c4,0x339)](_0x908923[_0x1a673e(0x213,0x239,0x20a,0x1b8)],_0x35c940['message']));else{const _0x23b247=_0x908923[_0x1a673e(0x1dc,0x198,0x159,0x145)][_0x1a673e(0x2a3,0x253,0x271,0x240)]('|');let _0xf71dfa=0x1d*0x92+-0x97*0x13+-0x555;while(!![]){switch(_0x23b247[_0xf71dfa++]){case'0':_0x2b6802[_0x1a673e(0x1c6,0x179,0x1b1,0x14a)][_0x346e9c(0x2a3,0x2ad,0x2e0,0x26b)]='none';continue;case'1':_0x457e28[_0x1a673e(0x186,0x179,0x1b3,0x12f)]['display']=_0x908923['PQujA'];continue;case'2':_0x1a4017['style'][_0x1a673e(0x1f0,0x18f,0x161,0x15c)]=_0x908923[_0x346e9c(0x2f8,0x336,0x303,0x2e2)];continue;case'3':window[_0x346e9c(0x2b4,0x2f5,0x33a,0x35a)+_0x346e9c(0x2b0,0x288,0x266,0x30d)+'e']=null;continue;case'4':_0x1a4017[_0x346e9c(0x377,0x353,0x388,0x35d)]='';continue;}break;}}}}function removeNovelaiImage(){function _0x4fea95(_0x3a59e6,_0x3ebc15,_0x48f6e0,_0x43c5d7){return _0x198c01(_0x48f6e0,_0x3ebc15-0x13f,_0x3a59e6-0x94,_0x43c5d7-0x1e5);}const _0x440dc3={'Lahwu':function(_0x5b540f,_0x12cced){return _0x5b540f(_0x12cced);}};_0x440dc3[_0x4fea95(0x2ed,0x301,0x346,0x305)](updateNovelaiImagePreview,null);function _0xb9d285(_0x4a1742,_0x20a189,_0x3dd4c5,_0x4efea0){return _0x42cc5f(_0x3dd4c5,_0x20a189-0x1b1,_0x3dd4c5-0x2f,_0x4efea0- -0x1bb);}dbs[_0xb9d285(-0xf3,-0xfa,-0x1a7,-0x135)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x1c205c){const _0x2a7628={'vrqAJ':function(_0x23f92c,_0x14a470){return _0x23f92c(_0x14a470);},'Psesr':function(_0x41ae7d,_0x24d489){return _0x41ae7d+_0x24d489;},'MCISY':_0x1189a9(0x391,0x380,0x3a0,0x370)+':','liXLf':function(_0x3784cc){return _0x3784cc();},'NdLvx':_0x57356b(0x53b,0x5aa,0x5b2,0x5c4)+'ing\x20cached'+_0x57356b(0x616,0x59e,0x608,0x610)+_0x57356b(0x510,0x58b,0x574,0x587),'RqLIO':function(_0x250f07,_0x75fbae){return _0x250f07===_0x75fbae;},'PLTIC':_0x57356b(0x582,0x5e1,0x587,0x594),'RhVgl':_0x1189a9(0x38f,0x3b9,0x3dd,0x40d),'PyPUP':function(_0x106cce,_0x5025d1,_0x41e115){return _0x106cce(_0x5025d1,_0x41e115);},'VNveP':function(_0x258ab8,_0x185143){return _0x258ab8===_0x185143;},'deOSS':function(_0x24df2b,_0x2e62c8){return _0x24df2b+_0x2e62c8;},'gMfoZ':_0x1189a9(0x3ed,0x3de,0x3fd,0x419)};function _0x57356b(_0x2b3c9c,_0x2bf2f9,_0x14943b,_0x557e67){return _0x198c01(_0x2bf2f9,_0x2bf2f9-0x1b0,_0x14943b-0x3ae,_0x557e67-0xc5);}const _0x16ba5b=_0x1c205c[_0x57356b(0x681,0x65a,0x65c,0x6a7)][_0x1189a9(0x37b,0x43b,0x3bc,0x34e)][-0x219e+-0x2026+-0x4*-0x1071];if(!_0x16ba5b)return;function _0x1189a9(_0x2b3e15,_0x8a14d6,_0x3d72db,_0x192d9e){return _0x198c01(_0x8a14d6,_0x8a14d6-0xb3,_0x3d72db-0x173,_0x192d9e-0x79);}try{if(_0x2a7628['RqLIO'](_0x2a7628[_0x1189a9(0x3e5,0x33b,0x39d,0x387)],_0x2a7628[_0x1189a9(0x3ac,0x3a8,0x3f5,0x376)]))_0x2a7628['vrqAJ'](_0x506068,_0x2a7628[_0x1189a9(0x2bc,0x2e1,0x341,0x2e8)](_0x57356b(0x566,0x61c,0x5db,0x558)+':\x20',_0x3baeb4[_0x1189a9(0x3f8,0x3e1,0x3d9,0x3de)])),_0x30d679[_0x1189a9(0x2e3,0x388,0x35f,0x39d)](_0x2a7628[_0x1189a9(0x414,0x385,0x3d1,0x411)],_0x526a7b),_0x2a7628[_0x57356b(0x631,0x651,0x5e8,0x5c3)](_0x363029,_0x57356b(0x6ca,0x62f,0x650,0x6c4)+'详情:\x20'+_0x215e4e['stringify'](_0x42dcf0)),_0x2a7628[_0x1189a9(0x357,0x399,0x386,0x3ea)](_0x43be6f);else{const _0x1708c7=await _0x2a7628[_0x57356b(0x5a7,0x61f,0x62a,0x67b)](processUploadedImage,_0x16ba5b,!![]);updateNovelaiImagePreview(_0x1708c7);}}catch(_0x493701){_0x2a7628[_0x57356b(0x670,0x6a6,0x665,0x6ba)](_0x57356b(0x5f3,0x657,0x5f0,0x595),_0x57356b(0x5b8,0x570,0x5f0,0x57a))?(console['error'](_0x57356b(0x63d,0x62e,0x620,0x5fc)+'essing\x20Nov'+_0x1189a9(0x337,0x380,0x338,0x398)+':',_0x493701),_0x2a7628[_0x57356b(0x59e,0x66e,0x5e8,0x5ed)](alert,_0x2a7628[_0x57356b(0x646,0x63f,0x634,0x6a7)](_0x2a7628['gMfoZ'],_0x493701[_0x1189a9(0x37a,0x36a,0x3d9,0x3c3)]))):_0x3abf78[_0x1189a9(0x377,0x381,0x35f,0x340)](_0x2a7628[_0x1189a9(0x3ff,0x3c9,0x37a,0x39f)],_0x4baa1c);}}function updateNovelaiCharRefImagePreview(_0x4636ad){const _0x5d1a0c={};_0x5d1a0c[_0x1ac6c8(0x2ac,0x327,0x388,0x314)]=_0x55a3bd(0x429,0x408,0x47a,0x46d)+_0x55a3bd(0x417,0x421,0x46f,0x446)+_0x55a3bd(0x499,0x500,0x4b0,0x489)+'w-containe'+_0x55a3bd(0x4c3,0x4d4,0x5a7,0x530)+_0x1ac6c8(0x47a,0x44d,0x37b,0x3fb)+'laceholder';function _0x55a3bd(_0x5c1ce1,_0x3424c1,_0x412618,_0x5b398a){return _0x198c01(_0x3424c1,_0x3424c1-0x7d,_0x5b398a-0x277,_0x5b398a-0x19);}function _0x1ac6c8(_0xbafc01,_0x605cff,_0x4c641d,_0x20657f){return _0x198c01(_0xbafc01,_0x605cff-0xf8,_0x20657f-0x14b,_0x20657f-0x2c);}_0x5d1a0c[_0x1ac6c8(0x328,0x39f,0x3af,0x347)]=_0x55a3bd(0x3f7,0x473,0x493,0x464),_0x5d1a0c[_0x1ac6c8(0x34d,0x330,0x389,0x332)]=_0x55a3bd(0x41f,0x433,0x453,0x470),_0x5d1a0c[_0x55a3bd(0x543,0x4ab,0x4fd,0x50f)]=_0x1ac6c8(0x30d,0x2da,0x333,0x317)+'x',_0x5d1a0c[_0x1ac6c8(0x357,0x37f,0x3c2,0x3bb)]=function(_0x4217b4,_0x5dcd50){return _0x4217b4===_0x5dcd50;},_0x5d1a0c['vVqLZ']=_0x55a3bd(0x46f,0x567,0x4d9,0x4ec),_0x5d1a0c[_0x1ac6c8(0x374,0x405,0x38b,0x3f2)]=_0x55a3bd(0x517,0x4fc,0x524,0x51f);const _0xa9860f=_0x5d1a0c,_0xef2fcb=document['getElement'+'ById'](_0x55a3bd(0x4bd,0x46b,0x4bf,0x4a2)+_0x55a3bd(0x4b2,0x3ef,0x3e0,0x465)+_0x55a3bd(0x591,0x507,0x4e4,0x50e)),_0x255bee=document[_0x55a3bd(0x549,0x45e,0x4eb,0x4c6)+_0x1ac6c8(0x2f1,0x31c,0x2e1,0x355)](_0xa9860f[_0x55a3bd(0x458,0x483,0x434,0x440)]),_0x579e88=document[_0x1ac6c8(0x31f,0x3b6,0x3ad,0x37a)+'ById'](_0x1ac6c8(0x367,0x39c,0x403,0x3c1)+_0x55a3bd(0x40a,0x3e9,0x478,0x469)+_0x55a3bd(0x525,0x499,0x569,0x517)+_0x55a3bd(0x457,0x4f3,0x498,0x4c8));if(_0x4636ad&&_0x4636ad[_0x1ac6c8(0x2d9,0x2a8,0x2ee,0x303)](_0x1ac6c8(0x327,0x33a,0x336,0x39e))){_0xef2fcb[_0x1ac6c8(0x3f3,0x36a,0x35c,0x3d7)]=_0x4636ad,_0xef2fcb[_0x1ac6c8(0x392,0x39d,0x2df,0x31b)]['display']=_0xa9860f['bUDAx'],_0x255bee[_0x55a3bd(0x45f,0x40f,0x47c,0x447)][_0x1ac6c8(0x38d,0x2e1,0x373,0x331)]=_0xa9860f[_0x55a3bd(0x447,0x43f,0x407,0x45e)],_0x579e88[_0x1ac6c8(0x377,0x2f2,0x396,0x31b)]['display']=_0xa9860f[_0x1ac6c8(0x420,0x36b,0x3f5,0x3e3)];const _0x343a3c=_0x4636ad[_0x55a3bd(0x4a6,0x4a3,0x555,0x521)](','),_0x3cbb35=_0x343a3c[0x2405+0x90c+-0x2d11][_0x1ac6c8(0x46a,0x404,0x3d5,0x3f5)](':')[0x22a4+-0x1c50+-0x653]['split'](';')[-0xea6+-0x686+0x14*0x10f];nai3CharRefImageMimeType=_0x3cbb35,window[_0x1ac6c8(0x447,0x47f,0x429,0x407)+_0x55a3bd(0x429,0x422,0x4bf,0x43b)]=_0x343a3c[-0x6d8+0x246e+-0x1d95];const _0x1c5eb7={};_0x1c5eb7['id']=NAI_CHAR_REF_CACHE_KEY,_0x1c5eb7[_0x1ac6c8(0x448,0x389,0x3cd,0x40d)]=_0x4636ad,dbs[_0x55a3bd(0x458,0x478,0x41f,0x43e)+_0x55a3bd(0x505,0x516,0x4e4,0x50b)](_0x1c5eb7);}else _0xa9860f['pFVpt'](_0xa9860f[_0x55a3bd(0x418,0x41b,0x46a,0x499)],_0x55a3bd(0x50a,0x505,0x55c,0x4ec))?(_0xef2fcb[_0x55a3bd(0x52f,0x4b8,0x502,0x503)]='',_0xef2fcb[_0x55a3bd(0x3fd,0x419,0x436,0x447)][_0x55a3bd(0x4d6,0x3f2,0x3f5,0x45d)]=_0x1ac6c8(0x31f,0x2cf,0x338,0x344),_0x255bee[_0x1ac6c8(0x393,0x355,0x2a8,0x31b)][_0x1ac6c8(0x332,0x365,0x30f,0x331)]=_0xa9860f[_0x1ac6c8(0x46e,0x3d7,0x40e,0x3f2)],_0x579e88[_0x1ac6c8(0x2b2,0x318,0x38b,0x31b)]['display']=_0x55a3bd(0x4d4,0x43c,0x44e,0x470),window[_0x55a3bd(0x537,0x4e4,0x511,0x533)+'fImage']=null):_0x496254(_0x257516['data']);}function _0x50fe(){const _0xe9fdf6=['ie5VDMvSquKGvG','zwXLy3qTAw1HzW','6k+M5OofoIa','yvjiwxK','tunju1K','u09UufC','Aw1Hz2vjBNb1Da','DwHbAMq','tM1Jrei','i25VDMvSywKTAq','uKjxuKS','zxCTy29UDgfPBG','BwvZC2fNzq','AM1ftNy','CxrkBuS','yxbWBhK','s0LnzNK','igzYB20Gy2fJAa','twrJuKW','t09SCg4','mtbJsvLPB2e','AuXqBKW','CezwChq','mJG0odi0weX1z0LP','rxjYB3iGChjVyW','C2vYDMvYrMLSzq','rKvMr2G','D1zQsgi','BM92zwXHAs1Yzq','D3zOv0S','i2LTywDLsw5WDq','y3joDvi','CNrIC2e','Dg9tDhjPBMC','uhLqvva','CMvHzefZrgf0yq','tNznzwe','Bxj6uLG','CMv2B2TLt2jQzq','ue9tva','uMHwz2W','i2nVBwz5DwKTCG','u3LTvKC','sw1nrgK','zgvpu1m','BgfPx2nOyxjFCG','s1vSthy','otK1ntG2EKfQtujM','5zU+54Mh5Ase55cg5AsX6lsLoIa','uhfqCu4','C3jJ','mty5nJCZoujzyK9IrG','AfHZrKC','Bfn2vMe','y3jtC3u','C3rYAw5N','BMfTzq','v2PJqKm','CML0zq','BwfNzs1WCMv2Aq','y2fJAgvFy29TzG','CL9Yzwy','BvvMCeG','A2LIEhC','Dhu4lwLTywDLlq','lwj0BG','tejouKW','rMLkA2W','CLLZvNq','Df9UB3zLBgfP','CMvMlwLTywDLlq','vgjjwMi','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','otq2nZKXzxnZCfHA','A0PrAvO','zxiGlNn0lwnOyq','yMXVyJO','z0LhsK4','zMXLEa','sNHywfa','C3bSAxq','yxbWzw5K','CgXHy2vOB2XKzq','BwPitfi','DgfYz2v0','zMLUza','DtGTAw1Hz2uTCa','CM1HDc4','DLfLEhK','z2vFBM92zwXHAq','B3bLBKrc','DhjPBq','igzYB20GB2XKia','vK52zva','ztOG','CIaUC3qTy2HHDa','kcGOlISPkYKRkq','zwzFAw1Hz2u','BMfPm0nOyxjszq','i25VDMvSywKTCG','zw1VDMuTAw1HzW','s2L1rNm','sej3AMG','te1fywy','zgf0yq','C3rHCNrZv2L0Aa','vvblsKm','y2XPy2S','6k+35ywi6k6+572Uq29TzNLv','5lIk5lYG5AsX6lsLoIa','lxjLzI1PBwfNzq','ihjLlxvWBg9Hza','vKj3r3i','x3jLzG','yw5ZzMvYsw1HzW','txnpBKi','BeDmreO','zKLTywDL','zwXbssbPBwfNzq','AwjLigLTywDLoG','C3rVCMvszwfKvW','zwXbssbJAgfYia','AhvYAwG','BwXLC1q','Chv6twm','Aw5SAw5LlwzSzq','ie5VDMvSquKGqW','uhnLC3i','AgfYlxjLzI1PBq','C3r5Bgu','vvnIAhG','BgPMvu4','C3rVCMvezwXLDa','mxWYFdr8m3WWFa','ienVBwz5vuKGAq','q3rgrwy','y29TzNL1AwnHBG','otqXndGXu3fhtNDL','BejmDfC','AxvYD2q','AgfYifjLzIbPBq','yMrqsMG','B25SB2fKzw5K','whPsy1q','C3rYAw5NAwz5','Dgv4Da','mJy1wwzryu9W','zLnRzu0','u2DRvMC','tMfTzq','ssbbueNLNldLNydJGii','zgLZCgXHEq','qNPWquy','A2fVDhvWAwfU','ENLlsKS','vuNLM77NIyC6ia','y3jLyxrLt2jQzq','zxjYB3i','yMXVy2S','z2vFBMfPx2nOyq','EvDKAw8','uuHsBuy','t3fpzuS','Bw92zs1JAgfYlq','C2vHCMnO','sLHPvfq','Awvisuq','i25VDMvSywKTyW','z2DZDey','DgHLig5LDYbMBW','BM9Uzq','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','Bhz3sMK','yLveqxG','mhWZFdr8mNW1Fa','C3rVCMvszwfKtW','y2PYAgS','BwfNztO','sfbJB0e','sfb5uhe','zNLvssbPBwfNzq','rxjYB3iGBg9Hza','uuzNBvC','wNn1r2y','tMrmDNG','zNbWzfO','i2nVBwz5DwKTCW','Dg9Y','CMvZDwX0','CMvMigLTywDLoG','y3rvuKW','y29TzNL1AvvYBa','BMzxr0e','ANnVBG','rgjlAuS','ywDLlxbYzxzPzq','BgLytgy','zxnZAw5Nie5VDG','ywDLoG','Dwftwxq','y2fJAguGzM9YBq','CLbvBgi','rML6BvG','i25VDMvSywKTCW','Ewr2C3C','Aw5NignHy2HLza','ALbUvLe','C3PdAgK','EvvOs2i','CK51AvO','u29eqxK','DLzXtfO','Aw1Hz2uVCg5N','x25HAv9JAgfYxW','wePgvMm','5zMO6l+u5zUE5PwW5O2UoIa','y29UC3rYDwn0BW','uK1zAeu','mZy3nNrUtNn2tG','ueXusum','ChjLDMLLD0LTyq','BMX5','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','BMfPm1zPyMvuCG','z2v0rwXLBwvUDa','ALfXz2S','tg9HzgvKienVBq','Bg9N','DhfOq2G','6zsz6k+V6k+M5OofoG','z3fqEM4','Bw92zs1PBwfNzq','mw1oy2v4Bq','sLnhu2u','nhWYFdf8mhWZ','DNjXquO','qKHVqKO','Df9UywLFy2HHCG','twDyq2C','mtKWnJe4C1z1u2vA','y2HHBMDL','ExvPx3jLzL9PBq','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','rxvyEe4','yMXVyG','y2rACMO','ndLzBufTt1O','uuHztxK','DxfKwKW','BgfPx3zPyMvFDa','zMLSzxm','zs1IDg4','nhW1Fdn8mxWYFa','teniuLi','i2nVBwz5DwKTAq','EK9QAum','CxvLCNLtzwXLyW','ihrVihvWzgf0zq','yNrU','qNLjza','zgf0ytPPBwfNzq','nhWXFdb8mNWZ','CePqq2q','vvjm','ywDL','y29TzNL1As1Yzq','tgfOD3u'];_0x50fe=function(){return _0xe9fdf6;};return _0x50fe();}function removeNovelaiCharRefImage(){function _0x9fc444(_0x37613e,_0x2de077,_0x3dfac7,_0xc3ec51){return _0x198c01(_0xc3ec51,_0x2de077-0x4a,_0x3dfac7-0xa,_0xc3ec51-0x193);}const _0x248fa3={'lSvVa':function(_0x308bee,_0x1e1780){return _0x308bee(_0x1e1780);}};_0x248fa3[_0x9fc444(0x2f2,0x251,0x299,0x280)](updateNovelaiCharRefImagePreview,null);function _0x135ce2(_0x5834f0,_0x4e16a6,_0x45b3d9,_0x4c1398){return _0x198c01(_0x5834f0,_0x4e16a6-0x71,_0x4e16a6- -0xd2,_0x4c1398-0x136);}dbs[_0x9fc444(0x1c8,0x18f,0x1dd,0x1e5)+'e'](NAI_CHAR_REF_CACHE_KEY);}function _0x5166(_0x22a53f,_0x1a025a){_0x22a53f=_0x22a53f-(0x1571+0x50*0x40+0x397*-0xb);const _0x70267f=_0x50fe();let _0x476d9c=_0x70267f[_0x22a53f];if(_0x5166['yZwUoX']===undefined){var _0x246130=function(_0x24101b){const _0x4eec91='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xc7137d='',_0x52c411='',_0x44e80f=_0xc7137d+_0x246130;for(let _0x53a7d7=-0xa9*-0x10+0x2100+-0x2b90,_0x2fb78c,_0x243a2b,_0x5c77cb=0x2559+0x17ba+-0x109*0x3b;_0x243a2b=_0x24101b['charAt'](_0x5c77cb++);~_0x243a2b&&(_0x2fb78c=_0x53a7d7%(0x11c2+-0x238b+0x11cd)?_0x2fb78c*(-0x1150+0x3*0xbc3+0x1*-0x11b9)+_0x243a2b:_0x243a2b,_0x53a7d7++%(-0x40*-0x8+0x1b4*0x2+-0x114*0x5))?_0xc7137d+=_0x44e80f['charCodeAt'](_0x5c77cb+(0x78e+-0x13d5*0x1+-0x3*-0x41b))-(0x1b+0xd56*-0x2+0x1a9b)!==0x4*0x29e+-0x394+-0x6e4?String['fromCharCode'](0x1620+0xf9e+0x199*-0x17&_0x2fb78c>>(-(-0x2427+-0x80d+0x2c36)*_0x53a7d7&-0x1203+-0xf2e+-0x305*-0xb)):_0x53a7d7:-0x251*0x4+-0x1d*-0x49+0xff){_0x243a2b=_0x4eec91['indexOf'](_0x243a2b);}for(let _0x115792=0x187d+0x1*0xf86+-0x2803,_0x4f4455=_0xc7137d['length'];_0x115792<_0x4f4455;_0x115792++){_0x52c411+='%'+('00'+_0xc7137d['charCodeAt'](_0x115792)['toString'](-0xe65+-0x2514+0x3389))['slice'](-(0x1bd*-0x11+0xb4a+-0x1245*-0x1));}return decodeURIComponent(_0x52c411);};_0x5166['FEdsbx']=_0x246130,_0x5166['vhoEIY']={},_0x5166['yZwUoX']=!![];}const _0x2a2163=_0x70267f[0x35a+0x60*0x6+-0x59a],_0x1893cf=_0x22a53f+_0x2a2163,_0x4e1e3f=_0x5166['vhoEIY'][_0x1893cf];if(!_0x4e1e3f){const _0x39f8c9=function(_0x22aa62){this['TAKiPp']=_0x22aa62,this['jHAOnR']=[-0x3b*-0x6a+-0x1*0x21d5+0x4*0x25a,0x25d1+0x1159*-0x2+-0x31f,0x8e6+-0xb3e*-0x2+-0x1f62],this['ctDbOT']=function(){return'newState';},this['qmvdVc']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['gmbssO']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x39f8c9['prototype']['pcTcmi']=function(){const _0x5d8ae8=new RegExp(this['qmvdVc']+this['gmbssO']),_0x13735b=_0x5d8ae8['test'](this['ctDbOT']['toString']())?--this['jHAOnR'][0x1985+0x1*0x1ed3+-0x3857]:--this['jHAOnR'][-0x35f*-0x1+-0xa17+0xac*0xa];return this['XUKdqe'](_0x13735b);},_0x39f8c9['prototype']['XUKdqe']=function(_0x30be6d){if(!Boolean(~_0x30be6d))return _0x30be6d;return this['JVjfNL'](this['TAKiPp']);},_0x39f8c9['prototype']['JVjfNL']=function(_0x112b60){for(let _0x4086a7=0xe62+0x3*0xa82+-0x2de8,_0x1acceb=this['jHAOnR']['length'];_0x4086a7<_0x1acceb;_0x4086a7++){this['jHAOnR']['push'](Math['round'](Math['random']())),_0x1acceb=this['jHAOnR']['length'];}return _0x112b60(this['jHAOnR'][-0x3*-0xbe6+-0x4*-0x966+-0x494a]);},new _0x39f8c9(_0x5166)['pcTcmi'](),_0x476d9c=_0x5166['FEdsbx'](_0x476d9c),_0x5166['vhoEIY'][_0x1893cf]=_0x476d9c;}else _0x476d9c=_0x4e1e3f;return _0x476d9c;}async function handleNovelaiCharRefImageUpload(_0x26a5a7){function _0x43182b(_0x3626e2,_0xaf580e,_0x1632c1,_0x3791c4){return _0x42cc5f(_0x3791c4,_0xaf580e-0x15,_0x1632c1-0xc0,_0x3626e2-0x490);}const _0x384ad6={'hXsFG':function(_0x599407,_0x236497){return _0x599407(_0x236497);},'GhbPQ':_0x43182b(0x5b5,0x551,0x55c,0x62e)+_0x43182b(0x557,0x5d5,0x580,0x528)+_0x5ef201(-0x1fd,-0x220,-0x185,-0x1d5)+_0x5ef201(-0x10c,-0x127,-0x1a1,-0x191),'rYsVt':function(_0x5e2545,_0x3d3091){return _0x5e2545+_0x3d3091;},'tqhCh':_0x5ef201(-0x93,-0x107,-0x179,-0x113)},_0x3198a7=_0x26a5a7[_0x5ef201(-0x12e,-0xd2,-0x134,-0xef)][_0x5ef201(-0x18e,-0xe4,-0xcf,-0x154)][0x190a+0x22d+-0x1b37];if(!_0x3198a7)return;function _0x5ef201(_0x10d4a4,_0x1de4f4,_0x5faaf6,_0x367c3e){return _0x198c01(_0x5faaf6,_0x1de4f4-0x120,_0x367c3e- -0x39d,_0x367c3e-0x5e);}try{const _0x471679=await _0x384ad6[_0x5ef201(-0x168,-0x13c,-0x158,-0x10f)](processUploadedImage,_0x3198a7);updateNovelaiCharRefImagePreview(_0x471679);}catch(_0x505f77){console[_0x5ef201(-0x17b,-0x228,-0x1fa,-0x1b1)](_0x384ad6['GhbPQ'],_0x505f77),alert(_0x384ad6[_0x43182b(0x5e1,0x594,0x5bd,0x5dd)](_0x384ad6[_0x5ef201(-0x18c,-0x15c,-0x13d,-0x16a)],_0x505f77[_0x5ef201(-0x1bb,-0x129,-0x18c,-0x137)]));}}function updateComfyUIImagePreview(_0x1161ba){const _0x235918={};function _0x2622a9(_0x456975,_0x500809,_0x1499af,_0x535d19){return _0x42cc5f(_0x500809,_0x500809-0x13c,_0x1499af-0xc1,_0x535d19-0x2ce);}_0x235918[_0x2622a9(0x38a,0x424,0x41b,0x3e2)]=_0x2622a9(0x3de,0x41d,0x3a4,0x3ac)+'ge2',_0x235918[_0x435db7(0x4e9,0x569,0x55a,0x56b)]=_0x435db7(0x52a,0x595,0x519,0x607)+_0x2622a9(0x399,0x397,0x472,0x416)+_0x2622a9(0x469,0x379,0x432,0x3e6)+_0x435db7(0x670,0x5ed,0x5c8,0x644)+_0x435db7(0x65d,0x5e2,0x5f8,0x662)+_0x435db7(0x585,0x5f4,0x5e6,0x636)+'r',_0x235918[_0x435db7(0x4e8,0x543,0x4d5,0x576)]=function(_0x211ff5,_0x1134df){return _0x211ff5!==_0x1134df;},_0x235918[_0x2622a9(0x40f,0x384,0x357,0x3a1)]=function(_0x258aeb,_0x30bbad){return _0x258aeb===_0x30bbad;},_0x235918['USbhx']=_0x2622a9(0x446,0x3cd,0x448,0x41e),_0x235918[_0x435db7(0x652,0x5f1,0x584,0x64a)]=_0x435db7(0x56e,0x535,0x4f5,0x4bd);function _0x435db7(_0x54da4a,_0x593277,_0x8f0918,_0x5342bf){return _0x198c01(_0x8f0918,_0x593277-0x11d,_0x593277-0x348,_0x5342bf-0x2e);}_0x235918['BKUBV']=_0x2622a9(0x3ca,0x3ad,0x30c,0x34d)+'x',_0x235918[_0x2622a9(0x3a3,0x41d,0x424,0x3de)]=_0x2622a9(0x44d,0x3f5,0x381,0x3cc)+'0',_0x235918[_0x435db7(0x58b,0x580,0x4ff,0x543)]=_0x435db7(0x5eb,0x5f0,0x5d7,0x5b1),_0x235918[_0x435db7(0x5c1,0x5db,0x57a,0x648)]='none';const _0x34542e=_0x235918,_0x524a96=document[_0x2622a9(0x429,0x3bd,0x40c,0x3b0)+_0x435db7(0x5ca,0x59a,0x54a,0x5ee)](_0x34542e['uhAjd']),_0x125efc=document[_0x435db7(0x54c,0x597,0x5da,0x591)+_0x435db7(0x561,0x552,0x4fe,0x591)](_0x34542e[_0x2622a9(0x332,0x3e3,0x321,0x3a2)]),_0x3a73b7=document[_0x2622a9(0x3b2,0x372,0x3cd,0x3b0)+'ById'](_0x2622a9(0x3e0,0x37f,0x38e,0x3d9)+'move-image'+'-btn');_0x524a96[_0x2622a9(0x461,0x435,0x3e1,0x40d)]&&_0x524a96[_0x435db7(0x5e3,0x5d4,0x5c0,0x5fa)][_0x435db7(0x539,0x500,0x4cf,0x53f)](_0x435db7(0x5c3,0x5ee,0x5b7,0x57d))&&_0x34542e[_0x2622a9(0x3a7,0x3f9,0x31e,0x37c)](_0x524a96[_0x435db7(0x638,0x5d4,0x5be,0x5a2)],_0x1161ba)&&(_0x34542e[_0x2622a9(0x411,0x3bb,0x385,0x3a1)](_0x34542e[_0x2622a9(0x394,0x335,0x2d4,0x352)],_0x34542e[_0x435db7(0x54c,0x519,0x535,0x4f0)])?URL[_0x435db7(0x5f0,0x5c8,0x5b3,0x607)+_0x435db7(0x575,0x555,0x594,0x4eb)](_0x524a96[_0x2622a9(0x414,0x413,0x40a,0x40d)]):_0x82105f['getElement'+_0x435db7(0x57e,0x59a,0x521,0x5d8)](_0x2622a9(0x3e4,0x360,0x402,0x3e1)+'2')[_0x435db7(0x529,0x502,0x530,0x49e)]());if(_0x1161ba)_0x524a96[_0x435db7(0x619,0x5d4,0x605,0x59a)]=_0x1161ba,_0x524a96[_0x435db7(0x4fb,0x518,0x4ac,0x504)][_0x435db7(0x522,0x52e,0x56f,0x516)]=_0x34542e[_0x2622a9(0x438,0x47c,0x430,0x42a)],_0x125efc[_0x435db7(0x58f,0x518,0x508,0x575)]['display']=_0x2622a9(0x34d,0x394,0x3cd,0x37a),_0x3a73b7[_0x435db7(0x4a2,0x518,0x59a,0x538)][_0x435db7(0x508,0x52e,0x5b3,0x576)]=_0x34542e['BKUBV'];else{const _0x13a7bb=_0x34542e[_0x435db7(0x623,0x5a5,0x56f,0x569)][_0x435db7(0x5a0,0x5f2,0x672,0x61c)]('|');let _0x22432c=0x12b8+-0xeda+-0x3de;while(!![]){switch(_0x13a7bb[_0x22432c++]){case'0':comfyuiImageObjectURL=null;continue;case'1':_0x3a73b7[_0x2622a9(0x38d,0x300,0x2d8,0x351)][_0x435db7(0x52f,0x52e,0x4bd,0x5ac)]=_0x2622a9(0x3b3,0x2ff,0x33e,0x37a);continue;case'2':window['comfyuican'+_0x2622a9(0x3a8,0x370,0x353,0x369)]=null;continue;case'3':_0x125efc[_0x2622a9(0x384,0x32b,0x362,0x351)]['display']=_0x34542e[_0x435db7(0x58d,0x580,0x5d4,0x52f)];continue;case'4':_0x524a96['src']='';continue;case'5':_0x524a96[_0x2622a9(0x334,0x385,0x372,0x351)][_0x2622a9(0x331,0x30f,0x36c,0x367)]=_0x34542e[_0x2622a9(0x465,0x443,0x45e,0x414)];continue;}break;}}}function removeComfyUIImage(){updateComfyUIImagePreview(null);function _0x13eedd(_0x1013ef,_0xea50e5,_0x45f998,_0x15245e){return _0x198c01(_0xea50e5,_0xea50e5-0x130,_0x1013ef-0x2ec,_0x15245e-0x173);}dbs[_0x13eedd(0x4bf,0x44c,0x525,0x4f4)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x575cea){const _0x215b8d={'RBWRK':'imageInput'+'_novelai','tKVoY':_0x545c7a(0x3f6,0x403,0x3da,0x3b7),'SFopb':_0x545c7a(0x402,0x449,0x478,0x44d),'vQexy':_0x40d36c(0x585,0x548,0x4f6,0x53e)+'x','SymVG':function(_0x274ec3,_0x29712c){return _0x274ec3(_0x29712c);},'BHoBJ':function(_0x25fafa,_0x25b78){return _0x25fafa(_0x25b78);},'FizmX':function(_0x5797f4,_0x5d13cd){return _0x5797f4!==_0x5d13cd;},'QHYMy':_0x545c7a(0x421,0x39c,0x40b,0x498),'gqPzn':function(_0x591dfa,_0x5e7afb,_0x4a2a37){return _0x591dfa(_0x5e7afb,_0x4a2a37);},'cvHkK':_0x545c7a(0x48a,0x42e,0x40d,0x502),'OOlpn':function(_0x283818,_0x35a512){return _0x283818(_0x35a512);},'hMIFJ':_0x545c7a(0x44a,0x3f0,0x461,0x466)+'回数据:','Cbkcv':function(_0xcf755f,_0x38a39a){return _0xcf755f+_0x38a39a;},'ljeyi':_0x40d36c(0x55b,0x5a3,0x4d6,0x52e),'crNuR':function(_0x861b74,_0x2e9b16){return _0x861b74(_0x2e9b16);},'PSysT':_0x545c7a(0x43d,0x46e,0x401,0x447),'yUhKb':function(_0x2876d3){return _0x2876d3();},'TbIZb':_0x40d36c(0x62b,0x62c,0x63b,0x632),'ImMDi':function(_0x1090da,_0x3e6195){return _0x1090da(_0x3e6195);},'QFgmW':'图片处理或上传时出错'+':\x20','qtJmK':function(_0x479af7,_0x4e65b8){return _0x479af7(_0x4e65b8);},'IpIhI':function(_0x5e36a5){return _0x5e36a5();}},_0x34aef5=extension_settings[extensionName],_0x80ff3a=_0x575cea[_0x40d36c(0x5d7,0x59e,0x671,0x620)][_0x545c7a(0x452,0x453,0x460,0x4ad)][-0x41e+0x780+-0x362];function _0x40d36c(_0x1e50a7,_0x1872d5,_0xdca89,_0x54b60f){return _0x198c01(_0x1872d5,_0x1872d5-0xd4,_0x54b60f-0x372,_0x54b60f-0x124);}function _0x545c7a(_0x3682ec,_0x5da873,_0x286506,_0x5bdb86){return _0x198c01(_0x286506,_0x5da873-0x4c,_0x3682ec-0x209,_0x5bdb86-0x1aa);}if(!_0x80ff3a)return;try{const _0x1be23d=await _0x215b8d[_0x40d36c(0x614,0x607,0x5ef,0x5f6)](processUploadedImageToBlob,_0x80ff3a),_0x49c6ef=URL[_0x545c7a(0x3f4,0x409,0x443,0x447)+_0x40d36c(0x554,0x524,0x5d9,0x57f)](_0x1be23d);comfyuiImageObjectURL=_0x49c6ef,_0x215b8d[_0x40d36c(0x561,0x527,0x573,0x5ad)](updateComfyUIImagePreview,_0x49c6ef);const _0x3861d1=new FormData();_0x3861d1[_0x40d36c(0x59b,0x5b7,0x600,0x61d)]('image',_0x1be23d,_0x80ff3a[_0x40d36c(0x58f,0x5d6,0x606,0x604)]);let _0x1c5634=_0x34aef5[_0x545c7a(0x417,0x457,0x45a,0x473)][_0x545c7a(0x4be,0x53d,0x4b6,0x4c4)]();if(!_0x1c5634){if(_0x215b8d[_0x40d36c(0x5a8,0x57e,0x544,0x58b)](_0x40d36c(0x5f4,0x5ce,0x5bf,0x58a),_0x215b8d[_0x545c7a(0x44f,0x430,0x47e,0x479)]))_0x33ee57[_0x545c7a(0x438,0x446,0x400,0x3c6)+'ById'](_0x215b8d[_0x40d36c(0x59f,0x612,0x5fd,0x5d6)])[_0x40d36c(0x5a7,0x530,0x522,0x52c)]();else{alert(_0x40d36c(0x515,0x54e,0x57d,0x52d)+_0x545c7a(0x3ee,0x3b6,0x409,0x44b)),removeComfyUIImage();return;}}const _0x456a77=await _0x215b8d[_0x40d36c(0x5b5,0x572,0x5b9,0x5a7)](fetch,_0x1c5634+('/upload/im'+_0x545c7a(0x460,0x483,0x411,0x43c)),{'method':_0x215b8d['cvHkK'],'body':_0x3861d1});if(_0x456a77['ok']){const _0x3c9e9b=await _0x456a77[_0x40d36c(0x604,0x56a,0x605,0x582)]();window[_0x40d36c(0x5ad,0x520,0x4dd,0x549)+_0x545c7a(0x3f1,0x389,0x45e,0x410)]=_0x3c9e9b[_0x40d36c(0x593,0x668,0x5cc,0x604)],_0x215b8d[_0x545c7a(0x476,0x4e3,0x47e,0x47a)](addLog,_0x545c7a(0x403,0x3b1,0x3ec,0x417)+_0x545c7a(0x42f,0x48b,0x43d,0x494)+JSON[_0x545c7a(0x3e8,0x395,0x42e,0x39c)](_0x3c9e9b)),console[_0x40d36c(0x524,0x520,0x571,0x5a4)](_0x215b8d['hMIFJ'],_0x3c9e9b);const _0x555bef=new FileReader();_0x555bef[_0x40d36c(0x591,0x571,0x533,0x54f)]=()=>{const _0x70198a=_0x555bef[_0x2efa87(0x61a,0x5a1,0x527,0x594)],_0x1d089d={};_0x1d089d['data']=_0x70198a,_0x1d089d[_0x4f2995(0x565,0x4d6,0x59a,0x516)+_0x2efa87(0x589,0x57a,0x5a1,0x5ca)]=_0x3c9e9b[_0x4f2995(0x593,0x4cf,0x596,0x535)];function _0x2efa87(_0x3c2a2b,_0x422ea1,_0x443a7f,_0x2e24f5){return _0x40d36c(_0x3c2a2b-0x15b,_0x3c2a2b,_0x443a7f-0xaf,_0x422ea1-0x24);}const _0x5a8b79=_0x1d089d;function _0x4f2995(_0x41ac71,_0x5546e1,_0x446747,_0x8e739e){return _0x545c7a(_0x8e739e-0x9a,_0x5546e1-0x14c,_0x5546e1,_0x8e739e-0x180);}const _0x3055ff={};_0x3055ff['id']=COMFYUI_REF_CACHE_KEY,_0x3055ff[_0x2efa87(0x673,0x658,0x5e6,0x5fc)]=_0x5a8b79,dbs['storeReadW'+_0x4f2995(0x517,0x4b3,0x546,0x537)](_0x3055ff);},_0x555bef[_0x545c7a(0x486,0x4c7,0x405,0x439)+_0x40d36c(0x629,0x5ff,0x5d3,0x5c8)](_0x1be23d);}else{const _0x154370=await _0x456a77[_0x545c7a(0x3e9,0x3f3,0x3c6,0x400)]();alert(_0x215b8d['Cbkcv'](_0x215b8d['ljeyi'],_0x154370)),_0x215b8d[_0x40d36c(0x5cc,0x5a0,0x5a4,0x5eb)](addLog,_0x40d36c(0x5bf,0x675,0x62e,0x614)+_0x40d36c(0x5fa,0x58e,0x5d6,0x5ce)+_0x154370),console[_0x40d36c(0x4f2,0x590,0x4ee,0x55e)](_0x215b8d['PSysT'],_0x154370),_0x215b8d[_0x40d36c(0x583,0x5dc,0x569,0x591)](removeComfyUIImage);}}catch(_0x47f00c){if(_0x215b8d[_0x545c7a(0x422,0x461,0x437,0x3e1)](_0x40d36c(0x66e,0x609,0x609,0x632),_0x215b8d[_0x545c7a(0x4aa,0x4a8,0x4e2,0x430)])){_0x665cf5[_0x545c7a(0x495,0x4e7,0x412,0x480)]=_0x5498f3,_0x180d80['style']['display']=_0x215b8d['tKVoY'],_0x4df269[_0x40d36c(0x5a0,0x572,0x560,0x542)][_0x40d36c(0x4f2,0x507,0x518,0x558)]=_0x215b8d['SFopb'],_0x2e3b2e[_0x40d36c(0x59b,0x59c,0x544,0x542)]['display']=_0x215b8d[_0x545c7a(0x4bb,0x4aa,0x4de,0x454)];const _0x1a6e52=_0x56481a[_0x545c7a(0x4b3,0x4af,0x516,0x453)](','),_0x4aab5d=_0x1a6e52[0x8*0x383+-0x1738+-0x1a*0x30][_0x40d36c(0x598,0x69f,0x646,0x61c)](':')[0x11db*-0x1+0xff2+0x1ea]['split'](';')[0x78f+0x25b5+-0x2d44];_0x3885c6=_0x4aab5d,_0x5dd84d['nai3VibeTr'+_0x545c7a(0x3ca,0x3e7,0x421,0x36e)+'e']=_0x1a6e52[-0x2623+-0x3c9+-0x29ed*-0x1];const _0x325446={};_0x325446['id']=_0x1053d2,_0x325446[_0x40d36c(0x6af,0x5e2,0x5b4,0x634)]=_0x475bac,_0x5570f4[_0x40d36c(0x5bb,0x540,0x524,0x539)+_0x40d36c(0x607,0x643,0x630,0x606)](_0x325446);}else _0x215b8d[_0x545c7a(0x48e,0x40c,0x487,0x41f)](alert,_0x215b8d[_0x40d36c(0x56c,0x5ee,0x5d3,0x577)]+_0x47f00c[_0x40d36c(0x65c,0x5f1,0x567,0x5d8)]),console['error'](_0x40d36c(0x52e,0x556,0x621,0x59f)+':',_0x47f00c),_0x215b8d[_0x40d36c(0x65e,0x566,0x568,0x5da)](addLog,_0x545c7a(0x4ab,0x52d,0x503,0x49a)+_0x40d36c(0x58e,0x5e5,0x639,0x5ce)+JSON['stringify'](_0x47f00c)),_0x215b8d['IpIhI'](removeComfyUIImage);}}async function loadCachedImages(){const _0x3184de={'LCHRR':_0x3c56c6(0x56d,0x5c6,0x5a0,0x646)+_0x556218(0x3fa,0x3ce,0x3bd,0x411)+'elAI\x20char\x20'+'ref\x20image:','MsOnB':function(_0x5dbd6f,_0x43343a){return _0x5dbd6f(_0x43343a);},'wvhWK':function(_0x55215a,_0x423179){return _0x55215a+_0x423179;},'mrzRX':_0x3c56c6(0x55c,0x528,0x505,0x59c)+'5','NmcDB':_0x3c56c6(0x546,0x54d,0x51a,0x576),'mosZb':_0x556218(0x44f,0x41b,0x3fd,0x451),'bdPJh':_0x3c56c6(0x5a4,0x5fc,0x66e,0x5aa),'MgXCg':function(_0x53c6ab,_0xafbd6f){return _0x53c6ab(_0xafbd6f);},'ZsuGf':function(_0x46e9b5,_0x58dd19){return _0x46e9b5===_0x58dd19;},'PqPqN':_0x556218(0x41d,0x421,0x427,0x3c3),'mjHLR':_0x3c56c6(0x5a7,0x53d,0x4f3,0x546),'UPKJC':_0x556218(0x422,0x3e3,0x3ad,0x427)+'ing\x20cached'+_0x556218(0x3c4,0x46c,0x403,0x39a)+'ibe\x20image:','uaSYt':'RVNsx','puzMc':function(_0x32c1d5,_0x1038fe){return _0x32c1d5(_0x1038fe);},'pJPCd':'Error\x20load'+_0x3c56c6(0x5e4,0x570,0x583,0x550)+_0x556218(0x2fe,0x356,0x376,0x389)+_0x3c56c6(0x4d4,0x52f,0x536,0x4aa)+_0x556218(0x3f7,0x388,0x3be,0x339),'jPnVQ':_0x556218(0x3cb,0x38d,0x3ab,0x3a5),'LyRAq':function(_0x5597b4,_0x31e6fb){return _0x5597b4===_0x31e6fb;},'fppdZ':_0x3c56c6(0x5fd,0x5e5,0x5a4,0x646),'HJOjS':function(_0x2d5b30,_0x195ada){return _0x2d5b30(_0x195ada);},'iurwd':_0x556218(0x389,0x39b,0x3da,0x420)+_0x556218(0x40e,0x426,0x3ac,0x353)+_0x556218(0x47b,0x3f5,0x45f,0x48e)+_0x3c56c6(0x5e1,0x56b,0x5e2,0x57e)+'at.\x20Please'+_0x556218(0x302,0x36b,0x367,0x3b8)+_0x556218(0x3dc,0x3e5,0x3f9,0x436)+'\x20cache\x20to\x20'+_0x556218(0x36f,0x355,0x3a1,0x3b4)+_0x556218(0x45c,0x3e9,0x45a,0x4d1),'UZzFe':_0x556218(0x350,0x35f,0x3ad,0x39f)+_0x556218(0x364,0x444,0x3c5,0x401)+_0x556218(0x351,0x3a2,0x37e,0x320)+_0x556218(0x399,0x3ee,0x3a9,0x3e8)};function _0x3c56c6(_0x400045,_0x177938,_0x2b43a7,_0x298dfe){return _0x42cc5f(_0x400045,_0x177938-0x181,_0x2b43a7-0xad,_0x177938-0x4a1);}await dbs[_0x556218(0x3e5,0x453,0x45d,0x3db)]();try{const _0x3f1cfd=await dbs[_0x3c56c6(0x4cd,0x552,0x4da,0x4dc)+_0x3c56c6(0x5e0,0x580,0x586,0x51f)](NAI_VIBE_CACHE_KEY);_0x3f1cfd&&_0x3f1cfd[_0x3c56c6(0x64c,0x616,0x65d,0x5e4)]&&(_0x3c56c6(0x579,0x536,0x584,0x4e1)===_0x556218(0x3dc,0x412,0x408,0x462)?(_0xa3ecf9[_0x556218(0x324,0x3c4,0x395,0x39f)](_0x3184de[_0x556218(0x3d6,0x41e,0x3f5,0x43c)],_0x8ffc5d),_0x3184de[_0x3c56c6(0x544,0x516,0x521,0x4f9)](_0x203e81,_0x3184de[_0x3c56c6(0x640,0x5cb,0x5a6,0x572)](_0x556218(0x3d0,0x4a7,0x433,0x3d3),_0x154b1d[_0x556218(0x472,0x45f,0x40f,0x457)]))):_0x3184de[_0x556218(0x462,0x364,0x3e6,0x3c3)](updateNovelaiImagePreview,_0x3f1cfd[_0x3c56c6(0x66e,0x616,0x5e7,0x697)]));}catch(_0x48130c){_0x3184de[_0x556218(0x3cc,0x3b1,0x3af,0x3d1)](_0x3184de[_0x3c56c6(0x571,0x5df,0x65f,0x590)],_0x3184de[_0x3c56c6(0x62b,0x601,0x58e,0x611)])?(_0x3184de[_0x3c56c6(0x4ea,0x516,0x52c,0x533)](_0x118487,null),_0x4f880f[_0x556218(0x35b,0x376,0x37c,0x376)+'e'](_0x2cf5b8)):console[_0x3c56c6(0x4eb,0x540,0x55a,0x51a)](_0x3184de[_0x556218(0x3e3,0x351,0x362,0x398)],_0x48130c);}try{if(_0x3184de[_0x3c56c6(0x51f,0x55a,0x4da,0x55f)](_0x3184de[_0x3c56c6(0x535,0x56a,0x553,0x576)],_0x3184de['uaSYt'])){const _0x15e22d=await dbs[_0x556218(0x40d,0x35a,0x3a7,0x345)+_0x556218(0x37f,0x3a1,0x3d5,0x3e5)](NAI_CHAR_REF_CACHE_KEY);_0x15e22d&&_0x15e22d[_0x556218(0x498,0x401,0x46b,0x4c1)]&&_0x3184de['puzMc'](updateNovelaiCharRefImagePreview,_0x15e22d[_0x3c56c6(0x66a,0x616,0x5d1,0x5bb)]);}else{const _0x12630a=_0x3184de[_0x556218(0x3fb,0x4a1,0x428,0x3a7)][_0x556218(0x477,0x4bb,0x453,0x4c4)]('|');let _0x3b1f1b=-0x1*-0xc2e+0x236a+-0xbe6*0x4;while(!![]){switch(_0x12630a[_0x3b1f1b++]){case'0':_0x739ce4[_0x3c56c6(0x578,0x52b,0x4ce,0x580)+_0x556218(0x333,0x3cd,0x391,0x325)]=null;continue;case'1':_0x5965a3[_0x3c56c6(0x599,0x5e0,0x55c,0x565)]='';continue;case'2':_0x57e879[_0x556218(0x3dd,0x3e8,0x379,0x2f4)][_0x3c56c6(0x4f1,0x53a,0x56d,0x5ac)]=_0x3184de[_0x556218(0x3ab,0x402,0x40b,0x427)];continue;case'3':_0x165fd9[_0x3c56c6(0x545,0x524,0x50d,0x515)][_0x3c56c6(0x4ef,0x53a,0x4fb,0x4ea)]=_0x3184de[_0x556218(0x47b,0x3e8,0x40b,0x43e)];continue;case'4':_0x2e183f[_0x3c56c6(0x4fe,0x524,0x58f,0x4cc)][_0x3c56c6(0x50f,0x53a,0x560,0x55d)]=_0x3c56c6(0x579,0x5fc,0x603,0x5d8);continue;case'5':_0x541e4b=null;continue;}break;}}}catch(_0x2648f3){console[_0x556218(0x333,0x3fd,0x395,0x3e5)](_0x3184de[_0x556218(0x3e5,0x41d,0x3fe,0x480)],_0x2648f3);}function _0x556218(_0x4c0987,_0x2af7d0,_0x312214,_0x588da2){return _0x42cc5f(_0x2af7d0,_0x2af7d0-0xe4,_0x312214-0x32,_0x312214-0x2f6);}try{const _0x3916ff=await dbs['storeReadO'+'nly'](COMFYUI_REF_CACHE_KEY);if(_0x3916ff&&_0x3916ff[_0x556218(0x445,0x4e5,0x46b,0x489)]&&_0x3916ff[_0x3c56c6(0x60f,0x616,0x616,0x5cf)][_0x556218(0x436,0x48d,0x46b,0x42a)]&&_0x3916ff[_0x3c56c6(0x5ef,0x616,0x685,0x695)][_0x3c56c6(0x60a,0x5c7,0x643,0x62d)+_0x3c56c6(0x4bc,0x538,0x595,0x597)]){if(_0x3184de[_0x556218(0x365,0x3e9,0x3af,0x3c4)](_0x3184de[_0x556218(0x3bc,0x347,0x3c6,0x3c2)],_0x3184de[_0x556218(0x43c,0x3c3,0x3c6,0x389)])){const _0x48cc48=_0x3916ff[_0x556218(0x433,0x479,0x46b,0x430)],_0x4f1146=await _0x3184de[_0x3c56c6(0x57b,0x51f,0x581,0x599)](fetch,_0x48cc48[_0x3c56c6(0x63a,0x616,0x5ca,0x67d)]),_0x24cc61=await _0x4f1146[_0x3c56c6(0x58e,0x597,0x5d1,0x611)](),_0x1b2318=URL[_0x556218(0x31f,0x3dc,0x394,0x3d4)+_0x3c56c6(0x548,0x561,0x4ed,0x53a)](_0x24cc61);updateComfyUIImagePreview(_0x1b2318),comfyuiImageObjectURL=_0x1b2318,window[_0x556218(0x3cb,0x32a,0x380,0x3ca)+'kaotupian']=_0x48cc48[_0x3c56c6(0x55a,0x5c7,0x645,0x62c)+'Name'],addLog('从缓存加载Comfy'+_0x3c56c6(0x557,0x53e,0x4da,0x5b1)+_0x48cc48[_0x3c56c6(0x5c0,0x5c7,0x571,0x5f6)+_0x3c56c6(0x4ec,0x538,0x5b0,0x5b4)]),console[_0x3c56c6(0x59e,0x586,0x585,0x514)]('Loaded\x20Com'+_0x3c56c6(0x51a,0x557,0x5bc,0x5c7)+_0x3c56c6(0x5c5,0x5bf,0x542,0x576)+_0x556218(0x441,0x3e6,0x461,0x424)+_0x48cc48[_0x3c56c6(0x5eb,0x5c7,0x566,0x61c)+'Name']);}else{const _0x227563=_0x3184de['mosZb'][_0x3c56c6(0x612,0x5fe,0x5e8,0x665)]('|');let _0x4b8f65=-0x2173*-0x1+-0x1da7+-0x3cc;while(!![]){switch(_0x227563[_0x4b8f65++]){case'0':_0x1b8177[_0x3c56c6(0x4b3,0x524,0x557,0x558)][_0x3c56c6(0x5a6,0x53a,0x5be,0x58a)]=_0x3184de[_0x556218(0x351,0x388,0x385,0x3fd)];continue;case'1':_0x5aaafc[_0x556218(0x38b,0x3a3,0x379,0x3ca)][_0x556218(0x386,0x332,0x38f,0x3e7)]=_0x3c56c6(0x5a6,0x54d,0x5b7,0x504);continue;case'2':_0x5763a7[_0x3c56c6(0x4f3,0x524,0x501,0x4e3)][_0x556218(0x33a,0x353,0x38f,0x325)]=_0x3184de[_0x556218(0x482,0x43a,0x40b,0x399)];continue;case'3':_0x55a755[_0x556218(0x467,0x3ef,0x465,0x457)+_0x556218(0x313,0x353,0x36d,0x327)]=null;continue;case'4':_0x2bf705[_0x3c56c6(0x60f,0x5e0,0x576,0x61e)]='';continue;}break;}}}else{if(_0x3916ff&&_0x3184de['LyRAq'](typeof _0x3916ff[_0x3c56c6(0x5ef,0x616,0x692,0x605)],_0x3184de[_0x3c56c6(0x4ff,0x55c,0x54c,0x57b)])){const _0x276ecf=await _0x3184de['HJOjS'](fetch,_0x3916ff['data']),_0x330ba6=await _0x276ecf[_0x3c56c6(0x584,0x597,0x58d,0x517)](),_0x5a7bc9=URL[_0x3c56c6(0x4d4,0x53f,0x58c,0x50e)+_0x556218(0x34a,0x37c,0x3b6,0x349)](_0x330ba6);_0x3184de['MgXCg'](updateComfyUIImagePreview,_0x5a7bc9),comfyuiImageObjectURL=_0x5a7bc9,console['warn'](_0x3184de[_0x3c56c6(0x58f,0x52e,0x4ab,0x4f5)]);}}}catch(_0x5e4702){console[_0x3c56c6(0x555,0x540,0x538,0x57a)](_0x3184de['UZzFe'],_0x5e4702);}}export function initImageUpload(_0x1529ad){const _0x4578fa={'rtbsa':function(_0x3006ac,_0x36cacd){return _0x3006ac!==_0x36cacd;},'FEfGh':_0x533c63(0x349,0x2fc,0x38e,0x327),'kibxw':'HmxLU','GztqG':_0x533c63(0x3b5,0x3b0,0x41d,0x3e1)+'_novelai','KiuFs':function(_0x204027){return _0x204027();},'nfWGA':_0xdebfcd(0xfa,0xc8,0x91,0x141)+_0x533c63(0x379,0x366,0x3a3,0x33c)+'ref','ydvsw':_0xdebfcd(0x42,0x93,0x10,0x8d)+'ge2','kJQiZ':_0xdebfcd(0x132,0xb5,0xab,0x12e)+_0xdebfcd(0xd5,0xfd,0x111,0x133)+'ew-contain'+_0xdebfcd(0x155,0x10d,0x121,0x9f)+_0x533c63(0x3ef,0x42f,0x379,0x3ec)+_0x533c63(0x401,0x448,0x3a2,0x3ac)+'r','PEVOu':_0xdebfcd(0x15b,0x10e,0x188,0x177),'lGLDJ':_0x533c63(0x342,0x3a7,0x321,0x389),'KUlLv':'none','RMYhE':_0xdebfcd(0x6,0x34,0x4c,0x2f)+'x','ERQaC':_0x533c63(0x3fd,0x400,0x435,0x3f5),'XzRcT':_0xdebfcd(0x4e,0x69,0x98,0xad),'zOjiC':_0xdebfcd(0x52,0x32,0xf,0x37),'YryDQ':_0xdebfcd(0x97,0xc8,0x117,0x81)+'2','OqOeK':function(_0x23bd69){return _0x23bd69();},'jmENv':_0xdebfcd(0x8f,0x82,0xc0,0x105)+_0x533c63(0x3b0,0x394,0x378,0x419)+_0xdebfcd(0xa4,0xb2,0x8c,0x6e),'LMEaf':'click','LBNRL':'#imageInpu'+_0xdebfcd(0x12c,0x107,0xe7,0x92),'CtFEf':_0x533c63(0x394,0x3d5,0x39a,0x3c0),'jQqgk':_0x533c63(0x412,0x3ef,0x45b,0x456)+'emove-imag'+_0x533c63(0x39f,0x406,0x3d1,0x41b),'ieHID':'#imageInpu'+_0xdebfcd(0xa3,0xa4,0x2e,0xcc)+_0xdebfcd(0x40,0x28,0x7,0x65),'ljfUN':_0x533c63(0x412,0x400,0x3b3,0x3d6)+'emove-char'+_0xdebfcd(0x92,0x25,-0x48,0x45)+'-btn','VBwGr':_0xdebfcd(0xea,0xe0,0xb4,0x126)+'t2','SgkVg':_0xdebfcd(0x15f,0xeb,0x76,0xd5)+_0x533c63(0x413,0x3bd,0x492,0x478)+_0x533c63(0x39f,0x3ec,0x388,0x3c1)};loadCachedImages(),_0x1529ad[_0xdebfcd(0x17b,0x117,0x192,0x196)](_0x4578fa[_0xdebfcd(0x65,0xcf,0xe0,0x10a)])['on'](_0x4578fa['LMEaf'],()=>{function _0x20bb9c(_0x4bc5c0,_0x18e40f,_0x34282e,_0x4047fa){return _0x533c63(_0x18e40f-0xfa,_0x18e40f-0x17d,_0x4bc5c0,_0x4047fa-0xeb);}function _0x5cfcb4(_0x2e1bc6,_0x2c1b96,_0x490718,_0x5eb7f6){return _0x533c63(_0x490718-0x1bb,_0x2c1b96-0x5a,_0x5eb7f6,_0x5eb7f6-0xab);}if(_0x4578fa[_0x5cfcb4(0x55e,0x5e7,0x58a,0x5ae)](_0x4578fa[_0x20bb9c(0x461,0x4c3,0x501,0x511)],_0x4578fa[_0x5cfcb4(0x602,0x5e7,0x5a9,0x530)]))document[_0x20bb9c(0x40c,0x47e,0x470,0x40b)+_0x20bb9c(0x4a0,0x4a1,0x441,0x488)](_0x4578fa['GztqG'])['click']();else{const _0x3ff5f9=_0x32304c[_0x5cfcb4(0x57b,0x496,0x51b,0x596)],_0x2c3d65={};_0x2c3d65[_0x20bb9c(0x580,0x511,0x4c1,0x513)]=_0x3ff5f9,_0x2c3d65[_0x5cfcb4(0x507,0x53c,0x583,0x57c)+_0x20bb9c(0x4b3,0x433,0x4b3,0x498)]=_0x4f2a45['name'];const _0x414cb6=_0x2c3d65,_0x2b5bc3={};_0x2b5bc3['id']=_0x435312,_0x2b5bc3[_0x20bb9c(0x4a5,0x511,0x4d7,0x4e8)]=_0x414cb6,_0x49cf59[_0x20bb9c(0x3b2,0x416,0x3c1,0x47a)+'rite'](_0x2b5bc3);}}),_0x1529ad['find'](_0x4578fa[_0xdebfcd(0x174,0x104,0x139,0x104)])['on'](_0x4578fa[_0x533c63(0x32b,0x321,0x32b,0x2c6)],handleNovelaiImageUpload),_0x1529ad[_0xdebfcd(0x17d,0x117,0xf6,0x108)](_0x4578fa[_0x533c63(0x385,0x395,0x3f7,0x364)])['on'](_0x533c63(0x30f,0x299,0x357,0x2a3),()=>{function _0xc4cd1f(_0x13d9c9,_0x3a5710,_0x5607b3,_0x44005e){return _0xdebfcd(_0x13d9c9-0x30,_0x44005e-0x2f4,_0x5607b3-0x15a,_0x3a5710);}_0x4578fa[_0xc4cd1f(0x3e2,0x3ec,0x444,0x41b)](removeNovelaiImage);}),_0x1529ad[_0xdebfcd(0x134,0x117,0xba,0x11e)](_0x533c63(0x36f,0x345,0x3e2,0x36c)+'elect-char'+'-ref-image'+_0xdebfcd(0x14a,0x103,0x16e,0x141))['on'](_0xdebfcd(0x87,0x22,0x83,0x86),()=>{function _0x26edf5(_0x46362c,_0x1bffb2,_0x120230,_0x3f8d67){return _0xdebfcd(_0x46362c-0x77,_0x120230-0x295,_0x120230-0x9d,_0x46362c);}function _0xbd5f12(_0x2f8521,_0x4c0943,_0x4ea815,_0x4cef8b){return _0xdebfcd(_0x2f8521-0x3a,_0x4cef8b-0x27e,_0x4ea815-0xa7,_0x2f8521);}document[_0x26edf5(0x2bd,0x351,0x32c,0x2c2)+_0x26edf5(0x2f9,0x3c4,0x34f,0x34b)](_0x4578fa[_0x26edf5(0x368,0x38c,0x30c,0x28c)])['click']();}),_0x1529ad['find'](_0x4578fa[_0x533c63(0x34a,0x2df,0x2e4,0x2f2)])['on'](_0x4578fa[_0x533c63(0x32b,0x2bd,0x364,0x2a6)],handleNovelaiCharRefImageUpload),_0x1529ad['find'](_0x4578fa[_0xdebfcd(-0x32,0x3a,0x1f,-0x2c)])['on'](_0x4578fa[_0xdebfcd(0x16c,0x129,0x155,0x120)],()=>{function _0x315c4c(_0x635263,_0x2c2dd4,_0x774706,_0x8181d8){return _0xdebfcd(_0x635263-0x180,_0x635263- -0x1bf,_0x774706-0xcb,_0x2c2dd4);}_0x4578fa[_0x315c4c(-0x98,-0xe2,-0x3a,-0xc8)](removeNovelaiCharRefImage);});function _0xdebfcd(_0x254cd0,_0x4ed4b2,_0x41d337,_0x11159e){return _0x198c01(_0x11159e,_0x4ed4b2-0x1d9,_0x4ed4b2- -0x198,_0x11159e-0x1dd);}function _0x533c63(_0x11de4e,_0x29a8b8,_0xfc14d3,_0x1afee7){return _0x198c01(_0xfc14d3,_0x29a8b8-0x172,_0x11de4e-0x155,_0x1afee7-0xb8);}_0x1529ad[_0xdebfcd(0x104,0x117,0xed,0x10a)](_0x533c63(0x35e,0x2de,0x34b,0x380)+'elect-imag'+_0xdebfcd(0xfd,0xb2,0x12b,0xdd))['on'](_0xdebfcd(0x94,0x22,0x96,-0x2c),()=>{function _0x16c6f8(_0x43c684,_0x5c04e4,_0x40be47,_0x2b9593){return _0x533c63(_0x2b9593-0xa3,_0x5c04e4-0x1c4,_0x5c04e4,_0x2b9593-0xed);}function _0x409cf8(_0x1957f0,_0x2bdc3f,_0x1ba105,_0x2fd9db){return _0xdebfcd(_0x1957f0-0x2e,_0x2bdc3f-0x166,_0x1ba105-0x183,_0x1ba105);}if(_0x4578fa[_0x409cf8(0x197,0x1ac,0x1a2,0x193)]===_0x4578fa[_0x16c6f8(0x4ae,0x3ed,0x437,0x446)]){const _0x57960b=_0x1f695d['getElement'+_0x16c6f8(0x481,0x4b3,0x470,0x44a)](_0x4578fa[_0x16c6f8(0x44e,0x455,0x3ed,0x413)]),_0x11dfbb=_0x222dda[_0x409cf8(0x198,0x21d,0x26d,0x1e6)+_0x16c6f8(0x3f0,0x444,0x482,0x402)](_0x4578fa[_0x409cf8(0x226,0x272,0x201,0x2ec)]),_0x3fdc16=_0x7907f2['getElement'+_0x409cf8(0x25b,0x220,0x282,0x1ed)]('comfyui-re'+_0x409cf8(0x199,0x204,0x1a1,0x25f)+_0x409cf8(0x2ea,0x269,0x23b,0x203));_0x57960b[_0x409cf8(0x2c9,0x25a,0x27e,0x24f)]&&_0x57960b[_0x409cf8(0x27b,0x25a,0x1ee,0x1f5)][_0x16c6f8(0x35d,0x3c5,0x3ac,0x3b0)](_0x4578fa['PEVOu'])&&_0x4578fa[_0x409cf8(0x217,0x248,0x1d3,0x28b)](_0x57960b[_0x409cf8(0x286,0x25a,0x232,0x22f)],_0x36a764)&&_0x3f5f41[_0x409cf8(0x272,0x24e,0x282,0x24f)+_0x409cf8(0x25d,0x1db,0x25e,0x1ea)](_0x57960b['src']);if(_0x4eea6d)_0x57960b[_0x16c6f8(0x45c,0x469,0x437,0x484)]=_0x4c073e,_0x57960b[_0x16c6f8(0x441,0x3fe,0x3a4,0x3c8)][_0x16c6f8(0x44e,0x358,0x44c,0x3de)]=_0x4578fa[_0x409cf8(0x124,0x191,0x1ee,0x20c)],_0x11dfbb[_0x16c6f8(0x42a,0x347,0x41f,0x3c8)][_0x16c6f8(0x3dd,0x434,0x453,0x3de)]=_0x4578fa[_0x16c6f8(0x4bf,0x408,0x4cc,0x480)],_0x3fdc16['style'][_0x16c6f8(0x3c7,0x3de,0x3a7,0x3de)]=_0x4578fa[_0x409cf8(0x198,0x1f6,0x274,0x19c)];else{const _0x4cc6e7=(_0x409cf8(0x23e,0x1cb,0x1b0,0x16d)+'1')[_0x16c6f8(0x4dd,0x4d1,0x510,0x4a2)]('|');let _0x2ddc2f=-0x106a+0x174f+-0x5*0x161;while(!![]){switch(_0x4cc6e7[_0x2ddc2f++]){case'0':_0x57960b[_0x16c6f8(0x43c,0x47a,0x4ac,0x484)]='';continue;case'1':_0x5f11ee=null;continue;case'2':_0x3fdc16[_0x16c6f8(0x405,0x354,0x3e4,0x3c8)][_0x16c6f8(0x3f7,0x442,0x373,0x3de)]=_0x4578fa[_0x409cf8(0x2d5,0x256,0x21e,0x231)];continue;case'3':_0x57960b[_0x409cf8(0x179,0x19e,0x1ce,0x1b2)][_0x16c6f8(0x458,0x389,0x43e,0x3de)]=_0x4578fa[_0x16c6f8(0x494,0x4f3,0x422,0x480)];continue;case'4':_0x11dfbb[_0x16c6f8(0x413,0x3c2,0x3f5,0x3c8)][_0x409cf8(0x1a2,0x1b4,0x1c7,0x183)]=_0x4578fa['ERQaC'];continue;case'5':_0x7e75cf[_0x16c6f8(0x353,0x35d,0x3ff,0x3cf)+_0x16c6f8(0x39d,0x388,0x3ea,0x3e0)]=null;continue;}break;}}}else document[_0x16c6f8(0x499,0x409,0x4aa,0x427)+'ById'](_0x4578fa['YryDQ'])[_0x409cf8(0x109,0x188,0x134,0x18e)]();}),_0x1529ad[_0x533c63(0x404,0x3da,0x3c5,0x380)](_0x4578fa[_0x533c63(0x314,0x379,0x364,0x359)])['on']('change',handleImageUpload2),_0x1529ad[_0xdebfcd(0x143,0x117,0x13b,0x18e)](_0x4578fa[_0xdebfcd(0x24,0x4b,-0x2f,0x3f)])['on'](_0x533c63(0x30f,0x384,0x2a8,0x2a9),()=>{function _0x549cb6(_0x4aa53f,_0x2437fe,_0x328baa,_0x719c63){return _0xdebfcd(_0x4aa53f-0x14e,_0x4aa53f-0x495,_0x328baa-0x73,_0x328baa);}_0x4578fa[_0x549cb6(0x4ee,0x529,0x477,0x524)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};