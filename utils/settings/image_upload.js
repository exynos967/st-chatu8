(function(_0x2c12ac,_0x4afef6){function _0x41cf61(_0x3cce9c,_0x1966ab,_0x12f88c,_0x43d68f){return _0x3a7f(_0x3cce9c-0x1c0,_0x12f88c);}const _0x5127f2=_0x2c12ac();function _0x1c23c0(_0x2282c6,_0x3b19c8,_0x4fbd05,_0x3f7727){return _0x3a7f(_0x4fbd05- -0x145,_0x3f7727);}while(!![]){try{const _0x3af911=parseInt(_0x41cf61(0x368,0x3e5,0x2fa,0x3a7))/(0x5*0x6b6+-0x1*-0x2267+-0x43f4)*(parseInt(_0x1c23c0(-0x80,-0x4a,0x1,0x46))/(-0x256e+0xf2f+-0x3*-0x76b))+parseInt(_0x1c23c0(0x54,-0x17,-0x2,0x2e))/(0x20af+-0x1*-0x2405+-0x5*0xdbd)*(parseInt(_0x1c23c0(-0xe2,-0xd8,-0x56,-0x55))/(0xb91+0x2*0xc0+-0xd0d))+-parseInt(_0x41cf61(0x2c2,0x24f,0x303,0x2a3))/(-0x32*0x67+0x1b79+-0x1*0x756)*(-parseInt(_0x1c23c0(-0xa6,-0x20,-0x17,0x42))/(0x7a*-0xa+-0x2*0xa05+0x18d4))+parseInt(_0x41cf61(0x369,0x339,0x2de,0x34f))/(-0x2*-0xe17+-0xee1+-0xd46)*(-parseInt(_0x41cf61(0x298,0x21e,0x2a7,0x258))/(-0x1*-0x805+-0x16e8+0xeeb))+parseInt(_0x41cf61(0x393,0x325,0x334,0x3ec))/(-0x9b*0x3d+0x84f*-0x1+0x1*0x2d47)+parseInt(_0x41cf61(0x287,0x315,0x231,0x2ad))/(0x42*0x58+0x55d+-0x1c03*0x1)*(-parseInt(_0x41cf61(0x2cd,0x261,0x2c3,0x2e4))/(0x26b9+0x1c3d+-0x1*0x42eb))+-parseInt(_0x41cf61(0x2cb,0x318,0x2d5,0x29c))/(0xef*0x1d+-0x107e*0x2+0x5f5)*(-parseInt(_0x41cf61(0x366,0x324,0x308,0x2e6))/(-0xe3d+-0x1998+0x3fd*0xa));if(_0x3af911===_0x4afef6)break;else _0x5127f2['push'](_0x5127f2['shift']());}catch(_0x444048){_0x5127f2['push'](_0x5127f2['shift']());}}}(_0x463b,0x1049e8+0xd00de+-0xc7*0x1aee));const _0x2bbd09=(function(){const _0x1b2886={};function _0x413b3e(_0x18f087,_0x2b6c7f,_0x1879e9,_0x5cee1a){return _0x3a7f(_0x2b6c7f-0x313,_0x5cee1a);}_0x1b2886['OcjFR']=_0x46bb51(-0x91,-0x98,-0x27,-0x3b),_0x1b2886[_0x413b3e(0x449,0x472,0x3ff,0x496)]=_0x413b3e(0x4dc,0x4ac,0x4d2,0x43f),_0x1b2886[_0x46bb51(-0xf9,-0x113,-0x120,-0xf6)]='inline-fle'+'x',_0x1b2886[_0x46bb51(0x6c,-0xf,-0x7f,-0x38)]=function(_0xefd614,_0x2d085f){return _0xefd614!==_0x2d085f;},_0x1b2886[_0x46bb51(0x61,-0x12,0x6f,-0x88)]=_0x46bb51(-0x169,-0xd9,-0x60,-0x55);function _0x46bb51(_0x3a7b75,_0x29b98c,_0x178836,_0x40ca50){return _0x3a7f(_0x29b98c- -0x1ef,_0x40ca50);}const _0x247c76=_0x1b2886;let _0x2098ba=!![];return function(_0x592c41,_0x5b4252){function _0x5ed4ea(_0x2caae8,_0x4efef8,_0x43bad3,_0x2a6b5f){return _0x46bb51(_0x2caae8-0x101,_0x4efef8- -0x121,_0x43bad3-0x121,_0x43bad3);}const _0x477d69={'EUKKl':_0x247c76[_0x5d86ca(0x4ff,0x46f,0x48a,0x4c2)],'igxpY':_0x247c76[_0x5ed4ea(-0x235,-0x1b1,-0x1c6,-0x1fc)],'JLlzM':_0x247c76[_0x5ed4ea(-0x2c2,-0x234,-0x2ba,-0x244)],'DCHvT':'flex','vIaWN':_0x5ed4ea(-0x182,-0x1e5,-0x180,-0x230),'vzIYt':function(_0xb4f83a,_0x549322){function _0x7c36d9(_0x205637,_0x2a8dbd,_0x5cfbe4,_0x3250c3){return _0x5d86ca(_0x205637-0x1f,_0x2a8dbd,_0x205637- -0x582,_0x3250c3-0x5c);}return _0x247c76[_0x7c36d9(-0xb5,-0x102,-0x141,-0x23)](_0xb4f83a,_0x549322);},'lLIkv':_0x247c76['TmsEg']},_0x3178a2=_0x2098ba?function(){const _0x324d73={};_0x324d73['BCkyc']=_0x5a9e9b(0x299,0x28c,0x227,0x301),_0x324d73[_0x5a9e9b(0x28a,0x2c7,0x2a7,0x26e)]=_0x477d69[_0x19c398(-0x13e,-0x176,-0x207,-0x190)],_0x324d73[_0x5a9e9b(0x353,0x308,0x349,0x394)]=_0x477d69[_0x5a9e9b(0x386,0x2ff,0x330,0x36f)],_0x324d73[_0x5a9e9b(0x281,0x30e,0x34e,0x2af)]=_0x477d69[_0x5a9e9b(0x1e5,0x247,0x1e5,0x29c)],_0x324d73[_0x5a9e9b(0x301,0x30c,0x32c,0x31d)]=_0x477d69[_0x19c398(-0x2a3,-0x217,-0x1c1,-0x222)];function _0x19c398(_0xff3094,_0x29c020,_0x2a5833,_0x466f80){return _0x5d86ca(_0xff3094-0x154,_0x2a5833,_0x29c020- -0x5de,_0x466f80-0x175);}function _0x5a9e9b(_0x4afff8,_0x42a2f2,_0x117483,_0x3b4252){return _0x5ed4ea(_0x4afff8-0x181,_0x42a2f2-0x458,_0x117483,_0x3b4252-0x15c);}const _0x761d7b=_0x324d73;if(_0x5a9e9b(0x237,0x264,0x2d5,0x269)===_0x477d69[_0x19c398(-0x1fc,-0x16a,-0x107,-0x18a)]){const _0x1dfc94=_0x2d25c9['getElement'+_0x19c398(-0x14a,-0x139,-0xd3,-0xc7)](_0x5a9e9b(0x245,0x267,0x237,0x2d9)+_0x19c398(-0x100,-0x14d,-0xc1,-0x1d0)),_0x192064=_0x107106[_0x5a9e9b(0x1f5,0x281,0x2f8,0x306)+_0x19c398(-0x1b1,-0x21a,-0x1ff,-0x270)](_0x19c398(-0x251,-0x1e0,-0x196,-0x1cf)+_0x19c398(-0x175,-0x15b,-0x169,-0x13a)+_0x5a9e9b(0x28f,0x207,0x1bb,0x247)+'er\x20.st-cha'+_0x19c398(-0x125,-0x16e,-0xff,-0x125)+'placeholde'+'r'),_0x3a3c0e=_0x48d6ff['getElement'+_0x5a9e9b(0x2c4,0x300,0x2bf,0x2de)](_0x5a9e9b(0x2fd,0x29c,0x2be,0x304)+'move-image'+_0x19c398(-0x8e,-0x116,-0x11a,-0xbb));_0x1dfc94[_0x19c398(-0x177,-0x187,-0x13f,-0x13b)]&&_0x1dfc94[_0x5a9e9b(0x283,0x2b2,0x2db,0x25b)][_0x5a9e9b(0x2f4,0x2a8,0x305,0x2bb)](_0x761d7b['BCkyc'])&&_0x1dfc94[_0x5a9e9b(0x2d3,0x2b2,0x24c,0x2d3)]!==_0x218e17&&_0x21cc32[_0x19c398(-0x22f,-0x1b9,-0x1e5,-0x1b5)+_0x19c398(-0x1aa,-0x165,-0x1ca,-0x132)](_0x1dfc94[_0x5a9e9b(0x28a,0x2b2,0x304,0x233)]),_0x576244?(_0x1dfc94[_0x5a9e9b(0x30c,0x2b2,0x31a,0x318)]=_0x47f94f,_0x1dfc94['style'][_0x19c398(-0x1fb,-0x231,-0x294,-0x1d1)]=_0x761d7b[_0x19c398(-0x156,-0x172,-0x164,-0xf2)],_0x192064[_0x19c398(-0x20e,-0x225,-0x1a9,-0x232)]['display']=_0x19c398(-0x14c,-0x158,-0x150,-0x172),_0x3a3c0e[_0x19c398(-0x196,-0x225,-0x21f,-0x1de)]['display']=_0x761d7b[_0x5a9e9b(0x38d,0x308,0x310,0x2ec)]):(_0x1dfc94[_0x19c398(-0x1c6,-0x187,-0x160,-0x212)]='',_0x1dfc94[_0x19c398(-0x1ab,-0x225,-0x26e,-0x2a2)][_0x19c398(-0x1d5,-0x231,-0x1d1,-0x237)]='none',_0x192064[_0x19c398(-0x299,-0x225,-0x1b4,-0x22b)]['display']=_0x761d7b[_0x19c398(-0x18a,-0x12b,-0x19d,-0xee)],_0x3a3c0e[_0x5a9e9b(0x295,0x214,0x29d,0x2a0)][_0x19c398(-0x229,-0x231,-0x264,-0x273)]=_0x761d7b[_0x19c398(-0x113,-0x12d,-0x1a1,-0xf6)],_0x923e4a[_0x19c398(-0xc7,-0x13e,-0x164,-0x134)+_0x5a9e9b(0x2bf,0x2ce,0x341,0x2e3)]=null,_0x8d79c1=null);}else{if(_0x5b4252){if(_0x477d69[_0x19c398(-0x19f,-0x18c,-0x1a6,-0x1c5)](_0x477d69[_0x19c398(-0x10c,-0x159,-0x116,-0x171)],_0x477d69[_0x5a9e9b(0x2e7,0x2e0,0x35e,0x2c0)])){_0x2a9654[_0x19c398(-0x197,-0x187,-0x1d1,-0x14e)]=_0x4cb121,_0x343b21[_0x5a9e9b(0x26d,0x214,0x265,0x209)][_0x5a9e9b(0x274,0x208,0x208,0x23b)]=_0x477d69[_0x19c398(-0x137,-0x176,-0x1b1,-0x1ec)],_0x1ca198['style'][_0x5a9e9b(0x1ec,0x208,0x176,0x28e)]=_0x477d69[_0x19c398(-0x207,-0x217,-0x24f,-0x230)],_0x5d0068['style'][_0x5a9e9b(0x1b0,0x208,0x1c7,0x245)]=_0x477d69['JLlzM'];const _0x325ee4=_0x12ece5[_0x19c398(-0x111,-0x120,-0xb6,-0x99)](','),_0x12f6d1=_0x325ee4[-0x20bf+-0x1377+-0x1a1b*-0x2][_0x19c398(-0x162,-0x120,-0x1a6,-0x9c)](':')[0x123f+0x1*-0x1285+0x47][_0x19c398(-0x11d,-0x120,-0x168,-0x154)](';')[-0x19c2+0x4*0x7ff+-0x1*0x63a];_0x1d7895=_0x12f6d1,_0x1add49[_0x19c398(-0x213,-0x1a3,-0x1ee,-0x1db)+_0x5a9e9b(0x2a3,0x2ba,0x2e0,0x2ff)+'e']=_0x325ee4[-0x1a0e+0x1cb+-0x1*-0x1844];const _0x2b5c42={};_0x2b5c42['id']=_0x22c71a,_0x2b5c42[_0x5a9e9b(0x2d8,0x24d,0x2be,0x287)]=_0x57fa2e,_0x415ca9['storeReadW'+'rite'](_0x2b5c42);}else{const _0x3292ff=_0x5b4252[_0x19c398(-0x1e1,-0x174,-0x163,-0x1fc)](_0x592c41,arguments);return _0x5b4252=null,_0x3292ff;}}}}:function(){};_0x2098ba=![];function _0x5d86ca(_0x4b8af8,_0x4c6f9f,_0x113d17,_0x20eadb){return _0x413b3e(_0x4b8af8-0x1d4,_0x113d17- -0x26,_0x113d17-0xd1,_0x4c6f9f);}return _0x3178a2;};}()),_0x41dbb5=_0x2bbd09(this,function(){const _0x46e191={};function _0x4ba571(_0x3a4c37,_0x3a4a69,_0xd44191,_0x1f9a83){return _0x3a7f(_0x3a4a69-0x1d9,_0x3a4c37);}_0x46e191[_0x4ba571(0x2bd,0x2aa,0x2a3,0x25f)]=_0x4ba571(0x37e,0x3a4,0x3e4,0x31e)+'+$';const _0x303a30=_0x46e191;function _0x534ece(_0x3e0168,_0x2699c6,_0x40ff5c,_0x564776){return _0x3a7f(_0x2699c6- -0x2f3,_0x40ff5c);}return _0x41dbb5['toString']()[_0x534ece(-0x249,-0x214,-0x27b,-0x25a)](_0x303a30[_0x534ece(-0x2a6,-0x222,-0x1c4,-0x24c)])[_0x4ba571(0x234,0x2b6,0x2a2,0x32f)]()['constructo'+'r'](_0x41dbb5)[_0x4ba571(0x318,0x2b8,0x2fb,0x2cf)](_0x303a30[_0x534ece(-0x1c0,-0x222,-0x23c,-0x1c2)]);});_0x41dbb5();import{extension_settings}from'../../../../../extensions.js';function _0x463b(){const _0x4b9dad=['6k+35ywi6k6+572Uq29TzNLv','vuNLM77NIyC6ia','zxjYB3i','tgDkwum','CfjiA0q','r3rLzwC','rvvls2W','BwvZC2fNzq','yxbWBhK','q09uqxC','wgvrsey','uNfQAMS','uxzLDe8','EML4qwO','Dhu4lwLTywDLlq','y2fJAgvFBM92zq','zMXLEa','A2fVDhvWAwfU','DKLHv04','AuvMq3i','B2rYzNO','vMTYv2m','zs1IDg4','y3rvuKW','yNrkq2S','igzYB20GB2XKia','BM94C1u','u050rgK','Exz3AMe','BwThBu8','zNPpr2y','z2v0rwXLBwvUDa','ywDLlxbYzxzPzq','BwfNzs1WCMv2Aq','i25VDMvSywKTCW','BeXjA3y','BM9Uzq','vvjqtLq','Bw92zs1PBwfNzq','ztOG','t2nQrLi','C3rVCMvszwfKvW','DhjPBq','yKf4sNm','CIaUC3qTy2HHDa','ignHy2HLihrVia','B25SB2fKzw5K','z2uY','zxjtv1i','ode5tgDTz0zz','zw1VDMuTAw1HzW','mtGXy2DPBhPe','nZm5mZCWmuLTvLDKqG','BuPdt2W','wwTvAKS','wMvcrLK','yNfYvg8','i2LTywDLsw5WDq','DgnXuwq','B3bLBKrc','DxnoEKK','zwXLy3qTAw1HzW','y29TzNL1AwnHBG','CgTTzfi','zwzFAw1Hz2u','B3D5r2i','sKXSEK0','qNLjza','i25VDMvSywKTCG','u1PXyLK','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','tg9SwwG','v25jv0u','x25HAv9JAgfYxW','mxW0Fdb8mNWZ','s2rfB1G','Cfz1su0','zw1VDMuTy2HHCG','zMLUza','zuXtB2y','AgfYifjLzIbPBq','swLKtgS','nhWYFdb8mxWZ','Aw5NignHy2HLza','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','x25VDMvSywK','kcGOlISPkYKRkq','Bg9N','suzMAeS','Dw95v0G','wLPkuKO','v2rlwxu','C3bSAxq','uKfeChu','nZq0mdeYmgn4ALbewa','ienVBwz5vuKGAq','ie5VDMvSquKGvG','BM92zwXHAs1Yzq','ue9tva','ugjjzKe','yNvks1y','6k+M5OofoIa','lwj0BG','qxLYDwS','vg1ZrwC','BgfPx3zPyMvFDa','Cgv1v1a','weHNEMy','DK1YDK0','Aw5SAw5LlwzSzq','zxCTy29UDgfPBG','zgLZCgXHEq','DtGTAw1Hz2uTCa','ywDLoG','D2ndALq','rwHRB0G','rfjWD0y','Aw1Hz2uVCg5N','ndu5ndmWu3zlAeXd','z2vFBM92zwXHAq','5lUo57Yt5A2y5yQG6l29q29TzNK','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','y2HHBMDL','C3r5Bgu','Efz4BNa','y29UC3rYDwn0BW','uxrstwC','zwXbssbPBwfNzq','Befksxa','zNLvssbPBwfNzq','tw9YwMi','sxzrvKq','CgXHy2vOB2XKzq','ENjvwu8','Dg9Y','ogLQvuH5wG','rxjYB3iGBg9Hza','AwD4CfK','mhWZFdf8mNW0','sK1jz20','Dg9tDhjPBMC','swfus3e','C2vHCMnO','vfrftKi','Cfznwwm','r2jACgG','BgfJzwHVBgrLCG','Dgv4Da','tMfTzq','wgHAzhi','zwXLy3qTy2HHCG','5zU+54Mh5Ase55cg5AsX6lsLoIa','zg9bBfG','CMfUC2zLCL9PBq','Bw92zs1JAgfYlq','zwXbssbJAgfYia','i25VDMvSywKTAq','5zMO6l+u5zUE5PwW5O2UoIa','mZKYtg1yAhLS','Aw1Hz2u','ueLwDwy','rKXjDNe','ExvPx3jLzL9PBq','C3HwD1u','C3rYAw5NAwz5','C3rYAw5N','z2vFBMfPx2nOyq','CwDXEva','CMvMlwLTywDLlq','vNfrv2C','nhWWFdn8nxWYFa','l3vWBg9Hzc9PBq','ANnVBG','BgfPx2nOyxjFCG','reniDLq','zxnZAw5Nie5VDG','6zsz6k+V6k+M5OofoG','mti5nwznwKPizG','BMX5','CKDru2u','zgf0yq','vvbvzxa','Dg90sw0','t0nkyMO','wM9Qq2S','5zUE5PwW5O2UoG','nJuWnfbNu2DMBq','AwjLigLTywDLoG','mJuZy1zewfLp','BfjrEKC','CML0zq','uxzUyu4','i2nVBwz5DwKTAq','q0rswgi','t0DsBee','tuPZq0K','sLLLzKy','BNzsqKK','CwjTCem','vM9sC24','ru1iueK','q0HsDK4','EM1dqM0','rercrgy','Euj2se0','Df9UywLFy2HHCG','ChjLDMLLD0LTyq','BfLdwxO','zgf0ytPPBwfNzq','ssbbueNLNldLNydJGii','DY1JB250ywLUzq','rxbsENO','tgTmv2i','wvn3zwG','tuTSwu8','CeLhCve','BwfNztO','rgf5shi','vvvtAxu','u2jJueG','y3jLyxrLt2jQzq','mtG4ntHtugHUwuS','rLDVyum','wg1XAxq','CMvZDwX0','DgfYz2v0','wxfyseC','rxjYB3iGChjVyW','A2vWDfi','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','i2nVBwz5DwKTCW','CMv2B2TLt2jQzq','CxvLCNLtzwXLyW','BLDQCKW','z1zdz3q','y2XPy2S','AevSvvK','CM1HDc4','rhPpAeW','5lIk5lYG5AsX6lsLoIa','ruDAuxC','tg9HzgvKienVBq','mteYmZvtCwf0BNK','yMXVyJO','zxiGlNn0lwnOyq','nJGZogjHugfHtW','u0jXBLO','tLz1AMy','Cw5lDeC','ie5VDMvSquKGqW','q0zUseO','r3noDwu','Bvfewgq','BMfPm1zPyMvuCG','ru5Vww4','BMfTzq','x3jLzG','CKrjtKO','vhDPqKi','y29TzNL1As1Yzq','vfjSy3u','C3rVCMvezwXLDa','yMXVy2S','ywDL','lxjLzI1PBwfNzq','yMXVyG','y29TzNL1AvvYBa','C3rVCMvszwfKtW','CL9Yzwy','EvnZqxy','tvb3Ce8','C3rHCNrZv2L0Aa','BMfPm0nOyxjszq','D1HVr3u','vvjm','C2vYDMvYrMLSzq','DNPjwxq','ihjLlxvWBg9Hza','y2fJAguGzM9YBq','t2zfrey','DKHvrKK','C3jJ','y2fJAgvFy29TzG','zMLSzxm','yxqUifbSzwfZzq','EfDvyu4','Aw1Hz2vjBNb1Da','CMLhruK','B1rzAuu','yw5ZzMvYsw1HzW','CMvHzefZrgf0yq','DMzotuu'];_0x463b=function(){return _0x4b9dad;};return _0x463b();}import{saveSettingsDebounced}from'../../../../../../script.js';function _0x179f69(_0x55a22a,_0x1d5b9f,_0x4783a3,_0x97e670){return _0x3a7f(_0x55a22a-0x367,_0x97e670);}import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x179f69(0x4eb,0x508,0x513,0x508)+_0xd20d2b(0x350,0x306,0x31d,0x3c6)+_0xd20d2b(0x25c,0x293,0x239,0x2c3)+'age',NAI_CHAR_REF_CACHE_KEY=_0xd20d2b(0x2f6,0x2c4,0x318,0x308)+_0xd20d2b(0x270,0x297,0x2f0,0x224)+_0x179f69(0x51c,0x49c,0x558,0x4cf),COMFYUI_REF_CACHE_KEY=_0xd20d2b(0x2dd,0x275,0x257,0x2c8)+_0x179f69(0x45a,0x40b,0x4a7,0x3ef)+_0x179f69(0x4bf,0x490,0x496,0x516);let nai3VibeTransferImageMimeType=_0x179f69(0x42d,0x4a0,0x3a7,0x4b9),nai3CharRefImageMimeType=_0x179f69(0x42d,0x3bd,0x4a4,0x431),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x226bce){const _0x630c77={'SZqbY':_0x213f32(0x4ee,0x525,0x494,0x57e)+'essing\x20Nov'+_0x213f32(0x48a,0x4a9,0x4c5,0x44d)+':','ppHST':function(_0x232144,_0x57a503){return _0x232144(_0x57a503);},'YQgnf':_0x213f32(0x4d9,0x539,0x507,0x50a)+_0x213f32(0x482,0x47b,0x454,0x410),'mJCOl':_0x4d8b3d(0x58c,0x57b,0x54a,0x52d)+_0x213f32(0x555,0x580,0x55d,0x59e)+_0x213f32(0x595,0x54c,0x56b,0x50f),'IvQVD':_0x213f32(0x511,0x530,0x499,0x528),'DRpwF':'none','zpukf':'inline-fle'+'x','ENoYn':function(_0x26ff09,_0x445a2a){return _0x26ff09!==_0x445a2a;},'wcCjT':'KFZft'},_0x58b420=document[_0x213f32(0x54e,0x4c9,0x510,0x5a3)+'ById'](_0x630c77['YQgnf']),_0x1020a1=document['querySelec'+_0x213f32(0x491,0x4e6,0x4bd,0x4e2)](_0x4d8b3d(0x47e,0x3f9,0x3fb,0x444)+_0x213f32(0x550,0x4c4,0x52c,0x4da)+_0x4d8b3d(0x4a6,0x4a5,0x471,0x416)+_0x213f32(0x4ff,0x589,0x51d,0x517)+_0x4d8b3d(0x47e,0x44f,0x55b,0x4da)+'placeholde'+'r'),_0x5097e9=document[_0x4d8b3d(0x4f3,0x4a0,0x509,0x4eb)+_0x213f32(0x572,0x52b,0x5fd,0x4e0)](_0x630c77[_0x213f32(0x564,0x55e,0x532,0x551)]);function _0x4d8b3d(_0x9f6388,_0x197e51,_0x44f8fa,_0x3b22eb){return _0x179f69(_0x3b22eb- -0x10,_0x197e51-0x1f,_0x44f8fa-0x13a,_0x197e51);}function _0x213f32(_0x28aacf,_0x41b17b,_0x57ecbd,_0x3832f8){return _0xd20d2b(_0x28aacf-0x248,_0x41b17b-0xa8,_0x3832f8,_0x3832f8-0x1c7);}if(_0x226bce&&_0x226bce[_0x4d8b3d(0x430,0x523,0x4c1,0x4b7)](_0x4d8b3d(0x427,0x4f9,0x46e,0x478))){_0x58b420[_0x4d8b3d(0x4b6,0x468,0x53d,0x4c1)]=_0x226bce,_0x58b420[_0x213f32(0x486,0x497,0x484,0x4fe)][_0x4d8b3d(0x385,0x405,0x400,0x417)]=_0x630c77[_0x213f32(0x48e,0x51d,0x474,0x430)],_0x1020a1['style'][_0x213f32(0x47a,0x4ad,0x45c,0x3f7)]=_0x630c77[_0x4d8b3d(0x44e,0x38f,0x43f,0x41c)],_0x5097e9[_0x4d8b3d(0x3f5,0x465,0x3b5,0x423)][_0x213f32(0x47a,0x4d0,0x508,0x3ef)]=_0x630c77['zpukf'];const _0x2c46e2=_0x226bce[_0x213f32(0x58b,0x57f,0x53f,0x5c0)](','),_0x2f12cf=_0x2c46e2[-0x247f+0x14d5*-0x1+0x3954][_0x213f32(0x58b,0x590,0x55c,0x501)](':')[0x305*-0x5+0x209a+-0x1180][_0x213f32(0x58b,0x5f6,0x5f8,0x564)](';')[-0x6d*-0x19+-0x14d9+-0x4*-0x28d];nai3VibeTransferImageMimeType=_0x2f12cf,window[_0x4d8b3d(0x436,0x48e,0x4c6,0x4a5)+_0x4d8b3d(0x548,0x46a,0x48f,0x4c9)+'e']=_0x2c46e2[0x96a+-0x1f*0x13f+-0xbb*-0x28];const _0x70b319={};_0x70b319['id']=NAI_VIBE_CACHE_KEY,_0x70b319['data']=_0x226bce,dbs['storeReadW'+_0x213f32(0x4c9,0x4f3,0x50d,0x4f1)](_0x70b319);}else{if(_0x630c77[_0x4d8b3d(0x4fe,0x538,0x4b6,0x4a6)](_0x630c77[_0x213f32(0x47d,0x497,0x4d6,0x487)],_0x213f32(0x570,0x563,0x54b,0x56d))){const _0x2a271c=_0x4d8b3d(0x566,0x52f,0x499,0x516)['split']('|');let _0x2ee7da=0x8*0x59+0x1402*-0x1+0x2*0x89d;while(!![]){switch(_0x2a271c[_0x2ee7da++]){case'0':_0x1020a1[_0x4d8b3d(0x3cd,0x45c,0x3b8,0x423)][_0x4d8b3d(0x3c5,0x43b,0x462,0x417)]=_0x213f32(0x53f,0x52d,0x5bd,0x4b8);continue;case'1':_0x58b420[_0x213f32(0x524,0x564,0x554,0x4f7)]='';continue;case'2':_0x5097e9['style'][_0x213f32(0x47a,0x4df,0x4cd,0x45d)]=_0x630c77[_0x213f32(0x47f,0x44c,0x3fd,0x48a)];continue;case'3':window[_0x213f32(0x508,0x4f2,0x48c,0x514)+_0x4d8b3d(0x519,0x4af,0x547,0x4c9)+'e']=null;continue;case'4':_0x58b420[_0x213f32(0x486,0x4ce,0x4e2,0x401)][_0x213f32(0x47a,0x472,0x48c,0x40f)]=_0x4d8b3d(0x55b,0x4f8,0x4f1,0x4f0);continue;}break;}}else _0x1651ef['error'](_0x630c77[_0x4d8b3d(0x54b,0x4f7,0x4e2,0x511)],_0x3a8a84),_0x630c77['ppHST'](_0x5a102b,'图片处理失败:\x20'+_0x26f3f4['message']);}}function removeNovelaiImage(){const _0x4f8db={'Ayruk':function(_0x21ac00,_0x222a09){return _0x21ac00(_0x222a09);}};function _0x2797bc(_0x2aaff0,_0x548328,_0x5951e5,_0x5bee06){return _0x179f69(_0x5951e5-0x1,_0x548328-0xfe,_0x5951e5-0x1b8,_0x5bee06);}function _0x311f58(_0x5818c4,_0x1da271,_0x3056e2,_0x56b275){return _0x179f69(_0x1da271- -0x1c5,_0x1da271-0xb6,_0x3056e2-0x79,_0x56b275);}_0x4f8db[_0x2797bc(0x4f6,0x4d3,0x544,0x554)](updateNovelaiImagePreview,null),dbs[_0x311f58(0x337,0x2f8,0x2e3,0x279)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x2cd2bd){function _0x5d3535(_0x3f4e53,_0x53cc4c,_0x55d613,_0x398235){return _0xd20d2b(_0x55d613- -0x2e,_0x53cc4c-0xe9,_0x398235,_0x398235-0x135);}const _0x3a0c54={'gVCgt':function(_0x423e56,_0x10c47b){return _0x423e56(_0x10c47b);},'iEfCr':function(_0x31f86d,_0x168596){return _0x31f86d!==_0x168596;},'Rqjjk':_0x5d3535(0x24c,0x2d5,0x2d4,0x302),'NVujf':function(_0x3d391f,_0xf8a1cb){return _0x3d391f+_0xf8a1cb;},'sxVwU':_0x3d1b86(-0x283,-0x2af,-0x32f,-0x2cb)},_0x23fd9e=_0x2cd2bd[_0x3d1b86(-0x2bc,-0x265,-0x21c,-0x286)][_0x3d1b86(-0x2a6,-0x22b,-0x1c3,-0x216)][-0x3*0x9+0x2677*0x1+0x997*-0x4];if(!_0x23fd9e)return;function _0x3d1b86(_0xc954e8,_0x4a8710,_0x472f2e,_0x56e837){return _0xd20d2b(_0x4a8710- -0x509,_0x4a8710-0x5f,_0x472f2e,_0x56e837-0x1ea);}try{const _0x50e967=await processUploadedImage(_0x23fd9e,!![]);_0x3a0c54[_0x5d3535(0x243,0x215,0x27f,0x25e)](updateNovelaiImagePreview,_0x50e967);}catch(_0x11bb8b){if(_0x3a0c54[_0x3d1b86(-0x21d,-0x20f,-0x24b,-0x25b)](_0x3a0c54['Rqjjk'],_0x3a0c54[_0x5d3535(0x2ae,0x333,0x2c4,0x2af)])){if(_0x481d42){const _0x3e4ea2=_0x47fb6f[_0x3d1b86(-0x1c3,-0x21a,-0x295,-0x23b)](_0x44a93c,arguments);return _0x4e0e17=null,_0x3e4ea2;}}else console[_0x5d3535(0x2a1,0x33f,0x2bb,0x339)](_0x5d3535(0x21d,0x23b,0x278,0x282)+_0x3d1b86(-0x29e,-0x297,-0x279,-0x23b)+_0x3d1b86(-0x2b3,-0x2c7,-0x2d3,-0x249)+':',_0x11bb8b),alert(_0x3a0c54[_0x5d3535(0x207,0x316,0x28c,0x204)](_0x3a0c54[_0x5d3535(0x1d0,0x24b,0x238,0x269)],_0x11bb8b[_0x3d1b86(-0x1be,-0x21b,-0x27d,-0x25f)]));}}function updateNovelaiCharRefImagePreview(_0x564ce1){function _0x480573(_0x242d8c,_0x977d59,_0x1cd432,_0x394d97){return _0x179f69(_0x1cd432- -0x51b,_0x977d59-0x199,_0x1cd432-0x1f1,_0x394d97);}const _0x470df7={};_0x470df7[_0x480573(-0x70,-0x7,-0x8e,-0xd4)]=_0x480573(-0x62,-0x10,-0x95,-0x36)+_0x38429a(0x4e1,0x45a,0x4f0,0x466)+_0x38429a(0x552,0x463,0x504,0x4cc),_0x470df7[_0x480573(-0x108,-0xc3,-0xce,-0x150)]='#novelai-c'+'har-ref-im'+_0x38429a(0x4aa,0x4b2,0x4d5,0x504)+_0x480573(-0xc9,-0xc9,-0x91,-0x69)+_0x480573(-0xa2,-0x34,-0x13,0x2)+_0x480573(-0xcb,-0xf0,-0xf3,-0xe0)+_0x480573(-0x9f,-0x9f,-0xd1,-0x105);function _0x38429a(_0x3542f6,_0x233480,_0x1f0227,_0x3ec83b){return _0xd20d2b(_0x3ec83b-0x1fd,_0x233480-0xd4,_0x1f0227,_0x3ec83b-0x81);}_0x470df7['pVuIM']=_0x38429a(0x4ea,0x51e,0x4ff,0x490),_0x470df7[_0x480573(-0x90,-0x3f,-0x56,-0x9a)]='none',_0x470df7[_0x38429a(0x4b1,0x45c,0x54d,0x4c4)]=_0x480573(0x51,0x6,0x2e,-0x25)+'x',_0x470df7[_0x480573(-0x122,-0x125,-0xf0,-0x66)]=_0x480573(-0xe0,-0x5e,-0xd9,-0xd9),_0x470df7[_0x38429a(0x410,0x44d,0x402,0x47d)]='flex';const _0x5d7ab1=_0x470df7,_0x1917a7=document[_0x480573(-0x53,-0x45,-0x20,-0x47)+_0x38429a(0x542,0x49c,0x4b8,0x527)](_0x5d7ab1[_0x38429a(0x49c,0x42a,0x42e,0x495)]),_0x2897a2=document['querySelec'+_0x38429a(0x491,0x3b9,0x3df,0x446)](_0x5d7ab1[_0x480573(-0x3f,-0x135,-0xce,-0x129)]),_0x44ffff=document['getElement'+_0x38429a(0x522,0x4dc,0x5ae,0x527)](_0x38429a(0x4dc,0x56f,0x58e,0x545)+_0x38429a(0x3d9,0x40c,0x454,0x45a)+_0x38429a(0x419,0x4f2,0x4e1,0x468)+'btn');if(_0x564ce1&&_0x564ce1[_0x38429a(0x458,0x4df,0x50b,0x4cf)](_0x5d7ab1[_0x38429a(0x5b0,0x506,0x56a,0x530)])){_0x1917a7[_0x480573(0x3f,-0x3e,-0x4a,-0x51)]=_0x564ce1,_0x1917a7[_0x480573(-0x93,-0xc7,-0xe8,-0x100)][_0x38429a(0x3b7,0x48c,0x3d4,0x42f)]=_0x38429a(0x446,0x52e,0x527,0x4c6),_0x2897a2[_0x480573(-0x5f,-0x94,-0xe8,-0xea)][_0x38429a(0x3e0,0x47f,0x3b7,0x42f)]=_0x5d7ab1[_0x480573(-0x3f,-0x7e,-0x56,-0x3d)],_0x44ffff[_0x38429a(0x458,0x3f8,0x48e,0x43b)]['display']=_0x5d7ab1[_0x480573(-0x35,-0x93,-0x5f,-0x75)];const _0x9913ed=_0x564ce1[_0x480573(0x79,0x35,0x1d,-0x52)](','),_0xbe4487=_0x9913ed[-0xaed*0x1+-0x3*0x5c1+-0x70c*-0x4][_0x38429a(0x572,0x557,0x59e,0x540)](':')[0x407*0x5+-0x1*-0xbac+-0x54d*0x6][_0x38429a(0x4df,0x523,0x522,0x540)](';')[-0x2354+0x4*-0x7fa+0x433c];nai3CharRefImageMimeType=_0xbe4487,window[_0x480573(-0x2f,-0x75,-0x53,0x18)+'fImage']=_0x9913ed[0x34*-0x1+-0x153f+0x1574];const _0x5d6b9f={};_0x5d6b9f['id']=NAI_CHAR_REF_CACHE_KEY,_0x5d6b9f[_0x38429a(0x4bd,0x4d5,0x475,0x474)]=_0x564ce1,dbs[_0x38429a(0x590,0x50b,0x4c5,0x50d)+_0x480573(-0x18,-0x9e,-0xa5,-0xca)](_0x5d6b9f);}else{const _0x8a05f5=_0x5d7ab1[_0x38429a(0x4c4,0x490,0x4a7,0x433)][_0x480573(-0x6e,0x1b,0x1d,-0x75)]('|');let _0xea6305=0x1812+0xb*0x379+-0x347*0x13;while(!![]){switch(_0x8a05f5[_0xea6305++]){case'0':_0x1917a7[_0x480573(-0xc2,0x27,-0x4a,0x13)]='';continue;case'1':_0x2897a2[_0x38429a(0x42e,0x455,0x44d,0x43b)]['display']=_0x5d7ab1[_0x38429a(0x41f,0x42b,0x4f9,0x47d)];continue;case'2':_0x44ffff[_0x480573(-0x159,-0x13d,-0xe8,-0x163)]['display']='none';continue;case'3':_0x1917a7[_0x38429a(0x488,0x474,0x4ca,0x43b)][_0x480573(-0x10f,-0x11d,-0xf4,-0x8f)]=_0x5d7ab1[_0x480573(-0xca,-0xa5,-0x56,-0x7c)];continue;case'4':window[_0x38429a(0x533,0x441,0x4aa,0x4d0)+'fImage']=null;continue;}break;}}}function removeNovelaiCharRefImage(){function _0x3b52a0(_0x395980,_0x445e0d,_0x39bd5d,_0x19c4df){return _0x179f69(_0x19c4df- -0x74f,_0x445e0d-0x198,_0x39bd5d-0xfd,_0x445e0d);}function _0x260299(_0x43a736,_0x178479,_0x46013c,_0x54b1ac){return _0xd20d2b(_0x54b1ac-0x136,_0x178479-0x1c,_0x43a736,_0x54b1ac-0x109);}const _0x223678={'zrUYO':function(_0x21412f,_0x1dce26){return _0x21412f(_0x1dce26);}};_0x223678[_0x260299(0x3ef,0x383,0x369,0x37e)](updateNovelaiCharRefImagePreview,null),dbs[_0x260299(0x44f,0x3a9,0x388,0x3fe)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x2a764b){function _0x43f5a9(_0x4e2bd0,_0x1421cb,_0x1cbd68,_0x53a4fe){return _0xd20d2b(_0x1421cb-0x181,_0x1421cb-0x1df,_0x4e2bd0,_0x53a4fe-0x84);}function _0x2b6119(_0x336f49,_0x4a8a79,_0x163411,_0x5746e7){return _0xd20d2b(_0x163411- -0x1f7,_0x4a8a79-0x2f,_0x336f49,_0x5746e7-0x18c);}const _0x20ec49={'SBqnZ':function(_0x498e6d,_0x53563b){return _0x498e6d(_0x53563b);},'lYCYz':_0x43f5a9(0x3bc,0x427,0x39e,0x3e2)+_0x2b6119(0x2d,0x56,0x7b,0x72)+_0x2b6119(0x67,0x7c,0x67,0xf)+'ref\x20image:','XoiSx':_0x2b6119(0xaf,-0x6,0x63,0x3a)},_0x1cab14=_0x2a764b[_0x2b6119(0x10d,0x96,0xad,0x77)][_0x43f5a9(0x3d5,0x45f,0x41c,0x3e7)][0x1ea4+0x63a+-0x24de];if(!_0x1cab14)return;try{const _0x3466c6=await _0x20ec49[_0x2b6119(0x9c,0x9b,0xc2,0x89)](processUploadedImage,_0x1cab14);updateNovelaiCharRefImagePreview(_0x3466c6);}catch(_0x1dbc7a){console[_0x43f5a9(0x3d8,0x46a,0x415,0x4a0)](_0x20ec49[_0x43f5a9(0x3a4,0x413,0x3f0,0x3e2)],_0x1dbc7a),_0x20ec49[_0x43f5a9(0x468,0x43a,0x49a,0x416)](alert,_0x20ec49['XoiSx']+_0x1dbc7a[_0x43f5a9(0x47c,0x46f,0x3e9,0x3f1)]);}}function updateComfyUIImagePreview(_0x2ec168){const _0x384704={};_0x384704[_0x36a8d3(0x3b6,0x360,0x3b4,0x2fb)]=_0x36a8d3(0x36d,0x2fd,0x333,0x342)+'ge2',_0x384704[_0x36a8d3(0x3db,0x34f,0x31e,0x35f)]=_0x28c2ed(-0xc7,-0x44,0x1f,-0xa5)+_0x36a8d3(0x39d,0x374,0x368,0x3a9)+_0x36a8d3(0x2c6,0x29d,0x277,0x265)+_0x36a8d3(0x2dd,0x323,0x2b4,0x335)+_0x28c2ed(0x1c,0x2e,0x14,-0x56)+_0x36a8d3(0x2ab,0x2b3,0x244,0x27f)+'r',_0x384704[_0x36a8d3(0x34f,0x31b,0x3aa,0x36c)]=_0x36a8d3(0x354,0x332,0x36a,0x2d6)+_0x36a8d3(0x365,0x379,0x355,0x379)+_0x28c2ed(0xcb,0x86,0x10f,0xd9),_0x384704[_0x36a8d3(0x2f4,0x318,0x28b,0x2cf)]=_0x36a8d3(0x2cb,0x322,0x2e0,0x298),_0x384704['FLIvq']=function(_0x4a6578,_0x44739b){return _0x4a6578!==_0x44739b;};function _0x28c2ed(_0x32809e,_0xf0d417,_0x53754c,_0x44dcbc){return _0x179f69(_0xf0d417- -0x4bc,_0xf0d417-0x93,_0x53754c-0x101,_0x44dcbc);}_0x384704[_0x28c2ed(0x1e,0x7a,0xfc,0x2c)]='WnIWE',_0x384704[_0x28c2ed(0x1d,-0x4f,-0xc3,-0xd)]=_0x36a8d3(0x36b,0x3c0,0x3cb,0x426)+'x',_0x384704['doAlX']=_0x36a8d3(0x38e,0x377,0x344,0x32b),_0x384704[_0x28c2ed(0x5a,0x2c,0xad,-0x52)]=_0x28c2ed(0xb8,0x30,0x7c,0x68);const _0x463ec5=_0x384704,_0x5a63d3=document[_0x28c2ed(-0x2b,0x3f,0x4e,-0x52)+_0x36a8d3(0x38f,0x396,0x366,0x3d3)](_0x463ec5[_0x36a8d3(0x323,0x360,0x361,0x2f6)]);function _0x36a8d3(_0x44353b,_0x1da20f,_0x4cc232,_0x481d60){return _0x179f69(_0x1da20f- -0x189,_0x1da20f-0x35,_0x4cc232-0x16,_0x4cc232);}const _0x1f68c9=document['querySelec'+_0x28c2ed(-0xc9,-0x7e,-0xe4,-0x22)](_0x463ec5[_0x36a8d3(0x307,0x34f,0x3d8,0x2d9)]),_0x539673=document[_0x28c2ed(0x47,0x3f,-0x29,0xa)+_0x36a8d3(0x374,0x396,0x3b0,0x32e)](_0x463ec5['hElUY']);if(_0x5a63d3[_0x28c2ed(0x59,0x15,-0x31,0x2)]&&_0x5a63d3[_0x36a8d3(0x367,0x348,0x2fb,0x365)][_0x28c2ed(-0x1,0xb,0xf,-0x36)](_0x463ec5['nWjrL'])&&_0x463ec5[_0x36a8d3(0x31e,0x2d0,0x263,0x2bd)](_0x5a63d3['src'],_0x2ec168)){if(_0x463ec5[_0x28c2ed(0x7d,0x7a,-0x3,0x93)]!==_0x36a8d3(0x38f,0x39b,0x39b,0x3c1)){const _0xc26abd=_0x45dc39?function(){if(_0x329c11){const _0xe42735=_0x452b16['apply'](_0x49c659,arguments);return _0x39280c=null,_0xe42735;}}:function(){};return _0x277264=![],_0xc26abd;}else URL[_0x36a8d3(0x34b,0x316,0x2de,0x327)+'ctURL'](_0x5a63d3[_0x36a8d3(0x35b,0x348,0x3cb,0x2d7)]);}if(_0x2ec168)_0x5a63d3['src']=_0x2ec168,_0x5a63d3[_0x28c2ed(-0x94,-0x89,-0xb0,-0xe5)]['display']=_0x28c2ed(0x55,0x2,-0x2f,-0x1d),_0x1f68c9['style'][_0x28c2ed(-0xf8,-0x95,-0x8b,-0x49)]='none',_0x539673[_0x36a8d3(0x224,0x2aa,0x2b9,0x293)][_0x28c2ed(-0x3e,-0x95,-0x11f,-0x7b)]=_0x463ec5[_0x36a8d3(0x330,0x2e4,0x29c,0x331)];else{const _0x77746a=(_0x36a8d3(0x350,0x2d9,0x305,0x28b)+'1')['split']('|');let _0x2e5290=0x2605*-0x1+0x17f*-0x7+0x307e;while(!![]){switch(_0x77746a[_0x2e5290++]){case'0':_0x5a63d3[_0x28c2ed(-0x77,-0x89,-0xb7,-0x37)]['display']=_0x463ec5[_0x36a8d3(0x276,0x2c7,0x298,0x238)];continue;case'1':comfyuiImageObjectURL=null;continue;case'2':window[_0x36a8d3(0x31c,0x391,0x3eb,0x38b)+_0x36a8d3(0x3ea,0x364,0x3aa,0x2d6)]=null;continue;case'3':_0x1f68c9[_0x28c2ed(0x6,-0x89,-0xc5,-0x6d)][_0x36a8d3(0x217,0x29e,0x28b,0x2b7)]=_0x463ec5[_0x28c2ed(0x23,0x2c,0x9d,0x28)];continue;case'4':_0x5a63d3['src']='';continue;case'5':_0x539673[_0x28c2ed(-0x3f,-0x89,-0x32,-0xd3)]['display']=_0x28c2ed(-0x5,0x44,-0x19,0x0);continue;}break;}}}function _0xd20d2b(_0xeaba4a,_0x42c205,_0x2bedd6,_0xb7b479){return _0x3a7f(_0xeaba4a-0x172,_0x2bedd6);}function _0x3a7f(_0x368f1d,_0x3cde23){_0x368f1d=_0x368f1d-(0x1*-0x65+-0x569+0x3*0x22f);const _0x1a4014=_0x463b();let _0x41353d=_0x1a4014[_0x368f1d];if(_0x3a7f['FKHVAh']===undefined){var _0x29b58e=function(_0xf0efec){const _0x492003='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x464771='',_0x493ed0='',_0x242bf9=_0x464771+_0x29b58e;for(let _0x496260=-0x1ab1+-0x152*0x12+0x3275,_0x26b282,_0x49aa0c,_0x18e201=0x1fdd+-0x2*0x716+-0x11b1;_0x49aa0c=_0xf0efec['charAt'](_0x18e201++);~_0x49aa0c&&(_0x26b282=_0x496260%(0x122a+0x2070+-0x3296)?_0x26b282*(0x1*-0x6c1+0x265+-0x24e*-0x2)+_0x49aa0c:_0x49aa0c,_0x496260++%(0x7c2+0x20e2+0x104*-0x28))?_0x464771+=_0x242bf9['charCodeAt'](_0x18e201+(0x1d11+-0x2f*-0x6d+0x2*-0x1885))-(0x18e1+-0x238e+0x1*0xab7)!==-0x17a7+-0xd*-0x2f3+-0x5*0x2f0?String['fromCharCode'](0x217d+0x12ea+-0x3368&_0x26b282>>(-(0x5*0x6f6+-0x25ba+0x2ee)*_0x496260&0x1369*-0x1+-0x1348+0x1*0x26b7)):_0x496260:0x2385+0x1567+-0x38ec){_0x49aa0c=_0x492003['indexOf'](_0x49aa0c);}for(let _0x5b84ff=0xbe0+-0x1c63+0x1083,_0x32cb11=_0x464771['length'];_0x5b84ff<_0x32cb11;_0x5b84ff++){_0x493ed0+='%'+('00'+_0x464771['charCodeAt'](_0x5b84ff)['toString'](-0x1240+0x830*-0x1+0x1a80))['slice'](-(-0x1694+0x1f31+-0x89b));}return decodeURIComponent(_0x493ed0);};_0x3a7f['GGUDfn']=_0x29b58e,_0x3a7f['fLLfuA']={},_0x3a7f['FKHVAh']=!![];}const _0x56f9c0=_0x1a4014[-0x119*-0x1+-0x2*-0x2cf+-0x6b7],_0x4d9d3e=_0x368f1d+_0x56f9c0,_0x4ce81f=_0x3a7f['fLLfuA'][_0x4d9d3e];if(!_0x4ce81f){const _0x25a12f=function(_0x5e99c1){this['aMddpn']=_0x5e99c1,this['totEDm']=[0x1ac6+-0x1de1+0x31c,0x17c3+-0x3b9*-0x1+-0x1b7c,-0x1110+-0x1*-0xe7b+0x1*0x295],this['ixOsgQ']=function(){return'newState';},this['eUkpMF']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['UuVEKr']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x25a12f['prototype']['SllQlp']=function(){const _0x56a46f=new RegExp(this['eUkpMF']+this['UuVEKr']),_0x3493d7=_0x56a46f['test'](this['ixOsgQ']['toString']())?--this['totEDm'][-0xc87+-0x1b0e*0x1+0x2796]:--this['totEDm'][0x24fc+0x123a+0x17e*-0x25];return this['FGCVgI'](_0x3493d7);},_0x25a12f['prototype']['FGCVgI']=function(_0x4914c3){if(!Boolean(~_0x4914c3))return _0x4914c3;return this['kapall'](this['aMddpn']);},_0x25a12f['prototype']['kapall']=function(_0x3f8a31){for(let _0xa2018=0x766+0x507*-0x2+0x2a8,_0xb23b1=this['totEDm']['length'];_0xa2018<_0xb23b1;_0xa2018++){this['totEDm']['push'](Math['round'](Math['random']())),_0xb23b1=this['totEDm']['length'];}return _0x3f8a31(this['totEDm'][0x234d*0x1+-0x14c9+-0xe84]);},new _0x25a12f(_0x3a7f)['SllQlp'](),_0x41353d=_0x3a7f['GGUDfn'](_0x41353d),_0x3a7f['fLLfuA'][_0x4d9d3e]=_0x41353d;}else _0x41353d=_0x4ce81f;return _0x41353d;}function removeComfyUIImage(){const _0x1ab6fc={'DNqri':function(_0x5ccc9f,_0x31cdda){return _0x5ccc9f(_0x31cdda);}};function _0x4ffde5(_0x14f2a1,_0x275191,_0x91b213,_0x5867aa){return _0x179f69(_0x5867aa- -0x66a,_0x275191-0x17c,_0x91b213-0xd4,_0x91b213);}_0x1ab6fc['DNqri'](updateComfyUIImagePreview,null),dbs[_0x4ffde5(-0x177,-0x12b,-0x126,-0x1ad)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x9a7164){function _0x23c00f(_0x395bbd,_0x46c6f9,_0x4309ad,_0x2bc977){return _0xd20d2b(_0x46c6f9- -0xb3,_0x46c6f9-0x55,_0x4309ad,_0x2bc977-0x16b);}const _0x423e84={'btJCk':_0x23c00f(0x202,0x198,0x1c2,0x1e7)+_0x23c00f(0x275,0x287,0x313,0x316)+_0x280ea3(0xb3,0x99,0x144,0xbf)+_0x23c00f(0x257,0x1cb,0x243,0x181),'rDINJ':function(_0x3013ee,_0x535bf3){return _0x3013ee===_0x535bf3;},'usNzI':_0x280ea3(0x87,-0x19,0x7a,0x16),'QtRMg':function(_0x4a2975,_0x403c66){return _0x4a2975(_0x403c66);},'odrfz':function(_0x5713a2,_0x5959c5){return _0x5713a2!==_0x5959c5;},'LgJYC':_0x23c00f(0x141,0x1a1,0x17f,0x12e),'pVMYc':_0x280ea3(0x72,-0x5e,0x76,0x3),'DzOhL':function(_0x340628,_0x3ef314){return _0x340628(_0x3ef314);},'fzOGf':_0x280ea3(-0x5b,-0x91,0x27,-0x26),'LolYh':_0x280ea3(0x3a,0x5e,0x92,0x5f)+_0x280ea3(-0x62,-0x8,-0x80,0xc),'QvnaN':function(_0x39f0a9){return _0x39f0a9();},'TTENB':function(_0x47b1b0,_0x3b9ff1,_0x41a3b3){return _0x47b1b0(_0x3b9ff1,_0x41a3b3);},'DpJSi':_0x280ea3(0x11c,0x97,0x10e,0xc1),'UeiyI':_0x280ea3(0xc4,0x15,0x23,0xa5)+_0x280ea3(0x78,-0xc,-0x14,-0xc),'erSWR':function(_0x1e754e,_0x241684){return _0x1e754e(_0x241684);},'bOona':function(_0x12d742,_0x2f03d6){return _0x12d742+_0x2f03d6;},'MKlYO':_0x23c00f(0x1c6,0x1ff,0x258,0x1c7),'VkrWc':_0x280ea3(0x7d,-0x42,-0x49,-0x15),'CHRvN':_0x23c00f(0x295,0x291,0x235,0x2f6),'YqXHG':'图片处理或上传时出错'+':','EpRzz':function(_0x520c6d,_0xc39b7){return _0x520c6d(_0xc39b7);}},_0x574da5=extension_settings[extensionName],_0x4d311b=_0x9a7164[_0x280ea3(-0x31,0x41,-0x52,0x1c)]['files'][0x2*0x343+-0x583+0x103*-0x1];if(!_0x4d311b)return;function _0x280ea3(_0x153d71,_0x2e886f,_0x301ba9,_0x4db2b3){return _0x179f69(_0x4db2b3- -0x47d,_0x2e886f-0x113,_0x301ba9-0x15f,_0x301ba9);}try{if(_0x423e84[_0x23c00f(0x260,0x248,0x1d6,0x21c)](_0x423e84[_0x280ea3(0xb1,-0x10,-0x1,0x62)],_0x423e84[_0x23c00f(0x203,0x1a0,0x1d7,0x1e2)])){const _0xa4de8b=await _0x423e84[_0x23c00f(0x204,0x1fe,0x171,0x1dd)](processUploadedImageToBlob,_0x4d311b),_0x1949d6=URL[_0x280ea3(-0x6e,-0x1c,-0x60,0x17)+_0x280ea3(0x7,0x5c,0x4f,0x76)](_0xa4de8b);comfyuiImageObjectURL=_0x1949d6,updateComfyUIImagePreview(_0x1949d6);const _0x58168a=new FormData();_0x58168a['append'](_0x423e84[_0x23c00f(0x298,0x252,0x203,0x251)],_0xa4de8b,_0x4d311b[_0x280ea3(-0x57,0xc9,-0x4f,0x3a)]);let _0x307ec5=_0x574da5[_0x280ea3(0x61,0xa,0x16,0x45)][_0x23c00f(0x25c,0x25e,0x206,0x255)]();if(!_0x307ec5){alert(_0x423e84[_0x280ea3(0xd5,0xca,0xb9,0xa6)]),_0x423e84[_0x280ea3(0x5,-0x4b,-0x4d,-0x6)](removeComfyUIImage);return;}const _0x43dede=await _0x423e84[_0x23c00f(0x218,0x19f,0x216,0x123)](fetch,_0x307ec5+(_0x23c00f(0x170,0x1bb,0x23e,0x147)+_0x23c00f(0x2a9,0x217,0x192,0x297)),{'method':_0x423e84['DpJSi'],'body':_0x58168a});if(_0x43dede['ok']){const _0x50ac1f=await _0x43dede[_0x280ea3(0x3c,-0x29,-0x6e,-0x19)]();window['comfyuican'+'kaotupian']=_0x50ac1f[_0x280ea3(0xb2,-0x11,0x23,0x3a)],addLog(_0x23c00f(0x29b,0x288,0x27c,0x238)+_0x23c00f(0x12f,0x1ad,0x157,0x15c)+JSON[_0x23c00f(0x190,0x1b4,0x216,0x207)](_0x50ac1f)),console[_0x280ea3(0xc7,0x13d,0x93,0xb6)](_0x423e84['UeiyI'],_0x50ac1f);const _0x351d61=new FileReader();_0x351d61[_0x23c00f(0x20b,0x262,0x2ca,0x1f2)]=()=>{function _0x859393(_0x37f872,_0x4549b1,_0x225e45,_0x4aa280){return _0x280ea3(_0x37f872-0x186,_0x4549b1-0x1ec,_0x37f872,_0x225e45- -0x13c);}function _0x465dc4(_0x16cab1,_0x260d5c,_0x47e98b,_0x67b05a){return _0x280ea3(_0x16cab1-0x4a,_0x260d5c-0x55,_0x47e98b,_0x67b05a-0x447);}if(_0x423e84[_0x859393(-0xb6,-0x9c,-0x100,-0x130)](_0x423e84[_0x859393(-0xd3,-0x9c,-0xa1,-0x36)],_0x423e84[_0x859393(-0x48,-0xae,-0xa1,-0x104)])){const _0x25cb35=_0x351d61[_0x859393(-0x10d,-0xbc,-0x121,-0x10f)],_0x4156ae={};_0x4156ae[_0x465dc4(0x3f7,0x3d4,0x3fb,0x436)]=_0x25cb35,_0x4156ae[_0x465dc4(0x480,0x471,0x510,0x495)+_0x465dc4(0x48a,0x442,0x44b,0x416)]=_0x50ac1f[_0x859393(-0x11d,-0x178,-0x102,-0xdf)];const _0x313605=_0x4156ae,_0x4a5822={};_0x4a5822['id']=COMFYUI_REF_CACHE_KEY,_0x4a5822['data']=_0x313605,dbs[_0x465dc4(0x543,0x4bd,0x4a7,0x4cf)+'rite'](_0x4a5822);}else _0x513255[_0x465dc4(0x420,0x516,0x4b0,0x4a8)](_0x423e84[_0x465dc4(0x4da,0x4b5,0x44b,0x4be)],_0x395bfc);},_0x351d61[_0x23c00f(0x1a3,0x232,0x253,0x26c)+_0x23c00f(0x193,0x222,0x23a,0x24c)](_0xa4de8b);}else{const _0x5c5830=await _0x43dede[_0x23c00f(0x1e7,0x1a3,0x181,0x17e)]();_0x423e84[_0x23c00f(0x2af,0x264,0x2d8,0x2ac)](alert,_0x423e84['bOona'](_0x423e84[_0x23c00f(0x1a2,0x1e6,0x230,0x154)],_0x5c5830)),_0x423e84['DzOhL'](addLog,_0x280ea3(0x8e,-0xc,0x27,0x20)+_0x280ea3(0x50,0x112,0x130,0xc4)+_0x5c5830),console[_0x23c00f(0x1ea,0x236,0x2ba,0x1b6)](_0x423e84[_0x280ea3(0xd6,0xae,0x1b,0x74)],_0x5c5830),_0x423e84[_0x280ea3(-0x11,-0x42,0x5d,-0x6)](removeComfyUIImage);}}else _0x12abf0();}catch(_0x351fed){_0x423e84[_0x23c00f(0x191,0x211,0x200,0x191)](_0x423e84[_0x23c00f(0x172,0x1d9,0x196,0x194)],_0x280ea3(0xac,-0x1b,0xa,0x1f))?(_0x423e84[_0x23c00f(0x143,0x18e,0x146,0x21b)](_0x38b87c,null),_0x236a38[_0x23c00f(0x1d5,0x215,0x1c7,0x246)+'e'](_0xea4b4)):(alert(_0x280ea3(-0xa4,-0x10,-0x39,-0x4c)+':\x20'+_0x351fed[_0x280ea3(0xb,0x8f,0x3,0x66)]),console[_0x280ea3(-0x29,0x6a,0x52,0x61)](_0x423e84[_0x23c00f(0x252,0x1f2,0x17f,0x238)],_0x351fed),_0x423e84[_0x280ea3(0x6f,0x27,0x8a,0xe)](addLog,_0x280ea3(0x77,0x1b,0x32,0x20)+_0x23c00f(0x227,0x299,0x216,0x273)+JSON[_0x280ea3(-0x8f,0x66,0x4c,-0x21)](_0x351fed)),_0x423e84[_0x280ea3(-0x6c,0xb,-0x97,-0x6)](removeComfyUIImage));}}async function loadCachedImages(){function _0x2ec1a6(_0x475581,_0x1c1ec6,_0x33a2bf,_0x112c37){return _0x179f69(_0x112c37- -0xca,_0x1c1ec6-0x77,_0x33a2bf-0xeb,_0x1c1ec6);}const _0x26815f={'VoRsn':function(_0xce7b26,_0x5e69f4){return _0xce7b26(_0x5e69f4);},'AOMsG':function(_0x4d9f50,_0x5a0273){return _0x4d9f50+_0x5a0273;},'PIVuf':_0x2ec1a6(0x3d2,0x3f6,0x338,0x367)+':\x20','Xmqit':_0x949788(0x358,0x2c7,0x2fe,0x34e)+':','HprKi':function(_0x3bb292){return _0x3bb292();},'ZojCk':function(_0x2702d4,_0x215fa6){return _0x2702d4(_0x215fa6);},'qbmpC':_0x2ec1a6(0x47a,0x4f2,0x448,0x468)+'+$','pkmdR':'0|2|3|1|4','peuWP':_0x949788(0x348,0x396,0x3a3,0x366),'IFfhK':'imageInput'+'2','VqQWg':function(_0xcecaf4,_0xcfee18){return _0xcecaf4===_0xcfee18;},'rGQSe':'JDmcL','OcbUA':_0x2ec1a6(0x399,0x3ad,0x2ef,0x370),'OfEDF':function(_0x152cdc,_0x2c2e4a){return _0x152cdc(_0x2c2e4a);},'wXoGu':'Error\x20load'+'ing\x20cached'+_0x949788(0x3e4,0x3d2,0x3ff,0x419)+_0x949788(0x2e2,0x309,0x398,0x34b),'nHaIM':'IpDEH','tcqQd':_0x2ec1a6(0x376,0x3b2,0x324,0x395),'JYefF':_0x949788(0x30a,0x2d6,0x357,0x2a5)+_0x2ec1a6(0x3f2,0x3ea,0x463,0x465)+_0x2ec1a6(0x355,0x414,0x41f,0x3e7)+_0x2ec1a6(0x4b0,0x3ef,0x47c,0x462)+_0x949788(0x233,0x2bf,0x304,0x327),'OCJbj':function(_0x459e47,_0x20fff0){return _0x459e47!==_0x20fff0;},'vMrvM':_0x2ec1a6(0x3b0,0x3b0,0x429,0x43d),'pRHkD':function(_0x185b8f,_0x4a0db7){return _0x185b8f(_0x4a0db7);},'COTAw':function(_0x35abe0,_0x3696ee){return _0x35abe0(_0x3696ee);},'LkLWb':_0x2ec1a6(0x377,0x317,0x390,0x393),'xVxnp':function(_0x52c745,_0x592591){return _0x52c745===_0x592591;},'EGZQw':_0x2ec1a6(0x3be,0x36e,0x410,0x3c7),'CDRXb':function(_0xc4d1a7,_0x11b2a9){return _0xc4d1a7(_0x11b2a9);},'CFnHJ':_0x949788(0x3d1,0x33f,0x2e8,0x2da)+'fyUI\x20image'+_0x949788(0x3f8,0x38b,0x333,0x3a4)+_0x2ec1a6(0x432,0x436,0x3fa,0x404)+_0x949788(0x3d6,0x36a,0x3cb,0x309)+_0x949788(0x3e1,0x363,0x2f3,0x36f)+'\x20to\x20update'+_0x2ec1a6(0x3e1,0x3d2,0x3f4,0x43f)+'the\x20new\x20fo'+_0x2ec1a6(0x404,0x39c,0x36d,0x3db),'URPNT':_0x2ec1a6(0x4b4,0x41a,0x3f5,0x42e),'pIGqQ':_0x2ec1a6(0x35e,0x403,0x38d,0x37b),'PbIfA':_0x949788(0x2ea,0x2d6,0x33a,0x334)+_0x2ec1a6(0x3ea,0x4d5,0x4a7,0x465)+_0x2ec1a6(0x4e8,0x433,0x4f3,0x471)+_0x2ec1a6(0x43d,0x368,0x38e,0x3c6)};await dbs[_0x2ec1a6(0x4ab,0x4d0,0x3fd,0x44d)]();try{const _0x498e46=await dbs['storeReadO'+_0x2ec1a6(0x38b,0x30e,0x42c,0x3a0)](NAI_VIBE_CACHE_KEY);_0x498e46&&_0x498e46[_0x949788(0x27f,0x302,0x389,0x354)]&&(_0x26815f[_0x2ec1a6(0x40e,0x3ae,0x346,0x397)](_0x26815f[_0x2ec1a6(0x408,0x32b,0x3b9,0x3a1)],_0x26815f['OcbUA'])?(_0x26815f['VoRsn'](_0x1449d0,_0x26815f['AOMsG'](_0x26815f[_0x2ec1a6(0x3a8,0x316,0x3c7,0x38e)],_0x460feb['message'])),_0x2e30b7[_0x2ec1a6(0x386,0x3b9,0x487,0x414)](_0x26815f[_0x949788(0x29b,0x32d,0x3bb,0x3a1)],_0x95399f),_0x2fec70(_0x2ec1a6(0x453,0x425,0x35e,0x3d3)+'详情:\x20'+_0x223216['stringify'](_0x3c3356)),_0x26815f['HprKi'](_0x448728)):_0x26815f[_0x2ec1a6(0x3cd,0x411,0x47b,0x405)](updateNovelaiImagePreview,_0x498e46[_0x949788(0x343,0x302,0x2fa,0x2a7)]));}catch(_0x598115){console[_0x949788(0x3e2,0x374,0x3a0,0x2eb)](_0x26815f[_0x949788(0x336,0x35f,0x3e3,0x2d4)],_0x598115);}function _0x949788(_0x246efc,_0x4ef060,_0x3167f8,_0x23e822){return _0xd20d2b(_0x4ef060-0x8b,_0x4ef060-0x134,_0x246efc,_0x23e822-0x7e);}try{const _0x532e0e=await dbs[_0x949788(0x39c,0x359,0x379,0x368)+_0x949788(0x2dc,0x300,0x299,0x28e)](NAI_CHAR_REF_CACHE_KEY);_0x532e0e&&_0x532e0e[_0x949788(0x2b6,0x302,0x2cc,0x333)]&&updateNovelaiCharRefImagePreview(_0x532e0e[_0x949788(0x38e,0x302,0x310,0x376)]);}catch(_0x14ee1c){_0x26815f['nHaIM']!==_0x26815f[_0x2ec1a6(0x4d8,0x4c0,0x4d2,0x44c)]?console['error'](_0x26815f[_0x2ec1a6(0x323,0x428,0x32d,0x3b2)],_0x14ee1c):(_0x26815f[_0x2ec1a6(0x31b,0x3bf,0x3c2,0x3a6)](_0x4a9780,null),_0x3a54b0[_0x949788(0x3c4,0x353,0x356,0x314)+'e'](_0x891935));}try{const _0x57bb6f=await dbs[_0x2ec1a6(0x3cd,0x381,0x404,0x3f9)+_0x949788(0x2e6,0x300,0x336,0x356)](COMFYUI_REF_CACHE_KEY);if(_0x57bb6f&&_0x57bb6f[_0x949788(0x37a,0x302,0x319,0x36a)]&&_0x57bb6f['data'][_0x949788(0x2bf,0x302,0x2a3,0x2d9)]&&_0x57bb6f[_0x2ec1a6(0x384,0x387,0x32c,0x3a2)][_0x2ec1a6(0x38d,0x45c,0x469,0x401)+'Name']){if(_0x26815f[_0x2ec1a6(0x314,0x373,0x426,0x3a5)](_0x26815f[_0x2ec1a6(0x438,0x401,0x510,0x47e)],_0x26815f[_0x2ec1a6(0x4c4,0x4af,0x4dd,0x47e)]))return _0x4bf986[_0x2ec1a6(0x35c,0x394,0x391,0x37a)]()[_0x949788(0x2fc,0x2dc,0x311,0x285)](pmJOdO[_0x949788(0x3a5,0x314,0x2ab,0x3a6)])[_0x2ec1a6(0x310,0x30f,0x3e6,0x37a)]()[_0x2ec1a6(0x354,0x3e3,0x33d,0x36b)+'r'](_0x27c007)['search'](pmJOdO[_0x949788(0x31a,0x314,0x315,0x336)]);else{const _0x70b7e4=_0x57bb6f[_0x2ec1a6(0x3bd,0x34e,0x35b,0x3a2)],_0x7ba3c5=await _0x26815f[_0x2ec1a6(0x3d2,0x431,0x3b9,0x416)](fetch,_0x70b7e4[_0x2ec1a6(0x3a8,0x354,0x36f,0x3a2)]),_0x14d317=await _0x7ba3c5[_0x949788(0x3bd,0x357,0x3ac,0x38d)](),_0x314ef0=URL[_0x949788(0x321,0x32a,0x3a9,0x29e)+_0x2ec1a6(0x3ac,0x475,0x39b,0x429)](_0x14d317);_0x26815f[_0x2ec1a6(0x454,0x3e1,0x428,0x41b)](updateComfyUIImagePreview,_0x314ef0),comfyuiImageObjectURL=_0x314ef0,window[_0x2ec1a6(0x46c,0x469,0x4a9,0x450)+_0x949788(0x31c,0x383,0x3fc,0x37d)]=_0x70b7e4[_0x949788(0x34b,0x361,0x30a,0x39c)+'Name'],_0x26815f[_0x949788(0x2e1,0x315,0x32a,0x2a7)](addLog,_0x949788(0x283,0x2c6,0x34d,0x340)+_0x2ec1a6(0x399,0x3c8,0x423,0x413)+_0x70b7e4[_0x949788(0x361,0x361,0x342,0x307)+_0x949788(0x258,0x2e2,0x31d,0x2b9)]),console[_0x2ec1a6(0x3e0,0x4bf,0x4d6,0x469)](_0x949788(0x308,0x33f,0x37d,0x3c4)+_0x949788(0x244,0x2cf,0x30e,0x2e9)+'\x20from\x20cach'+_0x2ec1a6(0x4a5,0x3f8,0x3f6,0x439)+_0x70b7e4[_0x949788(0x395,0x361,0x3d4,0x3a0)+_0x949788(0x357,0x2e2,0x25e,0x28e)]);}}else{if(_0x57bb6f&&typeof _0x57bb6f[_0x949788(0x2ba,0x302,0x2b9,0x301)]===_0x26815f[_0x949788(0x2dc,0x322,0x37a,0x293)]){if(_0x26815f[_0x949788(0x288,0x2ca,0x2fd,0x293)](_0x26815f[_0x2ec1a6(0x396,0x3ae,0x426,0x3de)],_0x26815f['EGZQw'])){const _0x3c29ba=await _0x26815f[_0x2ec1a6(0x396,0x3c3,0x43d,0x3af)](fetch,_0x57bb6f['data']),_0x1467d8=await _0x3c29ba[_0x949788(0x2c5,0x357,0x3d9,0x372)](),_0x225f2b=URL['createObje'+_0x949788(0x32e,0x389,0x3df,0x3ae)](_0x1467d8);_0x26815f[_0x2ec1a6(0x338,0x3da,0x346,0x3a6)](updateComfyUIImagePreview,_0x225f2b),comfyuiImageObjectURL=_0x225f2b,console['warn'](_0x26815f[_0x2ec1a6(0x3e8,0x413,0x3e0,0x3e8)]);}else{const _0x12194c=_0x26815f[_0x2ec1a6(0x490,0x4a0,0x4d5,0x451)][_0x949788(0x43e,0x3ce,0x41f,0x34f)]('|');let _0x53b378=0x1b15+-0x1978+-0x19d;while(!![]){switch(_0x12194c[_0x53b378++]){case'0':_0x9eba7d[_0x2ec1a6(0x494,0x37b,0x462,0x407)]='';continue;case'1':_0x45ef1b[_0x949788(0x2ab,0x2c9,0x247,0x24e)]['display']=_0x26815f[_0x949788(0x409,0x3dc,0x43c,0x355)];continue;case'2':_0x43dfe4[_0x949788(0x24b,0x2c9,0x238,0x307)]['display']=_0x26815f[_0x2ec1a6(0x41d,0x4f1,0x4e4,0x47c)];continue;case'3':_0x5cd472[_0x949788(0x28d,0x2c9,0x327,0x25e)][_0x949788(0x2b4,0x2bd,0x313,0x303)]=_0x2ec1a6(0x39b,0x4a2,0x395,0x422);continue;case'4':_0x65bcbc[_0x2ec1a6(0x453,0x40e,0x37d,0x3eb)+_0x949788(0x3a1,0x36f,0x3f5,0x3e8)+'e']=null;continue;}break;}}}}}catch(_0xe86982){_0x26815f[_0x949788(0x2d4,0x305,0x2ce,0x345)](_0x26815f[_0x2ec1a6(0x497,0x443,0x42d,0x437)],_0x26815f[_0x949788(0x326,0x325,0x385,0x2c8)])?console[_0x2ec1a6(0x3ac,0x3bc,0x3a5,0x414)](_0x26815f[_0x2ec1a6(0x469,0x425,0x3ee,0x475)],_0xe86982):_0x906de[_0x949788(0x3fb,0x391,0x330,0x3fc)+_0x949788(0x3f2,0x3b5,0x41a,0x3f8)](_0x26815f[_0x2ec1a6(0x3dc,0x43a,0x3e8,0x46a)])[_0x949788(0x362,0x339,0x2c4,0x324)]();}}export function initImageUpload(_0x506d9c){const _0x5db25a={'buJKV':_0x44243b(-0x5d,-0x159,-0xda,-0x104)+_0x44243b(-0x5f,-0x91,-0x7f,-0x7b),'yOjcf':function(_0x59ce7e){return _0x59ce7e();},'bqrTo':_0x34b471(-0xb2,0x4b,-0x2b,-0x81)+_0x44243b(-0x113,-0xa2,-0x8b,-0xdc)+'ref','TwiBB':_0x44243b(0x13,-0x36,-0x73,-0x11)+_0x44243b(-0x116,-0x12b,-0xae,-0xde)+_0x44243b(-0x18,-0x20,-0x6e,-0x25),'FWoaC':'none','uoyWH':'inline-fle'+'x','riGEI':'flex','ZeBFY':function(_0x5c1b69,_0x134caf){return _0x5c1b69===_0x134caf;},'yBvHM':_0x44243b(-0xdd,-0x11c,-0xe0,-0xd3),'zmCBm':_0x34b471(0x34,0x9,0x11,-0x7a),'Gteeg':function(_0x2d3b62){return _0x2d3b62();},'HiEgZ':function(_0x3cb303,_0x3b24c8){return _0x3cb303!==_0x3b24c8;},'xWUaN':'EKVRv','MJsCI':function(_0x2fe8c5){return _0x2fe8c5();},'qnKtG':_0x34b471(-0xb3,-0x5b,-0x5e,-0x7a),'AtyAA':_0x44243b(-0x4c,-0x99,-0x9b,-0x57)+'t_novelai','WdKYu':_0x34b471(-0x10b,-0x55,-0xcf,-0x8c),'VnUVx':'#novelai-r'+_0x44243b(-0x6d,-0xc0,-0x87,-0x29)+_0x44243b(-0x151,-0xa0,-0xf0,-0xff)+_0x44243b(-0x17,-0xc4,-0x6e,-0x56),'EkbXh':'#comfyui-r'+_0x34b471(-0x4c,-0x1d,0xd,-0x16)+'e-btn'};_0x5db25a[_0x34b471(-0x102,-0xe4,-0x86,-0x3a)](loadCachedImages);function _0x34b471(_0x2abf4b,_0x714416,_0x5578ba,_0x135540){return _0xd20d2b(_0x5578ba- -0x30c,_0x714416-0x183,_0x135540,_0x135540-0x103);}_0x506d9c[_0x34b471(0x1b,0xa8,0x29,0x0)](_0x44243b(-0xb5,-0x12a,-0xb2,-0xb1)+'elect-imag'+'e-btn')['on'](_0x5db25a[_0x44243b(-0x16b,-0x180,-0x100,-0x71)],()=>{function _0x55d652(_0x369185,_0x1a1258,_0x458eff,_0x53891d){return _0x34b471(_0x369185-0x77,_0x1a1258-0x4f,_0x369185-0x87,_0x458eff);}function _0x44afc5(_0x3dc017,_0x9a6e4c,_0x158542,_0x543aba){return _0x34b471(_0x3dc017-0x126,_0x9a6e4c-0x131,_0x158542- -0x150,_0x9a6e4c);}document['getElement'+_0x44afc5(-0x172,-0xd8,-0x132,-0xdf)](_0x5db25a[_0x55d652(0xc6,0xff,0x58,0x14d)])[_0x44afc5(-0x19a,-0x1f1,-0x1ae,-0x217)]();}),_0x506d9c[_0x44243b(-0x74,-0xae,-0x86,-0x99)](_0x5db25a['AtyAA'])['on'](_0x5db25a[_0x44243b(-0x31,-0x53,-0x79,-0xf)],handleNovelaiImageUpload),_0x506d9c['find'](_0x44243b(-0x3b,-0x13,-0x90,-0x93)+_0x34b471(-0x5,-0x5,0xd,-0x72)+_0x34b471(-0x68,-0x41,-0xf,-0x9b))['on'](_0x5db25a[_0x44243b(-0x105,-0x146,-0x100,-0x17a)],()=>{_0x5db25a['yOjcf'](removeNovelaiImage);}),_0x506d9c[_0x34b471(0x9,-0x27,0x29,0x44)](_0x44243b(-0x12a,-0x112,-0xb2,-0x141)+_0x44243b(-0x191,-0x13f,-0x162,-0xdc)+_0x44243b(-0x115,-0xd9,-0xf0,-0xba)+_0x44243b(0x9,-0x82,-0x6e,-0x9a))['on'](_0x5db25a[_0x34b471(0x30,-0x4e,-0x51,-0x18)],()=>{function _0x5d4e95(_0x1a2601,_0x197a69,_0x58d39e,_0xb5a162){return _0x44243b(_0x1a2601-0x3f,_0x1a2601,_0x197a69-0x90,_0xb5a162-0x135);}document['getElement'+'ById'](_0x5db25a[_0x5d4e95(-0x3f,-0xc,-0x2f,-0x17)])['click']();});function _0x44243b(_0x5729db,_0x31860c,_0x5e051f,_0x426257){return _0x179f69(_0x5e051f- -0x5b0,_0x31860c-0x11b,_0x5e051f-0x2f,_0x31860c);}_0x506d9c[_0x44243b(-0x3a,-0x8e,-0x86,-0x74)]('#imageInpu'+_0x34b471(-0x91,-0x17,-0x7c,-0x61)+_0x34b471(-0x4f,-0x8a,-0x49,0x11))['on'](_0x5db25a[_0x34b471(0x55,0x37,0x36,-0x3)],handleNovelaiCharRefImageUpload),_0x506d9c[_0x34b471(-0x67,0x6,0x29,-0x28)](_0x5db25a['VnUVx'])['on'](_0x5db25a[_0x44243b(-0x169,-0x160,-0x100,-0x11f)],()=>{const _0x242e4e={};_0x242e4e['mkGmO']='previewIma'+_0x5e5e74(-0x118,0x3,-0x89,-0x60),_0x242e4e[_0x2be39e(0x380,0x332,0x40c,0x31a)]=_0x2be39e(0x35a,0x3cf,0x3d6,0x2fc)+_0x2be39e(0x403,0x38e,0x384,0x3c2)+_0x5e5e74(-0x69,-0xc6,-0x92,-0x87)+_0x5e5e74(0x44,0x7c,-0xc,0x12)+_0x5e5e74(0x19,0x7c,0x32,0x59)+'placeholde'+'r';function _0x2be39e(_0x51e960,_0x651619,_0x4d8608,_0x5d5526){return _0x34b471(_0x51e960-0xa1,_0x651619-0x166,_0x51e960-0x407,_0x4d8608);}function _0x5e5e74(_0x3acd1f,_0x16e3b4,_0xe535b2,_0x4598f8){return _0x34b471(_0x3acd1f-0x4f,_0x16e3b4-0x142,_0xe535b2-0x49,_0x3acd1f);}_0x242e4e[_0x2be39e(0x3fc,0x373,0x3b4,0x3bb)]=_0x5db25a[_0x2be39e(0x3c0,0x38f,0x384,0x369)],_0x242e4e[_0x2be39e(0x3b9,0x445,0x3be,0x3b6)]='block',_0x242e4e[_0x5e5e74(0x1a,0x3f,-0x4a,0xd)]=_0x5db25a[_0x5e5e74(-0x36,-0x52,-0x22,-0x8b)],_0x242e4e['mQDXd']=_0x5db25a[_0x5e5e74(0xef,0x3,0x7d,-0x3)],_0x242e4e[_0x2be39e(0x3e1,0x3fb,0x41b,0x3f1)]=_0x5db25a[_0x2be39e(0x3dd,0x3cf,0x3ff,0x40f)];const _0x4db693=_0x242e4e;if(_0x5db25a[_0x5e5e74(0x80,-0x9,0x5b,0x1c)](_0x5db25a[_0x2be39e(0x38a,0x3bf,0x2fc,0x3d5)],_0x5db25a[_0x2be39e(0x388,0x3fd,0x34c,0x3f8)])){const _0x5d968d=_0x4ab3be[_0x5e5e74(-0x2,-0x2,0x43,0x62)+'ById'](_0x4db693[_0x2be39e(0x3ff,0x44f,0x46c,0x3d5)]),_0x3c9d97=_0x4971ff['querySelec'+_0x2be39e(0x344,0x3a9,0x3d0,0x3b5)](_0x4db693[_0x5e5e74(-0x79,-0x7f,-0x3e,-0x4d)]),_0x30af32=_0x14ac3c[_0x2be39e(0x401,0x3b5,0x3e2,0x3f3)+'ById'](_0x4db693[_0x2be39e(0x3fc,0x462,0x472,0x466)]);if(_0x3e17c1&&_0x326172[_0x5e5e74(-0x1f,0x39,0xf,-0x12)]('data:image')){_0x5d968d['src']=_0x24b0a8,_0x5d968d[_0x5e5e74(-0x53,-0x8a,-0x85,-0xca)]['display']=_0x4db693['GsNue'],_0x3c9d97[_0x2be39e(0x339,0x3be,0x361,0x39f)][_0x2be39e(0x32d,0x341,0x2ac,0x377)]=_0x4db693[_0x2be39e(0x374,0x3b0,0x39b,0x3e4)],_0x30af32[_0x5e5e74(-0xd,-0xda,-0x85,-0xa7)][_0x2be39e(0x32d,0x397,0x354,0x31d)]=_0x4db693[_0x5e5e74(0x7d,-0x6c,-0x4,-0x64)];const _0x486a43=_0x2c1389[_0x5e5e74(0x85,0xd,0x80,0x82)](','),_0x194558=_0x486a43[0x80f*-0x1+-0x124a*0x1+-0x13*-0x163][_0x2be39e(0x43e,0x482,0x3d2,0x426)](':')[0x115*0xd+-0x214+-0xbfc][_0x2be39e(0x43e,0x453,0x4a6,0x42b)](';')[-0xe*-0x127+0x254e+-0x3570];_0x1969d4=_0x194558,_0x25b183[_0x5e5e74(-0x78,-0x46,-0x3,-0x70)+_0x5e5e74(0xb2,0x4e,0x21,-0x20)+'e']=_0x486a43[-0x1f01+0x3*-0x531+0x2d*0x109];const _0x1b22ed={};_0x1b22ed['id']=_0x58e84e,_0x1b22ed['data']=_0x5b36a8,_0x2722f3[_0x5e5e74(0x38,-0x1d,0x4d,0x3c)+_0x2be39e(0x37c,0x3e3,0x40b,0x367)](_0x1b22ed);}else{const _0x154110=_0x2be39e(0x434,0x451,0x4a6,0x3e1)[_0x2be39e(0x43e,0x4a0,0x3b7,0x4be)]('|');let _0x23aa4e=-0x1949+0xd*-0x197+0x2df4;while(!![]){switch(_0x154110[_0x23aa4e++]){case'0':_0x3c9d97[_0x2be39e(0x339,0x356,0x344,0x2d9)][_0x5e5e74(-0xf6,-0x9f,-0x91,-0xa7)]=_0x4db693[_0x2be39e(0x3e1,0x3f8,0x43b,0x389)];continue;case'1':_0x30af32['style'][_0x5e5e74(-0xe9,-0x57,-0x91,-0xd8)]='none';continue;case'2':_0x5d968d[_0x2be39e(0x339,0x36d,0x2c1,0x35a)]['display']=_0x4db693['totIm'];continue;case'3':_0x109ea3[_0x5e5e74(-0xd,0x2,-0x3,-0x55)+'ansferImag'+'e']=null;continue;case'4':_0x5d968d[_0x2be39e(0x3d7,0x39f,0x407,0x42f)]='';continue;}break;}}}else _0x5db25a[_0x5e5e74(-0x38,-0x34,0x29,-0x3d)](removeNovelaiCharRefImage);}),_0x506d9c['find'](_0x34b471(-0x92,0x17,-0x63,-0x45)+_0x44243b(-0xdf,-0x45,-0x97,-0xe1)+_0x34b471(-0x5,0x49,-0xf,-0x82))['on'](_0x5db25a[_0x34b471(-0x3f,0xb,-0x51,-0x92)],()=>{function _0x229efd(_0x32d98d,_0x3fa2ac,_0x280c42,_0x1d117c){return _0x34b471(_0x32d98d-0xb8,_0x3fa2ac-0x14a,_0x3fa2ac-0x480,_0x1d117c);}function _0x45ade0(_0x22b004,_0x5b55f2,_0x5dd637,_0x80462c){return _0x44243b(_0x22b004-0x1a0,_0x80462c,_0x22b004- -0xb1,_0x80462c-0x1ca);}document[_0x45ade0(-0x166,-0x19a,-0xd9,-0x1e6)+_0x45ade0(-0x142,-0x139,-0x179,-0x119)](_0x45ade0(-0x18b,-0x1cf,-0x179,-0x177)+'2')[_0x229efd(0x438,0x422,0x41e,0x442)]();}),_0x506d9c[_0x34b471(0x50,0x62,0x29,0xb7)](_0x34b471(-0x75,0x33,0x14,0x3f)+'t2')['on'](_0x5db25a[_0x44243b(-0x10a,-0x41,-0x79,-0x71)],handleImageUpload2),_0x506d9c[_0x44243b(-0x117,-0x36,-0x86,-0x6b)](_0x5db25a['EkbXh'])['on'](_0x5db25a[_0x44243b(-0xa0,-0xcf,-0x100,-0x7a)],()=>{function _0x1527a7(_0xd1e9de,_0x2372cc,_0x393c95,_0x5037ac){return _0x44243b(_0xd1e9de-0x1d2,_0xd1e9de,_0x5037ac-0x158,_0x5037ac-0x188);}function _0x56825d(_0x33956c,_0x3fc632,_0x236d2c,_0x40a148){return _0x34b471(_0x33956c-0x7b,_0x3fc632-0xb0,_0x3fc632-0x281,_0x33956c);}_0x5db25a['HiEgZ'](_0x5db25a[_0x1527a7(0x59,0x1b,0xe0,0x7d)],_0x5db25a[_0x56825d(0x2ab,0x255,0x277,0x2a2)])?_0x55d3f5[_0x1527a7(0x79,0x10b,0x15,0x86)](_0x1527a7(-0x29,-0x6c,-0x92,-0x18)+'ing\x20cached'+_0x1527a7(0x8e,0xc0,0xc8,0xe3)+_0x1527a7(0x83,-0x58,0x31,0x38),_0x18cc9f):removeComfyUIImage();});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};