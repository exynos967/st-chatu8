(function(_0x497f13,_0x5bb166){const _0x300cba=_0x497f13();function _0x47f594(_0x426859,_0x3c5091,_0x268da4,_0x450c69){return _0x2506(_0x450c69- -0x1d0,_0x3c5091);}function _0x2cbbe3(_0xe69331,_0x5d53b8,_0x55ccd7,_0x33f72c){return _0x2506(_0x55ccd7- -0x334,_0x5d53b8);}while(!![]){try{const _0xfa5b42=-parseInt(_0x47f594(0x4e,0x11,-0x8a,-0x13))/(0x2*0x1041+-0x26b2*0x1+-0x13d*-0x5)+parseInt(_0x47f594(0x0,-0x15,-0x99,-0x50))/(0x39*-0x8d+-0x9*0x399+0x3fc8)+-parseInt(_0x47f594(-0x103,-0x100,-0x9d,-0xb0))/(-0x1*0x9d+-0x1c9*-0x2+-0x3a*0xd)*(parseInt(_0x47f594(-0x30,-0x9d,-0x3e,-0x59))/(-0x34f+0xcc7+-0x974))+-parseInt(_0x47f594(-0xa3,-0x7c,-0x4e,-0x3f))/(0x5*-0x7c5+-0x25*-0x52+0x1b04)+parseInt(_0x2cbbe3(-0x242,-0x208,-0x221,-0x1fb))/(-0x2209+0x16eb+0x7c*0x17)+parseInt(_0x2cbbe3(-0x1a0,-0x26d,-0x217,-0x1ea))/(-0x19fe+-0x1b*-0x15b+-0xa94)*(parseInt(_0x2cbbe3(-0x1a5,-0x182,-0x1ea,-0x1c5))/(0x1*0x1fa7+0xb4b*-0x1+0xa2a*-0x2))+parseInt(_0x47f594(0x4b,-0x79,0x2a,-0x1))/(0x22f7+-0x10ad+0x1*-0x1241);if(_0xfa5b42===_0x5bb166)break;else _0x300cba['push'](_0x300cba['shift']());}catch(_0x58aee6){_0x300cba['push'](_0x300cba['shift']());}}}(_0x1206,-0x786c8+0x4739*-0xb+-0x1ab61*-0xb));const _0x26639e=(function(){let _0x5457cf=!![];return function(_0x10f342,_0x22a03c){const _0x85133f=_0x5457cf?function(){function _0x8d7937(_0x2d5c76,_0x363dd3,_0x1e16bf,_0x4e2f6e){return _0x2506(_0x1e16bf- -0x6e,_0x2d5c76);}if(_0x22a03c){const _0x4bb77d=_0x22a03c[_0x8d7937(0x117,0x1a8,0x173,0x1d3)](_0x10f342,arguments);return _0x22a03c=null,_0x4bb77d;}}:function(){};return _0x5457cf=![],_0x85133f;};}()),_0x364397=_0x26639e(this,function(){function _0x179563(_0x1d0c1d,_0xac0791,_0x33cd1a,_0x1c7b0b){return _0x2506(_0xac0791- -0x1c7,_0x33cd1a);}const _0xbfffce={};_0xbfffce[_0x48e822(0x241,0x22b,0x25d,0x26d)]=_0x179563(0xd,-0x3,-0x4c,-0x59)+'+$';const _0x5720ee=_0xbfffce;function _0x48e822(_0x5bd77f,_0x566f51,_0x2ab495,_0x4b8cc3){return _0x2506(_0x566f51-0x45,_0x4b8cc3);}return _0x364397['toString']()[_0x48e822(0x24c,0x1fa,0x189,0x23b)](_0x5720ee[_0x48e822(0x207,0x22b,0x231,0x22b)])[_0x179563(0x3d,-0x33,0x39,-0x84)]()['constructo'+'r'](_0x364397)[_0x179563(-0x14,-0x12,0x61,-0x59)](_0x5720ee[_0x48e822(0x256,0x22b,0x1d4,0x1e2)]);});function _0x2506(_0x5bdefc,_0x1f2414){_0x5bdefc=_0x5bdefc-(0x2*0x7a5+-0x160e+0x7ba);const _0xcd4af=_0x1206();let _0x3d8aec=_0xcd4af[_0x5bdefc];if(_0x2506['RmuYue']===undefined){var _0x5a7fae=function(_0x14b6d5){const _0x55ed4f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1b568e='',_0xb40793='',_0xb3c128=_0x1b568e+_0x5a7fae;for(let _0x177a30=-0x2*0x45e+-0x1f2e+0x27ea,_0x4fd020,_0x29309d,_0x27b215=-0x17cb+0x15c*-0x4+0x1d3b;_0x29309d=_0x14b6d5['charAt'](_0x27b215++);~_0x29309d&&(_0x4fd020=_0x177a30%(0x964+-0x8*-0x7e+-0xd50)?_0x4fd020*(0x6*-0x5c5+-0x1a*0x8c+0x67*0x7a)+_0x29309d:_0x29309d,_0x177a30++%(-0x18*0xd9+-0x19*-0x121+-0x7dd))?_0x1b568e+=_0xb3c128['charCodeAt'](_0x27b215+(0x1398+-0x1de2+-0x4*-0x295))-(-0x797+-0xe34*-0x2+0x14c7*-0x1)!==-0x206*-0x11+-0x1a0d+-0x1*0x859?String['fromCharCode'](-0x13d7+-0x1606+0x2*0x156e&_0x4fd020>>(-(-0x3*0xbb1+-0x2*-0x34b+0x5b3*0x5)*_0x177a30&-0x1*0x8e4+0x66d+0x27d)):_0x177a30:0x2093*-0x1+-0x1b1d+0x3bb0){_0x29309d=_0x55ed4f['indexOf'](_0x29309d);}for(let _0x5af1b8=0x1*-0x1a65+0x2137+0x2*-0x369,_0x3ab107=_0x1b568e['length'];_0x5af1b8<_0x3ab107;_0x5af1b8++){_0xb40793+='%'+('00'+_0x1b568e['charCodeAt'](_0x5af1b8)['toString'](0x1c4d+0x10e6+-0x1*0x2d23))['slice'](-(-0x11b7+-0x55*-0x2a+0x3c7*0x1));}return decodeURIComponent(_0xb40793);};_0x2506['OvtFYj']=_0x5a7fae,_0x2506['LOmiXH']={},_0x2506['RmuYue']=!![];}const _0x26b044=_0xcd4af[0x1*0x2041+-0x1*0x18e5+-0x3*0x274],_0x275a67=_0x5bdefc+_0x26b044,_0x1edceb=_0x2506['LOmiXH'][_0x275a67];if(!_0x1edceb){const _0x54a96b=function(_0x272220){this['sYrYwy']=_0x272220,this['WOFhSm']=[-0x8*-0x32f+0x18e6+0x1*-0x325d,0x1*-0xda3+-0x1aaf+0x2852,-0xf33*0x1+-0x3b9*0x1+0x12ec],this['FarmGb']=function(){return'newState';},this['hAAHxm']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['drhuFB']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x54a96b['prototype']['KzRpDm']=function(){const _0xa27171=new RegExp(this['hAAHxm']+this['drhuFB']),_0x398db3=_0xa27171['test'](this['FarmGb']['toString']())?--this['WOFhSm'][-0x266a+-0x10e7+0x49*0xc2]:--this['WOFhSm'][-0x7*-0x4f+-0x80d+0x5e4];return this['noiCkL'](_0x398db3);},_0x54a96b['prototype']['noiCkL']=function(_0x4f3980){if(!Boolean(~_0x4f3980))return _0x4f3980;return this['ZzcLpC'](this['sYrYwy']);},_0x54a96b['prototype']['ZzcLpC']=function(_0x467950){for(let _0x1bd1cf=0x246a+0xadf*0x3+-0x1af*0x29,_0x4d4874=this['WOFhSm']['length'];_0x1bd1cf<_0x4d4874;_0x1bd1cf++){this['WOFhSm']['push'](Math['round'](Math['random']())),_0x4d4874=this['WOFhSm']['length'];}return _0x467950(this['WOFhSm'][0x879+-0x37b*-0xb+-0x2ec2]);},new _0x54a96b(_0x2506)['KzRpDm'](),_0x3d8aec=_0x2506['OvtFYj'](_0x3d8aec),_0x2506['LOmiXH'][_0x275a67]=_0x3d8aec;}else _0x3d8aec=_0x1edceb;return _0x3d8aec;}_0x364397();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY='cache_nove'+_0x5b7292(0x2e7,0x309,0x2af,0x2f3)+_0x5b7292(0x22e,0x1e8,0x28f,0x24f)+_0x4b1f0a(-0x1d3,-0x1ba,-0x108,-0x173),NAI_CHAR_REF_CACHE_KEY=_0x5b7292(0x245,0x2b7,0x2b8,0x245)+'lai_char_r'+_0x4b1f0a(-0x27d,-0x227,-0x247,-0x233),COMFYUI_REF_CACHE_KEY='cache_comf'+_0x5b7292(0x2ca,0x2a4,0x2d5,0x28f)+'age';let nai3VibeTransferImageMimeType=_0x5b7292(0x2d5,0x2a4,0x2e2,0x32c),nai3CharRefImageMimeType=_0x4b1f0a(-0x12f,-0x16d,-0x187,-0x19b),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x34abed){const _0x364074={};function _0x3ec408(_0xb23067,_0x97878c,_0x2eeb01,_0x3a256a){return _0x5b7292(_0xb23067- -0x43,_0x3a256a,_0x2eeb01-0x11e,_0x3a256a-0x7a);}_0x364074[_0x2dd720(0x45f,0x440,0x3f2,0x404)]=_0x2dd720(0x3d9,0x371,0x3d9,0x39f);function _0x2dd720(_0x56170d,_0x4237f9,_0x5f045b,_0x563aac){return _0x5b7292(_0x56170d-0x1b0,_0x563aac,_0x5f045b-0x1c7,_0x563aac-0x1f3);}_0x364074[_0x2dd720(0x42d,0x3cf,0x434,0x434)]=_0x3ec408(0x1db,0x1a9,0x239,0x1c6),_0x364074[_0x3ec408(0x1cc,0x1a5,0x1ad,0x18c)]='inline-fle'+'x';const _0x4be2cd=_0x364074,_0x2d5f81=document[_0x2dd720(0x3ff,0x3f1,0x434,0x43e)+_0x3ec408(0x21b,0x294,0x275,0x21d)](_0x2dd720(0x454,0x3f4,0x452,0x468)+_0x2dd720(0x43a,0x461,0x3e6,0x460)),_0x8222f=document['querySelec'+'tor']('#novelai-i'+_0x2dd720(0x41a,0x3bd,0x3ff,0x3e5)+_0x3ec408(0x1f1,0x1a1,0x267,0x235)+'er\x20.st-cha'+'tu8-image-'+_0x3ec408(0x24a,0x2a0,0x22c,0x1e0)+'r'),_0x2d4afb=document[_0x3ec408(0x20c,0x1bd,0x195,0x1e0)+_0x2dd720(0x40e,0x3d4,0x458,0x44d)](_0x2dd720(0x3d8,0x363,0x41e,0x3ab)+_0x3ec408(0x1ea,0x21b,0x20c,0x226)+_0x3ec408(0x20e,0x1bc,0x198,0x1eb));if(_0x34abed&&_0x34abed['startsWith'](_0x4be2cd[_0x3ec408(0x26c,0x265,0x294,0x2bd)])){_0x2d5f81[_0x2dd720(0x46f,0x418,0x43f,0x42e)]=_0x34abed,_0x2d5f81[_0x3ec408(0x1e0,0x16e,0x1f2,0x1f4)]['display']=_0x2dd720(0x426,0x460,0x49f,0x417),_0x8222f[_0x2dd720(0x3d3,0x379,0x3ce,0x3ea)]['display']=_0x4be2cd[_0x3ec408(0x23a,0x1f6,0x1e7,0x206)],_0x2d4afb[_0x3ec408(0x1e0,0x1de,0x23f,0x204)][_0x3ec408(0x200,0x24c,0x279,0x27a)]=_0x4be2cd[_0x3ec408(0x1cc,0x19b,0x18a,0x1bb)];const _0x216e34=_0x34abed[_0x3ec408(0x235,0x1c4,0x267,0x229)](','),_0x21e3aa=_0x216e34[0xeb5+0x174f+0x32b*-0xc][_0x2dd720(0x428,0x421,0x461,0x414)](':')[0x4ed+0x571*0x5+0xeb*-0x23]['split'](';')[-0x1ff8+-0x1b78+0x3b70];nai3VibeTransferImageMimeType=_0x21e3aa,window[_0x2dd720(0x3c4,0x39d,0x433,0x40d)+'ansferImag'+'e']=_0x216e34[-0x10*0xe2+0x1880+-0x213*0x5];const _0x1c0598={};_0x1c0598['id']=NAI_VIBE_CACHE_KEY,_0x1c0598['data']=_0x34abed,dbs[_0x2dd720(0x3ca,0x375,0x381,0x3d0)+_0x3ec408(0x1e7,0x1e0,0x25d,0x178)](_0x1c0598);}else _0x2d5f81[_0x2dd720(0x46f,0x42f,0x4e9,0x435)]='',_0x2d5f81[_0x3ec408(0x1e0,0x24d,0x1bd,0x24d)][_0x2dd720(0x3f3,0x3d3,0x3c3,0x38b)]=_0x4be2cd[_0x3ec408(0x23a,0x246,0x263,0x295)],_0x8222f['style']['display']=_0x3ec408(0x208,0x1a9,0x1b8,0x1c8),_0x2d4afb[_0x3ec408(0x1e0,0x1ca,0x1f2,0x1a1)]['display']=_0x2dd720(0x3ce,0x3a1,0x3a1,0x399),window[_0x3ec408(0x1d1,0x1a6,0x226,0x180)+_0x2dd720(0x492,0x429,0x476,0x443)+'e']=null;}function removeNovelaiImage(){function _0x12b486(_0x35bc31,_0x5e0db6,_0x164acf,_0x167178){return _0x4b1f0a(_0x35bc31-0x70,_0x5e0db6-0xc8,_0x35bc31,_0x5e0db6-0x16e);}const _0x49e472={'uaPXA':function(_0x27b418,_0x3c31fd){return _0x27b418(_0x3c31fd);}};_0x49e472[_0x12b486(-0x5c,-0x2f,0x39,-0x9)](updateNovelaiImagePreview,null);function _0x2b5d1f(_0x56c59c,_0x17f54d,_0x28218c,_0x2029cf){return _0x4b1f0a(_0x56c59c-0xf0,_0x17f54d-0x12f,_0x56c59c,_0x28218c-0x2f6);}dbs[_0x2b5d1f(0x1aa,0x16e,0x14c,0x141)+'e'](NAI_VIBE_CACHE_KEY);}function _0x1206(){const _0x4b3a6f=['CgXHy2vOB2XKzq','q0DYDue','tMfTzq','oef2whPxvW','BNvysvy','CwTrwg0','BvHgCxa','A2fVDhvWAwfU','CM1HDc4','DvLiwMu','CMv2B2TLt2jQzq','uLDqD3O','mty2mJKYmMLkq1jjtG','lxjLzI1PBwfNzq','veLSufO','y29TzNL1AvvYBa','vg5hyue','y3jLyxrLt2jQzq','ExrMufq','z2uY','y0z0C1K','EK9IDuy','zw1VDMuTy2HHCG','ChjLDMLLD0LTyq','DxbtvMG','wuvzCxC','DNv0z3a','i2nVBwz5DwKTCG','C3ngsem','mtuXotqWmeTRyuP5rW','u1D2tw0','y1vvtMi','Dg9tDhjPBMC','zwXLy3qTAw1HzW','rvzrvM8','i2LTywDLsw5WDq','swH4q1m','zwXLy3qTy2HHCG','twjmvgC','CMvM','BwfoqK8','Aw1Hz2vjBNb1Da','i2nVBwz5DwKTAq','y3rvuKW','DgHLig5LDYbMBW','5lUo57Yt5A2y5yQG6l29q29TzNK','zgztt2q','EMTJy2q','CfP2swO','yMXVyG','C3jJ','Df9UB3zLBgfP','wNLoz24','DwD4q2y','yxqUifbSzwfZzq','zgf0yq','t1zgqxa','C3rVCMvezwXLDa','C0Ppwgq','t2jNBxO','zwXbssbPBwfNzq','ExvPx3jLzL9PBq','rwzkzue','C3rHCNrZv2L0Aa','ELHPA28','C2vHCMnO','EM5ZtgW','zgTTsui','y2XPy2S','Agj6ve8','Dwfqwee','u1jeveC','Aw1Hz2uVCg5N','ndmYndC3AefJzhzO','ienVBwz5vuKGAq','CKL6re0','Chvtruq','C2vYDMvYrMLSzq','C3rVCMvszwfKtW','6k+35ywi6k6+572Uq29TzNLv','kcGOlISPkYKRkq','vxryAvq','CvPcDuG','Cfb1AKe','AMTQrvK','yw5ZzMvYsw1HzW','rvHmyw8','zxnZAw5Nie5VDG','C3rYAw5N','i25VDMvSywKTyW','BgfPx3zPyMvFDa','mtmZnJyYnNPQrvfbqW','AKHnvey','zMLUza','ALjtDvK','D3L0AKq','Dg9Y','l3vWBg9Hzc9PBq','zMLSzxm','Bw92zs1JAgfYlq','vKjsugq','ignHy2HLihrVia','qK1PCum','Ae1pC24','Cw5ku1C','EvjcALa','CMvMlwLTywDLlq','yxbWzw5K','zxjYB3i','yxbWBhK','5zU+54Mh5Ase55cg5AsX6lsLoIa','yLzxBvq','ywDL','CfzpCKi','t1vPqKu','s3zotfq','x25VDMvSywK','zerouMq','BMX5','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','u1bkrfG','zNLvssbPBwfNzq','BMfPm1zPyMvuCG','zejhDNm','qLH2B1y','CMvZDwX0','ue9tva','txb6vKG','C3rVCMvszwfKvW','v0H6CuK','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','u1vSqNK','BM9Uzq','qK93uuq','u0Hprem','C3rXqKK','zKLTywDL','C3r5Bgu','sKnuzeq','tgXMt2C','ie5VDMvSquKGqW','Aw5NignHy2HLza','BM92zwXHAs1Yzq','zgf0ytPPBwfNzq','CML0zq','sezRs04','mZaZnJeZmKnbEfH6Dq','Bw92zs1PBwfNzq','CMfUC2zLCL9PBq','s0H1thK','rxjYB3iGChjVyW','uKLSCvm','x3jLzG','igzYB20GB2XKia','zxCTy29UDgfPBG','CfbKBM4','mtr1s0vRD2W','yLfLv2O','ihrVihvWzgf0zq','ndmWndy3zvfAugHe','CxvLCNLtzwXLyW','rervENC','tfzNA2u','zwzFAw1Hz2u','zMzhBLe','ywDLlxbYzxzPzq','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','rLvxA28','B3bLBKrc','zgLZCgXHEq','AeTkEvi','y2fJAgvFBM92zq','Bfrtu0m','ywvMrwW','vM1JzwK','zs1IDg4','ztOG','zMXLEa','C3rYAw5NAwz5','Aw5SAw5LlwzSzq','5zUE5PwW5O2UoG','z2v0rwXLBwvUDa','6k+M5OofoIa','lwj0BG','x25HAv9JAgfYxW','rxjYB3iGBg9Hza','CMXHs0i','rgPbELK','zwXbssbJAgfYia','BMfTzq','DgfYz2v0','Bg9N','CMXhCNa','CIaUC3qTy2HHDa','ihjLlxvWBg9Hza','zervwMq','qNLjza','wgT2wKm','vefLvwW','i25VDMvSywKTCG','BwvZC2fNzq','mtG4mdCYEg5Av3Lz','CMvMigLTywDLoG','zw1VDMuTAw1HzW','y2HHBMDL','tgHYwhu','BMfPm0nOyxjszq','zxiGlNn0lwnOyq','BwfNzs1WCMv2Aq','tvrRs00','sfH6r3e','Dhu4lwLTywDLlq','zK55rg4','AgfYifjLzIbPBq','DY1JB250ywLUzq','CMvHzefZrgf0yq','DKvHrLK','ssbbueNLNldLNydJGii','qLHMr1q','vuNLM77NIyC6ia','yMXVy2S','EKHwEum','C3bSAxq','igzYB20Gy2fJAa','y29TzNL1AwnHBG','BfHxvuq','vLnTBey','EKrJBuu','tg9HzgvKienVBq','vK1hEKW','B05ZtNe','i25VDMvSywKTCW','6zsz6k+V6k+M5OofoG','qKDsDhq','BeTODNu','wevUsM0','s3bLzum','tKXAqvC','CxH1zxq','B25SB2fKzw5K','z2vFBM92zwXHAq','B29oAeK','vfvAz3u'];_0x1206=function(){return _0x4b3a6f;};return _0x1206();}async function handleNovelaiImageUpload(_0x109674){const _0x5a2fdc={'mXFqp':function(_0x3869d4,_0x32e09d){return _0x3869d4===_0x32e09d;},'BXfGT':'zvCAE','AdVpt':_0x3f23e4(0x509,0x507,0x4c3,0x4d7),'OVFAp':_0x3f23e4(0x469,0x3e1,0x469,0x41e)+_0x3f23e4(0x515,0x4ca,0x544,0x4d2)+_0x3f23e4(0x4d2,0x50d,0x4e7,0x4b7)+':','nlvfC':function(_0x4c2223,_0x1ea545){return _0x4c2223(_0x1ea545);},'zfdHu':function(_0x1691cf,_0x583a8c){return _0x1691cf+_0x583a8c;},'vutgp':_0x30f331(-0xcd,-0xd2,-0x10f,-0x64)},_0x18ec99=_0x109674[_0x3f23e4(0x499,0x491,0x459,0x446)]['files'][0x1*-0xcf7+0x2595+-0x89*0x2e];function _0x3f23e4(_0x1de6ff,_0x18ba02,_0x405d7d,_0x52f2ff){return _0x5b7292(_0x52f2ff-0x1ee,_0x405d7d,_0x405d7d-0x73,_0x52f2ff-0x9c);}function _0x30f331(_0x19d663,_0x40fcb1,_0x15d1ca,_0x437004){return _0x4b1f0a(_0x19d663-0xa8,_0x40fcb1-0x1dd,_0x15d1ca,_0x40fcb1-0xa3);}if(!_0x18ec99)return;try{const _0x4dad5f=await processUploadedImage(_0x18ec99,!![]);updateNovelaiImagePreview(_0x4dad5f);}catch(_0x1bba1a){_0x5a2fdc[_0x3f23e4(0x42f,0x47f,0x4f3,0x481)](_0x5a2fdc[_0x3f23e4(0x43b,0x4c8,0x4a3,0x462)],_0x5a2fdc['AdVpt'])?_0xb8e4a5(_0x4c3c26['data']):(console[_0x3f23e4(0x4ac,0x544,0x50a,0x4e7)](_0x5a2fdc[_0x3f23e4(0x50f,0x4af,0x458,0x4b3)],_0x1bba1a),_0x5a2fdc['nlvfC'](alert,_0x5a2fdc['zfdHu'](_0x5a2fdc[_0x3f23e4(0x4e1,0x4d6,0x427,0x495)],_0x1bba1a[_0x30f331(-0x159,-0x16b,-0x1e5,-0x133)])));}}function _0x4b1f0a(_0x4d45a8,_0x4eafc3,_0x2c9d6a,_0x165c2a){return _0x2506(_0x165c2a- -0x357,_0x2c9d6a);}function _0x5b7292(_0x3c1068,_0x5cbd63,_0x80a2b5,_0x2c5184){return _0x2506(_0x3c1068-0x119,_0x5cbd63);}function updateNovelaiCharRefImagePreview(_0x53e888){const _0x59437f={};_0x59437f[_0x4b4ef3(-0x71,-0x3c,-0x9e,-0xd0)]='block',_0x59437f[_0x4ea50e(-0x3f,-0x90,-0x7e,-0x3c)]=_0x4ea50e(-0x3c,-0x93,0x1c,-0x5a),_0x59437f[_0x4b4ef3(-0x165,-0x141,-0xf6,-0x124)]='inline-fle'+'x',_0x59437f[_0x4ea50e(0x71,0xc4,0x25,0xad)]=_0x4ea50e(0x4a,0xad,0xab,0xa3)+'ge_nai_cha'+'r_ref';function _0x4b4ef3(_0x212c80,_0x133540,_0x201b25,_0x11aca5){return _0x4b1f0a(_0x212c80-0x28,_0x133540-0x137,_0x212c80,_0x201b25-0x126);}_0x59437f[_0x4ea50e(0x87,0x100,0xbf,0x22)]=_0x4b4ef3(-0x2e,-0xb,-0x64,-0x4d)+'har-ref-im'+_0x4ea50e(-0x1b,0x26,0x56,0x1b)+_0x4b4ef3(-0xca,-0x6a,-0xda,-0x11b)+_0x4b4ef3(-0x147,-0xf9,-0xef,-0xc0)+'u8-image-p'+'laceholder';function _0x4ea50e(_0x170699,_0x313097,_0xb83992,_0x1f7572){return _0x5b7292(_0x170699- -0x25a,_0xb83992,_0xb83992-0x6c,_0x1f7572-0xdb);}_0x59437f['NLZAW']=_0x4ea50e(-0x32,-0x7,-0x99,-0x6a)+_0x4b4ef3(-0xa0,-0x9c,-0x5a,-0x85)+_0x4b4ef3(-0xc1,-0xb5,-0x53,-0x8c)+'btn',_0x59437f[_0x4ea50e(-0x16,0x3c,0x4d,-0x2d)]='data:image',_0x59437f[_0x4b4ef3(-0x19e,-0xec,-0x12b,-0x145)]=function(_0x38cd6f,_0x222067){return _0x38cd6f===_0x222067;},_0x59437f[_0x4b4ef3(-0x133,-0x129,-0xbf,-0xb3)]='tXERc',_0x59437f[_0x4ea50e(0x37,0xc,0x95,0x96)]='4|2|3|0|1',_0x59437f[_0x4ea50e(-0x44,-0x3b,-0x65,-0xbc)]='flex';const _0x8529b5=_0x59437f,_0x13470d=document['getElement'+_0x4ea50e(0x4,0x68,-0x33,0x28)](_0x8529b5[_0x4ea50e(0x71,0xac,0x21,0x9)]),_0x51f879=document['querySelec'+_0x4ea50e(0x93,0x100,0x100,0xe8)](_0x8529b5[_0x4ea50e(0x87,0x6d,0x9d,0xc9)]),_0x32a920=document['getElement'+_0x4ea50e(0x4,-0x6c,-0x58,0x4b)](_0x8529b5[_0x4ea50e(0x2d,-0x11,-0x24,0x25)]);if(_0x53e888&&_0x53e888['startsWith'](_0x8529b5[_0x4b4ef3(-0x9f,-0x13f,-0x106,-0x139)])){_0x13470d[_0x4b4ef3(-0x59,-0x28,-0x8b,-0xcf)]=_0x53e888,_0x13470d[_0x4b4ef3(-0x177,-0x13d,-0x127,-0xc5)][_0x4ea50e(-0x17,-0x53,0x54,-0x89)]=_0x4b4ef3(-0x143,-0x61,-0xd4,-0x12f),_0x51f879[_0x4b4ef3(-0xbf,-0x14c,-0x127,-0x150)][_0x4b4ef3(-0x146,-0x138,-0x107,-0x151)]=_0x8529b5[_0x4b4ef3(-0xba,-0x1a3,-0x12f,-0xd4)],_0x32a920['style']['display']=_0x8529b5[_0x4b4ef3(-0x166,-0x10d,-0xf6,-0xb2)];const _0x3195dc=_0x53e888['split'](','),_0x27caa6=_0x3195dc[-0xa94+0x12df*0x1+-0xc1*0xb][_0x4b4ef3(-0xf4,-0x109,-0xd2,-0x61)](':')[-0x2218*0x1+-0x195f+0x3b78][_0x4ea50e(0x1e,0x1,-0x11,0x96)](';')[0x2*-0x1367+0x1*0xda+0x25f4];nai3CharRefImageMimeType=_0x27caa6,window[_0x4ea50e(0xe,0x5e,0x48,0x58)+_0x4b4ef3(-0x140,-0x116,-0x128,-0x122)]=_0x3195dc[-0x23cb+0x22a4+0x4*0x4a];const _0xdbdc56={};_0xdbdc56['id']=NAI_CHAR_REF_CACHE_KEY,_0xdbdc56[_0x4b4ef3(-0x79,-0x9e,-0x86,-0x69)]=_0x53e888,dbs[_0x4b4ef3(-0x130,-0x14b,-0x130,-0x129)+_0x4ea50e(-0x30,0x1d,-0x58,-0x7a)](_0xdbdc56);}else{if(_0x8529b5['BOwQD'](_0x8529b5[_0x4ea50e(0x31,0x24,0x67,-0x2f)],_0x8529b5[_0x4ea50e(0x31,-0x5,0x30,0x5c)])){const _0x2f1c7b=_0x8529b5[_0x4b4ef3(-0x124,-0x5d,-0xb9,-0xe7)][_0x4b4ef3(-0xb7,-0x7b,-0xd2,-0xfa)]('|');let _0x299736=-0x1*0x1dee+-0x1*0x1981+0x1*0x376f;while(!![]){switch(_0x2f1c7b[_0x299736++]){case'0':_0x32a920[_0x4ea50e(-0x37,-0x7a,-0x16,0xd)]['display']=_0x8529b5[_0x4ea50e(-0x3f,-0x76,-0x96,-0x85)];continue;case'1':window['nai3CharRe'+'fImage']=null;continue;case'2':_0x13470d[_0x4ea50e(-0x37,-0xf,-0x76,0x2e)][_0x4ea50e(-0x17,0x14,-0x31,0x23)]=_0x8529b5['WHzqI'];continue;case'3':_0x51f879[_0x4ea50e(-0x37,-0xa3,-0x92,-0x7e)]['display']=_0x8529b5[_0x4b4ef3(-0x163,-0x13a,-0x134,-0x17a)];continue;case'4':_0x13470d[_0x4ea50e(0x65,0x44,0xd6,0x96)]='';continue;}break;}}else{_0x18ded3['src']=_0x567fbd,_0x5c03c6[_0x4b4ef3(-0x109,-0x12a,-0x127,-0x159)]['display']=_0x8529b5['cUUNb'],_0x3da115['style'][_0x4b4ef3(-0xf1,-0x13f,-0x107,-0xa3)]=_0x8529b5[_0x4ea50e(-0x3f,-0x9f,-0x7f,-0x94)],_0x5e6a89[_0x4ea50e(-0x37,-0x51,-0x6f,-0x3b)][_0x4b4ef3(-0x13d,-0x145,-0x107,-0x103)]=_0x8529b5['rlaKB'];const _0x121936=_0x6bd45e['split'](','),_0x1b94c0=_0x121936[-0x1fa4+-0x5*-0x506+-0x14e*-0x5][_0x4b4ef3(-0x8d,-0x5f,-0xd2,-0x86)](':')[0x371+0x1*-0x617+0x7*0x61][_0x4ea50e(0x1e,0x5f,0x1d,-0x2a)](';')[0x1d63+-0x6d*0x37+0x1*-0x5f8];_0xdb076e=_0x1b94c0,_0x1a5ebf[_0x4ea50e(0xe,-0x62,-0x1c,0x77)+_0x4ea50e(-0x38,-0x71,-0x15,0x3b)]=_0x121936[0x4*0x6f7+0x48a+-0x2065];const _0x317938={};_0x317938['id']=_0x4157b3,_0x317938[_0x4b4ef3(-0x6b,-0x79,-0x86,-0x3b)]=_0x5b002e,_0xe1afc7['storeReadW'+'rite'](_0x317938);}}}function removeNovelaiCharRefImage(){const _0x40f4f2={'maNBO':function(_0x7ef0f2,_0x923c86){return _0x7ef0f2(_0x923c86);}};function _0x175e1c(_0x1b7b67,_0x55a956,_0x18ad09,_0x3dc980){return _0x5b7292(_0x55a956- -0x25c,_0x18ad09,_0x18ad09-0x109,_0x3dc980-0x130);}_0x40f4f2[_0x1dafda(0x5e,0xb1,0x10,-0x18)](updateNovelaiCharRefImagePreview,null);function _0x1dafda(_0x5ced30,_0x12b53e,_0x490841,_0x55b777){return _0x5b7292(_0x5ced30- -0x257,_0x490841,_0x490841-0x59,_0x55b777-0x97);}dbs[_0x1dafda(0x6f,0x29,0xaf,0xcd)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x5e2fd5){function _0x188a91(_0x4d618f,_0xaacae0,_0x270fb5,_0x2cb9e8){return _0x5b7292(_0x270fb5- -0x47b,_0x4d618f,_0x270fb5-0x1a,_0x2cb9e8-0x26);}const _0x555dbe={'dfSOd':function(_0x33ef79,_0xbee20e){return _0x33ef79!==_0xbee20e;},'dpzhs':_0x188a91(-0x280,-0x22b,-0x244,-0x2ab),'qxuet':function(_0x502283,_0x440f15){return _0x502283(_0x440f15);},'CGruA':'Error\x20proc'+_0x188a91(-0x11e,-0x157,-0x197,-0x1a2)+_0x1dc198(0xed,0x6a,0x99,0x98)+_0x1dc198(0xd2,0x9d,0xa7,0x99),'HtMZx':function(_0x32a7f9,_0x7060ba){return _0x32a7f9+_0x7060ba;},'FUWko':_0x1dc198(0x151,0x1a1,0x13e,0x167)},_0x2b942d=_0x5e2fd5['target']['files'][-0xc9+-0x5*-0x74f+0x23c2*-0x1];function _0x1dc198(_0xc2ba73,_0x108de5,_0x38a4b3,_0x40ea2b){return _0x4b1f0a(_0xc2ba73-0x1b,_0x108de5-0x160,_0x40ea2b,_0x38a4b3-0x2b3);}if(!_0x2b942d)return;try{if(_0x555dbe[_0x1dc198(0xae,0x127,0xfe,0x119)](_0x555dbe['dpzhs'],'bQeWj')){if(_0xe4a97b){const _0x39f4b8=_0xdb6ad7['apply'](_0x435416,arguments);return _0x18658f=null,_0x39f4b8;}}else{const _0x5df89=await processUploadedImage(_0x2b942d);_0x555dbe[_0x188a91(-0x1f5,-0x208,-0x1f3,-0x1c9)](updateNovelaiCharRefImagePreview,_0x5df89);}}catch(_0x582968){console['error'](_0x555dbe[_0x188a91(-0x1e7,-0x259,-0x1ed,-0x1b7)],_0x582968),_0x555dbe[_0x188a91(-0x26b,-0x200,-0x1f3,-0x1fb)](alert,_0x555dbe['HtMZx'](_0x555dbe[_0x1dc198(0x1b,0x9e,0x84,0xe)],_0x582968[_0x1dc198(0x97,0x119,0xa5,0x92)]));}}function updateComfyUIImagePreview(_0x4c680d){const _0x305505={};_0x305505['lXWUD']=_0x323416(0x24f,0x272,0x23e,0x264)+_0x323416(0x2da,0x2d7,0x20f,0x260),_0x305505['wytjD']='blob:',_0x305505['OGJDt']=function(_0x2d01a3,_0x565654){return _0x2d01a3!==_0x565654;},_0x305505[_0x323416(0x295,0x26c,0x244,0x240)]=_0x323416(0x21d,0x28c,0x1e2,0x236),_0x305505['hMOsn']=_0x323416(0x1ea,0x1b3,0x1a6,0x1de);function _0x2c8226(_0x33f397,_0x2c80da,_0x3a803b,_0x363cab){return _0x4b1f0a(_0x33f397-0xf5,_0x2c80da-0x29,_0x33f397,_0x2c80da-0x2c8);}_0x305505[_0x323416(0x268,0x23d,0x23b,0x22b)]=_0x323416(0x1ff,0x200,0x201,0x20d)+'x';const _0x99e529=_0x305505,_0x2baff5=document[_0x2c8226(0x96,0xa7,0x89,0xfc)+_0x2c8226(0x12e,0xb6,0x10d,0x90)](_0x99e529[_0x323416(0x22d,0x1f6,0x27b,0x23b)]);function _0x323416(_0x357302,_0x58ac15,_0x58e0f6,_0x5f1046){return _0x4b1f0a(_0x357302-0x100,_0x58ac15-0x1d2,_0x58ac15,_0x5f1046-0x430);}const _0x5729c5=document[_0x2c8226(0x5c,0x92,0x7f,0x105)+'tor'](_0x2c8226(0x17d,0x10f,0x140,0x170)+_0x323416(0x286,0x237,0x24f,0x22a)+'ew-contain'+_0x2c8226(0xe4,0xc1,0x128,0x70)+_0x2c8226(0x8f,0xc5,0x136,0x55)+_0x2c8226(0x108,0xe5,0x110,0x10a)+'r'),_0x25fc11=document[_0x2c8226(0xd5,0xa7,0xfe,0x51)+_0x323416(0x261,0x20b,0x1b5,0x21e)]('comfyui-re'+_0x2c8226(0xa5,0x85,0x6b,0x90)+'-btn');_0x2baff5[_0x323416(0x2c1,0x208,0x231,0x27f)]&&_0x2baff5[_0x2c8226(0xbf,0x117,0x112,0xa3)][_0x2c8226(0xbf,0x124,0x18f,0xbf)](_0x99e529[_0x2c8226(0x18f,0x144,0x154,0xd2)])&&_0x99e529['OGJDt'](_0x2baff5[_0x2c8226(0xe8,0x117,0x145,0x160)],_0x4c680d)&&URL[_0x323416(0x1ee,0x259,0x28a,0x257)+'ctURL'](_0x2baff5['src']),_0x4c680d?(_0x2baff5['src']=_0x4c680d,_0x2baff5[_0x2c8226(0x8e,0x7b,0xc3,0xeb)]['display']=_0x99e529[_0x2c8226(0xe1,0xd8,0xb1,0x107)],_0x5729c5['style'][_0x323416(0x265,0x1cb,0x213,0x203)]=_0x99e529[_0x323416(0x28c,0x284,0x2f0,0x2b4)],_0x25fc11[_0x323416(0x1e7,0x24b,0x1de,0x1e3)][_0x323416(0x210,0x21b,0x1ea,0x203)]=_0x99e529['MTkKM']):(_0x2baff5[_0x2c8226(0x174,0x117,0x119,0xac)]='',_0x2baff5[_0x323416(0x1fd,0x1a2,0x208,0x1e3)][_0x2c8226(0xa8,0x9b,0x76,0x8a)]=_0x99e529[_0x323416(0x267,0x285,0x249,0x2b4)],_0x5729c5[_0x2c8226(0x62,0x7b,0x8e,0x9f)][_0x2c8226(0xf5,0x9b,0xd6,0x32)]=_0x323416(0x1ea,0x254,0x207,0x20b),_0x25fc11[_0x2c8226(0x71,0x7b,0xba,0x89)]['display']=_0x99e529[_0x323416(0x2d9,0x294,0x283,0x2b4)],window['comfyuican'+_0x323416(0x262,0x240,0x1e2,0x254)]=null,comfyuiImageObjectURL=null);}function removeComfyUIImage(){const _0x568ec2={'uYHZe':function(_0x4d976f,_0x186af4){return _0x4d976f(_0x186af4);}};function _0x1a3cc1(_0x51bf9b,_0x1ab456,_0x524f3d,_0x6d889a){return _0x4b1f0a(_0x51bf9b-0xeb,_0x1ab456-0x1bf,_0x1ab456,_0x51bf9b-0x87);}function _0x99b87b(_0x15582a,_0x1c24e7,_0x3d6d8d,_0x2bc8da){return _0x5b7292(_0x15582a- -0x361,_0x3d6d8d,_0x3d6d8d-0x15c,_0x2bc8da-0x158);}_0x568ec2[_0x99b87b(-0xcb,-0xa6,-0x120,-0xda)](updateComfyUIImagePreview,null),dbs[_0x99b87b(-0x9b,-0xdf,-0xf1,-0x68)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x1cfb3b){const _0x58c980={'aefEl':_0x5c4a45(-0x3f,0xa,0x69,0x59)+_0x429a92(0x485,0x4fc,0x43c,0x41e),'ytXZY':function(_0x36e6f5,_0x2d97f6){return _0x36e6f5===_0x2d97f6;},'puSED':_0x429a92(0x3f6,0x45a,0x3fb,0x422),'zHVyC':function(_0x1f450d,_0x116817){return _0x1f450d(_0x116817);},'hbsva':function(_0x2038e8,_0x405495){return _0x2038e8(_0x405495);},'ZyNgn':function(_0x1536d3,_0x1ec9d1){return _0x1536d3(_0x1ec9d1);},'TAeUl':_0x429a92(0x460,0x3e9,0x3f8,0x43f)+_0x429a92(0x3f7,0x3c5,0x3ce,0x3ae),'BGRtt':function(_0x15c29a){return _0x15c29a();},'pPdnn':function(_0x28de7f,_0x1f6bda,_0x35a516){return _0x28de7f(_0x1f6bda,_0x35a516);},'cFtsY':_0x429a92(0x39c,0x387,0x341,0x340),'SHODC':function(_0x206806,_0x2842c3){return _0x206806(_0x2842c3);},'KpeeC':_0x429a92(0x3a0,0x32b,0x327,0x332)+_0x429a92(0x3d2,0x41a,0x3d9,0x369),'ytfPT':function(_0x124d74,_0x2d47d1){return _0x124d74+_0x2d47d1;},'dDUZd':_0x5c4a45(-0x37,-0x2a,0x44,-0x79),'RIlqS':function(_0x369880){return _0x369880();},'MnEfj':function(_0x4599ec,_0x72b7ec){return _0x4599ec+_0x72b7ec;},'SRDTG':_0x429a92(0x3c4,0x432,0x37e,0x373)+':'},_0xff4a38=extension_settings[extensionName],_0x4fd9c2=_0x1cfb3b[_0x429a92(0x3dc,0x417,0x3cc,0x44d)][_0x5c4a45(-0x8,0x43,-0xf,0x84)][0x17*-0x3b+-0x3f*0x43+0x15ca];function _0x5c4a45(_0x1ee734,_0x3af837,_0x12148b,_0x1f2c2c){return _0x5b7292(_0x3af837- -0x2ac,_0x1f2c2c,_0x12148b-0x1d8,_0x1f2c2c-0x130);}function _0x429a92(_0x5d62b2,_0x404db0,_0x7d1154,_0x2b81e7){return _0x5b7292(_0x5d62b2-0x184,_0x7d1154,_0x7d1154-0xd7,_0x2b81e7-0xde);}if(!_0x4fd9c2)return;try{const _0x52eb02=await _0x58c980['zHVyC'](processUploadedImageToBlob,_0x4fd9c2),_0x47080b=URL['createObje'+_0x429a92(0x43c,0x427,0x414,0x3d6)](_0x52eb02);comfyuiImageObjectURL=_0x47080b,_0x58c980['hbsva'](updateComfyUIImagePreview,_0x47080b);const _0x1bc098=new FormData();_0x1bc098[_0x429a92(0x47c,0x4eb,0x449,0x4b8)]('image',_0x52eb02,_0x4fd9c2[_0x429a92(0x3db,0x432,0x36a,0x3a4)]);let _0x49804d=_0xff4a38[_0x5c4a45(-0x89,-0x10,0xc,-0x86)]['trim']();if(!_0x49804d){_0x58c980[_0x429a92(0x445,0x3fd,0x489,0x48e)](alert,_0x58c980[_0x429a92(0x3e4,0x45b,0x45e,0x443)]),_0x58c980[_0x5c4a45(-0x13,-0x29,0x16,0x2f)](removeComfyUIImage);return;}const _0x14677c=await _0x58c980[_0x5c4a45(-0xde,-0x77,-0x68,-0x1b)](fetch,_0x49804d+(_0x5c4a45(-0x36,0x42,0x3c,0x85)+_0x5c4a45(0x5f,0x51,0x9b,0x35)),{'method':_0x58c980[_0x429a92(0x425,0x425,0x491,0x3f2)],'body':_0x1bc098});if(_0x14677c['ok']){const _0x15ff86=await _0x14677c['json']();window[_0x5c4a45(-0x87,-0x32,-0xac,0xd)+_0x5c4a45(-0x4,-0x18,-0x54,-0x40)]=_0x15ff86['name'],_0x58c980[_0x429a92(0x3a4,0x37d,0x3b3,0x3b4)](addLog,'图片上传成功,\x20服务'+'器返回数据:\x20'+JSON['stringify'](_0x15ff86)),console[_0x5c4a45(0x4,-0x53,-0xba,-0x4a)](_0x58c980[_0x429a92(0x40a,0x41c,0x449,0x416)],_0x15ff86);const _0x3d423c=new FileReader();_0x3d423c[_0x5c4a45(-0x5,-0x23,-0x29,0x51)]=()=>{function _0x4fe277(_0xdce1b,_0x9d8672,_0x398aa5,_0x54f783){return _0x429a92(_0xdce1b- -0x129,_0x9d8672-0xd7,_0x54f783,_0x54f783-0x1ec);}function _0x52c33b(_0x490f2e,_0x295a59,_0x410b43,_0x139f9a){return _0x5c4a45(_0x490f2e-0xc7,_0x490f2e- -0x22d,_0x410b43-0x1d1,_0x139f9a);}if(_0x58c980['ytXZY'](_0x58c980[_0x52c33b(-0x200,-0x251,-0x20d,-0x1ba)],_0x58c980[_0x4fe277(0x334,0x378,0x319,0x37c)])){const _0x4bbfd2=_0x3d423c[_0x52c33b(-0x2c2,-0x2ae,-0x2c9,-0x271)],_0x21c92a={};_0x21c92a[_0x4fe277(0x31f,0x32b,0x2c9,0x2e9)]=_0x4bbfd2,_0x21c92a[_0x4fe277(0x335,0x32f,0x2e8,0x3a8)+'Name']=_0x15ff86['name'];const _0x54ec06=_0x21c92a,_0x151298={};_0x151298['id']=COMFYUI_REF_CACHE_KEY,_0x151298[_0x4fe277(0x31f,0x2c6,0x2f9,0x2d4)]=_0x54ec06,dbs['storeReadW'+_0x4fe277(0x285,0x21c,0x2a5,0x240)](_0x151298);}else _0x3230bb[_0x4fe277(0x2aa,0x231,0x231,0x298)+_0x4fe277(0x2b9,0x268,0x292,0x2e1)](_0x58c980[_0x4fe277(0x2a2,0x254,0x2bf,0x25c)])['click']();},_0x3d423c[_0x429a92(0x3f5,0x3d0,0x425,0x3c0)+'URL'](_0x52eb02);}else{const _0x20a63f=await _0x14677c['text']();alert(_0x58c980[_0x5c4a45(-0x84,-0xd,-0x43,-0x45)]('上传失败:\x20',_0x20a63f)),_0x58c980[_0x5c4a45(-0xf,-0x35,-0x7a,-0x28)](addLog,_0x429a92(0x395,0x339,0x407,0x3c9)+'详情:\x20'+_0x20a63f),console['error'](_0x58c980[_0x429a92(0x3e1,0x3ca,0x3ea,0x3d0)],_0x20a63f),_0x58c980[_0x5c4a45(-0xa2,-0x7b,-0x82,-0x84)](removeComfyUIImage);}}catch(_0x17b1c9){_0x58c980[_0x429a92(0x3a4,0x35f,0x3f9,0x3a1)](alert,_0x58c980['MnEfj'](_0x429a92(0x3c4,0x34b,0x365,0x439)+':\x20',_0x17b1c9[_0x5c4a45(-0xbc,-0x4a,0x15,-0x3f)])),console[_0x429a92(0x47d,0x455,0x40a,0x4cd)](_0x58c980[_0x5c4a45(0x4c,0x28,0x9c,0xa)],_0x17b1c9),_0x58c980[_0x429a92(0x3fb,0x3a0,0x470,0x398)](addLog,_0x429a92(0x395,0x34d,0x38c,0x37e)+_0x5c4a45(-0x83,-0x5c,-0x83,-0x50)+JSON[_0x5c4a45(-0x35,-0x60,-0x28,-0x43)](_0x17b1c9)),_0x58c980['BGRtt'](removeComfyUIImage);}}async function loadCachedImages(){const _0x2ca948={'hbzTO':function(_0x3564eb){return _0x3564eb();},'qZBuH':_0x3ae2a8(-0x3b,-0x63,-0x6,0x36),'KHuLy':_0x46311b(-0x216,-0x203,-0x206,-0x27d),'SPJDX':_0x3ae2a8(-0x64,-0xf,-0xa4,-0xc4)+'x','zXiko':_0x46311b(-0x1e8,-0x12a,-0x180,-0x14d)+'ge_novelai','lTSSC':'#novelai-i'+_0x3ae2a8(-0x47,0x3,-0x93,-0x17)+_0x3ae2a8(-0x7d,-0x58,-0x6a,-0x55)+_0x3ae2a8(-0x48,-0x11,0x29,-0x12)+_0x3ae2a8(-0x44,-0x78,-0x58,-0x7f)+_0x3ae2a8(-0x24,-0x2e,-0x5d,-0x83)+'r','BMAcx':_0x3ae2a8(-0x89,-0x8b,-0x7c,-0x73)+_0x46311b(-0x182,-0x269,-0x1f7,-0x24b)+_0x3ae2a8(-0x60,-0x5f,-0x3e,-0x79),'fNyDn':_0x3ae2a8(-0x88,-0x40,-0x6b,-0x9b),'JqZys':_0x3ae2a8(-0x66,-0x41,-0x83,-0xcc),'MpzVH':function(_0xb7922e,_0x132591){return _0xb7922e===_0x132591;},'LlfOg':_0x3ae2a8(-0xc,0x46,-0x42,-0xc),'kcTpv':function(_0x586d7d,_0x16274a){return _0x586d7d(_0x16274a);},'yRBjP':function(_0x1e7862,_0x204f7f){return _0x1e7862!==_0x204f7f;},'HFkKN':_0x3ae2a8(-0x5e,-0x73,-0x28,-0x8)+_0x46311b(-0x199,-0x1b5,-0x1fd,-0x19c)+'\x20NovelAI\x20V'+'ibe\x20image:','JivBa':_0x46311b(-0x24a,-0x20e,-0x1d1,-0x174)+_0x3ae2a8(-0x8a,-0xa5,-0x42,-0x78)+_0x46311b(-0x240,-0x225,-0x1fe,-0x1aa)+_0x3ae2a8(-0x42,-0xaf,-0xb3,0xa)+'age:','Obgmz':function(_0x178bd4,_0x12fd3e){return _0x178bd4===_0x12fd3e;},'mpTII':_0x3ae2a8(-0x94,-0x24,-0x52,-0xc8),'MbLTg':_0x3ae2a8(-0x90,-0xc9,-0x5e,-0x2d),'lKhvu':function(_0x4439ea,_0x6f9759){return _0x4439ea(_0x6f9759);},'rZhJn':function(_0x5e310b,_0x5d60a5){return _0x5e310b(_0x5d60a5);},'enRJS':function(_0x3b7653,_0x5cc5df){return _0x3b7653(_0x5cc5df);},'zObuF':_0x3ae2a8(0x34,0x7e,0x46,0x7d),'DjAzY':function(_0x4373a6,_0x4564ff){return _0x4373a6(_0x4564ff);},'KvNLT':function(_0x18ace1,_0x507a38){return _0x18ace1!==_0x507a38;},'SWvMm':_0x46311b(-0xe6,-0x12c,-0x139,-0x161),'DAEFY':_0x46311b(-0x1cd,-0x21f,-0x1d1,-0x1b5)+'ing\x20cached'+_0x3ae2a8(0x26,0x7c,0x27,0x42)+'mage:'};await dbs[_0x46311b(-0x20c,-0x169,-0x1e2,-0x22a)]();try{if(_0x2ca948[_0x3ae2a8(-0x98,-0x3a,-0xe3,-0x107)](_0x2ca948[_0x3ae2a8(-0x8c,-0xcc,-0xd2,-0x47)],_0x3ae2a8(-0xc,0x11,-0x59,-0x1b))){const _0x1ae468=await dbs['storeReadO'+'nly'](NAI_VIBE_CACHE_KEY);_0x1ae468&&_0x1ae468[_0x3ae2a8(0x13,0x66,0x2e,0x62)]&&_0x2ca948['kcTpv'](updateNovelaiImagePreview,_0x1ae468['data']);}else _0x2ca948[_0x3ae2a8(0x21,-0x2e,0x2a,0x97)](_0x1ee961);}catch(_0x5becab){_0x2ca948[_0x3ae2a8(0x45,0x23,0x2c,0x39)]('Pswlv',_0x46311b(-0x164,-0x15c,-0x128,-0xcb))?console[_0x3ae2a8(0x48,-0x19,0x1a,0x8)](_0x2ca948[_0x3ae2a8(-0x86,-0xbd,-0xf1,-0x94)],_0x5becab):(_0x5ac322[_0x3ae2a8(0xe,-0x40,0x4,0x45)]=_0x8da324,_0x2dec44['style'][_0x46311b(-0x251,-0x171,-0x1e1,-0x233)]=_0x2ca948[_0x3ae2a8(0x2e,0x3f,-0x13,-0x8)],_0x58bfcd[_0x3ae2a8(-0x8e,-0x96,-0x50,-0xd5)][_0x46311b(-0x173,-0x254,-0x1e1,-0x194)]=_0x2ca948[_0x3ae2a8(-0x82,-0xbd,-0x36,-0x52)],_0x2b7206['style'][_0x46311b(-0x170,-0x24a,-0x1e1,-0x18d)]=_0x2ca948['SPJDX']);}function _0x46311b(_0x2405c1,_0x5d53da,_0x326f24,_0x3aaf04){return _0x4b1f0a(_0x2405c1-0x9f,_0x5d53da-0x137,_0x5d53da,_0x326f24-0x4c);}try{const _0x37448b=await dbs[_0x46311b(-0x174,-0x104,-0x149,-0x15e)+_0x46311b(-0x20f,-0x1c7,-0x214,-0x1d0)](NAI_CHAR_REF_CACHE_KEY);_0x37448b&&_0x37448b[_0x3ae2a8(0x13,-0xf,-0xf,-0x3e)]&&updateNovelaiCharRefImagePreview(_0x37448b[_0x46311b(-0xfd,-0x10f,-0x160,-0x161)]);}catch(_0x238f3c){console[_0x46311b(-0x12a,-0x10e,-0x12b,-0xf7)](_0x2ca948['JivBa'],_0x238f3c);}function _0x3ae2a8(_0x552600,_0x1d471b,_0x46e197,_0x50c959){return _0x5b7292(_0x552600- -0x2b1,_0x1d471b,_0x46e197-0x14f,_0x50c959-0x16e);}try{if(_0x2ca948[_0x46311b(-0x10d,-0x194,-0x15c,-0x14a)](_0x2ca948['mpTII'],_0x2ca948[_0x46311b(-0x12d,-0x16e,-0x171,-0x112)]))_0x3a3e2a['revokeObje'+'ctURL'](_0x946c5f[_0x46311b(-0x128,-0x1b2,-0x165,-0x1dd)]);else{const _0x371672=await dbs[_0x46311b(-0x1a4,-0x11b,-0x149,-0x17e)+_0x3ae2a8(-0xa1,-0x7c,-0x49,-0xbe)](COMFYUI_REF_CACHE_KEY);if(_0x371672&&_0x371672[_0x46311b(-0x11f,-0x1b9,-0x160,-0x1b8)]&&_0x371672[_0x3ae2a8(0x13,0x83,0x19,0x4d)]['data']&&_0x371672[_0x3ae2a8(0x13,0x80,0x1e,-0x43)]['serverFile'+_0x46311b(-0x11f,-0x165,-0x195,-0x1f8)]){const _0xdf5d63=_0x371672[_0x3ae2a8(0x13,-0x16,-0x36,0x45)],_0x247603=await _0x2ca948[_0x46311b(-0x17d,-0x148,-0x1a0,-0x159)](fetch,_0xdf5d63[_0x46311b(-0x1c3,-0x186,-0x160,-0xec)]),_0x31ca1e=await _0x247603[_0x46311b(-0x10a,-0x1b1,-0x166,-0x19d)](),_0x1fe64b=URL[_0x3ae2a8(-0x13,-0xc,-0x16,-0x42)+_0x3ae2a8(0x7,-0x35,0x3c,0x73)](_0x31ca1e);_0x2ca948['rZhJn'](updateComfyUIImagePreview,_0x1fe64b),comfyuiImageObjectURL=_0x1fe64b,window['comfyuican'+_0x3ae2a8(-0x1d,0x53,0x41,0x50)]=_0xdf5d63[_0x3ae2a8(0x29,0x2f,-0x14,0x44)+_0x3ae2a8(-0x22,-0x40,0x23,0x43)],_0x2ca948['enRJS'](addLog,_0x46311b(-0x14b,-0x178,-0x16a,-0x197)+_0x3ae2a8(-0x3c,-0x62,-0x2f,0x2e)+_0xdf5d63[_0x3ae2a8(0x29,0x60,0x6e,0x32)+_0x3ae2a8(-0x22,-0x4,0x4a,-0x17)]),console[_0x46311b(-0x207,-0x1c6,-0x1cb,-0x18e)](_0x46311b(-0x17a,-0x189,-0x1a6,-0x1f0)+_0x46311b(-0x27f,-0x1d5,-0x211,-0x21b)+_0x3ae2a8(-0x38,-0x2c,-0x72,-0x83)+_0x3ae2a8(-0x67,-0xd4,-0x71,-0xb9)+_0xdf5d63[_0x46311b(-0x1ad,-0x188,-0x14a,-0x196)+_0x46311b(-0x1c3,-0x16b,-0x195,-0x1e3)]);}else{if(_0x371672&&_0x2ca948[_0x3ae2a8(-0x98,-0x25,-0xb0,-0xa7)](typeof _0x371672['data'],_0x2ca948[_0x3ae2a8(-0xf,-0x4b,-0x21,-0x63)])){if(_0x2ca948[_0x46311b(-0x14e,-0x124,-0x15c,-0x1a0)]('TnGaA',_0x46311b(-0x19b,-0x1fd,-0x187,-0x132))){const _0xcd5932=await _0x2ca948['kcTpv'](fetch,_0x371672[_0x46311b(-0x18a,-0x16e,-0x160,-0x132)]),_0x13da84=await _0xcd5932[_0x3ae2a8(0xd,-0x2e,0x37,0x29)](),_0x3828c6=URL[_0x46311b(-0x151,-0x18e,-0x186,-0x15c)+_0x46311b(-0x10f,-0x16e,-0x16c,-0xfa)](_0x13da84);_0x2ca948[_0x46311b(-0x247,-0x201,-0x1cf,-0x1e3)](updateComfyUIImagePreview,_0x3828c6),comfyuiImageObjectURL=_0x3828c6,console['warn']('Loaded\x20Com'+_0x3ae2a8(-0x9e,-0xc7,-0xc6,-0xb5)+_0x3ae2a8(-0x7e,-0x8c,-0x5,-0xde)+'cache\x20form'+_0x46311b(-0x1d5,-0x130,-0x161,-0x12b)+_0x3ae2a8(-0x55,-0x79,-0x61,-0x27)+_0x3ae2a8(-0x79,-0x6c,-0x8f,-0xae)+_0x46311b(-0x13a,-0xf6,-0x132,-0xe4)+_0x46311b(-0xf2,-0x184,-0x16b,-0xfb)+_0x3ae2a8(-0x1c,0x57,-0x45,0x40));}else _0x334bda(_0x5a5a8e['data']);}}}}catch(_0x49c74a){if(_0x2ca948[_0x3ae2a8(0x4f,-0x4,-0x2,0x16)](_0x46311b(-0x1e3,-0x1f0,-0x198,-0x120),_0x2ca948[_0x3ae2a8(-0x6,0x1c,-0x49,-0x74)]))console[_0x46311b(-0x171,-0x185,-0x12b,-0xe8)](_0x2ca948['DAEFY'],_0x49c74a);else{const _0x4dc8f3=_0x2519f8[_0x3ae2a8(-0x62,-0xc8,-0x49,0x17)+_0x46311b(-0x219,-0x1ee,-0x1c6,-0x202)](_0x2ca948[_0x3ae2a8(0x1c,0x50,0x5b,-0x4)]),_0x24c3ad=_0x3fcdf3[_0x3ae2a8(-0x77,-0x1c,-0x46,-0xa3)+_0x3ae2a8(0x3c,-0xd,-0x24,0x7f)](_0x2ca948[_0x3ae2a8(-0x6b,-0x55,-0x1c,-0xb3)]),_0x1596f8=_0x4eac84['getElement'+_0x46311b(-0x1e9,-0x1cc,-0x1c6,-0x20c)](_0x2ca948['BMAcx']);if(_0x24d6cd&&_0x3787be['startsWith'](_0x2ca948[_0x46311b(-0x1ea,-0x1ae,-0x1b6,-0x151)])){_0x4dc8f3[_0x3ae2a8(0xe,0x16,0x73,-0x4c)]=_0x1e12f1,_0x4dc8f3['style'][_0x46311b(-0x250,-0x18a,-0x1e1,-0x1cb)]=_0x2ca948['qZBuH'],_0x24c3ad[_0x3ae2a8(-0x8e,-0xb4,-0x65,-0xed)][_0x46311b(-0x1b1,-0x234,-0x1e1,-0x16c)]=_0x2ca948[_0x46311b(-0x1aa,-0x253,-0x1f5,-0x259)],_0x1596f8[_0x46311b(-0x225,-0x261,-0x201,-0x1ad)][_0x3ae2a8(-0x6e,-0x19,-0xc3,0x6)]=_0x2ca948[_0x46311b(-0x1c8,-0x274,-0x212,-0x238)];const _0x16908c=_0x793c67[_0x46311b(-0x1cd,-0x19b,-0x1ac,-0x19e)](','),_0x1048b9=_0x16908c[-0x2*0x10a2+-0x133*-0x1+0x2011][_0x46311b(-0x1f4,-0x150,-0x1ac,-0x14f)](':')[-0x1786+0x6d3*0x1+0x10b4]['split'](';')[-0x1*-0x20c+-0x1bf7*0x1+0x19eb];_0xf78a49=_0x1048b9,_0x583ab1['nai3VibeTr'+_0x3ae2a8(0x31,-0x37,0x8a,0xe)+'e']=_0x16908c[-0xa7b*-0x1+0x1*-0xe24+0x3aa];const _0x40baaa={};_0x40baaa['id']=_0x33efbf,_0x40baaa[_0x3ae2a8(0x13,0x65,0x0,0x6)]=_0x2a2f4c,_0x4dd768[_0x46311b(-0x198,-0x1c9,-0x20a,-0x271)+'rite'](_0x40baaa);}else _0x4dc8f3[_0x46311b(-0x1c4,-0xf4,-0x165,-0x17f)]='',_0x4dc8f3[_0x46311b(-0x22a,-0x1cc,-0x201,-0x191)][_0x46311b(-0x189,-0x1fd,-0x1e1,-0x16c)]=_0x2ca948[_0x3ae2a8(-0x82,-0xc6,-0x70,-0xe4)],_0x24c3ad[_0x46311b(-0x1a8,-0x1f0,-0x201,-0x1b1)][_0x46311b(-0x24e,-0x256,-0x1e1,-0x18f)]=_0x2ca948['JqZys'],_0x1596f8[_0x3ae2a8(-0x8e,-0xc3,-0xfa,-0xa9)][_0x46311b(-0x16f,-0x1d2,-0x1e1,-0x236)]=_0x2ca948[_0x46311b(-0x1e0,-0x1dc,-0x1f5,-0x251)],_0x54b6d9[_0x46311b(-0x1ea,-0x1ce,-0x210,-0x276)+_0x3ae2a8(0x31,-0x19,-0x26,-0x35)+'e']=null;}}}export function initImageUpload(_0x44e1eb){function _0x2f06a4(_0x34092d,_0x5ec8c6,_0x1146b1,_0x5de54e){return _0x5b7292(_0x5ec8c6- -0x22,_0x5de54e,_0x1146b1-0xd5,_0x5de54e-0xea);}const _0x3b7aa5={'iLKXy':_0x10fb31(0x252,0x24d,0x316,0x2b7)+_0x10fb31(0x24d,0x29a,0x232,0x28b)+_0x10fb31(0x2d2,0x2bf,0x2f7,0x28a)+'har\x20Ref\x20im'+'age:','ssFHC':function(_0x2f6430,_0x2dacb3){return _0x2f6430===_0x2dacb3;},'RWPwz':_0x10fb31(0x389,0x39f,0x3a1,0x355),'JCTdD':_0x10fb31(0x2ba,0x25f,0x23a,0x2a0),'ugxCf':function(_0xea9805){return _0xea9805();},'eNKzL':_0x2f06a4(0x2bd,0x254,0x266,0x1e1),'WmzUp':_0x2f06a4(0x256,0x22b,0x258,0x27e)+'x','VSmlF':function(_0x3b238b,_0x4dba17){return _0x3b238b===_0x4dba17;},'HXzGq':_0x10fb31(0x37c,0x386,0x387,0x320),'rIzDM':_0x10fb31(0x33e,0x342,0x28c,0x2ff),'IhxCS':_0x2f06a4(0x2d0,0x294,0x278,0x2eb)+_0x10fb31(0x279,0x2e6,0x258,0x2b6)+_0x2f06a4(0x2f0,0x292,0x26f,0x2e8),'LhrXu':function(_0x31bf8a,_0x3a3e57){return _0x31bf8a!==_0x3a3e57;},'dBGvs':'fhJmg','dkmIB':_0x10fb31(0x359,0x2ec,0x2e3,0x357),'VMGzL':function(_0x1897b6,_0x36c80b){return _0x1897b6(_0x36c80b);},'EXLao':'pVOrB','znsLl':_0x2f06a4(0x234,0x294,0x2f5,0x2fd)+'2','XEnJm':function(_0x7733a2){return _0x7733a2();},'qnJSW':function(_0x32ccc7){return _0x32ccc7();},'YEYqw':'#novelai-s'+_0x2f06a4(0x2bd,0x28c,0x229,0x25d)+'e-btn','DDUzw':_0x2f06a4(0x256,0x2af,0x2d3,0x2dd),'dMQTC':'#imageInpu'+_0x2f06a4(0x25d,0x29e,0x310,0x2ea),'iFRel':_0x2f06a4(0x262,0x244,0x252,0x26b),'pZvIj':_0x10fb31(0x2eb,0x25d,0x31e,0x2c5)+_0x2f06a4(0x2a6,0x243,0x20d,0x246)+_0x10fb31(0x271,0x2d4,0x285,0x2ad),'pPujA':_0x10fb31(0x26d,0x301,0x2e5,0x2e5)+_0x10fb31(0x2c6,0x2a2,0x377,0x316)+_0x2f06a4(0x210,0x278,0x2b2,0x2f0)+_0x2f06a4(0x218,0x22f,0x2a5,0x295),'ffGnQ':_0x2f06a4(0x252,0x28e,0x25b,0x2dd)+'t_nai_char'+_0x10fb31(0x24a,0x2a5,0x2df,0x296),'XkvZC':_0x2f06a4(0x26a,0x23f,0x2a9,0x1da)+_0x10fb31(0x2b8,0x372,0x36f,0x307)+'-ref-image'+_0x10fb31(0x28b,0x318,0x2c3,0x2b5),'rlGrp':_0x10fb31(0x34e,0x2cc,0x2b9,0x314)+'t2','sJOXd':_0x2f06a4(0x2f6,0x286,0x294,0x23f)+_0x10fb31(0x2e4,0x278,0x2f3,0x2c9)+_0x2f06a4(0x29e,0x227,0x1c5,0x1c1)};_0x3b7aa5[_0x2f06a4(0x2c8,0x2d3,0x33d,0x30d)](loadCachedImages),_0x44e1eb[_0x2f06a4(0x25f,0x2c8,0x27a,0x328)](_0x3b7aa5[_0x2f06a4(0x255,0x284,0x231,0x2db)])['on'](_0x3b7aa5['DDUzw'],()=>{function _0x4c6994(_0x46b9f3,_0x23d86a,_0x4a7f6d,_0x3e861a){return _0x10fb31(_0x46b9f3-0x30,_0x4a7f6d,_0x4a7f6d-0x176,_0x3e861a- -0x268);}function _0x545b7d(_0x17fc4f,_0x22ec42,_0xaffa5c,_0x106165){return _0x10fb31(_0x17fc4f-0x1f1,_0x22ec42,_0xaffa5c-0x132,_0x106165- -0x41a);}document['getElement'+_0x4c6994(0x5e,0xaa,0x80,0x5a)](_0x545b7d(-0x16c,-0xb1,-0xc8,-0x100)+_0x545b7d(-0xbc,-0x40,-0x79,-0xb5))['click']();}),_0x44e1eb[_0x10fb31(0x305,0x32d,0x32c,0x34e)](_0x3b7aa5['dMQTC'])['on'](_0x3b7aa5['iFRel'],handleNovelaiImageUpload),_0x44e1eb[_0x10fb31(0x32a,0x37b,0x3a9,0x34e)](_0x3b7aa5[_0x10fb31(0x2de,0x30b,0x2cb,0x321)])['on'](_0x2f06a4(0x2cd,0x2af,0x297,0x2cf),()=>{const _0x58eb2d={};function _0x410925(_0x3633bc,_0x4243c8,_0x353081,_0x4b2994){return _0x10fb31(_0x3633bc-0xca,_0x4243c8,_0x353081-0x160,_0x4b2994- -0x2a4);}function _0x1767cb(_0x1a2d43,_0x1a3760,_0x29b6d3,_0x4e9270){return _0x2f06a4(_0x1a2d43-0x1f3,_0x4e9270-0x8f,_0x29b6d3-0xe8,_0x1a3760);}_0x58eb2d[_0x410925(0x110,0xb5,0x117,0x9e)]=_0x3b7aa5['iLKXy'];const _0x450d2b=_0x58eb2d;_0x3b7aa5[_0x410925(0x63,0xde,0x10,0x69)](_0x3b7aa5[_0x410925(0x74,0x6d,0x3d,0x58)],_0x3b7aa5[_0x410925(-0xf,-0x73,-0x25,-0x1c)])?_0x236afe[_0x1767cb(0x304,0x37d,0x303,0x366)](_0x450d2b['UtXiT'],_0x3578a6):_0x3b7aa5[_0x410925(0xc7,0x83,0xa9,0x82)](removeNovelaiImage);}),_0x44e1eb['find'](_0x3b7aa5[_0x10fb31(0x390,0x34e,0x333,0x344)])['on'](_0x3b7aa5[_0x10fb31(0x259,0x274,0x2d2,0x29f)],()=>{const _0x9f231f={};_0x9f231f[_0x515227(-0x256,-0x226,-0x271,-0x20a)]=_0x3b7aa5['eNKzL'];function _0x515227(_0x38d0ba,_0x3c22e8,_0xdfab4f,_0x163dd0){return _0x2f06a4(_0x38d0ba-0xb6,_0xdfab4f- -0x497,_0xdfab4f-0xa2,_0x163dd0);}function _0x205a63(_0x5539c6,_0x17de34,_0x86b2c8,_0x53ffe1){return _0x10fb31(_0x5539c6-0xa5,_0x17de34,_0x86b2c8-0x12c,_0x5539c6-0x133);}_0x9f231f['qkQXm']=_0x3b7aa5['WmzUp'];const _0x1edef6=_0x9f231f;if(_0x3b7aa5[_0x205a63(0x413,0x3c4,0x3d4,0x3f8)](_0x3b7aa5[_0x205a63(0x403,0x448,0x396,0x3ba)],_0x3b7aa5[_0x205a63(0x46f,0x417,0x46f,0x430)])){_0x54fc02['src']=_0x3710f0,_0x500473[_0x515227(-0x30c,-0x250,-0x296,-0x2ee)][_0x205a63(0x3da,0x3b4,0x37b,0x3bc)]=_0x1edef6['Vmcei'],_0x1fb913[_0x515227(-0x282,-0x2db,-0x296,-0x287)][_0x205a63(0x3da,0x3c8,0x3a3,0x36b)]=_0x205a63(0x3b5,0x3d0,0x3c9,0x427),_0x52299e[_0x205a63(0x3ba,0x3e6,0x431,0x3c5)][_0x205a63(0x3da,0x446,0x442,0x433)]=_0x1edef6[_0x515227(-0x233,-0x269,-0x227,-0x263)];const _0x3890d1=_0x262ce6[_0x515227(-0x29f,-0x1f5,-0x241,-0x1c8)](','),_0x72449b=_0x3890d1[0x1ccd+-0x13cd+-0x900][_0x515227(-0x2b8,-0x27e,-0x241,-0x2ac)](':')[-0x2*0x406+-0x1a*0x29+0xc37]['split'](';')[-0x7*0x317+0x1cff+-0x75e];_0x4ec603=_0x72449b,_0x4e1449[_0x205a63(0x3ab,0x39e,0x33d,0x370)+_0x205a63(0x479,0x44b,0x4b2,0x4de)+'e']=_0x3890d1[0x1053+-0x721+0xb5*-0xd];const _0x1cc9f2={};_0x1cc9f2['id']=_0x235a60,_0x1cc9f2[_0x205a63(0x45b,0x466,0x3f5,0x49c)]=_0x2c6227,_0x50d654['storeReadW'+_0x205a63(0x3c1,0x34c,0x3b1,0x3de)](_0x1cc9f2);}else document['getElement'+_0x205a63(0x3f5,0x3f0,0x440,0x46a)](_0x3b7aa5[_0x205a63(0x448,0x43a,0x446,0x45e)])[_0x515227(-0x234,-0x1d6,-0x1e8,-0x20e)]();}),_0x44e1eb[_0x2f06a4(0x2e8,0x2c8,0x259,0x2dd)](_0x3b7aa5[_0x2f06a4(0x27e,0x21c,0x1e1,0x25a)])['on'](_0x10fb31(0x2df,0x25d,0x300,0x2ca),handleNovelaiCharRefImageUpload);function _0x10fb31(_0x1f0a99,_0x24d481,_0x2fe2c9,_0x15d54c){return _0x5b7292(_0x15d54c-0x64,_0x24d481,_0x2fe2c9-0x1f4,_0x15d54c-0x65);}_0x44e1eb[_0x2f06a4(0x2d8,0x2c8,0x2c7,0x302)](_0x3b7aa5[_0x2f06a4(0x29e,0x23d,0x277,0x22a)])['on'](_0x3b7aa5[_0x2f06a4(0x1f6,0x219,0x1a5,0x1dc)],()=>{function _0x3adea3(_0x88e58a,_0x2c59b0,_0x142df4,_0x2f1750){return _0x10fb31(_0x88e58a-0x16b,_0x88e58a,_0x142df4-0x47,_0x2c59b0- -0xd);}function _0x3fba6f(_0x1dbe5a,_0x52b138,_0x3fac94,_0x569988){return _0x10fb31(_0x1dbe5a-0x1f2,_0x569988,_0x3fac94-0x1b4,_0x3fac94- -0x313);}if(_0x3b7aa5[_0x3fba6f(-0x75,-0xa5,-0x48,-0x54)](_0x3b7aa5[_0x3fba6f(-0xc9,-0x3f,-0x9a,-0x72)],_0x3b7aa5[_0x3adea3(0x34a,0x327,0x373,0x34a)]))removeNovelaiCharRefImage();else{const _0xb9d32f=_0x347e1d?function(){function _0x2cc20b(_0x29d8cf,_0x32cf3a,_0x3b7a52,_0x51dc5a){return _0x3fba6f(_0x29d8cf-0xb5,_0x32cf3a-0xf8,_0x32cf3a-0x169,_0x51dc5a);}if(_0x1e55e0){const _0x5c9231=_0x1fbdb6[_0x2cc20b(0x184,0x1b4,0x181,0x19b)](_0x3ecf06,arguments);return _0x421d20=null,_0x5c9231;}}:function(){};return _0x57022b=![],_0xb9d32f;}}),_0x44e1eb[_0x2f06a4(0x335,0x2c8,0x289,0x285)]('#comfyui-s'+_0x2f06a4(0x2f0,0x28c,0x2bb,0x2a1)+_0x2f06a4(0x250,0x227,0x28f,0x1b3))['on'](_0x3b7aa5[_0x2f06a4(0x229,0x219,0x262,0x252)],()=>{function _0x42fc7d(_0x443777,_0x297050,_0x22f7e2,_0x452253){return _0x10fb31(_0x443777-0x158,_0x452253,_0x22f7e2-0x167,_0x443777- -0x554);}function _0x226bfb(_0x42aad5,_0x144c0b,_0x4c9641,_0x3712a8){return _0x2f06a4(_0x42aad5-0x1ad,_0x144c0b- -0x1a4,_0x4c9641-0x18c,_0x42aad5);}_0x42fc7d(-0x1f2,-0x20a,-0x1b7,-0x24e)===_0x3b7aa5[_0x42fc7d(-0x20d,-0x224,-0x23d,-0x1b7)]?document[_0x226bfb(0x3c,0x89,0x87,0x95)+_0x226bfb(0xa3,0x98,0x55,0xcd)](_0x3b7aa5[_0x42fc7d(-0x221,-0x1b9,-0x236,-0x247)])[_0x226bfb(0x14c,0x10b,0xed,0x14b)]():(_0x3b7aa5[_0x42fc7d(-0x271,-0x2c6,-0x2c6,-0x298)](_0x186042,null),_0x3c3e7b[_0x226bfb(0xd7,0x100,0x111,0xf1)+'e'](_0x54e0c7));}),_0x44e1eb[_0x10fb31(0x372,0x368,0x324,0x34e)](_0x3b7aa5[_0x10fb31(0x31f,0x25c,0x2ee,0x2be)])['on']('change',handleImageUpload2),_0x44e1eb[_0x2f06a4(0x278,0x2c8,0x2b1,0x338)](_0x3b7aa5[_0x10fb31(0x2e1,0x362,0x2e5,0x32b)])['on'](_0x3b7aa5['DDUzw'],()=>{function _0x306eae(_0x2bbf15,_0x141085,_0x3f2fd3,_0x2676d3){return _0x2f06a4(_0x2bbf15-0x3d,_0x141085-0x2d1,_0x3f2fd3-0x2d,_0x2676d3);}_0x3b7aa5[_0x306eae(0x571,0x534,0x4f7,0x533)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};