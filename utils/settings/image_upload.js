(function(_0x59cda8,_0x1ad5c4){function _0x2e4a98(_0x1fa210,_0x3d4ca4,_0x5d6888,_0x3293c4){return _0x59b3(_0x3d4ca4-0x27a,_0x3293c4);}const _0xccfe68=_0x59cda8();function _0xdad7c0(_0x23981b,_0x1bb082,_0x398bb2,_0x436c0b){return _0x59b3(_0x436c0b-0x11,_0x1bb082);}while(!![]){try{const _0x527a4b=-parseInt(_0xdad7c0(0x226,0x238,0x22c,0x1cd))/(0x1*0x10cd+0x30*-0x76+0xb*0x7c)*(-parseInt(_0xdad7c0(0x147,0x1c7,0x10e,0x175))/(-0x2105+-0xe8+0x21ef))+-parseInt(_0xdad7c0(0x13e,0x191,0x154,0x191))/(0xbba+0x2*-0x996+0x1*0x775)+-parseInt(_0x2e4a98(0x487,0x423,0x47d,0x483))/(0x18c8+0x27*0x2f+-0x1fed)+parseInt(_0xdad7c0(0x2a6,0x245,0x220,0x23c))/(-0x37d*0x2+0x1031+-0x932)+-parseInt(_0x2e4a98(0x42c,0x416,0x3ca,0x3fe))/(-0x1*-0x153b+-0x17*0xca+0x1*-0x30f)*(-parseInt(_0x2e4a98(0x3ab,0x402,0x3af,0x481))/(0x1f34*-0x1+0x9fb+0x1540))+-parseInt(_0xdad7c0(0x23a,0x1a1,0x204,0x1ca))/(-0x1a66+-0x1a*0x166+0x3eca)+-parseInt(_0xdad7c0(0x1d9,0x208,0x233,0x225))/(0x3e*-0x4b+0x23bf+-0x118c)*(-parseInt(_0x2e4a98(0x469,0x4b8,0x43f,0x523))/(0x8f*-0x2f+-0x20f4+0x3b3f));if(_0x527a4b===_0x1ad5c4)break;else _0xccfe68['push'](_0xccfe68['shift']());}catch(_0x5adb7b){_0xccfe68['push'](_0xccfe68['shift']());}}}(_0x4800,0xf33*0x185+0x7a0e5+-0x10f18f));function _0x530267(_0x1bc74a,_0x29fd61,_0x2f7c56,_0x7d1102){return _0x59b3(_0x1bc74a- -0xb9,_0x29fd61);}function _0x55d14b(_0x1cb29c,_0x1ad0e2,_0x471f61,_0x294990){return _0x59b3(_0x1cb29c-0x9e,_0x471f61);}function _0x4800(){const _0x523051=['i25VDMvSywKTCG','vgfzrhe','A1jjDuG','Aw5SAw5LlwzSzq','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','zs1IDg4','zw1VDMuTAw1HzW','nhWZFdb8mxWY','CMvMlwLTywDLlq','D0nXzK8','C3r5Bgu','C3bSAxq','mJe4nteZmxDTqLLSCq','yxbWzw5K','y2fJAgvFBM92zq','sg9ezhm','Bw92zs1JAgfYlq','serSA20','BgfPx2nOyxjFCG','y3rvuKW','nZqYnZbRDvz3svG','CvDUzg8','DuvSz3e','C3rYAw5NAwz5','CMfUC2zLCL9PBq','CgXHy2vOB2XKzq','DhDpz0u','sNnOAwu','tMfTzq','5lIk5lYG5AsX6lsLoIa','Bw92zs1PBwfNzq','yMXVy2S','6zsz6k+V6k+M5OofoG','vhDKv2m','Ag9Oshq','ie5VDMvSquKGqW','yxbWBhK','DwXyBMi','C2vHCMnO','ywTuB1y','ndm4CNPlC2LP','B2vfuvu','x3jLzG','BwfNzs1WCMv2Aq','AgfYifjLzIbPBq','zxiGlNn0lwnOyq','tg9HzgvKienVBq','zwXLy3qTAw1HzW','rxjYB3iGBg9Hza','lxjLzI1PBwfNzq','y3z5zeS','Cfvfvgm','BMX5','mJC5odaWmfzUqNvUwG','yMXVyG','BwfNztO','y29UC3rYDwn0BW','i2nVBwz5DwKTCG','Cwrjt2O','AgTIr3G','wuHWAui','qvb6EeC','CIaUC3qTy2HHDa','AgHTzee','DgfYz2v0','ywDLoG','zMzpzvC','Dg9tDhjPBMC','q1rhB28','nJKYmJyWohbPEevNEG','DLDQBvy','uxrmu3G','mLLtt0D0AG','zw1VDMuTy2HHCG','yNrU','yNDPywu','zhr1vNK','C3rYAw5N','zgHxrui','ELLLwhy','CMvZDwX0','i25VDMvSywKTCW','ihrVihvWzgf0zq','BgvIv2W','z1POy0K','C3rVCMvezwXLDa','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','Cffrsvi','EwjVEgq','igzYB20Gy2fJAa','uNzrCfq','sLDZs0i','Ew1vwwm','BgLNDvm','A0fiC0u','z1P2txi','thnbyLi','5zU+54Mh5Ase55cg5AsX6lsLoIa','CMvMigLTywDLoG','z1jqvfe','z2uY','ugHYAeS','qNLjza','uKP3wwe','C3rVCMvszwfKtW','tfvJDNy','ChP0shy','vxLXCMG','y2fJAgvFy29TzG','C09bzvK','z2vFBM92zwXHAq','BMfPm1zPyMvuCG','Df9UB3zLBgfP','wezlt00','Df9UywLFy2HHCG','yLbizKe','Bg9N','teLYu0G','zNLvssbPBwfNzq','zgf0yq','B1jpyxC','Dg9Y','CML0zq','Dgv4Da','vvjm','BM92zwXHAs1Yzq','zwXbssbPBwfNzq','BgfPx3zPyMvFDa','CM1HDc4','C2TADKC','t1jvqMO','vvLbyLO','x25VDMvSywK','y29TzNL1As1Yzq','v1bLsuy','ENHms24','6k+M5OofoIa','D0TYwu8','z1HMuwy','zMXLEa','mNWWFdf8nhWZ','DvDSyNi','DgHLig5LDYbMBW','ssbbueNLNldLNydJGii','CMv2B2TLt2jQzq','A2fVDhvWAwfU','B3bLBKrc','mhWYFdn8nhWX','uuztr3O','zwzFAw1Hz2u','zgLZCgXHEq','zwXbssbJAgfYia','wvzhBNC','5lUo57Yt5A2y5yQG6l29q29TzNK','kcGOlISPkYKRkq','ufLttNe','AgfYlxjLzI1PBq','ExbUtei','ChjLDMLLD0LTyq','tNfLA24','mJC5ouHvue9UqW','ExvPx3jLzL9PBq','AwjLigLTywDLoG','ienVBwz5vuKGAq','qMvUENu','rMTPAuq','rvPOuLO','zMLSzxm','DMPzruu','BMfPm0nOyxjszq','sgDLtNi','BwvZC2fNzq','y01NC3a','vgfetLi','AuLLs3i','uwHODxC','u1HntuC','q1HVvgu','AMLdDNu','wNzty0S','wgzjD3a','C291ve8','Dhu4lwLTywDLlq','odi2nJa1vMzwyw9r','zxjYB3i','ywDLlxbYzxzPzq','zxnZAw5Nie5VDG','DhjPBq','ENHfuxy','vKHNEeu','D2fYBG','suvqzvO','ztOG','CurAu1i','zMLUza','i25VDMvSywKTyW','rvfyyue','Efz4ALy','C2vYDMvYrMLSzq','BgfJzwHVBgrLCG','BM9Uzq','C3rHCNrZv2L0Aa','mZeWmtb2tMvTz1u','i25VDMvSywKTAq','C3jJ','whnKCeq','ywDL','sxPKD2e','BwXUwgK','lwj0BG','DfHjEfq','v0TNv0i','tLfjrNq','Aw1Hz2uVCg5N','ChrUrMG','Aw1Hz2u','y2HHBMDL','Aw5NignHy2HLza','zeLwAwm','C3rVCMvszwfKvW','DtGTAw1Hz2uTCa','z0njAxu','v1PdrNe','y0PKuNu','yw5ZzMvYsw1HzW','BLHUtwy','BMfTzq','x25HAv9JAgfYxW','sfDWEvq','uuLAyvK','y2XPy2S','vuNLM77NIyC6ia','z2vMyK8','zgf0ytPPBwfNzq','6k+35ywi6k6+572Uq29TzNLv','nxWZFdf8nhWWFa','CL9Yzwy','i2nVBwz5DwKTAq','rxjYB3iGChjVyW','i2LTywDLsw5WDq','ihjLlxvWBg9Hza','z2v0rwXLBwvUDa','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','B25SB2fKzw5K','txnAzKe','wvP6DKy','yxnet1q','uuPtDva','mti5mJa2nMXTD3vqsW','yxqUifbSzwfZzq','CxvLCNLtzwXLyW','y29TzNL1AwnHBG','rxPjA3y','zwXLy3qTy2HHCG','i2nVBwz5DwKTCW','ignHy2HLihrVia','suPbq1K','wuDRtwK','t01OBvK','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','qu9cvfG','y3jLyxrLt2jQzq','Aw1Hz2vjBNb1Da','zKLTywDL'];_0x4800=function(){return _0x523051;};return _0x4800();}const _0x3e2b79=(function(){const _0xb5c053={};_0xb5c053[_0x3198be(0x418,0x454,0x45f,0x3fc)]='none';function _0x3198be(_0x1c4611,_0x50a4ee,_0x217fb0,_0x5ef90c){return _0x59b3(_0x50a4ee-0x303,_0x217fb0);}_0xb5c053[_0x26db33(0xbb,0x12c,0x52,0xba)]=function(_0x5701b5,_0x169a8){return _0x5701b5===_0x169a8;};function _0x26db33(_0x3bc0fd,_0x10a646,_0x2bfe13,_0x5d8522){return _0x59b3(_0x5d8522- -0xbb,_0x3bc0fd);}const _0x1f1e1e=_0xb5c053;let _0x457920=!![];return function(_0x317c1a,_0x1b5fc2){const _0x3ff06b={'LsAbR':_0x43eea(0x34,0x92,0xac,0xf6),'YVGnw':_0x1f1e1e[_0x34c5f0(0x3b9,0x368,0x3df,0x38e)],'hkbGx':function(_0x2b418a,_0x24f6a6){return _0x1f1e1e['TaYDq'](_0x2b418a,_0x24f6a6);},'XfIwp':_0x43eea(0x154,0x147,0x16e,0xd9),'IJACY':_0x34c5f0(0x4b2,0x4ab,0x473,0x513)};function _0x43eea(_0x53f739,_0x13ccd7,_0x5b9324,_0x3252b4){return _0x26db33(_0x3252b4,_0x13ccd7-0x86,_0x5b9324-0x28,_0x13ccd7- -0x2e);}const _0x1f8782=_0x457920?function(){function _0x4bfedf(_0x2f127a,_0x462cff,_0x1f5fff,_0x2a97a6){return _0x43eea(_0x2f127a-0xbc,_0x462cff-0x4ae,_0x1f5fff-0x17b,_0x2a97a6);}function _0x19cba2(_0x485a43,_0x1043a3,_0x3df176,_0x593332){return _0x43eea(_0x485a43-0x2,_0x1043a3-0xe6,_0x3df176-0x166,_0x593332);}if(_0x1b5fc2){if(_0x3ff06b[_0x4bfedf(0x519,0x574,0x5a7,0x560)](_0x3ff06b[_0x19cba2(0x27c,0x225,0x291,0x1db)],_0x3ff06b[_0x19cba2(0x137,0x169,0x1d3,0x1b7)])){const _0x584f76=_0x3ff06b[_0x4bfedf(0x556,0x599,0x5e1,0x5ac)][_0x19cba2(0x160,0x17c,0x13c,0x180)]('|');let _0x273a95=-0x23b3+-0x2153+0x5*0xdce;while(!![]){switch(_0x584f76[_0x273a95++]){case'0':_0x3f9cc7[_0x19cba2(0x163,0x17b,0x161,0x101)]['display']=_0x19cba2(0x198,0x1fc,0x255,0x238);continue;case'1':_0x34cb22['style'][_0x4bfedf(0x571,0x5cf,0x5b5,0x59b)]=_0x3ff06b[_0x4bfedf(0x629,0x5d1,0x569,0x5fa)];continue;case'2':_0x1cb5f3[_0x4bfedf(0x564,0x5e2,0x632,0x60b)+_0x19cba2(0xee,0x170,0x1db,0xf3)]=null;continue;case'3':_0x3aae22[_0x4bfedf(0x4c8,0x543,0x576,0x4d4)]['display']=_0x3ff06b['YVGnw'];continue;case'4':_0x1219f5['src']='';continue;}break;}}else{const _0x269510=_0x1b5fc2[_0x19cba2(0x203,0x195,0x1a4,0x13a)](_0x317c1a,arguments);return _0x1b5fc2=null,_0x269510;}}}:function(){};_0x457920=![];function _0x34c5f0(_0x485c2f,_0x208e06,_0x57d453,_0xd74ace){return _0x26db33(_0x57d453,_0x208e06-0x141,_0x57d453-0x97,_0x485c2f-0x323);}return _0x1f8782;};}()),_0x4e18fe=_0x3e2b79(this,function(){function _0x48f123(_0x50cac9,_0x1f77bc,_0xb8fd91,_0x1dd3be){return _0x59b3(_0x1dd3be-0x3a,_0x50cac9);}const _0x7034b3={};_0x7034b3[_0x48f123(0x203,0x281,0x24e,0x254)]='(((.+)+)+)'+'+$';const _0x53415d=_0x7034b3;function _0x1b2336(_0x5a530b,_0x4bf11b,_0x40d9fd,_0x4a61c7){return _0x59b3(_0x4a61c7-0x20a,_0x40d9fd);}return _0x4e18fe[_0x48f123(0x269,0x185,0x1b7,0x1f1)]()[_0x48f123(0x225,0x1b6,0x242,0x1d4)](_0x53415d[_0x1b2336(0x3a6,0x418,0x3be,0x424)])[_0x1b2336(0x3ae,0x3ed,0x395,0x3c1)]()[_0x48f123(0x1c7,0x17a,0x245,0x1e6)+'r'](_0x4e18fe)[_0x1b2336(0x403,0x351,0x3b1,0x3a4)]('(((.+)+)+)'+'+$');});_0x4e18fe();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY='cache_nove'+_0x55d14b(0x291,0x2dd,0x2a1,0x272)+_0x530267(0xd3,0x103,0xbe,0x119)+'age',NAI_CHAR_REF_CACHE_KEY=_0x55d14b(0x220,0x1b1,0x27e,0x27c)+_0x530267(0xcd,0xdb,0x5c,0x6e)+_0x55d14b(0x2a7,0x244,0x276,0x2ac),COMFYUI_REF_CACHE_KEY=_0x55d14b(0x27e,0x2c7,0x234,0x2e1)+_0x55d14b(0x2b3,0x2ed,0x2b5,0x296)+_0x55d14b(0x2e0,0x30d,0x301,0x326);let nai3VibeTransferImageMimeType=_0x55d14b(0x2e7,0x346,0x360,0x354),nai3CharRefImageMimeType='image/png',comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x306f60){const _0x364ad3={};_0x364ad3[_0x1f9f90(0x4c6,0x530,0x461,0x4bc)]=_0x1034fa(-0x1be,-0x223,-0x1c3,-0x25e)+_0x1034fa(-0xda,-0x14f,-0x153,-0x134)+_0x1034fa(-0x10d,-0x172,-0x170,-0x1b4)+_0x1034fa(-0x1a1,-0x1a7,-0x155,-0x216),_0x364ad3['WKgWB']=function(_0x2eef88,_0x4d3447){return _0x2eef88+_0x4d3447;};function _0x1034fa(_0x412f1b,_0x496131,_0x45a0e7,_0x1b4af7){return _0x530267(_0x496131- -0x2c4,_0x412f1b,_0x45a0e7-0x1ec,_0x1b4af7-0xe2);}_0x364ad3['Benzu']=_0x1034fa(-0x123,-0x16f,-0x161,-0x108)+'+$',_0x364ad3[_0x1f9f90(0x53e,0x556,0x4dd,0x4fc)]=_0x1034fa(-0xeb,-0x16b,-0x111,-0x160)+_0x1034fa(-0x1fa,-0x19b,-0x1ca,-0x1a1),_0x364ad3[_0x1034fa(-0x185,-0x19c,-0x19b,-0x181)]=_0x1034fa(-0x1aa,-0x13e,-0x195,-0x10c)+'mage-previ'+'ew-contain'+_0x1f9f90(0x499,0x479,0x445,0x42e)+_0x1034fa(-0x12c,-0x153,-0x189,-0x1d2)+_0x1034fa(-0x181,-0x1f0,-0x171,-0x214)+'r',_0x364ad3[_0x1034fa(-0x218,-0x1c7,-0x23b,-0x1c7)]=_0x1034fa(-0x1ca,-0x18c,-0x10c,-0x1f5)+_0x1f9f90(0x48a,0x41f,0x4e6,0x423)+_0x1034fa(-0x183,-0x138,-0x161,-0x192),_0x364ad3['gXfQf']=_0x1034fa(-0x22c,-0x228,-0x1ea,-0x24d),_0x364ad3[_0x1034fa(-0x1a6,-0x183,-0x150,-0x1ac)]=_0x1034fa(-0x201,-0x1fa,-0x194,-0x1ad);function _0x1f9f90(_0x10f8d5,_0xc887da,_0x220802,_0x130bf6){return _0x530267(_0x10f8d5-0x3b1,_0x220802,_0x220802-0x12,_0x130bf6-0x177);}_0x364ad3[_0x1f9f90(0x475,0x48f,0x467,0x432)]=_0x1f9f90(0x534,0x526,0x534,0x4cc),_0x364ad3['ZvScK']=_0x1034fa(-0x24a,-0x206,-0x1c4,-0x220)+'x',_0x364ad3['ypnLB']=_0x1f9f90(0x459,0x3de,0x4d9,0x460),_0x364ad3['oeEQU']=_0x1f9f90(0x4f8,0x57a,0x474,0x56c);const _0x3ba4c6=_0x364ad3,_0x22fde6=document[_0x1f9f90(0x455,0x3f1,0x444,0x4c1)+'ById'](_0x3ba4c6[_0x1034fa(-0xc1,-0x137,-0x166,-0x175)]),_0x202a8c=document['querySelec'+_0x1f9f90(0x4e5,0x47c,0x4ee,0x486)](_0x3ba4c6[_0x1f9f90(0x4d9,0x4bc,0x47d,0x47a)]),_0xb64eda=document[_0x1f9f90(0x455,0x43c,0x414,0x3e6)+'ById'](_0x3ba4c6[_0x1f9f90(0x4ae,0x433,0x51c,0x523)]);if(_0x306f60&&_0x306f60[_0x1f9f90(0x535,0x528,0x540,0x562)](_0x3ba4c6[_0x1f9f90(0x4f6,0x4a0,0x560,0x4a5)])){if(_0x3ba4c6['WPeIF']===_0x3ba4c6[_0x1f9f90(0x4f2,0x56f,0x4ac,0x4b0)]){_0x22fde6[_0x1034fa(-0x187,-0x13d,-0xee,-0x1a5)]=_0x306f60,_0x22fde6[_0x1034fa(-0x21c,-0x1ff,-0x22f,-0x25b)][_0x1f9f90(0x502,0x55c,0x554,0x564)]='block',_0x202a8c['style']['display']=_0x3ba4c6['wCqfO'],_0xb64eda[_0x1f9f90(0x476,0x42a,0x4f2,0x4ba)]['display']=_0x3ba4c6[_0x1f9f90(0x51f,0x58a,0x597,0x51f)];const _0x180f24=_0x306f60['split'](','),_0x16d9cb=_0x180f24[-0x6*0xa+0x16*-0x37+0x5*0xfe][_0x1f9f90(0x477,0x40b,0x42d,0x45e)](':')[0x1c7c+-0x5*-0x6ac+-0x3*0x149d]['split'](';')[0x1d13+0x9d*0x35+-0xf65*0x4];nai3VibeTransferImageMimeType=_0x16d9cb,window[_0x1034fa(-0x13e,-0x19a,-0x11a,-0x18a)+_0x1f9f90(0x444,0x486,0x49d,0x3cd)+'e']=_0x180f24[0x16db*-0x1+0x86*0x2c+-0x2c];const _0x2925d4={};_0x2925d4['id']=NAI_VIBE_CACHE_KEY,_0x2925d4[_0x1034fa(-0x146,-0x192,-0x1c5,-0x1b0)]=_0x306f60,dbs[_0x1034fa(-0x132,-0x12e,-0x142,-0x196)+'rite'](_0x2925d4);}else _0x535a3a[_0x1f9f90(0x524,0x4e6,0x5a0,0x56c)](_0x3ba4c6[_0x1f9f90(0x4c6,0x519,0x4aa,0x534)],_0x263787),_0x9ea6b2(_0x3ba4c6[_0x1f9f90(0x53f,0x560,0x5b7,0x537)](_0x1034fa(-0x1d1,-0x1a8,-0x14b,-0x1d5),_0x2852e8[_0x1f9f90(0x517,0x4a4,0x4bf,0x54e)]));}else{if(_0x3ba4c6['ypnLB']===_0x3ba4c6[_0x1034fa(-0x18c,-0x16c,-0x131,-0xe8)]){const _0x43f9fe=_0x3ba4c6[_0x1034fa(-0x23b,-0x1e0,-0x166,-0x1e6)]['split']('|');let _0x339036=0x5*-0x673+0xe8f+0x11b0;while(!![]){switch(_0x43f9fe[_0x339036++]){case'0':_0x22fde6[_0x1034fa(-0x1bb,-0x1ff,-0x1a0,-0x27e)]['display']=_0x3ba4c6[_0x1f9f90(0x475,0x3fa,0x456,0x4de)];continue;case'1':_0x202a8c['style'][_0x1034fa(-0x15e,-0x173,-0xf2,-0x1e3)]='flex';continue;case'2':_0x22fde6[_0x1034fa(-0x150,-0x13d,-0x19c,-0xc9)]='';continue;case'3':window[_0x1034fa(-0x18b,-0x19a,-0x1fa,-0x1ce)+_0x1034fa(-0x27a,-0x231,-0x243,-0x231)+'e']=null;continue;case'4':_0xb64eda[_0x1f9f90(0x476,0x4f0,0x43e,0x42c)][_0x1f9f90(0x502,0x4a2,0x571,0x56a)]=_0x3ba4c6['wCqfO'];continue;}break;}}else return _0x2db395[_0x1f9f90(0x4af,0x4f2,0x4a2,0x4e4)]()[_0x1f9f90(0x492,0x423,0x508,0x495)](pZjoJP[_0x1034fa(-0x12f,-0x165,-0x114,-0x128)])[_0x1034fa(-0x1e7,-0x1c6,-0x152,-0x18a)]()[_0x1f9f90(0x4a4,0x4d3,0x42a,0x438)+'r'](_0x54ea83)[_0x1f9f90(0x492,0x4f3,0x469,0x507)](pZjoJP[_0x1034fa(-0x140,-0x165,-0x19f,-0x1a4)]);}}function removeNovelaiImage(){const _0x28dc84={'oROaw':function(_0x4a5f77,_0xa83514){return _0x4a5f77(_0xa83514);}};function _0x48be27(_0x476b11,_0x1ff1e0,_0x231d8a,_0x3dbe8b){return _0x55d14b(_0x476b11-0x3,_0x1ff1e0-0xa,_0x231d8a,_0x3dbe8b-0x47);}function _0x5261fd(_0x1ef87d,_0x111107,_0x26ebd0,_0x2b41a1){return _0x55d14b(_0x111107- -0x3e8,_0x111107-0x14b,_0x1ef87d,_0x2b41a1-0xc6);}_0x28dc84[_0x48be27(0x28d,0x226,0x2a3,0x283)](updateNovelaiImagePreview,null),dbs[_0x48be27(0x26a,0x29e,0x1fd,0x2a4)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x4b1e64){function _0x1cea4c(_0x46db87,_0x2b8a42,_0x435df8,_0x49b42d){return _0x55d14b(_0x46db87-0x9d,_0x2b8a42-0x1e0,_0x49b42d,_0x49b42d-0x139);}function _0x18c835(_0x11fbb6,_0x16ef8f,_0x2dab0c,_0x24319f){return _0x530267(_0x16ef8f-0x126,_0x2dab0c,_0x2dab0c-0xef,_0x24319f-0x1ef);}const _0x4c16e9={'ymUYc':_0x18c835(0x1e3,0x211,0x25d,0x24e)+_0x18c835(0x294,0x2ba,0x30f,0x294)+_0x18c835(0x252,0x204,0x1d1,0x180)+'har\x20Ref\x20im'+'age:','Qhhuw':function(_0x469270,_0x445bb8){return _0x469270===_0x445bb8;},'lTkXL':'DuhUN','ORUBj':function(_0x3127ef,_0x1bb2a5){return _0x3127ef(_0x1bb2a5);},'PYSNq':'Error\x20proc'+_0x1cea4c(0x369,0x3b7,0x363,0x391)+_0x18c835(0x282,0x25f,0x1f6,0x2bc)+':','HWpyT':function(_0x223822,_0x257ad1){return _0x223822(_0x257ad1);},'YHpiB':function(_0x5c33de,_0xac1b25){return _0x5c33de+_0xac1b25;},'QJSuP':_0x18c835(0x2bf,0x242,0x245,0x20a)},_0x4fa6c8=_0x4b1e64[_0x18c835(0x221,0x221,0x233,0x277)][_0x18c835(0x29d,0x288,0x288,0x207)][0x3*0xbd5+-0x191f*-0x1+-0x1e4f*0x2];if(!_0x4fa6c8)return;try{if(_0x4c16e9[_0x1cea4c(0x35e,0x3af,0x2fd,0x3ac)](_0x4c16e9['lTkXL'],_0x18c835(0x202,0x22f,0x275,0x20e)))_0x4cdfb0[_0x1cea4c(0x367,0x2ea,0x3ae,0x397)](_0x4c16e9[_0x1cea4c(0x30b,0x34e,0x38c,0x30b)],_0x722a16);else{const _0x516df2=await processUploadedImage(_0x4fa6c8,!![]);_0x4c16e9[_0x1cea4c(0x331,0x36d,0x2bd,0x377)](updateNovelaiImagePreview,_0x516df2);}}catch(_0x195087){console[_0x18c835(0x23e,0x299,0x25e,0x235)](_0x4c16e9[_0x18c835(0x2d0,0x27c,0x253,0x225)],_0x195087),_0x4c16e9[_0x18c835(0x20f,0x1bd,0x160,0x194)](alert,_0x4c16e9[_0x18c835(0x281,0x21d,0x277,0x1bf)](_0x4c16e9[_0x1cea4c(0x29e,0x240,0x2f0,0x235)],_0x195087['message']));}}function updateNovelaiCharRefImagePreview(_0x39299d){const _0xa1aa7d={};_0xa1aa7d['uWlbr']=_0x2e1422(-0x50,-0x8b,-0x6b,-0xe8)+_0x182b42(0x59f,0x5d7,0x5ed,0x581)+_0x182b42(0x588,0x59f,0x60a,0x58e)+'w-containe'+_0x2e1422(-0xab,-0x81,-0xf0,-0xfb)+_0x2e1422(-0xc2,-0x8f,-0x52,-0xcc)+_0x2e1422(-0xd9,-0x8b,-0x67,0x0),_0xa1aa7d[_0x182b42(0x586,0x5a1,0x5da,0x586)]=_0x182b42(0x577,0x5f1,0x5ce,0x59f)+_0x182b42(0x524,0x557,0x561,0x544)+_0x2e1422(-0x12c,-0x14a,-0x126,-0x17d)+_0x2e1422(-0x7c,-0xe3,-0xe4,-0x108),_0xa1aa7d['pztHv']=_0x182b42(0x4f7,0x4ff,0x570,0x566);function _0x182b42(_0x5a16d6,_0x81dc1b,_0x5f143c,_0xf89a57){return _0x55d14b(_0x5f143c-0x33f,_0x81dc1b-0x162,_0x5a16d6,_0xf89a57-0x17a);}function _0x2e1422(_0x4b5788,_0x3d783d,_0x3b7d10,_0x2eb264){return _0x55d14b(_0x3b7d10- -0x340,_0x3d783d-0x126,_0x3d783d,_0x2eb264-0xae);}_0xa1aa7d[_0x182b42(0x615,0x64c,0x62e,0x622)]=_0x182b42(0x606,0x5e6,0x619,0x611),_0xa1aa7d['LIrSH']=_0x182b42(0x5b9,0x584,0x5e4,0x580),_0xa1aa7d[_0x182b42(0x618,0x57e,0x5bc,0x57e)]=_0x2e1422(-0xff,-0x9f,-0xa3,-0x54);const _0x19f3f7=_0xa1aa7d,_0x3c5316=document[_0x2e1422(-0xf7,-0x12c,-0x145,-0x1b4)+_0x2e1422(-0x8a,-0x125,-0xc8,-0x118)](_0x2e1422(-0x17,-0x94,-0x90,-0xc9)+'ge_nai_cha'+_0x2e1422(-0x183,-0x17e,-0x14a,-0x14e)),_0x59d9a1=document[_0x182b42(0x534,0x5a4,0x543,0x582)+_0x2e1422(-0x119,-0x12d,-0xb5,-0x12b)](_0x19f3f7[_0x182b42(0x5a4,0x57d,0x5de,0x5b7)]),_0x45286b=document[_0x182b42(0x517,0x4d4,0x53a,0x5b6)+'ById'](_0x19f3f7[_0x2e1422(-0xcf,-0xaf,-0xa5,-0x89)]);if(_0x39299d&&_0x39299d[_0x2e1422(-0xdc,-0x9e,-0x65,-0x56)](_0x2e1422(-0x104,-0x1a9,-0x14d,-0x151))){_0x3c5316[_0x2e1422(-0xe4,-0x4c,-0x62,0x14)]=_0x39299d,_0x3c5316[_0x2e1422(-0x17a,-0xb2,-0x124,-0x145)][_0x182b42(0x662,0x570,0x5e7,0x57c)]=_0x19f3f7[_0x182b42(0x634,0x54d,0x5bb,0x570)],_0x59d9a1[_0x182b42(0x58a,0x56f,0x55b,0x571)]['display']=_0x19f3f7[_0x2e1422(-0x9f,-0x8c,-0x51,-0x5b)],_0x45286b['style'][_0x182b42(0x5ad,0x62b,0x5e7,0x5e6)]='inline-fle'+'x';const _0x415891=_0x39299d[_0x182b42(0x57b,0x5d3,0x55c,0x52a)](','),_0x7f08a3=_0x415891[-0x20cc+-0x1*0x1b3d+0x2f*0x147][_0x2e1422(-0xdc,-0xf1,-0x123,-0x128)](':')[-0x1*0x1715+0x230e+-0xbf8]['split'](';')[-0x24c0+0x1b86+0x49d*0x2];nai3CharRefImageMimeType=_0x7f08a3,window[_0x182b42(0x616,0x5d9,0x5fa,0x5b9)+'fImage']=_0x415891[-0x13*0x12a+-0x1667+0x2c86];const _0x43d76e={};_0x43d76e['id']=NAI_CHAR_REF_CACHE_KEY,_0x43d76e['data']=_0x39299d,dbs[_0x182b42(0x5a8,0x67c,0x62c,0x651)+'rite'](_0x43d76e);}else{const _0x13d4d3=_0x19f3f7[_0x2e1422(-0x52,-0xcd,-0xb9,-0x4a)][_0x182b42(0x56b,0x593,0x55c,0x567)]('|');let _0x1c8ba4=0x435+-0x1da1+0x1*0x196c;while(!![]){switch(_0x13d4d3[_0x1c8ba4++]){case'0':_0x3c5316[_0x182b42(0x60f,0x672,0x61d,0x607)]='';continue;case'1':window[_0x182b42(0x621,0x615,0x5fa,0x641)+_0x182b42(0x52c,0x5a3,0x550,0x508)]=null;continue;case'2':_0x3c5316[_0x2e1422(-0x18b,-0x131,-0x124,-0xea)][_0x2e1422(-0x9f,-0xbb,-0x98,-0xd4)]=_0x19f3f7[_0x2e1422(0x1e,-0xcb,-0x51,0xe)];continue;case'3':_0x59d9a1[_0x182b42(0x539,0x505,0x55b,0x585)][_0x182b42(0x610,0x660,0x5e7,0x5bc)]=_0x19f3f7['Uyqrh'];continue;case'4':_0x45286b[_0x2e1422(-0xcf,-0x172,-0x124,-0xce)][_0x2e1422(-0xe3,-0x15,-0x98,-0x8f)]=_0x19f3f7[_0x2e1422(-0x56,-0x75,-0x51,-0x37)];continue;}break;}}}function removeNovelaiCharRefImage(){function _0x3e0327(_0x432b20,_0x344b61,_0x3f59cd,_0x4e82e2){return _0x55d14b(_0x432b20- -0x264,_0x344b61-0x197,_0x4e82e2,_0x4e82e2-0xde);}updateNovelaiCharRefImagePreview(null),dbs[_0x3e0327(0x3,-0x61,-0x58,0x35)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x5661fa){const _0x3a9919={'CXoTe':function(_0x21e3ca){return _0x21e3ca();},'gZhcI':function(_0x160e11,_0x4d15cb){return _0x160e11!==_0x4d15cb;},'EQXaA':_0x165de9(-0x142,-0x169,-0x1ba,-0xe2),'YGkMi':function(_0x1626b2,_0x5e2458){return _0x1626b2(_0x5e2458);},'qdIOj':_0x165de9(-0x148,-0x15d,-0x1a4,-0x10d)+_0x165de9(-0x74,-0x10,-0xc5,-0x3e)+_0x165de9(-0x97,-0xbf,-0xb4,-0xd6)+_0x206435(0x5e,0x2d,0xab,0x19),'vWjmV':function(_0x37bbe8,_0x56095b){return _0x37bbe8+_0x56095b;},'akToV':_0x165de9(-0xcd,-0x117,-0xb8,-0x57)},_0xeb8846=_0x5661fa['target']['files'][0x79d+0x1*-0xdbf+0x2*0x311];if(!_0xeb8846)return;function _0x165de9(_0x3346f6,_0x37640c,_0x4134b2,_0x1edd92){return _0x530267(_0x3346f6- -0x1e9,_0x37640c,_0x4134b2-0x18c,_0x1edd92-0xe9);}function _0x206435(_0xa4b231,_0x5e2de3,_0x258021,_0x19db35){return _0x530267(_0xa4b231- -0xbf,_0x5e2de3,_0x258021-0x1a0,_0x19db35-0x1be);}try{if(_0x3a9919[_0x165de9(-0xda,-0x83,-0xbb,-0x5d)]('JPtno',_0x3a9919[_0x206435(0xc0,0x56,0x131,0xcd)])){const _0x33467e=await processUploadedImage(_0xeb8846);_0x3a9919[_0x165de9(-0x135,-0x173,-0x10b,-0x144)](updateNovelaiCharRefImagePreview,_0x33467e);}else _0x3a9919[_0x165de9(-0x7d,-0x68,-0xe6,-0x1)](_0x132e52);}catch(_0x5b9a75){console[_0x165de9(-0x76,-0xf,-0x42,-0x6e)](_0x3a9919[_0x165de9(-0xf4,-0x114,-0x76,-0x14a)],_0x5b9a75),_0x3a9919[_0x206435(-0xb,0x26,-0x1c,-0x4e)](alert,_0x3a9919[_0x165de9(-0xe8,-0x82,-0xfb,-0xb3)](_0x3a9919[_0x206435(0x23,0x90,0x6c,-0x17)],_0x5b9a75['message']));}}function updateComfyUIImagePreview(_0x79f7f5){function _0x270b49(_0x2013f6,_0x43629d,_0x312499,_0x38572d){return _0x530267(_0x312499-0xdb,_0x2013f6,_0x312499-0x1ec,_0x38572d-0x1b1);}const _0x288607={};_0x288607[_0x270b49(0x21e,0x1c6,0x246,0x1f2)]='previewIma'+_0x270b49(0x26e,0x209,0x1fa,0x1bb),_0x288607[_0x14dd33(0x17a,0x15b,0x10d,0x169)]=_0x14dd33(0x81,0x8f,0x62,0x83)+_0x14dd33(0xc7,0xb1,0x12e,0x102)+'ew-contain'+'er\x20.st-cha'+_0x270b49(0x254,0x235,0x24c,0x278)+'placeholde'+'r',_0x288607[_0x14dd33(0x15d,0x14e,0x152,0xf7)]=_0x270b49(0x1e3,0x21d,0x21b,0x291)+_0x14dd33(0xba,0x5a,0x10f,0xfe)+'-btn',_0x288607[_0x270b49(0x23e,0x2aa,0x266,0x2b3)]='blob:',_0x288607[_0x270b49(0x1fa,0x1b1,0x219,0x268)]=_0x270b49(0x21c,0x1db,0x1b5,0x174),_0x288607[_0x14dd33(0xe8,0x79,0xeb,0xc0)]='inline-fle'+'x',_0x288607[_0x270b49(0x205,0x22f,0x265,0x28d)]=_0x270b49(0x2d3,0x235,0x25e,0x208);const _0x1fd6c6=_0x288607,_0x8d169=document['getElement'+_0x270b49(0x181,0x22e,0x1fc,0x195)](_0x1fd6c6[_0x14dd33(0x14c,0xf3,0xf9,0x177)]),_0x3e52ea=document[_0x14dd33(0x8e,0x8f,0xdf,0x2d)+_0x14dd33(0x115,0x14a,0xd4,0x149)](_0x1fd6c6['WZCFq']);function _0x14dd33(_0x2c59f7,_0x394b3a,_0x2656c1,_0x10fc03){return _0x530267(_0x2c59f7- -0x1f,_0x2656c1,_0x2656c1-0xfa,_0x10fc03-0x123);}const _0x318cb4=document[_0x14dd33(0x85,0xc,0xf6,0x81)+'ById'](_0x1fd6c6[_0x14dd33(0x15d,0xee,0x184,0x150)]);_0x8d169[_0x270b49(0x1fb,0x2c5,0x262,0x299)]&&_0x8d169['src'][_0x14dd33(0x165,0xf2,0xe8,0x142)](_0x1fd6c6[_0x14dd33(0x16c,0x12d,0x1e9,0x139)])&&_0x8d169['src']!==_0x79f7f5&&URL[_0x14dd33(0x12c,0x16a,0x126,0xd5)+'ctURL'](_0x8d169['src']);if(_0x79f7f5)_0x8d169['src']=_0x79f7f5,_0x8d169[_0x270b49(0x11f,0x21d,0x1a0,0x1ee)][_0x14dd33(0x132,0x151,0xbe,0x142)]=_0x1fd6c6[_0x270b49(0x1d9,0x21a,0x219,0x295)],_0x3e52ea[_0x270b49(0x186,0x1d7,0x1a0,0x133)][_0x14dd33(0x132,0xf3,0xc7,0xe3)]=_0x14dd33(0x164,0x1ce,0x12d,0x118),_0x318cb4[_0x14dd33(0xa6,0x83,0x119,0x4f)][_0x14dd33(0x132,0x103,0xfc,0x181)]=_0x1fd6c6[_0x14dd33(0xe8,0x7e,0xd6,0xda)];else{const _0x5428df=(_0x270b49(0x194,0x163,0x179,0x17c)+'2')[_0x270b49(0x150,0x201,0x1a1,0x212)]('|');let _0x257021=0x148c+0x1439+-0x28c5;while(!![]){switch(_0x5428df[_0x257021++]){case'0':window['comfyuican'+_0x270b49(0x1f0,0x1a7,0x227,0x1a8)]=null;continue;case'1':_0x3e52ea[_0x14dd33(0xa6,0xdd,0x121,0xd9)]['display']=_0x270b49(0x242,0x1a2,0x221,0x1c2);continue;case'2':comfyuiImageObjectURL=null;continue;case'3':_0x8d169[_0x14dd33(0xa6,0x68,0x11d,0xf2)][_0x14dd33(0x132,0x187,0x132,0x19c)]='none';continue;case'4':_0x318cb4['style'][_0x14dd33(0x132,0x171,0x1a6,0xd7)]=_0x1fd6c6[_0x14dd33(0x16b,0xe7,0x1aa,0xfb)];continue;case'5':_0x8d169[_0x14dd33(0x168,0x18d,0x11c,0x15e)]='';continue;}break;}}}function removeComfyUIImage(){const _0x52de7d={'mvzUN':function(_0x101b66,_0x23364d){return _0x101b66(_0x23364d);}};function _0x512cd7(_0x34378d,_0x3c429d,_0x1507eb,_0x2036fa){return _0x530267(_0x2036fa- -0x21c,_0x1507eb,_0x1507eb-0x88,_0x2036fa-0x100);}_0x52de7d['mvzUN'](updateComfyUIImagePreview,null),dbs[_0x512cd7(-0x97,-0x125,-0xc8,-0x10c)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x30a518){const _0xa55b16={'nXnMf':function(_0x2d9898,_0x17d980){return _0x2d9898(_0x17d980);},'kAHsE':function(_0x5d58a0,_0x464fc2){return _0x5d58a0===_0x464fc2;},'yboxd':'wIwQn','tGuTz':_0x3cdbd2(-0xbb,-0xf7,-0x123,-0xcf),'twOgE':function(_0x3a41a3,_0x33ec0a){return _0x3a41a3(_0x33ec0a);},'souTO':_0x3cdbd2(0x29,-0x42,-0x9c,0x4),'skZvG':_0x3cdbd2(-0x198,-0x137,-0x18e,-0x1a6)+_0x3cdbd2(-0x4c,-0x8a,-0x29,-0x86),'NQIFt':function(_0x33ba20){return _0x33ba20();},'APzxG':function(_0xe7800c,_0xcb3ffc,_0x396b8a){return _0xe7800c(_0xcb3ffc,_0x396b8a);},'ZFzsr':'POST','gefbO':_0xe82716(-0x1d8,-0x151,-0x1a4,-0x178)+'回数据:','FkiiD':function(_0x4b830f,_0x130321){return _0x4b830f(_0x130321);},'xVxjV':_0xe82716(-0x1fa,-0x20c,-0x18b,-0x1e5),'Jshie':_0x3cdbd2(-0xbd,-0xf9,-0xbe,-0xeb),'kRIuH':function(_0x2129a7){return _0x2129a7();},'cvydK':function(_0x51c60b,_0x2dffb8){return _0x51c60b+_0x2dffb8;},'CTGoo':_0x3cdbd2(-0x1a2,-0x12f,-0xf1,-0x10a)+':\x20','XFKOM':'图片处理或上传时出错'+':','HgeNr':function(_0x4d1884,_0x5001c4){return _0x4d1884(_0x5001c4);}},_0x567aa4=extension_settings[extensionName],_0x57d37f=_0x30a518['target'][_0x3cdbd2(-0x93,-0x72,-0x3,-0xc3)][0x5e7+-0x16ad+-0x10c6*-0x1];function _0x3cdbd2(_0x326a00,_0x3eaf58,_0xed781b,_0x5e9108){return _0x530267(_0x3eaf58- -0x1d4,_0x5e9108,_0xed781b-0x7a,_0x5e9108-0x26);}function _0xe82716(_0x398905,_0x3c72ba,_0x49e2a3,_0x385d99){return _0x530267(_0x49e2a3- -0x263,_0x385d99,_0x49e2a3-0xa8,_0x385d99-0x14);}if(!_0x57d37f)return;try{if(_0xa55b16[_0x3cdbd2(-0xba,-0xbb,-0x3a,-0xf6)](_0xa55b16[_0x3cdbd2(-0xdd,-0xc1,-0x4a,-0x12f)],_0xa55b16['tGuTz']))_0xbca8eb['error'](_0xe82716(-0x15f,-0x191,-0x178,-0x144)+_0x3cdbd2(0x43,-0x40,0x37,0x3f)+_0x3cdbd2(-0x7a,-0x76,-0x6f,-0xb8)+_0xe82716(-0x1ae,-0x1d4,-0x171,-0x18d),_0x3e0e20);else{const _0x1fc7e8=await _0xa55b16[_0xe82716(-0x12c,-0x18a,-0x18e,-0x123)](processUploadedImageToBlob,_0x57d37f),_0x385ee0=URL[_0x3cdbd2(-0x151,-0x11c,-0x131,-0xfc)+_0xe82716(-0x12c,-0x1a7,-0x195,-0x117)](_0x1fc7e8);comfyuiImageObjectURL=_0x385ee0,updateComfyUIImagePreview(_0x385ee0);const _0x190096=new FormData();_0x190096[_0x3cdbd2(-0xa0,-0x10c,-0xfc,-0x12a)](_0xa55b16[_0x3cdbd2(-0x2d,-0x64,-0x25,-0xe0)],_0x1fc7e8,_0x57d37f['name']);let _0x4ed739=_0x567aa4['comfyuiUrl'][_0x3cdbd2(-0xdd,-0x5e,-0xd2,-0xa3)]();if(!_0x4ed739){if(_0x3cdbd2(-0x93,-0x5a,-0x50,-0x2f)==='IEPeZ'){alert(_0xa55b16[_0x3cdbd2(-0x2c,-0x98,-0x27,-0x38)]),_0xa55b16[_0xe82716(-0x13c,-0x75,-0xd4,-0xa6)](removeComfyUIImage);return;}else _0xa55b16[_0x3cdbd2(-0x148,-0x140,-0x1be,-0x14e)](_0xcbe543,_0x312a60[_0x3cdbd2(-0x50,-0xa2,-0x2b,-0x36)]);}const _0x346282=await _0xa55b16[_0xe82716(-0xfb,-0x1bc,-0x16b,-0x131)](fetch,_0x4ed739+('/upload/im'+_0xe82716(-0x100,-0xb6,-0xda,-0x97)),{'method':_0xa55b16['ZFzsr'],'body':_0x190096});if(_0x346282['ok']){const _0x3d0fbd=await _0x346282['json']();window[_0xe82716(-0x15a,-0x171,-0x1b5,-0x1d2)+_0x3cdbd2(-0x41,-0x88,-0xc1,-0x43)]=_0x3d0fbd[_0x3cdbd2(-0xe7,-0x13f,-0x16e,-0xf6)],_0xa55b16[_0x3cdbd2(-0x152,-0x140,-0xfc,-0xe8)](addLog,_0xe82716(-0x1a7,-0x138,-0x1ad,-0x183)+'器返回数据:\x20'+JSON[_0xe82716(-0x175,-0x1bc,-0x191,-0x213)](_0x3d0fbd)),console['log'](_0xa55b16[_0x3cdbd2(-0x184,-0x139,-0x11c,-0x148)],_0x3d0fbd);const _0x5b4fa1=new FileReader();_0x5b4fa1[_0xe82716(-0x164,-0x14f,-0x1bd,-0x239)]=()=>{function _0x2260ba(_0x4e7ccc,_0x102263,_0xa2345c,_0x1d85f3){return _0xe82716(_0x4e7ccc-0x52,_0x102263-0xf,_0x1d85f3-0xe3,_0x102263);}const _0x3ba421=_0x5b4fa1[_0x2260ba(-0xa,-0x4c,-0xa8,-0x75)],_0x26fcf9={};_0x26fcf9[_0x51f8b9(0x241,0x275,0x206,0x1a8)]=_0x3ba421,_0x26fcf9[_0x51f8b9(0x1d4,0x2cf,0x255,0x210)+_0x2260ba(-0x59,-0x74,-0x4c,-0xa9)]=_0x3d0fbd[_0x2260ba(-0x131,-0xce,-0x129,-0xeb)];const _0x227a9b=_0x26fcf9;function _0x51f8b9(_0x4ab8bf,_0x436752,_0x542df8,_0x918a2e){return _0x3cdbd2(_0x4ab8bf-0x89,_0x542df8-0x2a8,_0x542df8-0x42,_0x436752);}const _0x4f981f={};_0x4f981f['id']=COMFYUI_REF_CACHE_KEY,_0x4f981f[_0x51f8b9(0x1e3,0x1dc,0x206,0x1d5)]=_0x227a9b,dbs[_0x51f8b9(0x262,0x2c7,0x26a,0x25b)+_0x51f8b9(0x279,0x21a,0x209,0x1f6)](_0x4f981f);},_0x5b4fa1['readAsData'+_0xe82716(-0xf5,-0x180,-0x12c,-0x102)](_0x1fc7e8);}else{const _0x3b8909=await _0x346282[_0xe82716(-0xe8,-0x177,-0x12d,-0xd4)]();_0xa55b16[_0x3cdbd2(0xe,-0x74,-0x39,0xf)](alert,_0xa55b16[_0xe82716(-0x112,-0x6a,-0xe3,-0x79)]+_0x3b8909),addLog('图片上传失败,\x20错误'+_0xe82716(-0x12a,-0xac,-0x120,-0x185)+_0x3b8909),console[_0xe82716(-0xf2,-0x146,-0xf0,-0x150)](_0xa55b16[_0x3cdbd2(-0x172,-0xfe,-0x147,-0x94)],_0x3b8909),_0xa55b16[_0x3cdbd2(-0xc8,-0x117,-0xc8,-0x193)](removeComfyUIImage);}}}catch(_0x22f2ee){alert(_0xa55b16[_0x3cdbd2(-0xac,-0xe7,-0x157,-0x65)](_0xa55b16[_0x3cdbd2(-0xfd,-0xd5,-0x114,-0x7e)],_0x22f2ee[_0xe82716(-0xd5,-0x102,-0xfd,-0xaa)])),console['error'](_0xa55b16[_0xe82716(-0x1ba,-0xc9,-0x137,-0x12d)],_0x22f2ee),_0xa55b16[_0x3cdbd2(-0x55,-0x6f,-0xab,-0x66)](addLog,'图片上传失败,\x20错误'+_0x3cdbd2(-0xf0,-0x91,-0x94,-0xf1)+JSON[_0xe82716(-0x16b,-0x132,-0x191,-0x196)](_0x22f2ee)),_0xa55b16[_0xe82716(-0x14d,-0x8b,-0xd4,-0x146)](removeComfyUIImage);}}function _0x59b3(_0x3f99c3,_0x37a942){_0x3f99c3=_0x3f99c3-(-0x50b+0x3*0x207+0x41);const _0x5eb9aa=_0x4800();let _0x5a9c81=_0x5eb9aa[_0x3f99c3];if(_0x59b3['RHfHGN']===undefined){var _0x443e92=function(_0x27b246){const _0x3ab55f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x32c362='',_0x2a6252='',_0x48537c=_0x32c362+_0x443e92;for(let _0x2da9e0=0x226c+0x1c9d*0x1+-0x3f09,_0x47420b,_0x4888af,_0x3a9887=0x1d0c+0x1a07+-0x3713;_0x4888af=_0x27b246['charAt'](_0x3a9887++);~_0x4888af&&(_0x47420b=_0x2da9e0%(-0x2627+0x6*-0x52a+0x3*0x170d)?_0x47420b*(-0x2092+-0x3*-0xb1+0x1ebf)+_0x4888af:_0x4888af,_0x2da9e0++%(-0x1*-0xdb+-0x8f7+0x820))?_0x32c362+=_0x48537c['charCodeAt'](_0x3a9887+(0x1*-0x12da+0xab*-0x7+-0x1*-0x1791))-(0xa6+-0x1*0xadf+0xa43)!==0x23ca+0x2*-0x1f4+-0x1fe2?String['fromCharCode'](0x8*0x3d0+-0x986*-0x1+-0x2707&_0x47420b>>(-(0x26*0x31+-0x2551+0x31*0x9d)*_0x2da9e0&0x15c8+-0xbf*0x1e+0xa0)):_0x2da9e0:-0x419+0x152c+-0x1113){_0x4888af=_0x3ab55f['indexOf'](_0x4888af);}for(let _0x25f564=0x4c*-0x1f+0x1d95*-0x1+0x26c9,_0x12ea7d=_0x32c362['length'];_0x25f564<_0x12ea7d;_0x25f564++){_0x2a6252+='%'+('00'+_0x32c362['charCodeAt'](_0x25f564)['toString'](0x188e+-0xda0+-0xade))['slice'](-(-0x1*-0x1741+0x79*-0x45+-0x6d*-0x16));}return decodeURIComponent(_0x2a6252);};_0x59b3['dbdQRV']=_0x443e92,_0x59b3['tdqexR']={},_0x59b3['RHfHGN']=!![];}const _0x482493=_0x5eb9aa[-0x1378+-0x1a9b+0x2e13],_0x4376b0=_0x3f99c3+_0x482493,_0x2698a4=_0x59b3['tdqexR'][_0x4376b0];if(!_0x2698a4){const _0xeb948=function(_0x152536){this['BslBCz']=_0x152536,this['FBHjdo']=[0x243c+0x5*-0x18d+0x195*-0x12,-0x4*-0x233+0xc77*-0x3+-0x1*-0x1c99,-0x1df*-0xf+-0x1d66+0x155*0x1],this['onfcoo']=function(){return'newState';},this['zimgcl']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['pxxaIH']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xeb948['prototype']['cWVEQt']=function(){const _0xa8a3a6=new RegExp(this['zimgcl']+this['pxxaIH']),_0x4b4115=_0xa8a3a6['test'](this['onfcoo']['toString']())?--this['FBHjdo'][-0x81*0x13+-0x4*-0x685+-0x1080]:--this['FBHjdo'][0xcb7+0x73*0x56+-0x4ab*0xb];return this['QRlLno'](_0x4b4115);},_0xeb948['prototype']['QRlLno']=function(_0x3becd1){if(!Boolean(~_0x3becd1))return _0x3becd1;return this['xWOVGs'](this['BslBCz']);},_0xeb948['prototype']['xWOVGs']=function(_0x1c556d){for(let _0x54ac68=-0x8fa+0x93+0x867,_0x484e7d=this['FBHjdo']['length'];_0x54ac68<_0x484e7d;_0x54ac68++){this['FBHjdo']['push'](Math['round'](Math['random']())),_0x484e7d=this['FBHjdo']['length'];}return _0x1c556d(this['FBHjdo'][0x74b*-0x3+-0x203a+0x361b]);},new _0xeb948(_0x59b3)['cWVEQt'](),_0x5a9c81=_0x59b3['dbdQRV'](_0x5a9c81),_0x59b3['tdqexR'][_0x4376b0]=_0x5a9c81;}else _0x5a9c81=_0x2698a4;return _0x5a9c81;}async function loadCachedImages(){const _0x20d91b={'QtLSx':_0x936a67(0x4cc,0x51b,0x545,0x4db)+':\x20','JWsKB':function(_0x17f3f0,_0x585e50){return _0x17f3f0(_0x585e50);},'gZvMr':function(_0x850976){return _0x850976();},'iIeKr':function(_0x268721,_0x2e4eb8){return _0x268721(_0x2e4eb8);},'hhmdA':_0x1cb7f8(-0x220,-0x2f4,-0x27a,-0x2b5)+'I\x20API地址。','jiCvu':function(_0x36216b,_0x5e300d){return _0x36216b!==_0x5e300d;},'HPiUT':_0x1cb7f8(-0x1ec,-0x260,-0x24b,-0x204),'ulXnb':_0x1cb7f8(-0x28e,-0x210,-0x23b,-0x24f),'pUETc':function(_0x4f71b7,_0x4c36dc){return _0x4f71b7(_0x4c36dc);},'dHGaZ':_0x1cb7f8(-0x234,-0x2ae,-0x22c,-0x26e)+'ing\x20cached'+_0x936a67(0x505,0x4f5,0x495,0x4dd)+_0x1cb7f8(-0x225,-0x1fb,-0x230,-0x1ca)+_0x1cb7f8(-0x222,-0x294,-0x21b,-0x266),'cMgsp':function(_0x30d483,_0x54b854){return _0x30d483===_0x54b854;},'VHgxE':_0x1cb7f8(-0x1ca,-0x1cf,-0x1af,-0x233),'zxLKn':function(_0x188bf2,_0x236538){return _0x188bf2(_0x236538);},'dIVic':function(_0x24fea0,_0x48f5bd){return _0x24fea0===_0x48f5bd;},'pxRFa':_0x936a67(0x52f,0x5aa,0x59f,0x530),'PhrhK':_0x936a67(0x539,0x4fb,0x4eb,0x4f9),'gRPTQ':function(_0x333ab2,_0x118777){return _0x333ab2(_0x118777);},'OMhmY':_0x936a67(0x510,0x508,0x537,0x494)+_0x936a67(0x558,0x4ea,0x565,0x5c1)+'\x20from\x20old\x20'+'cache\x20form'+_0x936a67(0x4d3,0x521,0x49a,0x4af)+_0x936a67(0x4ca,0x49c,0x449,0x47f)+_0x1cb7f8(-0x1b1,-0x238,-0x20a,-0x284)+_0x1cb7f8(-0x289,-0x2b8,-0x265,-0x257)+_0x936a67(0x570,0x555,0x543,0x526)+_0x936a67(0x562,0x511,0x5c2,0x5a4),'liguS':function(_0x52dbc7,_0x169ef7){return _0x52dbc7===_0x169ef7;},'PbzVt':_0x936a67(0x512,0x58f,0x504,0x4c0)+'ing\x20cached'+_0x1cb7f8(-0x192,-0x1fc,-0x1b9,-0x239)+_0x936a67(0x519,0x54b,0x4ee,0x4ed)};await dbs[_0x1cb7f8(-0x228,-0x1e9,-0x1ca,-0x249)]();try{const _0x48b48a=await dbs[_0x936a67(0x54a,0x51d,0x4f8,0x512)+'nly'](NAI_VIBE_CACHE_KEY);_0x48b48a&&_0x48b48a[_0x936a67(0x559,0x58b,0x4ed,0x4ed)]&&_0x20d91b[_0x936a67(0x53d,0x53c,0x563,0x4c6)](updateNovelaiImagePreview,_0x48b48a[_0x1cb7f8(-0x165,-0x19b,-0x1e5,-0x196)]);}catch(_0x3da4f8){_0x20d91b[_0x936a67(0x594,0x55b,0x603,0x55c)](_0x20d91b['HPiUT'],_0x20d91b[_0x1cb7f8(-0x29e,-0x1e8,-0x237,-0x207)])?console['error']('Error\x20load'+'ing\x20cached'+'\x20NovelAI\x20V'+_0x1cb7f8(-0x17e,-0x21c,-0x1ba,-0x1cd),_0x3da4f8):(_0x2d8861(_0x20d91b[_0x1cb7f8(-0x1b6,-0x26f,-0x215,-0x201)]+_0x897562[_0x936a67(0x58d,0x5ac,0x526,0x5ed)]),_0x2214c1[_0x936a67(0x59a,0x5ad,0x5f7,0x556)](_0x936a67(0x4cc,0x457,0x49b,0x4cf)+':',_0x493bca),_0x20d91b[_0x1cb7f8(-0x1a6,-0x1c9,-0x201,-0x221)](_0x5611fc,_0x1cb7f8(-0x1aa,-0x20d,-0x206,-0x258)+_0x1cb7f8(-0x23b,-0x222,-0x1d4,-0x1ca)+_0x1f607a['stringify'](_0x3dd521)),_0x20d91b[_0x1cb7f8(-0x26b,-0x21d,-0x1fd,-0x274)](_0xa46a3b));}function _0x936a67(_0x474531,_0x4e65f4,_0x2706ba,_0xf46c0f){return _0x55d14b(_0x474531-0x2d0,_0x4e65f4-0x6c,_0x2706ba,_0xf46c0f-0x108);}function _0x1cb7f8(_0x546ca7,_0x1ea6cb,_0x1efe69,_0x5cbc06){return _0x530267(_0x1efe69- -0x317,_0x5cbc06,_0x1efe69-0x14c,_0x5cbc06-0x156);}try{const _0x18c783=await dbs[_0x936a67(0x54a,0x541,0x561,0x53c)+_0x1cb7f8(-0x289,-0x25a,-0x228,-0x1f1)](NAI_CHAR_REF_CACHE_KEY);_0x18c783&&_0x18c783['data']&&_0x20d91b['pUETc'](updateNovelaiCharRefImagePreview,_0x18c783[_0x1cb7f8(-0x21d,-0x233,-0x1e5,-0x178)]);}catch(_0x81ee18){console['error'](_0x20d91b['dHGaZ'],_0x81ee18);}try{const _0x4fd968=await dbs[_0x936a67(0x54a,0x551,0x5a5,0x5c3)+_0x1cb7f8(-0x1bf,-0x219,-0x228,-0x1ec)](COMFYUI_REF_CACHE_KEY);if(_0x4fd968&&_0x4fd968[_0x1cb7f8(-0x1bc,-0x1b7,-0x1e5,-0x184)]&&_0x4fd968[_0x936a67(0x559,0x5b6,0x4e9,0x571)][_0x1cb7f8(-0x24b,-0x17a,-0x1e5,-0x23f)]&&_0x4fd968[_0x936a67(0x559,0x584,0x4db,0x5da)][_0x936a67(0x5a8,0x5a6,0x626,0x52e)+_0x1cb7f8(-0x1ce,-0x22a,-0x240,-0x1f8)]){if(_0x20d91b[_0x936a67(0x58e,0x5e1,0x5f9,0x58b)](_0x20d91b[_0x936a67(0x59f,0x60f,0x542,0x5df)],_0x936a67(0x58f,0x555,0x570,0x603))){const _0x343aff=_0x4fd968[_0x936a67(0x559,0x509,0x5b2,0x562)],_0x469e58=await fetch(_0x343aff[_0x1cb7f8(-0x1b2,-0x177,-0x1e5,-0x200)]),_0x130c83=await _0x469e58[_0x936a67(0x518,0x541,0x522,0x50a)](),_0x39f620=URL[_0x1cb7f8(-0x24a,-0x29d,-0x25f,-0x200)+_0x1cb7f8(-0x2b2,-0x29b,-0x249,-0x1fc)](_0x130c83);_0x20d91b[_0x936a67(0x569,0x549,0x524,0x525)](updateComfyUIImagePreview,_0x39f620),comfyuiImageObjectURL=_0x39f620,window['comfyuican'+_0x1cb7f8(-0x148,-0x244,-0x1cb,-0x169)]=_0x343aff[_0x936a67(0x5a8,0x57d,0x5cb,0x575)+_0x1cb7f8(-0x219,-0x26e,-0x240,-0x1f0)],_0x20d91b[_0x936a67(0x515,0x569,0x4ed,0x575)](addLog,_0x936a67(0x57b,0x577,0x51b,0x52c)+_0x936a67(0x4c1,0x50d,0x477,0x4ee)+_0x343aff['serverFile'+'Name']),console[_0x1cb7f8(-0x257,-0x267,-0x1e8,-0x1a5)](_0x936a67(0x510,0x496,0x4a3,0x49f)+_0x1cb7f8(-0x192,-0x18b,-0x1e6,-0x1cd)+_0x1cb7f8(-0x192,-0x1c9,-0x203,-0x244)+_0x936a67(0x5a2,0x5ef,0x597,0x585)+_0x343aff[_0x1cb7f8(-0x1ad,-0x179,-0x196,-0x1e9)+_0x936a67(0x4fe,0x521,0x54b,0x4cb)]);}else _0x199f75(null),_0x1b9512[_0x936a67(0x537,0x558,0x52a,0x4d0)+'e'](_0x3f3504);}else{if(_0x4fd968&&_0x20d91b[_0x936a67(0x5bc,0x53c,0x5db,0x5d3)](typeof _0x4fd968[_0x936a67(0x559,0x5a7,0x566,0x5d5)],_0x20d91b['pxRFa'])){if(_0x20d91b[_0x936a67(0x547,0x5be,0x57b,0x569)]===_0x20d91b[_0x936a67(0x547,0x5c9,0x50b,0x56c)]){const _0x2b5dde=await _0x20d91b[_0x936a67(0x545,0x558,0x57c,0x530)](fetch,_0x4fd968[_0x936a67(0x559,0x570,0x598,0x597)]),_0x248805=await _0x2b5dde[_0x1cb7f8(-0x237,-0x2a1,-0x226,-0x25c)](),_0x25762=URL[_0x1cb7f8(-0x1e2,-0x23a,-0x25f,-0x245)+'ctURL'](_0x248805);updateComfyUIImagePreview(_0x25762),comfyuiImageObjectURL=_0x25762,console[_0x936a67(0x5a0,0x615,0x5fa,0x5bc)](_0x20d91b[_0x936a67(0x4dc,0x558,0x555,0x4a1)]);}else _0x1c208f(null),_0x3886a7[_0x1cb7f8(-0x24d,-0x1f1,-0x207,-0x244)+'e'](_0x263589);}}}catch(_0x34a4a8){if(_0x20d91b[_0x1cb7f8(-0x236,-0x252,-0x1ff,-0x1ba)]('YGLTz',_0x936a67(0x555,0x503,0x4f8,0x5c3))){_0x20d91b[_0x936a67(0x590,0x51b,0x50c,0x585)](_0x45672d,_0x20d91b[_0x1cb7f8(-0x1a8,-0x233,-0x21d,-0x286)]),_0x998de9();return;}else console['error'](_0x20d91b['PbzVt'],_0x34a4a8);}}export function initImageUpload(_0x210a3e){const _0x1ae5cb={'asDOT':_0x266c36(-0x22a,-0x242,-0x1d6,-0x288)+_0x4adf5f(0x513,0x56b,0x57d,0x5b2),'qWndo':_0x4adf5f(0x561,0x549,0x4f7,0x53e)+_0x266c36(-0x24d,-0x2a8,-0x2ab,-0x1fc)+'ref','LUcvv':function(_0x399679,_0x5a2b72){return _0x399679!==_0x5a2b72;},'sBkOv':_0x266c36(-0x22c,-0x278,-0x201,-0x297),'XsdpD':function(_0x1ae7d6){return _0x1ae7d6();},'lJlBw':function(_0x909984,_0x442207){return _0x909984===_0x442207;},'Hypak':_0x4adf5f(0x5ca,0x507,0x560,0x4f6),'uElgq':function(_0x42943d){return _0x42943d();},'EzIkv':_0x4adf5f(0x540,0x561,0x4f7,0x529)+'2','zPLbN':_0x266c36(-0x1d7,-0x18e,-0x1ac,-0x187)+_0x266c36(-0x1f9,-0x18b,-0x18d,-0x18b)+'e-btn','zYeXv':'#imageInpu'+_0x266c36(-0x1b8,-0x15e,-0x1e8,-0x1ce),'lebWl':_0x4adf5f(0x5d1,0x555,0x5d1,0x5b2),'QFSGz':_0x266c36(-0x228,-0x1c8,-0x1c3,-0x1ab)+_0x4adf5f(0x4b3,0x569,0x4ff,0x496)+'e-btn','bwiae':_0x4adf5f(0x4b8,0x467,0x4d7,0x4e0),'Nqekn':_0x4adf5f(0x572,0x5b1,0x54a,0x52f)+_0x266c36(-0x233,-0x1eb,-0x274,-0x2b7)+_0x266c36(-0x1f7,-0x184,-0x1a7,-0x221)+_0x266c36(-0x157,-0x186,-0x18f,-0x191),'QHBhO':_0x266c36(-0x228,-0x226,-0x24e,-0x254)+_0x4adf5f(0x5ba,0x5b6,0x542,0x51e)+_0x266c36(-0x1f7,-0x245,-0x1aa,-0x25e)+_0x266c36(-0x157,-0x147,-0x15e,-0x176),'cdgIx':_0x4adf5f(0x4a3,0x4f9,0x4ef,0x542)+_0x4adf5f(0x4c3,0x576,0x528,0x525)+_0x4adf5f(0x4f3,0x483,0x4fe,0x499),'vjYEE':_0x4adf5f(0x45e,0x535,0x4e0,0x55f)+'t2'};_0x1ae5cb['XsdpD'](loadCachedImages),_0x210a3e[_0x4adf5f(0x573,0x5e6,0x5bb,0x5e9)](_0x1ae5cb['zPLbN'])['on'](_0x266c36(-0x24a,-0x29c,-0x250,-0x25a),()=>{function _0xb49eee(_0x17e192,_0x5f437d,_0x426df9,_0x4f1f56){return _0x266c36(_0x426df9-0x314,_0x5f437d-0x104,_0x426df9-0x105,_0x4f1f56);}function _0x2f4ea8(_0x2e475d,_0xad6834,_0xec092d,_0x21030c){return _0x4adf5f(_0x2e475d-0x16c,_0xad6834-0x16c,_0xad6834- -0x70,_0x21030c);}document[_0xb49eee(0x7e,0xdf,0xd5,0xd7)+_0xb49eee(0x108,0x16f,0x152,0x197)](_0x1ae5cb[_0xb49eee(0x145,0x95,0xda,0x11d)])[_0xb49eee(0x57,0x4a,0xca,0x61)]();});function _0x4adf5f(_0x3c83b3,_0x6289cd,_0x439c43,_0x133b23){return _0x55d14b(_0x439c43-0x2e7,_0x6289cd-0xfd,_0x133b23,_0x133b23-0xa7);}_0x210a3e[_0x266c36(-0x166,-0x10c,-0x13b,-0x1ce)](_0x1ae5cb[_0x4adf5f(0x5b0,0x55b,0x548,0x549)])['on'](_0x1ae5cb[_0x4adf5f(0x51f,0x5be,0x54c,0x5a2)],handleNovelaiImageUpload),_0x210a3e[_0x4adf5f(0x5f1,0x540,0x5bb,0x555)](_0x1ae5cb[_0x266c36(-0x194,-0x215,-0x1fa,-0x14f)])['on'](_0x1ae5cb[_0x4adf5f(0x4fb,0x503,0x544,0x4fb)],()=>{function _0x3a72c5(_0x46444b,_0x2fbe73,_0xa566a3,_0x31a3c4){return _0x4adf5f(_0x46444b-0x12e,_0x2fbe73-0x12f,_0x46444b- -0x6c8,_0x31a3c4);}function _0x4d3e08(_0x293b32,_0x3282a4,_0x116bb1,_0x441592){return _0x266c36(_0x293b32-0x6b6,_0x3282a4-0x11e,_0x116bb1-0xf9,_0x116bb1);}_0x1ae5cb[_0x3a72c5(-0x166,-0x17e,-0x132,-0x1dc)](_0x1ae5cb['sBkOv'],_0x1ae5cb['sBkOv'])?_0x482b22[_0x4d3e08(0x477,0x483,0x42c,0x421)+_0x4d3e08(0x4f4,0x485,0x56a,0x550)](_0x1ae5cb[_0x3a72c5(-0x1ba,-0x1d8,-0x1f5,-0x217)])[_0x3a72c5(-0x1f1,-0x1c9,-0x212,-0x185)]():_0x1ae5cb[_0x4d3e08(0x55b,0x5c9,0x4d7,0x5d7)](removeNovelaiImage);}),_0x210a3e[_0x4adf5f(0x5c7,0x5f3,0x5bb,0x5a6)](_0x1ae5cb[_0x266c36(-0x189,-0x11f,-0x192,-0x123)])['on'](_0x1ae5cb[_0x266c36(-0x1dd,-0x21f,-0x22b,-0x15f)],()=>{function _0x57ac68(_0x2b2f1e,_0x5d37b8,_0x299181,_0x53fd22){return _0x266c36(_0x299181-0x5ed,_0x5d37b8-0x1d2,_0x299181-0xc7,_0x2b2f1e);}function _0x27865f(_0xe5631b,_0x34d4b4,_0x3ef458,_0x587463){return _0x266c36(_0xe5631b-0x241,_0x34d4b4-0x35,_0x3ef458-0x27,_0x587463);}document[_0x27865f(0x2,-0x49,0x31,0x36)+_0x27865f(0x7f,0xc6,0xc5,0xe)](_0x1ae5cb['qWndo'])[_0x27865f(-0x9,-0x4,0x2,0x60)]();}),_0x210a3e[_0x266c36(-0x166,-0x19d,-0x144,-0x117)](_0x4adf5f(0x4dc,0x52e,0x4e0,0x51e)+_0x4adf5f(0x5af,0x5bc,0x56b,0x517)+_0x4adf5f(0x4ff,0x553,0x523,0x4b2))['on'](_0x1ae5cb[_0x4adf5f(0x55a,0x539,0x54c,0x55d)],handleNovelaiCharRefImageUpload),_0x210a3e[_0x266c36(-0x166,-0x1b8,-0x17a,-0x13d)](_0x1ae5cb['QHBhO'])['on'](_0x1ae5cb[_0x4adf5f(0x4d8,0x4da,0x544,0x540)],()=>{function _0x4b6fcf(_0x3b9275,_0x3ce7f2,_0xa36ec3,_0x4f1e67){return _0x266c36(_0x3b9275-0x732,_0x3ce7f2-0x16b,_0xa36ec3-0x94,_0x4f1e67);}function _0x505789(_0x2827d2,_0x55b551,_0x43c35a,_0x4bae85){return _0x4adf5f(_0x2827d2-0x1aa,_0x55b551-0x146,_0x55b551-0xa,_0x2827d2);}const _0xbf0ce0={'cJdRu':function(_0x1ae45c,_0x977d5){return _0x1ae45c(_0x977d5);}};_0x1ae5cb['lJlBw'](_0x1ae5cb['Hypak'],_0x1ae5cb['Hypak'])?_0x1ae5cb[_0x4b6fcf(0x520,0x4b3,0x59e,0x500)](removeNovelaiCharRefImage):_0xbf0ce0[_0x4b6fcf(0x4e1,0x49f,0x51b,0x479)](_0x38528a,_0x4a3044[_0x505789(0x509,0x57a,0x55d,0x55d)]);});function _0x266c36(_0x2663bd,_0x48477e,_0xc87614,_0x6aa31){return _0x55d14b(_0x2663bd- -0x43a,_0x48477e-0xd6,_0x6aa31,_0x6aa31-0x15);}_0x210a3e[_0x266c36(-0x166,-0x1b0,-0x118,-0x123)](_0x1ae5cb['cdgIx'])['on'](_0x1ae5cb['bwiae'],()=>{function _0x103ef1(_0x7a99ca,_0xf25fc6,_0x5b1953,_0x1108b4){return _0x266c36(_0x5b1953-0x2be,_0xf25fc6-0xa4,_0x5b1953-0x137,_0x7a99ca);}function _0x4dbc65(_0x555193,_0x535651,_0x3923dd,_0x2df7b0){return _0x266c36(_0x3923dd-0xb1,_0x535651-0x62,_0x3923dd-0x156,_0x555193);}document[_0x4dbc65(-0x1e3,-0x206,-0x18e,-0x12d)+'ById'](_0x1ae5cb[_0x4dbc65(-0x182,-0x150,-0x183,-0x110)])[_0x103ef1(0x2b,0x85,0x74,0x29)]();}),_0x210a3e['find'](_0x1ae5cb[_0x4adf5f(0x5f7,0x572,0x5a1,0x611)])['on'](_0x4adf5f(0x5ec,0x5b2,0x5d1,0x5d7),handleImageUpload2),_0x210a3e[_0x4adf5f(0x608,0x5c2,0x5bb,0x635)](_0x4adf5f(0x594,0x545,0x532,0x592)+'emove-imag'+'e-btn')['on'](_0x1ae5cb[_0x4adf5f(0x54e,0x5a2,0x544,0x5a1)],()=>{function _0x4aa9f8(_0x576fed,_0x45a783,_0x4a86a6,_0x4a0291){return _0x4adf5f(_0x576fed-0x7f,_0x45a783-0xc9,_0x45a783- -0x3e2,_0x4a86a6);}_0x1ae5cb[_0x4aa9f8(0x126,0x12d,0xe7,0x101)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};