(function(_0xcbb8c9,_0x1991ac){function _0x32e3d0(_0x49490b,_0x49cc9e,_0x1ffc86,_0x381cd2){return _0x20bc(_0x49490b- -0x1a,_0x1ffc86);}const _0x488bbe=_0xcbb8c9();function _0x126122(_0x30190f,_0x45531d,_0x3a505b,_0x3686a1){return _0x20bc(_0x3686a1- -0x1ef,_0x3a505b);}while(!![]){try{const _0x315160=parseInt(_0x126122(-0x92,-0x129,-0x9a,-0x7e))/(0x122*0x15+0x697+-0x9*0x360)+parseInt(_0x32e3d0(0x1b2,0x11b,0xf9,0x10e))/(-0x1d4+0x1b54+-0x197e)*(-parseInt(_0x126122(-0x39,0x15,0x21,0x55))/(0x2025+-0x1871+-0x7b1))+parseInt(_0x32e3d0(0x179,0x232,0x11f,0x195))/(-0xa97*0x1+-0x1981*0x1+-0x4*-0x907)+-parseInt(_0x126122(-0x1ab,-0x155,-0x2d,-0xd7))/(0xf2b+-0xacb+-0x45b)*(parseInt(_0x32e3d0(0x141,0x1e6,0x6c,0xb5))/(0x1ab+0x1303*-0x1+0x115e))+-parseInt(_0x32e3d0(0x1af,0x1c2,0x27b,0x226))/(0x1*0x355+0x266d+-0x3*0xde9)*(parseInt(_0x126122(-0x94,-0x81,-0x167,-0xd0))/(0x56b+0x1efc+0x245f*-0x1))+-parseInt(_0x126122(0x3f,0x7b,-0xa7,-0x3b))/(0xcfb*-0x2+-0xb1d+0x251c)*(-parseInt(_0x126122(-0x75,-0xc0,-0x119,-0xc7))/(-0x12b7+-0x33*-0x30+0x931))+-parseInt(_0x32e3d0(0x1e5,0x29d,0x15a,0x2b8))/(0x19c8+0x26b3+-0x4070)*(parseInt(_0x126122(0x44,0xe,-0xa4,0x14))/(0x2cb*-0x3+-0xd9b+0x4*0x582));if(_0x315160===_0x1991ac)break;else _0x488bbe['push'](_0x488bbe['shift']());}catch(_0x49dfdb){_0x488bbe['push'](_0x488bbe['shift']());}}}(_0x302d,0x78ee*-0x1b+0x2*0x25e6d+0x1353ac));const _0x330a13=(function(){const _0x2e84d0={};_0x2e84d0['LHgWP']=function(_0x238580,_0x5ead27){return _0x238580!==_0x5ead27;},_0x2e84d0[_0x34dc0b(0x66,0xb2,0x180,0x133)]=_0x37faaa(-0x3f,-0x95,-0x34,-0x40),_0x2e84d0[_0x37faaa(-0x12,-0xca,-0x18a,-0xd3)]=function(_0x325ab0,_0x4bf620){return _0x325ab0!==_0x4bf620;},_0x2e84d0[_0x34dc0b(0x167,0x159,0xe5,0x9d)]=_0x34dc0b(0x6e,0x6c,0x98,0x9a),_0x2e84d0[_0x34dc0b(0xe6,0xa3,0xd,0x78)]=function(_0x15cece,_0x97284){return _0x15cece===_0x97284;};function _0x37faaa(_0x3aa09d,_0x1a2fd8,_0x4b7238,_0x3a2d9d){return _0x20bc(_0x1a2fd8- -0x2a5,_0x4b7238);}_0x2e84d0[_0x37faaa(-0x75,-0xc9,-0xe,-0x17e)]=_0x37faaa(-0x108,-0x107,-0x147,-0x176),_0x2e84d0[_0x34dc0b(0x190,0x249,0x228,0x197)]=function(_0x1eabd6,_0x1d02af){return _0x1eabd6!==_0x1d02af;};function _0x34dc0b(_0xfaf137,_0x81f538,_0x366d50,_0x5cd0df){return _0x20bc(_0x5cd0df- -0xed,_0x366d50);}_0x2e84d0['pqcPu']=_0x34dc0b(0xce,0x163,0x2,0xd6);const _0x2f6d87=_0x2e84d0;let _0x30669f=!![];return function(_0x2329a4,_0x4d6c7e){const _0x3969a4={};_0x3969a4[_0x2bfe91(0x53e,0x5da,0x5f8,0x500)]='系统提示词',_0x3969a4[_0x3d2511(0x285,0x1c0,0x1e3,0x21e)]=_0x3d2511(0x2c4,0x28b,0x2ea,0x2af);function _0x3d2511(_0x23569f,_0x1fe3df,_0x27a95d,_0x35f1fa){return _0x37faaa(_0x23569f-0x5f,_0x35f1fa-0x387,_0x1fe3df,_0x35f1fa-0x0);}const _0x150ac4=_0x3969a4;function _0x2bfe91(_0x29ddde,_0x240880,_0x67a00,_0x522ace){return _0x37faaa(_0x29ddde-0x120,_0x29ddde-0x5a2,_0x240880,_0x522ace-0x170);}if(_0x2f6d87[_0x3d2511(0x361,0x2b2,0x335,0x366)](_0x2f6d87[_0x3d2511(0x36b,0x1e2,0x309,0x2ac)],_0x2f6d87[_0x2bfe91(0x4c7,0x58b,0x532,0x57b)])){const _0x333830={};_0x333830[_0x3d2511(0x2d6,0x2d9,0x32b,0x27a)]=_0x150ac4[_0x3d2511(0x367,0x2df,0x2e5,0x323)],_0x333830[_0x2bfe91(0x50d,0x4d1,0x53e,0x585)]='用户',_0x333830[_0x3d2511(0x266,0x1c9,0x20e,0x22a)]=_0x3d2511(0x33b,0x2d9,0x41f,0x37c),_0x333830['function']=_0x150ac4[_0x2bfe91(0x439,0x4ab,0x4ff,0x40a)],_0x333830['tool']='工具';const _0x41e4c7=_0x333830;return _0x41e4c7[_0x211a9b]||_0x575e75;}else{const _0x192506=_0x30669f?function(){function _0x192851(_0x26028f,_0x426c44,_0x555caf,_0x904b4a){return _0x3d2511(_0x26028f-0x1cc,_0x904b4a,_0x555caf-0x18d,_0x555caf- -0x3b4);}const _0x264ad0={'EwDWV':function(_0x19b528,_0x226bb7){function _0x5a30a3(_0x3670cb,_0xd712fc,_0x463f29,_0x10fe14){return _0x20bc(_0x10fe14-0x2c5,_0x3670cb);}return _0x2f6d87[_0x5a30a3(0x4ab,0x3db,0x456,0x4b0)](_0x19b528,_0x226bb7);},'wsoXH':_0x2f6d87[_0x73e97c(0x4c5,0x48a,0x44d,0x3d3)],'mhMmC':function(_0x48ac39,_0x41a59d){function _0x4bc7b9(_0x19f6d2,_0x524fd6,_0x2a638a,_0x562d00){return _0x73e97c(_0x2a638a,_0x524fd6-0x12d,_0x562d00-0x106,_0x562d00-0x1eb);}return _0x2f6d87[_0x4bc7b9(0x5aa,0x48e,0x5a7,0x50e)](_0x48ac39,_0x41a59d);},'TiCYO':_0x73e97c(0x2c0,0x2ff,0x375,0x348)};function _0x73e97c(_0x42496e,_0x18cd1e,_0x3cd54b,_0x441869){return _0x3d2511(_0x42496e-0x92,_0x42496e,_0x3cd54b-0xe3,_0x3cd54b-0x14b);}if(_0x2f6d87[_0x73e97c(0x3be,0x45e,0x3b7,0x33d)]!=='GbEyP'){if(_0x4d6c7e){if(_0x2f6d87[_0x192851(-0xa5,-0x179,-0x16d,-0x10a)](_0x192851(-0x1e1,-0x1f8,-0x134,-0x1e1),_0x2f6d87[_0x192851(-0x1b8,-0x1bf,-0xf6,-0x184)])){const _0x4b9409=_0x4d6c7e[_0x192851(-0x290,-0x202,-0x1cb,-0x20e)](_0x2329a4,arguments);return _0x4d6c7e=null,_0x4b9409;}else{if(_0x5aef69){const _0x48863f=_0x39ebad[_0x192851(-0x17b,-0x20a,-0x1cb,-0x20f)](_0x3a83d7,arguments);return _0x31b315=null,_0x48863f;}}}}else _0x45ef17['history']['forEach'](_0x433ff2=>{function _0xc722ec(_0x580bc6,_0x1076b3,_0x2c164a,_0x33d325){return _0x73e97c(_0x33d325,_0x1076b3-0x1d3,_0x580bc6-0x13c,_0x33d325-0x83);}function _0x6f1df8(_0x52a979,_0x44b67f,_0x542609,_0x4fb6fa){return _0x192851(_0x52a979-0x179,_0x44b67f-0x6c,_0x44b67f-0x12e,_0x4fb6fa);}if(_0x433ff2['user']&&_0x264ad0[_0xc722ec(0x5c0,0x4fc,0x60e,0x560)](_0x433ff2[_0x6f1df8(0x5c,0x6c,0xcd,0xe0)][_0x6f1df8(-0x4,0x3,0x1d,-0xa9)](),'')){const _0x56ad3e={};_0x56ad3e['role']=_0x264ad0[_0xc722ec(0x5e2,0x546,0x629,0x644)],_0x56ad3e['content']=_0x433ff2[_0x6f1df8(-0x31,0x6c,0x70,-0x20)],_0x4d28a1[_0xc722ec(0x534,0x5c9,0x58f,0x5df)](_0x56ad3e);}if(_0x433ff2['assistant']&&_0x264ad0[_0xc722ec(0x4c2,0x53f,0x3f5,0x46d)](_0x433ff2['assistant'][_0x6f1df8(0x63,0x3,-0x78,-0x6c)](),'')){const _0xaa6a1a={};_0xaa6a1a[_0xc722ec(0x4f6,0x58f,0x509,0x442)]=_0x264ad0[_0x6f1df8(-0x4f,-0x93,0x37,-0x22)],_0xaa6a1a['content']=_0x433ff2[_0xc722ec(0x4b1,0x3f6,0x401,0x565)],_0x54e401[_0xc722ec(0x534,0x4d7,0x5b3,0x5cf)](_0xaa6a1a);}});}:function(){};return _0x30669f=![],_0x192506;}};}()),_0x3f1d71=_0x330a13(this,function(){function _0xa898ae(_0x47ae7c,_0x4f1e40,_0x9b37cf,_0x571a8b){return _0x20bc(_0x4f1e40- -0x75,_0x571a8b);}const _0x7a0a08={};function _0x1398c5(_0x3defd6,_0x3b4e8e,_0x144ed7,_0x42e952){return _0x20bc(_0x3defd6-0x128,_0x42e952);}_0x7a0a08['MrFcP']=_0xa898ae(0x178,0x15c,0x111,0x10b)+'+$';const _0x3c9e29=_0x7a0a08;return _0x3f1d71[_0xa898ae(-0x2f,0x87,0x6e,0xd0)]()[_0x1398c5(0x31d,0x3bc,0x384,0x275)](_0x3c9e29['MrFcP'])[_0xa898ae(0x34,0x87,0x8b,0xec)]()[_0x1398c5(0x265,0x218,0x222,0x267)+'r'](_0x3f1d71)[_0x1398c5(0x31d,0x27e,0x2a4,0x35e)](_0x3c9e29[_0x1398c5(0x232,0x2a8,0x1d8,0x175)]);});_0x3f1d71();import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on']('st_chatu8_'+'cancel_llm'+'_task',({taskId:_0xa6f0cc})=>{const _0x4f840f={};_0x4f840f[_0x39af2e(0x1d3,0x2c4,0x240,0x1bd)]=function(_0x9a959e,_0x3489e4){return _0x9a959e===_0x3489e4;},_0x4f840f[_0x39af2e(0x2c4,0x284,0x1f4,0x178)]=function(_0x41abaf,_0x164fb1){return _0x41abaf===_0x164fb1;};function _0x39af2e(_0x4af96c,_0x5b7f0a,_0x3f207c,_0x5174cb){return _0x20bc(_0x3f207c-0x60,_0x5b7f0a);}function _0x373f91(_0x5e35b0,_0x6428b3,_0xf33ece,_0x17689f){return _0x20bc(_0x6428b3- -0x110,_0x5e35b0);}_0x4f840f[_0x39af2e(0x2aa,0x267,0x29a,0x2e1)]=_0x39af2e(0x18f,0x220,0x17e,0x101);const _0x83758d=_0x4f840f,_0x139f35=llmTaskControllers[_0x39af2e(0x134,0xfd,0x173,0x1e2)](_0xa6f0cc);_0x139f35&&(_0x83758d[_0x373f91(0x1ce,0x12a,0x184,0x170)]!==_0x83758d['pINUP']?(_0x83758d[_0x373f91(0x108,0xd0,0x71,0x9a)](_0xfb92a3,_0x2fbb3c)&&(_0x4838e5=null),(!_0x3db548||_0x83758d[_0x39af2e(0x23a,0x1b7,0x1f4,0x285)](_0x5c5529,null))&&_0x5a2ada()):(_0x139f35[_0x373f91(0x1a4,0x153,0xbb,0x161)](),llmTaskControllers['delete'](_0xa6f0cc),console[_0x39af2e(0x2c4,0x20a,0x236,0x169)](_0x39af2e(0x2c7,0x2ab,0x259,0x2f7)+_0x373f91(0x10e,0xa3,0x126,0x52)+_0xa6f0cc)));});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x5dc1d1){currentLLMRequestController=_0x5dc1d1;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){function _0x200df7(_0x2ef881,_0x3d408d,_0x2d7af7,_0x271e02){return _0x20bc(_0x2d7af7-0x2c,_0x2ef881);}currentLLMRequestController&&(currentLLMRequestController['abort'](),toastr[_0x200df7(0x2df,0x327,0x2c2,0x2ed)]('LLM\x20请求已中止。'));}function _0x80e9ba(_0x1fd07f,_0x5fe133,_0x165a4f,_0x45adec){return _0x20bc(_0x5fe133- -0x2b3,_0x1fd07f);}export function formatPromptForDisplay(_0x5153dc){function _0x397088(_0x5ba98c,_0xe0aa00,_0x4e1844,_0x456747){return _0x20bc(_0x456747-0x117,_0x4e1844);}const _0x4d9a28={'tgFuv':function(_0x38d88b,_0x4fcc3b){return _0x38d88b===_0x4fcc3b;},'LvUdf':function(_0x22e79a,_0x536648){return _0x22e79a===_0x536648;},'XITji':_0x5ecdd9(0x1a,-0x4b,0xc,-0x4d),'eWUDX':function(_0x408307,_0x52bc45,_0x199e06){return _0x408307(_0x52bc45,_0x199e06);},'yWcyu':_0x397088(0x294,0x2c8,0x355,0x327),'XYZKd':_0x397088(0x2c6,0x243,0x332,0x25f),'Qmfyc':_0x397088(0x2e7,0x26e,0x3cc,0x300),'JNemH':function(_0x2f17e5,_0x46ec44){return _0x2f17e5===_0x46ec44;},'EMlJW':_0x5ecdd9(-0x19a,-0x37,-0x1c0,-0xfe),'eMWop':function(_0x40a487,_0x33fa72){return _0x40a487===_0x33fa72;},'PFPaz':_0x397088(0x2c1,0x2f5,0x20b,0x26b),'WqRlg':_0x5ecdd9(-0xed,-0x1b0,-0x14f,-0x108),'YIQND':_0x397088(0x1be,0x27f,0x2f8,0x27d),'GWQFv':_0x397088(0x2c5,0x1af,0x1dd,0x234),'egJNj':function(_0x379197,_0x565ba3){return _0x379197===_0x565ba3;},'RUYaJ':_0x5ecdd9(-0x17c,-0x1a3,-0xab,-0xff),'PqYZg':_0x5ecdd9(-0x3c,-0xce,-0xbb,-0xf5),'vDiMY':_0x397088(0x2b0,0x337,0x286,0x355),'TqYot':function(_0x1db32f,_0x53a62d){return _0x1db32f/_0x53a62d;},'tSXSP':function(_0x15bba8,_0x513752){return _0x15bba8*_0x513752;},'svCzr':_0x397088(0x1ad,0x19d,0x19c,0x223),'OYUGq':function(_0xcfb864,_0x18a908){return _0xcfb864===_0x18a908;},'zsXOj':function(_0xf1a0a2,_0x2d286d){return _0xf1a0a2(_0x2d286d);},'GkwaG':function(_0x5922ef,_0x49c612){return _0x5922ef!==_0x49c612;},'goWch':_0x397088(0x391,0x33b,0x2dd,0x35a),'NrdGd':function(_0x39da8c,_0xe60f9b){return _0x39da8c+_0xe60f9b;},'poRnk':function(_0x3ef0af,_0x554d4d){return _0x3ef0af===_0x554d4d;},'ADrzv':'SkUIw','pPVwJ':_0x397088(0x244,0x22e,0x146,0x20c),'svzqk':_0x397088(0x3cf,0x30b,0x2a8,0x349),'Vtzgz':function(_0xc63210,_0x2ac4a9){return _0xc63210!==_0x2ac4a9;},'VvUII':_0x5ecdd9(0x39,-0xc0,-0x13b,-0x89),'OUwYN':function(_0x288a4a,_0x1552c0){return _0x288a4a(_0x1552c0);}};if(_0x4d9a28[_0x397088(0x216,0x2b4,0x193,0x269)](typeof _0x5153dc,_0x397088(0x285,0x1b8,0x324,0x275))){if(_0x4d9a28[_0x397088(0x444,0x2ff,0x32f,0x39f)](_0x4d9a28[_0x397088(0x287,0x2dd,0x356,0x282)],'deulI')){if(!_0x169a61[_0x5ecdd9(-0xc7,-0xb0,-0x192,-0xc8)])return;if(!_0x2cbf97[_0x5ecdd9(0x28,-0xa3,0x67,-0x28)]||_0x4d9a28[_0x5ecdd9(-0x8,0x64,0xc5,0xf)](_0x168d7f['content'][_0x5ecdd9(-0xcd,-0x177,-0x153,-0xe3)](),''))return;if(_0x4d9a28[_0x397088(0x36b,0x422,0x401,0x39a)](_0x468591[_0x397088(0x199,0x2a9,0x28b,0x22e)+'e'],_0x4d9a28[_0x397088(0x19a,0x2dc,0x29a,0x20f)])){if(!_0x334488||!_0x4d9a28[_0x5ecdd9(-0x20a,-0x21f,-0x23b,-0x175)](_0x4df0e9,_0x28a85d[_0x397088(0x1b6,0x2e9,0x1f3,0x21a)+'ds'],_0xd2d407))return;}const _0x53f150={};_0x53f150[_0x397088(0x1ee,0x309,0x271,0x2a4)]=_0x52f332[_0x5ecdd9(-0x106,-0x4d,-0x1ba,-0xfd)]||_0x4d9a28[_0x397088(0x3f7,0x3aa,0x326,0x332)],_0x53f150[_0x397088(0x31e,0x437,0x31f,0x379)]=_0x52dd7a[_0x397088(0x2c3,0x41e,0x321,0x379)],_0x1946d4[_0x5ecdd9(0x7,-0x136,-0x2f,-0xbf)](_0x53f150);}else return _0x5153dc;}if(Array[_0x5ecdd9(-0x126,-0x106,-0xf8,-0x56)](_0x5153dc)){if(_0x4d9a28['eMWop'](_0x4d9a28[_0x5ecdd9(0x56,-0x68,0x60,0x11)],_0x4d9a28[_0x5ecdd9(0xcc,0x9b,0xc2,0x11)])){const _0x1fc98f=[];return _0x5153dc[_0x5ecdd9(-0x2f,-0x85,-0xad,-0xcc)]((_0x33f80e,_0x427356)=>{function _0x2a8ab0(_0x6e23b0,_0x197774,_0x1ecf09,_0x458e11){return _0x397088(_0x6e23b0-0x1aa,_0x197774-0x1d3,_0x458e11,_0x1ecf09- -0x387);}function _0x48dc76(_0x5cf02b,_0x18cabd,_0x142fd3,_0x29f280){return _0x5ecdd9(_0x18cabd,_0x18cabd-0x10e,_0x142fd3-0xe6,_0x29f280-0xec);}const _0x12bdd1={};_0x12bdd1['bNbtn']=_0x2a8ab0(-0x2b,-0xa9,-0x9f,-0x13d)+'+$',_0x12bdd1[_0x48dc76(-0x2,0xf7,0x104,0x85)]=_0x4d9a28['svCzr'];const _0x58b243=_0x12bdd1;if(_0x4d9a28[_0x48dc76(0x151,0x120,0x170,0xea)](_0x2a8ab0(-0x97,-0x194,-0xf2,-0x7e),'MsDuU')){const _0x318e1b=_0x33f80e[_0x48dc76(-0xa4,-0x61,0x6a,-0x11)]||_0x4d9a28[_0x2a8ab0(-0xc6,-0x167,-0x14d,-0xde)],_0x22f9c3=_0x4d9a28['zsXOj'](getRoleLabel,_0x318e1b);_0x1fc98f['push'](''+'═'['repeat'](0x42d*0x5+0xf4*-0x2+-0x12c7)),_0x1fc98f['push']('【'+_0x22f9c3+'】'),_0x1fc98f[_0x2a8ab0(-0x52,-0x32,-0xa5,-0xbc)](''+'─'[_0x48dc76(0x4a,0x4b,-0xda,-0x21)](-0x14a3*0x1+0x1810+0x33b*-0x1));const _0xe86643=_0x33f80e[_0x48dc76(0x139,0x27,0x55,0xc4)];if(typeof _0xe86643===_0x48dc76(-0x2e,-0x4,-0x104,-0x40))_0x4d9a28[_0x2a8ab0(0x0,-0x3d,-0xf,-0x8)](_0x4d9a28[_0x2a8ab0(-0x9a,-0x4e,0x3,0x58)],_0x4d9a28['goWch'])?_0x464a05+='\x20('+_0x420059['join'](',\x20')+')':_0x1fc98f[_0x48dc76(-0x2f,0x83,-0xa1,0x2d)](_0xe86643);else Array[_0x2a8ab0(-0x95,0x76,-0x3c,0x94)](_0xe86643)&&_0xe86643['forEach'](_0x3650b7=>{function _0x3e1538(_0x3f04e3,_0x5447c7,_0x5cc334,_0x247b39){return _0x2a8ab0(_0x3f04e3-0x9f,_0x5447c7-0x8a,_0x5447c7-0x129,_0x3f04e3);}function _0x25b98a(_0x1df2b4,_0xc627f3,_0x51df37,_0x4f87b1){return _0x48dc76(_0x1df2b4-0x110,_0x51df37,_0x51df37-0xa8,_0xc627f3-0x3b9);}const _0x1789ae={};_0x1789ae['cANLV']=function(_0x44dd9d,_0x52c385){return _0x44dd9d!==_0x52c385;},_0x1789ae[_0x25b98a(0x401,0x32d,0x285,0x320)]=_0x4d9a28['yWcyu'],_0x1789ae[_0x25b98a(0x2f2,0x348,0x333,0x3bf)]=_0x4d9a28[_0x25b98a(0x3f0,0x37b,0x3a9,0x3ef)];const _0xfdb4b7=_0x1789ae;if(_0x4d9a28[_0x25b98a(0x462,0x490,0x55b,0x404)]!==_0x4d9a28['Qmfyc']){if(_0x49dd59[_0x25b98a(0x48e,0x42b,0x406,0x398)]&&_0xfdb4b7[_0x3e1538(0xa1,0x11f,0x175,0x1f3)](_0x41d9bd['user'][_0x3e1538(0xbf,0x60,0xda,0xbf)](),'')){const _0x315069={};_0x315069['role']=_0xfdb4b7[_0x3e1538(-0x24,-0x35,0x48,0x7d)],_0x315069[_0x25b98a(0x4c2,0x47d,0x497,0x439)]=_0x37e666[_0x3e1538(0x180,0xc9,0xb7,0x16)],_0x329ae2[_0x3e1538(-0x17,0x84,-0x48,0x33)](_0x315069);}if(_0x290bed[_0x3e1538(-0xa0,0x1,0x7e,-0x8f)]&&_0x4b80d5['assistant'][_0x3e1538(0x96,0x60,-0x1b,-0x38)]()!==''){const _0x803d1b={};_0x803d1b[_0x25b98a(0x3d2,0x3a8,0x3ec,0x36f)]=_0xfdb4b7[_0x3e1538(-0x35,-0x1a,0xad,-0x80)],_0x803d1b[_0x25b98a(0x428,0x47d,0x54b,0x511)]=_0x32f8c0[_0x25b98a(0x436,0x363,0x2f6,0x28f)],_0x411796[_0x3e1538(0x26,0x84,0x149,0x10f)](_0x803d1b);}}else{if(_0x4d9a28[_0x3e1538(0xe2,0x12f,0x124,0x19a)](_0x3650b7[_0x25b98a(0x4e1,0x4a2,0x51a,0x4b7)],_0x4d9a28[_0x25b98a(0x511,0x482,0x456,0x52b)]))_0x1fc98f[_0x25b98a(0x47d,0x3e6,0x433,0x4b4)](_0x3650b7[_0x3e1538(-0x7c,0x45,-0x89,-0x44)]||'');else{if(_0x4d9a28[_0x3e1538(0x124,0x9c,0x106,0x91)](_0x3650b7[_0x25b98a(0x4d8,0x4a2,0x487,0x3ed)],_0x4d9a28[_0x25b98a(0x2f2,0x3bd,0x38c,0x37b)])){if(_0x4d9a28[_0x25b98a(0x4b0,0x44a,0x49c,0x3f8)]!==_0x4d9a28[_0x3e1538(0x63,0x73,0x13e,-0x1d)]){const _0x54590d=_0x3650b7['image_url']?.['url']||'';if(_0x54590d[_0x25b98a(0x450,0x448,0x43a,0x4db)](_0x4d9a28[_0x25b98a(0x3b8,0x485,0x4db,0x537)])){if(_0x4d9a28[_0x3e1538(0x114,0xc4,0xcf,0x127)](_0x4d9a28[_0x25b98a(0x44a,0x44b,0x4a1,0x4a6)],_0x4d9a28[_0x3e1538(0x12a,0x88,0x55,0x8a)]))_0x2fae8f=''+_0x4556f5[_0x3e1538(0x39,0xfe,0x1a3,0x82)](_0x23674c['error']);else{const _0x2e9be4=_0x54590d[_0x25b98a(0x4b8,0x3f5,0x4a5,0x426)](/^data:([^;]+);/),_0x37a82e=_0x2e9be4?_0x2e9be4[0x27*-0x1a+0x1bd6+-0x3f*0x61]:_0x4d9a28[_0x25b98a(0x2a1,0x33e,0x3bf,0x3bf)],_0x1c0868=_0x54590d[_0x3e1538(0x10f,0x3c,0x101,0x2)](',')[-0x1*-0x216f+0x1*0xfc0+-0x312e]||'',_0x3520df=Math['round'](_0x4d9a28[_0x3e1538(0x38,0x8e,0xbc,0x1e)](_0x4d9a28[_0x25b98a(0x380,0x3f0,0x3fa,0x4a5)](_0x4d9a28[_0x25b98a(0x428,0x415,0x3db,0x4dc)](_0x1c0868['length'],-0x3*-0x3c7+-0x2*-0x3cd+0x2*-0x976),-0x209e+-0xad*-0x27+0x647),0xe*-0x179+-0x1*-0xf69+-0x935*-0x1));_0x1fc98f[_0x25b98a(0x412,0x3e6,0x43c,0x35d)](_0x25b98a(0x3bd,0x446,0x3f1,0x450)+':\x20'+_0x37a82e+',\x20约\x20'+_0x3520df+'KB]');}}else _0x1fc98f[_0x3e1538(0x154,0x84,0xa6,0x3e)](_0x25b98a(0x360,0x311,0x26a,0x352)+_0x54590d+']');}else return _0xafb1d4[_0x3e1538(0xe,-0x4b,-0xf7,-0xce)]()[_0x25b98a(0x4b1,0x410,0x44b,0x4da)](kVGGFf['bNbtn'])[_0x3e1538(-0x4b,-0x4b,-0x93,-0x79)]()[_0x25b98a(0x286,0x358,0x31a,0x2b8)+'r'](_0xecd7fc)[_0x3e1538(0xe6,0xae,0xdf,0x7e)](_0x3e1538(0x3f,0x8a,0x153,0x15d)+'+$');}}}});_0x1fc98f['push']('');}else _0x2e4048=_0x58b243[_0x48dc76(0x135,0x14,0x7a,0x85)],_0x4a71c7[_0x48dc76(-0x1b,0x2a,0x15,0xac)](_0x48d04d+(_0x2a8ab0(-0x106,-0x4b,-0xe1,-0x17d)+_0x48dc76(-0x64,0x5f,-0xa6,-0x72)+'断、max_toke'+_0x48dc76(0xec,0x1a7,0x1a2,0xdc)+_0x2a8ab0(0x1,-0x38,-0xca,-0x12)));}),_0x1fc98f['join']('\x0a');}else _0x142224=_0x4d9a28['NrdGd'](_0x3b63cb,'/v1');}function _0x5ecdd9(_0x47e2b1,_0x1f5a27,_0x1a7ac5,_0x3c26ae){return _0x20bc(_0x3c26ae- -0x28a,_0x47e2b1);}if(typeof _0x5153dc===_0x4d9a28[_0x397088(0x29f,0x219,0x277,0x230)]&&_0x4d9a28[_0x5ecdd9(0x34,-0x7e,0xc4,0x4)](_0x5153dc,null)){if(_0x5ecdd9(-0x7d,-0x19c,-0x23,-0xef)!==_0x4d9a28[_0x397088(0x41d,0x3b5,0x362,0x34d)])return JSON['stringify'](_0x5153dc,null,0x2696+0x3*-0xb71+-0x3*0x16b);else _0x29f933=''+_0x279cb1[_0x5ecdd9(-0xe,0x87,-0x119,-0x45)](_0x4dc935['error']);}return _0x4d9a28[_0x397088(0x26c,0x30b,0x1fc,0x2c2)](String,_0x5153dc);}export function getRoleLabel(_0x6fd17){const _0x515ee2={};_0x515ee2[_0x2e3faf(0x3d8,0x4c6,0x41e,0x361)]=_0x2e3faf(0x466,0x367,0x412,0x449),_0x515ee2[_0x49c216(0x5f,0xb5,0x11c,0x119)]=_0x2e3faf(0x477,0x487,0x3ce,0x43c);function _0x2e3faf(_0x555baf,_0x23fb29,_0x1c17aa,_0x3b5af0){return _0x20bc(_0x1c17aa-0x201,_0x555baf);}const _0x221f01=_0x515ee2,_0x482cab={};_0x482cab[_0x49c216(0x25,0x7f,-0x15,0x7)]=_0x221f01[_0x49c216(0xaa,0x30,0x65,0x5d)],_0x482cab[_0x49c216(0x9d,0xd1,-0xb,0x15a)]='用户';function _0x49c216(_0x3d68b2,_0x472d0b,_0x5ed13c,_0x14e851){return _0x20bc(_0x3d68b2- -0x173,_0x472d0b);}_0x482cab['assistant']='AI助手',_0x482cab[_0x49c216(-0x4f,-0x7c,0x3a,0x77)]=_0x221f01[_0x2e3faf(0x3e9,0x44b,0x3d3,0x40b)],_0x482cab[_0x2e3faf(0x427,0x2f9,0x3c5,0x475)]='工具';const _0x3e9684=_0x482cab;return _0x3e9684[_0x6fd17]||_0x6fd17;}export function getCurrentLLMProfile(){function _0x16c5df(_0x2c22f8,_0x58f26a,_0x3eda11,_0x1b9b4c){return _0x20bc(_0x1b9b4c- -0x145,_0x2c22f8);}function _0x9e26cf(_0x4afc54,_0x53b087,_0x3c9e6f,_0x20a2c0){return _0x20bc(_0x20a2c0- -0x5,_0x3c9e6f);}const _0x3a35d3=extension_settings[extensionName][_0x16c5df(0x1ca,0x113,0x1cf,0x11f)+'es']||{},_0x2944cb=extension_settings[extensionName]['current_ll'+'m_profile'];return _0x3a35d3[_0x2944cb]||_0x3a35d3[Object[_0x9e26cf(0xd9,0x270,0x19d,0x19c)](_0x3a35d3)[0x556+-0x8c7+-0x1*-0x371]]||{};}export function getCurrentTestContext(){function _0x251276(_0x4ec600,_0x113dad,_0x51032c,_0x5b32fb){return _0x20bc(_0x113dad-0x263,_0x4ec600);}const _0x1993de=extension_settings[extensionName][_0x251276(0x368,0x389,0x454,0x357)+_0x38ca3f(0x358,0x36b,0x412,0x3e9)+'s']||{};function _0x38ca3f(_0x3b7c68,_0x285ce0,_0xf8cf77,_0x530eac){return _0x20bc(_0x285ce0-0x23d,_0x3b7c68);}const _0x4891fb=extension_settings[extensionName]['current_te'+'st_context'+'_profile'];return _0x1993de[_0x4891fb]||_0x1993de[Object[_0x38ca3f(0x3c2,0x3de,0x47a,0x42a)](_0x1993de)[-0xa49+0x1*0x1b37+-0x18a*0xb]]||{};}export function getEffectiveConfigForRequestType(_0x2a1eb4){const _0x174040=extension_settings[extensionName][_0x51c83a(0x102,0x78,0xcf,0x116)+_0x51c83a(0x6c,0x193,0xc4,0x4e)+_0x51c83a(0xdd,0xcb,0x128,0xb9)]||{},_0x56f10f={};_0x56f10f[_0x51c83a(-0xd7,0x69,-0x2e,-0xe7)+'e']='默认';function _0x51c83a(_0x4d012b,_0x1e2566,_0x5c23e5,_0x3f4dae){return _0x20bc(_0x5c23e5- -0x144,_0x4d012b);}_0x56f10f['context_pr'+_0x16b6c2(0x2a7,0x263,0x1f7,0x1e9)]='默认';function _0x16b6c2(_0x541d6b,_0x30c236,_0x1d4e93,_0x8b7e6){return _0x20bc(_0x30c236- -0x1b,_0x8b7e6);}const _0x40017c=_0x174040[_0x2a1eb4]||_0x56f10f,_0x443e86=extension_settings[extensionName]['llm_profil'+'es']||{},_0x5d2ca0=extension_settings[extensionName][_0x51c83a(0xad,-0x87,-0x1e,-0x19)+_0x51c83a(-0x91,-0x5,-0x16,-0xda)+'s']||{},_0x38cfac=_0x40017c['api_profil'+'e']||'默认',_0x4f7b7a=_0x443e86[_0x38cfac]||_0x443e86[Object['keys'](_0x443e86)[-0x146a+-0x1*0x1327+0x2791]]||{},_0xe00f34=_0x40017c[_0x51c83a(0x12c,0x16c,0x119,0x14c)+_0x51c83a(0xfd,0x8b,0x13a,0x70)]||'默认',_0x440bc3=_0x5d2ca0[_0xe00f34]||_0x5d2ca0[Object[_0x51c83a(0xd,0x24,0x5d,0x48)](_0x5d2ca0)[-0x32*-0x5d+-0xc4d+-0x5dd]]||{},_0x38295e={};return _0x38295e[_0x51c83a(-0x71,0x69,0x3d,0x80)]=_0x4f7b7a[_0x16b6c2(0x112,0x166,0x13c,0x1fb)]||'',_0x38295e[_0x51c83a(0x6d,0x43,0xc3,0x27)]=_0x4f7b7a[_0x16b6c2(0x12e,0x1ec,0x19c,0x280)]||'',_0x38295e[_0x16b6c2(0x298,0x23a,0x252,0x1fe)]=_0x4f7b7a[_0x51c83a(0xf4,0xd1,0x111,0x1ae)]||'',_0x38295e['temperatur'+'e']=_0x4f7b7a[_0x51c83a(-0x39,0x74,0x7d,0xb8)+'e']??0x23cf+0x3*-0xdd+-0x2138+0.7,_0x38295e[_0x51c83a(0x8,-0x82,0x11,0x74)]=_0x4f7b7a['top_p']??-0xa*-0x22c+-0x2515*0x1+-0x232*-0x7,_0x38295e[_0x51c83a(0xde,0x113,0xe4,0x21)]=_0x4f7b7a[_0x51c83a(0x1a5,0x114,0xe4,0x1aa)]??-0x3a*-0x11+-0x13f+0x5*-0x1f,_0x38295e['stream']=_0x4f7b7a[_0x51c83a(-0x76,0x32,-0xa,0x98)]??![],_0x38295e[_0x16b6c2(0x260,0x266,0x1e6,0x2c7)+'xy']=_0x4f7b7a[_0x51c83a(0x1ca,0x9b,0x13d,0x1fb)+'xy']??![],_0x38295e[_0x16b6c2(0x2ac,0x1fc,0x161,0x270)]=_0x440bc3,_0x38295e;}export function buildPromptForRequestType(_0xf73470,_0x57190f=''){const _0x45cd22={'uGpjd':_0x1e669a(-0x135,-0x130,-0x86,-0x1e1)+'1','qXGiE':_0x1e669a(-0x277,-0x1f5,-0x20f,-0x172)+'e\x20request\x20'+'aborted.','LEgYp':_0x1e669a(-0x1cc,-0x1a1,-0x1f4,-0x18d)+_0x374bf1(0x14,-0x1d,0x43,-0x36),'bsQdY':function(_0xbe65cb,_0xdd03fc){return _0xbe65cb===_0xdd03fc;},'xnsZp':_0x1e669a(-0x226,-0x188,-0x20f,-0x11c),'afCcP':_0x374bf1(0x17d,0xae,0xb8,0x240),'dkzJk':_0x1e669a(-0x134,-0x18a,-0x11a,-0x198)+'e\x20Error:','kqIje':function(_0x164db4,_0x3dd46b){return _0x164db4(_0x3dd46b);},'vgUhB':'object','hSfbp':function(_0x21d7c9,_0x32392d){return _0x21d7c9>_0x32392d;},'fCQdq':function(_0x238ca2,_0x49d762){return _0x238ca2!==_0x49d762;},'tiZtp':'user','IwkHm':function(_0x3efdf3,_0xa0f32){return _0x3efdf3!==_0xa0f32;},'qIGOc':_0x1e669a(-0x205,-0x292,-0x28d,-0x2a9),'ntOQS':_0x374bf1(0x53,0x10e,0x6b,0x128),'SCxwS':_0x1e669a(-0x21c,-0x165,-0xc8,-0x222),'uSRmt':_0x374bf1(0x166,0xa8,0x158,0x1fc)},_0x2dceda=extension_settings[extensionName]['llm_reques'+_0x1e669a(-0x1d7,-0x1bd,-0x1c6,-0x206)+'figs']||{},_0x4a9a03={};function _0x1e669a(_0xe1e535,_0x8e65f5,_0x485154,_0x5c9954){return _0x20bc(_0x8e65f5- -0x3c5,_0x485154);}_0x4a9a03[_0x1e669a(-0x115,-0x168,-0x106,-0x137)+'ofile']='默认';function _0x374bf1(_0x45055c,_0x5f28b4,_0x55dd64,_0x1932f6){return _0x20bc(_0x45055c- -0xf5,_0x55dd64);}const _0xbfa746=_0x2dceda[_0xf73470]||_0x4a9a03,_0x56888e=_0xbfa746['context_pr'+_0x374bf1(0x189,0x17c,0x1cf,0x14b)]||'默认',_0x45a3c2=extension_settings[extensionName][_0x1e669a(-0x2cd,-0x29f,-0x319,-0x2b1)+_0x1e669a(-0x1eb,-0x297,-0x316,-0x248)+'s']||{},_0x202512=_0x45a3c2[_0x56888e]||_0x45a3c2[Object[_0x374bf1(0xac,0x1b,0x57,0xea)](_0x45a3c2)[-0xa+0x1*-0x1e8b+-0x1*-0x1e95]]||{},_0x4688d=[];if(_0x202512[_0x1e669a(-0xda,-0x134,-0x115,-0x18d)]&&Array[_0x374bf1(0x13f,0x96,0x204,0xd6)](_0x202512[_0x374bf1(0x19c,0x1f2,0x223,0x248)])){if(_0x1e669a(-0x13f,-0x165,-0xb9,-0xe2)!==_0x45cd22[_0x374bf1(0x114,0xd3,0x16c,0x10c)]){const _0x383a00=_0x45cd22['uGpjd'][_0x1e669a(-0x304,-0x242,-0x2bc,-0x174)]('|');let _0x25c324=-0x229*-0xb+-0xfc7+0x1c*-0x49;while(!![]){switch(_0x383a00[_0x25c324++]){case'0':_0x430aec[_0x1e669a(-0x29a,-0x1ef,-0x1b3,-0x258)](_0x45cd22[_0x1e669a(-0x21a,-0x251,-0x2cb,-0x304)]);continue;case'1':return;case'2':_0x127176['updateStat'+'us'](_0x2a5174,_0x5c46cf['CANCELLED']);continue;case'3':_0x5b0e09=!![];continue;case'4':_0x4a0cb8[_0x1e669a(-0xef,-0x190,-0xd5,-0x115)](_0xdbdcb9);continue;case'5':const _0x11ec63={};_0x11ec63[_0x1e669a(-0x11c,-0x19e,-0x11d,-0x245)]='AbortError',_0x11ec63[_0x1e669a(-0x285,-0x1c7,-0x112,-0x150)]=_0x45cd22['LEgYp'];const _0x19cd5e={};_0x19cd5e[_0x1e669a(-0x188,-0x1e4,-0x22c,-0x112)]=![],_0x19cd5e[_0x374bf1(0x44,0x74,0xd3,-0x39)]=null,_0x19cd5e['id']=_0x275d8c,_0x19cd5e['error']=_0x11ec63,_0x35eb4e[_0x1e669a(-0x146,-0x1ff,-0x2b9,-0x276)](_0x28949d[_0x374bf1(0xc0,0x61,0xa7,0x100)+_0x1e669a(-0x287,-0x28f,-0x2da,-0x282)],_0x19cd5e);continue;}break;}}else _0x202512[_0x1e669a(-0xb9,-0x134,-0x1be,-0x163)][_0x374bf1(0xc9,0x1c,0x128,0x10b)](_0x1e3f3d=>{if(!_0x1e3f3d[_0x5160e9(0x1fe,0x1b5,0x16e,0x29a)])return;if(!_0x1e3f3d[_0x1b04d1(0x5df,0x515,0x5c2,0x5c7)]||_0x45cd22[_0x1b04d1(0x685,0x593,0x61a,0x5e5)](_0x1e3f3d[_0x5160e9(0x29e,0x268,0x286,0x227)][_0x1b04d1(0x465,0x4d8,0x56d,0x50c)](),''))return;if(_0x45cd22[_0x5160e9(0x2bc,0x353,0x2c2,0x20c)](_0x1e3f3d['triggerMod'+'e'],_0x45cd22['xnsZp'])){if(!_0x57190f||!checkTriggerWords(_0x1e3f3d[_0x1b04d1(0x47a,0x530,0x3d5,0x468)+'ds'],_0x57190f))return;}function _0x1b04d1(_0x51bf8f,_0x11365e,_0x5a2843,_0x331657){return _0x1e669a(_0x51bf8f-0xe0,_0x331657-0x72a,_0x11365e,_0x331657-0x1e1);}const _0x37b59d={};_0x37b59d[_0x1b04d1(0x435,0x556,0x4e1,0x4f2)]=_0x1e3f3d[_0x1b04d1(0x4f4,0x4ca,0x4f7,0x4f2)]||_0x5160e9(0x24c,0x1b4,0x1b1,0x26b),_0x37b59d['content']=_0x1e3f3d[_0x1b04d1(0x536,0x5da,0x573,0x5c7)];function _0x5160e9(_0x3d3e38,_0x28b12c,_0xdf67d0,_0x20c269){return _0x374bf1(_0x3d3e38-0x131,_0x28b12c-0xb9,_0xdf67d0,_0x20c269-0xa0);}_0x4688d['push'](_0x37b59d);});}else{if(_0x202512['history']&&Array[_0x374bf1(0x13f,0x183,0x1a7,0x1f4)](_0x202512['history'])){if(_0x45cd22[_0x1e669a(-0x18a,-0x173,-0x1fe,-0xd6)]!==_0x1e669a(-0x104,-0x16a,-0xc1,-0x9d)){if(_0x500108[_0x374bf1(0x132,0x1d9,0x13a,0x172)]===_0x45cd22[_0x1e669a(-0x122,-0x1ad,-0x1f7,-0x159)]){_0x31bdb7=!![],_0x4b4aca['log'](_0x45cd22['qXGiE']),_0x76538b['updateStat'+'us'](_0x26b6d5,_0x36d636[_0x1e669a(-0x25b,-0x220,-0x190,-0x2c9)]),_0x34e448['delete'](_0x1aacc3);const _0x54f8ed={};_0x54f8ed[_0x1e669a(-0xf4,-0x19e,-0x21c,-0xe4)]=_0x45cd22[_0x374bf1(0x123,0xb7,0x1a4,0x7e)],_0x54f8ed[_0x374bf1(0x109,0x4e,0x174,0x1b9)]=_0x45cd22[_0x1e669a(-0x2d7,-0x235,-0x236,-0x1dc)];const _0x25fd88={};_0x25fd88['success']=![],_0x25fd88[_0x1e669a(-0x2fe,-0x28c,-0x1d0,-0x31b)]=null,_0x25fd88['id']=_0x46ca75,_0x25fd88['error']=_0x54f8ed,_0x50df17['emit'](_0x235f94[_0x374bf1(0xc0,0x17e,0x66,0x71)+'E_RESPONSE'],_0x25fd88);return;}_0x535592[_0x374bf1(0x163,0x1ca,0x1eb,0x94)](_0x45cd22[_0x1e669a(-0x1ff,-0x281,-0x313,-0x1fd)],_0x5c84f3);const _0x3b7d39=_0x1e669a(-0x21a,-0x228,-0x2a0,-0x1e3)+_0x437b74[_0x374bf1(0x109,0xc3,0x17e,0x114)];_0x16e9f4&&_0x45cd22[_0x1e669a(-0x1e1,-0x18c,-0xf1,-0x250)](_0x52097b,_0x3b7d39);_0x3d60fa[_0x374bf1(0x163,0xa8,0xc0,0x186)](_0x4f0266['message']),_0x5c2d6e['completeTa'+'sk'](_0x4cbe72,![]),_0x27d2d7[_0x1e669a(-0xd6,-0x190,-0x10c,-0x1d1)](_0x1a9662);const _0x110174={};_0x110174[_0x1e669a(-0x22c,-0x1e4,-0x1f3,-0x22d)]=![],_0x110174[_0x374bf1(0x44,0x2a,0x7f,0x1e)]=_0x3b7d39,_0x110174['id']=_0x456c26,_0x1f33e1[_0x374bf1(0xd1,0x8e,0xe6,0xa0)](_0x759dae['LLM_EXECUT'+_0x1e669a(-0x2dd,-0x28f,-0x2d7,-0x2b2)],_0x110174);}else _0x202512['history'][_0x374bf1(0xc9,0x17e,0x8,0xb4)](_0x4e674b=>{function _0x17aa5d(_0x4f02b7,_0x2dd77d,_0xa17581,_0x38b1dc){return _0x374bf1(_0x38b1dc-0x1db,_0x2dd77d-0x51,_0x2dd77d,_0x38b1dc-0x8f);}function _0x488108(_0x3b7864,_0x597464,_0x4c267a,_0x3b9255){return _0x1e669a(_0x3b7864-0xad,_0x4c267a-0x36d,_0x3b7864,_0x3b9255-0x180);}if(_0x4e674b['user']&&_0x45cd22[_0x488108(0xe8,0x17d,0x167,0x209)](_0x4e674b['user'][_0x17aa5d(0x228,0x29c,0x1eb,0x28d)](),'')){const _0x33b98b={};_0x33b98b[_0x17aa5d(0x239,0x1cc,0x2b8,0x273)]=_0x45cd22[_0x488108(0x170,0x8e,0xc8,0x175)],_0x33b98b[_0x488108(0x158,0x2bf,0x20a,0x225)]=_0x4e674b[_0x488108(0x1f8,0x12f,0x1b8,0x1ae)],_0x4688d[_0x488108(0x232,0xb2,0x173,0x194)](_0x33b98b);}if(_0x4e674b[_0x17aa5d(0x17d,0x15d,0x289,0x22e)]&&_0x4e674b[_0x488108(0x18e,0x144,0xf0,0x112)][_0x17aa5d(0x339,0x21f,0x32d,0x28d)]()!==''){if(_0x45cd22[_0x17aa5d(0x207,0x110,0x254,0x1e1)](_0x45cd22[_0x488108(0xf6,0x1eb,0x1ca,0x116)],_0x488108(0xef,0x229,0x1a3,0xd7))){const _0x224a71={};_0x224a71[_0x17aa5d(0x308,0x1f3,0x225,0x273)]=_0x45cd22[_0x17aa5d(0x26f,0x22e,0x26e,0x26b)],_0x224a71['content']=_0x4e674b[_0x17aa5d(0x1ca,0x177,0x2f6,0x22e)],_0x4688d[_0x17aa5d(0x365,0x1e5,0x2b2,0x2b1)](_0x224a71);}else{let _0x81a7e1;if(_0x45cd22[_0x488108(0x2c5,0x207,0x228,0x209)](typeof _0x42e674[_0x488108(0x1f0,0x21e,0x200,0x2c5)],_0x45cd22[_0x17aa5d(0x1f1,0x289,0x23a,0x1d8)])&&_0x250de4['error'][_0x488108(0x1eb,0x23e,0x1a6,0x182)]){_0x81a7e1=''+_0x52b1e4[_0x17aa5d(0x397,0x33a,0x27f,0x33e)][_0x17aa5d(0x2e3,0x282,0x2c8,0x2e4)];const _0x2b36d8=[];if(_0x54e4a9[_0x488108(0x1f1,0x1e7,0x200,0x229)][_0x17aa5d(0x401,0x405,0x3bb,0x36d)])_0x2b36d8[_0x488108(0x1ae,0x189,0x173,0x1f0)](_0x17aa5d(0x360,0x379,0x3ab,0x363)+_0x41f5f6[_0x17aa5d(0x398,0x3f5,0x27e,0x33e)][_0x488108(0x18c,0x1e6,0x22f,0x15f)]);if(_0x59dccc['error'][_0x488108(0x1a4,0x70,0x107,0xd5)])_0x2b36d8[_0x17aa5d(0x277,0x2b0,0x305,0x2b1)]('代码:\x20'+_0x344653[_0x488108(0x213,0x1b7,0x200,0x187)][_0x488108(0x160,0xcd,0x107,0xdc)]);_0x45cd22[_0x17aa5d(0x2c4,0x296,0x213,0x22c)](_0x2b36d8['length'],0x1*-0x12c1+-0x1267+0x2528)&&(_0x81a7e1+='\x20('+_0x2b36d8[_0x488108(-0x31,0x84,0xa1,0x142)](',\x20')+')');}else _0x81a7e1=''+_0x1141cf[_0x17aa5d(0x37a,0x3c0,0x357,0x32b)](_0x55c882['error']);throw new _0x31eafb(_0x81a7e1);}}});}}const _0x57d1f3=_0x45cd22[_0x1e669a(-0x148,-0x18c,-0x18d,-0xd1)](mergeAdjacentMessages,_0x4688d),_0x118abc=_0x45cd22['kqIje'](processRollPlaceholders,_0x57d1f3);return _0x118abc;}const _0x31d00e={};_0x31d00e['image_gen']=_0x1b0576(-0x187,-0x106,-0xce,-0xb1),_0x31d00e[_0x1b0576(-0x15,0x54,0x58,-0x9)+'n']=_0x80e9ba(-0x5f,-0x5d,-0x42,-0xb5),_0x31d00e['char_displ'+'ay']=_0x80e9ba(-0x144,-0x167,-0x152,-0x151);function _0x1b0576(_0x7ee7bd,_0x23db07,_0x2e4205,_0x1dcda0){return _0x20bc(_0x2e4205- -0x235,_0x1dcda0);}function _0x302d(){const _0x3328be=['wNjUuxu','u3zJEe8','CuLht2m','whn4vgW','uMvXDwvZDcbHyG','y3vZDg9Tx2LUyW','BwvZC2fNzxm','BMfTzq','Bwf4x3rVA2vUCW','qvPdCui','yufeDfC','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','r2jkDvC','C3rHCNrZv2L0Aa','tuziuuy','v3fsBgC','uLvzyuO','CMvHza','B2jQzwn0','Aw5JBhvKzxm','AxnbCNjHEq','zgvSzxrL','vNzvsuK','q1fIvuC','yMngsMS','A3fjAMu','CeLovva','teXniev4zwn1Da','rhLWtuW','DhjPz2DLCG','Dw5RBM93BG','6kEs6iMYl+ACJEIJHEs/RUAuUq','u3PkBNq','BKLmsuC','Ce1dywW','DMPPvxu','nde5nZeXn3rtswD5Ba','C3rYAw5NAwz5','zw5KC1DPDgG','qMTltgG','Dwffz3u','rKXtvM8','D2fYBMLUzW','zgf0ytOG','DxbKyxrLu3rHDa','DuDVtw4','CMPPz2q','DerrAMO','BM1MAxq','B25twvq','DvnsBxq','uuneBxK','BI9QC29U','Bw9KzwW','6kEs6iMYl+ACJEIJHEIUVUIUOq','rxDev1y','zxjYB3i','wfLyswG','qMvHCMvYia','tfzLs1C','rhL3uhi','y29UDgv4Df9WCG','uM1mzeG','shnkzLK','y3r2wxu','r2T3yuC','y29UDgvUDa','ywjVCNq','BgXTx3bYB2zPBa','l3yX','y0fotfy','ru1SsLC','tuz6sKG','uxfHAey','r1DrrNy','rgjQtgK','zMLNCW','wgTYwLi','C1nprKy','weHhuMq','Dg9Rzw4','57g75z6loG','qwjVCNrfCNjVCG','z29xy2G','EgzPswm','uw1MEwm','sK5LBuG','rdOG','6k+35Rgc5A6m5OIqid09pt09','D3nVweG','BNmG6k6+572U6l+h5Bcp44cb5OIwia','yLH6A20','Aw9U','57g75z6loIa','B2zPBgu','sK11B0C','yNnrzfK','yNLWyxnZx3bYBW','y3LPzfO','thzvzgy','t05QBK8','l2nOyxqVy29TCa','v2TSCLa','DhLWzq','t1Lvr3e','shPgrgC','B0DrBeS','yxzOrfq','Cg9W','y2HHCL9KzxnPzW','vNr6z3O','zvjfuwe','AwH1DKW','zw50CMLLCW','5Rwb5BYp6kEJ5P6q6k2M5zgkoG','t3LfCgK','C3qTy2HHDhu4oG','m3WWFdj8nhW1Fa','Aw5MBW','DhjHBNnSyxrPBW','y2HHDf9JB21WBa','DgDgDxy','quNLIQNMIyS','CfbwD0O','C0fwBMe','DMDvAei','tw9KzwWG5PYQ6ywn572U44cc','BuLHEvq','se9lD3K','8j+tTYbB5zU+54Mh6zo+5O6LoIa','pt09pt0GteXnia','weLuAMK','AM9PBG','rvLvr0G','sxDRsg0','Dg9tDhjPBMC','qwPND1m','zxrPB25FC291CG','uK5gDNK','l2fWAs9IywnRzq','5PAT44cbBwf4x3rVA2u','t2jbsLu','DhjPz2DLCLDVCG','5y+r6ycb55QeifbYB21WDa','5lUJ56cboIa','CM5PtNi','yxbWBhK','sfvtrwO','B3j0zwq','txjgy1a','BhvKzv9OzwfKzq','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','DgvZDe1Vzgu','u2Tps3K','vgDjCfu','5lUJ56cboG','vgLdwu8','tKLzuwm','z2v0','yvPTuKi','zvDvrfG','yxbPx3bYB2zPBa','DhjPz2DLCK1Vza','mtaWwuLIqMnw','C3z6CwS','CfrrwNu','tfrquvy','B0XWChm','zgf0ytO','ExfHvLa','mtq3odm3nMT4tunqAq','DgLADha','veLvAKi','uuTvtg0','DKrPtvK','zNvUy3rPB24','DNjssgG','DgvZDf9JB250zq','C3rHDhvZvgv4Da','nZGWBgXXBfHH','AKnOA1e','Dvv0wue','B3bvyvC','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','Cwfcv2i','EhrFChjVzMLSzq','y2HVAwnLCW','ywjVCNrLzc4','Ae9yDwm','AfrsA3a','ru1MuvG','iefqssblzxKSia','mNWZFdf8nhWW','rv9srvnqt05trq','Curztve','sKLOquu','CMvZDwX0','C3rYzwfT','ChjVBxb0','sK5byKK','y29UC3rYDwn0BW','u05pDve','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','thLwtui','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','ievYCM9YoG','BMrZl2nOyxqTyW','zgT6sMS','oIbbueKGvvjmla','AfnMyNa','ssdOV57MJQxPL67POPJJGii','yxnZAxn0yw50','rK5ovwO','zxiG','ywfZB1O','6kEs6iMYl+ACJEIJHEwXLEEKUG','qM51v0C','BvzjwM8','uLvotKLorW','vgfN5l+U5Ps5','ueLTsuS','Cg9sBMS','l3yXlW','Aw1Hz2vFDxjS','Dg9Wx3a','AuPpuNO','mxWZFdv8mhW0Fa','C2LNBMfS','BwHnBum','6k+35Rgc5AsX6lsLoIa','mZa4nJm0Efnzq0Hg','wKDnAxu','AenZtKm','C3rYAw5N','y29Kzq','wfLAs2q','y29TCgXLDgvuyq','AK5bBvG','ze9Ryw8','qKLOB0q','t2ziuu0','zMjTqu0','5Q2J5PAh5zU+54Mh55sF5OIq','yuzYALy','sxnkz1G','uNv1Evq','qurYENy','BeLAAha','56In5yczlI4U','uLv3wgy','s215rM0','5AEl5PAW6k+35Rgc44cc','mtm4nde0ogLUrvrbEG','CfjMwgq','rwPhqwy','CvHhAuu','txLKBgy','B1bUzMy','z2v0uMvHzgvY','AhfzDMS','BfnQDLa','B2zqvuu','D2fYBG','DunJsxu','CMvWzwf0','txneDvu','vg13z0K','uuPMugi','yxbPx3vYBa','te9xuMC','C3bSAxq','cI0Tls0TieXmtq','BNrpuvm','ALzXwgq','uMv5Ceu','uxr3Dwm','B21WBgv0Aw9UCW','s3zitNm','qurIzu0','Dgv4Da','CM9Szq','veXiDvG','oIbmte0G6k+35Rgc6l+u5zUE','tevNwxa','yNvMzMvYktO','ywPIDMm','mJCXnZK1mNnvANDXBa','rxDWDeW','q3b3zuu','uxnrrwu','zufnB1i','C3LZDgvT','BhDnCMm','Eu5pD0W','sgnovKy','Au1jy3i','6k+35Rgc6zsz6k+VoIa','AeTkrNe','C2v0','v3P3AK4','A2v5CW','uezqyxO','seLgEKO','l2DLBMvYyxrL','q0foq0vmteve','qvbjioI/NUAoPEMxRUMIMooaGG','DhjPBq','qK1kz2W','ELzKv1e','DMfjrKm','t1v3wu4','6k+35RgcieLeoIa','5O+q56s66k+n6i635y+w6k+35RgcicHj','BfHjuLm','C1D0shm','DxrMltG','B3D5A0K','CNzyAKu','5RAioIa','mtyZnZq2qNDpsLPY','teXnx0vyrunvva','5OIwie1VzgvSioACQUMfJq','qNvjAMy','iowBNUwKJsaTls0Tlq','zgf0ytOGw0rptG','wuLrtKq','CKjMC2u','zsbYzxf1zxn0ia','mNWXFdr8mhWZ','zM9YrwfJAa','zKnrzhe','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','DgvTCgvYyxr1CG','zw5HyMXLza','vwPfqLi','Dg9VBa','twr1ENK','zw1PDa','wwXzBfG','zsbfCNjVCJO','n2fuqxbetG','ChfJuhu','ChvZAa','mNLdqKrrEa','5yE95PwW6lcd55sO','teXn','uhfzwMC','teXnigv4zwn1Da','kcGOlISPkYKRkq','suzZzLq','uxPoBwW','CgfYC2u','vhfzB3q','Bg9N','y3vZDg9Tx3vYBa','C2XPy2u','teXnioIVT+AXGUw3SUs4REATOUoaGG','Bwf0y2G','twXPs2i','t0HPCNC','D1vREwq','CfvQCKS','ze1drwC','yNDYBe0','C3vJy2vZCW','z0XfzMG','zu1xB3a','wNnhALi','thfcrhi','6k+35Rgc5BYa5AElicG','A0vgvum','CMvWBgfJzq','r2j4ALe','C3rHDhvZ','teHNv1a','AvfWuKK','q29UDgvUDc1uEq','y3vZDg9T','y2HHCL9TB2rPzG','wu1HCLm','s3PutKq','rfzwt04','Aw9UoIaIqMvHCG','ueKGs2v5lcdMIjyG','C2vHCMnO','BgvUz3rO','ioAuTUwiSa','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','w0Xmtv0G5lU75yQH5BEY5y+w','Dfnyu1a','sLLTDKy','q0rqzfe','ugHoqKe','BwvZC2fNzq','nZa5mdGYzvniv2nM','uLLJz2i','zffkDxm','AxLjEwe','mJrgv3P0EfK','qujYvuO','qxv0Ag9YAxPHDa','ywrKvgfZAW','yxbPx2TLEq','Df90ExbLx2nVBG','u0n4D1m','Bgv0Aw9UCW','zwDktMO','CK5Lzgq','wLDLDwS','qvbjifvstcWGqq','zgvSDge','DxnLCG','57o757UF5O+q56s66k+n','yNrdsKy','BgXTx3jLCxvLCW','Ee1kz0u','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','sgXvy3O','y29UDgv4Da','ywzdy1a','ANnVBG','AefTC1a','EvDJExu','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','zxHouee','yxbWBgLJyxrPBW','zvf6sNa'];_0x302d=function(){return _0x3328be;};return _0x302d();}function _0x20bc(_0x3d7c43,_0x9ae11d){_0x3d7c43=_0x3d7c43-(0x7*0x293+0x1*-0x317+-0xdfd);const _0x541802=_0x302d();let _0xbea74a=_0x541802[_0x3d7c43];if(_0x20bc['vuARkD']===undefined){var _0x4f3713=function(_0x230e56){const _0x593f2d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1b415e='',_0x593c9d='',_0x9610ff=_0x1b415e+_0x4f3713;for(let _0x1d4a47=-0x10cb+0x6*0x4a+0x5*0x303,_0x2d0dd3,_0x49d369,_0x3c7f1a=-0x12f8+-0x7*0x10d+0x1a53;_0x49d369=_0x230e56['charAt'](_0x3c7f1a++);~_0x49d369&&(_0x2d0dd3=_0x1d4a47%(0x12cc+-0x1*-0x15ef+0x28b7*-0x1)?_0x2d0dd3*(-0x202f+0x200e*-0x1+0x407d)+_0x49d369:_0x49d369,_0x1d4a47++%(-0x1aef+0x2*0x450+0x1*0x1253))?_0x1b415e+=_0x9610ff['charCodeAt'](_0x3c7f1a+(0x267+-0x20cf*0x1+0x2*0xf39))-(-0x20d1+0x142b*0x1+0xcb0)!==0x1155+-0x251d+-0x18*-0xd3?String['fromCharCode'](0x2*-0xce3+0xc67+0xe5e&_0x2d0dd3>>(-(-0x14df+0x1d1b+-0x83a)*_0x1d4a47&0x731+-0x64d+-0x6*0x25)):_0x1d4a47:0x2282+-0x1*0x108b+-0x1*0x11f7){_0x49d369=_0x593f2d['indexOf'](_0x49d369);}for(let _0x2ca9c6=-0xe75*0x2+-0x1*0x4ee+0x21d8,_0x35af78=_0x1b415e['length'];_0x2ca9c6<_0x35af78;_0x2ca9c6++){_0x593c9d+='%'+('00'+_0x1b415e['charCodeAt'](_0x2ca9c6)['toString'](0x6*-0x192+-0x1e94+0x2810))['slice'](-(-0x2*-0xfad+0x15*0x83+-0x19*0x1af));}return decodeURIComponent(_0x593c9d);};_0x20bc['qIEvga']=_0x4f3713,_0x20bc['PBVlFQ']={},_0x20bc['vuARkD']=!![];}const _0x3fbc0a=_0x541802[-0x22b+-0x3*-0x695+-0x1194],_0x556d7c=_0x3d7c43+_0x3fbc0a,_0x56babc=_0x20bc['PBVlFQ'][_0x556d7c];if(!_0x56babc){const _0x249aa3=function(_0x591a83){this['GsnJRG']=_0x591a83,this['ouxYUt']=[-0xee6*-0x2+-0x2*0x830+-0xd6b,-0x2412+-0x113*0x1f+0x455f,0xd5*0x2b+0x1*-0x2539+0x172],this['MGpMvJ']=function(){return'newState';},this['UfWmfv']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['fSFzcd']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x249aa3['prototype']['NubaeN']=function(){const _0x1b779d=new RegExp(this['UfWmfv']+this['fSFzcd']),_0x541672=_0x1b779d['test'](this['MGpMvJ']['toString']())?--this['ouxYUt'][0x27*-0x18+0x1903+-0x155a]:--this['ouxYUt'][0x14*0xf2+-0xc5b+0x22f*-0x3];return this['CkCeAQ'](_0x541672);},_0x249aa3['prototype']['CkCeAQ']=function(_0xd112d3){if(!Boolean(~_0xd112d3))return _0xd112d3;return this['oFicgK'](this['GsnJRG']);},_0x249aa3['prototype']['oFicgK']=function(_0x197ca5){for(let _0x6238f9=0x1*0x2479+0x15*0xf0+0x1*-0x3829,_0x19bd53=this['ouxYUt']['length'];_0x6238f9<_0x19bd53;_0x6238f9++){this['ouxYUt']['push'](Math['round'](Math['random']())),_0x19bd53=this['ouxYUt']['length'];}return _0x197ca5(this['ouxYUt'][0x46f*0x7+0x1*-0xbf3+-0x7*0x2ba]);},new _0x249aa3(_0x20bc)['NubaeN'](),_0xbea74a=_0x20bc['qIEvga'](_0xbea74a),_0x20bc['PBVlFQ'][_0x556d7c]=_0xbea74a;}else _0xbea74a=_0x56babc;return _0xbea74a;}_0x31d00e[_0x80e9ba(-0x15b,-0xc4,-0xe7,0xf)+'y']=_0x80e9ba(-0x65,-0x74,-0xe1,-0xaa),_0x31d00e[_0x80e9ba(-0xa3,-0x1c,-0x29,0x68)+'n']='翻译',_0x31d00e['tag_modify']=_0x1b0576(-0xe0,-0xaa,-0xe5,-0x19c);const REQUEST_TYPE_NAMES=_0x31d00e;export async function executeTypedLLMRequest(_0x3f9800,_0x46f513,_0x592d5d,_0x1f88c7=null){const _0x132bac={'lIZhp':function(_0x363a9e,_0x95f376){return _0x363a9e(_0x95f376);},'iyIya':_0xc00027(0x9a,0x212,0x1c9,0x144)+_0x3b9432(-0x69,0x1a,-0x10,-0x86),'rBfse':_0x3b9432(0x1c,0x81,0xe4,0x82)+_0x3b9432(-0x34,-0xa,0x16,0xa5),'ObAJU':function(_0x219a6b,_0xafff29){return _0x219a6b(_0xafff29);},'jChkQ':function(_0x35a33e,_0x42275a){return _0x35a33e===_0x42275a;},'sWtHs':'AbortError','FLSVo':_0xc00027(0x1be,0x218,0x157,0x14c)+_0xc00027(0xc6,0x97,0xf1,0x31),'dOkao':'LLM\x20请求已中止。','lwMrc':function(_0xb799f2){return _0xb799f2();},'WzwjN':'user','EYUGH':function(_0x12c267,_0x50764e){return _0x12c267>_0x50764e;},'eAMoR':function(_0x187568,_0x899077){return _0x187568||_0x899077;},'eycJO':_0xc00027(0x3f,0x109,-0x35,0x69)+_0xc00027(0x4c,0x6c,0xb3,0x98),'aFrjV':function(_0x5f491b,_0x1354aa){return _0x5f491b(_0x1354aa);},'bcFJk':function(_0x4a4c75,_0x4b4ce2){return _0x4a4c75(_0x4b4ce2);},'scMbD':_0xc00027(0x1a0,0x1e5,0x153,0x146)+_0x3b9432(0x7f,0xdd,0xc,0x120),'pMCal':function(_0x4b2f30,_0x4ffabf){return _0x4b2f30!==_0x4ffabf;},'iJORz':_0xc00027(0x1b9,0x74,0xc1,0x10f),'owykI':_0xc00027(0x20f,0x189,0x230,0x18d),'ZsGjR':_0xc00027(0xd1,-0x14,0xfc,0x7b),'oGQlK':function(_0x2f99a0,_0x41aa41){return _0x2f99a0+_0x41aa41;},'egeTY':_0xc00027(0x3c,0x12,0xc1,0x28)+_0x3b9432(0x5f,-0x34,-0xaf,-0x62)+_0x3b9432(-0x47,0x12,0xe0,0x5a)+'/generate','Cqajb':function(_0x4b287b,_0x291875){return _0x4b287b(_0x291875);},'KzTND':_0xc00027(0x43,0x88,0x187,0x116),'QsQEe':'IxIUp','bwqlx':function(_0x30ec1d,_0x410309){return _0x30ec1d(_0x410309);},'TLHuX':_0x3b9432(0xa7,-0xe,-0x59,-0x75),'uAJWt':_0xc00027(0xce,0xce,0xc2,0x4d),'CQbUG':'POST','BMJgl':'Osldy','QJfPb':_0xc00027(0x12d,0x102,0x1a9,0x190),'RNFvy':function(_0x4a2c40,_0xc95616){return _0x4a2c40!==_0xc95616;},'RUwXf':_0x3b9432(0x9c,-0x5,-0x52,0x78),'aasoZ':function(_0x519bf8,_0x4f7c24){return _0x519bf8===_0x4f7c24;},'Qtwuc':'gmNcF','DyvsA':'vGQsY','kfezt':_0xc00027(0x1e4,0xeb,0x201,0x199),'AZCqB':_0x3b9432(-0x31,-0x67,-0xc6,-0x61),'DypML':function(_0x4b055b,_0x59b72a){return _0x4b055b===_0x59b72a;},'YlYlX':_0x3b9432(0x9b,0x42,0x45,-0x67)+'E]','sAVna':function(_0x4bb6e5,_0x235a15){return _0x4bb6e5(_0x235a15);},'PhNBA':'流式解析警告:','oLpps':'data:\x20','SNOuQ':function(_0x482e82,_0x2685c3){return _0x482e82(_0x2685c3);},'HzFDg':function(_0x17abf6,_0x18db71){return _0x17abf6===_0x18db71;},'BIhoD':_0xc00027(0xda,0xfb,0x73,0x105),'lXIRS':_0x3b9432(0x5e,-0x6b,-0x39,-0x87),'DVVON':function(_0x38fcb3,_0xa2d5d7){return _0x38fcb3!==_0xa2d5d7;},'iQpRI':_0xc00027(0x250,0x110,0x261,0x195),'LqBDr':_0x3b9432(0x7b,0x114,0xdb,0xe4),'uGoMn':'object','LyVMB':function(_0x1dc4fe,_0x46cc59){return _0x1dc4fe>_0x46cc59;},'JIhAE':function(_0x3624fa,_0x2a4c0d){return _0x3624fa!==_0x2a4c0d;},'uaEgu':_0x3b9432(0x8,0x25,0xa7,-0xa0),'XYXIh':_0x3b9432(-0x96,-0x6f,0x5,-0x9d),'oPnff':_0x3b9432(0xbd,0xc9,0x130,0xc8),'rNedd':'SHFDQ','jNAmX':'jxSOh','SEIXO':function(_0x216c7c,_0x9a79a5){return _0x216c7c(_0x9a79a5);},'YuTte':function(_0x3b9016,_0x3806dc){return _0x3b9016(_0x3806dc);},'DywPr':_0x3b9432(0x14,0x46,-0x41,-0x3a),'hqYvk':function(_0x5056a6,_0x1a6a52){return _0x5056a6===_0x1a6a52;},'XHGRd':_0xc00027(0x1ae,0xa6,0xad,0x179),'WBjUv':_0x3b9432(0x11b,0x10b,0x52,0x157),'iAYPX':'NSmyr'},{prompt:_0x331078,id:_0x44935b}=_0x3f9800;if(_0x132bac[_0x3b9432(-0x3e,0x20,0x1b,-0x74)](!_0x44935b,!_0x331078))return;currentLLMRequestController&&(currentLLMRequestController['abort'](),toastr[_0x3b9432(0x75,0x11f,0x10d,0x11c)](_0x132bac['eycJO']));currentLLMRequestController=new AbortController();const _0x4d543c=currentLLMRequestController['signal'],_0x3d6de2=currentLLMRequestController,_0x255215=REQUEST_TYPE_NAMES[_0x46f513]||_0x46f513,_0x27c211={};_0x27c211[_0xc00027(0x151,0xca,0xfe,0x14f)]='LLM:\x20'+_0x255215,_0x27c211['type']=TaskType[_0xc00027(0x1c0,0x110,0x8c,0xf6)],_0x27c211[_0x3b9432(0x42,-0x3c,-0x76,0x57)]=_0x44935b;function _0x3b9432(_0x350006,_0x209218,_0x190fdb,_0x5da533){return _0x1b0576(_0x350006-0x177,_0x209218-0xa4,_0x209218-0xbe,_0x190fdb);}const _0x2e337c=taskQueue[_0xc00027(0x1ad,0xa7,0x15d,0x12e)](_0x27c211);llmTaskControllers['set'](_0x2e337c,currentLLMRequestController),taskQueue[_0xc00027(0x105,0x223,0x170,0x174)+'us'](_0x2e337c,TaskStatus[_0xc00027(0x82,0x82,-0x1a,0x77)]),_0x132bac[_0xc00027(0xc7,0xaa,0xac,0xc1)](startFabLoading);let _0x75996a=![];_0x132bac[_0xc00027(0x1,0x30,0xc9,0xc1)](clearLog),_0x132bac[_0x3b9432(-0xca,-0xb,0x57,-0x20)](addLog,_0x3b9432(-0x86,-0x80,-0x113,0x2)+_0xc00027(0x1dc,0x75,0xed,0x10e)+_0x255215+')\x20====='),_0x132bac[_0x3b9432(0x49,-0x75,0x4f,0x3d)](addLog,_0x3b9432(-0x52,0x35,-0x47,0x68)+_0x44935b),_0x132bac[_0xc00027(0xf3,0x10d,0x12b,0x94)](addLog,_0xc00027(0xcc,0x15,-0xa6,0x2c)+':'),_0x132bac[_0x3b9432(-0xc1,-0x75,-0x21,0x1c)](addLog,_0x132bac[_0x3b9432(-0xa2,-0xf,0x7c,-0x85)](formatPromptForDisplay,_0x331078));const _0x594732=_0x132bac[_0xc00027(0x137,0x1cf,0x1e1,0x160)](getEffectiveConfigForRequestType,_0x46f513),{api_url:_0x521170,api_key:_0x8e8f3a,model:_0x113a19,temperature:_0x3aa595,top_p:_0x3e4287,max_tokens:_0x3558f6,stream:_0xc1b734,bypass_proxy:_0x4a129c}=_0x594732;if(!_0x521170||!_0x8e8f3a||!_0x113a19){const _0x371beb=_0x255215+(':\x20API\x20URL,'+_0xc00027(0x113,0x34,0x125,0x5c)+_0xc00027(0x110,0x12b,0x10a,0xde)+'置。');toastr[_0x3b9432(0x134,0xe1,0x4a,0x13d)](_0x371beb);const _0x3c4d33={};_0x3c4d33[_0x3b9432(0x5f,0x6a,0xea,0xfc)]=![],_0x3c4d33[_0x3b9432(-0x10a,-0x3e,0x18,-0x58)]=_0x371beb,_0x3c4d33['id']=_0x44935b,eventSource[_0x3b9432(0xfe,0x4f,0x10e,0xbc)](_0x592d5d,_0x3c4d33);return;}const _0x321880=_0x521170[_0x3b9432(0xd,0x71,0xb,0xcd)](/\/$/,'');let _0x2a8f19,_0x4789aa,_0x48db04;if(_0x4a129c){_0x2a8f19=_0x321880+(_0xc00027(0x1c2,0x1a2,0x177,0x1ad)+_0x3b9432(0x14b,0x93,-0x32,0x53));const _0x1d3b65={};_0x1d3b65[_0x3b9432(-0x39,0x76,-0x4,-0x45)+'pe']=_0x132bac['scMbD'],_0x1d3b65[_0xc00027(0x1c2,0xab,0x67,0x12d)+_0xc00027(0x1a0,0x12d,0x1a7,0x1a4)]=_0x3b9432(0x190,0xe3,0x70,0x17a)+_0x8e8f3a,_0x4789aa=_0x1d3b65;const _0x26e50b={};_0x26e50b[_0xc00027(0x15d,0x1fe,0x1ad,0x17d)]=_0x113a19,_0x26e50b['messages']=_0x331078,_0x26e50b['temperatur'+'e']=_0x3aa595,_0x26e50b['top_p']=_0x3e4287,_0x26e50b[_0xc00027(0x173,0x222,0x216,0x150)]=_0x3558f6,_0x26e50b[_0xc00027(0x51,-0x57,0x4b,0x62)]=_0xc1b734,_0x48db04=_0x26e50b;}else{if(_0x132bac[_0x3b9432(0x3f,0xcb,0xeb,0xff)](_0xc00027(0x1d0,0x132,0xfd,0x17b),_0x132bac[_0xc00027(0xfe,0x1d,0xdb,0x7e)])){let _0x27888b=_0x321880;!_0x27888b[_0x3b9432(0xa1,0xcf,0x171,0x142)](_0x132bac[_0x3b9432(0xd3,0x3a,-0x4a,0x15)])&&!_0x27888b[_0xc00027(0x1f1,0x16b,0x1d3,0x15b)](_0x132bac[_0x3b9432(-0x8,0x6d,0x134,0x13c)])&&(_0x27888b=_0x132bac[_0xc00027(0x23c,0x140,0x161,0x1b2)](_0x27888b,_0x3b9432(0x12e,0xee,0xb0,0x175)));_0x27888b=_0x27888b[_0xc00027(0x1b2,0xa7,0xf3,0x110)](/\/v1\/$/,_0x3b9432(0x1ba,0xee,0x3b,0x14a)),_0x2a8f19=_0x132bac['egeTY'],_0x4789aa=_0x132bac['Cqajb'](getRequestHeaders,window[_0xc00027(0x17f,0xe4,0x1a2,0x198)]);const _0x23ce82={};_0x23ce82['chat_compl'+'etion_sour'+'ce']=_0x132bac[_0x3b9432(0x70,0x7a,0x5a,-0x51)],_0x23ce82[_0x3b9432(-0x46,0x60,-0x53,0x11b)]=_0x27888b,_0x23ce82[_0xc00027(0x90,0x1a9,0x12a,0x14d)+_0xc00027(-0x8b,-0x69,-0x43,0x33)+'rs']='Authorizat'+_0xc00027(0xde,0x123,0xf9,0x11b)+_0x3b9432(0x91,-0x2d,-0x63,0x4f)+_0x8e8f3a+'\x22',_0x23ce82[_0x3b9432(0x57,0xde,0x9d,0x1ac)]=_0x113a19,_0x23ce82[_0xc00027(0xd7,0x208,0xc1,0x14e)]=_0x331078,_0x23ce82[_0x3b9432(0x83,0x4a,-0x1a,0xf4)+'e']=_0x3aa595,_0x23ce82['top_p']=_0x3e4287,_0x23ce82[_0xc00027(0x11f,0xfc,0x1fc,0x150)]=_0x3558f6,_0x23ce82['stream']=_0xc1b734,_0x48db04=_0x23ce82;}else _0x12bd01=''+_0xdef5a3['stringify'](_0x75eab5[_0x3b9432(0xaf,0xe1,0x195,0x77)]);}function _0xc00027(_0x5d141d,_0x2a8810,_0x1383a8,_0x1fd167){return _0x80e9ba(_0x2a8810,_0x1fd167-0x1db,_0x1383a8-0x1f,_0x1fd167-0x7e);}_0x1f88c7&&(_0x132bac[_0x3b9432(0x144,0xcb,0x15f,0xca)]('jdhNB',_0x132bac[_0xc00027(0xa0,0x3f,0x5f,0xbe)])?_0x132bac['bwqlx'](_0x1f88c7,'正在处理\x20'+_0x255215+_0x3b9432(0x66,0x49,-0x86,0x9a)):(_0x504af8+=_0x5c6795,_0x55052a&&_0x132bac[_0x3b9432(0x97,-0xb,0x30,-0x3f)](_0x32aa5c,_0x6bee81)));try{if(_0x132bac[_0x3b9432(0xca,0x17,0x1e,-0x38)]!==_0x132bac['uAJWt']){const _0x312975=await fetch(_0x2a8f19,{'method':_0x132bac[_0xc00027(0x95,0xea,0x21a,0x15f)],'headers':_0x4789aa,'body':JSON['stringify'](_0x48db04),'signal':_0x4d543c});if(!_0x312975['ok']){if(_0x132bac[_0x3b9432(0x75,0xcb,0x139,0x82)](_0x132bac[_0xc00027(0x17f,0x122,-0x2,0xd0)],_0x132bac[_0xc00027(0x7e,0x1,0x168,0xa8)])){try{if(_0x132bac[_0x3b9432(-0x9b,-0x78,-0xb,0x55)](_0x3b9432(0x1ba,0x118,0x1df,0xf4),_0x3b9432(0x43,0x32,-0x34,0x4d))){const _0x388ca9=await _0x312975['json']();if(_0x388ca9[_0x3b9432(0x19d,0xe1,0xe5,0x9d)]){if(_0x132bac[_0xc00027(-0x4,0xcc,0x42,0x27)](_0x132bac[_0x3b9432(-0xd4,-0x9,-0x1e,0x12)],_0xc00027(0xc1,0x18,0x7d,0x9a)))_0x516797[_0xc00027(0x212,0x1bc,0x1fc,0x18b)](),_0x1a6a4f[_0xc00027(0x156,0xfb,0x1a1,0x1be)](_0xc00027(0x164,0x139,0x18a,0x101));else{let _0x1033b7;if(typeof _0x388ca9['error']===_0x3b9432(0x161,0xbb,0x15a,0x183)&&_0x388ca9['error'][_0xc00027(0xc6,0x1c5,0x1a8,0x126)]){_0x1033b7=''+_0x388ca9[_0xc00027(0x13c,0x16a,0x176,0x180)][_0xc00027(0xe7,0x119,0xa3,0x126)];const _0x44e1eb=[];if(_0x388ca9[_0xc00027(0x172,0x124,0xd5,0x180)]['type'])_0x44e1eb[_0xc00027(0x25,0xd2,0x187,0xf3)]('类型:\x20'+_0x388ca9[_0xc00027(0x233,0x243,0x10f,0x180)][_0xc00027(0x17a,0x15a,0x160,0x1af)]);if(_0x388ca9[_0x3b9432(0x138,0xe1,0x91,0x117)][_0x3b9432(0x6b,-0x18,0x44,0xb5)])_0x44e1eb[_0xc00027(0x19f,0x67,0x154,0xf3)]('代码:\x20'+_0x388ca9[_0xc00027(0x124,0xb1,0x214,0x180)]['code']);_0x44e1eb[_0xc00027(0xc6,0xee,0x7c,0x11e)]>-0x1fc7+-0x1*0x961+0x2928&&(_0x1033b7+='\x20('+_0x44e1eb[_0x3b9432(-0xa1,-0x7e,0x4f,-0xdd)](',\x20')+')');}else _0x1033b7=''+JSON['stringify'](_0x388ca9['error']);throw new Error(_0x1033b7);}}}else _0x56d7b1['warn'](_0x132bac[_0xc00027(0xd6,0x1b8,0xad,0x12a)],_0x40c037[_0x3b9432(0x32,0x87,0xc,0x86)]);}catch(_0x5bc889){if(_0x132bac['aasoZ'](_0x132bac[_0x3b9432(-0x44,0x11,0x2,-0x35)],_0x132bac['DyvsA']))_0x1545ef(_0x132bac[_0x3b9432(-0x77,0x44,-0x10,0x97)]);else{if(_0x5bc889[_0xc00027(0x18b,0x7a,0x108,0x126)][_0xc00027(0x1e3,0x171,0x97,0x15b)](_0x132bac['kfezt'])||_0x5bc889[_0xc00027(0xdc,0x9a,0x11e,0x126)][_0x3b9432(0x6f,0xbc,0x9d,0xf5)](_0x132bac[_0xc00027(0x115,0x11c,0x10f,0x151)]))throw _0x5bc889;}}throw new Error(_0x3b9432(-0x88,-0x1d,-0xc9,0xab)+_0x312975[_0x3b9432(0x50,0x73,0xd1,0x13)]+'\x20'+_0x312975[_0xc00027(0x8f,0x108,0x65,0x4f)]);}else return _0x47c9b8;}let _0x45293a='';if(_0xc1b734){const _0x450758=_0x312975['body'][_0x3b9432(-0x3f,0x0,-0x85,0x8)](),_0x47303c=new TextDecoder(_0x3b9432(-0x2e,0x39,-0x73,-0x48));let _0x2876cd='';while(!![]){const {done:_0x40751a,value:_0xcf93cd}=await _0x450758[_0x3b9432(0x9d,0xba,-0x10,0x136)]();if(_0x40751a)break;const _0x17cb14={};_0x17cb14[_0x3b9432(0x44,-0x3d,-0x44,0x42)]=!![],_0x2876cd+=_0x47303c['decode'](_0xcf93cd,_0x17cb14);const _0x20d3d9=_0x2876cd[_0x3b9432(-0x5f,0xc,-0x3e,-0x5a)]('\x0a');_0x2876cd=_0x20d3d9[_0xc00027(0x191,0x105,0x15e,0x1b4)]()||'';for(const _0xae4d94 of _0x20d3d9){const _0x2bdcb7=_0xae4d94[_0xc00027(0xb,0x17b,0x176,0xcf)]();if(!_0x2bdcb7||_0x132bac[_0x3b9432(0x17e,0xc5,0x2c,0x138)](_0x2bdcb7,_0x132bac[_0x3b9432(0xfa,0x50,0x16,-0x37)]))continue;if(_0x2bdcb7['startsWith'](_0x3b9432(0x101,0xd4,0x9b,0xbb)))try{const _0x5c8afd=_0x2bdcb7[_0x3b9432(0xa4,0x61,-0xe,0xda)](0x5b5*-0x3+0x1*0x1ebb+-0xd96),_0x5423c8=JSON[_0x3b9432(-0x19,0x5d,0xd1,-0x78)](_0x5c8afd),_0x743cc5=_0x5423c8['choices']?.[0x3ef+-0x404*0x8+0x1c31*0x1]?.[_0x3b9432(0xc8,0x98,0x8f,0x74)]?.['content'];_0x743cc5&&(_0x45293a+=_0x743cc5,_0x1f88c7&&_0x132bac[_0x3b9432(-0x5d,-0x86,-0xe5,-0xd)](_0x1f88c7,_0x45293a));}catch(_0x182aa9){_0x3b9432(0xf,-0x83,-0x60,-0x67)!==_0x3b9432(0xca,0xa8,0x30,0x6e)?console[_0xc00027(0x15f,0xa7,-0xd,0xa3)](_0x132bac[_0xc00027(0x10a,0x142,0x60,0x125)],_0x182aa9['message']):_0x17bdf3(_0xf8c156);}}}if(_0x2876cd[_0xc00027(0x18b,0x5f,0x18,0xcf)]()&&_0x132bac[_0xc00027(0x8a,-0xa8,-0xac,0x27)](_0x2876cd[_0xc00027(0xd8,0x50,0x197,0xcf)](),_0x132bac['YlYlX'])&&_0x2876cd[_0xc00027(0x164,-0x5,0xcd,0xcf)]()[_0xc00027(0x10a,0x179,0x1ec,0x155)](_0x132bac[_0x3b9432(-0x3e,-0x5b,-0x10d,-0xe4)]))try{const _0x396b05=_0x2876cd[_0xc00027(0xe7,0x17d,0x0,0xcf)]()[_0x3b9432(-0x41,0x61,-0x41,-0x3d)](-0x149f+0x11*0xab+0x1d*0x52),_0x3bd675=JSON[_0xc00027(0x63,0x170,0x79,0xfc)](_0x396b05),_0x10541c=_0x3bd675[_0x3b9432(-0xd3,-0x48,-0x5a,0x4)]?.[0x17a8+0xe*-0xfe+-0x9c4]?.['delta']?.[_0xc00027(0x1e7,0x121,0x120,0x18a)];_0x10541c&&(_0x132bac[_0xc00027(-0x5a,-0xa5,0xeb,0x27)]('NmzHc',_0xc00027(0x1f,0x2b,0x57,0x59))?(_0x45293a+=_0x10541c,_0x1f88c7&&_0x132bac['SNOuQ'](_0x1f88c7,_0x45293a)):_0x169516+='\x20('+_0x541bcf[_0x3b9432(-0x8c,-0x7e,-0x65,-0xf3)](',\x20')+')');}catch(_0x15d9bc){console[_0xc00027(0x2b,0x15c,-0xb,0xa3)](_0x132bac[_0x3b9432(0x112,0x8b,0xa5,0xf7)],_0x15d9bc[_0xc00027(0x90,0x1ae,0x1e8,0x126)]);}if(!_0x45293a){if(_0x132bac[_0x3b9432(0x1c2,0x112,0xcd,0x52)](_0x132bac[_0xc00027(0xc8,0x132,0x9b,0x8c)],_0x3b9432(0x49,0x23,0x6e,0x25)))return function(_0x1ec591){const {id:_0x366716}=_0x1ec591;function _0x3e675f(_0x3304ac,_0x227e1e,_0x4ab7d9,_0x2e2b08){return _0x3b9432(_0x3304ac-0xde,_0x3304ac- -0xff,_0x227e1e,_0x2e2b08-0x1af);}if(!_0x366716)return;const _0x4d2d7d=_0x37e459[_0x2020ba]||_0x1cc441;_0x60e4ea[_0x3e675f(-0xa0,-0xdb,-0xf1,-0xc1)](_0x2636e8(0x62a,0x67d,0x668,0x654)+_0x2636e8(0x58d,0x4e6,0x4d8,0x588)+_0x4d2d7d+(_0x3e675f(-0xc9,-0x68,-0x19e,-0x3e)+_0x3e675f(0x1,0x31,-0xbc,-0x44))+_0x366716+')');const _0x51b33b=_0x235266(_0x3fa364),_0x5f08b1={};_0x5f08b1[_0x3e675f(-0x13b,-0x20f,-0xed,-0x195)]=_0x51b33b;function _0x2636e8(_0x4e2419,_0x36448d,_0x3c69d7,_0x1a6e98){return _0xc00027(_0x4e2419-0xf0,_0x3c69d7,_0x3c69d7-0x32,_0x4e2419-0x46e);}_0x5f08b1['id']=_0x366716,_0x6a51fa[_0x2636e8(0x55c,0x49a,0x55d,0x5b6)](_0x329eb,_0x5f08b1);};else _0x45293a=_0x132bac[_0xc00027(0x9e,0x14a,0xec,0xd6)],toastr[_0x3b9432(0xcc,0xd3,0x17a,0x5a)](_0x255215+(':\x20LLM\x20请求返回'+_0x3b9432(-0x78,-0x4b,-0xa7,-0x34)+_0x3b9432(-0x42,-0x76,-0x5e,-0x97)+'ns\x20设置过小、或\x20'+_0x3b9432(0xb8,0x2f,0x45,-0x8e)));}}else{if(_0x132bac[_0x3b9432(0xf7,0x7b,0x13d,0x76)](_0x132bac[_0x3b9432(0x8e,0x75,0x10a,-0x17)],_0x132bac[_0xc00027(0x15b,0xf5,0xd7,0x114)]))_0x132bac[_0x3b9432(0x5a,-0x75,-0xf0,-0x28)](_0x2450c1,_0x42f58f);else{const _0x112252=await _0x312975[_0xc00027(0x74,0x89,0x1a8,0x141)]();if(_0x112252['error']){if(_0x132bac[_0x3b9432(-0x132,-0x78,-0x68,0x14)](_0x132bac[_0x3b9432(0x89,0x6e,0x81,0xff)],'avhDT')){const _0x151bbd=_0x134c3b[_0x3b9432(-0x136,-0x70,-0x11f,-0x74)](_0x512052,arguments);return _0x5b2e34=null,_0x151bbd;}else{let _0x4915e8;if(_0x132bac[_0x3b9432(0x2,0xc5,0x11b,0x150)](typeof _0x112252[_0xc00027(0xe1,0x18f,0x23a,0x180)],_0x132bac[_0xc00027(0x219,0x1e0,0x189,0x175)])&&_0x112252[_0x3b9432(0x57,0xe1,0x96,0xf0)][_0x3b9432(0xb7,0x87,0x86,0xe5)]){_0x4915e8=''+_0x112252[_0xc00027(0x10c,0x22a,0x23d,0x180)][_0xc00027(0x1f3,0x76,0x1ac,0x126)];const _0x1280ce=[];if(_0x112252[_0xc00027(0x100,0x216,0x14c,0x180)][_0x3b9432(0xdd,0x110,0xe2,0x124)])_0x1280ce[_0xc00027(0x96,0x12c,0x6a,0xf3)](_0xc00027(0x264,0x18f,0xf4,0x1a5)+_0x112252[_0xc00027(0xe7,0x1d0,0x123,0x180)][_0x3b9432(0x16c,0x110,0x197,0x1e4)]);if(_0x112252[_0x3b9432(0x15b,0xe1,0x1ae,0x158)]['code'])_0x1280ce[_0xc00027(0x4f,0x23,0xc7,0xf3)](_0xc00027(-0x77,-0x14,-0x1e,0x2d)+_0x112252['error']['code']);_0x132bac[_0xc00027(0x6f,0xaf,0xb7,0x68)](_0x1280ce[_0xc00027(0xfd,0x12e,0x1a2,0x11e)],-0x126c*0x1+0x1bfc+-0x990)&&(_0x132bac[_0x3b9432(0x72,-0x3f,0x49,0x89)](_0x132bac[_0xc00027(0x183,0xae,0xbe,0x170)],_0x132bac[_0x3b9432(0x125,0xd1,0x176,0x5e)])?_0x19c9f0+='\x20('+_0x4a4788['join'](',\x20')+')':_0x4915e8+='\x20('+_0x1280ce[_0x3b9432(-0xe1,-0x7e,0x4c,-0x118)](',\x20')+')');}else{if(_0x132bac[_0x3b9432(-0xa5,-0x2c,-0x25,0x77)](_0x132bac[_0x3b9432(0x1a5,0xe2,0x14b,0x38)],_0x132bac[_0x3b9432(0x39,0xe2,0x18b,0x156)]))_0x4915e8=''+JSON[_0xc00027(0xf6,0x18d,0xb6,0x16d)](_0x112252['error']);else{const _0x145ff2=_0x19c2f0+(_0x3b9432(-0xc,-0x32,-0xa3,0x86)+_0x3b9432(-0xf9,-0x43,-0xc,0x27)+_0x3b9432(0x21,0x3f,0x6c,0xad)+'置。');_0x522cb3[_0xc00027(0x185,0x116,0xe1,0x180)](_0x145ff2);const _0x420410={};_0x420410[_0x3b9432(-0x61,0x6a,0x2e,0x52)]=![],_0x420410['result']=_0x145ff2,_0x420410['id']=_0x240d0c,_0x70e400[_0xc00027(0x16f,0x132,0x1ba,0xee)](_0x35ab10,_0x420410);return;}}throw new Error(_0x4915e8);}}_0x45293a=_0x112252['choices']?.[0x4*0x10e+-0x14ae+0x1076]?.[_0x3b9432(0x56,0x87,-0xf,0x144)]?.['content']||'';if(!_0x45293a){if(_0x132bac['jChkQ'](_0x132bac['oPnff'],_0x132bac[_0x3b9432(-0x3f,-0x1,0x43,-0x6f)]))_0x45293a=_0x132bac['lXIRS'],toastr['warning'](_0x255215+(_0x3b9432(0x1d,0x18,0x93,0x2d)+_0xc00027(-0x16,0xb9,0xc6,0x54)+_0x3b9432(-0x13,-0x76,-0x9e,-0x110)+_0xc00027(0x274,0x1f4,0x19e,0x1a2)+_0x3b9432(-0x25,0x2f,-0xe,-0x48)));else{if(_0x132bac[_0x3b9432(-0xe9,-0x4e,-0x8b,0x37)](_0x33ccee[_0x3b9432(0x88,0xb0,0x8d,0xa4)],_0x132bac[_0x3b9432(-0x4c,0x38,-0x6c,0x9e)])){_0x236e9f=!![],_0x4889be[_0xc00027(0x1b4,0x237,0x158,0x174)+'us'](_0x1bc6f3,_0x115b7c['CANCELLED']),_0x44af8a[_0xc00027(0x8a,0x1bb,0x16a,0x15d)](_0x505eaa);const _0x4951a6={};_0x4951a6['name']=_0x132bac[_0xc00027(0x139,0x15a,0xb0,0xd7)],_0x4951a6[_0x3b9432(-0x19,0x87,-0x44,0x6)]=_0x132bac[_0x3b9432(0x18,0xd2,0x155,0x187)];const _0x36c0a4={};_0x36c0a4[_0x3b9432(0x3f,0x6a,0x10d,0x41)]=![],_0x36c0a4[_0xc00027(0xe8,0xe4,0x18,0x61)]=null,_0x36c0a4['id']=_0x1e8643,_0x36c0a4[_0xc00027(0xdf,0x1ab,0xfe,0x180)]=_0x4951a6,_0x224fab[_0xc00027(0x10e,0x155,0x112,0xee)](_0x556d62,_0x36c0a4);return;}_0x57842b['error'](_0x475e05+_0xc00027(0x18,0x25,-0x48,0x6a),_0x4b73b1);const _0x560b90=_0xc00027(0x14a,0x87,0x19b,0xc5)+_0x22807c[_0xc00027(0x84,0x186,0x14d,0x126)];_0x47f756&&_0x132bac['lIZhp'](_0x169ec2,_0x560b90);_0x5c6120[_0xc00027(0x18b,0x1a1,0x1be,0x180)](_0x2f1e7e[_0xc00027(0x130,0xd3,0x89,0x126)]),_0x36f04b['completeTa'+'sk'](_0x4c4eee,![]),_0x1770c5[_0xc00027(0xf8,0x11c,0xc0,0x15d)](_0x505768);const _0x28fab0={};_0x28fab0['success']=![],_0x28fab0[_0x3b9432(-0x60,-0x3e,-0xb4,0x5c)]=_0x560b90,_0x28fab0['id']=_0x2bb2b5,_0x2e2459[_0xc00027(0xc4,0x78,0x2c,0xee)](_0x2c8751,_0x28fab0);}}_0x1f88c7&&(_0x132bac[_0xc00027(0x58,0x9b,0x133,0x73)](_0x132bac[_0x3b9432(0x121,0x95,0xd0,0x6e)],_0x132bac[_0xc00027(-0x3e,-0x40,0x106,0x8a)])?_0x5e9e0e&&(_0x34d1cb['abort'](),_0x1a236d['info'](_0x132bac[_0x3b9432(0x34,-0x14,0xc,-0x55)])):_0x132bac['SEIXO'](_0x1f88c7,_0x45293a));}}addLog(_0x3b9432(-0xb6,0xd,-0x92,-0xb0)+_0x3b9432(0x17,0x41,-0x2a,0xa8)),_0x132bac['YuTte'](addLog,_0x45293a),_0x132bac['bcFJk'](addLog,_0xc00027(0x67,0xb5,0xb6,0x1f)+_0xc00027(0xef,0x1a7,0x1ea,0x1a0)),taskQueue[_0x3b9432(-0x8b,-0x16,0x2c,0x56)+'sk'](_0x2e337c,!![]),llmTaskControllers[_0xc00027(0x217,0x144,0x129,0x15d)](_0x2e337c);const _0x299b48={};_0x299b48[_0xc00027(0x4c,0x132,0x4d,0x109)]=!![],_0x299b48['result']=_0x45293a,_0x299b48['id']=_0x44935b,_0x299b48[_0xc00027(0xfd,0x77,-0x87,0x35)]=![],eventSource['emit'](_0x592d5d,_0x299b48);}else _0x7c2e===_0x20e342&&(_0x157e71=null),(!_0x2c55e5||_0x9bd85b===null)&&_0x132bac[_0x3b9432(-0x43,0x22,0xdb,0x59)](_0x3404cc);}catch(_0x1d38a0){if(_0x132bac[_0xc00027(0x136,0x122,0x186,0x1b1)](_0x1d38a0[_0xc00027(0xa2,0xc4,0x1b2,0x14f)],_0x3b9432(0xfa,0xfb,0x159,0x1b2))){const _0x1c226b=_0x132bac[_0x3b9432(0xcb,0xe5,0x58,0x139)]['split']('|');let _0x13628f=0x5*-0x47b+0x23b1*0x1+-0xd4a;while(!![]){switch(_0x1c226b[_0x13628f++]){case'0':const _0x52fca7={};_0x52fca7[_0x3b9432(0x151,0xb0,0xb1,0xb2)]=_0x132bac['sWtHs'],_0x52fca7['message']=_0x132bac[_0x3b9432(0x17c,0xd2,0x77,0x10b)];const _0x4a6b23={};_0x4a6b23[_0x3b9432(0x5a,0x6a,0xcf,-0x4b)]=![],_0x4a6b23[_0xc00027(0xca,0x28,0x52,0x61)]=null,_0x4a6b23['id']=_0x44935b,_0x4a6b23[_0x3b9432(0x7d,0xe1,0x1b6,0x1af)]=_0x52fca7,eventSource[_0x3b9432(-0x73,0x4f,0x5d,0xb0)](_0x592d5d,_0x4a6b23);continue;case'1':taskQueue[_0x3b9432(0x81,0xd5,0x168,0xef)+'us'](_0x2e337c,TaskStatus[_0xc00027(0xdd,0x119,0xb6,0xcd)]);continue;case'2':_0x75996a=!![];continue;case'3':return;case'4':llmTaskControllers[_0x3b9432(-0x15,0xbe,0x31,0x6b)](_0x2e337c);continue;}break;}}console[_0x3b9432(0xbd,0xe1,0x66,0x1a1)](_0x255215+_0xc00027(0x61,0x57,0xc4,0x6a),_0x1d38a0);const _0x482fbd='请求错误:\x20'+_0x1d38a0[_0xc00027(0xea,0x12a,0xf4,0x126)];_0x1f88c7&&_0x132bac[_0x3b9432(0x9d,-0x39,0x40,0x3a)](_0x1f88c7,_0x482fbd);toastr['error'](_0x1d38a0[_0x3b9432(0x98,0x87,0xa,-0x4)]),taskQueue[_0xc00027(0xa8,0x90,0x91,0x89)+'sk'](_0x2e337c,![]),llmTaskControllers['delete'](_0x2e337c);const _0x4848d1={};_0x4848d1[_0xc00027(0x145,0x1c7,0x12d,0x109)]=![],_0x4848d1[_0x3b9432(0x24,-0x3e,-0xc9,0x23)]=_0x482fbd,_0x4848d1['id']=_0x44935b,eventSource[_0x3b9432(0xae,0x4f,-0x9,0x35)](_0x592d5d,_0x4848d1);}finally{if(_0x132bac[_0x3b9432(0xcf,0x1,0x5d,-0xad)](_0xc00027(0x1ee,0xdf,0x1de,0x179),_0x132bac[_0xc00027(0x259,0x199,0x20b,0x197)])){_0x132bac[_0xc00027(0x94,0xcf,0x219,0x164)](currentLLMRequestController,_0x3d6de2)&&(currentLLMRequestController=null);if(!_0x75996a||currentLLMRequestController===null){if(_0x132bac['WBjUv']===_0x132bac['iAYPX']){const _0xf70a90={};_0xf70a90[_0xc00027(0xb3,0xcc,0x96,0xb5)]=_0x132bac[_0x3b9432(0x2f,0x29,-0x5f,0x9a)],_0xf70a90[_0xc00027(0x174,0x16a,0x1f9,0x18a)]=_0x2d4611[_0xc00027(0x152,0x1f4,0x1ce,0x138)],_0xca3180[_0xc00027(0x40,0x17f,0xcc,0xf3)](_0xf70a90);}else _0x132bac[_0xc00027(0xb2,0x12c,0x4a,0xc1)](stopFabLoading);}}else{_0x300c12=''+_0x16e0a8[_0x3b9432(0xc8,0xe1,0x1a5,0x193)][_0xc00027(0x1e5,0xf1,0xde,0x126)];const _0x432670=[];if(_0x278450[_0x3b9432(0x12a,0xe1,0x88,0x12b)]['type'])_0x432670[_0x3b9432(0xf0,0x54,0xe1,-0xb)](_0x3b9432(0xa4,0x106,0x166,0x12f)+_0x4be15b['error']['type']);if(_0x4bdddc[_0x3b9432(0x116,0xe1,0x12,0x173)]['code'])_0x432670[_0x3b9432(0x46,0x54,0xe8,0x2d)]('代码:\x20'+_0x1a7853['error'][_0x3b9432(-0x35,-0x18,-0xd0,0x95)]);_0x132bac[_0x3b9432(-0x33,-0x7d,-0xb4,-0x10c)](_0x432670[_0xc00027(0xea,0x13d,0x10f,0x11e)],0x3f*0x5b+-0x1005+-0x660)&&(_0x1dc1cc+='\x20('+_0x432670[_0x3b9432(-0x134,-0x7e,-0x2e,-0x9e)](',\x20')+')');}}}export async function executeDefaultLLMRequest(_0x11f835,_0x482786,_0xd61e74=null){const _0x32b174={'QzNml':function(_0x8debd9,_0x286e69){return _0x8debd9(_0x286e69);},'HlUcz':function(_0x37018d,_0x19be31){return _0x37018d===_0x19be31;},'dMCEg':function(_0x30e680,_0x4afc07){return _0x30e680>_0x4afc07;},'ZWeuk':_0x3eb339(0x2e6,0x340,0x300,0x369),'Mydlf':_0x3eb339(0x122,0x290,0x1ee,0x1bd),'YMarS':function(_0x33df9c,_0x2220fa){return _0x33df9c+_0x2220fa;},'wtiSv':_0x3eb339(0x102,0xe6,0x19b,0x12a)+'nds/chat-c'+'ompletions'+_0x417cd6(0x53c,0x4c0,0x529,0x4ad),'QqahF':function(_0x3421b,_0x4f8354){return _0x3421b(_0x4f8354);},'SkOKy':_0x417cd6(0x64a,0x660,0x617,0x5b3),'rvXjE':function(_0x2be619,_0x82a7d){return _0x2be619||_0x82a7d;},'RuuyT':'YpONu','AjgwS':_0x3eb339(0x24a,0x1fe,0x1d2,0x237),'SvcxO':'LLM请求已中断，开'+'始新请求。','pUjrK':function(_0x462dd0){return _0x462dd0();},'jVqXd':function(_0x3b62cf,_0x21b731){return _0x3b62cf(_0x21b731);},'pTQZu':function(_0xc419fc,_0x36596a){return _0xc419fc||_0x36596a;},'mVIZo':function(_0x5367f7,_0x3efa10){return _0x5367f7!==_0x3efa10;},'dqCwd':_0x417cd6(0x563,0x629,0x585,0x561),'HsJfY':'NXuzJ','uUtYA':_0x417cd6(0x4d2,0x653,0x593,0x62e)+_0x3eb339(0x2f8,0x1bc,0x28f,0x26f)+_0x417cd6(0x46a,0x51a,0x478,0x512),'FNNUj':_0x3eb339(0x34a,0x3c8,0x32e,0x2f4),'rniNr':_0x417cd6(0x579,0x5c4,0x53c,0x52e),'btCJF':_0x3eb339(0x1bd,0xf7,0x1bd,0x15a),'jnbyi':'custom','Mduzy':_0x417cd6(0x592,0x5e9,0x5d5,0x67f),'TmwgI':_0x3eb339(0x115,0xd5,0x1aa,0x20d),'rjigd':_0x3eb339(0x255,0x21a,0x293,0x226)+_0x417cd6(0x480,0x4a5,0x4f2,0x491),'sSOFF':_0x417cd6(0x4ee,0x5f6,0x567,0x609),'hCsNC':function(_0x135eda,_0x353966){return _0x135eda===_0x353966;},'EjGAf':_0x417cd6(0x4fd,0x646,0x5b7,0x620),'hAmsP':_0x417cd6(0x47d,0x515,0x528,0x5af),'xMJgE':function(_0x38cafb,_0x305b58){return _0x38cafb===_0x305b58;},'ihuvL':_0x417cd6(0x636,0x563,0x5d4,0x563),'lSjvP':'LLM\x20请求返回为空'+_0x3eb339(0x291,0x10d,0x1da,0x1d8)+_0x3eb339(0x2a2,0x351,0x2c3,0x26e)+_0x3eb339(0x239,0x202,0x2b0,0x337)+_0x417cd6(0x58c,0x55e,0x4cc,0x491),'vaIFC':function(_0x1da7f9,_0x2d1310){return _0x1da7f9(_0x2d1310);},'RmLdH':function(_0x12191b,_0x4b5523){return _0x12191b(_0x4b5523);},'TIUjB':function(_0x33a6c9,_0x21c7f7){return _0x33a6c9(_0x21c7f7);},'CDPdQ':_0x417cd6(0x646,0x5d9,0x5f7,0x659),'GbJuW':_0x417cd6(0x5b1,0x4cf,0x4dc,0x571)+'2','MFHQF':_0x3eb339(0x2f7,0x322,0x26b,0x27d)+_0x417cd6(0x4f4,0x4e2,0x541,0x52a)+_0x3eb339(0x263,0x1da,0x1cb,0x1ad),'bXzkm':_0x417cd6(0x654,0x53e,0x5a9,0x642)+_0x417cd6(0x4e3,0x54d,0x48e,0x4f0),'KmyFm':function(_0x200cdc,_0x32de66){return _0x200cdc(_0x32de66);},'ABrUJ':_0x3eb339(0x25e,0x1d2,0x1cd,0x297),'aZmRB':function(_0x1377da,_0x3cc9a6){return _0x1377da===_0x3cc9a6;},'BkKLh':function(_0x3deeae){return _0x3deeae();}},{prompt:_0x3655b9,id:_0x4f286c}=_0x11f835;if(_0x32b174[_0x417cd6(0x53c,0x5f5,0x537,0x46c)](!_0x4f286c,!_0x3655b9))return;if(currentLLMRequestController){if(_0x32b174[_0x417cd6(0x5ad,0x5be,0x4ef,0x538)]===_0x32b174[_0x3eb339(0x1a2,0x1d2,0x198,0x1c7)]){_0x284a4a=_0x39299a+(_0x3eb339(0x2ea,0x31c,0x320,0x27a)+_0x3eb339(0x36b,0x34f,0x2a5,0x240));const _0x4b1ced={};_0x4b1ced[_0x417cd6(0x56c,0x5e4,0x572,0x52c)+'pe']=_0x3eb339(0x33f,0x292,0x2b9,0x1e7)+'n/json',_0x4b1ced[_0x3eb339(0x357,0x293,0x2a0,0x1f5)+_0x3eb339(0x3aa,0x3ac,0x317,0x26d)]='Bearer\x20'+_0x10fbd0,_0x27c7b3=_0x4b1ced;const _0x2ba45e={};_0x2ba45e['model']=_0x245c94,_0x2ba45e[_0x3eb339(0x22a,0x336,0x2c1,0x31c)]=_0x159117,_0x2ba45e[_0x417cd6(0x615,0x557,0x546,0x5a0)+'e']=_0x5c233d,_0x2ba45e['top_p']=_0x5f28c5,_0x2ba45e[_0x417cd6(0x539,0x680,0x5ad,0x502)]=_0x52695d,_0x2ba45e[_0x3eb339(0x12f,0x191,0x1d5,0x297)]=_0x509334,_0xa93e74=_0x2ba45e;}else currentLLMRequestController[_0x417cd6(0x5f4,0x695,0x5e8,0x6a1)](),toastr[_0x417cd6(0x5c8,0x6cd,0x61b,0x659)](_0x32b174[_0x3eb339(0x20a,0x34b,0x2bc,0x337)]);}currentLLMRequestController=new AbortController();const _0x36c407=currentLLMRequestController[_0x417cd6(0x52d,0x40a,0x4dd,0x4af)],_0x357b24=currentLLMRequestController,_0x3df236={};_0x3df236['name']='LLM:\x20外部请求',_0x3df236[_0x3eb339(0x3bd,0x2b2,0x322,0x381)]=TaskType['LLM'],_0x3df236[_0x3eb339(0x208,0x10c,0x1d6,0x229)]=_0x4f286c;const _0x5ef475=taskQueue['addTask'](_0x3df236);llmTaskControllers[_0x417cd6(0x577,0x4b0,0x524,0x59f)](_0x5ef475,currentLLMRequestController),taskQueue[_0x3eb339(0x38b,0x39d,0x2e7,0x2bb)+'us'](_0x5ef475,TaskStatus[_0x417cd6(0x55f,0x4bb,0x4d4,0x58b)]),startFabLoading();let _0x244069=![];_0x32b174[_0x3eb339(0x200,0x349,0x279,0x2b5)](clearLog),_0x32b174[_0x417cd6(0x5da,0x524,0x50b,0x51e)](addLog,_0x417cd6(0x4ef,0x454,0x47c,0x434)+'默认请求开始\x20==='+'=='),addLog(_0x417cd6(0x535,0x536,0x531,0x498)+_0x4f286c);function _0x3eb339(_0x58d67e,_0x3206f6,_0x39b61a,_0x445a55){return _0x80e9ba(_0x445a55,_0x39b61a-0x34e,_0x39b61a-0x1d6,_0x445a55-0x156);}addLog(_0x3eb339(0x21a,0x18f,0x19f,0x123)+':'),_0x32b174[_0x417cd6(0x53c,0x65d,0x5ee,0x5ed)](addLog,formatPromptForDisplay(_0x3655b9));const {api_url:_0x41db68,api_key:_0x11a6d9,model:_0x437bd1,temperature:_0x4ed97e,top_p:_0x52977c,max_tokens:_0x1cbe3d,stream:_0x3347d7,bypass_proxy:_0x79d937}=_0x482786;if(_0x32b174[_0x3eb339(0x221,0x25f,0x1b5,0x187)](!_0x41db68,!_0x11a6d9)||!_0x437bd1){if(_0x32b174[_0x417cd6(0x553,0x558,0x4d3,0x4b8)](_0x32b174['dqCwd'],_0x32b174[_0x417cd6(0x6b0,0x6b9,0x5e4,0x6ab)])){const _0xeab3c5=_0x32b174[_0x3eb339(0x1ad,0x16d,0x1c5,0x275)];toastr['error'](_0xeab3c5);const _0x585b3f={};_0x585b3f[_0x417cd6(0x603,0x540,0x566,0x581)]=![],_0x585b3f[_0x417cd6(0x543,0x56a,0x4be,0x558)]=_0xeab3c5,_0x585b3f['id']=_0x4f286c,eventSource[_0x3eb339(0x248,0x1f7,0x261,0x1fb)](eventNames[_0x3eb339(0x204,0x321,0x250,0x2e3)+_0x3eb339(0x18d,0x273,0x1d1,0x148)],_0x585b3f);return;}else _0x1d7dcb=null;}function _0x417cd6(_0x24ad3d,_0x4b4b5,_0x4fa5b4,_0x552bad){return _0x80e9ba(_0x552bad,_0x4fa5b4-0x638,_0x4fa5b4-0x5a,_0x552bad-0x12c);}const _0x367015=_0x41db68[_0x417cd6(0x536,0x5f6,0x56d,0x54a)](/\/$/,'');let _0x959752,_0x36d45a,_0x21a87f;if(_0x79d937){if(_0x32b174['mVIZo'](_0x32b174[_0x3eb339(0x20c,0x22f,0x1e4,0x19c)],_0x32b174[_0x417cd6(0x523,0x559,0x48b,0x4d6)])){_0x959752=_0x367015+(_0x3eb339(0x326,0x30b,0x320,0x27b)+_0x3eb339(0x2d8,0x226,0x2a5,0x30c));const _0x3bdcb2={};_0x3bdcb2['Content-Ty'+'pe']='applicatio'+_0x3eb339(0x37f,0x28a,0x2ef,0x365),_0x3bdcb2['Authorizat'+_0x417cd6(0x5dc,0x68f,0x601,0x654)]=_0x417cd6(0x65a,0x5c5,0x5df,0x51a)+_0x11a6d9,_0x36d45a=_0x3bdcb2;const _0x14d6b7={};_0x14d6b7[_0x417cd6(0x61e,0x5e9,0x5da,0x59e)]=_0x437bd1,_0x14d6b7[_0x417cd6(0x523,0x552,0x5ab,0x657)]=_0x3655b9,_0x14d6b7[_0x3eb339(0x304,0x1c9,0x25c,0x21c)+'e']=_0x4ed97e,_0x14d6b7[_0x417cd6(0x5ac,0x50a,0x4da,0x51a)]=_0x52977c,_0x14d6b7[_0x417cd6(0x5cb,0x5f4,0x5ad,0x620)]=_0x1cbe3d,_0x14d6b7[_0x3eb339(0x13e,0x217,0x1d5,0x165)]=_0x3347d7??![],_0x21a87f=_0x14d6b7;}else _0x3ded5b+=_0x19f823,_0x570074&&_0x5364d9(_0x752171);}else{let _0x3a9224=_0x367015;!_0x3a9224[_0x417cd6(0x639,0x63e,0x5cb,0x605)](_0x32b174[_0x3eb339(0x27b,0x1ee,0x2a8,0x25a)])&&!_0x3a9224[_0x3eb339(0x376,0x250,0x2ce,0x2c0)](_0x32b174['Mydlf'])&&(_0x32b174['HlUcz'](_0x32b174[_0x417cd6(0x4e0,0x59e,0x597,0x53d)],_0x417cd6(0x57d,0x4d4,0x4a7,0x413))?_0x3a9224=_0x3a9224+_0x3eb339(0x399,0x289,0x300,0x323):_0x32b174[_0x3eb339(0x248,0x2de,0x26e,0x1d1)](_0xea455e,_0x1dde0a));_0x3a9224=_0x3a9224[_0x417cd6(0x613,0x5c9,0x56d,0x4db)](/\/v1\/$/,_0x417cd6(0x601,0x60e,0x5ea,0x658)),_0x959752=_0x32b174['wtiSv'],_0x36d45a=_0x32b174[_0x417cd6(0x4e9,0x56d,0x50b,0x5c6)](getRequestHeaders,window[_0x3eb339(0x328,0x25c,0x30b,0x2bc)]);const _0x2aab8c={};_0x2aab8c[_0x3eb339(0x270,0x2f3,0x333,0x2a3)+_0x3eb339(0x1ad,0x18a,0x199,0x1bd)+'ce']=_0x32b174['jnbyi'],_0x2aab8c[_0x3eb339(0x281,0x292,0x272,0x1e2)]=_0x3a9224,_0x2aab8c[_0x417cd6(0x56f,0x581,0x5aa,0x511)+_0x3eb339(0x102,0x1cc,0x1a6,0x13c)+'rs']='Authorizat'+_0x3eb339(0x349,0x2c8,0x28e,0x1d4)+_0x417cd6(0x44d,0x41b,0x4cf,0x543)+_0x11a6d9+'\x22',_0x2aab8c[_0x417cd6(0x5b6,0x5ff,0x5da,0x578)]=_0x437bd1,_0x2aab8c[_0x417cd6(0x4fa,0x5cc,0x5ab,0x5c0)]=_0x3655b9,_0x2aab8c[_0x3eb339(0x324,0x21a,0x25c,0x271)+'e']=_0x4ed97e,_0x2aab8c[_0x417cd6(0x49e,0x4b3,0x4da,0x59f)]=_0x52977c,_0x2aab8c['max_tokens']=_0x1cbe3d,_0x2aab8c['stream']=![],_0x21a87f=_0x2aab8c;}if(_0xd61e74){if(_0x32b174[_0x3eb339(0x379,0x35f,0x2b1,0x273)](_0x32b174[_0x3eb339(0x277,0x230,0x260,0x1eb)],_0x32b174[_0x3eb339(0x148,0x188,0x21a,0x2ec)])){let _0x55ee22;if(_0x32b174[_0x3eb339(0x2b9,0x1f7,0x2b1,0x283)](typeof _0x47f923[_0x3eb339(0x392,0x2d2,0x2f3,0x33f)],_0x3eb339(0x2a5,0x366,0x2cd,0x36b))&&_0x59e24c[_0x417cd6(0x50a,0x67b,0x5dd,0x574)][_0x3eb339(0x281,0x1d4,0x299,0x265)]){_0x55ee22=''+_0x1bd799[_0x417cd6(0x5ea,0x594,0x5dd,0x557)]['message'];const _0x4144a6=[];if(_0x22e9d2[_0x417cd6(0x66a,0x57f,0x5dd,0x592)]['type'])_0x4144a6[_0x3eb339(0x204,0x305,0x266,0x246)]('类型:\x20'+_0x4042cc[_0x417cd6(0x6a1,0x55b,0x5dd,0x62c)][_0x417cd6(0x62c,0x5c2,0x60c,0x68e)]);if(_0x1e527d[_0x417cd6(0x5c0,0x583,0x5dd,0x54b)][_0x3eb339(0x221,0x21d,0x1fa,0x130)])_0x4144a6['push'](_0x417cd6(0x4ff,0x55a,0x48a,0x512)+_0x335198[_0x417cd6(0x609,0x515,0x5dd,0x5b7)]['code']);_0x4144a6[_0x417cd6(0x4b0,0x4a5,0x57b,0x508)]>0x13f*-0x6+0x1*-0x751+-0x7*-0x21d&&(_0x55ee22+='\x20('+_0x4144a6[_0x3eb339(0x1ef,0x10b,0x194,0x264)](',\x20')+')');}else _0x55ee22=''+_0x126b7e[_0x3eb339(0x2d5,0x382,0x2e0,0x312)](_0xc469d6['error']);throw new _0x434a49(_0x55ee22);}else _0x32b174['QqahF'](_0xd61e74,_0x32b174[_0x417cd6(0x695,0x67d,0x5d3,0x5ad)]);}try{if(_0x32b174['mVIZo'](_0x32b174[_0x3eb339(0x370,0x2d3,0x309,0x3d8)],_0x32b174[_0x417cd6(0x697,0x67d,0x5f3,0x5bb)]))_0x27d0f5=_0x28d8b6;else{const _0xdb6eca=await fetch(_0x959752,{'method':'POST','headers':_0x36d45a,'body':JSON[_0x3eb339(0x218,0x37b,0x2e0,0x31b)](_0x21a87f),'signal':_0x36c407}),_0x1b8674=await _0xdb6eca['json']();if(_0x1b8674[_0x3eb339(0x3a5,0x26b,0x2f3,0x21f)]){let _0x1fb0fb;if(_0x32b174['hCsNC'](typeof _0x1b8674[_0x417cd6(0x5fb,0x542,0x5dd,0x5ab)],_0x32b174[_0x417cd6(0x595,0x4e3,0x4f8,0x590)])&&_0x1b8674[_0x3eb339(0x28b,0x2d5,0x2f3,0x337)][_0x3eb339(0x219,0x302,0x299,0x2ad)]){if(_0x32b174['hAmsP']!==_0x32b174[_0x3eb339(0x321,0x28c,0x2b5,0x366)]){_0x3174f2=''+_0x3de63a[_0x417cd6(0x697,0x537,0x5dd,0x65a)][_0x417cd6(0x5e2,0x4d8,0x583,0x556)];const _0x161c76=[];if(_0x2b0ad6[_0x3eb339(0x235,0x25f,0x2f3,0x325)][_0x3eb339(0x328,0x3b4,0x322,0x3ca)])_0x161c76[_0x3eb339(0x2cc,0x29c,0x266,0x219)](_0x3eb339(0x282,0x268,0x318,0x3d6)+_0x30d000[_0x3eb339(0x230,0x339,0x2f3,0x28c)][_0x3eb339(0x2eb,0x2a9,0x322,0x37e)]);if(_0x28f9a1[_0x3eb339(0x31c,0x36f,0x2f3,0x2cc)]['code'])_0x161c76[_0x417cd6(0x505,0x55b,0x550,0x609)]('代码:\x20'+_0x2d8562[_0x417cd6(0x5ef,0x602,0x5dd,0x67e)][_0x417cd6(0x4c9,0x496,0x4e4,0x561)]);_0x32b174[_0x3eb339(0x1f7,0x2b4,0x27a,0x26b)](_0x161c76[_0x417cd6(0x5f0,0x4ff,0x57b,0x578)],0xbe0+0x45d*-0x1+-0x783)&&(_0x88c5e7+='\x20('+_0x161c76[_0x3eb339(0x168,0x1ca,0x194,0x127)](',\x20')+')');}else{_0x1fb0fb=''+_0x1b8674[_0x3eb339(0x2b2,0x2d6,0x2f3,0x225)][_0x417cd6(0x650,0x61d,0x583,0x505)];const _0x139792=[];if(_0x1b8674['error'][_0x417cd6(0x58d,0x53c,0x60c,0x5c7)])_0x139792[_0x3eb339(0x21a,0x1da,0x266,0x300)]('类型:\x20'+_0x1b8674[_0x417cd6(0x6aa,0x553,0x5dd,0x55c)][_0x3eb339(0x273,0x3b9,0x322,0x299)]);if(_0x1b8674[_0x417cd6(0x523,0x5cf,0x5dd,0x637)]['code'])_0x139792[_0x3eb339(0x2af,0x2c1,0x266,0x338)](_0x417cd6(0x3ff,0x430,0x48a,0x459)+_0x1b8674[_0x417cd6(0x5fc,0x651,0x5dd,0x591)][_0x3eb339(0x266,0x20e,0x1fa,0x272)]);_0x32b174[_0x3eb339(0x2eb,0x26c,0x27a,0x2cd)](_0x139792['length'],-0x190*0xc+-0x2354+0x3614)&&(_0x1fb0fb+='\x20('+_0x139792['join'](',\x20')+')');}}else _0x1fb0fb=''+JSON[_0x417cd6(0x5a3,0x56d,0x5ca,0x679)](_0x1b8674[_0x417cd6(0x6ad,0x510,0x5dd,0x50b)]);throw new Error(_0x1fb0fb);}if(!_0xdb6eca['ok']){if(_0x32b174[_0x3eb339(0x2de,0x236,0x2af,0x370)](_0x32b174[_0x417cd6(0x666,0x696,0x615,0x5ee)],_0x3eb339(0x14e,0x1c8,0x215,0x275))){let _0x4d5c0d=_0x229417;!_0x4d5c0d['endsWith'](_0x32b174[_0x417cd6(0x50d,0x63d,0x592,0x61a)])&&!_0x4d5c0d[_0x3eb339(0x20a,0x34d,0x2ce,0x313)](_0x32b174[_0x417cd6(0x49f,0x488,0x4fa,0x429)])&&(_0x4d5c0d=_0x32b174[_0x3eb339(0x20c,0x23d,0x28b,0x201)](_0x4d5c0d,_0x32b174[_0x417cd6(0x4fc,0x582,0x592,0x5c7)]));_0x4d5c0d=_0x4d5c0d['replace'](/\/v1\/$/,_0x3eb339(0x27b,0x294,0x300,0x2ed)),_0x48fc9a=_0x32b174['wtiSv'],_0x4cbb03=_0x32b174[_0x3eb339(0x2b9,0x271,0x304,0x255)](_0x41156a,_0x4cb99e[_0x3eb339(0x271,0x38b,0x30b,0x2c2)]);const _0x343fe9={};_0x343fe9[_0x417cd6(0x68e,0x5c4,0x61d,0x5ff)+_0x417cd6(0x4e2,0x494,0x483,0x455)+'ce']=_0x417cd6(0x5de,0x57b,0x573,0x4c7),_0x343fe9[_0x417cd6(0x4ed,0x4f2,0x55c,0x4d0)]=_0x4d5c0d,_0x343fe9[_0x417cd6(0x5c0,0x5fd,0x5aa,0x5bd)+_0x3eb339(0x1be,0x14e,0x1a6,0x1fb)+'rs']='Authorizat'+_0x417cd6(0x57b,0x4eb,0x578,0x57d)+_0x417cd6(0x574,0x478,0x4cf,0x532)+_0x1783fc+'\x22',_0x343fe9[_0x3eb339(0x374,0x3ab,0x2f0,0x2b1)]=_0x22ee27,_0x343fe9[_0x417cd6(0x56f,0x536,0x5ab,0x5a4)]=_0x3c93d1,_0x343fe9[_0x3eb339(0x2c3,0x2e7,0x25c,0x26e)+'e']=_0xdba9ae,_0x343fe9[_0x3eb339(0x2b7,0x1eb,0x1f0,0x1b6)]=_0x8c4a81,_0x343fe9[_0x417cd6(0x52f,0x5ab,0x5ad,0x656)]=_0x390706,_0x343fe9[_0x417cd6(0x4fc,0x4fe,0x4bf,0x40b)]=_0x29ab69,_0x400f96=_0x343fe9;}else throw new Error(_0x3eb339(0x253,0x1ff,0x1f5,0x249)+_0xdb6eca[_0x417cd6(0x5a3,0x5ba,0x56f,0x536)]+'\x20'+_0xdb6eca[_0x417cd6(0x497,0x4b4,0x4ac,0x48b)]);}const _0x501663=_0x1b8674['choices']?.[-0x1*0x89e+-0xb5d+0x13fb]?.[_0x417cd6(0x655,0x641,0x583,0x636)]?.[_0x3eb339(0x37f,0x2d6,0x2fd,0x36f)]||'';!_0x501663&&toastr['warning'](_0x32b174[_0x3eb339(0x1c3,0x2e5,0x214,0x1eb)]);_0xd61e74&&(_0x417cd6(0x4d0,0x55c,0x4e1,0x4b2)===_0x3eb339(0x2e9,0x36e,0x321,0x352)?_0x321491['push'](_0x85e585[_0x3eb339(0x264,0x212,0x227,0x167)]||''):_0x32b174[_0x3eb339(0x171,0x2a2,0x245,0x17b)](_0xd61e74,_0x501663));_0x32b174[_0x417cd6(0x59d,0x60b,0x5e3,0x5bb)](addLog,_0x3eb339(0x2ae,0x1d4,0x21f,0x1b5)+_0x3eb339(0x1c4,0x299,0x253,0x1cd)),addLog(_0x501663),_0x32b174[_0x417cd6(0x3d7,0x4f2,0x4a6,0x56a)](addLog,_0x3eb339(0x1a2,0x192,0x192,0x199)+'请求完成\x20====='),taskQueue['completeTa'+'sk'](_0x5ef475,!![]),llmTaskControllers[_0x417cd6(0x634,0x64d,0x5ba,0x548)](_0x5ef475);const _0x25e5c3={};_0x25e5c3[_0x417cd6(0x4d0,0x587,0x566,0x557)]=!![],_0x25e5c3[_0x417cd6(0x517,0x4b4,0x4be,0x575)]=_0x501663,_0x25e5c3['id']=_0x4f286c,eventSource[_0x417cd6(0x580,0x4c4,0x54b,0x543)](eventNames[_0x417cd6(0x5c5,0x56f,0x53a,0x51f)+_0x3eb339(0x25a,0x144,0x1d1,0x223)],_0x25e5c3);}}catch(_0xbcdf17){if(_0x32b174[_0x3eb339(0x1cd,0x149,0x1f8,0x25f)](_0xbcdf17[_0x417cd6(0x4e0,0x629,0x5ac,0x63d)],_0x32b174['CDPdQ'])){const _0x3b275e=_0x32b174[_0x3eb339(0x329,0x38a,0x2c7,0x389)][_0x3eb339(0x27b,0x1d7,0x21e,0x173)]('|');let _0x2a6f96=-0x1*-0xb51+-0x38+-0xb19;while(!![]){switch(_0x3b275e[_0x2a6f96++]){case'0':llmTaskControllers[_0x3eb339(0x338,0x207,0x2d0,0x2a0)](_0x5ef475);continue;case'1':_0x244069=!![];continue;case'2':return;case'3':console['log'](_0x32b174[_0x3eb339(0x2f2,0x280,0x2c9,0x295)]);continue;case'4':const _0x146fb6={};_0x146fb6[_0x417cd6(0x66b,0x4e3,0x5ac,0x5bc)]=_0x32b174[_0x3eb339(0x1e9,0x25c,0x297,0x324)],_0x146fb6['message']=_0x32b174[_0x3eb339(0x2dd,0x3b5,0x316,0x380)];const _0x1f2d24={};_0x1f2d24['success']=![],_0x1f2d24['result']=null,_0x1f2d24['id']=_0x4f286c,_0x1f2d24[_0x417cd6(0x52c,0x692,0x5dd,0x554)]=_0x146fb6,eventSource[_0x417cd6(0x592,0x58b,0x54b,0x519)](eventNames['LLM_EXECUT'+_0x3eb339(0x15e,0x15a,0x1d1,0x178)],_0x1f2d24);continue;case'5':taskQueue[_0x3eb339(0x26a,0x32f,0x2e7,0x30d)+'us'](_0x5ef475,TaskStatus[_0x3eb339(0x242,0x20b,0x240,0x30e)]);continue;}break;}}console[_0x3eb339(0x2f2,0x39f,0x2f3,0x3b5)](_0x3eb339(0x290,0x28e,0x2d6,0x347)+_0x3eb339(0x266,0x31c,0x263,0x333),_0xbcdf17);const _0x36f8b5=_0x3eb339(0x17b,0x300,0x238,0x25f)+_0xbcdf17[_0x3eb339(0x223,0x328,0x299,0x215)];_0xd61e74&&_0x32b174[_0x3eb339(0x20e,0x215,0x20a,0x157)](_0xd61e74,_0x36f8b5);toastr[_0x3eb339(0x27c,0x286,0x2f3,0x374)](_0xbcdf17[_0x3eb339(0x242,0x244,0x299,0x257)]),taskQueue['completeTa'+'sk'](_0x5ef475,![]),llmTaskControllers[_0x417cd6(0x66d,0x5ff,0x5ba,0x5fe)](_0x5ef475);const _0x58cc25={};_0x58cc25[_0x3eb339(0x294,0x307,0x27c,0x2c6)]=![],_0x58cc25[_0x417cd6(0x52e,0x4ab,0x4be,0x415)]=_0x36f8b5,_0x58cc25['id']=_0x4f286c,eventSource['emit'](eventNames[_0x3eb339(0x265,0x1be,0x250,0x1d9)+_0x417cd6(0x54e,0x520,0x4bb,0x4ea)],_0x58cc25);}finally{_0x32b174['ABrUJ']===_0x32b174[_0x3eb339(0x203,0x26d,0x29f,0x242)]?(_0x32b174[_0x3eb339(0xf7,0x22a,0x1af,0x1a3)](currentLLMRequestController,_0x357b24)&&(currentLLMRequestController=null),(!_0x244069||_0x32b174[_0x3eb339(0x307,0x2ed,0x2af,0x2e0)](currentLLMRequestController,null))&&_0x32b174[_0x417cd6(0x5bb,0x5bf,0x5cc,0x60a)](stopFabLoading)):_0x4eb293[_0x3eb339(0x264,0x250,0x216,0x1df)](_0x32b174[_0x417cd6(0x4f0,0x40c,0x493,0x4f5)],_0x54de7b[_0x3eb339(0x2fb,0x280,0x299,0x220)]);}}export function createGetPromptHandler(_0x27d61a,_0x292ce9){const _0x32068b={'uCcIu':_0x29c295(0x288,0x2bb,0x274,0x354),'opUaW':_0x1644c6(-0x140,-0x1c9,-0x151,-0x1f7),'ahgda':function(_0x3982fa,_0x5599a9){return _0x3982fa!==_0x5599a9;},'BnuWG':_0x1644c6(-0x297,-0x318,-0x32a,-0x31e),'JMuoG':_0x29c295(0x3c7,0x430,0x2ff,0x3e8),'PImIK':function(_0x440279,_0x47f379){return _0x440279(_0x47f379);}};function _0x1644c6(_0x9684d9,_0xe7e7ae,_0x84b457,_0x4bd35d){return _0x80e9ba(_0xe7e7ae,_0x9684d9- -0xff,_0x84b457-0x1d9,_0x4bd35d-0x1c0);}function _0x29c295(_0x55a45e,_0x1844a2,_0x4bcd68,_0x3ce86c){return _0x1b0576(_0x55a45e-0x1e6,_0x1844a2-0x47,_0x55a45e-0x388,_0x3ce86c);}return function(_0x29bdd9){const _0x46dfb8={};function _0xb1a86a(_0x3e77e8,_0x32deaa,_0x30698a,_0x404a33){return _0x1644c6(_0x32deaa-0x60a,_0x30698a,_0x30698a-0x8,_0x404a33-0x1bc);}_0x46dfb8[_0xb1a86a(0x498,0x3ea,0x4ac,0x437)]=_0x32068b[_0x2a6c14(-0x152,-0x1d5,-0x11a,-0x16f)];function _0x2a6c14(_0x1e239b,_0x352918,_0x42cb54,_0x4c665e){return _0x29c295(_0x1e239b- -0x421,_0x352918-0x75,_0x42cb54-0xc9,_0x352918);}_0x46dfb8[_0x2a6c14(-0xa4,-0x7a,-0x4b,-0xf5)]=_0x32068b[_0x2a6c14(-0x1a3,-0x122,-0xfb,-0x189)];const _0x6a7bfc=_0x46dfb8;if(_0x32068b['ahgda'](_0x32068b[_0xb1a86a(0x348,0x3a5,0x326,0x311)],_0x32068b[_0x2a6c14(-0x4f,-0x50,0x38,-0x102)])){const {id:_0x759347}=_0x29bdd9;if(!_0x759347)return;const _0x3840fd=REQUEST_TYPE_NAMES[_0x27d61a]||_0x27d61a;console[_0xb1a86a(0x408,0x42e,0x425,0x450)](_0x2a6c14(-0x3a,-0x110,-0x28,-0x68)+_0xb1a86a(0x50b,0x44f,0x47f,0x37c)+_0x3840fd+(_0x2a6c14(-0x121,-0x9b,-0x123,-0x1c7)+_0xb1a86a(0x55a,0x4cf,0x4b5,0x4f3))+_0x759347+')');const _0x110105=_0x32068b[_0xb1a86a(0x369,0x3a9,0x431,0x43f)](buildPromptForRequestType,_0x27d61a),_0x112345={};_0x112345[_0x2a6c14(-0x193,-0x257,-0x22f,-0x15e)]=_0x110105,_0x112345['id']=_0x759347,eventSource[_0x2a6c14(-0x108,-0x11c,-0x134,-0x1cc)](_0x292ce9,_0x112345);}else{const _0x42c6f2=_0x6a7bfc[_0xb1a86a(0x414,0x3ea,0x4ae,0x46d)]['split']('|');let _0x47eb5a=-0x1*-0x1489+0x1bb4+-0x303d;while(!![]){switch(_0x42c6f2[_0x47eb5a++]){case'0':return;case'1':_0x416ac7[_0xb1a86a(0x47f,0x48d,0x4e8,0x3c5)](_0x1326c1);continue;case'2':_0x40fbb7=!![];continue;case'3':_0x21df54[_0x2a6c14(-0x82,-0xb8,-0x96,0x1a)+'us'](_0x1f9698,_0x5d008c[_0xb1a86a(0x494,0x3fd,0x425,0x3e4)]);continue;case'4':const _0x1b65d6={};_0x1b65d6[_0x2a6c14(-0xa7,-0x10a,-0xbb,-0xb4)]=_0x6a7bfc[_0x2a6c14(-0xa4,-0x28,-0x13b,-0xf0)],_0x1b65d6[_0x2a6c14(-0xd0,-0x6d,0x0,-0x2c)]=_0xb1a86a(0x3f4,0x47c,0x4f0,0x47d)+_0xb1a86a(0x30e,0x361,0x390,0x361);const _0x39dd08={};_0x39dd08[_0xb1a86a(0x40c,0x439,0x463,0x4f1)]=![],_0x39dd08[_0xb1a86a(0x3dc,0x391,0x2cc,0x33d)]=null,_0x39dd08['id']=_0x250f6b,_0x39dd08[_0xb1a86a(0x4fd,0x4b0,0x440,0x56b)]=_0x1b65d6,_0x48ffb9[_0xb1a86a(0x40c,0x41e,0x467,0x430)](_0x1cada1,_0x39dd08);continue;}break;}}};}export function createExecuteHandler(_0x2888dc,_0x20868a,_0xe1e25e=null){const _0x308efe={'DbjLi':function(_0x5b749b){return _0x5b749b();},'ZhDSB':function(_0x54a5f5,_0x50a179,_0x2bec58,_0x4469e7,_0x3cbdf4){return _0x54a5f5(_0x50a179,_0x2bec58,_0x4469e7,_0x3cbdf4);}};return async function(_0x4f164e){const _0x29a8c4=_0xe1e25e?_0x308efe[_0x5c4b6c(0x444,0x3f5,0x46d,0x4b0)](_0xe1e25e):null;function _0x5c4b6c(_0x27b613,_0x4bfbd9,_0x474620,_0x5e3cea){return _0x20bc(_0x4bfbd9-0x18a,_0x27b613);}await _0x308efe['ZhDSB'](executeTypedLLMRequest,_0x4f164e,_0x2888dc,_0x20868a,_0x29a8c4);};}