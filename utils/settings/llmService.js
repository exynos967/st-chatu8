(function(_0x355ec4,_0x4100cb){const _0x16cf49=_0x355ec4();function _0x525392(_0x14332e,_0x1310ca,_0x5aeb22,_0x4c32fe){return _0x5644(_0x5aeb22-0x7d,_0x14332e);}function _0x4976da(_0xe9307d,_0x6e320d,_0x4215d9,_0x2f3b2e){return _0x5644(_0xe9307d-0x2d1,_0x6e320d);}while(!![]){try{const _0xf7a88e=parseInt(_0x4976da(0x394,0x315,0x3c3,0x301))/(-0xa*0x127+0x13a0*-0x1+0xb*0x2d5)*(parseInt(_0x525392(0x1fb,0x251,0x1c5,0x1d0))/(-0x8*0x42d+-0x7f*-0x22+0x108c))+parseInt(_0x525392(0x93,0xb3,0x11d,0xb7))/(0x9e0+-0x32f+0x5a*-0x13)+parseInt(_0x4976da(0x38b,0x41a,0x3f8,0x39a))/(0x1a27+0x30*0x50+-0x2923)*(parseInt(_0x525392(0xab,0x6b,0x126,0x12a))/(-0x79c*0x3+-0x1ada*0x1+-0x31b3*-0x1))+parseInt(_0x525392(0x1f6,0x2c6,0x25a,0x1a5))/(-0x1*0x21e9+0x14d*0xb+-0x4*-0x4e8)+parseInt(_0x4976da(0x398,0x3e3,0x319,0x3ae))/(0x2*-0x488+-0x1*0x1b25+0x243c)+parseInt(_0x525392(0x187,0x14a,0x17a,0x12b))/(0x1f*0x1a+-0x538+0x21a)*(-parseInt(_0x4976da(0x444,0x492,0x3b8,0x4a3))/(-0x259d+-0x17c9+0x3d6f))+parseInt(_0x525392(0xb0,0x8a,0x12f,0x114))/(0x2699+0x29b*-0x2+-0x2159)*(-parseInt(_0x525392(0x103,0x200,0x14f,0x1dc))/(-0x3*-0x5a1+-0x12a2+0x1ca));if(_0xf7a88e===_0x4100cb)break;else _0x16cf49['push'](_0x16cf49['shift']());}catch(_0x47f24d){_0x16cf49['push'](_0x16cf49['shift']());}}}(_0x21ba,-0x3*-0x4c73+-0x5e3f7*-0x1+0x183b4));function _0x58266d(_0x25aa49,_0x2d5015,_0x82164f,_0x34d32f){return _0x5644(_0x82164f-0x34f,_0x2d5015);}const _0x5da597=(function(){const _0x214af9={};function _0x20b1b7(_0x236f7f,_0x370615,_0x2f8927,_0x5dda92){return _0x5644(_0x236f7f- -0x23c,_0x2f8927);}_0x214af9[_0x20b1b7(-0xde,-0x28,-0xee,-0x18b)]=function(_0x5538b8,_0x55c03e){return _0x5538b8!==_0x55c03e;};const _0x362ba4=_0x214af9;let _0x1b6f87=!![];return function(_0x508032,_0xeaec67){function _0x1ab642(_0x779ce4,_0x3ccabc,_0x380622,_0x2e7624){return _0x20b1b7(_0x380622-0x5fd,_0x3ccabc-0x188,_0x2e7624,_0x2e7624-0x1c8);}function _0x3ce8ad(_0x2f7595,_0x2573eb,_0x4234d0,_0x4e7fe7){return _0x20b1b7(_0x2f7595-0x126,_0x2573eb-0x1e1,_0x4e7fe7,_0x4e7fe7-0x10e);}if(_0x362ba4[_0x1ab642(0x4c1,0x512,0x51f,0x46e)](_0x3ce8ad(0x2f,0xa3,0x1b,0x7b),_0x1ab642(0x40c,0x4d8,0x43a,0x4d3))){const _0x5be1ba=_0x1b6f87?function(){function _0x3e190f(_0x189e01,_0x9a9c21,_0x27c43f,_0x36948d){return _0x1ab642(_0x189e01-0x11b,_0x9a9c21-0xab,_0x36948d- -0x3e1,_0x9a9c21);}if(_0xeaec67){const _0x5c1a6f=_0xeaec67[_0x3e190f(0x10,0x22,0x63,0x75)](_0x508032,arguments);return _0xeaec67=null,_0x5c1a6f;}}:function(){};return _0x1b6f87=![],_0x5be1ba;}else _0x73bc03[_0x3ce8ad(0xac,0x115,0x1a,0x6f)]('流式解析警告\x20(最后'+'buffer):',_0x496ecc['message']);};}()),_0x1c7c86=_0x5da597(this,function(){const _0x21e40f={};_0x21e40f[_0x5963e5(-0x59,-0x26,-0xe6,-0x6f)]='(((.+)+)+)'+'+$';function _0x8e4384(_0x2ee65a,_0x232bcc,_0x343c96,_0x29f08e){return _0x5644(_0x232bcc- -0x21e,_0x343c96);}const _0x2a0738=_0x21e40f;function _0x5963e5(_0x3cfa23,_0x13abd5,_0x29fcf8,_0x12cc41){return _0x5644(_0x12cc41- -0x1e8,_0x13abd5);}return _0x1c7c86[_0x5963e5(-0x190,-0x1ca,-0x163,-0x12c)]()[_0x5963e5(-0xa3,-0x101,-0xbd,-0xad)](_0x2a0738[_0x5963e5(-0x78,-0x2b,-0xfd,-0x6f)])[_0x5963e5(-0x94,-0x132,-0x1ce,-0x12c)]()['constructo'+'r'](_0x1c7c86)['search'](_0x2a0738[_0x8e4384(-0x15e,-0xa5,-0x134,-0x4c)]);});_0x1c7c86();import{extension_settings}from'../../../../../extensions.js';function _0x581bc8(_0x3fa645,_0x309a5f,_0x567a03,_0x52dad6){return _0x5644(_0x309a5f- -0x1ff,_0x52dad6);}import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on']('st_chatu8_'+_0x581bc8(-0x23a,-0x18e,-0x108,-0x132)+_0x58266d(0x4a4,0x4d8,0x467,0x3f6),({taskId:_0x72c2f0})=>{const _0x47bde0={};_0x47bde0[_0x281024(0x4a3,0x506,0x543,0x530)]=function(_0x19c6ad,_0xa0a82e){return _0x19c6ad!==_0xa0a82e;},_0x47bde0['TgoNT']=_0x281024(0x56f,0x574,0x5c3,0x601),_0x47bde0['kYeRr']=_0x226409(-0xbb,-0x48,0x31,-0x68);function _0x226409(_0x3d39e2,_0x11433b,_0x4991e1,_0x31682a){return _0x58266d(_0x3d39e2-0x1d3,_0x4991e1,_0x31682a- -0x4ef,_0x31682a-0x65);}const _0x2230aa=_0x47bde0;function _0x281024(_0x398ba6,_0x230cf7,_0x1fdb8e,_0xfa90e9){return _0x581bc8(_0x398ba6-0x1e,_0x230cf7-0x5ab,_0x1fdb8e-0x18b,_0x1fdb8e);}const _0x59096a=llmTaskControllers['get'](_0x72c2f0);_0x59096a&&(_0x2230aa[_0x281024(0x45d,0x506,0x565,0x453)](_0x2230aa[_0x281024(0x555,0x4c7,0x465,0x412)],_0x2230aa[_0x226409(-0xa7,-0x2,-0xd5,-0x60)])?(_0x59096a['abort'](),llmTaskControllers[_0x226409(-0x18f,-0x123,-0x114,-0xf1)](_0x72c2f0),console[_0x226409(-0xc1,-0x1ab,-0x13b,-0xf6)]('[LLM]\x20任务已取'+_0x281024(0x53d,0x57b,0x57f,0x524)+_0x72c2f0)):(_0x405563[_0x226409(-0x15a,-0x165,-0xa8,-0xd3)](),_0x5e2a5b[_0x226409(-0x3a,-0x1a3,-0x157,-0xf1)](_0x243752),_0x3d83c4[_0x226409(-0x111,-0x4a,-0xb8,-0xf6)](_0x226409(-0xfe,-0xcc,-0xca,-0x4b)+_0x281024(0x568,0x57b,0x5f3,0x595)+_0x347464)));});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x79e1a8){currentLLMRequestController=_0x79e1a8;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){const _0x3351bf={};function _0x5c8dba(_0x23fe73,_0x45cb69,_0x17c2ba,_0x7a6bf6){return _0x58266d(_0x23fe73-0x1cb,_0x17c2ba,_0x45cb69- -0x65d,_0x7a6bf6-0x99);}_0x3351bf[_0x5c1404(-0x22e,-0x263,-0x1a9,-0x248)]=_0x5c8dba(-0x206,-0x1ed,-0x18e,-0x20c);function _0x5c1404(_0x43c892,_0x4925ae,_0x5b99f6,_0x54d6ff){return _0x58266d(_0x43c892-0x13b,_0x4925ae,_0x54d6ff- -0x67e,_0x54d6ff-0x1d7);}const _0x97a7ce=_0x3351bf;currentLLMRequestController&&(currentLLMRequestController[_0x5c8dba(-0x29d,-0x241,-0x2f0,-0x1bd)](),toastr[_0x5c8dba(-0x190,-0x21f,-0x249,-0x1f5)](_0x97a7ce[_0x5c1404(-0x1ce,-0x2a3,-0x205,-0x248)]));}function _0x5644(_0x2efa12,_0x47dfa0){_0x2efa12=_0x2efa12-(-0xf*-0x251+-0x3*0x36d+0x2*-0xc05);const _0x37efed=_0x21ba();let _0x11fbc3=_0x37efed[_0x2efa12];if(_0x5644['ADtmqo']===undefined){var _0x570e50=function(_0x3fa931){const _0x30bb6e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2b52e1='',_0x19289e='',_0x998615=_0x2b52e1+_0x570e50;for(let _0x901fef=-0x21c+0xb*0x337+-0x2141,_0x46e10c,_0x427c65,_0x19b01a=0x3b5*-0x9+-0x26ba+-0xe6b*-0x5;_0x427c65=_0x3fa931['charAt'](_0x19b01a++);~_0x427c65&&(_0x46e10c=_0x901fef%(-0x1*0x1b8c+-0x21cb+0x71*0x8b)?_0x46e10c*(0x2f*-0xb5+-0x778*0x1+0xb*0x3b9)+_0x427c65:_0x427c65,_0x901fef++%(0x922*-0x1+-0xcec*0x2+0x22fe))?_0x2b52e1+=_0x998615['charCodeAt'](_0x19b01a+(-0x18a*-0x13+-0x25df+0x1*0x8ab))-(0x2*0xcab+0x1*-0x169a+-0x2b2)!==0x1524+0x410*-0x5+-0x2*0x6a?String['fromCharCode'](-0x1613*0x1+0x1*0x1ca3+0x4b*-0x13&_0x46e10c>>(-(-0xbac*0x1+-0x4e3+-0x1*-0x1091)*_0x901fef&0xda3+-0x2614*-0x1+0x1*-0x33b1)):_0x901fef:0x2135+0x283*-0x7+-0x2*0x7d0){_0x427c65=_0x30bb6e['indexOf'](_0x427c65);}for(let _0x4b8fbf=0x1*0x1aff+-0x6df+-0x1420,_0x2b69f2=_0x2b52e1['length'];_0x4b8fbf<_0x2b69f2;_0x4b8fbf++){_0x19289e+='%'+('00'+_0x2b52e1['charCodeAt'](_0x4b8fbf)['toString'](0x1*-0x4aa+-0xe27+0x12e1))['slice'](-(-0x1*-0x1afb+-0x2*-0xd19+-0x352b));}return decodeURIComponent(_0x19289e);};_0x5644['tiIujt']=_0x570e50,_0x5644['vvnwdB']={},_0x5644['ADtmqo']=!![];}const _0x2897e1=_0x37efed[-0x7c*0x3+-0x9d1+0xb45*0x1],_0x14795e=_0x2efa12+_0x2897e1,_0x32c593=_0x5644['vvnwdB'][_0x14795e];if(!_0x32c593){const _0x5d47d3=function(_0x543c98){this['ZHBwjh']=_0x543c98,this['xkxpKX']=[0x1*0x1d0e+-0x2605+0x8f8,-0x1768+0x194d+-0x1e5,0x1d*0xad+-0xb5d*0x1+-0x83c],this['tqBPmN']=function(){return'newState';},this['naGsXf']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ihwBWP']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5d47d3['prototype']['KsXskE']=function(){const _0x4a1204=new RegExp(this['naGsXf']+this['ihwBWP']),_0x2deeea=_0x4a1204['test'](this['tqBPmN']['toString']())?--this['xkxpKX'][0x1c22+-0x13*0x43+-0xe4*0x1a]:--this['xkxpKX'][-0xdbe*-0x2+0xf13+-0x5*0x883];return this['XNePCD'](_0x2deeea);},_0x5d47d3['prototype']['XNePCD']=function(_0x58f9ae){if(!Boolean(~_0x58f9ae))return _0x58f9ae;return this['wTUrnQ'](this['ZHBwjh']);},_0x5d47d3['prototype']['wTUrnQ']=function(_0x1571d5){for(let _0x3c0bc4=0x137*0x13+0x6e7+-0x1dfc,_0x51738a=this['xkxpKX']['length'];_0x3c0bc4<_0x51738a;_0x3c0bc4++){this['xkxpKX']['push'](Math['round'](Math['random']())),_0x51738a=this['xkxpKX']['length'];}return _0x1571d5(this['xkxpKX'][-0x135*0x9+-0x1*0xc77+0x1*0x1754]);},new _0x5d47d3(_0x5644)['KsXskE'](),_0x11fbc3=_0x5644['tiIujt'](_0x11fbc3),_0x5644['vvnwdB'][_0x14795e]=_0x11fbc3;}else _0x11fbc3=_0x32c593;return _0x11fbc3;}export function formatPromptForDisplay(_0x5069ce){const _0x48ded1={'JUYfX':_0x2bcc0f(0x133,0xde,0x157,0x1c9)+_0x301f2c(0x17f,0x154,0x18b,0x1ce)+_0x2bcc0f(0x1d2,0x146,0x1a8,0x251)+_0x2bcc0f(0x160,0x1f4,0x1d3,0x17b)+_0x2bcc0f(0x1c3,0x14f,0x1d2,0x1c0),'hVeBR':function(_0x59658a,_0x29a2d3){return _0x59658a(_0x29a2d3);},'hiHec':function(_0x4c77fc,_0xe83b7a){return _0x4c77fc===_0xe83b7a;},'xaBTZ':_0x2bcc0f(0x1e4,0x149,0x142,0x166),'Wjrmk':_0x2bcc0f(0x272,0x278,0x223,0x18d),'PBooJ':'RaAsa','LSjlt':'data:','RdhiV':_0x301f2c(0x10,0x59,-0x1,0xb7),'ZXHmC':_0x2bcc0f(0x1be,0x145,0x177,0x227),'Xwunr':function(_0x364fa6,_0x5aede7){return _0x364fa6/_0x5aede7;},'lodif':_0x2bcc0f(0x122,0xed,0x126,0xc2),'HTUNP':'unknown','Pdduw':_0x2bcc0f(0xf6,0xf4,0x18b,0x246),'takPl':_0x2bcc0f(0x130,0x6f,0xe8,0x115),'YRcRF':_0x2bcc0f(0x1af,0x14e,0x15b,0x216),'GVGJa':function(_0x49f5cc,_0x53fbb9){return _0x49f5cc===_0x53fbb9;},'hcMsS':function(_0x3cd6e6,_0x49984b){return _0x3cd6e6===_0x49984b;},'wFabs':_0x2bcc0f(0x24f,0x26a,0x1fb,0x14c),'KvQyV':function(_0x4f0693,_0x33796a){return _0x4f0693(_0x33796a);}};if(_0x48ded1[_0x2bcc0f(0x9e,0xf,0xc1,0x8)](typeof _0x5069ce,_0x48ded1[_0x301f2c(0x6c,0xf9,0x3f,0x73)]))return _0x5069ce;if(Array[_0x301f2c(0xe9,0x11b,0x177,0x14f)](_0x5069ce)){const _0xf7412c=[];return _0x5069ce[_0x301f2c(0x15a,0x12f,0x109,0x8f)]((_0x21005b,_0x10fdcc)=>{const _0x4ba7de={'jleaL':_0x48ded1[_0x587b55(0x2e0,0x261,0x356,0x2e0)],'LclOj':function(_0x3dc153,_0x2d8139){function _0x35dd85(_0x294c00,_0x23fc35,_0x222c16,_0x42a8fa){return _0x587b55(_0x23fc35- -0x1e1,_0x23fc35-0x187,_0x222c16,_0x42a8fa-0x77);}return _0x48ded1[_0x35dd85(0xfb,0x151,0xce,0x11d)](_0x3dc153,_0x2d8139);},'Gsqkv':function(_0x5f3bc1,_0x372251){function _0x52d32a(_0x5ef505,_0x43d9c8,_0x2c95b4,_0x5dc27f){return _0x587b55(_0x2c95b4-0x1cd,_0x43d9c8-0x12a,_0x5ef505,_0x5dc27f-0x9);}return _0x48ded1[_0x52d32a(0x4cc,0x4d4,0x503,0x4e7)](_0x5f3bc1,_0x372251);},'AGXbr':_0x587b55(0x395,0x347,0x43e,0x32b),'awCSk':_0x48ded1[_0x287300(0x3c0,0x3c4,0x3e6,0x405)],'usKqV':_0x48ded1['Wjrmk'],'hmUwl':_0x48ded1[_0x287300(0x24f,0x307,0x2e1,0x34d)],'NPjui':_0x48ded1[_0x287300(0x472,0x3ff,0x4b6,0x435)],'xyFzM':_0x48ded1[_0x587b55(0x271,0x2f4,0x2fb,0x305)],'zFWdB':_0x48ded1[_0x587b55(0x36e,0x2d3,0x2f3,0x385)],'hGtWA':function(_0x4385a8,_0x20f32){return _0x48ded1['Xwunr'](_0x4385a8,_0x20f32);},'QRZtn':function(_0x4941f7,_0x7f1877){return _0x4941f7===_0x7f1877;},'pdeFx':_0x48ded1[_0x587b55(0x392,0x35c,0x34c,0x301)]},_0x422f60=_0x21005b['role']||_0x48ded1[_0x587b55(0x321,0x27c,0x34b,0x2eb)],_0xf7bff=_0x48ded1['hVeBR'](getRoleLabel,_0x422f60);_0xf7412c['push'](''+'═'[_0x587b55(0x39a,0x2f9,0x391,0x384)](-0x1*0x146b+0x2048+-0x1*0xbab));function _0x287300(_0x243459,_0x16ddcd,_0x1c6aa3,_0x3b1b47){return _0x301f2c(_0x243459-0x1e7,_0x16ddcd-0x2e2,_0x1c6aa3-0xb2,_0x3b1b47);}function _0x587b55(_0x3c1979,_0x4115f7,_0xbb003c,_0x2d1ff1){return _0x2bcc0f(_0x3c1979-0x8e,_0x4115f7-0x5,_0x3c1979-0x19a,_0xbb003c);}_0xf7412c[_0x287300(0x359,0x3e4,0x329,0x46b)]('【'+_0xf7bff+'】'),_0xf7412c[_0x587b55(0x346,0x3c2,0x35b,0x3c0)](''+'─'[_0x287300(0x464,0x438,0x4c9,0x387)](0x4d6*-0x4+-0x22ab+0x1*0x3635));const _0xe33e29=_0x21005b[_0x287300(0x3ee,0x36f,0x3f0,0x36b)];if(_0x48ded1[_0x287300(0x37d,0x3d4,0x41c,0x37c)](typeof _0xe33e29,_0x48ded1[_0x287300(0x33b,0x3db,0x44e,0x3b0)]))_0xf7412c['push'](_0xe33e29);else Array[_0x587b55(0x35f,0x37a,0x350,0x350)](_0xe33e29)&&(_0x48ded1['takPl']!==_0x48ded1[_0x587b55(0x383,0x421,0x300,0x344)]?_0xe33e29[_0x587b55(0x373,0x35f,0x302,0x3f9)](_0x1d21f9=>{function _0x4b2e60(_0x5e85cf,_0x1f657f,_0x5cb975,_0x1362c4){return _0x587b55(_0x1362c4-0x119,_0x1f657f-0x159,_0x5cb975,_0x1362c4-0x17e);}function _0x3bd5b1(_0x48eec4,_0x4e7edf,_0x4e6181,_0x562650){return _0x587b55(_0x562650- -0x2cc,_0x4e7edf-0x23,_0x48eec4,_0x562650-0x187);}const _0x2c6f0f={'PGfLG':function(_0x598e48,_0x52e388){function _0x21bad7(_0x55ee1b,_0x16599e,_0xba020b,_0x445f30){return _0x5644(_0xba020b-0x2cd,_0x55ee1b);}return _0x4ba7de[_0x21bad7(0x3cc,0x3ff,0x379,0x326)](_0x598e48,_0x52e388);},'cKcRt':_0x4ba7de[_0x3bd5b1(-0xb5,-0x59,-0xb7,-0x12)]};if(_0x4ba7de[_0x3bd5b1(-0xc4,0x56,0x16,-0x39)](_0x1d21f9['type'],_0x4ba7de[_0x3bd5b1(0x14,-0x51,-0x52,0x4)]))_0xf7412c[_0x4b2e60(0x4c7,0x517,0x3de,0x45f)](_0x1d21f9[_0x3bd5b1(-0x6f,0x6e,0x6b,0x10)]||'');else{if(_0x4ba7de[_0x4b2e60(0x36c,0x316,0x3fa,0x3ac)](_0x1d21f9[_0x3bd5b1(0x36,-0xcd,-0xf9,-0x70)],_0x4ba7de[_0x4b2e60(0x3c1,0x33c,0x3cc,0x3a6)])){if(_0x3bd5b1(0x124,-0x4,0x11d,0x99)!==_0x4ba7de[_0x3bd5b1(-0x50,0x26,0xc4,0x40)])_0x1664f3[_0x3bd5b1(0xbb,0xcb,0xbb,0x2f)](_0x4ba7de[_0x3bd5b1(0xb6,0x42,0xf2,0xed)]);else{const _0x78482e=_0x1d21f9[_0x4b2e60(0x57f,0x47b,0x535,0x4d6)]?.[_0x3bd5b1(-0xf7,-0x4c,-0x5b,-0x73)]||'';if(_0x78482e[_0x3bd5b1(-0xb2,-0x14,-0x78,-0x52)](_0x4ba7de['NPjui'])){if(_0x4ba7de[_0x4b2e60(0x40f,0x3c5,0x318,0x3a3)]===_0x4ba7de[_0x3bd5b1(0xda,0xa9,0x127,0x6e)]){let _0xe1a334;if(_0x2c6f0f['PGfLG'](typeof _0x4b01f9['error'],_0x2c6f0f[_0x4b2e60(0x501,0x45b,0x46c,0x452)])&&_0x50f39a[_0x3bd5b1(0x131,0x172,0x120,0xdf)][_0x4b2e60(0x4a6,0x4a2,0x474,0x42c)]){_0xe1a334=''+_0xbed1bf[_0x3bd5b1(0xd7,0x33,0x13b,0xdf)][_0x3bd5b1(-0x44,-0x3d,-0x60,0x47)];const _0x382bd7=[];if(_0x2ec2b5[_0x4b2e60(0x441,0x453,0x481,0x4c4)]['type'])_0x382bd7[_0x4b2e60(0x466,0x3cb,0x410,0x45f)]('类型:\x20'+_0x20ce88[_0x4b2e60(0x429,0x47e,0x43c,0x4c4)][_0x4b2e60(0x3c8,0x3c8,0x2eb,0x375)]);if(_0x1bf463[_0x4b2e60(0x458,0x469,0x547,0x4c4)][_0x3bd5b1(0x9d,0x4b,0xe1,0x51)])_0x382bd7[_0x4b2e60(0x4ef,0x4b7,0x479,0x45f)]('代码:\x20'+_0x2adf3c[_0x3bd5b1(0x170,0x59,0x6d,0xdf)]['code']);_0x382bd7[_0x4b2e60(0x4a3,0x471,0x3b3,0x3f7)]>0x24fb+0x935+0x4*-0xb8c&&(_0xe1a334+='\x20('+_0x382bd7['join'](',\x20')+')');}else _0xe1a334=''+_0x584aba[_0x3bd5b1(-0x25,-0x23,-0xd6,-0x56)](_0xc01f6e[_0x3bd5b1(0x12f,0x144,0x8e,0xdf)]);throw new _0x571845(_0xe1a334);}else{const _0x39d674=_0x78482e[_0x3bd5b1(0x94,0x2c,-0x7c,0x2d)](/^data:([^;]+);/),_0x224677=_0x39d674?_0x39d674[-0x1a5e*-0x1+-0x2629+0x5*0x25c]:'unknown',_0x3daf86=_0x78482e['split'](',')[-0x17*0x10d+0x8a5*0x1+0xf87]||'',_0x3fed9a=Math['round'](_0x4ba7de['hGtWA'](_0x3daf86[_0x3bd5b1(0xa7,-0x71,0x87,0x12)]*(0x1f43+0x17a5+0x12b*-0x2f),0x24a7+-0x95*0x17+0x1f*-0xc0)/(-0x252f+0x1*-0xba5+0x34d4));_0xf7412c[_0x4b2e60(0x3b5,0x3b6,0x421,0x45f)](_0x4b2e60(0x54e,0x527,0x438,0x4a3)+':\x20'+_0x224677+_0x3bd5b1(0x6d,0x16d,0x117,0xc3)+_0x3fed9a+'KB]');}}else _0x4ba7de[_0x4b2e60(0x3de,0x503,0x4f2,0x45c)](_0x4ba7de['pdeFx'],_0x3bd5b1(0x28,-0x9f,-0x17,-0xc))?_0xf7412c[_0x3bd5b1(-0x1b,0x125,0x3f,0x7a)](_0x4b2e60(0x3f2,0x41a,0x4e8,0x47c)+_0x78482e+']'):_0x4ba7de[_0x4b2e60(0x3b0,0x3e6,0x447,0x399)](_0x834e0b,_0x209831);}}}}):_0x49d429+='\x20('+_0x20c029['join'](',\x20')+')');_0xf7412c['push']('');}),_0xf7412c[_0x301f2c(0xd4,0x2f,-0x7f,0x4f)]('\x0a');}if(_0x48ded1[_0x301f2c(0xaa,0x14d,0xbf,0x1f6)](typeof _0x5069ce,_0x48ded1[_0x2bcc0f(0x12f,0x182,0x15c,0xfc)])&&_0x5069ce!==null)return JSON[_0x2bcc0f(0xfd,0x115,0xdc,0x62)](_0x5069ce,null,-0x1796+-0x5*0x7bf+-0x1*-0x3e53);function _0x301f2c(_0x2f47e3,_0x15e6a3,_0x2a1abe,_0xe6a03a){return _0x581bc8(_0x2f47e3-0x25,_0x15e6a3-0x1a2,_0x2a1abe-0x133,_0xe6a03a);}function _0x2bcc0f(_0x1f96c9,_0x6d8909,_0x3c023a,_0x80495b){return _0x58266d(_0x1f96c9-0x16a,_0x80495b,_0x3c023a- -0x302,_0x80495b-0x153);}return _0x48ded1['KvQyV'](String,_0x5069ce);}export function getRoleLabel(_0x1ea6e0){const _0x1a670f={};_0x1a670f[_0x30dbac(-0x2e5,-0x29c,-0x235,-0x2d8)]='系统提示词';const _0x5f0bf9=_0x1a670f,_0x4d8299={};_0x4d8299[_0x30dbac(-0x221,-0x165,-0x190,-0x16d)]=_0x5f0bf9[_0x30dbac(-0x229,-0x321,-0x2dc,-0x2d8)];function _0x30dbac(_0x40d342,_0xe52dc7,_0x118122,_0x55c0f0){return _0x581bc8(_0x40d342-0x39,_0x55c0f0- -0x150,_0x118122-0x1e,_0xe52dc7);}_0x4d8299[_0x30dbac(-0x265,-0x178,-0x264,-0x1c0)]='用户';function _0x318bd7(_0xc5fb23,_0x190530,_0x444f22,_0x2d2330){return _0x581bc8(_0xc5fb23-0x1c7,_0x444f22-0x47c,_0x444f22-0x1a4,_0x190530);}_0x4d8299['assistant']='AI助手',_0x4d8299['function']=_0x318bd7(0x3f1,0x36b,0x35b,0x2ca),_0x4d8299[_0x30dbac(-0x1af,-0x2c1,-0x294,-0x239)]='工具';const _0x1a335e=_0x4d8299;return _0x1a335e[_0x1ea6e0]||_0x1ea6e0;}function _0x21ba(){const _0x103b4d=['mtLlzKHXu3i','z2ThDw4','5PAT44cbBwf4x3rVA2u','zw5HyMXLza','ntu1mZG2m0POzeHWrW','BMrZl2nOyxqTyW','wK51wvy','oIbmte0G6k+35Rgc6l+u5zUE','Dezdtxe','q1rRuvy','ywjVCNq','Bw9KzwW','rwDNrfq','5Rwb5BYp6kEJ5P6q6k2M5zgkoG','yNLWyxnZx3bYBW','mtfbvKr3C3G','quDyyNi','wMHHrvi','A2v5CW','svPUu0i','vMTms0m','zw50CMLLCW','ugDSALq','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','Cg9W','BfjPuMm','C3rFy29UDgv4Da','5yE95PwW6lcd55sO','EvvKBxy','BNDlD3q','vunjtwe','teXnigv4zwn1Da','wvDABwm','zhPODwu','qvbjifvstcWGqq','BgXTx3bYB2zPBa','werZuxq','DenWwu4','yxDdu2S','y29UDgvUDa','uLvotKLorW','DLPRv0G','BenVsMS','uhDjrfu','Aw5MBW','EgT2qxa','vxroww8','CM9Szq','zxiG','D2flCwS','Dgv4Da','y2HHCL9KAxnWBa','BgvUz3rO','6kEs6iMYl+ACJEIJHEIUVUIUOq','sLvzzLG','yNvMzMvYktO','Bv9WCM9MAwXL','CxL2Dgy','nJKXnJCYz0XHEw9u','A3PRuum','l3yX','y2HVAwnLCW','l2nOyxqVy29TCa','C3rYzwfT','ueKGs2v5lcdMIjyG','DhLmDM8','DhjPz2DLCLDVCG','57g75z6loIa','EM5Lsw4','yxbPx2TLEq','DgvZDf9JB250zq','teXnioIVT+AXGUI/LowBNUs4UUEPUG','ywDJAg0','CLbjqvO','rdOG','t2TkDNq','D0zHyNm','AuXkqxK','v09hCw8','Bwf0y2G','pt09pt0GteXnia','D2fYBMLUzW','ugP1Dge','Dg9VBa','sMH4v2O','x3rHC2S','C2LNBMfS','ue9tva','vgDVtLq','CfvOBwq','EhrFChjVzMLSzq','C3vJy2vZCW','6k+35Rgc6zsz6k+VoIa','yMfcvfG','teXnioIVT+AXGUw3SUs4REATOUoaGG','CgfYC2u','q0foq0vmteve','CgDxyuu','Ag1vD2W','ksa9pt09pq','B21WBgv0Aw9UCW','C2jWy0C','rLnZAw8','tu5jDhy','u0XJu0K','BwvZC2fNzq','5O+q56s66k+n6i635y+w6k+35RgcicHj','zgLKEgW','svjHDM8','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','q29UDgvUDc1uEq','twHMDLG','AhrruwC','zgvSDge','yxbWBgLJyxrPBW','y29Kzq','rufXvvG','suLWuwe','C3rHDhvZ','sfrvtLa','C2vHCMnO','DhjPz2DLCG','rv9srvnqt05trq','C3rYAw5N','EgfcvfO','A1LLuNi','yM9KEq','qwnRB3i','teXnoIdLPjBPG6JOR7FMSyi','6kEs6iMYl+ACJEIJHEwXLEEKUG','q1D2Cgq','zMLNCW','iefqssblzxKSia','mti0nJzsqMTLD1y','B2zPBgu','cI0Tls0TieXmtq','AfzLqLi','DgvZDe1Vzgu','zgvJB2rL','Aw9UoIaIqMvHCG','AgLizwm','ChjVBxb0','oIbbueKGvvjmla','y0TJuNq','EKzxzei','yLvRBMS','w0Xmtv0G5lU75yQH5BEY5y+w','ugrKDxC','y3vZDg9Tx2LUyW','CMjPtMS','6kEs6iMYl+ACJEIJHEs/RUAuUq','EKPvENi','Bwf4x3rVA2vUCW','uvjADg4','BwvZC2fNzxm','tgvstfK','ChvZAa','uNj2v3m','y3fLzvi','teXnoIa','5y+r6ycb55QeifbYB21WDa','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','CMvZDwX0','ioAuTUwiSa','Df90ExbLx2nVBG','C1DbuLK','C3rHDhvZvgv4Da','tefZuwO','A1jhu1O','ANvnqvq','rNjHq1C','y2HHDf9JB21WBa','uMzmD3m','D3rVvfO','uMvXDwvZDcbHyG','ALvtA2e','odfgEMXXAxy','CuLoz2e','Eu1eqM0','qvbjioI/NUAoPEMxRUMIMooaGG','veHlruW','AxnbCNjHEq','DgTYuwm','tfnQBhq','BI9QC29U','8j+tTYbB5zU+54Mh6zo+5O6LoIa','5OIwie1VzgvSioACQUMfJq','uMfbC2e','CMvWBgfJzq','AM5iwLO','zvjKwMK','CvHmt04','tfHRyNm','u0DIBK0','ssdOV57MJQxPL67POPJJGii','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','wLHiBum','EwzsCeS','y3vZDg9T','AhvUrwu','B1fNBui','zM9YrwfJAa','BhvKzv9OzwfKzq','qNfPDxC','DxnLCG','DhjPBq','tLzzyKO','r2Thq1y','C29YCui','DhjPz2DLCK1Vza','vNDnBeO','rK94EMu','AKL6BK0','ufLYteS','t2n0rLe','ANLsvxC','Dg9Rzw4','wvjJuKy','yxnZAxn0yw50','vNrlDxK','ze9XCe8','z2v0uMvHzgvY','u1jjEhq','EKnsD0W','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','yKPWAMu','CMDwD3K','sgfXuva','qxHotxq','lcdNUQyG','6BUy6k6K6k+35Rgc5BYa5AElid09pq','AgnnC1m','Bg9KAwy','y2HHCL9KzxnPzW','5lUJ56cboIa','B2jQzwn0','qMvHCMvYia','BNmG6k6+572U6l+h5Bcp44cb5OIwia','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','BKz1sxm','CMvWzwf0','sg1euwO','ievYCM9YoG','sLjrDvq','DLbkyLG','C0rzvuK','rLnir1e','BLPwyMO','t1juqu8','BLDkBvy','DhjHBNnSyxrPBW','y3vYCMvUDf90zq','DgfNx21VzgLMEq','zgf0ytOG','zvDKwNC','D2fYBG','rNr5tNy','zxjYB3i','DLfQvLe','CvzSzNC','zgf0ytOGw0rptG','vhDKrK8','BNz2DLK','AgLZDg9YEq','uffdBhm','BgXTx3jLCxvLCW','r09qzKW','l3yXlW','5RAioIa','B3j0zwq','C3bSAxq','AMXLyuW','CvntqvC','uMzLrNC','zw1PDa','Aw1Hz2vFDxjS','CMvHza','yxbPx3vYBa','EwHxChC','6k+35Rgc5AsX6lsLoIa','sfrXAKm','zxrPB25FC291CG','ndC0otCXngPMwLrhta','y2nkC0q','zeX2suu','Dg9Wx3a','yLjYA0G','C3LZDgvT','rMjXrKm','Egrdrfu','Aw5JBhvKzxm','l2fWAs9IywnRzq','iowBNUwKJsaTls0Tlq','y2fUy2vSx2XSBq','DxjS','C3qTy2HHDhu4oG','r1zhsMe','DhLWzq','tw9KzwWG5PYQ6ywn572U44cc','zgXVrgC','teXniev4zwn1Da','CejrB0G','teXn','DxbKyxrLu3rHDa','C2XPy2u','ywrKvgfZAW','DxrMltG','5lUJ56cboG','y3j6q1u','qxv0Ag9YAxPHDa','uejVB0O','zw5KC1DPDgG','qvztzg4','D1rnC1K','tffUCgq','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','Afn2zhu','zsbYzxf1zxn0ia','uMrOAvy','suXnwLa','AM9PBG','tuDtAvG','5AEl5PAW6k+35Rgc44cc','C3rYAw5NAwz5','56In5yczlI4U','EvrVy1K','y3vYCMvUDf9SBa','C3rHCNrZv2L0Aa','sNL1uLq','yxbWBhK','CMzbywO','ywjVCNrLzc4','y29UDgv4Df9WCG','tgnSt2O','yxrSv0W','s1HMvxK','DgvTCgvYyxr1CG','y2HHCL9TB2rPzG','ANnVBG','y29TCgXLDgvuyq','mJaXota5DfPiwKvK','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','C1boBxy','EhLgEK0','u2PmswC','CLbOzMe','DxnlCvy','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','teXnx0vyrunvva','mtmWv2zWDffn','Bg9N','l2DLBMvYyxrL','r3nXA3y','5Q2J5PAh5zU+54Mh55sF5OIq','BMfTzq','zgvSzxrL','surXyNa','yuDruvK','mtiZnJC2mtbRt2Htr1y','6k+35Rgc5A6m5OIqid09pt09','6k+35RgcieLeoIa','Aw9U','vNbLtwu','se9uuMK','r0PpAxO','A1PQyum','mtiXmJuYv1fwA2Tt','s2LWvLG','Dg9tDhjPBMC','DxLKzvy','vwLxshi','6k+35Rgc5BYa5AElicG','ANrOqxu','x3bYB2zPBgu','ruPst1i'];_0x21ba=function(){return _0x103b4d;};return _0x21ba();}export function getCurrentLLMProfile(){function _0x4a9a62(_0x3f6007,_0x5d62a8,_0x1cdef3,_0x39d48f){return _0x58266d(_0x3f6007-0x1ab,_0x39d48f,_0x3f6007- -0x51b,_0x39d48f-0x179);}function _0x52bf9b(_0xb7d137,_0x51dc0b,_0x195c4c,_0x593922){return _0x58266d(_0xb7d137-0x89,_0x593922,_0xb7d137- -0x5f0,_0x593922-0x25);}const _0x1cbb30=extension_settings[extensionName][_0x52bf9b(-0x1bb,-0x1a9,-0x195,-0x101)+'es']||{},_0x5c587d=extension_settings[extensionName][_0x4a9a62(-0x13a,-0x194,-0xcf,-0x149)+_0x52bf9b(-0x1a6,-0x1d8,-0x246,-0x105)];return _0x1cbb30[_0x5c587d]||_0x1cbb30[Object[_0x4a9a62(-0xf7,-0x15a,-0xe3,-0xe1)](_0x1cbb30)[-0x3f7+-0xc*-0xc1+-0x515]]||{};}export function getCurrentTestContext(){function _0x162e34(_0x3762d3,_0x3fc301,_0x488559,_0x454ee8){return _0x581bc8(_0x3762d3-0x169,_0x3fc301-0x1ff,_0x488559-0xb8,_0x3762d3);}function _0x578d6b(_0x228db9,_0x2e98a8,_0x2894d8,_0x4cf97c){return _0x581bc8(_0x228db9-0x1a,_0x2894d8-0x324,_0x2894d8-0x172,_0x228db9);}const _0x132c3b=extension_settings[extensionName][_0x578d6b(0x23d,0x280,0x22e,0x256)+_0x162e34(0x1d1,0x11d,0xec,0x198)+'s']||{},_0x370ff4=extension_settings[extensionName][_0x162e34(0x196,0x1be,0x1d7,0x187)+_0x162e34(0xe1,0xdd,0x111,0xbc)+'_profile'];return _0x132c3b[_0x370ff4]||_0x132c3b[Object[_0x162e34(0x62,0xd5,0x127,0x92)](_0x132c3b)[-0x7*-0x313+0x2fa*-0x6+-0x3a9]]||{};}export function getEffectiveConfigForRequestType(_0x1be9f3){const _0x48de7a=extension_settings[extensionName]['llm_reques'+_0x3a9434(0x16a,0x12c,0x1db,0x16d)+_0x3a9434(0x16c,0x245,0x1ba,0x19e)]||{},_0x459247={};_0x459247['api_profil'+'e']='默认',_0x459247[_0x15ae4c(0x215,0x164,0x20a,0x167)+'ofile']='默认';const _0x53e458=_0x48de7a[_0x1be9f3]||_0x459247,_0x5ab0de=extension_settings[extensionName][_0x3a9434(0x112,0x1bd,0x15a,0xbc)+'es']||{},_0x3616ce=extension_settings[extensionName][_0x3a9434(0x22d,0xd3,0x17d,0x22c)+'xt_profile'+'s']||{},_0xb2f9a4=_0x53e458['api_profil'+'e']||'默认';function _0x15ae4c(_0x2076f4,_0x7b477e,_0x27ee97,_0x4c0290){return _0x581bc8(_0x2076f4-0xbd,_0x7b477e-0x2cb,_0x27ee97-0x1f,_0x4c0290);}const _0x25ef2e=_0x5ab0de[_0xb2f9a4]||_0x5ab0de[Object['keys'](_0x5ab0de)[-0x942+-0x821+0x1163]]||{},_0x34c92d=_0x53e458['context_pr'+_0x15ae4c(0x1e5,0x215,0x279,0x19d)]||'默认',_0x388937=_0x3616ce[_0x34c92d]||_0x3616ce[Object[_0x15ae4c(0x21e,0x1a1,0x141,0x239)](_0x3616ce)[0xadb+-0xc48+-0x1*-0x16d]]||{},_0x210241={};_0x210241['api_url']=_0x25ef2e[_0x3a9434(0x27e,0x225,0x24c,0x2d0)]||'',_0x210241[_0x15ae4c(0x287,0x1d4,0x271,0x11a)]=_0x25ef2e['api_key']||'',_0x210241['model']=_0x25ef2e[_0x3a9434(0x191,0xdb,0x142,0x8d)]||'',_0x210241[_0x15ae4c(0x20d,0x168,0x1b2,0x1b5)+'e']=_0x25ef2e[_0x3a9434(0x100,0xac,0x110,0x14a)+'e']??-0x63*-0x4+-0xe84+-0x4*-0x33e+0.7,_0x210241[_0x15ae4c(0x28c,0x2ac,0x214,0x308)]=_0x25ef2e[_0x15ae4c(0x256,0x2ac,0x2f0,0x235)]??0x1*0x8b+-0x568+0x4de;function _0x3a9434(_0x2864aa,_0x47d118,_0x1ba037,_0x170d92){return _0x581bc8(_0x2864aa-0xcb,_0x1ba037-0x273,_0x1ba037-0x17f,_0x170d92);}return _0x210241[_0x3a9434(0x1bf,0x11e,0x1cf,0x185)]=_0x25ef2e[_0x3a9434(0x235,0x21e,0x1cf,0x252)]??-0x146e+0x61*-0x64+0x3c52,_0x210241[_0x15ae4c(0x243,0x1ce,0x19f,0x13a)]=_0x25ef2e['stream']??![],_0x210241[_0x3a9434(0x1c0,0x191,0x145,0xd4)+'xy']=_0x25ef2e[_0x15ae4c(0x23c,0x19d,0x1fb,0x1f6)+'xy']??![],_0x210241['context']=_0x388937,_0x210241;}export function buildPromptForRequestType(_0x42f0f1,_0x185c83=''){const _0x24f5cb={'Pjuta':'/v1','uCjHa':function(_0x263de7,_0x141dee){return _0x263de7+_0x141dee;},'WxHME':_0x50bacf(-0x284,-0x211,-0x34e,-0x29b)+_0x50bacf(-0x296,-0x262,-0x293,-0x242)+_0x50bacf(-0x1d8,-0x218,-0x213,-0x1e3)+'/generate','qVlfw':function(_0x32b069,_0x182970){return _0x32b069(_0x182970);},'yMDBm':_0x50bacf(-0x1a3,-0x18d,-0x12c,-0x181),'LAsQj':function(_0xfa5284,_0x2e2f96){return _0xfa5284(_0x2e2f96);},'nFuIs':function(_0x469c56,_0x414473){return _0x469c56(_0x414473);},'yTocY':function(_0x1c51d4,_0x4a1985){return _0x1c51d4!==_0x4a1985;},'gCPDS':_0x68c090(-0x12f,-0x23c,-0x280,-0x1c6),'FraCW':function(_0x5711fc,_0x573c2c){return _0x5711fc===_0x573c2c;},'dOqpO':_0x50bacf(-0x206,-0x13a,-0x25d,-0x1ce),'FSHGQ':'SKShC','sbpcG':function(_0x234bc5,_0x2a74dd,_0x4cddab){return _0x234bc5(_0x2a74dd,_0x4cddab);},'OctFQ':_0x68c090(-0x99,-0x156,-0xf9,-0xef),'CTkQV':function(_0x396e68,_0x4f9af6){return _0x396e68!==_0x4f9af6;},'SGbnM':function(_0x244447,_0x527bf5){return _0x244447!==_0x527bf5;},'wtoTZ':_0x50bacf(-0x1f0,-0x1f3,-0x133,-0x137),'EJROR':_0x50bacf(-0x1a1,-0x1f7,-0x1ed,-0x16d),'jWwKy':function(_0x4b1e43,_0x2f2f8a){return _0x4b1e43===_0x2f2f8a;},'pgWaE':function(_0x3f6e67,_0x45d6a6,_0x5a0996){return _0x3f6e67(_0x45d6a6,_0x5a0996);},'VwMlJ':function(_0x5ef2af,_0x202c7d){return _0x5ef2af===_0x202c7d;},'IWTAJ':_0x68c090(-0xfc,-0x11f,-0xda,-0xa5),'kRGSZ':'WjOvQ','vubKQ':'AxNMt','qyvtf':function(_0x3de30b,_0x4ac276){return _0x3de30b(_0x4ac276);}},_0x5bec74=extension_settings[extensionName][_0x50bacf(-0x11c,-0xeb,-0xc2,-0x13e)+'t_type_con'+_0x68c090(-0x14a,-0x1ae,-0xbf,-0x138)]||{},_0x53efa2={};_0x53efa2[_0x50bacf(-0x2d5,-0x1f0,-0x241,-0x272)+_0x68c090(-0x181,-0xf8,-0xe6,-0x135)]='默认';function _0x50bacf(_0x2d01d9,_0x32ccb9,_0x5f1ad9,_0x4e0632){return _0x581bc8(_0x2d01d9-0x80,_0x4e0632- -0x10b,_0x5f1ad9-0xb2,_0x2d01d9);}const _0x46426a=_0x5bec74[_0x42f0f1]||_0x53efa2,_0x3f4f0c=_0x46426a[_0x68c090(-0x1e0,-0x17a,-0x138,-0x1e6)+_0x50bacf(-0x22c,-0x153,-0x116,-0x1c1)]||'默认',_0x5d460c=extension_settings[extensionName][_0x50bacf(-0x22b,-0x234,-0x194,-0x201)+'xt_profile'+'s']||{},_0x29111d=_0x5d460c[_0x3f4f0c]||_0x5d460c[Object['keys'](_0x5d460c)[-0x24ed+-0x132b*-0x1+0x11c2*0x1]]||{},_0x421062=[];if(_0x29111d[_0x50bacf(-0x28e,-0x213,-0x1d3,-0x232)]&&Array['isArray'](_0x29111d['entries'])){if(_0x24f5cb[_0x50bacf(-0x133,-0x202,-0x22a,-0x175)](_0x24f5cb['IWTAJ'],_0x24f5cb[_0x50bacf(-0x1fa,-0x170,-0x259,-0x19f)])){let _0x424b9b=_0x9c6069;!_0x424b9b[_0x50bacf(-0x1f6,-0x252,-0x22c,-0x287)](_0x24f5cb[_0x68c090(-0x117,-0xf5,-0x123,-0x169)])&&!_0x424b9b[_0x68c090(-0x15f,-0x1e2,-0x191,-0x210)](_0x50bacf(-0x1e1,-0x188,-0x193,-0x13c))&&(_0x424b9b=_0x24f5cb['uCjHa'](_0x424b9b,_0x24f5cb['Pjuta']));_0x424b9b=_0x424b9b[_0x50bacf(-0x198,-0x1a6,-0x205,-0x18b)](/\/v1\/$/,_0x24f5cb[_0x68c090(-0x170,-0x100,-0x10b,-0x169)]),_0x367238=_0x24f5cb['WxHME'],_0x5c6dda=_0x24f5cb[_0x50bacf(-0x1a1,-0x1be,-0x12d,-0x144)](_0x37f296,_0x1114a4[_0x68c090(-0xa4,-0x11d,-0xaf,-0xe3)]);const _0x5bb830={};_0x5bb830['chat_compl'+_0x50bacf(-0x80,-0xc0,-0x103,-0x12e)+'ce']=_0x24f5cb[_0x68c090(-0x16e,-0x159,-0x15f,-0x109)],_0x5bb830['custom_url']=_0x424b9b,_0x5bb830[_0x50bacf(-0x244,-0x10b,-0x103,-0x1b3)+_0x50bacf(-0x150,-0x1dc,-0x117,-0x17d)+'rs']=_0x50bacf(-0x2dd,-0x1e8,-0x2fd,-0x289)+'ion:\x20\x22Bear'+_0x50bacf(-0x216,-0x253,-0x192,-0x217)+_0x27f714+'\x22',_0x5bb830['model']=_0x35dceb,_0x5bb830[_0x68c090(-0x6a,-0xa6,-0x165,-0x121)]=_0x36c06a,_0x5bb830[_0x68c090(-0x146,-0x1d1,-0x16e,-0x1e2)+'e']=_0x5aab9f,_0x5bb830[_0x50bacf(-0x86,-0xfd,-0x1b5,-0x12a)]=_0x3e5546,_0x5bb830[_0x68c090(-0x6f,-0x190,-0x11e,-0x123)]=_0x9411fe,_0x5bb830[_0x68c090(-0x191,-0x1ef,-0x214,-0x17c)]=![],_0x319bd4=_0x5bb830;}else _0x29111d[_0x68c090(-0x128,-0x261,-0xfb,-0x1a6)][_0x50bacf(-0x146,-0x1c2,-0x110,-0x17e)](_0x17d933=>{const _0x276077={'qXLON':function(_0x5ef38c,_0x33e1b4){function _0xc12f8c(_0xb2ae2a,_0xe4e6a1,_0x28e31a,_0x492305){return _0x5644(_0xe4e6a1-0x152,_0xb2ae2a);}return _0x24f5cb[_0xc12f8c(0x2d2,0x304,0x396,0x2f0)](_0x5ef38c,_0x33e1b4);}};function _0x34b3ee(_0x55f66d,_0x3b18c9,_0x3601e0,_0x27fd48){return _0x68c090(_0x55f66d-0x162,_0x3b18c9-0x1ed,_0x27fd48,_0x3b18c9-0x6);}function _0x3832bb(_0x49b96f,_0xd3d24,_0x1f2b27,_0x53ad4f){return _0x68c090(_0x49b96f-0x1f0,_0xd3d24-0x5d,_0x49b96f,_0xd3d24-0x513);}if(_0x24f5cb[_0x34b3ee(-0x27f,-0x1e7,-0x1be,-0x1c1)](_0x24f5cb['gCPDS'],_0x24f5cb['gCPDS']))_0x24f5cb['LAsQj'](_0x53edd3,_0x21561f);else{if(!_0x17d933['enabled'])return;if(!_0x17d933[_0x3832bb(0x3f0,0x37f,0x2d2,0x430)]||_0x24f5cb[_0x3832bb(0x4ab,0x402,0x3e5,0x38c)](_0x17d933[_0x3832bb(0x2ef,0x37f,0x3f2,0x375)][_0x34b3ee(-0xa0,-0xe8,-0x174,-0x181)](),''))return;if(_0x24f5cb[_0x34b3ee(-0x14f,-0x10b,-0x10b,-0x98)](_0x17d933[_0x3832bb(0x472,0x429,0x3bc,0x3c5)+'e'],_0x24f5cb[_0x3832bb(0x4b9,0x434,0x3a9,0x409)])){if(_0x24f5cb[_0x3832bb(0x30a,0x326,0x2a6,0x317)](_0x24f5cb[_0x34b3ee(-0x92,-0xbf,-0x66,-0xb8)],_0x24f5cb[_0x34b3ee(-0x98,-0xbf,-0x98,-0xc4)]))_0x1077b3+=_0x51a669,_0x5f0c2f&&_0x276077[_0x3832bb(0x39d,0x417,0x460,0x4cb)](_0x51edf8,_0xaed325);else{if(!_0x185c83||!_0x24f5cb[_0x34b3ee(-0x1e2,-0x150,-0x1c1,-0x110)](checkTriggerWords,_0x17d933[_0x3832bb(0x356,0x39a,0x32b,0x358)+'ds'],_0x185c83))return;}}const _0x491cfb={};_0x491cfb['role']=_0x17d933[_0x3832bb(0x3d8,0x387,0x32e,0x3c0)]||_0x24f5cb['OctFQ'],_0x491cfb[_0x34b3ee(-0x19f,-0x18e,-0x1d4,-0x102)]=_0x17d933[_0x3832bb(0x3d5,0x37f,0x33b,0x2f5)],_0x421062[_0x34b3ee(-0x172,-0x119,-0x1cd,-0x79)](_0x491cfb);}});}else{if(_0x29111d[_0x68c090(-0x66,-0x37,-0x6d,-0xb4)]&&Array[_0x50bacf(-0x15f,-0x22d,-0x1fb,-0x192)](_0x29111d['history'])){if(_0x24f5cb[_0x68c090(-0x11f,-0xa9,-0x50,-0xe9)](_0x24f5cb['vubKQ'],_0x68c090(-0x131,-0x161,-0x81,-0xd7)))_0x29111d['history']['forEach'](_0x30bb5b=>{if(_0x30bb5b['user']&&_0x30bb5b[_0x740ac4(-0xb8,-0xab,-0xf8,-0xee)][_0x740ac4(-0x10d,-0xda,-0xf7,-0x84)]()!==''){const _0x5d6b3f={};_0x5d6b3f[_0x11604f(0x3b7,0x3ab,0x456,0x384)]=_0x24f5cb[_0x740ac4(-0xa6,-0x15d,-0xee,-0x1a7)],_0x5d6b3f[_0x11604f(0x3af,0x38f,0x429,0x408)]=_0x30bb5b['user'],_0x421062[_0x740ac4(-0x19e,-0xa6,-0x128,-0x1a6)](_0x5d6b3f);}function _0x740ac4(_0x582db3,_0x1ea08e,_0x26a242,_0x3ba57d){return _0x50bacf(_0x1ea08e,_0x1ea08e-0x114,_0x26a242-0x1bb,_0x26a242-0x83);}function _0x11604f(_0x13bb55,_0x3af14d,_0xc77e0,_0x5cc4f6){return _0x50bacf(_0x5cc4f6,_0x3af14d-0x1e7,_0xc77e0-0x25,_0x13bb55-0x5cf);}if(_0x30bb5b[_0x11604f(0x462,0x4c7,0x427,0x4bc)]&&_0x24f5cb[_0x11604f(0x391,0x33b,0x442,0x34a)](_0x30bb5b[_0x740ac4(-0xc7,-0x15d,-0xea,-0x144)][_0x740ac4(-0x6c,-0x114,-0xf7,-0x135)](),'')){if(_0x24f5cb[_0x740ac4(-0xbe,-0xee,-0x103,-0x191)](_0x24f5cb['wtoTZ'],_0x24f5cb[_0x740ac4(-0x126,-0xec,-0x117,-0x171)]))_0x7686ff=null;else{const _0x4ccebb={};_0x4ccebb['role']=_0x24f5cb[_0x11604f(0x387,0x33a,0x341,0x339)],_0x4ccebb[_0x11604f(0x3af,0x300,0x3e1,0x339)]=_0x30bb5b[_0x11604f(0x462,0x43c,0x4ca,0x473)],_0x421062[_0x11604f(0x424,0x47d,0x3d4,0x4de)](_0x4ccebb);}}});else{const _0x349335={'JZnEK':function(_0xf4a3ba,_0x49ae5c){return _0xf4a3ba===_0x49ae5c;},'ZNuYV':function(_0x24576d,_0x2d6449){return _0x24f5cb['jWwKy'](_0x24576d,_0x2d6449);},'eqxiO':function(_0x255815,_0x2e83f8,_0x517d9b){function _0x379cf9(_0x1f11e0,_0x30fb26,_0x1e00a5,_0x2b4ef4){return _0x68c090(_0x1f11e0-0x19e,_0x30fb26-0x173,_0x1f11e0,_0x2b4ef4- -0x21);}return _0x24f5cb[_0x379cf9(-0x14a,-0xc0,-0xc8,-0x17b)](_0x255815,_0x2e83f8,_0x517d9b);},'nwKwt':_0x24f5cb[_0x68c090(-0xf2,-0x41,-0x17c,-0xe5)]};_0x3be077[_0x68c090(-0x23f,-0x167,-0x1d6,-0x1a6)]['forEach'](_0x5da886=>{if(!_0x5da886[_0x36ed49(-0x260,-0x1ed,-0x200,-0x1a2)])return;function _0x36ed49(_0x3931d8,_0x4d4733,_0x299c4a,_0x30a913){return _0x50bacf(_0x3931d8,_0x4d4733-0x1ac,_0x299c4a-0xf7,_0x4d4733-0x57);}if(!_0x5da886['content']||_0x349335['JZnEK'](_0x5da886['content']['trim'](),''))return;if(_0x349335[_0x36ed49(-0x1e6,-0x1ea,-0x27e,-0x14d)](_0x5da886['triggerMod'+'e'],_0x36ed49(-0xea,-0x177,-0x153,-0x11f))){if(!_0x3ccfb0||!_0x349335['eqxiO'](_0x4d9079,_0x5da886[_0x36ed49(-0x19d,-0x1ae,-0x1f1,-0x154)+'ds'],_0xc7733f))return;}const _0x460d0c={};_0x460d0c[_0x36ed49(-0x261,-0x1c1,-0x153,-0x203)]=_0x5da886[_0x3deb7f(-0x22f,-0x2e9,-0x348,-0x254)]||_0x349335[_0x3deb7f(-0x284,-0x2fb,-0x32a,-0x290)],_0x460d0c[_0x36ed49(-0x23b,-0x1c9,-0x14c,-0x22a)]=_0x5da886[_0x36ed49(-0x208,-0x1c9,-0x173,-0x192)];function _0x3deb7f(_0x208c71,_0x3e64a4,_0x417014,_0x450c38){return _0x68c090(_0x208c71-0xad,_0x3e64a4-0x14e,_0x450c38,_0x3e64a4- -0x15d);}_0x3dab4b[_0x3deb7f(-0x213,-0x27c,-0x22a,-0x217)](_0x460d0c);});}}}function _0x68c090(_0x1cccdb,_0x3080a9,_0xf67a9,_0xe58c9f){return _0x58266d(_0x1cccdb-0x57,_0xf67a9,_0xe58c9f- -0x5cd,_0xe58c9f-0x134);}const _0x5221be=_0x24f5cb[_0x68c090(-0x178,-0x1b7,-0x1b8,-0x114)](mergeAdjacentMessages,_0x421062),_0x4d115a=_0x24f5cb[_0x68c090(-0x16b,-0x22f,-0x19c,-0x182)](processRollPlaceholders,_0x5221be);return _0x4d115a;}const _0xd44f8d={};_0xd44f8d['image_gen']=_0x58266d(0x420,0x3af,0x3fc,0x3d2),_0xd44f8d[_0x581bc8(-0xca,-0x53,-0xdb,-0xe2)+'n']=_0x581bc8(-0x1a5,-0x107,-0x18d,-0x53),_0xd44f8d[_0x58266d(0x3b3,0x3d8,0x445,0x3ac)+'ay']=_0x581bc8(-0x16c,-0xbb,-0x167,-0x11b),_0xd44f8d[_0x581bc8(-0x18e,-0x162,-0xef,-0xd9)+'y']=_0x581bc8(-0xba,-0xa6,-0x68,-0xa0),_0xd44f8d[_0x581bc8(-0x82,-0x42,0x4e,-0x29)+'n']='翻译',_0xd44f8d[_0x58266d(0x58d,0x4f6,0x50e,0x5a9)]='Tag修改';const REQUEST_TYPE_NAMES=_0xd44f8d;export async function executeTypedLLMRequest(_0x4a9282,_0xecdf21,_0x4cc17d,_0x396523=null){const _0x18047c={'iLJAy':function(_0xc8b4c1,_0x18cdfb){return _0xc8b4c1(_0x18cdfb);},'HaqQP':function(_0x3d2ae2){return _0x3d2ae2();},'uydeV':_0x2d248e(-0x99,-0xa1,-0x100,-0x159)+'PI\x20Key,\x20或\x20'+_0x2d248e(-0x118,-0x110,-0x1ba,-0x8e),'vZkWH':'类型:','NVYbJ':_0x1685d4(-0x27,-0xd0,0x80,-0x1b),'PwIDU':_0x2d248e(-0x18f,-0xff,-0xe2,-0x122),'lCoJk':function(_0x5677c7,_0x4b660b){return _0x5677c7||_0x4b660b;},'vxoxe':_0x1685d4(0x50,-0x2f,-0x2a,0x7)+'始新请求。','gkGun':function(_0x6bb290){return _0x6bb290();},'UiWHr':function(_0x5704ea,_0x454816){return _0x5704ea(_0x454816);},'tyLvo':function(_0x232171,_0x1d09f3){return _0x232171(_0x1d09f3);},'JRQuT':_0x1685d4(0x117,0x149,0x89,0x9b)+'n/json','HuLHj':'/v1','lBjzz':_0x2d248e(-0x37,0x48,-0x4b,0xdd),'eWdZw':function(_0x35cd0f,_0x2f0cc0){return _0x35cd0f+_0x2f0cc0;},'THKEL':function(_0x41cbcd,_0x2e04b3){return _0x41cbcd(_0x2e04b3);},'fTYlP':_0x1685d4(0x108,0x140,0x146,0xef),'agchm':function(_0x236b1f,_0x340990){return _0x236b1f(_0x340990);},'BaJuK':function(_0x1c07f4,_0x2c1b8e){return _0x1c07f4!==_0x2c1b8e;},'tCpYN':'guLaN','kzkQC':'eFkmy','wpUCV':function(_0x250785,_0x548544,_0x4b23a0){return _0x250785(_0x548544,_0x4b23a0);},'pUhmd':_0x1685d4(0x107,0x7a,0x23,0x80),'PQCls':function(_0x348f1f,_0x1acc14){return _0x348f1f===_0x1acc14;},'Bqiuw':function(_0x56ced9,_0x3870b2){return _0x56ced9===_0x3870b2;},'wTMsY':_0x1685d4(0x156,0x76,0x1c5,0x114),'WOGqo':function(_0x3184e6,_0x3ed229){return _0x3184e6>_0x3ed229;},'jcJdK':'Wczds','PYrLK':_0x2d248e(-0x16e,-0x108,-0x163,-0x9c),'SRIxt':_0x1685d4(0x79,0x7e,0x82,0x126),'wpTcn':_0x2d248e(-0x119,-0xfb,-0xd3,-0x73),'rbiNk':function(_0x11f2ac,_0x75a2cb){return _0x11f2ac(_0x75a2cb);},'DeRKG':_0x2d248e(-0xba,-0xb6,-0x8b,-0x70),'FOxze':function(_0x19a34b,_0x6a139a){return _0x19a34b!==_0x6a139a;},'jthAu':_0x1685d4(0x117,0x97,0x124,0x12d)+'E]','bJpje':function(_0x325081,_0x26e5e5){return _0x325081!==_0x26e5e5;},'sDYUI':_0x1685d4(0x7c,0x55,0xa9,0x108),'juMAT':_0x2d248e(-0x151,-0xa5,-0x140,-0xda),'MhfvX':function(_0x283d05,_0x51be18){return _0x283d05!==_0x51be18;},'yUdmv':_0x2d248e(-0xf0,-0x106,-0xe5,-0x153),'ccJsD':_0x1685d4(0x1a0,0x97,0x13b,0xf9),'HmDQj':function(_0xaea935,_0x191e7d){return _0xaea935(_0x191e7d);},'rMpbO':_0x1685d4(-0x4c,0x20,-0x96,0xd)+_0x1685d4(0x70,-0x39,0x10a,0x60),'IDqbp':'FUwnG','rgVwy':function(_0x293135,_0x32d72c){return _0x293135>_0x32d72c;},'htQQg':'SjLIg','didxl':function(_0x5af256,_0x3d9bba){return _0x5af256(_0x3d9bba);},'AVSdn':function(_0x10a685,_0x3607c7){return _0x10a685===_0x3607c7;},'VkLKC':_0x1685d4(0x33,0x140,0x126,0xe9),'IRavo':_0x2d248e(0x86,-0x26,0x48,0x31),'vPJbX':'AbortError','JyuRT':_0x1685d4(0x114,0x8c,0xa9,0xd7)+_0x1685d4(0x1c9,0xd8,0xe1,0x136),'EzRvP':'uWYKo','baBTX':function(_0x4fdc2c,_0x52684a){return _0x4fdc2c(_0x52684a);},'VtKuy':_0x1685d4(0x64,0x54,0xb0,0xa8),'atlWL':function(_0x5a97f5){return _0x5a97f5();}};function _0x1685d4(_0x64809c,_0x21d693,_0x22648b,_0x5e0c37){return _0x581bc8(_0x64809c-0x1e2,_0x5e0c37-0x165,_0x22648b-0x66,_0x22648b);}const {prompt:_0x29e19a,id:_0x8d1bf4}=_0x4a9282;if(_0x18047c[_0x1685d4(0xf0,-0x48,0x94,0x53)](!_0x8d1bf4,!_0x29e19a))return;currentLLMRequestController&&(currentLLMRequestController[_0x2d248e(-0x4c,-0xb9,-0xeb,-0x163)](),toastr[_0x2d248e(0x1f,-0x97,-0x18,-0x119)](_0x18047c['vxoxe']));currentLLMRequestController=new AbortController();const _0x4bb63c=currentLLMRequestController[_0x1685d4(0xd9,0xf,0xad,0x7f)],_0x3ab421=currentLLMRequestController,_0x57500f=REQUEST_TYPE_NAMES[_0xecdf21]||_0xecdf21,_0x1e88b8={};_0x1e88b8[_0x2d248e(-0x166,-0xd8,-0x145,-0x72)]=_0x1685d4(0x165,0x13d,0xba,0xc8)+_0x57500f,_0x1e88b8['type']=TaskType['LLM'],_0x1e88b8[_0x1685d4(0xb0,0xd5,0x10d,0xb6)]=_0x8d1bf4;const _0x57e198=taskQueue[_0x2d248e(-0x171,-0x109,-0xd9,-0xb1)](_0x1e88b8);llmTaskControllers['set'](_0x57e198,currentLLMRequestController),taskQueue['updateStat'+'us'](_0x57e198,TaskStatus[_0x1685d4(-0x5,0x7e,0xdd,0x51)]),_0x18047c[_0x2d248e(0xd7,0x20,-0x61,0x1c)](startFabLoading);let _0x1c8aa5=![];_0x18047c[_0x1685d4(-0x7,0xa0,0x96,0x2a)](clearLog),_0x18047c[_0x2d248e(-0x6,-0x76,-0xc6,-0x11f)](addLog,_0x1685d4(0x12,0x41,0x112,0x79)+_0x1685d4(-0x25,-0x55,0x7a,0x25)+_0x57500f+_0x1685d4(0x7a,0x126,-0x1f,0x8c)),addLog(_0x2d248e(-0x10e,-0xd2,-0x6b,-0x10f)+_0x8d1bf4),_0x18047c[_0x1685d4(-0x30,-0x1,0xd7,0x24)](addLog,_0x2d248e(0x83,-0x23,-0x8f,-0x13)+':'),_0x18047c['iLJAy'](addLog,formatPromptForDisplay(_0x29e19a));const _0x57ec03=_0x18047c[_0x2d248e(-0x19,-0x82,0x15,-0x39)](getEffectiveConfigForRequestType,_0xecdf21),{api_url:_0x1c2e93,api_key:_0x57d9e2,model:_0x3f5c34,temperature:_0x2184a0,top_p:_0x2b81f7,max_tokens:_0x3f3be9,stream:_0x497f03,bypass_proxy:_0x2e1026}=_0x57ec03;if(!_0x1c2e93||!_0x57d9e2||!_0x3f5c34){const _0xa070a1=_0x57500f+(':\x20API\x20URL,'+'\x20API\x20Key,\x20'+_0x1685d4(0x16a,0x68,0x136,0xe3)+'置。');toastr[_0x2d248e(-0xb,0x3e,0xec,0x40)](_0xa070a1);const _0x50611c={};_0x50611c[_0x1685d4(0x11f,0xeb,0x1,0x84)]=![],_0x50611c[_0x2d248e(-0x1c,-0x21,-0xa6,-0xa8)]=_0xa070a1,_0x50611c['id']=_0x8d1bf4,eventSource[_0x2d248e(-0x5d,0x4f,0x57,0x67)](_0x4cc17d,_0x50611c);return;}function _0x2d248e(_0x4dca46,_0x3832b9,_0x21e9ee,_0x536e4b){return _0x581bc8(_0x4dca46-0x143,_0x3832b9-0x79,_0x21e9ee-0xe,_0x536e4b);}const _0x3ba736=_0x1c2e93['replace'](/\/$/,'');let _0x580ce8,_0x234663,_0x317e4c;if(_0x2e1026){_0x580ce8=_0x3ba736+('/chat/comp'+'letions');const _0x5cd954={};_0x5cd954[_0x2d248e(-0xe1,-0x55,-0x50,-0x8f)+'pe']=_0x18047c[_0x1685d4(0x1a6,0x1b6,0x121,0x11c)],_0x5cd954[_0x1685d4(0x8c,0x5b,0x2c,-0x19)+_0x1685d4(-0x50,0x22,0xa5,0x1b)]=_0x1685d4(0x105,0xe8,0x165,0x115)+_0x57d9e2,_0x234663=_0x5cd954;const _0x290fa1={};_0x290fa1[_0x2d248e(-0xba,-0xb8,-0x12,-0x65)]=_0x3f5c34,_0x290fa1[_0x1685d4(0x175,0x5c,0x1e,0xc3)]=_0x29e19a,_0x290fa1['temperatur'+'e']=_0x2184a0,_0x290fa1['top_p']=_0x2b81f7,_0x290fa1[_0x1685d4(0xab,0xbe,0x104,0xc1)]=_0x3f3be9,_0x290fa1['stream']=_0x497f03,_0x317e4c=_0x290fa1;}else{let _0x578fe2=_0x3ba736;!_0x578fe2[_0x2d248e(-0x110,-0x103,-0x107,-0x14e)](_0x18047c['HuLHj'])&&!_0x578fe2[_0x2d248e(-0x1bc,-0x118,-0xb6,-0x143)](_0x18047c['lBjzz'])&&(_0x578fe2=_0x18047c[_0x1685d4(0xfe,0x87,0x18d,0x127)](_0x578fe2,_0x1685d4(-0x38,0x75,0x62,0x65)));_0x578fe2=_0x578fe2[_0x2d248e(-0xb,-0x7,-0x21,0x2)](/\/v1\/$/,_0x18047c['HuLHj']),_0x580ce8=_0x2d248e(-0x156,-0x117,-0xe8,-0x190)+_0x1685d4(0xa1,0x64,0x85,0x2e)+_0x1685d4(0x41,0x102,0x139,0x8d)+'/generate',_0x234663=_0x18047c[_0x1685d4(0x14f,0x185,0x14f,0xdd)](getRequestHeaders,window[_0x2d248e(0x66,0x15,-0x2d,-0x21)]);const _0x1a8ce0={};_0x1a8ce0[_0x1685d4(0x143,0x14f,0x1d,0xd4)+'etion_sour'+'ce']=_0x18047c['fTYlP'],_0x1a8ce0['custom_url']=_0x578fe2,_0x1a8ce0[_0x2d248e(-0xe8,-0x2f,-0x82,0x0)+'lude_heade'+'rs']=_0x1685d4(0xa1,-0x11,0x8a,-0x19)+_0x1685d4(0x9e,0x3d,0x100,0xb4)+_0x2d248e(-0xe,-0x93,-0x37,-0x147)+_0x57d9e2+'\x22',_0x1a8ce0[_0x2d248e(-0xca,-0xb8,-0x119,-0xdf)]=_0x3f5c34,_0x1a8ce0[_0x2d248e(0x62,-0x29,-0x97,0x85)]=_0x29e19a,_0x1a8ce0[_0x2d248e(-0x137,-0xea,-0xcb,-0x109)+'e']=_0x2184a0,_0x1a8ce0[_0x1685d4(0x120,0x107,0xe2,0x146)]=_0x2b81f7,_0x1a8ce0['max_tokens']=_0x3f3be9,_0x1a8ce0['stream']=_0x497f03,_0x317e4c=_0x1a8ce0;}_0x396523&&_0x18047c[_0x2d248e(-0x33,-0x7b,0x35,-0x7c)](_0x396523,'正在处理\x20'+_0x57500f+_0x1685d4(0x84,0x72,0xe0,0x96));try{if(_0x18047c['BaJuK'](_0x18047c[_0x1685d4(-0x2f,0x71,0x8f,0x4e)],_0x18047c[_0x2d248e(0x2b,-0x88,-0xc6,-0x12e)])){const _0x1f5fd9=await _0x18047c['wpUCV'](fetch,_0x580ce8,{'method':_0x18047c[_0x1685d4(0x5,0x74,-0x1d,0x82)],'headers':_0x234663,'body':JSON[_0x2d248e(-0x4c,-0xf7,-0x81,-0x18f)](_0x317e4c),'signal':_0x4bb63c});if(!_0x1f5fd9['ok']){try{if(_0x18047c[_0x1685d4(0xa7,0xb5,0x173,0x131)](_0x2d248e(-0x7a,-0xaa,-0x129,-0x153),_0x1685d4(0x17,0x6a,0x90,-0x12))){const _0x39728d=_0x3f43fe[_0x1685d4(-0x63,-0xb4,-0x8b,-0x1e)](0x1343+-0x2*0x6d+-0x1263),_0xa46f95=_0x16fabb[_0x2d248e(-0x69,-0x64,-0x111,-0xd1)](_0x39728d),_0x20b999=_0xa46f95[_0x1685d4(0x11d,-0x5,0x16,0x66)]?.[-0xd15+0x93a+0x3db]?.[_0x1685d4(0xcc,0x3c,0x12d,0x9a)]?.[_0x1685d4(0x57,-0xf,0xf6,0x50)];_0x20b999&&(_0x103524+=_0x20b999,_0xaf6a69&&_0x18047c['iLJAy'](_0xcdb92,_0x13618d));}else{const _0x35c6fc=await _0x1f5fd9[_0x2d248e(-0x192,-0xe8,-0x30,-0x173)]();if(_0x35c6fc[_0x1685d4(0x178,0xf5,0xb7,0x12a)]){let _0x5b6ef1;if(_0x18047c[_0x1685d4(0x158,0x85,0x148,0xf4)](typeof _0x35c6fc[_0x2d248e(-0x24,0x3e,0xd6,-0x26)],_0x18047c[_0x1685d4(-0x86,0x5b,-0x84,-0x15)])&&_0x35c6fc[_0x1685d4(0x14c,0xac,0x90,0x12a)][_0x1685d4(0xa1,0x5e,0xc9,0x92)]){_0x5b6ef1=''+_0x35c6fc['error'][_0x1685d4(0x149,0x102,0xbe,0x92)];const _0x22e5d5=[];if(_0x35c6fc[_0x2d248e(0xbb,0x3e,0x28,0x66)]['type'])_0x22e5d5[_0x2d248e(-0x69,-0x27,0x15,0x47)]('类型:\x20'+_0x35c6fc['error']['type']);if(_0x35c6fc[_0x2d248e(-0x3f,0x3e,-0x3d,-0x55)][_0x1685d4(0x124,0x1,0xa1,0x9c)])_0x22e5d5['push'](_0x1685d4(0x83,0x94,0x142,0x113)+_0x35c6fc[_0x1685d4(0x14b,0x1af,0xe9,0x12a)][_0x1685d4(0x118,0xb4,0x3,0x9c)]);_0x18047c[_0x1685d4(0x8,0xb,0xb6,0x77)](_0x22e5d5[_0x1685d4(0x6b,0x72,0xf5,0x5d)],0x18a2+0x9*0x433+-0x3e6d)&&(_0x5b6ef1+='\x20('+_0x22e5d5['join'](',\x20')+')');}else _0x5b6ef1=''+JSON[_0x1685d4(-0x93,0xe,-0x50,-0xb)](_0x35c6fc['error']);throw new Error(_0x5b6ef1);}}}catch(_0x45253f){if(_0x45253f[_0x1685d4(0x3e,-0x6,0x88,0x92)][_0x2d248e(-0x156,-0x118,-0xa2,-0x15a)](_0x18047c[_0x1685d4(0xa8,-0x1b,0xf9,0x52)])||_0x45253f[_0x2d248e(0x10,-0x5a,0x8,-0xd3)]['includes'](_0x18047c[_0x1685d4(0x4d,0xe5,0x4d,0xf7)])){if(_0x18047c[_0x1685d4(0x9d,0x13a,0x97,0xf4)](_0x18047c['jcJdK'],'Wczds'))throw _0x45253f;else{const {id:_0x317f0f}=_0x11de63;if(!_0x317f0f)return;const _0x5bf88c=_0x3d1016[_0x389248]||_0xa4ca5c;_0x34bf58[_0x1685d4(-0x3,0xa5,0xad,0x10)](_0x2d248e(-0x192,-0x113,-0xb0,-0x17e)+'\x20收到'+_0x5bf88c+(_0x1685d4(-0x22,-0x2,-0xc,0x93)+_0x2d248e(-0xf9,-0x79,-0x10,-0xcb))+_0x317f0f+')');const _0x37295b=_0x18047c[_0x2d248e(-0x127,-0x76,0x39,-0xa4)](_0x1208cf,_0x4777d5),_0x519de0={};_0x519de0['prompt']=_0x37295b,_0x519de0['id']=_0x317f0f,_0x43e026[_0x1685d4(0x93,0x173,0x108,0x13b)](_0x124453,_0x519de0);}}}throw new Error(_0x1685d4(0x1ea,0xd0,0x1af,0x140)+_0x1f5fd9[_0x1685d4(0xc5,0x2c,0x1d,0x9f)]+'\x20'+_0x1f5fd9[_0x2d248e(-0xc8,-0x1d,0x21,-0x4b)]);}let _0x1075f2='';if(_0x497f03){const _0x17f857=_0x1f5fd9[_0x2d248e(-0x89,-0x45,-0xef,0x36)][_0x2d248e(0x1d,0x1a,0xb8,-0x62)](),_0x44386b=new TextDecoder(_0x18047c[_0x2d248e(0xc1,0x12,0xa9,-0x54)]);let _0x5cc0c0='';while(!![]){const {done:_0x1a0e19,value:_0x4510eb}=await _0x17f857[_0x1685d4(0xd5,0x176,0xbe,0x13d)]();if(_0x1a0e19)break;const _0x12dfd0={};_0x12dfd0[_0x1685d4(0x113,-0x2,0x80,0x68)]=!![],_0x5cc0c0+=_0x44386b[_0x1685d4(-0x2,0x139,0xe8,0xb3)](_0x4510eb,_0x12dfd0);const _0xe872e0=_0x5cc0c0[_0x1685d4(0x13e,0x119,0x98,0x137)]('\x0a');_0x5cc0c0=_0xe872e0[_0x2d248e(-0x1,-0xab,-0xd9,-0xca)]()||'';for(const _0x4dfee0 of _0xe872e0){const _0xad7ec2=_0x4dfee0[_0x2d248e(-0x4d,0xa,0x99,0x29)]();if(!_0xad7ec2||_0x18047c['Bqiuw'](_0xad7ec2,_0x2d248e(-0x6d,0x41,-0x57,0xb6)+'E]'))continue;if(_0xad7ec2[_0x2d248e(-0x99,-0xf3,-0x1a9,-0x9c)](_0x18047c[_0x1685d4(0x8d,0x9d,0x14f,0x107)]))try{const _0x1338bf=_0xad7ec2[_0x1685d4(-0x71,-0x55,-0x4,-0x1e)](0x1d69*0x1+-0xf5*0x15+0x52*-0x1d),_0x565345=JSON[_0x1685d4(0xf,-0x16,0xd6,0x88)](_0x1338bf),_0x2c870e=_0x565345['choices']?.[-0x106c+0x1*0x2b6+0xdb6]?.['delta']?.[_0x2d248e(0x16,-0x9c,-0x31,-0x82)];if(_0x2c870e){_0x1075f2+=_0x2c870e;if(_0x396523){if(_0x18047c['wpTcn']!==_0x18047c['wpTcn']){const _0x2a0890={};_0x2a0890[_0x2d248e(0x1f,-0x94,-0xd5,-0x1d)]='assistant',_0x2a0890['content']=_0x46a1eb['assistant'],_0x23996f[_0x2d248e(-0xa7,-0x27,0x22,-0xa8)](_0x2a0890);}else _0x18047c[_0x1685d4(0x35,0x9d,0x149,0xbe)](_0x396523,_0x1075f2);}}}catch(_0x42b7a1){console[_0x2d248e(0x16,0x3c,0x2c,-0x63)](_0x18047c['DeRKG'],_0x42b7a1['message']);}}}if(_0x5cc0c0['trim']()&&_0x18047c[_0x1685d4(0x4a,0xa4,0x15d,0xfc)](_0x5cc0c0['trim'](),_0x18047c[_0x2d248e(-0x3f,-0xc6,-0x69,-0x32)])&&_0x5cc0c0['trim']()['startsWith'](_0x18047c[_0x2d248e(0x59,0x1b,-0x91,-0x39)]))try{if(_0x18047c[_0x2d248e(-0x59,0x1e,0x11,-0x1e)](_0x18047c[_0x1685d4(0x173,0x1af,0x132,0x11e)],_0x18047c[_0x1685d4(0x16f,0xe8,0xa2,0x11e)]))_0x18047c[_0x1685d4(0x100,0x103,0x72,0x76)](_0x1c77ab,_0x565e7d);else{const _0x2ef084=_0x5cc0c0[_0x2d248e(-0x6d,0xa,-0x15,0xae)]()[_0x2d248e(-0xee,-0x10a,-0x12c,-0xab)](0x66a+0x40b+0x1*-0xa6f),_0x4e82f9=JSON[_0x1685d4(0x66,0x95,0x123,0x88)](_0x2ef084),_0x20ae70=_0x4e82f9[_0x1685d4(0x56,0x94,0x26,0x66)]?.[-0x2256+0x19bb*0x1+0x89b]?.[_0x1685d4(0x4d,0x3a,0x27,0x9a)]?.['content'];_0x20ae70&&('IlIPE'===_0x18047c[_0x1685d4(0x37,0x2f,0xda,0xd2)]?_0x18047c['HaqQP'](_0xe700cd):(_0x1075f2+=_0x20ae70,_0x396523&&(_0x18047c[_0x2d248e(-0x62,-0x54,-0xb3,-0x31)](_0x18047c[_0x2d248e(-0x7c,-0xa7,-0x13f,-0x26)],_0x18047c[_0x1685d4(0xed,0xb1,0x1c0,0x144)])?_0x18047c[_0x1685d4(0x101,0x19f,0x16b,0x11a)](_0x396523,_0x1075f2):(_0x41c758+=_0x28e43d,_0x39d463&&_0x18047c[_0x1685d4(0x7b,0x4c,0x106,0x76)](_0x13a321,_0x7860b0)))));}}catch(_0x40b61b){console[_0x2d248e(-0x49,0x3c,-0x3f,0x71)](_0x18047c['rMpbO'],_0x40b61b[_0x1685d4(-0x16,0x35,0x12a,0x92)]);}!_0x1075f2&&(_0x18047c['PQCls'](_0x18047c[_0x2d248e(-0x135,-0xd6,-0x158,-0x32)],_0x18047c[_0x1685d4(-0x87,-0x32,-0x63,0x16)])?(_0x1075f2=_0x2d248e(-0xf7,-0xff,-0x123,-0x112),toastr[_0x1685d4(0x79,0x91,0xe3,0x7a)](_0x57500f+(_0x1685d4(0x8c,-0x78,0x6d,0x30)+_0x2d248e(-0x11b,-0xac,-0x15c,0x4)+_0x2d248e(-0x12d,-0xc1,-0x3f,-0xca)+_0x1685d4(0xd8,0xc4,0xd7,0x116)+_0x1685d4(0xbc,0x164,0x32,0xdc)))):_0x294845=''+_0x2182fd[_0x2d248e(-0x11f,-0xf7,-0x107,-0x7c)](_0x5ae113['error']));}else{const _0x604f28=await _0x1f5fd9[_0x2d248e(-0xae,-0xe8,-0x11b,-0xe6)]();if(_0x604f28[_0x2d248e(-0x6f,0x3e,0x7d,0x81)]){let _0x18436c;if(_0x18047c['PQCls'](typeof _0x604f28[_0x2d248e(-0x59,0x3e,-0x68,0xa6)],_0x18047c[_0x1685d4(0xa5,0x40,0x70,-0x15)])&&_0x604f28['error'][_0x2d248e(-0xd9,-0x5a,-0x7d,-0x28)]){_0x18436c=''+_0x604f28[_0x2d248e(-0x4d,0x3e,0x95,0x9e)][_0x2d248e(-0x55,-0x5a,-0x42,-0xe5)];const _0x4673fe=[];if(_0x604f28['error']['type'])_0x4673fe[_0x1685d4(0xa4,0xd1,0xe0,0xc5)](_0x1685d4(-0x26,0x117,-0x15,0x6c)+_0x604f28[_0x1685d4(0xa5,0x19a,0x136,0x12a)]['type']);if(_0x604f28[_0x2d248e(-0x1d,0x3e,-0x6a,-0x18)][_0x2d248e(0x1a,-0x50,-0xbe,-0x16)])_0x4673fe['push'](_0x1685d4(0x182,0x78,0x178,0x113)+_0x604f28[_0x1685d4(0x18e,0xf0,0x1de,0x12a)]['code']);_0x18047c[_0x2d248e(0x84,0x1f,0x77,0x99)](_0x4673fe[_0x2d248e(-0x76,-0x8f,-0xbc,-0x36)],0x167c+-0x18e6+-0x1*-0x26a)&&(_0x18436c+='\x20('+_0x4673fe[_0x2d248e(-0x150,-0xfa,-0x6e,-0x93)](',\x20')+')');}else _0x18047c['BaJuK'](_0x1685d4(0x4f,0x37,0x66,0xa),_0x18047c[_0x1685d4(0xa3,0x5d,0x61,0x99)])?_0x18b73f=''+_0x15a12e['stringify'](_0x1fae1c[_0x1685d4(0x179,0x10b,0x1d7,0x12a)]):_0x18436c=''+JSON[_0x2d248e(-0xb3,-0xf7,-0x5d,-0x12b)](_0x604f28['error']);throw new Error(_0x18436c);}_0x1075f2=_0x604f28[_0x1685d4(0x7,0x72,-0x23,0x66)]?.[-0xd6*-0x1+0x26b1+-0x2787]?.[_0x1685d4(0xda,0x79,0x6,0x92)]?.[_0x1685d4(0x103,-0x33,0x51,0x50)]||'',!_0x1075f2&&(_0x1075f2=_0x18047c[_0x1685d4(0x40,0x9,0x81,0x54)],toastr['warning'](_0x57500f+(':\x20LLM\x20请求返回'+_0x2d248e(-0xb0,-0xac,-0x78,-0x14e)+_0x1685d4(-0x1e,0xce,0xdc,0x2b)+'ns\x20设置过小、或\x20'+'API\x20连接问题。'))),_0x396523&&_0x396523(_0x1075f2);}_0x18047c[_0x1685d4(0x30,0x13d,0x43,0x94)](addLog,_0x2d248e(-0xca,-0x3c,0x3e,-0xad)+_0x2d248e(-0xad,-0x116,-0x187,-0xb3)),_0x18047c[_0x2d248e(0x68,0x2e,0xb1,0x6e)](addLog,_0x1075f2),addLog(_0x2d248e(-0x118,-0x73,-0x47,-0x3e)+_0x1685d4(-0x7f,-0x72,-0x7f,0x19)),taskQueue[_0x2d248e(-0x140,-0xe7,-0x159,-0x17d)+'sk'](_0x57e198,!![]),llmTaskControllers[_0x1685d4(-0x32,-0x42,0x1,0x15)](_0x57e198);const _0x3fbbab={};_0x3fbbab[_0x1685d4(0x4c,0xcd,0xd6,0x84)]=!![],_0x3fbbab[_0x2d248e(0x80,-0x21,0x78,0x45)]=_0x1075f2,_0x3fbbab['id']=_0x8d1bf4,_0x3fbbab[_0x1685d4(0xda,0x3f,0xd1,0xb2)]=![],eventSource['emit'](_0x4cc17d,_0x3fbbab);}else{const _0x1850bd=_0x32c593[_0x3fa931][_0x1685d4(0xaa,0x25,0x12,0x6f)+'xt_profile'+'s']||{},_0x1882bc=_0x30bb6e[_0x2b52e1][_0x2d248e(-0x41,0x38,0x6d,0xcf)+'st_context'+_0x2d248e(-0x106,-0xc5,-0x24,-0x9d)];return _0x1850bd[_0x1882bc]||_0x1850bd[_0x19289e[_0x2d248e(-0x165,-0xb1,-0x6e,-0x163)](_0x1850bd)[-0x1b57+0x1*0x272+0x18e5]]||{};}}catch(_0xcec51c){if(_0x18047c[_0x1685d4(-0x4b,-0x76,0x33,-0x16)](_0x18047c[_0x2d248e(-0x19,-0xaf,-0x2a,-0x14e)],_0x18047c[_0x2d248e(-0x10b,-0x57,-0xba,-0x78)])){const _0x1f24c0=_0x18047c[_0x2d248e(-0x173,-0xc9,-0x172,-0x46)];_0xa67a9[_0x1685d4(0x13c,0xab,0x12c,0x12a)](_0x1f24c0);const _0x6f1d5e={};_0x6f1d5e[_0x1685d4(0x126,0x8e,0x76,0x84)]=![],_0x6f1d5e['result']=_0x1f24c0,_0x6f1d5e['id']=_0x246911,_0x16ea69[_0x1685d4(0xae,0x86,0x135,0x13b)](_0x5577cb[_0x1685d4(0x7d,0x5f,0x31,0xe)+_0x2d248e(-0xa7,-0x49,-0x46,-0x4d)],_0x6f1d5e);return;}else{if(_0x18047c['Bqiuw'](_0xcec51c[_0x2d248e(-0xed,-0xd8,-0x11d,-0xcc)],_0x18047c[_0x1685d4(0xd7,0x112,0x81,0x11d)])){_0x1c8aa5=!![],taskQueue['updateStat'+'us'](_0x57e198,TaskStatus[_0x2d248e(-0xdc,-0x63,0xb,0x13)]),llmTaskControllers[_0x1685d4(0xd0,-0x33,-0xf,0x15)](_0x57e198);const _0x13d85b={};_0x13d85b[_0x2d248e(-0x28,-0xd8,-0x8f,-0x25)]=_0x18047c[_0x2d248e(0xd1,0x31,-0x57,0x8c)],_0x13d85b[_0x1685d4(0x2,0xc9,0x8e,0x92)]=_0x18047c[_0x1685d4(0x4f,-0xad,0x6,-0x6)];const _0x3f947c={};_0x3f947c[_0x2d248e(-0xb0,-0x68,-0x30,0x4c)]=![],_0x3f947c[_0x1685d4(0x17,0x173,0xe1,0xcb)]=null,_0x3f947c['id']=_0x8d1bf4,_0x3f947c['error']=_0x13d85b,eventSource[_0x2d248e(0x5b,0x4f,0xfc,0x7)](_0x4cc17d,_0x3f947c);return;}console['error'](_0x57500f+_0x1685d4(0x105,0x1d3,0x19f,0x11b),_0xcec51c);const _0x25ae0f=_0x1685d4(0x30,0x8c,0x128,0x85)+_0xcec51c['message'];if(_0x396523){if(_0x18047c[_0x1685d4(-0xa0,0x7,-0x82,-0x16)](_0x18047c['EzRvP'],_0x2d248e(0x87,-0x5,0x33,-0x82))){if(_0x2b0fa9[_0x2d248e(-0xfc,-0x5a,-0x8,0x2c)][_0x1685d4(-0x48,0x7d,-0xa3,-0x2c)](_0x18047c[_0x1685d4(-0x4f,0x26,-0x24,0x52)])||_0x3eb13d['message'][_0x1685d4(-0x24,0x8d,0x27,-0x2c)](_0x18047c['NVYbJ']))throw _0xb66d1b;}else _0x18047c[_0x2d248e(-0xd1,-0x66,-0x43,-0xe2)](_0x396523,_0x25ae0f);}toastr[_0x2d248e(0x72,0x3e,-0x2a,0x9c)](_0xcec51c[_0x2d248e(-0x1,-0x5a,0x55,-0x2)]),taskQueue['completeTa'+'sk'](_0x57e198,![]),llmTaskControllers[_0x1685d4(0xa6,-0x3d,0x7e,0x15)](_0x57e198);const _0x2b572b={};_0x2b572b[_0x2d248e(-0xb7,-0x68,0x2,0x52)]=![],_0x2b572b[_0x1685d4(0xc7,0x161,0x129,0xcb)]=_0x25ae0f,_0x2b572b['id']=_0x8d1bf4,eventSource['emit'](_0x4cc17d,_0x2b572b);}}finally{currentLLMRequestController===_0x3ab421&&(currentLLMRequestController=null),(!_0x1c8aa5||currentLLMRequestController===null)&&(_0x18047c['VtKuy']!==_0x18047c[_0x1685d4(0x120,0x6b,0x138,0x104)]?(_0x5aa765=_0x18047c['PwIDU'],_0x4e085c[_0x2d248e(-0x101,-0x72,-0x19,-0xba)](_0x49fa7a+(_0x2d248e(-0x12,-0xbc,-0xdc,-0x44)+_0x1685d4(-0x39,0xb,-0x10,0x40)+'断、max_toke'+_0x1685d4(0x163,0x12b,0x16e,0x116)+_0x2d248e(0xa5,-0x10,0x79,-0xa9)))):_0x18047c[_0x2d248e(-0x78,-0xec,-0x130,-0x17c)](stopFabLoading));}}export async function executeDefaultLLMRequest(_0x2b4b46,_0x8cfc40,_0x5dc384=null){function _0xc2501f(_0x5c17ec,_0x2ed41b,_0x26acb9,_0x2df37a){return _0x58266d(_0x5c17ec-0x50,_0x2ed41b,_0x2df37a- -0x31e,_0x2df37a-0x8d);}const _0x23a85c={'qINga':function(_0x38af33,_0x12db6c){return _0x38af33+_0x12db6c;},'nZVbj':_0xc2501f(0x1d0,0x157,0x16d,0x130),'jIznM':function(_0x18d00c,_0x2df566){return _0x18d00c===_0x2df566;},'NSexk':function(_0x3b3b4a,_0x532bf2){return _0x3b3b4a===_0x532bf2;},'rPhfa':_0xc2501f(0x273,0x1d1,0x163,0x1c0),'dLvIE':_0x30ea2d(-0x175,-0x19f,-0x1c3,-0xe9),'rfAaj':function(_0x4eae20,_0x2da851,_0x12f0c5){return _0x4eae20(_0x2da851,_0x12f0c5);},'jUSka':function(_0x38c054,_0x3d75dd){return _0x38c054||_0x3d75dd;},'dOgLU':'LLM请求已中断，开'+_0x30ea2d(-0x329,-0x2ae,-0x255,-0x200),'EggDT':_0x30ea2d(-0x16a,-0x1f9,-0x171,-0x27c),'ZhaER':function(_0x36b3c6){return _0x36b3c6();},'tFCMq':function(_0x21a096){return _0x21a096();},'FSsio':function(_0x2d40ab,_0x8e3c07){return _0x2d40ab(_0x8e3c07);},'FbqFC':function(_0x4a0fb9,_0x3d2234){return _0x4a0fb9(_0x3d2234);},'bUknk':_0x30ea2d(-0x29d,-0x257,-0x1d2,-0x2b5)+_0x30ea2d(-0x281,-0x239,-0x1a4,-0x229)+_0x30ea2d(-0x2e0,-0x2c6,-0x34a,-0x299),'ELIMZ':function(_0x5b917d,_0x591f34){return _0x5b917d===_0x591f34;},'bRrkH':_0xc2501f(0x14d,0x38,0x27,0xb7),'xQAUz':_0x30ea2d(-0x284,-0x207,-0x1a4,-0x2be)+_0x30ea2d(-0x18f,-0x1c1,-0x1d2,-0x1b8),'WXTNL':_0xc2501f(0x211,0x17d,0x28e,0x1ff),'nvvvY':_0xc2501f(0xa,0x123,0x0,0xa0)+_0x30ea2d(-0x2f2,-0x274,-0x306,-0x2aa)+_0xc2501f(0xeb,0x1f0,0x170,0x158)+_0xc2501f(0x142,0x18c,0x122,0xdc),'LMxeQ':_0x30ea2d(-0x1a4,-0x1b3,-0x116,-0x1da),'bCJva':function(_0x3096f2,_0x23ce22){return _0x3096f2(_0x23ce22);},'jnHZZ':_0x30ea2d(-0x26d,-0x1d8,-0x1e6,-0x257)+_0xc2501f(0x45,0xeb,0xfc,0xc1),'sPNmv':function(_0x3975fe,_0x5c76ea){return _0x3975fe!==_0x5c76ea;},'SLcSI':'VvCbm','xdCDU':_0x30ea2d(-0x1d8,-0x18e,-0x18d,-0x152),'kZjaC':'dqvIc','BBLYt':_0x30ea2d(-0x207,-0x2af,-0x302,-0x20c),'vlnYn':function(_0x2b5ad7,_0x2508b8){return _0x2b5ad7>_0x2508b8;},'wFuHu':_0x30ea2d(-0x1b3,-0x24b,-0x249,-0x2ee),'HOTRi':_0xc2501f(0x12c,0x23c,0x174,0x1b9),'YWZmc':_0xc2501f(0x157,0xdd,0x1b2,0x138),'RfeFw':'oQnjQ','aGQQY':_0x30ea2d(-0x149,-0x161,-0x1fd,-0x142),'xkvAp':'LLM\x20请求返回为空'+_0x30ea2d(-0x219,-0x18b,-0x144,-0x154)+_0x30ea2d(-0x24e,-0x1e1,-0x1db,-0x12b)+'\x20设置过小、或\x20AP'+_0xc2501f(0x1cd,0x130,0x13f,0x1b6),'hunEe':function(_0x52747e,_0x194151){return _0x52747e(_0x194151);},'nWJmV':'AbortError','GOPfL':_0xc2501f(0x1dd,0x240,0x22c,0x1a2)+_0x30ea2d(-0xef,-0x16c,-0xfc,-0xf0),'GkGCV':_0x30ea2d(-0x20b,-0x2c4,-0x2c9,-0x365)+'e\x20Error:','FUhau':function(_0x25d883,_0x58aa51){return _0x25d883(_0x58aa51);},'ASgXC':function(_0x497f8a,_0x82b8e6){return _0x497f8a===_0x82b8e6;},'waKqk':_0x30ea2d(-0x21e,-0x1a2,-0x15c,-0x1d2),'IZnSB':function(_0x22d30f,_0x4efe8d){return _0x22d30f===_0x4efe8d;},'ErAOi':function(_0x8a1b60,_0x5ad393){return _0x8a1b60!==_0x5ad393;},'vQjVQ':_0xc2501f(0x68,0x7f,0x63,0xec),'ORTAO':_0xc2501f(0x12d,0x17c,0x1e1,0x1bc),'ZIHYt':function(_0x111437){return _0x111437();}},{prompt:_0x500cdc,id:_0x52accc}=_0x2b4b46;if(_0x23a85c[_0x30ea2d(-0x1fb,-0x1ca,-0x189,-0x14a)](!_0x52accc,!_0x500cdc))return;currentLLMRequestController&&(currentLLMRequestController[_0x30ea2d(-0x210,-0x26f,-0x2fb,-0x2be)](),toastr['info'](_0x23a85c['dOgLU']));currentLLMRequestController=new AbortController();function _0x30ea2d(_0x3b7139,_0x5938f8,_0x268493,_0x5b5cf9){return _0x58266d(_0x3b7139-0x12a,_0x5b5cf9,_0x5938f8- -0x68b,_0x5b5cf9-0x1a2);}const _0x3f344f=currentLLMRequestController[_0x30ea2d(-0x181,-0x223,-0x28e,-0x251)],_0x3dfd21=currentLLMRequestController,_0x22a7e3={};_0x22a7e3[_0x30ea2d(-0x33b,-0x28e,-0x2be,-0x1f1)]=_0x23a85c[_0xc2501f(0xf3,0xfe,0x61,0x100)],_0x22a7e3[_0x30ea2d(-0x2e3,-0x2c7,-0x2e0,-0x370)]=TaskType[_0x30ea2d(-0x29a,-0x2c2,-0x2fb,-0x256)],_0x22a7e3[_0x30ea2d(-0x17d,-0x1ec,-0x279,-0x262)]=_0x52accc;const _0x47e95f=taskQueue[_0xc2501f(0xa2,0xd9,0xed,0xae)](_0x22a7e3);llmTaskControllers['set'](_0x47e95f,currentLLMRequestController),taskQueue[_0xc2501f(0x1d,0x12f,0x60,0xac)+'us'](_0x47e95f,TaskStatus[_0x30ea2d(-0x259,-0x251,-0x236,-0x2c7)]),_0x23a85c[_0xc2501f(0x182,0x18c,0xba,0x105)](startFabLoading);let _0x46f8e3=![];_0x23a85c[_0x30ea2d(-0x302,-0x271,-0x312,-0x29e)](clearLog),_0x23a85c['FSsio'](addLog,'=====\x20LLM\x20'+_0x30ea2d(-0x218,-0x193,-0x1fc,-0x223)+'=='),_0x23a85c[_0xc2501f(0x195,0x1fb,0x151,0x15a)](addLog,_0xc2501f(0x66,0x29,0x105,0xe5)+_0x52accc),addLog(_0x30ea2d(-0x144,-0x1d9,-0x255,-0x280)+':'),_0x23a85c[_0xc2501f(0x18d,0x168,0x17a,0x15a)](addLog,_0x23a85c[_0x30ea2d(-0x1d9,-0x159,-0x10d,-0x180)](formatPromptForDisplay,_0x500cdc));const {api_url:_0x441d4c,api_key:_0x229e6a,model:_0x51e03d,temperature:_0x2d8402,top_p:_0x362acd,max_tokens:_0x10fdbb,stream:_0x1377a7,bypass_proxy:_0x5354d5}=_0x8cfc40;if(_0x23a85c['jUSka'](!_0x441d4c,!_0x229e6a)||!_0x51e03d){const _0x331897=_0x23a85c[_0xc2501f(0x1ec,0x1fe,0x21b,0x185)];toastr[_0xc2501f(0x18b,0x2a8,0x22e,0x1f5)](_0x331897);const _0x535b4e={};_0x535b4e[_0xc2501f(0x113,0xda,0x1cd,0x14f)]=![],_0x535b4e[_0x30ea2d(-0x18a,-0x1d7,-0x1c5,-0x11f)]=_0x331897,_0x535b4e['id']=_0x52accc,eventSource[_0x30ea2d(-0x20b,-0x167,-0x187,-0x155)](eventNames['LLM_EXECUT'+'E_RESPONSE'],_0x535b4e);return;}const _0x279973=_0x441d4c[_0x30ea2d(-0x1f7,-0x1bd,-0x225,-0x11f)](/\/$/,'');let _0x2e6717,_0x288726,_0x2840d2;if(_0x5354d5){if(_0x23a85c['ELIMZ'](_0xc2501f(0x10e,0x19e,0xec,0x199),_0x23a85c[_0xc2501f(0x23d,0x241,0x1be,0x212)])){const _0x34755f=_0x56e540+(_0xc2501f(0x136,0x152,0x115,0x182)+_0x30ea2d(-0x139,-0x1f5,-0x28c,-0x204)+_0xc2501f(0x162,0x15d,0x10e,0x1ae)+'置。');_0x28ad5f['error'](_0x34755f);const _0xd95b3={};_0xd95b3[_0xc2501f(0x1f4,0x105,0x13c,0x14f)]=![],_0xd95b3['result']=_0x34755f,_0xd95b3['id']=_0x58ec64,_0xf440db[_0xc2501f(0x17c,0x1ed,0x1ac,0x206)](_0x2c7194,_0xd95b3);return;}else{_0x2e6717=_0x279973+(_0x30ea2d(-0x263,-0x23b,-0x2c1,-0x1a4)+'letions');const _0x146ff8={};_0x146ff8[_0xc2501f(0x1c7,0x213,0xae,0x162)+'pe']=_0x23a85c['xQAUz'],_0x146ff8[_0x30ea2d(-0x35a,-0x2bb,-0x332,-0x274)+_0xc2501f(0xff,0x69,0x98,0xe6)]=_0x30ea2d(-0x188,-0x18d,-0xdd,-0x20c)+_0x229e6a,_0x288726=_0x146ff8;const _0x4436d3={};_0x4436d3[_0x30ea2d(-0x2ba,-0x26e,-0x275,-0x1ed)]=_0x51e03d,_0x4436d3[_0xc2501f(0x1c7,0x13a,0x12f,0x18e)]=_0x500cdc,_0x4436d3[_0x30ea2d(-0x1ed,-0x2a0,-0x309,-0x229)+'e']=_0x2d8402,_0x4436d3[_0xc2501f(0x2af,0x1d8,0x2a3,0x211)]=_0x362acd,_0x4436d3['max_tokens']=_0x10fdbb,_0x4436d3['stream']=_0x1377a7??![],_0x2840d2=_0x4436d3;}}else{let _0x456610=_0x279973;!_0x456610[_0x30ea2d(-0x275,-0x2b9,-0x208,-0x29a)](_0x23a85c[_0xc2501f(0x27a,0x288,0x245,0x1eb)])&&!_0x456610[_0x30ea2d(-0x221,-0x2ce,-0x337,-0x35f)](_0x23a85c['WXTNL'])&&(_0x456610=_0x456610+_0x23a85c[_0x30ea2d(-0x1a7,-0x182,-0x1f5,-0x18f)]);_0x456610=_0x456610[_0x30ea2d(-0x259,-0x1bd,-0x196,-0x1eb)](/\/v1\/$/,_0x23a85c[_0xc2501f(0x183,0x1ce,0x1ab,0x1eb)]),_0x2e6717=_0x23a85c[_0xc2501f(0x25b,0x199,0x146,0x1fa)],_0x288726=getRequestHeaders(window[_0x30ea2d(-0x14f,-0x1a1,-0x204,-0x17f)]);const _0x5a0e82={};_0x5a0e82['chat_compl'+_0x30ea2d(-0xa6,-0x160,-0x20c,-0x218)+'ce']=_0x23a85c['LMxeQ'],_0x5a0e82['custom_url']=_0x456610,_0x5a0e82[_0xc2501f(0x154,0x122,0x21d,0x188)+_0xc2501f(0x26e,0x222,0x23b,0x1be)+'rs']=_0xc2501f(0x153,0xd5,0x13d,0xb2)+_0x30ea2d(-0x213,-0x1ee,-0x218,-0x24a)+_0xc2501f(0x13d,0x16b,0x82,0x124)+_0x229e6a+'\x22',_0x5a0e82['model']=_0x51e03d,_0x5a0e82[_0xc2501f(0x107,0x19f,0x1d3,0x18e)]=_0x500cdc,_0x5a0e82[_0x30ea2d(-0x261,-0x2a0,-0x328,-0x28d)+'e']=_0x2d8402,_0x5a0e82[_0xc2501f(0x2c3,0x258,0x1ab,0x211)]=_0x362acd,_0x5a0e82[_0xc2501f(0x165,0x1b6,0xfa,0x18c)]=_0x10fdbb,_0x5a0e82[_0xc2501f(0x87,0xe6,0x136,0x133)]=![],_0x2840d2=_0x5a0e82;}_0x5dc384&&_0x23a85c['bCJva'](_0x5dc384,_0x23a85c[_0x30ea2d(-0x104,-0x1bc,-0x158,-0x20a)]);try{if(_0x23a85c[_0xc2501f(0x1e,0x115,0xf7,0xd3)](_0x23a85c[_0x30ea2d(-0x254,-0x211,-0x1e3,-0x185)],_0x23a85c[_0x30ea2d(-0x21f,-0x211,-0x18b,-0x268)]))return _0xe6357d[_0x30ea2d(-0x32b,-0x2ad,-0x263,-0x285)](_0x3b72f5,null,0x15d4+0x30e+-0x18e0);else{const _0xcd9061=await _0x23a85c[_0xc2501f(0xe2,0xe7,0x40,0xc7)](fetch,_0x2e6717,{'method':_0xc2501f(0x162,0x180,0x1b0,0x14b),'headers':_0x288726,'body':JSON['stringify'](_0x2840d2),'signal':_0x3f344f}),_0x1759a6=await _0xcd9061[_0x30ea2d(-0x21a,-0x29e,-0x311,-0x2e3)]();if(_0x1759a6[_0x30ea2d(-0x12b,-0x178,-0x1e5,-0x192)]){let _0x29ab5a;if(typeof _0x1759a6['error']===_0x23a85c[_0xc2501f(0x29d,0x15c,0x2b0,0x215)]&&_0x1759a6[_0x30ea2d(-0x19b,-0x178,-0x200,-0x18b)][_0x30ea2d(-0x234,-0x210,-0x210,-0x182)]){if(_0x23a85c[_0xc2501f(0xf6,0x162,0x15e,0xea)]===_0x23a85c['BBLYt'])_0x1c378f=_0x23a85c[_0xc2501f(0x250,0x1dc,0x111,0x1a5)](_0x27b689,_0x23a85c['nZVbj']);else{_0x29ab5a=''+_0x1759a6[_0x30ea2d(-0x10b,-0x178,-0x1aa,-0x19b)][_0xc2501f(0x126,0xe4,0xc9,0x15d)];const _0x2d15ec=[];if(_0x1759a6[_0xc2501f(0x1af,0x1c7,0x146,0x1f5)][_0x30ea2d(-0x256,-0x2c7,-0x27b,-0x240)])_0x2d15ec[_0x30ea2d(-0x27d,-0x1dd,-0x160,-0x14d)](_0xc2501f(0x194,0x95,0x1e0,0x137)+_0x1759a6['error']['type']);if(_0x1759a6[_0xc2501f(0x1dc,0x144,0x1c5,0x1f5)][_0xc2501f(0x158,0x196,0x161,0x167)])_0x2d15ec['push'](_0xc2501f(0x209,0x21e,0x1ba,0x1de)+_0x1759a6['error'][_0x30ea2d(-0x26c,-0x206,-0x1b8,-0x183)]);if(_0x23a85c['vlnYn'](_0x2d15ec[_0x30ea2d(-0x21b,-0x245,-0x297,-0x18c)],0x134e+-0x423+-0xf2b*0x1)){if(_0x23a85c['wFuHu']!==_0x23a85c[_0xc2501f(0x13e,0x161,0x141,0xe8)])_0x29ab5a+='\x20('+_0x2d15ec[_0xc2501f(0xf8,0x141,0xa9,0xbd)](',\x20')+')';else{if(!_0x534245[_0x30ea2d(-0x259,-0x276,-0x2b9,-0x2ae)])return;if(!_0x5aa544[_0x30ea2d(-0x2bf,-0x252,-0x249,-0x197)]||_0x23a85c[_0xc2501f(0x15e,0x137,0x1a7,0x1c8)](_0x5a3ee6[_0xc2501f(0x146,0x19b,0x15b,0x11b)][_0x30ea2d(-0x156,-0x1ac,-0x18f,-0x18d)](),''))return;if(_0x23a85c['NSexk'](_0x37e2c2[_0xc2501f(0x219,0x170,0x238,0x1c5)+'e'],_0x30ea2d(-0x257,-0x200,-0x1e0,-0x1ed))){if(!_0x1ab38f||!_0x5ca41e(_0x587f26[_0xc2501f(0x13b,0xa6,0x1ab,0x136)+'ds'],_0x45fd5f))return;}const _0x57d527={};_0x57d527[_0x30ea2d(-0x20e,-0x24a,-0x2a3,-0x23a)]=_0x219512[_0xc2501f(0x146,0x89,0x187,0x123)]||_0x23a85c[_0x30ea2d(-0x1ed,-0x297,-0x2de,-0x253)],_0x57d527['content']=_0x4627a2['content'],_0x21479c[_0xc2501f(0x132,0x1de,0xfb,0x190)](_0x57d527);}}}}else{if(_0x23a85c[_0x30ea2d(-0x168,-0x1a5,-0x1e8,-0x12e)](_0x23a85c[_0xc2501f(0x1a2,0x181,0xf3,0x114)],_0x30ea2d(-0x2eb,-0x235,-0x2e3,-0x17a)))_0x29ab5a=''+JSON[_0xc2501f(0x69,0x13,0x5b,0xc0)](_0x1759a6['error']);else{const _0x3df792={};_0x3df792[_0xc2501f(0x1c1,0x167,0x9c,0x115)]=_0x23a85c[_0x30ea2d(-0xd7,-0x15d,-0xff,-0x11f)];const _0x54abbb=_0x3df792;_0x1338aa[_0xc2501f(0x1fd,0x1cc,0x288,0x1fb)][_0x30ea2d(-0x15f,-0x1b0,-0x228,-0x215)](_0x1b5316=>{function _0x254bb2(_0x22c18e,_0x492abd,_0x1dc2e7,_0x5b5076){return _0xc2501f(_0x22c18e-0xd4,_0x5b5076,_0x1dc2e7-0x8,_0x1dc2e7- -0x3c7);}if(_0x1b5316['user']&&_0x1b5316[_0x21d7c0(-0x240,-0x1a6,-0x16d,-0x1ff)][_0x21d7c0(-0x234,-0x19a,-0x22b,-0x1fe)]()!==''){const _0x5497f7={};_0x5497f7['role']=_0x254bb2(-0x16f,-0x21f,-0x207,-0x220),_0x5497f7[_0x21d7c0(-0x354,-0x262,-0x1ee,-0x2a4)]=_0x1b5316[_0x254bb2(-0x157,-0x25e,-0x207,-0x1c3)],_0x1c97ff[_0x21d7c0(-0x17f,-0x216,-0x193,-0x22f)](_0x5497f7);}function _0x21d7c0(_0x24abf3,_0x542a8e,_0x3d0dcc,_0x245293){return _0x30ea2d(_0x24abf3-0x1c7,_0x245293- -0x52,_0x3d0dcc-0x194,_0x3d0dcc);}if(_0x1b5316[_0x21d7c0(-0x272,-0x172,-0x159,-0x1f1)]&&_0x1b5316[_0x21d7c0(-0x2a7,-0x143,-0x1f2,-0x1f1)][_0x254bb2(-0x270,-0x229,-0x206,-0x28e)]()!==''){const _0x186b87={};_0x186b87[_0x254bb2(-0x32e,-0x2db,-0x2a4,-0x2d0)]=_0x54abbb[_0x254bb2(-0x2d3,-0x303,-0x2b2,-0x26d)],_0x186b87[_0x254bb2(-0x33c,-0x206,-0x2ac,-0x2f3)]=_0x1b5316[_0x254bb2(-0x22e,-0x1bc,-0x1f9,-0x202)],_0x547af8[_0x21d7c0(-0x1aa,-0x262,-0x2d2,-0x22f)](_0x186b87);}});}}throw new Error(_0x29ab5a);}if(!_0xcd9061['ok']){if(_0x23a85c[_0xc2501f(0x12e,0x24a,0x117,0x1c8)](_0x23a85c[_0xc2501f(0x1f9,0x1b2,0x17e,0x205)],_0x23a85c[_0x30ea2d(-0x2cb,-0x28b,-0x21b,-0x25a)])){if(!_0x145ce7||!_0x23a85c[_0x30ea2d(-0x32a,-0x2a6,-0x341,-0x251)](_0x2e5726,_0x468910[_0x30ea2d(-0x273,-0x237,-0x224,-0x27b)+'ds'],_0x439ccc))return;}else throw new Error(_0xc2501f(0x193,0x155,0x1f9,0x20b)+_0xcd9061[_0xc2501f(0x198,0x1c9,0x13d,0x16a)]+'\x20'+_0xcd9061[_0x30ea2d(-0x1c1,-0x1d3,-0x264,-0x15d)]);}const _0x2582f5=_0x1759a6[_0x30ea2d(-0x275,-0x23c,-0x21b,-0x27b)]?.[0x1ae7+0x1*-0x5f2+-0x431*0x5]?.['message']?.[_0x30ea2d(-0x1fc,-0x252,-0x237,-0x2ac)]||'';!_0x2582f5&&toastr[_0x30ea2d(-0x214,-0x228,-0x1e9,-0x259)](_0x23a85c[_0x30ea2d(-0x2ab,-0x24c,-0x220,-0x2a0)]);_0x5dc384&&_0x23a85c['FSsio'](_0x5dc384,_0x2582f5);_0x23a85c[_0xc2501f(0x1d4,0x224,0x18c,0x1bb)](addLog,_0xc2501f(0x211,0x226,0x16e,0x17b)+_0x30ea2d(-0x21e,-0x2cc,-0x277,-0x294)),_0x23a85c['bCJva'](addLog,_0x2582f5),addLog(_0x30ea2d(-0x295,-0x229,-0x213,-0x28c)+'请求完成\x20====='),taskQueue['completeTa'+'sk'](_0x47e95f,!![]),llmTaskControllers[_0xc2501f(0x14c,0x142,0x162,0xe0)](_0x47e95f);const _0x3b5c4e={};_0x3b5c4e[_0xc2501f(0x135,0x1f9,0x1ae,0x14f)]=!![],_0x3b5c4e[_0xc2501f(0x1cd,0x1a7,0x1ed,0x196)]=_0x2582f5,_0x3b5c4e['id']=_0x52accc,eventSource[_0xc2501f(0x23a,0x23e,0x24c,0x206)](eventNames[_0x30ea2d(-0x2bf,-0x294,-0x2cf,-0x266)+_0x30ea2d(-0x2ac,-0x1ff,-0x241,-0x19e)],_0x3b5c4e);}}catch(_0x48b617){if(_0x23a85c['NSexk'](_0x48b617['name'],_0x23a85c['nWJmV'])){_0x46f8e3=!![],console[_0x30ea2d(-0x2a0,-0x292,-0x310,-0x306)](_0xc2501f(0xd3,0xe4,0x143,0x113)+_0xc2501f(0xea,0x73,0x17,0xba)+_0xc2501f(0x62,0x15d,0x4d,0xc8)),taskQueue[_0x30ea2d(-0x2d2,-0x2c1,-0x2a1,-0x2f4)+'us'](_0x47e95f,TaskStatus[_0xc2501f(0x15e,0x1c6,0x1ed,0x154)]),llmTaskControllers[_0xc2501f(0x10d,0xfe,0xeb,0xe0)](_0x47e95f);const _0x4816e6={};_0x4816e6['name']=_0x23a85c[_0x30ea2d(-0x21f,-0x180,-0x192,-0x17b)],_0x4816e6[_0x30ea2d(-0x2ab,-0x210,-0x21f,-0x21b)]=_0x23a85c[_0x30ea2d(-0x119,-0x16f,-0x124,-0x1d8)];const _0x31d059={};_0x31d059[_0xc2501f(0x15b,0xc5,0x146,0x14f)]=![],_0x31d059['result']=null,_0x31d059['id']=_0x52accc,_0x31d059[_0xc2501f(0x20c,0x1a9,0x1d6,0x1f5)]=_0x4816e6,eventSource[_0x30ea2d(-0x1b9,-0x167,-0x103,-0x1c4)](eventNames['LLM_EXECUT'+_0xc2501f(0x1bd,0x10a,0x1f3,0x16e)],_0x31d059);return;}console[_0x30ea2d(-0x1c5,-0x178,-0x1e7,-0x16d)](_0x23a85c[_0xc2501f(0x173,0x222,0x216,0x1c3)],_0x48b617);const _0x5936f2=_0x30ea2d(-0x17f,-0x21d,-0x169,-0x1a3)+_0x48b617[_0xc2501f(0xe2,0x15b,0x212,0x15d)];_0x5dc384&&_0x23a85c['FUhau'](_0x5dc384,_0x5936f2);toastr['error'](_0x48b617[_0x30ea2d(-0x1a1,-0x210,-0x21f,-0x2a3)]),taskQueue['completeTa'+'sk'](_0x47e95f,![]),llmTaskControllers[_0x30ea2d(-0x256,-0x28d,-0x1e9,-0x24b)](_0x47e95f);const _0x5725b8={};_0x5725b8[_0x30ea2d(-0x175,-0x21e,-0x19f,-0x2ab)]=![],_0x5725b8[_0xc2501f(0x208,0x167,0x22e,0x196)]=_0x5936f2,_0x5725b8['id']=_0x52accc,eventSource[_0xc2501f(0x29f,0x15f,0x24f,0x206)](eventNames[_0xc2501f(0x21,0xac,0x178,0xd9)+_0x30ea2d(-0x1fc,-0x1ff,-0x1b3,-0x17d)],_0x5725b8);}finally{if(_0x23a85c['ASgXC'](_0xc2501f(0x118,0x183,0x158,0x1a0),_0x23a85c[_0xc2501f(0x16c,0xed,0x192,0x125)]))_0xdfed6b+='\x20('+_0x50478c['join'](',\x20')+')';else{if(_0x23a85c[_0x30ea2d(-0x2d9,-0x266,-0x291,-0x200)](currentLLMRequestController,_0x3dfd21)){if(_0x23a85c['ErAOi'](_0x23a85c[_0x30ea2d(-0x169,-0x177,-0x214,-0x1f1)],_0x23a85c[_0xc2501f(0x205,0x247,0x29c,0x1ec)]))currentLLMRequestController=null;else return _0x30d734;}(!_0x46f8e3||currentLLMRequestController===null)&&_0x23a85c['ZIHYt'](stopFabLoading);}}}export function createGetPromptHandler(_0x345c9a,_0x464a53){const _0x1cc310={'JhxWj':function(_0x56a243,_0x1354ab){return _0x56a243(_0x1354ab);}};return function(_0x4bf66e){const {id:_0xd9c0ab}=_0x4bf66e;if(!_0xd9c0ab)return;const _0xc56422=REQUEST_TYPE_NAMES[_0x345c9a]||_0x345c9a;console[_0x3a22f7(0x174,0xb8,0xbf,0xad)](_0xc80d48(-0x2f7,-0x34c,-0x36e,-0x34f)+_0x3a22f7(0x11d,0x14c,0x17b,0x121)+_0xc56422+('提示词获取请求\x20(I'+_0x3a22f7(0x175,0xf8,0x122,0x1b2))+_0xd9c0ab+')');const _0x20e210=_0x1cc310[_0xc80d48(-0x2d9,-0x2ab,-0x2ca,-0x2db)](buildPromptForRequestType,_0x345c9a),_0x419d19={};_0x419d19['prompt']=_0x20e210,_0x419d19['id']=_0xd9c0ab;function _0x3a22f7(_0x328e62,_0x464df1,_0x2af166,_0xbf214c){return _0x5644(_0x2af166-0x15,_0x464df1);}function _0xc80d48(_0x4216d3,_0x47e732,_0xef502f,_0x533d4e){return _0x5644(_0xef502f- -0x3e1,_0x533d4e);}eventSource['emit'](_0x464a53,_0x419d19);};}export function createExecuteHandler(_0x3d9230,_0x565e10,_0x2ede89=null){const _0x2eb9e5={'rPIAZ':function(_0x3d1fc9,_0x43a40f){return _0x3d1fc9!==_0x43a40f;},'EAqUX':'xIIJt','cqeeR':'FZWTD','FtyNv':function(_0xb66b03){return _0xb66b03();}};return async function(_0x124e63){function _0x1b02df(_0x119900,_0x3db33c,_0x29eec1,_0x2478bb){return _0x5644(_0x2478bb- -0x19a,_0x29eec1);}function _0x10b469(_0x100ee6,_0x249d03,_0x305537,_0x2660aa){return _0x5644(_0x2660aa-0x1d4,_0x305537);}if(_0x2eb9e5[_0x1b02df(-0x7c,0x13,-0xbe,-0x8e)](_0x2eb9e5[_0x10b469(0x261,0x38f,0x306,0x30b)],_0x2eb9e5[_0x10b469(0x350,0x2e6,0x2d0,0x335)])){const _0x596fd7=_0x2ede89?_0x2eb9e5[_0x1b02df(-0x2d,0x50,0x8e,0x29)](_0x2ede89):null;await executeTypedLLMRequest(_0x124e63,_0x3d9230,_0x565e10,_0x596fd7);}else return!!_0x5cc1a6;};}