(function(_0x4bffad,_0x10d136){function _0x16e873(_0x3e65cf,_0x15a2b8,_0x4869c4,_0x19ed37){return _0x2980(_0x3e65cf- -0x76,_0x4869c4);}function _0xcf473f(_0x5469bb,_0x548493,_0x1599e4,_0x37f9dd){return _0x2980(_0x37f9dd- -0x389,_0x548493);}const _0x30633f=_0x4bffad();while(!![]){try{const _0xd178ad=parseInt(_0xcf473f(-0x11d,-0x213,-0x1d5,-0x18f))/(0x14b8+0x55b*0x2+-0x5*0x649)+-parseInt(_0x16e873(0x1c5,0x279,0x13f,0x1b5))/(0x7c6+0x111c+-0x18e*0x10)*(parseInt(_0xcf473f(0x33,0x1a,-0xf9,-0x80))/(0xb4*0x13+-0x2b6*-0xa+-0x2875))+-parseInt(_0xcf473f(-0xa1,-0x170,-0x17d,-0xe1))/(-0x306+-0x2347+0x2651)*(parseInt(_0x16e873(0x2cb,0x28a,0x21e,0x384))/(-0x3e*0x4f+-0xcf5*-0x3+-0x13b8))+-parseInt(_0xcf473f(-0x7f,-0x1b1,-0x12d,-0xfe))/(0x1be+-0x15*0x10b+0x142f)+-parseInt(_0xcf473f(-0x1c7,-0x197,-0xe5,-0x167))/(-0xb8c+-0x25d3*0x1+0x1*0x3166)*(parseInt(_0x16e873(0x281,0x280,0x2ee,0x328))/(0x1f8b+0x259+-0x21dc))+-parseInt(_0x16e873(0x158,0xc7,0x1ff,0x1ab))/(0x1127*-0x1+-0x205f+0x1085*0x3)*(parseInt(_0x16e873(0x1a0,0x1c9,0x14a,0x1e6))/(0x589*-0x6+-0xbb4+0x2cf4))+parseInt(_0x16e873(0x209,0x210,0x255,0x14c))/(0x1090+-0xdf5*-0x1+-0x1e7a);if(_0xd178ad===_0x10d136)break;else _0x30633f['push'](_0x30633f['shift']());}catch(_0x4855f6){_0x30633f['push'](_0x30633f['shift']());}}}(_0x5e61,-0xd4fc2+-0xb7417+0x22bd92));const _0x437cec=(function(){let _0x5396dd=!![];return function(_0x2ab8a9,_0xd041b3){const _0xa3031f=_0x5396dd?function(){function _0x2497da(_0x5a4c00,_0x5936c4,_0x1acc11,_0x51757c){return _0x2980(_0x5936c4-0xe3,_0x51757c);}if(_0xd041b3){const _0x5d71d3=_0xd041b3[_0x2497da(0x347,0x34f,0x399,0x2eb)](_0x2ab8a9,arguments);return _0xd041b3=null,_0x5d71d3;}}:function(){};return _0x5396dd=![],_0xa3031f;};}());function _0x4a3367(_0x353e43,_0x20a4dd,_0x23c9ec,_0x1b07a7){return _0x2980(_0x20a4dd- -0x238,_0x1b07a7);}const _0x3fc013=_0x437cec(this,function(){const _0x27c286={};_0x27c286[_0x5cfb5a(0x3b8,0x39a,0x3a3,0x33a)]='(((.+)+)+)'+'+$';const _0x57c1fd=_0x27c286;function _0x5cfb5a(_0x1c63d9,_0x349e85,_0x102bbf,_0x150217){return _0x2980(_0x349e85-0x8b,_0x102bbf);}function _0x188394(_0x3d32af,_0x3bd8ba,_0x11e293,_0x2b3883){return _0x2980(_0x3d32af-0x1b5,_0x11e293);}return _0x3fc013[_0x188394(0x392,0x3ae,0x415,0x370)]()[_0x5cfb5a(0x34d,0x344,0x328,0x2bb)](_0x188394(0x3da,0x398,0x3ea,0x495)+'+$')[_0x5cfb5a(0x2d7,0x268,0x22a,0x2d0)]()[_0x188394(0x40d,0x382,0x382,0x3d6)+'r'](_0x3fc013)[_0x188394(0x46e,0x4f2,0x500,0x3ca)](_0x57c1fd[_0x188394(0x4c4,0x53b,0x417,0x571)]);});_0x3fc013();import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';function _0x150b91(_0x1797fe,_0x49d88a,_0x4dfccb,_0x31ed7d){return _0x2980(_0x49d88a- -0x19d,_0x4dfccb);}import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on']('st_chatu8_'+_0x150b91(0xc0,0x96,0x115,0xa9)+_0x150b91(0xdb,0xfc,0x11c,0x1a4),({taskId:_0x407c08})=>{const _0x53b091={};_0x53b091[_0xbb496(0x2d9,0x195,0x19b,0x24f)]=function(_0x1dc496,_0x2199ed){return _0x1dc496!==_0x2199ed;};function _0xbb496(_0x30e74e,_0x3ddca3,_0x202d8b,_0x5efc60){return _0x4a3367(_0x30e74e-0x5a,_0x5efc60-0x1bd,_0x202d8b-0x27,_0x3ddca3);}_0x53b091['gsAAU']='MBHMl';const _0x1edc72=_0x53b091;function _0x15e9b0(_0x745322,_0x1e2c3f,_0x1ad3cb,_0x353a06){return _0x150b91(_0x745322-0xbb,_0x1e2c3f- -0x243,_0x745322,_0x353a06-0xd5);}const _0x53d867=llmTaskControllers[_0xbb496(0x246,0x201,0x327,0x2a5)](_0x407c08);_0x53d867&&(_0x1edc72[_0x15e9b0(-0x12d,-0x116,-0xad,-0x6b)](_0x1edc72[_0xbb496(0x171,0x1b1,0x242,0x22b)],_0x1edc72['gsAAU'])?_0x31877d():(_0x53d867[_0x15e9b0(-0xed,-0xff,-0x116,-0x90)](),llmTaskControllers[_0xbb496(0x226,0x298,0x2f4,0x2c2)](_0x407c08),console[_0xbb496(0xcd,0x1bb,0x1f9,0x17e)](_0x15e9b0(-0xbb,-0x14c,-0x14c,-0x11f)+_0x15e9b0(-0xa4,-0x9e,-0x138,-0x31)+_0x407c08)));});function _0x2980(_0x341c43,_0x4ceb58){_0x341c43=_0x341c43-(-0x3f6+0x1*0x1cd+-0x1*-0x3f5);const _0x12f31d=_0x5e61();let _0x13147a=_0x12f31d[_0x341c43];if(_0x2980['bJWnri']===undefined){var _0x556689=function(_0x47a4a4){const _0xae96cf='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x410852='',_0x46afe7='',_0x18130d=_0x410852+_0x556689;for(let _0x2618bc=0x2113+-0x1d99*0x1+-0x37a,_0x137897,_0x5abca2,_0x22f847=-0x33*0xbf+-0x23a4+-0x6b3*-0xb;_0x5abca2=_0x47a4a4['charAt'](_0x22f847++);~_0x5abca2&&(_0x137897=_0x2618bc%(-0x1b83+-0x17*-0x13+0x19d2)?_0x137897*(-0x621*0x2+0x12d8+-0x656)+_0x5abca2:_0x5abca2,_0x2618bc++%(-0xbdc+-0x8a7+0x1487))?_0x410852+=_0x18130d['charCodeAt'](_0x22f847+(-0x40*-0x1d+0x7*0x57f+-0x1*0x2daf))-(-0xeee+-0x46d*0x3+-0x1*-0x1c3f)!==-0xf7f+-0x159d+0x251c?String['fromCharCode'](-0xf26+0xbfc+0x429&_0x137897>>(-(-0x11*-0xa1+-0x1ea*-0x1+-0xc99)*_0x2618bc&-0x2*-0x390+-0x1cc3+0x15a9)):_0x2618bc:0x5bb*0x5+-0x1*-0x28f+-0x1f36){_0x5abca2=_0xae96cf['indexOf'](_0x5abca2);}for(let _0x12beba=-0x125b+-0x1*0x1a02+-0x115*-0x29,_0x4274d8=_0x410852['length'];_0x12beba<_0x4274d8;_0x12beba++){_0x46afe7+='%'+('00'+_0x410852['charCodeAt'](_0x12beba)['toString'](0x26cb+-0x1ff3*-0x1+-0x46ae))['slice'](-(0x1e9a+-0x1a*-0x167+0x165a*-0x3));}return decodeURIComponent(_0x46afe7);};_0x2980['RxsIkx']=_0x556689,_0x2980['KNbZmF']={},_0x2980['bJWnri']=!![];}const _0x41d197=_0x12f31d[-0x1e56+-0x737*0x1+0x258d],_0x535166=_0x341c43+_0x41d197,_0x4b5105=_0x2980['KNbZmF'][_0x535166];if(!_0x4b5105){const _0x106a48=function(_0x56d37f){this['NxZhLx']=_0x56d37f,this['hMYNRM']=[0x7e6+-0x1059+0x874,-0x2*-0xe7f+0x117*0x18+-0x1b93*0x2,0x1*0x26f9+0x3c2+-0x1*0x2abb],this['EOmZrM']=function(){return'newState';},this['qenLaG']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['CLJUob']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x106a48['prototype']['hiFDVR']=function(){const _0x468024=new RegExp(this['qenLaG']+this['CLJUob']),_0x4b0e21=_0x468024['test'](this['EOmZrM']['toString']())?--this['hMYNRM'][-0x7d7+-0x1*0x2064+0x283c]:--this['hMYNRM'][-0x174b+0x2432+-0xce7];return this['ZrThyq'](_0x4b0e21);},_0x106a48['prototype']['ZrThyq']=function(_0x5a31f6){if(!Boolean(~_0x5a31f6))return _0x5a31f6;return this['cetWEc'](this['NxZhLx']);},_0x106a48['prototype']['cetWEc']=function(_0x1d4a4f){for(let _0x408e04=-0x19b*-0x1+-0x2*-0x517+-0xbc9,_0x19ad43=this['hMYNRM']['length'];_0x408e04<_0x19ad43;_0x408e04++){this['hMYNRM']['push'](Math['round'](Math['random']())),_0x19ad43=this['hMYNRM']['length'];}return _0x1d4a4f(this['hMYNRM'][-0x2b6*0x8+0x1131+0x47f]);},new _0x106a48(_0x2980)['hiFDVR'](),_0x13147a=_0x2980['RxsIkx'](_0x13147a),_0x2980['KNbZmF'][_0x535166]=_0x13147a;}else _0x13147a=_0x4b5105;return _0x13147a;}export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x1d3717){currentLLMRequestController=_0x1d3717;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){function _0x4b42c2(_0x5ea88e,_0x4a83e6,_0x386bf3,_0x379057){return _0x150b91(_0x5ea88e-0x3c,_0x379057- -0xd1,_0x5ea88e,_0x379057-0x197);}const _0x5cb4d1={};function _0x49ce4(_0x49e008,_0x5a3fe0,_0x4f8b85,_0x431ce5){return _0x150b91(_0x49e008-0xc7,_0x5a3fe0-0xc4,_0x431ce5,_0x431ce5-0xf6);}_0x5cb4d1[_0x4b42c2(0x2f,-0x46,-0xbd,-0x44)]=_0x4b42c2(0x5,-0x4f,-0x4c,0xa);const _0x45fbc7=_0x5cb4d1;currentLLMRequestController&&(currentLLMRequestController[_0x4b42c2(0x29,0x105,-0x47,0x73)](),toastr['info'](_0x45fbc7[_0x49ce4(0x1da,0x151,0x115,0x1ce)]));}export function formatPromptForDisplay(_0x1b5eff){const _0x2bfec2={'OdBZr':function(_0x1aa93,_0x1e3c5c,_0x436a1d){return _0x1aa93(_0x1e3c5c,_0x436a1d);},'KaWAN':function(_0x39b350,_0x1bde3a){return _0x39b350===_0x1bde3a;},'jLchx':_0x20634e(0x48d,0x4f9,0x444,0x4c8),'zxBMt':'sherO','AbjiB':_0x22e2c9(-0x4c,-0x1c,0x2d,0xbf),'bRKjb':_0x22e2c9(0x10d,-0x3,0x94,0x2),'mhTNb':'CcBWP','kNOHB':function(_0x50138e,_0x17984b){return _0x50138e/_0x17984b;},'SWWWI':'cqfiu','LvIaO':function(_0x2c6565,_0x12f6cc){return _0x2c6565===_0x12f6cc;},'NNdFD':'ikHSI','tklCm':_0x22e2c9(0xea,0x71,0x55,0x82),'rgPUz':function(_0x43bcbc,_0x17d908){return _0x43bcbc(_0x17d908);},'CtqQq':'string','aEzrA':_0x22e2c9(-0x1e,0x2a,0x87,0x79),'wQfNI':function(_0x20df7b,_0x414fc3){return _0x20df7b!==_0x414fc3;}};function _0x22e2c9(_0x2cefc8,_0x1b9031,_0x5b22ea,_0x1ebbea){return _0x150b91(_0x2cefc8-0x148,_0x5b22ea- -0x21,_0x1ebbea,_0x1ebbea-0x123);}if(_0x2bfec2[_0x22e2c9(0x97,0x1cb,0x144,0x9d)](typeof _0x1b5eff,_0x20634e(0x53a,0x617,0x601,0x567)))return _0x1b5eff;function _0x20634e(_0x3feb3b,_0x7af483,_0x48e51f,_0x10d1ef){return _0x4a3367(_0x3feb3b-0x12,_0x10d1ef-0x492,_0x48e51f-0x11a,_0x7af483);}if(Array['isArray'](_0x1b5eff)){const _0x3717a3=[];return _0x1b5eff[_0x20634e(0x412,0x531,0x49d,0x4be)]((_0x2b6f9d,_0x471c69)=>{const _0x4c5c8b={'gDdrf':function(_0x419c24,_0x2251d3,_0x464d34){function _0x1e9f79(_0x11f5db,_0xfe8d02,_0x2dfc75,_0x38413a){return _0x2980(_0x2dfc75-0x1e9,_0x38413a);}return _0x2bfec2[_0x1e9f79(0x53e,0x549,0x4f5,0x541)](_0x419c24,_0x2251d3,_0x464d34);},'jiMKp':function(_0x55b693,_0x5dce82){function _0x51bc20(_0x5eea27,_0x1ad245,_0x36816b,_0x6b26fb){return _0x2980(_0x1ad245- -0x1fe,_0x6b26fb);}return _0x2bfec2[_0x51bc20(0xba,0x104,0x49,0x1a8)](_0x55b693,_0x5dce82);},'KpCfo':function(_0x4f9168,_0x1ff06b,_0x1bab78){return _0x4f9168(_0x1ff06b,_0x1bab78);},'vdSBi':_0x2bfec2[_0x531bfc(0x54d,0x4e4,0x5b4,0x59c)],'FQAlR':function(_0x2e48ad,_0xbc993c){function _0x43771a(_0x3a01da,_0x1ef6c5,_0x12da79,_0x4ce280){return _0x531bfc(_0x12da79,_0x1ef6c5-0x1a0,_0x12da79-0x94,_0x4ce280- -0x289);}return _0x2bfec2[_0x43771a(0x476,0x431,0x419,0x435)](_0x2e48ad,_0xbc993c);},'izyTF':_0x47ef0e(0x1d1,0x1b1,0x108,0xfd),'gdGWe':_0x531bfc(0x5aa,0x634,0x5a6,0x609),'dwUQS':function(_0x3de185,_0x1b5293){return _0x3de185===_0x1b5293;},'xVcSy':_0x2bfec2[_0x47ef0e(0x101,0x195,0x1a2,0x17c)],'rrkBa':'sJAHk','aDppc':_0x2bfec2['AbjiB'],'rLzCU':_0x2bfec2[_0x47ef0e(0x145,0x203,0x2a0,0x2ae)],'JhLNH':_0x2bfec2[_0x531bfc(0x68d,0x67b,0x5cc,0x5d5)],'uPnvA':function(_0x394c15,_0x2db941){function _0x742a5f(_0xe0bd4d,_0x46bae8,_0x4ec25c,_0xb7d61f){return _0x47ef0e(_0x46bae8,_0xb7d61f- -0x86,_0x4ec25c-0x11a,_0xb7d61f-0xb0);}return _0x2bfec2[_0x742a5f(0x2b7,0x276,0x276,0x226)](_0x394c15,_0x2db941);},'Ahoyy':function(_0xf37c81,_0x428be1){return _0xf37c81*_0x428be1;},'vDfmN':_0x2bfec2[_0x47ef0e(0x100,0x192,0x24b,0x1cb)]};function _0x47ef0e(_0x1761b0,_0xeee7d,_0x5b284e,_0x17538c){return _0x20634e(_0x1761b0-0x112,_0x1761b0,_0x5b284e-0x133,_0xeee7d- -0x2b1);}function _0x531bfc(_0xd41a80,_0x4c04e1,_0x44cc37,_0x4f61aa){return _0x20634e(_0xd41a80-0x1ee,_0xd41a80,_0x44cc37-0x15e,_0x4f61aa-0x162);}if(_0x2bfec2[_0x47ef0e(0x2d8,0x232,0x174,0x221)](_0x2bfec2[_0x47ef0e(0x28e,0x229,0x280,0x220)],_0x47ef0e(0x1d7,0x187,0x19a,0x1b8))){if(!_0x4d7154||!_0x4c5c8b['gDdrf'](_0x496987,_0xd29290[_0x531bfc(0x633,0x63b,0x6c4,0x671)+'ds'],_0x1673bc))return;}else{const _0x5738b2=_0x2b6f9d[_0x531bfc(0x574,0x69d,0x5e3,0x608)]||_0x2bfec2[_0x47ef0e(0x14d,0x1f1,0x29d,0x149)],_0x39acc8=_0x2bfec2['rgPUz'](getRoleLabel,_0x5738b2);_0x3717a3[_0x47ef0e(0x272,0x245,0x236,0x1b8)](''+'═'[_0x47ef0e(0x241,0x18e,0x102,0x21c)](0x1072+-0xe71+0x1*-0x1cf)),_0x3717a3['push']('【'+_0x39acc8+'】'),_0x3717a3['push'](''+'─'[_0x531bfc(0x59a,0x573,0x523,0x5a1)](0x1bd+0x27d*-0xb+-0x2*-0xcea));const _0x11baad=_0x2b6f9d[_0x47ef0e(0x2b9,0x208,0x167,0x28c)];if(typeof _0x11baad===_0x2bfec2[_0x531bfc(0x61f,0x704,0x6c0,0x680)])_0x3717a3[_0x47ef0e(0x2d2,0x245,0x19a,0x18e)](_0x11baad);else Array['isArray'](_0x11baad)&&_0x11baad[_0x47ef0e(0x159,0x20d,0x2b4,0x1a5)](_0x9defcc=>{function _0x1f2d60(_0x407087,_0x4e0fbc,_0x3c1b68,_0x5bde48){return _0x47ef0e(_0x5bde48,_0x407087- -0x275,_0x3c1b68-0x7b,_0x5bde48-0x29);}const _0x5429b9={'zqfRP':function(_0x1a91e7,_0x4d49c7){function _0x215411(_0x2147d2,_0x2d0f46,_0x982c13,_0x16be2f){return _0x2980(_0x2d0f46-0x364,_0x16be2f);}return _0x4c5c8b[_0x215411(0x6c7,0x676,0x6b1,0x6ae)](_0x1a91e7,_0x4d49c7);},'WmxKa':function(_0x64ef71,_0x4d5f42,_0xdb56ce){function _0x2716dc(_0x493931,_0x456a68,_0x56dac8,_0x2652f3){return _0x2980(_0x493931- -0x82,_0x456a68);}return _0x4c5c8b[_0x2716dc(0x223,0x17b,0x20a,0x19a)](_0x64ef71,_0x4d5f42,_0xdb56ce);},'lusBa':_0x4c5c8b[_0x1f2d60(0x1d,-0x6a,0x7a,0x6f)]};function _0x5edbfa(_0x47b0ce,_0x3ebf7c,_0x52b272,_0x16f8dd){return _0x47ef0e(_0x47b0ce,_0x52b272-0x12a,_0x52b272-0x103,_0x16f8dd-0x199);}if(_0x4c5c8b['FQAlR'](_0x9defcc[_0x1f2d60(-0x2d,0x25,-0x32,0x57)],_0x4c5c8b[_0x5edbfa(0x41d,0x40c,0x3eb,0x417)]))_0x3717a3['push'](_0x9defcc[_0x1f2d60(-0xc4,-0xa,-0xf7,-0x17)]||'');else{if(_0x9defcc[_0x1f2d60(-0x2d,0x5e,-0x34,0xc)]===_0x4c5c8b[_0x5edbfa(0x449,0x44e,0x3fd,0x3ee)]){if(_0x4c5c8b[_0x5edbfa(0x3f4,0x31c,0x3cf,0x3d8)](_0x4c5c8b[_0x5edbfa(0x428,0x494,0x417,0x43e)],_0x4c5c8b[_0x1f2d60(-0xf4,-0x77,-0x19c,-0x78)]))return _0x3e58cf;else{const _0x5d4644=_0x9defcc[_0x1f2d60(-0x7f,-0xb,-0x38,0x6)]?.[_0x1f2d60(-0xa9,-0x10,-0x115,-0xc6)]||'';if(_0x5d4644[_0x1f2d60(-0xe,0x64,0x3c,-0x7f)](_0x4c5c8b['aDppc'])){if(_0x4c5c8b[_0x5edbfa(0x454,0x420,0x407,0x498)]!==_0x4c5c8b[_0x1f2d60(-0x31,0x44,-0x90,-0x53)]){const _0x51a8d1=_0x5d4644[_0x5edbfa(0x280,0x251,0x2b2,0x201)](/^data:([^;]+);/),_0x17996e=_0x51a8d1?_0x51a8d1[-0xb1b+0x1af5+0xfd9*-0x1]:_0x1f2d60(-0xb9,-0x44,-0x134,-0x142),_0x5dc459=_0x5d4644[_0x5edbfa(0x291,0x384,0x33e,0x32b)](',')[0x826+-0x81d+0x8*-0x1]||'',_0xbedccb=Math[_0x1f2d60(0x3a,0x1a,0xb8,-0x5e)](_0x4c5c8b[_0x5edbfa(0x3fd,0x2fd,0x390,0x319)](_0x4c5c8b[_0x1f2d60(-0xb4,-0x75,-0x55,-0x12f)](_0x5dc459['length'],-0x9f*0x11+-0x1234+0x3a*0x7f),-0x224+-0x3b*0xa2+0x277e)/(-0x23*0x27+0x11*-0x1c1+0x2726));_0x3717a3[_0x5edbfa(0x380,0x349,0x36f,0x2f6)](_0x5edbfa(0x270,0x270,0x2e7,0x26d)+':\x20'+_0x17996e+_0x5edbfa(0x329,0x326,0x2cb,0x245)+_0xbedccb+_0x5edbfa(0x3c3,0x3c2,0x354,0x3f1));}else{const _0x58d134=_0x720b92[_0x5edbfa(0x380,0x33f,0x33f,0x37e)](_0x4b846d,arguments);return _0x291698=null,_0x58d134;}}else{if(_0x4c5c8b[_0x1f2d60(0x46,0x29,-0x6a,0x43)](_0x4c5c8b['vDfmN'],_0x1f2d60(0x6d,0x11e,0xa,0x18))){if(!_0x44040d[_0x1f2d60(0x38,-0x73,0x69,0x7)])return;if(!_0x2449c6[_0x1f2d60(-0x6d,0x4f,-0x5,-0x9e)]||_0x5429b9[_0x1f2d60(-0x2b,0x37,-0x28,0x58)](_0xff0b7a[_0x5edbfa(0x3e6,0x381,0x332,0x2f6)][_0x1f2d60(0x13,0xb7,0x7b,0x73)](),''))return;if(_0x5429b9['zqfRP'](_0x18f630['triggerMod'+'e'],_0x5edbfa(0x359,0x3c6,0x3f4,0x39b))){if(!_0x368bcf||!_0x5429b9['WmxKa'](_0x22e556,_0x3fd2b9[_0x1f2d60(-0x17,-0xbb,0x4f,0x92)+'ds'],_0x51c548))return;}const _0x17639d={};_0x17639d['role']=_0x5427ba[_0x5edbfa(0x28b,0x28b,0x31f,0x372)]||_0x5429b9['lusBa'],_0x17639d[_0x1f2d60(-0x6d,-0x49,-0x6a,-0x35)]=_0x10c1be['content'],_0x10ef26[_0x1f2d60(-0x30,-0x9b,0x84,-0xa7)](_0x17639d);}else _0x3717a3['push'](_0x1f2d60(-0xeb,-0x1a3,-0x13b,-0x126)+_0x5d4644+']');}}}}});_0x3717a3[_0x47ef0e(0x301,0x245,0x1f7,0x1e0)]('');}}),_0x3717a3[_0x20634e(0x540,0x57f,0x4ef,0x583)]('\x0a');}if(_0x2bfec2[_0x20634e(0x48f,0x591,0x537,0x4e3)](typeof _0x1b5eff,_0x2bfec2[_0x20634e(0x5a9,0x532,0x568,0x57f)])&&_0x1b5eff!==null){if(_0x2bfec2['wQfNI'](_0x22e2c9(0xa5,0xe8,0x99,0x28),_0x20634e(0x622,0x5a6,0x5a7,0x568)))return JSON['stringify'](_0x1b5eff,null,-0x128*-0x1a+0x2de*0x1+0x1c*-0x12d);else{const _0x419477=_0x56d37f[_0x468024][_0x20634e(0x560,0x522,0x52a,0x4f8)+_0x20634e(0x574,0x53d,0x563,0x582)+'s']||{},_0x1982b9=_0x4b0e21[_0x5a31f6][_0x22e2c9(0x115,0x19b,0x12e,0x1a0)+'st_context'+_0x20634e(0x484,0x477,0x44b,0x43c)];return _0x419477[_0x1982b9]||_0x419477[_0x1d4a4f[_0x20634e(0x435,0x54b,0x41f,0x4d1)](_0x419477)[0x25*-0x5f+-0xc91*-0x2+-0xb67]]||{};}}return String(_0x1b5eff);}export function getRoleLabel(_0x3c63b6){const _0x419d7d={};function _0x50c9a6(_0x117608,_0x5e707a,_0x54e76d,_0x59359c){return _0x150b91(_0x117608-0xd2,_0x59359c-0x3db,_0x54e76d,_0x59359c-0x1e3);}_0x419d7d['Zxlle']=_0x50c9a6(0x4c3,0x4d7,0x611,0x558);function _0x2b575a(_0x714c4c,_0x528a4d,_0x5a58df,_0x232338){return _0x150b91(_0x714c4c-0x54,_0x232338- -0x1b3,_0x5a58df,_0x232338-0x19);}_0x419d7d[_0x2b575a(0x15,-0x11b,-0xb7,-0x80)]='AI助手';const _0x5dabef=_0x419d7d,_0x329ce={};_0x329ce[_0x50c9a6(0x4e0,0x517,0x536,0x514)]=_0x5dabef['Zxlle'],_0x329ce['user']='用户',_0x329ce['assistant']=_0x5dabef['blDrG'],_0x329ce['function']=_0x50c9a6(0x38d,0x41f,0x46c,0x433),_0x329ce[_0x2b575a(-0x16d,-0x18d,-0x1eb,-0x152)]='工具';const _0x256233=_0x329ce;return _0x256233[_0x3c63b6]||_0x3c63b6;}export function getCurrentLLMProfile(){const _0x4929ee=extension_settings[extensionName][_0x4b1498(0x202,0x1e9,0x1dc,0x270)+'es']||{};function _0x17e4e4(_0x1c3c4b,_0x1e2240,_0x7c6889,_0x5d0422){return _0x150b91(_0x1c3c4b-0x8b,_0x5d0422-0x3d0,_0x7c6889,_0x5d0422-0x174);}const _0x28e6c0=extension_settings[extensionName][_0x17e4e4(0x4da,0x500,0x606,0x56a)+'m_profile'];function _0x4b1498(_0x2aae95,_0x5c789c,_0x7b6ba6,_0x7efa5c){return _0x150b91(_0x2aae95-0x1a4,_0x7b6ba6-0xa4,_0x2aae95,_0x7efa5c-0x197);}return _0x4929ee[_0x28e6c0]||_0x4929ee[Object[_0x17e4e4(0x4a7,0x44b,0x500,0x4aa)](_0x4929ee)[0x123*0xd+0x500+0x13c7*-0x1]]||{};}export function getCurrentTestContext(){const _0x35192e=extension_settings[extensionName][_0x329f1b(0x3b6,0x3cd,0x3cd,0x340)+'xt_profile'+'s']||{};function _0x329f1b(_0x1f3da0,_0x343cbf,_0x401637,_0x1cdeb3){return _0x150b91(_0x1f3da0-0x37,_0x343cbf-0x2cc,_0x1cdeb3,_0x1cdeb3-0x1b7);}const _0x1300a4=extension_settings[extensionName]['current_te'+_0x329f1b(0x325,0x3cc,0x358,0x445)+_0x329f1b(0x32a,0x311,0x2b1,0x2c8)];function _0x2929d0(_0x9b87e0,_0x4e2c5a,_0x2cde40,_0x3988c4){return _0x150b91(_0x9b87e0-0x1db,_0x4e2c5a-0x429,_0x3988c4,_0x3988c4-0x129);}return _0x35192e[_0x1300a4]||_0x35192e[Object[_0x2929d0(0x4a4,0x503,0x481,0x529)](_0x35192e)[0x162d*-0x1+0x342+0x12eb]]||{};}export function getEffectiveConfigForRequestType(_0x478647){const _0x2f8ded=extension_settings[extensionName][_0x96e550(-0x168,-0x19a,-0x183,-0x1f9)+'t_type_con'+_0x96e550(-0xde,-0x151,-0x191,-0xf4)]||{},_0x34adc8={};_0x34adc8[_0x24c1c5(0x5f5,0x54b,0x646,0x655)+'e']='默认',_0x34adc8[_0x24c1c5(0x555,0x5c8,0x4f7,0x5fe)+_0x24c1c5(0x5c2,0x5db,0x588,0x674)]='默认';const _0x4807f9=_0x2f8ded[_0x478647]||_0x34adc8,_0x10e69b=extension_settings[extensionName]['llm_profil'+'es']||{},_0x40a143=extension_settings[extensionName]['test_conte'+_0x96e550(-0x83,-0x18,-0x13e,-0xca)+'s']||{};function _0x24c1c5(_0x1eea3e,_0x36a140,_0x1dcb8d,_0x108529){return _0x4a3367(_0x1eea3e-0xa5,_0x1eea3e-0x507,_0x1dcb8d-0x82,_0x108529);}const _0x95bf51=_0x4807f9[_0x96e550(-0x85,-0x3c,-0x127,-0x5e)+'e']||'默认',_0x251763=_0x10e69b[_0x95bf51]||_0x10e69b[Object[_0x96e550(-0x134,-0xc3,-0x8a,-0xc6)](_0x10e69b)[0x170d+0x2f*0xca+0x1*-0x3c23]]||{},_0x4ed897=_0x4807f9[_0x96e550(-0x125,-0x15e,-0xa1,-0xf9)+_0x24c1c5(0x5c2,0x5d1,0x578,0x603)]||'默认',_0x2ff212=_0x40a143[_0x4ed897]||_0x40a143[Object[_0x24c1c5(0x546,0x5bf,0x54b,0x560)](_0x40a143)[0x41*0x2+0x1*0x25eb+-0xccf*0x3]]||{},_0x57be6f={};_0x57be6f[_0x24c1c5(0x49f,0x4bb,0x51f,0x3e3)]=_0x251763[_0x96e550(-0x1db,-0x181,-0x21a,-0x204)]||'',_0x57be6f[_0x24c1c5(0x5b7,0x647,0x565,0x60f)]=_0x251763[_0x24c1c5(0x5b7,0x564,0x4f9,0x643)]||'',_0x57be6f[_0x24c1c5(0x4fb,0x474,0x509,0x45b)]=_0x251763[_0x24c1c5(0x4fb,0x458,0x482,0x483)]||'',_0x57be6f[_0x24c1c5(0x49c,0x402,0x3f2,0x415)+'e']=_0x251763['temperatur'+'e']??0xbe7+0x1b27+-0x270e+0.7,_0x57be6f[_0x96e550(-0x131,-0x83,-0x1a7,-0x11c)]=_0x251763[_0x24c1c5(0x549,0x48b,0x577,0x49c)]??-0x35e*0x4+-0x52a*-0x5+0x1*-0xc59,_0x57be6f[_0x24c1c5(0x5a3,0x53c,0x547,0x614)]=_0x251763['max_tokens']??-0x4*0x2b0+-0xe5d*0x2+0x1*0x297a,_0x57be6f['stream']=_0x251763[_0x96e550(-0x102,-0x66,-0x1a9,-0xf4)]??![];function _0x96e550(_0x3d5d9f,_0x1aea56,_0x4385c3,_0x4749dd){return _0x150b91(_0x3d5d9f-0x1be,_0x3d5d9f- -0x20e,_0x1aea56,_0x4749dd-0x1d6);}return _0x57be6f[_0x96e550(-0xb6,-0x14,-0x8e,-0x50)+'xy']=_0x251763[_0x96e550(-0xb6,0x8,-0xd7,-0xa1)+'xy']??![],_0x57be6f[_0x96e550(-0x68,-0x39,-0x56,-0x60)]=_0x2ff212,_0x57be6f;}export function buildPromptForRequestType(_0x5ef612,_0x5a9a21=''){const _0x2e1461={'DOFOs':_0x207c68(-0x11b,-0xb9,-0x19c,-0x12d),'AsWNp':function(_0x3da90e,_0x4e3da6){return _0x3da90e===_0x4e3da6;},'jAykA':function(_0x377b9a,_0x112a27,_0x1458a4){return _0x377b9a(_0x112a27,_0x1458a4);},'jKHZG':function(_0x2520ae,_0x2ce3f6){return _0x2520ae!==_0x2ce3f6;},'pHcOf':'fmTlJ','CnXiS':function(_0x5459e7,_0x5e4b82){return _0x5459e7!==_0x5e4b82;},'TERrC':_0x207c68(-0xfe,-0xdf,-0xfe,-0x118),'aWzMk':function(_0x177ad0,_0x55112b){return _0x177ad0!==_0x55112b;},'gPipq':'LmJEH','dJTRG':_0x486e41(0x2fd,0x25c,0x26a,0x325),'Vtvxn':function(_0x38c194,_0x1ce684){return _0x38c194(_0x1ce684);}},_0x4ba126=extension_settings[extensionName]['llm_reques'+_0x486e41(0x1eb,0x257,0x280,0x233)+_0x486e41(0x294,0x227,0x29b,0x26b)]||{},_0x45ad54={};_0x45ad54[_0x207c68(-0x10a,-0x123,-0x1af,-0x115)+_0x486e41(0x2ba,0x239,0x225,0x22b)]='默认';const _0x368b8d=_0x4ba126[_0x5ef612]||_0x45ad54,_0x1c0b41=_0x368b8d[_0x207c68(-0x121,-0x85,-0x62,-0x115)+_0x207c68(-0xfa,0x7,-0xf4,-0xa8)]||'默认',_0x4d3896=extension_settings[extensionName][_0x207c68(-0x198,-0x162,-0x76,-0xfd)+_0x486e41(0x2ef,0x2dc,0x239,0x308)+'s']||{},_0x4ba554=_0x4d3896[_0x1c0b41]||_0x4d3896[Object[_0x486e41(0x23e,0x1ec,0x2f3,0x19e)](_0x4d3896)[0xa9*0x7+0x2*0xbea+0x1*-0x1c73]]||{};function _0x207c68(_0x250ccb,_0x42b6e4,_0x313074,_0x13d4ad){return _0x4a3367(_0x250ccb-0x1b4,_0x13d4ad- -0x163,_0x313074-0xac,_0x250ccb);}const _0x69ffff=[];function _0x486e41(_0x2d1b71,_0x334e55,_0xabcebf,_0x677a7a){return _0x150b91(_0x2d1b71-0x1da,_0x2d1b71-0x164,_0x677a7a,_0x677a7a-0x68);}if(_0x4ba554[_0x486e41(0x1c4,0x279,0x263,0x281)]&&Array['isArray'](_0x4ba554[_0x207c68(-0x142,-0x14a,-0x15c,-0x19e)]))_0x4ba554[_0x207c68(-0x1b4,-0x1b0,-0x162,-0x19e)]['forEach'](_0x41c51e=>{const _0x117d7e={};function _0x22b754(_0x37f78,_0x456b85,_0x2f5fe4,_0x483baf){return _0x207c68(_0x456b85,_0x456b85-0x89,_0x2f5fe4-0xe9,_0x483baf-0x1f4);}_0x117d7e[_0x22b754(0xfb,0x106,0x121,0x89)]=_0x2e1461[_0x22b754(0x25,0x56,0xc9,0x66)];const _0x3d55e7=_0x117d7e;if(!_0x41c51e[_0x5589a8(0x119,0xce,0x43,0x71)])return;if(!_0x41c51e[_0x5589a8(0xc7,0x29,0x55,0x80)]||_0x2e1461[_0x22b754(0x22,-0x53,0xec,0x2f)](_0x41c51e['content']['trim'](),''))return;if(_0x2e1461[_0x5589a8(0xc,-0x60,-0x7a,0x0)](_0x41c51e['triggerMod'+'e'],_0x5589a8(0x15c,0xeb,0x188,0x196))){if(!_0x5a9a21||!_0x2e1461[_0x22b754(0x1c,0x12b,0x111,0x74)](checkTriggerWords,_0x41c51e[_0x5589a8(0x1f,0x7f,0x5f,0x5b)+'ds'],_0x5a9a21)){if(_0x2e1461[_0x5589a8(0x29,0x52,-0x1d,-0x67)](_0x22b754(0x11a,0x1b3,0x16f,0x172),_0x2e1461['pHcOf'])){const _0x4e8834={};_0x4e8834[_0x22b754(0x3d,0x47,0xb5,0xa5)]=_0x3d55e7[_0x5589a8(-0x4a,-0x6,-0x1,-0x4b)],_0x4e8834[_0x5589a8(-0x10,0x29,0x65,0x74)]=_0x91546a['user'],_0x149026[_0x5589a8(0x11d,0x66,-0x17,0xc2)](_0x4e8834);}else return;}}const _0x379a27={};_0x379a27[_0x22b754(0xf1,0xd4,0x15d,0xa5)]=_0x41c51e[_0x22b754(0x7b,0x4,0x58,0xa5)]||_0x5589a8(0x7b,0x38,0xcc,0x29),_0x379a27[_0x5589a8(-0x61,0x29,0x32,-0x39)]=_0x41c51e[_0x5589a8(0x2f,0x29,-0x4d,0xb2)];function _0x5589a8(_0x1992b4,_0xac076a,_0x50d37d,_0x3f62e9){return _0x486e41(_0xac076a- -0x1fd,_0xac076a-0x2,_0x50d37d-0xa7,_0x1992b4);}_0x69ffff['push'](_0x379a27);});else _0x4ba554['history']&&Array[_0x207c68(-0xe5,0xe,-0xa0,-0x70)](_0x4ba554['history'])&&_0x4ba554[_0x207c68(-0x59,-0x156,-0x141,-0xc4)][_0x207c68(-0xc7,-0x117,-0xe3,-0x137)](_0x57df06=>{function _0x54d67e(_0x775d97,_0xe6ee74,_0x36be03,_0x2c0cf9){return _0x486e41(_0x36be03- -0xb0,_0xe6ee74-0x10,_0x36be03-0xc3,_0xe6ee74);}function _0x17102f(_0x45e85d,_0x3780f1,_0x397f4a,_0x545da2){return _0x207c68(_0x545da2,_0x3780f1-0x1d8,_0x397f4a-0x13c,_0x45e85d-0x115);}if(_0x2e1461[_0x17102f(0x78,0xfd,-0x31,0xf1)](_0x2e1461['TERrC'],_0x2e1461[_0x54d67e(0x21a,0x269,0x245,0x299)]))throw _0x29ae4e;else{if(_0x57df06[_0x17102f(-0x18,-0x9b,0x93,-0x60)]&&_0x2e1461['CnXiS'](_0x57df06[_0x54d67e(0x164,0x229,0x185,0x152)][_0x54d67e(0x231,0x249,0x1f6,0x1ac)](),'')){const _0xab9b2e={};_0xab9b2e[_0x17102f(-0x3a,0x6b,-0x48,0x4b)]=_0x2e1461[_0x17102f(-0x79,-0x22,-0x3c,0x1f)],_0xab9b2e['content']=_0x57df06[_0x54d67e(0xd1,0x135,0x185,0xea)],_0x69ffff[_0x54d67e(0x254,0x164,0x1b3,0x26b)](_0xab9b2e);}if(_0x57df06[_0x17102f(0xb8,0xa9,0x4a,0x11c)]&&_0x2e1461[_0x54d67e(0x19d,0x1f4,0x1d1,0x1db)](_0x57df06[_0x54d67e(0x25b,0x21f,0x255,0x1f3)][_0x17102f(0x59,0x100,-0x30,0xb3)](),'')){if(_0x2e1461[_0x17102f(0x78,0x9,0x9,-0x42)](_0x2e1461[_0x54d67e(0x159,0x4d,0x108,0x19c)],_0x2e1461[_0x17102f(-0xb4,-0x13c,-0x10,-0x8a)])){const _0x122544={};_0x122544['role']=_0x54d67e(0x209,0x289,0x255,0x231),_0x122544[_0x17102f(-0x27,0x7e,-0x46,-0x66)]=_0x57df06[_0x54d67e(0x1c0,0x21d,0x255,0x19c)],_0x69ffff[_0x54d67e(0x255,0x17d,0x1b3,0x1af)](_0x122544);}else _0xd706c5[_0x17102f(0x16,0x0,0x59,0x62)](_0x531323[_0x17102f(-0x7e,-0xa9,-0x121,-0xaa)]||'');}}});const _0x270bda=_0x2e1461['Vtvxn'](mergeAdjacentMessages,_0x69ffff),_0x2b10f9=processRollPlaceholders(_0x270bda);return _0x2b10f9;}const _0x4e4a8d={};_0x4e4a8d[_0x150b91(0x25,0x74,0x57,0x6e)]=_0x150b91(0x130,0x12e,0x166,0xfb),_0x4e4a8d[_0x150b91(0x162,0x16b,0x184,0x1ab)+'n']=_0x150b91(0xa9,0x6f,0x8d,0x96),_0x4e4a8d[_0x4a3367(0x92,0x58,0xde,-0x1)+'ay']='角色/服装展示',_0x4e4a8d[_0x4a3367(-0x5f,0x3c,0x9b,0x63)+'y']='角色/服装修改',_0x4e4a8d[_0x4a3367(0x69,-0x33,-0x8,0x2f)+'n']='翻译',_0x4e4a8d[_0x4a3367(0x123,0xc2,0x135,0xe9)]='Tag修改';const REQUEST_TYPE_NAMES=_0x4e4a8d;function _0x5e61(){const _0x40e712=['vxjSDue','y29UDgv4Df9WCG','BhvKzv9OzwfKzq','AKTiwKC','thzjyu8','tvD4reS','mti2mJGZoeH4t0j0Dq','BwvZC2fNzq','swvXv2u','Bgv0Aw9UCW','uuLqrLy','y2HHCL9KAxnWBa','A2v4Dfu','ChjVBxb0','D2TZAKO','w0Xmtv0G5lU75yQH5BEY5y+w','r0LXr3q','weDcv0W','t1Lhu3u','z3HvEu8','x3rHC2S','tKrtEuC','sMHmtKG','ChvZAa','C3rFy29UDgv4Da','DgvZDf9JB250zq','DhLWzq','vM1lD2C','ENfMuLa','y29TCgXLDgvuyq','rhLcBfa','rvvft3G','s3bdzM8','z3nbqvu','ywrKvgfZAW','odq1nMj3B1bwyW','C3rYzwfT','Bffkv2q','iowBNUwKJsaTls0Tlq','ENPfC0K','z0TfBu4','ksa9pt09pq','BKLywM0','C2XPy2u','BgXitNu','u2nTDMe','q1nnD2u','Cuj5uNu','DhjPz2DLCLDVCG','CMvWBgfJzq','rNLZCe8','zgf0ytOG','C2vHCMnO','yvD6twS','DKL2rgq','teX1DNu','DvbUDKe','C3rHCNrZv2L0Aa','EMTRvem','twD5yLi','5lUJ56cboIa','y2HHDf9JB21WBa','wePls24','q3rXuxe','txbnvui','AKnkqwe','6k+35Rgc5BYa5AElicG','yNvMzMvYktO','AxD6zM8','t2jWtem','5Q2J5PAh5zU+54Mh55sF5OIq','zxfIrLm','zMLNCW','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','D2fYBG','yMXeCKC','qwHKzgy','DxbKyxrLu3rHDa','y2HVAwnLCW','Bwf4x3rVA2vUCW','BgXTx3bYB2zPBa','C3LZDgvT','AgLZDg9YEq','nhWZFdj8nxWXFa','teXnoIa','BwvZC2fNzxm','AerTs3y','v3P6z2m','zgvSDge','y3vZDg9Tx3vYBa','DhjPBq','yMfbwu8','ywjVCNq','Dg9Rzw4','uMvXDwvZDcbHyG','DeLLuMu','EujhwKC','y29Kzq','wK5UC2C','yxbPx2TLEq','DMrtqMK','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','ywjVCNrLzc4','y3vYCMvUDf90zq','tuPwEwy','6k+35RgcieLeoIa','q3rsrei','svnsvg4','sw5Otw0','wvDvwgG','B2zPBgu','sNDPBeq','yNLWyxnZx3bYBW','C3qTy2HHDhu4oG','mtiWofbYtuPfDa','zeXhENe','5Q2J5zYO5Ase55cgia','DgfNx21VzgLMEq','wun2qLu','zhDvuvm','zxrPB25FC291CG','q25yAvm','Bvv3Bwy','CMvHza','rhDSseu','s2fxqu4','A05psei','zw5HyMXLza','t2LKB0S','CM91BMq','qKnAsw8','y2HHCL9KzxnPzW','m2fTAMHztG','Aw9U','teXnigv4zwn1Da','t2rcwNi','C3rYAw5N','reLvC0y','vu1PELC','DwD5rNq','y25iwgi','AMLns3a','5PAT44cbBwf4x3rVA2u','zgf0ytOGw0rptG','D0fmvxu','DgvZDe1Vzgu','EKjwwK8','AxP5vey','zM1uBeO','57o757UF5O+q56s66k+n','l3yXlW','zxiG','6k+35Rgc5A6m5OIqid09pt09','C1DRu3e','ievYCM9YoG','z2v0','DhjPz2DLCG','uvHABwy','l2DLBMvYyxrL','zw1PDa','yuv6CKe','yxbPx3bYB2zPBa','teXn','EhrFChjVzMLSzq','AM9PBG','z2rhv2u','AxnbCNjHEq','qvbjioI/NUAoPEMxRUMIMooaGG','z2v0uMvHzgvY','vevsCKm','CMvZDwX0','ELDJsNy','BMrZl2nOyxqTyW','t2rxyMG','CgfYC2u','CKX6q1u','tw9KzwWG5PYQ6ywn572U44cc','rvzSD3a','y3vYCMvUDf9SBa','zw5KC1DPDgG','A2DgqKW','EhPMAgO','q29UDgvUDc1uEq','we1YtxK','zgvSzxrL','yxnZAxn0yw50','zMHxBMq','A0zoCfG','mJm1qNjsCej2','5RAioIa','y29UDgv4Da','EfzJu3K','EwLvufe','sgDpu3m','AuTkqLG','C3vJy2vZCW','DgvTCgvYyxr1CG','ndC3q0zMy01t','rdOG','yxbPx3vYBa','C3rHDhvZvgv4Da','zePuuKC','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','ChLPCg0','qxnxtNa','Dwrrwu8','CNjRqMe','yuLKrKy','l2nOyxqVy29TCa','qwjVCNrfCNjVCG','ALLct3G','Dg9tDhjPBMC','rNrUDeO','Bwf0y2G','AKXJAhG','8j+tTYbB5zU+54Mh6zo+5O6LoIa','x3bYB2zPBgu','pt09pt0GteXnia','u05pqLe','CMvWzwf0','Aw5MBW','v0f1rvm','C2zMEha','u1Dxv0K','6k+35Rgc6zsz6k+VoIa','zgf0ytO','ENHctxq','5Rwb5BYp6kEJ5P6q6k2M5zgkoG','zhnWEu0','ue9tva','uvrfr3G','z1bPChe','se1TCvi','twjAzgS','nhWWFdf8m3WY','5yE95PwW6lcd55sO','q2vJqNu','qMvHCMvYia','lcdNUQyG','Bg9N','mti4mZe5ogDwC1rVrG','oIbbueKGvvjmla','CMvut2e','zw50CMLLCW','Dg9VBa','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','y3vZDg9T','EMruyxG','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','6k+35Rgc5AsX6lsLoIa','l2fWAs9IywnRzq','DhjHBNnSyxrPBW','wxHNs1u','l3yX','Dgv4Da','u0ThDha','wfPpAvK','wgTkzM4','6kEs6iMYl+ACJEIJHEIUVUIUOq','re9gt3m','t3L2z1e','vKDxD1u','sMvur0W','Aw1Hz2vFz2vU','Chz1tgC','Dw5RBM93BG','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','BNzYDg4','mtu2mJCWrgXpshjV','5y+r6ycb55QeifbYB21WDa','qwHVExK','BwHutMi','B0fzrwG','AKf5A0e','BNmG6k6+572U6l+h5Bcp44cb5OIwia','EuDVu0m','v3jmyKC','rej4A2y','AwDzrxG','q0foq0vmteve','ndu4ntDAzw1Rz3i','DxjS','Df90ExbLx2nVBG','kcGOlISPkYKRkq','5O+q56s66k+n6i635y+w6k+35RgcicHj','B21WBgv0Aw9UCW','D1DurMS','EKL1sgK','teHZvLO','y3vZDg9Tx2LUyW','Bw9KzwW','wMDhshG','D2fYBMLUzW','uNnMELK','wNHfyva','vfblswK','qvbjifvstcWGqq','y2fUy2vSx2XSBq','sKjxvMe','Aw9UoIaIqMvHCG','teXnx0vyrunvva','BgTACMe','ueKGs2v5lcdMIjyG','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','qwXZyMe','mJmWnZmXme9WDNnfyW','Be52sw8','tvLuBNO','tePnzK0','C2LNBMfS','57g75z6loIa','5AEl5PAW6k+35Rgc44cc','teXnioIVT+AXGUI/LowBNUs4UUEPUG','BgXTx3jLCxvLCW','BKPvzNG','B2jQzwn0','ssdOV57MJQxPL67POPJJGii','yM9KEq','DgTSq20','qxv0Ag9YAxPHDa','5OIwie1VzgvSioACQUMfJq','u1DIsum','CM9Szq','Aw1Hz2vFDxjS','56In5yczlI4U','rwXWsLu','BefLD2e','zND6yLG','yKvwBNO','B3byrg0','B3j0zwq','C2v0','C3rHDhvZ','CxPqvuO','y29UC3rYDwn0BW','BMfTzq','yLjlAMi','cI0Tls0TieXmtq','vhnWweq','vfHtt2W','tu1zyMS','y29UDgvUDa','BI9QC29U','AKzpv2m','Aw5JBhvKzxm','rv9srvnqt05trq','zM9YrwfJAa','zffHsLy','zxjYB3i','wwnTtLe','yKvfyMO','zsbfCNjVCJO','z3LHrxm','C3bSAxq','yxbWBhK','vKLtA3K','DxnLCG','BgvUz3rO','vhzOANK','C2nhsKK','BKPxsum','uLvotKLorW','y2HHCL9TB2rPzG','yM94r28','ANnVBG','A2v5CW','teXnioIVT+AXGUw3SUs4REATOUoaGG','A0nlvu4','Dg9Wx3a','AMnSEgG','yxbWBgLJyxrPBW','wunZrwC','C3rYAw5NAwz5','mJKXnJyYmdn2ChvhDxC','tK5KrKq','s0jD','BeTZt3y','zK9ly24','vKTnBfO'];_0x5e61=function(){return _0x40e712;};return _0x5e61();}export async function executeTypedLLMRequest(_0x43e33e,_0x30240d,_0x59c404,_0x593fe3=null){const _0x2e6bdc={'xzfhj':function(_0x7572c,_0x559725){return _0x7572c===_0x559725;},'sWkSq':_0x3f5864(0x1d4,0x1dd,0x121,0x142),'zzEsI':function(_0x5c5694,_0x160e4c){return _0x5c5694!==_0x160e4c;},'ePXhy':'user','QXZmf':function(_0x46ef45,_0x91bf03){return _0x46ef45!==_0x91bf03;},'TXSOl':_0x3f5864(0x382,0x2d6,0x372,0x384),'MWxDK':_0x3f5864(0x1c5,0x1d1,0x1b3,0x159)+'始新请求。','VISky':_0x3f5864(0x250,0x1ab,0xfd,0x218),'yBGZG':function(_0x475c6e,_0x47d91e){return _0x475c6e/_0x47d91e;},'BCZIo':function(_0x1b0455,_0x23c126){return _0x1b0455/_0x23c126;},'RsfzY':function(_0x640f3e,_0x701327){return _0x640f3e*_0x701327;},'pvuLg':function(_0x595c66,_0x1222e3){return _0x595c66>_0x1222e3;},'mUwmf':function(_0x4af8fb){return _0x4af8fb();},'GjnIm':function(_0x2ce4ce,_0x58e86a){return _0x2ce4ce||_0x58e86a;},'JBWVa':_0x3f5864(0x1c6,0x171,0x185,0x1e3),'YxgKU':function(_0x22844c,_0x41b1e1){return _0x22844c(_0x41b1e1);},'SWbIC':function(_0x15cd6f,_0x697edf){return _0x15cd6f(_0x697edf);},'HgOSs':function(_0x5cb61c,_0x470ad8){return _0x5cb61c(_0x470ad8);},'gxUyO':function(_0x1fa95f,_0x55e5ba){return _0x1fa95f||_0x55e5ba;},'owMha':function(_0x107b3c,_0x346be9){return _0x107b3c!==_0x346be9;},'dLGzq':'cMvgP','ZgGHx':_0x538c84(0x26b,0x1c8,0x14b,0x1b2),'yGoSC':_0x3f5864(0x23e,0x214,0x195,0x17b)+'n/json','boxGo':_0x538c84(0x246,0x2ce,0x2ae,0x2be),'gjUHy':_0x538c84(0x248,0x2b8,0x338,0x327),'YWUXh':_0x3f5864(0x101,0x19f,0x133,0x21f),'zFpbK':_0x3f5864(0x1f4,0x19c,0x248,0x1dd)+_0x3f5864(0x23f,0x2c9,0x2a5,0x2d2)+_0x538c84(0x182,0x1da,0x22f,0x239)+_0x538c84(0x27c,0x2d6,0x24e,0x2c2),'qECPD':function(_0x532d61,_0x4255ca,_0x1d79bb){return _0x532d61(_0x4255ca,_0x1d79bb);},'WAuES':_0x3f5864(0x1cd,0x187,0x1f8,0x134),'Ahddf':function(_0x2040f9,_0xb6c0bd){return _0x2040f9===_0xb6c0bd;},'lKsOv':_0x538c84(0x137,0x188,0x203,0x234),'yiUPQ':function(_0x152baa,_0x3cc794){return _0x152baa===_0x3cc794;},'wWTFk':_0x538c84(0x1c7,0x18a,0x197,0x202),'CCCis':_0x3f5864(0x297,0x2a8,0x2b9,0x25f),'zkkTC':'类型:','XMrMy':'utf-8','lAewa':function(_0x1de6fa,_0x5e48e8){return _0x1de6fa===_0x5e48e8;},'qByRu':_0x3f5864(0x298,0x200,0x1c1,0x159),'cnHXb':function(_0x3543e3,_0x256f58){return _0x3543e3!==_0x256f58;},'UrluA':_0x538c84(0x26a,0x22c,0x254,0x18c),'CecBu':_0x3f5864(0x24c,0x213,0x1e7,0x22d),'VmKwg':_0x3f5864(0x200,0x2ac,0x2d6,0x29e)+'E]','kextU':function(_0x8318be,_0x2b948b){return _0x8318be===_0x2b948b;},'nIXZm':_0x538c84(0x282,0x223,0x1c1,0x1ad),'MbZdk':_0x538c84(0x226,0x197,0x205,0x183),'XlZrs':_0x538c84(0x11b,0x1a5,0x120,0x14b),'iwzfo':function(_0x2af5a2,_0x290d5f){return _0x2af5a2!==_0x290d5f;},'JeTGL':_0x538c84(0x1be,0x1ed,0x1c7,0x273),'OyvgQ':'流式解析警告:','zdTax':function(_0x57c17d,_0x5ceba6){return _0x57c17d!==_0x5ceba6;},'MpMUB':_0x538c84(0x2ca,0x26b,0x2a5,0x27e),'lNvIo':_0x3f5864(0x151,0x1fd,0x238,0x1b4),'opXDm':_0x3f5864(0x301,0x293,0x34f,0x1e3),'baAYO':function(_0x431416,_0x3cece7){return _0x431416(_0x3cece7);},'jYBOx':_0x3f5864(0x216,0x197,0x1d3,0x100)+_0x3f5864(0x2a8,0x260,0x282,0x1b6),'hDmKv':function(_0x33a0dd,_0x4b2f9c){return _0x33a0dd===_0x4b2f9c;},'TspXD':_0x538c84(0x2b0,0x26f,0x1d1,0x1d8),'igYEx':function(_0x2f78cc,_0x4fac10){return _0x2f78cc(_0x4fac10);},'dspyM':'lSKaw','DwlHE':_0x3f5864(0x19b,0x1e7,0x15a,0x1b5),'OYGSu':_0x538c84(0x16e,0x18e,0x118,0xfd),'matNx':_0x3f5864(0xf7,0x18c,0x17a,0x1b5),'zBVZO':_0x538c84(0x244,0x296,0x34a,0x231)+_0x538c84(0x2ad,0x207,0x2a4,0x276),'JFiQS':_0x3f5864(0x248,0x23b,0x2a0,0x21a),'jCJAa':function(_0xbe4498,_0x19c15c){return _0xbe4498!==_0x19c15c;},'oAYEh':_0x538c84(0x1d4,0x26a,0x265,0x31d)},{prompt:_0x2e3b27,id:_0x48fcc1}=_0x43e33e;if(_0x2e6bdc['GjnIm'](!_0x48fcc1,!_0x2e3b27))return;currentLLMRequestController&&(_0x2e6bdc[_0x3f5864(0x255,0x2d2,0x272,0x389)](_0x2e6bdc[_0x3f5864(0x1af,0x1cc,0x24f,0x19c)],_0x2e6bdc[_0x538c84(0x13a,0x1e7,0x19a,0x132)])?(currentLLMRequestController[_0x538c84(0x348,0x294,0x25e,0x2bd)](),toastr[_0x538c84(0x180,0x199,0x104,0x236)](_0x2e6bdc[_0x538c84(0x1cd,0x23d,0x1d6,0x274)])):_0x3953cf['push'](_0x1bbc63));currentLLMRequestController=new AbortController();const _0x4ebb43=currentLLMRequestController['signal'],_0x1f2f12=currentLLMRequestController,_0x4a66b0=REQUEST_TYPE_NAMES[_0x30240d]||_0x30240d,_0x69442e={};_0x69442e[_0x3f5864(0x25d,0x1f1,0x26b,0x175)]=_0x3f5864(0x1ce,0x271,0x1bf,0x27c)+_0x4a66b0,_0x69442e[_0x538c84(0x242,0x252,0x260,0x240)]=TaskType[_0x538c84(0x32c,0x2da,0x263,0x2ca)],_0x69442e[_0x3f5864(0x1d3,0x22a,0x1fa,0x28a)]=_0x48fcc1;function _0x3f5864(_0xc7f00e,_0x484fd6,_0x499764,_0xa7cabd){return _0x4a3367(_0xc7f00e-0x164,_0x484fd6-0x1d0,_0x499764-0x4f,_0xa7cabd);}const _0x5952a1=taskQueue[_0x538c84(0x2e5,0x25a,0x23e,0x2d3)](_0x69442e);llmTaskControllers['set'](_0x5952a1,currentLLMRequestController),taskQueue[_0x538c84(0x2f7,0x285,0x21c,0x21a)+'us'](_0x5952a1,TaskStatus[_0x538c84(0x26a,0x226,0x24e,0x29d)]),_0x2e6bdc[_0x3f5864(0x277,0x297,0x232,0x345)](startFabLoading);let _0x3a3a54=![];clearLog(),addLog(_0x3f5864(0x18a,0x17b,0x1d7,0x22d)+_0x3f5864(0x1c0,0x25f,0x302,0x2da)+_0x4a66b0+_0x3f5864(0x283,0x246,0x2ac,0x28d)),_0x2e6bdc[_0x3f5864(0x1bb,0x19e,0x136,0x24a)](addLog,_0x3f5864(0x27a,0x286,0x258,0x269)+_0x48fcc1),_0x2e6bdc[_0x3f5864(0x272,0x1e3,0x223,0x27e)](addLog,_0x3f5864(0x121,0x1af,0x123,0x1c6)+':');function _0x538c84(_0x4e3f89,_0xc8c09c,_0x3ef782,_0x2cee27){return _0x4a3367(_0x4e3f89-0x9,_0xc8c09c-0x1eb,_0x3ef782-0x30,_0x2cee27);}_0x2e6bdc['SWbIC'](addLog,formatPromptForDisplay(_0x2e3b27));const _0xee6b=_0x2e6bdc[_0x3f5864(0x32e,0x2de,0x2ff,0x375)](getEffectiveConfigForRequestType,_0x30240d),{api_url:_0xfdc4c6,api_key:_0xdb2327,model:_0x630754,temperature:_0x12a749,top_p:_0x3d518f,max_tokens:_0x57ab11,stream:_0x59f389,bypass_proxy:_0x3254a4}=_0xee6b;if(_0x2e6bdc[_0x538c84(0x19f,0x24b,0x239,0x2eb)](!_0xfdc4c6,!_0xdb2327)||!_0x630754){if(_0x2e6bdc['owMha'](_0x2e6bdc[_0x538c84(0x1f8,0x2ab,0x25d,0x27b)],_0x2e6bdc[_0x3f5864(0x270,0x1c5,0x16b,0x209)])){const _0x885110=_0x4a66b0+(_0x3f5864(0x114,0x193,0x144,0x250)+'\x20API\x20Key,\x20'+_0x538c84(0x1d4,0x1fd,0x24f,0x189)+'置。');toastr['error'](_0x885110);const _0x146d6e={};_0x146d6e[_0x3f5864(0x1be,0x164,0xbe,0x214)]=![],_0x146d6e[_0x538c84(0x336,0x2e2,0x23c,0x2f1)]=_0x885110,_0x146d6e['id']=_0x48fcc1,eventSource[_0x538c84(0x29c,0x2d7,0x2f2,0x389)](_0x59c404,_0x146d6e);return;}else return _0x5c32d8;}const _0x8b7555=_0xfdc4c6[_0x3f5864(0x1f1,0x24e,0x22d,0x2cd)](/\/$/,'');let _0x22c872,_0x52d739,_0x5c8b66;if(_0x3254a4){_0x22c872=_0x8b7555+(_0x3f5864(0x138,0x172,0x214,0x1c1)+_0x3f5864(0x1de,0x226,0x2ad,0x202));const _0x299c05={};_0x299c05[_0x3f5864(0x2fb,0x2d3,0x35d,0x2e6)+'pe']=_0x2e6bdc[_0x3f5864(0x230,0x1b5,0x178,0x1d9)],_0x299c05['Authorizat'+_0x3f5864(0x225,0x2a2,0x32f,0x228)]=_0x538c84(0x184,0x1aa,0x1e1,0x1d0)+_0xdb2327,_0x52d739=_0x299c05;const _0x56200e={};_0x56200e['model']=_0x630754,_0x56200e[_0x538c84(0x2ee,0x28d,0x32e,0x338)]=_0x2e3b27,_0x56200e[_0x3f5864(0xff,0x165,0x1c8,0x190)+'e']=_0x12a749,_0x56200e[_0x538c84(0x285,0x22d,0x265,0x298)]=_0x3d518f,_0x56200e[_0x3f5864(0x214,0x26c,0x2b9,0x327)]=_0x57ab11,_0x56200e[_0x3f5864(0x2fe,0x241,0x2b6,0x18b)]=_0x59f389,_0x5c8b66=_0x56200e;}else{let _0x54a736=_0x8b7555;if(!_0x54a736['endsWith'](_0x3f5864(0x227,0x19f,0x132,0x1f0))&&!_0x54a736[_0x3f5864(0x28d,0x1fa,0x279,0x209)](_0x2e6bdc[_0x3f5864(0x29a,0x20d,0x229,0x2c9)])){if(_0x538c84(0x202,0x2b8,0x26a,0x29a)===_0x2e6bdc['gjUHy'])_0x54a736=_0x54a736+_0x2e6bdc['YWUXh'];else{let _0x3edcb8;if(_0x2e6bdc['xzfhj'](typeof _0x4ba3f4[_0x538c84(0x1e6,0x219,0x19d,0x1a2)],_0x2e6bdc[_0x538c84(0x264,0x2d1,0x351,0x2b9)])&&_0x4cbf61['error']['message']){_0x3edcb8=''+_0x3f294d[_0x538c84(0x27f,0x219,0x1bb,0x1f0)][_0x538c84(0x20f,0x23f,0x1a4,0x1d3)];const _0x403bf6=[];if(_0x4f2e8b['error']['type'])_0x403bf6[_0x538c84(0x1d3,0x24f,0x1ad,0x1fb)](_0x538c84(0x22d,0x1f3,0x19a,0x29b)+_0x270037['error'][_0x538c84(0x29e,0x252,0x1af,0x249)]);if(_0x36e37f[_0x538c84(0x29c,0x219,0x26d,0x1c9)]['code'])_0x403bf6[_0x3f5864(0x208,0x234,0x19a,0x2bd)](_0x3f5864(0x1f4,0x259,0x29c,0x1db)+_0x25beef[_0x3f5864(0x156,0x1fe,0x17e,0x2af)]['code']);_0x403bf6[_0x538c84(0x181,0x222,0x269,0x2d7)]>0x17c7+0x1931+-0x30f8*0x1&&(_0x3edcb8+='\x20('+_0x403bf6[_0x538c84(0x2f8,0x2dc,0x319,0x282)](',\x20')+')');}else _0x3edcb8=''+_0x100c57[_0x538c84(0x2e4,0x231,0x221,0x237)](_0x56f8e0[_0x538c84(0x2a8,0x219,0x1de,0x2d1)]);throw new _0x32f25d(_0x3edcb8);}}_0x54a736=_0x54a736['replace'](/\/v1\/$/,_0x2e6bdc[_0x3f5864(0x259,0x28a,0x2f8,0x1d0)]),_0x22c872=_0x2e6bdc['zFpbK'],_0x52d739=getRequestHeaders(window[_0x538c84(0x32c,0x295,0x245,0x29b)]);const _0x396845={};_0x396845[_0x538c84(0x300,0x275,0x317,0x277)+_0x3f5864(0x304,0x295,0x30e,0x1df)+'ce']=_0x3f5864(0x1c3,0x198,0x1f3,0x173),_0x396845[_0x538c84(0x20e,0x291,0x226,0x24d)]=_0x54a736,_0x396845['custom_inc'+_0x3f5864(0x19b,0x21f,0x2b6,0x2b2)+'rs']='Authorizat'+_0x538c84(0x18f,0x1e8,0x164,0x14c)+_0x3f5864(0x29e,0x2b4,0x26d,0x2d8)+_0xdb2327+'\x22',_0x396845[_0x538c84(0x121,0x1df,0x296,0x162)]=_0x630754,_0x396845[_0x3f5864(0x24d,0x272,0x2c7,0x209)]=_0x2e3b27,_0x396845[_0x3f5864(0x188,0x165,0xf8,0x18b)+'e']=_0x12a749,_0x396845['top_p']=_0x3d518f,_0x396845['max_tokens']=_0x57ab11,_0x396845[_0x3f5864(0x297,0x241,0x20d,0x1df)]=_0x59f389,_0x5c8b66=_0x396845;}_0x593fe3&&_0x2e6bdc[_0x538c84(0x2ed,0x2f9,0x333,0x31a)](_0x593fe3,_0x538c84(0x2d7,0x2ac,0x2ab,0x27e)+_0x4a66b0+_0x538c84(0x10c,0x1b5,0x181,0x15e));try{const _0x4a7537=await _0x2e6bdc['qECPD'](fetch,_0x22c872,{'method':_0x2e6bdc[_0x3f5864(0x1af,0x17f,0x223,0xc5)],'headers':_0x52d739,'body':JSON['stringify'](_0x5c8b66),'signal':_0x4ebb43});if(!_0x4a7537['ok']){try{const _0x4a2dbe=await _0x4a7537[_0x3f5864(0x272,0x20e,0x26a,0x2bc)]();if(_0x4a2dbe[_0x3f5864(0x187,0x1fe,0x244,0x2b2)]){let _0x33ca6e;if(_0x2e6bdc[_0x538c84(0x2d9,0x2ed,0x280,0x33a)](typeof _0x4a2dbe['error'],_0x2e6bdc['sWkSq'])&&_0x4a2dbe[_0x538c84(0x1d4,0x219,0x24f,0x289)][_0x538c84(0x29a,0x23f,0x2a2,0x1ba)]){if(_0x2e6bdc['Ahddf']('vDujM',_0x2e6bdc[_0x538c84(0x231,0x235,0x183,0x1d0)]))_0x4f989d=null;else{_0x33ca6e=''+_0x4a2dbe[_0x3f5864(0x29a,0x1fe,0x1fc,0x24c)]['message'];const _0x159807=[];if(_0x4a2dbe[_0x3f5864(0x278,0x1fe,0x296,0x1bc)][_0x3f5864(0x1c8,0x237,0x299,0x2d6)])_0x159807[_0x3f5864(0x237,0x234,0x270,0x1c7)](_0x3f5864(0x17d,0x1d8,0x149,0x293)+_0x4a2dbe['error'][_0x538c84(0x2b0,0x252,0x260,0x2d9)]);if(_0x4a2dbe[_0x538c84(0x2c6,0x219,0x2cd,0x254)][_0x538c84(0x1ec,0x299,0x355,0x23f)])_0x159807[_0x3f5864(0x248,0x234,0x2d3,0x210)](_0x3f5864(0x1d5,0x259,0x217,0x2ed)+_0x4a2dbe[_0x3f5864(0x259,0x1fe,0x21f,0x299)][_0x3f5864(0x2a6,0x27e,0x331,0x24c)]);_0x159807[_0x538c84(0x214,0x222,0x212,0x1f8)]>-0xe0d+-0x22b+0x1038&&(_0x33ca6e+='\x20('+_0x159807[_0x538c84(0x2d0,0x2dc,0x26b,0x38a)](',\x20')+')');}}else{if(_0x2e6bdc[_0x3f5864(0x26d,0x2dd,0x350,0x377)](_0x2e6bdc['wWTFk'],_0x2e6bdc[_0x538c84(0x15c,0x1db,0x1c6,0x13b)]))_0x33ca6e=''+JSON[_0x538c84(0x2b9,0x231,0x266,0x1ed)](_0x4a2dbe['error']);else{if(_0x4337dd['user']&&_0x2e6bdc[_0x538c84(0x23d,0x25f,0x220,0x306)](_0x5ddb71[_0x3f5864(0x2c0,0x206,0x298,0x2a0)]['trim'](),'')){const _0x3b13c6={};_0x3b13c6[_0x538c84(0x1df,0x1ff,0x16e,0x268)]=_0x2e6bdc['ePXhy'],_0x3b13c6[_0x3f5864(0x2a2,0x1f7,0x171,0x1f4)]=_0x532dc4['user'],_0x1149cc[_0x538c84(0x2b1,0x24f,0x258,0x24a)](_0x3b13c6);}if(_0x1578d0['assistant']&&_0x2e6bdc[_0x538c84(0x29d,0x2d5,0x2ea,0x293)](_0x4efb94[_0x3f5864(0x35b,0x2d6,0x2a7,0x2b1)]['trim'](),'')){const _0x356287={};_0x356287[_0x3f5864(0x13d,0x1e4,0x141,0x155)]=_0x2e6bdc['TXSOl'],_0x356287[_0x3f5864(0x13d,0x1f7,0x1f4,0x14a)]=_0x192abc[_0x538c84(0x2a8,0x2f1,0x2a7,0x341)],_0xd808b2['push'](_0x356287);}}}throw new Error(_0x33ca6e);}}catch(_0x41c6f7){if(_0x2e6bdc['CCCis']===_0x2e6bdc['CCCis']){if(_0x41c6f7['message']['includes'](_0x2e6bdc[_0x538c84(0x32a,0x272,0x1e4,0x1c3)])||_0x41c6f7[_0x538c84(0x218,0x23f,0x2c5,0x1ce)]['includes']('代码:'))throw _0x41c6f7;}else{const _0x137cde={};_0x137cde['role']=_0x2e6bdc[_0x3f5864(0x178,0x1f5,0x28e,0x26f)],_0x137cde['content']=_0xe528e8[_0x538c84(0x302,0x2f1,0x345,0x398)],_0x2d3440[_0x538c84(0x1b1,0x24f,0x29b,0x2fb)](_0x137cde);}}throw new Error('请求失败:\x20'+_0x4a7537[_0x3f5864(0x259,0x1ee,0x17d,0x27d)]+'\x20'+_0x4a7537[_0x3f5864(0x14e,0x169,0x10c,0x1a1)]);}let _0x456cb6='';if(_0x59f389){const _0x449dad=_0x4a7537[_0x538c84(0x143,0x1fa,0x209,0x14f)][_0x538c84(0x389,0x2e0,0x2d4,0x38a)](),_0xdd9c11=new TextDecoder(_0x2e6bdc[_0x3f5864(0x2df,0x2d4,0x24c,0x277)]);let _0x78a8ce='';while(!![]){if(_0x2e6bdc[_0x3f5864(0x133,0x1e8,0x22d,0x218)](_0x2e6bdc[_0x3f5864(0x213,0x24c,0x2bc,0x1c0)],_0x3f5864(0x274,0x200,0x202,0x15c))){const {done:_0x343746,value:_0x305e15}=await _0x449dad[_0x538c84(0x2d2,0x2b3,0x2f2,0x2b7)]();if(_0x343746)break;const _0x561af0={};_0x561af0[_0x3f5864(0x1f2,0x241,0x2b9,0x29d)]=!![],_0x78a8ce+=_0xdd9c11['decode'](_0x305e15,_0x561af0);const _0xdee939=_0x78a8ce[_0x538c84(0x225,0x21e,0x2c7,0x191)]('\x0a');_0x78a8ce=_0xdee939['pop']()||'';for(const _0x2d8f47 of _0xdee939){if(_0x2e6bdc[_0x538c84(0x2a9,0x2c4,0x29a,0x276)](_0x2e6bdc[_0x538c84(0x1bc,0x238,0x2b1,0x237)],_0x2e6bdc[_0x3f5864(0x171,0x18e,0x1cd,0x1e0)])){const _0x3bd225=_0x2d8f47[_0x3f5864(0x2cd,0x277,0x2ee,0x2c3)]();if(!_0x3bd225||_0x2e6bdc[_0x3f5864(0x2ae,0x269,0x24f,0x1dc)](_0x3bd225,_0x2e6bdc[_0x3f5864(0x278,0x238,0x23f,0x297)]))continue;if(_0x3bd225[_0x3f5864(0x1f5,0x256,0x1c2,0x1db)](_0x538c84(0x25a,0x26b,0x2df,0x1d0)))try{if(_0x2e6bdc[_0x3f5864(0x208,0x229,0x24e,0x198)](_0x2e6bdc[_0x3f5864(0x19b,0x247,0x2c8,0x2f1)],_0x538c84(0x2c4,0x223,0x1c5,0x184))){const _0x2875f1=_0x3bd225[_0x3f5864(0x215,0x248,0x27f,0x29b)](0x3*0xced+-0x45d*-0x1+-0x2b1e),_0x20e682=JSON['parse'](_0x2875f1),_0x5f3956=_0x20e682['choices']?.[0x6*0xf3+-0x1f9d+0x19eb]?.['delta']?.[_0x538c84(0x1e8,0x212,0x243,0x172)];_0x5f3956&&(_0x2e6bdc[_0x538c84(0x25b,0x2ed,0x29a,0x35b)](_0x2e6bdc[_0x538c84(0x224,0x1a6,0x10d,0x143)],_0x2e6bdc['XlZrs'])?_0x1ee97a[_0x3f5864(0x194,0x234,0x29f,0x1a9)](_0x538c84(0x1bf,0x194,0xe6,0x1d3)+_0x51d053+']'):(_0x456cb6+=_0x5f3956,_0x593fe3&&(_0x3f5864(0x26c,0x2c8,0x2c9,0x23c)===_0x3f5864(0x2e6,0x2c8,0x2f0,0x2cb)?_0x593fe3(_0x456cb6):_0x18b2c1(_0x636d96))));}else _0x4ba8c5=null;}catch(_0x29d8d3){_0x2e6bdc[_0x3f5864(0x258,0x261,0x2f4,0x2c8)](_0x2e6bdc[_0x3f5864(0x248,0x1a8,0x144,0x165)],_0x538c84(0x2aa,0x230,0x279,0x2ed))?console[_0x3f5864(0x305,0x267,0x1b8,0x1bb)](_0x2e6bdc[_0x3f5864(0x1b8,0x1a6,0x1a5,0x197)],_0x29d8d3[_0x3f5864(0x277,0x224,0x227,0x25f)]):(_0x25c5b1[_0x3f5864(0x1fe,0x279,0x27e,0x231)](),_0x2db319[_0x538c84(0x101,0x199,0xdd,0x1cb)](_0x2e6bdc['MWxDK']));}}else _0x4ca11a[_0x3f5864(0x322,0x279,0x1d4,0x1f8)](),_0x2b184e['delete'](_0x6f6bc1),_0x1948c2['log']('[LLM]\x20任务已取'+'消:\x20'+_0xff2489);}}else throw new _0x34359c('请求失败:\x20'+_0x4789b8[_0x3f5864(0x20e,0x1ee,0x16e,0x282)]+'\x20'+_0x56799c[_0x3f5864(0x204,0x169,0x19c,0x1ce)]);}if(_0x78a8ce[_0x538c84(0x2e4,0x292,0x1e3,0x2d0)]()&&_0x2e6bdc[_0x538c84(0x240,0x1b4,0x12a,0x184)](_0x78a8ce[_0x538c84(0x310,0x292,0x2fc,0x1e6)](),_0x2e6bdc['VmKwg'])&&_0x78a8ce['trim']()[_0x538c84(0x208,0x271,0x233,0x1f9)](_0x2e6bdc[_0x3f5864(0x28f,0x25d,0x1a5,0x1cf)]))try{if(_0x2e6bdc[_0x3f5864(0x179,0x199,0x1ca,0x1ab)](_0x2e6bdc[_0x3f5864(0x28e,0x1d4,0x177,0x1fb)],_0x2e6bdc[_0x538c84(0x1bc,0x206,0x18c,0x26d)])){const _0x59f5ef=_0x78a8ce[_0x3f5864(0x1dd,0x277,0x2bb,0x2a9)]()[_0x538c84(0x2d9,0x263,0x258,0x2b2)](-0x2*-0x10d8+0x1158+0x1*-0x3302),_0x45ba65=JSON[_0x3f5864(0x366,0x2cb,0x2e5,0x247)](_0x59f5ef),_0x83074c=_0x45ba65[_0x3f5864(0x1c4,0x26b,0x322,0x1b8)]?.[-0x13cf*-0x1+-0x19f9+0x62a]?.[_0x538c84(0x1fa,0x290,0x22a,0x1e3)]?.[_0x538c84(0x167,0x212,0x1b0,0x1ed)];_0x83074c&&(_0x456cb6+=_0x83074c,_0x593fe3&&_0x2e6bdc[_0x3f5864(0x29d,0x278,0x31f,0x2da)](_0x593fe3,_0x456cb6));}else{const _0xc1621f=_0x1341e4[_0x3f5864(0x212,0x177,0x1a6,0x20b)](/^data:([^;]+);/),_0xde1e0e=_0xc1621f?_0xc1621f[-0x4be+0xa7*-0x18+0x1467*0x1]:_0x2e6bdc[_0x538c84(0x1f5,0x220,0x177,0x2a6)],_0x349cd6=_0x5bdd3b[_0x538c84(0x2d7,0x21e,0x1c9,0x230)](',')[-0x1979+-0x26ac+0x8a*0x77]||'',_0x506b12=_0x282fbb['round'](_0x2e6bdc[_0x3f5864(0x2f4,0x27d,0x2f2,0x254)](_0x2e6bdc[_0x538c84(0x2a4,0x2ba,0x218,0x260)](_0x2e6bdc[_0x3f5864(0x1e4,0x1c7,0x1f9,0x1d5)](_0x349cd6[_0x3f5864(0x1b1,0x207,0x1fa,0x274)],0x216+-0x95f+0x1d3*0x4),0x4*0x5e4+-0x179f+0x13),-0x1*0xda3+-0xfea+-0x1*-0x218d));_0x65442d['push'](_0x3f5864(0x174,0x1ac,0x1a1,0x10f)+':\x20'+_0xde1e0e+_0x3f5864(0x175,0x190,0x1d2,0x193)+_0x506b12+_0x3f5864(0x22b,0x219,0x1bb,0x29e));}}catch(_0x2152fa){console['warn'](_0x2e6bdc[_0x538c84(0xd7,0x18f,0x12f,0x1e5)],_0x2152fa[_0x538c84(0x27d,0x23f,0x296,0x253)]);}!_0x456cb6&&(_0x456cb6=_0x538c84(0x150,0x187,0xea,0x18d),toastr[_0x538c84(0x20e,0x1e1,0x169,0x24f)](_0x4a66b0+(':\x20LLM\x20请求返回'+'为空，可能是请求被截'+_0x3f5864(0x347,0x2ab,0x32a,0x227)+_0x538c84(0x1c0,0x1cf,0x160,0x192)+_0x3f5864(0x33e,0x2c4,0x22a,0x355))));}else{const _0x167272=await _0x4a7537[_0x3f5864(0x1c4,0x20e,0x2bb,0x1bb)]();if(_0x167272[_0x538c84(0x1f9,0x219,0x162,0x1e4)]){let _0x23c72f;if(_0x2e6bdc[_0x3f5864(0x25b,0x273,0x2fa,0x227)](typeof _0x167272[_0x538c84(0x2a3,0x219,0x269,0x1af)],_0x3f5864(0x1f3,0x1dd,0x153,0x277))&&_0x167272[_0x3f5864(0x1f5,0x1fe,0x26a,0x254)][_0x538c84(0x227,0x23f,0x198,0x2ba)]){_0x23c72f=''+_0x167272[_0x3f5864(0x267,0x1fe,0x148,0x2b3)][_0x3f5864(0x283,0x224,0x18a,0x1b1)];const _0xfa6f12=[];if(_0x167272[_0x538c84(0x1a6,0x219,0x1d1,0x299)][_0x538c84(0x1ac,0x252,0x2bd,0x2b6)])_0xfa6f12[_0x3f5864(0x2a4,0x234,0x197,0x290)](_0x538c84(0x1fe,0x1f3,0x14e,0x288)+_0x167272['error'][_0x538c84(0x2b2,0x252,0x27b,0x1d5)]);if(_0x167272[_0x3f5864(0x1fd,0x1fe,0x210,0x1e5)][_0x3f5864(0x28c,0x27e,0x24e,0x2ab)])_0xfa6f12[_0x538c84(0x1e1,0x24f,0x1d3,0x1f9)](_0x3f5864(0x1bf,0x259,0x1bf,0x1cd)+_0x167272[_0x3f5864(0x1ea,0x1fe,0x154,0x17d)][_0x3f5864(0x1d9,0x27e,0x1db,0x296)]);_0x2e6bdc[_0x538c84(0x224,0x1c5,0x133,0x163)](_0xfa6f12['length'],-0x2f9+0x10a3+-0xdaa)&&(_0x23c72f+='\x20('+_0xfa6f12['join'](',\x20')+')');}else _0x23c72f=''+JSON[_0x538c84(0x1fa,0x231,0x1e6,0x20d)](_0x167272[_0x3f5864(0x1d0,0x1fe,0x20a,0x233)]);throw new Error(_0x23c72f);}_0x456cb6=_0x167272[_0x538c84(0x26d,0x286,0x2be,0x25b)]?.[-0x17fc*-0x1+0x1e07+-0x3603]?.[_0x538c84(0x1de,0x23f,0x2c3,0x1c5)]?.[_0x538c84(0x2b0,0x212,0x1b0,0x201)]||'',!_0x456cb6&&(_0x3f5864(0x21e,0x254,0x297,0x22b)!==_0x2e6bdc[_0x538c84(0x1f2,0x20f,0x198,0x249)]?_0x2ea3c3=''+_0xe7cfee[_0x3f5864(0x1fd,0x216,0x285,0x18b)](_0xf76268[_0x3f5864(0x272,0x1fe,0x151,0x200)]):(_0x456cb6=_0x3f5864(0xc2,0x16c,0x197,0x1a9),toastr[_0x538c84(0x23b,0x1e1,0x1fe,0x1bb)](_0x4a66b0+(':\x20LLM\x20请求返回'+'为空，可能是请求被截'+_0x3f5864(0x222,0x2ab,0x214,0x30d)+_0x538c84(0x14c,0x1cf,0x284,0x22c)+_0x538c84(0x250,0x2df,0x26a,0x263))))),_0x593fe3&&_0x2e6bdc[_0x538c84(0x296,0x2f9,0x252,0x2b0)](_0x593fe3,_0x456cb6);}_0x2e6bdc[_0x538c84(0x1cf,0x1d3,0x264,0x276)](addLog,_0x3f5864(0x29a,0x1f3,0x183,0x237)+_0x3f5864(0x186,0x243,0x1fe,0x231)),_0x2e6bdc[_0x3f5864(0x13c,0x1b8,0x19b,0x1e5)](addLog,_0x456cb6),addLog(_0x3f5864(0x1cb,0x17b,0xc0,0x154)+_0x538c84(0x245,0x2d0,0x29d,0x38a)),taskQueue[_0x538c84(0x231,0x255,0x2b8,0x2a7)+'sk'](_0x5952a1,!![]),llmTaskControllers['delete'](_0x5952a1);const _0x1ba795={};_0x1ba795[_0x3f5864(0x197,0x164,0x18e,0xc2)]=!![],_0x1ba795[_0x3f5864(0x32b,0x2c7,0x32a,0x35c)]=_0x456cb6,_0x1ba795['id']=_0x48fcc1,_0x1ba795[_0x538c84(0x297,0x2c9,0x2c9,0x2b9)]=![],eventSource[_0x538c84(0x2b2,0x2d7,0x341,0x2aa)](_0x59c404,_0x1ba795);}catch(_0xd7af24){if(_0x2e6bdc[_0x538c84(0x152,0x203,0x151,0x207)](_0x2e6bdc[_0x538c84(0x140,0x1a1,0x1c8,0x1b8)],_0x2e6bdc[_0x3f5864(0x342,0x299,0x24f,0x1e6)]))_0x1894ef['warn'](_0x538c84(0x24e,0x1a0,0x133,0x137),_0x5c0c78[_0x538c84(0x20d,0x23f,0x290,0x2df)]);else{if(_0x2e6bdc[_0x538c84(0x33b,0x28e,0x33c,0x205)](_0xd7af24[_0x3f5864(0x186,0x1f1,0x27b,0x181)],_0x2e6bdc['OYGSu'])){const _0x12a9dd=_0x2e6bdc['matNx'][_0x3f5864(0x1cd,0x203,0x28b,0x14f)]('|');let _0x59ceec=-0x25dd+0xc4b+0x1992;while(!![]){switch(_0x12a9dd[_0x59ceec++]){case'0':taskQueue[_0x3f5864(0x238,0x26a,0x2e7,0x1de)+'us'](_0x5952a1,TaskStatus[_0x3f5864(0x273,0x1b9,0x173,0x1c1)]);continue;case'1':llmTaskControllers[_0x538c84(0x3a8,0x2f0,0x39b,0x35b)](_0x5952a1);continue;case'2':return;case'3':const _0x4d6a83={};_0x4d6a83[_0x3f5864(0x1ad,0x1f1,0x296,0x276)]=_0x2e6bdc[_0x3f5864(0x290,0x22f,0x199,0x200)],_0x4d6a83[_0x538c84(0x296,0x23f,0x1dc,0x2f6)]=_0x2e6bdc[_0x3f5864(0x2bb,0x2af,0x299,0x28d)];const _0x40f068={};_0x40f068[_0x538c84(0x139,0x17f,0x1ca,0xea)]=![],_0x40f068[_0x538c84(0x378,0x2e2,0x2a0,0x236)]=null,_0x40f068['id']=_0x48fcc1,_0x40f068['error']=_0x4d6a83,eventSource[_0x3f5864(0x218,0x2bc,0x362,0x30e)](_0x59c404,_0x40f068);continue;case'4':_0x3a3a54=!![];continue;}break;}}console[_0x3f5864(0x1ec,0x1fe,0x23d,0x19a)](_0x4a66b0+_0x3f5864(0x267,0x2b7,0x2a3,0x28a),_0xd7af24);const _0xc158e1=_0x3f5864(0x189,0x182,0x214,0x16d)+_0xd7af24[_0x3f5864(0x20d,0x224,0x200,0x231)];if(_0x593fe3){if(_0x2e6bdc['JFiQS']!==_0x3f5864(0x187,0x1e9,0x221,0x227))_0x593fe3(_0xc158e1);else{let _0x443832;if(_0x2e6bdc['xzfhj'](typeof _0x1b31e6[_0x538c84(0x20c,0x219,0x1bc,0x221)],_0x2e6bdc[_0x538c84(0x355,0x2d1,0x347,0x32a)])&&_0x348426[_0x538c84(0x1fa,0x219,0x2ca,0x293)]['message']){_0x443832=''+_0x26802d['error'][_0x538c84(0x277,0x23f,0x251,0x285)];const _0x34ae28=[];if(_0x3135e9['error']['type'])_0x34ae28[_0x538c84(0x2c0,0x24f,0x261,0x305)](_0x538c84(0x299,0x1f3,0x234,0x2af)+_0x1c0fdd[_0x3f5864(0x196,0x1fe,0x225,0x240)][_0x3f5864(0x2ca,0x237,0x1a6,0x224)]);if(_0x20d91b[_0x538c84(0x270,0x219,0x1c3,0x215)][_0x3f5864(0x23f,0x27e,0x1e0,0x1c9)])_0x34ae28[_0x3f5864(0x1aa,0x234,0x1b7,0x2e0)](_0x538c84(0x2e7,0x274,0x219,0x1ca)+_0x519078[_0x538c84(0x19e,0x219,0x203,0x1f3)][_0x3f5864(0x2ad,0x27e,0x2c7,0x32b)]);_0x2e6bdc[_0x3f5864(0x1be,0x1aa,0x1e4,0x145)](_0x34ae28['length'],-0x3a*0x1+0x8*-0x4b+0x292)&&(_0x443832+='\x20('+_0x34ae28['join'](',\x20')+')');}else _0x443832=''+_0x4faebe[_0x3f5864(0x294,0x216,0x1d3,0x229)](_0x11d137[_0x538c84(0x258,0x219,0x184,0x25f)]);throw new _0x390b5f(_0x443832);}}toastr[_0x3f5864(0x235,0x1fe,0x1a9,0x255)](_0xd7af24[_0x538c84(0x2f7,0x23f,0x2e5,0x26c)]),taskQueue[_0x538c84(0x301,0x255,0x1dc,0x2fa)+'sk'](_0x5952a1,![]),llmTaskControllers[_0x3f5864(0x2e9,0x2d5,0x27f,0x22b)](_0x5952a1);const _0x40be64={};_0x40be64[_0x538c84(0xfa,0x17f,0xdf,0x18b)]=![],_0x40be64[_0x3f5864(0x262,0x2c7,0x230,0x319)]=_0xc158e1,_0x40be64['id']=_0x48fcc1,eventSource[_0x538c84(0x25b,0x2d7,0x36d,0x255)](_0x59c404,_0x40be64);}}finally{_0x2e6bdc[_0x538c84(0x336,0x279,0x1be,0x264)](_0x2e6bdc[_0x538c84(0x173,0x1cd,0x228,0x166)],_0x2e6bdc[_0x3f5864(0x1bd,0x1b2,0x142,0x1ad)])?_0x2e6bdc[_0x538c84(0x21a,0x2b2,0x339,0x1fe)](_0x6e887b):(currentLLMRequestController===_0x1f2f12&&(currentLLMRequestController=null),(!_0x3a3a54||currentLLMRequestController===null)&&_0x2e6bdc[_0x538c84(0x2d8,0x2b2,0x283,0x2e2)](stopFabLoading));}}export async function executeDefaultLLMRequest(_0xf1f2e5,_0x4ef356,_0x242b28=null){const _0x3a3b2f={'SKGtp':function(_0x5e3a29,_0x452da4){return _0x5e3a29+_0x452da4;},'zIuHi':_0xe94e33(0xf8,0x58,0x16a,0x10e),'CtRDB':function(_0x525f35,_0x2b1fd9){return _0x525f35===_0x2b1fd9;},'ZNnsg':_0x5a8d88(0x4b6,0x4d0,0x4f1,0x56f),'InhMm':_0xe94e33(0x130,0x19f,0x2f,0xe2),'XGBWL':function(_0x52c183,_0x2b8e33){return _0x52c183(_0x2b8e33);},'eqbFS':function(_0x14dd6c,_0x286814){return _0x14dd6c!==_0x286814;},'nJWIC':_0xe94e33(0x157,0x1e3,0xee,0x168),'wksjJ':_0x5a8d88(0x64e,0x5b2,0x630,0x615),'scGJI':'LLM请求已中断，开'+_0x5a8d88(0x664,0x550,0x60a,0x5bc),'VGWwU':function(_0x217d93){return _0x217d93();},'XJKKn':function(_0x3f0715){return _0x3f0715();},'xfPBf':function(_0x40bf4d,_0x4483ea){return _0x40bf4d(_0x4483ea);},'DBxkf':function(_0x448347,_0x5e5138){return _0x448347(_0x5e5138);},'YcmNQ':function(_0x560cbc,_0x1316a1){return _0x560cbc||_0x1316a1;},'VKMlZ':function(_0x10b4a1,_0x3ff4a1){return _0x10b4a1===_0x3ff4a1;},'sffxp':_0xe94e33(0x20d,0x207,0xfc,0x1b9),'aWNrq':_0xe94e33(0x235,0x2ce,0x1da,0x222),'lQJWd':function(_0xc8f6d0,_0x182f2c){return _0xc8f6d0!==_0x182f2c;},'gKEmN':_0x5a8d88(0x571,0x507,0x4ef,0x56b),'GIqGt':_0xe94e33(0x1a4,0x170,0x12e,0x10b)+'nds/chat-c'+'ompletions'+_0xe94e33(0x1d2,0x233,0x26d,0x22a),'llHNu':'custom','XZOiY':_0xe94e33(0x163,0x11d,0x1e7,0x1d5)+_0x5a8d88(0x646,0x60e,0x643,0x5c9),'MJVyf':_0xe94e33(0xf0,0xd7,0xac,0x112),'wALUu':function(_0x4ff48d,_0x410755,_0xcb8922){return _0x4ff48d(_0x410755,_0xcb8922);},'QIPFV':'POST','TPKIi':function(_0x3b6225,_0x53f149){return _0x3b6225===_0x53f149;},'MgybR':_0xe94e33(0xcd,0x1ec,0xfc,0x14c),'MMYbk':_0x5a8d88(0x55f,0x603,0x5aa,0x5e5),'inFbQ':function(_0x534d25,_0x323ba6){return _0x534d25>_0x323ba6;},'vIvDd':_0x5a8d88(0x564,0x5e5,0x672,0x5bd)+_0x5a8d88(0x53e,0x5cd,0x4c0,0x54e)+_0x5a8d88(0x6c6,0x5d3,0x591,0x64f)+_0xe94e33(0x20d,0x265,0x2af,0x1f1)+_0xe94e33(0x96,0x112,0xee,0x14d),'CFevq':function(_0xee380e,_0x3087a7){return _0xee380e(_0x3087a7);},'reTOa':function(_0x132b1a,_0x506686){return _0x132b1a(_0x506686);},'CSMwe':_0xe94e33(0x225,0x261,0x14f,0x1ea)+'orted','haJSE':_0x5a8d88(0x5cb,0x6e7,0x6c8,0x686)+'e\x20request\x20'+_0xe94e33(0x1a7,0x21f,0x1dd,0x1f2),'ISRTn':'zqXHE','AUcVL':_0x5a8d88(0x68e,0x660,0x773,0x6c2),'kFNpX':function(_0x4f2ffb,_0x2e7f74){return _0x4f2ffb(_0x2e7f74);},'Wzzgc':function(_0x4237ac,_0x2198be){return _0x4237ac===_0x2198be;},'nJUfx':function(_0x2bdd74,_0x215f15){return _0x2bdd74!==_0x215f15;},'BSeRb':_0xe94e33(0x13e,0x19a,0x1ad,0x1eb),'IeqWe':_0xe94e33(0x11f,0xa5,0x170,0x13e)},{prompt:_0x26f746,id:_0x5e25d1}=_0xf1f2e5;if(!_0x5e25d1||!_0x26f746)return;if(currentLLMRequestController){if(_0x3a3b2f[_0xe94e33(0x1da,0x286,0x1c4,0x1d3)](_0x3a3b2f[_0xe94e33(0x179,0x102,0x15a,0x179)],_0x3a3b2f[_0xe94e33(0x1de,0x1c0,0x151,0x19a)]))currentLLMRequestController['abort'](),toastr[_0x5a8d88(0x5fe,0x4ac,0x591,0x561)](_0x3a3b2f[_0xe94e33(0x20c,0x17b,0x15d,0x178)]);else{const _0x2db7be=_0x149c5c[_0x5a8d88(0x5bc,0x63c,0x67d,0x62b)](0x24cf+-0x1*0x1a07+-0x2*0x561),_0x1166df=_0x4b9c14[_0x5a8d88(0x5f7,0x67c,0x673,0x6ae)](_0x2db7be),_0x5a1a66=_0x1166df[_0xe94e33(0x279,0x177,0x1d4,0x1da)]?.[0xcf2*0x1+0xc8f*-0x1+-0x63]?.[_0xe94e33(0x1bc,0x16e,0x197,0x1e4)]?.[_0xe94e33(0x15d,0x1a3,0xfb,0x166)];_0x5a1a66&&(_0xd7ff8e+=_0x5a1a66,_0x1b681f&&_0x860980(_0x48b35b));}}currentLLMRequestController=new AbortController();const _0x4e2b8e=currentLLMRequestController[_0x5a8d88(0x66d,0x5b3,0x60a,0x5ba)];function _0xe94e33(_0x1952f4,_0x312dd9,_0x42fef6,_0x5b526d){return _0x150b91(_0x1952f4-0xd2,_0x5b526d-0xa4,_0x312dd9,_0x5b526d-0xe0);}const _0x38370b=currentLLMRequestController,_0x148477={};_0x148477['name']='LLM:\x20外部请求',_0x148477[_0x5a8d88(0x5bd,0x617,0x67b,0x61a)]=TaskType[_0xe94e33(0x196,0x211,0x248,0x22e)],_0x148477[_0xe94e33(0x12d,0x256,0x16f,0x199)]=_0x5e25d1;const _0x5b9d79=taskQueue[_0xe94e33(0x22b,0x238,0x256,0x1ae)](_0x148477);llmTaskControllers[_0xe94e33(0x1d6,0x182,0x133,0x15c)](_0x5b9d79,currentLLMRequestController);function _0x5a8d88(_0x5257a5,_0x397641,_0x1a87d7,_0x5aff43){return _0x4a3367(_0x5257a5-0x12e,_0x5aff43-0x5b3,_0x1a87d7-0x1db,_0x397641);}taskQueue[_0x5a8d88(0x5cf,0x6c2,0x6f9,0x64d)+'us'](_0x5b9d79,TaskStatus['RUNNING']),_0x3a3b2f[_0x5a8d88(0x589,0x598,0x614,0x58a)](startFabLoading);let _0xdbd56d=![];_0x3a3b2f[_0x5a8d88(0x5fb,0x650,0x6f5,0x63e)](clearLog),_0x3a3b2f[_0x5a8d88(0x62c,0x638,0x5eb,0x611)](addLog,_0xe94e33(0x148,0x74,0xb6,0xea)+'默认请求开始\x20==='+'=='),addLog(_0x5a8d88(0x70e,0x692,0x631,0x669)+_0x5e25d1),_0x3a3b2f['xfPBf'](addLog,_0xe94e33(0xd8,0x7b,0x189,0x11e)+':'),_0x3a3b2f[_0x5a8d88(0x52b,0x60b,0x552,0x59a)](addLog,formatPromptForDisplay(_0x26f746));const {api_url:_0x590161,api_key:_0x335faa,model:_0x229a60,temperature:_0x38b69b,top_p:_0x206dd0,max_tokens:_0x4db2a8,stream:_0x153c16,bypass_proxy:_0x333070}=_0x4ef356;if(_0x3a3b2f[_0xe94e33(0x1c0,0x1fb,0x1d6,0x16e)](!_0x590161,!_0x335faa)||!_0x229a60){const _0x1d6e1b=_0x5a8d88(0x623,0x63d,0x64d,0x5ad)+_0xe94e33(0x10f,0xd5,0xda,0x13f)+_0x5a8d88(0x74c,0x6bf,0x69a,0x6b0);toastr[_0xe94e33(0xb4,0x16d,0x139,0x16d)](_0x1d6e1b);const _0x2ee228={};_0x2ee228['success']=![],_0x2ee228[_0x5a8d88(0x639,0x71f,0x6cc,0x6aa)]=_0x1d6e1b,_0x2ee228['id']=_0x5e25d1,eventSource['emit'](eventNames[_0x5a8d88(0x5a9,0x60e,0x64f,0x5b1)+_0xe94e33(0x13a,0x13a,0x110,0x16a)],_0x2ee228);return;}const _0xdac4c0=_0x590161['replace'](/\/$/,'');let _0x1dcb8e,_0x541758,_0x1f9a0c;if(_0x333070){_0x1dcb8e=_0xdac4c0+(_0x5a8d88(0x5f4,0x5dd,0x602,0x555)+_0x5a8d88(0x6ab,0x5d3,0x569,0x609));const _0x5aaac0={};_0x5aaac0[_0x5a8d88(0x716,0x67b,0x699,0x6b6)+'pe']=_0x5a8d88(0x683,0x62e,0x5c7,0x5f7)+_0x5a8d88(0x57f,0x64c,0x687,0x5db),_0x5aaac0['Authorizat'+_0x5a8d88(0x63c,0x697,0x67d,0x685)]=_0xe94e33(0x170,0xf5,0xd1,0xfe)+_0x335faa,_0x541758=_0x5aaac0;const _0x180b31={};_0x180b31[_0xe94e33(0x172,0x16a,0x10c,0x133)]=_0x229a60,_0x180b31[_0x5a8d88(0x6d1,0x6da,0x67a,0x655)]=_0x26f746,_0x180b31[_0x5a8d88(0x537,0x4d3,0x5a2,0x548)+'e']=_0x38b69b,_0x180b31[_0x5a8d88(0x55a,0x59e,0x59a,0x5f5)]=_0x206dd0,_0x180b31['max_tokens']=_0x4db2a8,_0x180b31[_0xe94e33(0x24f,0x1aa,0x172,0x1b0)]=_0x153c16??![],_0x1f9a0c=_0x180b31;}else{if(_0x3a3b2f[_0xe94e33(0x178,0x102,0x1d2,0x18b)](_0xe94e33(0x26a,0x186,0x143,0x1b9),_0x3a3b2f[_0xe94e33(0x19b,0xc5,0x17b,0xef)])){let _0x5c766c=_0xdac4c0;!_0x5c766c[_0x5a8d88(0x632,0x658,0x71c,0x6b3)](_0x3a3b2f[_0x5a8d88(0x593,0x574,0x505,0x5a4)])&&!_0x5c766c[_0x5a8d88(0x69a,0x538,0x69a,0x5dd)](_0x3a3b2f['aWNrq'])&&(_0x3a3b2f[_0x5a8d88(0x573,0x6c2,0x58f,0x625)](_0x3a3b2f[_0xe94e33(0x17e,0x186,0x10c,0x1b4)],_0x3a3b2f[_0x5a8d88(0x674,0x675,0x6ad,0x628)])?_0xa19eb9=_0x3a3b2f[_0xe94e33(0x129,0x1c0,0x198,0x110)](_0x195f9e,_0x3a3b2f[_0x5a8d88(0x655,0x60f,0x52a,0x5a4)]):_0x5c766c=_0x3a3b2f[_0xe94e33(0x14a,0x127,0x1aa,0x110)](_0x5c766c,_0x5a8d88(0x524,0x59d,0x51e,0x582)));_0x5c766c=_0x5c766c[_0xe94e33(0x1a2,0x1ef,0x14c,0x1bd)](/\/v1\/$/,_0x3a3b2f[_0xe94e33(0xf4,0x137,0x1b7,0x130)]),_0x1dcb8e=_0x3a3b2f[_0xe94e33(0x25a,0x164,0x201,0x19c)],_0x541758=_0x3a3b2f[_0x5a8d88(0x641,0x55a,0x566,0x59a)](getRequestHeaders,window[_0xe94e33(0x15e,0x289,0x14c,0x1e9)]);const _0x4fa8d2={};_0x4fa8d2[_0x5a8d88(0x6b1,0x58f,0x66f,0x63d)+_0x5a8d88(0x6bc,0x615,0x6fc,0x678)+'ce']=_0x3a3b2f[_0x5a8d88(0x5e5,0x6bf,0x649,0x62c)],_0x4fa8d2[_0xe94e33(0x28a,0x1e2,0x170,0x1e5)]=_0x5c766c,_0x4fa8d2[_0x5a8d88(0x530,0x5e0,0x521,0x5a6)+'lude_heade'+'rs']=_0x5a8d88(0x548,0x663,0x525,0x5c4)+_0xe94e33(0xbe,0x83,0xce,0x13c)+_0xe94e33(0x182,0x191,0x2b9,0x223)+_0x335faa+'\x22',_0x4fa8d2[_0x5a8d88(0x619,0x53a,0x55d,0x5a7)]=_0x229a60,_0x4fa8d2[_0xe94e33(0x212,0x132,0x168,0x1e1)]=_0x26f746,_0x4fa8d2[_0xe94e33(0xd8,0xc8,0xd2,0xd4)+'e']=_0x38b69b,_0x4fa8d2['top_p']=_0x206dd0,_0x4fa8d2[_0xe94e33(0x176,0x248,0x21a,0x1db)]=_0x4db2a8,_0x4fa8d2[_0x5a8d88(0x61e,0x680,0x632,0x624)]=![],_0x1f9a0c=_0x4fa8d2;}else _0x4c5021=_0x3a3b2f[_0x5a8d88(0x50f,0x4c8,0x5d8,0x584)](_0x4287e5,_0x3a3b2f[_0x5a8d88(0x5a7,0x5f7,0x5df,0x5a4)]);}_0x242b28&&_0x242b28(_0x3a3b2f[_0xe94e33(0x104,0x16c,0x196,0x111)]);try{if(_0x3a3b2f[_0xe94e33(0x263,0x29a,0x1cb,0x1f6)](_0x3a3b2f[_0xe94e33(0x247,0x175,0x236,0x1f4)],_0x3a3b2f['MJVyf'])){const _0x2184c0=await _0x3a3b2f[_0x5a8d88(0x6b2,0x5f3,0x5d5,0x690)](fetch,_0x1dcb8e,{'method':_0x3a3b2f[_0xe94e33(0x156,0x1c6,0x128,0x196)],'headers':_0x541758,'body':JSON[_0xe94e33(0x18d,0x177,0x168,0x185)](_0x1f9a0c),'signal':_0x4e2b8e}),_0x3ecb5b=await _0x2184c0['json']();if(_0x3ecb5b[_0x5a8d88(0x5a7,0x5a1,0x687,0x5e1)]){let _0x295d92;if(_0x3a3b2f[_0xe94e33(0x15a,0xbc,0x14f,0x138)](typeof _0x3ecb5b[_0x5a8d88(0x533,0x5ee,0x624,0x5e1)],_0x3a3b2f[_0x5a8d88(0x5c6,0x5ae,0x6d6,0x63b)])&&_0x3ecb5b[_0x5a8d88(0x588,0x5b4,0x53a,0x5e1)][_0xe94e33(0x134,0x218,0x16a,0x193)]){if(_0x3a3b2f[_0x5a8d88(0x5a9,0x5d4,0x524,0x5d9)]===_0x3a3b2f[_0x5a8d88(0x5bd,0x600,0x562,0x5d9)]){_0x295d92=''+_0x3ecb5b[_0xe94e33(0x13d,0x1a5,0x11c,0x16d)][_0x5a8d88(0x54b,0x6a3,0x5be,0x607)];const _0x48a90d=[];if(_0x3ecb5b[_0x5a8d88(0x59e,0x574,0x64f,0x5e1)]['type'])_0x48a90d[_0x5a8d88(0x5e8,0x5d9,0x676,0x617)](_0xe94e33(0x1b8,0xc4,0x119,0x147)+_0x3ecb5b[_0xe94e33(0x1be,0x158,0xbe,0x16d)][_0x5a8d88(0x55d,0x6a9,0x6cd,0x61a)]);if(_0x3ecb5b[_0x5a8d88(0x58b,0x689,0x576,0x5e1)]['code'])_0x48a90d[_0x5a8d88(0x689,0x6a6,0x55c,0x617)](_0xe94e33(0x27c,0x24e,0x1cc,0x1c8)+_0x3ecb5b['error'][_0xe94e33(0x265,0x1cf,0x1a7,0x1ed)]);_0x3a3b2f['inFbQ'](_0x48a90d[_0x5a8d88(0x5e7,0x61e,0x542,0x5ea)],0x1*0xc4d+-0x89d+-0x3b0*0x1)&&(_0x295d92+='\x20('+_0x48a90d[_0x5a8d88(0x629,0x60d,0x621,0x6a4)](',\x20')+')');}else _0xd63aec=_0x5f0933;}else _0x295d92=''+JSON[_0xe94e33(0x117,0x18b,0xf5,0x185)](_0x3ecb5b[_0xe94e33(0x19b,0x204,0x182,0x16d)]);throw new Error(_0x295d92);}if(!_0x2184c0['ok'])throw new Error(_0xe94e33(0xa9,0x99,0x52,0x10a)+_0x2184c0[_0x5a8d88(0x668,0x62d,0x5c0,0x5d1)]+'\x20'+_0x2184c0['statusText']);const _0x2c593f=_0x3ecb5b['choices']?.[-0x92e+0x1653+-0xd25]?.[_0xe94e33(0x109,0xdf,0x18c,0x193)]?.[_0x5a8d88(0x594,0x52b,0x63c,0x5da)]||'';!_0x2c593f&&toastr[_0xe94e33(0x123,0x1b0,0x1d1,0x135)](_0x3a3b2f[_0x5a8d88(0x5be,0x5fd,0x681,0x636)]);_0x242b28&&_0x3a3b2f[_0x5a8d88(0x66f,0x623,0x6a8,0x611)](_0x242b28,_0x2c593f);_0x3a3b2f[_0xe94e33(0xe0,0x86,0xc3,0x126)](addLog,_0xe94e33(0x1ff,0xbc,0x16d,0x162)+_0xe94e33(0x204,0xf5,0x132,0x1b2)),_0x3a3b2f['CFevq'](addLog,_0x2c593f),_0x3a3b2f[_0x5a8d88(0x4cd,0x4f5,0x4e7,0x577)](addLog,'=====\x20LLM\x20'+_0xe94e33(0x200,0x1d4,0x197,0x224)),taskQueue['completeTa'+'sk'](_0x5b9d79,!![]),llmTaskControllers[_0xe94e33(0x274,0x241,0x284,0x244)](_0x5b9d79);const _0x411973={};_0x411973['success']=!![],_0x411973[_0xe94e33(0x21e,0x23e,0x1eb,0x236)]=_0x2c593f,_0x411973['id']=_0x5e25d1,eventSource[_0x5a8d88(0x71c,0x64e,0x701,0x69f)](eventNames[_0xe94e33(0x17f,0x86,0x85,0x13d)+_0x5a8d88(0x591,0x595,0x5d8,0x5de)],_0x411973);}else{const _0xa4a128=_0x9a2fe7[_0x485631][_0xe94e33(0xa8,0xa2,0xe0,0x14a)+_0xe94e33(0x144,0xb0,0x191,0x12b)+_0x5a8d88(0x5a2,0x693,0x63f,0x648)]||{},_0xfa08dd={};_0xfa08dd[_0x5a8d88(0x62d,0x6fd,0x727,0x6a1)+'e']='默认',_0xfa08dd[_0x5a8d88(0x5f9,0x658,0x64d,0x601)+_0x5a8d88(0x68d,0x708,0x6a4,0x66e)]='默认';const _0x222982=_0xa4a128[_0x120770]||_0xfa08dd,_0x3f1f9d=_0x1ac850[_0x4d10ce][_0xe94e33(0x23b,0x1fd,0x25a,0x1dc)+'es']||{},_0x442acc=_0x17bc94[_0x18c938][_0xe94e33(0x240,0x217,0x237,0x1a5)+'xt_profile'+'s']||{},_0x2b90a4=_0x222982[_0xe94e33(0x234,0x2a1,0x29e,0x22d)+'e']||'默认',_0x5d0d10=_0x3f1f9d[_0x2b90a4]||_0x3f1f9d[_0x1c4020[_0xe94e33(0x14a,0x177,0x186,0x17e)](_0x3f1f9d)[0x1f8a+0x25f*0x9+-0x34e1]]||{},_0x294ae8=_0x222982[_0x5a8d88(0x600,0x578,0x6ba,0x601)+_0x5a8d88(0x5b4,0x704,0x6af,0x66e)]||'默认',_0x2e7ed1=_0x442acc[_0x294ae8]||_0x442acc[_0x291ff9[_0x5a8d88(0x599,0x570,0x5da,0x5f2)](_0x442acc)[-0x1*0x76d+-0x11f2+-0x875*-0x3]]||{},_0x3f6e3f={};return _0x3f6e3f['api_url']=_0x5d0d10[_0xe94e33(0x41,0x97,0x4e,0xd7)]||'',_0x3f6e3f[_0xe94e33(0x29c,0x265,0x1d4,0x1ef)]=_0x5d0d10['api_key']||'',_0x3f6e3f[_0xe94e33(0x101,0x10d,0xb3,0x133)]=_0x5d0d10[_0xe94e33(0x13e,0x94,0x98,0x133)]||'',_0x3f6e3f[_0xe94e33(0xd9,0x99,0x102,0xd4)+'e']=_0x5d0d10[_0xe94e33(0x14b,0x5f,0x157,0xd4)+'e']??-0x9c8+0x1464+-0x7*0x184+0.7,_0x3f6e3f[_0xe94e33(0x148,0x13e,0x1f1,0x181)]=_0x5d0d10['top_p']??-0x21*0xdf+0x49*-0x3d+0x2e25,_0x3f6e3f[_0xe94e33(0x1bd,0x175,0x20c,0x1db)]=_0x5d0d10[_0x5a8d88(0x688,0x5f0,0x601,0x64f)]??0x87*-0x21+0x4cd+-0x1*-0xe9a,_0x3f6e3f[_0xe94e33(0x186,0x26c,0x195,0x1b0)]=_0x5d0d10[_0x5a8d88(0x642,0x66a,0x6e2,0x624)]??![],_0x3f6e3f[_0x5a8d88(0x5c0,0x64c,0x5e2,0x670)+'xy']=_0x5d0d10[_0xe94e33(0x23b,0x257,0x23f,0x1fc)+'xy']??![],_0x3f6e3f['context']=_0x2e7ed1,_0x3f6e3f;}}catch(_0x453a18){if(_0x3a3b2f[_0x5a8d88(0x5dc,0x720,0x621,0x66a)](_0x453a18[_0x5a8d88(0x58f,0x5ff,0x65a,0x5d4)],_0x3a3b2f[_0xe94e33(0x27d,0x19d,0x2b0,0x1f8)])){const _0x4ba848=(_0x5a8d88(0x6af,0x67d,0x710,0x653)+'0')[_0xe94e33(0xec,0x21a,0x157,0x172)]('|');let _0x195ca8=-0xa5f+0x5*-0x59f+0x267a;while(!![]){switch(_0x4ba848[_0x195ca8++]){case'0':return;case'1':const _0xa325e4={};_0xa325e4[_0x5a8d88(0x5e4,0x5a3,0x62d,0x5d4)]=_0x3a3b2f[_0xe94e33(0x270,0x2a1,0x221,0x1f8)],_0xa325e4[_0x5a8d88(0x695,0x650,0x636,0x607)]=_0x3a3b2f[_0xe94e33(0x1e8,0x1d4,0x144,0x1ba)];const _0x273a5c={};_0x273a5c[_0x5a8d88(0x49d,0x577,0x5aa,0x547)]=![],_0x273a5c['result']=null,_0x273a5c['id']=_0x5e25d1,_0x273a5c['error']=_0xa325e4,eventSource['emit'](eventNames[_0x5a8d88(0x63e,0x63e,0x54b,0x5b1)+_0xe94e33(0x1ee,0x190,0x17d,0x16a)],_0x273a5c);continue;case'2':taskQueue[_0xe94e33(0x247,0x289,0x26f,0x1d9)+'us'](_0x5b9d79,TaskStatus[_0x5a8d88(0x5f4,0x5f1,0x617,0x59c)]);continue;case'3':console[_0xe94e33(0x1a3,0x109,0x11a,0x100)](_0x3a3b2f['haJSE']);continue;case'4':_0xdbd56d=!![];continue;case'5':llmTaskControllers[_0xe94e33(0x20a,0x2eb,0x201,0x244)](_0x5b9d79);continue;}break;}}console['error']('LLM\x20Execut'+_0x5a8d88(0x603,0x539,0x5fc,0x5e4),_0x453a18);const _0x4b8473=_0xe94e33(0xb6,0x58,0x100,0xf1)+_0x453a18['message'];if(_0x242b28){if(_0x3a3b2f['TPKIi'](_0x3a3b2f[_0xe94e33(0x13e,0x19d,0x27a,0x1f7)],_0x3a3b2f['AUcVL'])){if(_0x3a3b2f[_0xe94e33(0x259,0x19b,0x26a,0x1f6)](_0x51f938[_0xe94e33(0xcf,0xc4,0x112,0x160)],_0x5a8d88(0x4ef,0x557,0x5e2,0x556))){const _0x1fc598=_0x3a3b2f[_0xe94e33(0x1c3,0x18c,0x1a3,0x1ee)][_0xe94e33(0xff,0x1e0,0x18a,0x172)]('|');let _0xd935d1=0x2*-0x3c2+-0x3*0x884+-0x2*-0x1088;while(!![]){switch(_0x1fc598[_0xd935d1++]){case'0':_0x57873b['updateStat'+'us'](_0x5b7878,_0x25ad6f[_0xe94e33(0xec,0x112,0xff,0x128)]);continue;case'1':_0x5d6cb5[_0x5a8d88(0x6fa,0x68e,0x717,0x6b8)](_0x1d977d);continue;case'2':return;case'3':const _0x436c58={};_0x436c58[_0xe94e33(0xd5,0xef,0xf7,0x160)]=_0x3a3b2f[_0x5a8d88(0x61b,0x5c9,0x67d,0x66c)],_0x436c58[_0xe94e33(0x144,0x205,0x23d,0x193)]=_0xe94e33(0x181,0x15a,0x1a1,0x1ea)+'orted';const _0x2aa012={};_0x2aa012[_0x5a8d88(0x4be,0x556,0x5c0,0x547)]=![],_0x2aa012['result']=null,_0x2aa012['id']=_0x392dad,_0x2aa012[_0xe94e33(0x11a,0x1f5,0x1c3,0x16d)]=_0x436c58,_0x4083bc[_0x5a8d88(0x5fa,0x653,0x609,0x69f)](_0x43deaf,_0x2aa012);continue;case'4':_0x54b7b5=!![];continue;}break;}}_0x4f59b9[_0x5a8d88(0x666,0x552,0x647,0x5e1)](_0x49660a+_0x5a8d88(0x6b4,0x67d,0x669,0x69a),_0x53f7aa);const _0x117b7c=_0xe94e33(0x9d,0x4d,0xf0,0xf1)+_0x5284bd[_0x5a8d88(0x572,0x5d5,0x614,0x607)];_0x1b2dae&&_0x16a0d3(_0x117b7c);_0x4c87d4[_0xe94e33(0x157,0x169,0x227,0x16d)](_0xab3d5d[_0xe94e33(0x24b,0xf2,0x17e,0x193)]),_0x56c20f[_0x5a8d88(0x6cd,0x5f5,0x6ae,0x61d)+'sk'](_0x41631e,![]),_0x502c31[_0x5a8d88(0x773,0x66d,0x70d,0x6b8)](_0x114e02);const _0x2ae482={};_0x2ae482[_0xe94e33(0x85,0x155,0x31,0xd3)]=![],_0x2ae482[_0xe94e33(0x23e,0x1f7,0x26d,0x236)]=_0x117b7c,_0x2ae482['id']=_0x245562,_0x3ad741[_0x5a8d88(0x640,0x735,0x706,0x69f)](_0x14e1c0,_0x2ae482);}else _0x3a3b2f[_0xe94e33(0x2e6,0x1a4,0x237,0x247)](_0x242b28,_0x4b8473);}toastr[_0xe94e33(0x1ea,0x139,0x180,0x16d)](_0x453a18[_0x5a8d88(0x66c,0x5dd,0x553,0x607)]),taskQueue['completeTa'+'sk'](_0x5b9d79,![]),llmTaskControllers['delete'](_0x5b9d79);const _0x44055a={};_0x44055a['success']=![],_0x44055a[_0xe94e33(0x20d,0x201,0x2f0,0x236)]=_0x4b8473,_0x44055a['id']=_0x5e25d1,eventSource[_0x5a8d88(0x723,0x68e,0x61f,0x69f)](eventNames[_0xe94e33(0x1cc,0x142,0x197,0x13d)+_0xe94e33(0x1ee,0x1c4,0xae,0x16a)],_0x44055a);}finally{_0x3a3b2f[_0x5a8d88(0x608,0x64e,0x5ec,0x657)](currentLLMRequestController,_0x38370b)&&(_0x3a3b2f[_0x5a8d88(0x5f9,0x541,0x5bd,0x5bf)](_0x5a8d88(0x6dd,0x5cd,0x6e3,0x65f),_0x3a3b2f['BSeRb'])?_0x3a3b2f['XGBWL'](_0x5ea2ac,_0x40b2f0):currentLLMRequestController=null),(!_0xdbd56d||_0x3a3b2f[_0xe94e33(0xf1,0xb9,0x90,0x138)](currentLLMRequestController,null))&&(_0x3a3b2f[_0x5a8d88(0x710,0x5b7,0x6a4,0x66a)](_0x3a3b2f[_0xe94e33(0x219,0x172,0x19d,0x194)],_0x3a3b2f['IeqWe'])?stopFabLoading():_0x32cb28+='\x20('+_0x55f9fb[_0xe94e33(0x22d,0x183,0x1ab,0x230)](',\x20')+')');}}export function createGetPromptHandler(_0x2559e6,_0x5ae787){const _0x18d313={'OdWbh':function(_0x5c3457,_0x2116d9){return _0x5c3457(_0x2116d9);}};return function(_0x554f9a){const {id:_0x2705a5}=_0x554f9a;if(!_0x2705a5)return;const _0x36a301=REQUEST_TYPE_NAMES[_0x2559e6]||_0x2559e6;console[_0x151604(0x337,0x2ad,0x385,0x2ee)](_0x1a8006(0xca,0xbe,0x100,0x15b)+'\x20收到'+_0x36a301+(_0x151604(0x364,0x2c4,0x2b2,0x320)+_0x1a8006(-0x54,-0x69,0x4,-0xbf))+_0x2705a5+')');const _0x11a2aa=_0x18d313[_0x151604(0x470,0x410,0x526,0x3c3)](buildPromptForRequestType,_0x2559e6),_0x69bac2={};function _0x1a8006(_0x25d942,_0x212271,_0x53bff1,_0x3b69f0){return _0x2980(_0x212271- -0x238,_0x53bff1);}_0x69bac2['prompt']=_0x11a2aa,_0x69bac2['id']=_0x2705a5;function _0x151604(_0x24063b,_0x32ed0a,_0x196c11,_0x469059){return _0x2980(_0x24063b-0x13e,_0x196c11);}eventSource[_0x151604(0x462,0x4bd,0x4e8,0x4af)](_0x5ae787,_0x69bac2);};}export function createExecuteHandler(_0x1723df,_0x5d8e58,_0x193303=null){function _0x28d81a(_0x42d710,_0x511150,_0x5adf3f,_0x23f498){return _0x150b91(_0x42d710-0x15e,_0x23f498- -0xac,_0x5adf3f,_0x23f498-0xda);}function _0x44da5c(_0x568e3c,_0x3c4620,_0x86431,_0x4accb5){return _0x150b91(_0x568e3c-0x16c,_0x86431-0xa9,_0x4accb5,_0x4accb5-0xc6);}const _0xc27998={'LJMfM':function(_0x2cb58c,_0x8e5bf){return _0x2cb58c!==_0x8e5bf;},'WrLbG':_0x44da5c(0x1d3,0x1ff,0x1b0,0x124),'MYTnz':_0x44da5c(0x29e,0x24d,0x200,0x1e3),'fhWnd':function(_0x4d6ef1){return _0x4d6ef1();}};return async function(_0x4bee38){function _0x186dad(_0x476355,_0x528abc,_0x4437cf,_0x2b841b){return _0x28d81a(_0x476355-0x38,_0x528abc-0x16e,_0x2b841b,_0x4437cf-0x16a);}function _0x3f1af8(_0x9b35e7,_0x1ce65d,_0x574ef6,_0x14a5f8){return _0x44da5c(_0x9b35e7-0x1a1,_0x1ce65d-0x10,_0x1ce65d-0x4cc,_0x9b35e7);}if(_0xc27998[_0x3f1af8(0x5de,0x616,0x6b8,0x59c)](_0xc27998[_0x186dad(0x13c,0xae,0x13f,0x13d)],_0xc27998[_0x186dad(0x116,0x117,0x15e,0x20a)])){const _0x3af25b=_0x193303?_0xc27998[_0x186dad(0x209,0x1b9,0x260,0x2ad)](_0x193303):null;await executeTypedLLMRequest(_0x4bee38,_0x1723df,_0x5d8e58,_0x3af25b);}else _0x23bf9d(_0xd48e36);};}