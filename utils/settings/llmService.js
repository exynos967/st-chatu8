(function(_0xda7f7d,_0x7aea82){function _0x28ae90(_0x2c5099,_0x2fcc01,_0x5a93f7,_0x14d065){return _0x43f3(_0x14d065- -0x369,_0x5a93f7);}const _0x230a7c=_0xda7f7d();function _0x288d1b(_0x86649f,_0xfa0e00,_0x2dbc36,_0x480009){return _0x43f3(_0x86649f-0xea,_0x480009);}while(!![]){try{const _0x387acb=parseInt(_0x288d1b(0x3a0,0x355,0x3cb,0x3b1))/(-0x1*-0x1567+0x2*0xfb3+-0x34cc)+-parseInt(_0x28ae90(-0x231,-0x144,-0x226,-0x1e0))/(-0x6cd*0x4+0x145b+0x9*0xc3)+-parseInt(_0x288d1b(0x2e1,0x234,0x33b,0x229))/(-0xff5+0xbd3*0x2+0x3d7*-0x2)*(parseInt(_0x288d1b(0x3fa,0x445,0x343,0x402))/(0x26*0xe6+0x910+-0x2b30))+parseInt(_0x288d1b(0x3c3,0x3fc,0x391,0x37a))/(-0x1c1f*-0x1+-0xfc9+0x41b*-0x3)+-parseInt(_0x288d1b(0x318,0x341,0x2c7,0x39a))/(0x903+-0x2*0x12cf+0x15d*0x15)+parseInt(_0x28ae90(-0x277,-0x120,-0xf4,-0x1ad))/(0x3d4+-0x5*0x33b+-0x3*-0x41e)*(parseInt(_0x288d1b(0x2fa,0x259,0x29a,0x35c))/(-0x1044+-0x1455+0x24a1))+parseInt(_0x28ae90(-0x12c,-0x107,-0x104,-0xd0))/(0x12*0x1a9+-0x95d+-0x51f*0x4)*(parseInt(_0x288d1b(0x374,0x2da,0x364,0x331))/(-0x9f*0x29+0x8*-0x3b5+0x1263*0x3));if(_0x387acb===_0x7aea82)break;else _0x230a7c['push'](_0x230a7c['shift']());}catch(_0x1c3a4d){_0x230a7c['push'](_0x230a7c['shift']());}}}(_0x5e72,0x67363+0x1*-0x13cd75+0x1763cc));const _0x290b01=(function(){function _0x586a8e(_0x21dbff,_0x172c68,_0x3ec315,_0x58cd57){return _0x43f3(_0x172c68-0x3aa,_0x21dbff);}const _0x535b94={};_0x535b94[_0x4b7399(0x6fb,0x611,0x6e8,0x638)]=_0x586a8e(0x547,0x607,0x65b,0x559)+_0x4b7399(0x634,0x69a,0x52b,0x5d7)+_0x586a8e(0x491,0x546,0x4b1,0x612),_0x535b94[_0x4b7399(0x56b,0x605,0x63d,0x5eb)]=function(_0x3b1418,_0x460873){return _0x3b1418!==_0x460873;},_0x535b94[_0x586a8e(0x62b,0x593,0x582,0x625)]=function(_0xd44e92,_0x5d47ae){return _0xd44e92===_0x5d47ae;},_0x535b94[_0x586a8e(0x658,0x6ce,0x77b,0x723)]=_0x4b7399(0x581,0x62a,0x608,0x62b);const _0x3e21b0=_0x535b94;function _0x4b7399(_0x44df40,_0x2f3f42,_0x4577e7,_0x4c1ab8){return _0x43f3(_0x4c1ab8-0x39a,_0x2f3f42);}let _0x2fa5e2=!![];return function(_0x508822,_0x2e33ec){function _0x11f476(_0x89c51,_0x5b8928,_0x21fd7f,_0x3bf772){return _0x4b7399(_0x89c51-0xb6,_0x3bf772,_0x21fd7f-0x1d1,_0x21fd7f- -0x31);}function _0x5f4f4a(_0x4c671e,_0x2477de,_0x3c0889,_0x3b3ffe){return _0x4b7399(_0x4c671e-0x1ab,_0x3b3ffe,_0x3c0889-0x1b3,_0x2477de- -0x754);}const _0xfd8325={'vlNqB':_0x3e21b0[_0x11f476(0x663,0x64b,0x607,0x621)],'uysti':function(_0x1faf8b,_0x1f8103){return _0x1faf8b===_0x1f8103;},'LIiqR':_0x5f4f4a(-0x1c3,-0x116,-0x137,-0x17b),'kcXAr':function(_0x208629,_0x40467c){function _0x3767ad(_0x43c10a,_0x387d22,_0x336d5e,_0x6d168b){return _0x11f476(_0x43c10a-0x19e,_0x387d22-0x19a,_0x387d22- -0x59a,_0x43c10a);}return _0x3e21b0[_0x3767ad(-0x2d,0x20,0xcf,0xb1)](_0x208629,_0x40467c);},'bJBQr':function(_0x43bde2,_0xfab4bc){function _0x22ce40(_0x363f57,_0x83cafd,_0x29b805,_0x8fe34d){return _0x5f4f4a(_0x363f57-0x1e0,_0x8fe34d-0x4c2,_0x29b805-0x33,_0x29b805);}return _0x3e21b0[_0x22ce40(0x40e,0x422,0x312,0x359)](_0x43bde2,_0xfab4bc);}};if(_0x3e21b0[_0x11f476(0x5cb,0x555,0x552,0x5bb)](_0x3e21b0[_0x11f476(0x752,0x6e5,0x68d,0x6a5)],_0x11f476(0x5d3,0x637,0x5fa,0x55c))){const _0x2f0a46=_0x2fa5e2?function(){function _0x200d5e(_0x5a5aa6,_0x2f0532,_0x39e572,_0xde0e78){return _0x5f4f4a(_0x5a5aa6-0x16a,_0x39e572- -0x1f,_0x39e572-0x5a,_0x2f0532);}const _0x237c75={};_0x237c75['YEMMW']=_0xfd8325[_0x4ab42b(0x5e,0x21,0xed,0x83)];const _0x39d311=_0x237c75;function _0x4ab42b(_0x5733d6,_0x4f4ab0,_0x5a9a76,_0x20ff30){return _0x11f476(_0x5733d6-0x82,_0x4f4ab0-0xe9,_0x5a9a76- -0x4d7,_0x4f4ab0);}if(_0x2e33ec){if(_0xfd8325[_0x4ab42b(0x159,0x16a,0x1ab,0x1f0)](_0xfd8325[_0x4ab42b(0x110,0x5c,0xb7,0xd1)],_0xfd8325[_0x4ab42b(0xd2,0x3c,0xb7,0xc6)])){const _0x1ace17=_0x2e33ec[_0x4ab42b(0x1b8,0x106,0xf2,0x15d)](_0x508822,arguments);return _0x2e33ec=null,_0x1ace17;}else{const _0x3cc460=_0x39d311['YEMMW'];_0x330ade[_0x4ab42b(0x141,0x105,0x102,0x184)](_0x3cc460);const _0x3b6760={};_0x3b6760['success']=![],_0x3b6760[_0x200d5e(-0x1ea,-0x259,-0x1e0,-0x229)]=_0x3cc460,_0x3b6760['id']=_0x4fd444,_0x475ddd[_0x4ab42b(0xe7,0xc6,0x3f,0xf5)](_0x26f465[_0x200d5e(-0xaa,-0x1cf,-0x11a,-0x58)+_0x200d5e(-0xca,-0xd5,-0xe2,-0x23)],_0x3b6760);return;}}}:function(){};return _0x2fa5e2=![],_0x2f0a46;}else _0x54c2bd[_0x5f4f4a(-0x12b,-0x1a2,-0x13e,-0x17c)][_0x11f476(0x47a,0x580,0x4ff,0x5a3)](_0x5a0b1c=>{if(_0x5a0b1c[_0x376ae9(-0x71,-0x13f,-0x130,-0x8c)]&&_0xfd8325['kcXAr'](_0x5a0b1c[_0x376ae9(-0x71,-0x95,-0x122,-0x13b)]['trim'](),'')){const _0x48841c={};_0x48841c[_0x376ae9(-0x112,-0x13d,-0x1c9,-0xba)]=_0x35a2e2(0x6ba,0x68a,0x61c,0x5d1),_0x48841c[_0x376ae9(-0x154,-0x153,-0x88,-0xee)]=_0x5a0b1c[_0x35a2e2(0x561,0x5bc,0x61c,0x6d0)],_0x402a50[_0x35a2e2(0x5eb,0x565,0x552,0x624)](_0x48841c);}function _0x376ae9(_0x27cd07,_0x4709fc,_0xdcc8db,_0x613788){return _0x11f476(_0x27cd07-0x61,_0x4709fc-0x16d,_0x27cd07- -0x6f7,_0x4709fc);}function _0x35a2e2(_0x189892,_0x4660a2,_0x1bad46,_0x2fea96){return _0x5f4f4a(_0x189892-0xfd,_0x1bad46-0x6b9,_0x1bad46-0x91,_0x2fea96);}if(_0x5a0b1c['assistant']&&_0xfd8325['bJBQr'](_0x5a0b1c[_0x35a2e2(0x5ff,0x5db,0x566,0x4f5)]['trim'](),'')){const _0x254042={};_0x254042[_0x35a2e2(0x5dc,0x623,0x57b,0x56c)]='assistant',_0x254042[_0x376ae9(-0x154,-0xd8,-0xfb,-0x91)]=_0x5a0b1c[_0x35a2e2(0x5ab,0x56b,0x566,0x4ef)],_0x359ef6[_0x35a2e2(0x4d5,0x4d5,0x552,0x4c3)](_0x254042);}});};}()),_0x1d6223=_0x290b01(this,function(){function _0x3096c2(_0x147a67,_0x4ce46b,_0x1c7e95,_0x301e1f){return _0x43f3(_0x301e1f-0x6a,_0x147a67);}function _0x3b1387(_0x525681,_0x5b63fe,_0xbcdfde,_0xea5be1){return _0x43f3(_0x5b63fe- -0x160,_0xea5be1);}const _0x584b58={};_0x584b58[_0x3096c2(0x39b,0x300,0x3c7,0x379)]='(((.+)+)+)'+'+$';const _0x2efd60=_0x584b58;return _0x1d6223[_0x3096c2(0x2fe,0x331,0x343,0x32f)]()[_0x3b1387(0x7d,0x79,0xfb,0x30)](_0x2efd60['gHxrA'])[_0x3096c2(0x34a,0x358,0x305,0x32f)]()[_0x3b1387(0x6f,0xf4,0x160,0x143)+'r'](_0x1d6223)[_0x3b1387(0x9,0x79,0x8e,0x34)](_0x2efd60[_0x3096c2(0x2df,0x418,0x418,0x379)]);});_0x1d6223();import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';function _0x3fdeda(_0x524221,_0x2dc899,_0xb0190c,_0x5e6671){return _0x43f3(_0x2dc899- -0x1dc,_0x524221);}import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on'](_0x1af184(0x3ff,0x3c2,0x3e5,0x43d)+'cancel_llm'+_0x3fdeda(0x4b,-0x25,-0x6c,-0x50),({taskId:_0x257db7})=>{const _0x445dd3=llmTaskControllers[_0x397806(-0x98,0x8a,0x28,0x6c)](_0x257db7);function _0x245386(_0x3d424a,_0x1f8601,_0x368b5a,_0x22fbd8){return _0x3fdeda(_0x22fbd8,_0x368b5a-0x30d,_0x368b5a-0x25,_0x22fbd8-0x6a);}function _0x397806(_0x12bb09,_0x3703fa,_0x423d7d,_0x42cb6b){return _0x3fdeda(_0x42cb6b,_0x423d7d- -0x2c,_0x423d7d-0x1f,_0x42cb6b-0x5f);}_0x445dd3&&('lxEgM'!==_0x245386(0x3a1,0x33e,0x33f,0x2eb)?(_0x187483[_0x245386(0x475,0x4d7,0x411,0x475)](),_0x176006[_0x245386(0x374,0x444,0x3dc,0x37e)](_0x25c46f),_0x390534[_0x397806(0xd4,0xc1,0x125,0xf2)](_0x397806(0xfa,0x125,0x93,0x136)+'消:\x20'+_0x5bb276)):(_0x445dd3[_0x397806(0x67,0x26,0xd8,0x10c)](),llmTaskControllers[_0x397806(0x98,0x50,0xa3,0x25)](_0x257db7),console[_0x397806(0x85,0x133,0x125,0xd2)](_0x245386(0x42b,0x469,0x3cc,0x3a9)+_0x397806(-0xd2,0xf,-0x5c,-0x88)+_0x257db7)));});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x3fbad0){currentLLMRequestController=_0x3fbad0;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){const _0x5cc07f={};_0x5cc07f[_0x2b4433(0x28,-0x4f,0x46,-0x107)]=_0x2bc787(-0xed,-0x102,-0xb8,-0x92),_0x5cc07f[_0x2b4433(0x57,-0x20,-0xc7,0x5b)]=_0x2b4433(-0xf3,-0xee,-0x172,-0xe9),_0x5cc07f[_0x2b4433(-0xe6,-0xea,-0x106,-0x35)]=function(_0x110799,_0x21f6fc){return _0x110799+_0x21f6fc;},_0x5cc07f[_0x2b4433(0x7c,0x30,0x58,-0x4)]='/api/backe'+'nds/chat-c'+'ompletions'+_0x2b4433(0x42,0x58,0x2a,0xd),_0x5cc07f[_0x2bc787(-0x40,-0x109,-0x68,-0xbb)]=_0x2b4433(-0x8b,-0x55,-0x124,-0x42),_0x5cc07f[_0x2b4433(-0x32,-0xcf,-0x41,-0xa8)]=_0x2b4433(-0x5e,0x37,0xe0,0x1d),_0x5cc07f[_0x2bc787(-0x157,-0x11c,-0x1ea,-0x15d)]='Zczfq';const _0x7a5abe=_0x5cc07f;function _0x2bc787(_0x399928,_0x2d8462,_0xe63076,_0x5738f8){return _0x3fdeda(_0x399928,_0x5738f8- -0x1b0,_0xe63076-0x168,_0x5738f8-0x39);}function _0x2b4433(_0x5366f8,_0x4078f2,_0x56e1f3,_0x11ceba){return _0x1af184(_0x5366f8-0x102,_0x5366f8,_0x56e1f3-0x1c8,_0x4078f2- -0x461);}if(currentLLMRequestController){if(_0x7a5abe['bNsIX']===_0x7a5abe[_0x2b4433(-0x13e,-0x7c,-0x51,-0xae)]){let _0x2cda18=_0x5029c7;!_0x2cda18['endsWith'](_0x7a5abe[_0x2bc787(-0x1e9,-0x1a8,-0x180,-0x130)])&&!_0x2cda18[_0x2b4433(-0xc4,0x11,0xe,-0x4f)](_0x7a5abe[_0x2bc787(-0x172,-0x172,-0x8a,-0x101)])&&(_0x2cda18=_0x7a5abe[_0x2bc787(-0x1a7,-0x29e,-0x27d,-0x1cb)](_0x2cda18,_0x7a5abe[_0x2bc787(-0x155,-0x13c,-0x1f4,-0x130)]));_0x2cda18=_0x2cda18[_0x2bc787(-0x46,0x28,-0x7e,-0x6e)](/\/v1\/$/,_0x7a5abe[_0x2b4433(-0x4d,-0x4f,-0x78,0x37)]),_0x789f4d=_0x7a5abe[_0x2bc787(-0x12d,-0x45,-0x141,-0xb1)],_0x4f04c1=_0x47b8ac(_0x29190c[_0x2bc787(-0x2af,-0x1f9,-0x1fa,-0x1f1)]);const _0x1e16bf={};_0x1e16bf[_0x2bc787(-0x1c0,-0x19e,-0xca,-0x162)+'etion_sour'+'ce']=_0x7a5abe['qpzQU'],_0x1e16bf[_0x2bc787(-0x1c5,-0x239,-0x1a1,-0x202)]=_0x2cda18,_0x1e16bf[_0x2b4433(-0x179,-0xb7,0x0,-0x86)+_0x2b4433(-0x1a6,-0xf3,-0xf9,-0x41)+'rs']=_0x2bc787(-0x31,-0x19c,-0xab,-0xf6)+_0x2bc787(-0x132,-0x208,-0xd7,-0x17d)+_0x2bc787(-0x1c7,-0x12d,-0x175,-0x1c9)+_0x3e75c4+'\x22',_0x1e16bf[_0x2b4433(0xb6,0x88,0x143,0x6)]=_0xe91bc9,_0x1e16bf[_0x2bc787(0x27,0x3f,-0x31,-0x5a)]=_0x19e03d,_0x1e16bf[_0x2b4433(-0x129,-0xe0,-0x119,-0x6f)+'e']=_0x4b97f4,_0x1e16bf[_0x2bc787(-0x1b4,-0x215,-0x22c,-0x1a5)]=_0x19f87e,_0x1e16bf[_0x2bc787(-0x3c,-0x199,-0x120,-0xe6)]=_0x462b26,_0x1e16bf['stream']=![],_0x13dc8c=_0x1e16bf;}else currentLLMRequestController['abort'](),toastr[_0x2bc787(-0x179,-0x125,-0x22b,-0x1ee)](_0x2b4433(0x5,-0x9,0x9d,-0x5d));}}function _0x1af184(_0x33abf7,_0x3a8902,_0x2b3f7d,_0x40410e){return _0x43f3(_0x40410e-0x1b6,_0x3a8902);}export function formatPromptForDisplay(_0x394004){const _0x21580f={'pgnvR':function(_0x450ffe,_0x284c68){return _0x450ffe(_0x284c68);},'yabtG':function(_0x4532f5,_0x344ca2){return _0x4532f5===_0x344ca2;},'qsMYn':_0x3ec750(0x259,0x26c,0x272,0x299),'tnDIE':_0x5c0f7d(0x223,0x2ec,0x1bd,0x1b5),'PhlHY':_0x3ec750(0x2c2,0x2ed,0x253,0x256),'fonOJ':function(_0x2b5c01,_0x4473ff){return _0x2b5c01!==_0x4473ff;},'nBXct':'zqnDq','BjQCG':_0x5c0f7d(0x1b4,0x201,0x1a2,0x108),'uZTQG':_0x3ec750(0x275,0x2d4,0x276,0x2ca),'gHDoZ':function(_0x3ebdef,_0x8920c){return _0x3ebdef/_0x8920c;},'sIZUF':function(_0x376237,_0x4b0cc7){return _0x376237===_0x4b0cc7;},'RotGd':_0x3ec750(0x213,0x1ff,0x260,0x320),'bxyUU':function(_0x1f79e4,_0x4f4608){return _0x1f79e4(_0x4f4608);},'XAyxN':function(_0x108204,_0x4a846f){return _0x108204===_0x4a846f;},'FuQBr':_0x5c0f7d(0xef,0xf2,0x14c,0xf8),'XrXie':_0x3ec750(0x2a8,0x335,0x2a3,0x238),'PtlMo':_0x3ec750(0x179,0x220,0x222,0x22d),'PBllA':_0x5c0f7d(0xdd,0x40,0x1b1,0x16e),'YDXvS':_0x3ec750(0x236,0x16b,0x1ef,0x209),'vEIAv':_0x3ec750(0x258,0x188,0x20c,0x1a3)+_0x5c0f7d(0xcc,0x119,0x6c,-0x4),'ofmCk':_0x3ec750(0x1ab,0x1bf,0x22f,0x2c2),'qPCXx':'object','bhvbS':_0x5c0f7d(0x242,0x1b7,0x1fa,0x17b)};if(typeof _0x394004===_0x21580f['FuQBr'])return _0x394004;function _0x3ec750(_0x4d2f1e,_0x28bc25,_0x563e19,_0xc63156){return _0x1af184(_0x4d2f1e-0x1ab,_0x28bc25,_0x563e19-0x130,_0x563e19- -0x1ad);}if(Array[_0x5c0f7d(0x1ad,0x11e,0x20f,0x114)](_0x394004)){if(_0x21580f[_0x3ec750(0x1c2,0x24e,0x244,0x27c)](_0x21580f[_0x3ec750(0x2f7,0x248,0x2d3,0x2d7)],_0x5c0f7d(0xe3,0xea,0x140,0x16c))){if(_0x1eb69c){const _0x25bf4b=_0x20d026[_0x3ec750(0x254,0x269,0x269,0x2fc)](_0x42af37,arguments);return _0x26fb32=null,_0x25bf4b;}}else{const _0x2c212f=[];return _0x394004[_0x3ec750(0x144,0x23a,0x19f,0x1f8)]((_0x4dff31,_0x39ec55)=>{function _0x321d03(_0x1da426,_0xbd1d84,_0x454b85,_0x48959d){return _0x3ec750(_0x1da426-0x5c,_0xbd1d84,_0x454b85- -0x281,_0x48959d-0x12f);}function _0x469584(_0x567314,_0x2b07e9,_0x402487,_0x3a0a4e){return _0x3ec750(_0x567314-0xaa,_0x2b07e9,_0x402487-0x3ad,_0x3a0a4e-0xc6);}const _0x1e85e9={'PDKzb':function(_0xd13b16,_0x4b3bc0){function _0x4cfb51(_0x2e5319,_0x4e1149,_0x120b62,_0x16ac54){return _0x43f3(_0x4e1149-0x34e,_0x2e5319);}return _0x21580f[_0x4cfb51(0x5c8,0x575,0x5f3,0x603)](_0xd13b16,_0x4b3bc0);},'nFBbI':_0x321d03(0xa1,-0x20,0x7e,0x148),'bAlfB':function(_0xdf9163,_0x4edf2b){return _0xdf9163>_0x4edf2b;},'EwsAX':function(_0x64076b,_0x452736){function _0x57ccbf(_0x2be61f,_0x57b38e,_0x3764bb,_0xf666af){return _0x321d03(_0x2be61f-0x136,_0x2be61f,_0x57b38e-0xeb,_0xf666af-0x8e);}return _0x21580f[_0x57ccbf(-0x23,0x9a,0xa0,0x14a)](_0x64076b,_0x452736);},'DZQuv':_0x21580f[_0x321d03(0x17,-0x35,-0x85,-0x5e)],'xrSbL':_0x21580f[_0x321d03(0x22,-0x6c,0x55,-0x46)],'ANppg':_0x469584(0x646,0x5c1,0x5cc,0x5a7),'gJhxe':function(_0x2c3492,_0x5da794){return _0x2c3492===_0x5da794;},'ixJzT':_0x21580f[_0x469584(0x5ee,0x609,0x604,0x53b)],'dEwog':function(_0x65f74d,_0x39dd0f){function _0x5ef320(_0xc9e624,_0x7db80b,_0x557a61,_0x347cf3){return _0x321d03(_0xc9e624-0x1a,_0x347cf3,_0x7db80b- -0xe6,_0x347cf3-0x9b);}return _0x21580f[_0x5ef320(-0x1f6,-0x13a,-0xb7,-0x194)](_0x65f74d,_0x39dd0f);},'NhjCw':_0x21580f['nBXct'],'zyWKb':_0x21580f[_0x321d03(-0x41,-0x133,-0xc4,-0x123)],'XgvoG':_0x21580f[_0x321d03(-0x6e,0x55,-0x59,-0xc1)],'YguSx':function(_0x1aa5f0,_0x5e72c8){function _0x267458(_0x4b42e8,_0x2a03a4,_0x2c726a,_0x37e788){return _0x469584(_0x4b42e8-0x1e1,_0x37e788,_0x2a03a4- -0x173,_0x37e788-0x1ea);}return _0x21580f[_0x267458(0x53e,0x4da,0x506,0x431)](_0x1aa5f0,_0x5e72c8);}};if(_0x21580f[_0x469584(0x604,0x683,0x6bd,0x60d)](_0x21580f[_0x321d03(0x10a,0x156,0xb0,0xa5)],_0x21580f[_0x321d03(0x23,0xd9,0xb0,0x6c)])){const _0x2b1163=_0x4dff31[_0x469584(0x5fd,0x6db,0x632,0x647)]||_0x469584(0x6d4,0x645,0x623,0x660),_0x364ab4=_0x21580f[_0x469584(0x5d7,0x622,0x67f,0x687)](getRoleLabel,_0x2b1163);_0x2c212f[_0x321d03(-0x7b,-0x63,-0x25,-0xbd)](''+'═'[_0x469584(0x763,0x774,0x6a9,0x6ba)](0x30*-0xa2+-0x1246+0x30d8)),_0x2c212f[_0x469584(0x66b,0x6b9,0x609,0x6c8)]('【'+_0x364ab4+'】'),_0x2c212f[_0x321d03(-0xca,-0xe1,-0x25,-0xf7)](''+'─'[_0x321d03(-0x46,0x45,0x7b,-0x14)](0xd5f+-0x108b+0x35e));const _0x7a0dbd=_0x4dff31[_0x321d03(-0xc,-0x112,-0x3e,0x37)];if(_0x21580f[_0x321d03(-0xe4,-0x5a,-0x3d,-0xf5)](typeof _0x7a0dbd,_0x21580f[_0x469584(0x4f5,0x539,0x5b8,0x524)])){if(_0x21580f[_0x321d03(0x2f,-0xf1,-0x51,-0x7a)](_0x21580f[_0x321d03(0xb5,-0x27,0x1a,0xed)],_0x21580f['PtlMo'])){const {id:_0x127675}=_0x4c1045;if(!_0x127675)return;const _0x1a9aba=_0x230bf9[_0x556348]||_0x416642;_0x23016e[_0x321d03(0x97,0x126,0xb5,0x2c)](_0x469584(0x4ae,0x5fc,0x548,0x5be)+_0x469584(0x6a2,0x63d,0x63e,0x64f)+_0x1a9aba+(_0x469584(0x50b,0x502,0x5c9,0x5ec)+_0x469584(0x6ca,0x672,0x669,0x5a9))+_0x127675+')');const _0x6f41a4=_0x21580f[_0x321d03(-0xe9,-0x75,-0x55,0x62)](_0x4b8f6f,_0x246932),_0x2c8b0d={};_0x2c8b0d[_0x469584(0x65a,0x5c2,0x692,0x6a4)]=_0x6f41a4,_0x2c8b0d['id']=_0x127675,_0x393b18['emit'](_0x55a121,_0x2c8b0d);}else _0x2c212f[_0x321d03(0x7a,-0xca,-0x25,-0x15)](_0x7a0dbd);}else Array[_0x321d03(0x91,-0x27,0x0,0x59)](_0x7a0dbd)&&_0x7a0dbd[_0x321d03(-0x7b,-0xde,-0xe2,-0xd5)](_0x43751a=>{function _0x26a4e2(_0x3d935d,_0x593621,_0x338a1b,_0x34e931){return _0x321d03(_0x3d935d-0x41,_0x34e931,_0x3d935d-0xaf,_0x34e931-0x19d);}function _0x34765e(_0x53718b,_0x48e786,_0x3cddc2,_0x481ce0){return _0x469584(_0x53718b-0x72,_0x53718b,_0x48e786- -0x3a2,_0x481ce0-0x7);}if(_0x1e85e9[_0x34765e(0x230,0x1ff,0x1f8,0x2d2)](_0x1e85e9['DZQuv'],_0x1e85e9[_0x26a4e2(0x139,0x149,0xdb,0xb9)])){if(_0x43751a['type']===_0x1e85e9['xrSbL'])_0x1e85e9[_0x26a4e2(0x9,0x4a,-0x5f,-0x1b)]===_0x34765e(0x384,0x30c,0x3c8,0x297)?_0x5c1590+='\x20('+_0x539c3f[_0x26a4e2(0xde,0x105,0x93,0x1a6)](',\x20')+')':_0x2c212f[_0x34765e(0x280,0x267,0x2b4,0x1ce)](_0x43751a['text']||'');else{if(_0x1e85e9['gJhxe'](_0x43751a['type'],_0x1e85e9[_0x34765e(0x1e1,0x22e,0x190,0x267)])){if(_0x1e85e9['dEwog'](_0x1e85e9['NhjCw'],_0x1e85e9[_0x34765e(0x2be,0x1ef,0x14b,0x1cf)]))_0x20d8d8&&(_0x40314c[_0x26a4e2(0x117,0xa3,0x18e,0x1a4)](),_0x44ef42[_0x26a4e2(-0x2b,0xa5,0x2e,0xf)](_0x26a4e2(0xd9,0x103,0x19a,0x173)));else{const _0x4a9f79=_0x43751a[_0x34765e(0x1bc,0x25e,0x1c4,0x2a7)]?.[_0x26a4e2(0x134,0xa5,0x140,0xa5)]||'';if(_0x4a9f79[_0x26a4e2(0xc,0x48,0x1d,-0xbf)](_0x1e85e9['zyWKb'])){const _0x59505a=_0x4a9f79['match'](/^data:([^;]+);/),_0x5be4af=_0x59505a?_0x59505a[-0x11d*0x16+-0x1*0x1be6+0x315*0x11]:_0x1e85e9[_0x34765e(0x1e8,0x28a,0x346,0x341)],_0x560365=_0x4a9f79[_0x34765e(0x129,0x1e0,0x273,0x29d)](',')[-0x2226+-0x1650+0xb4b*0x5]||'',_0x21d209=Math[_0x34765e(0x2cc,0x209,0x28a,0x1eb)](_0x1e85e9[_0x34765e(0x17e,0x226,0x193,0x1cc)](_0x1e85e9['YguSx'](_0x560365['length']*(-0x1e*-0x8f+-0x15*0x145+-0x2*-0x4f5),-0x267a*0x1+-0x166*-0x12+-0x16*-0x9b),0x87f+0x936+0xdb5*-0x1));_0x2c212f[_0x26a4e2(0x8a,0x92,0x158,-0x12)](_0x34765e(0x3ed,0x33d,0x379,0x320)+':\x20'+_0x5be4af+_0x34765e(0x232,0x1b7,0x1be,0x251)+_0x21d209+'KB]');}else _0x2c212f[_0x34765e(0x288,0x267,0x2af,0x21b)](_0x26a4e2(0x123,0x18e,0x8d,0x1da)+_0x4a9f79+']');}}}}else{let _0x1b6d4;if(_0x1e85e9[_0x34765e(0x201,0x1e5,0x299,0x174)](typeof _0x5c3723[_0x26a4e2(0xa7,0x12c,0x6e,0x115)],_0x1e85e9['nFBbI'])&&_0x555888['error'][_0x26a4e2(0x52,-0x68,0x7b,-0x43)]){_0x1b6d4=''+_0x6f8485['error'][_0x26a4e2(0x52,0xa6,0xaa,-0x6c)];const _0x39b407=[];if(_0x4493f9['error']['type'])_0x39b407[_0x26a4e2(0x8a,-0x3e,0x99,0xd5)](_0x26a4e2(0x5,-0x96,-0x14,-0xc3)+_0xa1c84b[_0x34765e(0x2ed,0x284,0x282,0x2ba)][_0x26a4e2(0xc0,0x50,0x100,0x147)]);if(_0x2970ca[_0x34765e(0x2f1,0x284,0x279,0x22f)]['code'])_0x39b407[_0x26a4e2(0x8a,-0x29,0x23,0x89)]('代码:\x20'+_0x29a1ce[_0x26a4e2(0xa7,-0x1f,0x11a,0xd1)]['code']);_0x1e85e9[_0x34765e(0x2b9,0x1fc,0x1b2,0x270)](_0x39b407[_0x26a4e2(0x26,0x44,0x45,-0xad)],0x79f*0x2+-0x1b9b+0xc5d)&&(_0x1b6d4+='\x20('+_0x39b407[_0x26a4e2(0xde,0x37,0x174,0xcb)](',\x20')+')');}else _0x1b6d4=''+_0x1850af[_0x34765e(0x2ca,0x2e8,0x2b4,0x2b9)](_0x5d3b42['error']);throw new _0x512e42(_0x1b6d4);}});_0x2c212f[_0x321d03(0x91,-0xe,-0x25,-0x7b)]('');}else return!!_0x2c3f9d;}),_0x2c212f[_0x3ec750(0x320,0x2a9,0x2b0,0x363)]('\x0a');}}if(_0x21580f[_0x5c0f7d(0x23c,0x222,0x1b4,0x26d)](typeof _0x394004,_0x21580f[_0x5c0f7d(0x13c,0x171,0x19d,0x77)])&&_0x394004!==null){if(_0x3ec750(0x2aa,0x32b,0x316,0x33a)!==_0x21580f[_0x5c0f7d(0x1d5,0x11c,0x1e0,0x1fc)]){const _0x3ec897=_0x21580f[_0x3ec750(0x2c3,0x137,0x1f6,0x228)][_0x3ec750(0x208,0x14d,0x1d5,0x205)]('|');let _0xf16a9=0x214*0x4+0x126e*0x1+-0x475*0x6;while(!![]){switch(_0x3ec897[_0xf16a9++]){case'0':_0xd3141e[_0x5c0f7d(0x1ee,0x180,0x1a8,0x20d)+'us'](_0x586cd2,_0x838d9c['CANCELLED']);continue;case'1':return;case'2':const _0x4e845b={};_0x4e845b[_0x3ec750(0x215,0x1fd,0x1b0,0x240)]=_0x21580f['YDXvS'],_0x4e845b[_0x3ec750(0x2f3,0x1a3,0x224,0x182)]=_0x21580f[_0x3ec750(0x3ba,0x34e,0x334,0x36d)];const _0x2b7b3e={};_0x2b7b3e['success']=![],_0x2b7b3e['result']=null,_0x2b7b3e['id']=_0x892c8c,_0x2b7b3e['error']=_0x4e845b,_0x3e2fd8[_0x5c0f7d(0xe2,0x92,0x101,0x12c)](_0x138655,_0x2b7b3e);continue;case'3':_0x9d6f07=!![];continue;case'4':_0x45478f[_0x3ec750(0x26e,0x352,0x2b4,0x24a)](_0x342bbc);continue;}break;}}else return JSON[_0x5c0f7d(0x209,0x22f,0x167,0x1b9)](_0x394004,null,-0x114*0x21+0x1332+-0x2*-0x832);}function _0x5c0f7d(_0x441d8f,_0x287f53,_0x96290d,_0x32fd63){return _0x1af184(_0x441d8f-0x57,_0x32fd63,_0x96290d-0x1ef,_0x441d8f- -0x281);}return _0x21580f['bxyUU'](String,_0x394004);}export function getRoleLabel(_0x427c44){const _0x14c948={};_0x14c948['wtPFt']=_0x3323bf(0x351,0x3af,0x3fb,0x418),_0x14c948[_0x5deda9(0x4db,0x4ee,0x56f,0x4a3)]=_0x5deda9(0x659,0x735,0x690,0x6f7),_0x14c948[_0x3323bf(0x4ca,0x410,0x48e,0x46c)]=_0x3323bf(0x31b,0x37a,0x340,0x449);function _0x3323bf(_0x3ff72b,_0x415a2e,_0x2ac7ea,_0x5dddfd){return _0x1af184(_0x3ff72b-0x2c,_0x3ff72b,_0x2ac7ea-0x18e,_0x415a2e- -0x96);}const _0x295e67=_0x14c948,_0x13352b={};_0x13352b[_0x3323bf(0x4a3,0x43b,0x3cd,0x446)]=_0x295e67[_0x5deda9(0x670,0x7b0,0x709,0x77e)];function _0x5deda9(_0x97bc1d,_0x12893e,_0x465c12,_0x1d752e){return _0x3fdeda(_0x12893e,_0x465c12-0x5bf,_0x465c12-0x4d,_0x1d752e-0x12);}_0x13352b['user']='用户',_0x13352b['assistant']=_0x295e67[_0x5deda9(0x4b0,0x4ca,0x56f,0x63f)],_0x13352b[_0x5deda9(0x683,0x5f6,0x682,0x750)]=_0x295e67[_0x3323bf(0x39f,0x410,0x445,0x43a)],_0x13352b['tool']='工具';const _0x6fcc4c=_0x13352b;return _0x6fcc4c[_0x427c44]||_0x427c44;}export function getCurrentLLMProfile(){function _0x153a98(_0x18eb5a,_0x15b322,_0x26fd12,_0x3b1c85){return _0x1af184(_0x18eb5a-0x1b,_0x3b1c85,_0x26fd12-0x23,_0x26fd12- -0x68);}function _0x529477(_0x240249,_0x92dcb5,_0x4f21a9,_0x4f656a){return _0x1af184(_0x240249-0xa1,_0x4f656a,_0x4f21a9-0x1f,_0x4f21a9- -0x4a8);}const _0x4edda8=extension_settings[extensionName][_0x529477(-0x17d,-0xc5,-0xf8,-0x95)+'es']||{},_0xf06537=extension_settings[extensionName][_0x529477(-0xd3,-0x15e,-0xf5,-0x2a)+'m_profile'];return _0x4edda8[_0xf06537]||_0x4edda8[Object[_0x153a98(0x484,0x301,0x3c7,0x397)](_0x4edda8)[0x164f+-0x458*-0x8+-0x390f]]||{};}export function getCurrentTestContext(){const _0x3b7cb9=extension_settings[extensionName][_0x2924ad(0x21e,0x2ae,0x2f9,0x22b)+'xt_profile'+'s']||{};function _0x2924ad(_0x253488,_0x23f657,_0x443f1c,_0xd64d86){return _0x3fdeda(_0x253488,_0x23f657-0x2c1,_0x443f1c-0x110,_0xd64d86-0x8e);}function _0x22a60c(_0x3e9105,_0x8375ba,_0x167a52,_0x4bc9ef){return _0x3fdeda(_0x4bc9ef,_0x167a52- -0x17,_0x167a52-0x1ef,_0x4bc9ef-0x99);}const _0x4e28a4=extension_settings[extensionName][_0x2924ad(0x34e,0x284,0x356,0x2ab)+'st_context'+_0x22a60c(0xaa,-0x8e,-0x26,0x60)];return _0x3b7cb9[_0x4e28a4]||_0x3b7cb9[Object[_0x22a60c(-0x2a,0x62,0x86,0xcf)](_0x3b7cb9)[0x8d4*-0x1+-0x135c+0x1c30]]||{};}export function getEffectiveConfigForRequestType(_0x25b903){const _0x53c98d=extension_settings[extensionName][_0x3e5119(0x87,0x111,0xd,-0x2f)+_0x3e5119(-0x80,-0x9e,0x4d,-0xde)+_0x532f07(0x106,0x136,0x1b4,0x10c)]||{},_0x31cf75={};_0x31cf75[_0x532f07(0x46,0xec,0x110,0x1b0)+'e']='默认',_0x31cf75[_0x532f07(0x260,0x1a3,0x1aa,0x204)+'ofile']='默认';const _0x3039ce=_0x53c98d[_0x25b903]||_0x31cf75;function _0x532f07(_0x2a448d,_0x152846,_0x3fccb6,_0x341a9f){return _0x1af184(_0x2a448d-0xfe,_0x2a448d,_0x3fccb6-0xee,_0x3fccb6- -0x237);}const _0xa1f68c=extension_settings[extensionName][_0x3e5119(-0x1b,-0x7,0x7d,0xa)+'es']||{},_0x572cda=extension_settings[extensionName]['test_conte'+_0x3e5119(0xdd,0xa9,0x2f,0x149)+'s']||{};function _0x3e5119(_0x467e07,_0x2b9218,_0x4aa0cc,_0x302298){return _0x1af184(_0x467e07-0x21,_0x302298,_0x4aa0cc-0x99,_0x467e07- -0x3cb);}const _0x389987=_0x3039ce['api_profil'+'e']||'默认',_0x459925=_0xa1f68c[_0x389987]||_0xa1f68c[Object['keys'](_0xa1f68c)[-0x2407+-0x2*-0xcec+0xa2f]]||{},_0x345e63=_0x3039ce[_0x532f07(0x224,0xf7,0x1aa,0x114)+_0x3e5119(0x78,0x13c,0x83,-0x37)]||'默认',_0x52f105=_0x572cda[_0x345e63]||_0x572cda[Object[_0x532f07(0x261,0x17e,0x1f8,0x177)](_0x572cda)[-0x2b*-0xc5+0x13*-0x14f+0x27*-0x36]]||{},_0x39be0a={};return _0x39be0a[_0x532f07(0x1ac,0xdd,0x13f,0x18e)]=_0x459925[_0x532f07(0xe5,0x12a,0x13f,0x1bf)]||'',_0x39be0a[_0x3e5119(-0x56,-0x85,-0xd2,0x5b)]=_0x459925[_0x532f07(0x208,0x193,0x13e,0x144)]||'',_0x39be0a['model']=_0x459925[_0x532f07(0x274,0x31a,0x2b2,0x2bf)]||'',_0x39be0a['temperatur'+'e']=_0x459925[_0x3e5119(-0x4a,0x75,-0x84,-0x2)+'e']??-0xeb3+0x1*0x253e+-0x1d*0xc7+0.7,_0x39be0a[_0x3e5119(-0x2e,-0x26,-0x31,0x69)]=_0x459925[_0x3e5119(-0x2e,0x2,-0x6c,-0x26)]??-0x25a5+0x3c7*-0x3+-0x1*-0x30fb,_0x39be0a['max_tokens']=_0x459925[_0x3e5119(0x91,0x7e,-0x42,0xf)]??-0x2*-0xb9c+0x2*0x9cc+-0x51a*0x8,_0x39be0a[_0x532f07(0x198,0xc1,0x194,0x252)]=_0x459925[_0x532f07(0x123,0x155,0x194,0x21b)]??![],_0x39be0a[_0x3e5119(-0x8,-0xa5,-0xd6,0x36)+'xy']=_0x459925[_0x532f07(0x168,0x1d5,0x18c,0x1ec)+'xy']??![],_0x39be0a['context']=_0x52f105,_0x39be0a;}export function buildPromptForRequestType(_0x1c8e2f,_0x528234=''){const _0x2a24f1={'wBMJZ':_0x23081e(-0x15d,-0x200,-0x181,-0x137),'hhlKv':function(_0x4606f4,_0x4b562a){return _0x4606f4===_0x4b562a;},'gxtBk':'vogav','xUzFG':function(_0x4c6cc8,_0x598731){return _0x4c6cc8===_0x598731;},'CoIms':'trigger','ZbMnA':function(_0x2e1d41,_0x4a66d3){return _0x2e1d41!==_0x4a66d3;},'BczOC':_0x23081e(-0x181,-0x7a,-0x11e,-0x91),'ECUqC':'user','CTOJL':_0x132f99(0x438,0x3de,0x492,0x32c),'FiZfm':_0x23081e(-0x105,-0x199,-0x1d8,-0x1da)+_0x132f99(0x307,0x38f,0x3d3,0x449),'UafXn':function(_0x438f6f,_0x3a5ebf){return _0x438f6f(_0x3a5ebf);},'gWQUp':function(_0x4326ae,_0x1b83a3){return _0x4326ae===_0x1b83a3;},'jQTER':_0x132f99(0x500,0x448,0x442,0x3f4),'WMAfF':function(_0x3276d3,_0x17c28d){return _0x3276d3!==_0x17c28d;},'Pnuuf':function(_0x7dcda9,_0x361529){return _0x7dcda9!==_0x361529;},'bbUNJ':function(_0x2bcbab,_0x3ed6c3){return _0x2bcbab===_0x3ed6c3;},'LSlGM':_0x23081e(-0x1f6,-0x1fa,-0x1bd,-0x20f),'dTBbr':function(_0x15857a,_0x1fa7b8){return _0x15857a===_0x1fa7b8;},'XEFZd':_0x23081e(-0x9b,-0x94,-0xb1,-0x10d),'oqJtM':'xllaT','ocpGo':function(_0x3b9770,_0x35ba08){return _0x3b9770(_0x35ba08);}},_0x12d463=extension_settings[extensionName][_0x23081e(-0xb5,-0x17c,-0x13f,-0xb2)+_0x23081e(-0x30b,-0x2d2,-0x246,-0x200)+_0x132f99(0x4f6,0x42d,0x4af,0x386)]||{},_0x1c5aa8={};_0x1c5aa8[_0x23081e(-0x128,-0x1c6,-0x1b0,-0x275)+_0x23081e(-0xd7,-0xee,-0x14e,-0x1d3)]='默认';const _0x2b4504=_0x12d463[_0x1c8e2f]||_0x1c5aa8,_0x474521=_0x2b4504[_0x132f99(0x4b3,0x423,0x486,0x44f)+_0x23081e(-0x162,-0xa6,-0x14e,-0x156)]||'默认',_0x5f09d4=extension_settings[extensionName][_0x132f99(0x36a,0x3c1,0x489,0x3bd)+_0x23081e(-0xc5,-0x175,-0xe9,-0x91)+'s']||{},_0x55f5c5=_0x5f09d4[_0x474521]||_0x5f09d4[Object[_0x23081e(-0x1f0,-0x139,-0x162,-0x138)](_0x5f09d4)[-0x1eba+0x1c*-0x3b+0x252e]]||{},_0x3cbfd6=[];if(_0x55f5c5[_0x23081e(-0x142,-0xda,-0xd6,-0x156)]&&Array[_0x132f99(0x39e,0x470,0x44b,0x4ef)](_0x55f5c5[_0x23081e(-0xab,-0xcc,-0xd6,-0x140)]))_0x55f5c5[_0x23081e(-0x19d,-0x182,-0xd6,-0xf5)][_0x132f99(0x3f9,0x38e,0x333,0x398)](_0x1ac3ea=>{const _0x243d2b={};function _0x1f4fc5(_0x57c5b3,_0x37cc68,_0x474863,_0x2ac603){return _0x23081e(_0x57c5b3-0x120,_0x37cc68-0xa2,_0x2ac603-0x3,_0x57c5b3);}function _0x4c6e62(_0x37a66f,_0x5471f3,_0x316a97,_0x80fb4a){return _0x23081e(_0x37a66f-0x146,_0x5471f3-0x11,_0x316a97-0x2fd,_0x37a66f);}_0x243d2b['AFpXF']=_0x1f4fc5(-0x11e,-0x1fe,-0x213,-0x149),_0x243d2b['HNVZx']='AI助手',_0x243d2b[_0x1f4fc5(-0x2b9,-0x301,-0x2df,-0x24b)]=_0x2a24f1['wBMJZ'];const _0x5197a2=_0x243d2b;if(_0x2a24f1[_0x1f4fc5(-0x292,-0x219,-0x218,-0x22f)](_0x2a24f1[_0x1f4fc5(-0x1d0,-0x17c,-0x66,-0x130)],_0x2a24f1[_0x1f4fc5(-0x1ac,-0x160,-0x129,-0x130)])){if(!_0x1ac3ea[_0x4c6e62(0x162,0x273,0x1b6,0x1c5)])return;if(!_0x1ac3ea[_0x1f4fc5(-0x1ae,-0x1e8,-0x13c,-0x19e)]||_0x2a24f1['hhlKv'](_0x1ac3ea['content'][_0x1f4fc5(-0x257,-0x176,-0x20e,-0x1e2)](),''))return;if(_0x2a24f1[_0x1f4fc5(-0xbf,-0x65,-0x5e,-0x129)](_0x1ac3ea[_0x1f4fc5(-0x148,-0x18d,-0x1cb,-0x183)+'e'],_0x2a24f1[_0x4c6e62(0x1b2,0x157,0x1e6,0x26c)])){if(_0x2a24f1[_0x1f4fc5(-0xaf,-0x1b8,-0x91,-0x124)](_0x2a24f1['BczOC'],_0x2a24f1['BczOC'])){const _0x24c661={};_0x24c661['system']=_0x5197a2[_0x1f4fc5(-0x119,-0xc6,-0xa1,-0xb7)],_0x24c661[_0x1f4fc5(0x1b,-0x73,-0x17,-0xbb)]='用户',_0x24c661[_0x4c6e62(0x1c6,0x1c6,0x189,0x1d5)]=_0x5197a2[_0x1f4fc5(-0x216,-0x1f4,-0x12f,-0x179)],_0x24c661[_0x1f4fc5(-0x1bb,-0xe2,-0xcf,-0x139)]=_0x5197a2[_0x4c6e62(0x110,0xc7,0xaf,-0x20)],_0x24c661[_0x4c6e62(0x136,0x1bb,0x1d9,0x2ab)]='工具';const _0x57443f=_0x24c661;return _0x57443f[_0xbcd3ed]||_0x5e5997;}else{if(!_0x528234||!checkTriggerWords(_0x1ac3ea[_0x1f4fc5(-0xf2,-0x13,-0x18f,-0xda)+'ds'],_0x528234))return;}}const _0x1c6b44={};_0x1c6b44[_0x4c6e62(0x193,0x107,0x19e,0x165)]=_0x1ac3ea['role']||_0x2a24f1[_0x4c6e62(0x29f,0x1e0,0x238,0x189)],_0x1c6b44['content']=_0x1ac3ea[_0x4c6e62(0x16b,0x115,0x15c,0x146)],_0x3cbfd6[_0x4c6e62(0x1b5,0x15e,0x175,0xc2)](_0x1c6b44);}else _0x1a3066();});else{if(_0x55f5c5[_0x23081e(-0x245,-0x17a,-0x1c3,-0x14a)]&&Array[_0x132f99(0x526,0x470,0x47e,0x423)](_0x55f5c5[_0x132f99(0x47b,0x410,0x40f,0x3fc)])){if(_0x2a24f1[_0x132f99(0x438,0x506,0x543,0x513)](_0x2a24f1[_0x132f99(0x3e4,0x464,0x4a2,0x4fc)],_0x2a24f1[_0x132f99(0x3d2,0x43e,0x3f2,0x4b6)])){const _0x21af9e={};_0x21af9e[_0x23081e(-0x1ef,-0x135,-0x15f,-0x111)]=_0x23081e(-0xc9,-0x11c,-0xbe,-0x5b),_0x21af9e['content']=_0x42cb7d[_0x23081e(-0x146,0x5,-0xbe,-0x79)],_0x4d4afb[_0x132f99(0x4ca,0x44b,0x3a2,0x437)](_0x21af9e);}else _0x55f5c5[_0x23081e(-0x19c,-0x1c6,-0x1c3,-0x1ef)][_0x132f99(0x3a4,0x38e,0x2c4,0x437)](_0x431695=>{function _0x353033(_0x4c7a5d,_0xd5596,_0xd11bb4,_0x293bd7){return _0x132f99(_0x4c7a5d-0x17d,_0xd5596- -0x3ee,_0xd11bb4-0xc6,_0xd11bb4);}function _0x208e6c(_0x37305c,_0x2d4d08,_0x5d4186,_0x4dd2c7){return _0x132f99(_0x37305c-0x2e,_0x37305c- -0x443,_0x5d4186-0x55,_0x2d4d08);}if(_0x2a24f1[_0x353033(0x52,-0x47,-0xd4,0x3b)](_0x2a24f1[_0x353033(0x138,0xc4,0x183,0x7a)],_0x2a24f1['jQTER'])){if(_0x431695[_0x353033(0x1a3,0x127,0xde,0x17b)]&&_0x2a24f1[_0x208e6c(0x37,0x37,-0x69,0x23)](_0x431695[_0x208e6c(0xd2,0x14a,0xa5,0x9f)][_0x208e6c(-0x55,-0xc5,0x3c,0x3f)](),'')){const _0xfe8bf1={};_0xfe8bf1[_0x353033(0x122,0x86,-0x10,0xc4)]=_0x2a24f1['ECUqC'],_0xfe8bf1[_0x208e6c(-0x11,-0x75,0x66,-0x49)]=_0x431695['user'],_0x3cbfd6[_0x353033(-0x58,0x5d,0x1a,0x8e)](_0xfe8bf1);}if(_0x431695[_0x208e6c(0x1c,0x39,-0x79,-0x32)]&&_0x2a24f1[_0x353033(0x88,-0xc,0x65,0xb0)](_0x431695[_0x208e6c(0x1c,-0x95,0xbf,0xe1)][_0x353033(-0x3d,0x0,0xc6,0xb6)](),'')){if(_0x2a24f1[_0x208e6c(-0xc3,-0x112,-0x79,-0xe1)]('aOZbD',_0x2a24f1[_0x353033(0x10,0x43,0x90,-0x56)])){const _0x29063e={};_0x29063e['role']=_0x208e6c(0x1c,0x7c,0x47,-0x98),_0x29063e[_0x353033(0xd0,0x44,0x10,-0x8a)]=_0x431695[_0x353033(0x64,0x71,-0x4d,0xcb)],_0x3cbfd6[_0x353033(0x10e,0x5d,0x86,0x39)](_0x29063e);}else{if(_0x2a24f1[_0x353033(0x18,0xb9,0x55,0x147)](_0x413493['name'],_0x2a24f1[_0x353033(0x6f,0x3d,0xeb,0x6e)])){const _0x2dcc56='4|3|2|1|0'[_0x353033(-0x3,-0x2a,-0x47,0x84)]('|');let _0x93b6c3=-0xe6e+0xd7d+0xf1;while(!![]){switch(_0x2dcc56[_0x93b6c3++]){case'0':return;case'1':const _0x19756a={};_0x19756a[_0x353033(0x12,-0x4f,-0x4,0x8)]=_0x2a24f1[_0x208e6c(-0x18,-0x44,0x69,0x79)],_0x19756a['message']=_0x2a24f1[_0x208e6c(0x3b,0x5,0x30,-0x40)];const _0xab8338={};_0xab8338[_0x353033(0x173,0x129,0x1f4,0x115)]=![],_0xab8338[_0x208e6c(-0x52,0x42,0x3c,-0xf6)]=null,_0xab8338['id']=_0xade9d0,_0xab8338['error']=_0x19756a,_0x3d8418[_0x353033(-0x55,-0x49,-0x11b,0x16)](_0x5c620a,_0xab8338);continue;case'2':_0x5dafe2['delete'](_0x2282e3);continue;case'3':_0x26fc06[_0x208e6c(0x6e,0x11a,-0x2d,-0x62)+'us'](_0x160650,_0x347c53[_0x353033(0x1ba,0x13a,0x110,0xfd)]);continue;case'4':_0x5eb3ed=!![];continue;}break;}}_0x4fdfdc[_0x353033(0x9c,0x7a,0x90,0xdd)](_0x1abcca+_0x353033(0x19,-0x5e,-0xd4,0x2a),_0x1e1344);const _0x945b6e='请求错误:\x20'+_0x12e552['message'];_0x4b10d9&&_0x1b1485(_0x945b6e);_0x18e6bf[_0x353033(-0x37,0x7a,-0x2e,0x67)](_0x52f8bd[_0x353033(0xd3,0x25,0xb8,0x73)]),_0x2b9385['completeTa'+'sk'](_0x3c286f,![]),_0x49c106['delete'](_0x3a1e34);const _0x2713cf={};_0x2713cf[_0x208e6c(0xd4,0x0,0x1a3,0x97)]=![],_0x2713cf['result']=_0x945b6e,_0x2713cf['id']=_0x2169fa,_0x5d552d[_0x208e6c(-0x9e,-0x3d,-0x10f,-0x34)](_0x3ca676,_0x2713cf);}}}else _0x2a24f1[_0x208e6c(-0xb,0x5b,-0x9,0xc4)](_0x53814b,_0x3973a5);});}}const _0x5ddc7f=_0x2a24f1['ocpGo'](mergeAdjacentMessages,_0x3cbfd6),_0x316cc7=_0x2a24f1['UafXn'](processRollPlaceholders,_0x5ddc7f);function _0x132f99(_0xee2151,_0x39b72e,_0x52c953,_0x1e7b6b){return _0x1af184(_0xee2151-0xe7,_0x1e7b6b,_0x52c953-0x12e,_0x39b72e-0x42);}function _0x23081e(_0x351ac3,_0x2b490e,_0x3ae070,_0x126a82){return _0x1af184(_0x351ac3-0x5,_0x126a82,_0x3ae070-0x174,_0x3ae070- -0x591);}return _0x316cc7;}const _0xdf1782={};_0xdf1782[_0x3fdeda(0x165,0xa7,-0x26,-0x2)]=_0x3fdeda(-0x7b,0x29,0x38,0xb6),_0xdf1782[_0x1af184(0x405,0x4e5,0x44b,0x4cd)+'n']=_0x3fdeda(0x45,0xa4,0xd4,0x12d),_0xdf1782['char_displ'+'ay']=_0x1af184(0x55d,0x503,0x508,0x49c),_0xdf1782[_0x1af184(0x3be,0x39d,0x38a,0x374)+'y']='角色/服装修改',_0xdf1782['translatio'+'n']='翻译',_0xdf1782[_0x3fdeda(-0xc2,-0x9,-0x13,-0x7a)]=_0x1af184(0x45f,0x453,0x53e,0x486);const REQUEST_TYPE_NAMES=_0xdf1782;function _0x5e72(){const _0x8d4315=['rNvrqNi','uMvXDwvZDcbHyG','ue9tva','5Q2J5PAh5zU+54Mh55sF5OIq','sxvABNO','CvbdwhG','Aereq1y','DgvqAxG','svDJsvO','zMLfyMe','EfPMrgW','yNLWyxnZx3bYBW','BhHfz00','Aw9UoIaIqMvHCG','nZm1otyWwMf0B3nN','s1L2v00','wwD1u3G','5O+q56s66k+n6i635y+w6k+35RgcicHj','vMfgreS','C3rYzwfT','DhjHvxa','qLPbuwy','AgLZDg9YEq','svr2que','AxHkELq','BwvZC2fNzq','tK5Sy0C','tKn1Ahu','yu9AyKq','DvPuuuC','Aw12rLy','AKPZt1q','AeHPCvm','CgDUDLi','zM9Ut0O','teLPCvi','uMXZveG','EwfIDeC','qvbjioI/NUAoPEMxRUMIMooaGG','yxrOrfK','y2HHDf9JB21WBa','y29UDgv4Df9WCG','teDRseO','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','mtaXodK5mKTKDez0vW','z05Asxm','z2v0','5PAT44cbBwf4x3rVA2u','wwffv1K','q1rpsKW','EwH0que','zMLNCW','y0rczLC','Auztuwq','5lUJ56cboIa','tfnSr00','y29UDgvUDa','wef5Ee4','qvHREKK','ueKGs2v5lcdMIjyG','q2f5vgy','D3zbtgK','vwfMwg4','u1z3z1K','D2fYBMLUzW','q29UDgvUDc1uEq','r3vTywK','pt09pt0GteXnia','B3fkDe0','zez0De0','tfvkt1u','CK5SAxC','Aw1Hz2vFDxjS','C2XPy2u','sNrHueG','zw5KC1DPDgG','ugHSsfK','C1rkDeq','DNn2Dg0','DwrcCfm','BMrZl2nOyxqTyW','ChvZAa','y29UC3rYDwn0BW','DhjPz2DLCK1Vza','y3vZDg9T','CurgEKi','y2DWBLu','AeTstwW','5yE95PwW6lcd55sO','DMXoCui','uLvXDwC','qvbjifvstcWGqq','BgHZs2S','se5wwNG','yxbWBhK','ywrKvgfZAW','AgzABwW','AgnUqvG','teXnioIVT+AXGUI/LowBNUs4UUEPUG','BNmG6k6+572U6l+h5Bcp44cb5OIwia','y2XezMS','yxnZAxn0yw50','qxnNBg4','rK9yseO','z0HAvwG','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','wevgwMq','Dw5RBM93BG','AxnLswW','EgDqr3O','zxjYB3i','t015v0S','sgjLzuy','Bgv0Aw9UCW','y1nQvhq','zvfOzue','wgD2B0C','6k+35RgcieLeoIa','AxnbCNjHEq','A2v5CW','ue1csMu','BuDqshG','CM9Szq','Efb4qKu','C3rFy29UDgv4Da','zgf0ytO','6kEs6iMYl+ACJEIJHEIUVUIUOq','uxj2B00','v01bzKy','Aw1Hz2vFz2vU','5OIwie1VzgvSioACQUMfJq','yuHyBNy','rMLAzM0','C3rFy2HHDhu4xW','ioAuTUwiSa','DhLWzq','mZi4nJG3meTtAvz1yG','D1ndrhu','uMD4BLC','B2zPBgu','wvfIt00','57o757UF5O+q56s66k+n','DMXhyNq','shPAuKC','whjyAwu','z3fhveu','zw5HyMXLza','vxbHB2O','qxv0Ag9YAxPHDa','z0HeB1O','6BUy6k6K6k+35Rgc5BYa5AElid09pq','mJDIvKTiDMG','AfrjA3e','w0Xmtv0G5lU75yQH5BEY5y+w','BgXTx3jLCxvLCW','u21mCNy','EvvRDeC','zNvUy3rPB24','yMH2yLm','tMHMEeS','teXnioIVT+AXGUw3SUs4REATOUoaGG','BK1Qy0i','uxvhyvC','DhbhC3m','Bwf4x3rVA2vUCW','AM9PBG','z3H0qMS','ywjVCNrLzc4','yM9KEq','zgvSzxrL','tvbACgG','quNLIQNMIyS','DxrMltG','Efv6rKC','A2ndDg8','ugHsww4','6k+35Rgc6zsz6k+VoIa','rdOG','wMjnBKe','l2nOyxqVy29TCa','mZC0nJe4rKDwqufx','Dg9VBa','B21WBgv0Aw9UCW','DxbKyxrLu3rHDa','ALfurvi','v0reEhe','Aw5JBhvKzxm','y0LHv08','m3WXFdr8mNWW','teXnx0vyrunvva','y3flreq','tenirMG','oIbmte0G6k+35Rgc6l+u5zUE','zgf0ytOGw0rptG','q29jBxm','Dg9tDhjPBMC','y2HVAwnLCW','Aef6wg4','BwvXBK8','yNH5vvu','B2zTq2S','Bwf0y2G','DgvZDe1Vzgu','Dg5esuu','BMnVwLi','qxzlAhK','vgfN5l+U5Ps5','Cxb6uvu','qMvHCMvYia','qMXsBeu','C3rYAw5NAwz5','C3DquuG','r01iy2S','teXniev4zwn1Da','ufrXExe','mtC3ota5nxnXq1v3zG','A1DqAxK','C3zQqKq','ChjVBxb0','DffICMm','Bv9WCM9MAwXL','BKLVr2G','ywjVCNq','BNjtreK','v0nLDge','C1D0t0q','rLHPthO','C3rHDhvZvgv4Da','6kEs6iMYl+ACJEIJHEwXLEEKUG','iowBNUwKJsaTls0Tlq','l2fWAs9IywnRzq','teXn','r2Pfzfu','wwnOz0W','8j+tTYbB5zU+54Mh6zo+5O6LoIa','sgnPy24','Dgv4Da','cI0Tls0TieXmtq','qvDUvM4','C2v0','EhrFChjVzMLSzq','CMvWzwf0','C2PLqLy','5y+r6ycb55QeifbYB21WDa','B2jQzwn0','rv9srvnqt05trq','y2ryuxK','CgfYC2u','l3yX','CffsCNu','v2DgA2u','DxjS','DhjPz2DLCLDVCG','AwTSA1O','zuHlrgG','zgPNyMS','rfPrDxy','l2DLBMvYyxrL','ywz6vKW','zw50CMLLCW','r2v5vxe','C0LAvuy','ywXRywy','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','zgvJB2rL','DhjPz2DLCG','sg5Ov0m','ywzsB0e','zfrcyNi','z0H4CKe','ngHxzKfptq','DenmBwi','ksa9pt09pq','C2zVvgm','zxn3r0i','y29TCgXLDgvuyq','runvCum','y2HHCL9KzxnPzW','whjbz20','DxLZDgK','AenRu1G','C3LZDgvT','teXnigv4zwn1Da','DxnLCG','CMvWBgfJzq','C3vJy2vZCW','ugrtt0S','quzWwey','Aw9U','zgvSDge','rvLjDMK','rfzVvMe','D3rqrNq','uK1oq1K','uM90r2q','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','whfnshe','DKvjqxy','5lUJ56cboG','Bg9N','AMXesge','A3Dqtuq','q0foq0vmteve','tLzoB0m','BwvZC2fNzxm','Bw9KzwW','yMjvtKO','nJi5mJq4DKHWs1PH','y3vZDg9Tx3vYBa','su5AuwK','Ewjdz3u','wNbiChe','ssdOV57MJQxPL67POPJJGii','C3rHDhvZ','qMrQDMW','yxbPx3bYB2zPBa','C3qTy2HHDhu4oG','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','yNvMzMvYktO','Df90ExbLx2nVBG','zM9YrwfJAa','B3j0zwq','ievYCM9YoG','y29Kzq','56In5yczlI4U','Dg9Rzw4','tw9KzwWG5PYQ6ywn572U44cc','wLPLwuW','Aw5MBW','y3vYCMvUDf90zq','uMvArMC','vM9drfi','yxnKyLy','lcdNUQyG','z2DWB3m','wKD6v3K','yxbWBgLJyxrPBW','BMfTzq','m3WWFdr8mNWX','AgHSs3y','wuDvzfa','rgzVrM8','5RAioIa','zw1PDa','rhDgsNe','z1Drvxa','5AEl5PAW6k+35Rgc44cc','zxrPB25FC291CG','D2fYBG','qKfWtwK','qMPrq0C','teXnoIa','z2v0uMvHzgvY','x3rHC2S','BhvKzv9OzwfKzq','veDmEwG','C3rYAw5N','CuDrsuq','ndLMvKzmtfC','l3yXlW','y2HHCL9TB2rPzG','yxbPx2TLEq','yxbPx3vYBa','z1v3z0e','rMXYEeq','zxiG','r3DMy3y','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','z1Dczfy','q09OB0C','6k+35Rgc5AsX6lsLoIa','DgvZDf9JB250zq','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','DgvTCgvYyxr1CG','C3bSAxq','x3bYB2zPBgu','57g75z6loIa','ELj0su4','sxnRCLK','uerlEMi','qu5WCgC','DgfNx21VzgLMEq','zsbYzxf1zxn0ia','C3rHCNrZv2L0Aa','D0Hys2W','CMvHza','Aef2Bey','C2vHCMnO','6k+35Rgc5A6m5OIqid09pt09','tMHQq3C','yK5ZsvG','y3b4BNe','Cw5vAxq','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','CfzvzeK','runUs3K','AM9Msg8','r2TMuLC','B2nkBfq','ANnVBG','qwjVCNrfCNjVCG','Dg9Wx3a','yKfSzKi','BfPOwe4','ug51Dwy','rxDZqvG','BI9QC29U','uejSBee','rePLA3G','BgvUz3rO','Cg9W','EKjbrvG','yw9Jv0O','Cxnnww4','y3vZDg9Tx2LUyW','CM91BMq','DhjPBq','mZy1ndq3muHjAM5ura','iefqssblzxKSia','CMvZDwX0','BgXTx3bYB2zPBa','wenmCM8','BejhwvK','y3vYCMvUDf9SBa','vLDwsu8','AevRuMC','zgf0ytOG','wLPWuK8'];_0x5e72=function(){return _0x8d4315;};return _0x5e72();}export async function executeTypedLLMRequest(_0x45a1dd,_0x5281ba,_0x614bad,_0xb287=null){const _0x392a33={'xPxBE':function(_0x2a5d89,_0x1333c0){return _0x2a5d89(_0x1333c0);},'NCuhu':function(_0xde854f,_0x2f7ffc){return _0xde854f*_0x2f7ffc;},'idERR':_0xc841e(0x1df,0x306,0x273,0x1d5)+_0x19e4e8(0xa3,0xfb,0x144,0x8e),'cDBfW':function(_0x5be276,_0x50bf38){return _0x5be276>_0x50bf38;},'jlDHa':function(_0x5b3729,_0x1f3579){return _0x5b3729(_0x1f3579);},'HbeeF':function(_0x9452f8,_0x5ac248){return _0x9452f8===_0x5ac248;},'cgpnU':'trigger','FMlyj':function(_0x32be50,_0x40c6fb){return _0x32be50||_0x40c6fb;},'PMBJe':function(_0x12bfb4,_0x333a29){return _0x12bfb4!==_0x333a29;},'RdILs':_0x19e4e8(0x61,-0x48,0x37,0x88),'dFttM':_0xc841e(0x190,0x198,0x266,0x265),'kWPiy':function(_0x2b3b95){return _0x2b3b95();},'ZZeYL':function(_0x9ca734,_0x59d540){return _0x9ca734(_0x59d540);},'ITWAX':function(_0x5d68ec,_0xd58508){return _0x5d68ec(_0xd58508);},'eswGB':function(_0x1062a0,_0x3b4f02){return _0x1062a0(_0x3b4f02);},'RgxnW':function(_0xd3cd9,_0x57d1b3){return _0xd3cd9||_0x57d1b3;},'wHXKl':function(_0x38bba6,_0xff75a1){return _0x38bba6===_0xff75a1;},'JiGxI':_0xc841e(0x184,0x29e,0x25a,0x19e),'ncoZR':'YZmXi','AXkzI':_0x19e4e8(0x9,0xb7,0x116,0x84)+_0x19e4e8(0x7c,0x163,0x1a0,0xca),'HVAOO':_0x19e4e8(0x1f7,0x1bf,0x113,0x1de),'eQheA':'/v1','uCbEw':'/v1/','iklkZ':function(_0xf670dc,_0x4646d2){return _0xf670dc+_0x4646d2;},'NhfxK':_0x19e4e8(0x202,0x13d,0xf9,0x1c6)+_0x19e4e8(0xe3,0x11d,0xe5,0x130)+_0xc841e(0x3cf,0x294,0x2fe,0x315)+'/generate','nrSDI':function(_0x1aea5c,_0x2b9eeb){return _0x1aea5c(_0x2b9eeb);},'hAzXn':'custom','PTqyq':function(_0x40fabf,_0x176dba,_0x4ee93d){return _0x40fabf(_0x176dba,_0x4ee93d);},'IEMqT':'POST','VoCDR':function(_0x582706,_0x4c4797){return _0x582706===_0x4c4797;},'Gwfcv':_0xc841e(0x301,0x2d6,0x366,0x3fc),'jJsOT':function(_0x283909,_0x1a9302){return _0x283909===_0x1a9302;},'DJekx':_0xc841e(0x408,0x368,0x33c,0x29e),'ggpos':_0x19e4e8(0x1a4,0xc0,0x1c5,0x18e),'ZGzWy':function(_0x362eaf,_0x151cad){return _0x362eaf===_0x151cad;},'IWcIZ':_0x19e4e8(0x56,0x23,0x10a,0xe7),'URpHR':'类型:','BrrmK':_0xc841e(0x2aa,0x2fb,0x372,0x34f),'SXjyS':'afzVL','meqnO':function(_0xd607fb,_0xc565a8){return _0xd607fb===_0xc565a8;},'tpGss':_0xc841e(0x36e,0x2d6,0x309,0x3c2)+'E]','yhtAA':_0xc841e(0x25e,0x329,0x31b,0x248),'nIoGh':'流式解析警告:','JtaPH':'data:\x20','Aiktj':function(_0x4ca62e,_0x511c45){return _0x4ca62e!==_0x511c45;},'sjeBV':_0xc841e(0x272,0x29c,0x2ae,0x30f),'qjdtP':_0xc841e(0x2f3,0x394,0x32a,0x365),'YchgL':_0xc841e(0x24c,0x3a8,0x301,0x39a),'SbFqJ':function(_0x45a004,_0x35eebe){return _0x45a004(_0x35eebe);},'Hcicn':_0x19e4e8(0x92,0x21,0xcf,0xbd)+_0xc841e(0x273,0x27c,0x1da,0x1ab),'NVNoC':_0xc841e(0x36d,0x327,0x319,0x2cf),'qnUit':'ahLcC','RFxlO':_0x19e4e8(0x1f3,0xd5,0x17a,0x149),'GkfRW':_0x19e4e8(0x245,0x24d,0x234,0x19e),'FlrxD':function(_0x3fbe1c,_0x4ee780){return _0x3fbe1c===_0x4ee780;},'oonbc':_0xc841e(0x27a,0x1b2,0x285,0x285),'VWVIO':_0xc841e(0x1af,0x171,0x22a,0x229),'Bdjvl':function(_0x3a8467,_0x41d60d){return _0x3a8467>_0x41d60d;},'fiEba':function(_0x489cb9,_0x15f38c){return _0x489cb9===_0x15f38c;},'XCLro':_0x19e4e8(0x2b3,0x282,0x295,0x1f1),'hcnAX':_0x19e4e8(0xf3,0x2f,0x18,0xa4),'nRUnf':function(_0x4daae2,_0x23e440){return _0x4daae2(_0x23e440);},'xZfDl':function(_0x3c8bc1,_0x5ae189){return _0x3c8bc1(_0x5ae189);},'Upaoj':function(_0x521150,_0x4c117d){return _0x521150===_0x4c117d;},'BApMi':function(_0x21d453,_0x403662){return _0x21d453===_0x403662;},'SzxFj':'uIALx','ZZpRO':_0xc841e(0x2a0,0x2a0,0x272,0x2d0),'aHXnv':_0xc841e(0x236,0x254,0x304,0x3d3),'rNliw':'AbortError','goyvb':function(_0x5a7196,_0xea6bcc){return _0x5a7196!==_0xea6bcc;},'jofHo':_0xc841e(0x363,0x386,0x2f2,0x311),'iseIl':function(_0x4c92f3,_0x40bf1b){return _0x4c92f3(_0x40bf1b);},'nMjcB':'MzsBb','hAvlF':_0xc841e(0x33c,0x30b,0x284,0x200),'lBGYY':function(_0x4f55ff,_0x2762be){return _0x4f55ff===_0x2762be;},'NNlcG':_0x19e4e8(0xc8,0x173,0x154,0x122),'djgbk':_0xc841e(0x251,0x258,0x27d,0x310)},{prompt:_0x2b0d75,id:_0x593bf1}=_0x45a1dd;if(_0x392a33['FMlyj'](!_0x593bf1,!_0x2b0d75))return;currentLLMRequestController&&(_0x392a33[_0xc841e(0x302,0x2e5,0x2c0,0x2c2)](_0x392a33['RdILs'],_0x392a33[_0x19e4e8(0x1e7,0x94,0x1d3,0x125)])?(currentLLMRequestController[_0x19e4e8(0x182,0x15b,0x1e1,0x1be)](),toastr[_0x19e4e8(0x149,0x149,-0x3,0x7c)](_0x392a33['idERR'])):_0x392a33[_0x19e4e8(0x122,0x142,0x1d7,0x15b)](_0x119463,'正在处理\x20'+_0x26d9ce+_0xc841e(0x196,0x228,0x20b,0x1f0)));currentLLMRequestController=new AbortController();const _0x1330f2=currentLLMRequestController['signal'],_0x3adb2f=currentLLMRequestController,_0x1d0395=REQUEST_TYPE_NAMES[_0x5281ba]||_0x5281ba,_0x14cf9b={};_0x14cf9b[_0x19e4e8(0xbb,0x134,0x54,0x85)]=_0x19e4e8(0x3e,0x61,-0x7,0x93)+_0x1d0395,_0x14cf9b[_0x19e4e8(0x1c5,0x214,0x191,0x167)]=TaskType[_0x19e4e8(0x18f,0xfd,0x14b,0x1c7)],_0x14cf9b[_0xc841e(0x3bf,0x33b,0x322,0x24e)]=_0x593bf1;const _0x2610bc=taskQueue[_0x19e4e8(0xcb,0xf7,0x1a0,0x13f)](_0x14cf9b);llmTaskControllers[_0xc841e(0x3dd,0x27d,0x337,0x3d6)](_0x2610bc,currentLLMRequestController),taskQueue[_0x19e4e8(0x22e,0x11e,0xf1,0x197)+'us'](_0x2610bc,TaskStatus['RUNNING']),_0x392a33[_0x19e4e8(0xf5,0x26b,0x24d,0x1b8)](startFabLoading);let _0x5cdbe6=![];function _0xc841e(_0x314e57,_0x212d80,_0x59dde6,_0x30fc49){return _0x1af184(_0x314e57-0x1ca,_0x30fc49,_0x59dde6-0x28,_0x59dde6- -0x170);}_0x392a33[_0xc841e(0x37e,0x3b0,0x320,0x31f)](clearLog),_0x392a33[_0x19e4e8(0x186,0x175,0x1a9,0x15b)](addLog,_0xc841e(0x229,0x2f4,0x28b,0x360)+'请求开始\x20('+_0x1d0395+_0x19e4e8(0x22a,0x232,0x1ca,0x1f0)),_0x392a33[_0x19e4e8(0x1cb,0xa7,0x20e,0x15b)](addLog,_0x19e4e8(0x123,0x1ec,0x213,0x155)+_0x593bf1),_0x392a33[_0xc841e(0x1df,0x2b4,0x1e3,0x25c)](addLog,_0xc841e(0x31f,0x314,0x33b,0x380)+':'),_0x392a33['ITWAX'](addLog,formatPromptForDisplay(_0x2b0d75));function _0x19e4e8(_0x29429e,_0x19ec36,_0x456e18,_0x428c88){return _0x1af184(_0x29429e-0x8f,_0x29429e,_0x456e18-0x1bc,_0x428c88- -0x2d8);}const _0x574fd1=_0x392a33[_0x19e4e8(0x2a3,0x249,0x252,0x1f2)](getEffectiveConfigForRequestType,_0x5281ba),{api_url:_0x11dc26,api_key:_0x4d9837,model:_0x243047,temperature:_0x55a8a8,top_p:_0x13c71b,max_tokens:_0xe8fad1,stream:_0x15155d,bypass_proxy:_0x38fafd}=_0x574fd1;if(_0x392a33[_0xc841e(0x376,0x375,0x2d2,0x29f)](!_0x11dc26,!_0x4d9837)||!_0x243047){if(_0x392a33[_0x19e4e8(0x8c,0x8c,0x120,0xb4)](_0x392a33['JiGxI'],_0xc841e(0x389,0x291,0x34c,0x3f5))){const _0x3a584d=_0x30175c[_0x19e4e8(0x15f,0x1f8,0xec,0x1a9)](/^data:([^;]+);/),_0x182843=_0x3a584d?_0x3a584d[0xa6+0x39f*-0x6+0x707*0x3]:_0xc841e(0x29e,0x374,0x2b3,0x2aa),_0x3ef43f=_0x300116[_0x19e4e8(0x51,0x19,0x158,0xaa)](',')[0x17*-0xfb+-0x1*-0x2f4+0x139a*0x1]||'',_0x9eb914=_0x2cb524[_0xc841e(0x29b,0x2d6,0x23b,0x212)](_0x392a33[_0x19e4e8(0x78,0x179,0x25,0xfb)](_0x3ef43f['length'],0x3*0x5a4+0x11cb+-0x1*0x22b4)/(0x8d*-0x3b+0x207e+0x1*0x5)/(0x1693+0x1*0x25f5+0x18*-0x25b));_0x461d49[_0x19e4e8(0x110,0xf6,0xc6,0x131)](_0xc841e(0x37e,0x29d,0x36f,0x2e9)+':\x20'+_0x182843+_0x19e4e8(0xd7,0x3a,0x32,0x81)+_0x9eb914+'KB]');}else{const _0x21441f=_0x1d0395+(':\x20API\x20URL,'+_0x19e4e8(0x2e,0x1a7,0x139,0xd6)+_0xc841e(0x317,0x38c,0x2ca,0x2e1)+'置。');toastr[_0xc841e(0x218,0x275,0x2b6,0x211)](_0x21441f);const _0x4cab7f={};_0x4cab7f[_0x19e4e8(0x16b,0x200,0x266,0x1fd)]=![],_0x4cab7f[_0x19e4e8(0x180,0x93,0xf8,0xd7)]=_0x21441f,_0x4cab7f['id']=_0x593bf1,eventSource[_0xc841e(0x21e,0x148,0x1f3,0x186)](_0x614bad,_0x4cab7f);return;}}const _0x16fc52=_0x11dc26[_0xc841e(0x3ca,0x2da,0x364,0x407)](/\/$/,'');let _0x45ba0c,_0x4a7d45,_0x490b0a;if(_0x38fafd){if('tuuAc'!==_0x392a33[_0xc841e(0x2ce,0x2c3,0x314,0x274)]){_0x45ba0c=_0x16fc52+(_0xc841e(0x2b9,0x24c,0x2fb,0x231)+_0xc841e(0x27b,0x233,0x2b9,0x297));const _0x2beb2a={};_0x2beb2a[_0x19e4e8(0xfa,0x81,0x147,0x121)+'pe']=_0x392a33[_0xc841e(0x1cd,0x1ba,0x282,0x313)],_0x2beb2a['Authorizat'+_0xc841e(0x32c,0x366,0x368,0x3b4)]=_0x19e4e8(0x1a6,0x1ba,0x24f,0x1b0)+_0x4d9837,_0x4a7d45=_0x2beb2a;const _0x4709ca={};_0x4709ca[_0xc841e(0x3af,0x3f6,0x379,0x3df)]=_0x243047,_0x4709ca[_0x19e4e8(0x1ea,0x215,0x272,0x210)]=_0x2b0d75,_0x4709ca[_0x19e4e8(0x18,0x11a,-0x1f,0xa9)+'e']=_0x55a8a8,_0x4709ca[_0x19e4e8(0xab,0x6f,0x146,0xc5)]=_0x13c71b,_0x4709ca[_0x19e4e8(0x1f6,0xb5,0x17e,0x184)]=_0xe8fad1,_0x4709ca[_0xc841e(0x190,0x2c2,0x25b,0x2ba)]=_0x15155d,_0x490b0a=_0x4709ca;}else{const _0x2d0443=_0xb35f08?function(){function _0x207b05(_0x337339,_0x326c18,_0x3e59f4,_0x1bf0e0){return _0x19e4e8(_0x337339,_0x326c18-0x12d,_0x3e59f4-0x12e,_0x1bf0e0-0xb1);}if(_0x373404){const _0x2b6740=_0xe11ae6[_0x207b05(0x154,0x241,0x234,0x1ef)](_0x8b5e63,arguments);return _0x575100=null,_0x2b6740;}}:function(){};return _0x5ed987=![],_0x2d0443;}}else{if(_0x392a33[_0x19e4e8(0x125,0x103,0x39,0xb4)](_0x19e4e8(0xea,0x1aa,0x6f,0xef),_0x392a33['HVAOO']))return;else{let _0x26a40d=_0x16fc52;!_0x26a40d[_0xc841e(0x1d2,0x1df,0x293,0x20a)](_0x392a33[_0xc841e(0x336,0x282,0x2bb,0x1e6)])&&!_0x26a40d[_0xc841e(0x267,0x3af,0x302,0x3ab)](_0x392a33['uCbEw'])&&(_0x26a40d=_0x392a33[_0x19e4e8(0x2a6,0x109,0x2a0,0x1dd)](_0x26a40d,_0xc841e(0x373,0x298,0x340,0x2e1)));_0x26a40d=_0x26a40d[_0xc841e(0x426,0x38c,0x364,0x33f)](/\/v1\/$/,_0x19e4e8(0x269,0x247,0x1c0,0x1d8)),_0x45ba0c=_0x392a33[_0x19e4e8(0x1de,0xbc,0x178,0x17f)],_0x4a7d45=_0x392a33[_0xc841e(0x2bf,0x355,0x327,0x383)](getRequestHeaders,window['token']);const _0x58ac13={};_0x58ac13['chat_compl'+'etion_sour'+'ce']=_0x392a33[_0x19e4e8(0x146,0x153,0x114,0x1a5)],_0x58ac13[_0x19e4e8(0x8f,0xec,0xaf,0x68)]=_0x26a40d,_0x58ac13[_0xc841e(0x174,0x302,0x23a,0x292)+_0x19e4e8(0x83,-0x14,0x152,0x96)+'rs']=_0xc841e(0x320,0x312,0x2dc,0x363)+_0x19e4e8(0x11e,0xc2,0x12f,0xed)+_0xc841e(0x1f1,0x212,0x209,0x1ba)+_0x4d9837+'\x22',_0x58ac13['model']=_0x243047,_0x58ac13['messages']=_0x2b0d75,_0x58ac13['temperatur'+'e']=_0x55a8a8,_0x58ac13['top_p']=_0x13c71b,_0x58ac13[_0xc841e(0x2cf,0x227,0x2ec,0x227)]=_0xe8fad1,_0x58ac13[_0x19e4e8(0x184,0x1f,0xbf,0xf3)]=_0x15155d,_0x490b0a=_0x58ac13;}}_0xb287&&_0xb287('正在处理\x20'+_0x1d0395+'\x20请求，请稍候...');try{const _0x4d9b2c=await _0x392a33[_0xc841e(0x31d,0x2b4,0x31e,0x2e6)](fetch,_0x45ba0c,{'method':_0x392a33['IEMqT'],'headers':_0x4a7d45,'body':JSON['stringify'](_0x490b0a),'signal':_0x1330f2});if(!_0x4d9b2c['ok']){if(_0x392a33[_0x19e4e8(0x40,0x4,0x147,0x7f)](_0x392a33[_0x19e4e8(0x13f,0x18,0x82,0xa2)],_0x392a33[_0x19e4e8(0x147,0x115,0xa2,0xa2)])){try{const _0x14427=await _0x4d9b2c['json']();if(_0x14427[_0xc841e(0x2b2,0x217,0x2b6,0x385)]){let _0x10cbec;if(_0x392a33[_0xc841e(0x2e4,0x282,0x267,0x2b9)](typeof _0x14427[_0xc841e(0x2ed,0x36d,0x2b6,0x272)],_0x392a33[_0x19e4e8(0x198,0xb6,0x110,0xcc)])&&_0x14427['error'][_0x19e4e8(0x5b,0xcd,0xb9,0xf9)]){_0x10cbec=''+_0x14427[_0xc841e(0x2a1,0x34c,0x2b6,0x2d2)][_0xc841e(0x299,0x2c5,0x261,0x18e)];const _0x20b917=[];if(_0x14427[_0x19e4e8(0x1db,0x21f,0xff,0x14e)][_0x19e4e8(0x137,0x1f0,0x20b,0x167)])_0x20b917[_0x19e4e8(0xdd,0x71,0x8c,0x131)](_0x19e4e8(0xa5,0x35,0x16a,0xac)+_0x14427['error'][_0xc841e(0x30b,0x272,0x2cf,0x330)]);if(_0x14427[_0x19e4e8(0x83,0x213,0xbd,0x14e)][_0x19e4e8(0x8f,0xc5,-0x11,0x77)])_0x20b917['push'](_0xc841e(0x207,0x1ea,0x27e,0x24e)+_0x14427[_0xc841e(0x200,0x331,0x2b6,0x2a7)][_0xc841e(0x126,0x1ac,0x1df,0x1e7)]);if(_0x20b917[_0x19e4e8(0xb0,0x83,0x68,0xcd)]>0x10a*-0x14+-0x116e+0x2636){if(_0x392a33[_0xc841e(0x209,0x216,0x1ea,0x2b8)]!==_0x392a33[_0x19e4e8(0x77,0x14a,0xf,0x82)]){const _0x5859ab={};_0x5859ab[_0xc841e(0x2bd,0x318,0x2c2,0x2dc)]='assistant',_0x5859ab['content']=_0x1f2ecd[_0x19e4e8(0x1ae,0x84,0x115,0x145)],_0x5b4488[_0xc841e(0x1d6,0x369,0x299,0x223)](_0x5859ab);}else _0x10cbec+='\x20('+_0x20b917[_0xc841e(0x23e,0x39d,0x2ed,0x23a)](',\x20')+')';}}else _0x10cbec=''+JSON[_0xc841e(0x292,0x3b9,0x31a,0x26a)](_0x14427[_0x19e4e8(0xb8,0xda,0x12a,0x14e)]);throw new Error(_0x10cbec);}}catch(_0x236a08){if(_0x392a33['ZGzWy'](_0x392a33[_0x19e4e8(0xcb,0x48,0xfd,0xe8)],'xnrQG'))throw new _0x2ad6ce(_0xc841e(0x161,0x295,0x20e,0x151)+_0x540f17[_0x19e4e8(0x2e,0xb7,0x3,0x6d)]+'\x20'+_0x3b9d09[_0x19e4e8(0x27e,0x1d2,0x244,0x1c3)]);else{if(_0x236a08['message']['includes'](_0x392a33['URpHR'])||_0x236a08[_0xc841e(0x28b,0x1ea,0x261,0x1dd)][_0xc841e(0x311,0x3ba,0x302,0x291)](_0x392a33['BrrmK']))throw _0x236a08;}}throw new Error(_0xc841e(0x1be,0x197,0x20e,0x175)+_0x4d9b2c[_0x19e4e8(0xea,0x134,0x113,0x6d)]+'\x20'+_0x4d9b2c[_0xc841e(0x343,0x2c1,0x32b,0x294)]);}else return _0x7078df['stringify'](_0x445151,null,0xc96+0x6*0x233+-0x19c6);}let _0x520f9b='';if(_0x15155d){const _0x5bbc79=_0x4d9b2c[_0x19e4e8(0x1e2,0xc3,0x1e9,0x188)][_0xc841e(0x2a9,0x1a7,0x1fc,0x298)](),_0x3040fd=new TextDecoder(_0x19e4e8(0x1eb,0x13c,0xce,0x18c));let _0x3b6b3e='';while(!![]){const {done:_0x16e807,value:_0x210482}=await _0x5bbc79[_0x19e4e8(0x15e,0x1d,0xb5,0xb5)]();if(_0x16e807)break;const _0x1e8492={};_0x1e8492[_0xc841e(0x27e,0x1b3,0x25b,0x2e2)]=!![],_0x3b6b3e+=_0x3040fd[_0xc841e(0x322,0x27b,0x350,0x2cd)](_0x210482,_0x1e8492);const _0x40c1d9=_0x3b6b3e[_0x19e4e8(0xda,0xc,0xd8,0xaa)]('\x0a');_0x3b6b3e=_0x40c1d9[_0x19e4e8(0x76,0x1f,0xf1,0xce)]()||'';for(const _0x1f37c9 of _0x40c1d9){if(_0x392a33[_0xc841e(0x11e,0x118,0x1eb,0x246)](_0x392a33['SXjyS'],_0xc841e(0x280,0x311,0x34a,0x3e6))){const _0x456af9=_0x1f37c9[_0x19e4e8(0x99,0xa2,0x62,0xd4)]();if(!_0x456af9||_0x392a33[_0x19e4e8(0x169,0x264,0x101,0x1a6)](_0x456af9,_0x392a33[_0xc841e(0x2c8,0x3bd,0x2eb,0x260)]))continue;if(_0x456af9['startsWith'](_0xc841e(0x1dc,0x250,0x246,0x2f3)))try{if(_0x392a33[_0x19e4e8(0x123,0x19c,0x75,0x112)]===_0x392a33['yhtAA']){const _0x3ce22f=_0x456af9['slice'](-0x17a5+0x127*0x2+0x3*0x71f),_0x380e39=JSON[_0xc841e(0x3a3,0x312,0x33f,0x358)](_0x3ce22f),_0x67c4e2=_0x380e39[_0x19e4e8(0x274,0x161,0x1f1,0x1a4)]?.[-0x8e*0x1b+0x13f2+-0x4f8]?.['delta']?.[_0xc841e(0x1ff,0x2e0,0x280,0x2b7)];_0x67c4e2&&(_0x520f9b+=_0x67c4e2,_0xb287&&_0x392a33[_0xc841e(0x2ef,0x31d,0x35a,0x3a3)](_0xb287,_0x520f9b));}else _0x1a4ee4[_0x19e4e8(0x221,0x1d7,0x231,0x1be)](),_0xc2ad2a[_0x19e4e8(-0x21,0x2d,0x104,0x7c)](_0x392a33['idERR']);}catch(_0x4c229f){console['warn'](_0x392a33[_0xc841e(0x283,0x335,0x325,0x3c1)],_0x4c229f[_0xc841e(0x24f,0x271,0x261,0x30b)]);}}else{_0x12e438=''+_0x3e4004[_0x19e4e8(0xf1,0xe6,0xe3,0x14e)]['message'];const _0xcc813b=[];if(_0x49b7d9[_0xc841e(0x20f,0x361,0x2b6,0x20f)][_0xc841e(0x1f9,0x2d1,0x2cf,0x387)])_0xcc813b[_0x19e4e8(0xe0,0x176,0x17a,0x131)](_0x19e4e8(0x17e,0x127,0x98,0xac)+_0x228c40['error']['type']);if(_0x257467[_0x19e4e8(0x183,0x1ec,0xbd,0x14e)][_0xc841e(0x110,0x223,0x1df,0x241)])_0xcc813b[_0xc841e(0x28b,0x303,0x299,0x339)]('代码:\x20'+_0x13f4af[_0xc841e(0x201,0x376,0x2b6,0x31b)]['code']);_0x392a33[_0x19e4e8(0x68,0x1b8,0x116,0x114)](_0xcc813b[_0xc841e(0x2e4,0x17d,0x235,0x1ae)],0x1e1b*-0x1+-0x360+0x217b)&&(_0x1951b4+='\x20('+_0xcc813b[_0xc841e(0x3b3,0x2d2,0x2ed,0x37c)](',\x20')+')');}}}if(_0x3b6b3e[_0x19e4e8(0xe0,0x141,0x49,0xd4)]()&&_0x392a33[_0x19e4e8(0x190,0x20f,0x1bf,0x158)](_0x3b6b3e['trim'](),_0x392a33[_0xc841e(0x2f1,0x270,0x2eb,0x2b3)])&&_0x3b6b3e[_0xc841e(0x2be,0x22f,0x23c,0x2c6)]()[_0x19e4e8(0x2c,0x40,0xe6,0xb3)](_0x392a33[_0xc841e(0x253,0x29c,0x292,0x275)])){if(_0x392a33['Aiktj'](_0x392a33[_0x19e4e8(0x1ff,0x256,0x1b3,0x1d2)],_0x392a33['qjdtP']))try{if(_0x19e4e8(0x11b,0x15c,0x82,0x99)!==_0x392a33[_0xc841e(0x2e3,0x362,0x331,0x2b0)]){const _0x4f335e=_0x3b6b3e[_0x19e4e8(0xdb,0x100,0x59,0xd4)]()[_0x19e4e8(0x1a7,0x1b5,0x14e,0x129)](0xefe*-0x1+-0x3e3+0x12e7),_0x3730fb=JSON[_0xc841e(0x382,0x293,0x33f,0x38a)](_0x4f335e),_0x2eff30=_0x3730fb[_0xc841e(0x393,0x34a,0x30c,0x24c)]?.[0x870+-0x1*0x923+0x1*0xb3]?.[_0x19e4e8(0x234,0x22c,0x27f,0x201)]?.[_0x19e4e8(0xb8,0x66,0x63,0x118)];_0x2eff30&&(_0x520f9b+=_0x2eff30,_0xb287&&_0x392a33['SbFqJ'](_0xb287,_0x520f9b));}else _0x392a33[_0xc841e(0x382,0x24e,0x2c3,0x311)](_0x5ed9a4,_0x16d99c);}catch(_0x263e66){console[_0x19e4e8(0x164,-0x41,-0x10,0x90)](_0x392a33[_0xc841e(0x2a5,0x389,0x333,0x303)],_0x263e66[_0xc841e(0x1de,0x191,0x261,0x21f)]);}else{const _0x46c159=_0x479550[_0xc841e(0x258,0x280,0x23c,0x1b1)]()[_0x19e4e8(0x15c,0xc1,0xd9,0x129)](-0xe26+0x1a1d+-0xbf1*0x1),_0x338ea0=_0x14bdc0[_0x19e4e8(0x1fb,0x13b,0x29b,0x1d7)](_0x46c159),_0x1b6b9d=_0x338ea0['choices']?.[0x2708+-0x1*0xd2f+-0x19d9]?.['delta']?.['content'];_0x1b6b9d&&(_0x26bdad+=_0x1b6b9d,_0x5a92ec&&_0x392a33[_0xc841e(0x310,0x317,0x374,0x434)](_0x2b8058,_0xa2a525));}}if(!_0x520f9b){if(_0x392a33[_0x19e4e8(0x210,0x28b,0x22d,0x20f)]===_0x392a33[_0xc841e(0x15e,0x150,0x224,0x2a9)]){_0x273708=''+_0x4a2833['error']['message'];const _0x4bc365=[];if(_0x487a31[_0xc841e(0x1f3,0x2de,0x2b6,0x267)][_0xc841e(0x252,0x24d,0x2cf,0x224)])_0x4bc365['push'](_0xc841e(0x26e,0x2d0,0x214,0x18b)+_0x3c6653['error'][_0x19e4e8(0x146,0x10d,0x196,0x167)]);if(_0x8d1522[_0xc841e(0x233,0x248,0x2b6,0x2da)][_0xc841e(0x162,0x184,0x1df,0x26c)])_0x4bc365[_0xc841e(0x2f6,0x293,0x299,0x2a2)]('代码:\x20'+_0x15ba8e[_0x19e4e8(0x178,0x168,0x123,0x14e)]['code']);_0x392a33[_0x19e4e8(0xe7,0xb7,0xb2,0x114)](_0x4bc365['length'],0x1193+0x65*-0x5d+-0x131e*-0x1)&&(_0x3cccd8+='\x20('+_0x4bc365['join'](',\x20')+')');}else _0x520f9b=_0x392a33['RFxlO'],toastr[_0xc841e(0x1e4,0x2e0,0x288,0x1d9)](_0x1d0395+(_0xc841e(0x399,0x396,0x308,0x274)+'为空，可能是请求被截'+_0x19e4e8(0x89,0x69,0x6f,0x10f)+_0x19e4e8(0x1f8,0x156,0x148,0x143)+_0x19e4e8(0x139,0x117,0x1ba,0x106)));}}else{const _0x177a10=await _0x4d9b2c['json']();if(_0x177a10[_0x19e4e8(0x203,0x83,0x1af,0x14e)]){if(_0x392a33[_0xc841e(0x247,0x3a3,0x30e,0x27b)](_0x392a33[_0x19e4e8(0xcc,0x123,0x14d,0xc1)],_0x392a33[_0x19e4e8(0x8b,0xa0,0x153,0xc1)])){let _0x425c33;if(typeof _0x177a10[_0xc841e(0x1e6,0x245,0x2b6,0x22b)]===_0x392a33[_0xc841e(0x194,0x2ee,0x234,0x1f4)]&&_0x177a10[_0x19e4e8(0x1fc,0xb9,0x182,0x14e)][_0x19e4e8(0x1b2,0xf1,0x14a,0xf9)]){if(_0x392a33[_0x19e4e8(0x82,0x4f,0x117,0xa0)](_0x392a33['oonbc'],_0x392a33[_0x19e4e8(0xb5,0xaa,0x1af,0xdc)]))_0x54d37a+='\x20('+_0x541e14[_0xc841e(0x2ef,0x221,0x2ed,0x367)](',\x20')+')';else{_0x425c33=''+_0x177a10[_0xc841e(0x287,0x1fb,0x2b6,0x1e8)]['message'];const _0x299607=[];if(_0x177a10['error'][_0x19e4e8(0x1b0,0x20e,0x92,0x167)])_0x299607['push'](_0xc841e(0x2c3,0x1d3,0x214,0x178)+_0x177a10[_0x19e4e8(0x130,0x117,0x1ac,0x14e)][_0xc841e(0x350,0x39b,0x2cf,0x21a)]);if(_0x177a10[_0xc841e(0x256,0x305,0x2b6,0x308)]['code'])_0x299607[_0x19e4e8(0x70,0x159,0x7e,0x131)](_0xc841e(0x24d,0x1dc,0x27e,0x2a2)+_0x177a10[_0xc841e(0x359,0x31c,0x2b6,0x33f)]['code']);_0x392a33[_0x19e4e8(0x70,0x116,0xaa,0x6e)](_0x299607[_0xc841e(0x237,0x2bf,0x235,0x2c0)],0x186e+0x5*0x16f+-0x1f99)&&(_0x425c33+='\x20('+_0x299607[_0x19e4e8(0x1b3,0x23c,0x1b2,0x185)](',\x20')+')');}}else _0x425c33=''+JSON[_0x19e4e8(0x1e0,0x1de,0x287,0x1b2)](_0x177a10[_0x19e4e8(0xf2,0x171,0x180,0x14e)]);throw new Error(_0x425c33);}else _0x392a33[_0xc841e(0x398,0x2bb,0x2c3,0x27f)](_0x3db5d8,_0x19e4e8(0x1c9,0x199,0x25c,0x1e7)+_0xc841e(0x18a,0x1f1,0x1e0,0x1d4));}_0x520f9b=_0x177a10[_0x19e4e8(0x21e,0xf9,0x154,0x1a4)]?.[0x1462+0x6b4+-0x1*0x1b16]?.[_0xc841e(0x2b1,0x2d1,0x261,0x2c3)]?.[_0xc841e(0x2c7,0x303,0x280,0x287)]||'';if(!_0x520f9b){if(_0x392a33[_0xc841e(0x230,0x278,0x251,0x29c)](_0x392a33[_0xc841e(0x1e3,0x2e7,0x241,0x1a3)],_0x392a33[_0xc841e(0x278,0x280,0x241,0x2f3)]))_0x520f9b=_0x19e4e8(0x14a,0x165,0xae,0x149),toastr[_0x19e4e8(0x183,0x1dc,0x195,0x120)](_0x1d0395+(_0xc841e(0x3a2,0x3db,0x308,0x2f3)+_0xc841e(0x1f9,0x21c,0x210,0x2c7)+_0xc841e(0x34d,0x301,0x277,0x236)+'ns\x20设置过小、或\x20'+_0xc841e(0x239,0x1ed,0x26e,0x328)));else{const _0x5eac1e=_0x37ad00+(':\x20API\x20URL,'+_0xc841e(0x274,0x261,0x23e,0x2fd)+_0x19e4e8(0x205,0xc8,0xb0,0x162)+'置。');_0xb3e3e5[_0xc841e(0x240,0x2dd,0x2b6,0x2f2)](_0x5eac1e);const _0xc2e2f5={};_0xc2e2f5[_0x19e4e8(0x18a,0x14b,0x25d,0x1fd)]=![],_0xc2e2f5['result']=_0x5eac1e,_0xc2e2f5['id']=_0x110486,_0x470a9e[_0x19e4e8(-0x22,-0x15,0xe3,0x8b)](_0x3651f1,_0xc2e2f5);return;}}if(_0xb287){if(_0x392a33[_0xc841e(0x225,0x299,0x2c0,0x200)](_0x392a33[_0xc841e(0x232,0x227,0x2a9,0x362)],_0xc841e(0x1a2,0x2d9,0x20c,0x1fb)))return _0x50689d;else _0xb287(_0x520f9b);}}_0x392a33['xPxBE'](addLog,_0x19e4e8(0x146,0x21e,0x294,0x1cd)+_0x19e4e8(0x1ae,0x284,0xfe,0x1c5)),_0x392a33['nRUnf'](addLog,_0x520f9b),_0x392a33[_0x19e4e8(0x143,0x39,0x4a,0xea)](addLog,'=====\x20LLM\x20'+'请求完成\x20====='),taskQueue[_0xc841e(0x2d7,0x41c,0x35b,0x3ea)+'sk'](_0x2610bc,!![]),llmTaskControllers[_0x19e4e8(0x23f,0x1a5,0xf2,0x189)](_0x2610bc);const _0x233f84={};_0x233f84['success']=!![],_0x233f84['result']=_0x520f9b,_0x233f84['id']=_0x593bf1,_0x233f84[_0x19e4e8(0x147,0x10b,0x25a,0x1aa)]=![],eventSource['emit'](_0x614bad,_0x233f84);}catch(_0x489f07){if(_0x392a33[_0xc841e(0x24d,0x304,0x2db,0x277)](_0x489f07[_0xc841e(0x269,0x252,0x1ed,0x2b2)],_0x19e4e8(0x49,0x16f,0xae,0xc4))){if(_0x392a33['BApMi'](_0x392a33['SzxFj'],_0x392a33[_0xc841e(0x237,0x302,0x247,0x2c0)])){if(!_0xed6d2b[_0x19e4e8(0x129,0xb0,0xa6,0x172)])return;if(!_0x1511e0['content']||_0x392a33[_0xc841e(0x22b,0x286,0x2b8,0x272)](_0x5d8407['content'][_0x19e4e8(0x32,0x1a7,0x118,0xd4)](),''))return;if(_0x392a33[_0x19e4e8(0x101,0x121,0x1a5,0x150)](_0x4144da[_0x19e4e8(0x72,0x117,0x1f4,0x133)+'e'],_0x392a33[_0xc841e(0x1ed,0x372,0x29e,0x1e6)])){if(!_0x42f916||!_0x3061cd(_0x250f45[_0x19e4e8(0x1e7,0x206,0x251,0x1dc)+'ds'],_0x2fcaa8))return;}const _0x44cb45={};_0x44cb45[_0xc841e(0x246,0x225,0x2c2,0x2cb)]=_0x26b93b[_0xc841e(0x347,0x2f8,0x2c2,0x25c)]||_0x19e4e8(0x179,0x209,0x279,0x1fb),_0x44cb45[_0x19e4e8(0x164,0xfc,0x147,0x118)]=_0x4df865['content'],_0x506330['push'](_0x44cb45);}else{const _0x28c66a=_0x392a33[_0xc841e(0x2f0,0x385,0x2cb,0x209)][_0xc841e(0x24b,0x2c2,0x212,0x1c0)]('|');let _0x19e98c=0x3cc+-0x205+0xd*-0x23;while(!![]){switch(_0x28c66a[_0x19e98c++]){case'0':return;case'1':taskQueue['updateStat'+'us'](_0x2610bc,TaskStatus[_0xc841e(0x35a,0x2ef,0x376,0x3d8)]);continue;case'2':const _0x5a628e={};_0x5a628e[_0xc841e(0x182,0x1c7,0x1ed,0x28f)]=_0x392a33[_0x19e4e8(0xfa,0x6b,0x12a,0x127)],_0x5a628e[_0x19e4e8(0x152,0x108,0xca,0xf9)]=_0xc841e(0x195,0x21c,0x249,0x178)+_0x19e4e8(0xe3,-0x2e,-0x56,0x75);const _0x5d8ccb={};_0x5d8ccb['success']=![],_0x5d8ccb['result']=null,_0x5d8ccb['id']=_0x593bf1,_0x5d8ccb[_0xc841e(0x233,0x303,0x2b6,0x2bc)]=_0x5a628e,eventSource['emit'](_0x614bad,_0x5d8ccb);continue;case'3':_0x5cdbe6=!![];continue;case'4':llmTaskControllers['delete'](_0x2610bc);continue;}break;}}}console[_0x19e4e8(0x1f5,0x97,0x11e,0x14e)](_0x1d0395+'\x20Error:',_0x489f07);const _0x229afb='请求错误:\x20'+_0x489f07[_0xc841e(0x2ee,0x26c,0x261,0x1c9)];_0xb287&&(_0x392a33['goyvb'](_0x19e4e8(0xb9,0xf0,0x171,0x100),_0x392a33[_0xc841e(0x29b,0x217,0x228,0x299)])?_0x392a33[_0x19e4e8(0x13f,0x21a,0x21c,0x14c)](_0xb287,_0x229afb):_0x120b5a=''+_0x3c4fd9['stringify'](_0x2f6f57[_0x19e4e8(0x1b9,0x149,0x12c,0x14e)]));toastr[_0x19e4e8(0x14b,0x1c5,0x155,0x14e)](_0x489f07[_0xc841e(0x263,0x246,0x261,0x2f0)]),taskQueue[_0xc841e(0x3b8,0x399,0x35b,0x40a)+'sk'](_0x2610bc,![]),llmTaskControllers[_0x19e4e8(0xf8,0x1d2,0x246,0x189)](_0x2610bc);const _0x69dc53={};_0x69dc53['success']=![],_0x69dc53[_0xc841e(0x30c,0x286,0x23f,0x25e)]=_0x229afb,_0x69dc53['id']=_0x593bf1,eventSource[_0x19e4e8(0x45,0xa8,0x8e,0x8b)](_0x614bad,_0x69dc53);}finally{if(_0x392a33[_0xc841e(0x13f,0x26d,0x1f9,0x28b)](_0x392a33[_0xc841e(0x2f7,0x2d4,0x2e9,0x274)],_0x392a33[_0xc841e(0x230,0x1da,0x21e,0x180)])){const _0x53f700={'vPjQS':function(_0x230295,_0x2c8363){return _0x230295(_0x2c8363);}};return function(_0xd586b3){const {id:_0x4497aa}=_0xd586b3;function _0x5d94a6(_0x5b2e5b,_0x384dba,_0x4453f0,_0x3a2384){return _0x19e4e8(_0x384dba,_0x384dba-0xf6,_0x4453f0-0x1e9,_0x4453f0-0x102);}if(!_0x4497aa)return;function _0x5358fc(_0x45cf9c,_0x32d92e,_0x426caa,_0x448150){return _0xc841e(_0x45cf9c-0x1c5,_0x32d92e-0x181,_0x426caa-0x36,_0x32d92e);}const _0x19d1b0=_0x57f090[_0x6ffe30]||_0x378bad;_0x108d4b[_0x5d94a6(0x3ad,0x3b1,0x30d,0x3a0)]('st-chatu8:'+_0x5358fc(0x2bf,0x23b,0x304,0x333)+_0x19d1b0+(_0x5d94a6(0x21b,0x14a,0x1f3,0x163)+_0x5358fc(0x2a6,0x397,0x32f,0x28c))+_0x4497aa+')');const _0x21cdfd=_0x53f700['vPjQS'](_0x4d9ada,_0x581bd1),_0x5bbdbc={};_0x5bbdbc[_0x5d94a6(0x2ca,0x306,0x2bc,0x2d3)]=_0x21cdfd,_0x5bbdbc['id']=_0x4497aa,_0x21fd91[_0x5358fc(0x2ff,0x28a,0x229,0x291)](_0x369d1,_0x5bbdbc);};}else currentLLMRequestController===_0x3adb2f&&(currentLLMRequestController=null),(!_0x5cdbe6||_0x392a33[_0xc841e(0x2e6,0x2a2,0x242,0x204)](currentLLMRequestController,null))&&(_0x392a33[_0x19e4e8(0xdb,0x115,0x197,0xff)](_0x392a33[_0x19e4e8(0x191,0x164,0x4e,0xfa)],_0x392a33[_0xc841e(0x2f6,0x2a1,0x347,0x320)])?_0x38b60d=null:stopFabLoading());}}function _0x43f3(_0x55fa29,_0x54fdf0){_0x55fa29=_0x55fa29-(-0x16*-0x1af+0xeed+0x1*-0x326f);const _0x4efb14=_0x5e72();let _0xec3bb8=_0x4efb14[_0x55fa29];if(_0x43f3['nGqHSE']===undefined){var _0x2b7a4b=function(_0x47ffc0){const _0x58aa03='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4bea90='',_0xbb1ce4='',_0x2fd9ac=_0x4bea90+_0x2b7a4b;for(let _0x2ae312=0x1*0x26ed+-0x2e0+-0x347*0xb,_0x3dd509,_0x4a96e8,_0x271506=0x3b*-0x72+0x15b9+0x48d;_0x4a96e8=_0x47ffc0['charAt'](_0x271506++);~_0x4a96e8&&(_0x3dd509=_0x2ae312%(0x7af*-0x2+0x5*0x11f+0x9c7)?_0x3dd509*(0x479+-0x16a0+0x2a1*0x7)+_0x4a96e8:_0x4a96e8,_0x2ae312++%(-0x1*-0xb3e+-0x21*-0x12d+0x10ad*-0x3))?_0x4bea90+=_0x2fd9ac['charCodeAt'](_0x271506+(-0x1*0x36d+-0xc30+-0xfa7*-0x1))-(-0x4d9+0x1*0x7d3+-0x2f*0x10)!==-0x1ac5*0x1+0xd*-0x145+-0xbf*-0x3a?String['fromCharCode'](0xe02+-0x5*0x5b7+-0x298*-0x6&_0x3dd509>>(-(0x2278+0x35+0x5*-0x6ef)*_0x2ae312&0x245+0xda0+-0xfdf)):_0x2ae312:0x1*-0x821+-0xf*0x269+0x2c48){_0x4a96e8=_0x58aa03['indexOf'](_0x4a96e8);}for(let _0x5a7ccf=-0x1*-0x248c+-0x5d*-0x2+-0xd*0x2de,_0x1ccf32=_0x4bea90['length'];_0x5a7ccf<_0x1ccf32;_0x5a7ccf++){_0xbb1ce4+='%'+('00'+_0x4bea90['charCodeAt'](_0x5a7ccf)['toString'](0x26*0x3c+-0x1*0x1f0e+-0xb1b*-0x2))['slice'](-(-0x16f*0xd+-0xc8c+0x1f31));}return decodeURIComponent(_0xbb1ce4);};_0x43f3['TuaEeb']=_0x2b7a4b,_0x43f3['oSgtey']={},_0x43f3['nGqHSE']=!![];}const _0x237220=_0x4efb14[0x11*-0x39+-0x1*-0x309+-0x8*-0x18],_0x2500ac=_0x55fa29+_0x237220,_0x45e31b=_0x43f3['oSgtey'][_0x2500ac];if(!_0x45e31b){const _0x5548a6=function(_0xb223e2){this['rRVHOY']=_0xb223e2,this['WhrOke']=[0x1e47+-0xbbd+-0x1289,0x942+-0x1bd1+-0x128f*-0x1,0xc5f*-0x2+0x1*-0xb64+-0x2*-0x1211],this['vnUdXM']=function(){return'newState';},this['PuckmY']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['SInSQv']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5548a6['prototype']['jIPzlY']=function(){const _0x2f2303=new RegExp(this['PuckmY']+this['SInSQv']),_0x4d58e4=_0x2f2303['test'](this['vnUdXM']['toString']())?--this['WhrOke'][0x150*0xe+0x1*-0x20c5+0xe66]:--this['WhrOke'][-0x126d+-0x106f*0x1+0x22dc];return this['xWqaPB'](_0x4d58e4);},_0x5548a6['prototype']['xWqaPB']=function(_0x308bbd){if(!Boolean(~_0x308bbd))return _0x308bbd;return this['JUDhns'](this['rRVHOY']);},_0x5548a6['prototype']['JUDhns']=function(_0x277895){for(let _0x3ccd6a=-0x26ac+-0x3d*0xa1+0x4d09,_0x283149=this['WhrOke']['length'];_0x3ccd6a<_0x283149;_0x3ccd6a++){this['WhrOke']['push'](Math['round'](Math['random']())),_0x283149=this['WhrOke']['length'];}return _0x277895(this['WhrOke'][-0x18*0x24+-0x8*0x18+0x420]);},new _0x5548a6(_0x43f3)['jIPzlY'](),_0xec3bb8=_0x43f3['TuaEeb'](_0xec3bb8),_0x43f3['oSgtey'][_0x2500ac]=_0xec3bb8;}else _0xec3bb8=_0x45e31b;return _0xec3bb8;}export async function executeDefaultLLMRequest(_0x9c52f7,_0x77bb4,_0x1a15d8=null){const _0x41de22={'WgFke':function(_0x3cf853,_0x1a2e6b,_0x248a3a){return _0x3cf853(_0x1a2e6b,_0x248a3a);},'INZQi':function(_0x8e4a0d,_0x1a684c){return _0x8e4a0d===_0x1a684c;},'bibZX':_0x266e8c(-0x28,-0x3c,-0xcf,-0x83),'hCkSX':function(_0x540d27,_0x3d1a49){return _0x540d27||_0x3d1a49;},'LCHFh':'nOoPo','GMHck':_0x16eea1(0x101,0x77,0x58,-0x12),'QrvoM':_0x266e8c(-0x22d,-0x193,-0x1ad,-0x265)+_0x266e8c(-0x1e2,-0x227,-0x22a,-0x1a7),'pQRru':function(_0x1f27bb){return _0x1f27bb();},'dljdg':function(_0xa04535,_0x27aff8){return _0xa04535(_0x27aff8);},'RoAuJ':function(_0x46a6a5,_0x48e8f2){return _0x46a6a5(_0x48e8f2);},'zQvsJ':function(_0x232ecb,_0x50e01f){return _0x232ecb(_0x50e01f);},'cpxnq':function(_0x5b384a,_0x2500e7){return _0x5b384a||_0x2500e7;},'PhRYn':function(_0x1d2039,_0x535678){return _0x1d2039===_0x535678;},'ReZFg':_0x16eea1(0x174,-0x8,0x9f,0x9f),'IskrY':_0x266e8c(-0x15b,-0x1ed,-0x17d,-0x139)+_0x16eea1(-0x6,0xb4,0x8d,0x146)+_0x16eea1(0xc1,-0x5d,-0x14,-0x38),'SmLrv':function(_0x2cc606,_0x5cb798){return _0x2cc606!==_0x5cb798;},'ECnKy':_0x16eea1(-0x84,0xa3,0x1f,0x5f),'LUJOU':_0x266e8c(-0x228,-0x25f,-0x234,-0x177)+_0x16eea1(0x9d,0xb6,0x3c,0x68),'pVUdI':_0x266e8c(-0xe8,-0x18,-0xe0,-0x124),'hKRMl':'/v1/','mGPHx':function(_0x4c8e11,_0xf0d7a3){return _0x4c8e11+_0xf0d7a3;},'vlGbt':function(_0x3b3bfc,_0x202f9c){return _0x3b3bfc(_0x202f9c);},'gHZUh':_0x16eea1(0xd8,0x7b,0xa6,0x6e),'xgPGz':'正在处理外部请求，请'+_0x16eea1(0x2c,-0x6d,-0x16,-0xae),'hfZml':_0x266e8c(-0x1c2,-0x1b0,-0x1a8,-0x20a),'tQbrc':_0x16eea1(-0x30,0x10d,0x54,0x12a),'clDfk':function(_0x8466e7,_0x34c176){return _0x8466e7>_0x34c176;},'IuZnz':_0x266e8c(-0x6c,-0x20,-0xc2,-0x3a),'aocWJ':_0x16eea1(0xd,-0x59,0x17,-0xb1),'alkaf':'LLM\x20请求返回为空'+'，可能是请求被截断、'+'max_tokens'+_0x266e8c(-0x2da,-0x186,-0x247,-0x232)+_0x16eea1(-0x84,-0x37,-0x22,0xaa),'OMyWK':function(_0x464cb4,_0x5321da){return _0x464cb4(_0x5321da);},'lhsKk':function(_0xb762de,_0x403c8d){return _0xb762de(_0x403c8d);},'DVoVa':'NzYnD','kwPMD':_0x266e8c(-0x238,-0x122,-0x1f4,-0x2ad),'YQbOM':'0|3|4|2|1|'+'5','gqGTE':_0x266e8c(-0x18a,-0x155,-0x1d7,-0x1a7)+_0x16eea1(-0xd4,0x40,-0x19,-0x75),'tCLmb':_0x266e8c(-0xd,-0x3a,-0xbe,-0x9f)+_0x16eea1(-0x6d,-0x64,0x24,0x95)+_0x266e8c(-0xe0,-0x176,-0x131,-0x1ef),'muvJS':_0x16eea1(0x5a,0x75,0x127,0x164)+'e\x20Error:','zBAEX':function(_0x2f7fbb,_0x3eb4ce){return _0x2f7fbb===_0x3eb4ce;},'sWtOD':_0x266e8c(-0x1f5,-0x164,-0x1c3,-0x1c9),'athDY':function(_0x4425bb,_0x1cc019){return _0x4425bb!==_0x1cc019;},'RMNCY':_0x16eea1(0xef,0x1b0,0x11f,0xd5),'jnDPz':'dgMnh','QnVAW':function(_0x2189b3){return _0x2189b3();}},{prompt:_0x5e98b0,id:_0xe67609}=_0x9c52f7;if(_0x41de22[_0x16eea1(0x1cf,0xdd,0x16a,0x147)](!_0xe67609,!_0x5e98b0))return;if(currentLLMRequestController){if(_0x41de22[_0x266e8c(-0x129,-0x73,-0x119,-0x126)]!==_0x41de22[_0x266e8c(-0x48,-0x16b,-0x104,-0x160)])currentLLMRequestController[_0x266e8c(-0xa8,-0x9d,-0xfa,-0x111)](),toastr['info'](_0x41de22[_0x266e8c(-0x1b9,-0x99,-0x159,-0x1d9)]);else{const _0x31b41c=_0x58aa03[_0x4bea90]['test_conte'+_0x266e8c(-0xd2,-0xb3,-0xe8,-0xea)+'s']||{},_0x4e3956=_0xbb1ce4[_0x2fd9ac][_0x16eea1(-0xe3,0x9c,-0x11,-0x46)+_0x16eea1(0x7d,0xf0,0xce,0xe)+'_profile'];return _0x31b41c[_0x4e3956]||_0x31b41c[_0x2ae312['keys'](_0x31b41c)[0x50f*0x6+0x8b*-0x43+0x607]]||{};}}function _0x16eea1(_0x18e29a,_0x474300,_0x53caae,_0xe3736a){return _0x1af184(_0x18e29a-0x1df,_0xe3736a,_0x53caae-0x161,_0x53caae- -0x366);}currentLLMRequestController=new AbortController();const _0x2107f3=currentLLMRequestController['signal'],_0x4dcbff=currentLLMRequestController,_0x376e24={};_0x376e24['name']='LLM:\x20外部请求',_0x376e24[_0x266e8c(-0x1c2,-0x11c,-0x151,-0x147)]=TaskType[_0x16eea1(0x1d4,0x1df,0x139,0xdf)],_0x376e24[_0x16eea1(0x98,0x1c1,0x12c,0x6f)]=_0xe67609;const _0x52978a=taskQueue[_0x266e8c(-0x1c8,-0x1d0,-0x179,-0x117)](_0x376e24);llmTaskControllers[_0x16eea1(0xb6,0xe4,0x141,0x13b)](_0x52978a,currentLLMRequestController),taskQueue['updateStat'+'us'](_0x52978a,TaskStatus['RUNNING']),_0x41de22[_0x266e8c(-0x6e,-0x41,-0xdf,-0xa1)](startFabLoading);let _0x2500bb=![];function _0x266e8c(_0x534914,_0x4c4d88,_0x267606,_0x473664){return _0x3fdeda(_0x534914,_0x267606- -0x1fe,_0x267606-0x21,_0x473664-0xf4);}_0x41de22[_0x266e8c(-0xa1,-0xa2,-0xdf,-0x169)](clearLog),_0x41de22['dljdg'](addLog,_0x16eea1(0x85,0x14b,0x95,0x5)+_0x266e8c(-0x1d1,-0x1d4,-0x142,-0xb0)+'=='),_0x41de22['RoAuJ'](addLog,_0x16eea1(0x83,0x10f,0xc7,0x140)+_0xe67609),_0x41de22['zQvsJ'](addLog,_0x266e8c(-0x37,-0x1b8,-0xe5,-0xe0)+':'),_0x41de22['zQvsJ'](addLog,formatPromptForDisplay(_0x5e98b0));const {api_url:_0x3b0deb,api_key:_0xf67159,model:_0x385d06,temperature:_0x565bc1,top_p:_0x266b05,max_tokens:_0x40b662,stream:_0x215b35,bypass_proxy:_0x54ecb7}=_0x77bb4;if(_0x41de22[_0x16eea1(0x63,0xc1,0x2d,-0x51)](!_0x3b0deb,!_0xf67159)||!_0x385d06){if(_0x41de22[_0x266e8c(-0xee,-0x15a,-0x129,-0xae)](_0x41de22[_0x266e8c(-0x2dc,-0x22d,-0x23a,-0x237)],_0x16eea1(0xaa,0xb7,0x9f,0x79))){const _0x22085c=_0x41de22[_0x16eea1(0xf3,-0x99,0x20,0x97)];toastr[_0x16eea1(0x9c,0x2,0xc0,0xb1)](_0x22085c);const _0x5ab302={};_0x5ab302[_0x266e8c(-0xf0,-0x4a,-0xbb,-0x187)]=![],_0x5ab302['result']=_0x22085c,_0x5ab302['id']=_0xe67609,eventSource[_0x16eea1(-0xcc,-0x21,-0x3,-0xd1)](eventNames[_0x16eea1(0xe5,0x136,0x10f,0xd1)+_0x16eea1(0x1b1,0x18d,0x147,0x183)],_0x5ab302);return;}else{const _0x10ecf7=_0x40c89e[_0x16eea1(0x39,0x24,0x80,0xd3)](_0xccfe02);_0x10ecf7&&(_0x10ecf7['abort'](),_0xbcd95d[_0x16eea1(0xee,0x198,0xfb,0xec)](_0x59c240),_0x2ff07c[_0x16eea1(0xbb,0x218,0x17d,0x226)](_0x266e8c(-0x124,-0x1ea,-0x13f,-0xaf)+_0x266e8c(-0x23b,-0x2ff,-0x22e,-0x1cd)+_0x1c7bad));}}const _0x5df17a=_0x3b0deb['replace'](/\/$/,'');let _0x40b4bc,_0x24aa4f,_0x289caf;if(_0x54ecb7){if(_0x41de22[_0x266e8c(-0xa5,-0x1df,-0x13d,-0xa7)](_0x266e8c(-0x2b4,-0x20c,-0x20b,-0x27c),_0x41de22[_0x16eea1(-0x14,-0x87,0x31,0x104)]))_0x32c4c1['warn']('流式解析警告:',_0x421df1[_0x266e8c(-0x18f,-0x149,-0x1bf,-0x1b7)]);else{_0x40b4bc=_0x5df17a+(_0x266e8c(-0x9a,-0x10a,-0x125,-0x163)+_0x16eea1(0xe8,0x72,0xc3,0x108));const _0x52aea8={};_0x52aea8['Content-Ty'+'pe']=_0x41de22[_0x266e8c(-0xfa,-0xff,-0x192,-0x1f6)],_0x52aea8['Authorizat'+_0x16eea1(0x101,0x1f4,0x172,0xa3)]=_0x266e8c(-0xcc,-0x99,-0x108,-0x63)+_0xf67159,_0x24aa4f=_0x52aea8;const _0x32928d={};_0x32928d[_0x16eea1(0xb2,0x1b7,0x183,0x258)]=_0x385d06,_0x32928d[_0x266e8c(-0x1,-0x3a,-0xa8,-0x8d)]=_0x5e98b0,_0x32928d[_0x16eea1(-0x87,0x2e,0x1b,-0x8c)+'e']=_0x565bc1,_0x32928d[_0x266e8c(-0x262,-0x142,-0x1f3,-0x24a)]=_0x266b05,_0x32928d[_0x266e8c(-0xdf,-0xee,-0x134,-0xcc)]=_0x40b662,_0x32928d[_0x266e8c(-0x1ee,-0x1d1,-0x1c5,-0x17b)]=_0x215b35??![],_0x289caf=_0x32928d;}}else{let _0x480988=_0x5df17a;!_0x480988[_0x266e8c(-0x1f4,-0x1b0,-0x18d,-0x1e6)](_0x41de22[_0x16eea1(0x76,0x95,0x30,-0xc)])&&!_0x480988[_0x266e8c(-0x127,-0x86,-0x11e,-0x52)](_0x41de22[_0x16eea1(0x10d,-0x19,0xa9,0x9e)])&&(_0x480988=_0x41de22[_0x266e8c(-0x18e,-0x183,-0x15f,-0x131)](_0x480988,_0x41de22['pVUdI']));_0x480988=_0x480988['replace'](/\/v1\/$/,_0x266e8c(-0x38,-0xbd,-0xe0,-0x138)),_0x40b4bc=_0x266e8c(-0x1c2,-0x120,-0xf2,-0x1a5)+_0x266e8c(-0x20c,-0x1db,-0x188,-0x11a)+_0x266e8c(-0x153,-0x185,-0x122,-0x1b1)+_0x266e8c(-0x108,-0x137,-0xd7,-0x13f),_0x24aa4f=_0x41de22[_0x16eea1(0x169,0x143,0xe0,0x13e)](getRequestHeaders,window['token']);const _0x5c7806={};_0x5c7806[_0x16eea1(-0x55,-0x43,0x7a,0x76)+_0x266e8c(-0x1f4,-0x2a8,-0x229,-0x1bb)+'ce']=_0x41de22[_0x16eea1(0x10e,0x1a,0xba,0xe4)],_0x5c7806[_0x16eea1(-0x41,0x8a,-0x26,-0x3)]=_0x480988,_0x5c7806['custom_inc'+_0x266e8c(-0x24a,-0x1c3,-0x222,-0x223)+'rs']='Authorizat'+_0x266e8c(-0x131,-0x23e,-0x1cb,-0x270)+_0x16eea1(0xb4,0x89,0x13,0x97)+_0xf67159+'\x22',_0x5c7806[_0x266e8c(-0x135,-0x117,-0xa7,-0xe)]=_0x385d06,_0x5c7806['messages']=_0x5e98b0,_0x5c7806[_0x16eea1(0x87,-0xb0,0x1b,-0x92)+'e']=_0x565bc1,_0x5c7806[_0x266e8c(-0x1bc,-0x14d,-0x1f3,-0x2a2)]=_0x266b05,_0x5c7806[_0x16eea1(0xce,0xea,0xf6,0xe7)]=_0x40b662,_0x5c7806[_0x16eea1(0x107,-0xf,0x65,0x88)]=![],_0x289caf=_0x5c7806;}_0x1a15d8&&_0x41de22[_0x266e8c(-0x98,-0x18d,-0x14a,-0x10a)](_0x1a15d8,_0x41de22[_0x16eea1(0x8c,0x2a,0xbf,0x13a)]);try{if(_0x41de22[_0x266e8c(-0x106,-0x11c,-0x13d,-0x158)](_0x41de22['hfZml'],_0x41de22[_0x16eea1(0xcb,0x133,0xb2,-0x1c)])){if(!_0x1bd9a6||!_0x41de22[_0x266e8c(-0x86,-0x47,-0xde,-0xdd)](_0x9d4dad,_0x440f15[_0x266e8c(-0x154,-0x18d,-0xdc,-0x8b)+'ds'],_0x38af66))return;}else{const _0x4fa3e1=await _0x41de22[_0x16eea1(0x12a,0x1e3,0x14c,0x12e)](fetch,_0x40b4bc,{'method':_0x41de22[_0x16eea1(0x11f,0x1e7,0x12d,0x130)],'headers':_0x24aa4f,'body':JSON[_0x266e8c(-0x78,-0x96,-0x106,-0x1d3)](_0x289caf),'signal':_0x2107f3}),_0x13dc5c=await _0x4fa3e1[_0x16eea1(0xdf,-0x13,0x35,0xe3)]();if(_0x13dc5c[_0x16eea1(0xba,0xe7,0xc0,0x37)]){let _0x10ebef;if(_0x41de22[_0x16eea1(-0x94,0x15,-0x25,0x21)](typeof _0x13dc5c[_0x266e8c(-0x204,-0x208,-0x16a,-0xb3)],'object')&&_0x13dc5c[_0x16eea1(-0x2,0xc,0xc0,-0x9)][_0x16eea1(0xa3,0xfa,0x6b,0xb0)]){_0x10ebef=''+_0x13dc5c[_0x16eea1(0x12a,0x126,0xc0,0x16c)]['message'];const _0x2a0d33=[];if(_0x13dc5c[_0x16eea1(0x6e,0xcc,0xc0,0x67)][_0x266e8c(-0xeb,-0xff,-0x151,-0x161)])_0x2a0d33[_0x266e8c(-0x17b,-0xfe,-0x187,-0x221)](_0x16eea1(-0x9f,0xbb,0x1e,0x2)+_0x13dc5c[_0x266e8c(-0xac,-0xa9,-0x16a,-0x1b7)]['type']);if(_0x13dc5c[_0x266e8c(-0x1e0,-0x1a1,-0x16a,-0x1ca)][_0x266e8c(-0x1e9,-0x235,-0x241,-0x2bc)])_0x2a0d33[_0x266e8c(-0xeb,-0x218,-0x187,-0x11e)](_0x16eea1(-0x2c,-0x4c,0x88,-0x46)+_0x13dc5c['error']['code']);if(_0x41de22[_0x16eea1(0x16c,0x6,0xb6,0x178)](_0x2a0d33['length'],-0x1e55*0x1+0x5c9+0xc46*0x2)){if(_0x41de22[_0x16eea1(0xcc,0x80,0x56,0x9b)]===_0x41de22[_0x16eea1(0x27,-0x5,0x56,0xea)])_0x10ebef+='\x20('+_0x2a0d33[_0x16eea1(0xd7,0xef,0xf7,0x19a)](',\x20')+')';else{const _0x43befe=_0x4078ca[_0x1e02f7]['llm_profil'+'es']||{},_0x3e52d4=_0x108995[_0x55fa29][_0x266e8c(-0x1b8,-0x20b,-0x1dd,-0x1d2)+_0x16eea1(0x16b,0x19f,0x12e,0x109)];return _0x43befe[_0x3e52d4]||_0x43befe[_0x54fdf0[_0x266e8c(-0x167,-0xbd,-0x161,-0x138)](_0x43befe)[0x2e9*0x7+0x4b*-0x80+-0x5*-0x36d]]||{};}}}else _0x266e8c(-0x1ba,-0x63,-0xf0,-0xb5)!=='GjEdU'?_0x432552['warning'](_0x266e8c(-0x1bb,-0x13e,-0x176,-0x20b)+'，可能是请求被截断、'+_0x16eea1(0x183,0x130,0xf6,0xb3)+_0x16eea1(-0x8c,-0x36,-0x1d,0x9e)+_0x266e8c(-0x18e,-0x2b9,-0x24c,-0x18f)):_0x10ebef=''+JSON[_0x266e8c(-0xc0,-0x89,-0x106,-0x75)](_0x13dc5c[_0x16eea1(0xde,0x6f,0xc0,0xcc)]);throw new Error(_0x10ebef);}if(!_0x4fa3e1['ok']){if('IjItM'!==_0x41de22[_0x16eea1(0x1b,-0x60,0x42,-0x18)])throw new Error(_0x16eea1(0xa3,-0x81,0x18,0xb9)+_0x4fa3e1[_0x16eea1(-0x81,0x83,-0x21,-0xe2)]+'\x20'+_0x4fa3e1[_0x266e8c(-0x7c,-0xce,-0xf5,-0x11b)]);else _0x4a038f+='\x20('+_0x3fc5a3['join'](',\x20')+')';}const _0x2f88f3=_0x13dc5c[_0x266e8c(-0x5c,-0xd6,-0x114,-0xc5)]?.[0x1bc8+-0x14f7+0x6d1*-0x1]?.['message']?.[_0x266e8c(-0x169,-0x133,-0x1a0,-0x15f)]||'';!_0x2f88f3&&toastr[_0x266e8c(-0x142,-0x260,-0x198,-0x153)](_0x41de22[_0x266e8c(-0x114,-0x19b,-0xd2,-0x58)]);_0x1a15d8&&_0x1a15d8(_0x2f88f3);_0x41de22['OMyWK'](addLog,_0x16eea1(0x1ea,0xae,0x13f,0x1ab)+_0x266e8c(-0x93,-0x1a4,-0xf3,-0xd0)),addLog(_0x2f88f3),_0x41de22[_0x16eea1(0x167,0xde,0xae,-0xa)](addLog,_0x16eea1(-0x17,0xa3,0x95,0x68)+_0x16eea1(0x20,-0x83,0x2a,-0x9f)),taskQueue[_0x16eea1(0xcf,0x1ac,0x165,0x1e9)+'sk'](_0x52978a,!![]),llmTaskControllers['delete'](_0x52978a);const _0x5026d4={};_0x5026d4[_0x16eea1(0xce,0x14d,0x16f,0xc1)]=!![],_0x5026d4[_0x266e8c(-0x246,-0x2a1,-0x1e1,-0x17d)]=_0x2f88f3,_0x5026d4['id']=_0xe67609,eventSource['emit'](eventNames[_0x16eea1(0xf3,0xe3,0x10f,0x147)+_0x266e8c(-0xaa,-0xf8,-0xe3,-0xe5)],_0x5026d4);}}catch(_0x598fb6){if(_0x41de22['PhRYn'](_0x41de22[_0x266e8c(-0xfd,-0x8d,-0xb5,0xc)],_0x41de22[_0x16eea1(0x112,0x19a,0x175,0x20e)])){if(_0x598fb6[_0x266e8c(-0x20b,-0x264,-0x233,-0x1eb)]===_0x41de22['kwPMD']){const _0x53deff=_0x41de22[_0x16eea1(0xb8,0x50,0xde,0xf3)][_0x16eea1(-0x60,-0x62,0x1c,0x6a)]('|');let _0x850f6d=-0x1*0xddb+-0x473*0x3+-0x6cd*-0x4;while(!![]){switch(_0x53deff[_0x850f6d++]){case'0':_0x2500bb=!![];continue;case'1':const _0x37f8a8={};_0x37f8a8[_0x16eea1(0x76,0x70,-0x9,-0x60)]=_0x41de22[_0x266e8c(-0x9c,-0xd9,-0xab,0x15)],_0x37f8a8[_0x16eea1(0x27,-0xb,0x6b,0x137)]=_0x41de22[_0x266e8c(-0x129,-0x108,-0x147,-0x109)];const _0x49a203={};_0x49a203['success']=![],_0x49a203[_0x16eea1(0x27,0x1,0x49,-0x40)]=null,_0x49a203['id']=_0xe67609,_0x49a203['error']=_0x37f8a8,eventSource[_0x16eea1(-0xad,0x5a,-0x3,-0xb7)](eventNames[_0x16eea1(0xa9,0x40,0x10f,0x12b)+'E_RESPONSE'],_0x49a203);continue;case'2':llmTaskControllers['delete'](_0x52978a);continue;case'3':console['log'](_0x41de22[_0x16eea1(0x1df,0x1c2,0x161,0x187)]);continue;case'4':taskQueue['updateStat'+'us'](_0x52978a,TaskStatus[_0x266e8c(-0xc4,0xc,-0xaa,0x2a)]);continue;case'5':return;}break;}}console[_0x266e8c(-0x10a,-0x189,-0x16a,-0x1f9)](_0x41de22['muvJS'],_0x598fb6);const _0x2769f0=_0x16eea1(0x3c,0x161,0x102,0x179)+_0x598fb6['message'];_0x1a15d8&&_0x41de22[_0x266e8c(-0x18e,-0x1ef,-0x169,-0xf0)](_0x1a15d8,_0x2769f0);toastr[_0x16eea1(0xd1,0x192,0xc0,0xc7)](_0x598fb6[_0x16eea1(0xd2,0xf2,0x6b,0x128)]),taskQueue[_0x266e8c(-0x13d,-0xaa,-0xc5,-0x13)+'sk'](_0x52978a,![]),llmTaskControllers[_0x266e8c(-0x68,-0x6b,-0x12f,-0x10c)](_0x52978a);const _0x4a32ad={};_0x4a32ad['success']=![],_0x4a32ad[_0x266e8c(-0x1ff,-0x269,-0x1e1,-0x1ab)]=_0x2769f0,_0x4a32ad['id']=_0xe67609,eventSource[_0x16eea1(-0x3,-0x6c,-0x3,0x2d)](eventNames[_0x16eea1(0x168,0x11d,0x10f,0xe6)+'E_RESPONSE'],_0x4a32ad);}else _0x5d0db9['entries'][_0x266e8c(-0x262,-0x1b0,-0x244,-0x237)](_0x5ee1da=>{function _0x9a62c5(_0x52dd08,_0x50c0fe,_0x4f57d6,_0x357a03){return _0x266e8c(_0x52dd08,_0x50c0fe-0x18,_0x4f57d6-0x62b,_0x357a03-0x17f);}if(!_0x5ee1da[_0x3bba42(0x32b,0x33a,0x38e,0x373)])return;if(!_0x5ee1da[_0x3bba42(0x3a4,0x318,0x337,0x319)]||_0x41de22['INZQi'](_0x5ee1da['content']['trim'](),''))return;if(_0x41de22[_0x9a62c5(0x416,0x3ee,0x3dc,0x39c)](_0x5ee1da['triggerMod'+'e'],_0x41de22['bibZX'])){if(!_0x57ec7e||!_0x8f08c8(_0x5ee1da[_0x3bba42(0x3ed,0x366,0x399,0x3dd)+'ds'],_0x22f1d9))return;}const _0x1079b5={};_0x1079b5['role']=_0x5ee1da[_0x3bba42(0x2ee,0x327,0x2b8,0x35b)]||_0x9a62c5(0x525,0x54e,0x56e,0x561),_0x1079b5[_0x9a62c5(0x4b2,0x4e9,0x48b,0x519)]=_0x5ee1da[_0x3bba42(0x3b4,0x359,0x34f,0x319)];function _0x3bba42(_0x5a6494,_0x376e66,_0x257829,_0x17c3b8){return _0x266e8c(_0x376e66,_0x376e66-0x41,_0x17c3b8-0x4b9,_0x17c3b8-0xd5);}_0x17bccb['push'](_0x1079b5);});}finally{if(currentLLMRequestController===_0x4dcbff){if(_0x41de22[_0x266e8c(-0x27c,-0x16b,-0x1e9,-0x169)](_0x266e8c(-0x9b,-0x198,-0xce,-0xc5),_0x41de22[_0x16eea1(0x80,0x172,0x133,0x71)])){const _0x4d4a25=_0x393d79[_0x16eea1(0xf4,0x63,0xb0,0x37)](_0x118767,arguments);return _0x313ee0=null,_0x4d4a25;}else currentLLMRequestController=null;}(!_0x2500bb||currentLLMRequestController===null)&&(_0x41de22[_0x266e8c(-0x210,-0x264,-0x1b1,-0x26f)](_0x41de22[_0x16eea1(0x104,0x200,0x177,0x186)],_0x41de22['jnDPz'])?_0x41de22['QnVAW'](stopFabLoading):_0x3ad6b8(_0xbaea99));}}export function createGetPromptHandler(_0x1a7018,_0x1755eb){function _0xc84545(_0x158544,_0x1a1027,_0x5a405f,_0x379d34){return _0x1af184(_0x158544-0x1c7,_0x5a405f,_0x5a405f-0x1,_0x1a1027-0x47);}const _0x374a79={'qXLkw':_0xad82d8(0x309,0x309,0x255,0x1fb),'abPUl':_0xc84545(0x411,0x3b6,0x3bc,0x446),'SVwgY':function(_0x2e8dd3,_0x346a90){return _0x2e8dd3(_0x346a90);}};function _0xad82d8(_0x57d6df,_0x3cb462,_0x22c21f,_0x13bc40){return _0x3fdeda(_0x3cb462,_0x22c21f-0x18f,_0x22c21f-0x183,_0x13bc40-0x157);}return function(_0x53fc9d){const _0x1ea5bc={};function _0x511ac4(_0x3ef5cf,_0x2b0048,_0x461ae8,_0x5a2ba1){return _0xad82d8(_0x3ef5cf-0x21,_0x2b0048,_0x5a2ba1- -0x1cb,_0x5a2ba1-0x124);}function _0x196e7f(_0x371bb6,_0x34fcd2,_0x551ecc,_0x257ba1){return _0xad82d8(_0x371bb6-0x105,_0x371bb6,_0x34fcd2-0x410,_0x257ba1-0x99);}_0x1ea5bc['szcZU']=_0x374a79['qXLkw'];const _0x2f5d40=_0x1ea5bc;if(_0x374a79['abPUl']==='TGLyh'){const {id:_0x5358b1}=_0x53fc9d;if(!_0x5358b1)return;const _0x43ab6b=REQUEST_TYPE_NAMES[_0x1a7018]||_0x1a7018;console[_0x511ac4(0xfc,0x1b8,0xfe,0x115)](_0x511ac4(-0xb3,0x21,-0xda,-0x86)+'\x20收到'+_0x43ab6b+(_0x511ac4(-0x50,0x8c,-0x4c,-0x5)+'D:\x20')+_0x5358b1+')');const _0x4eaed5=_0x374a79[_0x196e7f(0x637,0x604,0x5f2,0x6cb)](buildPromptForRequestType,_0x1a7018),_0x4afd7e={};_0x4afd7e[_0x196e7f(0x6be,0x69f,0x60c,0x6df)]=_0x4eaed5,_0x4afd7e['id']=_0x5358b1,eventSource[_0x511ac4(0x4c,-0x9f,0x5f,-0x6b)](_0x1755eb,_0x4afd7e);}else _0x56db14[_0x511ac4(0x17c,0xdd,0x16e,0xc8)](),_0x1066ca[_0x196e7f(0x4f1,0x561,0x615,0x4d9)](_0x2f5d40['szcZU']);};}export function createExecuteHandler(_0xf22730,_0x4bcb8a,_0x40c9dd=null){const _0x7e395f={'cSjTt':'PWRtX','DfoFo':_0x3daa8b(0x500,0x45e,0x4e5,0x524),'IBqOf':function(_0xde57e0){return _0xde57e0();},'hEkRg':function(_0x1196dd,_0x1c845b,_0x544a6e,_0x409f17,_0x3782f8){return _0x1196dd(_0x1c845b,_0x544a6e,_0x409f17,_0x3782f8);}};function _0x3daa8b(_0x2b37b3,_0x4b6ba5,_0x5e18ef,_0x44debd){return _0x3fdeda(_0x44debd,_0x5e18ef-0x51f,_0x5e18ef-0xc7,_0x44debd-0x14c);}return async function(_0x50a234){function _0x1c2534(_0x122c32,_0x4ffeb2,_0x3f78ff,_0x1bd270){return _0x3daa8b(_0x122c32-0xc6,_0x4ffeb2-0x1cb,_0x3f78ff- -0xcb,_0x122c32);}function _0x5cad26(_0x31844f,_0x24e50f,_0x2d06e2,_0x5a2358){return _0x3daa8b(_0x31844f-0x90,_0x24e50f-0x1dc,_0x24e50f- -0xa3,_0x2d06e2);}if(_0x7e395f[_0x5cad26(0x519,0x514,0x481,0x453)]!==_0x7e395f[_0x5cad26(0x4cd,0x44b,0x394,0x4fb)]){const _0x3d839c=_0x40c9dd?_0x7e395f['IBqOf'](_0x40c9dd):null;await _0x7e395f[_0x5cad26(0x3e7,0x49f,0x4e9,0x54a)](executeTypedLLMRequest,_0x50a234,_0xf22730,_0x4bcb8a,_0x3d839c);}else _0x4b5c31=null;};}