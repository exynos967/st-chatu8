function _0x460c88(_0x33ea61,_0x1f8c51,_0x2a16eb,_0x253252){return _0x1725(_0x33ea61- -0x1af,_0x253252);}(function(_0x1ffae7,_0x3d7d2d){function _0xc069cd(_0x48f354,_0x3462e5,_0x4fb61a,_0x462b0f){return _0x1725(_0x48f354-0x35c,_0x3462e5);}function _0x11d89c(_0xb0fbee,_0x559af1,_0x47577b,_0x392d06){return _0x1725(_0x392d06- -0x3cc,_0x559af1);}const _0x45268c=_0x1ffae7();while(!![]){try{const _0x147e90=parseInt(_0xc069cd(0x49d,0x48e,0x4bd,0x478))/(-0x14*0x199+-0xc5e+0x2c53)+parseInt(_0xc069cd(0x4ff,0x4ac,0x49b,0x4db))/(-0x7*0x27f+-0x1014+-0x79*-0x47)+-parseInt(_0xc069cd(0x46f,0x437,0x487,0x500))/(0x1*-0x445+0x1ba1+-0x2b*0x8b)+-parseInt(_0x11d89c(-0x165,-0x1a2,-0x1bc,-0x18e))/(-0x1914+-0x71f*0x1+0x2037)+parseInt(_0x11d89c(-0x1e7,-0x242,-0x18a,-0x22d))/(0xeb0+-0x41e+-0xa8d)+-parseInt(_0xc069cd(0x581,0x5c8,0x5d3,0x598))/(0x6f*-0x19+-0x79b+0x1278)+-parseInt(_0xc069cd(0x52f,0x580,0x4da,0x587))/(0x3*0x1e5+0x7f*0x26+-0x1882);if(_0x147e90===_0x3d7d2d)break;else _0x45268c['push'](_0x45268c['shift']());}catch(_0x4fd436){_0x45268c['push'](_0x45268c['shift']());}}}(_0x3a86,0x7e*-0x853+0x9dfd2+0x160be));const _0x2c661f=(function(){const _0x19598a={};_0x19598a[_0x92fbdb(0x206,0x268,0x20f,0x1d9)]=_0x92fbdb(0xfd,0x146,0x91,0x16d);function _0x59d553(_0x397e1a,_0x26797c,_0x1f0334,_0x401238){return _0x1725(_0x1f0334-0x250,_0x401238);}function _0x92fbdb(_0x3bf0c3,_0x58ab4b,_0x2c2926,_0x4ac3f5){return _0x1725(_0x3bf0c3- -0x30,_0x2c2926);}_0x19598a[_0x59d553(0x3ea,0x3bc,0x3bc,0x441)]='mcgPd';const _0x40f4a6=_0x19598a;let _0xb028e9=!![];return function(_0x21fcd5,_0x164a4d){function _0x16a4e9(_0x4b2d3c,_0x3e7514,_0x440478,_0x11ecf4){return _0x92fbdb(_0x440478- -0x2b,_0x3e7514-0x7f,_0x11ecf4,_0x11ecf4-0x111);}function _0x367059(_0x1a4bda,_0x585c99,_0x12fdbc,_0x6032ed){return _0x59d553(_0x1a4bda-0x2d,_0x585c99-0xca,_0x12fdbc- -0xf7,_0x1a4bda);}if(_0x367059(0x291,0x299,0x327,0x282)===_0x367059(0x322,0x364,0x327,0x31e)){const _0x40d835=_0xb028e9?function(){function _0x18d1fe(_0x5537b4,_0x18e95b,_0x192a26,_0x48f0f6){return _0x367059(_0x48f0f6,_0x18e95b-0x17e,_0x18e95b-0xd2,_0x48f0f6-0xb3);}function _0x312b12(_0x56a301,_0xc01788,_0x1e4d7b,_0x5d9131){return _0x367059(_0x56a301,_0xc01788-0x10b,_0xc01788- -0x23c,_0x5d9131-0x199);}if(_0x164a4d){if(_0x40f4a6[_0x18d1fe(0x4e0,0x461,0x3ce,0x3cd)]!==_0x40f4a6['RJBxt']){const _0x2f6935=_0x164a4d[_0x312b12(0x5a,0xfd,0xe8,0x9f)](_0x21fcd5,arguments);return _0x164a4d=null,_0x2f6935;}else _0x40b387[_0x312b12(0x99,0x2a,0x95,0x7e)](_0x581edd);}}:function(){};return _0xb028e9=![],_0x40d835;}else{const _0x334886=_0x406ba3[_0x16a4e9(0x13f,0xa0,0xeb,0xa2)](_0x4fbd34);_0x334886&&(_0x334886[_0x367059(0x2be,0x31a,0x318,0x2aa)](),_0x228498[_0x16a4e9(0x16c,0xa4,0x119,0x94)](_0x4573f2),_0x3a659c['log'](_0x16a4e9(0x1cb,0x155,0x1ae,0x183)+_0x367059(0x216,0x331,0x2a6,0x219)+_0x1efaa3));}};}()),_0x196803=_0x2c661f(this,function(){const _0x589f58={};function _0x345ede(_0x27dc53,_0x535b79,_0x51b926,_0x19f6db){return _0x1725(_0x51b926-0x246,_0x19f6db);}_0x589f58[_0x49dd3c(-0x1e,0xe,-0x45,-0x72)]='(((.+)+)+)'+'+$';const _0x43dcb7=_0x589f58;function _0x49dd3c(_0x24f913,_0x5484f9,_0x3bdb9f,_0x4f02d9){return _0x1725(_0x3bdb9f- -0x24c,_0x24f913);}return _0x196803[_0x49dd3c(-0x17,0x4,-0x5a,-0xca)]()[_0x345ede(0x303,0x30f,0x36b,0x3be)](_0x43dcb7[_0x49dd3c(-0x80,0x56,-0x45,0x49)])[_0x345ede(0x3ee,0x4d8,0x438,0x3e5)]()[_0x345ede(0x447,0x3ad,0x406,0x3dd)+'r'](_0x196803)['search'](_0x49dd3c(-0x1d5,-0x147,-0x131,-0x11c)+'+$');});_0x196803();function _0x1725(_0xd76bbd,_0x5e1d5c){_0xd76bbd=_0xd76bbd-(-0x2*-0xd81+-0x216c+-0x2d*-0x2a);const _0x46c2d7=_0x3a86();let _0x53a047=_0x46c2d7[_0xd76bbd];if(_0x1725['Djrkll']===undefined){var _0x3040a0=function(_0x248154){const _0x3da263='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x31a884='',_0x1bf564='',_0x21f3cc=_0x31a884+_0x3040a0;for(let _0x21c382=0x1532+-0x22*-0x16+-0x181e,_0x37abe9,_0x58eb0e,_0x25770d=0x25ad+0x2213+-0x47c0;_0x58eb0e=_0x248154['charAt'](_0x25770d++);~_0x58eb0e&&(_0x37abe9=_0x21c382%(0x1ab*-0x7+0x13e8+0x2bd*-0x3)?_0x37abe9*(0x270e+-0x1*-0x1bc6+-0x4294)+_0x58eb0e:_0x58eb0e,_0x21c382++%(-0x1*0x1c81+0x1*-0x1de3+-0xc*-0x4de))?_0x31a884+=_0x21f3cc['charCodeAt'](_0x25770d+(0xad*0x35+-0x4*0x31c+-0x19*0xef))-(-0x1ad0+-0x35d+0x1e37)!==-0x868+0x2*-0x42a+0x10bc?String['fromCharCode'](-0x1234+0x18c9+-0x596&_0x37abe9>>(-(0xdb5+0x1a43+0x9b*-0x42)*_0x21c382&-0x2*0x565+-0xb*-0x19f+-0x705)):_0x21c382:0x330+-0xbd*0x11+0x1*0x95d){_0x58eb0e=_0x3da263['indexOf'](_0x58eb0e);}for(let _0x27a673=0x1594+0x1363+-0x28f7*0x1,_0x25c508=_0x31a884['length'];_0x27a673<_0x25c508;_0x27a673++){_0x1bf564+='%'+('00'+_0x31a884['charCodeAt'](_0x27a673)['toString'](-0x1baf+0x6f*0x1+0x1b50))['slice'](-(0x9d*-0x3f+0x2e3+0x23c2));}return decodeURIComponent(_0x1bf564);};_0x1725['IfVxVz']=_0x3040a0,_0x1725['BXvaSU']={},_0x1725['Djrkll']=!![];}const _0x57af6c=_0x46c2d7[-0xc00+0x1123*-0x2+0x2e46],_0x54eb95=_0xd76bbd+_0x57af6c,_0x301b0f=_0x1725['BXvaSU'][_0x54eb95];if(!_0x301b0f){const _0x4c7357=function(_0x98287f){this['PBsPgN']=_0x98287f,this['HClVYy']=[-0x7*-0x434+0x10*-0x56+-0x4cf*0x5,0xa65+0x1aa2+-0x2507,-0x57*-0x40+-0x273+-0x134d],this['McVamv']=function(){return'newState';},this['DKBwYI']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['YEQHPK']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4c7357['prototype']['tlNlQq']=function(){const _0x4badb7=new RegExp(this['DKBwYI']+this['YEQHPK']),_0x22b849=_0x4badb7['test'](this['McVamv']['toString']())?--this['HClVYy'][0x1*0x1d41+-0x13f7+-0x949]:--this['HClVYy'][-0x1d37+0xc47+0x10f0];return this['NqvKRd'](_0x22b849);},_0x4c7357['prototype']['NqvKRd']=function(_0x1be181){if(!Boolean(~_0x1be181))return _0x1be181;return this['hluwdt'](this['PBsPgN']);},_0x4c7357['prototype']['hluwdt']=function(_0x59d145){for(let _0x33cdab=0x26d6+-0x2646+-0x90,_0x4f387e=this['HClVYy']['length'];_0x33cdab<_0x4f387e;_0x33cdab++){this['HClVYy']['push'](Math['round'](Math['random']())),_0x4f387e=this['HClVYy']['length'];}return _0x59d145(this['HClVYy'][0x955+-0x24a8+0x1b53]);},new _0x4c7357(_0x1725)['tlNlQq'](),_0x53a047=_0x1725['IfVxVz'](_0x53a047),_0x1725['BXvaSU'][_0x54eb95]=_0x53a047;}else _0x53a047=_0x301b0f;return _0x53a047;}import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';function _0x3a86(){const _0x3c7310=['DhjHBNnSyxrPBW','BgXTx3jLCxvLCW','nZqZmZq4wNfxshrP','Aw5MBW','ELfmvfi','DMTeDLG','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','y29UDgvUDa','ioIVT+AXGUw3SUwUJoAiKo+8JowqJUE7REAtJq','uMvXDwvZDcbHyG','twjgALC','AxnbCNjHEq','ANjtB1a','AuPdt08','B2jQzwn0','uMfNwK4','z2zlww8','ter2uvi','vuvvy20','5Q2J5zYO5Ase55cgia','v1b1rMG','Bw9KzwW','Bwf0y2G','B0rtCNa','6k+35Rgc5AsX6lsLoIa','y2HSExa','DhjPz2DLCLDVCG','uNz5wfq','ywjsBvm','we5Tyu4','ywjVCNq','y29UC3rYDwn0BW','DhjPz2DLCG','q2fAwMC','tvLru1K','vMX4v3K','BMrZl2nOyxqTyW','u3HIz2u','l2fWAs9IywnRzq','BgXTvgvZDe1Vza','A2v5CW','BgXTx3bYB2zPBa','sKHgu0y','v1jmBMK','DfvAt2q','Dgnvy20','CMvWzwf0','6k+35RgcieLeoIa','BwvZC2fNzq','yxLOtfa','mtaWnZq2mwDly1jHwG','vxnwt1O','DxbKyxrLu3rHDa','yMjTv2K','CezutgC','ChjVBxb0','zw1PDa','DhjPz2DLCK1Vza','wunbEvm','DhLWzq','t1Hlt3K','v0zfEfi','AxLjBNu','yxbWBhK','B3zkzfC','sg91tKC','5AEl5PAW6k+35Rgc44cc','teXniev4zwn1Da','AgXpBuG','6kEs6iMYl+ACJEIJHEs/RUAuUq','EvfuDhG','B2zPBgu','ChvdBuq','vxHQtLi','ueHYyui','5l2C5BEY6lEZ6l+h44cc','C3rFy2HHDhu4xW','DgvTCgvYyxr1CG','BgLcAMS','Evbduvq','rwT5DuO','Dg9tDhjPBMC','ioAuTUwiSa','z1DHuhK','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','BwvZC2fNzxm','zhrfDLG','C3rHDhvZvgv4Da','q1DSBKq','yxnZAxn0yw50','rNrgzuO','qMnvuNK','qwPdruS','zM9YrwfJAa','x3rHC2S','zw50CMLLCW','yM9KEq','C3rYzwfT','C3rYAw5NAwz5','wvfHu0u','AgLZDg9YEq','Df90ExbLx2nVBG','rNfSDKe','EfHgy0K','w0Xmtv0G5lU75yQH5BEY5y+w','m3WXFdb8mNW0','Dg9VBa','BgvUz3rO','zuvJENa','teXnoIdLPjBPG6JOR7FMSyi','zgf0ytO','y3vYCMvUDf9SBa','57g75z6loIa','6k+35Rgc5A6m5OIqid09pt09','D2LOELi','CMLPCxa','CM9Szq','Dfj3re0','5y+r6ycb55QeifbYB21WDa','ExfbBwW','EhrFChjVzMLSzq','zxjYB3i','qKnzzeW','DhjPBq','Aw1Hz2vFDxjS','zsbfCNjVCJO','5OIwie1VzgvSioACQUMfJq','C3rHDhvZ','5lUJ56cboG','teXn','5yE95PwW6lcd55sO','wMTQtxa','nZiZntG4Awnzv1vi','vKfeDvO','v29it1C','zgvSDge','yxbPx3bYB2zPBa','rdOG','ru9SqKW','l2DLBMvYyxrL','Bu9WEKG','DgvZDf9JB250zq','Aw5JBhvKzxm','ELrHv3e','C3bSAxq','C2LNBMfS','6BUy6k6K6k+35Rgc5BYa5AElid09pq','teXnioIVT+AXGUw3SUs4REATOUoaGG','D05tBxq','wMTSuNm','DxfHEgK','shbqvKq','zMLNCW','oIbmte0G5PYQ5Ps25yIW5PYj','y29Kzq','DxjS','Bxj6uNa','mtu5otmZmNrcDKrnBa','CgfYC2u','oIbbueKGvvjmla','y29UDgv4Da','CMvZDwX0','vxnZBhi','vxrjyMu','uxHZAK0','qxv0Ag9YAxPHDa','Ae1Nyw0','Dw5RBM93BG','Bg9N','DgvZDe1Vzgu','vvnJuKm','q2Pwv2C','BNLsufC','iowBNUwKJsaTls0Tlq','B3j0zwq','BMfTzq','uLvotKLorW','Aw1Hz2vFz2vU','teXnigv4zwn1Da','ANnVBG','EhrMvLC','cI0Tls0TieXmtq','D2fYBMLUzW','ChvZAa','zgf0ytOGw0rptG','qMLpwfq','Dg9Wx3a','AKPNAxK','z1zWEgu','odK0ntC5Cw5OshjV','ALrXwKS','pt09pt0GteXnia','DNLctNO','EufzAxe','C3rHCNrZv2L0Aa','44cq5Rwl6k+v5QIH5BYp44cr','C2D6DLm','kcGOlISPkYKRkq','rfz2ExK','CMvWBgfJzq','Bwf4x3rVA2vUCW','C3qTy2HHDhu4oG','y2HVAwnLCW','yxbPx2TLEq','wNLjr1G','teXnioACQUAuTUwiSoACIEAvIowBNG','EK1Sr0u','C2vHCMnO','rv9srvnqt05trq','C2XPy2u','6k+35Rgc6zsz6k+VoIa','qM9Hrxu','yvzus0O','y3vZDg9Tx3vYBa','iefqssblzxKSia','DxjkDey','qvbjifvstcWGqq','zgf0ytOG','qKfvD2W','zxrPB25FC291CG','A1D6q1q','y1jTuxe','y3vZDg9T','mxWZFdb8mNW0','BNLprfO','Bxbru28','CMvHza','EKzMA3i','u21nr3u','ywrKvgfZAW','y2HHCL9KzxnPzW','y3b0zeS','CKr5uNq','EvfLEuq','ue9tva','mZK2mdiWAuDhy2Tg','y29UDgv4Df9WCG','yNvMzMvYktO','yu5ctKG','BhvKzv9OzwfKzq','z2v0','5Pwi5zUE5Asn44cc','zgvJB2rL','r3jPq2W','whLgtei','57g75z6loG','wNjxtMq','5RAioIa','D2fYBG','y29TCgXLDgvuyq','veDIAKm','zsbYzxf1zxn0ia','DMPUwNa','sfPKwuy','tNPPz0C','CNPoAMK','6kEs6iMYl+ACJEIJHEIUVUIUOq','8j+tTYbB5zU+54Mh6zo+5O6LoIa','rxrZvhK','C3LZDgvT','BxjMuLa','C1LxBgu','yxbPx3vYBa','C3rFy29UDgv4Da','y1D3q3O','ksa9pt09pq','DxrMltG','rKrhtuG','wgDLrLm','CfbhDuW','Dgv4Da','Duftyvq','5lUJ56cboIa','C3vprxq','tfrsyK8','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','EKHiCeO','DxnLCG','uKPcEhq','y2HHCL9KAxnWBa','yM5YuNy','swzlBKy','ywjVCNrLzc4','Bv9WCM9MAwXL','C2v0','AM9PBG','zgvSzxrL','BffxBw4','ueKGs2v5lcdMIjyG','C3vJy2vZCW','DfHPr2m','z0DgAg8','Ewr4qvO','ievYCM9YoG','teXnx0vyrunvva','5Rwl6k+v5QIH5BYp5O+q56s6','wgLJre8','sMj5Bgm','CNnYsxa','rxvgCwe','y2HHDf9JB21WBa','s0jD','D25VDfi','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','zNvUy3rPB24','zKHoB2K','56In5yczlI4U','5O+q56s66k+n6i635y+w6k+35RgcicHj','EvfLB3K','Dg9Rzw4','s2rQsuy','CM91BMq','ugLTAge','quNLIQNMIyS','x3bYB2zPBgu','CwT3whq','svrjB2C','A0XivhG','tw9KzwWG5PYQ6ywn572U44cc','DxbTz08','q0foq0vmteve','qwjVCNrfCNjVCG','C3rYAw5N','swHUrhq','lcdNUQyG','Bwj6zhO','Aw9UoIaIqMvHCG','B21WBgv0Aw9UCW','Bg9uzxK','mZmXodG1nu9uC3PcBq','6k+35Rgc5BYa5AElicG'];_0x3a86=function(){return _0x3c7310;};return _0x3a86();}import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on'](_0x371559(0x173,0xc8,0x11b,0x152)+'cancel_llm'+_0x371559(0x1af,0xe8,0x1a4,0x164),({taskId:_0x7dbc94})=>{const _0xe9e30f=llmTaskControllers['get'](_0x7dbc94);function _0x514f57(_0x4ea52c,_0x38f2a1,_0x121fe0,_0x398ff6){return _0x460c88(_0x4ea52c-0xc,_0x38f2a1-0x161,_0x121fe0-0xa3,_0x38f2a1);}function _0x41d23b(_0x106130,_0x1b990a,_0x16c699,_0x19f964){return _0x460c88(_0x16c699-0x5f,_0x1b990a-0x2,_0x16c699-0x169,_0x1b990a);}_0xe9e30f&&(_0xe9e30f['abort'](),llmTaskControllers[_0x514f57(-0x2f,0x52,0x34,-0x63)](_0x7dbc94),console['log'](_0x514f57(0x66,0x87,0xaf,0xee)+_0x41d23b(0x9e,-0x8c,-0x3,-0x30)+_0x7dbc94));});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x3aea5b){currentLLMRequestController=_0x3aea5b;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){const _0x41b45f={};function _0xd7e850(_0xb05e74,_0x15799a,_0x305d20,_0x330b78){return _0x460c88(_0x305d20-0x4f7,_0x15799a-0xce,_0x305d20-0x53,_0x15799a);}_0x41b45f['BCYdL']=_0xd7e850(0x574,0x51d,0x52f,0x5b3),_0x41b45f[_0xd7e850(0x459,0x4a9,0x485,0x434)]=_0xd7e850(0x553,0x58a,0x57c,0x4e1);function _0x4a9719(_0x55c4ba,_0x2a8ba4,_0x5cc7fc,_0x533062){return _0x371559(_0x55c4ba-0xf0,_0x2a8ba4-0x1bb,_0x2a8ba4,_0x533062-0x2c4);}const _0x1b1b85=_0x41b45f;if(currentLLMRequestController){if(_0x1b1b85[_0x4a9719(0x458,0x415,0x473,0x444)]===_0x1b1b85[_0x4a9719(0x408,0x4c3,0x4af,0x444)])currentLLMRequestController[_0xd7e850(0x570,0x4b4,0x507,0x480)](),toastr['info'](_0x1b1b85['cptdK']);else{if(_0x252c8f){const _0xafc6d3=_0x527107[_0x4a9719(0x3d2,0x481,0x391,0x409)](_0x56e010,arguments);return _0x22d355=null,_0xafc6d3;}}}}export function isLLMTestMode(){function _0x1a4c96(_0x465deb,_0x5f3026,_0x37c59a,_0x19f5c0){return _0x460c88(_0x465deb- -0x204,_0x5f3026-0x13,_0x37c59a-0x106,_0x5f3026);}return!!extension_settings[extensionName][_0x1a4c96(-0x1eb,-0x198,-0x177,-0x14e)+'e'];}export function formatPromptForDisplay(_0x28d319){const _0x537c9f={'zHHpJ':'XKPBd','mpQSo':function(_0x3b619a,_0x474355){return _0x3b619a===_0x474355;},'UScRC':_0xba2c4b(0x2cb,0x2af,0x264,0x2ed),'BWeSj':function(_0x180f67,_0x3d6847){return _0x180f67!==_0x3d6847;},'AjCEK':_0x2e4ff1(-0x19d,-0xed,-0xf1,-0x154),'LtrfV':_0xba2c4b(0x2bd,0x263,0x339,0x28a),'UsVOZ':_0xba2c4b(0x1ab,0x173,0x22d,0x1a3),'MfhJW':function(_0x49e088,_0x3c8021){return _0x49e088/_0x3c8021;},'GriCl':function(_0x2b9be0,_0x7c8f9e){return _0x2b9be0/_0x7c8f9e;},'NiaDO':'系统提示词','loTey':_0x2e4ff1(-0x132,-0x106,-0x1ad,-0x134),'ScHas':function(_0x4ca71e,_0x39f6bc){return _0x4ca71e(_0x39f6bc);},'zFfkr':function(_0x2ed1b7,_0x1214ee){return _0x2ed1b7!==_0x1214ee;},'yqAml':_0xba2c4b(0x2b2,0x263,0x299,0x23d),'vjnZp':_0xba2c4b(0x246,0x2cf,0x233,0x1d2),'TGbjC':_0x2e4ff1(-0x105,-0x1ab,-0x102,-0x114),'puCmD':function(_0x54d709,_0x3a9283){return _0x54d709!==_0x3a9283;},'iyInu':_0x2e4ff1(-0x175,-0x167,-0x111,-0xf1)};if(_0x537c9f[_0x2e4ff1(-0x225,-0x178,-0x201,-0x18c)](typeof _0x28d319,_0x537c9f[_0x2e4ff1(-0x177,-0xcf,-0x170,-0x171)]))return _0x28d319;if(Array[_0xba2c4b(0x25a,0x2e3,0x202,0x2d2)](_0x28d319)){const _0x51d87e=[];return _0x28d319[_0xba2c4b(0x2ac,0x20c,0x28e,0x26a)]((_0x2794f0,_0x5c61ac)=>{const _0x3857c2={};_0x3857c2[_0x349845(0x3f9,0x3d7,0x367,0x38d)]=_0x537c9f['NiaDO'],_0x3857c2['QxsjM']=_0x537c9f[_0x2b6fdf(-0x195,-0xf5,-0x19a,-0x146)];const _0x2a387d=_0x3857c2,_0x494aed=_0x2794f0[_0x349845(0x364,0x34a,0x425,0x3ae)]||_0x537c9f[_0x2b6fdf(-0x196,-0x12d,-0x164,-0xd7)];function _0x2b6fdf(_0x551ed9,_0x38a22a,_0x48762d,_0x3fe54c){return _0xba2c4b(_0x48762d- -0x3e6,_0x38a22a-0x56,_0x38a22a,_0x3fe54c-0x92);}const _0x445613=_0x537c9f['ScHas'](getRoleLabel,_0x494aed);_0x51d87e[_0x349845(0x26c,0x2bc,0x2c3,0x2a6)](''+'═'[_0x2b6fdf(-0xcd,-0x16e,-0x169,-0x121)](0x15da+0x10*-0x26+-0x1348)),_0x51d87e[_0x349845(0x2cb,0x2e6,0x25b,0x2a6)]('【'+_0x445613+'】');function _0x349845(_0x85efd6,_0x13599a,_0x1d7626,_0x2bbd42){return _0xba2c4b(_0x2bbd42-0xeb,_0x13599a-0x114,_0x1d7626,_0x2bbd42-0x12e);}_0x51d87e['push'](''+'─'[_0x349845(0x3aa,0x356,0x32a,0x368)](0x2*-0xcc8+0x357+0x166b));const _0xb59d73=_0x2794f0[_0x2b6fdf(-0x1e3,-0x112,-0x190,-0x1be)];if(typeof _0xb59d73===_0x2b6fdf(-0x183,-0x202,-0x1a0,-0x201))_0x51d87e['push'](_0xb59d73);else{if(Array[_0x2b6fdf(-0x147,-0x1e8,-0x18c,-0x1d1)](_0xb59d73)){if(_0x537c9f[_0x349845(0x2ae,0x2fd,0x342,0x2d2)](_0x537c9f['yqAml'],_0x537c9f[_0x349845(0x33c,0x36d,0x3a3,0x3b1)])){const _0x5538a9={'LDvQR':function(_0x2304c2,_0x2f1196){return _0x2304c2(_0x2f1196);}};return function(_0x501acc){function _0x15e61a(_0x254d49,_0x54d253,_0x346f11,_0x4fd717){return _0x349845(_0x254d49-0x153,_0x54d253-0x8c,_0x346f11,_0x254d49- -0x15b);}const {id:_0x3d8427}=_0x501acc;if(!_0x3d8427)return;const _0x58a499=_0x25af92[_0x1e37cd]||_0x24938b;function _0x106787(_0x92ea3d,_0x35ff0f,_0x28c14e,_0x1c883a){return _0x2b6fdf(_0x92ea3d-0x37,_0x28c14e,_0x35ff0f-0x21d,_0x1c883a-0x1ad);}_0x2d42ea['log'](_0x106787(-0x79,0x4,0x18,0x4)+'\x20收到'+_0x58a499+(_0x106787(0xed,0x6e,0xca,-0x21)+_0x106787(0xda,0x10f,0x8b,0x130))+_0x3d8427+')');const _0x2dc431=_0x5538a9[_0x106787(0xb6,0x97,0x87,0xf4)](_0x318cce,_0x281c46),_0x147dfb={};_0x147dfb['prompt']=_0x2dc431,_0x147dfb['id']=_0x3d8427,_0x2a65d6[_0x15e61a(0x217,0x194,0x17b,0x24e)](_0x135b83,_0x147dfb);};}else _0xb59d73[_0x2b6fdf(-0x101,-0xcc,-0x13a,-0x15b)](_0x1b1bea=>{function _0x56a9b7(_0x450c25,_0x5cdedd,_0x504fd2,_0x4e9b30){return _0x2b6fdf(_0x450c25-0x149,_0x4e9b30,_0x5cdedd-0x31e,_0x4e9b30-0x183);}function _0x237953(_0x5e713c,_0x121fd8,_0x4ec983,_0x43cd6e){return _0x2b6fdf(_0x5e713c-0x11e,_0x43cd6e,_0x121fd8-0x529,_0x43cd6e-0x50);}if(_0x537c9f[_0x56a9b7(0x189,0x150,0x159,0x1b4)]===_0x537c9f['zHHpJ']){if(_0x537c9f[_0x237953(0x2df,0x328,0x352,0x391)](_0x1b1bea['type'],_0x237953(0x31b,0x355,0x2d0,0x36f)))_0x51d87e['push'](_0x1b1bea[_0x237953(0x2f2,0x355,0x39c,0x2f5)]||'');else{if(_0x1b1bea[_0x237953(0x3b9,0x3cd,0x374,0x389)]===_0x537c9f[_0x237953(0x2e3,0x2f1,0x329,0x352)]){if(_0x537c9f['BWeSj'](_0x537c9f[_0x237953(0x3d3,0x3ee,0x42e,0x436)],_0x537c9f[_0x237953(0x3a6,0x3ee,0x432,0x487)])){const _0x14611a={};_0x14611a['system']=_0x2a387d['gWaPy'],_0x14611a[_0x237953(0x383,0x35c,0x2b7,0x30b)]='用户',_0x14611a[_0x56a9b7(0x24a,0x1e0,0x24c,0x209)]=_0x2a387d[_0x237953(0x36a,0x2eb,0x2bc,0x34b)],_0x14611a[_0x56a9b7(0x1fc,0x16c,0x144,0x126)]='函数调用',_0x14611a['tool']='工具';const _0x39d288=_0x14611a;return _0x39d288[_0x3da263]||_0x31a884;}else{const _0x54dc16=_0x1b1bea[_0x56a9b7(0x20f,0x203,0x225,0x260)]?.['url']||'';if(_0x54dc16['startsWith'](_0x537c9f['LtrfV'])){const _0x34f535=_0x54dc16['match'](/^data:([^;]+);/),_0x755ae6=_0x34f535?_0x34f535[0x3*-0x503+-0x2182+-0x1846*-0x2]:_0x537c9f['UsVOZ'],_0x6ae800=_0x54dc16[_0x237953(0x3bf,0x422,0x43e,0x39a)](',')[0xda0+0xe86*0x1+-0x28f*0xb]||'',_0x5eada1=Math[_0x56a9b7(0x1ab,0x173,0xea,0xd3)](_0x537c9f['MfhJW'](_0x537c9f[_0x237953(0x2d2,0x33a,0x303,0x3ad)](_0x6ae800[_0x56a9b7(0x28e,0x1f2,0x1b1,0x1ce)]*(0xa*-0xa9+-0x1db9+0x2456),-0x10*0xb5+-0xbb*-0x11+-0x117),0x11*-0x1a1+-0x1*0x115b+0x310c));_0x51d87e[_0x56a9b7(0x65,0xf3,0x164,0x187)](_0x56a9b7(0x216,0x1db,0x19b,0x1b8)+':\x20'+_0x755ae6+_0x56a9b7(0x224,0x180,0x14c,0x1da)+_0x5eada1+_0x237953(0x33d,0x374,0x2f8,0x414));}else _0x51d87e[_0x56a9b7(0x10e,0xf3,0xf8,0x199)](_0x56a9b7(0x12a,0x13d,0xbd,0x142)+_0x54dc16+']');}}}}else return _0x2f0fdf;});}}_0x51d87e[_0x2b6fdf(-0x2c8,-0x188,-0x22b,-0x1af)]('');}),_0x51d87e['join']('\x0a');}function _0x2e4ff1(_0x25c9d6,_0x5e140a,_0x51fe60,_0x1e9b7c){return _0x371559(_0x25c9d6-0x181,_0x5e140a-0xd3,_0x25c9d6,_0x1e9b7c- -0x228);}if(_0x537c9f[_0x2e4ff1(-0x163,-0x207,-0x1fe,-0x18c)](typeof _0x28d319,_0x537c9f[_0x2e4ff1(-0x211,-0x1fd,-0x106,-0x173)])&&_0x537c9f[_0x2e4ff1(-0x16a,-0xa1,-0x116,-0xda)](_0x28d319,null)){if(_0x537c9f[_0x2e4ff1(-0x111,-0x114,-0x1a7,-0x18c)](_0x537c9f[_0xba2c4b(0x28d,0x2d1,0x2f1,0x28b)],_0x537c9f[_0x2e4ff1(-0xab,-0x14e,-0xde,-0xe4)]))return JSON[_0x2e4ff1(-0x112,-0xd5,-0xa8,-0xc0)](_0x28d319,null,0x113b+0x21cb+-0x3304);else _0x236dd8+=_0x23053c,_0x2dd2c4&&_0x537c9f['ScHas'](_0x14ddd5,_0x5be864);}function _0xba2c4b(_0x4f245f,_0x4a843e,_0x140400,_0x2b4f95){return _0x460c88(_0x4f245f-0x25d,_0x4a843e-0x1e,_0x140400-0x157,_0x140400);}return _0x537c9f['ScHas'](String,_0x28d319);}export function getRoleLabel(_0x138d0f){const _0x50fd9f={};_0x50fd9f[_0x40d61d(0x190,0x132,0x1b0,0x1a0)]='系统提示词',_0x50fd9f[_0x40d61d(0x16b,0x112,0x19d,0x1d6)]=_0x21ff87(0x31e,0x430,0x390,0x341);function _0x21ff87(_0x3c569f,_0x17a620,_0xe86eac,_0x5bdceb){return _0x371559(_0x3c569f-0x170,_0x17a620-0x191,_0x17a620,_0xe86eac-0x29c);}_0x50fd9f[_0x40d61d(0x1c7,0x231,0x1bc,0x189)]=_0x40d61d(0x23a,0x20a,0x212,0x1c9);const _0x2e39d6=_0x50fd9f,_0x148468={};_0x148468[_0x40d61d(0x170,0x1fd,0x126,0x104)]=_0x2e39d6[_0x40d61d(0x190,0x205,0x1d7,0x1bb)],_0x148468[_0x21ff87(0x371,0x32f,0x36c,0x2d2)]='用户',_0x148468[_0x40d61d(0x211,0x26f,0x228,0x22e)]=_0x2e39d6['NzigG'],_0x148468['function']=_0x2e39d6['RagZN'];function _0x40d61d(_0x1e8acf,_0x17f8e3,_0x1d7d65,_0x5f4789){return _0x371559(_0x1e8acf-0xa7,_0x17f8e3-0x1eb,_0x17f8e3,_0x1e8acf-0xb2);}_0x148468[_0x21ff87(0x3a8,0x3b6,0x40c,0x45f)]='工具';const _0x4763c9=_0x148468;return _0x4763c9[_0x138d0f]||_0x138d0f;}export function getCurrentLLMProfile(){const _0x503047=extension_settings[extensionName][_0x2e5a8b(-0x12c,-0x13f,-0x1ad,-0x134)+'es']||{};function _0x2e5a8b(_0x5897d7,_0x5c31d6,_0x366f22,_0x42ee60){return _0x371559(_0x5897d7-0x23,_0x5c31d6-0x1a7,_0x42ee60,_0x5c31d6- -0x26e);}const _0x273dcf=extension_settings[extensionName][_0x2e5a8b(-0x6c,-0xf9,-0x13b,-0x18b)+_0x2e5a8b(-0x20d,-0x198,-0x1f4,-0x1f9)];function _0x2b7632(_0x4214a8,_0x5dc1ed,_0x2d5a3e,_0x59a3e8){return _0x460c88(_0x59a3e8- -0xbb,_0x5dc1ed-0xea,_0x2d5a3e-0xcf,_0x4214a8);}return _0x503047[_0x273dcf]||_0x503047[Object['keys'](_0x503047)[-0x1*0x180e+0x25*-0x23+-0x101*-0x1d]]||{};}export function getCurrentTestContext(){const _0x61ec1f=extension_settings[extensionName][_0x21ebd9(-0x12e,-0x111,-0xc1,-0xa7)+'xt_profile'+'s']||{},_0x4d061b=extension_settings[extensionName]['current_te'+_0x30222d(0x2,0x46,-0x3c,-0x2d)+_0x21ebd9(-0x10d,-0xf6,-0x15f,-0x1a2)];function _0x30222d(_0x541563,_0x31a011,_0x5be370,_0x2c6c4a){return _0x460c88(_0x31a011-0x98,_0x31a011-0x177,_0x5be370-0x21,_0x541563);}function _0x21ebd9(_0x510706,_0x4562c1,_0x17db2e,_0x5bf567){return _0x460c88(_0x17db2e- -0x140,_0x4562c1-0x8d,_0x17db2e-0x10,_0x4562c1);}return _0x61ec1f[_0x4d061b]||_0x61ec1f[Object['keys'](_0x61ec1f)[-0x11b8+0x2*-0x120e+0xd*0x424]]||{};}export function getEffectiveConfigForRequestType(_0x244cc0){const _0xdf00ce=extension_settings[extensionName][_0x2e46cd(-0x17b,-0xe4,-0x178,-0x203)+_0x2e46cd(-0x117,-0x10c,-0xb1,-0x7c)+_0x10f742(0x48a,0x50d,0x50e,0x556)]||{},_0x129510={};_0x129510['api_profil'+'e']='默认',_0x129510[_0x2e46cd(-0x1db,-0x27b,-0x1a0,-0x25e)+_0x2e46cd(-0x135,-0x11e,-0x8f,-0x16a)]='默认';const _0x262089=_0xdf00ce[_0x244cc0]||_0x129510,_0x14dd6e=extension_settings[extensionName][_0x10f742(0x4da,0x49e,0x4a5,0x530)+'es']||{},_0x2b979f=extension_settings[extensionName][_0x2e46cd(-0xef,-0x124,-0x18c,-0x8d)+_0x10f742(0x45e,0x4ed,0x44c,0x49c)+'s']||{},_0x1dd7d5=_0x262089['api_profil'+'e']||'默认',_0x576175=_0x14dd6e[_0x1dd7d5]||_0x14dd6e[Object[_0x2e46cd(-0x154,-0x140,-0x143,-0x1f4)](_0x14dd6e)[-0x5*0x33d+-0x1*0x4a+-0x1*-0x107b]]||{},_0x400f8a=_0x262089[_0x2e46cd(-0x1db,-0x1d8,-0x15b,-0x213)+_0x2e46cd(-0x135,-0x11c,-0x1d4,-0xdf)]||'默认',_0x130ddd=_0x2b979f[_0x400f8a]||_0x2b979f[Object[_0x10f742(0x4da,0x49d,0x45b,0x529)](_0x2b979f)[-0x1e60+-0x5f9*0x6+0x4236]]||{},_0x3ae646={};_0x3ae646[_0x2e46cd(-0x1c1,-0x217,-0x210,-0x163)]=_0x576175[_0x10f742(0x3df,0x430,0x3cd,0x423)]||'',_0x3ae646[_0x2e46cd(-0x1fc,-0x21b,-0x1de,-0x177)]=_0x576175['api_key']||'';function _0x10f742(_0x1ec0e2,_0x14b1db,_0x25f9c5,_0x4f66e1){return _0x371559(_0x1ec0e2-0xc6,_0x14b1db-0x172,_0x25f9c5,_0x14b1db-0x36f);}_0x3ae646[_0x10f742(0x48b,0x48a,0x40d,0x42a)]=_0x576175['model']||'',_0x3ae646[_0x2e46cd(-0x12f,-0x17d,-0xaf,-0xae)+'e']=_0x576175[_0x10f742(0x54c,0x4c2,0x4e1,0x442)+'e']??-0xf3*-0x6+-0xa*-0x384+-0x28da+0.7,_0x3ae646[_0x2e46cd(-0x20d,-0x20c,-0x1c6,-0x1e5)]=_0x576175[_0x10f742(0x46c,0x3e4,0x3d5,0x3e3)]??0x2136*0x1+-0x2a6+0x1e8f*-0x1,_0x3ae646[_0x2e46cd(-0x1ff,-0x297,-0x199,-0x19d)]=_0x576175[_0x2e46cd(-0x1ff,-0x24a,-0x195,-0x227)]??-0x26a7+0xa*-0x102+0x25*0x15f,_0x3ae646[_0x10f742(0x49f,0x4d6,0x520,0x450)]=_0x576175[_0x2e46cd(-0x11b,-0x1b0,-0x118,-0x134)]??![];function _0x2e46cd(_0x17fc99,_0xacf5f4,_0x336cc6,_0x1736d7){return _0x460c88(_0x17fc99- -0x16e,_0xacf5f4-0x14c,_0x336cc6-0x1ed,_0xacf5f4);}return _0x3ae646[_0x2e46cd(-0xdc,-0x9e,-0x48,-0xbd)]=_0x130ddd,_0x3ae646;}export function buildPromptForRequestType(_0x26fe2b,_0x521d6f=''){const _0x22574f={'UEUcm':function(_0x32ce71,_0x2792d9){return _0x32ce71===_0x2792d9;},'Yykyy':_0x564bbd(0x29f,0x251,0x2bc,0x250),'DQvKh':function(_0x3ab4ba,_0x1cdacb){return _0x3ab4ba>_0x1cdacb;},'zQLTR':function(_0x11e565,_0x288c34){return _0x11e565===_0x288c34;},'HpPVD':'CaZZg','MYQSY':_0x564bbd(0x220,0x263,0x2fa,0x245),'gfKYo':function(_0x34c283,_0x38330f){return _0x34c283===_0x38330f;},'FtFeJ':_0x564bbd(0x1c6,0x233,0x2d3,0x1ff),'tXiGc':'aIiKU','SmMGu':_0x564bbd(0x1f2,0x20d,0x1ce,0x289),'tRwDM':_0x564bbd(0x224,0x1d7,0x1f8,0x1ac),'aVTKJ':function(_0xb86a7c,_0x244c4e){return _0xb86a7c!==_0x244c4e;},'wnotR':function(_0x4e346d,_0x4569ca){return _0x4e346d===_0x4569ca;},'sYWle':_0x4a088c(-0x1b6,-0x118,-0x13c,-0xdd),'KDuGG':_0x564bbd(0x33c,0x29c,0x2ac,0x20f),'adXtq':_0x4a088c(-0x21e,-0x1ae,-0x1c3,-0x264),'YCAyS':_0x4a088c(-0x220,-0x263,-0x1c8,-0x241),'ydxAZ':function(_0x1f5738,_0x511ec2){return _0x1f5738(_0x511ec2);}};function _0x564bbd(_0x960f70,_0x29c0e3,_0x4af96f,_0x201b5a){return _0x371559(_0x960f70-0x3b,_0x29c0e3-0x191,_0x4af96f,_0x29c0e3-0x13d);}const _0x41da20=extension_settings[extensionName][_0x4a088c(-0x1db,-0x15a,-0x189,-0x19c)+_0x564bbd(0x27c,0x2a8,0x2b6,0x2f3)+_0x564bbd(0x28c,0x2db,0x29f,0x353)]||{};function _0x4a088c(_0x26ddd5,_0x3e71ee,_0x1e685d,_0x465277){return _0x460c88(_0x1e685d- -0x17c,_0x3e71ee-0x1c5,_0x1e685d-0x6c,_0x26ddd5);}const _0x5d1b3f={};_0x5d1b3f[_0x564bbd(0x210,0x1e4,0x181,0x1a2)+'ofile']='默认';const _0x1069fe=_0x41da20[_0x26fe2b]||_0x5d1b3f,_0xb08f0d=_0x1069fe['context_pr'+'ofile']||'默认',_0x18c3d9=extension_settings[extensionName][_0x4a088c(-0x13c,-0x90,-0xfd,-0xd9)+'xt_profile'+'s']||{},_0x2e3633=_0x18c3d9[_0xb08f0d]||_0x18c3d9[Object[_0x4a088c(-0x15e,-0x192,-0x162,-0xc3)](_0x18c3d9)[-0x847+-0x5*0x614+0x26ab]]||{},_0xae20a0=[];if(_0x2e3633[_0x564bbd(0x329,0x2a2,0x2bf,0x301)]&&Array['isArray'](_0x2e3633[_0x4a088c(-0xcd,-0xcc,-0x12b,-0x115)]))_0x22574f['adXtq']===_0x22574f[_0x564bbd(0x1db,0x27d,0x20c,0x2f2)]?_0x4c0256+='\x20('+_0x277559[_0x4a088c(-0x1fb,-0x1e6,-0x1b8,-0x13b)](',\x20')+')':_0x2e3633['entries']['forEach'](_0x5c3102=>{function _0x2046fa(_0x11aa5a,_0x327cfb,_0x4e888c,_0x17ae72){return _0x4a088c(_0x4e888c,_0x327cfb-0xde,_0x11aa5a-0x613,_0x17ae72-0x1e1);}function _0x1c2f28(_0x38758b,_0xd32eda,_0x589dde,_0x45c0e7){return _0x564bbd(_0x38758b-0x121,_0x45c0e7- -0x10,_0x589dde,_0x45c0e7-0xcc);}if(_0x22574f[_0x1c2f28(0x1ed,0x29a,0x1e5,0x237)](_0x22574f[_0x1c2f28(0x299,0x350,0x267,0x2ca)],_0x1c2f28(0x2d9,0x206,0x2bf,0x254))){if(!_0x5c3102['enabled'])return;if(!_0x5c3102[_0x2046fa(0x490,0x51c,0x4db,0x4ee)]||_0x5c3102['content'][_0x2046fa(0x504,0x550,0x479,0x557)]()==='')return;if(_0x5c3102[_0x2046fa(0x4c2,0x41e,0x4a3,0x535)+'e']===_0x22574f[_0x1c2f28(0x272,0x207,0x2f1,0x255)]){if(!_0x521d6f||!checkTriggerWords(_0x5c3102[_0x1c2f28(0x1ef,0x26b,0x1b6,0x24d)+'ds'],_0x521d6f)){if(_0x22574f[_0x1c2f28(0x2d8,0x291,0x225,0x243)](_0x22574f[_0x2046fa(0x4e3,0x486,0x467,0x512)],_0x22574f[_0x2046fa(0x460,0x437,0x44d,0x502)]))_0x5f2f4d='未收到有效回复。',_0x265ab8[_0x1c2f28(0x11c,0x21a,0x15c,0x19e)](_0x8da6a4+(':\x20LLM\x20未收到有'+_0x2046fa(0x42f,0x414,0x417,0x463)));else return;}}const _0x258e65={};_0x258e65[_0x1c2f28(0x21b,0x233,0x29c,0x2a7)]=_0x5c3102[_0x1c2f28(0x228,0x2db,0x2ce,0x2a7)]||_0x22574f[_0x1c2f28(0x12d,0x177,0x20a,0x1cc)],_0x258e65[_0x2046fa(0x490,0x43e,0x512,0x3ef)]=_0x5c3102[_0x2046fa(0x490,0x43d,0x46c,0x48f)],_0xae20a0[_0x1c2f28(0xfb,0x18d,0x18f,0x19f)](_0x258e65);}else{let _0x1a8b28;if(_0x22574f[_0x2046fa(0x49b,0x531,0x40d,0x4a9)](typeof _0x2a1bb8[_0x1c2f28(0x2f0,0x249,0x210,0x2ac)],_0x22574f['Yykyy'])&&_0x13ab1f[_0x1c2f28(0x340,0x30e,0x216,0x2ac)]['message']){_0x1a8b28=''+_0x2aded9[_0x1c2f28(0x314,0x2d3,0x2c6,0x2ac)][_0x2046fa(0x4b9,0x47b,0x428,0x425)];const _0x23be45=[];if(_0xff2b60[_0x2046fa(0x502,0x54c,0x496,0x59f)]['type'])_0x23be45[_0x1c2f28(0x218,0x17b,0x132,0x19f)](_0x1c2f28(0x225,0x2f4,0x27c,0x2a3)+_0x548a71['error'][_0x1c2f28(0x265,0x2fc,0x24b,0x26e)]);if(_0x3b581d['error']['code'])_0x23be45[_0x2046fa(0x3f5,0x460,0x431,0x34f)](_0x2046fa(0x44e,0x465,0x487,0x476)+_0x4f3dcb['error'][_0x1c2f28(0x261,0x349,0x2c2,0x2cd)]);_0x22574f['DQvKh'](_0x23be45[_0x1c2f28(0x2c1,0x208,0x20f,0x29e)],0x10c8+-0x25cf*0x1+0x301*0x7)&&(_0x1a8b28+='\x20('+_0x23be45['join'](',\x20')+')');}else _0x1a8b28=''+_0x5cdd58[_0x1c2f28(0x279,0x24e,0x240,0x295)](_0x166f0f['error']);throw new _0x4fd33d(_0x1a8b28);}});else _0x2e3633['history']&&Array[_0x4a088c(-0x193,-0x110,-0x17f,-0x1c9)](_0x2e3633[_0x564bbd(0x23b,0x2a7,0x31a,0x31d)])&&_0x2e3633[_0x564bbd(0x263,0x2a7,0x334,0x2ae)][_0x4a088c(-0x10f,-0x14e,-0x12d,-0x111)](_0x55dc42=>{function _0x374627(_0x93e440,_0xa9e2e2,_0x127826,_0x4b9e91){return _0x564bbd(_0x93e440-0xae,_0xa9e2e2- -0x2fb,_0x93e440,_0x4b9e91-0x37);}function _0x5ea8e9(_0x5029ec,_0x43c48e,_0x31f230,_0x520019){return _0x4a088c(_0x520019,_0x43c48e-0x92,_0x5029ec-0xcc,_0x520019-0x25);}if(_0x55dc42[_0x374627(-0xd5,-0xee,-0x8a,-0xf2)]&&_0x55dc42['user'][_0x5ea8e9(-0x43,-0xc7,0x1e,-0xbe)]()!==''){const _0x383832={};_0x383832[_0x5ea8e9(-0x4a,-0x47,-0x88,0x52)]=_0x22574f[_0x374627(-0x8f,-0x11f,-0x113,-0x108)],_0x383832[_0x5ea8e9(-0xb7,-0xb6,-0x22,-0x120)]=_0x55dc42[_0x5ea8e9(-0xf4,-0xb0,-0xa0,-0x181)],_0xae20a0[_0x374627(-0x17f,-0x14c,-0x14c,-0x1e3)](_0x383832);}if(_0x55dc42[_0x374627(0x20,-0x5f,-0x65,-0x1d)]&&_0x22574f[_0x374627(-0x172,-0x12f,-0xe9,-0x8c)](_0x55dc42[_0x5ea8e9(-0x65,-0xaa,0x3a,-0xed)]['trim'](),'')){if(_0x22574f[_0x5ea8e9(-0xdb,-0xf0,-0xfa,-0xe8)](_0x22574f[_0x5ea8e9(-0x104,-0xa1,-0x1a8,-0x87)],_0x22574f[_0x374627(-0xab,-0xfe,-0xd7,-0x113)])){const _0x11cecf={};_0x11cecf[_0x5ea8e9(-0x4a,0x17,-0x74,0x9)]=_0x22574f['KDuGG'],_0x11cecf[_0x374627(-0x11,-0xb1,-0x112,-0x101)]=_0x55dc42['assistant'],_0xae20a0['push'](_0x11cecf);}else{if(_0x22574f[_0x374627(-0xa9,-0xa6,-0x3f,-0x67)](_0x83c6e6[_0x5ea8e9(-0x15a,-0x1e1,-0x122,-0xcc)],_0x5ea8e9(-0xc8,-0xc4,-0xa3,-0x3e))){const _0x19f844=_0x22574f[_0x5ea8e9(-0x49,-0x31,-0x90,-0x7b)][_0x5ea8e9(-0x2e,-0xae,-0xbd,-0x5e)]('|');let _0x177be9=-0x92*-0x18+-0xa94+-0x1*0x31c;while(!![]){switch(_0x19f844[_0x177be9++]){case'0':_0x3b3541[_0x5ea8e9(-0xeb,-0xcc,-0x167,-0x8f)](_0x4c0375);continue;case'1':_0x4e4e71=!![];continue;case'2':const _0x2cde24={};_0x2cde24[_0x5ea8e9(-0x15a,-0x1ff,-0x1eb,-0xe4)]=_0x5ea8e9(-0xc8,-0x24,-0x16b,-0x13e),_0x2cde24['message']=_0x374627(-0x22,-0xaf,-0x70,-0x65)+'orted';const _0x975950={};_0x975950[_0x5ea8e9(-0xe8,-0x11e,-0x83,-0x47)]=![],_0x975950[_0x5ea8e9(-0x1d,-0x4a,0x78,0x1b)]=null,_0x975950['id']=_0x58c931,_0x975950[_0x374627(-0x8a,-0x3f,0x5e,0x34)]=_0x2cde24,_0x3905ed['emit'](_0x3861c1,_0x975950);continue;case'3':_0x515067[_0x374627(-0x11d,-0x84,-0xf0,-0x9)+'us'](_0x2e9969,_0x5b8a9a[_0x374627(-0xd8,-0xc3,-0x150,-0x69)]);continue;case'4':return;}break;}}_0x5321fa['error'](_0x4b018e+_0x374627(-0x136,-0xde,-0x12e,-0xe2),_0x24c9fb);const _0x3dffc8=_0x374627(-0x109,-0x131,-0x1bc,-0x159)+_0x1ac07c['message'];_0x57c8de&&_0x5c83a5(_0x3dffc8);_0x4bbf66[_0x5ea8e9(-0x45,0x59,0x60,-0xbe)](_0x3aa20b[_0x374627(-0x8f,-0x88,-0x85,-0x1d)]),_0xf2f6b[_0x374627(-0x145,-0x10a,-0x12b,-0xfd)+'sk'](_0x39215c,![]),_0x115b80[_0x5ea8e9(-0xeb,-0x83,-0x140,-0x167)](_0x285ba6);const _0x30c2e6={};_0x30c2e6['success']=![],_0x30c2e6[_0x5ea8e9(-0x1d,-0x46,0x67,-0x29)]=_0x3dffc8,_0x30c2e6['id']=_0x599f6a,_0x2ab83e[_0x5ea8e9(-0x86,-0x28,-0x10f,-0xee)](_0x5d4044,_0x30c2e6);}}});const _0x281710=_0x22574f[_0x4a088c(-0x211,-0x22d,-0x1b1,-0x1bc)](mergeAdjacentMessages,_0xae20a0),_0x3fe010=processRollPlaceholders(_0x281710);return _0x3fe010;}const _0x28320b={};_0x28320b[_0x460c88(-0xa8,-0xb6,-0x4f,-0xfa)]='正文图片生成',_0x28320b[_0x460c88(-0x73,-0x95,-0x3b,-0x52)+'n']=_0x460c88(-0x59,0x3e,-0xbf,-0xc8),_0x28320b[_0x371559(0x73,0x153,0x4c,0xd2)+'ay']='角色/服装展示',_0x28320b['char_modif'+'y']=_0x371559(0xdc,0x1c0,0xce,0x14b),_0x28320b[_0x371559(0x83,0xfa,0xe8,0x106)+'n']='翻译',_0x28320b['tag_modify']='Tag修改';const REQUEST_TYPE_NAMES=_0x28320b;export async function executeTypedLLMRequest(_0x316d67,_0x3fbc43,_0xac1e33,_0x137bfc=null){function _0x4fd65e(_0x1b9b0a,_0x19df84,_0x4e3ea5,_0x1be4a6){return _0x371559(_0x1b9b0a-0x12d,_0x19df84-0x1b2,_0x4e3ea5,_0x1b9b0a- -0x1af);}const _0x5a9a74={'Sxbge':function(_0x55c594,_0x159270){return _0x55c594===_0x159270;},'nyRPW':_0x4fd65e(-0x142,-0x135,-0x14a,-0x173)+'e\x20request\x20'+_0x4fd65e(-0xda,-0xf5,-0x3f,-0x7c),'tUZOd':_0x5aa610(0x160,0xe0,0xc5,0xc0),'RvyXT':_0x5aa610(0xc4,0xf3,0x163,0x15d)+'orted','lQWmn':_0x4fd65e(-0x66,-0x2a,-0x19,-0xc7)+_0x5aa610(0x16d,0x167,0xed,0x157),'UxjNR':function(_0x148932,_0x1425f7){return _0x148932(_0x1425f7);},'mrzRp':function(_0x49539c,_0x1a0b35){return _0x49539c!==_0x1a0b35;},'zTaWq':function(_0x774ab4,_0xdd2545){return _0x774ab4!==_0xdd2545;},'IraTn':_0x5aa610(0x1b0,0x143,0xfa,0x192),'EtsTy':_0x5aa610(0x181,0xf0,0xe0,0xad),'BiOXT':_0x5aa610(0xa4,0x94,0xc8,0x103),'gVpxe':function(_0x378ff7,_0xdf28f9){return _0x378ff7||_0xdf28f9;},'OXKOy':function(_0x1029bf,_0x38f63a){return _0x1029bf(_0x38f63a);},'jrSoP':_0x4fd65e(-0x69,-0xa0,-0x1d,-0xa2),'zaMnX':'/api/backe'+_0x4fd65e(-0x85,-0x65,-0x56,-0x3c)+_0x4fd65e(-0xad,-0x152,-0x73,-0x20)+_0x4fd65e(-0x1e,-0x2,0x19,0x21),'tTXrP':function(_0x444161,_0x4cc488){return _0x444161(_0x4cc488);},'yFfls':_0x4fd65e(-0x116,-0x12c,-0xe0,-0xba),'mvDUf':function(_0x5cbc29,_0x3502b8,_0x51c17f){return _0x5cbc29(_0x3502b8,_0x51c17f);},'zeSkK':_0x5aa610(0xab,0x89,0x2c,0xc2),'CWlnD':function(_0x4828b3,_0x4d2430){return _0x4828b3(_0x4d2430);},'JHFSF':function(_0x3faabe,_0x1a79eb){return _0x3faabe===_0x1a79eb;},'XyFLB':_0x5aa610(0xec,0xf8,0x15d,0x70),'Jbylc':function(_0xe55a35,_0x23816e){return _0xe55a35>_0x23816e;},'nYiaB':function(_0x49efdd,_0x95ed8c){return _0x49efdd!==_0x95ed8c;},'vfBHu':'mMShq','MwOtY':_0x5aa610(0x84,0x63,0x53,0x99),'YWbrK':_0x4fd65e(-0xea,-0x4c,-0x117,-0x17b),'HZdYF':_0x5aa610(0x10b,0x180,0x1a4,0x11d),'ncPhn':'gHrqn','VADuZ':'流式解析警告:','ogVNX':_0x4fd65e(-0x13c,-0xa6,-0xcb,-0x1b5)+'E]','IGpGD':_0x4fd65e(-0x11b,-0x1be,-0xa8,-0x141),'jJgiy':_0x5aa610(0x19,0x41,0xe4,0x2f),'rDyRt':_0x5aa610(0x199,0x16d,0x1d8,0xd8),'vkDvX':_0x5aa610(0xab,0xd5,0x6e,0xca),'ITIog':'流式解析警告\x20(最后'+_0x5aa610(0xe6,0x8c,0x83,0x103),'wihzR':function(_0x9fe303,_0x689f8e){return _0x9fe303===_0x689f8e;},'WPuFh':'ijPTK','fHNoi':function(_0x2ecf67,_0x3ea364){return _0x2ecf67(_0x3ea364);},'QnFqX':_0x4fd65e(-0x151,-0x1cc,-0x13b,-0x1aa),'DPBZo':_0x5aa610(0x97,0xc6,0x111,0x6c),'rsrIp':function(_0x1e09e1,_0x330a51){return _0x1e09e1===_0x330a51;},'oDSrp':_0x4fd65e(-0x10b,-0x119,-0xc6,-0x172),'FwFDo':_0x4fd65e(-0x40,-0xb3,-0x9,-0x60),'xiNoj':_0x5aa610(0x168,0x115,0x79,0x19a),'wNSmt':_0x4fd65e(-0xcc,-0x8c,-0x47,-0x71)},{prompt:_0xe6bf1b,id:_0x48efcb}=_0x316d67;if(_0x5a9a74[_0x4fd65e(-0x138,-0xb7,-0x12a,-0xc3)](!_0x48efcb,!_0xe6bf1b))return;currentLLMRequestController&&(currentLLMRequestController[_0x4fd65e(-0x8b,-0xf2,-0x16,-0xa5)](),toastr['info']('LLM请求已中断，开'+'始新请求。'));currentLLMRequestController=new AbortController();const _0x268601=currentLLMRequestController['signal'],_0x48be2c=currentLLMRequestController,_0x5c0251=REQUEST_TYPE_NAMES[_0x3fbc43]||_0x3fbc43,_0x22f0f6={};_0x22f0f6[_0x4fd65e(-0x145,-0x1a8,-0x156,-0x164)]='LLM:\x20'+_0x5c0251,_0x22f0f6['type']=TaskType[_0x5aa610(0x15c,0x16b,0x121,0x116)],_0x22f0f6[_0x5aa610(0x105,0x121,0x125,0xf9)]=_0x48efcb;const _0xc2d3d=taskQueue[_0x4fd65e(-0x10f,-0x1a6,-0x113,-0x10e)](_0x22f0f6);llmTaskControllers[_0x5aa610(0xda,0xbb,0x82,0x100)](_0xc2d3d,currentLLMRequestController),taskQueue['updateStat'+'us'](_0xc2d3d,TaskStatus[_0x4fd65e(-0x144,-0x1d2,-0x128,-0x137)]),startFabLoading();let _0x4e719c=![];clearLog(),_0x5a9a74[_0x5aa610(0x1ca,0x126,0x147,0xb9)](addLog,_0x4fd65e(-0x135,-0x11f,-0xab,-0x128)+_0x4fd65e(-0xaa,-0x66,-0x3c,-0xee)+_0x5c0251+_0x4fd65e(-0xeb,-0x9a,-0x84,-0xe8)),_0x5a9a74[_0x4fd65e(-0x60,-0xac,-0x9d,-0x62)](addLog,'请求\x20ID:\x20'+_0x48efcb);function _0x5aa610(_0x1b037c,_0x41f086,_0x58d5f8,_0x5f1b54){return _0x371559(_0x1b037c-0x5a,_0x41f086-0x1b,_0x58d5f8,_0x41f086- -0x1c);}addLog(_0x5aa610(0x15c,0x160,0x1ef,0x1c2)+':'),addLog(formatPromptForDisplay(_0xe6bf1b));const _0x29cb0f=_0x5a9a74[_0x4fd65e(-0x6d,-0x94,0x30,-0x36)](getEffectiveConfigForRequestType,_0x3fbc43),{api_url:_0x386a94,api_key:_0x5c89d8,model:_0x15a2fe,temperature:_0x299fa1,top_p:_0x22d242,max_tokens:_0x2867cc,stream:_0x2491b7}=_0x29cb0f;if(_0x5a9a74[_0x4fd65e(-0x138,-0x154,-0x15a,-0xe9)](!_0x386a94,!_0x5c89d8)||!_0x15a2fe){if(_0x5a9a74[_0x4fd65e(-0x9d,-0xba,-0x9a,-0x3d)]!==_0x5a9a74['jrSoP'])return _0x57af6c[_0x5aa610(0x1c3,0x14c,0xbe,0xbe)](_0x54eb95,null,0xa9*0x3b+0x1c2b+-0x431c);else{const _0x19308a=_0x5c0251+(_0x4fd65e(-0xa,-0x95,-0x4a,-0xa8)+_0x5aa610(0x109,0x75,0xfc,0x7b)+_0x5aa610(0xc8,0x168,0x135,0xea)+'置。');toastr[_0x4fd65e(-0x30,-0x2e,0x34,0x12)](_0x19308a);const _0x36480f={};_0x36480f[_0x5aa610(0x44,0xc0,0xbe,0x1b)]=![],_0x36480f[_0x4fd65e(-0x8,0xc,-0x7c,-0x1d)]=_0x19308a,_0x36480f['id']=_0x48efcb,eventSource[_0x5aa610(0x96,0x122,0xe2,0x101)](_0xac1e33,_0x36480f);return;}}const _0x2b6eb0=_0x5a9a74['zaMnX'],_0x20f386=_0x386a94[_0x4fd65e(-0x12d,-0x109,-0x8d,-0x183)](/\/$/,'');_0x137bfc&&_0x5a9a74['tTXrP'](_0x137bfc,'正在处理\x20'+_0x5c0251+'\x20请求，请稍候...');try{const _0x2acc5f={};_0x2acc5f[_0x5aa610(0x90,0xcb,0x14f,0x51)+'etion_sour'+'ce']=_0x5a9a74['yFfls'],_0x2acc5f[_0x4fd65e(-0x11f,-0x194,-0xf9,-0x1b0)]=_0x20f386,_0x2acc5f['custom_inc'+'lude_heade'+'rs']=_0x4fd65e(-0x14f,-0xb7,-0x158,-0x14d)+_0x4fd65e(-0xae,-0x8d,-0x12d,-0xb8)+'er\x20'+_0x5c89d8+'\x22',_0x2acc5f[_0x4fd65e(-0x94,-0xf6,-0x43,-0x1e)]=_0x15a2fe,_0x2acc5f[_0x4fd65e(-0x54,0x47,-0x3,0x12)]=_0xe6bf1b,_0x2acc5f[_0x5aa610(0x17c,0x137,0x13b,0xb6)+'e']=_0x299fa1,_0x2acc5f[_0x4fd65e(-0x13a,-0x115,-0x19b,-0x9a)]=_0x22d242,_0x2acc5f[_0x5aa610(-0x2d,0x67,-0x29,-0x23)]=_0x2867cc,_0x2acc5f[_0x5aa610(0x1e8,0x14b,0x184,0xa6)]=_0x2491b7;const _0xac9cc3=_0x2acc5f,_0x1ccf0c=await _0x5a9a74['mvDUf'](fetch,_0x2b6eb0,{'method':_0x5a9a74['zeSkK'],'headers':_0x5a9a74[_0x4fd65e(-0x51,-0x6b,-0xf6,-0x60)](getRequestHeaders,window[_0x5aa610(0x74,0xd4,0x74,0x6c)]),'body':JSON['stringify'](_0xac9cc3),'signal':_0x268601});if(!_0x1ccf0c['ok']){try{if(_0x5a9a74[_0x5aa610(0x10f,0x179,0xf5,0x144)](_0x4fd65e(-0x90,-0xd8,0xa,0xf),_0x4fd65e(-0x8d,-0x14,-0x7d,-0x6))){const _0x3bb0b5=await _0x1ccf0c[_0x4fd65e(-0x141,-0x11e,-0x13e,-0x16c)]();if(_0x3bb0b5[_0x4fd65e(-0x30,-0x13,-0x6f,-0xc0)]){let _0x2caa43;if(_0x5a9a74[_0x5aa610(0x144,0x114,0x16d,0x9f)](typeof _0x3bb0b5[_0x4fd65e(-0x30,0x68,-0x74,0x39)],_0x5a9a74[_0x5aa610(0x89,0x93,0xce,0x45)])&&_0x3bb0b5[_0x4fd65e(-0x30,-0x9a,-0xf,-0x24)]['message']){_0x2caa43=''+_0x3bb0b5[_0x5aa610(0x107,0x163,0x1bb,0x166)][_0x5aa610(0x157,0x11a,0xbf,0xe7)];const _0x160c35=[];if(_0x3bb0b5[_0x4fd65e(-0x30,-0xb0,-0xb4,0x34)][_0x5aa610(0xab,0x125,0xb7,0x166)])_0x160c35[_0x5aa610(0x1d,0x56,0x5e,-0x45)](_0x4fd65e(-0x39,-0x3b,-0xc2,-0x61)+_0x3bb0b5[_0x4fd65e(-0x30,-0xb3,0x52,-0x7a)][_0x4fd65e(-0x6e,-0x89,-0x9b,-0xb)]);if(_0x3bb0b5[_0x5aa610(0x18c,0x163,0x13c,0x130)]['code'])_0x160c35[_0x4fd65e(-0x13d,-0xa9,-0x115,-0x19e)](_0x4fd65e(-0xe4,-0xd0,-0xd1,-0x15b)+_0x3bb0b5[_0x4fd65e(-0x30,-0x12,-0x2d,-0xbe)]['code']);_0x5a9a74[_0x4fd65e(-0xcb,-0x142,-0x141,-0xef)](_0x160c35[_0x5aa610(0x1bf,0x155,0x170,0xcd)],-0x65d+0x17cf+0xcb*-0x16)&&(_0x2caa43+='\x20('+_0x160c35['join'](',\x20')+')');}else _0x2caa43=''+JSON[_0x4fd65e(-0x47,0x5d,0x2e,0xa)](_0x3bb0b5['error']);throw new Error(_0x2caa43);}}else{if(_0x5a9a74[_0x5aa610(0x13f,0x10f,0xb9,0x13c)](_0x439389[_0x5aa610(0xe5,0x4e,-0x42,-0xe)],_0x4fd65e(-0xb3,-0x10f,-0x70,-0x51))){_0x4dd3e4=!![],_0x5811e2[_0x5aa610(0xc2,0x47,0xa9,0x19)](_0x5a9a74[_0x4fd65e(-0x148,-0x1a8,-0x182,-0xcb)]),_0x78280f[_0x5aa610(0x13c,0x11e,0xc4,0x16e)+'us'](_0x1ba4ed,_0x4c37c8[_0x4fd65e(-0xb4,-0x140,-0xb3,-0x140)]),_0x5668e8[_0x4fd65e(-0xd6,-0x179,-0x159,-0x123)](_0x2af26e);const _0xc73c8f={};_0xc73c8f[_0x4fd65e(-0x145,-0x14f,-0x1b6,-0xa7)]=_0x5a9a74[_0x4fd65e(-0x7d,-0xdc,-0x7b,-0xf8)],_0xc73c8f[_0x4fd65e(-0x79,-0x11f,-0x103,0x5)]=_0x5a9a74[_0x4fd65e(-0x8e,-0x122,-0x7d,-0x12f)];const _0x3e19b1={};_0x3e19b1[_0x4fd65e(-0xd3,-0x13f,-0xa5,-0x134)]=![],_0x3e19b1[_0x5aa610(0x176,0x18b,0x231,0x226)]=null,_0x3e19b1['id']=_0x31ac60,_0x3e19b1[_0x4fd65e(-0x30,0x58,-0x59,-0x1)]=_0xc73c8f,_0x312f35[_0x4fd65e(-0x71,-0x9e,-0xe1,-0x77)](_0x2a1eb7[_0x4fd65e(-0xce,-0x12d,-0xaf,-0x125)+_0x4fd65e(-0x124,-0x19c,-0xf2,-0x10e)],_0x3e19b1);return;}_0x4b15d9['error'](_0x5a9a74[_0x4fd65e(-0xd5,-0x9a,-0xb5,-0x50)],_0x5bf774);const _0xc0e40b=_0x5aa610(-0x20,0x71,0xd2,-0x10)+_0x59a332['message'];_0x263e35&&_0x5a9a74[_0x4fd65e(-0x60,-0xc6,-0xfe,0xa)](_0x264f82,_0xc0e40b);_0x5dc877[_0x4fd65e(-0x30,0x1,-0x1c,-0xb5)](_0x5dba63[_0x4fd65e(-0x79,-0x1c,0x2d,0x4)]),_0x4c15bf['completeTa'+'sk'](_0x390a01,![]),_0x341d28['delete'](_0x4dbf0b);const _0x151bb9={};_0x151bb9[_0x5aa610(0xe9,0xc0,0x58,0x142)]=![],_0x151bb9['result']=_0xc0e40b,_0x151bb9['id']=_0x256d13,_0x265a0e['emit'](_0x31bedb['LLM_EXECUT'+'E_RESPONSE'],_0x151bb9);}}catch(_0x21c88b){if(_0x5a9a74['nYiaB'](_0x5a9a74['vfBHu'],_0x5aa610(0x17b,0x174,0xe1,0x120))){if(_0x21c88b[_0x5aa610(0xb1,0x11a,0x18c,0x193)][_0x4fd65e(-0x1b,-0x26,0x18,0x20)](_0x5a9a74['BiOXT'])||_0x21c88b[_0x5aa610(0x14d,0x11a,0x152,0x1a6)][_0x4fd65e(-0x1b,0x1e,-0x5f,-0x5e)]('代码:'))throw _0x21c88b;}else _0x4543b0(_0x4f2288);}throw new Error(_0x4fd65e(-0x91,-0x108,-0x1e,-0x3f)+_0x1ccf0c[_0x4fd65e(-0x2a,-0x82,-0xb2,-0x4e)]+'\x20'+_0x1ccf0c[_0x4fd65e(-0x52,-0x1d,0x1e,-0xaf)]);}let _0x2b5854='';if(_0x2491b7){if(_0x5aa610(0x13e,0x151,0x1e0,0x139)!==_0x5a9a74['MwOtY']){const _0x30b9ff=_0x1ccf0c[_0x5aa610(0x112,0x14a,0x128,0x1e0)]['getReader'](),_0x595acc=new TextDecoder(_0x5a9a74['YWbrK']);let _0x31f3cc='';while(!![]){const {done:_0x149ef3,value:_0x7d0048}=await _0x30b9ff[_0x5aa610(0x33,0x81,0x8c,-0xd)]();if(_0x149ef3)break;const _0x36bdb2={};_0x36bdb2[_0x5aa610(0x157,0x14b,0x1ee,0xea)]=!![],_0x31f3cc+=_0x595acc[_0x5aa610(0x66,0x91,0x79,0x9b)](_0x7d0048,_0x36bdb2);const _0x3ffd83=_0x31f3cc[_0x5aa610(0xdb,0x17a,0x1bf,0x172)]('\x0a');_0x31f3cc=_0x3ffd83['pop']()||'';for(const _0x160f5b of _0x3ffd83){const _0x200aab=_0x160f5b['trim']();if(!_0x200aab||_0x5a9a74['Sxbge'](_0x200aab,_0x4fd65e(-0x13c,-0x126,-0x19e,-0xcb)+'E]'))continue;if(_0x200aab['startsWith'](_0x4fd65e(-0x11b,-0xb8,-0x1af,-0x10c)))try{if(_0x5a9a74[_0x4fd65e(-0x1a,0x32,0x69,-0x7)](_0x5a9a74[_0x4fd65e(-0xf7,-0x54,-0x134,-0x123)],_0x5a9a74['ncPhn'])){const _0x2a36af=_0x200aab['slice'](0x2331+-0x10c0+-0x1*0x126b),_0x3642fe=JSON[_0x4fd65e(-0xb,-0x35,0xf,-0x45)](_0x2a36af),_0x11570d=_0x3642fe[_0x5aa610(0xcb,0x69,0xea,-0x6)]?.[-0x1ee1+0xe5e+-0x1*-0x1083]?.['delta']?.[_0x5aa610(0x120,0xf1,0xd1,0x146)];_0x11570d&&(_0x2b5854+=_0x11570d,_0x137bfc&&_0x5a9a74[_0x5aa610(0x14c,0x142,0x138,0x168)](_0x137bfc,_0x2b5854));}else{if(_0x24ac6c[_0x5aa610(0xf2,0xb4,0x7d,0xc0)]&&_0x5a9a74[_0x5aa610(0x12b,0x186,0x16c,0x13a)](_0x19353a[_0x4fd65e(-0xdf,-0xb5,-0x60,-0x14b)][_0x5aa610(0x11a,0x165,0x155,0xcb)](),'')){const _0x16e303={};_0x16e303[_0x4fd65e(-0x35,0x69,-0x13,0x4d)]='user',_0x16e303[_0x5aa610(0xc9,0xf1,0x185,0x82)]=_0x24e137[_0x5aa610(0xe5,0xb4,0x41,0x152)],_0x639006[_0x4fd65e(-0x13d,-0xe6,-0x14f,-0x197)](_0x16e303);}if(_0x5a366c[_0x5aa610(0x1dd,0x143,0xf5,0xbf)]&&_0x5a9a74['zTaWq'](_0x4da9f1[_0x5aa610(0x109,0x143,0x1b2,0xb7)][_0x4fd65e(-0x2e,0xb,-0x94,-0x9)](),'')){const _0x33b21f={};_0x33b21f[_0x4fd65e(-0x35,-0xe,-0x53,-0x99)]=_0x5a9a74['IraTn'],_0x33b21f[_0x4fd65e(-0xa2,-0xca,-0x11b,-0x131)]=_0x11744d[_0x5aa610(0xac,0x143,0x14b,0xa0)],_0x565d3c[_0x4fd65e(-0x13d,-0x137,-0x107,-0xe7)](_0x33b21f);}}}catch(_0x567887){console[_0x4fd65e(-0xfc,-0x131,-0xe2,-0x148)](_0x5a9a74[_0x5aa610(0x190,0x16f,0x14a,0x11a)],_0x567887[_0x4fd65e(-0x79,0xd,-0xe1,-0x6d)]);}}}if(_0x31f3cc[_0x5aa610(0x16d,0x165,0x109,0xe1)]()&&_0x5a9a74[_0x5aa610(0x144,0x186,0x11d,0x1ec)](_0x31f3cc[_0x4fd65e(-0x2e,0x38,-0xb0,-0x82)](),_0x5a9a74['ogVNX'])&&_0x31f3cc[_0x4fd65e(-0x2e,-0x65,-0xb1,-0x85)]()[_0x4fd65e(-0x132,-0xf3,-0xdd,-0x19b)](_0x5a9a74['IGpGD'])){if(_0x5a9a74[_0x5aa610(0x16b,0x186,0x12c,0x20f)](_0x5a9a74[_0x4fd65e(-0x139,-0xd0,-0xf8,-0x12b)],_0x5a9a74[_0x5aa610(-0x45,0x5a,0xcd,0x2f)])){const _0x4ba918=_0x4ddc17[_0x10d062][_0x4fd65e(-0xa8,-0x11c,-0xee,-0x115)+_0x4fd65e(-0x44,0x5c,-0x10,0x62)+'figs']||{},_0xfcabc2={};_0xfcabc2[_0x5aa610(0x1a0,0x172,0x13f,0x1f6)+'e']='默认',_0xfcabc2['context_pr'+_0x5aa610(0x11d,0x131,0x94,0xa4)]='默认';const _0x1e68b4=_0x4ba918[_0x13a063]||_0xfcabc2,_0x40daa5=_0x44882b[_0x939fbe][_0x5aa610(0x11b,0x113,0x18d,0x9e)+'es']||{},_0x3855d8=_0x57668c[_0x6557ed][_0x4fd65e(-0x1c,0x29,-0x56,0x67)+_0x4fd65e(-0x31,0x68,-0x6b,0x14)+'s']||{},_0x3b6a55=_0x1e68b4['api_profil'+'e']||'默认',_0x1864ef=_0x40daa5[_0x3b6a55]||_0x40daa5[_0x48c0a4[_0x4fd65e(-0x81,-0x21,-0x2d,-0x56)](_0x40daa5)[-0x2276+0xb5*-0x13+0xc9*0x3d]]||{},_0x457b13=_0x1e68b4['context_pr'+_0x5aa610(0x111,0x131,0xe8,0xb4)]||'默认',_0x372d85=_0x3855d8[_0x457b13]||_0x3855d8[_0x149c0c[_0x5aa610(0x12f,0x112,0x8e,0x13e)](_0x3855d8)[0x2e7*0x1+-0x1234+0x1*0xf4d]]||{},_0x3415ac={};return _0x3415ac[_0x4fd65e(-0xee,-0xca,-0x100,-0x117)]=_0x1864ef[_0x4fd65e(-0xee,-0x136,-0x10f,-0x143)]||'',_0x3415ac[_0x5aa610(0x77,0x6a,0x8a,0x7)]=_0x1864ef['api_key']||'',_0x3415ac[_0x5aa610(0xcf,0xff,0x197,0x103)]=_0x1864ef[_0x5aa610(0x105,0xff,0x106,0x159)]||'',_0x3415ac[_0x5aa610(0x112,0x137,0x1b5,0x1b0)+'e']=_0x1864ef[_0x4fd65e(-0x5c,0x2c,-0x1b,0xf)+'e']??0x1cce+0x4e7*-0x6+0x3*0x34+0.7,_0x3415ac[_0x4fd65e(-0x13a,-0x16a,-0xc7,-0x139)]=_0x1864ef[_0x5aa610(0x6e,0x59,0x7d,0xd2)]??-0xb*-0x2f5+0x1*0x1327+-0x33ad,_0x3415ac['max_tokens']=_0x1864ef[_0x5aa610(0x3a,0x67,0x49,0xc7)]??0x373+0x17c+-0x2ef,_0x3415ac[_0x5aa610(0x150,0x14b,0xf9,0x175)]=_0x1864ef[_0x4fd65e(-0x48,-0x33,-0xdf,-0x3e)]??![],_0x3415ac[_0x5aa610(0x1a6,0x18a,0x1b3,0x17c)]=_0x372d85,_0x3415ac;}else try{if(_0x5a9a74[_0x5aa610(0x139,0x186,0x147,0x20f)](_0x5a9a74[_0x4fd65e(-0x10c,-0x162,-0xc0,-0x1ab)],_0x5a9a74[_0x4fd65e(-0xa4,-0x57,-0xa,-0xe7)])){const _0x35f78f=_0x31f3cc[_0x4fd65e(-0x2e,0x53,-0x60,-0x9a)]()[_0x4fd65e(-0x123,-0x15c,-0x1a9,-0x109)](0x126d+0x103c*0x2+-0x32df),_0x21cee5=JSON[_0x5aa610(0x21d,0x188,0x1e3,0xfb)](_0x35f78f),_0x4e1591=_0x21cee5['choices']?.[-0x241*0xe+-0x138+0x20c6]?.['delta']?.['content'];_0x4e1591&&(_0x2b5854+=_0x4e1591,_0x137bfc&&_0x137bfc(_0x2b5854));}else _0x5e1d5c[_0x4fd65e(-0x13d,-0x15b,-0x147,-0x19b)](_0x4fd65e(-0xf3,-0x181,-0x62,-0x170)+_0x46c2d7+']');}catch(_0x544da8){console['warn'](_0x5a9a74[_0x4fd65e(-0xb8,-0xa8,-0x134,-0x7b)],_0x544da8['message']);}}!_0x2b5854&&(_0x2b5854=_0x4fd65e(-0xa3,-0x43,-0x1c,-0x2a),toastr['warning'](_0x5c0251+(':\x20LLM\x20未收到有'+'效回复。')));}else _0x5a9a74['UxjNR'](_0x496652,_0x16a9e2);}else{const _0xb25839=await _0x1ccf0c['json']();if(_0xb25839[_0x4fd65e(-0x30,-0xd4,-0x59,-0x5b)]){let _0x1ae162;if(_0x5a9a74[_0x5aa610(0x202,0x15c,0x123,0x14e)](typeof _0xb25839[_0x5aa610(0x1d5,0x163,0x1c8,0x103)],_0x5a9a74[_0x4fd65e(-0x100,-0x18a,-0x88,-0xdb)])&&_0xb25839[_0x4fd65e(-0x30,-0x91,0x66,0x51)][_0x5aa610(0x161,0x11a,0x118,0x123)]){_0x1ae162=''+_0xb25839[_0x4fd65e(-0x30,-0x32,-0xc5,0x37)]['message'];const _0x462f1f=[];if(_0xb25839[_0x5aa610(0x165,0x163,0x16a,0x147)][_0x5aa610(0x89,0x125,0x99,0x130)])_0x462f1f[_0x5aa610(-0x7,0x56,0x14,0x5b)]('类型:\x20'+_0xb25839[_0x5aa610(0xce,0x163,0x15b,0xcf)][_0x5aa610(0xcf,0x125,0xf3,0x18d)]);if(_0xb25839[_0x4fd65e(-0x30,0x3b,0x2f,-0x4)]['code'])_0x462f1f[_0x5aa610(0x8e,0x56,0x70,0x53)](_0x4fd65e(-0xe4,-0x138,-0x105,-0x8e)+_0xb25839[_0x5aa610(0x143,0x163,0xe5,0x100)][_0x5aa610(0xf5,0x184,0x121,0x20c)]);_0x5a9a74[_0x5aa610(0x113,0xc8,0xb4,0x9f)](_0x462f1f['length'],0x211f+0x253f*0x1+-0x465e)&&(_0x1ae162+='\x20('+_0x462f1f[_0x5aa610(0x22,0xbc,0x22,0x31)](',\x20')+')');}else _0x1ae162=''+JSON['stringify'](_0xb25839['error']);throw new Error(_0x1ae162);}_0x2b5854=_0xb25839[_0x5aa610(0x41,0x69,0x93,-0x1c)]?.[-0xc7*-0x1+-0x2*-0xa7+0x29*-0xd]?.[_0x4fd65e(-0x79,-0xfe,-0xf2,-0x119)]?.['content']||'',!_0x2b5854&&(_0x2b5854=_0x5a9a74[_0x5aa610(0xf0,0xa1,0x7,0xd4)],toastr[_0x5aa610(0x7e,0x55,0x12,-0x3c)](_0x5c0251+(_0x5aa610(0x164,0x183,0x112,0xf8)+_0x4fd65e(-0x103,-0x98,-0x19c,-0x190)))),_0x137bfc&&(_0x5a9a74['zTaWq'](_0x5a9a74[_0x4fd65e(-0x95,-0xb3,-0x7d,-0xd9)],'ijPTK')?(_0x1c5507=_0x5a9a74['EtsTy'],_0x807015[_0x4fd65e(-0x13e,-0xec,-0xae,-0x181)](_0x3a0f65+(_0x4fd65e(-0x10,-0xa,0x1e,0x45)+_0x5aa610(0x5b,0x90,0x10d,0xa7)))):_0x5a9a74['CWlnD'](_0x137bfc,_0x2b5854));}_0x5a9a74[_0x4fd65e(-0x6d,-0xa1,-0x10f,0x26)](addLog,_0x4fd65e(-0x13f,-0xed,-0x132,-0x109)+_0x4fd65e(-0x147,-0x1ad,-0x146,-0x1e7)),_0x5a9a74[_0x5aa610(0x58,0xd0,0x5f,0xe8)](addLog,_0x2b5854),_0x5a9a74['CWlnD'](addLog,_0x4fd65e(-0x135,-0x1a8,-0x118,-0x175)+_0x5aa610(0x18d,0x15b,0xca,0xc3)),taskQueue[_0x4fd65e(-0xfb,-0xda,-0xb0,-0xcc)+'sk'](_0xc2d3d,!![]),llmTaskControllers[_0x4fd65e(-0xd6,-0x6f,-0x10d,-0x8f)](_0xc2d3d);const _0x852996=extension_settings[extensionName][_0x5aa610(0x171,0x111,0xdc,0x14c)+'e'];if(_0x852996){if(_0x5a9a74['QnFqX']!==_0x4fd65e(-0x151,-0x17b,-0x142,-0x1a4)){_0x11a347=''+_0x5d387b[_0x4fd65e(-0x30,-0x8e,-0x4c,0x14)][_0x5aa610(0xc0,0x11a,0x87,0x141)];const _0x48c808=[];if(_0x74b7e0[_0x5aa610(0x1fa,0x163,0x1f5,0x112)][_0x5aa610(0x142,0x125,0xa5,0xab)])_0x48c808[_0x5aa610(0x0,0x56,0xc3,0x34)]('类型:\x20'+_0x5d7718['error'][_0x5aa610(0xc1,0x125,0x12a,0x16d)]);if(_0x1f2c3c[_0x4fd65e(-0x30,-0x10,0x13,0x14)][_0x4fd65e(-0xf,-0x8d,-0x4d,-0x18)])_0x48c808[_0x5aa610(0xbd,0x56,0xdb,0x1b)](_0x4fd65e(-0xe4,-0x69,-0x8b,-0x10a)+_0x4a7ab7['error']['code']);_0x48c808['length']>0x259b+0xbbf*-0x2+-0xe1d&&(_0x2a74c1+='\x20('+_0x48c808[_0x4fd65e(-0xd7,-0x105,-0xe5,-0x14b)](',\x20')+')');}else{const _0x5ac8c1={};_0x5ac8c1['timeOut']=0x1388,toastr[_0x5aa610(0x17d,0xed,0x10c,0x86)](_0x4fd65e(-0x131,-0x156,-0xce,-0xa0)+_0x5c0251+(_0x4fd65e(-0xa1,-0x119,-0x140,-0x10f)+_0x4fd65e(-0x5e,-0x5,-0x9d,-0xa3)),_0x5a9a74['DPBZo'],_0x5ac8c1);}}const _0x2f8f78={};_0x2f8f78['success']=!![],_0x2f8f78[_0x4fd65e(-0x8,-0x70,0x63,-0xa0)]=_0x2b5854,_0x2f8f78['id']=_0x48efcb,_0x2f8f78[_0x4fd65e(-0x14b,-0x131,-0x1e8,-0x103)]=_0x852996,eventSource[_0x4fd65e(-0x71,-0x10e,-0xb2,-0x15)](_0xac1e33,_0x2f8f78);}catch(_0x2b04f9){if(_0x5a9a74[_0x5aa610(0x147,0xc9,0xb2,0x132)](_0x2b04f9[_0x5aa610(0xe6,0x4e,0x60,0xc7)],_0x5a9a74[_0x5aa610(0x15c,0x116,0x11d,0x14f)])){if(_0x5a9a74[_0x4fd65e(-0x92,0x10,-0x78,-0x117)]===_0x5a9a74['oDSrp']){const _0x134643=_0x5a9a74['FwFDo'][_0x5aa610(0x19b,0x17a,0xf5,0x18a)]('|');let _0x166f15=0x3ef+-0x25f*0xb+-0x7e*-0x2d;while(!![]){switch(_0x134643[_0x166f15++]){case'0':llmTaskControllers[_0x4fd65e(-0xd6,-0x87,-0x72,-0x117)](_0xc2d3d);continue;case'1':taskQueue[_0x5aa610(0x119,0x11e,0x173,0x1b4)+'us'](_0xc2d3d,TaskStatus[_0x4fd65e(-0xb4,-0x111,-0x102,-0x95)]);continue;case'2':const _0x2d2b04={};_0x2d2b04['name']=_0x5a9a74[_0x4fd65e(-0x7d,-0x1e,-0x5a,-0x53)],_0x2d2b04[_0x5aa610(0x79,0x11a,0xcd,0xf5)]=_0x5a9a74['RvyXT'];const _0x1caf78={};_0x1caf78[_0x4fd65e(-0xd3,-0x155,-0xa8,-0x3e)]=![],_0x1caf78[_0x4fd65e(-0x8,0x51,0x55,0x74)]=null,_0x1caf78['id']=_0x48efcb,_0x1caf78[_0x4fd65e(-0x30,0x4b,-0x8c,0x6c)]=_0x2d2b04,eventSource[_0x4fd65e(-0x71,-0xc0,-0xf7,-0x54)](_0xac1e33,_0x1caf78);continue;case'3':_0x4e719c=!![];continue;case'4':return;}break;}}else{if(_0x40a045[_0x5aa610(0x74,0x11a,0x171,0x11b)]['includes'](_0x5a9a74[_0x5aa610(0xac,0x58,0x2b,0x54)])||_0x2c3238[_0x5aa610(0x155,0x11a,0x9c,0x188)][_0x4fd65e(-0x1b,-0x86,-0x7d,0x6c)](_0x5aa610(0x1a2,0x16a,0x12a,0x1c3)))throw _0x47194b;}}console[_0x4fd65e(-0x30,0x11,-0xb3,-0x54)](_0x5c0251+'\x20Error:',_0x2b04f9);const _0x479d66=_0x5aa610(0x74,0x71,0xb9,-0x32)+_0x2b04f9['message'];_0x137bfc&&_0x137bfc(_0x479d66);toastr[_0x4fd65e(-0x30,0x30,-0x67,-0xa5)](_0x2b04f9['message']),taskQueue['completeTa'+'sk'](_0xc2d3d,![]),llmTaskControllers[_0x4fd65e(-0xd6,-0x97,-0xfa,-0xe1)](_0xc2d3d);const _0x3330eb={};_0x3330eb[_0x5aa610(0xc7,0xc0,0x47,0x9d)]=![],_0x3330eb[_0x5aa610(0x131,0x18b,0x1bf,0x212)]=_0x479d66,_0x3330eb['id']=_0x48efcb,eventSource[_0x4fd65e(-0x71,-0xc6,-0x116,0x18)](_0xac1e33,_0x3330eb);}finally{currentLLMRequestController===_0x48be2c&&(currentLLMRequestController=null);if(!_0x4e719c||_0x5a9a74[_0x5aa610(0x7b,0x114,0x18f,0x8b)](currentLLMRequestController,null)){if(_0x5a9a74[_0x5aa610(0x206,0x186,0x1a0,0x159)](_0x5a9a74['xiNoj'],_0x5a9a74[_0x5aa610(0x211,0x17e,0xea,0x1bb)]))stopFabLoading();else{const {id:_0x2e0894}=_0x15877e;if(!_0x2e0894)return;const _0x2ca76d=_0x5f3dce[_0xb8a7b]||_0x3867f7;_0x58778d[_0x4fd65e(-0x14c,-0xf0,-0x166,-0xd2)](_0x4fd65e(-0x12b,-0x111,-0x99,-0x14c)+_0x5aa610(0x1d1,0x13c,0x156,0x134)+_0x2ca76d+(_0x5aa610(0x16a,0xd2,0xb6,0x49)+_0x4fd65e(-0x20,-0x4a,-0x84,0x82))+_0x2e0894+')');const _0x297600=_0x5a9a74[_0x4fd65e(-0x60,-0x36,-0xb4,-0xce)](_0x2979ec,_0x2f1521),_0x247ab5={};_0x247ab5[_0x4fd65e(-0x72,-0x25,-0xa6,-0xaa)]=_0x297600,_0x247ab5['id']=_0x2e0894,_0x4acf7b[_0x4fd65e(-0x71,-0xd6,-0x10f,-0xf4)](_0x18abed,_0x247ab5);}}}}export async function executeDefaultLLMRequest(_0x4ca745,_0x36a557,_0x2873b5=null){const _0x4a5053={'kLHTx':function(_0x10b0ce,_0x1c7dbe){return _0x10b0ce(_0x1c7dbe);},'bbmWi':_0x1daa43(-0x77,-0xc4,-0x46,-0x162)+_0x1daa43(-0x124,-0xa5,-0x7c,-0x80),'VlxWy':function(_0x1bd209,_0xa7620e){return _0x1bd209(_0xa7620e);},'yjoVS':function(_0x43626e,_0x4a2d03){return _0x43626e===_0x4a2d03;},'EkyuJ':'object','xtfVW':function(_0x24ab8f,_0x222705){return _0x24ab8f>_0x222705;},'riiqp':_0x1daa43(-0x20,-0x1e,0x81,-0xc0),'zKmAl':_0x1daa43(-0x1d2,-0x130,-0x1c2,-0x144),'MbFjW':function(_0x44df25,_0x62b178){return _0x44df25/_0x62b178;},'USopp':function(_0x19f05f,_0x4a9026){return _0x19f05f*_0x4a9026;},'HouNG':function(_0x52f304,_0x55a6e0){return _0x52f304(_0x55a6e0);},'upmgO':function(_0x32e01c,_0x3e5180){return _0x32e01c||_0x3e5180;},'aNBNH':function(_0x1264af,_0x53f081){return _0x1264af===_0x53f081;},'cRmQq':'TDUgz','FvAwK':'ROTNe','LtjyN':'LLM请求已中断，开'+_0x3452c7(0x307,0x3e7,0x383,0x390),'mbzdz':_0x3452c7(0x35e,0x3c4,0x3ae,0x442),'IhnDt':function(_0x3cf7dd){return _0x3cf7dd();},'BcURy':function(_0x2bdd99,_0x528351){return _0x2bdd99(_0x528351);},'suOEt':function(_0x8e3287,_0x5c8fa7){return _0x8e3287(_0x5c8fa7);},'pFTLg':function(_0x11e852,_0x436599){return _0x11e852(_0x436599);},'WoHOW':_0x3452c7(0x330,0x2f1,0x397,0x398),'HrQsO':_0x3452c7(0x267,0x38b,0x301,0x315),'DVvyy':_0x1daa43(-0x76,-0xff,-0xc2,-0x5d)+_0x3452c7(0x329,0x35c,0x316,0x367)+_0x1daa43(-0x123,-0x99,-0x10,-0x4c),'hlOmH':_0x3452c7(0x33d,0x3aa,0x367,0x39d)+_0x1daa43(-0x10d,-0x68,-0x1e,-0xe4)+_0x3452c7(0x3bf,0x34c,0x33d,0x2aa)+'/generate','bnrRv':function(_0x34b147,_0x3a098e){return _0x34b147(_0x3a098e);},'Pimha':function(_0x5ed2db,_0x377d08,_0x1a7eb2){return _0x5ed2db(_0x377d08,_0x1a7eb2);},'BoaEu':function(_0x33d0d3,_0x2984c2){return _0x33d0d3===_0x2984c2;},'yQeoy':function(_0x3e02de,_0x154a1b){return _0x3e02de!==_0x154a1b;},'WFExR':_0x3452c7(0x383,0x24b,0x2ec,0x296),'wKClN':_0x1daa43(-0xc6,-0x10b,-0xae,-0x186),'rzNji':function(_0x2044f6,_0x54e129){return _0x2044f6!==_0x54e129;},'cWwCz':_0x1daa43(-0x122,-0x109,-0xa9,-0x185),'mrfRP':_0x1daa43(-0x15c,-0x10a,-0xa0,-0x8e)+'复。','phXsG':function(_0x5b5eda,_0x35413f){return _0x5b5eda(_0x35413f);},'CjVWg':_0x3452c7(0x39a,0x3c4,0x337,0x39e),'okSrK':_0x3452c7(0x307,0x2e1,0x2d6,0x368),'HjIdM':'3|4|5|1|2|'+'0','aMBHg':_0x1daa43(-0x1c8,-0x125,-0x8a,-0x1b4)+_0x1daa43(-0x6c,-0xdc,-0xfe,-0xa6)+_0x1daa43(-0x129,-0xbd,-0x116,-0xa6),'hMgam':_0x1daa43(-0xb8,-0x49,0x27,-0xac)+_0x1daa43(0xb,-0xf,0x70,0x29),'vyBNz':_0x1daa43(-0x67,-0xfb,-0x169,-0x19b),'yAYiq':'YQEAU','uASaT':_0x1daa43(0x31,0x0,-0x41,-0x77),'iJCOO':function(_0x398c32,_0x2f7b1e){return _0x398c32===_0x2f7b1e;},'BAUwl':function(_0x11bd68,_0x5b1b97){return _0x11bd68===_0x5b1b97;}},{prompt:_0x4b5e99,id:_0x403bc8}=_0x4ca745;if(_0x4a5053[_0x3452c7(0x39e,0x392,0x335,0x3cb)](!_0x403bc8,!_0x4b5e99))return;currentLLMRequestController&&(_0x4a5053[_0x3452c7(0x387,0x329,0x2e4,0x2b5)](_0x4a5053[_0x3452c7(0x285,0x240,0x2d3,0x312)],_0x4a5053['FvAwK'])?_0x155bb4(_0x3c6216):(currentLLMRequestController['abort'](),toastr['info'](_0x4a5053['LtjyN'])));currentLLMRequestController=new AbortController();const _0x2e1403=currentLLMRequestController[_0x3452c7(0x3f1,0x390,0x3d2,0x464)],_0x496329=currentLLMRequestController,_0x8ada17={};_0x8ada17[_0x1daa43(-0x162,-0x128,-0xc2,-0xd9)]=_0x4a5053[_0x3452c7(0x377,0x337,0x33b,0x3a9)],_0x8ada17[_0x3452c7(0x3ee,0x3eb,0x37c,0x381)]=TaskType[_0x1daa43(-0x4c,-0xb,0x27,-0xa0)],_0x8ada17[_0x1daa43(-0xf5,-0x55,0x27,0x24)]=_0x403bc8;const _0x42addc=taskQueue[_0x1daa43(-0x13b,-0xf2,-0xae,-0x4f)](_0x8ada17);llmTaskControllers[_0x1daa43(-0xd7,-0xbb,-0x13a,-0x2c)](_0x42addc,currentLLMRequestController),taskQueue[_0x3452c7(0x3ff,0x316,0x375,0x3d9)+'us'](_0x42addc,TaskStatus[_0x1daa43(-0x135,-0x127,-0x144,-0xc6)]),_0x4a5053['IhnDt'](startFabLoading);let _0x1c2287=![];_0x4a5053[_0x1daa43(-0x40,-0x94,-0xc0,-0x4c)](clearLog);function _0x3452c7(_0xff678b,_0x20ffea,_0x4e57ad,_0x26449a){return _0x460c88(_0x4e57ad-0x34f,_0x20ffea-0x1e5,_0x4e57ad-0x3f,_0x26449a);}function _0x1daa43(_0xd020fa,_0x14b8fb,_0x100101,_0x4d1fbf){return _0x371559(_0xd020fa-0x1bf,_0x14b8fb-0x1c1,_0x4d1fbf,_0x14b8fb- -0x192);}_0x4a5053['HouNG'](addLog,'=====\x20LLM\x20'+_0x3452c7(0x363,0x433,0x3d3,0x46b)+'=='),_0x4a5053['BcURy'](addLog,_0x3452c7(0x349,0x3ec,0x370,0x2ec)+_0x403bc8),_0x4a5053[_0x3452c7(0x2f2,0x39a,0x307,0x26c)](addLog,_0x3452c7(0x404,0x3a3,0x3b7,0x326)+':'),addLog(_0x4a5053[_0x1daa43(-0x78,-0x56,-0x46,-0xe9)](formatPromptForDisplay,_0x4b5e99));const {api_url:_0x1c4983,api_key:_0x28eebf,model:_0x2024b0,temperature:_0x4daa77,top_p:_0x5134a4,max_tokens:_0x482651}=_0x36a557;if(_0x4a5053[_0x1daa43(-0x4,-0x98,-0x39,-0x8d)](!_0x1c4983,!_0x28eebf)||!_0x2024b0){if(_0x4a5053[_0x1daa43(-0x170,-0xe9,-0x174,-0x109)](_0x4a5053[_0x3452c7(0x419,0x3eb,0x3c7,0x369)],_0x4a5053['HrQsO']))_0x4a5053[_0x3452c7(0x2cc,0x3a8,0x333,0x3cb)](_0x493d85,_0x4a5053[_0x1daa43(-0x9e,-0x57,-0x32,-0xcf)]);else{const _0x2c2a7a=_0x4a5053[_0x3452c7(0x2e4,0x2b8,0x2bc,0x35e)];toastr[_0x3452c7(0x37e,0x3df,0x3ba,0x420)](_0x2c2a7a);const _0x19300a={};_0x19300a[_0x1daa43(-0x3d,-0xb6,-0x66,-0xf7)]=![],_0x19300a[_0x3452c7(0x368,0x3fe,0x3e2,0x40d)]=_0x2c2a7a,_0x19300a['id']=_0x403bc8,eventSource[_0x1daa43(-0xe7,-0x54,-0xf3,-0x65)](eventNames['LLM_EXECUT'+_0x3452c7(0x334,0x345,0x2c6,0x261)],_0x19300a);return;}}const _0x5a84d6=_0x4a5053[_0x3452c7(0x3b0,0x371,0x385,0x3b4)],_0x3c61b5=_0x1c4983['replace'](/\/$/,'');_0x2873b5&&_0x4a5053[_0x1daa43(-0xe8,-0xbf,-0xf5,-0x51)](_0x2873b5,_0x1daa43(-0x32,-0xc4,-0xf6,-0x7e)+_0x1daa43(-0xe5,-0xa5,-0x72,-0xe2));try{const _0x4ca52a={};_0x4ca52a[_0x3452c7(0x393,0x311,0x322,0x372)+_0x3452c7(0x320,0x34b,0x2d1,0x2fd)+'ce']=_0x1daa43(-0x13f,-0xf9,-0x179,-0x9d),_0x4ca52a[_0x1daa43(-0xb6,-0x102,-0xf5,-0x175)]=_0x3c61b5,_0x4ca52a['custom_inc'+_0x1daa43(-0xa4,-0xe8,-0x142,-0x128)+'rs']='Authorizat'+_0x1daa43(-0x5,-0x91,-0xb7,-0x73)+'er\x20'+_0x28eebf+'\x22',_0x4ca52a[_0x3452c7(0x334,0x397,0x356,0x30b)]=_0x2024b0,_0x4ca52a['messages']=_0x4b5e99,_0x4ca52a['temperatur'+'e']=_0x4daa77,_0x4ca52a[_0x3452c7(0x314,0x31d,0x2b0,0x34a)]=_0x5134a4,_0x4ca52a[_0x1daa43(-0x9d,-0x10f,-0x145,-0x128)]=_0x482651,_0x4ca52a[_0x1daa43(-0xc0,-0x2b,-0xad,-0x57)]=![];const _0x4a2f4c=_0x4ca52a,_0x423604=await _0x4a5053[_0x1daa43(-0x17,-0x9f,-0xa5,0x1)](fetch,_0x5a84d6,{'method':'POST','headers':_0x4a5053[_0x3452c7(0x385,0x3f9,0x39c,0x412)](getRequestHeaders,window[_0x1daa43(-0xb1,-0xa2,-0xe4,-0x1b)]),'body':JSON['stringify'](_0x4a2f4c),'signal':_0x2e1403}),_0x1767a7=await _0x423604[_0x3452c7(0x253,0x34f,0x2a9,0x29b)]();if(_0x1767a7['error']){let _0x52eb35;if(_0x4a5053[_0x3452c7(0x2c4,0x22e,0x2c9,0x2ac)](typeof _0x1767a7['error'],_0x4a5053['EkyuJ'])&&_0x1767a7[_0x1daa43(0x8e,-0x13,-0x5a,-0x1d)][_0x1daa43(0x20,-0x5c,0x35,-0x36)]){_0x52eb35=''+_0x1767a7['error'][_0x1daa43(-0x5,-0x5c,-0x50,-0xe0)];const _0x77b743=[];if(_0x1767a7[_0x1daa43(0x7e,-0x13,0x3f,-0x79)][_0x1daa43(0x2f,-0x51,-0xc1,-0x20)])_0x77b743[_0x3452c7(0x2a7,0x348,0x2ad,0x286)](_0x1daa43(-0x12,-0x1c,0x35,0x48)+_0x1767a7[_0x1daa43(0x18,-0x13,-0x37,0x22)][_0x3452c7(0x2d7,0x307,0x37c,0x39e)]);if(_0x1767a7[_0x1daa43(0x65,-0x13,0x8,0x48)][_0x1daa43(-0x21,0xe,0x5d,0x5a)])_0x77b743[_0x3452c7(0x31a,0x234,0x2ad,0x289)](_0x1daa43(-0xd6,-0xc7,-0xaa,-0xaf)+_0x1767a7[_0x3452c7(0x42b,0x3ca,0x3ba,0x337)][_0x1daa43(-0x74,0xe,-0x7,-0x30)]);_0x4a5053[_0x1daa43(-0x18f,-0x123,-0x96,-0x153)](_0x77b743[_0x3452c7(0x3b2,0x323,0x3ac,0x353)],-0x175*0x8+-0x2*-0x177+0x8ba)&&(_0x4a5053[_0x3452c7(0x383,0x346,0x32a,0x305)](_0x4a5053[_0x1daa43(-0x83,-0x4f,-0xb9,0x3b)],_0x4a5053['wKClN'])?_0x52eb35+='\x20('+_0x77b743[_0x3452c7(0x399,0x2d0,0x313,0x2a4)](',\x20')+')':_0x4a5053[_0x1daa43(-0xdd,-0x69,-0x72,0x5)](_0x35ed9f,_0x42dc61));}else{if(_0x4a5053[_0x3452c7(0x372,0x280,0x2f5,0x2e4)](_0x4a5053[_0x1daa43(-0x3d,-0xcf,-0x82,-0x77)],_0x3452c7(0x33c,0x32d,0x390,0x3c7)))_0x52eb35=''+JSON[_0x1daa43(-0x4c,-0x2a,-0x8e,-0xa5)](_0x1767a7[_0x3452c7(0x328,0x3ed,0x3ba,0x388)]);else{let _0x77849c;if(_0x4a5053['yjoVS'](typeof _0x294268[_0x1daa43(0x89,-0x13,-0x93,-0x13)],_0x4a5053[_0x1daa43(-0xa8,-0x3c,-0xb5,-0x21)])&&_0x18be67[_0x1daa43(0x1,-0x13,-0x7f,0x19)][_0x1daa43(-0x33,-0x5c,-0x4d,-0x78)]){_0x77849c=''+_0x10095a[_0x1daa43(-0x9f,-0x13,-0x61,0x13)][_0x1daa43(0x17,-0x5c,0x17,0x49)];const _0x495b93=[];if(_0x65dd66[_0x1daa43(-0xa4,-0x13,-0x18,0x42)][_0x1daa43(-0x4d,-0x51,0xf,-0xe9)])_0x495b93[_0x1daa43(-0x1a6,-0x120,-0x9b,-0x119)](_0x3452c7(0x376,0x442,0x3b1,0x31e)+_0x4e95eb[_0x3452c7(0x377,0x3f5,0x3ba,0x40f)][_0x1daa43(-0x1,-0x51,-0x39,0x35)]);if(_0x686427[_0x3452c7(0x3ca,0x43b,0x3ba,0x31a)]['code'])_0x495b93[_0x3452c7(0x327,0x30c,0x2ad,0x293)](_0x3452c7(0x353,0x37c,0x306,0x39b)+_0xb1c053[_0x3452c7(0x438,0x455,0x3ba,0x379)][_0x3452c7(0x3ee,0x36d,0x3db,0x37e)]);_0x4a5053[_0x3452c7(0x317,0x318,0x2aa,0x2e6)](_0x495b93['length'],0x1d07+-0x19dd+-0x32a)&&(_0x77849c+='\x20('+_0x495b93[_0x1daa43(-0xe2,-0xba,-0x101,-0x107)](',\x20')+')');}else _0x77849c=''+_0x39a029[_0x3452c7(0x389,0x308,0x3a3,0x32f)](_0x250c7f[_0x3452c7(0x337,0x33c,0x3ba,0x404)]);throw new _0x520408(_0x77849c);}}throw new Error(_0x52eb35);}if(!_0x423604['ok'])throw new Error('请求失败:\x20'+_0x423604['status']+'\x20'+_0x423604[_0x3452c7(0x3d3,0x3f8,0x398,0x32a)]);const _0x23b663=_0x1767a7[_0x1daa43(-0x188,-0x10d,-0xbd,-0x192)]?.[0x2394+0x1*-0x2553+-0x1*-0x1bf]?.[_0x1daa43(-0xcc,-0x5c,-0x38,-0x56)]?.[_0x1daa43(-0xe5,-0x85,-0xaf,0x7)]||'';!_0x23b663&&toastr[_0x3452c7(0x247,0x305,0x2ac,0x343)](_0x4a5053[_0x1daa43(-0xbf,-0xd3,-0x14f,-0x33)]);_0x2873b5&&_0x2873b5(_0x23b663);addLog(_0x1daa43(-0x195,-0x122,-0x19b,-0x1b1)+_0x1daa43(-0x137,-0x12a,-0xbd,-0xf0)),_0x4a5053[_0x1daa43(-0x26,-0xbf,-0x14f,-0x7d)](addLog,_0x23b663),_0x4a5053['phXsG'](addLog,_0x1daa43(-0x122,-0x118,-0x12a,-0x14a)+_0x1daa43(-0x56,-0x1b,0xd,0x37)),taskQueue[_0x3452c7(0x321,0x332,0x2ef,0x368)+'sk'](_0x42addc,!![]),llmTaskControllers[_0x1daa43(-0xb1,-0xb9,-0x121,-0x14f)](_0x42addc);const _0x5b0917={};_0x5b0917[_0x3452c7(0x2b0,0x2f0,0x317,0x294)]=!![],_0x5b0917['result']=_0x23b663,_0x5b0917['id']=_0x403bc8,eventSource[_0x1daa43(0x6,-0x54,-0x7c,0x3b)](eventNames[_0x1daa43(-0xfe,-0xb1,-0x130,-0x117)+_0x1daa43(-0x181,-0x107,-0xaa,-0x6d)],_0x5b0917);}catch(_0xb731a8){if(_0x4a5053[_0x3452c7(0x294,0x2c7,0x2c9,0x369)](_0xb731a8[_0x3452c7(0x270,0x283,0x2a5,0x27e)],_0x4a5053[_0x1daa43(-0x8b,-0x12c,-0x173,-0x119)])){if(_0x4a5053['okSrK']!==_0x1daa43(-0x2f,-0x20,0x62,0x7)){const _0x202f8e=_0x4a5053['HjIdM'][_0x1daa43(0x45,0x4,-0x50,-0x64)]('|');let _0x1f13e8=-0x1c*-0x163+0xe5a+-0x352e;while(!![]){switch(_0x202f8e[_0x1f13e8++]){case'0':return;case'1':llmTaskControllers[_0x3452c7(0x367,0x30a,0x314,0x3b5)](_0x42addc);continue;case'2':const _0x39ecb1={};_0x39ecb1['name']=_0x4a5053[_0x3452c7(0x21b,0x2e6,0x2a1,0x21c)],_0x39ecb1[_0x1daa43(-0x83,-0x5c,-0xa0,-0xbd)]=_0x1daa43(0x1a,-0x83,-0xb4,-0x2c)+_0x3452c7(0x2aa,0x312,0x2a4,0x2fa);const _0x4c94e6={};_0x4c94e6[_0x1daa43(-0xaf,-0xb6,-0x34,-0x54)]=![],_0x4c94e6[_0x3452c7(0x3d9,0x3fd,0x3e2,0x35e)]=null,_0x4c94e6['id']=_0x403bc8,_0x4c94e6['error']=_0x39ecb1,eventSource[_0x3452c7(0x33f,0x310,0x379,0x345)](eventNames[_0x3452c7(0x27c,0x383,0x31c,0x322)+'E_RESPONSE'],_0x4c94e6);continue;case'3':_0x1c2287=!![];continue;case'4':console[_0x1daa43(-0x1ac,-0x12f,-0x172,-0x16e)](_0x4a5053['aMBHg']);continue;case'5':taskQueue[_0x1daa43(-0x46,-0x58,-0xa3,-0x17)+'us'](_0x42addc,TaskStatus[_0x1daa43(-0x6,-0x97,-0x2f,-0x73)]);continue;}break;}}else _0x3f009e[_0x1daa43(-0x10e,-0x6e,-0xfe,-0xa3)](),_0xc31e42['delete'](_0x41498b),_0x32c484[_0x3452c7(0x224,0x272,0x29e,0x293)](_0x1daa43(0x37,-0x24,0x1f,0x79)+'消:\x20'+_0x4a0651);}console[_0x3452c7(0x3a9,0x3b8,0x3ba,0x3ef)](_0x4a5053[_0x1daa43(-0x16b,-0x131,-0x188,-0xe7)],_0xb731a8);const _0x401f07=_0x1daa43(-0xf4,-0x105,-0x197,-0xb3)+_0xb731a8['message'];if(_0x2873b5){if(_0x4a5053[_0x1daa43(-0x83,-0x117,-0x178,-0xfb)]===_0x4a5053[_0x3452c7(0x2fe,0x35b,0x2b6,0x268)])_0x4a5053['suOEt'](_0x2873b5,_0x401f07);else{const _0x3be2ae=_0x4ed37e[_0x3452c7(0x3ca,0x3e2,0x3bd,0x3b3)]?.[_0x1daa43(0x63,0xf,0x9f,0x9d)]||'';if(_0x3be2ae[_0x1daa43(-0x7e,-0x115,-0xa6,-0x167)](_0x4a5053[_0x1daa43(0x45,-0x19,-0x1e,0x28)])){const _0x24519a=_0x3be2ae[_0x1daa43(-0x6,-0x76,-0x92,-0x11)](/^data:([^;]+);/),_0x52f13b=_0x24519a?_0x24519a[0x1df4+0x1ca2+-0x3a95]:_0x4a5053['zKmAl'],_0x15d631=_0x3be2ae[_0x1daa43(-0x36,0x4,0x6e,-0x6d)](',')[-0x1880+0x2*-0xbc3+0x99b*0x5]||'',_0x219a96=_0x53643c[_0x3452c7(0x316,0x2cd,0x32d,0x3ba)](_0x4a5053[_0x1daa43(-0xf0,-0x82,-0x27,-0xd2)](_0x4a5053[_0x3452c7(0x362,0x320,0x34b,0x2d4)](_0x4a5053['USopp'](_0x15d631[_0x1daa43(0x49,-0x21,-0x2e,-0x35)],-0x19b*0x14+-0x2b*0xa3+0x3b80),0x5f+-0xab2+0x1*0xa57),-0x42+-0x2048*-0x1+-0xe03*0x2));_0x17529f[_0x3452c7(0x2db,0x276,0x2ad,0x225)](_0x3452c7(0x428,0x392,0x395,0x3d5)+':\x20'+_0x52f13b+_0x3452c7(0x338,0x330,0x33a,0x3b3)+_0x219a96+_0x3452c7(0x3ab,0x33d,0x323,0x379));}else _0x51f5a9[_0x1daa43(-0xf4,-0x120,-0x144,-0xbf)](_0x1daa43(-0x149,-0xd6,-0x50,-0x123)+_0x3be2ae+']');}}toastr[_0x3452c7(0x366,0x43f,0x3ba,0x460)](_0xb731a8[_0x1daa43(-0x88,-0x5c,-0x90,-0x9c)]),taskQueue[_0x1daa43(-0xae,-0xde,-0x111,-0x143)+'sk'](_0x42addc,![]),llmTaskControllers[_0x1daa43(-0x125,-0xb9,-0x43,-0xbb)](_0x42addc);const _0x1768f9={};_0x1768f9[_0x1daa43(-0x11d,-0xb6,-0xc6,-0xbb)]=![],_0x1768f9[_0x3452c7(0x387,0x399,0x3e2,0x39c)]=_0x401f07,_0x1768f9['id']=_0x403bc8,eventSource[_0x1daa43(0x30,-0x54,-0x7b,-0x12)](eventNames[_0x1daa43(-0x151,-0xb1,-0xb,-0xfe)+_0x3452c7(0x2cb,0x27d,0x2c6,0x361)],_0x1768f9);}finally{if(_0x4a5053[_0x3452c7(0x293,0x2d7,0x2b7,0x2a9)]!==_0x4a5053[_0x1daa43(-0x5e,-0xc8,-0x13f,-0xb1)])_0x4a5053[_0x1daa43(-0x64,-0x7f,-0x10,-0x3)](currentLLMRequestController,_0x496329)&&(currentLLMRequestController=null),(!_0x1c2287||_0x4a5053[_0x3452c7(0x29f,0x36b,0x2d0,0x2bf)](currentLLMRequestController,null))&&_0x4a5053[_0x3452c7(0x36c,0x397,0x339,0x2ed)](stopFabLoading);else{const _0x3edd64=_0x4cd699[_0x3452c7(0x420,0x445,0x3bc,0x382)]()[_0x3452c7(0x246,0x343,0x2c7,0x35b)](0x183a+0x7cd*0x2+-0x27ce),_0x526b78=_0x135ebf[_0x3452c7(0x47f,0x3e3,0x3df,0x3d3)](_0x3edd64),_0xde9295=_0x526b78[_0x1daa43(-0x155,-0x10d,-0x13b,-0x13d)]?.[-0x26c+0x4b0+0x74*-0x5]?.[_0x1daa43(0x56,-0x5,0x1b,-0x3a)]?.[_0x3452c7(0x2b0,0x3ca,0x348,0x348)];_0xde9295&&(_0x5be707+=_0xde9295,_0x15515a&&_0x4a5053[_0x3452c7(0x36a,0x408,0x382,0x427)](_0xcf0246,_0x54a846));}}}export function createGetPromptHandler(_0x162bc8,_0x462d6f){const _0x227342={'jTqZK':function(_0x5b0020,_0x29482b){return _0x5b0020(_0x29482b);},'XgeFS':_0x40a149(0x48f,0x4d4,0x461,0x4d6)};function _0x40a149(_0x213c92,_0xb96e4b,_0x582a46,_0x34ec35){return _0x371559(_0x213c92-0x76,_0xb96e4b-0xd2,_0xb96e4b,_0x582a46-0x33e);}return function(_0x9090fa){function _0x1753ab(_0x5ea38c,_0x493f7c,_0x258a4e,_0x5b86b9){return _0x40a149(_0x5ea38c-0x10a,_0x258a4e,_0x5b86b9- -0x34d,_0x5b86b9-0x51);}const _0x4bb73c={'eFFVq':function(_0x2d70b7,_0x1ecf94){function _0xd9a9c4(_0x166ff3,_0x5e0ce0,_0x25b3fc,_0x595f01){return _0x1725(_0x5e0ce0-0x28e,_0x595f01);}return _0x227342[_0xd9a9c4(0x380,0x3a2,0x420,0x353)](_0x2d70b7,_0x1ecf94);}};function _0x3995f7(_0x1ac6f2,_0x270d37,_0x2dddb3,_0x595795){return _0x40a149(_0x1ac6f2-0x5e,_0x595795,_0x270d37- -0x5,_0x595795-0xc5);}if(_0x227342[_0x1753ab(0xc8,0xd9,0xff,0xb8)]!==_0x1753ab(0x11d,0xa4,0x165,0xd7)){const {id:_0x452344}=_0x9090fa;if(!_0x452344)return;const _0x2c2164=REQUEST_TYPE_NAMES[_0x162bc8]||_0x162bc8;console[_0x1753ab(0x44,-0x41,0x98,0x54)](_0x1753ab(-0x11,0xa8,0xa4,0x75)+_0x3995f7(0x449,0x491,0x43c,0x473)+_0x2c2164+(_0x3995f7(0x4b1,0x427,0x48b,0x408)+_0x3995f7(0x561,0x4c8,0x467,0x492))+_0x452344+')');const _0xca1c5a=_0x227342[_0x3995f7(0x356,0x3b2,0x366,0x32e)](buildPromptForRequestType,_0x162bc8),_0x2f155c={};_0x2f155c[_0x3995f7(0x508,0x476,0x514,0x496)]=_0xca1c5a,_0x2f155c['id']=_0x452344,eventSource[_0x1753ab(0xab,0x199,0x108,0x12f)](_0x462d6f,_0x2f155c);}else _0x4bb73c['eFFVq'](_0x48f10f,_0x3995f7(0x46c,0x452,0x46b,0x4b9)+_0x445bb0+_0x3995f7(0x4b2,0x423,0x387,0x49b));};}function _0x371559(_0x3ae679,_0x35b7b4,_0x2f2f7b,_0x4be09c){return _0x1725(_0x4be09c- -0x9b,_0x2f2f7b);}export function createExecuteHandler(_0x5f1290,_0x396c68,_0x4acd1e=null){const _0x417c28={'PHraB':function(_0x4da809){return _0x4da809();},'gAAXg':function(_0x571ac3,_0x3696aa,_0x3e5d57,_0x9890d9,_0x4b074d){return _0x571ac3(_0x3696aa,_0x3e5d57,_0x9890d9,_0x4b074d);}};return async function(_0x6e20da){function _0x583e91(_0x1cdcce,_0x3b0da5,_0x47a967,_0x5b41d8){return _0x1725(_0x5b41d8-0x2bb,_0x47a967);}const _0x461a9b=_0x4acd1e?_0x417c28[_0x583e91(0x464,0x53e,0x403,0x4a6)](_0x4acd1e):null;await _0x417c28['gAAXg'](executeTypedLLMRequest,_0x6e20da,_0x5f1290,_0x396c68,_0x461a9b);};}