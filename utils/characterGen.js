(function(_0x57aa12,_0x27d279){function _0x16cce4(_0x28ecf6,_0x190f18,_0x2f7ec1,_0x15e88f){return _0x1a7f(_0x15e88f-0x1c3,_0x190f18);}const _0x55a8ef=_0x57aa12();function _0x466c99(_0x1df9a4,_0x1210e1,_0x2dd222,_0x2e729f){return _0x1a7f(_0x1210e1- -0x304,_0x2e729f);}while(!![]){try{const _0x3d2fb0=parseInt(_0x466c99(-0xe8,-0xd2,-0x13a,-0xc4))/(-0x230d+-0x155b+-0x80f*-0x7)+parseInt(_0x16cce4(0x45f,0x419,0x384,0x39f))/(0xe3*-0x1+-0x17b+-0x1*-0x260)*(-parseInt(_0x16cce4(0x498,0x47b,0x3c8,0x49d))/(-0xa59+-0x101f+-0x1a7b*-0x1))+-parseInt(_0x16cce4(0x45b,0x4e1,0x520,0x452))/(-0xf70+0x421*-0x7+0x2c5b)*(-parseInt(_0x16cce4(0x3f3,0x455,0x3a4,0x3f9))/(-0x157+0xce3*0x1+-0xb87))+parseInt(_0x466c99(-0x18,-0x4a,-0xe8,-0x1))/(-0x121f+-0x1*0x247d+0x36a2)+-parseInt(_0x16cce4(0x489,0x445,0x410,0x495))/(0x9f5+0x231d+0xd*-0x377)+-parseInt(_0x466c99(-0x60,-0x94,-0x17,0xe))/(-0x16d*-0x16+0x156+0x2b9*-0xc)+parseInt(_0x466c99(-0x14e,-0xd0,-0x10b,-0x13d))/(0x1*-0xbf1+0x5*0x137+0x5e7);if(_0x3d2fb0===_0x27d279)break;else _0x55a8ef['push'](_0x55a8ef['shift']());}catch(_0x576444){_0x55a8ef['push'](_0x55a8ef['shift']());}}}(_0x5153,0x680c9*0x1+0x4d09b*0x1+-0x3*0x27268));const _0x3c343c=(function(){let _0x2247d2=!![];return function(_0x5b45af,_0x175a7e){const _0x5a87b0=_0x2247d2?function(){function _0x505fe0(_0xbb2095,_0x2faf13,_0x59baac,_0x4d850f){return _0x1a7f(_0x59baac- -0xd5,_0x4d850f);}if(_0x175a7e){const _0x27afbe=_0x175a7e[_0x505fe0(0x1e4,0x112,0x1a0,0x181)](_0x5b45af,arguments);return _0x175a7e=null,_0x27afbe;}}:function(){};return _0x2247d2=![],_0x5a87b0;};}()),_0x2510c8=_0x3c343c(this,function(){function _0x1bd53b(_0x1f1467,_0x1eb73a,_0x112c0c,_0x22dee3){return _0x1a7f(_0x1f1467- -0x294,_0x112c0c);}function _0x37551e(_0x508d6e,_0x430371,_0x538519,_0x8501b4){return _0x1a7f(_0x430371- -0x1f,_0x508d6e);}return _0x2510c8[_0x37551e(0x14e,0x133,0x1ae,0x182)]()[_0x37551e(0x2c7,0x2b1,0x2b5,0x375)](_0x37551e(0x2cf,0x203,0x23e,0x22a)+'+$')[_0x1bd53b(-0x142,-0x6e,-0xe3,-0x67)]()[_0x1bd53b(-0x26,0x2a,-0x4e,-0x53)+'r'](_0x2510c8)[_0x1bd53b(0x3c,0x70,-0x6b,0x4c)](_0x1bd53b(-0x72,-0xc6,-0x83,-0x2f)+'+$');});function _0x5153(){const _0x6fa22c=['D2fYBMLUzW','5PYa57UiifbYB21WDa','wfzcrum','t3PuwLm','tur3B20','Cefkr0u','vhjfteW','AxrLBq','B3nnCva','8j+oQcdOVPpLHAxNLj/MIjdPNidMSyi','C29gAwG','ywqTBgfIzwW','Aw5JBhvKzxm','CMvTB3zL','CKLVD3O','zgvMyxvSDenOyq','EgfMwg4','r2vUxsdLT7lLSiy','CxvWCLy','zKLtD0y','ue9ou0u','zgvTyw5KoG','C3ferKG','igjVB2SGy29UDa','quj6rhu','r2vUxsbtDgfYDa','Aev2Chm','rMzKuvC','zMHAD0G','DgfYz2v0','vgjwvfa','y29UzMLYBq','rhPhyxe','CKzpruq','Dg9Y','zwTPr1m','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','vvfOrvu','qxP3DM8','r2jqC3q','Aw1Hz2vFDxjS','BMDZlwHVBgrLCG','CMvNzxHuzxn0tq','tLrkzMm','vfLLD2K','CKXoBgG','ugTTrui','zxjLzcb3B3jSza','s3jJBxq','yxjLyq','zMeTC29SAwqGzG','zxfTzLm','Cg9WDxaTB3zLCG','Bgf5','wuf2v00','vgz2s2u','zM9YigrLyNvNzW','6iMYl+ACJEIJHEIUVUIUOEIVT+AXGI4U','vwHAyxq','kcGOlISPkYKRkq','teXnioIVT+AXGUwKSEI0Pq','EuTAzLq','ihjLCxvLC3qUlG','6kEs6iMYl+ACJEIJHEIUVUIUOEwKHoEqHUwUJa','uNHhz0q','C3r5Bgu','D3jHChbLCG','ys1WBhvZiJ48lW','zhPNCgu','C3bHBG','qw9fCKS','rvnjr05FuKvtua','DhLWzq','tMjMEeu','BKrOwu8','mtu3nde4B3DhCgHN','C1f5De4','mZa1nduYohzzCvjyAW','q090D1m','mJiWnvnWr3zzwa','t25vrgW','Aw5NoG','6i635y+w6kEs6iMY6k6+6k6H5O+q56s66k+n6lAf','Cg9WDxaTAw1Nlq','AgDdy0m','zw5LCG','rMTtCMC','ufjptvbux1jfuq','BwvZC2fNzq','tuPMsfC','z01UrMG','rw9tzhK','DhjPBq','DvDmzw8','q1HUuge','Aw1Hz2vZ','B25Z','BuXZAwi','yu9TEK8','Cg9WDxaTDgL0Ba','5OgV57sI5BYv55sO5lQo6zMe5yQG5zU+54MhoG','suq6ia','ihbYB21WDdO','s2PoDMe','rhvAsuC','AwLQt20','DgzUvw8','zgL2','r1LWAwO','DgzPDcb0ywDZia','Aw5Uzxjive1m','y2XHC3noyw1L','u2fxuLG','ywqTC2vJDgLVBG','Cg9WDxaTyNvIyG','Dg9W','C1rUtMO','wgXqBKu','t0LVseG','Chvbq00','r1rnrMC','B3vXDfi','ywrK','vg5bsgm','zw50oG','qufQDg0','Ce5swg8','y0XHyMW','r2vUxsbszxf1zq','sffnAfK','CuTeEwi','r2vUxsbsyxCGta','C3rHCNrZv2L0Aa','rwHqy2m','Bg9N','y29UC3rYDwn0BW','t0rjq2S','ndi1ndGWv0HIrLnU','DeXPC3rLBMvY','wKPkwum','i3nLBMrFzM9YBq','tNjqD0q','yxbWBhK','tLL3v2K','uxLnqNm','CM5Uuum','rvnu','y3HYD0W','sKjJDLu','y2HHCL9KzxnPzW','BNLdqxm','yxbWzw5Kq2HPBa','sM1usuO','r3PMsLC','r2vUxsbvC2vYia','z2vcA00','D2LHy0i','Bgnbugi','iow8OowBVUEjHW','rhv0AKS','r2vUxsdMRApLIjNMTyVOR5xMQke','r2vUxsboBYbJAa','tvjPDhi','8j+NQIdMRApLIjNMTyVOR5xMQkhLVi/LT7lLKk8','uuvHENu','yxbqy0S','y2HHCMfJDgvYCW','y3jLyxrLrwXLBq','mtuXnMvpEuLACa','5OgV5zcooG','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','54k55yE75lIk5PA55OYj6zkU5RE75yQG5y+c6icd','z0XIzhq','yLbSzMG','Ae1eCLO','C3jJ','zxjYB3i','BxbdqNG','5PYQ6io96i635y+w5lIk5lIl5PAh5yAf5A65','zgvZAwDUieXmtq','DgLTzw91De1Z','sNLyyuC','q0jkuxm','ruXtAhK','CgXHy2vOB2XKzq','qvbXugu','CMfUzg9T','zev6D3G','B1PAANq','l3bUzZTIyxnLnG','Cu9VwNK','t05trq','EhzeDMu','Aw1N','5Rgc6lAf5PE2','y3rYBeTLEq','BgvUz3rO','w3nOB3DvC2vYra','yLr2te8','EKX4D1y','igrLC2LNBIbWCG','Avnpuw8','rxnJyxbL','s3HTAvi','Aw1Hz2uV','yu5Ws0y','yuziv2u','w2nOyxjHy3rLCG','CKrLBwfUza','wwvPuMm','zc1VDMvYBgf5','mtaXnJa0vu1Ms01r','Cg9WDxaTyNv0Da','A2v5zg93BG','C2L6zq','rvbTCfu','uxftwxy','yLvtB3K','Cvzgvg0','8j+tJIdLJ4lOGipLM77NIyFVViJLJ6/PGiNVViK','vuvtva','CM9Szq','uujgAKe','ihjLCxvLC3qGka','D0PuBwi','zurqvxa','t0XqEfa','ufjptvbux1jfuW','DwT1u2e','Dgv4Da','qLrWtgm','teXnioI/LowBNUE7K+AENos4UUEPUG','t0XlBvO','C2vHCMnO','DMfYAwfIBgvZ','mJeWnZa1nKDgz1bRtq','DgHLihjLCxvLCW','C0jkte4','Dgv4DgfYzwe','B25SB2fK','wffrBKm','Dgv4DenVBNrLBG','ywqTAgvHzgvY','mtK4mte0ANPuz01S','Cg9WDxaTyNrUlq','CvvAse0','ywqTyNrU','r2vUxsbdAgfYyq','y3rLzcbKyxrHoG','wvnMCMW','tKvYsxK','BwfW','uwHvsfC','y2XVC2LUzW','qMXIrKq','r1r2sMO','Aw5WDxq','tLHQDgy','lsdLKi7NU63MK43KVzZLT7lOT7pOV4C','DMPot1i','r2vUxsbfEgvJDq','y2fUy2vSBgvKia','BMfTzq','wgvPDLy','z2u6','5PYn6kof5zU+54Mh5AsX6lsLoG','C2HAzMi','y2XPy2S','Eg1ZCNe','zw1PDa','C3vJy2vZCW','BM1RzKu','tLbSyLK','DxjS','zMLSzq','A2v5','Evros1m','6kEs6iMY5PYn6kof5y+c6icd5zU+54Mh','r2vUxsdLKiJLUBBNM7JPGRVMTOG','C3qTy2HHDhu4lq','uvvis1G','vxjdqvO','v1rVAgi','quDcC1m','rvnOteK','r2vUxsbfCNjVCG','uLrlvwm','rvnjr05Fr0vuxW','ywrKrxzLBNrmAq','r2vUxsbmte0GCG','tNfXr2m','ChjVBxb0','Ee5druS','ywnJzxb0','CMfUzg9Tvvvjra','6kEs6iMY6k6+6k6H6k+35Rgc5AsX6lsLoIa','Dg9tDhjPBMC','DMfSDwu','B3HsswC','B21WDcaOsuq6ia','BfPezhi','zxnWB25ZztO','rKPRrui','6kkR5l2/55sO77YA','BYbYzwfKigLTyq','z3nVuxe','DwTrEei','Cg9WDxaTDxbSBW','vKvfyLy','zM9YrwfJAa','DNPoC0S','B2ror2C','EKXorKC','BNvmzwW','zgf0ytPPBwfNzq','rw50zxi','zgv0ywLS','s1zlzNK','teXnioIVT+AXGU+8Jos7HEwXLEEKUG','CMvTB3zLtgLZDa','y3rLCIb0CMLNzW','zgvSzxrL','C3rVCfbYB3bHzW','uvDMEuS','y2XHC3nmAxn0','y2HHDe1LDgfKyq','s0fUEK8','rfjSEw4','DxbSB2fKzwqGAq','r2vUxsbfEhrYyq','rgHlvNu','DxnLCG','5BEY5RE75yQGia','y29UDgvUDa','yLzhB0K','CMvHzefZrgf0yq','s1PdtKu','wuPezfG','qvn1B1q','Awr6y2e','EMH2AKu','zM91BMqGAw4GBW','rezVDMO','zMPLrKW','DLztyxG','Aw1Hz2uVkG','ChvZAa','C2XPy2u','v0ftEwW','yM9KEq','v1jxrwe','Bw9IAwXL','rKfvwxq','qwHXBgW','Aw5MBW','5BYG6kEs6iMYl+ACJEIJHEwBVUEjH+MzHowkOa','s0vhs00','thf4ANi','55sO77YA5BEY5ygC5Q2I6kEs6iMY6k6+6k6Hia','DxrWDxq','Dxrwt3u','D2fTrxa','Cg9WDxaTzw1WDa','zxrwCNq','B2jQzwn0','Awv3lwnVBNrHAq','zLfQC2S','Bw55CKm','Cg9WDxaTChjLDG','C3rPBMCGy2HHCG','r2vUxsbdB250zq','y2fUy2vS','Es1OAw50','CKDPt3O','ENf3AuS','r2vUxsdMLlBPM4BOP5lOIBiV','zhLmvLu','Ewnrvw8','wgrSEee','Cu5zq3K','ruDLD1q','vvvrz1m','zKj1whq','C3rYAw5N','5BYG5zU+54Mh6zMe5yQG5yIW5RAi5OgV57sI5BYv','t2Pkr1O','yNv0Dg9U','zw1HBMrqB3b1Ca','tKDxA0e','tffUB3y','B2rL','6iMY5OIw5PYn6kof55Qe5yw35l2t6zYa5Rgc','C3vIC3rYAw5N','DgvZDe1Vzgu','5l6l5AAc77YA55sF5OIq5lIa5lIQ56M/552a5y+K','yxv0BW','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','BwfNzxmGy291BG','y1rorNO','y2HHBMDL','5y+c6icd5zU+54Mh','ChzjwMS','z2v0qM91BMrPBG','B2Tfrhy','DhzJweO','s3HmBgC','De94CMO','Bwf4sgvPz2H0','uNDuBvO','5PYQ5zYOieXmtsdOVPpLH7RKUk0','B3nvD2C','z0nSAwvUDfjLyW','EKLZBuG','C3rLBMvY','B3v0zML0CW','5yIW5RAi5OgV57sI5BYv','DNnLsLa','y25gzfm','te0GB3v0Chv0ia','Euvdswe','ywfzqvq','6Aoo5Rgj5PYn55Qe5Bcr5AwZ6kEs6iMY77Ym5RIP','CMvZDwX0','teXnx0niqvjFra','u3PSzM8','AM9PBG','AxnbCNjHEq','r2vUxsdMTyVOR5xMQkhLVi8G','zw50','q3fyA1K','r0jWu3O','t0zrt3m','swHUv2W','CMvTB3zLrxzLBG','mM5bvgLUEq','5BEY6lEZ6l+h','C3bSAwnL','r3PUA28','yMfZzty0','EKrPAw8','yMXkEfa','CxvLCNLtzwXLyW','zhzeAKS','yxjHy3rLCI9VDq','seXZr28'];_0x5153=function(){return _0x6fa22c;};return _0x5153();}_0x2510c8();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{getElContext,processWorldBooksWithTrigger}from'./promptReq.js';import{extractCharacterAndOutfitTags,handleExtractedData}from'./newline_fix.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText,getEnabledCharacterImages,getEnabledOutfitImages,getCommonCharacterImages}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';function _0x33c368(_0x33ee5f,_0x313ca9,_0x120474,_0x7829c7){return _0x1a7f(_0x33ee5f-0x47,_0x313ca9);}import{buildPromptForRequestType}from'./settings/llmService.js';import{isMobileDevice,removeThinkingTags}from'./utils.js';import{mergeAdjacentMessages,replaceAllPlaceholders}from'./promptProcessor.js';function showUserDemandPopup(){function _0x9843bd(_0x412308,_0x31aa29,_0x505332,_0x865d07){return _0x1a7f(_0x31aa29- -0x356,_0x505332);}const _0x5f65c2={'dzgpe':function(_0x412c6f,_0x222c1d){return _0x412c6f(_0x222c1d);},'QqSYv':function(_0x32260e,_0x2fb96b){return _0x32260e===_0x2fb96b;},'UrCAZ':_0x19ff7f(0x1dc,0x23c,0xff,0x1ac),'CBJQs':_0x19ff7f(0x21c,0x16c,0x2be,0x1d9)+'图片','KxmiR':'st-chatu8-'+'popup-empt'+_0x19ff7f(0x128,0x1c1,0x1a6,0x7a),'ZtIoQ':'st-chatu8-'+_0x19ff7f(0x1c4,0x16b,0x22a,0x254)+'count','ouqtR':_0x9843bd(-0x48,-0x11d,-0x1cd,-0x157)+'时','TlNfD':function(_0x50ec70,_0x2f9e1c,_0x32dc74){return _0x50ec70(_0x2f9e1c,_0x32dc74);},'RwTmZ':function(_0x21e2a1,_0x502f3a){return _0x21e2a1===_0x502f3a;},'Smxor':'PkmEB','NrPwD':_0x9843bd(0x13,-0x72,-0x108,-0x95),'BTpLc':function(_0x2a7700,_0x56e352,_0x593fc5){return _0x2a7700(_0x56e352,_0x593fc5);},'ukuSa':function(_0x3c17f3,_0x4d13aa){return _0x3c17f3===_0x4d13aa;},'SaWRX':_0x19ff7f(0x246,0x311,0x2ba,0x1aa),'quprV':'st-chatu8-'+_0x9843bd(-0x126,-0x11c,-0x1c7,-0x1a1)+_0x9843bd(-0x122,-0x168,-0x1d8,-0xc4),'idzca':_0x9843bd(0x7,-0x58,0x77,-0xe6)+_0x9843bd(-0x90,-0x11c,-0x1d3,-0x98)+_0x19ff7f(0x1b3,0xf0,0x10f,0x1d4),'XeivV':_0x19ff7f(0x232,0x27a,0x1db,0x19e),'FAUYt':_0x19ff7f(0x27c,0x23c,0x291,0x1b8),'CXnPa':_0x9843bd(0x3f,-0x8a,-0x163,-0xb7),'FkSrg':'st-chatu8-'+_0x19ff7f(0x1c4,0x11d,0x18c,0x1ae)+'name','eqmfS':_0x19ff7f(0x117,0x1d9,0x132,0x93)+'到消息索引','etVrt':function(_0x4b573a,_0x59c1e9){return _0x4b573a(_0x59c1e9);},'TNpxu':function(_0x5d0889,_0x40577a){return _0x5d0889!==_0x40577a;},'apPcK':_0x19ff7f(0x148,0x19f,0x214,0x91),'odNGg':function(_0x32a7a8,_0x2ee047){return _0x32a7a8===_0x2ee047;},'HCWez':_0x19ff7f(0x10c,0x12e,0xb1,0xe7),'RNYay':function(_0x246178,_0x40c946){return _0x246178(_0x40c946);},'CqXkY':_0x9843bd(-0x9,-0xaa,0x1,-0x17f)+_0x9843bd(-0x12d,-0x1a9,-0x24d,-0x1af)+']\x20Failed\x20t'+_0x9843bd(-0x146,-0x1fc,-0x174,-0x167)+_0x9843bd(-0xf9,-0x67,0x1c,0x30),'NErIy':function(_0x5657dd){return _0x5657dd();},'rnrYi':function(_0x4b7697,_0x2a6a2d){return _0x4b7697-_0x2a6a2d;},'hZRhy':'#top-setti'+_0x9843bd(-0x6b,-0x146,-0xf9,-0x1bf),'JBcvU':function(_0x1ac065,_0x52cace){return _0x1ac065+_0x52cace;},'ZCfRv':_0x19ff7f(0x1fd,0x15f,0x285,0x257),'YAvWM':_0x9843bd(-0x33,-0xea,-0x3c,-0x179),'wiacB':function(_0x22f730,_0x117c12){return _0x22f730-_0x117c12;},'OjJGZ':'user-deman'+_0x9843bd(-0x95,-0x9d,-0x104,-0x103),'SIXqq':_0x9843bd(-0xe4,-0x58,0x4b,0x7b)+_0x19ff7f(0x1a5,0x140,0xd2,0x26d)+_0x9843bd(-0xfd,-0x13a,-0xc5,-0x119),'fQjsk':_0x9843bd(-0xff,-0x58,-0xc1,0x3f)+_0x9843bd(-0x8a,-0xfd,-0x131,-0x156)+'le','rIowz':_0x9843bd(-0x12d,-0x1cd,-0x1ba,-0x19e),'sirhk':_0x19ff7f(0x288,0x21f,0x323,0x1d3)+_0x9843bd(-0xf6,-0x10c,-0x1cc,-0x13d)+'e','QUHKX':'请描述您希望生成的角'+_0x19ff7f(0x13b,0x17f,0x20e,0xf9),'xmsrq':_0x19ff7f(0x288,0x2b8,0x311,0x250)+'popup-hint','KEGKM':_0x19ff7f(0x13e,0x183,0xe2,0x10d)+_0x19ff7f(0x159,0xb8,0x137,0x9c)+'柔可爱...','lZDdr':_0x9843bd(0x1f,-0x58,-0xb3,-0x9d)+'popup-text'+_0x9843bd(-0x143,-0x13e,-0x20b,-0x1df),'lmxWl':_0x9843bd(-0x34,-0x58,-0x25,0x2f)+'popup-uplo'+_0x9843bd(-0x50,-0xfe,-0x153,-0xe1),'QBFjA':_0x19ff7f(0x288,0x2b8,0x30c,0x242)+_0x9843bd(-0x271,-0x1f9,-0x246,-0x210)+_0x19ff7f(0x263,0x19e,0x2c3,0x19e),'blJxP':_0x9843bd(-0x10f,-0x12a,-0x18e,-0xeb),'pjliX':_0x9843bd(-0x153,-0x94,-0x21,-0x22),'bTvLO':_0x9843bd(0x20,-0x58,-0xa,0x0)+_0x9843bd(-0x1af,-0x1f9,-0x23b,-0x2bd)+_0x19ff7f(0x17c,0x244,0x1e5,0x204),'sBJLN':'input','EShLI':_0x9843bd(0x35,-0x5d,-0xd5,-0xee),'Ahqll':_0x9843bd(-0x213,-0x1d3,-0x1e2,-0x135),'GTvJj':'none','KAnzO':'<i\x20class=\x22'+_0x19ff7f(0x1a3,0x202,0x1ad,0x20a)+_0x9843bd(-0xfb,-0x12c,-0x1b7,-0x6e)+'i>\x20添加图片','tSRGn':_0x19ff7f(0x288,0x1b8,0x2a6,0x221)+_0x19ff7f(0xe7,0x16e,0x93,0x8b)+_0x9843bd(-0x51,-0x79,-0x1e,0x4d),'xskxP':_0x19ff7f(0x143,0xba,0x1ee,0xc4),'LQnov':_0x19ff7f(0x288,0x1f8,0x2be,0x247)+_0x9843bd(-0xe3,-0x9b,0x38,0x1f)+_0x19ff7f(0x1d1,0x1d5,0x20a,0x120),'APqPe':'st-chatu8-'+_0x9843bd(-0x1f,-0x7b,0x2e,-0x10)+_0x9843bd(-0x1f8,-0x1b9,-0x16d,-0x20b),'pNRXo':_0x19ff7f(0x288,0x313,0x2fa,0x2c3)+_0x9843bd(-0x5,-0x7b,0x1,-0x2f)+_0x9843bd(-0x21a,-0x150,-0x1a6,-0x1be),'BlbFD':function(_0x2dcbc4,_0x52bbff,_0x4fc166){return _0x2dcbc4(_0x52bbff,_0x4fc166);}};function _0x19ff7f(_0x161c89,_0x3cd05f,_0xec68b5,_0x4f8e72){return _0x1a7f(_0x161c89- -0x76,_0x4f8e72);}return new Promise(_0x412d4e=>{const _0x4ae4a6={'aaYAT':function(_0x4d2ba5){return _0x4d2ba5();},'puACM':_0x5f65c2[_0x30c8e0(0x371,0x329,0x355,0x297)],'oxRIg':_0x5f65c2[_0x30c8e0(0x3b1,0x430,0x4b3,0x370)],'xafXn':_0x5f65c2[_0x25f20b(0x54c,0x5af,0x4bc,0x596)],'dEzwx':_0x5f65c2[_0x25f20b(0x6bd,0x68e,0x685,0x71c)],'KxLlg':_0x30c8e0(0x308,0x2dc,0x2b0,0x210),'DasYG':_0x5f65c2[_0x30c8e0(0x28f,0x2ba,0x350,0x27d)],'soFih':_0x5f65c2[_0x30c8e0(0x3d5,0x375,0x430,0x429)],'TYewi':function(_0x42ea2b,_0x21d027){return _0x42ea2b+_0x21d027;},'WUvgm':_0x5f65c2[_0x25f20b(0x60c,0x619,0x5d5,0x560)],'sTnNj':_0x5f65c2[_0x30c8e0(0x3ae,0x34a,0x3d2,0x283)],'fjeFL':function(_0x44b63b,_0x256425){function _0x27a3d5(_0x53eda6,_0x5c38e9,_0x50ae32,_0xa61262){return _0x25f20b(_0x5c38e9- -0x74a,_0x5c38e9-0x5f,_0x53eda6,_0xa61262-0xbe);}return _0x5f65c2[_0x27a3d5(-0x240,-0x1e6,-0x2bd,-0x1d0)](_0x44b63b,_0x256425);},'JmTIJ':_0x5f65c2[_0x25f20b(0x62f,0x5a7,0x69a,0x6ad)],'cxrwL':function(_0x59f77c,_0x13fe29){return _0x5f65c2['TNpxu'](_0x59f77c,_0x13fe29);},'ycQUo':_0x5f65c2[_0x30c8e0(0x3e8,0x3bc,0x415,0x3ff)],'tfnUo':function(_0x376939,_0xa78c6){function _0x18116f(_0x288d02,_0x21e70d,_0x155f72,_0x113e33){return _0x25f20b(_0x155f72- -0x506,_0x21e70d-0x1d0,_0x21e70d,_0x113e33-0x2b);}return _0x5f65c2[_0x18116f(0x2a,0x92,0x2a,0xcf)](_0x376939,_0xa78c6);},'cTNFz':_0x5f65c2['HCWez'],'zLxwV':function(_0x55c054,_0x37adc3){return _0x5f65c2['RNYay'](_0x55c054,_0x37adc3);},'NbfxE':_0x5f65c2[_0x25f20b(0x5a6,0x5f7,0x623,0x651)]},_0x11b2b4=_0x5f65c2[_0x30c8e0(0x43f,0x411,0x4a2,0x3dc)](isMobileDevice),_0x280d4d=[];let _0x5f4c3c=-0x2*0x1315+-0xe01+0x5*0xa71,_0x5735e6=_0x5f65c2['rnrYi'](window['innerHeigh'+'t'],0x7d3+-0x2705+-0x4*-0x7cf);if(_0x11b2b4){const _0x3f20c1=document[_0x30c8e0(0x2a5,0x313,0x304,0x3df)+_0x30c8e0(0x2d3,0x339,0x3d7,0x404)](_0x5f65c2['hZRhy']);if(_0x3f20c1){const _0x54cab0=_0x3f20c1[_0x25f20b(0x58b,0x5a9,0x5fc,0x5b3)+_0x25f20b(0x594,0x4c7,0x617,0x556)+'t']();_0x5f4c3c=_0x5f65c2[_0x25f20b(0x64a,0x5f6,0x6d2,0x627)](_0x54cab0['bottom'],-0x14b*0x1a+-0x10cd+-0x3275*-0x1);}const _0x44a5af=document[_0x25f20b(0x5b2,0x53c,0x534,0x5b3)+_0x25f20b(0x5d8,0x651,0x597,0x547)](_0x5f65c2['ZCfRv']);if(_0x44a5af){if(_0x25f20b(0x63b,0x5ec,0x65b,0x5ff)!==_0x5f65c2[_0x25f20b(0x5ec,0x644,0x5fc,0x68d)]){if(_0x3af7b6[_0x30c8e0(0x32c,0x2e3,0x2bc,0x30e)]){const _0x47da65={};_0x47da65[_0x30c8e0(0x22c,0x300,0x3c6,0x37c)]=_0x1bb573[_0x25f20b(0x59f,0x660,0x5f8,0x4c7)],_0x47da65[_0x30c8e0(0x321,0x2e3,0x215,0x204)]=!![],_0x5f65c2[_0x30c8e0(0x34b,0x35b,0x343,0x2a8)](_0x1a3866,_0x47da65);}else{const _0x37644a={};_0x37644a['result']=_0x205b95['result'],_0x37644a[_0x25f20b(0x582,0x4e1,0x4f5,0x5a3)]=![],_0x1a3062(_0x37644a);}}else{const _0x321be3=_0x44a5af[_0x30c8e0(0x272,0x2ec,0x263,0x387)+_0x25f20b(0x594,0x547,0x4f7,0x5a1)+'t']();_0x5735e6=_0x321be3['top']-(-0x1c52+-0x6b6+0x2312);}}}const _0xd1fbe3=_0x5f65c2[_0x30c8e0(0x334,0x3b3,0x401,0x2d9)](_0x5735e6,_0x5f4c3c),_0x4c99c4=document[_0x25f20b(0x65d,0x720,0x664,0x656)+_0x30c8e0(0x22d,0x306,0x27a,0x357)](_0x5f65c2[_0x30c8e0(0x38b,0x430,0x35f,0x375)]);_0x4c99c4['id']=_0x5f65c2[_0x25f20b(0x57a,0x608,0x4ab,0x51a)],_0x4c99c4[_0x25f20b(0x625,0x5cc,0x69d,0x6d1)]=_0x5f65c2['SIXqq'];const _0x37a8dd=document[_0x25f20b(0x65d,0x626,0x63a,0x69d)+'ent'](_0x5f65c2[_0x25f20b(0x6cf,0x717,0x710,0x71d)]);_0x37a8dd[_0x25f20b(0x625,0x692,0x683,0x694)]=_0x5f65c2[_0x25f20b(0x567,0x555,0x569,0x493)];_0x11b2b4&&(_0x37a8dd[_0x25f20b(0x53d,0x5c5,0x5f7,0x4f4)][_0x30c8e0(0x463,0x391,0x41f,0x38f)](_0x5f65c2[_0x25f20b(0x5c4,0x5d2,0x5ac,0x589)]),_0x37a8dd[_0x30c8e0(0x2c0,0x358,0x30c,0x27a)][_0x30c8e0(0x407,0x38a,0x3bf,0x460)]=_0x5f4c3c+'px',_0x37a8dd['style']['maxHeight']=_0xd1fbe3+'px');const _0x1a3131=document['createElem'+'ent'](_0x25f20b(0x621,0x6cf,0x5a9,0x56c));_0x1a3131[_0x30c8e0(0x4aa,0x408,0x3d8,0x433)+'t']=_0x30c8e0(0x377,0x320,0x2af,0x3f4),_0x1a3131[_0x30c8e0(0x3c6,0x386,0x451,0x2ae)]=_0x5f65c2['sirhk'];const _0x43cae7=document['createElem'+_0x30c8e0(0x24c,0x306,0x346,0x371)](_0x5f65c2['UrCAZ']);_0x43cae7[_0x30c8e0(0x341,0x408,0x3ee,0x365)+'t']=_0x5f65c2[_0x25f20b(0x6ce,0x6a6,0x7aa,0x6d2)],_0x43cae7['className']=_0x5f65c2[_0x30c8e0(0x4db,0x423,0x438,0x4c0)];const _0x240a96=document[_0x25f20b(0x65d,0x678,0x651,0x6f9)+_0x25f20b(0x5a5,0x577,0x60f,0x533)](_0x30c8e0(0x33e,0x405,0x41d,0x4d6));_0x240a96[_0x30c8e0(0x45e,0x3cf,0x2f6,0x2f3)+'r']=_0x5f65c2[_0x25f20b(0x55d,0x4b1,0x561,0x4a9)],_0x240a96['className']=_0x5f65c2[_0x25f20b(0x525,0x576,0x460,0x47c)];const _0x23facf=document['createElem'+'ent'](_0x5f65c2['UrCAZ']);_0x23facf[_0x25f20b(0x625,0x68d,0x564,0x626)]=_0x5f65c2['lmxWl'];const _0x2f5d0f=document[_0x30c8e0(0x31e,0x3be,0x34d,0x451)+_0x30c8e0(0x283,0x306,0x3aa,0x36b)](_0x5f65c2[_0x30c8e0(0x373,0x430,0x3cf,0x4cc)]);_0x2f5d0f[_0x30c8e0(0x3c4,0x386,0x37d,0x3e3)]=_0x5f65c2[_0x25f20b(0x694,0x61f,0x746,0x6b1)];const _0x2acc67=document[_0x25f20b(0x65d,0x667,0x5df,0x72f)+_0x25f20b(0x5a5,0x58b,0x4fa,0x5f3)](_0x5f65c2[_0x25f20b(0x5b1,0x63e,0x60a,0x4d7)]);_0x2acc67[_0x30c8e0(0x40b,0x408,0x4d3,0x359)+'t']=_0x5f65c2['pjliX'],_0x2acc67[_0x30c8e0(0x2c2,0x386,0x2e8,0x36f)]=_0x5f65c2[_0x30c8e0(0x379,0x3dd,0x3a5,0x40f)];const _0x53c9e1=document[_0x25f20b(0x65d,0x738,0x5a3,0x5ba)+'ent'](_0x5f65c2[_0x25f20b(0x6a3,0x681,0x737,0x5d8)]);_0x53c9e1['type']=_0x5f65c2[_0x30c8e0(0x456,0x433,0x3db,0x3f2)],_0x53c9e1[_0x25f20b(0x51e,0x59f,0x5f6,0x4f5)]=_0x5f65c2[_0x30c8e0(0x26d,0x2bb,0x232,0x306)],_0x53c9e1['multiple']=!![],_0x53c9e1[_0x30c8e0(0x38f,0x358,0x3fd,0x3e1)]['display']=_0x5f65c2[_0x30c8e0(0x35b,0x416,0x4b5,0x4a7)];const _0x338f2c=document['createElem'+_0x25f20b(0x5a5,0x51b,0x4f4,0x64f)]('button');_0x338f2c[_0x30c8e0(0x423,0x35f,0x363,0x2f2)]=_0x30c8e0(0x2da,0x2dc,0x330,0x30f),_0x338f2c['innerHTML']=_0x5f65c2[_0x30c8e0(0x1df,0x2a0,0x1c8,0x2ae)],_0x338f2c[_0x30c8e0(0x2d6,0x386,0x45e,0x2b8)]=_0x5f65c2['tSRGn'],_0x338f2c['addEventLi'+_0x25f20b(0x596,0x4bf,0x62a,0x63a)](_0x5f65c2[_0x30c8e0(0x30d,0x2ba,0x2cc,0x32a)],()=>_0x53c9e1[_0x25f20b(0x6c1,0x667,0x60f,0x6f6)]()),_0x2f5d0f['appendChil'+'d'](_0x2acc67),_0x2f5d0f[_0x25f20b(0x64d,0x56e,0x71d,0x671)+'d'](_0x338f2c);const _0x2f173b=document[_0x25f20b(0x65d,0x59c,0x6a7,0x5d0)+_0x25f20b(0x5a5,0x5d8,0x501,0x627)](_0x5f65c2[_0x30c8e0(0x425,0x430,0x3d8,0x3c1)]);_0x2f173b[_0x25f20b(0x625,0x66e,0x5e9,0x62d)]='st-chatu8-'+_0x30c8e0(0x2c7,0x2ca,0x319,0x2fd)+_0x25f20b(0x566,0x543,0x514,0x4a8)+'ner';const _0xfc5aff=document[_0x25f20b(0x65d,0x620,0x66f,0x597)+_0x25f20b(0x5a5,0x639,0x5a9,0x4ec)](_0x5f65c2[_0x30c8e0(0x4c6,0x430,0x42c,0x3f9)]);_0xfc5aff['textConten'+'t']=_0x5f65c2['CBJQs'];function _0x25f20b(_0x23d238,_0x38f446,_0x103c38,_0x2fe37f){return _0x9843bd(_0x23d238-0x178,_0x23d238-0x725,_0x103c38,_0x2fe37f-0x1e9);}_0xfc5aff[_0x30c8e0(0x32f,0x386,0x2f3,0x2e0)]=_0x30c8e0(0x3fd,0x42e,0x3d7,0x3cb)+_0x30c8e0(0x320,0x2c4,0x366,0x379)+_0x25f20b(0x56d,0x4bf,0x5b5,0x4bd),_0x2f173b[_0x30c8e0(0x31c,0x3ae,0x460,0x3ef)+'d'](_0xfc5aff);function _0x43d1f9(){_0x2f173b[_0x252153(0x1cb,0x127,0x134,0x84)]='';if(_0x5f65c2[_0x252153(0x175,0x191,0xcb,0x151)](_0x280d4d[_0x42d55b(-0xc1,-0xa1,-0xec,-0x56)],0xc1*0x15+-0x12b*-0x2+-0x122b*0x1)){const _0x2f7ecd=document[_0x252153(0xfe,0x160,0x1a5,0x1fe)+_0x252153(0xdc,0xa8,0xb7,0xb3)](_0x5f65c2[_0x42d55b(-0x128,-0x15a,-0x97,-0xc5)]);_0x2f7ecd['textConten'+'t']=_0x5f65c2[_0x42d55b(-0x1ca,-0x130,-0xfa,-0x24)],_0x2f7ecd['className']=_0x5f65c2[_0x252153(0x240,0x184,0x169,0x11f)],_0x2f173b[_0x252153(0x1d7,0x150,0x187,0xed)+'d'](_0x2f7ecd);return;}_0x280d4d[_0x252153(0x6f,0x31,-0x20,0x3f)]((_0x5b0af6,_0x4499f1)=>{const _0x313903={'qKDyb':function(_0x16ac62){function _0x1c9dab(_0x5500a0,_0xc9a47a,_0x1a2afa,_0x61285f){return _0x1a7f(_0x5500a0-0x31b,_0xc9a47a);}return _0x4ae4a6[_0x1c9dab(0x4e9,0x413,0x5b9,0x494)](_0x16ac62);}},_0xeeff32=document[_0x2a4da6(0x490,0x48a,0x407,0x42b)+'ent'](_0x2a4da6(0x435,0x44e,0x3ea,0x408));_0xeeff32[_0x2a4da6(0x492,0x452,0x384,0x495)]=_0x4ae4a6[_0x2a4da6(0x4a8,0x45a,0x4d6,0x4a4)];const _0x536089=document[_0x2a4da6(0x539,0x48a,0x4e3,0x4f8)+'ent'](_0x4ae4a6[_0x2a4da6(0x328,0x350,0x2b1,0x2ba)]);_0x536089[_0x2a4da6(0x510,0x452,0x453,0x509)]=_0x4ae4a6[_0x35559a(0x57b,0x50c,0x4d7,0x562)];const _0x3ca9f3=document[_0x2a4da6(0x3e9,0x48a,0x401,0x45b)+_0x35559a(0x476,0x5b3,0x478,0x541)](_0x4ae4a6[_0x2a4da6(0x493,0x49e,0x534,0x44b)]);_0x3ca9f3[_0x35559a(0x57d,0x542,0x5c2,0x601)]=_0x5b0af6[_0x35559a(0x4d3,0x517,0x51b,0x54b)];const _0x32459d=document[_0x2a4da6(0x3ec,0x48a,0x563,0x4d6)+'ent'](_0x35559a(0x5e3,0x5c2,0x5a4,0x517));_0x32459d['type']=_0x4ae4a6[_0x35559a(0x503,0x59f,0x505,0x52a)],_0x32459d[_0x35559a(0x59f,0x5ad,0x505,0x5c0)]='×',_0x32459d['className']=_0x35559a(0x655,0x5e4,0x5ee,0x669)+'popup-img-'+_0x2a4da6(0x3a5,0x367,0x396,0x2fb),_0x32459d['addEventLi'+_0x35559a(0x5d4,0x53b,0x559,0x532)](_0x4ae4a6['DasYG'],_0x88b470=>{_0x88b470[_0x104f23(0x2ce,0x2af,0x22a,0x1d7)+'ation']();function _0x104f23(_0x429d97,_0x1c7ddc,_0x3125be,_0xbd6e45){return _0x35559a(_0x3125be,_0x1c7ddc-0x6c,_0x3125be-0x124,_0x1c7ddc- -0x228);}_0x280d4d[_0x104f23(0x3e1,0x321,0x251,0x384)](_0x4499f1,0xb*0x53+-0x1b57*-0x1+-0x3*0xa4d);function _0x4182a4(_0x3d6cb9,_0x147777,_0x289d4a,_0x25753f){return _0x35559a(_0x25753f,_0x147777-0x1b0,_0x289d4a-0x16f,_0x289d4a- -0x2b9);}_0x313903[_0x104f23(0x409,0x3ac,0x358,0x326)](_0x43d1f9);}),_0x536089[_0x2a4da6(0x476,0x47a,0x4b4,0x4db)+'d'](_0x3ca9f3),_0x536089[_0x2a4da6(0x47e,0x47a,0x424,0x4f6)+'d'](_0x32459d);const _0x144bf0=document[_0x2a4da6(0x4ff,0x48a,0x429,0x4a5)+'ent'](_0x35559a(0x6bc,0x6ff,0x5cf,0x652));_0x144bf0['type']=_0x4ae4a6[_0x35559a(0x4ae,0x592,0x5b2,0x55c)],_0x144bf0['placeholde'+'r']='图'+_0x4ae4a6[_0x2a4da6(0x3d6,0x40f,0x362,0x42d)](_0x4499f1,-0x155c+-0x5cf*-0x1+0xf8e),_0x144bf0['value']=_0x5b0af6[_0x2a4da6(0x598,0x4e9,0x53d,0x4c6)]||'',_0x144bf0['className']=_0x4ae4a6['WUvgm'],_0x144bf0[_0x2a4da6(0x276,0x346,0x348,0x2d8)+_0x2a4da6(0x473,0x3c3,0x3aa,0x2fa)]('input',_0x2ad8eb=>{function _0xad18e4(_0x2749f0,_0x18820e,_0x4bb4bd,_0x90b3ce){return _0x35559a(_0x90b3ce,_0x18820e-0xe3,_0x4bb4bd-0x154,_0x2749f0- -0x4cc);}function _0x3a63f0(_0xcd42d1,_0x49c3c7,_0x4724e8,_0x17ad24){return _0x35559a(_0x49c3c7,_0x49c3c7-0x172,_0x4724e8-0x108,_0xcd42d1- -0x81);}_0x280d4d[_0x4499f1][_0x3a63f0(0x5d7,0x680,0x58b,0x572)]=_0x2ad8eb[_0x3a63f0(0x4ee,0x4b0,0x554,0x452)][_0x3a63f0(0x43d,0x410,0x4b9,0x405)];});function _0x2a4da6(_0x4e6d6a,_0x201bc4,_0x4eae9b,_0x42b3c7){return _0x42d55b(_0x4e6d6a-0x176,_0x201bc4-0x11d,_0x201bc4-0x593,_0x42b3c7);}_0xeeff32['appendChil'+'d'](_0x536089);function _0x35559a(_0x1838ca,_0x12883b,_0x230c16,_0xd221a4){return _0x252153(_0x1838ca-0x136,_0xd221a4-0x499,_0x1838ca,_0xd221a4-0x16c);}_0xeeff32['appendChil'+'d'](_0x144bf0),_0x2f173b[_0x35559a(0x57a,0x593,0x59a,0x5e9)+'d'](_0xeeff32);});const _0x16fc06=document['createElem'+_0x42d55b(-0x22d,-0x1e6,-0x1c1,-0x130)](_0x5f65c2[_0x252153(0x244,0x1d2,0x18a,0x264)]);_0x16fc06['textConten'+'t']=_0x252153(-0x19,0x48,0x4d,0xf3)+_0x280d4d[_0x42d55b(-0x113,-0x11,-0xec,-0x36)]+_0x42d55b(-0x5d,-0x89,-0x112,-0x170),_0x16fc06[_0x42d55b(-0x14d,-0x20f,-0x141,-0xaa)]=_0x5f65c2['ZtIoQ'];function _0x252153(_0x132aa2,_0x43e49e,_0x74cc56,_0x45a480){return _0x25f20b(_0x43e49e- -0x4fd,_0x43e49e-0x1ba,_0x74cc56,_0x45a480-0x3a);}function _0x42d55b(_0xc6b257,_0x3340e5,_0x83b4fb,_0x5c456a){return _0x25f20b(_0x83b4fb- -0x766,_0x3340e5-0x1b2,_0x5c456a,_0x5c456a-0x183);}_0x2f173b['appendChil'+'d'](_0x16fc06);}_0x53c9e1[_0x30c8e0(0x1a0,0x27a,0x2bf,0x239)+_0x25f20b(0x596,0x5f6,0x4f7,0x5cf)](_0x5f65c2['xskxP'],async _0x3565f0=>{function _0x500e09(_0x353523,_0x12d5b3,_0x2baf3a,_0x3caa92){return _0x30c8e0(_0x353523-0x1d1,_0x353523-0x208,_0x2baf3a-0xcf,_0x12d5b3);}function _0x307776(_0x38b8cc,_0xead3ef,_0x40eaf7,_0x27e7a6){return _0x30c8e0(_0x38b8cc-0x41,_0x40eaf7-0x3e,_0x40eaf7-0x1cd,_0xead3ef);}const _0x3c81e3={'NXjtf':function(_0x20ba22,_0x4cabca){function _0x3d0a83(_0x2fe39b,_0x338717,_0x52d48a,_0x36f4d0){return _0x1a7f(_0x2fe39b- -0xc7,_0x338717);}return _0x4ae4a6[_0x3d0a83(0xba,0x14,0xb8,0x4d)](_0x20ba22,_0x4cabca);}};if(_0x4ae4a6[_0x500e09(0x5b2,0x50d,0x4d9,0x61b)](_0x4ae4a6[_0x500e09(0x4db,0x40b,0x513,0x574)],_0x307776(0x3f7,0x261,0x32c,0x34b)))_0x4e6959=_0x360e66(_0x1ed612,_0x59567a,_0x255e9b,_0x307776(0x457,0x43e,0x46a,0x473)),_0x1fae45[_0x500e09(0x5a5,0x5c6,0x5fe,0x65a)](_0x500e09(0x5ee,0x5b4,0x593,0x523)+_0x307776(0x2b1,0x31d,0x366,0x28c),_0x27f8fc[_0x307776(0x4a4,0x487,0x419,0x4e6)],_0x4ae4a6[_0x500e09(0x593,0x4d1,0x4f3,0x4d7)],_0x3df5dd);else{const _0x5bdfe9=_0x3565f0['target']['files'];if(!_0x5bdfe9||_0x4ae4a6[_0x307776(0x46b,0x3a7,0x3bf,0x378)](_0x5bdfe9[_0x500e09(0x5e3,0x6b0,0x582,0x68f)],-0x1b4a+0x19ed*0x1+0x15d))return;for(const _0x211837 of _0x5bdfe9){if(!_0x211837[_0x307776(0x30e,0x3e3,0x39d,0x390)][_0x500e09(0x5a3,0x67f,0x584,0x564)](_0x307776(0x3b6,0x39a,0x421,0x4ca)))continue;try{if(_0x4ae4a6[_0x307776(0x3cb,0x39c,0x326,0x369)]!==_0x4ae4a6[_0x307776(0x27e,0x2cc,0x326,0x36c)])_0x46ee5a[_0x500e09(0x4a1,0x4f6,0x53e,0x4e3)+'ener'](_0x50e9c9['LLM_CHAR_D'+_0x500e09(0x481,0x3f8,0x4e0,0x434)+'PROMPT_RES'+_0x500e09(0x533,0x5ec,0x5ff,0x5b8)],_0x3d0104),_0x4ae4a6[_0x307776(0x312,0x3ad,0x2ef,0x372)](_0x1150ed,new _0x2b9125(_0x4ae4a6[_0x307776(0x3e2,0x373,0x3ed,0x37e)]));else{const _0x1df4d8=await _0x4ae4a6[_0x500e09(0x5e6,0x557,0x684,0x5a6)](_0x75a5f7,_0x211837),_0x50b537={};_0x50b537[_0x307776(0x32b,0x3b9,0x34e,0x41b)]=_0x1df4d8,_0x50b537[_0x500e09(0x625,0x5ff,0x67d,0x6d0)]='',_0x280d4d['push'](_0x50b537);}}catch(_0x3f81f7){if(_0x4ae4a6[_0x500e09(0x589,0x4b9,0x5a6,0x4ec)](_0x307776(0x3c1,0x3ab,0x3c1,0x2e7),'GYpij'))console[_0x307776(0x461,0x459,0x405,0x3b0)](_0x4ae4a6[_0x500e09(0x568,0x49a,0x541,0x645)],_0x3f81f7);else{const _0x3ce4b2={};_0x3ce4b2['result']=_0x3ba701['result'],_0x3ce4b2[_0x307776(0x273,0x285,0x321,0x295)]=![],_0x3c81e3[_0x307776(0x3d6,0x478,0x456,0x4ab)](_0x58b58c,_0x3ce4b2);}}}_0x43d1f9(),_0x53c9e1[_0x500e09(0x48b,0x542,0x3cc,0x3f1)]='';}});function _0x75a5f7(_0x32c2d1){return new Promise((_0x2ada62,_0x112ab2)=>{function _0x2ec0e3(_0x397d76,_0x406f95,_0x276451,_0xf0bc64){return _0x1a7f(_0x397d76- -0x252,_0xf0bc64);}const _0x220113=new FileReader();_0x220113[_0x2ec0e3(0x84,0xa5,0xe,-0x10)]=()=>_0x2ada62(_0x220113[_0x2ec0e3(-0x82,0x13,-0xd1,-0x8a)]);function _0x2952a8(_0x303d00,_0x5abfb5,_0x9a90c5,_0x42cf23){return _0x1a7f(_0x9a90c5-0x341,_0x5abfb5);}_0x220113['onerror']=_0x112ab2,_0x220113[_0x2952a8(0x494,0x459,0x4ba,0x45b)+'URL'](_0x32c2d1);});}_0x23facf[_0x30c8e0(0x452,0x3ae,0x3b6,0x486)+'d'](_0x2f5d0f),_0x23facf[_0x25f20b(0x64d,0x673,0x6e1,0x698)+'d'](_0x53c9e1),_0x23facf[_0x25f20b(0x64d,0x6ce,0x6ec,0x6bf)+'d'](_0x2f173b);const _0x402ff9=document[_0x30c8e0(0x433,0x3be,0x3aa,0x354)+_0x30c8e0(0x278,0x306,0x36f,0x321)](_0x5f65c2[_0x25f20b(0x6cf,0x722,0x66c,0x697)]);_0x402ff9[_0x25f20b(0x625,0x694,0x6ff,0x5ae)]=_0x5f65c2[_0x25f20b(0x57e,0x55d,0x577,0x52c)];const _0x494658=document[_0x30c8e0(0x319,0x3be,0x33c,0x32e)+_0x30c8e0(0x376,0x306,0x28f,0x365)](_0x25f20b(0x57b,0x501,0x64f,0x4dd));_0x494658[_0x30c8e0(0x485,0x408,0x4bc,0x32f)+'t']='取消',_0x494658[_0x30c8e0(0x3c0,0x386,0x34a,0x3ef)]=_0x5f65c2[_0x30c8e0(0x3e8,0x3d0,0x3f9,0x3dd)];const _0x49ce97=document['createElem'+_0x25f20b(0x5a5,0x5b1,0x579,0x529)]('button');_0x49ce97[_0x30c8e0(0x377,0x408,0x360,0x401)+'t']='确定生成',_0x49ce97[_0x25f20b(0x625,0x67a,0x6c9,0x6cc)]=_0x5f65c2[_0x25f20b(0x634,0x6c1,0x6a4,0x659)];const _0x48ad5b=_0x7e2798=>{const _0x2a801a={'shZfb':function(_0x4199df,_0x486568){function _0x13271d(_0x4ee6fb,_0x48fa74,_0x3fed34,_0x4fdce1){return _0x1a7f(_0x3fed34-0x11b,_0x4ee6fb);}return _0x5f65c2[_0x13271d(0x2f1,0x383,0x346,0x354)](_0x4199df,_0x486568);},'pvIZk':_0x5f65c2[_0x51256e(0x329,0x37b,0x2ac,0x29e)],'aNpKF':function(_0x586986){return _0x586986();},'CfCcy':function(_0x27f1ef,_0x1c4f1c,_0x56eada){return _0x5f65c2['TlNfD'](_0x27f1ef,_0x1c4f1c,_0x56eada);}};function _0x51256e(_0x345215,_0xe2bff,_0x2647c1,_0x406164){return _0x30c8e0(_0x345215-0x1c7,_0x2647c1- -0xe4,_0x2647c1-0x159,_0x406164);}function _0x28e57a(_0x2a8190,_0x1f23ab,_0x49229f,_0xb94f22){return _0x25f20b(_0x2a8190- -0x43b,_0x1f23ab-0x26,_0x49229f,_0xb94f22-0x1df);}if(_0x5f65c2[_0x51256e(0x2bf,0x20a,0x20e,0x22d)](_0x51256e(0x25a,0x1ae,0x261,0x331),_0x5f65c2['Smxor']))_0x4c99c4['classList'][_0x28e57a(0x1f5,0x209,0x147,0x11e)](_0x5f65c2[_0x51256e(0x2ff,0x253,0x2c0,0x2c2)]),_0x5f65c2[_0x51256e(0x2a9,0x3ec,0x319,0x32f)](setTimeout,()=>{function _0x502abb(_0x41273c,_0x5792bf,_0x18f3cd,_0x4996d9){return _0x51256e(_0x41273c-0x131,_0x5792bf-0x96,_0x4996d9- -0x117,_0x18f3cd);}_0x4c99c4[_0xd77074(0x41e,0x43b,0x3b4,0x4ad)]();function _0xd77074(_0x841cbb,_0x197f09,_0x25df08,_0xb93091){return _0x51256e(_0x841cbb-0x135,_0x197f09-0x13a,_0x197f09-0x1fb,_0xb93091);}_0x2a801a[_0x502abb(0x1e8,0x26a,0x304,0x226)](_0x412d4e,_0x7e2798);},-0x11f*-0x1b+0x1*-0x581+-0x182e);else{const _0x36f1cd={'gLbdt':_0x2a801a[_0x51256e(0x2d4,0x13a,0x207,0x132)],'VKlmr':function(_0xb01586){function _0x460639(_0x13052b,_0x327dbe,_0x3d8384,_0x509d8d){return _0x51256e(_0x13052b-0x13d,_0x327dbe-0x1a4,_0x3d8384- -0x1ed,_0x13052b);}return _0x2a801a[_0x460639(0xa7,0xb6,0x113,0x18f)](_0xb01586);},'NGWkA':function(_0x1db070,_0x478ab4,_0x4e333c){return _0x2a801a['CfCcy'](_0x1db070,_0x478ab4,_0x4e333c);}};return new _0x1d8d4a((_0x14c738,_0x419276)=>{const _0x570efb={'DkCfe':function(_0x53820b,_0x5d7a84){return _0x53820b!==_0x5d7a84;},'RxGgD':function(_0x158819,_0x40782a){return _0x158819(_0x40782a);},'fhZwH':_0x36f1cd[_0x445a74(-0xf0,-0x12c,-0xb4,-0x151)]},_0xc05ad6=_0x36f1cd['VKlmr'](_0x543e2f);function _0x445a74(_0x1c3657,_0x13913c,_0x2d6e89,_0x3cd520){return _0x28e57a(_0x1c3657- -0x317,_0x13913c-0x168,_0x13913c,_0x3cd520-0x15c);}_0xbac2f5[_0x445a74(-0x116,-0xc3,-0xb1,-0xae)](_0x445a74(-0xcd,-0x133,-0xe1,-0x4b)+'Gen]\x20Reque'+_0x445a74(-0x1e8,-0x25c,-0x18b,-0x287)+_0x4fcf26(0x147,0x154,0x220,0x1ac)+_0x445a74(-0x22e,-0x1ba,-0x2f9,-0x1a7)+_0xc05ad6+')');function _0x4fcf26(_0x1d2ffc,_0x27472f,_0x12e98c,_0x3468b2){return _0x51256e(_0x1d2ffc-0xa6,_0x27472f-0x12f,_0x3468b2- -0x14f,_0x27472f);}const _0xd145c5=_0x1decf9=>{if(_0x570efb['DkCfe'](_0x1decf9['id'],_0xc05ad6))return;function _0x4709ba(_0x5c7d57,_0x19a4ab,_0x173b2e,_0x1a637d){return _0x4fcf26(_0x5c7d57-0x3e,_0x19a4ab,_0x173b2e-0x135,_0x1a637d- -0x74);}function _0xd534cf(_0x236bf8,_0x39e03e,_0x101775,_0x32ab67){return _0x4fcf26(_0x236bf8-0x100,_0x32ab67,_0x101775-0x8a,_0x236bf8-0x4b5);}_0x361f19[_0x4709ba(0x91,-0xe8,-0xd1,-0xe)+'ener'](_0x4f5ba1['LLM_CHAR_D'+_0xd534cf(0x4fb,0x5cd,0x4e1,0x5ba)+_0x4709ba(0x12f,0xd3,0x139,0x153)+_0x4709ba(-0x30,0x49,0x3a,0x84)],_0xd145c5),_0x14c738(_0x1decf9[_0x4709ba(0x73,-0x7d,-0x84,-0x2a)]);};_0x3eaa2f['on'](_0x492989[_0x4fcf26(0x192,0xee,0x78,0xce)+'ESIGN_GET_'+_0x4fcf26(0x1c5,0x227,0x101,0x1c7)+'PONSE'],_0xd145c5);const _0x38f9a8={};_0x38f9a8['id']=_0xc05ad6,_0x4ad34b[_0x445a74(-0x8f,-0xf1,0xf,-0x55)](_0x237d91['LLM_CHAR_D'+_0x445a74(-0x23a,-0x18d,-0x266,-0x1e9)+_0x445a74(-0x145,-0x164,-0x96,-0xb9)+'UEST'],_0x38f9a8),_0x36f1cd[_0x445a74(-0x1d5,-0x1ef,-0x27f,-0x153)](_0x34fe24,()=>{function _0xe15f2(_0x73fb9d,_0x59d124,_0x2b1e81,_0x4597ba){return _0x445a74(_0x4597ba-0x240,_0x59d124,_0x2b1e81-0xcb,_0x4597ba-0x163);}function _0x3ed2c0(_0x19a930,_0x5a39d,_0xf643ce,_0x4cb077){return _0x4fcf26(_0x19a930-0x77,_0x4cb077,_0xf643ce-0x169,_0x5a39d- -0x4e);}_0x359247[_0x3ed2c0(-0x2b,0x18,-0x22,0x58)+_0x3ed2c0(0x23,0xeb,0x155,0xc6)](_0x19e5fb[_0x3ed2c0(-0x3c,0x80,0xb,0x70)+'ESIGN_GET_'+_0xe15f2(0x1ab,0x102,0x130,0x187)+_0xe15f2(0x4e,0x11d,0x187,0xb8)],_0xd145c5),_0x570efb[_0x3ed2c0(0xd5,0xd6,0x4e,0x24)](_0x419276,new _0x3c7600(_0x570efb[_0xe15f2(0x4c,0xd8,0x8,0xc0)]));},0x27e9+0x144b*0x2+-0x1*0x296f);});}};function _0x30c8e0(_0x336171,_0x398363,_0x47b82b,_0x553286){return _0x19ff7f(_0x398363-0x1a6,_0x398363-0x89,_0x47b82b-0x1ed,_0x553286);}_0x494658[_0x30c8e0(0x2bb,0x27a,0x1b6,0x1e3)+_0x30c8e0(0x3b9,0x2f7,0x35e,0x2aa)](_0x5f65c2[_0x30c8e0(0x1f2,0x2ba,0x282,0x269)],()=>_0x48ad5b(null)),_0x49ce97['addEventLi'+_0x25f20b(0x596,0x609,0x4e5,0x5c0)](_0x5f65c2['FAUYt'],()=>_0x48ad5b({'text':_0x240a96['value'][_0x30c8e0(0x376,0x373,0x305,0x36a)]()||null,'images':[..._0x280d4d]}));const _0x38ff96=_0x19187c=>{function _0xcdc398(_0x56fecc,_0x22816d,_0x5f4538,_0x3f183e){return _0x30c8e0(_0x56fecc-0xc0,_0x3f183e-0x1ab,_0x5f4538-0x0,_0x22816d);}function _0x3e189a(_0x45d5ad,_0x150407,_0x804ea6,_0x2223e2){return _0x30c8e0(_0x45d5ad-0x3c,_0x150407- -0x4a5,_0x804ea6-0x183,_0x45d5ad);}if(_0x5f65c2[_0xcdc398(0x63f,0x50f,0x64c,0x5a6)](_0x19187c[_0x3e189a(0x8,-0x7b,-0x92,0x22)],_0x3e189a(-0xdc,-0xc4,-0x136,-0xca)))_0x48ad5b(null),document[_0xcdc398(0x57d,0x47f,0x3e6,0x4b6)+'tListener'](_0x5f65c2[_0x3e189a(-0x1c8,-0x11e,-0x1e5,-0xda)],_0x38ff96);else _0x5f65c2[_0x3e189a(0x26,-0xb6,-0x174,-0x173)](_0x19187c[_0x3e189a(-0xb5,-0x7b,0x1e,0x13)],_0xcdc398(0x437,0x4ff,0x476,0x440))&&_0x19187c[_0x3e189a(-0x14d,-0xcb,-0xe3,-0x199)]&&(_0x5f65c2[_0x3e189a(-0x1fe,-0x14a,-0x132,-0x143)](_0x48ad5b,{'text':_0x240a96[_0x3e189a(-0x2a9,-0x222,-0x1e3,-0x1d4)][_0x3e189a(-0x103,-0x132,-0xa2,-0x90)]()||null,'images':[..._0x280d4d]}),document[_0x3e189a(-0x1a1,-0x19a,-0x18b,-0x118)+'tListener'](_0x5f65c2['SaWRX'],_0x38ff96));};document['addEventLi'+'stener'](_0x30c8e0(0x3a9,0x3ec,0x4ab,0x3e3),_0x38ff96),_0x402ff9[_0x30c8e0(0x35f,0x3ae,0x40d,0x46a)+'d'](_0x494658),_0x402ff9[_0x30c8e0(0x30b,0x3ae,0x3fe,0x39c)+'d'](_0x49ce97),_0x37a8dd['appendChil'+'d'](_0x1a3131),_0x37a8dd['appendChil'+'d'](_0x43cae7),_0x37a8dd[_0x25f20b(0x64d,0x6fc,0x643,0x6de)+'d'](_0x240a96),_0x37a8dd[_0x25f20b(0x64d,0x652,0x695,0x6e5)+'d'](_0x23facf),_0x37a8dd[_0x25f20b(0x64d,0x684,0x576,0x645)+'d'](_0x402ff9),_0x4c99c4[_0x25f20b(0x64d,0x58d,0x6e1,0x592)+'d'](_0x37a8dd),document[_0x25f20b(0x556,0x51a,0x5cb,0x62e)][_0x30c8e0(0x324,0x3ae,0x38c,0x43e)+'d'](_0x4c99c4),_0x5f65c2[_0x30c8e0(0x33d,0x415,0x4c8,0x43b)](setTimeout,()=>_0x240a96['focus'](),0x200+-0x7f*-0x29+0x1*-0x15f3);});}function replacePlaceholder(_0x3a892a,_0x71a5b8,_0x5b8b82,_0x2e00f4){function _0x1a93d6(_0x484f7d,_0x222b32,_0x1587c9,_0x4bc104){return _0x1a7f(_0x484f7d- -0xab,_0x4bc104);}function _0x4927f7(_0x5bf47d,_0x40f96a,_0x3a5a55,_0x43248e){return _0x1a7f(_0x5bf47d-0x10a,_0x43248e);}const _0x2ee4a8={'fBuXt':_0x1a93d6(0x221,0x2e2,0x1ec,0x1b5),'OnUDl':function(_0x25249c,_0xb5f4e5){return _0x25249c===_0xb5f4e5;},'XlPnE':'string','cLabl':_0x4927f7(0x34e,0x2e5,0x428,0x32d),'tOxrj':function(_0x59466c,_0x23e616){return _0x59466c===_0x23e616;},'rnnQC':'PLhmu','EPmpU':function(_0x216e6c,_0x19c366){return _0x216e6c===_0x19c366;},'WTohb':'EkrJJ','gOAGF':function(_0x3348f6,_0x166b13){return _0x3348f6===_0x166b13;},'snnlf':_0x1a93d6(0x161,0x1b6,0x175,0x1a3),'TbVTP':_0x1a93d6(0x21d,0x1c6,0x18e,0x228),'wJTmb':_0x1a93d6(0xeb,0x4f,0x88,0x12c),'FfdQW':'LMyzy','GLNVF':function(_0x358508,_0x374f86,_0x137920,_0x377c17,_0x31dd3c){return _0x358508(_0x374f86,_0x137920,_0x377c17,_0x31dd3c);}};if(_0x2ee4a8[_0x1a93d6(0x18c,0x18a,0x146,0x1e6)](typeof _0x3a892a,_0x2ee4a8[_0x1a93d6(0x1b1,0x265,0x206,0x186)])){if(_0x2ee4a8['OnUDl'](_0x1a93d6(0x156,0x215,0x172,0x15b),_0x2ee4a8[_0x1a93d6(0x1bb,0x148,0x103,0x28c)]))_0xa102a2=_0x1a93d6(0x1e6,0x194,0x294,0x299)+_0x4927f7(0x263,0x2fa,0x2ce,0x1f5)+[..._0x383e68][_0x1a93d6(0x128,0x70,0x19b,0x8b)]('、')+'\x0a';else{if(_0x5b8b82&&_0x3a892a[_0x4927f7(0x2fd,0x28f,0x383,0x3be)](_0x71a5b8)){if(_0x2ee4a8[_0x1a93d6(0x115,0x126,0xdb,0x4b)](_0x2ee4a8[_0x1a93d6(0x1cd,0x24c,0x20b,0x1e0)],_0x2ee4a8[_0x1a93d6(0x1cd,0x26b,0x110,0x24e)])){if(_0x2e00f4){if(_0x2ee4a8[_0x1a93d6(0x213,0x1ba,0x144,0x2d3)]('HuxMY',_0x2ee4a8[_0x1a93d6(0x256,0x22f,0x267,0x2c2)])){const _0x1c19cb={};_0x1c19cb[_0x4927f7(0x339,0x3c4,0x266,0x3fa)]=_0x2ee4a8[_0x4927f7(0x2b2,0x24b,0x219,0x1ff)],_0x1c19cb[_0x4927f7(0x3d6,0x3c3,0x491,0x443)]=_0x4927f7(0x315,0x3b8,0x286,0x315)+_0xa7cbce['length']+'张'+_0x3795c8+']',_0x5c0374[_0x4927f7(0x28e,0x1ce,0x34a,0x1db)](_0x1c19cb);}else _0x2e00f4[_0x1a93d6(0x1b6,0x191,0x1a3,0x18c)](_0x71a5b8);}}else _0x2c8266[_0x55af1c][_0x1a93d6(0x242,0x19a,0x198,0x268)]=_0x1bb600['target'][_0x1a93d6(0xa8,-0x8,-0xe,0x10f)];}return _0x3a892a['replaceAll'](_0x71a5b8,_0x5b8b82);}}if(Array[_0x1a93d6(0x129,0x17a,0x175,0x193)](_0x3a892a))return _0x2ee4a8['gOAGF'](_0x2ee4a8['snnlf'],_0x2ee4a8[_0x4927f7(0x30f,0x304,0x33b,0x235)])?_0x2c210c:_0x3a892a['map'](_0x33b9c9=>replacePlaceholder(_0x33b9c9,_0x71a5b8,_0x5b8b82,_0x2e00f4));if(_0x3a892a&&typeof _0x3a892a===_0x2ee4a8[_0x1a93d6(0x21c,0x2d6,0x266,0x179)]){const _0x17b9a9={};for(const _0x419795 in _0x3a892a){_0x2ee4a8[_0x1a93d6(0x115,0x1c0,0x103,0xae)](_0x2ee4a8['FfdQW'],_0x2ee4a8[_0x4927f7(0x30c,0x26f,0x297,0x294)])?_0x17b9a9[_0x419795]=_0x2ee4a8['GLNVF'](replacePlaceholder,_0x3a892a[_0x419795],_0x71a5b8,_0x5b8b82,_0x2e00f4):_0x499f97[_0x1a93d6(0x1ec,0x12d,0x287,0x132)](_0x4927f7(0x3c0,0x32d,0x41e,0x312)+_0x4927f7(0x2ab,0x235,0x225,0x2fb)+_0x4927f7(0x3fa,0x36e,0x3d1,0x3a8),_0xbee84e);}return _0x17b9a9;}return _0x3a892a;}function attachImagesToMessage(_0xc36d7c,_0x21cd1b,_0x549950,_0x591260=_0x33c368(0x201,0x1c3,0x246,0x2af)){const _0x348f77={};_0x348f77[_0x3995ce(0x57,0x1e,0xfb,0x80)]=_0x3995ce(0x161,0x3b,0xce,0xc4)+'emandPopup'+']\x20Failed\x20t'+'o\x20read\x20ima'+'ge:',_0x348f77['ekiGS']=function(_0x296d85,_0x5de7cc){return _0x296d85===_0x5de7cc;};function _0x46c320(_0x313f22,_0x3e428b,_0x402c16,_0x77d881){return _0x33c368(_0x313f22-0x16e,_0x402c16,_0x402c16-0x128,_0x77d881-0x1ac);}_0x348f77[_0x3995ce(-0x5,0x8c,0xaa,0xac)]=_0x46c320(0x35e,0x342,0x2e4,0x38f),_0x348f77[_0x3995ce(0xdc,0x63,-0xdc,-0x2)]=function(_0x191632,_0x2b29fe){return _0x191632===_0x2b29fe;},_0x348f77[_0x3995ce(0x34,-0x2d,-0x45,0x2a)]=_0x3995ce(0x9,-0x10e,-0xe2,-0x52),_0x348f77['aFHWe']=_0x46c320(0x481,0x4db,0x4f8,0x45f),_0x348f77['ELShy']=_0x3995ce(-0x17,-0x92,0x8,0x27),_0x348f77['GTMFg']=_0x46c320(0x36a,0x2e9,0x3f3,0x2da),_0x348f77[_0x46c320(0x3fe,0x3ae,0x400,0x3b5)]=function(_0x324e12,_0x2e64b9){return _0x324e12>=_0x2e64b9;},_0x348f77[_0x46c320(0x44d,0x47c,0x3cb,0x452)]=function(_0x19e47d,_0xff9a49){return _0x19e47d===_0xff9a49;},_0x348f77[_0x46c320(0x317,0x25b,0x346,0x33f)]=_0x46c320(0x4ab,0x4c5,0x448,0x417),_0x348f77[_0x3995ce(0x26,-0x5e,0x3b,0x39)]='ihXmy',_0x348f77[_0x46c320(0x3c3,0x36b,0x3af,0x464)]=function(_0x163910,_0x139b06){return _0x163910>_0x139b06;},_0x348f77[_0x46c320(0x49f,0x41d,0x3c3,0x4ec)]=_0x3995ce(-0x132,-0x4c,-0xc0,-0x6c),_0x348f77[_0x3995ce(-0x116,-0xf3,-0xba,-0x59)]=_0x3995ce(-0x41,0x7a,-0x1c,-0x60);const _0x5d66b7=_0x348f77;if(!_0x549950||_0x5d66b7[_0x3995ce(-0xb0,0xff,0x1f,0x22)](_0x549950[_0x46c320(0x460,0x422,0x460,0x3f8)],-0xb*-0x15b+0x1381*0x2+-0x35eb)||_0x21cd1b<0x1094+-0x1*-0x142a+-0x24be*0x1||_0x5d66b7[_0x46c320(0x3fe,0x404,0x436,0x428)](_0x21cd1b,_0xc36d7c['length'])){if(_0x5d66b7['mpCBx'](_0x5d66b7[_0x3995ce(-0x65,-0x136,-0x107,-0x86)],'nmkfE'))return _0xc36d7c;else _0x545d64[_0x46c320(0x339,0x2c4,0x40e,0x312)](_0x2fe185);}const _0x4494b5=[..._0xc36d7c],_0x2260b5=_0x4494b5[_0x21cd1b],_0x21b835=[];if(typeof _0x2260b5['content']==='string'){if(_0x5d66b7[_0x46c320(0x3d6,0x394,0x47d,0x312)]===_0x5d66b7[_0x3995ce(0xcf,0xe0,0x111,0x39)]){const _0x3d6776={};_0x3d6776[_0x46c320(0x3e4,0x407,0x4bd,0x3b7)]=_0x5d66b7[_0x3995ce(0x163,0x156,0x19b,0xcd)],_0x3d6776[_0x46c320(0x481,0x4fa,0x43a,0x3e3)]=_0x2260b5[_0x46c320(0x32c,0x298,0x36c,0x2c8)],_0x21b835[_0x3995ce(-0x105,-0x67,-0xfb,-0x64)](_0x3d6776);}else _0x114a25[_0x46c320(0x44c,0x503,0x3da,0x3d2)](_0x5d66b7['HQMhY'],_0x5878d3);}else Array[_0x3995ce(-0x25,-0xe3,-0x60,-0x14)](_0x2260b5[_0x46c320(0x32c,0x3cc,0x338,0x303)])&&_0x21b835[_0x46c320(0x339,0x28d,0x2b0,0x383)](..._0x2260b5[_0x46c320(0x32c,0x375,0x26e,0x3e3)]);if(_0x5d66b7[_0x46c320(0x3c3,0x318,0x32a,0x2ed)](_0x549950[_0x3995ce(0xe2,0x173,0x122,0xc3)],-0x2703+0x1*-0xa9f+0x1*0x31a2)){if(_0x5d66b7[_0x46c320(0x3bf,0x332,0x45f,0x346)](_0x5d66b7['vjNOR'],_0x5d66b7[_0x46c320(0x344,0x3e9,0x31c,0x29a)]))return _0x31cdd9;else{const _0x44ff15={};_0x44ff15[_0x3995ce(0x63,-0x94,-0x1b,0x47)]='text',_0x44ff15['text']=_0x3995ce(0x28,-0x7a,0x23,0x23)+_0x549950[_0x3995ce(0x155,0x32,-0xb,0xc3)]+'张'+_0x591260+']',_0x21b835[_0x46c320(0x339,0x2fc,0x33e,0x37c)](_0x44ff15);}}function _0x3995ce(_0xbde0f7,_0x13980c,_0x4e364b,_0x2782d0){return _0x33c368(_0x2782d0- -0x22f,_0x4e364b,_0x4e364b-0x16,_0x2782d0-0xae);}_0x549950[_0x3995ce(-0xdb,-0x5b,-0xb5,-0x89)]((_0x4699ab,_0x336089)=>{function _0x5263bd(_0x254121,_0x5b3acf,_0x188598,_0x5a7ad5){return _0x46c320(_0x5b3acf- -0x372,_0x5b3acf-0x134,_0x5a7ad5,_0x5a7ad5-0x5d);}const _0x7420e4=_0x5d66b7['ekiGS'](typeof _0x4699ab,_0x5d66b7[_0x5263bd(0xdf,0xd7,0x101,0x149)])?_0x4699ab:_0x4699ab[_0x5ca945(0x52,0x3,-0xa4,-0x63)],_0x485bf2=_0x5d66b7[_0x5263bd(-0x97,0x29,0xfd,0x45)](typeof _0x4699ab,_0x5d66b7['NTJfc'])&&_0x4699ab[_0x5ca945(0xfe,0x110,0x17e,0x39)]?_0x4699ab[_0x5ca945(0xcb,0x110,0x72,0xba)]:''+_0x591260+(_0x336089+(0xddb+-0xba1+-0x239)),_0x2b7393={};_0x2b7393['type']=_0x5d66b7[_0x5263bd(0x182,0xf8,0xad,0xc8)],_0x2b7393[_0x5ca945(0x144,0xef,0x1ac,0x165)]='['+_0x485bf2+']',_0x21b835[_0x5ca945(0x2a,-0x59,-0x119,0x7b)](_0x2b7393);let _0x1581dd=_0x7420e4;function _0x5ca945(_0xff2bcc,_0x445408,_0x2575f2,_0x9c77db){return _0x46c320(_0x445408- -0x392,_0x445408-0x1a2,_0x2575f2,_0x9c77db-0x1b9);}!_0x7420e4[_0x5263bd(0x90,0xae,0x12d,0x9c)]('data:')&&(_0x1581dd=_0x5263bd(-0x28,-0x59,-0xd4,0x85)+_0x5ca945(0x119,0xc7,0xce,0x1a)+'4,'+_0x7420e4);const _0x37c29d={};_0x37c29d['type']=_0x5d66b7[_0x5ca945(0x77,0xc1,0x167,0xf2)],_0x37c29d[_0x5263bd(0x35,0x52,0xe1,0xb9)]={},_0x37c29d[_0x5263bd(0x35,0x52,0xe1,0xb9)][_0x5263bd(0x181,0x13b,0x20f,0x18c)]=_0x1581dd,_0x37c29d[_0x5263bd(0x35,0x52,0xe1,0xb9)][_0x5ca945(-0x4f,-0x77,-0x93,-0x151)]=_0x5d66b7[_0x5ca945(0xbc,0x82,0x87,-0x1f)],_0x21b835[_0x5263bd(0x71,-0x39,-0x1d,0x11)](_0x37c29d);});const _0x1cf824={..._0x2260b5};return _0x1cf824[_0x3995ce(0x60,-0xf2,-0x81,-0x71)]=_0x21b835,_0x4494b5[_0x21cd1b]=_0x1cf824,_0x4494b5;}function findMessageIndexWithPlaceholder(_0x24759d,_0x6105e8){const _0x5b8e01={'EGewT':function(_0x3db634,_0x5b4ca3){return _0x3db634(_0x5b4ca3);},'OLPxP':function(_0x58bfcd,_0x2824ac){return _0x58bfcd===_0x2824ac;},'LitBc':'string','vezwZ':_0x3dda62(0x1a5,0x111,0xf0,0x209),'DutjK':'text'};function _0x3dda62(_0x49b64d,_0x36306e,_0x1112f4,_0x276028){return _0x33c368(_0x49b64d-0x3,_0x1112f4,_0x1112f4-0x1a8,_0x276028-0x16a);}function _0x4835db(_0x47cb99,_0x30a497,_0x1efba2,_0x14fe9a){return _0x33c368(_0x47cb99- -0x194,_0x14fe9a,_0x1efba2-0x17e,_0x14fe9a-0x105);}for(let _0x3fa92e=0x1bac+0x3*0xb07+-0x3cc1*0x1;_0x3fa92e<_0x24759d[_0x3dda62(0x2f5,0x272,0x2d1,0x2dd)];_0x3fa92e++){const _0x4b3366=_0x24759d[_0x3fa92e];if(_0x5b8e01[_0x4835db(0x17c,0x14c,0xa9,0x1ba)](typeof _0x4b3366['content'],_0x5b8e01['LitBc'])&&_0x4b3366[_0x4835db(0x2a,-0x6,-0x5c,-0xa3)][_0x3dda62(0x23d,0x166,0x19b,0x1c8)](_0x6105e8))return _0x3fa92e;else{if(Array[_0x3dda62(0x21e,0x1b9,0x2aa,0x25b)](_0x4b3366['content']))for(const _0x5207bf of _0x4b3366[_0x4835db(0x2a,-0x90,0x2e,0x76)]){if('gsoQq'!==_0x5b8e01['vezwZ']){const _0x190f2b={};_0x190f2b[_0x4835db(0x83,0xc0,0x2a,-0x11)]=_0x1065b4[_0x3dda62(0x21a,0x18e,0x1ff,0x186)],_0x190f2b['testMode']=!![],_0x5b8e01[_0x4835db(0x59,0xd4,-0x1a,0x12e)](_0x220d5f,_0x190f2b);}else{if(_0x5b8e01[_0x3dda62(0x313,0x344,0x306,0x37f)](_0x5207bf[_0x4835db(0xe2,0x1c1,0x1a3,0xdb)],_0x5b8e01[_0x3dda62(0x2d0,0x2af,0x35d,0x242)])&&_0x5207bf['text'][_0x4835db(0xa6,-0x10,0x9b,0x60)](_0x6105e8))return _0x3fa92e;}}}}return-(-0x173a+0x669*-0x2+0x1*0x240d);}function generateRequestId(){function _0x1aab03(_0x2785ae,_0x43a885,_0x18e67a,_0x47ce01){return _0x33c368(_0x18e67a-0x30c,_0x47ce01,_0x18e67a-0xb0,_0x47ce01-0xfb);}function _0x3aafc9(_0x17267f,_0x1fe549,_0x1c9824,_0x20289a){return _0x33c368(_0x1fe549- -0x409,_0x1c9824,_0x1c9824-0x5d,_0x20289a-0xb0);}if(crypto&&crypto[_0x1aab03(0x493,0x56d,0x4a3,0x3ed)])return crypto[_0x1aab03(0x4e7,0x4f9,0x4a3,0x487)]();return Date['now']()[_0x3aafc9(-0x331,-0x270,-0x2eb,-0x22f)](-0x21d*-0x3+0xb4f+0x2eb*-0x6)+Math[_0x1aab03(0x5f9,0x540,0x5f4,0x5fc)]()['toString'](0x1*-0x4ef+-0x1064+-0x1*-0x1577)[_0x1aab03(0x4fe,0x5ac,0x505,0x46a)](0x67d+-0x3*-0x937+-0x2220);}export function LLM_CHAR_DESIGN_GET_PROMPT(){const _0x44121c={'mnyrC':function(_0x48869c,_0x33f140){return _0x48869c!==_0x33f140;},'ABzDu':function(_0xe3fc30,_0x10611b){return _0xe3fc30(_0x10611b);},'bVGoI':_0x3308a0(0x3bf,0x475,0x489,0x430),'BTbOx':_0x3308a0(0x3cf,0x480,0x474,0x3cd)+'时','zqwiK':_0x3308a0(0x33d,0x3fc,0x3ce,0x37f),'YdsHT':function(_0x3f9d13){return _0x3f9d13();}};function _0x4654ed(_0x51c2fe,_0x2ae181,_0x1c51ab,_0x436d66){return _0x33c368(_0x2ae181-0x353,_0x1c51ab,_0x1c51ab-0x117,_0x436d66-0x1c7);}function _0x3308a0(_0x1ec383,_0x4b99ae,_0xd5b102,_0x1ae02){return _0x33c368(_0xd5b102-0x1f4,_0x1ec383,_0xd5b102-0x18e,_0x1ae02-0xe6);}return new Promise((_0x8c3c8c,_0xc9cd00)=>{function _0x237793(_0x29e24d,_0x696af6,_0x1d736a,_0x36b362){return _0x4654ed(_0x29e24d-0x2,_0x29e24d- -0x52e,_0x1d736a,_0x36b362-0x13c);}const _0x3ca432={'VEEbV':function(_0x30c64e,_0x3a17a){function _0x2f7ce7(_0x35ba67,_0x2bfca5,_0x23fa2d,_0x190aee){return _0x1a7f(_0x35ba67-0x10d,_0x190aee);}return _0x44121c[_0x2f7ce7(0x2a6,0x365,0x291,0x331)](_0x30c64e,_0x3a17a);},'GBpSz':function(_0x434896,_0x45eae9){function _0x1afac7(_0x7f57b1,_0x345222,_0x51b038,_0x15c702){return _0x1a7f(_0x51b038- -0xb8,_0x345222);}return _0x44121c[_0x1afac7(0x1b2,0x18d,0x147,0x21b)](_0x434896,_0x45eae9);},'iSOQo':function(_0xf3b8a4,_0x1ed619){return _0xf3b8a4===_0x1ed619;},'EHhTP':_0x44121c[_0x558a74(0x2e8,0x2f2,0x33b,0x3b9)],'OFQOs':_0x44121c['BTbOx']};function _0x558a74(_0x2f9885,_0x5ae66b,_0x30118b,_0x20f304){return _0x3308a0(_0x2f9885,_0x5ae66b-0x34,_0x30118b- -0x78,_0x20f304-0x19e);}if(_0x44121c['mnyrC'](_0x44121c[_0x237793(0xc,-0x4e,0xbb,-0x40)],'wamEp')){const _0xd17c27=_0x480b27[-0x11ea+0x1*0x589+0xc62];_0x2ef0fd[_0xd17c27]=_0x2d2abb[_0xd17c27]||'';}else{const _0x58c6c6=_0x44121c['YdsHT'](generateRequestId);console[_0x558a74(0x50b,0x499,0x430,0x471)](_0x237793(0x122,0x92,0x126,0x116)+_0x558a74(0x3de,0x3b2,0x42a,0x4a0)+'sting\x20char'+_0x237793(0x11b,0x16f,0x113,0x50)+_0x237793(-0x3f,0x8f,-0x4c,-0xf9)+_0x58c6c6+')');const _0x11e54d=_0x305dd8=>{if(_0x3ca432[_0x1558c0(0xb5,0x18f,0xf6,0x22e)](_0x305dd8['id'],_0x58c6c6))return;function _0x2533d7(_0xaa2401,_0x38a72e,_0x1d756a,_0x55a50d){return _0x237793(_0xaa2401-0x4fb,_0x38a72e-0xdc,_0x1d756a,_0x55a50d-0x5c);}function _0x1558c0(_0x46ee5c,_0x52460f,_0x3f8e13,_0x94a652){return _0x237793(_0x52460f-0x1c5,_0x52460f-0xb5,_0x46ee5c,_0x94a652-0x15a);}eventSource['removeList'+_0x2533d7(0x5a3,0x616,0x4e4,0x58c)](eventNames['LLM_CHAR_D'+_0x1558c0(0x1a4,0x17a,0xc2,0x1f7)+_0x2533d7(0x631,0x641,0x6a0,0x596)+_0x2533d7(0x562,0x49d,0x57c,0x4d3)],_0x11e54d),_0x3ca432[_0x2533d7(0x53f,0x5f0,0x618,0x509)](_0x8c3c8c,_0x305dd8['prompt']);};eventSource['on'](eventNames[_0x558a74(0x2b7,0x367,0x394,0x3d6)+_0x558a74(0x28e,0x243,0x30c,0x379)+_0x558a74(0x4d3,0x3af,0x48d,0x434)+_0x558a74(0x31b,0x335,0x3be,0x454)],_0x11e54d);const _0x206d58={};_0x206d58['id']=_0x58c6c6,eventSource[_0x558a74(0x565,0x532,0x4b7,0x4ae)](eventNames[_0x237793(0x3d,0x10f,-0x5,-0x6e)+'ESIGN_GET_'+_0x237793(0xaa,0xb3,0x10,0x3e)+_0x237793(0x12f,0x1cd,0xfc,0x87)],_0x206d58),setTimeout(()=>{function _0x348bb3(_0x194bea,_0x5d6e6b,_0x1773a7,_0x3b5ea6){return _0x237793(_0x5d6e6b-0x17a,_0x5d6e6b-0x36,_0x194bea,_0x3b5ea6-0x155);}function _0x78e044(_0x4bc13e,_0x4a445b,_0x45afd1,_0xcf298a){return _0x237793(_0x45afd1-0x172,_0x4a445b-0xbb,_0x4bc13e,_0xcf298a-0x1d1);}if(_0x3ca432[_0x348bb3(0x2f1,0x296,0x1cc,0x20d)](_0x78e044(0xf0,0x1c3,0x14b,0x135),_0x3ca432['EHhTP']))return _0x3e67f7[_0x78e044(0x1c4,0x17d,0x12e,0x1d5)]();else eventSource[_0x78e044(0x1e2,0x1dd,0x147,0x7b)+_0x348bb3(0x1b3,0x222,0x216,0x279)](eventNames[_0x78e044(0xd0,0x1a5,0x1af,0x117)+_0x348bb3(0x1a2,0x12f,0x1d9,0x5a)+'PROMPT_RES'+_0x348bb3(0x279,0x1e1,0x13c,0x27e)],_0x11e54d),_0x3ca432[_0x78e044(0x144,0x1a6,0x1b6,0x21b)](_0xc9cd00,new Error(_0x3ca432[_0x348bb3(0x29e,0x1bf,0x25a,0x283)]));},-0x1*0x2b72+0x2089*0x1+0x31f9);}});}function _0x1a7f(_0x8105e9,_0x3f68a1){_0x8105e9=_0x8105e9-(0x74d+0x19cd+0xfe9*-0x2);const _0x4b9c8f=_0x5153();let _0xc10e65=_0x4b9c8f[_0x8105e9];if(_0x1a7f['fcakyk']===undefined){var _0x7bc751=function(_0x4894dd){const _0x4dd4d2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xcaccf4='',_0x4999d3='',_0x37db4b=_0xcaccf4+_0x7bc751;for(let _0x503283=0x8ae*-0x2+0x513+0xc49,_0x3a18c5,_0x216e98,_0x47e9c1=-0x3e+0x14e5+-0x14a7;_0x216e98=_0x4894dd['charAt'](_0x47e9c1++);~_0x216e98&&(_0x3a18c5=_0x503283%(0x224c+0x1707+-0x1*0x394f)?_0x3a18c5*(-0xea1+0x1*-0xfd+0xfde)+_0x216e98:_0x216e98,_0x503283++%(-0x1*0xbcb+-0x1*0x1271+0x1e40))?_0xcaccf4+=_0x37db4b['charCodeAt'](_0x47e9c1+(0xc1*-0x9+0x1*0x1795+-0xd*0x14a))-(0xc69*-0x3+-0x24a2+0x49e7)!==-0x8b+0x239f*0x1+-0x2314?String['fromCharCode'](0x815*0x3+-0x1c3+-0x157d&_0x3a18c5>>(-(-0x2267*0x1+-0xb88+-0x2df1*-0x1)*_0x503283&-0x6e1*-0x4+-0x26f4+0xb76*0x1)):_0x503283:0xb*-0x2ef+-0x1fc3*0x1+-0x2004*-0x2){_0x216e98=_0x4dd4d2['indexOf'](_0x216e98);}for(let _0x70ab67=0x18*0x7f+0x15*0x7b+-0x15ff*0x1,_0x19dad3=_0xcaccf4['length'];_0x70ab67<_0x19dad3;_0x70ab67++){_0x4999d3+='%'+('00'+_0xcaccf4['charCodeAt'](_0x70ab67)['toString'](-0x2497+0x7f9*-0x1+0x2ca0))['slice'](-(0x7ca*0x2+-0x1*0x955+-0x63d));}return decodeURIComponent(_0x4999d3);};_0x1a7f['HjWtvU']=_0x7bc751,_0x1a7f['vqsyBS']={},_0x1a7f['fcakyk']=!![];}const _0x5e64a7=_0x4b9c8f[0x1a*0xfa+-0x1d0a+0x3a6],_0x13778f=_0x8105e9+_0x5e64a7,_0x1fe0ab=_0x1a7f['vqsyBS'][_0x13778f];if(!_0x1fe0ab){const _0xeb6dfb=function(_0xb187b2){this['SZEGQx']=_0xb187b2,this['fOMaRx']=[-0x46f+-0x5d*-0x4e+-0x17e6,0x5d1*-0x5+0x3*-0x771+-0x4*-0xcda,-0x16f*0x6+-0xcd2+0x156c],this['DApYmN']=function(){return'newState';},this['SyjHlr']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['EJOSYE']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xeb6dfb['prototype']['IHasEz']=function(){const _0x581f2c=new RegExp(this['SyjHlr']+this['EJOSYE']),_0x3d8e09=_0x581f2c['test'](this['DApYmN']['toString']())?--this['fOMaRx'][0x15*0x15+0x9e6+0x2*-0x5cf]:--this['fOMaRx'][-0x1ad9+-0x20*0xfb+0x54b*0xb];return this['UqOemj'](_0x3d8e09);},_0xeb6dfb['prototype']['UqOemj']=function(_0x3bbc55){if(!Boolean(~_0x3bbc55))return _0x3bbc55;return this['zEZDNu'](this['SZEGQx']);},_0xeb6dfb['prototype']['zEZDNu']=function(_0x20c589){for(let _0x194dfa=0xd99+-0x9*0x161+-0x130,_0x4e26ff=this['fOMaRx']['length'];_0x194dfa<_0x4e26ff;_0x194dfa++){this['fOMaRx']['push'](Math['round'](Math['random']())),_0x4e26ff=this['fOMaRx']['length'];}return _0x20c589(this['fOMaRx'][-0x208d*0x1+0x31d*-0x8+-0x3975*-0x1]);},new _0xeb6dfb(_0x1a7f)['IHasEz'](),_0xc10e65=_0x1a7f['HjWtvU'](_0xc10e65),_0x1a7f['vqsyBS'][_0x13778f]=_0xc10e65;}else _0xc10e65=_0x1fe0ab;return _0xc10e65;}export function LLM_CHAR_DESIGN(_0x301f25,_0x1d46c1={}){function _0x4c9dda(_0x5a96ba,_0x407676,_0x353ae8,_0x2169b1){return _0x33c368(_0x407676-0x117,_0x5a96ba,_0x353ae8-0x16d,_0x2169b1-0x14e);}const _0x4a0308={'hIZUG':_0x4c9dda(0x40b,0x414,0x41d,0x4eb)+_0xd0714c(0x424,0x41f,0x4a6,0x3c0)+'LM\x20output\x20'+_0x4c9dda(0x37f,0x37d,0x410,0x304)+_0xd0714c(0x3f2,0x36d,0x368,0x3b2),'gMnFh':function(_0xd79c54,_0x3fca98){return _0xd79c54!==_0x3fca98;},'ZJJYC':function(_0x56dc4f){return _0x56dc4f();},'OLKmZ':function(_0x12b4fc,_0x27541f){return _0x12b4fc(_0x27541f);},'DuZIG':function(_0x2b73f5,_0x156631){return _0x2b73f5!==_0x156631;},'OzTZS':_0xd0714c(0x38c,0x370,0x354,0x360),'FJkEB':_0xd0714c(0x3dd,0x3cc,0x42b,0x481),'osUwg':function(_0x4536d8,_0x3faaa9){return _0x4536d8===_0x3faaa9;},'KZCNE':'bUSoy','dyLVU':function(_0x104157,_0x48b36a){return _0x104157===_0x48b36a;},'JyXaG':'ktiki','Gznko':'角色设计\x20LLM\x20请'+_0x4c9dda(0x3f2,0x407,0x46a,0x3b0),'DRlyn':function(_0x5301cd,_0x46d2f5,_0x19d3ae){return _0x5301cd(_0x46d2f5,_0x19d3ae);}};function _0xd0714c(_0x55ca42,_0x57ddc7,_0x2d9476,_0x1bc62e){return _0x33c368(_0x55ca42-0x173,_0x57ddc7,_0x2d9476-0x1b1,_0x1bc62e-0x1a5);}return new Promise((_0x33ec7d,_0x690bcd)=>{function _0x317aa4(_0x5167b8,_0x5cd465,_0x1aca6f,_0x55572c){return _0x4c9dda(_0x5cd465,_0x1aca6f- -0x47d,_0x1aca6f-0x112,_0x55572c-0x16e);}const _0x1860bc={'zIsmH':function(_0x3a2242,_0x5530d6){function _0x940845(_0x5132bc,_0x296a80,_0x17b8a2,_0x184191){return _0x1a7f(_0x17b8a2-0x233,_0x296a80);}return _0x4a0308[_0x940845(0x514,0x44b,0x502,0x4c6)](_0x3a2242,_0x5530d6);},'COtwS':function(_0x2f85ee,_0xf6feb9){function _0x2408f3(_0x232578,_0x4c4437,_0x43910d,_0x3f2c18){return _0x1a7f(_0x43910d- -0x275,_0x232578);}return _0x4a0308[_0x2408f3(-0x59,-0x5,-0xb1,-0x1c)](_0x2f85ee,_0xf6feb9);},'yihJZ':_0x4a0308[_0x317aa4(-0x1e9,-0xfc,-0x1a5,-0xff)],'qVFTm':function(_0x365954,_0x6c8640){function _0x2860b7(_0xe313f4,_0x1572b6,_0x406491,_0x1f061b){return _0x317aa4(_0xe313f4-0xcb,_0xe313f4,_0x1f061b- -0x1,_0x1f061b-0xaa);}return _0x4a0308[_0x2860b7(-0xec,-0x115,-0x113,-0x17e)](_0x365954,_0x6c8640);},'MRitr':_0x4a0308[_0x4f85a9(0xfe,0x62,0x141,0xbf)],'jQosx':_0x4a0308[_0x317aa4(-0x217,-0xae,-0x140,-0x19b)]};function _0x4f85a9(_0x3f1bc2,_0x24e608,_0x2907d3,_0xc825bd){return _0xd0714c(_0x3f1bc2- -0x358,_0xc825bd,_0x2907d3-0x10a,_0xc825bd-0x101);}const _0x2b047d=_0x4a0308[_0x4f85a9(0xd4,0xc2,0x18a,0xa4)](generateRequestId),_0x212b61=_0x1d46c1[_0x4f85a9(0xfd,0x5b,0xc3,0x113)]||0x8796+0x13db+0x4eef;let _0x2c5e5f=null;console[_0x317aa4(-0x9e,-0x6c,-0xb2,-0x30)]('[character'+_0x4f85a9(0x14d,0x94,0x20a,0xfb)+'ting\x20char\x20'+_0x4f85a9(0xfc,0xf3,0x75,0xd3)+_0x317aa4(-0x83,-0x103,-0x59,-0x117)+_0x317aa4(-0x124,-0xb1,-0xd3,-0xce)+_0x2b047d+')');const _0x26db16=()=>{function _0x3ddc05(_0x2d3f20,_0x5ead01,_0x4885cb,_0x52c231){return _0x4f85a9(_0x5ead01-0x2c2,_0x5ead01-0x11,_0x4885cb-0x3e,_0x4885cb);}function _0x35799c(_0x186f13,_0x3fe507,_0x10b178,_0x18e5e0){return _0x4f85a9(_0x186f13-0x1de,_0x3fe507-0x18,_0x10b178-0x1b4,_0x3fe507);}eventSource[_0x3ddc05(0x1ee,0x28d,0x333,0x353)+_0x35799c(0x27c,0x314,0x2f9,0x236)](eventNames['LLM_CHAR_D'+'ESIGN_RESP'+_0x3ddc05(0x432,0x3ca,0x39e,0x455)],_0x1d1cf3),_0x2c5e5f&&(_0x1860bc[_0x35799c(0x275,0x255,0x28d,0x2cc)](_0x3ddc05(0x49d,0x3e4,0x312,0x3b4),_0x1860bc['yihJZ'])?(_0x1860bc[_0x3ddc05(0x359,0x2ea,0x26c,0x315)](clearTimeout,_0x2c5e5f),_0x2c5e5f=null):(_0x1860bc['zIsmH'](_0x17f29f,_0x22fc1a),_0x585e89=null));},_0x1d1cf3=_0x39bfd2=>{const _0x47d121={};_0x47d121[_0x362662(-0x1d,0x12,-0xc6,-0x68)]=_0x362662(0x14b,0x137,0x49,0x102)+_0x59ac17(0x367,0x2f1,0x407,0x440)+_0x362662(0xdc,-0x3b,0x8b,0x31)+'tfit\x20tags\x20'+_0x362662(-0x33,-0x1,-0x4,-0x35)+_0x59ac17(0x270,0x1c3,0x1ef,0x340);function _0x362662(_0x422276,_0xdaf145,_0x52f0bd,_0x5aa61d){return _0x317aa4(_0x422276-0x134,_0x52f0bd,_0x5aa61d-0x16b,_0x5aa61d-0xcf);}_0x47d121[_0x59ac17(0x2c8,0x3a7,0x276,0x23c)]=_0x4a0308['hIZUG'];const _0x5658aa=_0x47d121;function _0x59ac17(_0x5aaa85,_0x7539fe,_0x153528,_0x202724){return _0x317aa4(_0x5aaa85-0xc6,_0x7539fe,_0x5aaa85-0x3fe,_0x202724-0x17e);}if(_0x4a0308[_0x59ac17(0x320,0x282,0x33c,0x396)](_0x39bfd2['id'],_0x2b047d))return;_0x4a0308[_0x59ac17(0x351,0x398,0x392,0x299)](_0x26db16);if(_0x39bfd2[_0x59ac17(0x3d4,0x460,0x3ab,0x4a7)]){if(_0x39bfd2[_0x362662(0xcc,0x96,-0xca,-0x1)]){const _0x3bec97={};_0x3bec97['result']=_0x39bfd2['result'],_0x3bec97[_0x59ac17(0x292,0x2f7,0x1db,0x349)]=!![],_0x4a0308[_0x59ac17(0x3ae,0x3f5,0x44c,0x3ce)](_0x33ec7d,_0x3bec97);}else{const _0x367ec6={};_0x367ec6[_0x59ac17(0x2af,0x201,0x210,0x2b4)]=_0x39bfd2[_0x362662(0x45,0x62,-0x23,0x1c)],_0x367ec6[_0x362662(-0x6e,0xdd,0xb4,-0x1)]=![],_0x33ec7d(_0x367ec6);}}else{if(_0x4a0308[_0x59ac17(0x32e,0x2a4,0x2c7,0x3a7)](_0x4a0308[_0x362662(0xf0,-0x10,0x5b,0x36)],_0x4a0308[_0x59ac17(0x2c9,0x309,0x366,0x30a)])){_0x4ec5f5[_0x362662(-0x8f,0x7f,-0x4a,0x33)](_0x362662(0x41,0x8c,0x25,0xf)+_0x59ac17(0x295,0x1e7,0x312,0x363)),_0x5e37ed[_0x362662(0x5b,0xba,0x18a,0xb9)](_0x5658aa[_0x59ac17(0x22b,0x220,0x1ec,0x301)]),_0x282b1a[_0x362662(0x17f,0xd8,0xd8,0xb9)](_0x5658aa[_0x59ac17(0x2c8,0x25e,0x243,0x364)],_0x5808ef);return;}else _0x690bcd(new Error(_0x39bfd2[_0x362662(0x4f,0xae,0xc5,0x1c)]||_0x4a0308[_0x59ac17(0x237,0x28f,0x247,0x1d1)]));}};eventSource['on'](eventNames[_0x4f85a9(0x33,-0x45,0x9d,0x8e)+_0x317aa4(-0x5e,-0x3b,-0xf1,-0x110)+_0x4f85a9(0x108,0x1e3,0x1d4,0x150)],_0x1d1cf3);const _0x4cece0={};_0x4cece0[_0x4f85a9(-0x51,0x2f,0x8e,0x5f)]=_0x301f25,_0x4cece0['id']=_0x2b047d,eventSource[_0x317aa4(-0xd,0x3f,-0x2b,-0x17)](eventNames[_0x317aa4(-0x141,-0x108,-0x14e,-0xc6)+'ESIGN_REQU'+_0x317aa4(-0x84,-0x58,-0xa6,-0xdd)],_0x4cece0),_0x2c5e5f=_0x4a0308[_0x317aa4(-0x268,-0x1a0,-0x1ae,-0x174)](setTimeout,()=>{function _0x19c3ea(_0x2a571e,_0x26e575,_0x2d0266,_0x43adf4){return _0x4f85a9(_0x2a571e-0x132,_0x26e575-0x111,_0x2d0266-0x21,_0x26e575);}function _0x372bc9(_0x484632,_0x6919ba,_0x53fa17,_0x1042f){return _0x317aa4(_0x484632-0x157,_0x53fa17,_0x6919ba-0x599,_0x1042f-0x131);}_0x1860bc[_0x372bc9(0x46c,0x53b,0x476,0x5c1)](_0x1860bc[_0x372bc9(0x4d4,0x503,0x473,0x5d6)],_0x372bc9(0x4f5,0x482,0x467,0x4c1))?_0x296e9a[_0x372bc9(0x510,0x4db,0x514,0x4ac)](_0x2d5dbd):(_0x26db16(),_0x690bcd(new Error(_0x1860bc['jQosx'])));},_0x212b61);});}export async function handleCharacterDesignRequest(_0x51315d){function _0x38e094(_0x1e5e47,_0x187340,_0x560776,_0xc7683){return _0x33c368(_0x560776- -0x2b6,_0x187340,_0x560776-0x181,_0xc7683-0xf6);}function _0x13a172(_0x58eb81,_0x9b91b5,_0x10460e,_0x172a3b){return _0x33c368(_0x172a3b- -0x3b5,_0x58eb81,_0x10460e-0x157,_0x172a3b-0x2f);}const _0x78a5d2={'GzfJW':function(_0x43629d,_0x48ed83){return _0x43629d(_0x48ed83);},'DFovj':_0x38e094(-0x51,-0x3,0x4d,0x1a),'DzGaq':function(_0x418f7a,_0x347099){return _0x418f7a!==_0x347099;},'ciWAV':function(_0x14a57f,_0xb1de69){return _0x14a57f(_0xb1de69);},'IhnWl':function(_0x34920d){return _0x34920d();},'QhUHW':_0x38e094(0xda,0x28,0x5d,-0x1f),'wfWsh':function(_0x30b329,_0x5acc46){return _0x30b329+_0x5acc46;},'rjUYo':function(_0x520d23,_0xea1873){return _0x520d23-_0xea1873;},'yTNKS':function(_0x374950,_0x2f2ee8){return _0x374950>=_0x2f2ee8;},'yiUDA':_0x38e094(-0xe9,-0x34,-0x80,-0x39),'gTHbN':function(_0x486894){return _0x486894();},'Krcmt':function(_0x33efa0,_0x15f95d){return _0x33efa0(_0x15f95d);},'MwVSw':'角色设计\x20LLM\x20请'+_0x38e094(0x52,-0x41,0x3a,0x12),'nyCAs':_0x38e094(-0x80,-0x16e,-0xe6,-0x86),'XdlxA':function(_0x3ac456,_0x2bc717){return _0x3ac456===_0x2bc717;},'LvYZq':_0x38e094(0xa8,0x58,0x47,0x86)+_0x38e094(0x6d,-0x7e,-0x6f,-0x9a)+'ing\x20charac'+'ter\x20design'+_0x38e094(-0x120,-0xb7,-0x4a,0x7e)+'.','xvDve':function(_0x440b40){return _0x440b40();},'QvSut':'已取消角色生成','dvDjK':_0x38e094(0x9f,0xe8,0x47,-0x4b)+_0x13a172(-0x139,-0x2f,-0xbe,-0xed)+_0x38e094(-0x10,-0x55,-0x73,-0x12e),'UUQgS':_0x13a172(-0x147,-0x13b,-0x10a,-0xb8)+'Gen]\x20正在处理角'+_0x38e094(-0xd,-0x17,-0x4f,0x2)+'.','qUZHM':function(_0x2b03a0,_0x3639c9){return _0x2b03a0+_0x3639c9;},'pyNYp':'qLKZH','QEazu':_0x13a172(-0x5e,-0x16e,-0x1a5,-0xd5),'hWviN':_0x13a172(-0x8d,-0x52,-0xe2,-0xb8)+_0x13a172(-0x294,-0x1e5,-0x168,-0x1d2)+'xt\x20element'+'s:','zhvjE':function(_0x52ea99,_0x110c76){return _0x52ea99!==_0x110c76;},'fISwF':_0x38e094(-0x12,-0x1e,-0x82,-0xb1),'ukQxB':_0x13a172(0x14,-0x16c,-0x1d,-0xb8)+'Gen]\x20Trigg'+_0x38e094(-0xf2,-0x59,-0x59,0x3b)+_0x13a172(-0x1f1,-0xa5,-0x10d,-0x170)+_0x13a172(-0xc5,-0x1d6,-0x10d,-0x10b),'JhxRN':function(_0x32543d,_0x5e140e){return _0x32543d>_0x5e140e;},'XQQnC':'qNYCy','mAaCc':function(_0xcbb5f6,_0x2e2961){return _0xcbb5f6===_0x2e2961;},'YhiTi':_0x38e094(-0xc0,-0x72,-0x3e,-0xd7),'YJDdX':_0x38e094(-0x30,0x5f,0x71,0x6e),'sqDFH':_0x38e094(-0x9e,-0xef,-0xe9,-0xa1),'AGBsS':function(_0x7d940c,_0x42f5e1){return _0x7d940c!==_0x42f5e1;},'yECIa':_0x13a172(-0x126,-0x1b3,-0xbc,-0x111),'utVOu':_0x13a172(-0x1b4,-0x71,-0x144,-0x10a),'xNCEK':_0x38e094(0x46,0xd5,0xd,0x64)+'n','lFPtD':function(_0x375d5c){return _0x375d5c();},'RTKUc':_0x38e094(-0x92,0x35,0x47,0x7c)+_0x13a172(-0xe0,-0x4b,-0x13,-0x90)+'cter\x20list\x20'+'text\x20(trig'+'gered):','vzNsK':function(_0xf62d11,_0xad3968){return _0xf62d11(_0xad3968);},'ZEemd':_0x13a172(-0x106,-0xf0,0x2,-0xb8)+_0x38e094(0x109,0x111,0x8e,0x101)+_0x13a172(-0xc8,-0x161,-0x52,-0xde),'zDiio':function(_0x494526,_0x519c6f){return _0x494526||_0x519c6f;},'hMDrZ':_0x38e094(0x2b,0x87,0x47,0x15)+'Gen]\x20找到用户消'+_0x13a172(-0x157,-0x119,-0xfe,-0x123),'DhKVu':function(_0x33a124,_0x2cd05b){return _0x33a124>_0x2cd05b;},'iijOm':'参考图片','hgCcC':_0x13a172(-0x17,-0x179,-0x170,-0xb8)+_0x13a172(-0x1e3,-0x122,-0x216,-0x176),'QyMBs':_0x38e094(-0x168,-0x34,-0xc5,-0xf),'hkZUj':_0x13a172(-0x1ce,-0xec,-0x1a9,-0x183),'mLsib':_0x13a172(-0xc9,-0x77,-0x165,-0x13b),'PeNvQ':function(_0x5ab93d){return _0x5ab93d();},'pAJGE':_0x38e094(-0x183,-0xc7,-0x10c,-0x17f),'KVKfy':_0x38e094(-0xa2,-0x2e,-0xe2,-0xc2)+_0x38e094(-0x8b,0x20,-0xa6,-0x5a),'geBkM':'[character'+'Gen]\x20Final'+_0x13a172(-0x1e3,-0x1bd,-0xd8,-0x121),'oZZjt':function(_0x378652,_0x1bd516){return _0x378652>_0x1bd516;},'MJfHW':'dgKjq','cJxTm':function(_0x5bb91e,_0x33666d,_0x3642e1){return _0x5bb91e(_0x33666d,_0x3642e1);},'qOoZy':_0x38e094(0x82,-0x60,0x1b,-0x96)+_0x13a172(-0x237,-0x268,-0x229,-0x1de)+_0x13a172(-0x175,-0x1fc,-0x131,-0x206)+_0x38e094(-0x48,-0x105,-0x87,0x33),'ODICk':_0x38e094(0x87,0x3b,0x47,-0x20)+_0x38e094(-0x71,-0x34,0x18,0x8a)+'式\x20-\x20LLM\x20请求'+_0x13a172(-0x179,-0x18e,-0x172,-0x191),'cnFdS':_0x38e094(-0x40,0x11b,0x47,0x10e)+_0x13a172(-0x2ae,-0x1b6,-0x295,-0x223)+_0x38e094(-0x69,-0x19c,-0x118,-0x53),'yKZfT':_0x38e094(-0x52,0x9c,0x47,0x3d)+_0x38e094(-0x51,0x3c,-0x9a,-0xb3)+_0x13a172(-0xeb,-0xb8,-0x98,-0x85),'rLNlh':_0x38e094(0xb1,-0x76,-0x2d,0x93),'VCNWC':_0x38e094(0x102,0x115,0x5f,0xd5),'okEDv':function(_0x1b352e,_0xb88789){return _0x1b352e===_0xb88789;},'TfvKe':'[character'+'Gen]\x20No\x20ch'+_0x38e094(-0xf4,-0xfd,-0x8a,-0x129)+_0x13a172(-0x194,-0x15a,-0x14e,-0x11a)+'found\x20in\x20o'+_0x38e094(-0x62,-0xa2,-0xde,-0x3e),'YeiRc':_0x38e094(0xa0,0x30,0x47,-0x5b)+'Gen]\x20Raw\x20L'+_0x13a172(-0x1fd,-0x239,-0x150,-0x1a2)+_0x13a172(-0x110,-0x1a6,-0x194,-0x14f)+_0x38e094(-0xfe,-0x3b,-0x37,-0x56),'TnAHc':_0x13a172(-0x110,-0x162,0x17,-0xb8)+_0x13a172(-0x262,-0x1ef,-0x299,-0x1fb)+_0x13a172(-0x9f,-0x25,-0xbc,-0x8f),'NPlbY':function(_0x2ad760,_0x119ad9){return _0x2ad760!==_0x119ad9;},'ykrhq':_0x13a172(-0x186,-0xe9,-0x21d,-0x161),'GHwXA':function(_0x113815,_0x5c0f0f){return _0x113815===_0x5c0f0f;},'AoErK':_0x13a172(-0x26b,-0x264,-0x2ae,-0x1cf),'vseJP':function(_0x2da6d1,_0x5313ce,_0x20ac5f){return _0x2da6d1(_0x5313ce,_0x20ac5f);}};console[_0x13a172(-0x10b,-0xdd,-0x155,-0x101)](_0x78a5d2['LvYZq']);try{const _0x3e364e=await _0x78a5d2[_0x38e094(-0x83,-0x59,0x38,-0x73)](showUserDemandPopup);if(_0x78a5d2[_0x38e094(-0x102,-0x8b,-0xcb,-0xe9)](_0x3e364e,null)){console[_0x38e094(-0x78,-0x14,-0x2,-0x47)](_0x38e094(0xf4,0xd3,0x47,0xfc)+_0x13a172(-0x10d,-0x113,-0x11c,-0xed)+_0x38e094(0x7e,-0x25,0x7d,-0x51)+_0x38e094(0x58,0x7,0x64,0x101)+'t'),toastr[_0x13a172(-0x170,-0x19e,-0x129,-0x1e2)](_0x78a5d2['QvSut']);return;}let _0x46c741=_0x3e364e[_0x38e094(0xad,-0x77,0x5d,0x14)]||extension_settings[extensionName]?.[_0x38e094(0x2f,-0x11d,-0x79,-0x14f)+_0x13a172(-0x82,-0x14c,-0x91,-0xb7)]||'';const _0x4565f3=_0x3e364e[_0x13a172(-0x153,-0x19d,-0x100,-0x128)]||[];console['log'](_0x78a5d2[_0x13a172(-0x1b5,-0x12f,-0x203,-0x18a)],_0x46c741),console[_0x13a172(-0x128,-0xcf,-0x18c,-0x101)]('[character'+_0x38e094(-0x42,-0xaa,0x12,-0x49)+_0x13a172(-0x151,-0x2b8,-0x271,-0x1fc)+_0x13a172(-0x12f,-0x19f,-0x1fd,-0x1b7)+'t:',_0x4565f3[_0x38e094(0x15,-0x9a,0x3c,-0x77)]),toastr[_0x13a172(-0x1cf,-0x15b,-0x23d,-0x1e2)](_0x78a5d2[_0x38e094(-0x53,-0x17c,-0xc8,0x11)]);const _0x3968f1=getContext(),_0x4cf1c3=_0x78a5d2[_0x38e094(0x10c,-0x43,0x6d,0xc)](extension_settings[extensionName]?.['llm_histor'+'y_depth']??-0x9b8+-0x1589+-0x97*-0x35,-0x33b*-0x4+-0x1c97*-0x1+-0x2982),_0x5f2f5a=await getElContext(_0x51315d,_0x4cf1c3);if(!_0x5f2f5a||_0x5f2f5a['length']===-0x1*-0x187c+0x4cb+-0x5*0x5db){if(_0x78a5d2['DzGaq'](_0x38e094(0x49,0xe6,0x15,-0x9f),_0x78a5d2['pyNYp'])){toastr['warning'](_0x78a5d2[_0x13a172(-0x16f,-0x1b1,-0x10b,-0xe3)]);return;}else _0x78a5d2['GzfJW'](_0x354ac5,{'text':_0x4d182d['value'][_0x13a172(-0x1a7,-0x138,-0x125,-0x12b)]()||null,'images':[..._0x766ac4]}),_0x28da22[_0x13a172(-0xc5,-0x138,-0x195,-0x193)+_0x38e094(0xdc,0x3d,0x2,-0x95)](_0x78a5d2[_0x38e094(-0x180,-0x76,-0xef,-0x17d)],_0x4e7b6f);}console[_0x13a172(-0x35,-0x29,-0xd1,-0x101)](_0x78a5d2['hWviN'],_0x5f2f5a);const _0x25acbb=_0x5f2f5a[_0x78a5d2['rjUYo'](_0x5f2f5a['length'],-0x17*-0x11c+0xd69*0x1+-0x26ec)];let _0x3eaca5='';if(_0x5f2f5a){if(_0x78a5d2['zhvjE'](_0x13a172(-0xf6,-0x80,-0xb1,-0xf8),_0x78a5d2[_0x38e094(0x46,-0x140,-0x75,-0xeb)])){const _0x26ee9a=_0x46c741?[..._0x5f2f5a,_0x46c741]:_0x5f2f5a;_0x3eaca5=await processWorldBooksWithTrigger(_0x26ee9a),console[_0x13a172(-0xc1,-0x38,-0xb0,-0x101)](_0x78a5d2[_0x38e094(-0x1ae,-0x1c4,-0x113,-0x4e)],_0x3eaca5);}else{const _0x51d3a0=_0x78a5d2[_0x13a172(-0x1f9,-0x133,-0x1e6,-0x194)](_0x2cc2f0);_0xcbc68f[_0x38e094(0x95,0xbc,-0x2,0xc7)](_0x13a172(-0xc0,-0x2d,-0x26,-0xb8)+'Gen]\x20Reque'+_0x38e094(-0x79,-0x121,-0xd4,-0x17)+_0x38e094(0xbb,0xe5,0x40,-0x5f)+_0x38e094(-0x7d,-0x125,-0x11a,-0xde)+_0x51d3a0+')');const _0x1a1a1c=_0xacaa6c=>{function _0x25a0e7(_0x1f36fe,_0x4e2888,_0x4757fd,_0x6344bd){return _0x38e094(_0x1f36fe-0x9,_0x4757fd,_0x4e2888- -0x7d,_0x6344bd-0xab);}if(_0x78a5d2[_0x1e2794(0x140,0x1a2,0x65,0xff)](_0xacaa6c['id'],_0x51d3a0))return;function _0x1e2794(_0x4b5c78,_0x2c23a8,_0x37a8b8,_0x5c5044){return _0x38e094(_0x4b5c78-0x1e,_0x5c5044,_0x4b5c78-0x1a8,_0x5c5044-0xb3);}_0xe3ab96[_0x1e2794(0xa2,-0x1c,-0x1c,0x152)+_0x25a0e7(0x17,-0xb0,-0x20,-0xf9)](_0x55c57c[_0x25a0e7(-0xe7,-0x11b,-0xa5,-0xaf)+'ESIGN_GET_'+_0x25a0e7(0x6d,-0x22,0x97,-0xd8)+_0x25a0e7(-0xd0,-0xf1,-0x1a5,-0x1a5)],_0x1a1a1c),_0x78a5d2['ciWAV'](_0x1237a8,_0xacaa6c[_0x1e2794(0x86,0xc4,0x163,0x10)]);};_0x24665b['on'](_0x38064b[_0x38e094(0x40,-0x25,-0x9e,-0x4c)+'ESIGN_GET_'+_0x13a172(-0x179,-0x160,-0x12,-0xa4)+_0x13a172(-0x19d,-0xb8,-0x21f,-0x173)],_0x1a1a1c);const _0x345c52={};_0x345c52['id']=_0x51d3a0,_0x547f2d[_0x38e094(0x79,0x0,0x85,-0x1e)](_0x3b2d79['LLM_CHAR_D'+_0x38e094(-0x8a,-0x160,-0x126,-0x66)+'PROMPT_REQ'+_0x38e094(0xba,0xc2,0x54,0x11c)],_0x345c52),_0x504c41(()=>{function _0x2c2e44(_0x202b8e,_0x24079a,_0x568b19,_0x4e7742){return _0x13a172(_0x24079a,_0x24079a-0xb3,_0x568b19-0x11,_0x202b8e-0x29a);}_0x22ede8['removeList'+_0x2c2e44(0x168,0x20a,0x19b,0x228)](_0x8ee49f[_0x473382(0x4d4,0x565,0x578,0x53d)+'ESIGN_GET_'+_0x473382(0x6e0,0x6a5,0x582,0x636)+'PONSE'],_0x1a1a1c);function _0x473382(_0x42b7bc,_0x36669b,_0x450fdf,_0x8f1c9){return _0x38e094(_0x42b7bc-0xde,_0x450fdf,_0x8f1c9-0x5db,_0x8f1c9-0x5e);}_0x5bd0ce(new _0x156599('获取角色设计提示词超'+'时'));},-0xbb8+-0x4a59+0x7d21);}}const _0x19772a=_0x5f2f5a&&_0x78a5d2['JhxRN'](_0x5f2f5a[_0x13a172(-0x9b,0x16,-0x56,-0xc3)],-0x2489+-0x213b+-0x1*-0x45c5)?_0x5f2f5a[_0x13a172(-0x128,-0x24f,-0x23a,-0x1e9)](-0x16cd+-0xfce+0x269b*0x1,-(0xa86+0x22bd*0x1+-0x2d42*0x1)):[],_0x2e4d15=[];if(_0x46c741){if(_0x78a5d2[_0x13a172(-0x26e,-0x208,-0x264,-0x1f0)](_0x78a5d2[_0x38e094(0x140,0x2b,0x68,0xa3)],_0x13a172(-0x1be,-0x10a,-0xfd,-0x1c9))){const _0x57b907=_0x371e15[_0x13a172(-0x1e4,-0x19c,-0x14a,-0x1b2)+'gClientRec'+'t']();_0x3e1c8b=_0x57b907['top']-(0x9d7*-0x3+-0x731*-0x1+0x332*0x7);}else _0x2e4d15[_0x13a172(-0x27e,-0x245,-0x254,-0x1ea)](_0x46c741);}if(_0x25acbb){if(_0x78a5d2['mAaCc'](_0x78a5d2['YhiTi'],_0x78a5d2[_0x13a172(-0x2d0,-0x219,-0x15c,-0x1f3)])){const _0x5bcb40={};_0x5bcb40['type']=_0x78a5d2['QhUHW'],_0x5bcb40['text']=_0x4cbd66[_0x13a172(-0x24c,-0x1e1,-0x2cc,-0x1f7)],_0x10e0b2[_0x13a172(-0x139,-0x1d9,-0x13b,-0x1ea)](_0x5bcb40);}else _0x2e4d15['push'](_0x25acbb);}const _0x2c5c74=_0x2e4d15[_0x38e094(-0x105,-0x12e,-0x9c,-0xb8)]('\x0a'),_0x43ca6c=[];if(_0x46c741){if(_0x78a5d2[_0x13a172(-0x143,-0x136,-0x20f,-0x1f0)](_0x78a5d2[_0x13a172(-0x9e,-0x172,-0x1f9,-0x171)],_0x78a5d2[_0x38e094(-0x136,-0x2b,-0x72,0x21)]))return _0x432bdb[_0x13a172(-0x5a,0x7,0x2,-0x8c)](_0x281ce0=>_0x29e5d0(_0x281ce0,_0x4a9dde,_0x384b2c,_0x4f16dc));else _0x43ca6c['push'](_0x46c741);}_0x5f2f5a&&_0x5f2f5a[_0x13a172(-0x70,-0x12a,-0xc8,-0xc3)]>-0x1*0x1a68+-0x1c4*-0xf+-0x14&&(_0x78a5d2[_0x38e094(0x80,-0x16,0x93,0x83)](_0x78a5d2[_0x38e094(-0xc8,-0x35,-0xa2,-0x10a)],_0x78a5d2[_0x38e094(-0x170,-0x103,-0xdd,-0xd0)])?_0x43ca6c[_0x38e094(-0x128,-0x1b7,-0xeb,-0x12)](_0x5f2f5a[_0x13a172(-0x102,-0x1c0,-0x250,-0x19b)]('\x0a')):_0x2a8d6e[_0x13a172(-0x11e,-0x138,-0x29b,-0x1ea)](_0x319a2b));_0x3eaca5&&_0x43ca6c['push'](_0x3eaca5);const _0x5044ca=_0x43ca6c[_0x38e094(0xa,-0x149,-0x9c,-0x13a)]('\x0a');console[_0x13a172(-0x154,-0x92,-0x176,-0x101)](_0x38e094(-0x60,-0x70,0x47,0x77)+_0x13a172(-0xf1,-0x3a,-0x16,-0x90)+_0x38e094(-0x79,-0x1ca,-0x105,-0x145)+'er\x20text:',_0x5044ca);let _0x49d8a2=buildPromptForRequestType(_0x78a5d2[_0x13a172(-0x1ff,-0x2da,-0x236,-0x220)],_0x2c5c74);const _0x10aa38=_0x78a5d2[_0x13a172(-0x155,-0x199,-0xbd,-0xee)](generateCharacterListText,_0x5044ca),_0x1f6234=generateOutfitEnableListText(),_0xf43e6a=_0x78a5d2['lFPtD'](generateCommonCharacterListText);console[_0x38e094(-0xe,0x21,-0x2,0x52)](_0x78a5d2[_0x38e094(-0x8c,-0xd0,-0x127,-0xfd)],_0x10aa38);const _0x53767e=_0x3968f1[_0x13a172(-0x1f6,-0x2ae,-0x1bb,-0x1ff)+'ta']?.[_0x13a172(-0x111,0xa,0x7,-0x9d)]||{};_0x49d8a2=_0x78a5d2[_0x13a172(-0x287,-0x2e2,-0x22d,-0x20e)](mergeAdjacentMessages,_0x49d8a2),console[_0x38e094(0x5c,0x23,-0x2,-0xc7)](_0x78a5d2['ZEemd'],_0x49d8a2);const _0x245f02={'context':_0x19772a[_0x13a172(-0x125,-0x19a,-0x120,-0x19b)]('\x0a'),'body':_0x25acbb,'worldBookContent':_0x3eaca5,'variables':_0x53767e,'userDemand':_0x78a5d2[_0x38e094(0x3a,-0xef,-0x8e,-0x8d)](_0x46c741,''),'characterListText':_0x10aa38,'outfitEnableListText':_0x1f6234,'commonCharacterListText':_0xf43e6a},{messages:_0x4b7fe8,replacedVariables:_0x27de30}=replaceAllPlaceholders(_0x49d8a2,_0x245f02);_0x49d8a2=_0x4b7fe8;function _0x4b1e0e(_0x51ca0b){function _0x5ba954(_0x15be3b,_0x5aba64,_0x128ba5,_0x385c78){return _0x13a172(_0x15be3b,_0x5aba64-0x1ab,_0x128ba5-0x1c8,_0x128ba5-0x145);}function _0x5c0ef3(_0xb929e7,_0xf25311,_0x39b150,_0x306984){return _0x13a172(_0x306984,_0xf25311-0x184,_0x39b150-0x3f,_0xb929e7-0x5a5);}const _0x2fff0e={'NvlTK':function(_0x3223ec,_0x57c14c){return _0x78a5d2['wfWsh'](_0x3223ec,_0x57c14c);}};for(let _0x205d2a=_0x78a5d2['rjUYo'](_0x51ca0b['length'],0x1745+0x45*-0x1+-0x16ff);_0x78a5d2[_0x5ba954(0xb2,0x123,0xd2,0x36)](_0x205d2a,-0x1586+0x19b1*0x1+-0x42b);_0x205d2a--){if(_0x51ca0b[_0x205d2a][_0x5ba954(0x173,0x11,0x9b,0x47)]===_0x5c0ef3(0x3ac,0x350,0x451,0x42e)){if(_0x78a5d2['yiUDA']!==_0x78a5d2['yiUDA']){if(_0x5cee45&&_0x1c9165[_0x5c0ef3(0x387,0x41e,0x42c,0x3b5)])return _0x3b7cca[_0x5ba954(-0x55,-0xe6,-0xd9,-0x152)]();return _0x2fff0e['NvlTK'](_0x3efbb2['now']()[_0x5c0ef3(0x389,0x42c,0x2d4,0x330)](-0x1922*0x1+-0x4f*0x68+0x1caf*0x2),_0x2e4551[_0x5ba954(0xa1,0x1a,0x78,-0x25)]()[_0x5c0ef3(0x389,0x34f,0x328,0x463)](0x1*-0x1d5+0x1eea+-0x1cf1*0x1)[_0x5c0ef3(0x3e9,0x413,0x3e9,0x421)](-0x1c1b+-0xa*0x232+0x3211));}else return _0x205d2a;}}return-(0x1ccc+0x2097+0x61*-0xa2);}const _0x2d2d6a=_0x78a5d2[_0x13a172(-0xf9,-0x111,-0x21e,-0x157)](_0x4b1e0e,_0x49d8a2);console['log'](_0x78a5d2[_0x13a172(-0x179,-0x109,-0xae,-0xd9)],_0x2d2d6a);_0x78a5d2['DhKVu'](_0x4565f3[_0x13a172(-0xcb,-0x170,-0xd1,-0xc3)],0xff4*0x2+-0x20a3+0xb*0x11)&&_0x78a5d2[_0x13a172(-0x3,-0x12,-0x10e,-0x73)](_0x2d2d6a,0x1*0x6b1+0x1350+-0x1a01)&&(_0x49d8a2=attachImagesToMessage(_0x49d8a2,_0x2d2d6a,_0x4565f3,_0x78a5d2[_0x38e094(0x61,0xa8,-0x1f,0x6c)]),console[_0x38e094(-0x28,-0x90,-0x2,0x6a)](_0x78a5d2[_0x38e094(0x63,-0x18,-0x34,-0x35)],_0x4565f3[_0x13a172(0x8,-0xbe,-0xd5,-0xc3)],_0x78a5d2[_0x38e094(0x3a,0xe4,0x8,-0x7c)],_0x2d2d6a));try{if(_0x78a5d2['zhvjE'](_0x78a5d2['hkZUj'],_0x78a5d2[_0x13a172(-0x9f,-0x77,-0x54,-0x126)])){const _0x1c0422=await _0x78a5d2['Krcmt'](getEnabledCharacterImages,_0x5044ca),_0x19d1cb=await _0x78a5d2['PeNvQ'](getEnabledOutfitImages),_0x5f0edc=await getCommonCharacterImages(),_0x348a9a=[..._0x1c0422,..._0x19d1cb,..._0x5f0edc];_0x78a5d2[_0x38e094(-0xd0,-0x181,-0xfb,-0x38)](_0x348a9a[_0x38e094(0x107,0x25,0x3c,-0x62)],-0xe8e+-0x1093*0x2+0x2b*0x11c)&&_0x78a5d2['yTNKS'](_0x2d2d6a,0x4f*-0x4+-0x34*-0x64+-0x1314)&&(_0x78a5d2['XdlxA'](_0x78a5d2[_0x38e094(0x3e,-0x70,-0x83,-0x11a)],_0x78a5d2[_0x38e094(-0xa7,-0x11d,-0x83,-0x122)])?(_0x49d8a2=attachImagesToMessage(_0x49d8a2,_0x2d2d6a,_0x348a9a,_0x38e094(0x6a,0xed,0x8d,-0xb)),console[_0x13a172(-0x18a,-0x163,-0x12f,-0x101)](_0x78a5d2[_0x38e094(0x7,-0x47,-0x34,-0x104)],_0x348a9a[_0x13a172(-0xc6,-0x13b,-0x3,-0xc3)],_0x78a5d2[_0x13a172(-0x176,-0x2d6,-0x2e2,-0x207)],_0x2d2d6a)):(_0x78a5d2['gTHbN'](_0x23c1af),_0x78a5d2[_0x13a172(-0x1eb,-0x1fc,-0x18d,-0x157)](_0x46e9ed,new _0x6a9e7(_0x78a5d2['MwVSw']))));}else _0x39a55b['classList'][_0x38e094(0x1d,-0x28,-0xe,-0xe8)](_0x78a5d2[_0x13a172(-0xf9,-0xa6,-0xfd,-0xf1)]),_0x467b0d[_0x38e094(-0x117,-0xc6,-0x47,0x34)][_0x38e094(-0x92,-0x48,-0x15,0xb)]=_0x468974+'px',_0x3fb368[_0x38e094(-0xf3,-0x3d,-0x47,-0x5f)][_0x38e094(-0xc1,-0x175,-0xae,-0xb)]=_0x4014ba+'px';}catch(_0x687ce2){console[_0x38e094(0xcb,0x39,0x28,0x2d)](_0x38e094(0x113,-0x2c,0x47,0xa4)+'Gen]\x20收集角色/'+'服装图片失败:',_0x687ce2);}console['log'](_0x78a5d2[_0x13a172(-0xfd,-0x113,-0xda,-0xec)],_0x49d8a2);let _0x4aef67='';if(_0x78a5d2[_0x38e094(-0x49,0x13,0x34,-0x64)](_0x27de30[_0x38e094(0x21,-0x74,0x4e,-0x59)],0x43d+0x107d+-0x14ba)){if(_0x78a5d2[_0x38e094(-0x145,-0xf7,-0xcb,-0x18d)](_0x78a5d2[_0x38e094(-0x18,0x34,-0x2f,-0x38)],_0x78a5d2['MJfHW']))_0x4aef67=_0x38e094(0xca,-0x77,0x22,0xa2)+_0x13a172(-0x193,-0x273,-0x20c,-0x215)+[..._0x27de30]['join']('、')+'\x0a';else{if(_0x78a5d2[_0x38e094(-0x128,-0x46,-0xcb,-0xcf)](_0x42fa09[_0x2ca938][_0x38e094(0x102,-0x20,0x55,-0x82)],'user'))return _0x64551d;}}_0x78a5d2['cJxTm'](updateCombinedPrompt,_0x49d8a2,_0x4aef67);const _0x120ae1=extension_settings[extensionName]?.[_0x13a172(-0x1f6,-0x102,-0x184,-0x15d)+_0x38e094(-0xb1,-0x7f,-0xbf,-0x1f)]??![];if(_0x120ae1){toastr[_0x13a172(-0x2c0,-0x121,-0x1eb,-0x1e2)](_0x78a5d2[_0x38e094(0x76,0xba,0x36,0x62)]),console[_0x38e094(-0x1c,0x81,-0x2,-0x39)](_0x78a5d2[_0x38e094(-0x85,0x55,0x0,0x67)]);return;}const _0x1451a8={};_0x1451a8[_0x13a172(-0x43,-0x18b,-0xd2,-0xd3)]=0x493e0;const _0x3c5bad=await LLM_CHAR_DESIGN(_0x49d8a2,_0x1451a8);console[_0x38e094(-0x37,-0xa4,-0x2,-0x79)](_0x78a5d2[_0x38e094(-0x9e,-0x9f,-0xa4,-0x1)],_0x3c5bad);if(_0x3c5bad['testMode']){console['log'](_0x78a5d2[_0x13a172(-0xbf,-0xf0,-0xf2,-0x14a)]);return;}const _0x4f66d6=_0x3c5bad[_0x13a172(-0x1ea,-0x1b0,-0x176,-0x19e)];if(!_0x4f66d6){if(_0x78a5d2['mAaCc'](_0x78a5d2[_0x13a172(-0x168,-0x226,-0x181,-0x15a)],'EoSdy')){toastr[_0x38e094(-0x34,0x2f,0x28,-0x86)](_0x78a5d2['VCNWC']);return;}else{if(_0x4e2ee7){const _0x582894=_0x4cd5d0[_0x38e094(-0x2d,-0x2a,0x6,-0x83)](_0x23f7d3,arguments);return _0x23ffd0=null,_0x582894;}}}const _0x2dee5d=removeThinkingTags(_0x4f66d6),_0x318a10=extractCharacterAndOutfitTags(_0x2dee5d);if(_0x78a5d2[_0x13a172(-0x20b,-0x10a,-0x176,-0x1ca)](_0x318a10[_0x38e094(-0x2f,0x16,0x1e,-0x8b)][_0x13a172(-0x18c,-0x49,-0x91,-0xc3)],0xfc0+0x2435+-0x33f5)&&_0x78a5d2[_0x38e094(-0x7a,-0x9e,-0xb2,-0x103)](_0x318a10[_0x38e094(-0xe7,-0x153,-0xa7,-0x143)][_0x13a172(-0xb2,-0xcc,-0x163,-0xc3)],0x250b+0x5c5*-0x1+0x1f46*-0x1)){toastr[_0x38e094(0x42,-0xa1,-0x88,-0x8)]('未在\x20LLM\x20输出中'+_0x13a172(-0x23a,-0x150,-0x111,-0x1b8)),console[_0x38e094(-0xbc,0x70,-0x2,0xd9)](_0x78a5d2[_0x13a172(-0x12c,-0x20c,-0xe8,-0x150)]),console['log'](_0x78a5d2[_0x13a172(-0x186,-0xc8,0x23,-0xb6)],_0x4f66d6);return;}console[_0x38e094(-0x11,0x6d,-0x2,0xac)](_0x78a5d2[_0x13a172(-0x115,-0x1e8,-0xf8,-0x10c)],_0x318a10);const _0x4dc21c={};for(const _0x1b5783 of _0x27de30){if(_0x78a5d2[_0x13a172(-0xb9,-0x56,-0x13d,-0x77)]('sCvIR',_0x78a5d2['ykrhq'])){const _0x1b83fc=_0x1b5783['match'](/^\{\{getvar::([^}]+)\}\}$/);if(_0x1b83fc){if(_0x78a5d2['GHwXA'](_0x78a5d2[_0x13a172(-0x218,-0x6a,-0x157,-0x141)],_0x78a5d2['AoErK'])){const _0x16ee93=_0x1b83fc[0x1f*-0x40+-0x5c5+0xd86];_0x4dc21c[_0x16ee93]=_0x53767e[_0x16ee93]||'';}else return _0x353926;}}else{if(_0x78a5d2['XdlxA'](_0x2565e1['type'],_0x78a5d2[_0x13a172(0x2c,-0x157,-0x9d,-0x8b)])&&_0x4dc6ac['text'][_0x13a172(-0x108,-0x18d,-0x10e,-0x17b)](_0x32be7f))return _0x34f00d;}}const _0x547aea={'generationContext':_0x5f2f5a[_0x13a172(-0x1fb,-0x1d4,-0x231,-0x19b)]('\x0a'),'generationWorldBook':_0x3eaca5,'generationVariables':_0x4dc21c};await _0x78a5d2[_0x13a172(-0x1ff,-0x182,-0x18c,-0x1a4)](handleExtractedData,_0x318a10,_0x547aea),toastr['success'](_0x13a172(-0x9f,-0x10a,-0xd1,-0x148)+'成！');}catch(_0x4a4530){console[_0x13a172(-0xee,-0xa0,-0xfa,-0xd7)](_0x38e094(0x75,0xd9,0x47,0x29)+_0x38e094(-0x49,0x134,0x95,0x16f)+':',_0x4a4530),toastr['error'](_0x13a172(-0x287,-0x2ad,-0x1e5,-0x21d)+_0x4a4530[_0x38e094(0x6f,-0x84,-0x30,0x2d)]);}}