(function(_0x52b9f5,_0xd508ac){const _0x27b453=_0x52b9f5();function _0x4145a1(_0xd49f62,_0x5d6d04,_0x2c50d9,_0x5c895a){return _0x1f5f(_0x5c895a-0x11f,_0x5d6d04);}function _0x11b989(_0x34de5b,_0x35f143,_0x58030d,_0xa76b0c){return _0x1f5f(_0x35f143- -0x2dd,_0x34de5b);}while(!![]){try{const _0x5f579b=-parseInt(_0x4145a1(0x2fa,0x381,0x3de,0x3ae))/(-0x22e1*0x1+0x4af+0x1e33)*(parseInt(_0x4145a1(0x383,0x2df,0x3b5,0x362))/(0x1*-0x8ae+0x2*-0x614+0x14d8))+parseInt(_0x4145a1(0x25b,0x24a,0x28d,0x2de))/(0x15c0+0x3*-0x655+-0x2be)+-parseInt(_0x4145a1(0x260,0x32a,0x326,0x2be))/(-0x58f*0x6+0x1f90+0x1ce)+-parseInt(_0x11b989(-0xa5,-0xd1,-0x8e,-0xe3))/(0x26cd+-0x36a+-0x235e)*(parseInt(_0x11b989(0x0,-0x15,-0x16,0x2))/(-0x1c9a+0x2141+-0x4a1))+parseInt(_0x11b989(-0x42,-0xd,0x48,0x78))/(-0x216e+0x3*0x9f3+-0x42*-0xe)+-parseInt(_0x11b989(-0x32,-0xad,-0x62,-0x94))/(-0x1b17*0x1+0xf*0x7+0x1ab6*0x1)*(-parseInt(_0x4145a1(0x440,0x35e,0x38b,0x3a3))/(-0x9*-0x265+0x8c4+-0x1e48))+parseInt(_0x4145a1(0x46e,0x3e1,0x39d,0x3cd))/(-0x250b+-0x1bb4+0x40c9)*(parseInt(_0x11b989(-0x16e,-0xfa,-0xf9,-0x3b))/(-0x1847+0x33e*-0x6+0x2bc6));if(_0x5f579b===_0xd508ac)break;else _0x27b453['push'](_0x27b453['shift']());}catch(_0x9dc04a){_0x27b453['push'](_0x27b453['shift']());}}}(_0x54d8,-0x1d*0xc18d+0x1719a7+-0x902*-0x137));const _0xac4e4=(function(){const _0x12288f={};_0x12288f[_0x47e078(0xb2,0xe3,0x41,0x141)]=_0x52f4ec(0x2bb,0x250,0x351,0x202),_0x12288f[_0x52f4ec(0x211,0x2cc,0x290,0x276)]=function(_0x36d270,_0x23736c){return _0x36d270===_0x23736c;},_0x12288f[_0x47e078(0x2d,0x9b,0x1c,0xb8)]=_0x52f4ec(0x16d,0x166,0x1d1,0x219);function _0x52f4ec(_0x5d277b,_0xc5dc8d,_0x2d933d,_0x4cd90e){return _0x1f5f(_0x5d277b-0x2,_0xc5dc8d);}const _0x15801d=_0x12288f;function _0x47e078(_0x4ada53,_0x11378d,_0x127356,_0x53d8d6){return _0x1f5f(_0x11378d- -0x1bf,_0x4ada53);}let _0x14bc20=!![];return function(_0xa93e51,_0x107f9e){const _0x5d706e={'ygJCc':_0x15801d[_0x1310e6(0x138,0x11f,0x11b,0x197)],'tKmbY':function(_0x391115,_0x54886b){function _0x5ada7d(_0x22ea93,_0x4284e5,_0x5241d5,_0x49fb9c){return _0x1310e6(_0x22ea93-0x2b,_0x4284e5-0x1e0,_0x5241d5-0x3c,_0x49fb9c);}return _0x15801d[_0x5ada7d(0xd0,0x66,0x168,0x106)](_0x391115,_0x54886b);},'Xjhsu':_0x15801d[_0x1310e6(0xf0,0xd5,0x16b,0x1ac)]};function _0x1310e6(_0x47e027,_0x2d8d48,_0x44a697,_0x362fa6){return _0x47e078(_0x362fa6,_0x47e027-0x55,_0x44a697-0x24,_0x362fa6-0x1d3);}const _0x2c8496=_0x14bc20?function(){function _0x4a2cde(_0x520c43,_0x322b42,_0x43db91,_0x3958b0){return _0x7cb817(_0x520c43-0x1d4,_0x43db91,_0x43db91-0x1e9,_0x520c43-0x2ce);}const _0x148385={};_0x148385[_0x4a2cde(0x366,0x3be,0x2e4,0x2c8)]=_0x5d706e[_0x4a2cde(0x2e3,0x2ca,0x3a2,0x25f)];function _0x4547af(_0x47328c,_0x33babf,_0x48d525,_0x34d957){return _0x1310e6(_0x48d525-0x344,_0x33babf-0x180,_0x48d525-0xc4,_0x47328c);}const _0x1cab06=_0x148385;if(_0x107f9e){if(_0x5d706e[_0x4547af(0x2d5,0x3c1,0x39a,0x320)](_0x5d706e[_0x4a2cde(0x376,0x2d2,0x43b,0x413)],_0x5d706e[_0x4547af(0x51b,0x3e7,0x48a,0x552)])){const _0x4a3086=_0x107f9e[_0x4547af(0x371,0x4b0,0x413,0x388)](_0xa93e51,arguments);return _0x107f9e=null,_0x4a3086;}else _0x53ae5c=_0x1cab06['ZzWER'];}}:function(){};function _0x7cb817(_0x393e81,_0x3e0688,_0x26004a,_0x3e63e2){return _0x47e078(_0x3e0688,_0x3e63e2- -0x49,_0x26004a-0x197,_0x3e63e2-0x117);}return _0x14bc20=![],_0x2c8496;};}()),_0x1d9cd5=_0xac4e4(this,function(){function _0x5c1e1f(_0x5b88a3,_0x10aaed,_0x1b2fac,_0x2e43ef){return _0x1f5f(_0x2e43ef-0x344,_0x1b2fac);}const _0x1a40fe={};function _0x360445(_0x456f71,_0x3e03ff,_0xe539a3,_0x7acd3c){return _0x1f5f(_0x456f71-0x2d7,_0x3e03ff);}_0x1a40fe[_0x360445(0x575,0x4ca,0x4c8,0x504)]=_0x360445(0x519,0x5c9,0x5c1,0x4ba)+'+$';const _0x441e01=_0x1a40fe;return _0x1d9cd5[_0x5c1e1f(0x51c,0x586,0x4f8,0x55c)]()[_0x5c1e1f(0x4d4,0x5d3,0x630,0x569)]('(((.+)+)+)'+'+$')['toString']()[_0x360445(0x583,0x59b,0x616,0x55d)+'r'](_0x1d9cd5)[_0x5c1e1f(0x517,0x612,0x54b,0x569)](_0x441e01[_0x360445(0x575,0x625,0x4b0,0x4d8)]);});_0x1d9cd5();import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,waitForLock,releaseLock,acquireLock}from'./utils.js';import{extension_settings}from'../../../../extensions.js';function _0x3f6f82(_0x18cd93,_0x214c20,_0x277340,_0x134820){return _0x1f5f(_0x134820- -0x10c,_0x18cd93);}import{extensionName,EventType}from'./config.js';function _0x1f5f(_0x535c2a,_0x103dcd){_0x535c2a=_0x535c2a-(-0x21*-0xa9+0x1292+-0x3d*0xa4);const _0x294989=_0x54d8();let _0x24e836=_0x294989[_0x535c2a];if(_0x1f5f['nvNtNQ']===undefined){var _0x161e88=function(_0x23b204){const _0x3c1b47='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x175182='',_0x4d70ad='',_0x5384c8=_0x175182+_0x161e88;for(let _0x5bd8de=0x168d+0x21ba+0x3847*-0x1,_0x358dbd,_0xedea9,_0x27b965=-0x12b8+0x3*0x75+-0x1*-0x1159;_0xedea9=_0x23b204['charAt'](_0x27b965++);~_0xedea9&&(_0x358dbd=_0x5bd8de%(-0x1*0x517+-0x16*-0x1af+-0x221*0xf)?_0x358dbd*(0x11a1+-0x1*-0x1f89+-0x1*0x30ea)+_0xedea9:_0xedea9,_0x5bd8de++%(-0x2354+-0xde6+0xbf*0x42))?_0x175182+=_0x5384c8['charCodeAt'](_0x27b965+(-0x16*0xf1+0x132+-0x9c7*-0x2))-(0x428+0xd9*-0x1d+0x1477*0x1)!==0x9cd*-0x1+-0x6b*-0x7+0x1b8*0x4?String['fromCharCode'](0xd7c+-0x4e6*0x1+-0x1d*0x43&_0x358dbd>>(-(0x12b+-0x17e8+0x16bf)*_0x5bd8de&-0x1444*-0x1+0xad*0x5+-0x179f)):_0x5bd8de:-0x1*-0x19d3+0x1d9a+-0x1*0x376d){_0xedea9=_0x3c1b47['indexOf'](_0xedea9);}for(let _0x103b53=0x1d7c+0x71f*-0x1+-0x19*0xe5,_0x4fc1be=_0x175182['length'];_0x103b53<_0x4fc1be;_0x103b53++){_0x4d70ad+='%'+('00'+_0x175182['charCodeAt'](_0x103b53)['toString'](0xc6*-0x14+-0xc55+-0x1bdd*-0x1))['slice'](-(-0x235a+0x511*-0x7+0x46d3));}return decodeURIComponent(_0x4d70ad);};_0x1f5f['XTlFIF']=_0x161e88,_0x1f5f['vZBvoy']={},_0x1f5f['nvNtNQ']=!![];}const _0x5cbb8a=_0x294989[-0x13bb+0x18f5+0x1be*-0x3],_0x478d22=_0x535c2a+_0x5cbb8a,_0xcfed1c=_0x1f5f['vZBvoy'][_0x478d22];if(!_0xcfed1c){const _0x5ebb46=function(_0x35f86c){this['AOwRoy']=_0x35f86c,this['hjZZNA']=[0x8*-0x106+-0xb8d+0x13be,0x1980+-0xf5f+-0xa21,0x1*0x24cb+0x2655+-0x4b20],this['WYoDpQ']=function(){return'newState';},this['iHjZKT']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['yPVAuc']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5ebb46['prototype']['hjQRLJ']=function(){const _0x253685=new RegExp(this['iHjZKT']+this['yPVAuc']),_0x5b97e1=_0x253685['test'](this['WYoDpQ']['toString']())?--this['hjZZNA'][0x1d8e+-0xe81+-0xd6*0x12]:--this['hjZZNA'][-0x11b9+0x85c+0x95d];return this['nahVwB'](_0x5b97e1);},_0x5ebb46['prototype']['nahVwB']=function(_0x277423){if(!Boolean(~_0x277423))return _0x277423;return this['qzvxlt'](this['AOwRoy']);},_0x5ebb46['prototype']['qzvxlt']=function(_0xc6a1d4){for(let _0x4211e3=0x27e+-0x334+0xb6,_0x5289e1=this['hjZZNA']['length'];_0x4211e3<_0x5289e1;_0x4211e3++){this['hjZZNA']['push'](Math['round'](Math['random']())),_0x5289e1=this['hjZZNA']['length'];}return _0xc6a1d4(this['hjZZNA'][0xd6*-0xe+0xad3+0xe1]);},new _0x5ebb46(_0x1f5f)['hjQRLJ'](),_0x24e836=_0x1f5f['XTlFIF'](_0x24e836),_0x1f5f['vZBvoy'][_0x478d22]=_0x24e836;}else _0x24e836=_0xcfed1c;return _0x24e836;}import{setItemImg}from'./database.js';import{saveChatDebounced,saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';function _0x54d8(){const _0x584b3f=['ktOG','zw1PDa','ANnVBG','C2vLza','DNrTExC','CNvfruS','wNPxrvi','yw5xDKK','BevjvxC','twHktNK','6lsF6z2I5O+q56s66k+noIa','vLjWBuO','cUENJEwTKdOG','DMLKzw8V','ugL6q0W','iIvJx2zLBNDLAq','C2nOzwr1BgvY','DNvxtLO','y29UC3rYDwn0BW','uvryq1G','mJa2ndiYmePlBMrMwG','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','wgPOC3u','ze5yreG','svvms00','uen5reG','cUwWUUwVUdOG','cLnJAgvKDwXLCG','lcdOR6BMG4u6ia','zfj2zum','cI0Tls0Tls0Tlq','DMLKzw8VD2vIBq','ue5HBwu','EYjJBgLLBNrFAq','x3nRAxa','yMHmz2O','B0rxDu4','vunqx2nVBwz5Dq','Aw1Hz2veyxrH','y29TzNL1AwnHBG','5Qoa5Rwl5yIWia','sK1MsvG','DKrItw0','wKzMB2O','BLLTy1C','t0ffrue','nJCZohLKz2rcvq','ioEuN+wBVUA1GEEOI+oaGUwUOUAiT+ERR+s4UG','5PYQ6io95lUoqvbj5zon5BQu5lIT5OM+','5zU+54Mh55sF5OIq6l+h56Il5lIT5y+r55sF6zsz','BgvUz3rO','AxbH','tLnf','Aw1Hz2uVz2LM','mJK3nty3oxb0u1fgsq','CMvZCg9UC2uY','iIWGiNbYB21WDa','6lEZ6l+h6iQc54k55Ase55cg5A6m5OIq77Ym5BEY','5ywO6io95O+q56s66k+n57Yw6l6r5zMO','CMvTB3zLtgLZDa','6k+35Rgc5BEL5l2C5RwbAwqGlsa','t0zuEee','5BEL5l2C5Rwb6kEJ5P6q5AsX6lsL77Ym6lEZ6l+h','sM9qBe0','zgf0ytPPBwfNzq','C3vIzM9SzgvY','Cgf5Bg9HzdiYmG','txPpthG','thPxCLq','zhDHDge','BMfTzt0','cI0TlsdNLj/LM77LJ4lMLBdMIQu','6l2U6k+I5PE25y+r55sF5BYc5BI4oIa','Dgv4Da','Bg9N','ls0Tls0Tls0Tlq','tufhrv9srvnqtW','CxvLC3qGzMfPBa','quzUyNG','t0rPAxa','pgXVCMe6','tvDmCeC','D3Loz24','tMfXDwC','v3vuqM0','rgj3uxa','ChjVBxb0x2LK','AML1z3vHBIbJBa','6l2U6k+I5y6g5y+Y6k6W5B2v5PE25yE66zszoG','y2XPzw50','y194AwPPzq','C3rYAw5NAwz5','x2XHC3rnzwrPyq','tu9eruXFtKfnrq','uNbysfq','Dg9Rzw4','zci6iG','zxburgC','5yYw5lI6igrHDgeGvvi','DgPsseq','owmWltrLmZKToq','Ew5eDfa','q2vytLq','v3fmrvu','5Ase55cg6l+E5O6L6yEn5PIG5BcelI4U','BMvNyxrPDMvFCa','C3bSAxq','tMPzAgi','D2LKDgG','5AQs5l2ticG','DePRyMi','q2HHCMfJDgvYia','mtf8mJb8mNWXoa','lNnHzMv0zw5ZBW','tvjSwwS','y29TzNL1Aunmsq','DMfL','jNn1yMzVBgrLCG','rw5KCg9PBNqGza','ic0+ia','yxjYyxLcDwzMzq','AfjewNK','6k+VoIa','iIvZy2HLzhvSzq','zxj0Eq','D29YA2vY','swDnAeO','B25LCNjVCG','CwPWq1O','A0nVB2m','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','sgLZDg9YEsbYzq','ChjVBxb0','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','r21mB3u','CM9TChq','6iQc54k55Ase55cgoIa','y29TzNL1Av9Zzq','q29TzNL1AuXPCW','B0LUqMq','rxjYB3iGz2vUzq','5zU+54Mh55sF5OIq5OIq5yQFicHQAq','AvvxuuK','oJe+','z2u6','uu9Kr2C','AKLps2y','6k+noIa','cUATPEAvSdOG','u09dCLK','6zsz6k+VoIa','CMf0Aw5NigLTyq','C3rHCNrZv2L0Aa','ndaWmZeWofvkyxv1Da','55sF5zU+5Rwb56Il5O2v6i635yIW5BYc5BI4ia','BIuI','AuLSBgy','ifbYB21WDa','q3v1q3i','iIvJB21MExvPyW','y29TzNL1AvvYBa','zgf0ys4','DuTzsM8','u2nLBMuGq29TCa','Aw5PDgLHBgL6zq','tufhrv9srvfvrq','y29TzNL1Av9ZDa','y19Pzhf1yw56Aa','ueXksxO','ChzuthK','BeHQr24','zhrO','zgf0yq','kerPDMLKzv9YBW','q29TzNLvssdMNi3LIQe','B21pBwm','B3nPDgLVBG','svrfy0K','q2HqEw8','rwHfsKK','Bw9Kzq','r3bTCg4','B25N','BwfNzv9Yzxf1zq','iIvJx3HPAMLLjq','nZC3ndG5qNvoyK1k','DeTTyLK','BgLUAW','uKDozMq','qwDXqNK','n3W0Fdb8mtv8mq','5zMO6lAf5PE244cc','y29TzNL1AunHyW','zNL1AsK6ia','CgXLCK5HBwu','Du5eDum','5Ps25yIW55sF5zU+6k+35RgcicHjra','ywDKDMq','zML4zwrqCM9TCa','lcdPQ5JLUQyGlsa','ksdLT7lMIjdLIP/OJRFLJ5BLUBBMOlZLVi8','zejpA3a','sxjVEvK','tuuLiG','zNDnEfK','iIv3Awr0AcuI','sez6B0C','BNnL','5PYQ6io955sF5OIq5zU+54Mhifvsta','EufXELi','5BEY5PAT5BYa6l+E5O6L44cc','zw5LCG','CMvHzefZrgf0yq','A2v5CW','o2jHC2u2ncW','AgvPz2H0','BMDuyva','rxbZr1G','yMXVyG','qK50yKW','Bgvuuvm','nJzsEwzeEu8','ywHOz0K','FdD8m3W5FdH8mq','Cg5N','y2XPCa','ihbYB21WDdOG','5BcD6k+v5l2C5lI65y6F5AEliejHCW','5Q2J6z2I5O+q56s66k+noIa','rMPUv2y','AwvUDcK6ia','BNngu3K','CM5uDKe','DMLKzw8VBxa0','5BEY5A2y5ywL5PwW5O2U5BQtigzVCG','tuzxueS','uMLPAum','cUAOOEwEIZOG','zxnPswq','5y+r6ycb5yIWienVBwz5vq','vK1TyuK','AwDODa','tfvZvLq','5y+r6ycb55sF5zU+5AsX6lsL5zon5BQuicG','DMXeEg4','zvDrsvi','D29YA2vYAwq','77Yi5zcR57g75z6l5yY56ywn77Yj','yw5Ryw90DxbPyq','y19XDwfUEMHVBG','A2fVDhvWAwfU','CMvZDwX0','D3zmtha','iIvnt0rftf9oqq','zgLYzwn0ignVBq','iIv2ywuLiG','DxjUigLTywDLia','5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','iIvJBgLWjsi','DMfSDwvZ','DhjPBq','DxrtD2G','nti5nvvny1rdvW','zxjYB3i','C3rLChm','z01Vz08','ExvZAgvPzf9JBW','wKD2qNO','y3qGy29TzNL1Aq','DgHizeO','z2LMCW','BgTRB3O','iIvUzwDHDgL2zq','DwD1yw4Gy2XPzq','Dg9tDhjPBMC','zty0ioAvSoAnRUwKHoEqHUoaGG','phDSCJO','D0TWvNy','iIvZyw1WBgvYxW','EwDkq2m','l3bYB21WDa','vKH5D2q','s3Hrt00','Bwz5DwK','54Mh5PwW5O2UicHQAxvNDq','ueXlCgS','y19Mzw53zwK','C2vHCMnO','C3vJy2vZCW','y1bRrvy','suq6ia','ios4QUI3S+I/H+EAHoIkGUEcUE+8JoATO+wCQa','BwvZC2fNzq','ALPMqLu','AxnwAwrLBW','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','y2HHBMDL','u0fQC0q','otuXnteZnNfXAxD4yG','B2fKoIa','Cffptu0','l2HPC3rVCNKV','CMvWBgfJzq','t2niwvO','zvfeBwq','yxbWBgLJyxrPBW','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','yxbWBhK','zwq6ia','55sO5lQo55sF5OIq55QevgfNoIa','qLPUuhO','y29TzNL1Av93Aq','CgfYC2u','sw5MBW','zMLSDgvY','z3HtshG','kcGOlISPkYKRkq','mtb1zvrpDKu','5l+U5Q2JoIa','tMDhqM8','CNm6','zxbZ','keLeoIa','6yEn5PIG5Bce6l+E5O6L','mhWXnhW1Fde2Fa','ExvZAgu','BMvNyxrPDMvqCG','zM9YBwf0','y2vKltm3zdi5ma','q0nhweC','5zcR5PEN54Mi5yw85A6577Yj44cc','B3v0Chv0CW','vw1kBeO','C1nlDNa','DhLWzq','Aw1Hz2vZ','B25SB2fKzw5K','DgvUzxi','zMLSzw5HBwu','z2vUzxjHDguTAq','C3nruu0','CwzHvM0','CLjeuuW','BwfNzs1YzxnWBW','EhjHzxK','DxDkD3C','ELv3qNa','y29TzNL1Av92yq','ic0Gq2HHBMDLoG','6i635y+w5zU+54Mh5AsX6lsLloEkTUAaGEEGGq','BxjNsxG','veTyCLu','y2zNx2nVBwz5Dq','AxLcy0K','D2vIBq','y2zNx3nJywXL','l2fWAs9Zzc9JBW','5zgkic0TlqRMRApPNAlMJ5dNPlO','EMHVBMCLiG','AKfiD0G','ChrLthG','t29LrvC','iIvJzMDFC2nHBa','qvbjioIVT+AXGUwKSEI0PsaO','CMfIBKC','Aw5JBhvKzxm','Bgrjv2C','DKnzvNe','CMvWBgfJzufSBa','sM9RtLe','zfD3u0i','DxjS','AwqGBM90ihjLDa','55sF5OIq5OIq5yQFicHKAxjL','Aw1Hz2u','tNbMA2q','zM9YrwfJAa','iIvPCgeLiG','zsuI','CxDPCLK','vMPMEMe','z1n2sfi','owznzgDHsG','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','x3bYB21WDcuI','BLbbC0y','svDWB1e','AMT2svm','iIvZDgvWCYuI','wxb5sMq','whPLthm','zwjPqw4','y29TzNL1Av9ZyW','mJu2mdjAEujssw0','tMzmquK','qNnTrgu','5BYa5AElienVBwz5vuK','q3rgCe8','r0vorvjbvevFsq','rwDKt0e','Adi2na','5lQl5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw77Yi','y29TzNL1Aq','C3rHDhvZ'];_0x54d8=function(){return _0x584b3f;};return _0x54d8();}import{processSkippedNodes}from'./settings/worker.js';async function replacepro(_0x5ac280,_0x38a6b3){const _0x39879a={'LUsVT':_0x41efce(-0x1db,-0x206,-0x16f,-0x225)+_0x41efce(-0x119,-0x1ad,-0x226,-0x106)+_0x41efce(-0x26e,-0x20a,-0x185,-0x159),'gxSHx':function(_0x782e7e,_0x25ac50){return _0x782e7e+_0x25ac50;},'iTTBj':'\x22%height%\x22','YUbzr':function(_0x48a278,_0x4d42bf){return _0x48a278(_0x4d42bf);},'PizCL':_0x41efce(-0x95,-0x121,-0xae,-0xed),'XzeLs':function(_0x44e6d6,_0x3db016){return _0x44e6d6(_0x3db016);},'CeXNT':_0x41efce(-0x13d,-0x1a8,-0x17f,-0x263)+_0x521702(0x1d5,0x9e,0x148,0x15f),'lNQam':_0x41efce(-0xea,-0x102,-0x1bf,-0x92)+'%\x22','FVQgz':_0x521702(0xe0,0xd0,0x19d,0x196),'nYmcW':function(_0x4c6d7d,_0x323d23){return _0x4c6d7d+_0x323d23;},'OFTxA':function(_0x200e82,_0x23a360){return _0x200e82+_0x23a360;},'IEiAG':_0x521702(0xdc,0x134,0x140,0x1a4)+_0x521702(0x1d0,0x2de,0x2cc,0x214),'VMmaI':'\x22%c_idquan'+_0x41efce(-0x104,-0x13f,-0x1fb,-0x16c),'lkkoz':'\x22%c_quanzh'+'ong%\x22','vlDxn':_0x521702(0xd9,0x14e,0x174,0x10f)+'r%\x22','pvTLy':_0x41efce(-0x1b1,-0x263,-0x2f1,-0x2b2),'cPkEV':_0x521702(0x1bc,0x1c5,0x106,0x161),'IroyY':function(_0x12a1d9,_0x5234ef){return _0x12a1d9(_0x5234ef);},'qwirY':function(_0x4083e0,_0x3e227){return _0x4083e0+_0x3e227;},'sSKvp':function(_0x47678d,_0x51000e){return _0x47678d+_0x51000e;},'rsXPV':_0x41efce(-0x27e,-0x1ed,-0x2ae,-0x1b5)+'\x22','CtFpO':function(_0x2d4552,_0x20f74d){return _0x2d4552(_0x20f74d);},'LMiKu':_0x521702(0x1d3,0x20f,0x149,0x1fe)+_0x521702(0x2a5,0x1a9,0x2be,0x20e)};function _0x521702(_0x1737f7,_0x4314ea,_0x21a124,_0xfc0bc6){return _0x1f5f(_0xfc0bc6- -0x72,_0x21a124);}function _0x41efce(_0x4f82e5,_0x1d3aa2,_0x5b7cf7,_0x1b6567){return _0x1f5f(_0x1d3aa2- -0x3ab,_0x4f82e5);}const _0x1b74fb=(_0x521702(0x64,0x1c5,0x9c,0x104)+'|12|13|1|6'+_0x521702(0xcd,0x201,0x1e7,0x173)+_0x521702(0x17a,0x1df,0x112,0x152)+_0x521702(0x119,0x17a,0x19f,0x1d8)+'19')[_0x41efce(-0x2c8,-0x23b,-0x22d,-0x270)]('|');let _0x270a08=0x2*0xd77+0x1*-0x1358+-0x796;while(!![]){switch(_0x1b74fb[_0x270a08++]){case'0':_0x38a6b3=_0x38a6b3[_0x521702(0x1e0,0x14e,0x251,0x204)](_0x39879a[_0x41efce(-0x224,-0x1b3,-0x272,-0x254)],''+(_0x39879a[_0x521702(0x1ad,0x14d,0x137,0x1cf)]('\x22',_0x5ac280[_0x41efce(-0xe0,-0xea,-0x197,-0x151)+_0x41efce(-0x19e,-0x1ab,-0x26b,-0x1f3)])+'\x22'));continue;case'1':_0x38a6b3=_0x38a6b3[_0x521702(0x158,0x1ee,0x227,0x204)](_0x39879a['iTTBj'],_0x39879a['YUbzr'](Number,_0x5ac280[_0x521702(0x113,0x134,0x168,0x16b)]));continue;case'2':_0x38a6b3=_0x38a6b3['replaceAll'](_0x39879a[_0x521702(0x2f6,0x170,0x2e5,0x236)],_0x39879a[_0x41efce(-0x134,-0x11f,-0x11a,-0xab)](Number,_0x5ac280[_0x521702(0x1a3,0x1c0,0x204,0x19c)]));continue;case'3':_0x38a6b3=_0x38a6b3['replaceAll'](_0x39879a[_0x521702(0x96,0x65,0x110,0xfa)],'\x22'+_0x5ac280[_0x41efce(-0x1a9,-0x248,-0x2df,-0x1fa)]+'\x22');continue;case'4':_0x38a6b3=_0x38a6b3[_0x521702(0x2c6,0x1fb,0x1fc,0x204)](_0x39879a['lNQam'],Number(_0x5ac280['c_fenwei']));continue;case'5':_0x38a6b3=_0x38a6b3[_0x521702(0x262,0x1c8,0x255,0x204)](_0x39879a['FVQgz'],''+_0x39879a[_0x41efce(-0x138,-0xe5,-0x15a,-0x14d)](_0x39879a[_0x41efce(-0xf,-0xd4,-0x5c,-0x47)]('\x22',_0x5ac280[_0x41efce(-0x156,-0x1c4,-0x12e,-0x213)]),'\x22'));continue;case'6':_0x38a6b3=_0x38a6b3['replaceAll'](_0x39879a['IEiAG'],''+(_0x39879a[_0x41efce(-0x114,-0x16a,-0xf2,-0x11e)]('\x22',_0x5ac280[_0x41efce(-0x297,-0x23c,-0x219,-0x1bc)+_0x521702(0x1b4,0x55,0x16f,0x11b)])+'\x22'));continue;case'7':_0x38a6b3=_0x38a6b3[_0x41efce(-0xe9,-0x135,-0xc1,-0x1ce)]('\x22%prompt%\x22',''+_0x39879a[_0x41efce(-0x99,-0xe5,-0x102,-0x97)](_0x39879a[_0x521702(0x21b,0x1f0,0x155,0x1cf)]('\x22',_0x5ac280[_0x41efce(-0x1db,-0x221,-0x250,-0x2db)]['replaceAll']('\x22','\x5c\x22')),'\x22'));continue;case'8':_0x38a6b3=_0x38a6b3['replaceAll'](_0x39879a[_0x41efce(-0x1d8,-0x1b5,-0x179,-0x1b0)],_0x39879a['YUbzr'](Number,_0x5ac280[_0x41efce(-0x2bc,-0x1fe,-0x16c,-0x23f)+_0x521702(0x91,0x173,0x214,0x14a)]));continue;case'9':_0x38a6b3=_0x38a6b3[_0x41efce(-0x1e6,-0x135,-0x159,-0xf9)](_0x39879a[_0x41efce(-0x1cb,-0x196,-0x106,-0x182)],_0x39879a[_0x41efce(-0x137,-0x11f,-0x110,-0x192)](Number,_0x5ac280['c_quanzhon'+'g']));continue;case'10':_0x38a6b3=_0x38a6b3[_0x41efce(-0x124,-0x135,-0xd6,-0x89)](_0x39879a[_0x521702(0x1e3,0x1f2,0x11f,0x188)],''+_0x39879a['gxSHx'](_0x39879a['gxSHx']('\x22',_0x5ac280[_0x521702(0x26f,0x28e,0x216,0x238)]),'\x22'));continue;case'11':console[_0x521702(0x173,0xa0,0x43,0xde)](_0x39879a[_0x521702(0x12e,0x1e0,0x19b,0x13d)],_0x5ac280);continue;case'12':_0x38a6b3=_0x38a6b3[_0x41efce(-0x1f4,-0x135,-0x115,-0x1c7)](_0x41efce(-0x1f2,-0x18f,-0x138,-0x117)+'name%\x22',''+_0x39879a[_0x521702(0x1d8,0x302,0x276,0x265)]('\x22'+_0x5ac280['sampler_na'+'me'],'\x22'));continue;case'13':_0x38a6b3=_0x38a6b3[_0x41efce(-0xf4,-0x135,-0x183,-0x164)](_0x39879a[_0x521702(0x17a,0x14e,0x13e,0x1b5)],_0x39879a[_0x41efce(-0x14c,-0x1db,-0x20c,-0x297)](Number,_0x5ac280[_0x41efce(-0x2cc,-0x239,-0x296,-0x2cc)]));continue;case'14':_0x38a6b3=_0x38a6b3[_0x41efce(-0x12e,-0x135,-0x1ff,-0x1d3)](_0x41efce(-0x250,-0x1a6,-0x1a1,-0xe1),''+_0x39879a[_0x521702(0x21a,0x21b,0x2d1,0x20f)](_0x39879a[_0x41efce(-0x199,-0xe5,-0x10c,-0x9d)]('\x22',_0x5ac280[_0x41efce(-0x1d0,-0x231,-0x1f6,-0x2ce)]),'\x22'));continue;case'15':_0x38a6b3=_0x38a6b3[_0x521702(0x1b8,0x2ae,0x175,0x204)](_0x521702(0x288,0x216,0x17e,0x20d),''+_0x39879a[_0x41efce(-0xa9,-0x158,-0x1d9,-0x98)](_0x39879a[_0x41efce(-0x13b,-0xe5,-0x18c,-0x1aa)]('\x22',_0x5ac280[_0x41efce(-0x14e,-0xde,-0xf2,-0x102)]),'\x22'));continue;case'16':console['log'](_0x38a6b3);continue;case'17':_0x38a6b3=_0x38a6b3[_0x41efce(-0x1a4,-0x135,-0x198,-0xcd)](_0x39879a['rsXPV'],_0x39879a[_0x41efce(-0x1bc,-0x118,-0x1c4,-0x8a)](Number,_0x5ac280[_0x41efce(-0x1ed,-0x24b,-0x18e,-0x299)]));continue;case'18':_0x38a6b3=_0x38a6b3[_0x521702(0x1ce,0x241,0x1c2,0x204)](_0x39879a['LMiKu'],Number(_0x5ac280['cfg_scale']));continue;case'19':return _0x38a6b3;case'20':_0x38a6b3=_0x38a6b3[_0x41efce(-0x144,-0x135,-0x1d5,-0xdc)]('\x22%seed%\x22',_0x39879a[_0x41efce(-0x283,-0x1db,-0x245,-0x206)](Number,_0x5ac280[_0x521702(0x2b5,0x1eb,0x220,0x22b)]));continue;}break;}}function _0x453391(_0x50d988,_0x3eaea7,_0xa0b5c4,_0x3f9fb8){return _0x1f5f(_0xa0b5c4-0x162,_0x3eaea7);}export async function generateComfyUIImage({prompt:_0xff0a0,width:_0x5f3758,height:_0x4a1e00,change:_0x266b0b}){const _0x2086dc={'dNXDH':function(_0x33cb6f,_0x104dba){return _0x33cb6f(_0x104dba);},'rnTvA':function(_0x7c4c22,_0x505fe6){return _0x7c4c22+_0x505fe6;},'GxZDv':function(_0x1d78a5,_0x5333fd){return _0x1d78a5+_0x5333fd;},'CFVmA':function(_0x1cf6ac){return _0x1cf6ac();},'IgMhJ':function(_0xa8bfe2,_0x43a37b){return _0xa8bfe2(_0x43a37b);},'PCyDH':'Error\x20gene'+_0x2c2085(-0x139,-0xe5,-0x163,-0x1e6)+_0x2c2085(-0x1e6,-0x1b9,-0x16a,-0x11a),'MzOLx':_0x5e7085(0x544,0x595,0x502,0x636)+'。','FjnWf':_0x2c2085(-0x62,-0x7f,-0x59,-0x25),'hRDZy':function(_0x3018cf,_0x23d308){return _0x3018cf>_0x23d308;},'pteLx':_0x5e7085(0x605,0x63b,0x689,0x637),'oInBd':'image/gif','wvLLp':_0x5e7085(0x599,0x5ae,0x659,0x608),'SAjsD':'XDpkf','vCYVq':function(_0x7b3d01,_0x56ce51,_0x7cbe01){return _0x7b3d01(_0x56ce51,_0x7cbe01);},'BNtbL':function(_0x35359c,_0x180a2f){return _0x35359c(_0x180a2f);},'esiId':_0x2c2085(-0x135,-0x145,-0x103,-0x5f),'UmJlJ':'\x20|\x20','AgqBy':'API\x20响应中没有图'+_0x5e7085(0x62e,0x5e1,0x57a,0x63c)+'an\x20client)'+'。','jPnFs':'Endpoint\x20d'+_0x2c2085(-0x144,-0x46,-0x86,-0x60)+_0x2c2085(-0x6e,-0x46,-0xfa,-0x144)+_0x5e7085(0x544,0x566,0x585,0x4c4),'bhLgj':function(_0x5d7845,_0x1ff920){return _0x5d7845!==_0x1ff920;},'EpsGX':'WqLEU','gSvHR':function(_0x4ad082){return _0x4ad082();},'NfLAI':function(_0x3c0ae1,_0x3118ea){return _0x3c0ae1(_0x3118ea);},'nPAsF':_0x5e7085(0x5a4,0x580,0x604,0x5e2),'uNDuC':function(_0x163daf,_0x1cde65){return _0x163daf(_0x1cde65);},'omOmc':function(_0x354612,_0x137e14){return _0x354612||_0x137e14;},'MhJNy':function(_0x3d5003,_0x3aa38a){return _0x3d5003===_0x3aa38a;},'nubPp':'连接后选择','pQOMM':function(_0x289bc8,_0x489e7a){return _0x289bc8===_0x489e7a;},'MWLpG':function(_0x500f91,_0x3863b5){return _0x500f91(_0x3863b5);},'rjSqv':'请填写ComfyUI'+'模型。','IWpoQ':'Scene\x20Comp'+_0x2c2085(-0x19e,-0x154,-0x14a,-0x10a),'ngTaP':_0x5e7085(0x657,0x631,0x5eb,0x619),'XWfZj':_0x2c2085(-0x121,-0xfc,-0x197,-0x21d),'WuTBm':function(_0x146e2b,_0x5c345c){return _0x146e2b(_0x5c345c);},'EDSID':_0x2c2085(-0xbe,-0x76,-0x7b,-0xe7)+'坐标的提示词字符串。','HFzoG':function(_0x36ad4b,_0x3c5782){return _0x36ad4b(_0x3c5782);},'OoeEW':function(_0x458e5d,_0x589970){return _0x458e5d<=_0x589970;},'uwJww':_0x5e7085(0x623,0x5b1,0x561,0x66e),'IvZDw':function(_0x31ef96,_0x24d17a){return _0x31ef96+_0x24d17a;},'iyBcI':'CRBxL','jAHwH':_0x2c2085(-0x95,-0xe,-0xc8,-0xc5)+'中的\x20prompt。','LzWrT':'zozWx','ahhgI':_0x2c2085(-0x18f,-0xf5,-0xef,-0x7c),'YpyJd':_0x5e7085(0x556,0x5ac,0x59b,0x51f),'uKYJo':function(_0x42f579,_0x22ab8b){return _0x42f579+_0x22ab8b;},'zUwBp':function(_0x42590b,_0x2cf7b0){return _0x42590b(_0x2cf7b0);},'TKXrU':function(_0x3a6151,_0x5bff27,_0x56ebb0,_0x512f3f,_0x4aade4,_0x34fed0){return _0x3a6151(_0x5bff27,_0x56ebb0,_0x512f3f,_0x4aade4,_0x34fed0);},'eWQIR':_0x5e7085(0x67e,0x693,0x6c2,0x689),'dRveC':_0x2c2085(-0x175,-0x37,-0xe6,-0x11a),'JMfIX':_0x2c2085(-0x11d,-0xd9,-0x189,-0x1f3)+'rs','pDVhp':_0x5e7085(0x5b8,0x515,0x511,0x5ca),'RpXHT':_0x2c2085(-0x40,-0x106,-0xca,-0xc7),'Npfkd':function(_0x57254f,_0x507998){return _0x57254f===_0x507998;},'NnjKX':'533ef3a3-3'+_0x2c2085(-0x14c,-0x17e,-0x196,-0x119)+_0x5e7085(0x5b4,0x60d,0x5c6,0x58d)+'f371f8','MRlYk':'VSkNA','opdbd':function(_0x5df7ba,_0x2aa7b0){return _0x5df7ba(_0x2aa7b0);},'ITEcI':function(_0x2b7f5a,_0x5b197c,_0x2806e4){return _0x2b7f5a(_0x5b197c,_0x2806e4);},'Naqug':'jiuguan','OcHYZ':_0x2c2085(0x21,-0xc3,-0x96,-0x86)+'mfy/genera'+'te','jIOKf':'POST','FZNxw':_0x5e7085(0x671,0x65e,0x724,0x60c),'MFWPK':_0x2c2085(-0x1ba,-0x9e,-0x152,-0xc6),'vDbMm':function(_0x115da4,_0x15a671){return _0x115da4!==_0x15a671;},'ChPyo':'EppYX','jZfBU':'JSON\x20解析失败，'+_0x5e7085(0x5ef,0x5a8,0x4ee,0x5a0)+_0x2c2085(-0x12e,-0xcb,-0xe7,-0xd5),'BsmDe':_0x2c2085(-0x16f,-0xd7,-0x16d,-0xb4)+_0x5e7085(0x64d,0x5d6,0x537,0x693)+'nt)。','ewNTR':_0x2c2085(-0x14e,-0x92,-0xe2,-0x142),'JokNQ':_0x5e7085(0x59b,0x5f6,0x5f9,0x688)+'n/json','jkvIS':'xASCD','rRDQL':_0x5e7085(0x6b3,0x690,0x6b2,0x633),'VRpmJ':_0x5e7085(0x63d,0x610,0x6d3,0x5ad),'KOgKA':function(_0x3aa088,_0x53ae2f){return _0x3aa088!==_0x53ae2f;},'kCooc':_0x2c2085(-0x210,-0x209,-0x1a5,-0x1e1),'WFDZb':_0x5e7085(0x61c,0x689,0x714,0x604)+'到文件名。','NjYhb':function(_0x5f31d9,_0x521f05){return _0x5f31d9(_0x521f05);},'FDZIU':function(_0x3dfd54,_0x5db0f3){return _0x3dfd54(_0x5db0f3);},'sdNiT':_0x2c2085(-0xf8,-0x250,-0x18c,-0x162),'AFnbx':'video/webm','ZFfoj':'mp4','iUWQI':_0x5e7085(0x5d4,0x655,0x6d0,0x6c6),'wKpVv':function(_0x24454b,_0x3333c9){return _0x24454b(_0x3333c9);},'NgGBo':'轮询超时，服务器可能'+_0x2c2085(-0x80,-0xbb,-0x128,-0x18f),'calSd':_0x2c2085(-0x17a,-0xde,-0x14c,-0x1fc)+_0x5e7085(0x511,0x584,0x52a,0x55a),'CCGXG':function(_0x527338,_0x1a162a){return _0x527338(_0x1a162a);},'dwata':function(_0x4f5abe){return _0x4f5abe();},'qjpCZ':function(_0x161f8e,_0xecd265){return _0x161f8e||_0xecd265;},'pjNhV':function(_0x3855ac){return _0x3855ac();}};clearLog(),console['log'](_0x2086dc[_0x2c2085(-0x7f,0x1f,-0x79,-0xb3)],_0xff0a0),_0xff0a0=_0x2086dc['NfLAI'](processCharacterPrompt,_0xff0a0),_0xff0a0=await _0x2086dc['BNtbL'](stripChineseAnnotations,_0xff0a0);let _0x129709=_0x266b0b;_0x266b0b=_0x2086dc[_0x5e7085(0x628,0x5a0,0x5ac,0x570)](processCharacterPrompt,_0x266b0b),_0x266b0b=await stripChineseAnnotations(_0x266b0b),addLog(_0x2c2085(-0xb8,0x2d,-0x6e,-0xf9)+_0x5e7085(0x5d3,0x688,0x674,0x5f4)+extension_settings[extensionName]['client']),_0x2086dc[_0x5e7085(0x546,0x588,0x5e0,0x52b)](addLog,_0x5e7085(0x6ed,0x695,0x680,0x6a6)+extension_settings[extensionName][_0x2c2085(-0x90,-0x1b3,-0x104,-0xec)]),addLog(_0x2c2085(-0x17e,-0xc7,-0x175,-0xc0)+'\x20'+(_0x5f3758||'默认')+_0x2c2085(-0x117,-0x13e,-0x133,-0xc8)+_0x2086dc[_0x2c2085(-0x151,-0x1f5,-0x14b,-0x162)](_0x4a1e00,'默认'));if(_0x2086dc[_0x5e7085(0x717,0x662,0x5d6,0x710)](extension_settings[extensionName]['MODEL_NAME']['trim'](),_0x2086dc['nubPp'])){if(_0x2086dc[_0x2c2085(-0x99,-0x9d,-0xce,-0x117)](_0x2c2085(-0x9e,-0x11e,-0x5f,-0x11d),'anWvI')){_0x2086dc[_0x5e7085(0x56b,0x516,0x49f,0x44f)](addLog,_0x2086dc['rjSqv']),toastr[_0x2c2085(-0x169,-0x6b,-0xf3,-0x4c)](_0x2086dc['rjSqv']);return;}else _0x2086dc[_0x5e7085(0x5d3,0x670,0x727,0x6bc)](_0x5c296e,_0x5e7085(0x636,0x5ec,0x556,0x539)+'库');}const _0x1a1811=extension_settings[extensionName][_0x2c2085(-0x16c,-0x218,-0x15a,-0x1f6)]['trim'](),_0x5740b1=_0x266b0b&&_0x2086dc[_0x5e7085(0x660,0x67c,0x64a,0x603)](_0x266b0b[_0x5e7085(0x653,0x5c9,0x672,0x583)](),'')?_0x266b0b:_0xff0a0;_0x2086dc[_0x5e7085(0x5c4,0x516,0x476,0x57f)](addLog,_0x2c2085(-0x12a,-0x8f,-0xc5,-0x47)+_0x5740b1);let _0x5d7485=![];_0x5740b1[_0x2c2085(-0x10d,-0x104,-0x8d,-0x147)](_0x2086dc[_0x5e7085(0x57f,0x647,0x5b6,0x57e)])&&(_0x2086dc[_0x2c2085(-0x8e,-0x62,-0x122,-0x1a0)]!==_0x2086dc['XWfZj']?_0x5d7485=!![]:_0x4e19dc[_0x5e7085(0x55a,0x534,0x503,0x555)+_0x1f5a45+_0x5e7085(0x562,0x562,0x531,0x588)]&&(_0x39eb44=_0x2086dc['rnTvA'](_0x2086dc['GxZDv'](_0x3839eb,',\x20'),_0x3aac37['Character\x20'+_0x2e9340+_0x5e7085(0x536,0x562,0x5dd,0x52d)])));_0x2086dc[_0x2c2085(-0x1cc,-0x1df,-0x1a6,-0x270)](addLog,_0x5e7085(0x608,0x66e,0x705,0x5fb)+_0x2c2085(-0xd4,-0x149,-0x14d,-0xa4)+'les):\x20'+_0x5d7485);let _0x358fda={},_0x3ab9b6='',_0x3938c6='';if(_0x5d7485){_0x2086dc[_0x2c2085(-0xbe,-0x82,-0x4f,-0x94)](addLog,_0x2086dc['EDSID']),_0x358fda=_0x2086dc[_0x5e7085(0x56f,0x593,0x556,0x610)](parsePromptStringWithCoordinates,_0x5740b1),_0x3ab9b6=_0x358fda[_0x2c2085(-0xcf,-0x17e,-0x157,-0x1c1)+'osition'];for(let _0x34d358=0xe33*-0x1+-0x5b3*-0x2+-0x2*-0x167;_0x2086dc[_0x2c2085(-0x155,-0x148,-0x91,0x18)](_0x34d358,-0x1*0x15cf+0x1369+-0xce*-0x3);_0x34d358++){if(_0x358fda[_0x5e7085(0x542,0x534,0x4b5,0x48a)+_0x34d358+_0x2c2085(-0xe6,-0x105,-0x15d,-0x1d1)]){if(_0x2086dc[_0x2c2085(-0xfc,-0x171,-0xce,-0xd2)](_0x2086dc[_0x2c2085(-0xb9,-0x5e,-0xa1,-0x165)],_0x2086dc[_0x5e7085(0x59a,0x61e,0x580,0x6b6)]))_0x3938c6=_0x2086dc['GxZDv'](_0x2086dc['IvZDw'](_0x3938c6,',\x20'),_0x358fda[_0x5e7085(0x522,0x534,0x53b,0x549)+_0x34d358+_0x5e7085(0x49a,0x562,0x4c8,0x531)]);else{_0x2086dc['CFVmA'](_0x146355),_0x2086dc[_0x2c2085(-0x1ea,-0xf9,-0x17c,-0x11e)](_0x1d604f,_0x2c2085(0x73,-0x9b,-0x35,-0xef)+'误:\x20'+_0x399e5e['message']),_0xf390e2[_0x2c2085(-0x77,-0x17c,-0xf3,-0x150)](_0x2086dc['PCyDH'],_0x1a81cb);throw _0x1cb5d4;}}}}else{if(_0x2086dc['bhLgj'](_0x2086dc[_0x2c2085(-0x15b,-0x76,-0x99,-0x10f)],_0x2c2085(-0xdb,-0x4a,-0xed,-0x110)))_0x2086dc[_0x5e7085(0x660,0x5a0,0x5dc,0x4d7)](addLog,_0x2086dc[_0x5e7085(0x6c2,0x62c,0x6dd,0x5d5)]),_0x3ab9b6=_0x5740b1;else throw new _0x3fd31f(_0x2086dc['MzOLx']);}let {modifiedPrompt:_0x5860f9,insertions:_0x32f135}=await _0x2086dc[_0x2c2085(-0x4a,-0x17,-0x8b,-0xc6)](prompt_replace,_0x3ab9b6,_0x3938c6);if(_0x5d7485){if(_0x2086dc[_0x2c2085(-0x80,-0xa8,-0x43,-0x1f)](_0x2086dc[_0x2c2085(-0x20d,-0x258,-0x1b6,-0x1a4)],_0x2086dc[_0x5e7085(0x55e,0x5a3,0x54b,0x5ef)]))for(let _0x3f9334=0x10bf+0x223e+-0x1a*0x1f6;_0x3f9334<=-0x387*0xb+-0x1bd1*-0x1+0xb00;_0x3f9334++){if(_0x2086dc['YpyJd']!==_0x2086dc[_0x5e7085(0x5b8,0x64a,0x5c6,0x639)]){const _0x437f67=_0x3f2fb7['gifs'][0x1*-0x581+0x8b*-0x15+-0x10e8*-0x1],_0x338768=_0x437f67[_0x5e7085(0x622,0x60c,0x692,0x55f)]&&_0x437f67[_0x2c2085(0x1,-0x20,-0xb3,-0x49)][_0x2c2085(-0x118,-0x1d1,-0x162,-0xfa)](_0x2086dc[_0x2c2085(-0xf4,-0xe7,-0x115,-0x163)]),_0x5f4624={};return _0x5f4624[_0x2c2085(-0xa8,-0xe4,-0xa8,-0xda)]=_0x437f67[_0x2c2085(-0x20,-0x66,-0xa8,-0x1c)],_0x5f4624[_0x5e7085(0x55c,0x506,0x53f,0x545)]=_0x437f67[_0x5e7085(0x509,0x506,0x4ef,0x4f8)]||'',_0x5f4624[_0x2c2085(-0x83,-0x28,-0xd4,-0x57)]=_0x338768,_0x5f4624[_0x5e7085(0x64e,0x60c,0x5a9,0x544)]=_0x437f67[_0x5e7085(0x5dd,0x60c,0x642,0x558)]||_0x2c2085(-0xe,-0xec,-0x31,0x1e),_0x5f4624;}else _0x358fda[_0x5e7085(0x5fe,0x534,0x56f,0x4e5)+_0x3f9334+_0x2c2085(-0x1f4,-0x178,-0x15d,-0x93)]&&(_0x5860f9=_0x2086dc[_0x2c2085(-0x12d,-0x15a,-0x112,-0x186)](_0x2086dc[_0x2c2085(-0x182,-0x8e,-0x158,-0xc6)](_0x5860f9,_0x2086dc[_0x5e7085(0x59c,0x611,0x67c,0x6bc)]),_0x2086dc[_0x5e7085(0x5d0,0x61f,0x5f5,0x577)](prompt_replace_for_character,_0x358fda[_0x2c2085(-0xc5,-0x17f,-0x18b,-0x1ea)+_0x3f9334+_0x5e7085(0x619,0x562,0x4ac,0x534)])));}else{for(const _0x5124d5 in _0x17880b){const _0xdee64f=_0x5bbdc3[_0x5124d5];if(_0xdee64f[_0x5e7085(0x6a7,0x614,0x637,0x67c)]&&_0x2086dc['hRDZy'](_0xdee64f[_0x5e7085(0x5cc,0x614,0x600,0x6ba)][_0x5e7085(0x69d,0x68b,0x64c,0x751)],0x1f3a*-0x1+-0x8cd*0x3+0x1*0x39a1)){const _0x159444={};return _0x159444['filename']=_0xdee64f[_0x2c2085(-0x5,-0x107,-0xab,-0x10a)][0xd68+-0x8*-0x4+-0xd88*0x1][_0x2c2085(-0x59,-0x73,-0xa8,-0x166)],_0x159444[_0x2c2085(-0x16d,-0x1c7,-0x1b9,-0x20e)]=_0xdee64f[_0x2c2085(-0x10b,-0xf0,-0xab,-0x3d)][0xbf7*-0x3+0x1805+0xbe0][_0x5e7085(0x4ef,0x506,0x567,0x5c3)]||'',_0x159444[_0x5e7085(0x54c,0x5eb,0x53b,0x63b)]=![],_0x159444[_0x2c2085(-0x105,-0x149,-0xb3,-0x121)]=_0x2086dc['pteLx'],_0x159444;}if(_0xdee64f[_0x2c2085(-0x148,-0x161,-0xec,-0x199)]&&_0x2086dc[_0x5e7085(0x4f5,0x53e,0x4d4,0x57d)](_0xdee64f['gifs']['length'],-0x1bc+0x2*-0x858+0x1*0x126c)){const _0x37b6fb=_0xdee64f[_0x5e7085(0x66d,0x5d3,0x5f5,0x699)][-0x167*0x19+-0x1414+0x5*0xb07],_0x288e05=_0x37b6fb[_0x2c2085(-0x101,-0x155,-0xb3,-0x150)]&&_0x37b6fb[_0x5e7085(0x673,0x60c,0x66e,0x5e3)][_0x2c2085(-0x9e,-0x1e0,-0x162,-0x167)](_0x2086dc['FjnWf']),_0x3df7a7={};return _0x3df7a7[_0x2c2085(-0xc6,-0xb8,-0xa8,-0xcc)]=_0x37b6fb[_0x2c2085(-0x16d,-0x32,-0xa8,-0xca)],_0x3df7a7[_0x2c2085(-0x217,-0x161,-0x1b9,-0x17c)]=_0x37b6fb[_0x2c2085(-0x24f,-0x17f,-0x1b9,-0x1e8)]||'',_0x3df7a7[_0x2c2085(-0xc2,-0x17f,-0xd4,-0x186)]=_0x288e05,_0x3df7a7['format']=_0x37b6fb['format']||_0x2086dc[_0x5e7085(0x4e3,0x550,0x487,0x56b)],_0x3df7a7;}}return null;}}function _0x5e7085(_0x59d3f7,_0x2eb4a3,_0x1d877d,_0x127f01){return _0x1f5f(_0x2eb4a3-0x3bf,_0x59d3f7);}let _0x2dc86b=await _0x2086dc[_0x2c2085(-0x1a,-0x35,-0x9b,-0x19)](zhengmian,extension_settings[extensionName][_0x5e7085(0x598,0x60a,0x66f,0x6ad)][extension_settings[extensionName][_0x2c2085(-0x61,-0x131,-0xf0,-0x168)+_0x5e7085(0x541,0x5e0,0x68c,0x5fd)]][_0x2c2085(-0x143,-0x112,-0x134,-0x18e)+'t'],_0x5860f9,extension_settings[extensionName][_0x5e7085(0x6b8,0x60a,0x59b,0x54a)][extension_settings[extensionName][_0x2c2085(-0xe1,-0x59,-0xf0,-0x124)+_0x5e7085(0x5ab,0x5e0,0x568,0x5fb)]][_0x5e7085(0x60b,0x58b,0x5f4,0x5de)+'t_end'],extension_settings[extensionName]['AQT_comfyu'+'i'],_0x32f135);function _0x2c2085(_0xd10905,_0x114731,_0x2f1b9d,_0x14abe7){return _0x1f5f(_0x2f1b9d- -0x300,_0xd10905);}_0x2dc86b=_0x2086dc[_0x5e7085(0x553,0x593,0x525,0x50e)](_0x46f49c,_0x2dc86b);function _0x46f49c(_0x3dfef6){const _0x1c162f={};_0x1c162f[_0x57d201(0x2b5,0x35b,0x3b1,0x34d)]=_0x2086dc[_0x57d201(0x401,0x3d1,0x430,0x361)],_0x1c162f['agdvd']=_0x57d201(0x31d,0x346,0x2a3,0x40c)+'rs',_0x1c162f[_0x36f567(-0x7f,-0x13,-0xa6,-0x11e)]=function(_0x31c728,_0x520a57){return _0x31c728===_0x520a57;},_0x1c162f[_0x57d201(0x346,0x3ef,0x3f3,0x3d4)]=_0x2086dc[_0x36f567(-0x27,0x9,-0xc1,-0xd4)],_0x1c162f[_0x36f567(-0xa6,-0xe2,-0x16f,-0xd6)]=_0x57d201(0x418,0x47a,0x4fa,0x3c2);function _0x57d201(_0x1a7fa7,_0x58b62b,_0x3de993,_0x28e870){return _0x5e7085(_0x3de993,_0x58b62b- -0x1f0,_0x3de993-0x24,_0x28e870-0x144);}const _0x1bf08a=_0x1c162f,_0x207b2b=/<lora:([^:]+)(?:\.safetensors)?:([^>]+)(?::1)?>/g;function _0x36f567(_0x4ffcb4,_0x101be1,_0x4d8e88,_0xd01a50){return _0x5e7085(_0x4d8e88,_0x4ffcb4- -0x615,_0x4d8e88-0x1ec,_0xd01a50-0x1d4);}return _0x3dfef6['replace'](_0x207b2b,(_0x234940,_0x1a7cec,_0xbec552)=>{if(_0x234940[_0x5ee546(0x1f,0xbc,0x3e,-0x11)](_0x1bf08a[_0x5ee546(-0x89,0x1b,-0x98,-0x54)]))return _0x234940;if(_0xbec552['includes'](':')){if(_0x1bf08a[_0x2e318f(0x3f7,0x351,0x448,0x351)](_0x1bf08a['KxQOM'],_0x1bf08a[_0x2e318f(0x3d0,0x422,0x488,0x356)]))_0xe07df3=_0x1bf08a[_0x2e318f(0x3ac,0x440,0x370,0x3b7)];else return _0x2e318f(0x376,0x30b,0x42d,0x2bd)+_0x1a7cec+(_0x2e318f(0x397,0x3a7,0x426,0x3b7)+'rs:')+_0xbec552+'>';}function _0x2e318f(_0x89ac21,_0x331b15,_0x58a157,_0xb59a9c){return _0x57d201(_0x89ac21-0x11d,_0x89ac21-0x51,_0xb59a9c,_0xb59a9c-0xf3);}function _0x5ee546(_0x47fcc3,_0x3dbab9,_0x12acfc,_0x4d1b6a){return _0x57d201(_0x47fcc3-0xf,_0x47fcc3- -0x423,_0x12acfc,_0x4d1b6a-0x5c);}return'<lora:'+_0x1a7cec+(_0x2e318f(0x397,0x303,0x33a,0x3cd)+_0x5ee546(-0xe,-0x6c,-0x3,-0x82))+_0xbec552+_0x2e318f(0x3b5,0x3f4,0x470,0x3af);});}if(extension_settings[extensionName][_0x5e7085(0x57c,0x542,0x604,0x510)][_0x2c2085(-0x5f,-0x4a,-0x8d,0x1d)](_0x2086dc['eWQIR'])){if(_0x2086dc[_0x2c2085(0x3e,-0xb3,-0x43,0x6e)]('CuuCr',_0x2c2085(-0xb3,-0x1f5,-0x15c,-0x194))){const _0x4dd8fe=_0x4eb7be[_0x268a93];if(_0x4dd8fe[_0x2c2085(-0xc6,-0x116,-0xab,-0x10d)]&&_0x4dd8fe[_0x2c2085(0x16,-0xca,-0xab,-0x63)][_0x5e7085(0x635,0x68b,0x721,0x6c7)]>-0x1*0x6b1+0x1*0x1ad5+-0x1424){const _0x3f9932={};return _0x3f9932['filename']=_0x4dd8fe[_0x2c2085(-0x131,0xb,-0xab,-0xe6)][-0x10a9+-0x217d+0x3226][_0x2c2085(-0x149,-0x13f,-0xa8,-0x15a)],_0x3f9932[_0x2c2085(-0x166,-0xfa,-0x1b9,-0x1b1)]=_0x4dd8fe[_0x2c2085(-0x165,-0x102,-0xab,-0x86)][0x17bb+0x2*0xeb+0x11*-0x181][_0x2c2085(-0x161,-0x1ee,-0x1b9,-0x241)]||'',_0x3f9932[_0x5e7085(0x5fd,0x5eb,0x68f,0x63d)]=![],_0x3f9932[_0x2c2085(-0x1d,-0x17a,-0xb3,-0x16c)]=_0x2086dc[_0x5e7085(0x5d6,0x62d,0x5dd,0x592)],_0x3f9932;}if(_0x4dd8fe[_0x2c2085(-0xcf,-0x25,-0xec,-0x1a4)]&&_0x4dd8fe[_0x5e7085(0x598,0x5d3,0x5ae,0x52f)][_0x5e7085(0x701,0x68b,0x705,0x6c7)]>-0x5*0x1bb+-0x1fbd+0x2864){const _0x32c2b2=_0x4dd8fe['gifs'][-0xcb5*0x1+0x1*0x179+0x2cf*0x4],_0x3387ba=_0x32c2b2[_0x2c2085(-0x16d,-0x89,-0xb3,-0x7a)]&&_0x32c2b2[_0x2c2085(-0x78,-0xf7,-0xb3,-0x124)][_0x2c2085(-0x112,-0x1e0,-0x162,-0x1b5)](_0x2086dc[_0x2c2085(-0x19f,-0x18b,-0x115,-0x17c)]),_0x32d55e={};return _0x32d55e[_0x5e7085(0x649,0x617,0x59e,0x616)]=_0x32c2b2[_0x2c2085(-0xeb,-0xe3,-0xa8,-0x68)],_0x32d55e[_0x2c2085(-0x18c,-0xef,-0x1b9,-0x1a1)]=_0x32c2b2['subfolder']||'',_0x32d55e[_0x2c2085(-0x85,-0x168,-0xd4,-0xd0)]=_0x3387ba,_0x32d55e[_0x2c2085(-0x8a,0x7,-0xb3,0x14)]=_0x32c2b2[_0x2c2085(-0x9d,-0xce,-0xb3,-0x166)]||_0x2086dc[_0x5e7085(0x54c,0x550,0x5e4,0x5e6)],_0x32d55e;}}else _0x2dc86b=_0x2dc86b[_0x5e7085(0x5da,0x635,0x6a9,0x5ea)](_0x2c2085(-0x1b1,-0x14f,-0x1aa,-0x129),_0x2086dc[_0x5e7085(0x5d9,0x676,0x6da,0x5b0)]),_0x2dc86b=_0x2dc86b[_0x2c2085(-0x107,0x20,-0x8a,-0xed)](_0x2086dc[_0x2c2085(-0xf7,0x42,-0x3d,-0x56)],'');}console[_0x2c2085(-0x252,-0x253,-0x1b0,-0x1e1)]('prompt',_0x2dc86b),addLog(_0x2c2085(-0x164,-0x92,-0x116,-0x1a6)+_0x2dc86b);let _0x4d9417=await fumian(extension_settings[extensionName][_0x5e7085(0x618,0x60a,0x5b4,0x618)][extension_settings[extensionName][_0x5e7085(0x5d4,0x5cf,0x679,0x674)+_0x2c2085(-0xdd,-0xc6,-0xdf,-0x130)]][_0x2c2085(-0xa5,-0x69,-0xb4,-0x48)+'ompt'],extension_settings[extensionName][_0x5e7085(0x5b5,0x67e,0x743,0x5bd)+'i']);if(extension_settings[extensionName][_0x2c2085(-0x227,-0x1df,-0x17d,-0x124)][_0x5e7085(0x5f1,0x632,0x652,0x673)](_0x2086dc[_0x2c2085(-0x51,-0x1af,-0x105,-0x139)]))_0x4d9417=_0x4d9417[_0x2c2085(0x1d,-0x69,-0x8a,-0xaf)](_0x2086dc['pDVhp'],_0x2086dc[_0x2c2085(0x13,0x28,-0x49,-0xf6)]);else{if(_0x2086dc[_0x2c2085(0x2c,-0x7e,-0x43,-0xf9)](_0x5e7085(0x6aa,0x5f5,0x630,0x577),_0x2086dc[_0x5e7085(0x517,0x523,0x474,0x522)])){const _0x39ba45=new _0x3c7302();_0x39ba45[_0x5e7085(0x6b2,0x615,0x582,0x58a)]=()=>_0x39d94e(_0x39ba45[_0x5e7085(0x606,0x5c0,0x626,0x563)]),_0x39ba45[_0x5e7085(0x488,0x544,0x4f0,0x491)]=_0x292887,_0x39ba45[_0x2c2085(-0x102,-0x135,-0x126,-0xe7)+'URL'](_0x2eab48);}else _0x4d9417=_0x2086dc['uNDuC'](_0x46f49c,_0x4d9417);}_0x2086dc[_0x2c2085(-0x63,-0x89,-0xa0,0x20)](addLog,_0x5e7085(0x60c,0x663,0x5e1,0x5c9)+_0x4d9417),_0x2dc86b=_0x2dc86b[_0x5e7085(0x689,0x635,0x65f,0x5c6)]('\x0a',',')[_0x5e7085(0x5ef,0x5f3,0x5c7,0x63e)](/,{2,}/g,',')['replaceAll']('\x5c\x5c','\x5c')[_0x5e7085(0x65f,0x635,0x5ca,0x56c)]('\x5c','\x5c\x5c'),_0x4d9417=_0x4d9417[_0x5e7085(0x614,0x635,0x6d7,0x672)]('\x0a',',')[_0x5e7085(0x5ea,0x5f3,0x612,0x5c5)](/,{2,}/g,',')['replaceAll']('\x5c\x5c','\x5c')[_0x2c2085(-0x12a,-0xbd,-0x8a,-0xa8)]('\x5c','\x5c\x5c');let _0x35aa2f={'prompt':_0x2dc86b,'negative_prompt':_0x4d9417,'steps':extension_settings[extensionName][_0x5e7085(0x588,0x56b,0x4e2,0x5d1)+_0x2c2085(-0x2a,-0x30,-0xb9,-0x86)],'sampler_name':extension_settings[extensionName]['comfyuisam'+_0x5e7085(0x51a,0x587,0x5a8,0x597)],'width':_0x5f3758?_0x5f3758:extension_settings[extensionName][_0x2c2085(-0x26,-0xca,-0xc3,-0xa4)+_0x5e7085(0x50c,0x570,0x554,0x4f4)],'height':_0x4a1e00?_0x4a1e00:extension_settings[extensionName]['comfyui_he'+_0x2c2085(-0x94,-0x180,-0x109,-0x154)],'cfg_scale':extension_settings[extensionName][_0x2c2085(-0x1c,-0x88,-0x9a,-0x12b)+'i'],'seed':extension_settings[extensionName]['comfyui_se'+'ed']===-0xbea+0x4b9+0x1*0x731||_0x2086dc[_0x5e7085(0x72c,0x662,0x715,0x67c)](extension_settings[extensionName]['comfyui_se'+'ed'],'0')||_0x2086dc[_0x2c2085(-0xdc,-0x29,-0x5d,-0x90)](extension_settings[extensionName][_0x5e7085(0x58d,0x54e,0x4fa,0x499)+'ed'],'')||extension_settings[extensionName][_0x5e7085(0x509,0x54e,0x49c,0x57e)+'ed']===-(0x1e2a+-0x2538+0x70f)||_0x2086dc[_0x5e7085(0x5c0,0x63c,0x640,0x6e7)](extension_settings[extensionName][_0x5e7085(0x549,0x54e,0x52a,0x4ea)+'ed'],'-1')?generateRandomSeed():extension_settings[extensionName][_0x2c2085(-0x1c6,-0x1e4,-0x171,-0x223)+'ed'],'MODEL_NAME':extension_settings[extensionName][_0x5e7085(0x4a1,0x522,0x54e,0x49b)],'c_quanzhong':extension_settings[extensionName][_0x2c2085(-0x171,-0x19b,-0x101,-0x18f)+'g'],'c_idquanzhong':extension_settings[extensionName]['c_idquanzh'+_0x2c2085(-0x89,-0x105,-0x144,-0x137)],'c_xijie':extension_settings[extensionName][_0x2c2085(-0x142,-0x222,-0x1a0,-0x26a)],'c_fenwei':extension_settings[extensionName][_0x2c2085(-0x4c,-0x38,-0xdc,-0x185)],'comfyuicankaotupian':window[_0x5e7085(0x62d,0x680,0x5bd,0x67c)+_0x5e7085(0x540,0x5bf,0x54e,0x67c)],'ipa':extension_settings[extensionName][_0x2c2085(-0xe1,0x4f,-0x33,-0x98)],'scheduler':extension_settings[extensionName][_0x2c2085(-0xda,0x2,-0x72,-0x135)+'heduler'],'vae':extension_settings[extensionName][_0x2c2085(-0x13f,-0xc4,-0x9f,-0x79)+'e'],'clip':extension_settings[extensionName][_0x2c2085(-0x15c,-0x12b,-0x187,-0x120)+_0x5e7085(0x6d0,0x679,0x67d,0x5eb)]};const _0x585a0f=_0x5e7085(0x4a5,0x50c,0x4ef,0x5c1)+_0x5e7085(0x5e7,0x62a,0x684,0x614)+_0x5e7085(0x4a5,0x558,0x4aa,0x59a)+_0x35aa2f['prompt']+'\x0a负面提示词:\x20'+_0x35aa2f[_0x5e7085(0x5f3,0x52e,0x58d,0x593)+'rompt']+_0x2c2085(-0x13d,-0x1a4,-0x10d,-0x9c)+_0x35aa2f[_0x5e7085(0x54d,0x522,0x501,0x4bd)]+'\x0a采样器:\x20'+_0x35aa2f['sampler_na'+'me']+_0x5e7085(0x56d,0x559,0x55b,0x615)+_0x35aa2f[_0x2c2085(-0x9c,-0x4e,-0xf2,-0x176)]+('\x0aCFG\x20Scale'+':\x20')+_0x35aa2f[_0x5e7085(0x61b,0x628,0x5ed,0x630)]+_0x2c2085(-0xb4,-0xf6,-0x5a,-0x2f)+_0x35aa2f['seed']+_0x2c2085(0x26,0x17,-0x4c,-0x36)+_0x35aa2f['width']+'x'+_0x35aa2f['height']+'\x0aVAE:\x20'+_0x35aa2f['vae']+(_0x5e7085(0x72a,0x674,0x69a,0x6e5)+':\x20')+_0x35aa2f[_0x2c2085(-0x115,-0x5c,-0x56,-0xd5)]+(_0x2c2085(-0x67,-0xd8,-0x48,-0x96)+_0x5e7085(0x50c,0x510,0x53b,0x5d8)+'-\x0a');addLog(_0x585a0f);const _0x206e83=_0x2086dc['NnjKX'];let _0x342d99=extension_settings[extensionName][_0x5e7085(0x523,0x542,0x563,0x532)];try{if(_0x2086dc['MhJNy'](_0x2086dc['MRlYk'],_0x2086dc[_0x5e7085(0x5c3,0x537,0x5b5,0x561)])){const _0x418f44=JSON[_0x5e7085(0x633,0x5fd,0x5a0,0x53d)](_0x342d99),_0x4fb43e=Object[_0x2c2085(-0x117,-0x4b,-0xf7,-0x109)](_0x418f44)[_0x5e7085(0x662,0x5ff,0x69b,0x58b)](_0xa011b6=>_0xa011b6&&_0xa011b6[_0x5e7085(0x66b,0x67b,0x6ab,0x6fd)])['length'];if(_0x4fb43e>0x1b*0xfb+-0x1*0x20ed+0x4*0x19d){_0x2086dc['dNXDH'](addLog,_0x5e7085(0x641,0x681,0x6c1,0x6dc)+_0x4fb43e+(_0x2c2085(-0xf7,-0x97,-0xd7,-0x17a)+_0x2c2085(-0xfe,-0x230,-0x192,-0x141)));const _0x1b0a43=extension_settings[extensionName]?.[_0x2c2085(-0xf3,-0x9d,-0x13a,-0x19a)+'he']?.['objectInfo']||{},_0x393812=_0x2086dc[_0x2c2085(-0x126,-0x3a,-0x8b,-0x34)](processSkippedNodes,_0x418f44,_0x1b0a43);_0x342d99=JSON[_0x2c2085(-0x211,-0x1fa,-0x19f,-0x1ce)](_0x393812),_0x2086dc[_0x2c2085(-0xff,-0x13a,-0x70,0x12)](addLog,_0x2c2085(0x1,-0x27,-0x2d,-0x58)+_0x5e7085(0x594,0x608,0x5a5,0x6c0)+(_0x2086dc[_0x2c2085(-0x192,-0x1bc,-0x181,-0x12b)](Object[_0x5e7085(0x593,0x59a,0x572,0x654)](_0x1b0a43)[_0x2c2085(-0xea,-0x15,-0x34,-0xc2)],-0x11e+0x456+-0x338)?_0x5e7085(0x523,0x5bc,0x510,0x5ff):''));}}else{_0x1ff413('检测到\x20'+_0x21f652+(_0x5e7085(0x526,0x5e8,0x6ad,0x56f)+_0x5e7085(0x583,0x52d,0x569,0x55a)));const _0x3dff86=_0xe48ae3[_0x3c545e]?.[_0x2c2085(-0x1cf,-0x14a,-0x13a,-0x144)+'he']?.['objectInfo']||{},_0x366554=_0x2086dc[_0x2c2085(-0x143,-0x70,-0x8b,-0x91)](_0x4eee8d,_0x4c6bf8,_0x3dff86);_0xde5a8c=_0x388b39[_0x2c2085(-0x217,-0x10e,-0x19f,-0x210)](_0x366554),_0x2086dc['BNtbL'](_0x5117b2,_0x5e7085(0x5ed,0x692,0x669,0x5d3)+_0x5e7085(0x64e,0x608,0x5cd,0x5c0)+(_0x2086dc[_0x2c2085(-0x21c,-0x20c,-0x181,-0x179)](_0x28df0f[_0x5e7085(0x514,0x59a,0x582,0x662)](_0x3dff86)[_0x5e7085(0x752,0x68b,0x6bc,0x638)],-0x1*-0x124d+0x57*-0x45+0x526)?_0x2086dc[_0x2c2085(-0xaf,-0x114,-0x10c,-0x1ad)]:''));}}catch(_0x298ee0){_0x2086dc['opdbd'](addLog,_0x2c2085(0x47,-0x10,-0x28,-0x71)+_0x5e7085(0x60e,0x54d,0x4af,0x56c)+_0x298ee0[_0x5e7085(0x61c,0x5e9,0x6af,0x558)]);}_0x35aa2f=await _0x2086dc[_0x2c2085(-0x1d4,-0x190,-0x149,-0x177)](replacepro,_0x35aa2f,_0x342d99),_0x35aa2f=_0x2c2085(-0x93,-0xf5,-0x45,-0xe3)+_0x5e7085(0x52c,0x525,0x5cf,0x4a9)+_0x206e83+(_0x5e7085(0x611,0x691,0x755,0x5ef)+'\x22:')+_0x35aa2f+'}',_0x2086dc[_0x5e7085(0x5cf,0x543,0x4f9,0x5f1)](addLog,_0x2c2085(-0xd0,-0x179,-0x10b,-0x8d)+'I\x20的最终\x20payl'+_0x2c2085(-0xe0,-0xe9,-0xcf,-0x23)+_0x35aa2f),await _0x2086dc[_0x5e7085(0x65b,0x642,0x6c7,0x5bc)](waitForLock),_0x2086dc[_0x5e7085(0x6d1,0x642,0x5a2,0x679)](acquireLock);try{let _0xd596df;if(extension_settings[extensionName][_0x5e7085(0x51d,0x51e,0x534,0x58b)]===_0x2086dc[_0x5e7085(0x4b1,0x518,0x4d7,0x47d)]){const _0x352a9c={};_0x352a9c[_0x5e7085(0x590,0x638,0x6ef,0x6af)]=_0x1a1811,_0x352a9c['prompt']=_0x35aa2f;const _0x39ff5f=await _0x2086dc['ITEcI'](fetch,_0x2086dc[_0x5e7085(0x673,0x5f4,0x679,0x5eb)],{'method':_0x2086dc[_0x5e7085(0x604,0x557,0x586,0x4b5)],'body':JSON['stringify'](_0x352a9c),'headers':getRequestHeaders(window[_0x2c2085(-0x263,-0x174,-0x19b,-0x176)])});if(!_0x39ff5f['ok']){if('ruEEK'!==_0x2086dc['FZNxw'])_0x569679['on'](_0xaf0f60,_0x2b97ea);else{const _0x59ab52=await _0x39ff5f[_0x5e7085(0x449,0x50e,0x586,0x4f4)]();_0x2086dc[_0x2c2085(-0xcc,-0x1f2,-0x12c,-0x179)](addLog,'API\x20请求失败\x20('+_0x5e7085(0x591,0x51c,0x553,0x45f)+_0x2c2085(-0x1dd,-0x1dd,-0x114,-0x1cc)+_0x59ab52);throw new Error(_0x5e7085(0x55d,0x547,0x5a4,0x5f9)+_0x39ff5f['status']+_0x5e7085(0x5ea,0x675,0x73c,0x64f)+_0x59ab52);}}const _0x3ef196=await _0x39ff5f['text']();let _0x2bee8d,_0x521db9;try{if(_0x2086dc[_0x5e7085(0x575,0x5b0,0x4fd,0x65c)]!==_0x2c2085(-0x190,-0xfe,-0x12e,-0x1bf)){const _0x40c3ba=JSON[_0x5e7085(0x66f,0x5fd,0x6a6,0x5b0)](_0x3ef196);_0x2bee8d=_0x40c3ba[_0x5e7085(0x685,0x60c,0x558,0x689)],_0x521db9=_0x40c3ba[_0x2c2085(-0xfa,-0x1a4,-0x14e,-0x9c)];}else _0x2086dc[_0x2c2085(-0xb3,-0x1ab,-0x11f,-0x113)](_0x156036,_0x5e7085(0x605,0x697,0x681,0x5f4)+'节点处理:\x20'+_0x3cd100[_0x5e7085(0x5bd,0x5e9,0x63f,0x587)]);}catch(_0x432ed4){_0x2086dc[_0x5e7085(0x630,0x683,0x5bc,0x686)](_0x2086dc[_0x2c2085(-0xeb,-0xc4,-0x148,-0x9a)],_0x2086dc['ChPyo'])?_0x5bb259[_0x2c2085(-0x244,-0x235,-0x18b,-0x23c)+_0x4fd46d+_0x2c2085(-0x111,-0x165,-0x15d,-0xf6)]&&(_0x1dad46=_0x2086dc['rnTvA'](_0x1a38a7+_0x2086dc[_0x5e7085(0x5a1,0x611,0x62a,0x6c9)],_0x2086dc[_0x2c2085(-0xdb,-0x176,-0x11f,-0x1c8)](_0x6ac0ab,_0x5ce12c['Character\x20'+_0x2bc910+_0x2c2085(-0x12b,-0x132,-0x15d,-0xf2)]))):(_0x2086dc[_0x5e7085(0x62a,0x61f,0x610,0x661)](addLog,_0x2086dc[_0x5e7085(0x63b,0x5ea,0x661,0x5c3)]),_0x2bee8d=_0x5e7085(0x5c5,0x5a5,0x592,0x5ff),_0x521db9=_0x3ef196);}if(!_0x521db9){addLog(_0x2086dc[_0x5e7085(0x4f3,0x582,0x5e6,0x61e)]);throw new Error(_0x2c2085(-0x169,-0x227,-0x184,-0x16d)+_0x2c2085(-0xe2,-0xe2,-0x86,-0x26)+_0x2c2085(-0x1a1,-0x7f,-0xfa,-0x3e)+_0x5e7085(0x5fa,0x566,0x5da,0x622));}_0x2086dc[_0x5e7085(0x634,0x588,0x607,0x544)](addLog,_0x2086dc[_0x5e7085(0x6a0,0x650,0x6c9,0x65b)]),_0xd596df=_0x5e7085(0x740,0x699,0x66f,0x694)+'/'+_0x2bee8d+_0x5e7085(0x5c6,0x59b,0x516,0x518)+_0x521db9;}else{const _0x362e94=new URL(_0x2086dc[_0x2c2085(-0x19b,-0x1fe,-0x158,-0xf3)](_0x1a1811,_0x2086dc['ewNTR'])),_0x3a8a86=await _0x2086dc['vCYVq'](fetch,_0x362e94,{'method':_0x2086dc[_0x5e7085(0x5c5,0x557,0x620,0x4bb)],'body':_0x35aa2f,'headers':{'Content-Type':_0x2086dc[_0x5e7085(0x6fa,0x636,0x57d,0x58a)]}});if(!_0x3a8a86['ok']){if(_0x2086dc[_0x5e7085(0x656,0x5f1,0x53d,0x564)](_0x2086dc[_0x5e7085(0x6b5,0x648,0x62b,0x5c9)],_0x2086dc[_0x2c2085(0x29,-0xbe,-0x77,-0x2c)])){const _0x4399f2=await _0x3a8a86['text']();_0x2086dc[_0x2c2085(-0x8,-0xa2,-0xa0,-0xdf)](addLog,_0x2c2085(-0x96,-0x130,-0x8f,-0xad)+_0x2c2085(-0x5c,-0x142,-0xfc,-0x172)+_0x5e7085(0x4db,0x586,0x60e,0x4d8)+_0x4399f2);throw new Error('请求失败,状态码:\x20'+_0x3a8a86['status']+_0x2c2085(-0xfe,-0x56,-0x4a,-0x111)+_0x4399f2);}else{_0xeacabc(_0x2086dc[_0x2c2085(-0x1c1,-0x74,-0x13d,-0x15a)]);throw new _0x594404(_0x2086dc['jPnFs']);}}const _0x3bc8ac=await _0x3a8a86[_0x5e7085(0x675,0x65b,0x675,0x64f)]();let _0xfaf306=_0x3bc8ac[_0x5e7085(0x497,0x51b,0x470,0x5c5)],_0x262238=0x2504+0x25b5+-0x4ab9;while(!![]){try{const _0x46319b=await _0x2086dc[_0x5e7085(0x500,0x516,0x5c7,0x56a)](fetch,_0x1a1811+_0x2c2085(-0xe6,-0x3c,-0xcd,-0x54)+_0xfaf306);if(!_0x46319b['ok']){_0x2086dc[_0x2c2085(-0x1e7,-0x14f,-0x1a6,-0x12f)](addLog,_0x5e7085(0x593,0x51d,0x5e4,0x59a)+'\x20'+_0x46319b[_0x2c2085(-0x118,-0x12a,-0x67,-0x124)]);throw new Error(_0x5e7085(0x5d2,0x548,0x492,0x5aa)+_0x2c2085(-0x22a,-0x1ca,-0x1ad,-0x23b)+_0x5e7085(0x624,0x5f9,0x66d,0x5ec)+_0x46319b['status']);}let _0x13560c=await _0x46319b[_0x2c2085(-0x8c,-0x4a,-0x64,-0xf7)]();console[_0x5e7085(0x4f6,0x50f,0x5d6,0x58f)](_0x2086dc[_0x5e7085(0x555,0x61b,0x63e,0x66d)],_0x13560c);if(_0x13560c['hasOwnProp'+_0x2c2085(-0x115,-0x21d,-0x17e,-0x15b)](_0xfaf306)){function _0x4e96fe(_0x4f2dbc){function _0x2eb451(_0x3919d2,_0x53fa58,_0x40b61d,_0x31db1f){return _0x2c2085(_0x3919d2,_0x53fa58-0x17e,_0x53fa58- -0x46,_0x31db1f-0x6);}function _0x5423c8(_0x51c8a5,_0x3e76bb,_0x400e8f,_0x23dcbf){return _0x5e7085(_0x23dcbf,_0x51c8a5- -0x57c,_0x400e8f-0x13c,_0x23dcbf-0xa1);}if(_0x2086dc['bhLgj'](_0x2086dc[_0x2eb451(-0x171,-0x167,-0x159,-0x16b)],_0x2eb451(-0x1c9,-0x1d9,-0x1b0,-0x208))){const _0x4758e5=_0x264f5f?function(){function _0x2e8d25(_0x543cf7,_0xed3227,_0x4ad119,_0xfedd2){return _0x2eb451(_0xed3227,_0x4ad119-0x101,_0x4ad119-0x7f,_0xfedd2-0x1c1);}if(_0x1cf3cc){const _0x4ba4a2=_0x562dad[_0x2e8d25(-0x92,0xa1,-0xc,-0x17)](_0x118860,arguments);return _0x3c439d=null,_0x4ba4a2;}}:function(){};return _0x369699=![],_0x4758e5;}else{for(const _0x4871fb in _0x4f2dbc){const _0x59f9ec=_0x4f2dbc[_0x4871fb];if(_0x59f9ec['images']&&_0x2086dc[_0x2eb451(-0x134,-0x1c7,-0x1f3,-0x159)](_0x59f9ec[_0x2eb451(-0x126,-0xf1,-0xb5,-0x194)][_0x2eb451(-0x9a,-0x7a,-0xd0,-0x126)],-0x556+-0x83c+-0x1*-0xd92)){const _0x331cf6={};return _0x331cf6[_0x2eb451(-0x55,-0xee,-0x112,-0xb3)]=_0x59f9ec['images'][-0x3*-0x769+0x16e+0x2a1*-0x9][_0x2eb451(-0x57,-0xee,-0x19c,-0x1ab)],_0x331cf6[_0x5423c8(-0x76,0x1e,0x50,-0x7d)]=_0x59f9ec['images'][0x2105+-0x4e9*-0x1+-0x25ee][_0x2eb451(-0x1dd,-0x1ff,-0x1dc,-0x1d7)]||'',_0x331cf6[_0x2eb451(-0x114,-0x11a,-0x1a5,-0xb1)]=![],_0x331cf6['format']=_0x2086dc[_0x5423c8(0xb1,0x138,0xcd,0xe3)],_0x331cf6;}if(_0x59f9ec[_0x2eb451(-0xd0,-0x132,-0x7b,-0xf7)]&&_0x2086dc[_0x5423c8(-0x3e,-0x8c,-0x83,-0xcf)](_0x59f9ec['gifs'][_0x5423c8(0x10f,0x123,0x18b,0xea)],0xae2+-0x4*-0x8cc+0x2*-0x1709)){const _0x383226=_0x59f9ec[_0x2eb451(-0xc1,-0x132,-0x15f,-0x77)][0x145b+-0x86e+-0xbed],_0x3f9f4a=_0x383226[_0x2eb451(-0x168,-0xf9,-0xfb,-0xeb)]&&_0x383226[_0x5423c8(0x90,0xfe,0xde,0x146)][_0x2eb451(-0x1b5,-0x1a8,-0x15d,-0x234)](_0x2eb451(-0xee,-0x9f,-0x146,-0xe7)),_0x303a38={};return _0x303a38['filename']=_0x383226[_0x2eb451(-0x1b8,-0xee,-0x24,-0x17d)],_0x303a38[_0x5423c8(-0x76,-0x1,-0x8e,-0x6b)]=_0x383226[_0x5423c8(-0x76,-0x115,-0x2b,0xc)]||'',_0x303a38['isVideo']=_0x3f9f4a,_0x303a38[_0x5423c8(0x90,0xe9,0x154,0xa)]=_0x383226[_0x2eb451(-0x14c,-0xf9,-0x3b,-0x1b8)]||_0x2086dc[_0x5423c8(-0x2c,0x64,-0x84,-0x48)],_0x303a38;}}return null;}}let _0x17d4e4=_0x2086dc[_0x5e7085(0x4da,0x543,0x4bd,0x4b7)](_0x4e96fe,_0x13560c[_0xfaf306][_0x2086dc[_0x2c2085(-0x11c,-0x118,-0x5b,-0x10e)]]);if(!_0x17d4e4){if(_0x2086dc['KOgKA'](_0x2c2085(-0x223,-0x1d0,-0x1a5,-0x1fc),_0x2086dc[_0x2c2085(-0x1bd,-0x241,-0x179,-0x1f9)]))_0x23899f[_0x5e7085(0x5be,0x569,0x5c6,0x565)+_0x2c2085(-0x145,-0x195,-0x170,-0x1c9)+_0x5e7085(0x6c8,0x616,0x650,0x574)]=!![],_0x2086dc[_0x5e7085(0x689,0x642,0x665,0x62d)](_0x25a275);else throw new Error(_0x2086dc['WFDZb']);}window[_0x2c2085(-0x230,-0x14b,-0x19e,-0x14c)+_0x5e7085(0x5a3,0x5fe,0x68b,0x536)]=_0x17d4e4;const _0x2b6a92=_0x17d4e4['isVideo']?'视频':'图片';addLog(_0x2b6a92+(_0x5e7085(0x67b,0x63a,0x66e,0x619)+_0x2c2085(-0xf6,-0x114,-0xee,-0x8c)+')。'));let _0x11f0bf=_0x1a1811+('/view?file'+_0x5e7085(0x462,0x50b,0x5a2,0x499))+_0x17d4e4[_0x5e7085(0x59d,0x617,0x602,0x6b0)]+(_0x2c2085(-0x193,-0x1a8,-0x185,-0x102)+'=')+_0x2086dc[_0x5e7085(0x504,0x530,0x475,0x51a)](encodeURIComponent,_0x17d4e4[_0x5e7085(0x4d6,0x506,0x58f,0x4b4)])+('&type=outp'+'ut');const _0x5c0a4a=await _0x2086dc['FDZIU'](fetch,_0x11f0bf);if(!_0x5c0a4a['ok'])throw new Error(_0x2c2085(-0x6e,0x10,-0x9d,-0xba)+':\x20'+_0x5c0a4a[_0x2c2085(0xe,0x33,-0x67,0x3d)]);let _0x4bed32=await _0x5c0a4a[_0x2c2085(-0x186,-0x164,-0x120,-0x171)]();if(_0x17d4e4[_0x2c2085(-0x145,-0x124,-0xd4,-0xd3)]){let _0x74045c=_0x2086dc[_0x5e7085(0x5c9,0x5c1,0x59b,0x578)];if(_0x17d4e4['format']){if(_0x17d4e4['format'][_0x5e7085(0x595,0x632,0x56b,0x56a)](_0x5e7085(0x5b5,0x627,0x588,0x594)))_0x2086dc['Npfkd'](_0x2086dc['sdNiT'],'AOrpA')?_0x4809f2['initialize'+_0x2c2085(-0xfe,-0x187,-0x170,-0x170)+'tener']&&(_0x383720[_0x2c2085(-0xcb,-0x2b,-0x2b,0x8a)+'ener'](_0x22aa9a[_0x5e7085(0x5e6,0x653,0x630,0x600)+'MAGE_REQUE'+'ST'],_0x3722ec),_0x4dcb94['forEach'](_0x5a3bc3=>{function _0x556a54(_0x25c28e,_0x4753ef,_0x1da38b,_0x9f523b){return _0x2c2085(_0x25c28e,_0x4753ef-0x159,_0x9f523b-0x4da,_0x9f523b-0x1bd);}function _0x57fe6b(_0x26a277,_0x472d05,_0x238f6f,_0x1dee7a){return _0x5e7085(_0x26a277,_0x472d05- -0x69,_0x238f6f-0x4d,_0x1dee7a-0x1ac);}_0x7635b1[_0x556a54(0x4a2,0x450,0x51c,0x4af)+_0x556a54(0x446,0x436,0x39d,0x3b3)](_0x5a3bc3,_0x1f929a);}),_0x39cd1e[_0x2c2085(-0x199,-0x1da,-0x156,-0x1ed)+'ComfyuiLis'+_0x2c2085(-0x57,-0xc6,-0xa9,-0xe5)]=![],_0x2086dc['NfLAI'](_0x23ecdd,'comfyui\x20生图'+_0x2c2085(-0xa2,-0x11e,-0xf9,-0xcb))):_0x74045c=_0x2086dc[_0x2c2085(-0x1bf,-0x232,-0x1ac,-0x18a)];else(_0x17d4e4[_0x2c2085(-0xd1,-0x159,-0xb3,-0x13c)][_0x5e7085(0x683,0x632,0x584,0x60a)](_0x2086dc[_0x2c2085(-0x4f,0x69,-0x3b,-0x1b)])||_0x17d4e4[_0x5e7085(0x640,0x60c,0x6a2,0x556)][_0x5e7085(0x59b,0x632,0x6f7,0x5e7)](_0x2086dc[_0x2c2085(-0x1be,-0x116,-0x16c,-0x104)]))&&(_0x74045c=_0x2086dc[_0x2c2085(-0x1c6,-0x12e,-0xfe,-0x8b)]);}const _0x2c009e=await _0x4bed32[_0x2c2085(-0x1f3,-0x1d3,-0x182,-0x164)+'r'](),_0x2d3d74={};_0x2d3d74[_0x2c2085(-0xf9,-0xe0,-0xac,-0xf9)]=_0x74045c,_0x4bed32=new Blob([_0x2c009e],_0x2d3d74),console['log']('[ComfyUI]\x20'+'视频\x20MIME\x20类型'+_0x2c2085(-0x163,-0x10e,-0xbc,-0x26)+_0x17d4e4['format']+_0x2c2085(-0x141,-0x1ae,-0x183,-0x195)+_0x74045c);}_0xd596df=await new Promise((_0x55f392,_0x3fcc11)=>{const _0x45b922=new FileReader();_0x45b922['onloadend']=()=>_0x55f392(_0x45b922[_0x4b1eb4(0x4f3,0x49d,0x557,0x51c)]);function _0x4b1eb4(_0x5da94c,_0x1be2b8,_0x41b6f7,_0x21b142){return _0x5e7085(_0x1be2b8,_0x41b6f7- -0x69,_0x41b6f7-0x1c,_0x21b142-0xc2);}function _0x4c515a(_0xc25188,_0x4b6759,_0x272a9d,_0x331c27){return _0x2c2085(_0x272a9d,_0x4b6759-0x12c,_0x4b6759-0x550,_0x331c27-0x146);}_0x45b922[_0x4c515a(0x3e9,0x3d5,0x49b,0x33b)]=_0x3fcc11,_0x45b922[_0x4b1eb4(0x489,0x5a0,0x530,0x4bf)+'URL'](_0x4bed32);});break;}await _0x2086dc[_0x5e7085(0x51a,0x5da,0x675,0x5a0)](sleep,-0x212f+-0x22a+0x2741*0x1),_0x262238++;if(_0x262238>-0x98d*0x3+0x805*-0x2+-0x1*-0x2d79){addLog(_0x2086dc[_0x2c2085(-0xb7,-0x85,-0xbb,-0xe7)]);throw new Error(_0x2086dc['calSd']);}}catch(_0x4375e3){_0x2086dc[_0x2c2085(-0x12d,-0xd3,-0xb1,-0x1b)](addLog,_0x2c2085(-0x218,-0x262,-0x1b2,-0x271)+_0x4375e3);throw _0x4375e3;}}}_0x2086dc[_0x2c2085(-0x169,-0x214,-0x1b5,-0x229)](releaseLock);if(!_0xd596df)throw new Error(_0x2086dc[_0x5e7085(0x4d5,0x508,0x5b7,0x4ad)]);const _0x2e5aa7=window[_0x5e7085(0x54a,0x521,0x473,0x511)+_0x5e7085(0x648,0x5fe,0x56c,0x615)]?.['isVideo']||![],_0x286baf=window[_0x5e7085(0x505,0x521,0x50c,0x53a)+_0x5e7085(0x566,0x5fe,0x6ae,0x651)]?.[_0x2c2085(-0x169,-0x124,-0xb3,-0x91)]||_0x2086dc['pteLx'];return addLog(_0x2c2085(-0xe4,-0x1e2,-0x18d,-0x19f)+(_0x2e5aa7?'视频':'图片')+(_0x2c2085(-0x1eb,-0x100,-0x132,-0xf9)+_0x2c2085(-0x1d5,-0x135,-0x198,-0x103)+'L。')),{'image':_0xd596df,'change':_0x2086dc[_0x2c2085(-0xb2,-0x1ca,-0x17a,-0x171)](_0x129709,''),'isVideo':_0x2e5aa7,'format':_0x286baf};}catch(_0x4b5a0f){_0x2086dc['pjNhV'](releaseLock),_0x2086dc[_0x5e7085(0x565,0x593,0x513,0x546)](addLog,_0x5e7085(0x635,0x68a,0x648,0x5e7)+_0x5e7085(0x4b3,0x53f,0x547,0x5b2)+_0x4b5a0f[_0x2c2085(-0x199,-0x54,-0xd6,-0x89)]),console[_0x5e7085(0x538,0x5cc,0x60a,0x583)](_0x2086dc[_0x2c2085(-0x5c,-0x6b,-0x4d,-0x5f)],_0x4b5a0f);throw _0x4b5a0f;}}async function comfyuigenerate(_0x1a7337){const _0x43f7f8={'dBOkp':function(_0x393429,_0x381ac1){return _0x393429(_0x381ac1);},'EgdOA':'{修图}','dWwSB':_0x1dd17f(0x46e,0x4ad,0x48e,0x4cd),'ebiAn':_0x1dd17f(0x304,0x3c9,0x421,0x371),'dgnEZ':function(_0x219df7,_0x4ac58c,_0x57039b,_0x22f99e){return _0x219df7(_0x4ac58c,_0x57039b,_0x22f99e);},'QTXCX':function(_0x105f4b,_0x133556){return _0x105f4b!==_0x133556;},'IULKM':_0x1dd17f(0x515,0x4cc,0x555,0x4dd),'HWXNU':'HGPYp','nTFGR':_0x1dd17f(0x5b7,0x4ed,0x56d,0x47a),'wMxrK':_0x1dd17f(0x551,0x4ca,0x579,0x442)+'mage-respo'+'nse','aKDAf':function(_0x28db25,_0x94f479){return _0x28db25===_0x94f479;},'oDWuN':_0x1dd17f(0x37c,0x3c6,0x348,0x3d4)};let {id:_0x24059b,prompt:_0x3ae090,width:_0x511cb6,height:_0x1e0aee,change:_0x4c0440}=_0x1a7337;function _0x4b187c(_0x4abf1d,_0x4beb94,_0xdd58b6,_0x42849b){return _0x1f5f(_0x4abf1d- -0x88,_0xdd58b6);}_0x43f7f8[_0x1dd17f(0x4cb,0x440,0x4b0,0x40b)](addLog,_0x4b187c(0x142,0x154,0xb7,0x201)+':\x20'+_0x24059b+(')\x20-\x20Prompt'+':\x20')+_0x3ae090+(_0x4c0440?_0x4b187c(0x1da,0x188,0x1e0,0x139)+'\x20'+_0x4c0440:''));if(_0x4c0440&&_0x4c0440[_0x1dd17f(0x4a7,0x4e4,0x507,0x544)](_0x43f7f8[_0x1dd17f(0x507,0x506,0x551,0x45a)])){_0x43f7f8[_0x4b187c(0x147,0x120,0x199,0x12c)](bananaGenerate,_0x1a7337);return;}function _0x1dd17f(_0x145490,_0x396358,_0x55126d,_0x21b310){return _0x1f5f(_0x396358-0x271,_0x21b310);}try{const {image:_0x282b70,change:_0x26aaa1,isVideo:_0x4f5e57,format:_0x2ddb3d}=await generateComfyUIImage({'prompt':_0x3ae090,'width':_0x511cb6,'height':_0x1e0aee,'change':_0x4c0440});if(extension_settings[extensionName]['cache']!='0'){if(_0x43f7f8[_0x1dd17f(0x45e,0x4e9,0x59f,0x523)]!==_0x43f7f8[_0x4b187c(0x205,0x27f,0x290,0x1d5)]){const _0x2a9af5={};_0x2a9af5[_0x4b187c(0x1a6,0x192,0x1de,0x19e)]=_0x26aaa1,_0x2a9af5['isVideo']=_0x4f5e57,_0x2a9af5[_0x1dd17f(0x522,0x4be,0x3fa,0x53a)]=_0x2ddb3d,await _0x43f7f8['dgnEZ'](setItemImg,_0x3ae090,_0x282b70,_0x2a9af5),addLog((_0x4f5e57?'视频':'图像')+(_0x1dd17f(0x3c6,0x461,0x3a8,0x443)+_0x4b187c(0x160,0x1f9,0x1d6,0x168))+_0x3ae090);}else return _0x4b187c(0xce,0x18,0x154,0xc4)+_0x5342a0+(_0x4b187c(0xef,0x154,0x48,0xaa)+'rs:')+_0x16392f+'>';}else{if(_0x43f7f8[_0x1dd17f(0x5d0,0x51e,0x529,0x531)](_0x43f7f8[_0x1dd17f(0x49f,0x523,0x498,0x5c7)],_0x43f7f8['HWXNU']))addLog('缓存设置为不存入数据'+'库');else{_0x2e2155(_0x259c2c);return;}}const _0x5cad6c={};_0x5cad6c['id']=_0x24059b,_0x5cad6c[_0x1dd17f(0x4d6,0x497,0x439,0x42c)]=!![],_0x5cad6c['imageData']=_0x282b70,_0x5cad6c[_0x4b187c(0x102,0x197,0x173,0x5f)]=_0x3ae090,_0x5cad6c[_0x1dd17f(0x509,0x49f,0x422,0x441)]=_0x26aaa1,_0x5cad6c[_0x4b187c(0x1a4,0x110,0x129,0x1de)]=_0x4f5e57||![],_0x5cad6c[_0x4b187c(0x1c5,0x1bd,0x28e,0x21a)]=_0x2ddb3d||_0x43f7f8['nTFGR'],eventSource[_0x1dd17f(0x4ae,0x50c,0x489,0x574)](EventType[_0x4b187c(0x20c,0x2b1,0x271,0x2c2)+_0x4b187c(0xca,0x17e,0x147,0xef)+_0x1dd17f(0x51b,0x53f,0x524,0x4e4)],_0x5cad6c);const _0x3961bc={};_0x3961bc['id']=_0x24059b,_0x3961bc[_0x4b187c(0x19e,0x226,0x167,0xd9)]=!![],_0x3961bc[_0x4b187c(0x238,0x1c6,0x1f6,0x2b0)]=_0x282b70,_0x3961bc[_0x4b187c(0x102,0x15a,0x123,0x106)]=_0x3ae090,_0x3961bc[_0x1dd17f(0x466,0x49f,0x3ff,0x524)]=_0x26aaa1,_0x3961bc[_0x1dd17f(0x533,0x49d,0x4e2,0x40f)]=_0x4f5e57||![],_0x3961bc[_0x1dd17f(0x4d7,0x4be,0x420,0x4fd)]=_0x2ddb3d||_0x4b187c(0x1f4,0x19b,0x24e,0x25b),eventSource[_0x4b187c(0x213,0x2c8,0x186,0x231)](_0x43f7f8['wMxrK'],_0x3961bc),_0x43f7f8[_0x1dd17f(0x485,0x440,0x3fc,0x47e)](addLog,'发送'+(_0x4f5e57?'视频':'图片')+('生成成功响应\x20(ID'+':\x20')+_0x24059b+')');}catch(_0x3fd61d){if(_0x43f7f8['aKDAf'](_0x43f7f8[_0x4b187c(0x236,0x19e,0x18b,0x180)],_0x1dd17f(0x41a,0x453,0x3e3,0x4bf)))_0x24acc5=!![];else{const _0x30b382=_0x4b187c(0x118,0x12d,0x195,0x15f)+'(ID:\x20'+_0x24059b+_0x1dd17f(0x4ef,0x50b,0x5c7,0x484)+_0x3fd61d[_0x1dd17f(0x462,0x49b,0x4c1,0x3dd)];_0x43f7f8[_0x4b187c(0x147,0x1e3,0x11d,0x14a)](addLog,_0x4b187c(0x114,0x7a,0x6a,0xe5)+_0x30b382),console['error'](_0x1dd17f(0x370,0x403,0x381,0x3a7)+_0x4b187c(0x115,0x164,0x1b2,0x145)+_0x1dd17f(0x46b,0x407,0x3f8,0x3c7),_0x3fd61d);const _0x203f54={};_0x203f54['id']=_0x24059b,_0x203f54[_0x1dd17f(0x547,0x497,0x43d,0x417)]=![],_0x203f54[_0x4b187c(0x185,0x164,0xd5,0x138)]=_0x3fd61d[_0x4b187c(0x1a2,0x15f,0x1d2,0xd8)],_0x203f54[_0x1dd17f(0x413,0x3fb,0x34b,0x378)]=_0x3ae090,eventSource['emit'](EventType[_0x1dd17f(0x575,0x505,0x58b,0x57b)+_0x4b187c(0xca,0x10d,0xf7,0xb)+_0x1dd17f(0x500,0x53f,0x5ca,0x525)],_0x203f54);const _0x5eb07b={};_0x5eb07b['id']=_0x24059b,_0x5eb07b['success']=![],_0x5eb07b['error']=_0x3fd61d[_0x4b187c(0x1a2,0x1aa,0x152,0x129)],_0x5eb07b[_0x1dd17f(0x3c8,0x3fb,0x4a4,0x489)]=_0x3ae090,eventSource['emit'](_0x1dd17f(0x524,0x4ca,0x49e,0x579)+_0x1dd17f(0x541,0x4ce,0x590,0x4a9)+'nse',_0x5eb07b),_0x43f7f8[_0x1dd17f(0x449,0x440,0x37c,0x44c)](addLog,_0x4b187c(0x171,0x17b,0x110,0x20e)+'ID:\x20'+_0x24059b+')');}}}const LEGACY_EVENT_NAMES=[_0x453391(0x327,0x373,0x3bb,0x453)+'mage-reque'+'st','generate_i'+_0x3f6f82(0xe0,0x11d,0x5a,0xb1)+'st'];function initializeComfyuiListener(){const _0x18a32e={'ldIWg':function(_0x7447a8,_0x3e41d6){return _0x7447a8(_0x3e41d6);},'SOCrY':'comfyui\x20生图'+_0x5870c7(-0x83,0x2a,-0x7f,-0xeb)+_0x5870c7(-0xca,-0x51,-0x115,-0x159)};eventSource['on'](EventType[_0x5870c7(-0x86,-0x1a,-0x5f,0x2d)+'MAGE_REQUE'+'ST'],comfyuigenerate);function _0xe662a2(_0x36ca0b,_0x19513f,_0x1bce63,_0x24550c){return _0x453391(_0x36ca0b-0x39,_0x24550c,_0x1bce63-0x113,_0x24550c-0xde);}function _0x5870c7(_0x5821f7,_0x38197b,_0x21e5b0,_0x172e0c){return _0x453391(_0x5821f7-0x6,_0x38197b,_0x5821f7- -0x47c,_0x172e0c-0x1a5);}LEGACY_EVENT_NAMES[_0xe662a2(0x4df,0x548,0x4f3,0x566)](_0x421fc4=>{eventSource['on'](_0x421fc4,comfyuigenerate);}),_0x18a32e[_0xe662a2(0x4d2,0x43c,0x4e9,0x573)](addLog,_0x18a32e[_0x5870c7(-0x17f,-0x150,-0x1d9,-0x224)]);}export async function replaceWithcomfyui(){function _0x4aad98(_0x12ef52,_0xaf3e8a,_0x5cd4c9,_0x402eb2){return _0x453391(_0x12ef52-0xd3,_0xaf3e8a,_0x5cd4c9- -0x450,_0x402eb2-0x193);}const _0x286451={'OAEEA':_0x22fae5(0x3e2,0x44f,0x3d3,0x4a5)+'+$','QOdGg':function(_0x21a5b4,_0x5737ab){return _0x21a5b4===_0x5737ab;},'PLKpk':_0x22fae5(0x2c1,0x374,0x401,0x336),'EhEJI':function(_0x448b35,_0x57532e){return _0x448b35(_0x57532e);},'Gpmpn':'Error\x20gene'+_0x4aad98(-0x1b3,-0xdd,-0x151,-0xdc)+_0x4aad98(-0x1fb,-0x98,-0x158,-0x169),'Vjfza':function(_0x167dd5,_0x3191a4){return _0x167dd5==_0x3191a4;},'utSwh':_0x4aad98(-0x6e,-0xef,-0x56,-0x54),'iIllf':function(_0x4da846,_0x17b37b){return _0x4da846!==_0x17b37b;},'VHywd':_0x22fae5(0x4d6,0x471,0x3c1,0x51f),'HjIZm':function(_0x53dbd0){return _0x53dbd0();},'JoPlM':_0x4aad98(0x36,-0x2e,-0x90,-0x136),'RGNfd':'comfyui\x20生图'+_0x4aad98(-0x1e,-0x41,-0xe7,-0x149)};function _0x22fae5(_0x2dd193,_0x9f0f98,_0x1c500f,_0x221ca7){return _0x3f6f82(_0x2dd193,_0x9f0f98-0x87,_0x1c500f-0xcb,_0x9f0f98-0x319);}if(_0x286451[_0x4aad98(-0x7a,0x2b,-0x6c,0x4c)](extension_settings[extensionName][_0x4aad98(-0x8a,-0x1c5,-0x134,-0xea)],_0x286451[_0x22fae5(0x39d,0x418,0x496,0x3ce)])){if(!window['initialize'+_0x22fae5(0x3da,0x39d,0x447,0x3d1)+'tener']){if(_0x286451[_0x4aad98(-0x1ce,-0x1ae,-0x14c,-0x1c2)](_0x286451[_0x22fae5(0x419,0x42c,0x38b,0x496)],_0x286451[_0x4aad98(-0x162,-0xe0,-0xcf,-0x10e)]))return _0x23ba4a[_0x22fae5(0x41e,0x425,0x48f,0x492)]()[_0x22fae5(0x414,0x432,0x3fa,0x4b7)](QsQaDg[_0x4aad98(-0x73,0x44,-0x27,0x51)])[_0x22fae5(0x48a,0x425,0x3f1,0x477)]()[_0x22fae5(0x463,0x4b9,0x4e7,0x565)+'r'](_0x3341f2)[_0x4aad98(-0xe5,-0x46,-0xc9,-0x8a)](QsQaDg['OAEEA']);else window[_0x4aad98(-0x12b,-0xe9,-0x144,-0xa1)+_0x4aad98(-0x169,-0x1bc,-0x15e,-0xc0)+'tener']=!![],initializeComfyuiListener();}_0x286451['HjIZm'](initializeImageProcessing);}else{if(window['initialize'+_0x4aad98(-0x170,-0x1f1,-0x15e,-0xe9)+'tener']){if(_0x286451[_0x22fae5(0x39b,0x3a4,0x363,0x315)](_0x286451[_0x4aad98(-0xc6,-0x9d,-0x15,-0xd4)],_0x286451['JoPlM']))eventSource[_0x4aad98(0x21,-0x2c,-0x19,-0x3d)+_0x22fae5(0x38f,0x3e6,0x43b,0x439)](EventType[_0x4aad98(0x23,-0x10a,-0x5a,-0x72)+_0x22fae5(0x364,0x3b8,0x33d,0x409)+'ST'],comfyuigenerate),LEGACY_EVENT_NAMES[_0x22fae5(0x411,0x48b,0x50b,0x474)](_0x157979=>{function _0x60c151(_0x40a5de,_0x2dcead,_0x4fbe8a,_0x154a6d){return _0x4aad98(_0x40a5de-0x9d,_0x40a5de,_0x2dcead-0x471,_0x154a6d-0x1dc);}function _0x4c277e(_0x366aa1,_0x4bfd0a,_0x40f8aa,_0x158f6d){return _0x22fae5(_0x40f8aa,_0x158f6d- -0x1ca,_0x40f8aa-0x100,_0x158f6d-0x162);}_0x286451['QOdGg']('epTDg',_0x286451[_0x60c151(0x42c,0x3a6,0x437,0x2fd)])?eventSource['removeList'+_0x4c277e(0x241,0x1a8,0x17d,0x21c)](_0x157979,comfyuigenerate):_0x3f916b=_0x9135e5(_0x5acef8);}),window[_0x4aad98(-0x177,-0x1ab,-0x144,-0x202)+_0x4aad98(-0x1ea,-0xa4,-0x15e,-0x94)+_0x22fae5(0x3d0,0x464,0x473,0x4d4)]=![],_0x286451[_0x22fae5(0x43f,0x3c6,0x3d2,0x412)](addLog,_0x286451[_0x22fae5(0x36f,0x3cf,0x422,0x393)]);else{const _0x11c65f=_0x22fae5(0x391,0x3ad,0x346,0x311)+_0x4aad98(-0x37,-0x9,-0xa6,-0x77)+_0x41ca88+_0x4aad98(-0x14,0x19,-0x54,0x5b)+_0x31d21a[_0x4aad98(-0x37,-0x106,-0xc4,-0x15d)];_0x286451[_0x4aad98(-0x16f,-0x1a7,-0x135,-0x1e7)](_0x462272,_0x22fae5(0x408,0x3a9,0x35b,0x452)+_0x11c65f),_0x460fe1[_0x4aad98(-0xd3,-0x105,-0xe1,-0x10f)](_0x286451[_0x4aad98(-0xc7,-0x1a7,-0x133,-0x10e)],_0x5a7de1);const _0x63f62a={};_0x63f62a['id']=_0x4e123c,_0x63f62a['success']=![],_0x63f62a[_0x22fae5(0x366,0x41a,0x40b,0x4c3)]=_0xfc3da1[_0x4aad98(-0x138,-0x92,-0xc4,-0x58)],_0x63f62a[_0x4aad98(-0x116,-0xb9,-0x164,-0x1d3)]=_0x2bf853,_0x4bfbbb[_0x22fae5(0x484,0x4a8,0x4dd,0x478)](_0x4d7e22[_0x4aad98(-0x1a,0x50,-0x5a,-0xaa)+_0x22fae5(0x2ee,0x35f,0x3d5,0x35d)+'NSE'],_0x63f62a);const _0x28a98c={};_0x28a98c['id']=_0x45c70c,_0x28a98c[_0x22fae5(0x4b5,0x433,0x4c4,0x41d)]=![],_0x28a98c[_0x22fae5(0x372,0x41a,0x351,0x497)]=_0x4629f1[_0x4aad98(-0xda,-0x6,-0xc4,-0xe7)],_0x28a98c['prompt']=_0x335ac4,_0xaedcc7['emit']('generate-i'+_0x22fae5(0x47a,0x46a,0x50d,0x467)+_0x4aad98(-0x1b0,-0x157,-0x119,-0xe0),_0x28a98c),_0x90913b(_0x22fae5(0x4bd,0x406,0x359,0x462)+_0x4aad98(-0x81,-0x178,-0xc6,-0x61)+_0x22ffff+')');}}}}