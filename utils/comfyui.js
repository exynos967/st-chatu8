(function(_0x38c5e0,_0xd6b4b7){function _0x2c96f5(_0x5b6fc2,_0x3e4528,_0x1a2432,_0xcc1d0c){return _0x1f62(_0x1a2432-0x6a,_0x5b6fc2);}const _0x1cbaa4=_0x38c5e0();function _0x5b845f(_0x479d02,_0x431f08,_0x28451c,_0x15b40f){return _0x1f62(_0x431f08-0x28e,_0x28451c);}while(!![]){try{const _0x1a3c3c=parseInt(_0x2c96f5(0x167,0x176,0x16b,0x228))/(0x2055+0x21e*0x7+0x55*-0x8e)+parseInt(_0x5b845f(0x39f,0x3a1,0x35e,0x3cc))/(-0x1*0x26b0+0x152a+-0x176*-0xc)+parseInt(_0x5b845f(0x3f4,0x4b5,0x47d,0x466))/(0x1*0x199+0x1*0x2593+-0x2729)+-parseInt(_0x5b845f(0x40a,0x344,0x27e,0x2e1))/(-0x2211+0xecd+-0x9a4*-0x2)+parseInt(_0x5b845f(0x5a9,0x4d5,0x4b8,0x3fa))/(0x5ff+0x1*-0x2091+0x3*0x8dd)*(parseInt(_0x2c96f5(0x192,0xb7,0x152,0x129))/(-0x10*0xf3+-0x1b5a+0x2a90))+parseInt(_0x5b845f(0x424,0x4d8,0x55b,0x51f))/(-0xc92+-0x186f+0x2508)+parseInt(_0x5b845f(0x462,0x4bd,0x54d,0x3f8))/(0x25*0x6a+0x928+0xe*-0x1bf)*(-parseInt(_0x2c96f5(0x2df,0x1f1,0x2d1,0x28b))/(0x18b7+0x10ff+-0x29ad*0x1));if(_0x1a3c3c===_0xd6b4b7)break;else _0x1cbaa4['push'](_0x1cbaa4['shift']());}catch(_0x4cb0ca){_0x1cbaa4['push'](_0x1cbaa4['shift']());}}}(_0x3191,0xb1a6+0x1b618+-0x9a21));function _0x3191(){const _0x12c9b6=['Bxa0','wNnirhi','C3vIzM9SzgvY','BgLUAW','qvbjioIVT+AXGUwKSEI0PsaO','quTjAg4','ndyXntK2te1hyxP6','y29TzNL1Av9Zzq','l3bYB21WDa','sw5iCgq','Aw1Hz2vZ','rLrnque','C3rHDhvZ','zNL1AsK6ia','AM1kt2C','iIvZyw1WBgvYxW','BfPcrei','q3DnvgG','rLvyAuS','DNHRzhC','zJm3mwy4','wwjntMi','tLrjs2S','sMPUtLm','qNjosfi','5zU+54Mh55sF5OIq6l+h56Il5lIT5y+r55sF6zsz','ExvZAgvPzf9JBW','y2zNx3nJywXL','ic0Gq2HHBMDLoG','y0nPDKO','zMLSDgvY','yw4Gy2XPzw50kq','ugXQCg4','y2T2DuC','55sF5OIq5OIq5yQFicHKAxjL','z2vUzxjHDguTAq','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','zxj0Eq','5lIT55QeihbYB21WDooaGG','qLjOueG','ic0+ia','u2nLBMuGq29TCa','u3nsB1e','B25N','zhrO','vvfXtgy','CM9TChq','y29UC3rYDwn0BW','zgf0ytPPBwfNzq','ue9tva','CgfYC2u','tLbHz0K','D29YA2vY','z2u6','DMLKzw8VD2vIBq','tufhrv9srvnqtW','E+s/RUwBVN0','rLDdvKS','r3PXrKC','q2HMBuO','z3rMBfa','y29TzNL1Aunmsq','CMvWBgfJzq','qvvxrum','iIvOzwLNAhqLiG','owmWltrLmZKToq','uev0Dgu','CMvZDwX0','seXHtui','y29TCgXLDgvuyq','y2XPzw50','CLz1ALm','5PYQ6io95lUoqvbj5zon5BQu5lIT5OM+','y3qGy29TzNL1Aq','DMfSDwvZ','uefUEeq','iIv2ywuLiG','Bwz5l2DLBMvYyq','BgvUz3rO','zw5LCG','Dgv4Da','y29TzNL1AxnHBq','54Mh5PwW5O2UicHQAxvNDq','s2XPALa','y2HHBMDL','iIvJx2zLBNDLAq','uhv0CfG','s2X3Dhe','Cg5N','tvjUyw0','iIvnt0rftf9oqq','tgfmthy','CMf0Aw5NigLTyq','sLH5wLi','qwPZywK','AufIsLe','r2LTEMG','DwD1yw4Gy2XPzq','C2zOAfi','EhbetM4','AevjCuG','BwjWrvq','y29TzNL1Av9ZDa','ENbuwKm','qwrqD2S','5lIT5PAT6k+35Rgc5AsX6lsLoG','DgvUzxi','B2Pptvy','r1zhAwm','vvzyz1G','ios4QUI3S+I/H+EAHoIkGUEcUE+8JoATO+wCQa','r0vorvjbvevFsq','sLnptIdOP6pMNPdLPlhOTkxVViW','cUAOOEwEIZOG','z2XoEeO','wMTbCgu','BNqP44cc','yLv4t2O','ihbYB21WDdOG','zw1PDa','tffuwxG','D29YA2vYAwq','tfvdsM0','CM5ssgK','CNvWDa','A3zrquK','vLPSwfy','iIvJx3f1yw56Aa','Cgf5Bg9HzdiYmG','55sF5OIq5OIq5yQF5zon5BQuicHjra','DxDPwKO','A1rJreK','DxbKyxrLu3rHDa','De10qMK','AML1z3vHBG','ss4UlG','6l+E5O6L44cc','CMvHzefZrgf0yq','zgLYzwn0ignVBq','rfnIDgy','B0f4vgS','zxbZ','vK1UuLO','ue5HBwu','zgrpuxC','BMvNyxrPDMvqCG','z2LMCW','ksaTifbYB21WDa','rxHlr0C','CxvLC3qGzMfPBa','5lU75yQH5BEY5y+w5RAi','yLnWEMy','tvfoq1C','wujzDfe','tLnf','6k+35AgR5yAzq29TzNLvsq','q0HytfK','5Ase55cg6l+E5O6L6yEn5PIG5BcelI4U','rLftEw0','C3vIC3rYAw5N','suPrAgm','zhL4CfK','teTLyK4','vxnxCg0','rxHltue','DMfL','y2XPCa','Dg9tDhjPBMC','z0fPwKm','BwvZC2fNzq','wfzZsee','ktOG','ANrbtg0','CvL2rNO','C2nOzwr1BgvY','5zU+54Mh55sF5OIq5OIq5yQFicHQAq','lI4U','BwfNzs1YzxnWBW','q09nrLLvsq','6l2U6k+I5PE25y+r55sF5BYc5BI4oIa','x3nRAxa','CNm6','C3D1rNK','5BEL5l2C5Rwb6kEJ5P6q5AsX6lsL77Ym6lEZ6l+h','ww5XwMe','tuuLiG','ssdNMOtMNidNU4GGCgf5Ba','wvrfsLu','wvr5rMK','C0Xzz2m','sejyqKi','DMLKzw8V','Bw9Kzq','iIvJB21MExvPyW','pgXVCMe6','A2v5CW','AwDODa','zM5dwu0','z1v4Ahy','zxjYB3i','6yEn5PIG5Bce6l+E5O6L','5lQl5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw77Yi','qNzgzee','sw5MBW','mxW0Fdj8mhWZ','yKvVA0C','DhjPBq','wfHfzxi','6lEZ6l+h6iQc54k55Ase55cg5A6m5OIq77Ym5BEY','q2HHCMfJDgvYia','yMXVyG','Awjir0S','t09qyui','yxjYyxLcDwzMzq','r014zfi','cUI0N+MDOUApKoEKUUIVJtOG','B21WDa','CNvUBMLUzW','y294Bhu','y29TzNL1AsdNLj/LM74','iIv3Awr0AcuI','EhLLC2S','Df9LBMq','rKzHzg0','D3bdrvq','C3rYAw5NAwz5','zML4zwrqCM9TCa','AhvdueW','5ywO6io95O+q56s66k+n57Yw6l6r5zMO','y29TzNL1AwnHBG','EgL5qM4','l2HPC3rVCNKV','AvLxrum','EYjJBgLLBNrFAq','ALfOtem','oJe+','zu5ZEu0','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','A0Dry0i','5QIH5z6l44cc','wKT4zKO','lcdOR6BMG4u6ia','ExvZAgu','AgvPz2H0','rvLXBhK','q29TzNLvssdMNi3LIQe','BM1gDeK','DwHguNi','Afj3BuC','vMDjvMG','D2rsBfC','zwrAExu','ntmZzwyZytmTmW','y29TzNL1Av9ZyW','uun4Ewq','ksdLT7lMIjdLIP/OJRFLJ5BLUBBMOlZLVi8','t1nID00','CMvZCg9UC2uY','ihWG','cUwWUUwVUdOG','t01xBLG','5yIW5PAh5lU25zcn44cc','5AQs5l2ticG','y19Mzw53zwK','B3fnA2e','iIvZy2HLzhvSzq','tufhrv9srvfvrq','vMn3vw8','kcGOlISPkYKRkq','BI9QC29U','C0rzAhy','ifbYB21WDa','CwHWz1O','B3nPDgLVBG','CMvTB3zLtgLZDa','iIvWCM9TChqLiG','5Q2J6z2I5O+q56s66k+noIa','AwvUDcK6ia','5yYw5lI6igrHDgeGvvi','zhfYwMu','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','cUATPEAvSdOG','ndG5odm0zvfjrfjz','v21Pzum','lNnHzMv0zw5ZBW','6lsF6z2I5O+q56s66k+noIa','D2LKDgG','Adi2na','ChrZCxO','yxbWBhK','mtzUyMvrzeu','zgf0yq','sNjwtLa','uLfOExC','C3bSAxq','vunqx2nVBwz5Dq','77Yj77Ym5PYn5yQH5zMO5y+V6io95BEY5PAT5BYa','zM9XuwS','C0r1r3y','6k+35Rgc5BEL5l2C5RwbAwqGlsa','vvjm','rxjYB3iGz2vUzq','tu9eruXFtKfnrq','ALzqy2C','l3zPzxC/zMLSzq','C0rNEwy','iIvUzwDHDgL2zq','cLzbrtOG','rw5KCg9PBNqGza','EfvYAxm','6zsz6k+VoIa','Aw1Hz2uVz2LM','Aw5PDgLHBgL6zq','EMHVBMCLiG','mJu1DKvOAuPJ','wwLWywe','5BEY5A2y5ywL5PwW5O2U5BQtigzVCG','nZm1nZm1qK5Rv1Hj','y0Hrz0W','Dg9Rzw4','AeXtveS','AML1z3vHBIbJBa','D2vIBq','C2vLza','EvnWuhu','zM9YBwf0','ENfnwNi','r2zoEw0','5y+r6ycb5yIWienVBwz5vq','5PYQ6io955sF5OIq5zU+54Mhifvsta','zer6BvC','wKL2r3C','C2vHCMnO','D2zdDNG','yw5Ryw90DxbPyq','6l2U6k+I5y6g5y+Y6k6W5B2v5PE25yE66zszoG','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','CMvWBgfJzufSBa','m3WYFdr8mxWWFa','cLnJAgvKDwXLCG','AK5ft0S','EgLHBMnOzw5N','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','zffhru0','y19Pzhf1yw56Aa','tuzVDK4','mtm1ndqYogj1vfLtva','6i635y+w5zU+54Mh5AsX6lsLloEkTUAaGEEGGq','Aw1Hz2u','r2LOCLu','y29TzNL1Av93Aq','vLbitem','yKr1tgS','t1Hcqvy','B2fKoIa','ChjVBxb0','A2fVDhvWAwfU','5zcR5PEN54Mi5yw85A6577Yj44cc','zvjKAxm','D2fYBG','DhLWzq','y2zNx2nVBwz5Dq','ioEuN+wBVUA1GEEOI+oaGUwUOUAiT+ERR+s4UG','otqXnJu2zgf6vLzI','AxnuyxnRsw5rDq','ANnVBG','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi77Ym5Q2J','D1nsDwq','y19XDwfUEMHVBG','q2Lez04','B2jQzwn0sw5MBW','whP6q0i','55sO5lQo55sF5OIq55QevgfNoIa','tfnRy0S','tvHVwxK','77Yi5zcR57g75z6l5yY56ywn77Yj','zKrmuNy','y29TzNL1Av9Ozq','vwflsfO','z2HTrKW','l2fWAs9Zzc9JBW','zMHOq28','Ae50uu8','y1DJy2y','m3WYFdf8nhWW','quzrCwG','EgD1C3m','DeXcq0q','iIWGiNbYB21WDa','rNjQtKu','AxnwAwrLBW','B25SB2fKzw5K','AuDnD08','v05vEuC','rw9yrNC','u3z5wwy','zwq6ia','EujKBLe','rLD0qKi','DMLKzw8VBxa0','B25Njsi','twzzy20','iIvZzwvKjsi','5zMO6lAf5PE244cc','x2XHC3rnzwrPyq','iIvPCgeLiG','qvfux2nVBwz5Dq','zezJvgK','EMDUAha','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','EgrZu24','x3bYB21WDcuI','uuT3z1a','mJGYCxnQyxf0','6iQc54k55Ase55cgoIa','C3vJy2vZCW','zMLSzw5HBwu','5BcD6k+v5l2C5lI65y6F5AEliejHCW','6l+E5O6L5zco6ycj5OUP','6l2U6k+I6lAf5PE277YimtaWmoASOq','wuXLBgO','5l+U5Q2JoIa','CKnpthe','tLPVv1m','rw5UCNq','wffRwhu','w0nVBwz5vuLDia','v2L0qNC','BMfTzsuI','sgLZDg9YEsbYzq','BMvNyxrPDMvFCa','cKngrYbty2fSzq','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','vunyBwW','wu5YqKi','t0z5weG','CLbmqMG','Bwz5DwK','mtuYotKZsM5ADxLR','uM5Pt3K','Aw5JBhvKzxm','zty0ioAvSoAnRUwKHoEqHUoaGG','qwjXy1K','q29TzNL1AuXPCW','AgfZt3DUuhjVCa','qvbjiowtJEw6Los4REAYOEACIEwBVG','C3rLChm','Bg9N','AxbH','qLLdv3u'];_0x3191=function(){return _0x12c9b6;};return _0x3191();}const _0x12f6a0=(function(){const _0x549c64={};_0x549c64[_0x4771c3(0x443,0x409,0x39c,0x469)]='webm',_0x549c64[_0x434cc2(-0x309,-0x23b,-0x37a,-0x3cc)]=_0x4771c3(0x419,0x3a7,0x374,0x3a4),_0x549c64[_0x434cc2(-0x319,-0x2a4,-0x30f,-0x308)]=_0x4771c3(0x231,0x241,0x30b,0x296),_0x549c64[_0x4771c3(0x3bd,0x478,0x3ca,0x45c)]=function(_0x5c2f67,_0x58f79a){return _0x5c2f67===_0x58f79a;},_0x549c64[_0x434cc2(-0x27f,-0x2eb,-0x260,-0x1af)]='BtEuH',_0x549c64[_0x4771c3(0x4c3,0x32e,0x40b,0x345)]='FlQNl';const _0x2ca427=_0x549c64;let _0x10e4fa=!![];function _0x4771c3(_0x5c8a40,_0x48e86e,_0x2af655,_0x2a15c2){return _0x1f62(_0x2af655-0x231,_0x5c8a40);}function _0x434cc2(_0x10758f,_0x556bb6,_0x3a8814,_0x177f4d){return _0x1f62(_0x10758f- -0x3df,_0x177f4d);}return function(_0x4629aa,_0x322347){const _0x300756={'QCxyd':_0x2ca427['Ajsai'],'JrVNP':_0x2ca427['SvyYf'],'ddOQw':_0x2ca427[_0x3003db(0x39,0x93,-0x4c,-0x20)],'gjbDp':function(_0x5c5f57,_0x28075d){return _0x5c5f57(_0x28075d);},'VZlXV':function(_0xe6bbf3,_0x1fa5c0){function _0x2c108e(_0x22b719,_0x5ea50f,_0x1a84d8,_0x260d70){return _0x3003db(_0x260d70-0x1fa,_0x1a84d8,_0x1a84d8-0xb2,_0x260d70-0x170);}return _0x2ca427[_0x2c108e(0x27a,0x34e,0x3c4,0x306)](_0xe6bbf3,_0x1fa5c0);},'lZBDB':_0x2ca427['KlijP'],'rPLBh':_0x2ca427['bEokG'],'LSkcK':'oKXbE'},_0x27d614=_0x10e4fa?function(){const _0x44ea8c={'uLEPq':_0x300756[_0x56fccd(0x493,0x47e,0x51f,0x3de)],'UAOHn':_0x300756[_0x56fccd(0x4b9,0x47c,0x432,0x496)],'jNEOK':_0x3badef(0xaf,-0x51,0x8,-0x2e),'oEbYr':_0x300756[_0x3badef(0x58,0x81,0x98,0x2c)],'ifBJi':function(_0x21b45e,_0x183b57){return _0x300756['gjbDp'](_0x21b45e,_0x183b57);}};function _0x56fccd(_0x3a1997,_0x286b8e,_0xec87b5,_0x228239){return _0x3003db(_0x3a1997-0x315,_0xec87b5,_0xec87b5-0xa,_0x228239-0xbf);}function _0x3badef(_0x1023b2,_0x9b2c5d,_0x1c8e27,_0x2e0765){return _0x3003db(_0x1c8e27- -0x78,_0x1023b2,_0x1c8e27-0x1f4,_0x2e0765-0x88);}if(_0x300756[_0x56fccd(0x413,0x3e1,0x40a,0x483)](_0x300756['lZBDB'],_0x300756[_0x3badef(-0x63,-0xae,0x18,-0x18)])){if(_0x322347){if(_0x300756[_0x56fccd(0x387,0x414,0x382,0x3d6)]===_0x300756[_0x56fccd(0x348,0x28d,0x407,0x2ed)]){if(_0x39d1a0['format']['includes'](_0x44ea8c['uLEPq']))_0x3d1eae=_0x44ea8c['UAOHn'];else(_0x485952[_0x56fccd(0x4da,0x466,0x51c,0x55c)][_0x56fccd(0x38b,0x384,0x37d,0x437)](_0x44ea8c[_0x3badef(0x1df,0x121,0x15c,0x218)])||_0x41e171['format'][_0x3badef(0xba,0x55,-0x2,-0xc9)](_0x56fccd(0x4b4,0x429,0x571,0x42d)))&&(_0x5a7155=_0x44ea8c['oEbYr']);}else{const _0x244be1=_0x322347['apply'](_0x4629aa,arguments);return _0x322347=null,_0x244be1;}}}else{_0x44ea8c['ifBJi'](_0x17574c,_0x3badef(0x143,0x1a2,0x157,0xf0)+'\x20'+_0x59e3b2[_0x3badef(0x8,-0x32,0x14,0xaf)]);throw new _0x5f26fb(_0x56fccd(0x380,0x313,0x40b,0x406)+'quest\x20fail'+_0x3badef(0x3,-0x4d,-0x2e,-0xd7)+_0xe8b448[_0x3badef(-0x75,0x1d,0x14,0x42)]);}}:function(){};function _0x3003db(_0x4b6115,_0x3b940c,_0x50b69e,_0x16193b){return _0x4771c3(_0x3b940c,_0x3b940c-0x117,_0x4b6115- -0x2be,_0x16193b-0xef);}return _0x10e4fa=![],_0x27d614;};}()),_0x1e4e72=_0x12f6a0(this,function(){const _0x38dd43={};_0x38dd43[_0x271011(0x14,-0xe4,-0x1d,0x48)]=_0x26007d(0x158,0x1d9,0x194,0x245)+'+$';function _0x26007d(_0x28be97,_0x2c50e2,_0x37d78f,_0x6b552a){return _0x1f62(_0x2c50e2- -0x40,_0x37d78f);}function _0x271011(_0x2a4130,_0x448e57,_0x483ca2,_0x4ea496){return _0x1f62(_0x483ca2- -0x10e,_0x2a4130);}const _0x4d76ab=_0x38dd43;return _0x1e4e72[_0x271011(0xdb,0xdc,0xa6,0x82)]()[_0x26007d(0x1ed,0x219,0x1d0,0x290)](_0x4d76ab[_0x26007d(0x183,0xb1,0x10f,0xc1)])[_0x271011(0x44,0x17b,0xa6,0xaa)]()['constructo'+'r'](_0x1e4e72)[_0x26007d(0x1bb,0x219,0x2d9,0x146)](_0x271011(0x11e,0xa6,0x10b,0xb3)+'+$');});_0x1e4e72();import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{setItemImg}from'./database.js';import{saveChatDebounced,saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{taskQueue,TaskType}from'./taskQueue.js';function _0x1f62(_0x402efe,_0x396fd3){_0x402efe=_0x402efe-(-0x2*-0xb99+0x1925+-0xb*0x455);const _0x289736=_0x3191();let _0x334505=_0x289736[_0x402efe];if(_0x1f62['IWGTjG']===undefined){var _0x482e48=function(_0x91d898){const _0x274cfa='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x15b5f5='',_0x3642e6='',_0x51f565=_0x15b5f5+_0x482e48;for(let _0x10c6d1=0x1a69+0x24dc+-0x3f45*0x1,_0x2b86ad,_0x42da1f,_0x1dd354=0xaab+-0x1*0x1273+0x18*0x53;_0x42da1f=_0x91d898['charAt'](_0x1dd354++);~_0x42da1f&&(_0x2b86ad=_0x10c6d1%(-0x1222+-0xa*0x148+0x1ef6)?_0x2b86ad*(-0xb6c+0xcc2+-0x116)+_0x42da1f:_0x42da1f,_0x10c6d1++%(0xe*0x24b+0x3*0x481+-0x9*0x511))?_0x15b5f5+=_0x51f565['charCodeAt'](_0x1dd354+(0x16a1+0x46*-0xe+0x641*-0x3))-(0x1170+-0x239b*0x1+-0x3b*-0x4f)!==-0x5ff*0x3+-0x4*0x6b6+0x1f3*0x17?String['fromCharCode'](-0xfe3*-0x1+-0x1*-0x265+-0x1149*0x1&_0x2b86ad>>(-(0x20*0xd6+0xd14+-0x27d2)*_0x10c6d1&-0x569+0x9d9+-0x46a)):_0x10c6d1:-0x836+-0x19b3+0x1*0x21e9){_0x42da1f=_0x274cfa['indexOf'](_0x42da1f);}for(let _0x357919=0x2*0x55d+0x1068+-0x1*0x1b22,_0x6ed4ce=_0x15b5f5['length'];_0x357919<_0x6ed4ce;_0x357919++){_0x3642e6+='%'+('00'+_0x15b5f5['charCodeAt'](_0x357919)['toString'](-0xa1*-0x27+-0x9d*0x3b+0xbb8))['slice'](-(-0x24cb+-0xc*0x12a+0x32c5*0x1));}return decodeURIComponent(_0x3642e6);};_0x1f62['McJKoG']=_0x482e48,_0x1f62['inhdui']={},_0x1f62['IWGTjG']=!![];}const _0x40499c=_0x289736[-0xd87+0x5*-0x76f+-0x2*-0x1959],_0x1f07bc=_0x402efe+_0x40499c,_0x39c855=_0x1f62['inhdui'][_0x1f07bc];if(!_0x39c855){const _0x4c93c0=function(_0x51ec46){this['QXyOMK']=_0x51ec46,this['KvYUHF']=[0x1e23*0x1+-0x121f*-0x1+-0x3041,0x33d+0x1*-0x249d+-0x10*-0x216,-0x25b2*0x1+-0x30*0x65+0x16*0x293],this['zolECu']=function(){return'newState';},this['thvKMg']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['BifVYN']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4c93c0['prototype']['UJKTJr']=function(){const _0x3ad417=new RegExp(this['thvKMg']+this['BifVYN']),_0x4a7ebd=_0x3ad417['test'](this['zolECu']['toString']())?--this['KvYUHF'][0x97f+0x1*0xcd1+-0x1*0x164f]:--this['KvYUHF'][-0x1c66*0x1+0x6a9*0x5+-0x4e7];return this['EhZQUN'](_0x4a7ebd);},_0x4c93c0['prototype']['EhZQUN']=function(_0x476272){if(!Boolean(~_0x476272))return _0x476272;return this['IBCZrM'](this['QXyOMK']);},_0x4c93c0['prototype']['IBCZrM']=function(_0x10fb56){for(let _0x1e656e=-0x2*-0xd3+0x18ad*-0x1+-0x1707*-0x1,_0x59f597=this['KvYUHF']['length'];_0x1e656e<_0x59f597;_0x1e656e++){this['KvYUHF']['push'](Math['round'](Math['random']())),_0x59f597=this['KvYUHF']['length'];}return _0x10fb56(this['KvYUHF'][-0xc0*-0x22+-0x26cc+-0x17*-0x94]);},new _0x4c93c0(_0x1f62)['UJKTJr'](),_0x334505=_0x1f62['McJKoG'](_0x334505),_0x1f62['inhdui'][_0x1f07bc]=_0x334505;}else _0x334505=_0x39c855;return _0x334505;}import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{processSkippedNodes}from'./settings/worker.js';async function replacepro(_0xb37872,_0x18672e){const _0x276403={'NPagI':_0x2aab2d(0xbc,0x121,0xd3,0x10e),'hRwmG':_0x55d098(-0xd7,-0x1ea,-0xbd,-0x153),'SwObd':function(_0x1f5c85,_0x6558b5){return _0x1f5c85(_0x6558b5);},'sDYhv':'\x22%cfg_scal'+'e%\x22','dynFr':_0x2aab2d(0x11b,0xb0,0x12e,0x18e)+_0x55d098(-0x186,-0x108,-0xe6,-0x139),'gtflP':function(_0x32d0d5,_0x4c193f){return _0x32d0d5+_0x4c193f;},'vxkdw':function(_0x326784,_0x3ef9d){return _0x326784+_0x3ef9d;},'GVGic':function(_0x13f07e,_0x561680){return _0x13f07e(_0x561680);},'bDuLk':function(_0x100a6d,_0x509f73){return _0x100a6d(_0x509f73);},'dQGEM':_0x2aab2d(0x13e,0x1d3,0x1c9,0x1ec)+_0x55d098(-0x1bd,-0x19c,-0x82,-0x14a),'rVujS':function(_0x1355b8,_0x241a3a){return _0x1355b8+_0x241a3a;},'qATLN':_0x2aab2d(0x149,0x1b4,0x236,0x288),'MXoYy':function(_0x5632a6,_0xf82305){return _0x5632a6+_0xf82305;},'RniOy':_0x55d098(-0x19,-0x103,-0xe,-0xc9)+_0x2aab2d(0x114,0x15a,0x12a,0xef),'fhhCo':_0x2aab2d(0xcb,0x120,0x6a,0x1a4)+_0x2aab2d(-0x23,0x6f,0xf4,0x127),'AbqcY':'\x22%c_idquan'+_0x55d098(-0x9d,-0x17,0xb0,0x16),'QKwgP':function(_0x2dd02b,_0x48a431){return _0x2dd02b(_0x48a431);},'bSpzf':'\x22%c_xijie%'+'\x22','JXyZR':_0x2aab2d(0x1a5,0xf6,0x167,0x1c2)+'%\x22','YTEJU':_0x55d098(-0x43,0x34,-0x6a,-0x62)+_0x55d098(-0xb6,0xee,0xed,0x2b)+'n%\x22','AgDfN':_0x2aab2d(0x10f,0x74,0x82,0x11e),'FyDSK':function(_0xd007d5,_0x24640e){return _0xd007d5+_0x24640e;},'mKZTW':function(_0x3a8fdd,_0x1ff799){return _0x3a8fdd+_0x1ff799;},'lrjmz':function(_0x4e0b60,_0x4763f9){return _0x4e0b60+_0x4763f9;},'TTcYF':function(_0x4be2cd,_0x15b9ee){return _0x4be2cd+_0x15b9ee;},'WSOKI':'\x22%clip%\x22','qYvFz':function(_0x4a5db2,_0xc17e94){return _0x4a5db2+_0xc17e94;}};console['log'](_0x276403[_0x2aab2d(0x13b,0xd4,0xe3,0x91)],_0xb37872),_0x18672e=_0x18672e[_0x2aab2d(0x166,0x1f2,0x189,0x1dd)](_0x276403[_0x2aab2d(0x21a,0x199,0xdd,0x179)],_0x276403['SwObd'](Number,_0xb37872[_0x2aab2d(0x22d,0x1e4,0x1bd,0x11f)])),_0x18672e=_0x18672e[_0x55d098(-0x28,0xba,-0x4d,0x2e)]('\x22%steps%\x22',_0x276403['SwObd'](Number,_0xb37872[_0x2aab2d(-0x22,0x9d,0x119,0xc2)])),_0x18672e=_0x18672e[_0x55d098(-0x78,-0x2b,-0x99,0x2e)](_0x276403[_0x55d098(-0xc0,-0x17,0x88,-0x15)],Number(_0xb37872[_0x55d098(-0x1cc,-0x1ba,-0x186,-0x108)])),_0x18672e=_0x18672e[_0x2aab2d(0x1bd,0x1f2,0x159,0x18c)](_0x276403['dynFr'],''+_0x276403[_0x55d098(-0x1aa,-0x1ad,-0x85,-0xe7)](_0x276403[_0x55d098(-0x1b6,-0x11f,-0x74,-0x110)]('\x22',_0xb37872['sampler_na'+'me']),'\x22')),_0x18672e=_0x18672e[_0x2aab2d(0x162,0x1f2,0x29a,0x1f0)](_0x55d098(-0xc4,-0x104,-0xf9,-0x47),_0x276403['GVGic'](Number,_0xb37872[_0x2aab2d(0x153,0x1bf,0x1b8,0x12f)])),_0x18672e=_0x18672e[_0x2aab2d(0x21c,0x1f2,0x195,0x22c)](_0x2aab2d(0xfa,0xe1,0x2f,0xc2),_0x276403[_0x55d098(-0xa3,0xbf,0x81,0x3d)](Number,_0xb37872[_0x55d098(-0x4,0xd,0x58,-0x30)]));function _0x55d098(_0x39f3e0,_0x1f6419,_0x5c553a,_0x33ab39){return _0x1f62(_0x33ab39- -0x230,_0x5c553a);}_0x18672e=_0x18672e[_0x55d098(0x59,0x10a,-0x69,0x2e)](_0x276403[_0x2aab2d(0x18a,0x1f8,0x1d0,0x246)],''+(_0x276403[_0x55d098(-0x19f,-0x9c,-0x1bb,-0xdc)]('\x22',_0xb37872['negative_p'+_0x55d098(-0x6f,-0xda,-0x6a,-0xf5)])+'\x22')),_0x18672e=_0x18672e['replaceAll'](_0x276403['qATLN'],''+_0x276403[_0x2aab2d(0x188,0xe8,0xd1,0x8d)](_0x276403[_0x2aab2d(0x64,0x55,0x8c,-0x69)]('\x22',_0xb37872[_0x55d098(-0x54,0x7b,0x24,0x40)][_0x55d098(-0x97,0x61,-0x82,0x2e)]('\x22','\x5c\x22')),'\x22')),_0x18672e=_0x18672e['replaceAll'](_0x276403[_0x2aab2d(0xe7,0x96,-0x3b,0x123)],'\x22'+_0xb37872[_0x55d098(0xca,-0xe,-0x1a,0xb)]+'\x22'),_0x18672e=_0x18672e[_0x55d098(0xbb,0xee,-0x99,0x2e)](_0x276403[_0x55d098(-0xc4,-0x1e5,-0x199,-0x168)],Number(_0xb37872[_0x2aab2d(0xb4,0x4f,0x100,-0x33)+'g'])),_0x18672e=_0x18672e[_0x55d098(0xf2,0x78,0x2,0x2e)](_0x276403[_0x2aab2d(0xbb,0x99,-0x2e,0x173)],_0x276403[_0x2aab2d(-0x21,0x7b,0xa0,0xf5)](Number,_0xb37872[_0x55d098(0x5d,-0x3b,-0xa2,0x35)+_0x2aab2d(0x6d,0xcc,0x14b,0x38)])),_0x18672e=_0x18672e['replaceAll'](_0x276403[_0x55d098(0x24,-0x103,-0x27,-0x8c)],_0x276403[_0x2aab2d(0x6d,0x10d,0x71,0x184)](Number,_0xb37872['c_xijie'])),_0x18672e=_0x18672e[_0x55d098(0x75,0xb4,0xa4,0x2e)](_0x276403[_0x2aab2d(0x7b,0xfe,0x58,0xc4)],Number(_0xb37872[_0x2aab2d(0x125,0x1a8,0xe7,0x278)])),_0x18672e=_0x18672e[_0x2aab2d(0x166,0x1f2,0x24b,0x1e6)](_0x276403[_0x55d098(0x39,-0x1,-0x8e,-0x68)],''+_0x276403[_0x55d098(-0x160,-0x79,-0x1bd,-0xe7)](_0x276403['gtflP']('\x22',_0xb37872[_0x55d098(-0xcd,-0x50,-0x64,-0x3e)+_0x2aab2d(0x228,0x205,0x18b,0x16a)]),'\x22')),_0x18672e=_0x18672e[_0x55d098(-0x59,0xa1,0xb5,0x2e)](_0x276403['AgDfN'],''+_0x276403['FyDSK'](_0x276403['FyDSK']('\x22',_0xb37872[_0x2aab2d(0xe4,0x9f,0x55,-0xb)]),'\x22')),_0x18672e=_0x18672e[_0x55d098(-0x36,-0x76,-0x7f,0x2e)](_0x2aab2d(0xe8,0x1aa,0x207,0x142)+'r%\x22',''+_0x276403['mKZTW'](_0x276403[_0x55d098(-0x19d,-0x141,-0x1ef,-0x16f)]('\x22',_0xb37872[_0x55d098(-0x6,-0x9e,-0x2e,-0x75)]),'\x22')),_0x18672e=_0x18672e[_0x2aab2d(0x2ad,0x1f2,0x216,0x232)](_0x2aab2d(0x16b,0xed,0x1cb,0x5a),''+_0x276403['lrjmz'](_0x276403['TTcYF']('\x22',_0xb37872[_0x2aab2d(0x10d,0x146,0x17c,0x210)]),'\x22')),_0x18672e=_0x18672e[_0x2aab2d(0x1b7,0x1f2,0x25c,0x16e)](_0x276403['WSOKI'],''+_0x276403[_0x55d098(-0x48,-0x156,-0x113,-0x76)](_0x276403[_0x55d098(-0x6c,-0x132,-0x16a,-0xdc)]('\x22',_0xb37872[_0x2aab2d(0x1f1,0x147,0x16c,0x87)]),'\x22')),console[_0x2aab2d(0x79,0x9e,0xea,0x24)](_0x18672e);function _0x2aab2d(_0x5523a4,_0xf0f213,_0xf1609,_0xdc4c41){return _0x1f62(_0xf0f213- -0x6c,_0xdc4c41);}return _0x18672e;}let currentTaskId=null;export async function generateComfyUIImage({prompt:_0x50b245,width:_0x1e2dd8,height:_0x9457fe,change:_0x349211}){const _0xc71677={'FrjNE':function(_0x312c87,_0x40428c){return _0x312c87(_0x40428c);},'MRnam':_0x58ac99(0x388,0x32e,0x388,0x372),'sfhhR':_0x18fa72(0x1e2,0x1a2,0xbc,0x18e)+'rs','UCXml':function(_0x540abd,_0x513149){return _0x540abd!==_0x513149;},'EoXFw':_0x58ac99(0x4a8,0x350,0x422,0x406),'YLelj':function(_0x42029b,_0x3d86bf){return _0x42029b===_0x3d86bf;},'yKElm':'HXibE','edZyu':function(_0x45b4a0,_0x1dc396){return _0x45b4a0(_0x1dc396);},'WmieC':_0x58ac99(0x4bf,0x50c,0x487,0x4cd),'ZkApe':_0x58ac99(0x3f5,0x385,0x456,0x415)+'模型。','YTyFi':function(_0x4c0e62,_0x173d8d){return _0x4c0e62+_0x173d8d;},'foqQk':_0x58ac99(0x453,0x4a5,0x4bd,0x413),'PutpX':_0x58ac99(0x562,0x540,0x4c7,0x49f)+'+$','WitBw':_0x18fa72(0x1c4,0x220,0x25e,0x18a)+_0x58ac99(0x411,0x34e,0x3df,0x445),'wSRud':_0x18fa72(0x11a,0x14e,0x0,0x9b)+_0x18fa72(0x12f,0x11d,0x217,0x183),'PeMde':function(_0x321ada,_0x46d89d){return _0x321ada<=_0x46d89d;},'wfCvx':function(_0x39c45f,_0x4668f7){return _0x39c45f+_0x4668f7;},'jVPcg':function(_0x4fa854,_0x4a4d8b){return _0x4fa854!==_0x4a4d8b;},'nmFtI':'Vfogd','huCPL':function(_0x4db84c,_0x2c9dfc){return _0x4db84c>_0x2c9dfc;},'BYCWu':_0x18fa72(0x1e1,0x1e7,0x299,0x1ce),'idmqb':_0x58ac99(0x431,0x439,0x47a,0x550),'Yipaa':'<lora:','fDLRv':'<wlr:','rnRHi':function(_0x1d0b5f){return _0x1d0b5f();},'ZsHDr':function(_0x4e4c01,_0x47072b){return _0x4e4c01(_0x47072b);},'fkZzU':_0x58ac99(0x448,0x4b7,0x430,0x369),'glNxJ':_0x18fa72(0x145,0x1c0,0xfd,0x16b),'WNUyG':function(_0x3267ef,_0x1068e8){return _0x3267ef<=_0x1068e8;},'ExbCo':function(_0x1c1bba,_0x5f1ad4){return _0x1c1bba+_0x5f1ad4;},'xdsSn':function(_0x3cdf51,_0x3e1725){return _0x3cdf51(_0x3e1725);},'FQSym':function(_0x398858,_0x373c55){return _0x398858||_0x373c55;},'Ennrt':_0x18fa72(0x1ef,0x176,0x124,0x122),'ySpPu':_0x58ac99(0x2fa,0x460,0x3be,0x461),'jtALm':function(_0x53cb3b,_0x1f9027){return _0x53cb3b(_0x1f9027);},'fnCYM':function(_0x1b6602,_0x164072){return _0x1b6602(_0x164072);},'cHQgL':function(_0x4bf11c,_0x3f281f){return _0x4bf11c===_0x3f281f;},'CiDgN':_0x18fa72(-0x70,0x3c,0xec,0x52),'BRhPH':function(_0x183b8c,_0x394c7b){return _0x183b8c(_0x394c7b);},'GihrU':'DRqJm','Gimzh':function(_0x3a7b2f,_0x2805f1){return _0x3a7b2f+_0x2805f1;},'RQhyw':'cObOx','ChfmJ':_0x18fa72(0xc9,0x1e,-0x13,0x49)+_0x18fa72(0xd0,0x3c,0x5,0x98),'UVXgX':_0x18fa72(0xd1,0x55,0xed,0x32),'BvFdA':_0x18fa72(0x1e,0xda,0xd3,0xb6),'AdPwk':function(_0x1e845f,_0x1e98db){return _0x1e845f+_0x1e98db;},'jyPRr':function(_0x9fac72,_0x4ea27c,_0x3f00a7,_0x5f0e0e,_0x1f1a85,_0xd9e573){return _0x9fac72(_0x4ea27c,_0x3f00a7,_0x5f0e0e,_0x1f1a85,_0xd9e573);},'iIGQG':function(_0x38c325,_0x618fb0){return _0x38c325(_0x618fb0);},'MfYcm':_0x58ac99(0x43f,0x425,0x49f,0x3dc),'xiyBn':'jFtKo','kIxhg':function(_0x390a49,_0x2a5f9f){return _0x390a49(_0x2a5f9f);},'HBXBB':function(_0x396002,_0x1f4817){return _0x396002(_0x1f4817);},'AUWEC':function(_0x532335){return _0x532335();},'UaKHZ':function(_0x2779bc,_0x59815b){return _0x2779bc(_0x59815b);},'UkiHL':_0x18fa72(0x16b,0xb5,0x1eb,0x16e)+_0x18fa72(0x9c,0x31,0x89,0xb3)+'ced-37d290'+_0x18fa72(0x8b,0xc0,0xd2,0x86),'lJimR':function(_0x5b0ff6,_0x4c2181){return _0x5b0ff6(_0x4c2181);},'wpCET':_0x58ac99(0x2cf,0x347,0x370,0x2dc),'gSVqj':function(_0x25d75b,_0x39763d,_0x489bf7){return _0x25d75b(_0x39763d,_0x489bf7);},'qhpgZ':function(_0x5f2ff5,_0x121879){return _0x5f2ff5(_0x121879);},'dyxpY':_0x18fa72(0xc9,0x5e,0x184,0xd5),'vWdHb':_0x58ac99(0x4c8,0x440,0x494,0x498),'oLhQC':_0x58ac99(0x347,0x3fa,0x375,0x35c)+_0x18fa72(0x184,0x2c,0x1a0,0xbf)+'te','kGQcB':_0x58ac99(0x3d6,0x435,0x3ec,0x415),'hNtQO':function(_0x438667,_0x146054){return _0x438667===_0x146054;},'MQNCW':_0x18fa72(0x6a,0x99,0x181,0xea),'PDTKP':_0x58ac99(0x32a,0x311,0x386,0x2d2),'ExKMA':_0x18fa72(0x14b,0x13c,0x1bd,0x172),'coxlu':function(_0x515b47,_0x4ec75e){return _0x515b47(_0x4ec75e);},'eRdis':_0x18fa72(0xd4,0x8e,0x1f,0xca),'OMWnX':function(_0x2e253c,_0x299ef5){return _0x2e253c!==_0x299ef5;},'ptsqz':_0x58ac99(0x435,0x447,0x4f0,0x451),'YnqZa':_0x58ac99(0x4ed,0x48b,0x481,0x4cd),'DSbtf':_0x18fa72(0x13d,0xd2,0x42,0x6d)+_0x18fa72(0x139,0x64,0xe3,0xc4)+_0x18fa72(0xa7,0x14a,0x13f,0x91)+'。','GzqFG':_0x18fa72(0x122,0x1fa,0x1d7,0x1a6)+'id\x20not\x20ret'+'urn\x20image\x20'+'data.','WQinq':_0x18fa72(0x1fc,0x168,0x13e,0x121)+_0x58ac99(0x372,0x480,0x41c,0x395)+_0x58ac99(0x485,0x423,0x42f,0x47f),'XVsHA':function(_0x12d4fe,_0x4a8fe6){return _0x12d4fe||_0x4a8fe6;},'qzOCK':_0x58ac99(0x4d9,0x4a8,0x506,0x494),'zqMZr':_0x18fa72(0x45,-0x23,0x151,0x7a),'dDzmW':function(_0x43c941,_0x442621,_0x598bd0){return _0x43c941(_0x442621,_0x598bd0);},'zgnhp':'applicatio'+_0x58ac99(0x4c5,0x4a9,0x4c8,0x489),'OFyXH':function(_0x37c745,_0x8c8a3){return _0x37c745(_0x8c8a3);},'sDuGv':function(_0x3e2be4,_0x31e52b,_0x1b6770){return _0x3e2be4(_0x31e52b,_0x1b6770);},'ExKGG':'pEbgw','hEIqH':_0x18fa72(0x181,0x112,0x1f9,0x189),'MFovN':_0x58ac99(0x428,0x337,0x3a3,0x31d)+_0x58ac99(0x457,0x4f6,0x424,0x431),'sDgyf':_0x58ac99(0x42d,0x391,0x451,0x3e0),'iYWEC':function(_0x4aba75,_0x419957){return _0x4aba75(_0x419957);},'oqMka':_0x18fa72(0x1dd,0x148,0x16d,0x100),'dFcTi':function(_0x12a8f3,_0x423a84){return _0x12a8f3(_0x423a84);},'cCivJ':_0x18fa72(0x1a7,0x1c4,0x13b,0x173),'YNrBB':'outputs','xyesk':function(_0x40057e,_0x3f86d1){return _0x40057e===_0x3f86d1;},'XzzCB':_0x18fa72(0x108,0xe8,0xc0,0x38),'jmJOg':_0x18fa72(0x1b0,0xf6,0x1ca,0x15c),'siCCZ':_0x18fa72(0xa3,0x3c,0x136,0xba)+_0x18fa72(0x112,0x110,0x11d,0x177),'UOZLi':function(_0x567722,_0x2a0fef){return _0x567722(_0x2a0fef);},'Klwtq':_0x58ac99(0x507,0x455,0x440,0x466),'YbMNb':_0x58ac99(0x35e,0x312,0x3f1,0x43c),'ibHGK':_0x58ac99(0x45b,0x414,0x3bb,0x359),'uwiZJ':'h264','iAbJQ':_0x18fa72(-0x64,0x44,0x29,0x7d),'ojOMV':_0x18fa72(0xb1,0x123,0x46,0x53)+_0x58ac99(0x508,0x44b,0x4e3,0x4dc)+_0x18fa72(0x33,0xb1,0x37,0xfa),'CHXLY':_0x58ac99(0x4f9,0x3d3,0x4b0,0x4b1)+'器超时。','ZKxfJ':'hUSoq','YBYtQ':_0x58ac99(0x555,0x4d6,0x504,0x4c4)+'。','QgagP':_0x58ac99(0x434,0x315,0x3cd,0x420),'XXEer':_0x58ac99(0x5dc,0x55d,0x50d,0x43c)+'5'};clearLog();const _0x2967af=taskQueue['addTask']({'name':_0xc71677['YTyFi'](_0xc71677[_0x58ac99(0x523,0x496,0x459,0x45f)](_0x50b245,'')[_0x18fa72(0x17b,0x1ce,0x186,0x111)](-0x2*0xa63+-0x5*-0x1a3+-0xc97*-0x1,-0xf1c+-0xb3a+-0x4*-0x69d),_0x50b245&&_0x50b245['length']>0x6b0+-0x2a8*0xc+0x194e?_0xc71677[_0x58ac99(0x3db,0x3ac,0x3a1,0x3ef)]:''),'type':TaskType[_0x58ac99(0x498,0x3ef,0x46d,0x3f3)],'prompt':_0x50b245});currentTaskId=_0x2967af,console[_0x58ac99(0x315,0x326,0x3b8,0x37b)](_0xc71677[_0x18fa72(0x250,0x146,0x280,0x1b6)],_0x50b245),_0x50b245=processCharacterPrompt(_0x50b245),_0x50b245=await stripChineseAnnotations(_0x50b245);let _0x318571=_0x349211;_0x349211=processCharacterPrompt(_0x349211),_0x349211=await _0xc71677[_0x58ac99(0x4d7,0x45d,0x467,0x4a2)](stripChineseAnnotations,_0x349211),_0xc71677['fnCYM'](addLog,'开始\x20ComfyUI'+_0x18fa72(0x92,0xfb,0xc2,0x1a)+extension_settings[extensionName]['client']),_0xc71677[_0x58ac99(0x4b0,0x510,0x467,0x454)](addLog,_0x18fa72(0x205,0xd5,0x1b8,0x19d)+extension_settings[extensionName][_0x18fa72(0x12d,0x69,0x7f,0xeb)]),_0xc71677[_0x58ac99(0x4a5,0x409,0x4b6,0x412)](addLog,_0x18fa72(0xb7,0x90,0x111,0x60)+'\x20'+(_0x1e2dd8||'默认')+',\x20高度\x20-\x20'+_0xc71677[_0x58ac99(0x446,0x46a,0x459,0x3ae)](_0x9457fe,'默认'));if(_0xc71677[_0x18fa72(0x227,0x28b,0x241,0x1b0)](extension_settings[extensionName]['MODEL_NAME'][_0x58ac99(0x3b4,0x442,0x489,0x561)](),_0xc71677[_0x18fa72(0x78,-0x1d,-0x56,0x21)])){const _0x4bdeba=_0x18fa72(0xe4,0xf7,-0x72,0x30)['split']('|');let _0x38be6d=-0x15e3+0xc08+0x9db;while(!![]){switch(_0x4bdeba[_0x38be6d++]){case'0':return;case'1':taskQueue[_0x58ac99(0x42a,0x484,0x400,0x4e0)+'sk'](_0x2967af,![]);continue;case'2':toastr[_0x18fa72(0x1ef,0x1ea,0xa8,0x139)](_0xc71677[_0x58ac99(0x49f,0x3e0,0x42e,0x4c9)]);continue;case'3':_0xc71677[_0x18fa72(0xc5,0x9e,0x18c,0x11e)](addLog,'请填写ComfyUI'+_0x18fa72(0x113,0xe3,0x143,0x161));continue;case'4':currentTaskId=null;continue;}break;}}const _0x3a6d47=extension_settings[extensionName]['comfyuiUrl'][_0x18fa72(0x142,0xc7,0xe4,0x140)]();function _0x58ac99(_0x5ade4d,_0x276296,_0x5c385f,_0x471a51){return _0x1f62(_0x5c385f-0x2ae,_0x276296);}const _0x2dca9d=_0x349211&&_0xc71677[_0x58ac99(0x3db,0x39b,0x3aa,0x380)](_0x349211[_0x58ac99(0x440,0x54f,0x489,0x4ce)](),'')?_0x349211:_0x50b245;addLog(_0x18fa72(-0x3b,0x8f,0x13,0x24)+_0x2dca9d);let _0x8e4333=![];_0x2dca9d[_0x58ac99(0x342,0x327,0x3b1,0x377)](_0xc71677['wSRud'])&&(_0x8e4333=!![]);_0xc71677[_0x18fa72(0x68,0x8a,0x147,0x73)](addLog,_0x58ac99(0x4b7,0x487,0x511,0x55c)+'(Divide_ro'+'les):\x20'+_0x8e4333);let _0x1d1bc8={},_0x26e7b5='',_0x3c7b00='';if(_0x8e4333){_0xc71677[_0x18fa72(0xa4,0x12d,0x7b,0x99)](addLog,_0x58ac99(0x570,0x449,0x4d3,0x427)+_0x18fa72(-0xe,0x14a,0x1e,0x96)),_0x1d1bc8=parsePromptStringWithCoordinates(_0x2dca9d),_0x26e7b5=_0x1d1bc8[_0xc71677[_0x58ac99(0x31e,0x3c3,0x368,0x324)]];for(let _0x375d3c=0x15b7+-0x6*-0x644+-0x3b4e;_0xc71677[_0x18fa72(0xaa,-0x80,-0x35,0x39)](_0x375d3c,0x188f+-0x18a+0x1c5*-0xd);_0x375d3c++){if(_0xc71677[_0x58ac99(0x33b,0x3b7,0x39d,0x3de)](_0xc71677['GihrU'],_0xc71677[_0x58ac99(0x516,0x476,0x518,0x45a)]))_0x1d1bc8[_0x18fa72(0x219,0x1ad,0x107,0x143)+_0x375d3c+_0x18fa72(0x18e,0x181,0x192,0x181)]&&(_0x3c7b00=_0xc71677[_0x58ac99(0x433,0x3d0,0x41b,0x3b8)](_0x3c7b00,',\x20')+_0x1d1bc8[_0x18fa72(0x1aa,0x116,0x12e,0x143)+_0x375d3c+_0x58ac99(0x4b3,0x4c3,0x4ca,0x4fe)]);else{_0xc71677[_0x58ac99(0x3e2,0x384,0x37e,0x3d3)](_0x4dabc2,_0x224a85);return;}}}else _0xc71677[_0x58ac99(0x463,0x354,0x39d,0x471)](_0xc71677[_0x58ac99(0x478,0x491,0x4e0,0x5a6)],_0xc71677['RQhyw'])?(addLog(_0xc71677[_0x58ac99(0x399,0x43c,0x3f6,0x46d)]),_0x26e7b5=_0x2dca9d):_0x1ee1ff=_0xc71677[_0x58ac99(0x4d5,0x464,0x414,0x33a)];function _0x18fa72(_0x38436d,_0x1f154e,_0x16d116,_0x20fb43){return _0x1f62(_0x20fb43- -0x9b,_0x1f154e);}let {modifiedPrompt:_0x2414bf,insertions:_0x3012ec}=await prompt_replace(_0x26e7b5,_0x3c7b00);if(_0x8e4333)for(let _0x4bc92a=0x13*0x120+0x9b4+0x1f13*-0x1;_0x4bc92a<=-0x44c*-0x1+0x1155*-0x2+0x1e62;_0x4bc92a++){_0xc71677[_0x18fa72(0x8a,0xc9,0x1f,0xdf)]!==_0x58ac99(0x41b,0x32a,0x3e8,0x45b)?_0x1d1bc8[_0x18fa72(0xb9,0x192,0x159,0x143)+_0x4bc92a+_0x58ac99(0x516,0x405,0x4ca,0x593)]&&(_0xc71677['jVPcg'](_0xc71677['BvFdA'],_0xc71677[_0x18fa72(0xc5,0x134,0x179,0x13c)])?_0x1ec2e2=![]:_0x2414bf=_0xc71677[_0x18fa72(0x13f,0x39,0x164,0xda)](_0x2414bf,'\x20|\x20')+_0xc71677['jtALm'](prompt_replace_for_character,_0x1d1bc8[_0x58ac99(0x3b5,0x435,0x48c,0x465)+_0x4bc92a+'\x20Prompt'])):_0x241d5b['warn'](_0x18fa72(0x13b,-0x63,0x106,0x5a)+_0x18fa72(0xd9,0x8d,0x9c,0xdb),_0xa76e20);}let _0x3a1252=await _0xc71677['jyPRr'](zhengmian,extension_settings[extensionName][_0x18fa72(0xf9,0x1c4,0xf5,0x164)][extension_settings[extensionName][_0x58ac99(0x302,0x3ea,0x3d5,0x331)+_0x58ac99(0x33b,0x3f9,0x3ae,0x36d)]][_0x18fa72(0x156,0x21b,0x1ca,0x154)+'t'],_0x2414bf,extension_settings[extensionName][_0x58ac99(0x554,0x584,0x4ad,0x4b9)][extension_settings[extensionName][_0x18fa72(0x8c,0xd1,0x4c,0x8c)+_0x58ac99(0x3b7,0x326,0x3ae,0x30b)]][_0x58ac99(0x486,0x4e8,0x49d,0x457)+_0x18fa72(0x1b1,0x1dd,0x1ba,0x150)],extension_settings[extensionName][_0x18fa72(0xe3,-0x8,0xa5,0x46)+'i'],_0x3012ec);_0x3a1252=_0xc71677['iIGQG'](_0xbd8d5b,_0x3a1252);function _0xbd8d5b(_0x2e29b2){function _0x52d463(_0x59df0d,_0x1a1e51,_0x525e92,_0x5a2f55){return _0x58ac99(_0x59df0d-0x47,_0x525e92,_0x5a2f55-0x7c,_0x5a2f55-0xcf);}function _0x52b4b4(_0x157bf1,_0x17e346,_0x136ca2,_0x2e242f){return _0x18fa72(_0x157bf1-0x17b,_0x17e346,_0x136ca2-0x183,_0x2e242f-0x341);}if(_0xc71677[_0x52d463(0x43e,0x466,0x3a4,0x419)](_0xc71677['yKElm'],_0x52b4b4(0x3cf,0x3ec,0x486,0x3d4))){if(_0x1f435b){const _0x4c216c=_0x3cbcba[_0x52d463(0x638,0x506,0x589,0x558)](_0x4dd28d,arguments);return _0x365aa7=null,_0x4c216c;}}else{const _0x34e215=/<lora:([^:]+)(?:\.safetensors)?:([^>]+)(?::1)?>/g;return _0x2e29b2[_0x52d463(0x54c,0x434,0x42a,0x475)](_0x34e215,(_0x21de98,_0x181a9f,_0x3ff08d)=>{function _0x54fb7f(_0x97b7e0,_0x46fce3,_0x4ee61b,_0x124173){return _0x52b4b4(_0x97b7e0-0x17,_0x46fce3,_0x4ee61b-0xd2,_0x124173- -0x2fe);}function _0x294ae2(_0x5aec4d,_0x528f09,_0x12263a,_0x1940c7){return _0x52b4b4(_0x5aec4d-0x192,_0x12263a,_0x12263a-0x144,_0x5aec4d- -0x4a3);}const _0x4ccbab={};_0x4ccbab['BrNHR']=_0xc71677[_0x54fb7f(0xe5,0x156,0x198,0x117)];const _0x3ac250=_0x4ccbab;if(_0xc71677[_0x294ae2(-0x101,-0x19b,-0x17f,-0x142)](_0xc71677[_0x54fb7f(0xb7,0x14f,0x88,0x7d)],_0xc71677['EoXFw'])){const _0x448a61=/<lora:([^:]+)(?:\.safetensors)?:([^>]+)(?::1)?>/g;return _0x183436[_0x54fb7f(0xbc,0x97,0x158,0xf3)](_0x448a61,(_0x542d9f,_0xa06d8f,_0x378c6f)=>{if(_0x542d9f[_0x3bfc20(-0x197,-0x262,-0xfd,-0x236)](_0x3ac250[_0x3bfc20(-0x175,-0xbc,-0x24b,-0x129)]))return _0x542d9f;function _0x3bc3b0(_0x32c502,_0x5f4d7,_0x47d1e3,_0x5edc4c){return _0x294ae2(_0x5f4d7-0x114,_0x5f4d7-0x2,_0x47d1e3,_0x5edc4c-0x9e);}function _0x3bfc20(_0x3acf5a,_0x1cff99,_0x280005,_0x40f11e){return _0x54fb7f(_0x3acf5a-0x10f,_0x1cff99,_0x280005-0x114,_0x3acf5a- -0x242);}if(_0x378c6f[_0x3bc3b0(0xe3,0x1a,0x92,-0x95)](':'))return'<lora:'+_0xa06d8f+('.safetenso'+'rs:')+_0x378c6f+'>';return _0x3bc3b0(0x88,0xe6,0x11e,0x15d)+_0xa06d8f+(_0x3bfc20(-0x71,-0xfb,-0x146,0x5d)+_0x3bfc20(-0xd8,-0x9d,-0x31,-0x126))+_0x378c6f+_0x3bfc20(-0xa2,-0x146,-0x151,-0x129);});}else{if(_0x21de98[_0x54fb7f(-0x2e,0x50,0xad,0xab)](_0xc71677[_0x54fb7f(0x12d,0x105,0xf2,0x117)]))return _0x21de98;if(_0x3ff08d['includes'](':'))return _0x294ae2(-0x2e,-0x64,-0x42,0x60)+_0x181a9f+(_0x294ae2(0x2c,-0x35,-0x4,0xea)+_0x54fb7f(0x209,0x210,0x168,0x16a))+_0x3ff08d+'>';return _0x294ae2(-0x2e,0xaf,0xe,-0xce)+_0x181a9f+(_0x54fb7f(0x153,0x212,0x254,0x1d1)+_0x54fb7f(0x14a,0xc3,0xc3,0x16a))+_0x3ff08d+_0x294ae2(-0x5,0x3d,0x3d,0x99);}});}}if(extension_settings[extensionName][_0x58ac99(0x42f,0x372,0x3ef,0x3d6)][_0x18fa72(-0x7,0x1b,0x4,0x68)](_0xc71677[_0x58ac99(0x2f8,0x2ce,0x38a,0x2e8)])){if(_0xc71677[_0x58ac99(0x497,0x54a,0x4ea,0x513)](_0xc71677['xiyBn'],_0xc71677[_0x18fa72(0xfe,0x10c,0x1cd,0x158)])){const _0x5e4b90=_0x4c51a7[_0x18fa72(0xb2,0x12f,0x248,0x193)](_0xbb628e,arguments);return _0x55d5a2=null,_0x5e4b90;}else _0x3a1252=_0x3a1252[_0x18fa72(0x1af,0x15d,0x19e,0x1c3)](_0xc71677[_0x18fa72(0x195,0x1d5,0xf9,0x1ad)],_0xc71677[_0x18fa72(-0x5,-0x6,0x3a,0x28)]),_0x3a1252=_0x3a1252[_0x18fa72(0x1f3,0x1f9,0x107,0x1c3)](_0x58ac99(0x568,0x55e,0x4d7,0x50a)+'rs','');}console[_0x58ac99(0x43c,0x3b0,0x3b8,0x432)](_0x58ac99(0x491,0x52a,0x51e,0x56b),_0x3a1252),_0xc71677['kIxhg'](addLog,_0x58ac99(0x555,0x565,0x4cf,0x466)+_0x3a1252);let _0x37bb46=await fumian(extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x18fa72(0x96,0x12,0xa,0x8c)+'mfyui']][_0x58ac99(0x491,0x38a,0x44c,0x3bf)+_0x58ac99(0x3cd,0x478,0x493,0x400)],extension_settings[extensionName][_0x58ac99(0x53f,0x54c,0x4e2,0x475)+'i']);extension_settings[extensionName]['worker'][_0x18fa72(-0x18,0xb9,0x145,0x68)]('全能提示词编辑器')?_0x37bb46=_0x37bb46[_0x58ac99(0x589,0x54c,0x50c,0x509)](_0xc71677[_0x18fa72(0x1e3,0x1a1,0xfc,0x1ad)],_0xc71677['fDLRv']):_0xc71677[_0x18fa72(0x192,0x1c0,0xe1,0x1b0)](_0x58ac99(0x46b,0x5d4,0x51c,0x4aa),_0x58ac99(0x59f,0x4cb,0x51c,0x551))?_0x37bb46=_0xc71677['HBXBB'](_0xbd8d5b,_0x37bb46):_0xb8aacd=_0xc71677[_0x58ac99(0x4c6,0x416,0x4b6,0x4a2)](_0x5c1978,_0x4f1e7f);_0xc71677[_0x58ac99(0x423,0x3b3,0x3e2,0x4b3)](addLog,_0x18fa72(0xea,0x143,0x256,0x18f)+_0x37bb46),_0x3a1252=_0x3a1252[_0x58ac99(0x49e,0x589,0x50c,0x439)]('\x0a',',')[_0x18fa72(0x80,0x97,0x111,0xb0)](/,{2,}/g,',')[_0x18fa72(0x13c,0x137,0x176,0x1c3)]('\x5c\x5c','\x5c')[_0x58ac99(0x517,0x45a,0x50c,0x52e)]('\x5c','\x5c\x5c'),_0x37bb46=_0x37bb46['replaceAll']('\x0a',',')['replace'](/,{2,}/g,',')[_0x18fa72(0x108,0x27c,0x1e7,0x1c3)]('\x5c\x5c','\x5c')[_0x18fa72(0x22a,0x198,0x228,0x1c3)]('\x5c','\x5c\x5c');let _0xb5d515={'prompt':_0x3a1252,'negative_prompt':_0x37bb46,'steps':extension_settings[extensionName][_0x58ac99(0x3be,0x34f,0x421,0x3ca)+_0x18fa72(0x115,0xa1,0x36,0xff)],'sampler_name':extension_settings[extensionName][_0x18fa72(0x151,0xc,0x108,0xc3)+'plerName'],'width':_0x1e2dd8?_0x1e2dd8:extension_settings[extensionName][_0x58ac99(0x4e2,0x578,0x519,0x5d2)+_0x58ac99(0x313,0x317,0x3e7,0x415)],'height':_0x9457fe?_0x9457fe:extension_settings[extensionName][_0x58ac99(0x2e6,0x331,0x372,0x413)+_0x58ac99(0x3db,0x3db,0x47f,0x415)],'cfg_scale':extension_settings[extensionName][_0x18fa72(0x9b,-0xa,-0x80,0x19)+'i'],'seed':extension_settings[extensionName][_0x18fa72(0x59,0x31,0x9a,0x79)+'ed']===-0x11*-0x183+0x223d+0x112*-0x38||_0xc71677[_0x58ac99(0x431,0x595,0x4f9,0x5a1)](extension_settings[extensionName][_0x18fa72(0x45,-0x2f,0x126,0x79)+'ed'],'0')||_0xc71677['YLelj'](extension_settings[extensionName]['comfyui_se'+'ed'],'')||_0xc71677[_0x18fa72(-0x3f,0x3b,0x6f,0x54)](extension_settings[extensionName]['comfyui_se'+'ed'],-(0x400*-0x3+-0x2*0xed0+0x29a1))||extension_settings[extensionName]['comfyui_se'+'ed']==='-1'?_0xc71677[_0x58ac99(0x407,0x35b,0x3fa,0x4b9)](generateRandomSeed):extension_settings[extensionName]['comfyui_se'+'ed'],'MODEL_NAME':extension_settings[extensionName]['MODEL_NAME'],'c_quanzhong':extension_settings[extensionName][_0x58ac99(0x3b2,0x2df,0x369,0x2d8)+'g'],'c_idquanzhong':extension_settings[extensionName]['c_idquanzh'+_0x18fa72(0xb5,0x118,0xfc,0x9d)],'c_xijie':extension_settings[extensionName]['c_xijie'],'c_fenwei':extension_settings[extensionName][_0x18fa72(0xd4,0x192,0x18c,0x179)],'comfyuicankaotupian':window[_0x18fa72(0x14e,0xae,0x141,0x157)+'kaotupian'],'ipa':extension_settings[extensionName][_0x18fa72(-0x20,-0x13,0x5f,0x70)],'scheduler':extension_settings[extensionName][_0x58ac99(0x58f,0x4f1,0x4b8,0x548)+'heduler'],'vae':extension_settings[extensionName]['comfyui_va'+'e'],'clip':extension_settings[extensionName][_0x58ac99(0x4b2,0x4c6,0x3f8,0x360)+_0x18fa72(0xc7,0x184,0x172,0x101)]};const _0x279aa1='\x0a---\x20生图参数报'+'告\x20---\x0a正面提示'+'词:\x20'+_0xb5d515[_0x18fa72(0x1fb,0x121,0x1df,0x1d5)]+_0x18fa72(0x121,0x1fa,0x6d,0x149)+_0xb5d515[_0x58ac99(0x3cb,0x33c,0x3a7,0x2f1)+_0x18fa72(0x14f,0x96,0x139,0xa0)]+_0x58ac99(0x471,0x4c3,0x42c,0x4f5)+_0xb5d515[_0x18fa72(0x121,0x1b6,0x13c,0x1a0)]+'\x0a采样器:\x20'+_0xb5d515['sampler_na'+'me']+_0x58ac99(0x519,0x42e,0x4d4,0x449)+_0xb5d515[_0x58ac99(0x351,0x365,0x3b7,0x34b)]+(_0x58ac99(0x44f,0x348,0x3a8,0x3cc)+':\x20')+_0xb5d515[_0x18fa72(0x0,-0x3a,0x2d,0x8d)]+'\x0a种子:\x20'+_0xb5d515[_0x58ac99(0x446,0x554,0x4fe,0x5a2)]+_0x18fa72(0xf0,0x211,0x155,0x175)+_0xb5d515['width']+'x'+_0xb5d515[_0x58ac99(0x451,0x579,0x4ae,0x483)]+_0x18fa72(0x155,0x23d,0x181,0x1a5)+_0xb5d515[_0x58ac99(0x3ce,0x4d2,0x460,0x40c)]+(_0x58ac99(0x431,0x4dd,0x50e,0x528)+':\x20')+_0xb5d515['scheduler']+('\x0a---------'+'----------'+'-\x0a');_0xc71677[_0x58ac99(0x30e,0x300,0x373,0x356)](addLog,_0x279aa1);const _0x21f417=_0xc71677['UkiHL'];let _0x41c668=extension_settings[extensionName][_0x58ac99(0x4d0,0x423,0x3ef,0x42a)];try{const _0x4224e7=JSON[_0x18fa72(0xa4,0x14d,0xea,0xa4)](_0x41c668),_0x14f334=Object[_0x58ac99(0x460,0x489,0x405,0x40c)](_0x4224e7)[_0x58ac99(0x367,0x428,0x3d9,0x454)](_0x1d5ffb=>_0x1d5ffb&&_0x1d5ffb[_0x58ac99(0x3ee,0x3c6,0x46f,0x3a2)])['length'];if(_0xc71677['huCPL'](_0x14f334,0x1f9*0x13+-0x6*0x1db+-0x545*0x5)){_0xc71677[_0x58ac99(0x4a5,0x454,0x479,0x54f)](addLog,'检测到\x20'+_0x14f334+(_0x18fa72(0x16d,0x9f,0x10d,0xe0)+_0x18fa72(0x140,0x13c,0x8f,0x10f)));const _0x428aab=extension_settings[extensionName]?.['comfyuiCac'+'he']?.[_0x18fa72(0x48,-0x78,0xc1,0x22)]||{},_0x2c8380=processSkippedNodes(_0x4224e7,_0x428aab);_0x41c668=JSON['stringify'](_0x2c8380),_0xc71677['lJimR'](addLog,_0x18fa72(0x8b,0xd9,0x1fd,0x142)+_0x18fa72(0x124,0x170,0x195,0x13a)+(Object[_0x58ac99(0x3f9,0x54e,0x47e,0x556)](_0x428aab)[_0x18fa72(0x8c,0x19e,0x14c,0xc0)]>0x12ae+0x2343+0x1*-0x35f1?_0xc71677[_0x58ac99(0x4dc,0x500,0x49b,0x4d8)]:''));}}catch(_0x6ed875){addLog(_0x58ac99(0x3e2,0x39d,0x472,0x3cb)+_0x18fa72(0xc7,-0x8c,-0x66,0x4e)+_0x6ed875[_0x58ac99(0x503,0x462,0x464,0x41b)]);}_0xb5d515=await _0xc71677['gSVqj'](replacepro,_0xb5d515,_0x41c668),_0xb5d515=_0x58ac99(0x4ee,0x4c9,0x4a4,0x4f9)+'d\x22:\x22'+_0x21f417+(_0x58ac99(0x326,0x36e,0x37d,0x32a)+'\x22:')+_0xb5d515+'}',_0xc71677[_0x18fa72(0x1ee,0x1c8,0x21a,0x182)](addLog,_0x18fa72(0x1fa,0x25f,0x1eb,0x1ba)+_0x18fa72(0xf1,0x16e,0x1f6,0x12c)+_0x58ac99(0x5d0,0x575,0x51d,0x56c)+_0xb5d515);let _0x5d553d=!![];while(_0x5d553d){if(_0xc71677[_0x18fa72(0x14e,0x1bb,0x190,0x113)]===_0x58ac99(0x3cd,0x43f,0x37c,0x450)){if(_0x4beb9b[_0x58ac99(0x2d5,0x483,0x3b1,0x36e)](_0xc71677['sfhhR']))return _0x2e5933;if(_0x442442[_0x18fa72(-0x4a,0xf9,0x38,0x68)](':'))return _0x58ac99(0x3e2,0x47e,0x47d,0x470)+_0x536bd1+(_0x58ac99(0x4b9,0x591,0x4d7,0x541)+'rs:')+_0x1da5aa+'>';return _0x18fa72(0x1c2,0x1de,0x1a4,0x134)+_0x2426ad+(_0x58ac99(0x4a0,0x5a2,0x4d7,0x42b)+_0x18fa72(0xde,0xb3,0x1aa,0x127))+_0x40586c+_0x58ac99(0x541,0x4e8,0x4a6,0x4b3);}else window[_0x18fa72(0x1a1,0x12c,0x296,0x1c7)]?_0x5d553d=![]:await _0xc71677[_0x58ac99(0x452,0x3f0,0x393,0x44c)](sleep,0xbc7+-0xc9d*-0x1+-0x147c);};try{window[_0x58ac99(0x5b9,0x523,0x510,0x5e9)]=!![],taskQueue[_0x58ac99(0x43a,0x491,0x43f,0x3fe)+'us'](_0x2967af,_0xc71677['vWdHb']);let _0x22f584;if(extension_settings[extensionName][_0x18fa72(0x12c,0x61,0xef,0xb8)]===_0x18fa72(0x196,0x198,0x1d6,0xf8)){const _0x1c2192={};_0x1c2192['url']=_0x3a6d47,_0x1c2192[_0x18fa72(0x170,0x280,0x287,0x1d5)]=_0xb5d515;const _0x17120c=await _0xc71677['gSVqj'](fetch,_0xc71677['oLhQC'],{'method':_0xc71677[_0x58ac99(0x4d6,0x4da,0x4a9,0x50a)],'body':JSON[_0x18fa72(0x22c,0x1ed,0x92,0x153)](_0x1c2192),'headers':getRequestHeaders(window[_0x58ac99(0x457,0x4ea,0x4fa,0x4f4)])});if(!_0x17120c['ok']){const _0x288004=await _0x17120c['text']();addLog(_0x58ac99(0x43c,0x38e,0x3bf,0x451)+_0x58ac99(0x555,0x442,0x4fc,0x437)+_0x58ac99(0x59a,0x544,0x4d0,0x58c)+_0x288004);throw new Error(_0x58ac99(0x5de,0x577,0x50b,0x42f)+_0x17120c[_0x58ac99(0x462,0x48b,0x3c7,0x446)]+_0x18fa72(0x115,0xae,0xf7,0x163)+_0x288004);}const _0x47c7c2=await _0x17120c['text']();let _0x5a9e6d,_0x4770b4;try{if(_0xc71677['hNtQO'](_0x18fa72(0xe1,0xf9,0xd3,0xea),_0xc71677[_0x58ac99(0x3f7,0x386,0x453,0x460)])){const _0x558548=JSON[_0x58ac99(0x488,0x479,0x3ed,0x3ee)](_0x47c7c2);_0x5a9e6d=_0x558548['format'],_0x4770b4=_0x558548[_0x18fa72(0x169,0x262,0x23e,0x195)];}else{const _0x491595=_0x3239cd[_0x18fa72(0xee,-0x35,0x9e,0xa4)](_0x344b38);_0x4aa425=_0x491595[_0x58ac99(0x5cf,0x5d9,0x500,0x4f6)],_0x18983f=_0x491595[_0x18fa72(0x232,0xce,0x152,0x195)];}}catch(_0x2550ab){if(_0xc71677['PDTKP']===_0xc71677[_0x18fa72(0x37,0xd9,0x1a4,0x116)]){const _0x1e0ce6=_0xc71677[_0x18fa72(0x20f,0x163,0x1f1,0x18d)][_0x58ac99(0x523,0x420,0x4e1,0x50d)]('|');let _0x5882db=-0x198f+-0x1bba+0x3549;while(!![]){switch(_0x1e0ce6[_0x5882db++]){case'0':_0x4cea1=null;continue;case'1':_0x442bc4(_0xc71677['ZkApe']);continue;case'2':_0x27157f['completeTa'+'sk'](_0x4ce635,![]);continue;case'3':return;case'4':_0x82cba9['error'](_0xc71677[_0x18fa72(0x105,0x133,0x1c5,0xe5)]);continue;}break;}}else _0xc71677[_0x58ac99(0x41c,0x3f9,0x495,0x428)](addLog,_0x18fa72(0x97,0x1b6,0xdc,0xe2)+'尝试作为原始\x20Bas'+'e64\x20数据处理。'),_0x5a9e6d=_0xc71677[_0x58ac99(0x43e,0x40a,0x35f,0x2b5)],_0x4770b4=_0x47c7c2;}if(!_0x4770b4){if(_0xc71677[_0x58ac99(0x4b5,0x58e,0x4bf,0x574)](_0xc71677[_0x58ac99(0x4d5,0x52c,0x4db,0x4c0)],_0xc71677[_0x58ac99(0x3a1,0x399,0x473,0x3d0)])){_0xc71677[_0x18fa72(0x1ed,0x197,0x172,0x14c)](addLog,_0xc71677[_0x58ac99(0x410,0x469,0x446,0x3a0)]);throw new Error(_0xc71677[_0x58ac99(0x3f1,0x343,0x3f5,0x3ca)]);}else _0x4ba964[_0x18fa72(0xdb,0x1db,0x18f,0x143)+_0x3f592b+_0x18fa72(0x1ca,0x174,0x15a,0x181)]&&(_0x558b47=_0xc71677[_0x18fa72(0xe7,0x14a,0x132,0x12e)](_0xc71677[_0x58ac99(0x485,0x4e4,0x477,0x4d4)](_0x1545d7,_0xc71677['foqQk']),_0xc71677[_0x18fa72(0x1db,0x1e4,0x17c,0x16d)](_0x233084,_0x5bf2a5[_0x58ac99(0x3b6,0x473,0x48c,0x498)+_0x1e52c4+_0x18fa72(0x12e,0x1f4,0x16a,0x181)])));}return addLog(_0xc71677['WQinq']),_0x22f584=_0x58ac99(0x442,0x484,0x3eb,0x457)+'/'+_0x5a9e6d+';base64,'+_0x4770b4,{'image':_0x22f584,'change':_0xc71677[_0x58ac99(0x4d7,0x385,0x465,0x4e3)](_0x318571,''),'isVideo':![],'format':_0x5a9e6d};}else{if(_0xc71677['OMWnX']('vwFTv',_0xc71677['qzOCK'])){const _0xd65694=new URL(_0x3a6d47+_0xc71677[_0x58ac99(0x5de,0x4b0,0x501,0x464)]),_0x4e3917=await _0xc71677[_0x58ac99(0x5dd,0x4b1,0x505,0x4c9)](fetch,_0xd65694,{'method':_0xc71677[_0x58ac99(0x3fe,0x418,0x4a9,0x572)],'body':_0xb5d515,'headers':{'Content-Type':_0xc71677[_0x58ac99(0x385,0x3bf,0x391,0x2fc)]}});if(!_0x4e3917['ok']){const _0x3b5d05=await _0x4e3917[_0x18fa72(0x14c,0xd2,0x15d,0xc2)]();_0xc71677[_0x18fa72(-0x8,-0x77,0x95,0x63)](addLog,_0x18fa72(0x138,0x13b,-0x41,0x76)+_0x18fa72(0x1ab,0xfd,0xb1,0xfc)+_0x18fa72(-0x15,0x129,0x141,0x7f)+_0x3b5d05);throw new Error('请求失败,状态码:\x20'+_0x4e3917[_0x58ac99(0x373,0x358,0x3c7,0x352)]+_0x18fa72(0x1bb,0x142,0xf1,0x163)+_0x3b5d05);}const _0x241480=await _0x4e3917['json']();let _0x3de72c=_0x241480['prompt_id'],_0xf7daf8=-0x23a5+-0x2*0x210+0x27c5*0x1;while(!![]){try{if(!taskQueue[_0x18fa72(-0x95,-0x2b,-0x78,0x1c)+'eue'](_0x2967af)){addLog(_0x58ac99(0x349,0x3b5,0x367,0x2ba)+'在中断\x20ComfyU'+_0x58ac99(0x46c,0x46f,0x442,0x470));try{await _0xc71677[_0x58ac99(0x539,0x5b3,0x4e5,0x5c4)](fetch,_0x3a6d47+('/api/inter'+_0x18fa72(0x190,0x82,0xb7,0xee)),{'method':_0xc71677[_0x18fa72(0xb1,0x1de,0xd6,0x160)]});}catch(_0x4adf9a){if(_0xc71677['YLelj'](_0xc71677[_0x18fa72(0x13f,0x12c,0x155,0x106)],_0xc71677[_0x58ac99(0x44c,0x3e3,0x41f,0x484)]))return _0x3455ca[_0x18fa72(0x1b9,0x170,0x43,0x119)]()[_0x58ac99(0x5aa,0x5df,0x507,0x56d)](LWUJPq[_0x18fa72(0x46,0x60,0x48,0xc8)])[_0x18fa72(0xfc,0xaf,0x1d6,0x119)]()[_0x18fa72(0x63,0x132,0x17f,0xa1)+'r'](_0x947a1d)[_0x18fa72(0x287,0x21f,0xe7,0x1be)](LWUJPq[_0x18fa72(0x5a,0x7e,0x162,0xc8)]);else console[_0x58ac99(0x34a,0x39d,0x360,0x385)](_0xc71677[_0x18fa72(0x1d1,0x26d,0x2a4,0x1cb)],_0x4adf9a);}throw new Error(_0xc71677[_0x58ac99(0x59b,0x451,0x4ec,0x541)]);}const _0x3ef0ab=await _0xc71677[_0x58ac99(0x567,0x44e,0x4a3,0x55a)](fetch,_0x3a6d47+_0x58ac99(0x467,0x569,0x4a2,0x524)+_0x3de72c);if(!_0x3ef0ab['ok']){if(_0xc71677[_0x18fa72(0x15e,0x282,0x142,0x1a1)](_0xc71677[_0x58ac99(0x43c,0x41c,0x4c3,0x508)],_0xc71677['oqMka'])){_0x1fb3ca(_0x18fa72(0xec,0x6,0xe5,0x53)+'），服务器可能已断开'+_0x58ac99(0x41e,0x45d,0x443,0x4a3));throw new _0x14d7f9(_0x18fa72(0x196,0xce,0xf4,0x167)+_0x58ac99(0x2fe,0x2df,0x38c,0x383));}else{_0xc71677[_0x58ac99(0x46e,0x406,0x390,0x42e)](addLog,_0x18fa72(0x27c,0x23a,0x24a,0x1c1)+'\x20'+_0x3ef0ab[_0x18fa72(0x8c,0x64,0x23,0x7e)]);throw new Error(_0x18fa72(0x134,-0x5c,-0x56,0x5d)+_0x58ac99(0x3b9,0x40f,0x450,0x3ad)+_0x18fa72(0xa5,0x10c,-0x12,0x3c)+_0x3ef0ab[_0x58ac99(0x401,0x2e7,0x3c7,0x423)]);}}let _0x2769ee=await _0x3ef0ab[_0x58ac99(0x3c2,0x29c,0x366,0x2bc)]();console['log'](_0xc71677[_0x18fa72(0x13e,0x8e,0x92,0x8f)],_0x2769ee);if(_0x2769ee[_0x58ac99(0x47a,0x3bf,0x3b5,0x424)+_0x18fa72(0xb4,0x14e,0x41,0x97)](_0x3de72c)){function _0x113e63(_0x52570d){function _0x1f1c5c(_0x6881bc,_0x1ef182,_0x3336a3,_0x232b37){return _0x58ac99(_0x6881bc-0x144,_0x6881bc,_0x1ef182-0x117,_0x232b37-0xbe);}const _0x46dd0a={'kvQAI':_0xc71677[_0x1f1c5c(0x411,0x4bb,0x454,0x4b2)],'IJQhc':function(_0x378fe6,_0xe82853){function _0xb9d96c(_0x1d9c51,_0x14983c,_0xba900d,_0x15c7ba){return _0x1f1c5c(_0xba900d,_0x1d9c51- -0x5f6,_0xba900d-0xfc,_0x15c7ba-0x136);}return _0xc71677[_0xb9d96c(-0x29,-0x96,0x15,-0x50)](_0x378fe6,_0xe82853);},'wdRlW':_0xc71677[_0x1f1c5c(0x3f6,0x47f,0x404,0x558)],'VngEa':function(_0x571aa0,_0x4292ac){return _0xc71677['PeMde'](_0x571aa0,_0x4292ac);},'AKIhn':function(_0x1dafdf,_0x21da4a){function _0x3510f6(_0x299e5a,_0x44c028,_0x51fb6d,_0x48c25b){return _0x1c2f3b(_0x44c028,_0x44c028-0x29,_0x51fb6d- -0x20b,_0x48c25b-0x87);}return _0xc71677[_0x3510f6(0x3ad,0x372,0x2f6,0x262)](_0x1dafdf,_0x21da4a);},'OOPaB':function(_0x1fb094,_0x4faba5){return _0x1fb094+_0x4faba5;}};for(const _0x102641 in _0x52570d){if(_0xc71677[_0x1c2f3b(0x59d,0x50e,0x4e3,0x4da)](_0xc71677[_0x1f1c5c(0x513,0x5c8,0x5e3,0x580)],_0xc71677[_0x1c2f3b(0x4a6,0x4de,0x4aa,0x4dc)])){_0x2181a4(_0x46dd0a[_0x1c2f3b(0x3e1,0x3b5,0x431,0x3fe)]),_0x25e157=_0x46dd0a[_0x1c2f3b(0x4cb,0x465,0x454,0x436)](_0x381f96,_0x54d201),_0x49f759=_0x2ceb45[_0x46dd0a[_0x1c2f3b(0x552,0x45d,0x4ae,0x520)]];for(let _0x3a806b=0x2474+-0x164d+-0xe26*0x1;_0x46dd0a['VngEa'](_0x3a806b,-0x5f9+-0x699+0x166*0x9);_0x3a806b++){_0x3f83ea[_0x1f1c5c(0x593,0x5a3,0x629,0x50d)+_0x3a806b+_0x1c2f3b(0x575,0x58b,0x4c3,0x540)]&&(_0x369f50=_0x46dd0a[_0x1c2f3b(0x338,0x3af,0x3b9,0x2ec)](_0x46dd0a[_0x1f1c5c(0x4f3,0x5a6,0x65a,0x541)](_0x26d460,',\x20'),_0x26774c[_0x1f1c5c(0x567,0x5a3,0x67f,0x67d)+_0x3a806b+_0x1c2f3b(0x4d4,0x4f5,0x4c3,0x47e)]));}}else{const _0x17bdbe=_0x52570d[_0x102641];if(_0x17bdbe[_0x1c2f3b(0x2fe,0x493,0x3be,0x472)]&&_0xc71677['huCPL'](_0x17bdbe[_0x1c2f3b(0x462,0x37a,0x3be,0x34d)]['length'],-0x1cc0+-0x658+0x8*0x463)){const _0x452be5=_0x17bdbe['images']['find'](_0x2d2df7=>_0x2d2df7[_0x1c2f3b(0x36f,0x400,0x35a,0x383)]==='output');if(_0x452be5){const _0x3c27fa={};return _0x3c27fa[_0x1f1c5c(0x4aa,0x4b0,0x41b,0x4bc)]=_0x452be5['filename'],_0x3c27fa[_0x1f1c5c(0x45f,0x4d4,0x426,0x59d)]=_0x452be5[_0x1f1c5c(0x591,0x4d4,0x4b8,0x4f4)]||'',_0x3c27fa['isVideo']=![],_0x3c27fa[_0x1f1c5c(0x590,0x617,0x550,0x6e8)]=_0xc71677[_0x1f1c5c(0x4a3,0x4d1,0x523,0x484)],_0x3c27fa;}continue;}if(_0x17bdbe[_0x1c2f3b(0x397,0x3f6,0x446,0x45e)]&&_0xc71677[_0x1c2f3b(0x563,0x481,0x497,0x45e)](_0x17bdbe[_0x1c2f3b(0x42d,0x3c9,0x446,0x4df)]['length'],0x1*0x2692+0x45d*-0x8+-0x3aa)){const _0x909dcf=_0x17bdbe[_0x1c2f3b(0x49f,0x444,0x446,0x432)][0x8d8+0x80+-0x958],_0x451035=_0x909dcf[_0x1f1c5c(0x6b5,0x617,0x6e3,0x542)]&&_0x909dcf[_0x1c2f3b(0x548,0x54a,0x4f9,0x483)]['startsWith'](_0xc71677['idmqb']),_0x26e2c3={};return _0x26e2c3[_0x1c2f3b(0x321,0x42f,0x392,0x419)]=_0x909dcf['filename'],_0x26e2c3[_0x1f1c5c(0x42a,0x4d4,0x51a,0x531)]=_0x909dcf[_0x1c2f3b(0x3ea,0x311,0x3b6,0x2ea)]||'',_0x26e2c3[_0x1c2f3b(0x418,0x3cd,0x378,0x336)]=_0x451035,_0x26e2c3[_0x1c2f3b(0x4fa,0x482,0x4f9,0x51c)]=_0x909dcf['format']||_0x1c2f3b(0x4aa,0x40a,0x4eb,0x4e5),_0x26e2c3;}}}function _0x1c2f3b(_0x4db7e9,_0x5171e1,_0x47d420,_0x2573df){return _0x18fa72(_0x4db7e9-0xc8,_0x4db7e9,_0x47d420-0x1bc,_0x47d420-0x342);}return null;}let _0x3d388e=_0x113e63(_0x2769ee[_0x3de72c][_0xc71677[_0x58ac99(0x421,0x358,0x3ab,0x47e)]]);if(!_0x3d388e){if(_0xc71677[_0x58ac99(0x523,0x48b,0x498,0x54e)](_0xc71677[_0x58ac99(0x35e,0x3ca,0x36c,0x38c)],_0xc71677[_0x18fa72(-0x3a,0xae,0xee,0x80)]))_0x38da3e=_0x14a302[_0x58ac99(0x55e,0x5cb,0x50c,0x52e)](_0xc71677['Yipaa'],_0xc71677[_0x58ac99(0x2a8,0x334,0x371,0x331)]);else throw new Error(_0xc71677['siCCZ']);}window[_0x58ac99(0x408,0x2ea,0x38d,0x2de)+_0x18fa72(0x194,0x1f9,0xc9,0x13d)]=_0x3d388e;const _0x5e0f04=_0x3d388e[_0x18fa72(0xb0,-0x82,0xf2,0x36)]?'视频':'图片';_0xc71677[_0x18fa72(0x116,0x13a,0x137,0x137)](addLog,_0x5e0f04+(_0x58ac99(0x397,0x465,0x3dd,0x3c9)+_0x58ac99(0x424,0x3ee,0x404,0x4ad)+')。'));let _0x49743b=_0x3a6d47+(_0x58ac99(0x4a8,0x497,0x4eb,0x558)+'name=')+_0x3d388e[_0x58ac99(0x382,0x2da,0x399,0x33c)]+('&subfolder'+'=')+_0xc71677['UOZLi'](encodeURIComponent,_0x3d388e[_0x58ac99(0x412,0x32b,0x3bd,0x315)])+('&type=outp'+'ut');const _0x466cee=await fetch(_0x49743b);if(!_0x466cee['ok'])throw new Error(_0x18fa72(0x257,0xf9,0x223,0x1cd)+':\x20'+_0x466cee['status']);let _0x8e0202=await _0x466cee[_0x58ac99(0x4b0,0x50b,0x48d,0x42f)]();if(_0x3d388e[_0x58ac99(0x2d0,0x2d2,0x37f,0x3a8)]){if(_0xc71677[_0x58ac99(0x29d,0x3a0,0x377,0x2e6)](_0xc71677[_0x18fa72(0x18e,0x49,0x4d,0xc9)],_0xc71677[_0x58ac99(0x41b,0x37a,0x412,0x445)])){let _0x2dac42=_0x58ac99(0x360,0x3a6,0x388,0x37f);if(_0x3d388e[_0x18fa72(0x1f8,0x162,0x19c,0x1b7)]){if(_0x3d388e[_0x58ac99(0x4db,0x597,0x500,0x50c)][_0x58ac99(0x38c,0x484,0x3b1,0x2f3)](_0x18fa72(0x191,0x1fd,0x149,0x1b4)))_0x2dac42=_0xc71677[_0x58ac99(0x3b4,0x354,0x3d0,0x370)];else(_0x3d388e[_0x18fa72(0x1b2,0x261,0x236,0x1b7)]['includes'](_0xc71677[_0x58ac99(0x4f1,0x45c,0x48e,0x4bd)])||_0x3d388e['format']['includes'](_0xc71677[_0x58ac99(0x421,0x469,0x43d,0x4a4)]))&&(_0x2dac42=_0xc71677[_0x18fa72(0x60,0xda,0xe9,0xcb)]);}const _0x2b9fa8=await _0x8e0202[_0x58ac99(0x3ce,0x4d7,0x490,0x465)+'r'](),_0x111134={};_0x111134[_0x18fa72(-0x94,-0xc1,-0x80,0x18)]=_0x2dac42,_0x8e0202=new Blob([_0x2b9fa8],_0x111134),console[_0x58ac99(0x392,0x3f8,0x3b8,0x332)](_0x58ac99(0x359,0x2dd,0x3a3,0x34c)+'视频\x20MIME\x20类型'+_0x18fa72(-0x17,0xd4,-0x30,0x55)+_0x3d388e[_0x58ac99(0x5e1,0x42f,0x500,0x503)]+_0x58ac99(0x463,0x422,0x3e3,0x42c)+_0x2dac42);}else _0x46ee0d['initialize'+_0x18fa72(0x54,0x71,0xa0,0x6b)+_0x18fa72(0x4c,0x18e,0xf1,0xdc)]=!![],_0xc71677[_0x18fa72(0x171,0x168,0x138,0xed)](_0x53d9dd);}_0x22f584=await new Promise((_0x50da2e,_0x37ee2a)=>{const _0x2ddcaa={'FWtBB':function(_0x5c2218,_0x1754ab){function _0x7f2ae0(_0x1890ee,_0x7296e5,_0x4c7ca3,_0x47abdf){return _0x1f62(_0x4c7ca3- -0x103,_0x47abdf);}return _0xc71677[_0x7f2ae0(-0x88,0xca,0xb,-0x7c)](_0x5c2218,_0x1754ab);},'JjnNS':_0xf5679d(0x2ee,0x212,0x293,0x138)};function _0x5390a4(_0x23ed8b,_0x2afd79,_0x20926f,_0x9a7823){return _0x58ac99(_0x23ed8b-0x104,_0x2afd79,_0x23ed8b-0x103,_0x9a7823-0xaa);}function _0xf5679d(_0x5b7ddf,_0x4d4dba,_0x157125,_0x1d5a0d){return _0x58ac99(_0x5b7ddf-0x110,_0x157125,_0x4d4dba- -0x201,_0x1d5a0d-0x88);}if(_0xc71677['fkZzU']!==_0xc71677[_0xf5679d(0x1f1,0x22c,0x1c5,0x2ad)]){const _0x453c29=new FileReader();_0x453c29[_0xf5679d(0x196,0x17f,0x115,0xd2)]=()=>_0x50da2e(_0x453c29[_0x5390a4(0x501,0x53d,0x463,0x46c)]),_0x453c29['onerror']=_0x37ee2a,_0x453c29[_0x5390a4(0x547,0x5aa,0x4e1,0x5db)+_0x5390a4(0x5ea,0x6c1,0x68d,0x6b3)](_0x8e0202);}else _0x2ddcaa[_0xf5679d(0x1a6,0x186,0x1b5,0x22f)](_0x4102f8,_0x5390a4(0x52e,0x48f,0x600,0x5ba)+_0x5390a4(0x49d,0x4f4,0x545,0x4e9)+_0xf5679d(0x13c,0x1b1,0x279,0x133)),_0x34a0a1=_0x2ddcaa[_0xf5679d(0x2aa,0x1d1,0x19d,0x138)],_0x192fa6=_0x3ffd15;});break;}await _0xc71677[_0x18fa72(0x7c,0x1be,0x174,0x130)](sleep,0x1214*0x1+0x2*0xc7f+0x12*-0x22d),_0xf7daf8++;if(_0xf7daf8>-0x1*0x25d7+-0x1*0x638+0x3*0xffd){if(_0xc71677['jVPcg'](_0xc71677[_0x58ac99(0x3b2,0x38a,0x41a,0x359)],'FTMAA'))for(let _0x27b8a3=-0x1f1*-0x6+-0x1596+0x9f1;_0xc71677[_0x18fa72(0x33,-0x31,0x2f,0x39)](_0x27b8a3,-0x21*-0x29+0x902*0x4+-0x294d);_0x27b8a3++){_0x4c6caa[_0x58ac99(0x437,0x509,0x48c,0x405)+_0x27b8a3+_0x18fa72(0x17e,0x1ba,0x105,0x181)]&&(_0x293852=_0xc71677['ExbCo'](_0x7989ba+_0xc71677[_0x18fa72(0xce,0x1e4,0xc6,0x19b)],_0xc71677[_0x58ac99(0x3d4,0x2e3,0x393,0x3b3)](_0x1c39e7,_0x34cc55[_0x58ac99(0x42b,0x430,0x48c,0x4f7)+_0x27b8a3+_0x58ac99(0x54b,0x5a0,0x4ca,0x569)])));}else{_0xc71677['qhpgZ'](addLog,_0xc71677[_0x18fa72(0x14e,-0x1,0x123,0xdd)]);throw new Error(_0xc71677[_0x58ac99(0x45c,0x3b2,0x457,0x44f)]);}}}catch(_0x5452af){addLog('轮询时发生异常:\x20'+_0x5452af);throw _0x5452af;}}window['xiancheng']=!![];if(!_0x22f584){if(_0x18fa72(0x254,0x104,0x185,0x1d1)===_0xc71677[_0x18fa72(0x203,0x1bb,0xea,0x162)]){const _0x1442ea=_0x180d15[_0x58ac99(0x38e,0x3e4,0x44d,0x508)][-0x3d4+0x1df7*-0x1+-0x21cb*-0x1],_0x490dee=_0x1442ea[_0x18fa72(0x129,0xfe,0x1ea,0x1b7)]&&_0x1442ea[_0x18fa72(0x24e,0x17e,0x26d,0x1b7)]['startsWith'](_0xc71677['idmqb']),_0x6b1482={};return _0x6b1482[_0x58ac99(0x317,0x30f,0x399,0x43b)]=_0x1442ea[_0x18fa72(-0x59,-0x68,-0x8,0x50)],_0x6b1482[_0x18fa72(0x17,0x3a,0x45,0x74)]=_0x1442ea[_0x58ac99(0x462,0x431,0x3bd,0x431)]||'',_0x6b1482[_0x58ac99(0x435,0x301,0x37f,0x39c)]=_0x490dee,_0x6b1482[_0x18fa72(0x26a,0x1c5,0x1aa,0x1b7)]=_0x1442ea['format']||_0x18fa72(0x115,0x180,0x104,0x1a9),_0x6b1482;}else throw new Error(_0xc71677[_0x58ac99(0x4d8,0x3ca,0x454,0x3dc)]);}const _0xb9f2b2=window[_0x18fa72(0xf0,-0x56,-0x95,0x44)+_0x58ac99(0x541,0x50a,0x486,0x482)]?.[_0x18fa72(-0x4b,-0x10,0x69,0x36)]||![],_0x1b232b=window[_0x18fa72(-0x38,-0x49,-0x7e,0x44)+_0x58ac99(0x41e,0x565,0x486,0x45b)]?.[_0x58ac99(0x482,0x47c,0x500,0x420)]||_0xc71677[_0x58ac99(0x368,0x3f7,0x3ba,0x3b0)];_0xc71677[_0x18fa72(0x19c,0xc5,0x128,0x16d)](addLog,_0x58ac99(0x404,0x54b,0x4c1,0x59f)+(_0xb9f2b2?'视频':'图片')+(_0x18fa72(0xb0,0x12d,0x103,0x171)+_0x18fa72(0xa9,0x1bb,0xf0,0x188)+'L。')),taskQueue[_0x18fa72(0x117,0x41,0x66,0xb7)+'sk'](_0x2967af,!![]),currentTaskId=null;const _0xdc76de={};return _0xdc76de[_0x58ac99(0x4c1,0x598,0x517,0x4b9)]=_0x22f584,_0xdc76de[_0x18fa72(0x2e,0x113,0xea,0xc6)]=_0x318571||'',_0xdc76de[_0x58ac99(0x39c,0x2c4,0x37f,0x452)]=_0xb9f2b2,_0xdc76de[_0x58ac99(0x4e0,0x4df,0x500,0x46f)]=_0x1b232b,_0xdc76de;}else _0x244c9b(_0x58ac99(0x549,0x49c,0x472,0x4cb)+_0x58ac99(0x443,0x3d1,0x397,0x391)+_0x2dd5cd['message']);}}catch(_0x1a0e63){if(_0xc71677['QgagP']!==_0x18fa72(0x83,0x73,0xec,0xd7)){const _0x773789=_0xc71677[_0x58ac99(0x4bd,0x482,0x48a,0x3df)]['split']('|');let _0x46a5bf=-0x1*-0xbbd+0x34*0x1+-0xbf1;while(!![]){switch(_0x773789[_0x46a5bf++]){case'0':console[_0x58ac99(0x466,0x3a3,0x482,0x422)](_0x58ac99(0x4f2,0x475,0x4e8,0x433)+_0x18fa72(0xec,0x155,0x10e,0xce)+_0x18fa72(0x59,0x7,0x8d,0xa7),_0x1a0e63);continue;case'1':_0xc71677[_0x18fa72(-0x20,-0x25,0x34,0x35)](addLog,_0x18fa72(-0x3,0x2,0x13a,0x8b)+'误:\x20'+_0x1a0e63[_0x18fa72(0x16e,0x183,0xee,0x11b)]);continue;case'2':if(_0x1a0e63[_0x18fa72(0x1d7,0x8c,0x158,0x11b)]===_0xc71677[_0x18fa72(0x244,0x23b,0x11c,0x1a3)]){}else taskQueue[_0x18fa72(0x111,0x4c,0x16c,0xb7)+'sk'](_0x2967af,![]);continue;case'3':window[_0x58ac99(0x4b7,0x494,0x510,0x52f)]=!![];continue;case'4':currentTaskId=null;continue;case'5':throw _0x1a0e63;continue;}break;}}else _0x426914=_0x28e6ff[_0x18fa72(0x223,0x27f,0x26b,0x1c3)](_0xc71677[_0x18fa72(0x1c5,0x134,0x274,0x1ad)],_0xc71677[_0x18fa72(-0x47,0x94,0xb9,0x28)]),_0x4542f5=_0xa54802[_0x18fa72(0x134,0xed,0x123,0x1c3)](_0xc71677['sfhhR'],'');}}async function comfyuigenerate(_0x789db8){function _0x183017(_0x2bc42c,_0x6bd5b3,_0x25fb5d,_0x375df5){return _0x1f62(_0x375df5-0xea,_0x6bd5b3);}const _0x5df143={'AFQqh':function(_0x250d15,_0x5d6682){return _0x250d15(_0x5d6682);},'cWccf':_0x183017(0x216,0x227,0x1f7,0x22f),'EYqly':function(_0x565e19,_0x456070){return _0x565e19!==_0x456070;},'FWCVK':_0x36dd02(0x3a9,0x43f,0x34f,0x2ea),'kTcDI':_0x183017(0x308,0x236,0x2a2,0x2e3),'gAiZC':function(_0x1b4fc7,_0x51fdb0,_0x395452,_0x3e7c3e){return _0x1b4fc7(_0x51fdb0,_0x395452,_0x3e7c3e);},'XQkXu':function(_0x1285c8,_0x334c37){return _0x1285c8||_0x334c37;},'NZoWS':_0x36dd02(0x38a,0x444,0x3cb,0x305)+_0x183017(0x2b9,0x1c8,0x221,0x2a8)+'nse','FFadm':function(_0x9a715c,_0x381dda){return _0x9a715c||_0x381dda;},'LaLLv':'image','swuFy':_0x36dd02(0x3b2,0x337,0x427,0x38b),'VcwUo':_0x183017(0x1bb,0x1f1,0x21a,0x271)};let {id:_0x3c1857,prompt:_0x5bf497,width:_0x523825,height:_0xffa5d9,change:_0x1560db}=_0x789db8;_0x5df143['AFQqh'](addLog,'收到生图请求\x20(ID'+':\x20'+_0x3c1857+(_0x183017(0x2ad,0x349,0x20a,0x28a)+':\x20')+_0x5bf497+(_0x1560db?_0x36dd02(0x383,0x36f,0x3be,0x3fe)+'\x20'+_0x1560db:''));function _0x36dd02(_0x19da06,_0x24ba3a,_0x47ec48,_0x5f0dd5){return _0x1f62(_0x19da06-0x25a,_0x47ec48);}if(_0x1560db&&_0x1560db[_0x183017(0x29e,0x2b4,0x17f,0x1ed)](_0x5df143[_0x183017(0x218,0x295,0x224,0x1b4)])){_0x5df143[_0x183017(0x161,0x110,0x27d,0x1b6)](bananaGenerate,_0x789db8);return;}try{if(_0x5df143[_0x183017(0x3ad,0x299,0x280,0x2eb)](_0x5df143[_0x36dd02(0x3a0,0x47f,0x2e1,0x46f)],_0x5df143[_0x36dd02(0x3ea,0x4aa,0x4b8,0x489)])){const {image:_0xb0f732,change:_0x53e39c,isVideo:_0x3e33f9,format:_0x1982b3}=await generateComfyUIImage({'prompt':_0x5bf497,'width':_0x523825,'height':_0xffa5d9,'change':_0x1560db});if(extension_settings[extensionName]['cache']!='0'){const _0x22f9ec={};_0x22f9ec[_0x183017(0x267,0x2bb,0x2c4,0x24b)]=_0x53e39c,_0x22f9ec[_0x36dd02(0x32b,0x2e5,0x376,0x342)]=_0x3e33f9,_0x22f9ec['format']=_0x1982b3,await _0x5df143[_0x183017(0x1c9,0x289,0x311,0x29f)](setItemImg,_0x5bf497,_0xb0f732,_0x22f9ec),_0x5df143[_0x183017(0x102,0x10e,0x1ae,0x1b6)](addLog,(_0x3e33f9?'视频':'图像')+(_0x183017(0x35c,0x2e9,0x344,0x333)+_0x36dd02(0x3dd,0x30c,0x310,0x328))+_0x5bf497);}else addLog(_0x36dd02(0x454,0x4fd,0x41f,0x534)+'库');eventSource[_0x183017(0x2d5,0x332,0x2d1,0x26e)](EventType['GENERATE_I'+_0x36dd02(0x39e,0x3d7,0x453,0x418)+_0x36dd02(0x401,0x4ba,0x4d8,0x348)],{'id':_0x3c1857,'success':!![],'imageData':_0xb0f732,'prompt':_0x5bf497,'change':_0x53e39c,'isVideo':_0x5df143[_0x183017(0x256,0x135,0x1ef,0x1de)](_0x3e33f9,![]),'format':_0x1982b3||_0x36dd02(0x4c3,0x505,0x4c7,0x551)}),eventSource[_0x36dd02(0x3de,0x46f,0x4af,0x443)](_0x5df143[_0x183017(0x1fa,0x135,0x295,0x1dc)],{'id':_0x3c1857,'success':!![],'imageData':_0xb0f732,'prompt':_0x5bf497,'change':_0x53e39c,'isVideo':_0x5df143[_0x183017(0x2b1,0x268,0x372,0x2d6)](_0x3e33f9,![]),'format':_0x1982b3||_0x5df143[_0x36dd02(0x3c2,0x422,0x2f5,0x3bc)]}),addLog('发送'+(_0x3e33f9?'视频':'图片')+(_0x183017(0x33e,0x1d3,0x1e6,0x278)+':\x20')+_0x3c1857+')');}else{_0x5df143['AFQqh'](_0x4a6940,_0x36dd02(0x41a,0x4ee,0x493,0x3fa)+_0x5b64a7);throw _0x212ae5;}}catch(_0x1b1791){if(_0x5df143[_0x36dd02(0x45b,0x435,0x518,0x3b1)](_0x5df143[_0x36dd02(0x41d,0x389,0x409,0x394)],_0x5df143[_0x36dd02(0x472,0x3d0,0x42e,0x3e0)])){const _0x590614='生图流程捕获到异常\x20'+'(ID:\x20'+_0x3c1857+_0x36dd02(0x412,0x39b,0x428,0x394)+_0x1b1791[_0x36dd02(0x410,0x48b,0x44e,0x472)];_0x5df143[_0x183017(0x247,0x234,0x159,0x1b6)](addLog,_0x36dd02(0x49d,0x4e9,0x571,0x474)+_0x590614),console[_0x36dd02(0x42e,0x45c,0x45a,0x35a)]('Error\x20gene'+_0x183017(0x2e5,0x2d1,0x29c,0x253)+'ge:',_0x1b1791);const _0x221cd6={};_0x221cd6['id']=_0x3c1857,_0x221cd6[_0x36dd02(0x344,0x3fe,0x2b7,0x31c)]=![],_0x221cd6[_0x36dd02(0x42e,0x4f3,0x403,0x491)]=_0x1b1791[_0x183017(0x28a,0x1f1,0x2ec,0x2a0)],_0x221cd6['prompt']=_0x5bf497,eventSource[_0x183017(0x247,0x32c,0x2b7,0x26e)](EventType[_0x36dd02(0x3d6,0x31e,0x3d2,0x371)+'MAGE_RESPO'+_0x36dd02(0x401,0x406,0x4cf,0x406)],_0x221cd6);const _0x4efc39={};_0x4efc39['id']=_0x3c1857,_0x4efc39[_0x36dd02(0x344,0x320,0x31d,0x2b6)]=![],_0x4efc39[_0x183017(0x21b,0x286,0x270,0x2be)]=_0x1b1791[_0x36dd02(0x410,0x39d,0x34a,0x407)],_0x4efc39[_0x36dd02(0x4ca,0x56b,0x592,0x508)]=_0x5bf497,eventSource[_0x36dd02(0x3de,0x3f0,0x3ea,0x381)](_0x5df143[_0x36dd02(0x34c,0x30e,0x2b5,0x35d)],_0x4efc39),_0x5df143[_0x183017(0x133,0x28e,0x25b,0x1b6)](addLog,'发送生图失败响应\x20('+'ID:\x20'+_0x3c1857+')');}else{const _0x572828=_0x44b5dc?function(){function _0x540db2(_0x115d6c,_0x525e3a,_0x5a98c1,_0xf16b89){return _0x36dd02(_0xf16b89- -0x6,_0x525e3a-0x52,_0x525e3a,_0xf16b89-0x57);}if(_0x194ad5){const _0x1d99c1=_0x2a1a19[_0x540db2(0x3a7,0x3c0,0x48c,0x482)](_0x17e1a9,arguments);return _0x56deec=null,_0x1d99c1;}}:function(){};return _0x23bb70=![],_0x572828;}}}function initializeComfyuiListener(){function _0x209a78(_0x581465,_0x4103e6,_0x4fe9ff,_0x819ae){return _0x1f62(_0x819ae- -0xef,_0x581465);}function _0xf70a9f(_0x151629,_0x353860,_0x5d0d7a,_0x51002b){return _0x1f62(_0x151629-0x8a,_0x5d0d7a);}const _0xf029fb={'uhFRr':function(_0x320fb1,_0x4dc72e){return _0x320fb1(_0x4dc72e);},'GfNym':'comfyui\x20生图'+_0x209a78(0x28,0x4e,0xbc,0xe7)+_0xf70a9f(0x13a,0x15b,0x112,0x66)};eventSource['on'](EventType[_0xf70a9f(0x206,0x27a,0x22d,0x17c)+_0xf70a9f(0x2a1,0x266,0x236,0x1f9)+'ST'],comfyuigenerate),_0xf029fb[_0x209a78(0xca,0xfd,0x1b8,0x115)](addLog,_0xf029fb[_0xf70a9f(0x2de,0x3af,0x309,0x30b)]);}export async function replaceWithcomfyui(){function _0xd426c6(_0x1b5087,_0x3a6d3f,_0xa2a3fd,_0x223ee1){return _0x1f62(_0x3a6d3f-0x1fa,_0x1b5087);}const _0x5159eb={'UsWpm':function(_0x2283ac,_0x4b6f22){return _0x2283ac(_0x4b6f22);},'jNOSz':_0x247b0a(0x50d,0x43c,0x439,0x4ea)+_0xd426c6(0x469,0x3d0,0x307,0x432)+_0xd426c6(0x2df,0x2aa,0x260,0x36a),'LKebN':function(_0x84fa51,_0x2a32a7){return _0x84fa51==_0x2a32a7;},'hLSTK':'comfyui','GMxdR':_0x247b0a(0x34f,0x2de,0x374,0x394),'HiIfu':'leVKl','CwMTh':function(_0x32ffca){return _0x32ffca();},'MrucT':function(_0x54f2c0,_0x41d946){return _0x54f2c0!==_0x41d946;},'sLYgc':'yNmlK','InHpd':_0x247b0a(0x38b,0x418,0x388,0x3e3),'Pljpn':_0x247b0a(0x411,0x3d9,0x439,0x3e6)+'事件监听器已关闭。'};function _0x247b0a(_0x3b8400,_0x5135fb,_0x541693,_0x5c2536){return _0x1f62(_0x541693-0x251,_0x3b8400);}if(_0x5159eb[_0xd426c6(0x406,0x3a9,0x2d1,0x36b)](extension_settings[extensionName][_0xd426c6(0x3da,0x3c7,0x34c,0x40f)],_0x5159eb[_0xd426c6(0x4e7,0x447,0x4f3,0x511)])){if(!window[_0x247b0a(0x4e0,0x4d3,0x496,0x526)+_0x247b0a(0x2c7,0x278,0x357,0x2bb)+_0xd426c6(0x2fc,0x371,0x2c9,0x342)]){if(_0x5159eb[_0xd426c6(0x318,0x3dd,0x359,0x3ef)]!==_0x5159eb['HiIfu'])window[_0xd426c6(0x38f,0x43f,0x3f1,0x38a)+_0xd426c6(0x28c,0x300,0x382,0x335)+_0xd426c6(0x37c,0x371,0x3bb,0x388)]=!![],initializeComfyuiListener();else return _0x4cc7ea;}_0x5159eb[_0xd426c6(0x27b,0x318,0x250,0x238)](initializeImageProcessing);}else _0x5159eb['MrucT'](_0x5159eb[_0x247b0a(0x35b,0x432,0x41b,0x43e)],_0x5159eb[_0xd426c6(0x251,0x310,0x3aa,0x2db)])?window[_0x247b0a(0x4cb,0x565,0x496,0x4fd)+_0x247b0a(0x3a9,0x3d7,0x357,0x2cf)+_0xd426c6(0x2a5,0x371,0x42a,0x439)]&&(eventSource[_0x247b0a(0x531,0x3ff,0x470,0x496)+_0x247b0a(0x390,0x484,0x3ad,0x40a)](EventType[_0x247b0a(0x4ab,0x444,0x3cd,0x441)+_0xd426c6(0x4f1,0x411,0x4c4,0x33c)+'ST'],comfyuigenerate),window['initialize'+_0xd426c6(0x391,0x300,0x337,0x259)+_0xd426c6(0x37e,0x371,0x3cb,0x43d)]=![],addLog(_0x5159eb[_0x247b0a(0x31e,0x3e7,0x37e,0x3c4)])):(_0x4fc25d['on'](_0x830fb9[_0xd426c6(0x2ee,0x376,0x3bc,0x3bb)+_0x247b0a(0x50e,0x4a3,0x468,0x476)+'ST'],_0x3cae03),_0x5159eb[_0x247b0a(0x3cb,0x4c1,0x401,0x3e1)](_0x4179f7,_0x5159eb['jNOSz']));}